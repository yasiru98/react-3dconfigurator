{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/playcanvas/build/playcanvas.mjs","../node_modules/react/jsx-runtime.js","../node_modules/react/index.js","../node_modules/object-assign/index.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_typeof","obj","Symbol","iterator","constructor","_possibleConstructorReturn","call","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","result","Super","getPrototypeOf","NewTarget","this","arguments","apply","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","create","value","_getPrototypeOf","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","minLen","n","slice","name","from","test","_slicedToArray","isArray","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","property","receiver","get","base","object","hasOwnProperty","desc","getOwnPropertyDescriptor","_toConsumableArray","iter","_createForOfIteratorHelper","allowArrayLike","it","F","s","f","normalCompletion","didErr","step","_e2","fill","O","start","relativeStart","k","Math","max","min","end","relativeEnd","finalValue","find","predicate","thisArg","kValue","findIndex","log2","x","log","LOG2E","sign","Number","isFinite","assign","varArgs","to","index","nextSource","nextKey","navigator","document","pointer","webkitPointer","mozPointer","pointerlockchange","createEvent","initCustomEvent","dispatchEvent","pointerlockerror","addEventListener","Element","mozRequestPointerLock","requestPointerLock","webkitRequestPointerLock","pointerLockElement","lock","exitPointerLock","webkitExitPointerLock","mozExitPointerLock","unlock","window","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","String","endsWith","search","this_len","substring","includes","indexOf","startsWith","pos","substr","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","glErrorShadow","synthesizeGLError","opt_msg","msg","console","error","WebGLVertexArrayObjectOES","ext","gl","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","buffer","size","type","FLOAT","normalized","stride","offset","cached","recache","join","OESVertexArrayObject","getError","NO_ERROR","parseInt","wrapGLError","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","ARRAY_BUFFER","currentArrayBuffer","ELEMENT_ARRAY_BUFFER","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","indx","instrumentExtension","canvas","reset_","vertexArrayObjects","ii","MAX_VERTEX_ATTRIBS","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","splice","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","INVALID_OPERATION","setupVertexArrayObject","getSupportedExtensions","getExtension","original_getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","_typeLookup","names","toLowerCase","type$1","extend","ex","prop","copy","isDefined","a","EventHandler","initEventHandler","_callbacks","_callbackActive","scope","once","_addCallback","events","count","arg1","arg2","arg3","arg4","arg5","arg6","arg7","arg8","callbacks","evt","existingCallback","ind","attach","ev","on","off","fire","hasEvent","guid","replace","c","r","random","path","delimiter","num","one","two","Error","normalize","pathname","lead","trail","parts","split","cleaned","tail","getBasename","getDirectory","pop","isRelativePath","charAt","match","extractPath","ios","touch","workers","passiveEvents","ua","userAgent","maxTouchPoints","Worker","opts","removeEventListener","platform","ASCII_LOWERCASE","ASCII_UPPERCASE","HIGH_SURROGATE_BEGIN","HIGH_SURROGATE_END","LOW_SURROGATE_BEGIN","REGIONAL_INDICATOR_BEGIN","REGIONAL_INDICATOR_END","VARIATION_MODIFIER_BEGIN","VARIATION_MODIFIER_END","getCodePointData","string","first","charCodeAt","second","code","long","isCodeBetween","begin","codeData","numCharsToTakeForNextSymbol","ASCII_LETTERS","format","toBool","strict","getCodePoint","codePointData","getCodePoints","codePoint","getSymbols","ch","output","take","char","fromCodePoint","current","units","chars","fromCharCode","IndexedList","_list","_index","item","location","idx","SortedLoopArray","args","_sortBy","sortBy","items","loopIndex","_sortHandler","_doSort","bind","middle","left","right","floor","b","_binarySearch","sort","Tags","parent","_parent","changed","tags","_processArguments","_has","multiple","t","flat","tmp","now","performance","timing","re","URI","uri","scheme","authority","query","fragment","decodeURIComponent","pair","params","q","encodeURIComponent","math","DEG_TO_RAD","PI","RAD_TO_DEG","clamp","intToBytes24","intToBytes32","bytesToInt24","g","bytesToInt32","lerp","alpha","lerpAngle","powerOfTwo","nextPowerOfTwo","val","diff","smoothstep","smootherstep","roundUp","numToRound","ceil","float2Half","floatView","int32View","bits","m","between","inclusive","Http","ContentType","ResponseType","binaryExtensions","url","options","request","data","postdata","method","timestamp","xhr","errored","retry","retries","maxRetries","async","headers","Document","FormData","contentType","FORM_URLENCODED","bFirstItem","escape","JSON","stringify","header","cache","getQuery","setQuery","XMLHttpRequest","open","withCredentials","responseType","_guessResponseType","setRequestHeader","onreadystatechange","_onReadyStateChange","onerror","_onError","send","status","DOCUMENT","TEXT","MP4","WAV","OGG","MP3","BIN","DDS","BASIS","GLB","readyState","responseURL","_onSuccess","response","getResponseHeader","trim","parse","responseText","_isBinaryContentType","BLOB","XML","responseXML","retrying","retryDelay","pow","maxRetryDelay","GIF","JPEG","PNG","AAC","http","Color","rhs","lhs","hex","bytes","set","round","BLACK","freeze","BLUE","CYAN","GRAY","GREEN","MAGENTA","RED","WHITE","YELLOW","CurveEvaluator","curve","time","_curve","_left","Infinity","_right","_recip","_p0","_p1","_m0","_m1","_reset","forceReset","_evaluateHermite","keys","_isHermite","_calcTangents","d","s1_","s2_","tension","s1","s2","a_","d_","p0","p1","m0","m1","t2","twot","omt","omt2","Curve","_eval","evaluate","abs","precision","values","quantize","CurveSet","curves","_type","arg","clone","numCurves","Vec3","y","z","scalar","lx","ly","lz","rx","ry","rz","sqrt","lengthSq","invLength","ZERO","ONE","UP","DOWN","RIGHT","LEFT","FORWARD","BACK","Mat3","src","dst","l","vec","res","IDENTITY","Vec2","atan2","Vec4","w","_halfSize$1","scale","Mat4","add2","b0","b1","b2","b3","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","mul2","position","up","sub2","cross","bottom","top","znear","zfar","temp1","temp2","temp3","temp4","fov","aspect","fovIsHorizontal","_getPerspectiveHalfSize","setFrustum","near","far","axis","angle","cos","sin","tx","ty","width","height","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","setIdentity","invDet","qx","qy","qz","qw","sx","sy","sz","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","m2","m4","m5","m6","m8","m9","m10","idet","getX","getY","getZ","ey","ez","c1","c2","s3","c3","eulers","getScale","asin","halfPi","mulScalar","halfSize","tan","Quat","rad","acos","a2","conjugate","q1x","q1y","q1z","q1w","q2x","q2y","q2z","q2w","sa","ca","halfToRad","cx","cy","cz","m00","m01","m02","m11","m12","m20","m21","m22","rs","tr","lw","rw","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","ix","iy","iz","iw","tmpVecA$2","tmpVecB$1","tmpVecC","tmpVecD","tmpVecE","BoundingBox","center","halfExtents","_min","_max","other","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","aMax","getMax","aMin","getMin","bMax","bMin","ray","point","tMin","sub","origin","tMax","dir","direction","MAX_VALUE","realMin","realMax","minMax","maxMin","intersects","add","prod","absDiff","absDir","rayDir","_intersectsRay","_fastIntersectsRay","aabb","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","vertices","numVerts","setMinMax","sphere","_distanceToBoundingSphereSq","radius","boxMin","boxMax","sq","out","pn","expandMin","expandMax","tmpVecA$1","tmpVecB","BoundingSphere","lenSq","dot","discr","totalRadius","FOG_NONE","SHADERDEF_LM","SHADERDEF_DIRLM","SHADERDEF_SCREENSPACE","SHADERDEF_MORPH_POSITION","SHADERDEF_MORPH_NORMAL","SHADERDEF_MORPH_TEXTURE_BASED","_frustumPoints","Frustum","planes","matrix","plane","vpm","sr","sc","scx","scy","scz","camera","_nearClip","_farClip","_fov","_projection","_orthoHeight","_aspectRatio","points","Ray","PIXELFORMAT_DXT5","PIXELFORMAT_RGB16F","PIXELFORMAT_RGBA16F","PIXELFORMAT_RGB32F","PIXELFORMAT_RGBA32F","PIXELFORMAT_DEPTH","SEMANTIC_POSITION","SEMANTIC_NORMAL","SEMANTIC_TANGENT","SEMANTIC_BLENDWEIGHT","SEMANTIC_BLENDINDICES","SEMANTIC_COLOR","SEMANTIC_TEXCOORD","SEMANTIC_TEXCOORD0","SEMANTIC_TEXCOORD1","SEMANTIC_TEXCOORD2","SEMANTIC_TEXCOORD3","SEMANTIC_TEXCOORD4","SEMANTIC_TEXCOORD5","SEMANTIC_TEXCOORD6","SEMANTIC_TEXCOORD7","SEMANTIC_ATTR0","SEMANTIC_ATTR1","SEMANTIC_ATTR2","SEMANTIC_ATTR3","SEMANTIC_ATTR4","SEMANTIC_ATTR8","SEMANTIC_ATTR9","SEMANTIC_ATTR10","SEMANTIC_ATTR11","SEMANTIC_ATTR12","SEMANTIC_ATTR13","SEMANTIC_ATTR14","SEMANTIC_ATTR15","TEXTURETYPE_DEFAULT","TEXTURETYPE_RGBM","TEXTURETYPE_RGBE","TEXTURETYPE_SWIZZLEGGGR","TEXTUREPROJECTION_NONE","TEXTUREPROJECTION_CUBE","typedArrayTypes","typedArrayTypesByteSize","typedArrayIndexFormats","semanticToLocation","id$2","VertexBuffer","graphicsDevice","numVertices","usage","initialData","device","_vao","instancing","numBytes","verticesByteSize","_vram","vb","setData","storage","ArrayBuffer","buffers","bufferId","boundVao","bindVertexArray","deleteBuffer","byteLength","glUsage","createBuffer","STATIC_DRAW","DYNAMIC_DRAW","STREAM_DRAW","webgl2","DYNAMIC_COPY","bufferData","hashCode","str","hash","VertexFormat","description","vertexCount","elements","hasUv0","hasUv1","hasColor","hasTangents","interleaved","reduce","total","components","elementSize","elementDesc","semantic","dataType","numComponents","update","_evaluateHash","stringElementBatch","stringElementRender","stringElementsBatch","stringElementsRender","batchingHash","renderingingHash","formatDesc","_defaultInstancingFormat","set1","array","set2","set3","set4","arraySet1","inputArray","inputIndex","arraySet2","arraySet3","arraySet4","arrayGet1","outputArray","outputIndex","arrayGet2","arrayGet3","arrayGet4","VertexIteratorAccessor","vertexElement","vertexFormat","BYTES_PER_ELEMENT","getToArray","setFromArray","VertexIterator","vertexBuffer","vertexFormatSize","getFormat","accessors","numAccessors","accessor","copyCount","isView","subarray","_postEffectQuadVB","_postEffectQuadDraw","indexed","drawQuadWithShader","shader","rect","scissorRect","useBlend","h","sw","sh","oldRt","renderTarget","setRenderTarget","updateBegin","oldVx","vx","oldVy","vy","oldVw","vw","oldVh","vh","setViewport","oldSx","oldSy","oldSw","oldSh","setScissor","oldDepthTest","getDepthTest","oldDepthWrite","getDepthWrite","oldCullMode","getCullMode","oldWR","writeRed","oldWG","writeGreen","oldWB","writeBlue","oldWA","writeAlpha","setDepthTest","setDepthWrite","setCullMode","setColorWrite","setBlending","setVertexBuffer","setShader","draw","updateEnd","Shader","definition","init","createShader","attributes","uniforms","samplers","ready","failed","destroyShader","shaderChunks","alphaTestPS","ambientConstantPS","ambientPrefilteredCubePS","ambientPrefilteredCubeLodPS","ambientSHPS","aoPS","aoSpecOccPS","aoSpecOccConstPS","aoSpecOccConstSimplePS","aoSpecOccSimplePS","bakeDirLmEndPS","bakeLmEndPS","basePS","baseVS","baseNineSlicedPS","baseNineSlicedVS","baseNineSlicedTiledPS","biasConstPS","blurVSMPS","clearCoatPS","clearCoatGlossPS","clearCoatNormalPS","clusteredLightLoopPS","clusteredLightPS","combineClearCoatPS","combineDiffusePS","combineDiffuseSpecularPS","combineDiffuseSpecularNoConservePS","combineDiffuseSpecularNoReflPS","combineDiffuseSpecularNoReflSeparateAmbientPS","combineDiffuseSpecularOldPS","cookiePS","cubeMapProjectBoxPS","cubeMapProjectNonePS","cubeMapRotatePS","detailModesPS","diffusePS","diffuseDetailMapPS","dilatePS","dpAtlasQuadPS","emissivePS","endPS","endVS","envConstPS","envMultiplyPS","extensionPS","extensionVS","falloffInvSquaredPS","falloffLinearPS","fixCubemapSeamsNonePS","fixCubemapSeamsStretchPS","fogExpPS","fogExp2PS","fogLinearPS","fogNonePS","fresnelSchlickPS","fullscreenQuadPS","fullscreenQuadVS","gamma1_0PS","gamma2_2PS","genParaboloidPS","gles3PS","gles3VS","glossPS","instancingVS","lightDiffuseLambertPS","lightDirPointPS","lightmapDirPS","lightmapSinglePS","lightmapSingleVertPS","lightSpecularAnisoGGXPS","lightSpecularBlinnPS","lightSpecularPhongPS","ltc","metalnessPS","msdfPS","normalVS","normalDetailMapPS","normalInstancedVS","normalMapPS","normalMapFastPS","normalSkinnedVS","normalVertexPS","normalXYPS","normalXYZPS","opacityPS","outputAlphaPS","outputAlphaOpaquePS","outputAlphaPremulPS","outputCubemapPS","outputTex2DPS","packDepthPS","packDepthMaskPS","parallaxPS","particlePS","particleVS","particleAnimFrameClampVS","particleAnimFrameLoopVS","particleAnimTexVS","particleInputFloatPS","particleInputRgba8PS","particleOutputFloatPS","particleOutputRgba8PS","particleUpdaterAABBPS","particleUpdaterEndPS","particleUpdaterInitPS","particleUpdaterNoRespawnPS","particleUpdaterOnStopPS","particleUpdaterRespawnPS","particleUpdaterSpherePS","particleUpdaterStartPS","particle_billboardVS","particle_blendAddPS","particle_blendMultiplyPS","particle_blendNormalPS","particle_cpuVS","particle_cpu_endVS","particle_customFaceVS","particle_endPS","particle_endVS","particle_halflambertPS","particle_initVS","particle_lambertPS","particle_lightingPS","particle_localShiftVS","particle_meshVS","particle_normalVS","particle_normalMapPS","particle_pointAlongVS","particle_softPS","particle_softVS","particle_stretchVS","particle_TBNVS","particle_wrapVS","precisionTestPS","precisionTest2PS","prefilterCubemapPS","reflDirPS","reflDirAnisoPS","reflectionCCPS","reflectionCubePS","reflectionDpAtlasPS","reflectionPrefilteredCubePS","reflectionPrefilteredCubeLodPS","reflectionSpherePS","reflectionSphereLowPS","refractionPS","reprojectPS","rgbmPS","screenDepthPS","shadowCascadesPS","shadowCommonPS","shadowCoordPS","shadowCoordPerspZbufferPS","shadowEVSMPS","shadowEVSMnPS","shadowStandardPS","shadowStandardGL2PS","shadowVSM8PS","shadowVSM_commonPS","skinBatchConstVS","skinBatchTexVS","skinConstVS","skinTexVS","skyboxPS","skyboxVS","skyboxHDRPS","skyboxPrefilteredCubePS","specularPS","specularAaNonePS","specularAaToksvigPS","specularAaToksvigFastPS","spotPS","startPS","startVS","startNineSlicedPS","startNineSlicedTiledPS","storeEVSMPS","tangentBinormalVS","TBNPS","TBNderivativePS","TBNfastPS","TBNObjectSpacePS","tonemappingAcesPS","tonemappingAces2PS","tonemappingFilmicPS","tonemappingHejlPS","tonemappingLinearPS","tonemappingNonePS","transformVS","transformDeclVS","uv0VS","uv1VS","viewDirPS","viewNormalVS","gammaCode","chunks","tonemapCode","tonemapingNonePS","fogCode","skinCode","supportsBoneTextures","getBoneLimit","precisionCode","pcode","versionCode","dummyFragmentCode","attrib2Semantic","vertex_position","vertex_normal","vertex_tangent","vertex_texCoord0","vertex_texCoord1","vertex_texCoord2","vertex_texCoord3","vertex_texCoord4","vertex_texCoord5","vertex_texCoord6","vertex_texCoord7","vertex_color","vertex_boneIndices","vertex_boneWeights","collectAttribs","vsCode","attrs","found","endOfLine","startOfAttribName","lastIndexOf","attribName","createShaderFromCode","psCode","uName","useTransformFeedback","psPreamble","shaderCache","programLib","_cache","vshader","fshader","vsName","psName","basic","generateKey","fog","alphaTest","vertexColors","diffuseMap","skin","screenSpace","useInstancing","useMorphPosition","useMorphNormal","useMorphTextureBased","pass","createShaderDefinition","transformSkinnedVS","alphatest","particle","_animTex","animTexLoop","mesh","localSpace","animTex","normal","soft","faceVS","customFace","useCpu","alignToMotion","stretch","pack8","wrap","srgb","gamma","toneMap","halflambert","blend","skybox","rgbm","hdr","fixSeams","toneMapping","useIntensity","useCubeMapRotation","useRightHandedCubeMap","mip","aPosition","_pixelSizeTable","_blockSizeTable","Texture","_width","_height","_depth","_format","projection","_cubemap","_volume","fixCubemapSeams","_flipY","_premultiplyAlpha","_isRenderTarget","_mipmaps","_minFilter","_magFilter","_anisotropy","_addressU","_addressV","_addressW","_compareOnRead","_compareFunc","swizzleGGGR","mipmaps","autoMipmap","_levels","levels","cubemap","minFilter","magFilter","anisotropy","addressU","addressV","compareOnRead","flipY","premultiplyAlpha","depth","volume","addressW","_compressed","_invalid","_lockedLevel","dirtyAll","_gpuSize","v","_parameterFlags","_minFilterDirty","_needsMipmapsUpload","mips","pot","calcGpuSize","_needsUpload","destroyTexture","_levelsUpdated","_mipmapsUploaded","level","face","mode","source","mipLevel","invalid","_isBrowserInterface","upload","j","fsize","mipSize","buff","flags","caps","caps2","pixelSize","blockSize","blockWidth","blockHeight","blockDepth","tempVec3","tempMin3","tempMax3","tempBox","epsilon","oneDiv255","packFloatToBytes","enc1","enc2","enc3","ClusterLight","light","WorldClusters","cells","maxCellLightCount","reportCount","_bounds","boundsMin","boundsMax","boundsDelta","_cells","_cellsLimit","_maxCellLightCount","_pixelsPerCellCount","_maxAttenuation","_maxColorValue","_usedLights","registerUniforms","initLightsTexture","lightsTexture8","destroy","lightsTextureFloat","releaseClusterTexture","clusterTexture","_clusterWorldTextureId","resolve","_clusterPixelsPerCellId","_clusterTextureSizeId","_clusterTextureSizeData","_clusterBoundsMinId","_clusterBoundsMinData","_clusterBoundsDeltaId","_clusterBoundsDeltaData","_clusterCellsCountByBoundsSizeId","_clusterCellsCountByBoundsSizeData","_clusterCellsDotId","_clusterCellsDotData","_clusterCellsMaxId","_clusterCellsMaxData","_clusterCompressionLimit0Id","_clusterCompressionLimit0Data","_cellsDirty","equals","maxLights","pixelsPerLight8","pixelsPerLightFloat","lightTextureFormat","FORMAT_FLOAT","lights8","createTexture","_lightsTexture8Id","lightsFloat","_lightsTextureFloatId","_lightsTextureInvSizeId","_lightsTextureInvSizeData","spot","_node","getWorldTransform","lightIndex","gammaCorrection","isSpot","getPosition","data8","data8Index","_shape","_falloffMode","invMaxColorValue","color","_linearFinalColor","_finalColor","_innerConeAngleCos","_outerConeAngleCos","dataFloat","dataFloatIndex","attenuationEnd","getSpotDirection","normPos","div","numCells","totalPixels","clusters","counts","pixels","setValue","clusteredLight","lights","usedLights","visibleThisFrame","intensity","warn","getBoundingBox","maxAttenuation","maxColorValue","divX","divZ","limit","pixelsPerCellCount","addLightData","evalLightCellMinMax","xStart","xEnd","yStart","yEnd","zStart","zEnd","clusterIndex","updateCells","collectLights","evaluateBounds","evaluateCompressionLimits","updateClusters","uploadTextures","updateUniforms","extTextureFloat","FORMAT_8BIT","currentApplication","has","RenderAction","layerIndex","cameraIndex","lightClusters","clearColor","clearDepth","clearStencil","triggerPostprocess","firstCameraUse","directionalLightsSet","Set","directionalLights","directionalLightsIndices","clear","cameraLayers","dirLights","allLights","castShadows","_splitLights","LightCompositionData","shadowCastersSet","shadowCastersList","casters","getApplication","setApplication","app","tempSet$1","tempClusterArray","LayerComposition","_getApplication","logRenderActions","layerList","subLayerList","subLayerEnabled","_opaqueOrder","_transparentOrder","_dirty","_dirtyBlend","_dirtyLights","_dirtyCameras","_meshInstances","_meshInstancesSet","_lights","_lightsMap","Map","_lightCompositionData","cameras","_renderActions","_worldClusters","_emptyWorldClusters","_clusteredLightingCells","_clusteredLightingMaxLights","forEach","cluster","updateWorldClusters","layer","addUniqueMeshInstance","destArray","destSet","srcArray","meshInst","material","dirtyBlend","srcLen","passThrough","opaqueMeshInstances","transparentMeshInstances","moveByBlendType","dest","moveTransparent","blendType","updateLights","updateShadowCasters","priority","renderActionCount","cameraFirstRenderAction","cameraFirstRenderActionIndex","lastRenderAction","postProcessMarked","layers","disablePostEffectsLayer","addRenderAction","collectDirectionalLights","postEffectsEnabled","propagateRenderTarget","clusteredLightingEnabled","allocateLightClusters","_logRenderActions","lightCount","clearShadowCasters","addShadowCasters","shadowCasters","lightCompData","_splitLightsArray","ra","raLayer","_clusteredLightsSet","findCompatibleCluster","emptyWorldClusters","renderActions","renderActionIndex","renderAction","rt","used","needsClear","clearColorBuffer","clearDepthBuffer","clearStencilBuffer","reset","startIndex","fromCamera","thisCamera","transparent","_isLayerAdded","_updateOpaqueOrder","_updateTransparentOrder","_isSublayerAdded","_getSublayerIndex","endIndex","layersA","layersB","order","topLayerA","topLayerB","_sortLayersDescending","_oldChunkFloat","_oldChunkColor","_oldChunkTex","_oldChunkTexColor","_oldChunkTexFloat","_oldChunkVert","_oldChunkVertColor","_oldChunkVertFloat","_matTex2D","standard","_oldChunkToNew","aoTexPS","aoVertPS","diffuseConstPS","diffuseTexPS","diffuseTexConstPS","diffuseVertPS","diffuseVertConstPS","emissiveConstPS","emissiveTexPS","emissiveTexConstPS","emissiveTexConstFloatPS","emissiveVertPS","emissiveVertConstPS","emissiveVertConstFloatPS","glossConstPS","glossTexPS","glossTexConstPS","glossVertPS","glossVertConstPS","metalnessConstPS","metalnessTexPS","metalnessTexConstPS","metalnessVertPS","metalnessVertConstPS","opacityConstPS","opacityTexPS","opacityTexConstPS","opacityVertPS","opacityVertConstPS","specularConstPS","specularTexPS","specularTexConstPS","specularVertPS","specularVertConstPS","transformBatchSkinnedVS","transformInstancedVS","transformPixelSnapVS","transformScreenSpaceVS","transformScreenSpaceBatchSkinned","transformSkinned","transformUv1","optionsContext","optionsContextMin","buildPropertiesList","propsMin","_correctChannel","chan","chr","addLen","_setMapTransform","codes","uv","checkId","_getUvSourceExpression","transformPropName","uVPropName","expression","transformId","uvChannel","isMainPass","nineSlicedMode","heightMap","_addMapDef","_addMapDefs","float","vertex","map","_addMap","propName","chunkName","samplerFormat","mapPropName","channelPropName","vertexColorChannelPropName","vertexColorPropName","detailModePropName","tintOption","vertexColorOption","textureOption","detailModeOption","subCode","fmt","isFloatTint","isVecTint","_directionalShadowMapProjection","shadowCoordArgs","shadowParamArg","coordsFunctioName","numCascades","_nonPointShadowMapProjection","shadowMatArg","_normalOffsetBias","_isVsm","_isPcf","extStandardDerivatives","_addVaryingIfNeeded","_getLightSourceShapeString","shape","_vsAddTransformCode","_vsAddBaseCode","_fsAddBaseCode","_fsAddStartCode","lighting","dirLightMap","shadingModel","fresnelModel","specularAntialias","prefilteredCubemap","dpAtlas","ambientSH","cubemapReflection","cubeMap","useSpecular","sphereMap","reflections","useTexCubeLod","specularMap","glossMap","needsNormal","enableGGXSpecular","shadowPass","lightType","chunk","codeBody","varyings","newP","customChunks","instance_line1","instance_line2","instance_line3","instance_line4","fragmentUniformsCount","normalMap","cname","mname","tname","uname","useUv","useUnmodifiedUv","maxUvSets","uvSet","forceUv1","morph_vertex_id","morph_pos0","morph_pos1","morph_pos2","morph_pos3","morph_nrm0","morph_nrm1","morph_nrm2","morph_nrm3","morph_nrm4","morph_nrm5","morph_nrm6","morph_nrm7","morph_pos4","morph_pos5","morph_pos6","morph_pos7","pixelSnap","oldVars","startCode","forceFragmentPrecision","maxPrecision","smode","shadowType","textureFloatHighPrecision","customFragmentShader","tag","detailModes","codeBegin","clearCoat","opacityFadesSpecular","numShadowLights","shadowTypeUsed","shadowedDirectionalLightUsed","useVsm","usePerspZbufferShadow","hasAreaLights","some","areaLightLutFormat","tbn","lightShape","noShadow","_shadowType","_cookie","_cookieTransform","fastTbn","clearCoatNormalMap","packedNormal","normalMapUv","normalDetail","transformedNormalMapUv","normalizeNormalMap","useRgbm","cubeMapProjection","skyboxIntensity","diffuseDetail","alphaToCoverage","emissiveFormat","specularPropName","useMetalness","transformedHeightMapUv","useAo","aoMap","aoVertexColor","occludeSpecular","occludeSpecularFloat","reflectionDecode","rgbmReflection","hdrReflection","scode","refraction","extTextureHalfFloatLinear","extTextureFloatLinear","useOldAmbient","conserveEnergy","addAmbient","lightMap","lightVertexColor","lightmapChunkPropName","lightMapFormat","lightMapWithoutAmbient","ambientDecode","rgbmAmbient","hdrAmbient","ambientTint","msdf","usesCookieNow","hasPointLights","usesLinearFalloff","usesInvSquaredFalloff","usesSpot","usesCookie","clusterTextureFormat","twoSidedLighting","opacityParallax","opacityMap","getGlossinessCalled","occludeDirect","shapeString","_cookieFalloff","_cookieChannel","evsmExp","shadowReadMode","structCode","programlib","paraboloidFromCubemap","sourceCubemap","fixSeamsAmount","dontFlipX","seamsCode","constantTexSource","constantParams","tex","targ","RenderTarget","colorBuffer","getDpAtlasRect","id$1","Material","_shader","variants","parameters","blendSrc","blendDst","blendEquation","separateAlphaBlend","blendSrcAlpha","blendDstAlpha","blendAlphaEquation","cull","depthTest","depthWrite","stencilFront","stencilBack","depthBias","slopeDepthBias","redWrite","greenWrite","blueWrite","alphaWrite","meshInstances","_shaderVersion","_scene","dirty","prevBlend","_updateMeshInstanceKeys","_cloneInternal","updateKey","scene","objDefs","meshInstance","uniformObject","setParameter","param","scopeId","parameter","paramName","_material","defaultMaterial","StandardMaterialOptionsBuilder","_mapXForms","updateMinRef","stdMat","staticLightList","sortedLights","prefilteredCubeMap128","_updateSharedOptions","_updateMinOptions","_updateUVOptions","updateRef","_updateEnvOptions","_updateMaterialOptions","_updateLightOptions","minimalOptions","hasVcolor","_updateTexOptions","opacityTint","opacity","diffuseTint","diffuse","diffuseVertexColor","specularTint","specular","specularVertexColor","emissiveTint","emissiveMap","emissive","emissiveIntensity","isPackedNormalMap","blendMapsWithColors","metalnessTint","metalness","glossTint","alphaFade","occludeSpecularIntensity","msdfMap","aoMapUv","aoUvSet","diffuseDetailMode","clearCoatTint","clearCoatGlossiness","clearCoatGlossTint","globalSky128","useSkybox","_skyboxPrefiltered","useFog","useGammaTonemap","skyboxRotation","_skyboxIsRenderTarget","lightMapChannel","lightMapUv","lightMapTransform","useLighting","lightsFiltered","mask","_collectLights","vname","vcname","isOpacity","allow","_getMapTransformID","lType","isStatic","xform","same","newID","standardMaterialParameterTypes","mappingFormat","_engine","ambient","aoVertexColorChannel","aoMapChannel","aoMapTiling","aoMapOffset","diffuseVertexColorChannel","diffuseMapChannel","diffuseMapUv","diffuseMapTiling","diffuseMapOffset","diffuseDetailMap","diffuseDetailMapChannel","diffuseDetailMapUv","diffuseDetailMapTiling","diffuseDetailMapOffset","specularVertexColorChannel","specularMapChannel","specularMapUv","specularMapTiling","specularMapOffset","metalnessVertexColor","metalnessVertexColorChannel","metalnessMap","metalnessMapChannel","metalnessMapUv","metalnessMapTiling","metalnessMapOffset","shininess","glossVertexColor","glossVertexColorChannel","glossMapChannel","glossMapUv","glossMapTiling","glossMapOffset","clearCoatVertexColor","clearCoatVertexColorChannel","clearCoatMap","clearCoatMapChannel","clearCoatMapUv","clearCoatMapTiling","clearCoatMapOffset","clearCoatGlossVertexColor","clearCoatGlossVertexColorChannel","clearCoatGlossMap","clearCoatGlossMapChannel","clearCoatGlossMapUv","clearCoatGlossMapTiling","clearCoatGlossMapOffset","clearCoatBumpiness","clearCoatNormalMapUv","clearCoatNormalMapTiling","clearCoatNormalMapOffset","emissiveVertexColor","emissiveVertexColorChannel","emissiveMapChannel","emissiveMapUv","emissiveMapTiling","emissiveMapOffset","normalMapTiling","normalMapOffset","bumpiness","normalDetailMap","normalDetailMapTiling","normalDetailMapOffset","normalDetailMapUv","normalDetailMapBumpiness","heightMapChannel","heightMapUv","heightMapTiling","heightMapOffset","heightMapFactor","opacityVertexColor","opacityVertexColorChannel","opacityMapChannel","opacityMapUv","opacityMapTiling","opacityMapOffset","reflectivity","refractionIndex","cubeMapProjectionBox","lightVertexColorChannel","lightMapTiling","lightMapOffset","prefilteredCubeMap64","prefilteredCubeMap32","prefilteredCubeMap16","prefilteredCubeMap8","prefilteredCubeMap4","standardMaterialTextureParameters","standardMaterialCubemapParameters","_propsSerial","_propsSerialDefaultVal","_propsInternalNull","_propsInternalVec3","_prop2Uniform","_propsColor","Chunks","StandardMaterial","_assetReferences","_validator","shaderOptBuilder","defVal","_chunks","cubeMapMinUniform","cubeMapMaxUniform","transform","tiling","_propsSet","_setParameter","_updateMapTransform","uniform","varName","changeMat","func","_clearParameters","ambientUniform","diffuseUniform","specularUniform","getUniform","emissiveUniform","_updateMap","dirtyShader","clearVariants","_processColor","dirtyColor","clr","_colorProcessed","globalSky64","globalSky32","globalSky16","globalSky8","globalSky4","useDp","extTextureLod","allMips","atlas","sixCubemaps","dp","scaleAmount","scaleFactor","generateDpAtlas","cubeSize","HTMLImageElement","img","tex2","bindFramebuffer","FRAMEBUFFER","_glFrameBuffer","readPixels","RGBA","UNSIGNED_BYTE","dirs","u","addr","weight","dx","dy","dz","weight1","weight2","weight3","weight4","weight5","coef1","coef2","coef3","coef4","coef5","coef6","coef7","coef8","coef9","nx","px","ny","py","nz","pz","accum","texelCoordSolidAngle","shFromCubemap","_skyboxRotationMat3","onUpdateShader","library","getProgramLibrary","getProgram","asset","_unbind","_defineTex2D","channels","defChannel","vertexColor","detailMode","privMap","privMapTiling","privMapOffset","mapTransform","mapTransformUniform","privMapUv","privMapChannel","privMapVertexColor","privMapVertexColorChannel","privMapDetailMode","channel","oldVal","mapTiling","mapOffset","mat","tform","_defineColor","defaultValue","hasMultiplier","priv","uform","mult","pmult","newValue","oldValue","_defineFloat","_defineObject","_defineAlias","newName","oldName","_defineFlag","TEXTURE_PARAMETERS","CUBEMAP_PARAMETERS","bmin","bmax","_defineMaterialProps","ProgramLibrary","_device","_generators","_isClearingCache","_precached","_programsCollection","_defaultStdMatOption","_defaultStdMatOptionMin","generator","isRegistered","gd","lcopy","storeNewProgram","shaderDefinition","opt","defaultMat","_getDefaultStdMatOptions","text","createElement","setAttribute","style","display","body","appendChild","click","removeChild","shaders","Version","globalId","revision","idCounter","VersionedObject","version","ScopeId","versionObject","increment","ScopeSpace","variables","uniformName","ShaderInput","locationId","EVENT_RESIZE","downsampleImage","image","srcW","srcH","dstW","dstH","getContext","drawImage","testRenderable","pixelFormat","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","framebuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","deleteTexture","deleteFramebuffer","GraphicsDevice","_enableAutoInstancing","autoInstancingMaxObjects","defaultFramebuffer","_maxPixelRatio","updateClientRect","textures","targets","contextLost","_contextLostHandler","event","preventDefault","loseContext","_contextRestoredHandler","restoreContext","preferWebGl2","stencil","_tempEnableSafariTextureUnitWorkaround","safari","scopeX","scopeY","scopeZ","scopeW","uniformValue","isChrome","chrome","isMac","appVersion","_tempMacChromeBlitFramebufferWorkaround","initializeExtensions","initializeCapabilities","initializeRenderState","initializeContextCaches","defaultClearOptions","CLEARFLAG_COLOR","glAddress","REPEAT","MIRRORED_REPEAT","glBlendEquation","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","extBlendMinmax","MIN_EXT","MAX","MAX_EXT","glBlendFunction","SRC_COLOR","ONE_MINUS_SRC_COLOR","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","glComparison","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","glStencilOp","KEEP","REPLACE","INCR","INCR_WRAP","DECR","DECR_WRAP","INVERT","glClearFlag","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","glCull","FRONT","FRONT_AND_BACK","glFilter","LINEAR","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","glPrimitive","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","glType","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","pcUniformType","BOOL","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","SAMPLER_2D_SHADOW","SAMPLER_CUBE_SHADOW","SAMPLER_3D","targetToSlot","TEXTURE_CUBE_MAP","TEXTURE_3D","commitFunction","uniform1i","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniform2iv","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1fv","register","maxVertexTextures","maxTextures","numUniforms","vertexUniformsCount","boneLimit","unmaskedRenderer","_drawCallsPerFrame","_shaderSwitchesPerFrame","_primsPerFrame","_renderTargetCreationTime","ib","_shaderStats","vsCompiled","fsCompiled","linked","materialShaders","compileTime","textureFloatRenderable","extColorBufferFloat","extColorBufferHalfFloat","textureHalfFloatRenderable","extTextureHalfFloat","HALF_FLOAT_OES","supportsMorphTargetTexturesCore","_textureFloatHighPrecision","_textureHalfFloatUpdatable","grabPassAvailable","grabPassAlpha","createGrabPass","textureHalfFloatUpdatable","getShaderPrecisionFormat","vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","fragmentShaderPrecisionHighpFloat","FRAGMENT_SHADER","fragmentShaderPrecisionMediumpFloat","highpAvailable","mediumpAvailable","supportedExtensions","extDrawBuffers","extInstancing","extUintElement","extVertexArrayObject","extDisjointTimerQuery","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","createVertexArray","deleteVertexArray","isVertexArray","extDebugRendererInfo","extFloatBlend","extTextureFilterAnisotropic","extCompressedTextureETC1","extCompressedTextureETC","extCompressedTexturePVRTC","extCompressedTextureS3TC","extCompressedTextureATC","extCompressedTextureASTC","extParallelShaderCompile","supportsInstancing","getPrecision","contextAttribs","getContextAttributes","supportsMsaa","antialias","supportsStencil","maxTextureSize","MAX_TEXTURE_SIZE","maxCubeMapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderBufferSize","MAX_RENDERBUFFER_SIZE","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTextures","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_FRAGMENT_UNIFORM_VECTORS","maxDrawBuffers","MAX_DRAW_BUFFERS","maxColorAttachments","MAX_COLOR_ATTACHMENTS","maxVolumeSize","MAX_3D_TEXTURE_SIZE","MAX_DRAW_BUFFERS_EXT","MAX_COLOR_ATTACHMENTS_EXT","UNMASKED_RENDERER_WEBGL","unmaskedVendor","UNMASKED_VENDOR_WEBGL","maxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","samples","SAMPLES","maxSamples","MAX_SAMPLES","blending","disable","BLEND","separateAlphaEquation","blendFunc","colorMask","cullMode","enable","CULL_FACE","cullFace","DEPTH_TEST","depthFunc","depthMask","STENCIL_TEST","stencilFuncFront","stencilFuncBack","stencilRefFront","stencilRefBack","stencilMaskFront","stencilMaskBack","stencilFunc","stencilFailFront","stencilFailBack","stencilZfailFront","stencilZfailBack","stencilZpassFront","stencilZpassBack","stencilWriteMaskFront","stencilWriteMaskBack","stencilOp","stencilMask","raster","SAMPLE_ALPHA_TO_COVERAGE","RASTERIZER_DISCARD","depthBiasEnabled","POLYGON_OFFSET_FILL","clearRed","clearBlue","clearGreen","clearAlpha","hint","FRAGMENT_SHADER_DERIVATIVE_HINT","NICEST","FRAGMENT_SHADER_DERIVATIVE_HINT_OES","SCISSOR_TEST","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","unpackFlipY","UNPACK_FLIP_Y_WEBGL","unpackPremultiplyAlpha","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","vertexShaderCache","fragmentShaderCache","_vaoMap","indexBuffer","vertexBuffers","activeFramebuffer","feedback","transformFeedbackBuffer","textureUnit","textureUnits","destroyGrabPass","compileAndLinkShader","grabPassTexture","grabPassTextureId","grabPassRenderTarget","resolveRenderTarget","_glResolveFrameBuffer","currentFrameBuffer","resolvedFrameBuffer","initRenderTarget","grabPassFrameBuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","blitFramebuffer","_glFormat","copyTexImage2D","clientRect","getBoundingClientRect","viewport","scissor","fb","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","_colorBuffer","_depthBuffer","prevRt","getCopyShader","setFramebuffer","_glTexture","setTexture","TEXTURE_CUBE_MAP_POSITIVE_X","_face","depthBuffer","_stencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","_samples","_glDepthBuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_COMPONENT16","_glMsaaColorBuffer","renderbufferStorageMultisample","_glInternalFormat","_glMsaaDepthBuffer","DEPTH24_STENCIL8","DEPTH_COMPONENT32F","_copyShader","unit","slot","activeTexture","generateMipmap","_glTarget","autoResolve","ALPHA","_glPixelType","LUMINANCE","LUMINANCE_ALPHA","RGB","UNSIGNED_SHORT_5_6_5","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_4_4_4_4","RGB8","RGBA8","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_RGB_ATC_WEBGL","COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL","RGB16F","HALF_FLOAT","RGBA16F","RGB32F","RGBA32F","R32F","DEPTH_COMPONENT","UNSIGNED_INT_24_8","R11F_G11F_B10F","UNSIGNED_INT_10F_11F_11F_REV","SRGB8","SRGB8_ALPHA8","removeValue","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","mipObject","resMult","requiredMipLevels","setUnpackFlipY","setUnpackPremultiplyAlpha","texData","compressedTexImage2D","compressedTexImage3D","texImage3D","gpuSize","TEXTURE0","textureTarget","textureObject","filter","TEXTURE_WRAP_R","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","TEXTURE_COMPARE_FUNC","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initializeTexture","setTextureParameters","updateGrabPass","uploadTexture","bindTextureOnUnit","useCache","loc","primitive","numInstances","keepBuffers","sampler","samplerValue","numTextures","uniformVersion","programVersion","setBuffers","uniform1iv","bindBufferBase","TRANSFORM_FEEDBACK_BUFFER","beginTransformFeedback","glFormat","bytesPerIndex","drawElements","drawArrays","endTransformFeedback","defaultOptions","setClearColor","setClearDepth","setClearStencil","writeDepth","state","tf","createTransformFeedback","bindTransformFeedback","TRANSFORM_FEEDBACK","constBias","slopeBias","polygonOffset","ref","stencilFuncSeparate","fail","zfail","zpass","writeMask","stencilOpSeparate","stencilMaskSeparate","blendFuncSeparate","blendEquationSeparate","isVertexShader","glShader","shaderSource","compileShader","glVertexShader","compileShaderSource","glFragmentShader","glProgram","createProgram","attachShader","outNames","attr","transformFeedbackVaryings","INTERLEAVED_ATTRIBS","locations","bindAttribLocation","linkProgram","_glVertexShader","_glFragmentShader","_glProgram","deleteProgram","removeShaderFromCache","lines","info","shaderInput","getShaderParameter","COMPILE_STATUS","_addLineNumbers","getShaderInfoLog","getProgramParameter","LINK_STATUS","getProgramInfoLog","numAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","postLink","useProgram","attributesInvalidated","maxBones","ratio","devicePixelRatio","shaderSrc","deleteShader","clearCache","mapObj","removeFromCache","deleteTransformFeedback","clearShaderCache","clearVertexArrayObjectCache","drawingBufferWidth","drawingBufferHeight","fullscreenElement","fullscreen","requestFullscreen","exitFullscreen","resizeCanvas","test1","test2","textureOptions","tex1","targ1","targ2","prevFramebuffer","testTextureFloatHighPrecision","testTextureHalfFloatUpdatable","_this$_colorBuffer","_this$_depthBuffer","_arg2","_arg3","destroyFrameBuffers","deleteRenderbuffer","copyRenderTarget","areaElement","_u","_v","invResolution","x0","y0","x1","y1","solidAngle","IndexBuffer","numIndices","indices","_lockTypedArray","RefCountedObject","_refCount","GeometryData","initDefaults","recreate","verticesUsage","indicesUsage","maxVertices","maxIndices","indexCount","vertexStreamsUpdated","indexStreamUpdated","vertexStreamDictionary","_validateVertexCount","DEFAULT_COMPONENTS_POSITION","DEFAULT_COMPONENTS_NORMAL","DEFAULT_COMPONENTS_UV","DEFAULT_COMPONENTS_COLORS","GeometryVertexStream","componentCount","dataTypeNormalize","Mesh","morph","_geometryData","_aabb","boneAabb","_destroyIndexBuffer","morphTargets","boneUsed","boneIndex","minMorphX","minMorphY","minMorphZ","maxMorphX","maxMorphY","maxMorphZ","boneMin","boneMax","numBones","boneNames","posElement","weightsElement","indicesElement","deltaPositions","verticesDynamic","indicesDynamic","_initGeometryData","_changeVertexCount","stream","readData","positions","setVertexStream","normals","uvs","colors","getVertexStream","streamIndices","primitiveType","updateBoundingBox","compute","destroyVB","destroyIB","_updateVertexBuffer","_updateIndexBuffer","updateRenderStates","vertexDesc","allocateVertexCount","_buildVertexFormat","writeData","createFormat","srcIndices","renderStyle","generateWireframe","prepareRenderState","offsets","uniqueLineIndices","i1","i2","line","wireBuffer","primitiveUv1Padding","primitiveUv1PaddingScale","shapePrimitives","createMesh$1","setPositions","setNormals","tangents","setColors32","setUvs","uvs1","blendIndices","blendWeights","setIndices","_createConeData","baseRadius","peakRadius","heightSegments","capSegments","roundedCaps","tangent","theta","cosTheta","sinTheta","phi","sinPhi","third","fourth","bottomToTop","norm","lat","lon","latitudeBands","longitudeBands","capOffset","createCylinder","calculateTangents","createCapsule","sides","createCone","createSphere","createPlane","he","ws","widthSegments","ls","lengthSegments","vcounter","createBox","hs","corners","faceAxes","faceNormals","generateFace","side","uSegments","vSegments","getShapePrimitive","primData","area","incRefCount","BasicMaterial","colorUniform","colorMap","clearParameters","Batch","dynamic","batchGroupId","origMeshInstances","removeFromLayers","getLayerById","addMeshInstances","removeMeshInstances","_aabbVer","BatchGroup","maxAabbSize","_ui","_sprite","_obj","model","sprite","render","MODEL","ELEMENT","SPRITE","RENDER","_invMatrix","SkinInstance","_rootBone","_skinUpdateIndex","_updateBeforeCull","initSkin","numPixels","boneTexture","matrixPalette","rootBone","entity","bones","boneName","bone","findByName","inverseBindPose","matrices","rootNode","skinUpdateIndex","invert","mulAffine2","_updateMatrices","pe","mp","uploadBones","SkinBatchInstance","nodes","RefCountedCache","refCount","delete","scaleCompensatePosTransform","scaleCompensatePos","scaleCompensateRot","scaleCompensateRot2","scaleCompensateScale","scaleCompensateScaleForParent","tmpMat4","tmpQuat","position$1","invParentWtm$1","rotation","invParentRot","GraphNode","_labels","localPosition","localRotation","localScale","localEulerAngles","eulerAngles","_scale","localTransform","_dirtyLocal","_frozen","worldTransform","_dirtyWorld","normalMatrix","_dirtyNormal","_up","_forward","_children","_graphDepth","_enabled","_enabledInHierarchy","scaleCompensation","_notifyHierarchyStateChanged","node","_onHierarchyStateChanged","_unfreezeParentToRoot","descendants","results","Function","fn","concat","findOne","_findByTag","currentParent","imax","part","children","jmax","isDescendantOf","getEulerAngles","setTRS","getTranslation","setFromMat4","_sync","insertChild","addChild","setFromEulerAngles","_dirtifyLocal","_dirtifyWorld","_dirtifyWorldInternal","transformPoint","parentRot","getRotation","mul","_onInsertChild","wPos","wRot","setPosition","setRotation","enabledInHierarchy","_updateGraphDepth","child","parentWorldScale","parentToUseScaleFrom","tmatrix","getLocalScale","syncHierarchy","ux","uy","uz","setLookAt","transformVector","rot","_tmpAabb","_tempBoneAabb","_tempSphere","_meshSet","InstancingData","numObjects","MeshInstance","temp","_key","_staticLightList","_staticSource","_mesh","_shaderDefs","MASK_DYNAMIC","_lightHash","visible","_renderStyle","castShadow","_receiveShadow","_screenSpace","_noDepthDrawGl1","pick","_updateAabb","_updateAabbFunc","_calculateSortDistance","_skinInstance","_morphInstance","instancingData","_customAabb","drawOrder","isVisibleFunc","flipFaces","decRefCount","localAabb","toWorldSpace","skinInstance","_targets","_initBoneAabbs","setFromTransformedAabb","_expand","prevMat","removeMeshInstanceRef","addMeshInstanceRef","_layer","calculateSortDistance","_setupSkinUpdate","useTextureMorph","morphPositions","morphNormals","toggles","getRefCount","setRealtimeLightmap","lightmapParamNames","morphInstance","frustum","containsSphere","getKey","passFlags","old","decRefLightmap","incRefLightmap","deleteParameter","passFlag","_lightmapCache","incRef","decRef","isCommand","materialId","paramsIdentical","equalParamSets","params1","params2","equalLightLists","lightList1","lightList2","mat3","worldMatX$1","worldMatY$1","worldMatZ$1","getScaleSign","mi","wt","BatchManager","root","_init","_batchGroups","_batchGroupCounter","_batchList","_dirtyGroups","group","newBatchList","destroyBatch","_removeModelsFromBatchGroup","groups","batch","groupId","markGroupDirty","groupMeshInstances","drawCalls","nodeMeshInstances","removeModelFromLayers","valid","_text","_model","_image","_renderable","unmaskMeshInstance","_dirtifyMask","_onPrerender","groupIds","_extractModel","_extractRender","_extractElement","_meshInstance","_renderMode","_batchGroup","lists","groupData","_collectAndRemoveMeshInstances","newDirtyGroups","prepare","addToLayers","POSITIVE_INFINITY","translucent","vertCount","lightList","defs","staticLights","scaleSign","vertexFormatBatchingHash","sf","halfMaxAabbSize","maxInstanceCount","maxNumVertices","testAabb","skipTranslucentAabb","meshInstancesLeftB","meshInstancesLeftA","skipMesh","getNumVertices","vertexFormats","elems","streams","batchNumVerts","batchNumIndices","indexBase","indexData","verticesOffset","indexOffset","typeArrayType","elementByteSize","totalComponents","invertTo3x3","transpose","srcFormat","batchGroup","generate","clonedMeshInstances","batch2","_deviceCoord","_halfSize","_point","_invViewProjMat","Camera","_aspectRatioMode","_calculateProjection","_calculateTransform","_clearColor","_clearColorBuffer","_clearDepth","_clearDepthBuffer","_clearStencil","_clearStencilBuffer","_cullingMask","_cullFaces","_flipFaces","_frustumCulling","_horizontalFov","_layers","_rect","_renderTarget","_scissorRect","_vrDisplay","_projMat","_projMatDirty","_projMatSkybox","_viewMat","_viewMatDirty","_viewProjMat","_viewProjMatDirty","_evaluateProjectionMatrix","wtm","_camera","aspectRatio","aspectRatioMode","calculateProjection","calculateTransform","cullFaces","cullingMask","farClip","frustumCulling","horizontalFov","nearClip","orthoHeight","vrDisplay","projMat","projectionMatrix","viewMat","viewMatrix","worldCoord","cw","screenCoord","_updateViewProjMat","range","invView","cameraPos","setPerspective","setOrtho","ShadowMap","renderTargets","createCubemap","_shadowResolution","create2dMap","getShadowFormat","getShadowFiltering","compareFunc","ShadowMapCache","shadowMapCache","shadowMaps","shadowMap","isCubeMap","resolution","pointLightRotations","aabbPoints","_depthRange","getDepthRange","cameraViewMatrix","aabbMin","aabbMax","minz","maxz","gauss","sigma","exp","visibleSceneAabb","shadowCamView$1","shadowCamViewProj$1","pixelOffset","blurScissorRect","opChanId","viewportMatrix","getDepthKey","opChan","ShadowRenderer","forwardRenderer","sourceId","pixelOffsetId","weightId","blurVsmShaderCode","packed","blurPackedVsmShaderCode","blurVsmShader","blurPackedVsmShader","blurVsmWeights","shadowMapLightRadiusId","_isVisible","depthSortCompare","_shadowMap","faceCount","lightRenderData","getRenderData","shadowCam","shadowCamera","shadowCamNode","lightNode","_outerConeAngle","rotateLocal","updateCameraFrustum","cullShadowCasters","visibleCasters","nearDist","farDist","_shadowCascadeDistances","fraction","linearDist","logDist","dist","cascadeDistribution","generateSplitDistances","shadowDistance","cascade","frustumNearDist","frustumFarDist","frustumPoints","getPoints","cameraWorldMat","lightDir","forward","sizeRatio","scaledUp","scaledRight","scaledDir","translateLocal","emptyAabb","depthRange","setDepthBias","setDepthBiasValues","shadowBias","polygonOffsetId","dispatchViewPos","cascades","shadowMatrix","_shadowMatrixPalette","scaleShiftMatrix","setBaseConstants","setSkinning","setParameters","shadowShader","updateShader","setVertexBuffers","setMorphing","setIndexBuffer","drawInstance","_shadowDrawCalls","shadowUpdateMode","_shadowMapUpdates","setupRenderState","dispatchUniforms","setCamera","submitCasters","_vsmBlurSize","applyVsmBlur","isVsm8","blurMode","filterSize","blurShader","kernelSize","halfWidth","sum","gaussWeights","blurVS","blurFS","blurShaderName","origShadowMap","tempShadowMap","tempRt","vsmBlurMode","getVsmBlurShader","hwPcf","projL","projR","modelMatrix","keyA$1","keyB$1","keyA","keyB","sortPos","sortDir","shadowCamView","shadowCamViewProj","viewInvMat","viewMat3","viewProjMat","flipYMat","setScale","flippedViewProjMat","flippedSkyboxProjMat","viewInvL","viewInvR","viewL","viewR","viewPosL","viewPosR","viewMat3L","viewMat3R","viewProjMatL","viewProjMatR","worldMatX","worldMatY","worldMatZ","tempSphere$1","boneTextureSize","_autoInstanceBuffer","_tempMaterialSet","ForwardRenderer","_forwardDrawCalls","_skinDrawCalls","_camerasRendered","_materialSwitches","_shadowMapTime","_depthMapTime","_forwardTime","_cullTime","_sortTime","_skinTime","_morphTime","_instancingTime","_layerCompositionUpdateTime","_lightClustersTime","_lightClusters","_shadowRenderer","projId","projSkyboxId","viewId","viewId3","viewInvId","viewProjId","viewPos","viewPosId","nearClipId","farClipId","cameraParamsId","fogColorId","fogStartId","fogEndId","fogDensityId","modelMatrixId","normalMatrixId","poseMatrixId","boneTextureId","boneTextureSizeId","morphWeightsA","morphWeightsB","morphPositionTex","morphNormalTex","morphTexParams","alphaTestId","opacityMapId","ambientId","exposureId","skyboxIntensityId","lightColorId","lightDirId","lightShadowMapId","lightShadowMatrixId","lightShadowParamsId","lightRadiusId","lightPos","lightPosId","lightWidth","lightWidthId","lightHeight","lightHeightId","lightInAngleId","lightOutAngleId","lightCookieId","lightCookieIntId","lightCookieMatrixId","lightCookieOffsetId","shadowMatrixPaletteId","shadowCascadeDistancesId","shadowCascadeCountId","depthMapId","screenSizeId","_screenSize","twoSidedLightingNegScaleFactorId","fogColor","ambientColor","cameraParams","drawCallA","drawCallB","zdist","zdist2","lightA","lightB","presenting","combinedProj","combinedViewInv","combinedView","xr","views","view","viewOffMat","cullBorder","leftProj","rightProj","leftViewInv","rightViewInv","leftView","rightView","session","viewInvOffMat","projViewOffMat","getProjectionMatrixSkybox","clearView","pixelWidth","pixelHeight","forceWrite","_clearOptions","ambientLight","exposure","skyboxModel","cnt","campos","hWidth","hHeight","directional","numDirs","_resolveLight","_direction","setLTCDirectionallLight","bias","normalBias","vsmBias","shadowBuffer","_shadowRenderParams","omni","_position","setLTCPositionalLight","cookieIntensity","cookieMatrix","cookieCam","getSpotCookieCamera","cookieNode","_cookieTransformUniform","_cookieOffsetUniform","_cookieOffset","usedDirLights","omnis","spts","numOmnis","numSpts","dispatchOmniLight","staticId","dispatchSpotLight","visibleList","drawCall","visibleLength","drawCallsCount","command","getBoundingSphere","si","updateMatrices","updateMatrixPalette","morphInst","_instancedDrawCalls","_removedByInstancing","flip","wt2","vertexBufferIds","texturePositions","textureNormals","_textureParams","_activeVertexBuffers","_shaderMorphWeightsA","_shaderMorphWeightsB","vp","drawCallback","variantKey","lightMask","prevObjDefs","prevLightMask","prevStatic","lightHash","prevMaterial","dispatchDirectLights","dispatchLocalLights","setBlendFunctionSeparate","setBlendEquationSeparate","setBlendFunction","setBlendEquation","setDepthFunc","setAlphaToCoverage","setStencilTest","setStencilFunc","readMask","setStencilOperation","setStencilFuncFront","setStencilOperationFront","setStencilFuncBack","setStencilOperationBack","drawInstance2","enableAutoInstancing","defaultInstancingFormat","prevStaticSource","newDrawCalls","verts","numTris","vertSize","offsetP","baseIndex","_x","_y","_z","minx","miny","maxx","maxy","minv","maxv","triLightCombUsed","combIndices","combIbName","combIb","lightTypePass","bit","lht","minVec","maxVec","localLightBounds","invMatrix","triLightComb","lightAabb","triBounds","chunkAabb","mesh2","lightCompare","emitter","comp","updateShaders","updateLitShaders","updateCpuSkinMatrices","shaderVersion","_postRenderCounter","_preRenderCalledForCameras","_postRenderCalledForCameras","_postRenderCounterMax","instances","_needsStaticPrepare","_staticLightHash","_staticPrepareDone","revertStaticMeshes","prepareStaticMeshes","updateGpuSkinMatrices","updateMorphing","dispatchGlobalLights","fogStart","fogEnd","fogDensity","compUpdatedFlags","cullLocal","cullDirectional","cameraPass","frameBegin","cullLights","objects","visibleTransparent","visibleOpaque","onPreCull","onPostCull","frameEnd","cullShadowmaps","updateSkybox","_updateSkybox","beginLayers","updated","_update","updateLightStats","beginFrame","setSceneConstants","cullComposition","gpuUpdate","renderShadows","onPreRenderOpaque","onPreRenderTransparent","onPreRender","_renderAction","_renderAction$renderT","backupColor","backupDepth","backupStencil","_sortVisible","_activeCamera","activate","draws","renderForward","shaderPass","onDrawCall","onPostprocessing","onPostRenderOpaque","onPostRenderTransparent","onPostRender","spotCookieCamera","sortCallbacks","sortLights","layerCounter","VisibleInstanceList","InstanceList","Layer","_refCounter","opaqueSortMode","transparentSortMode","onEnable","onDisable","layerReference","customSortCallback","customCalculateSortValues","_lightsSet","_lightCube","incrementCounter","decrementCounter","skipShadowCasters","sceneShaderVer","spliceOffset","spliceCount","opaque","removeMeshInstanceFromArray","_generateLightHash","strStatic","camPos","camFwd","meshPos","tempx","tempy","tempz","cameraNode","sortMode","_calculateSortDistances","spotCenter","spotEndPoint","tmpVec","chanId","directionalCascades","LightRenderData","createShadowCamera","Light","_color","_intensity","_castShadows","bakeDir","attenuationStart","_cookieTransformSet","_cookieOffsetSet","_innerConeAngle","_cookieMatrix","_renderData","_destroyShadowMap","rd","setColor","falloffMode","vsmBlurSize","innerConeAngle","outerConeAngle","normalOffsetBias","shadowResolution","box","scl","finalColor","linearFinalColor","_updateFinalColor","_this$_scene","layersDirty","stype","cookieOffset","cookieTransform","tempVec$1","tempSphere","MeshNode","component","bounds","LightInfo","store","lightBounds","Lightmapper","renderer","assets","_tempSet","_initCalled","passMaterials","stats","renderPasses","lightmapCount","totalRenderTime","forwardTime","fboTime","shadowMapTime","shadersLinked","blackTex","destroyLightmapCache","dilateShader","constantPixelOffset","constantBakeDir","materials","bakeNodes","destroyRT","lenght","passCount","xformUv1","bakeLmEnd","lmMaterial","allNodes","_node$model","_node$model2","_node$render","lightmapped","notInstancedMeshInstances","collectModels","castShadowsLightmap","meshes","srcArea","lightmapSizeMultiplier","sizeMult","_area","areaMult","totalArea","lightmapMaxResolution","shaderDefs","setLightmapped","startTime","startShaders","startFboTime","startCompileTime","setLightmaping","initBake","bakeInternal","finishBake","nowTime","bakeNode","calculateLightmapSize","layerComposition","bakeLights","sceneLights","lightInfo","restore","revertStatic","bakeLight","casterBounds","lightAffectsNode","setEulerAngles","frustumSize","nodeVisible","lightArray","shadowMapRendered","nodeRT","lightmap","tempRT","tempTex","createMaterials","setupScene","allocateTextures","prepareLightsToBake","updateTransforms","prepareShadowCasters","computeNodeBounds","rcv","computeBounds","shadersUpdatedOn1stPass","_bakeLight$light$shad","lightCameraPrepare","lightCameraPrepareAndCull","setupLightArray","renderShadowMap","backupMaterials","lightmapSize","restoreMaterials","dilateTextures","restoreLights","restoreScene","Morph","_renderTextureFormat","FORMAT_HALF_FLOAT","_textureFormat","_useTextureMorph","_updateMorphFlags","_calculateAabb","_morphPositions","_morphNormals","_initTextureBased","_initVertexBuffers","_postInit","deltaArrays","deltaInfos","deltaNormals","vertexUsed","ids","usedDataIndices","freeIndex","dataCount","morphTextureWidth","morphTextureHeight","halfFloat","arraySize","packedDeltas","_setTexture","_createTexture","pixelData","nonUniformScale","MorphInstance","_weights","setWeight","defaultWeight","_activeTargets","maxSubmitCount","_shaderMorphWeights","createRT","textureVar","rtPositions","rtNormals","morphFactor","zeroTextures","fragmentShader","fs","_getFragmentShader","srcTextureName","submitBatch","usedCount","_getShader","activeTarget","_updateTextureRenderTarget","posIndex","nrmIndex","_vertexBufferPositions","_vertexBufferNormals","absWeight","activeCount","getWeight","maxActiveTargets","_updateTextureMorph","_updateVertexMorph","Model","graph","skinInstances","morphInstances","_shadersVersion","_immutable","srcNodes","cloneNodes","cloneGraph","_duplicate","newNode","cloneMeshInstances","cloneSkinInstances","cloneMorphInstances","cloneSkinInstance","cloneMorphInstance","nodeIndex","cloneMeshInstance","skinInstanceIndex","morphInstanceIndex","getGraph","_prepareRenderStyleForArray","MorphTarget","_name","_defaultWeight","_createVertexBuffer","deltaPositionsType","deltaNormalsType","uniformScale","rotMat","rotMatInv","randomPosTformed","randomPos","rndFactor3Vec","particlePosPrev","velocityVec","localVelocityVec","velocityVec2","localVelocityVec2","radialVelocityVec","particlePos","particleFinalPos","moveDirVec","tmpVec3$1","frac","glMod","encodeFloatRG","encX","encY","ParticleCPUUpdater","_emitter","particleTex","spawnMatrix","extentsInnerRatioUniform","emitterPos","startSpawnTime","rX","rY","rZ","rW","numParticlesPot","emitterShape","edgeX","edgeY","edgeZ","spawnBoundsSphereInnerRatio","emitterRadius","emitterRadiusInner","rate","rate2","packX","worldBounds","worldBoundsSize","packY","packZ","packA","startAngle","startAngle2","rg0","ba0","rg1","ba1","maxNegLife","lifetime","numParticles","rgba3","encZ","encW","encodeFloatRGBA","vbToSort","delta","isOnStop","fullMat","cf","cc","rotSpeed","rotSpeed2","scale2","alpha2","radialSpeed","posCam","useMesh","precision1","vbCPU","numParticleVerts","rndFactor","particleRate","particleLifetime","life","nlife","alphaDiv","calcSpawnPosition","particleEnabled","qRotSpeed","qRotSpeed2","qScale","qScale2","qAlpha","qAlpha2","qRadialSpeed","qRadialSpeed2","qLocalVelocity","qLocalVelocity2","qVelocity","qVelocity2","initialVelocity","wrapBounds","particleDistance","loop","vbOffset","quadX","quadY","quadZ","vbStride","vbOld","p2","spawnMatrix3","emitterMatrix3","emitterMatrix3Inv","ParticleGPUUpdater","frameRandomUniform","emitterPosUniform","emitterScaleUniform","worldBoundsMulUniform","worldBoundsAddUniform","inBoundsSizeUniform","inBoundsCenterUniform","constantParticleTexIN","constantParticleTexOUT","constantEmitterPos","constantEmitterScale","constantSpawnBounds","constantSpawnPosInnerRatio","constantSpawnBoundsSphere","constantSpawnBoundsSphereInnerRatio","constantInitialVelocity","constantFrameRandom","constantDelta","constantRate","constantRateDiv","constantLifetime","constantGraphSampleSize","constantGraphNumSamples","constantInternalTex0","constantInternalTex1","constantInternalTex2","constantInternalTex3","constantEmitterMatrix","constantEmitterMatrixInv","constantNumParticles","constantNumParticlesPot","constantLocalVelocityDivMult","constantVelocityDivMult","constantRotSpeedDivMult","constantSeed","constantStartAngle","constantStartAngle2","constantOutBoundsMul","constantOutBoundsAdd","constantInBoundsSize","constantInBoundsCenter","constantMaxVel","constantFaceTangent","constantFaceBinorm","prevWorldBoundsSize","prevWorldBoundsCenter","randomize","internalTex0","internalTex1","internalTex2","internalTex3","emitterScale","worldBoundsMul","worldBoundsAdd","_setInputBounds","maxVel","emitterMatrix","seed","localVelocityUMax","velocityUMax","rotSpeedUMax","texIN","swapTex","particleTexOUT","particleTexIN","beenReset","particleTexStart","texOUT","rtParticleTexIN","rtParticleTexOUT","shaderParticleUpdateOnStop","shaderParticleUpdateRespawn","shaderParticleUpdateNoRespawn","particleVerts","mult8Bit","mipFilter","saturate","setPropertyTarget","setPropertyOptions","default0Curve","default1Curve","default0Curve3","default1Curve3","particleTexHeight","tmpVec3","setProperty","pName","defaultVal","pack3NFloats","packTextureXYZ_NXYZ","qXYZ","qXYZ2","maxUnsignedGraphValue","A","outUMax","chans","divGraphFrom2Curves","curve1","curve2","B","subGraph","uMax","normalizeGraph","ParticleEmitter","_addTimeTime","DEFAULT_PARAM_TEXTURE","xgrad","ygrad","dtex","_gpuUpdater","_cpuUpdater","constantLightCube","wrapBoundsUniform","colorGraph","scaleGraph","alphaGraph","localVelocityGraph","velocityGraph","rotationSpeedGraph","radialSpeedGraph","lightCube","lightCubeDir","animTilesParams","animParams","animIndexParams","colorParam","localBounds","worldBoundsNoTrail","worldBoundsTrail","prevEmitterExtents","emitterExtents","prevEmitterRadius","timeToSwitchBounds","numParticleIndices","fixedTimeStep","maxSubSteps","simTime","simTimeTotal","rebuild","regenShader","resetMaterial","calculateLocalBounds","nodeWT","calculateBoundsMad","maxR","maxScale","stepWeight","wVels","lVels","accumX","accumY","accumZ","accumR","accumW","spawnBounds","forceCpuParticles","_destroyResources","rebuildGraphs","resetWorldBounds","iSort","emitterExtentsInner","shaderCodeStart","shaderCodeRespawn","shaderCodeNoRespawn","shaderCodeOnStop","_allocate","wasVisible","_initializeTextures","resetTime","addTime","preWarm","prewarm","animNumFrames","animTilesX","animTilesY","qColor","quantizeClamped","localVelocityGraph2","velocityGraph2","qColor2","colorGraph2","rotationSpeedGraph2","scaleGraph2","alphaGraph2","radialSpeedGraph2","colorUMax","scaleUMax","alphaUMax","radialSpeedUMax","qLocalVelocityDiv","qVelocityDiv","qColorDiv","qRotSpeedDiv","qScaleDiv","qAlphaDiv","qRadialSpeedDiv","umax","umax2","lumax","lumax2","rumax","rumax2","lmaxVel","maxRad","qA","qB","qC","qD","qE","packTexture5Floats","packTexture2Floats","qRGB","packTextureRGBA","hasNormal","normalOption","onChangeCamera","inTools","halfLambert","depthSoftening","noFog","_isAnimated","animLoop","orientation","_compParticleFaceParams","binormal","particleNormal","particleFormat","psysVertCount","psysIndexCount","meshData","texCoordOffset","elem","vert","vertID","origLoop","lifetimeFraction","iterations","stepDelta","endTime","interval","calcEndTime","calculateWorldBounds","tilesParams","animStartFrame","animSpeed","animNumAnimations","animIndex","randomizeAnimIndex","onFinished","AreaLightLuts","texture1","texture2","setUniforms","resource","buildTexture","offsetScale","ret","convertToHalfFloat","convertToUint","versions","majorVersion","minorVersion","data1","data2","srcData1","srcData2","identityGraphNode","LineBatch","numLinesAllocated","vbRam","linesUsed","meshInstanceArray","linesToAdd","DataView","multiColor","setFloat32","setUint8","ImmediateData","lineVertexFormat","lineBatches","layerToBatch","quadMesh","textureShader","depthTextureShader","cubeLocalPos","cubeWorldPos","usedGraphNodes","freeGraphNodes","getTextureVS","gl2","quadVb","graphNode","getGraphNode","addLayer","_cubeWorldPos","cubePositions","prepareLineBatch","addLines","spherePoints","numSegments","sin0","cos0","sin1","cos1","finalize","clearMeshInstances","numLines","getLayerIdx","addLayerIdx","Scene","_gravity","_fog","_gammaCorrection","_toneMapping","_skyboxCubeMap","_skyboxIntensity","_skyboxMip","_skyboxRotation","_skyboxRotationMat4","lightmapMode","_stats","dynamicLights","bakedLights","lastStaticPrepareFullTime","lastStaticPrepareSearchTime","lastStaticPrepareWriteTime","lastStaticPrepareTriAabbTime","lastStaticPrepareCombineTime","updateShadersTime","_statsUpdated","_models","_resetSkyboxModel","prev","settings","physics","gravity","global_ambient","fog_color","fog_start","fog_end","fog_density","gamma_correction","tonemapping","skyboxMip","usedTex","dev","skyLayer","cubemaps","different","containsModel","removeShadowCasters","hasAudioContext","AudioContext","webkitAudioContext","Channel","manager","sound","pitch","paused","suspended","startOffset","context","gain","createGain","audio","cloneNode","pause","setVolume","getVolume","isPlaying","unpause","play","_createSource","currentTime","duration","setLoop","setPitch","onManagerVolumeChange","onManagerSuspend","onManagerResume","stop","playbackRate","playbackState","PLAYING_STATE","getDuration","createBufferSource","connect","destination","onended","isNaN","DISTANCE_LINEAR","DISTANCE_INVERSE","DISTANCE_EXPONENTIAL","Channel3d","velocity","panner","createPanner","maxDistance","minDistance","rollOffFactor","distanceModel","setVelocity","getMaxDistance","setMaxDistance","getMinDistance","refDistance","setMinDistance","getRollOffFactor","rolloffFactor","setRollOffFactor","factor","getDistanceModel","pannel","setDistanceModel","posOne","posTwo","distance","fallOff","listener","Listener","_manager","setOrientation","SoundManager","_context","_forceWebAudioApi","forceWebAudioApi","_resumeContext","_unlock","resume","disconnect","close","Key","Node","_keys","Animation","_nodes","_nodeDict","Skin","ibp","Render","_meshes","decRefMeshes","incRefMeshes","AnimCurve","paths","input","interpolation","_paths","_input","_output","_interpolation","AnimData","_components","_data","AnimEvents","_events","AnimTrack","inputs","outputs","animEvents","_duration","_inputs","_outputs","_curves","_animEvents","snapshot","_time","_results","eval","AnimBinder","deltaTime","pathSegments","character","RegExp","curr","entityPath","propertyPath","DEFAULT_LOCALE","DEFAULT_LOCALE_FALLBACKS","PLURALS","definePluralFn","locales","getLang","locale","findAvailableLocale","desiredLocale","availableLocales","fallback","lang","isInteger","mod10","mod100","DEFAULT_PLURAL_FN","getPluralFn","ABSOLUTE_URL","properties$2","AssetVariants","defineVariantProperty","field","filename","file","_file","reload","Untar","assetIdCounter","VARIANT_SUPPORT","pvr","dxt","etc2","etc1","basis","VARIANT_DEFAULT_PRIORITY","Asset","_id","_preload","_resources","_i18n","loaded","loading","registry","getPreferredFile","prefix","separator","_this$registry","_this$registry$_loade","_loader","_app","variant","enableBundles","bundles","listBundlesForAsset","len2","relativePath","assetId","load","resources","getFileUrl","contents","patch","_old","_loadFaces","GlbResources","gltf","scenes","animations","renders","skins","isDataURI","getNumComponents","accessorType","getComponentType","componentType","getComponentSizeInBytes","gltfToEngineSemanticMap","getAccessorData","gltfAccessor","bufferViews","getComponentDataType","sparse","indicesAccessor","valuesAccessor","bufferView","byteOffset","targetIndex","generateNormals","sourceDesc","srcStride","dummyIndices","generateIndices","normalsTemp","i3","triangleCount","p3","p1p2","p1p3","faceNormal","invLen","calculateNormals","cloneTextureAsset","shallowCopyLevels","cloneTexture","createVertexBufferInternal","disableFlipV","positionDesc","sourceOffset","elementOrder","lhsOrder","rhsOrder","isCorrectlyInterleaved","sourceArray","targetStride","sourceStride","vertexData","targetArray","kend","floatOffsets","shortOffsets","byteOffsets","typedArray","flipTexCoordVs","tempMat","tempVec","createMesh","gltfMesh","vertexBufferDict","primitives","canUseMorph","extensions","decoderModule","DracoDecoderModule","extDraco","KHR_draco_mesh_compression","uint8Buffer","DecoderBuffer","Init","outputGeometry","decoder","Decoder","geometryType","GetEncodedGeometryType","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","TRIANGULAR_MESH","DecodeBufferToMesh","INVALID_GEOMETRY_TYPE","ok","ptr","error_msg","numFaces","num_faces","bit32","num_points","dataSize","_malloc","GetTrianglesUInt32Array","HEAPU32","GetTrianglesUInt16Array","HEAPU16","_free","numPoints","extractDracoAttributeInfo","uniqueId","componentSizeInBytes","storageType","attribute","GetAttributeByUniqueId","numValues","num_components","data_type","DT_UINT8","GetAttributeDataArrayForAllPoints","HEAPU8","DT_UINT16","DT_FLOAT32","HEAPF32","attributeInfo","createVertexBufferDraco","useAttributes","attribIds","vbKey","accessorData","byteStride","createVertexBuffer","getPrimitiveType","indexFormat","materialIndex","POSITION","NORMAL","extras","targetNames","weights","createMaterial","gltfMaterial","glossChunk","specularChunk","clearCoatGlossChunk","uvONE","uvZERO","extractTextureTransform","maps","texCoord","textureTransformData","KHR_texture_transform","specData","KHR_materials_pbrSpecularGlossiness","diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture","pbrData","pbrMetallicRoughness","baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture","normalTexture","occlusionTexture","emissiveFactor","emissiveTexture","alphaMode","alphaCutoff","doubleSided","ccData","KHR_materials_clearcoat","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","createNode","gltfNode","setLocalPosition","setLocalEulerAngles","setLocalScale","setLocalRotation","translation","createLight","gltfLight","lightProps","Entity","addComponent","createSkins","glbSkins","gltfSkin","bindMatrix","joints","numJoints","inverseBindMatrices","ibmData","ibmValues","createSkin","createAnimations","preprocess","animation","postprocess","gltfAnimation","animationIndex","gltfAccessors","createAnimData","interpMap","inputMap","outputMap","quatArrays","transformSchema","splitPath","prevIndex","createAnimation","createResources","textureAssets","global","process","createNodes","sceneRoot","childNode","createScenes","KHR_lights_punctual","gltfLights","createLights","textureAsset","createMeshes","linkSkins","loadImageAsync","gltfImage","urlBase","processAsync","onLoad","loadTexture","mimeType","crossOrigin","isBlobUrl","extension","URL","revokeObjectURL","blob","Blob","createObjectURL","parseGltf","gltfChunk","TextDecoder","decode","decodeBinaryUtf8","parseFloat","parseChunk","glbData","magic","getUint32","chunkLength","chunkType","chunkData","binaryChunk","parseGlb","parseBufferViewsAsync","gltfBufferView","remaining","GlbParser","gltfBuffer","arrayBuffer","byteString","atob","binaryArray","loadBuffersAsync","images","gltfTexture","gltfImages","textureIndex","imageIndex","textureList","gltfSampler","getFilter","getWrap","wrapS","wrapT","applySampler","gltfImageIndex","loadTexturesAsync","result_","AnimationHandler","glbResources","animData","anim","addNode","defPos","defaults","defRot","defScl","AnimClipHandler","AnimStateGraph","_parameters","layerId","dataLayer","states","transitions","dataLayerTransition","conditions","conditionKeys","condition","parameterName","paramId","AnimStateGraphHandler","Sound","Audio","ie","msie","rv","toMIME","AudioHandler","message","_createSound","_isSupported","success","decodeAudioData","onReady","BinaryHandler","Bundle","files","_blobUrls","UntarScope","isWorker","utfDecoder","asciiDecoder","PaxHeader","fields","_fields","UntarInternal","_arrayBuffer","_bufferView","_globalPaxHeader","_paxHeader","_bytesRead","paxArray","bytesRead","spaceIndex","fieldLength","applyHeader","fieldName","fieldValue","_hasNext","_readNextFile","headersDataView","ustarFormat","normalFile","remainder","namePrefix","untar","filenamePrefix","onmessage","postMessage","workerUrl","UntarWorker","_requestId","_pendingRequests","_filenamePrefix","_worker","getWorkerUrl","_onMessage","terminate","BundleHandler","_assets","_untar","hasPendingRequests","SkinInstanceCachedObject","SkinInstanceCache","skinInst","getCachedSkinInstance","addCachedSkinInstance","cachedObjArray","_skinInstanceCache","cachedObj","cachedObjIndex","ContainerResource","_defaultMaterial","_assetName","createModel","modelAsset","createAsset","skinedMeshInstances","createMeshInstance","cloneHierarchy","glb","attachedMi","meshGroup","cloneMi","lightEntity","childClone","sceneClones","createCachedSkinedInstance","createSceneHierarchy","destroyAsset","remove","unload","destroyAssets","assetName","subAsset","sceneNodes","nodeType","skinIndex","ContainerHandler","parseData","parseAsync","_getUrlWithoutParams","container","CssHandler","CubemapHandler","loader","_registry","loadAssets","cubemapAsset","loadFaces","assetIdA","assetIdB","assetIds","assetData","oldAssets","_handlerState","oldResources","getType","prelitLevels","prelit","faceAssets","cmpArrays","faceTextures","faceLevels","faceTexture","faces","arr1","valueInt","texAsset","getAssetIds","loadedAssetIds","loadedAssets","awaiting","onError","processTexAsset","resolveId","compareAssetIds","assetId_","FolderHandler","FONT_MSDF","Font","em","upgradeDataSchema","newChars","existing","newKey","letter","FontHandler","_loadTextures","numLoaded","onLoaded","font","CompressUtils","compressed","singleVecs","___1","tripleVecs","___2","fieldFirstCode","fieldArray","fieldCodeBase","Decompress","_handleMap","_handleArray","_result","_handleKey","origKey","run","_handleArElt","elt","SceneParser","isTemplate","_isTemplate","entities","compressedFormat","entDecompressed","curData","curEnt","_createEntity","childEnt","_openComponentData","setGuid","resource_id","_setPosRotScale","_template","template","labels","label","addLabel","systemsList","systems","entityData","getGuid","system","componentData","SceneUtils","errMsg","stack","HierarchyHandler","script","preloading","HtmlHandler","JsonHandler","AssetReference","propertyName","_scope","_onAssetLoad","_onAssetAdd","_onAssetRemove","_onAssetUnload","_onLoad","_onAdd","_onRemove","_onUnload","_bind","_url","getByUrl","StandardMaterialValidator","removeInvalid","enumValidators","_createEnumValidator","setInvalid","validate","TYPES","pathMapping","enumType","chunkNames","validated","JsonStandardMaterialParser","migrated","migrate","_validate","initialize","mapping_format","RENAMED_PROPERTIES","_new","DEPRECATED_PROPERTIES","PLACEHOLDER_MAP","MaterialHandler","_placeholderTextures","_parser","white","gray","black","_bindAndAssignAssets","materialAsset","_createPlaceholders","placeholder","_getPlaceholderTexture","_assignTexture","_assignPlaceholderTexture","_assignCubemap","assetReference","TEXTURES","dataAssetId","materialTexture","isPlaceHolderTexture","dataValidated","_onTextureLoad","_onTextureAdd","_onTextureRemoveOrUnload","getAbsoluteUrl","CUBEMAPS","_onCubemapLoad","_onCubemapAdd","_onCubemapRemoveOrUnload","GlbModelParser","PartitionedVertex","boneIndices","SkinPartition","partition","vertexStart","indexStart","indexMap","originalMesh","vertexArray","remappedIndex","influence","blendWeight","originalBoneIndex","getBoneRemap","vertexIndices","bonesToAdd","bonesToAddCount","needToAdd","addVertex","partitionSkin","materialMappings","indicesToReferences","vertexArrays","getVertex","meshesToSplit","partitions","primitiveVertices","primitiveIndices","basePartition","iIndex","added","iBonePartition","addPrimitive","partitionedVertices","partitionedIndices","iSour","iDest","splitSkins","splitSkin","splitVertexArray","dstBoneIndices","srcBoneIndices","referencesToIndices","JSON_PRIMITIVE_TYPE","JSON_VERTEX_ELEMENT_TYPE","JsonModelParser","modelData","_parseNodes","_parseSkins","_parseVertexBuffers","_parseIndexBuffers","morphs","_parseMorphs","_parseMeshes","_parseMeshInstances","nodeData","parents","skinData","ibm","morphIndex","morphTarget","morphTargetArray","sparseToFull","totalCount","full","dstIndex","_getMorphVertexCount","targetAabb","attributeMap","texCoord0","texCoord1","texCoord2","texCoord3","texCoord4","texCoord5","texCoord6","texCoord7","attributeName","maxVerts","meshAabb","meshInstanceData","ModelHandler","_parsers","addParser","decider","parser","mapping","handleMaterial","onContainerAssetLoaded","containerAsset","renderAsset","containerResource","renderIndex","onContainerAssetAdded","onContainerAssetRemoved","RenderHandler","ResourceLoader","_handlers","_requests","handler","handleLoad","urlObj","_onFailure","extra","normalizedUrl","hasUrl","canLoadUrl","loadUrl","fileUrlFromBundle","_loadNull","SceneHandler","applySceneSettings","_legacy","_createdLoadingScreen","ScriptType","_pcScriptName","ScriptHandler","_push","createLoadingScreen","_scripts","_loadScript","legacy","Type","_types","head","onload","assert","ShaderHandler","spriteNormals","spriteIndices","Sprite","_pixelsPerUnit","pixelsPerUnit","renderMode","_atlas","_frameKeys","frameKeys","_updatingProperties","_meshesDirty","_createMeshes","createMeshFunc","_create9SliceMesh","_createSimpleMesh","frame","frames","texWidth","texHeight","hp","pivot","lu","bv","ru","tv","frameKey","_onSetFrames","_onFrameChanged","_onFrameRemoved","onTextureAtlasLoaded","atlasAsset","onTextureAtlasAdded","SpriteHandler","__data","textureAtlasAsset","startUpdate","_updateAtlas","endUpdate","_onAssetChange","Template","_templateRoot","_parseTemplate","TemplateHandler","TextHandler","TextureAtlas","_texture","_frames","border","JSON_ADDRESS_MODE$1","JSON_FILTER_MODE$1","regexFrame","TextureAtlasHandler","getHandler","textureUrl","minfilter","magfilter","addressu","addressv","BasisWorker","rgbPriority","rgbaPriority","BASIS_FORMAT","opaqueMapping","astc","atc","none","alphaMapping","PIXEL_FORMAT","basisToEngineMapping","basisFormat","deviceDetails","formats","unswizzleGGGR","genB","R","G","pack565","performanceNow","transcode","funcStart","basisFile","BasisFile","getImageWidth","getImageHeight","getNumImages","getNumLevels","hasAlpha","getHasAlpha","isUASTC","testInOrder","chooseTargetFormat","unswizzle","isGGGR","notPOT","startTranscoding","levelData","dstSize","getImageTranscodedSizeInBytes","transcodeImage","is16BitFormat","isCompressedFormat","transcodeTime","unswizzledGGGR","workerTranscode","queue","config","importScripts","basisUrl","module","instantiateWasm","imports","successCallback","WebAssembly","instantiate","then","catch","reason","initializeBasis","getCompressionFormats","BasisQueue","clients","job","shift","client","BasisClient","eager","worker","handleResponse","enqueueClient","defaultRgbPriority","defaultRgbaPriority","lazyConfig","initializing","basisInitialize","lazyInit","glueUrl","wasmUrl","fallbackUrl","wasmModule","wasmModules","PRELOAD_MODULES","moduleName","ASSET_PREFIX","numWorkers","eagerWorkers","getWorkerBlob","File","sendResponse","basisCode","Module","of","Instance","wasmSupported","fetchPromise","fetch","compileManual","compile","module_","compileStreaming","prepareWorkerModules","clientConfig","BasisParser","_asset$file","_asset$file$variants","_asset$file$variants$","enqueueJob","basisTranscode","ImgParser","useImageBitmap","_loadImageBitmap","_loadImage","setSource","originalUrl","Image","retryTimeout","createImageBitmap","imageBitmap","IDENTIFIER","KNOWN_FORMATS","KtxParser","textureData","dataU32","endianness","glTypeSize","glInternalFormat","glBaseInternalFormat","pixelDepth","numberOfArrayElements","numberOfFaces","numberOfMipmapLevels","bytesOfKeyValueData","byteSize","isCubemap","mipmapLevel","imageSizeInBytes","LegacyDdsParser","isFourCc","fcc","bpp","FCC_DXT1","FCC_PVRTC_2BPP_RGB_1","FCC_PVRTC_4BPP_RGB_1","floating","pvrtc2","pvrtc4","mipWidth","mipHeight","mipBuff","Reader","readUint8","getUint8","HdrParser","reader","readLine","_error","_readPixels","_readPixelsFlat","rgbe","peekUint8s","scanstart","readUint8s","JSON_ADDRESS_MODE","JSON_FILTER_MODE","JSON_TEXTURE_TYPE","TextureHandler","imgParser","parsers","dds","ktx","_getParser","downsample","sampledWidth","sampledHeight","sampledData","xs","ys","xsys","_completePartialMipmapChain","preferredFile","TagsCache","tagsRest","missingIndex","AssetRegistry","_names","_tags","_urls","filters","include","preload","addItem","_onTagAdd","_onTagRemove","removeItem","_opened","parentNode","loadFromUrlAndFilename","loadFromUrlError","startLoad","loadedAsset","_loadModel","continuation","basename","mappingUrl","_loadMaterials","onMaterialLoaded","loadFromUrl","onTextureLoaded","texParams","idxs","findAll","BundleRegistry","_bundleAssets","_assetsInBundles","_urlsInBundles","_fileRequests","_onAssetAdded","_onAssetRemoved","_registerBundleEventListeners","_indexAssetInBundle","_indexAssetFileUrls","bundleAssetId","_onBundleLoaded","_onBundleError","bundleAsset","urls","_getAssetFileUrls","_normalizeUrl","numFiles","_unregisterBundleEventListeners","decodedUrl","hasBlobUrl","requests","getBlobUrl","_findLoadedOrLoadingBundleForUrl","bundle","ScriptRegistry","scriptName","__name","swap","scriptInstance","scriptInstances","scriptInstancesInitialized","_scriptsIndex","_scriptsData","__initializeAttributes","_initialized","_postInitialized","postInitialize","nameOrType","scriptType","I18nParser","entry","messages","I18n","_translations","_availableLangs","_findFallbackLocale","_locale","_lang","translations","pluralFn","_pluralFn","parsed","hasAny","desiredLang","replaceLang","addData","removeData","FILLMODE_FILL_WINDOW","FILLMODE_KEEP_ASPECT","RESOLUTION_AUTO","RESOLUTION_FIXED","VrDisplay","displayId","_frameData","VRFrameData","sitToStandInv","leftPos","rightPos","combinedPos","combinedFov","combinedAspect","_presentChange","detail","vrdisplay","isPresenting","leftEye","getEyeParameters","rightEye","renderWidth","renderHeight","setResolution","_allowResize","setCanvasResolution","getFrameData","leftProjectionMatrix","rightProjectionMatrix","stage","stageParameters","sittingToStandingTransform","leftViewMatrix","rightViewMatrix","maxFov","deltaX","deltaY","deltaZ","fwdX","fwdY","fwdZ","depthNear","depthFar","requestPresent","exitPresent","submitFrame","resetPose","capabilities","VrManager","isSupported","displays","_onDisplayConnect","_onDisplayDisconnect","_attach","_getDisplays","_addDisplay","_detach","poll","getVRDisplays","XRTYPE_VR","XRTYPE_AR","XRDEPTHSENSINGUSAGE_CPU","poolVec3","poolQuat","XrHitTestSource","xrHitTestSource","transient","_xrHitTestSource","_transient","sources","hitTest","onStop","cancel","transientResults","getHitTestResultsForTransientInput","transientResult","inputSource","_getByInputSource","updateHitResults","getHitTestResults","pose","getPose","_referenceSpace","XrHitTest","_supported","XRSession","requestHitTestSource","_session","_onSessionStart","_onSessionEnd","fireError","isAvailable","xrRay","profile","spaceType","offsetRay","XRRay","DOMPoint","requestReferenceSpace","referenceSpace","space","entityTypes","_onHitTestSource","requestHitTestSourceForTransientInput","hitTestSource","XrFinger","hand","_hand","_fingers","_joints","_tip","tipJointIds","XRHand","tipJointIdsIndex","XrJoint","finger","_finger","_wrist","_radius","_localTransform","_worldTransform","_localPosition","_localRotation","_rotation","_updateTransforms","fingerJointIds","vecA$2","vecB$2","vecC","XrHand","xrHand","_xrInputSource","_inputSource","_tracking","_jointsById","_tips","joint","wrist","jointId","tip","xrInputSource","jointSpace","visibilityState","getJointPose","j1","j4","j6","j9","j16","j21","_dirtyRay","_rayLocal","jointL","jointR","handedness","_fingerIsClosed","_squeezing","quat$1","ids$1","XrInputSource","_ray","_grip","_selecting","_elementInput","_elementEntity","_hitTestSources","gripSpace","gripPose","targetRayPose","targetRaySpace","parentTransform","_updateRayTransforms","profiles","onHitTestSourceAdd","onHitTestSourceRemove","targetRayMode","gamepad","XrInput","_inputSources","_onInputSourcesChangeEvt","_onInputSourcesChange","inputSources","_addInputSource","removed","_removeInputSource","hitTestSources","vec3A","vec3B","mat4A","mat4B","XrLightEstimation","_available","_lightProbeRequested","_lightProbe","_sphericalHarmonics","requestLightProbe","lightProbe","wasRequested","active","lightEstimate","getLightEstimate","pli","primaryLightIntensity","primaryLightDirection","setFromAxisAngle","sphericalHarmonicsCoefficients","XrTrackedImage","_bitmap","_measuredWidth","_trackable","_emulated","_pose","widthInMeters","bitmap","XrImageTracking","XRImageTrackingResult","_images","trackedImage","getTrackedImageScores","Promise","all","bitmaps","getImageTrackingResults","trackingState","measuredWidthInMeters","_dirtyTransform","imageSpace","XrDomOverlay","XRDOMOverlayState","_root","domOverlayState","XrDepthSensing","_depthInfoCpu","_depthInfoGpu","_usage","_dataFormat","_matrixDirty","_matrix","_emptyBuffer","supported","depthUsage","depthDataFormat","depthInfo","resized","dataBuffer","depthInfoCpu","depthInfoGpu","getDepthInformation","_updateTexture","normDepthBufferFromNormView","getDepthInMeters","XRDepthInformation","rawValueToMeters","XrPlane","planeDetection","xrPlane","_planeDetection","_xrPlane","_lastChangedTime","lastChangedTime","_orientation","planeSpace","polygon","XrPlaneDetection","XRPlane","_planesIndex","_planes","detectedPlanes","XrManager","_spaceType","_baseLayer","depthSensing","domOverlay","imageTracking","lightEstimation","viewsPool","_depthNear","_depthFar","_deviceAvailabilityCheck","_setClipPlanes","requiredFeatures","optionalFeatures","usagePreference","dataFormatPreference","unshift","prepareImages","trackedImages","_onStartOptionsReady","requestSession","_sessionSupportCheck","isSessionSupported","available","onVisibilityChange","onClipPlanesChange","onEnd","tick","XRWebGLLayer","updateRenderState","baseLayer","renderState","framebufferWidth","framebufferHeight","getViewerPose","lengthNew","posePosition","poseOrientation","viewRaw","getViewport","inverse","Component","schema","_accessorsBuilt","buildAccessors","onSetEnabled","_buildAccessors","record","ComponentSystem","ComponentType","DataType","initializeComponentData","properties","convertValue","matchingProperties","_helper","dt","_toolsUpdate","_animationUpdate","_fixedUpdate","_postUpdate","_erase","_extends","AnimCache","_len","_t","_hermite","_findKey","idx0","idx1","hermite","AnimSnapshot","animTrack","AnimClip","track","speed","playing","eventHandler","_track","_snapshot","_playing","_speed","_loop","_blendWeight","_blendOrder","_eventHandler","_eventCursor","blendOrder","frameStartTime","frameEndTime","clippedFrameDuration","eventCursor","activeEventsForFrame","AnimEvaluator","binder","_binder","_clips","clip","resolved","targetPath","blendCounter","clips","unresolve","removeClip","rebind","removeClips","addClip","_stableSort","_set","_blend","_dot","_normalize","_blendQuat","_blendVec","lessFunc","AnimTarget","_func","_targetPath","DefaultAnimBinder","flatten","targetCache","findMeshInstances","nodeCounts","activeNodes","handlers","createAnimTarget","textureName","animComponent","findByPath","encodedPath","encode","findNode","valueCount","InterpolatedKey","_written","_keyFrames","_quat","_pos","_targetNode","Skeleton","_animation","looping","_interpolatedKeys","_interpolatedKeyDict","_currKeyIndices","addInterpolatedKeys","interpKey","numNodes","nodeName","updateGraph","k1","k2","foundKey","currKeyIndex","slerp","skel1","skel2","key1","key2","dstKey","setTarget","getTarget","AnimationComponent","animationsIndex","onSetAnimations","onSetAssets","onSetLoop","blendTime","prevAnim","currAnim","skeleton","animEvaluator","_createAnimationController","blendSpeed","fromSkel","toSkel","_resetAnimationController","hasJson","hasGlb","setGraph","onAssetReady","onAssetAdd","onAssetChanged","onAssetRemoved","restarted","_stopCurrentAnimation","modelComponent","setModel","animName","loadAnimationAssets","AnimationComponentData","_schema$l","AnimationComponentSystem","onBeforeRemove","onUpdate","clonedAnimations","clonedAnimationsIndex","AnimNode","_state","_pointLength","_weightedSpeed","_weight","_animTrack","totalWeight","weightedSpeed","AnimBlendTree","syncAnimations","createTree","findParameter","_parameterValues","_findParameter","_syncAnimations","_pointCache","calculateWeights","paramsEqual","updatedParameter","speedMultiplier","getNodeCount","AnimBlendTree1D","updateParameterValues","weightedDurationSum","child2Distance","absoluteSpeed","AnimBlendTreeCartesian2D","pointKey","pi","pipj","minj","weightSum","_p","_pip","pointDistanceCache","AnimBlendTreeDirectional2D","pointLength","angleRad","pLength","piLength","pjLength","pointCache","weightedChildDuration","AnimBlendTreeDirect","ANIM_INTERRUPTION_NONE","ANIM_PARAMETER_INTEGER","ANIM_PARAMETER_FLOAT","ANIM_PARAMETER_BOOLEAN","ANIM_PARAMETER_TRIGGER","ANIM_STATE_START","ANIM_STATE_END","ANIM_STATE_ANY","ANIM_CONTROL_STATES","AnimState","controller","blendTree","_controller","_animations","_animationList","_blendTree","_createTree","currNode","getChild","pathString","indexOfAnimation","_getNodeFromPath","nodeCount","trackClipName","trackClip","findClip","AnimTransition","exitTime","transitionOffset","interruptionSource","_from","_to","_priority","_conditions","_exitTime","_transitionOffset","_interruptionSource","AnimController","_animEvaluator","_states","_stateNames","_transitions","transition","_findTransitionsFromStateCache","_findTransitionsBetweenStatesCache","_previousStateName","_activeStateName","_activate","_currTransitionTime","_totalTransitionTime","_isTransitioning","_transitionInterruptionSource","_transitionPreviousStates","_timeInState","_timeInStateBefore","_findState","stateName","activeState","playable","_getActiveStateProgressForTime","activeStateName","maxDuration","activeStateAnimations","activeClip","sourceStateName","destinationStateName","conditionsMet","_findTransitionsBetweenStates","_findTransitionsFromState","hasExitTime","progressBefore","progress","_transitionHasConditionsMet","startTransition","previousState","interpolatedTime","hasTransitionOffset","timeInState","timeInStateBefore","offsetTime","timelineDuration","normalizedWeight","activeStateDuration","newStateName","_findTransition","updateStateFromTransition","addAnimation","_transitionToState","stateWeight","activeClips","totalClips","v2","v3","v4","AnimComponentBinder","propertyComponent","_getEntityFromHierarchy","findComponent","_createAnimTargetForProperty","entityHierarchy","currEntity","resolveLeaf","steps","packFunc","_resolvePath","setterFunc","toUpperCase","objKey","propertyHierarchy","materialPropertyName","setter","animDataType","animDataComponents","_setter","_packFloat","_packBoolean","_packVec2","_packVec3","_packVec4","_packColor","_packQuat","AnimComponentLayer","_component","assignAnimation","removeNodeAnimations","previousStateName","activeStateProgress","activeStateCurrentTime","transitioning","transitionProgress","AnimComponent","_onStateGraphAssetChangeEvent","_stateGraph","loadStateGraph","_stateGraphAsset","_animationAssets","_layerIndices","_asset","removeStateGraph","findByGuid","_layerIndicies","animBinder","layerName","findAnimationLayer","_addLayer","stateGraph","paramKeys","paramKey","setupAnimationAssets","stateKey","animationAsset","stateGraphAsset","layerPlaying","_this$addLayer","getParameterValue","setParameterValue","AnimComponentData","_schema$k","AnimComponentSystem","onAnimationUpdate","complexProperties","animationAssets","layerIndices","AudioListenerComponent","audiolistener","setCurrentListener","AudioListenerComponentData","_schema$j","AudioListenerComponentSystem","AudioSourceComponent","onSetVolume","onSetPitch","onSetMinDistance","onSetMaxDistance","onSetRollOffFactor","onSetDistanceModel","onSet3d","playSound3d","currentSource","playSound","newAssets","_inTools","loadAudioSourceAssets","initialized","_done","AudioSourceComponentData","_schema$i","AudioSourceComponentSystem","onInitialize","onRemove","audiosource","EntityReference","parentComponent","entityPropertyName","eventConfig","_parentComponent","_entityPropertyName","_entity","_configureEventListeners","_onEntityDestroy","_toggleLifecycleListeners","externalEventConfig","internalEventConfig","externalEventListenerConfigs","_parseEventListenerConfig","internalEventListenerConfigs","_eventListenerConfigs","_listenerStatusFlags","_gainListeners","_loseListeners","listenerDescription","listenerDescriptionParts","sourceName","eventName","onOrOff","_onSetEntity","_onParentComponentRemove","_onPostInitialize","_onSceneLoaded","allComponentSystems","componentSystem","_onComponentAdd","_onComponentRemove","_updateEntityReference","nextEntity","nextEntityGuid","_onBeforeEntityChange","_onAfterEntityChange","_toggleEntityListeners","_callAllGainOrLoseListeners","componentName","_callGainOrLoseListener","_toggleComponentListeners","listenerMap","isDestroying","_safeToggleListener","isAdding","_getEventSource","VisualState","STATES_TO_TINT_NAMES","STATES_TO_SPRITE_ASSET_NAMES","STATES_TO_SPRITE_FRAME_NAMES","ButtonComponent","_visualState","_isHovering","_hoveringCounter","_isPressed","_defaultTint","_defaultSpriteAsset","_defaultSpriteFrame","_imageReference","_onImageElementGain","_onImageElementLose","_onSetColor","_onSetOpacity","_onSetSpriteAsset","_onSetSpriteFrame","_onSetActive","_onSetTransitionMode","_onSetTransitionValue","_onElementComponentAdd","_onElementComponentRemove","_updateVisualState","_cancelTween","_resetToDefaultVisualState","_forceReapplyVisualState","_toggleHitElementListeners","transitionMode","_storeDefaultVisualState","_hasHitElementListeners","_onMouseEnter","_onMouseLeave","_onMouseDown","_onMouseUp","_onTouchStart","_onTouchEnd","_onTouchLeave","_onTouchCancel","_onSelectStart","_onSelectEnd","_onSelectEnter","_onSelectLeave","_onClick","hasComponent","_storeDefaultColor","_storeDefaultOpacity","_storeDefaultSpriteAsset","spriteAsset","_storeDefaultSpriteFrame","spriteFrame","_isApplyingTint","_isApplyingSprite","_fireIfActive","force","oldVisualState","newVisualState","_determineVisualState","tintColor","_applyTint","spriteAssetName","spriteFrameName","_applySprite","_applyTintImmediately","fadeDuration","_applyTintWithTween","color4","_tweenInfo","lerpColor","elapsedTime","elapsedProportion","_updateTintTween","onParentComponentEnable","depthLayer$1","ButtonComponentData","imageEntity","hitPadding","hoverTint","pressedTint","inactiveTint","hoverSpriteAsset","hoverSpriteFrame","pressedSpriteAsset","pressedSpriteFrame","inactiveSpriteAsset","inactiveSpriteFrame","_schema$h","ButtonComponentSystem","_onRemoveComponent","button","PostEffect","effect","inputTarget","outputTarget","PostEffectQueue","destinationRenderTarget","effects","depthTarget","renderTargetScale","resizeTimeout","resizeLast","_resizeTimeoutCallback","resizeRenderTargets","onCameraRectChanged","useDepth","getHdrFormat","_allocateColorBuffer","useStencil","destroyTextureBuffers","isFirstEffect","_createOffscreenTarget","newEntry","_sourceTarget","_newPostEffect","needsDepthBuffer","_requestDepthMap","_destroyOffscreenTarget","_releaseDepthMap","_requestDepthMaps","_onCanvasResized","fx","destTarget","_releaseDepthMaps","desiredWidth","desiredHeight","_resizeOffscreenTarget","properties$1","readonly","CameraComponent","_disablePostEffectsLayer","_postEffects","dirtyLayerCompositionCameras","removeCamera","addCamera","screenx","screeny","cameraz","screenToWorld","worldToScreen","oldComp","newComp","addCameraToLayers","onLayerAdded","onLayerRemoved","onLayersChanged","postEffects","removeCameraFromLayers","calculateAspectRatio","vr","canPresent","CameraComponentData","_schema$g","CameraComponentSystem","onAppPrerender","cameraComponent","setClipPlanes","sortCamerasByPriority","ammoVec1$1","ammoQuat$1","ammoTransform$1","CollisionComponent","_compoundParent","_onInsert","onSetType","onSetHalfExtents","onSetRadius","onSetHeight","onSetAxis","onSetAsset","onSetRenderAsset","onSetModel","onSetRender","changeType","recreatePhysicalShapes","onRenderAssetRemoved","implementations","doRecreatePhysicalShape","compound","shapes","getNumChildShapes","getChildShape","Ammo","rigidbody","ancestor","collision","_updateEachDescendantTransform","bodyComponent","enableSimulation","_getNodeTransform","addChildShape","trigger","disableSimulation","_destroying","_removeCompoundChild","CollisionComponentData","BODYTYPE_STATIC","BODYTYPE_DYNAMIC","BODYTYPE_KINEMATIC","BODYMASK_NOT_STATIC","Trigger","btVector3","btQuaternion","btTransform","setOrigin","createBody","setRestitution","setFriction","setDamping","setLinearFactor","setAngularFactor","setCollisionFlags","getCollisionFlags","destroyBody","_getEntityTransform","setWorldTransform","addBody","_triggers","forceActivationState","updateTransform","removeBody","mat4","vec3","quat","tempGraphNode","_schema$f","CollisionSystemImpl","beforeInitialize","afterInitialize","createPhysicalShape","firstCompoundChild","_updateEachDescendant","_addEachDescendant","updateCompoundChildTransform","removeModel","CollisionBoxSystemImpl","ammoHe","btBoxShape","CollisionSphereSystemImpl","btSphereShape","CollisionCapsuleSystemImpl","btCapsuleShapeX","btCapsuleShape","btCapsuleShapeZ","CollisionCylinderSystemImpl","btCylinderShapeX","btCylinderShape","btCylinderShapeZ","CollisionConeSystemImpl","btConeShapeX","btConeShape","btConeShapeZ","CollisionMeshSystemImpl","triMesh","_triMeshCache","getIndices","numTriangles","v1","btTriangleMesh","addTriangle","triMeshShape","btBvhTriangleMeshShape","scaling","_getNodeScaling","setLocalScaling","btCompoundShape","createAmmoMesh","loadAsset","destroyShape","beforeRemove","worldScale","previousScale","getLocalScaling","numShapes","CollisionCompoundSystemImpl","CollisionComponentSystem","impl","_createImplementation","_getImplementation","removeChildShape","_getCompoundChildShapeIndex","removeChildShapeByIndex","previousType","newType","relative","_calculateNodeRelativeTransform","getLocalTransform","getOrigin","ammoQuat","ComponentSystemRegistry","ELEMENTTYPE_IMAGE","ELEMENTTYPE_TEXT","StencilParameters","ImageRenderable","_element","receiveShadow","_meshDirty","setMaterial","forceUpdateAabb","addModelToLayers","lastChild","getLastChild","last","getMaskOffset","visibleFn","_isScreenCulled","isVisibleForCamera","ImageElement","_system","_textureAsset","_materialAsset","_spriteAsset","_spriteFrame","_mask","_maskRef","_outerScale","_outerScaleUniform","_innerOffset","_innerOffsetUniform","_atlasRect","_atlasRectUniform","_defaultMesh","_createMesh","_colorUniform","_onScreenChange","screen","_onParentResizeOrPivotChange","_onScreenSpaceChange","_onDrawOrderChange","_onResolutionChange","setMesh","_updateMesh","_updateMaterial","previous","setDrawOrder","setUnmaskDrawOrder","defaultImageMaterials","nineSliced","nineTiled","_hasUserMaterial","getImageElementMaterial","setCull","setScreenSpace","setLayer","calculatedWidth","calculatedHeight","vertexDataF32","_isScreenSpace","atlasTextureWidth","atlasTextureHeight","setAabbFunc","frameData","borderWidthScale","borderHeightScale","ppu","scaleMulX","scaleMulY","scaleX","scaleY","nineSlice","_beingInitialized","setMask","_onMaterialAdded","_bindMaterialAsset","_onMaterialLoad","_onMaterialChange","_onMaterialRemove","_onTextureAdded","_bindTextureAsset","_onTextureChange","_onTextureRemove","_onSpriteAssetAdded","_bindSpriteAsset","_onSpriteAssetLoad","_onSpriteAssetChange","_onSpriteAssetRemove","_onTextureAtlasLoad","atlasAssetId","_onSpriteMeshesChange","_onSpritePpuChange","_onAtlasTextureChange","_updateSprite","stencilParams","maskedBy","sp","defaultScreenSpaceImageMaskMaterial","defaultImageMaskMaterial","defaultScreenSpaceImageMaterial","defaultImageMaterial","_prev","_unbindSpriteAsset","_unbindSprite","_bindSprite","_toggleMask","LocalizedAsset","i18n","_onSetLocale","_autoLoad","_disableLocalization","_defaultAsset","_localizedAsset","_onDefaultAssetAdd","_onLocaleAdd","_onLocaleRemove","_onDefaultAssetRemove","_onLocalizedAssetLoad","_onLocalizedAssetChange","_onLocalizedAssetRemove","_bindLocalizedAsset","localizedAsset","localizedAssetId","getLocalizedAssetId","defaultAsset","_unbindDefaultAsset","_bindDefaultAsset","_onLocalizedAssetAdd","_unbindLocalizedAsset","IDENTIFIER_REGEX","Scanner","symbols","_symbols","_last","_cur","_buf","_mode","token","_read","tokenStrings","read","buf","_eof","_tag","_next","_store","_whitespace","_string","_isIdentifierSymbol","_identifier","Parser","_scanner","_parseTag","identifier","merge","combineTags","evaluateMarkup","stripped_symbols","invalidTag","numSymbols","edges","tagStack","removeTags","addTags","edgeKeys","resolvedTags","edge","prevTag","resolvedTag","resolveMarkupTags","Markup","MeshInfo","quad","LINE_BREAK_CHAR","WHITESPACE_CHAR","WORD_BOUNDARY_CHAR","ALPHANUMERIC_CHAR","CJK_CHAR","NO_LINE_BREAK_CJK_CHAR","CONTROL_CHARS","CONTROL_GLYPH_DATA","xadvance","xoffset","yoffset","TextElement","_colorPalette","_symbolColors","_i18nKey","_fontAsset","disableLocalization","_onFontLoad","_onFontChange","_onFontRemove","_font","_spacing","_fontSize","_fontMinY","_fontMaxY","_originalFontSize","_maxFontSize","_minFontSize","_autoFitWidth","_autoFitHeight","_maxLines","_lineHeight","_scaledLineHeight","_wrapLines","_drawOrder","_alignment","_autoWidth","_autoHeight","_meshInfo","_aabbDirty","_noResize","_currentMaterialType","_maskedMaterialSrc","_rtlReorder","_unicodeConverter","_rtl","_outlineColor","_outlineColorUniform","_outlineThicknessScale","_outlineThickness","_shadowColor","_shadowColorUniform","_shadowOffsetScale","_shadowOffset","_shadowOffsetUniform","_enableMarkup","_onParentResize","_onPivotChange","_onLocaleSet","_onLocalizationData","_rangeStart","_rangeEnd","_setMaterial","_updateText","fontAsset","_resetLocalizedText","_setText","getText","unicodeConverter","unicodeConverterFunc","getUnicodeConverter","rtlReorderFunc","getRtlReorder","rtl","paletteMap","charactersPerTexture","_calculateCharsPerTexture","removedModel","screenCulled","meshInfo","_removeMeshInstance","_setTextureParams","_getPxRange","_setMaskedBy","_updateMeshes","_updateRenderRange","oldMesh","getTextElementMaterial","nextchar","json","minFont","maxFont","autoFit","_shouldAutoFit","_xMinusTrailingWhitespace","wordStartX","wordStartIndex","lineStartIndex","numWordsThisLine","numCharsThisLine","numBreaksThisLine","splitHorizontalAnchors","anchor","maxLineWidth","autoWidth","fontMinY","fontMaxY","breakLine","lineBreakIndex","lineBreakX","_lineWidths","sliceStart","sliceEnd","_lineContents","retryUpdateMeshes","color_r","color_g","color_b","dataScale","advance","quadsize","kerning","kernTable","kernLeft","isWhitespace","candidateLineWidth","backtrack","backtrackEnd","backChar","backCharData","backMeshInfo","fontSize","_shouldAutoFitWidth","_shouldAutoFitHeight","_isWordBoundary","_isValidNextChar","_isNextCJKBoundary","_isNextCJKWholeWord","_getUv","colorIdx","autoHeight","ha","va","prevQuad","hoffset","voffset","tmp0","tmp1","vertMax","autoLoad","symbolIndex","startChars","endChars","previousFontType","_onFontRender","charId","newFontSize","rangeStart","rangeEnd","invParentWtm","vecA$1","vecB$1","matA","matB","matC","matD","ElementComponent","_anchor","_localAnchor","_pivot","_calculatedWidth","_calculatedHeight","_margin","_modelTransform","_screenToWorld","_anchorTransform","_anchorDirty","_parentWorldTransform","_screenTransform","_screenCorners","_canvasCorners","_worldCorners","_cornersDirty","_canvasCornersDirty","_worldCornersDirty","_patch","_group","_useInput","_addedModels","_batchGroupId","_offsetReadAt","_maskOffset","_maskedBy","_setPosition","_setLocalPosition","pvt","resx","resy","setTranslate","_calculateLocalAnchors","_sizeDirty","_calculateSize","_screenMatrix","parentWorldTransform","getLocalRotation","depthOffset","pivotOffset","_absLeft","_absBottom","_parseUpToScreen","_updateScreen","_prerender","syncMask","_bindElement","_unbindElement","_unbindScreen","previousScreen","_bindScreen","_hasSplitAnchorsX","_hasSplitAnchorsY","syncDrawOrder","_updateMask","renderableElement","_setStencil","currentMask","getLocalPosition","useInput","elementInput","addElement","batcher","insert","removeElement","_unpatch","propagateCalculatedWidth","propagateCalculatedHeight","newWidth","_absRight","newHeight","_absTop","_setWidth","_setCalculatedWidth","_setHeight","_setCalculatedHeight","updateMargins","_flagChildrenAsDirty","mo","clipL","clipR","clipT","clipB","screenCorners","cameraWidth","cameraHeight","hitCorners","wr","wl","wb","prevX","prevY","mx","my","parentBottomLeft","clientWidth","clientHeight","localPos","_define","ElementComponentData","_schema$e","ElementComponentSystem","_defaultTexture","defaultImage9SlicedMaterial","defaultImage9TiledMaterial","defaultImage9SlicedMaskMaterial","defaultImage9TiledMaskMaterial","defaultScreenSpaceImage9SlicedMaterial","defaultScreenSpaceImage9TiledMaterial","defaultScreenSpaceImageMask9SlicedMaterial","defaultScreenSpaceImageMask9TiledMaterial","defaultTextMaterial","defaultBitmapTextMaterial","defaultScreenSpaceTextMaterial","defaultScreenSpaceBitmapTextMaterial","onRemoveComponent","splitHorAnchors","splitVerAnchors","_marginChange","margin","shouldForceSetAnchor","rtlReorder","spacing","lineHeight","maxLines","wrapLines","minFontSize","maxFontSize","autoFitWidth","autoFitHeight","alignment","outlineColor","outlineThickness","shadowColor","shadowOffset","enableMarkup","nineSliceTiled","_createBaseImageMaterial","MOTION_FREE","MOTION_LIMITED","MOTION_LOCKED","JointComponent","_constraint","_entityA","_entityB","_breakForce","_enableCollision","_linearMotionX","_linearLimitsX","_linearSpringX","_linearStiffnessX","_linearDampingX","_linearEquilibriumX","_linearMotionY","_linearLimitsY","_linearSpringY","_linearStiffnessY","_linearDampingY","_linearEquilibriumY","_linearMotionZ","_linearLimitsZ","_linearSpringZ","_linearStiffnessZ","_linearDampingZ","_linearEquilibriumZ","_angularMotionX","_angularLimitsX","_angularSpringX","_angularStiffnessX","_angularDampingX","_angularEquilibriumX","_angularMotionY","_angularLimitsY","_angularSpringY","_angularStiffnessY","_angularDampingY","_angularEquilibriumY","_angularMotionZ","_angularLimitsZ","_angularSpringZ","_angularEquilibriumZ","_angularDampingZ","_angularStiffnessZ","_onSetEnabled","_destroyConstraint","_createConstraint","setBreakingImpulseThreshold","enableCollision","limits","_updateAngularLimits","_updateLinearLimits","pcTransform","ammoTransform","ammoVec","constraint","setAngularLowerLimit","setAngularUpperLimit","setLinearLowerLimit","setLinearUpperLimit","bodyA","jointWtm","invEntityAWtm","frameA","_convertTransform","bodyB","invEntityBWtm","frameB","btGeneric6DofSpringConstraint","enableSpring","setEquilibriumPoint","setStiffness","dynamicsWorld","addConstraint","removeConstraint","functionMap","Damping","Equilibrium","Spring","Stiffness","propInternal","JointComponentData","_schema$d","JointComponentSystem","initFromData","LayoutChildComponent","_minWidth","_minHeight","_maxWidth","_maxHeight","_fitWidthProportion","_fitHeightProportion","_excludeFromLayout","defineResizeProperty","LayoutChildComponentData","_schema$c","LayoutChildComponentSystem","minWidth","minHeight","maxWidth","maxHeight","fitWidthProportion","fitHeightProportion","excludeFromLayout","layoutChild","layoutchild","AXIS_MAPPINGS","calculatedSize","minSize","maxSize","fitting","fittingProportion","OPPOSITE_ORIENTATION","PROPERTY_DEFAULTS","FITTING_ACTION","availableSpace","createCalculator","minExtentA","minExtentB","maxExtentA","shouldIncludeInLayout","layoutChildComponent","determineFittingAction","fittingMode","currentSize","availableSize","calculateTotalSpace","sizes","sumValues","stretchSizesToFitContainer","sizesThisLine","idealRequiredSpace","ascendingMaxSizeOrder","getTraversalOrder","fittingProportions","getNormalizedValues","fittingProportionSums","createSumArray","remainingUndershoot","targetIncrease","calculateAdjustment","targetSize","actualSize","shrinkSizesToFitContainer","descendingMinSizeOrder","inverseFittingProportions","invertedValues","invertNormalizedValues","inverseFittingProportionSums","remainingOvershoot","targetReduction","remainingAdjustment","proportion","sumOfRemainingProportions","getElementSizeProperties","sizeProperties","getProperty","accumulator","normalizedValues","numItems","orderBy","descending","assignIndex","itemA","itemB","getIndex","sumArray","allElements","layoutOptions","containerSize","padding","resetAnchors","reverseAxisA","reverseX","reverseY","reverseAxisB","lineIndex","reverse","reverseLinesIfRequired","runningSize","allowOverrun","idealElementSize","splitLines","sizesAllLines","elementIndex","largestElementsForEachLine","largestSizesForEachLine","largestElement","largestSize","NEGATIVE_INFINITY","sizesThisElement","fittingAction","sizesForThisElement","elementFittingAction","calculateSizesOnAxisB","calculateSizesOnAxisA","cursor","positionsAllLines","positionsThisLine","calculateBasePositions","alignmentA","alignmentB","paddingA","paddingB","axisAOffset","axisBOffset","withinLineAxisBOffset","applyAlignmentAndPadding","applySizesAndPositions","layoutWidth","layoutHeight","xOffset","yOffset","createLayoutInfo","CALCULATE_FNS","LayoutCalculator","calculateFn","getElement","isEnabledAndHasEnabledElement","LayoutGroupComponent","_reverseX","_reverseY","_padding","_widthFitting","_heightFitting","_wrap","_layoutCalculator","_listenForReflowEvents","_onChildInsert","_onChildRemove","_onElementOrLayoutComponentAdd","_onElementOrLayoutComponentRemove","onOff","_scheduleReflow","_isSelfOrChild","_isPerformingReflow","scheduleReflow","containerWidth","containerHeight","widthFitting","heightFitting","layoutInfo","calculateLayout","defineReflowSchedulingProperty","LayoutGroupComponentData","_schema$b","LayoutGroupComponentSystem","_reflowQueue","_onPostUpdate","layoutGroup","layoutgroup","_processReflowQueue","iterationCount","componentA","componentB","graphDepth","reflow","_lightProps","_lightPropsDefault","LightComponent","_cookieAsset","_cookieAssetId","_cookieAssetAdd","addLight","removeLight","addLightToLayers","updateShadow","forceLoad","onCookieAssetLoad","onCookieAssetSet","onCookieAssetRemove","cookie","onCookieAssetAdd","removeLightFromLayers","cookieAsset","_defineProperty","setFunc","skipEqualsCheck","refreshProperties","cookieFalloff","cookieChannel","cookieScale","cookieAngle","bake","affectLightmapped","LightComponentData","_props","_propsDefault","lightTypes","LightComponentSystem","ModelComponent","_mapping","_receiveShadows","_castShadowsLightmap","_lightmapped","_lightmapSizeMultiplier","_isStatic","_assetOld","_materialEvents","_dirtyModelAsset","_dirtyMaterialAsset","_clonedModel","onRemoveChild","onInsertChild","_unsetMaterialEvents","idOrPath","_getMaterialAssetUrl","_setMaterialEvent","isAsset","_bindModelAsset","_getAssetByIdOrPath","_onMaterialAssetLoad","_onMaterialAssetUnload","_onMaterialAssetRemove","_onMaterialAssetChange","_onMaterialAssetAdd","_unbindModelAsset","_onModelAssetLoad","_onModelAssetUnload","_onModelAssetChange","_onModelAssetRemove","_onModelAssetAdded","setCustomAabb","resetStateGraph","_unbindMaterialAsset","assetMapping","_loadAndSetMeshInstanceMaterial","ModelComponentData","_schema$a","ModelComponentSystem","aabbCenter","aabbHalfExtents","customAabb","receiveShadows","meshInstancesClone","RenderComponent","_onSetRootBone","_assetReference","_onRenderAssetAdded","_onRenderAssetLoad","_onRenderAssetRemove","_onRenderAssetUnload","_materialReferences","_onRootBoneChanged","_clearSkinInstances","_cloneSkinInstances","destroyMeshInstances","_onSetMeshes","_cloneMeshes","removeCachedSkinInstance","_onMaterialUnload","RenderComponentData","_schema$9","_properties","RenderComponentSystem","srcMeshInstances","depthLayer","SIMPLE_PROPERTIES","COMPLEX_PROPERTIES","GRAPH_PROPERTIES","ASSET_PROPERTIES","ParticleSystemComponent","onSetColorMapAsset","onSetNormalMapAsset","onSetMeshAsset","onSetMesh","onSetBlendType","onSetDepthSoftening","onSetLayers","onSetSimpleProperty","onSetComplexProperty","onSetGraphProperty","_requestedDepth","_onColorMapAssetLoad","_onColorMapAssetUnload","_onColorMapAssetRemove","_onColorMapAssetChange","_unbindColorMapAsset","colorMapAsset","_bindColorMapAsset","_onNormalMapAssetLoad","_onNormalMapAssetUnload","_onNormalMapAssetRemove","_onNormalMapAssetChange","_unbindNormalMapAsset","normalMapAsset","_bindNormalMapAsset","_onMeshAssetLoad","_onMeshAssetUnload","_onMeshAssetRemove","_onMeshAssetChange","_onMeshChanged","_unbindMeshAsset","meshAsset","_bindMeshAsset","_unbindRenderAsset","_bindRenderAsset","_onRenderChanged","_onRenderSetMeshes","_requestDepth","_releaseDepth","psys","autoPlay","ParticleSystemComponentData","_schema$8","ParticleSystemComponentSystem","propertyTypes","types","particlesystem","sourceProp","numSteps","particles","_updatesPerFrame","_frameTime","finishFrame","ammoVec1","ammoVec2","ammoOrigin","ammoRayStart","ammoRayEnd","ObjectPool","constructorFunc","_constructor","_pool","_count","_resize","RigidBodyComponent","_angularDamping","_angularFactor","_angularVelocity","_body","_friction","_linearDamping","_linearFactor","_linearVelocity","_mass","_restitution","_rollingFriction","_simulationEnabled","damping","getAngularVelocity","setAngularVelocity","friction","getLinearVelocity","setLinearVelocity","mass","getCollisionShape","calculateLocalInertia","setMassProps","updateInertiaTensor","restitution","setRollingFriction","linearFactor","angularFactor","setActivationState","isActive","_dynamic","syncEntityToBody","_kinematic","_compounds","applyForce","applyTorque","applyImpulse","applyTorqueImpulse","motionState","getMotionState","RigidBodyComponentData","collisions","frameCollisions","RaycastResult","SingleContactResult","contactPoint","localPointA","localPointB","pointA","pointB","localPoint","localPointOther","pointOther","ContactPoint","ContactResult","contacts","_schema$7","RigidBodyComponentSystem","contactPointPool","contactResultPool","singleContactResultPool","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","overlappingPairCache","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","setInternalTickCallback","checkForCollisionsPointer","addFunction","_checkForCollisions","unbind","linearDamping","angularDamping","rollingFriction","addRigidBody","removeRigidBody","localInertia","btDefaultMotionState","bodyInfo","btRigidBodyConstructionInfo","btRigidBody","rayCallback","ClosestRayResultCallback","rayTest","hasHit","collisionObj","get_m_collisionObject","castObject","get_m_hitPointWorld","get_m_hitNormalWorld","AllHitsRayResultCallback","collisionObjs","get_m_collisionObjects","numHits","at","isNewCollision","others","get_m_localPointA","get_m_localPointB","positionWorldOnA","getPositionWorldOnA","positionWorldOnB","getPositionWorldOnB","normalWorldOnB","get_m_normalWorldOnB","contact","allocate","frameCollision","entityCollision","entityRigidbody","world","timeStep","wrapPointer","btDynamicsWorld","getDispatcher","numManifolds","getNumManifolds","manifold","getManifoldByIndexInternal","body0","getBody0","body1","getBody1","wb0","wb1","e0","e1","flags0","flags1","numContacts","getNumContacts","forwardContacts","reverseContacts","newCollision","e0Events","e1Events","e0BodyEvents","e1BodyEvents","_storeCollision","_hasContactEvent","globalEvents","btContactPoint","getContactPoint","_createContactPointFromAmmo","reverseContactPoint","_createReverseContactPointFromAmmo","_createSingleContactResult","forwardResult","_createContactResult","reverseResult","_cleanOldCollisions","freeAll","getGravity","setGravity","triggers","compounds","_updateCompound","kinematic","_updateKinematic","stepSimulation","_updateDynamic","getPointer","SCALEMODE_NONE","_transform","ScreenComponent","_resolution","_referenceResolution","_scaleMode","_scaleBlend","_elements","_onResize","queueDrawOrderSync","_processDrawOrderSync","prevDrawOrder","_recurseDrawOrderSync","_calcScale","referenceResolution","_onScreenRemove","_updateScale","_calcProjectionMatrix","_onScreenResize","ScreenComponentData","_schema$6","ScreenComponentSystem","windowResolution","_drawOrderSyncQueue","_onUpdate","scaleMode","scaleBlend","processDrawOrderSyncQueue","vecLookup","rawToValue","default","getEntityFromIndex","fromString","vecType","ScriptAttributes","reservedNames","__attributes","raw","evtName","oldCopy","ScriptComponent","_updateList","_postUpdateList","_destroyedScripts","_destroyed","_oldState","_beingEnabled","_isLoopingThroughScripts","_executionOrder","_checkState","onPostStateChange","wasLooping","_beginLooping","scripts","_scriptMethod","scriptMethods","_endLooping","wasLoopingBefore","_removeDestroyedScripts","_addComponentToEnabled","_removeComponentFromEnabled","__scriptType","_removeScriptInstance","_resetExecutionOrder","postUpdate","scriptsLength","__executionOrder","append","useGuid","newAttributes","duplicatedIdsMap","newGuidArray","scriptData","_insertScriptInstance","onSwap","scriptInstanceOld","oldScriptComponent","newScriptComponent","newAttributesRaw","__attributesRaw","oldAttributes","_resolveEntityScriptAttribute","newJsonValue","indOld","ScriptComponentData","executionOrderCounter","ScriptComponentSystem","_enabledComponents","_onBeforeRemove","_onInitialize","MAX_SAFE_INTEGER","_callComponentMethod","ScriptLegacyComponent","onSetScripts","functionName","areScriptsLoaded","_enableScriptComponent","_initializeScriptComponent","postInitialized","_postInitializeScriptComponent","_disableScriptComponent","runInTools","_updateScriptAttributes","_destroyScriptComponent","_loadFromCache","_loadScripts","onlyUpdateAttributes","_updateAccessors","_scriptPrefix","regex","getFromCache","_preRegisterInstance","onPostInitialize","_unprefixed","ScriptLegacyComponentData","_instances","_schema$5","INITIALIZE","POST_INITIALIZE","UPDATE","POST_UPDATE","FIXED_UPDATE","TOOLS_UPDATE","ScriptLegacyComponentSystem","instancesWithUpdate","instancesWithFixedUpdate","instancesWithPostUpdate","instancesWithToolsUpdate","onFixedUpdate","onPostUpdate","onToolsUpdate","dict","_cloneAttributes","_registerInstances","_callInstancesMethod","fixedUpdate","toolsUpdate","updateList","_updateInstances","dataStore","preRegistered","instanceName","_createAccessors","_createAccessor","_convertAttributeValue","scriptComponent","previousAttributes","oldAttribute","onAttributeChanged","curveType","_inputScreenPosition","_inputWorldPosition","_rayOrigin","_rayDirection","_planeOrigin","_planeNormal","_entityRotation","OPPOSITE_AXIS","ElementDragHelper","_axis","_dragScale","_dragStartMousePosition","_dragStartHandlePosition","_deltaMousePosition","_deltaHandlePosition","_isDragging","_onMouseDownOrTouchStart","isOn","addOrRemoveEventListener","_hasDragListeners","_handleMouseUpOrTouchEnd","_onMouseUpOrTouchEnd","mouse","_onMove","_dragCamera","_calculateDragScale","currentMousePosition","_screenToLocal","_toggleDragListeners","_determineInputPosition","_chooseRayOriginAndDirection","denominator","collisionDistance","maxPixelRatio","changedTouches","isWithin2DScreen","screenScale","dragScale","currentPosition","constrainedAxis","_tempScrollValue","ScrollViewComponent","_viewportReference","_onViewportElementGain","_onSetContentOrViewportSize","_contentReference","_onContentElementGain","_onContentElementLose","_scrollbarUpdateFlags","_scrollbarReferences","_onSetHorizontalScrollbarValue","_onHorizontalScrollbarGain","_onSetVerticalScrollbarValue","_onVerticalScrollbarGain","_prevContentSizes","_scroll","_velocity","_dragStartPosition","_disabledContentInput","_disabledContentInputEntities","_toggleElementListeners","_onSetHorizontalScrollingEnabled","_onSetVerticalScrollingEnabled","_hasElementListeners","_syncAll","_destroyDragHelper","_contentDragHelper","_onContentDragStart","_onContentDragEnd","_onContentDragMove","_prevContentDragPosition","_enableContentInput","_wasDragged","_setScrollFromContentPosition","_setVelocityFromContentPositionDelta","dragThreshold","_disableContentInput","scrollValueX","_onSetScroll","scrollValueY","_syncScrollbarEnabledState","_syncScrollbarPosition","resetVelocity","hasChanged","_updateAxis","scrollValue","_determineNewScrollValue","_syncContentPosition","_getScrollingEnabled","scrollMode","_getMaxScrollValue","_setVelocityFromOvershoot","_getAxis","_getSign","contentEntity","prevContentSize","currContentSize","_getContentSize","prevMaxOffset","_getMaxOffset","currMaxOffset","contentPosition","scrollbarEntity","scrollbar","handleSize","_getScrollbarHandleSize","isScrollingEnabled","requestedVisibility","_getScrollbarVisibility","_contentIsLargerThanViewport","_getViewportSize","maxOffsetH","maxOffsetV","contentSize","viewportSize","overshoot","_toOvershoot","_getSize","entityReference","_getCalculatedDimension","horizontal","vertical","horizontalScrollbarVisibility","verticalScrollbarVisibility","_updateVelocity","_hasOvershoot","scroll","maxScrollValue","overshootPixels","bounceAmount","_contentPositionToScrollValue","_applyScrollValueTension","log10","isDragging","_disableInput","_setScrollbarComponentsEnabled","_setContentDraggingEnabled","ScrollViewComponentData","_schema$4","ScrollViewComponentSystem","scrollview","ScrollbarComponent","_handleReference","_onHandleElementGain","_onHandleElementLose","_onSetHandleAlignment","_onSetValue","_onSetHandleSize","_onSetOrientation","_handleDragHelper","_onHandleDrag","_updateHandlePositionAndSize","_handlePositionToScrollValue","_getOppositeDimension","handleEntity","handleElement","_getHandlePosition","_getDimension","_getHandleLength","handlePosition","_getUsableTrackLength","_getTrackLength","_scrollValueToHandlePosition","_setHandleDraggingEnabled","ScrollbarComponentData","_schema$3","ScrollbarComponentSystem","capTime","SoundInstance","_pitch","_sound","_suspended","_suspendEndEvent","_suspendInstanceEvents","_playWhenLoaded","_startTime","_startOffset","_onPlayCallback","onPlay","_onPauseCallback","onPause","_onResumeCallback","onResume","_onStopCallback","_onEndCallback","_startedAt","_currentTime","_currentOffset","_inputNode","_connectorNode","_firstNode","_lastNode","_initializeNodes","_endedHandler","_onEnded","_isReady","_loadedMetadataHandler","_onLoadedMetadata","_timeUpdateHandler","_onTimeUpdate","_onManagerVolumeChange","_onManagerSuspend","_onManagerResume","_onManagerDestroy","_onPlay","_updateCurrentTime","_onPause","_onResume","_onStop","setExternalNodes","firstNode","lastNode","speakers","clearExternalNodes","getExternalNodes","loopStart","loopEnd","suspend","SoundInstance3d","_maxDistance","_refDistance","_rollOffFactor","_distanceModel","instanceOptions","SoundSlot","_overlap","overlap","_autoPlay","_onInstancePlayHandler","_onInstancePlay","_onInstancePauseHandler","_onInstancePause","_onInstanceResumeHandler","_onInstanceResume","_onInstanceStopHandler","_onInstanceStop","_onInstanceEndHandler","_onInstanceEnd","isLoaded","_hasAsset","_createInstance","playWhenLoaded","resumed","stopped","positional","assetDuration","oldAsset","isPaused","isStopped","SoundComponent","_positional","_slots","_playingBeforeDisable","slots","isSuspended","playingBeforeDisable","defineSoundPropertyBasic","publicName","privateName","defineSoundPropertyFactor","SoundComponentData","_schema$2","SoundComponentSystem","srcComponent","srcSlots","srcSlot","cloneData","updatePosition","SPRITETYPE_SIMPLE","SPRITETYPE_ANIMATED","SpriteAnimationClip","_frame","fps","_paused","currentClip","_showFrame","_setTime","_setFrame","_onSpritePpuChanged","_showModel","_hideModel","MIN_VALUE","PARAM_EMISSIVE_MAP","PARAM_OPACITY_MAP","PARAM_EMISSIVE","PARAM_OPACITY","SpriteComponent","_flipX","_addedModel","_autoPlayClip","_defaultClip","_currentClip","_onLayersChanged","_onLayerAdded","_onLayerRemoved","_tryAutoPlay","_destroy","default9SlicedMaterialSlicedMode","default9SlicedMaterialTiledMode","_updateTransform","flipX","posX","posY","SpriteComponentData","_schema$1","SpriteComponentSystem","_default9SlicedMaterialSlicedMode","_default9SlicedMaterialTiledMode","emissiveMapTint","autoPlayClip","onDestroy","ZoneComponent","_size","ZoneComponentData","_schema","ZoneComponentSystem","zone","ApplicationStats","ms","updateStart","updateTime","renderStart","renderTime","physicsStart","physicsTime","cullTime","sortTime","skinTime","morphTime","instancingTime","triangles","otherPrimitives","shadowMapUpdates","depthMapTime","lightClustersTime","_timeToCountFrames","_fpsAccum","shadow","immediate","misc","skinned","instanced","removedByInstancing","renderTargetCreationTime","updatesPerFrame","frameTime","vram","lightmapper","SceneRegistryItem","_loading","_onLoadedCallbacks","SceneRegistry","_urlIndex","sceneItem","storeInCache","findByUrl","_loadSceneData","_preloadScripts","SceneDepth","application","clearOptions","isDepth","allocateTexture","allocateRenderTarget","releaseRenderTarget","srcFbo","FRAMEBUFFER_BINDING","oldClear","visibleObjects","isTransparent","cam","layerCamId","layerVisibleList","layerVisibleListLength","initWebGl2","initWebGl1","Progress","_deprecationWarning","Application","_applications","_destroyRequested","_inFrameUpdate","timeScale","maxDeltaTime","autoRender","renderNextFrame","useLegacyScriptAttributeCloning","_librariesLoaded","_fillMode","_resolutionMode","graphicsDeviceOptions","xrCompatible","_soundManager","_entityIndex","_enableList","assetPrefix","scriptsOrder","defaultLayerWorld","sceneDepth","defaultLayerDepth","defaultLayerSkybox","defaultLayerUi","defaultLayerImmediate","defaultLayerComposition","pushOpaque","pushTransparent","_immediateLayer","createPlaceholder","_firstBake","_firstBatch","keyboard","gamepads","attachSelectEvents","_skyboxLast","scriptPrefix","addHandler","_visibilityChangeHandler","hidden","_hiddenAttr","mozHidden","msHidden","webkitHidden","makeTick","application_properties","_parseApplicationProperties","_parseScenes","_parseAssets","onAssetLoad","inc","onAssetError","sceneData","scriptUrl","_getScriptReferences","setAreaLightLuts","maxAssetRetries","enableRetry","useDevicePixelRatio","use_device_pixel_ratio","resolutionMode","resolution_mode","fillMode","fill_mode","setCanvasFillMode","layerOrder","composition","sublayer","batchGroups","grp","addGroup","i18nAssets","areaLightDataAsset","_handleAreaLightDataProperty","_loadLibraries","libraries","onLibrariesLoaded","scriptsIndex","bundlesIndex","loadingType","addLocalizedAssetId","priorityScripts","priority_scripts","animationUpdate","inputUpdate","updateAll","renderComposition","prims","culled","_numDrawCallsCulled","_depthDrawCalls","_immediateRendered","isHidden","windowWidth","innerWidth","windowHeight","innerHeight","updateCanvasSize","onLibraryLoaded","applySettings","setSkybox","_onSkyboxChange","_skyboxLoad","_skyboxRemove","_immediateData","_preRenderImmediate","_postRenderImmediate","_initImmediate","endColor","_addLines","_getDefaultImmediateOptions","renderWireCube","renderWireSphere","renderMesh","getQuadMesh","getTextureShader","renderQuad","getDepthTextureShader","renderTexture","canvasId","detach","_frameEndData","frameRequest","_processTimestamp","_fillFrameStatsBasic","_batchHandle","_guid","removeComponent","enableFirst","_onHierarchyStatePostChanged","_cloneRecursively","resolveDuplicatedEntityReferenceProperties","cloneComponent","oldChild","newChild","oldSubtreeRoot","oldEntity","newEntity","entityProperties","getPropertiesOfType","oldEntityReferenceId","newEntityReferenceId","funcNameRegex","initScriptType","_enabledOld","__destroyed","constructorFn","methods","reservedAttributes","value2","EVENT_MOUSEMOVE","KeyboardEvent","keyCode","isMousePointerLocked","mozPointerLockElement","webkitPointerLockElement","targetX","targetY","MouseEvent","coords","_getTargetCoords","wheelDelta","movementX","webkitMovementX","mozMovementX","movementY","webkitMovementY","mozMovementY","_lastX","_lastY","buttons","_buttons","ctrlKey","altKey","shiftKey","metaKey","Mouse","_lastbuttons","_upHandler","_handleUp","_downHandler","_handleDown","_moveHandler","_handleMove","_wheelHandler","_handleWheel","_contextMenuHandler","_target","_attached","passive","clientX","clientY","vecA","vecB","rayA","rayB","rayC","_pq","_pa","_pb","_pc","_pd","_m","_sct","_accumulatedScale","_paddingTop","_paddingBottom","_paddingLeft","_paddingRight","_cornerBottomLeft","_cornerBottomRight","_cornerTopRight","_cornerTopLeft","ZERO_VEC4","scalarTriple","ElementInputEvent","_stopPropagation","stopImmediatePropagation","stopPropagation","ElementMouseEvent","lastX","lastY","isPointerLocked","ElementTouchEvent","touches","ElementSelectEvent","ElementInput","domElement","_touchstartHandler","_handleTouchStart","_touchendHandler","_handleTouchEnd","_touchcancelHandler","_touchmoveHandler","_handleTouchMove","_sortElements","_hoveredElement","_pressedElement","_touchedElements","_touchesForWhichTouchLeaveHasFired","_selectedElements","_selectedPressedElements","_useMouse","useMouse","_useTouch","useTouch","_useXr","useXr","_selectEventsAttached","_clickedEntities","_onXrStart","_onXrEnd","_onXrUpdate","_onXrInputRemove","_calcMouseCoords","_onElementMouseEvent","touchedElements","_calcTouchCoords","_getTargetElement","newTouchedElements","_determineTouchedElements","newTouchInfo","oldTouchInfo","_fireEvent","touchId","touchInfo","eventType","hovered","_onElementSelectEvent","hoveredNow","hoveredBefore","getDirection","_getTargetElementByRay","pressed","totalOffsetX","totalOffsetY","HTMLElement","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","pageY","sortTransparentLayers","rayScreen","ray3d","_calculateRayScreen","_calculateRay3d","_checkElement","screenOrWorldCorners","cameraLeft","cameraRight","cameraBottom","cameraTop","_calculateScaleToScreen","_buildHitCorners","worldCorners","intersectLineQuad","write","debug","warning","alert","subs","_data3","INV_LOG2","intToBytes","bytesToInt","intersectRay","intersectsRay","viewProj","UnsupportedBrowserError","ContextCreationError","defineProperties","_dirtify","local","getLabels","hasLabel","removeLabel","findByLabel","getChildren","getName","getPath","getRoot","getParent","setName","getShader","getNodes","setDuration","getAnimation","getCurrentTime","getLooping","getNumNodes","setAnimation","setCurrentTime","setLooping","getListener","getAssetById","isFullscreen","enableFullscreen","ALLOW_KEYBOARD_INPUT","disableFullscreen","getSceneUrl","loadScene","loadSceneHierarchy","loadSceneSettings","setVisible","syncBodyToEntity","exports","require","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","getOwnPropertyNames","test3","shouldUseNative","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","Fragment","StrictMode","Profiler","Suspense","for","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","C","refs","updater","D","E","isReactComponent","setState","forceUpdate","isPureReactComponent","H","I","__self","__source","J","defaultProps","$$typeof","_owner","L","M","N","K","P","Q","_status","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","ReactCurrentOwner","IsSomeRendererActing","Children","toArray","only","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","createFactory","createRef","forwardRef","isValidElement","lazy","_payload","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","aa","ba","da","ea","fa","ia","ja","ka","acceptsBooleans","attributeNamespace","mustUseProperty","sanitizeURL","removeEmptyString","oa","pa","qa","ma","na","la","removeAttribute","setAttributeNS","xlinkHref","ta","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ma","Ka","La","Na","Oa","Pa","prepareStackTrace","displayName","Qa","_render","Ra","Sa","Ta","Va","_valueTracker","getValue","stopTracking","Ua","Wa","checked","Xa","activeElement","Ya","defaultChecked","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","cb","ownerDocument","eb","db","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","hb","jb","textContent","kb","lb","mb","nb","ob","namespaceURI","innerHTML","valueOf","firstChild","MSApp","execUnsafeLocalFunction","pb","nodeValue","qb","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","rb","sb","tb","ub","menuitem","br","col","embed","hr","keygen","link","meta","wbr","is","xb","srcElement","correspondingUseElement","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Zb","alternate","return","$b","memoizedState","dehydrated","sibling","bc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","pc","qc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","pointerId","vc","wc","lanePriority","unstable_runWithPriority","hydrate","containerInfo","xc","yc","zc","Ac","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","Dc","Ec","animationend","animationiteration","animationstart","transitionend","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","unstable_now","Rc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","clz32","bd","cd","LN2","dd","unstable_UserBlockingPriority","ed","fd","hd","uc","jd","kd","ld","md","nd","od","charCode","pd","qd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","isTrusted","td","ud","vd","Ad","screenX","screenY","getModifierState","zd","relatedTarget","fromElement","toElement","Bd","Dd","dataTransfer","Fd","Hd","animationName","pseudoElement","Jd","clipboardData","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Rd","repeat","which","Td","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","targetTouches","Xd","Zd","wheelDeltaX","wheelDeltaY","deltaMode","$d","ae","be","documentMode","ce","de","ee","fe","ge","le","date","datetime","email","month","number","password","tel","week","me","ne","oe","listeners","qe","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","Le","nextSibling","Me","contains","compareDocumentPosition","Ne","HTMLIFrameElement","contentWindow","href","Oe","contentEditable","Pe","Qe","Re","Se","Te","Ue","selectionStart","selectionEnd","anchorNode","defaultView","getSelection","anchorOffset","focusNode","focusOffset","Ve","We","Xe","Ye","Ze","Yb","$e","af","bf","df","capture","Nb","ef","ff","parentWindow","gf","hf","je","ke","jf","kf","lf","mf","autoFocus","nf","__html","pf","qf","rf","previousSibling","vf","wf","xf","yf","zf","Af","Bf","Cf","Df","Ef","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","childContextTypes","Gf","Hf","If","getChildContext","Jf","__reactInternalMemoizedMergedChildContext","Kf","Lf","Mf","Nf","Of","Pf","unstable_cancelCallback","Qf","unstable_shouldYield","Rf","unstable_requestPaint","Sf","Tf","unstable_getCurrentPriorityLevel","Uf","unstable_ImmediatePriority","Vf","Wf","Xf","unstable_LowPriority","Yf","unstable_IdlePriority","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","observedBits","responders","wg","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","yg","zg","eventTime","lane","payload","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Kg","_reactInternals","Hg","Ig","Jg","Lg","shouldComponentUpdate","Mg","contextType","Ng","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Og","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Pg","Qg","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","Tg","Ug","elementType","Vg","implementation","Wg","Xg","Yg","Zg","$g","ah","bh","dh","eh","documentElement","tagName","fh","gh","hh","ih","memoizedProps","revealOrder","jh","kh","lh","mh","nh","pendingProps","ph","qh","rh","uh","_workInProgressVersionPrimary","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","baseQueue","Ih","Jh","Kh","lastRenderedReducer","action","eagerReducer","eagerState","lastRenderedState","dispatch","Lh","Mh","_getVersion","_source","mutableReadLanes","Nh","U","getSnapshot","subscribe","setSnapshot","Oh","Ph","Qh","Rh","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","readContext","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","uf","ei","fi","gi","hi","ji","ki","li","baseLanes","ni","oi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","qi","getDerivedStateFromError","ri","pendingContext","Bi","Di","Ei","retryLane","ti","unstable_avoidThisFallback","ui","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","tailMode","Ai","Fi","Gi","wasMultiple","onClick","onclick","createElementNS","createTextNode","V","Hi","Ii","W","Ji","Ki","Li","Mi","Ni","Oi","WeakMap","Pi","Qi","Ri","Si","componentDidCatch","Ti","componentStack","Ui","WeakSet","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","focus","aj","bj","onCommitFiberUnmount","componentWillUnmount","cj","dj","ej","fj","gj","hj","insertBefore","_reactRootContainer","ij","jj","kj","lj","mj","nj","oj","pj","X","Y","qj","rj","sj","tj","uj","vj","wj","ck","Z","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Sc","Kj","Lj","Mj","callbackNode","expirationTimes","callbackPriority","Tc","Nj","Oj","Pj","Qj","Rj","Sj","Tj","finishedWork","finishedLanes","Uj","timeoutHandle","Wj","Xj","pingCache","Yj","Zj","ak","bk","dk","rangeCount","focusedElem","selectionRange","ek","createRange","setStart","removeAllRanges","addRange","setEnd","onCommitFiberRoot","fk","gk","ik","pendingChildren","jk","mutableSourceEagerHydrationData","kk","lk","mk","nk","qk","hydrationOptions","mutableSources","_internalRoot","rk","tk","hasAttribute","sk","uk","hk","unstable_observedBits","unmount","querySelectorAll","form","Vj","vk","Events","wk","findFiberByHostInstance","bundleType","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","yk","isDisabled","supportsFiber","inject","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","MessageChannel","unstable_forceFrameRate","port2","port1","sortIndex","expirationTime","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback","jsx","jsxs"],"mappings":"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","file":"static/js/2.10cc07af.chunk.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import superPropBase from \"@babel/runtime/helpers/esm/superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","/**\n * @license\n * PlayCanvas Engine v1.45.3 revision 895add4b6\n * Copyright 2011-2021 PlayCanvas Ltd. All rights reserved.\n */\nif (!Array.prototype.fill) {\n\tObject.defineProperty(Array.prototype, 'fill', {\n\t\tvalue: function (value) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow new TypeError('this is null or not defined');\n\t\t\t}\n\n\t\t\tvar O = Object(this);\n\t\t\tvar len = O.length >>> 0;\n\t\t\tvar start = arguments[1];\n\t\t\tvar relativeStart = start >> 0;\n\t\t\tvar k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);\n\t\t\tvar end = arguments[2];\n\t\t\tvar relativeEnd = end === undefined ? len : end >> 0;\n\t\t\tvar finalValue = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);\n\n\t\t\twhile (k < finalValue) {\n\t\t\t\tO[k] = value;\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn O;\n\t\t}\n\t});\n}\n\nif (!Array.prototype.find) {\n\tObject.defineProperty(Array.prototype, 'find', {\n\t\tvalue: function (predicate) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\tif (typeof predicate !== 'function') {\n\t\t\t\tthrow TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\tvar thisArg = arguments[1];\n\t\t\tvar k = 0;\n\n\t\t\twhile (k < len) {\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\t\t\t\t\treturn kValue;\n\t\t\t\t}\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n}\n\nif (!Array.prototype.findIndex) {\n\tObject.defineProperty(Array.prototype, 'findIndex', {\n\t\tvalue: function (predicate) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\tif (typeof predicate !== 'function') {\n\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\tvar thisArg = arguments[1];\n\t\t\tvar k = 0;\n\n\t\t\twhile (k < len) {\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\t\t\t\t\treturn k;\n\t\t\t\t}\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t},\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n}\n\nMath.log2 = Math.log2 || function (x) {\n\treturn Math.log(x) * Math.LOG2E;\n};\n\nif (!Math.sign) {\n\tMath.sign = function (x) {\n\t\treturn (x > 0) - (x < 0) || +x;\n\t};\n}\n\nif (Number.isFinite === undefined) Number.isFinite = function (value) {\n\treturn typeof value === 'number' && isFinite(value);\n};\n\nif (typeof Object.assign != 'function') {\n\tObject.defineProperty(Object, \"assign\", {\n\t\tvalue: function assign(target, varArgs) {\n\n\t\t\tif (target == null) {\n\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t\t}\n\n\t\t\tvar to = Object(target);\n\n\t\t\tfor (var index = 1; index < arguments.length; index++) {\n\t\t\t\tvar nextSource = arguments[index];\n\n\t\t\t\tif (nextSource != null) {\n\t\t\t\t\tfor (var nextKey in nextSource) {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn to;\n\t\t},\n\t\twritable: true,\n\t\tconfigurable: true\n\t});\n}\n\n(function () {\n\tif (typeof navigator === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\tnavigator.pointer = navigator.pointer || navigator.webkitPointer || navigator.mozPointer;\n\n\tvar pointerlockchange = function pointerlockchange() {\n\t\tvar e = document.createEvent('CustomEvent');\n\t\te.initCustomEvent('pointerlockchange', true, false, null);\n\t\tdocument.dispatchEvent(e);\n\t};\n\n\tvar pointerlockerror = function pointerlockerror() {\n\t\tvar e = document.createEvent('CustomEvent');\n\t\te.initCustomEvent('pointerlockerror', true, false, null);\n\t\tdocument.dispatchEvent(e);\n\t};\n\n\tdocument.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('webkitpointerlocklost', pointerlockchange, false);\n\tdocument.addEventListener('mozpointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('mozpointerlocklost', pointerlockchange, false);\n\tdocument.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\tdocument.addEventListener('mozpointerlockerror', pointerlockerror, false);\n\n\tif (Element.prototype.mozRequestPointerLock) {\n\t\tElement.prototype.requestPointerLock = function () {\n\t\t\tthis.mozRequestPointerLock();\n\t\t};\n\t} else {\n\t\tElement.prototype.requestPointerLock = Element.prototype.requestPointerLock || Element.prototype.webkitRequestPointerLock || Element.prototype.mozRequestPointerLock;\n\t}\n\n\tif (!Element.prototype.requestPointerLock && navigator.pointer) {\n\t\tElement.prototype.requestPointerLock = function () {\n\t\t\tvar el = this;\n\t\t\tdocument.pointerLockElement = el;\n\t\t\tnavigator.pointer.lock(el, pointerlockchange, pointerlockerror);\n\t\t};\n\t}\n\n\tdocument.exitPointerLock = document.exitPointerLock || document.webkitExitPointerLock || document.mozExitPointerLock;\n\n\tif (!document.exitPointerLock) {\n\t\tdocument.exitPointerLock = function () {\n\t\t\tif (navigator.pointer) {\n\t\t\t\tdocument.pointerLockElement = null;\n\t\t\t\tnavigator.pointer.unlock();\n\t\t\t}\n\t\t};\n\t}\n})();\n\n(function () {\n\tif (typeof window === 'undefined') return;\n\tvar lastTime = 0;\n\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\n\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\n\tif (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n\t\tvar currTime = new Date().getTime();\n\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\tvar id = window.setTimeout(function () {\n\t\t\tcallback(currTime + timeToCall);\n\t\t}, timeToCall);\n\t\tlastTime = currTime + timeToCall;\n\t\treturn id;\n\t};\n\tif (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n\t\tclearTimeout(id);\n\t};\n})();\n\nif (!String.prototype.endsWith) {\n\tString.prototype.endsWith = function (search, this_len) {\n\t\tif (this_len === undefined || this_len > this.length) {\n\t\t\tthis_len = this.length;\n\t\t}\n\n\t\treturn this.substring(this_len - search.length, this_len) === search;\n\t};\n}\n\nif (!String.prototype.includes) {\n\tString.prototype.includes = function (search, start) {\n\n\t\tif (typeof start !== 'number') {\n\t\t\tstart = 0;\n\t\t}\n\n\t\tif (start + search.length > this.length) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn this.indexOf(search, start) !== -1;\n\t\t}\n\t};\n}\n\nif (!String.prototype.startsWith) {\n\tString.prototype.startsWith = function (search, pos) {\n\t\treturn this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n\t};\n}\n\nif (!Int8Array.prototype.fill) {\n\tInt8Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint8Array.prototype.fill) {\n\tUint8Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint8ClampedArray.prototype.fill) {\n\tUint8ClampedArray.prototype.fill = Array.prototype.fill;\n}\n\nif (!Int16Array.prototype.fill) {\n\tInt16Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint16Array.prototype.fill) {\n\tUint16Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Int32Array.prototype.fill) {\n\tInt32Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint32Array.prototype.fill) {\n\tUint32Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Float32Array.prototype.fill) {\n\tFloat32Array.prototype.fill = Array.prototype.fill;\n}\n\n(function () {\n\n\tvar glErrorShadow = {};\n\n\tfunction error(msg) {\n\t\tif (window.console && window.console.error) {\n\t\t\twindow.console.error(msg);\n\t\t}\n\t}\n\n\tfunction log(msg) {\n\t\tif (window.console && window.console.log) {\n\t\t\twindow.console.log(msg);\n\t\t}\n\t}\n\n\tfunction synthesizeGLError(err, opt_msg) {\n\t\tglErrorShadow[err] = true;\n\n\t\tif (opt_msg !== undefined) {\n\t\t\terror(opt_msg);\n\t\t}\n\t}\n\n\tfunction wrapGLError(gl) {\n\t\tvar f = gl.getError;\n\n\t\tgl.getError = function () {\n\t\t\tvar err;\n\n\t\t\tdo {\n\t\t\t\terr = f.apply(gl);\n\n\t\t\t\tif (err != gl.NO_ERROR) {\n\t\t\t\t\tglErrorShadow[err] = true;\n\t\t\t\t}\n\t\t\t} while (err != gl.NO_ERROR);\n\n\t\t\tfor (var err in glErrorShadow) {\n\t\t\t\tif (glErrorShadow[err]) {\n\t\t\t\t\tdelete glErrorShadow[err];\n\t\t\t\t\treturn parseInt(err);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn gl.NO_ERROR;\n\t\t};\n\t}\n\n\tvar WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n\t\tvar gl = ext.gl;\n\t\tthis.ext = ext;\n\t\tthis.isAlive = true;\n\t\tthis.hasBeenBound = false;\n\t\tthis.elementArrayBuffer = null;\n\t\tthis.attribs = new Array(ext.maxVertexAttribs);\n\n\t\tfor (var n = 0; n < this.attribs.length; n++) {\n\t\t\tvar attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n\t\t\tthis.attribs[n] = attrib;\n\t\t}\n\n\t\tthis.maxAttrib = 0;\n\t};\n\n\tWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n\t\tthis.enabled = false;\n\t\tthis.buffer = null;\n\t\tthis.size = 4;\n\t\tthis.type = gl.FLOAT;\n\t\tthis.normalized = false;\n\t\tthis.stride = 16;\n\t\tthis.offset = 0;\n\t\tthis.cached = \"\";\n\t\tthis.recache();\n\t};\n\n\tWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n\t\tthis.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(\":\");\n\t};\n\n\tvar OESVertexArrayObject = function OESVertexArrayObject(gl) {\n\t\tvar self = this;\n\t\tthis.gl = gl;\n\t\twrapGLError(gl);\n\t\tvar original = this.original = {\n\t\t\tgetParameter: gl.getParameter,\n\t\t\tenableVertexAttribArray: gl.enableVertexAttribArray,\n\t\t\tdisableVertexAttribArray: gl.disableVertexAttribArray,\n\t\t\tbindBuffer: gl.bindBuffer,\n\t\t\tgetVertexAttrib: gl.getVertexAttrib,\n\t\t\tvertexAttribPointer: gl.vertexAttribPointer\n\t\t};\n\n\t\tgl.getParameter = function getParameter(pname) {\n\t\t\tif (pname == self.VERTEX_ARRAY_BINDING_OES) {\n\t\t\t\tif (self.currentVertexArrayObject == self.defaultVertexArrayObject) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.currentVertexArrayObject;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn original.getParameter.apply(this, arguments);\n\t\t};\n\n\t\tgl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, index);\n\t\t\tvar attrib = vao.attribs[index];\n\t\t\tattrib.enabled = true;\n\t\t\treturn original.enableVertexAttribArray.apply(this, arguments);\n\t\t};\n\n\t\tgl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, index);\n\t\t\tvar attrib = vao.attribs[index];\n\t\t\tattrib.enabled = false;\n\t\t\treturn original.disableVertexAttribArray.apply(this, arguments);\n\t\t};\n\n\t\tgl.bindBuffer = function bindBuffer(target, buffer) {\n\t\t\tswitch (target) {\n\t\t\t\tcase gl.ARRAY_BUFFER:\n\t\t\t\t\tself.currentArrayBuffer = buffer;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase gl.ELEMENT_ARRAY_BUFFER:\n\t\t\t\t\tself.currentVertexArrayObject.elementArrayBuffer = buffer;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn original.bindBuffer.apply(this, arguments);\n\t\t};\n\n\t\tgl.getVertexAttrib = function getVertexAttrib(index, pname) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvar attrib = vao.attribs[index];\n\n\t\t\tswitch (pname) {\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:\n\t\t\t\t\treturn attrib.buffer;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_ENABLED:\n\t\t\t\t\treturn attrib.enabled;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_SIZE:\n\t\t\t\t\treturn attrib.size;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_STRIDE:\n\t\t\t\t\treturn attrib.stride;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_TYPE:\n\t\t\t\t\treturn attrib.type;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_NORMALIZED:\n\t\t\t\t\treturn attrib.normalized;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn original.getVertexAttrib.apply(this, arguments);\n\t\t\t}\n\t\t};\n\n\t\tgl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, indx);\n\t\t\tvar attrib = vao.attribs[indx];\n\t\t\tattrib.buffer = self.currentArrayBuffer;\n\t\t\tattrib.size = size;\n\t\t\tattrib.type = type;\n\t\t\tattrib.normalized = normalized;\n\t\t\tattrib.stride = stride;\n\t\t\tattrib.offset = offset;\n\t\t\tattrib.recache();\n\t\t\treturn original.vertexAttribPointer.apply(this, arguments);\n\t\t};\n\n\t\tif (gl.instrumentExtension) {\n\t\t\tgl.instrumentExtension(this, \"OES_vertex_array_object\");\n\t\t}\n\n\t\tgl.canvas.addEventListener('webglcontextrestored', function () {\n\t\t\tlog(\"OESVertexArrayObject emulation library context restored\");\n\t\t\tself.reset_();\n\t\t}, true);\n\t\tthis.reset_();\n\t};\n\n\tOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85B5;\n\n\tOESVertexArrayObject.prototype.reset_ = function reset_() {\n\t\tvar contextWasLost = this.vertexArrayObjects !== undefined;\n\n\t\tif (contextWasLost) {\n\t\t\tfor (var ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n\t\t\t\tthis.vertexArrayObjects.isAlive = false;\n\t\t\t}\n\t\t}\n\n\t\tvar gl = this.gl;\n\t\tthis.maxVertexAttribs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n\t\tthis.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n\t\tthis.currentVertexArrayObject = null;\n\t\tthis.currentArrayBuffer = null;\n\t\tthis.vertexArrayObjects = [this.defaultVertexArrayObject];\n\t\tthis.bindVertexArrayOES(null);\n\t};\n\n\tOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n\t\tvar arrayObject = new WebGLVertexArrayObjectOES(this);\n\t\tthis.vertexArrayObjects.push(arrayObject);\n\t\treturn arrayObject;\n\t};\n\n\tOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n\t\tarrayObject.isAlive = false;\n\t\tthis.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n\t\tif (this.currentVertexArrayObject == arrayObject) {\n\t\t\tthis.bindVertexArrayOES(null);\n\t\t}\n\t};\n\n\tOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n\t\tif (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n\t\t\tif (arrayObject.hasBeenBound && arrayObject.ext == this) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n\t\tvar gl = this.gl;\n\n\t\tif (arrayObject && !arrayObject.isAlive) {\n\t\t\tsynthesizeGLError(gl.INVALID_OPERATION, \"bindVertexArrayOES: attempt to bind deleted arrayObject\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar original = this.original;\n\t\tvar oldVAO = this.currentVertexArrayObject;\n\t\tthis.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n\t\tthis.currentVertexArrayObject.hasBeenBound = true;\n\t\tvar newVAO = this.currentVertexArrayObject;\n\n\t\tif (oldVAO == newVAO) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!oldVAO || newVAO.elementArrayBuffer != oldVAO.elementArrayBuffer) {\n\t\t\toriginal.bindBuffer.call(gl, gl.ELEMENT_ARRAY_BUFFER, newVAO.elementArrayBuffer);\n\t\t}\n\n\t\tvar currentBinding = this.currentArrayBuffer;\n\t\tvar maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n\t\tfor (var n = 0; n <= maxAttrib; n++) {\n\t\t\tvar attrib = newVAO.attribs[n];\n\t\t\tvar oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n\t\t\tif (!oldVAO || attrib.enabled != oldAttrib.enabled) {\n\t\t\t\tif (attrib.enabled) {\n\t\t\t\t\toriginal.enableVertexAttribArray.call(gl, n);\n\t\t\t\t} else {\n\t\t\t\t\toriginal.disableVertexAttribArray.call(gl, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attrib.enabled) {\n\t\t\t\tvar bufferChanged = false;\n\n\t\t\t\tif (!oldVAO || attrib.buffer != oldAttrib.buffer) {\n\t\t\t\t\tif (currentBinding != attrib.buffer) {\n\t\t\t\t\t\toriginal.bindBuffer.call(gl, gl.ARRAY_BUFFER, attrib.buffer);\n\t\t\t\t\t\tcurrentBinding = attrib.buffer;\n\t\t\t\t\t}\n\n\t\t\t\t\tbufferChanged = true;\n\t\t\t\t}\n\n\t\t\t\tif (bufferChanged || attrib.cached != oldAttrib.cached) {\n\t\t\t\t\toriginal.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.currentArrayBuffer != currentBinding) {\n\t\t\toriginal.bindBuffer.call(gl, gl.ARRAY_BUFFER, this.currentArrayBuffer);\n\t\t}\n\t};\n\n\twindow.setupVertexArrayObject = function (gl) {\n\t\tif (gl.getSupportedExtensions) {\n\t\t\tvar exts = gl.getSupportedExtensions();\n\n\t\t\tif (exts.indexOf(\"OES_vertex_array_object\") != -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (gl.getExtension) {\n\t\t\tvar vao = gl.getExtension(\"OES_vertex_array_object\");\n\n\t\t\tif (vao) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (gl.getSupportedExtensions) {\n\t\t\tvar original_getSupportedExtensions = gl.getSupportedExtensions;\n\n\t\t\tgl.getSupportedExtensions = function getSupportedExtensions() {\n\t\t\t\tvar list = original_getSupportedExtensions.call(this) || [];\n\t\t\t\tlist.push(\"OES_vertex_array_object\");\n\t\t\t\treturn list;\n\t\t\t};\n\t\t}\n\n\t\tvar original_getExtension = gl.getExtension;\n\n\t\tgl.getExtension = function getExtension(name) {\n\t\t\tif (name == \"OES_vertex_array_object\") {\n\t\t\t\tif (!gl.__OESVertexArrayObject) {\n\t\t\t\t\tgl.__OESVertexArrayObject = new OESVertexArrayObject(gl);\n\t\t\t\t}\n\n\t\t\t\treturn gl.__OESVertexArrayObject;\n\t\t\t}\n\n\t\t\tif (original_getExtension) {\n\t\t\t\treturn original_getExtension.call(this, name);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t};\n})();\n\nconst _typeLookup = function () {\n\tconst result = {};\n\tconst names = [\"Array\", \"Object\", \"Function\", \"Date\", \"RegExp\", \"Float32Array\"];\n\n\tfor (let i = 0; i < names.length; i++) result[\"[object \" + names[i] + \"]\"] = names[i].toLowerCase();\n\n\treturn result;\n}();\n\nconst version = \"1.45.3\";\nconst revision = \"895add4b6\";\nconst config = {};\nconst common = {};\nconst apps = {};\nconst data = {};\n\nfunction type$1(obj) {\n\tif (obj === null) {\n\t\treturn \"null\";\n\t}\n\n\tconst type = typeof obj;\n\n\tif (type === \"undefined\" || type === \"number\" || type === \"string\" || type === \"boolean\") {\n\t\treturn type;\n\t}\n\n\treturn _typeLookup[Object.prototype.toString.call(obj)];\n}\n\nfunction extend(target, ex) {\n\tfor (const prop in ex) {\n\t\tconst copy = ex[prop];\n\n\t\tif (type$1(copy) === \"object\") {\n\t\t\ttarget[prop] = extend({}, copy);\n\t\t} else if (type$1(copy) === \"array\") {\n\t\t\ttarget[prop] = extend([], copy);\n\t\t} else {\n\t\t\ttarget[prop] = copy;\n\t\t}\n\t}\n\n\treturn target;\n}\n\nfunction isDefined(o) {\n\tlet a;\n\treturn o !== a;\n}\n\nlet table = null;\nlet row = null;\nlet title = null;\nlet field = null;\n\nfunction init() {\n\ttable = document.createElement('table');\n\trow = document.createElement('tr');\n\ttitle = document.createElement('td');\n\tfield = document.createElement('td');\n\ttable.style.cssText = 'position:absolute;font-family:sans-serif;font-size:12px;color:#cccccc';\n\ttable.style.top = '0px';\n\ttable.style.left = '0px';\n\ttable.style.border = 'thin solid #cccccc';\n\tdocument.body.appendChild(table);\n}\n\nconst debug = {\n\tdisplay: function (data) {\n\t\tif (!table) {\n\t\t\tinit();\n\t\t}\n\n\t\ttable.innerHTML = '';\n\n\t\tfor (const key in data) {\n\t\t\tconst r = row.cloneNode();\n\t\t\tconst t = title.cloneNode();\n\t\t\tconst f = field.cloneNode();\n\t\t\tt.textContent = key;\n\t\t\tf.textContent = data[key];\n\t\t\tr.appendChild(t);\n\t\t\tr.appendChild(f);\n\t\t\ttable.appendChild(r);\n\t\t}\n\t}\n};\n\nclass EventHandler {\n\tconstructor() {\n\t\tthis.initEventHandler();\n\t}\n\n\tinitEventHandler() {\n\t\tthis._callbacks = {};\n\t\tthis._callbackActive = {};\n\t}\n\n\t_addCallback(name, callback, scope, once = false) {\n\t\tif (!name || typeof name !== 'string' || !callback) return;\n\t\tif (!this._callbacks[name]) this._callbacks[name] = [];\n\t\tif (this._callbackActive[name] && this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\n\t\tthis._callbacks[name].push({\n\t\t\tcallback: callback,\n\t\t\tscope: scope || this,\n\t\t\tonce: once\n\t\t});\n\t}\n\n\ton(name, callback, scope) {\n\t\tthis._addCallback(name, callback, scope, false);\n\n\t\treturn this;\n\t}\n\n\toff(name, callback, scope) {\n\t\tif (name) {\n\t\t\tif (this._callbackActive[name] && this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\t\t} else {\n\t\t\tfor (const key in this._callbackActive) {\n\t\t\t\tif (!this._callbacks[key]) continue;\n\t\t\t\tif (this._callbacks[key] !== this._callbackActive[key]) continue;\n\t\t\t\tthis._callbackActive[key] = this._callbackActive[key].slice();\n\t\t\t}\n\t\t}\n\n\t\tif (!name) {\n\t\t\tthis._callbacks = {};\n\t\t} else if (!callback) {\n\t\t\tif (this._callbacks[name]) this._callbacks[name] = [];\n\t\t} else {\n\t\t\tconst events = this._callbacks[name];\n\t\t\tif (!events) return this;\n\t\t\tlet count = events.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tif (events[i].callback !== callback) continue;\n\t\t\t\tif (scope && events[i].scope !== scope) continue;\n\t\t\t\tevents[i--] = events[--count];\n\t\t\t}\n\n\t\t\tevents.length = count;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfire(name, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n\t\tif (!name || !this._callbacks[name]) return this;\n\t\tlet callbacks;\n\n\t\tif (!this._callbackActive[name]) {\n\t\t\tthis._callbackActive[name] = this._callbacks[name];\n\t\t} else {\n\t\t\tif (this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\t\t\tcallbacks = this._callbacks[name].slice();\n\t\t}\n\n\t\tfor (let i = 0; (callbacks || this._callbackActive[name]) && i < (callbacks || this._callbackActive[name]).length; i++) {\n\t\t\tconst evt = (callbacks || this._callbackActive[name])[i];\n\t\t\tevt.callback.call(evt.scope, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\n\t\t\tif (evt.once) {\n\t\t\t\tconst existingCallback = this._callbacks[name];\n\t\t\t\tconst ind = existingCallback ? existingCallback.indexOf(evt) : -1;\n\n\t\t\t\tif (ind !== -1) {\n\t\t\t\t\tif (this._callbackActive[name] === existingCallback) this._callbackActive[name] = this._callbackActive[name].slice();\n\n\t\t\t\t\tthis._callbacks[name].splice(ind, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!callbacks) this._callbackActive[name] = null;\n\t\treturn this;\n\t}\n\n\tonce(name, callback, scope) {\n\t\tthis._addCallback(name, callback, scope, true);\n\n\t\treturn this;\n\t}\n\n\thasEvent(name) {\n\t\treturn this._callbacks[name] && this._callbacks[name].length !== 0 || false;\n\t}\n\n}\n\nconst events = {\n\tattach: function (target) {\n\t\tconst ev = events;\n\t\ttarget._addCallback = ev._addCallback;\n\t\ttarget.on = ev.on;\n\t\ttarget.off = ev.off;\n\t\ttarget.fire = ev.fire;\n\t\ttarget.once = ev.once;\n\t\ttarget.hasEvent = ev.hasEvent;\n\t\ttarget._callbacks = {};\n\t\ttarget._callbackActive = {};\n\t\treturn target;\n\t},\n\t_addCallback: EventHandler.prototype._addCallback,\n\ton: EventHandler.prototype.on,\n\toff: EventHandler.prototype.off,\n\tfire: EventHandler.prototype.fire,\n\tonce: EventHandler.prototype.once,\n\thasEvent: EventHandler.prototype.hasEvent\n};\n\nconst guid = {\n\tcreate: function () {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tconst r = Math.random() * 16 | 0;\n\t\t\tconst v = c === 'x' ? r : r & 0x3 | 0x8;\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n};\n\nconst path = {\n\tdelimiter: \"/\",\n\tjoin: function () {\n\t\tconst num = arguments.length;\n\t\tlet result = arguments[0];\n\n\t\tfor (let index = 0; index < num - 1; ++index) {\n\t\t\tconst one = arguments[index];\n\t\t\tconst two = arguments[index + 1];\n\n\t\t\tif (!isDefined(one) || !isDefined(two)) {\n\t\t\t\tthrow new Error(\"undefined argument to pc.path.join\");\n\t\t\t}\n\n\t\t\tif (two[0] === path.delimiter) {\n\t\t\t\tresult = two;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (one && two && one[one.length - 1] !== path.delimiter && two[0] !== path.delimiter) {\n\t\t\t\tresult += path.delimiter + two;\n\t\t\t} else {\n\t\t\t\tresult += two;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\tnormalize: function (pathname) {\n\t\tconst lead = pathname.startsWith(path.delimiter);\n\t\tconst trail = pathname.endsWith(path.delimiter);\n\t\tconst parts = pathname.split('/');\n\t\tlet result = '';\n\t\tlet cleaned = [];\n\n\t\tfor (let i = 0; i < parts.length; i++) {\n\t\t\tif (parts[i] === '') continue;\n\t\t\tif (parts[i] === '.') continue;\n\n\t\t\tif (parts[i] === '..' && cleaned.length > 0) {\n\t\t\t\tcleaned = cleaned.slice(0, cleaned.length - 2);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (i > 0) cleaned.push(path.delimiter);\n\t\t\tcleaned.push(parts[i]);\n\t\t}\n\n\t\tresult = cleaned.join('');\n\n\t\tif (!lead && result[0] === path.delimiter) {\n\t\t\tresult = result.slice(1);\n\t\t}\n\n\t\tif (trail && result[result.length - 1] !== path.delimiter) {\n\t\t\tresult += path.delimiter;\n\t\t}\n\n\t\treturn result;\n\t},\n\tsplit: function (pathname) {\n\t\tconst parts = pathname.split(path.delimiter);\n\t\tconst tail = parts.slice(parts.length - 1)[0];\n\t\tconst head = parts.slice(0, parts.length - 1).join(path.delimiter);\n\t\treturn [head, tail];\n\t},\n\tgetBasename: function (pathname) {\n\t\treturn path.split(pathname)[1];\n\t},\n\tgetDirectory: function (pathname) {\n\t\tconst parts = pathname.split(path.delimiter);\n\t\treturn parts.slice(0, parts.length - 1).join(path.delimiter);\n\t},\n\tgetExtension: function (pathname) {\n\t\tconst ext = pathname.split('?')[0].split('.').pop();\n\n\t\tif (ext !== pathname) {\n\t\t\treturn \".\" + ext;\n\t\t}\n\n\t\treturn \"\";\n\t},\n\tisRelativePath: function (pathname) {\n\t\treturn pathname.charAt(0) !== \"/\" && pathname.match(/:\\/\\//) === null;\n\t},\n\textractPath: function (pathname) {\n\t\tlet result = \"\";\n\t\tconst parts = pathname.split(\"/\");\n\t\tlet i = 0;\n\n\t\tif (parts.length > 1) {\n\t\t\tif (path.isRelativePath(pathname)) {\n\t\t\t\tif (parts[0] === \".\") {\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t} else if (parts[0] === \"..\") {\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = \".\";\n\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nlet desktop = false;\nlet mobile = false;\nlet windows = false;\nlet xbox = false;\nlet android = false;\nlet ios = false;\nlet touch = false;\nlet gamepads = false;\nlet workers = false;\nlet passiveEvents = false;\n\nif (typeof navigator !== 'undefined') {\n\tconst ua = navigator.userAgent;\n\tif (/(windows|mac os|linux|cros)/i.test(ua)) desktop = true;\n\tif (/xbox/i.test(ua)) xbox = true;\n\n\tif (/(windows phone|iemobile|wpdesktop)/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\twindows = true;\n\t} else if (/android/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\tandroid = true;\n\t} else if (/ip([ao]d|hone)/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\tios = true;\n\t}\n\n\tif (typeof window !== 'undefined') {\n\t\ttouch = 'ontouchstart' in window || 'maxTouchPoints' in navigator && navigator.maxTouchPoints > 0;\n\t}\n\n\tgamepads = 'getGamepads' in navigator;\n\tworkers = typeof Worker !== 'undefined';\n\n\ttry {\n\t\tconst opts = Object.defineProperty({}, 'passive', {\n\t\t\tget: function () {\n\t\t\t\tpassiveEvents = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\twindow.addEventListener(\"testpassive\", null, opts);\n\t\twindow.removeEventListener(\"testpassive\", null, opts);\n\t} catch (e) {}\n}\n\nconst platform = {\n\tdesktop: desktop,\n\tmobile: mobile,\n\tios: ios,\n\tandroid: android,\n\twindows: windows,\n\txbox: xbox,\n\tgamepads: gamepads,\n\ttouch: touch,\n\tworkers: workers,\n\tpassiveEvents: passiveEvents\n};\n\nconst ASCII_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\nconst ASCII_UPPERCASE = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nconst ASCII_LETTERS = ASCII_LOWERCASE + ASCII_UPPERCASE;\nconst HIGH_SURROGATE_BEGIN = 0xD800;\nconst HIGH_SURROGATE_END = 0xDBFF;\nconst LOW_SURROGATE_BEGIN = 0xDC00;\nconst LOW_SURROGATE_END = 0xDFFF;\nconst ZERO_WIDTH_JOINER = 0x200D;\nconst REGIONAL_INDICATOR_BEGIN = 0x1F1E6;\nconst REGIONAL_INDICATOR_END = 0x1F1FF;\nconst FITZPATRICK_MODIFIER_BEGIN = 0x1F3FB;\nconst FITZPATRICK_MODIFIER_END = 0x1F3FF;\nconst DIACRITICAL_MARKS_BEGIN = 0x20D0;\nconst DIACRITICAL_MARKS_END = 0x20FF;\nconst VARIATION_MODIFIER_BEGIN = 0xFE00;\nconst VARIATION_MODIFIER_END = 0xFE0F;\n\nfunction getCodePointData(string, i = 0) {\n\tconst size = string.length;\n\n\tif (i < 0 || i >= size) {\n\t\treturn null;\n\t}\n\n\tconst first = string.charCodeAt(i);\n\n\tif (size > 1 && first >= HIGH_SURROGATE_BEGIN && first <= HIGH_SURROGATE_END) {\n\t\tconst second = string.charCodeAt(i + 1);\n\n\t\tif (second >= LOW_SURROGATE_BEGIN && second <= LOW_SURROGATE_END) {\n\t\t\treturn {\n\t\t\t\tcode: (first - HIGH_SURROGATE_BEGIN) * 0x400 + second - LOW_SURROGATE_BEGIN + 0x10000,\n\t\t\t\tlong: true\n\t\t\t};\n\t\t}\n\t}\n\n\treturn {\n\t\tcode: first,\n\t\tlong: false\n\t};\n}\n\nfunction isCodeBetween(string, begin, end) {\n\tif (!string) return false;\n\tconst codeData = getCodePointData(string);\n\n\tif (codeData) {\n\t\tconst code = codeData.code;\n\t\treturn code >= begin && code <= end;\n\t}\n\n\treturn false;\n}\n\nfunction numCharsToTakeForNextSymbol(string, index) {\n\tif (index === string.length - 1) {\n\t\treturn 1;\n\t}\n\n\tif (isCodeBetween(string[index], HIGH_SURROGATE_BEGIN, HIGH_SURROGATE_END)) {\n\t\tconst first = string.substring(index, index + 2);\n\t\tconst second = string.substring(index + 2, index + 4);\n\n\t\tif (isCodeBetween(second, FITZPATRICK_MODIFIER_BEGIN, FITZPATRICK_MODIFIER_END) || isCodeBetween(first, REGIONAL_INDICATOR_BEGIN, REGIONAL_INDICATOR_END) && isCodeBetween(second, REGIONAL_INDICATOR_BEGIN, REGIONAL_INDICATOR_END)) {\n\t\t\treturn 4;\n\t\t}\n\n\t\tif (isCodeBetween(second, VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\t\treturn 3;\n\t\t}\n\n\t\treturn 2;\n\t}\n\n\tif (isCodeBetween(string[index + 1], VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\treturn 2;\n\t}\n\n\treturn 1;\n}\n\nconst string = {\n\tASCII_LOWERCASE: ASCII_LOWERCASE,\n\tASCII_UPPERCASE: ASCII_UPPERCASE,\n\tASCII_LETTERS: ASCII_LETTERS,\n\tformat: function (s) {\n\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\ts = s.replace('{' + (i - 1) + '}', arguments[i]);\n\t\t}\n\n\t\treturn s;\n\t},\n\ttoBool: function (s, strict = false) {\n\t\tif (s === 'true') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (strict) {\n\t\t\tif (s === 'false') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthrow new TypeError('Not a boolean string');\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetCodePoint: function (string, i) {\n\t\tconst codePointData = getCodePointData(string, i);\n\t\treturn codePointData && codePointData.code;\n\t},\n\tgetCodePoints: function (string) {\n\t\tif (typeof string !== 'string') {\n\t\t\tthrow new TypeError('Not a string');\n\t\t}\n\n\t\tlet i = 0;\n\t\tconst arr = [];\n\t\tlet codePoint;\n\n\t\twhile (!!(codePoint = getCodePointData(string, i))) {\n\t\t\tarr.push(codePoint.code);\n\t\t\ti += codePoint.long ? 2 : 1;\n\t\t}\n\n\t\treturn arr;\n\t},\n\tgetSymbols: function (string) {\n\t\tif (typeof string !== 'string') {\n\t\t\tthrow new TypeError('Not a string');\n\t\t}\n\n\t\tlet index = 0;\n\t\tconst length = string.length;\n\t\tconst output = [];\n\t\tlet take = 0;\n\t\tlet ch;\n\n\t\twhile (index < length) {\n\t\t\ttake += numCharsToTakeForNextSymbol(string, index + take);\n\t\t\tch = string[index + take];\n\n\t\t\tif (isCodeBetween(ch, DIACRITICAL_MARKS_BEGIN, DIACRITICAL_MARKS_END)) {\n\t\t\t\tch = string[index + take++];\n\t\t\t}\n\n\t\t\tif (isCodeBetween(ch, VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\t\t\tch = string[index + take++];\n\t\t\t}\n\n\t\t\tif (ch && ch.charCodeAt(0) === ZERO_WIDTH_JOINER) {\n\t\t\t\tch = string[index + take++];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst char = string.substring(index, index + take);\n\t\t\toutput.push(char);\n\t\t\tindex += take;\n\t\t\ttake = 0;\n\t\t}\n\n\t\treturn output;\n\t},\n\tfromCodePoint: function () {\n\t\tconst chars = [];\n\t\tlet current;\n\t\tlet codePoint;\n\t\tlet units;\n\n\t\tfor (let i = 0; i < arguments.length; ++i) {\n\t\t\tcurrent = Number(arguments[i]);\n\t\t\tcodePoint = current - 0x10000;\n\t\t\tunits = current > 0xFFFF ? [(codePoint >> 10) + 0xD800, codePoint % 0x400 + 0xDC00] : [current];\n\t\t\tchars.push(String.fromCharCode.apply(null, units));\n\t\t}\n\n\t\treturn chars.join('');\n\t}\n};\n\nclass IndexedList {\n\tconstructor() {\n\t\tthis._list = [];\n\t\tthis._index = {};\n\t}\n\n\tpush(key, item) {\n\t\tif (this._index[key]) {\n\t\t\tthrow Error(\"Key already in index \" + key);\n\t\t}\n\n\t\tconst location = this._list.push(item) - 1;\n\t\tthis._index[key] = location;\n\t}\n\n\thas(key) {\n\t\treturn this._index[key] !== undefined;\n\t}\n\n\tget(key) {\n\t\tconst location = this._index[key];\n\n\t\tif (location !== undefined) {\n\t\t\treturn this._list[location];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(key) {\n\t\tconst location = this._index[key];\n\n\t\tif (location !== undefined) {\n\t\t\tthis._list.splice(location, 1);\n\n\t\t\tdelete this._index[key];\n\n\t\t\tfor (key in this._index) {\n\t\t\t\tconst idx = this._index[key];\n\n\t\t\t\tif (idx > location) {\n\t\t\t\t\tthis._index[key] = idx - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n\tclear() {\n\t\tthis._list.length = 0;\n\n\t\tfor (const prop in this._index) {\n\t\t\tdelete this._index[prop];\n\t\t}\n\t}\n\n}\n\nclass SortedLoopArray {\n\tconstructor(args) {\n\t\tthis._sortBy = args.sortBy;\n\t\tthis.items = [];\n\t\tthis.length = 0;\n\t\tthis.loopIndex = -1;\n\t\tthis._sortHandler = this._doSort.bind(this);\n\t}\n\n\t_binarySearch(item) {\n\t\tlet left = 0;\n\t\tlet right = this.items.length - 1;\n\t\tconst search = item[this._sortBy];\n\t\tlet middle;\n\t\tlet current;\n\n\t\twhile (left <= right) {\n\t\t\tmiddle = Math.floor((left + right) / 2);\n\t\t\tcurrent = this.items[middle][this._sortBy];\n\n\t\t\tif (current <= search) {\n\t\t\t\tleft = middle + 1;\n\t\t\t} else if (current > search) {\n\t\t\t\tright = middle - 1;\n\t\t\t}\n\t\t}\n\n\t\treturn left;\n\t}\n\n\t_doSort(a, b) {\n\t\tconst sortBy = this._sortBy;\n\t\treturn a[sortBy] - b[sortBy];\n\t}\n\n\tinsert(item) {\n\t\tconst index = this._binarySearch(item);\n\n\t\tthis.items.splice(index, 0, item);\n\t\tthis.length++;\n\n\t\tif (this.loopIndex >= index) {\n\t\t\tthis.loopIndex++;\n\t\t}\n\t}\n\n\tappend(item) {\n\t\tthis.items.push(item);\n\t\tthis.length++;\n\t}\n\n\tremove(item) {\n\t\tconst idx = this.items.indexOf(item);\n\t\tif (idx < 0) return;\n\t\tthis.items.splice(idx, 1);\n\t\tthis.length--;\n\n\t\tif (this.loopIndex >= idx) {\n\t\t\tthis.loopIndex--;\n\t\t}\n\t}\n\n\tsort() {\n\t\tconst current = this.loopIndex >= 0 ? this.items[this.loopIndex] : null;\n\t\tthis.items.sort(this._sortHandler);\n\n\t\tif (current !== null) {\n\t\t\tthis.loopIndex = this.items.indexOf(current);\n\t\t}\n\t}\n\n}\n\nclass Tags extends EventHandler {\n\tconstructor(parent) {\n\t\tsuper();\n\t\tthis._index = {};\n\t\tthis._list = [];\n\t\tthis._parent = parent;\n\t}\n\n\tadd() {\n\t\tlet changed = false;\n\n\t\tconst tags = this._processArguments(arguments, true);\n\n\t\tif (!tags.length) return changed;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (this._index[tags[i]]) continue;\n\t\t\tchanged = true;\n\t\t\tthis._index[tags[i]] = true;\n\n\t\t\tthis._list.push(tags[i]);\n\n\t\t\tthis.fire('add', tags[i], this._parent);\n\t\t}\n\n\t\tif (changed) this.fire('change', this._parent);\n\t\treturn changed;\n\t}\n\n\tremove() {\n\t\tlet changed = false;\n\t\tif (!this._list.length) return changed;\n\n\t\tconst tags = this._processArguments(arguments, true);\n\n\t\tif (!tags.length) return changed;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (!this._index[tags[i]]) continue;\n\t\t\tchanged = true;\n\t\t\tdelete this._index[tags[i]];\n\n\t\t\tthis._list.splice(this._list.indexOf(tags[i]), 1);\n\n\t\t\tthis.fire('remove', tags[i], this._parent);\n\t\t}\n\n\t\tif (changed) this.fire('change', this._parent);\n\t\treturn changed;\n\t}\n\n\tclear() {\n\t\tif (!this._list.length) return;\n\n\t\tconst tags = this._list.slice(0);\n\n\t\tthis._list = [];\n\t\tthis._index = {};\n\n\t\tfor (let i = 0; i < tags.length; i++) this.fire('remove', tags[i], this._parent);\n\n\t\tthis.fire('change', this._parent);\n\t}\n\n\thas() {\n\t\tif (!this._list.length) return false;\n\t\treturn this._has(this._processArguments(arguments));\n\t}\n\n\t_has(tags) {\n\t\tif (!this._list.length || !tags.length) return false;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (tags[i].length === 1) {\n\t\t\t\tif (this._index[tags[i][0]]) return true;\n\t\t\t} else {\n\t\t\t\tlet multiple = true;\n\n\t\t\t\tfor (let t = 0; t < tags[i].length; t++) {\n\t\t\t\t\tif (this._index[tags[i][t]]) continue;\n\t\t\t\t\tmultiple = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (multiple) return true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tlist() {\n\t\treturn this._list.slice(0);\n\t}\n\n\t_processArguments(args, flat) {\n\t\tconst tags = [];\n\t\tlet tmp = [];\n\t\tif (!args || !args.length) return tags;\n\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tif (args[i] instanceof Array) {\n\t\t\t\tif (!flat) tmp = [];\n\n\t\t\t\tfor (let t = 0; t < args[i].length; t++) {\n\t\t\t\t\tif (typeof args[i][t] !== 'string') continue;\n\n\t\t\t\t\tif (flat) {\n\t\t\t\t\t\ttags.push(args[i][t]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttmp.push(args[i][t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!flat && tmp.length) tags.push(tmp);\n\t\t\t} else if (typeof args[i] === 'string') {\n\t\t\t\tif (flat) {\n\t\t\t\t\ttags.push(args[i]);\n\t\t\t\t} else {\n\t\t\t\t\ttags.push([args[i]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tags;\n\t}\n\n\tget size() {\n\t\treturn this._list.length;\n\t}\n\n}\n\nconst now = typeof window !== 'undefined' && window.performance && window.performance.now && window.performance.timing ? function () {\n\treturn window.performance.now();\n} : Date.now;\n\nclass Timer {\n\tconstructor() {\n\t\tthis._isRunning = false;\n\t\tthis._a = 0;\n\t\tthis._b = 0;\n\t}\n\n\tstart() {\n\t\tthis._isRunning = true;\n\t\tthis._a = now();\n\t}\n\n\tstop() {\n\t\tthis._isRunning = false;\n\t\tthis._b = now();\n\t}\n\n\tgetMilliseconds() {\n\t\treturn this._b - this._a;\n\t}\n\n}\n\nfunction createURI(options) {\n\tlet s = \"\";\n\n\tif ((options.authority || options.scheme) && (options.host || options.hostpath)) {\n\t\tthrow new Error(\"Can't have 'scheme' or 'authority' and 'host' or 'hostpath' option\");\n\t}\n\n\tif (options.host && options.hostpath) {\n\t\tthrow new Error(\"Can't have 'host' and 'hostpath' option\");\n\t}\n\n\tif (options.path && options.hostpath) {\n\t\tthrow new Error(\"Can't have 'path' and 'hostpath' option\");\n\t}\n\n\tif (options.scheme) {\n\t\ts += options.scheme + \":\";\n\t}\n\n\tif (options.authority) {\n\t\ts += \"//\" + options.authority;\n\t}\n\n\tif (options.host) {\n\t\ts += options.host;\n\t}\n\n\tif (options.path) {\n\t\ts += options.path;\n\t}\n\n\tif (options.hostpath) {\n\t\ts += options.hostpath;\n\t}\n\n\tif (options.query) {\n\t\ts += \"?\" + options.query;\n\t}\n\n\tif (options.fragment) {\n\t\ts += \"#\" + options.fragment;\n\t}\n\n\treturn s;\n}\n\nconst re = /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\nclass URI {\n\tconstructor(uri) {\n\t\tconst result = uri.match(re);\n\t\tthis.scheme = result[2];\n\t\tthis.authority = result[4];\n\t\tthis.path = result[5];\n\t\tthis.query = result[7];\n\t\tthis.fragment = result[9];\n\t}\n\n\ttoString() {\n\t\tlet s = \"\";\n\n\t\tif (this.scheme) {\n\t\t\ts += this.scheme + \":\";\n\t\t}\n\n\t\tif (this.authority) {\n\t\t\ts += \"//\" + this.authority;\n\t\t}\n\n\t\ts += this.path;\n\n\t\tif (this.query) {\n\t\t\ts += \"?\" + this.query;\n\t\t}\n\n\t\tif (this.fragment) {\n\t\t\ts += \"#\" + this.fragment;\n\t\t}\n\n\t\treturn s;\n\t}\n\n\tgetQuery() {\n\t\tconst result = {};\n\n\t\tif (this.query) {\n\t\t\tconst queryParams = decodeURIComponent(this.query).split(\"&\");\n\n\t\t\tfor (const queryParam of queryParams) {\n\t\t\t\tconst pair = queryParam.split(\"=\");\n\t\t\t\tresult[pair[0]] = pair[1];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsetQuery(params) {\n\t\tlet q = \"\";\n\n\t\tfor (const key in params) {\n\t\t\tif (params.hasOwnProperty(key)) {\n\t\t\t\tif (q !== \"\") {\n\t\t\t\t\tq += \"&\";\n\t\t\t\t}\n\n\t\t\t\tq += encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n\t\t\t}\n\t\t}\n\n\t\tthis.query = q;\n\t}\n\n}\n\nconst math = {\n\tDEG_TO_RAD: Math.PI / 180,\n\tRAD_TO_DEG: 180 / Math.PI,\n\tclamp: function (value, min, max) {\n\t\tif (value >= max) return max;\n\t\tif (value <= min) return min;\n\t\treturn value;\n\t},\n\tintToBytes24: function (i) {\n\t\tconst r = i >> 16 & 0xff;\n\t\tconst g = i >> 8 & 0xff;\n\t\tconst b = i & 0xff;\n\t\treturn [r, g, b];\n\t},\n\tintToBytes32: function (i) {\n\t\tconst r = i >> 24 & 0xff;\n\t\tconst g = i >> 16 & 0xff;\n\t\tconst b = i >> 8 & 0xff;\n\t\tconst a = i & 0xff;\n\t\treturn [r, g, b, a];\n\t},\n\tbytesToInt24: function (r, g, b) {\n\t\tif (r.length) {\n\t\t\tb = r[2];\n\t\t\tg = r[1];\n\t\t\tr = r[0];\n\t\t}\n\n\t\treturn r << 16 | g << 8 | b;\n\t},\n\tbytesToInt32: function (r, g, b, a) {\n\t\tif (r.length) {\n\t\t\ta = r[3];\n\t\t\tb = r[2];\n\t\t\tg = r[1];\n\t\t\tr = r[0];\n\t\t}\n\n\t\treturn (r << 24 | g << 16 | b << 8 | a) >>> 32;\n\t},\n\tlerp: function (a, b, alpha) {\n\t\treturn a + (b - a) * math.clamp(alpha, 0, 1);\n\t},\n\tlerpAngle: function (a, b, alpha) {\n\t\tif (b - a > 180) {\n\t\t\tb -= 360;\n\t\t}\n\n\t\tif (b - a < -180) {\n\t\t\tb += 360;\n\t\t}\n\n\t\treturn math.lerp(a, b, math.clamp(alpha, 0, 1));\n\t},\n\tpowerOfTwo: function (x) {\n\t\treturn x !== 0 && !(x & x - 1);\n\t},\n\tnextPowerOfTwo: function (val) {\n\t\tval--;\n\t\tval |= val >> 1;\n\t\tval |= val >> 2;\n\t\tval |= val >> 4;\n\t\tval |= val >> 8;\n\t\tval |= val >> 16;\n\t\tval++;\n\t\treturn val;\n\t},\n\trandom: function (min, max) {\n\t\tconst diff = max - min;\n\t\treturn Math.random() * diff + min;\n\t},\n\tsmoothstep: function (min, max, x) {\n\t\tif (x <= min) return 0;\n\t\tif (x >= max) return 1;\n\t\tx = (x - min) / (max - min);\n\t\treturn x * x * (3 - 2 * x);\n\t},\n\tsmootherstep: function (min, max, x) {\n\t\tif (x <= min) return 0;\n\t\tif (x >= max) return 1;\n\t\tx = (x - min) / (max - min);\n\t\treturn x * x * x * (x * (x * 6 - 15) + 10);\n\t},\n\troundUp: function (numToRound, multiple) {\n\t\tif (multiple === 0) return numToRound;\n\t\treturn Math.ceil(numToRound / multiple) * multiple;\n\t},\n\tfloat2Half: function () {\n\t\tconst floatView = new Float32Array(1);\n\t\tconst int32View = new Int32Array(floatView.buffer);\n\t\treturn function (val) {\n\t\t\tfloatView[0] = val;\n\t\t\tconst x = int32View[0];\n\t\t\tlet bits = x >> 16 & 0x8000;\n\t\t\tlet m = x >> 12 & 0x07ff;\n\t\t\tconst e = x >> 23 & 0xff;\n\n\t\t\tif (e < 103) {\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tif (e > 142) {\n\t\t\t\tbits |= 0x7c00;\n\t\t\t\tbits |= (e === 255 ? 0 : 1) && x & 0x007fffff;\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tif (e < 113) {\n\t\t\t\tm |= 0x0800;\n\t\t\t\tbits |= (m >> 114 - e) + (m >> 113 - e & 1);\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tbits |= e - 112 << 10 | m >> 1;\n\t\t\tbits += m & 1;\n\t\t\treturn bits;\n\t\t};\n\t}(),\n\tbetween: function (num, a, b, inclusive) {\n\t\tconst min = Math.min(a, b);\n\t\tconst max = Math.max(a, b);\n\t\treturn inclusive ? num >= min && num <= max : num > min && num < max;\n\t}\n};\n\nclass Http {\n\tconstructor() {\n\t\tthis.ContentType = Http.ContentType;\n\t\tthis.ResponseType = Http.ResponseType;\n\t\tthis.binaryExtensions = Http.binaryExtensions;\n\t}\n\n\tget(url, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\treturn this.request(\"GET\", url, options, callback);\n\t}\n\n\tpost(url, data, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.postdata = data;\n\t\treturn this.request(\"POST\", url, options, callback);\n\t}\n\n\tput(url, data, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.postdata = data;\n\t\treturn this.request(\"PUT\", url, options, callback);\n\t}\n\n\tdel(url, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\treturn this.request(\"DELETE\", url, options, callback);\n\t}\n\n\trequest(method, url, options, callback) {\n\t\tvar uri, query, timestamp, postdata, xhr;\n\t\tvar errored = false;\n\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (options.retry) {\n\t\t\toptions = Object.assign({\n\t\t\t\tretries: 0,\n\t\t\t\tmaxRetries: 5\n\t\t\t}, options);\n\t\t}\n\n\t\toptions.callback = callback;\n\n\t\tif (options.async == null) {\n\t\t\toptions.async = true;\n\t\t}\n\n\t\tif (options.headers == null) {\n\t\t\toptions.headers = {};\n\t\t}\n\n\t\tif (options.postdata != null) {\n\t\t\tif (options.postdata instanceof Document) {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t} else if (options.postdata instanceof FormData) {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t} else if (options.postdata instanceof Object) {\n\t\t\t\tvar contentType = options.headers[\"Content-Type\"];\n\n\t\t\t\tif (contentType === undefined) {\n\t\t\t\t\toptions.headers[\"Content-Type\"] = Http.ContentType.FORM_URLENCODED;\n\t\t\t\t\tcontentType = options.headers[\"Content-Type\"];\n\t\t\t\t}\n\n\t\t\t\tswitch (contentType) {\n\t\t\t\t\tcase Http.ContentType.FORM_URLENCODED:\n\t\t\t\t\t\tpostdata = \"\";\n\t\t\t\t\t\tvar bFirstItem = true;\n\n\t\t\t\t\t\tfor (var key in options.postdata) {\n\t\t\t\t\t\t\tif (options.postdata.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tif (bFirstItem) {\n\t\t\t\t\t\t\t\t\tbFirstItem = false;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tpostdata += \"&\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tpostdata += escape(key) + \"=\" + escape(options.postdata[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase Http.ContentType.JSON:\n\t\t\t\t\t\tif (contentType == null) {\n\t\t\t\t\t\t\toptions.headers[\"Content-Type\"] = Http.ContentType.JSON;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpostdata = JSON.stringify(options.postdata);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t}\n\t\t}\n\n\t\tif (options.cache === false) {\n\t\t\ttimestamp = now();\n\t\t\turi = new URI(url);\n\n\t\t\tif (!uri.query) {\n\t\t\t\turi.query = \"ts=\" + timestamp;\n\t\t\t} else {\n\t\t\t\turi.query = uri.query + \"&ts=\" + timestamp;\n\t\t\t}\n\n\t\t\turl = uri.toString();\n\t\t}\n\n\t\tif (options.query) {\n\t\t\turi = new URI(url);\n\t\t\tquery = extend(uri.getQuery(), options.query);\n\t\t\turi.setQuery(query);\n\t\t\turl = uri.toString();\n\t\t}\n\n\t\txhr = new XMLHttpRequest();\n\t\txhr.open(method, url, options.async);\n\t\txhr.withCredentials = options.withCredentials !== undefined ? options.withCredentials : false;\n\t\txhr.responseType = options.responseType || this._guessResponseType(url);\n\n\t\tfor (var header in options.headers) {\n\t\t\tif (options.headers.hasOwnProperty(header)) {\n\t\t\t\txhr.setRequestHeader(header, options.headers[header]);\n\t\t\t}\n\t\t}\n\n\t\txhr.onreadystatechange = function () {\n\t\t\tthis._onReadyStateChange(method, url, options, xhr);\n\t\t}.bind(this);\n\n\t\txhr.onerror = function () {\n\t\t\tthis._onError(method, url, options, xhr);\n\n\t\t\terrored = true;\n\t\t}.bind(this);\n\n\t\ttry {\n\t\t\txhr.send(postdata);\n\t\t} catch (e) {\n\t\t\tif (!errored) {\n\t\t\t\toptions.error(xhr.status, xhr, e);\n\t\t\t}\n\t\t}\n\n\t\treturn xhr;\n\t}\n\n\t_guessResponseType(url) {\n\t\tvar uri = new URI(url);\n\t\tvar ext = path.getExtension(uri.path);\n\n\t\tif (Http.binaryExtensions.indexOf(ext) >= 0) {\n\t\t\treturn Http.ResponseType.ARRAY_BUFFER;\n\t\t}\n\n\t\tif (ext === \".xml\") {\n\t\t\treturn Http.ResponseType.DOCUMENT;\n\t\t}\n\n\t\treturn Http.ResponseType.TEXT;\n\t}\n\n\t_isBinaryContentType(contentType) {\n\t\tvar binTypes = [Http.ContentType.MP4, Http.ContentType.WAV, Http.ContentType.OGG, Http.ContentType.MP3, Http.ContentType.BIN, Http.ContentType.DDS, Http.ContentType.BASIS, Http.ContentType.GLB];\n\n\t\tif (binTypes.indexOf(contentType) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_onReadyStateChange(method, url, options, xhr) {\n\t\tif (xhr.readyState === 4) {\n\t\t\tswitch (xhr.status) {\n\t\t\t\tcase 0:\n\t\t\t\t\t{\n\t\t\t\t\t\tif (xhr.responseURL && xhr.responseURL.startsWith('file:///')) {\n\t\t\t\t\t\t\tthis._onSuccess(method, url, options, xhr);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._onError(method, url, options, xhr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 200:\n\t\t\t\tcase 201:\n\t\t\t\tcase 206:\n\t\t\t\tcase 304:\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._onSuccess(method, url, options, xhr);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._onError(method, url, options, xhr);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSuccess(method, url, options, xhr) {\n\t\tvar response;\n\t\tvar header;\n\t\tvar contentType;\n\t\tvar parts;\n\t\theader = xhr.getResponseHeader(\"Content-Type\");\n\n\t\tif (header) {\n\t\t\tparts = header.split(\";\");\n\t\t\tcontentType = parts[0].trim();\n\t\t}\n\n\t\ttry {\n\t\t\tif (contentType === this.ContentType.JSON || url.split('?')[0].endsWith(\".json\")) {\n\t\t\t\tresponse = JSON.parse(xhr.responseText);\n\t\t\t} else if (this._isBinaryContentType(contentType)) {\n\t\t\t\tresponse = xhr.response;\n\t\t\t} else {\n\t\t\t\tif (xhr.responseType === Http.ResponseType.ARRAY_BUFFER) {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t} else if (xhr.responseType === Http.ResponseType.BLOB || xhr.responseType === Http.ResponseType.JSON) {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.responseType === Http.ResponseType.DOCUMENT || contentType === this.ContentType.XML) {\n\t\t\t\t\t\tresponse = xhr.responseXML;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse = xhr.responseText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.callback(null, response);\n\t\t} catch (err) {\n\t\t\toptions.callback(err);\n\t\t}\n\t}\n\n\t_onError(method, url, options, xhr) {\n\t\tif (options.retrying) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (options.retry && options.retries < options.maxRetries) {\n\t\t\toptions.retries++;\n\t\t\toptions.retrying = true;\n\t\t\tvar retryDelay = math.clamp(Math.pow(2, options.retries) * Http.retryDelay, 0, options.maxRetryDelay || 5000);\n\t\t\tconsole.log(method + ': ' + url + ' - Error ' + xhr.status + '. Retrying in ' + retryDelay + ' ms');\n\t\t\tsetTimeout(function () {\n\t\t\t\toptions.retrying = false;\n\t\t\t\tthis.request(method, url, options, options.callback);\n\t\t\t}.bind(this), retryDelay);\n\t\t} else {\n\t\t\toptions.callback(xhr.status === 0 ? 'Network error' : xhr.status, null);\n\t\t}\n\t}\n\n}\n\nHttp.ContentType = {\n\tFORM_URLENCODED: \"application/x-www-form-urlencoded\",\n\tGIF: \"image/gif\",\n\tJPEG: \"image/jpeg\",\n\tDDS: \"image/dds\",\n\tJSON: \"application/json\",\n\tPNG: \"image/png\",\n\tTEXT: \"text/plain\",\n\tXML: \"application/xml\",\n\tWAV: \"audio/x-wav\",\n\tOGG: \"audio/ogg\",\n\tMP3: \"audio/mpeg\",\n\tMP4: \"audio/mp4\",\n\tAAC: \"audio/aac\",\n\tBIN: \"application/octet-stream\",\n\tBASIS: \"image/basis\",\n\tGLB: \"model/gltf-binary\"\n};\nHttp.ResponseType = {\n\tTEXT: 'text',\n\tARRAY_BUFFER: 'arraybuffer',\n\tBLOB: 'blob',\n\tDOCUMENT: 'document',\n\tJSON: 'json'\n};\nHttp.binaryExtensions = ['.model', '.wav', '.ogg', '.mp3', '.mp4', '.m4a', '.aac', '.dds', '.basis', '.glb'];\nHttp.retryDelay = 100;\nconst http = new Http();\n\nconst CURVE_LINEAR = 0;\nconst CURVE_SMOOTHSTEP = 1;\nconst CURVE_CATMULL = 2;\nconst CURVE_CARDINAL = 3;\nconst CURVE_SPLINE = 4;\nconst CURVE_STEP = 5;\n\nclass Color {\n\tconstructor(r = 0, g = 0, b = 0, a = 1) {\n\t\tconst length = r.length;\n\n\t\tif (length === 3 || length === 4) {\n\t\t\tthis.r = r[0];\n\t\t\tthis.g = r[1];\n\t\t\tthis.b = r[2];\n\t\t\tthis.a = r[3] !== undefined ? r[3] : 1;\n\t\t} else {\n\t\t\tthis.r = r;\n\t\t\tthis.g = g;\n\t\t\tthis.b = b;\n\t\t\tthis.a = a;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Color(this.r, this.g, this.b, this.a);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.r = rhs.r;\n\t\tthis.g = rhs.g;\n\t\tthis.b = rhs.b;\n\t\tthis.a = rhs.a;\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.r === rhs.r && this.g === rhs.g && this.b === rhs.b && this.a === rhs.a;\n\t}\n\n\tset(r, g, b, a = 1) {\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\t\tthis.a = a;\n\t\treturn this;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.r = lhs.r + alpha * (rhs.r - lhs.r);\n\t\tthis.g = lhs.g + alpha * (rhs.g - lhs.g);\n\t\tthis.b = lhs.b + alpha * (rhs.b - lhs.b);\n\t\tthis.a = lhs.a + alpha * (rhs.a - lhs.a);\n\t\treturn this;\n\t}\n\n\tfromString(hex) {\n\t\tconst i = parseInt(hex.replace('#', '0x'), 16);\n\t\tlet bytes;\n\n\t\tif (hex.length > 7) {\n\t\t\tbytes = math.intToBytes32(i);\n\t\t} else {\n\t\t\tbytes = math.intToBytes24(i);\n\t\t\tbytes[3] = 255;\n\t\t}\n\n\t\tthis.set(bytes[0] / 255, bytes[1] / 255, bytes[2] / 255, bytes[3] / 255);\n\t\treturn this;\n\t}\n\n\ttoString(alpha) {\n\t\tlet s = \"#\" + ((1 << 24) + (Math.round(this.r * 255) << 16) + (Math.round(this.g * 255) << 8) + Math.round(this.b * 255)).toString(16).slice(1);\n\n\t\tif (alpha === true) {\n\t\t\tconst a = Math.round(this.a * 255).toString(16);\n\n\t\t\tif (this.a < 16 / 255) {\n\t\t\t\ts += '0' + a;\n\t\t\t} else {\n\t\t\t\ts += a;\n\t\t\t}\n\t\t}\n\n\t\treturn s;\n\t}\n\n}\n\nColor.BLACK = Object.freeze(new Color(0, 0, 0, 1));\nColor.BLUE = Object.freeze(new Color(0, 0, 1, 1));\nColor.CYAN = Object.freeze(new Color(0, 1, 1, 1));\nColor.GRAY = Object.freeze(new Color(0.5, 0.5, 0.5, 1));\nColor.GREEN = Object.freeze(new Color(0, 1, 0, 1));\nColor.MAGENTA = Object.freeze(new Color(1, 0, 1, 1));\nColor.RED = Object.freeze(new Color(1, 0, 0, 1));\nColor.WHITE = Object.freeze(new Color(1, 1, 1, 1));\nColor.YELLOW = Object.freeze(new Color(1, 1, 0, 1));\n\nclass CurveEvaluator {\n\tconstructor(curve, time) {\n\t\tthis._curve = curve;\n\t\tthis._left = -Infinity;\n\t\tthis._right = Infinity;\n\t\tthis._recip = 0;\n\t\tthis._p0 = 0;\n\t\tthis._p1 = 0;\n\t\tthis._m0 = 0;\n\t\tthis._m1 = 0;\n\n\t\tthis._reset(time || 0);\n\t}\n\n\tevaluate(time, forceReset) {\n\t\tif (forceReset || time < this._left || time >= this._right) {\n\t\t\tthis._reset(time);\n\t\t}\n\n\t\tlet result;\n\t\tconst type = this._curve.type;\n\n\t\tif (type === CURVE_STEP) {\n\t\t\tresult = this._p0;\n\t\t} else {\n\t\t\tconst t = this._recip === 0 ? 0 : (time - this._left) * this._recip;\n\n\t\t\tif (type === CURVE_LINEAR) {\n\t\t\t\tresult = math.lerp(this._p0, this._p1, t);\n\t\t\t} else if (type === CURVE_SMOOTHSTEP) {\n\t\t\t\tresult = math.lerp(this._p0, this._p1, t * t * (3 - 2 * t));\n\t\t\t} else {\n\t\t\t\tresult = this._evaluateHermite(this._p0, this._p1, this._m0, this._m1, t);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_reset(time) {\n\t\tconst keys = this._curve.keys;\n\t\tconst len = keys.length;\n\n\t\tif (!len) {\n\t\t\tthis._left = -Infinity;\n\t\t\tthis._right = Infinity;\n\t\t\tthis._recip = 0;\n\t\t\tthis._p0 = this._p1 = this._m0 = this._m1 = 0;\n\t\t} else {\n\t\t\tif (time < keys[0][0]) {\n\t\t\t\tthis._left = -Infinity;\n\t\t\t\tthis._right = keys[0][0];\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = keys[0][1];\n\t\t\t\tthis._m0 = this._m1 = 0;\n\t\t\t} else if (time >= keys[len - 1][0]) {\n\t\t\t\tthis._left = keys[len - 1][0];\n\t\t\t\tthis._right = Infinity;\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = keys[len - 1][1];\n\t\t\t\tthis._m0 = this._m1 = 0;\n\t\t\t} else {\n\t\t\t\tlet index = 0;\n\n\t\t\t\twhile (time >= keys[index + 1][0]) {\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\tthis._left = keys[index][0];\n\t\t\t\tthis._right = keys[index + 1][0];\n\t\t\t\tconst diff = 1.0 / (this._right - this._left);\n\t\t\t\tthis._recip = isFinite(diff) ? diff : 0;\n\t\t\t\tthis._p0 = keys[index][1];\n\t\t\t\tthis._p1 = keys[index + 1][1];\n\n\t\t\t\tif (this._isHermite()) {\n\t\t\t\t\tthis._calcTangents(keys, index);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_isHermite() {\n\t\treturn this._curve.type === CURVE_CATMULL || this._curve.type === CURVE_CARDINAL || this._curve.type === CURVE_SPLINE;\n\t}\n\n\t_calcTangents(keys, index) {\n\t\tlet a;\n\t\tconst b = keys[index];\n\t\tconst c = keys[index + 1];\n\t\tlet d;\n\n\t\tif (index === 0) {\n\t\t\ta = [keys[0][0] + (keys[0][0] - keys[1][0]), keys[0][1] + (keys[0][1] - keys[1][1])];\n\t\t} else {\n\t\t\ta = keys[index - 1];\n\t\t}\n\n\t\tif (index === keys.length - 2) {\n\t\t\td = [keys[index + 1][0] + (keys[index + 1][0] - keys[index][0]), keys[index + 1][1] + (keys[index + 1][1] - keys[index][1])];\n\t\t} else {\n\t\t\td = keys[index + 2];\n\t\t}\n\n\t\tif (this._curve.type === CURVE_SPLINE) {\n\t\t\tconst s1_ = 2 * (c[0] - b[0]) / (c[0] - a[0]);\n\t\t\tconst s2_ = 2 * (c[0] - b[0]) / (d[0] - b[0]);\n\t\t\tthis._m0 = this._curve.tension * (isFinite(s1_) ? s1_ : 0) * (c[1] - a[1]);\n\t\t\tthis._m1 = this._curve.tension * (isFinite(s2_) ? s2_ : 0) * (d[1] - b[1]);\n\t\t} else {\n\t\t\tconst s1 = (c[0] - b[0]) / (b[0] - a[0]);\n\t\t\tconst s2 = (c[0] - b[0]) / (d[0] - c[0]);\n\t\t\tconst a_ = b[1] + (a[1] - b[1]) * (isFinite(s1) ? s1 : 0);\n\t\t\tconst d_ = c[1] + (d[1] - c[1]) * (isFinite(s2) ? s2 : 0);\n\t\t\tconst tension = this._curve.type === CURVE_CATMULL ? 0.5 : this._curve.tension;\n\t\t\tthis._m0 = tension * (c[1] - a_);\n\t\t\tthis._m1 = tension * (d_ - b[1]);\n\t\t}\n\t}\n\n\t_evaluateHermite(p0, p1, m0, m1, t) {\n\t\tconst t2 = t * t;\n\t\tconst twot = t + t;\n\t\tconst omt = 1 - t;\n\t\tconst omt2 = omt * omt;\n\t\treturn p0 * ((1 + twot) * omt2) + m0 * (t * omt2) + p1 * (t2 * (3 - twot)) + m1 * (t2 * (t - 1));\n\t}\n\n}\n\nclass Curve {\n\tconstructor(data) {\n\t\tthis.keys = [];\n\t\tthis.type = CURVE_SMOOTHSTEP;\n\t\tthis.tension = 0.5;\n\t\tthis._eval = new CurveEvaluator(this);\n\n\t\tif (data) {\n\t\t\tfor (let i = 0; i < data.length - 1; i += 2) {\n\t\t\t\tthis.keys.push([data[i], data[i + 1]]);\n\t\t\t}\n\t\t}\n\n\t\tthis.sort();\n\t}\n\n\tadd(time, value) {\n\t\tconst keys = this.keys;\n\t\tconst len = keys.length;\n\t\tlet i = 0;\n\n\t\tfor (; i < len; i++) {\n\t\t\tif (keys[i][0] > time) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst key = [time, value];\n\t\tthis.keys.splice(i, 0, key);\n\t\treturn key;\n\t}\n\n\tget(index) {\n\t\treturn this.keys[index];\n\t}\n\n\tsort() {\n\t\tthis.keys.sort(function (a, b) {\n\t\t\treturn a[0] - b[0];\n\t\t});\n\t}\n\n\tvalue(time) {\n\t\treturn this._eval.evaluate(time, true);\n\t}\n\n\tclosest(time) {\n\t\tconst keys = this.keys;\n\t\tconst length = keys.length;\n\t\tlet min = 2;\n\t\tlet result = null;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst diff = Math.abs(time - keys[i][0]);\n\n\t\t\tif (min >= diff) {\n\t\t\t\tmin = diff;\n\t\t\t\tresult = keys[i];\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tclone() {\n\t\tconst result = new Curve();\n\t\tresult.keys = extend(result.keys, this.keys);\n\t\tresult.type = this.type;\n\t\tresult.tension = this.tension;\n\t\treturn result;\n\t}\n\n\tquantize(precision) {\n\t\tprecision = Math.max(precision, 2);\n\t\tconst values = new Float32Array(precision);\n\t\tconst step = 1.0 / (precision - 1);\n\t\tvalues[0] = this._eval.evaluate(0, true);\n\n\t\tfor (let i = 1; i < precision; i++) {\n\t\t\tvalues[i] = this._eval.evaluate(step * i);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tquantizeClamped(precision, min, max) {\n\t\tconst result = this.quantize(precision);\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = Math.min(max, Math.max(min, result[i]));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget length() {\n\t\treturn this.keys.length;\n\t}\n\n}\n\nclass CurveSet {\n\tconstructor() {\n\t\tthis.curves = [];\n\t\tthis._type = CURVE_SMOOTHSTEP;\n\n\t\tif (arguments.length > 1) {\n\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\tthis.curves.push(new Curve(arguments[i]));\n\t\t\t}\n\t\t} else {\n\t\t\tif (arguments.length === 0) {\n\t\t\t\tthis.curves.push(new Curve());\n\t\t\t} else {\n\t\t\t\tconst arg = arguments[0];\n\n\t\t\t\tif (typeof arg === 'number') {\n\t\t\t\t\tfor (let i = 0; i < arg; i++) {\n\t\t\t\t\t\tthis.curves.push(new Curve());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < arg.length; i++) {\n\t\t\t\t\t\tthis.curves.push(new Curve(arg[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget(index) {\n\t\treturn this.curves[index];\n\t}\n\n\tvalue(time, result = []) {\n\t\tconst length = this.curves.length;\n\t\tresult.length = length;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tresult[i] = this.curves[i].value(time);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tclone() {\n\t\tconst result = new CurveSet();\n\t\tresult.curves = [];\n\n\t\tfor (let i = 0; i < this.curves.length; i++) {\n\t\t\tresult.curves.push(this.curves[i].clone());\n\t\t}\n\n\t\tresult._type = this._type;\n\t\treturn result;\n\t}\n\n\tquantize(precision) {\n\t\tprecision = Math.max(precision, 2);\n\t\tconst numCurves = this.curves.length;\n\t\tconst values = new Float32Array(precision * numCurves);\n\t\tconst step = 1.0 / (precision - 1);\n\n\t\tfor (let c = 0; c < numCurves; c++) {\n\t\t\tconst ev = new CurveEvaluator(this.curves[c]);\n\n\t\t\tfor (let i = 0; i < precision; i++) {\n\t\t\t\tvalues[i * numCurves + c] = ev.evaluate(step * i);\n\t\t\t}\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tquantizeClamped(precision, min, max) {\n\t\tconst result = this.quantize(precision);\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = Math.min(max, Math.max(min, result[i]));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget length() {\n\t\treturn this.curves.length;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tthis._type = value;\n\n\t\tfor (let i = 0; i < this.curves.length; i++) {\n\t\t\tthis.curves[i].type = value;\n\t\t}\n\t}\n\n}\n\nclass Vec3 {\n\tconstructor(x = 0, y = 0, z = 0) {\n\t\tif (x.length === 3) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\tthis.z += rhs.z;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\tthis.z = lhs.z + rhs.z;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\tthis.z += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec3(this.x, this.y, this.z);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tcross(lhs, rhs) {\n\t\tconst lx = lhs.x;\n\t\tconst ly = lhs.y;\n\t\tconst lz = lhs.z;\n\t\tconst rx = rhs.x;\n\t\tconst ry = rhs.y;\n\t\tconst rz = rhs.z;\n\t\tthis.x = ly * rz - ry * lz;\n\t\tthis.y = lz * rx - rz * lx;\n\t\tthis.z = lx * ry - rx * ly;\n\t\treturn this;\n\t}\n\n\tdistance(rhs) {\n\t\tconst x = this.x - rhs.x;\n\t\tconst y = this.y - rhs.y;\n\t\tconst z = this.z - rhs.z;\n\t\treturn Math.sqrt(x * x + y * y + z * z);\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\tthis.z /= rhs.z;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\tthis.z = lhs.z / rhs.z;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\tthis.z /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y + this.z * rhs.z;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\tthis.z = lhs.z + alpha * (rhs.z - lhs.z);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\tthis.z *= rhs.z;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\tthis.z = lhs.z * rhs.z;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t\tthis.z *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\tthis.z = Math.floor(this.z);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\tthis.z = Math.ceil(this.z);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\tthis.z = Math.round(this.z);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\tif (rhs.z < this.z) this.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\tif (rhs.z > this.z) this.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tproject(rhs) {\n\t\tconst a_dot_b = this.x * rhs.x + this.y * rhs.y + this.z * rhs.z;\n\t\tconst b_dot_b = rhs.x * rhs.x + rhs.y * rhs.y + rhs.z * rhs.z;\n\t\tconst s = a_dot_b / b_dot_b;\n\t\tthis.x = rhs.x * s;\n\t\tthis.y = rhs.y * s;\n\t\tthis.z = rhs.z * s;\n\t\treturn this;\n\t}\n\n\tset(x, y, z) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\tthis.z -= rhs.z;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\tthis.z = lhs.z - rhs.z;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\tthis.z -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ']';\n\t}\n\n}\n\nVec3.ZERO = Object.freeze(new Vec3(0, 0, 0));\nVec3.ONE = Object.freeze(new Vec3(1, 1, 1));\nVec3.UP = Object.freeze(new Vec3(0, 1, 0));\nVec3.DOWN = Object.freeze(new Vec3(0, -1, 0));\nVec3.RIGHT = Object.freeze(new Vec3(1, 0, 0));\nVec3.LEFT = Object.freeze(new Vec3(-1, 0, 0));\nVec3.FORWARD = Object.freeze(new Vec3(0, 0, -1));\nVec3.BACK = Object.freeze(new Vec3(0, 0, 1));\n\nclass Mat3 {\n\tconstructor() {\n\t\tconst data = new Float32Array(9);\n\t\tdata[0] = data[4] = data[8] = 1;\n\t\tthis.data = data;\n\t}\n\n\tclone() {\n\t\treturn new Mat3().copy(this);\n\t}\n\n\tcopy(rhs) {\n\t\tconst src = rhs.data;\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\treturn this;\n\t}\n\n\tset(src) {\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\tconst l = this.data;\n\t\tconst r = rhs.data;\n\t\treturn l[0] === r[0] && l[1] === r[1] && l[2] === r[2] && l[3] === r[3] && l[4] === r[4] && l[5] === r[5] && l[6] === r[6] && l[7] === r[7] && l[8] === r[8];\n\t}\n\n\tisIdentity() {\n\t\tconst m = this.data;\n\t\treturn m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 0 && m[4] === 1 && m[5] === 0 && m[6] === 0 && m[7] === 0 && m[8] === 1;\n\t}\n\n\tsetIdentity() {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 1;\n\t\tm[5] = 0;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 1;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\tlet t = '[';\n\n\t\tfor (let i = 0; i < 9; i++) {\n\t\t\tt += this.data[i];\n\t\t\tt += i !== 8 ? ', ' : '';\n\t\t}\n\n\t\tt += ']';\n\t\treturn t;\n\t}\n\n\ttranspose() {\n\t\tconst m = this.data;\n\t\tlet tmp;\n\t\ttmp = m[1];\n\t\tm[1] = m[3];\n\t\tm[3] = tmp;\n\t\ttmp = m[2];\n\t\tm[2] = m[6];\n\t\tm[6] = tmp;\n\t\ttmp = m[5];\n\t\tm[5] = m[7];\n\t\tm[7] = tmp;\n\t\treturn this;\n\t}\n\n\tsetFromMat4(m) {\n\t\tconst src = m.data;\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[4];\n\t\tdst[4] = src[5];\n\t\tdst[5] = src[6];\n\t\tdst[6] = src[8];\n\t\tdst[7] = src[9];\n\t\tdst[8] = src[10];\n\t\treturn this;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[3] + z * m[6];\n\t\tres.y = x * m[1] + y * m[4] + z * m[7];\n\t\tres.z = x * m[2] + y * m[5] + z * m[8];\n\t\treturn res;\n\t}\n\n}\n\nMat3.IDENTITY = Object.freeze(new Mat3());\nMat3.ZERO = Object.freeze(new Mat3().set([0, 0, 0, 0, 0, 0, 0, 0, 0]));\n\nclass Vec2 {\n\tconstructor(x = 0, y = 0) {\n\t\tif (x.length === 2) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec2(this.x, this.y);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tcross(rhs) {\n\t\treturn this.x * rhs.y - this.y * rhs.x;\n\t}\n\n\tdistance(rhs) {\n\t\tconst x = this.x - rhs.x;\n\t\tconst y = this.y - rhs.y;\n\t\treturn Math.sqrt(x * x + y * y);\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tset(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ']';\n\t}\n\n\tstatic angleRad(lhs, rhs) {\n\t\treturn Math.atan2(lhs.x * rhs.y - lhs.y * rhs.x, lhs.x * rhs.x + lhs.y * rhs.y);\n\t}\n\n}\n\nVec2.ZERO = Object.freeze(new Vec2(0, 0));\nVec2.ONE = Object.freeze(new Vec2(1, 1));\nVec2.UP = Object.freeze(new Vec2(0, 1));\nVec2.DOWN = Object.freeze(new Vec2(0, -1));\nVec2.RIGHT = Object.freeze(new Vec2(1, 0));\nVec2.LEFT = Object.freeze(new Vec2(-1, 0));\n\nclass Vec4 {\n\tconstructor(x = 0, y = 0, z = 0, w = 0) {\n\t\tif (x.length === 4) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t\tthis.w = x[3];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t\tthis.w = w;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\tthis.z += rhs.z;\n\t\tthis.w += rhs.w;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\tthis.z = lhs.z + rhs.z;\n\t\tthis.w = lhs.w + rhs.w;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\tthis.z += scalar;\n\t\tthis.w += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec4(this.x, this.y, this.z, this.w);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\tthis.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\tthis.z /= rhs.z;\n\t\tthis.w /= rhs.w;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\tthis.z = lhs.z / rhs.z;\n\t\tthis.w = lhs.w / rhs.w;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\tthis.z /= scalar;\n\t\tthis.w /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y + this.z * rhs.z + this.w * rhs.w;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z && this.w === rhs.w;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\tthis.z = lhs.z + alpha * (rhs.z - lhs.z);\n\t\tthis.w = lhs.w + alpha * (rhs.w - lhs.w);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\tthis.z *= rhs.z;\n\t\tthis.w *= rhs.w;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\tthis.z = lhs.z * rhs.z;\n\t\tthis.w = lhs.w * rhs.w;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t\tthis.z *= invLength;\n\t\t\tthis.w *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\tthis.z = Math.floor(this.z);\n\t\tthis.w = Math.floor(this.w);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\tthis.z = Math.ceil(this.z);\n\t\tthis.w = Math.ceil(this.w);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\tthis.z = Math.round(this.z);\n\t\tthis.w = Math.round(this.w);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\tif (rhs.z < this.z) this.z = rhs.z;\n\t\tif (rhs.w < this.w) this.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\tif (rhs.z > this.z) this.z = rhs.z;\n\t\tif (rhs.w > this.w) this.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tset(x, y, z, w) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\tthis.z -= rhs.z;\n\t\tthis.w -= rhs.w;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\tthis.z = lhs.z - rhs.z;\n\t\tthis.w = lhs.w - rhs.w;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\tthis.z -= scalar;\n\t\tthis.w -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ']';\n\t}\n\n}\n\nVec4.ZERO = Object.freeze(new Vec4(0, 0, 0, 0));\nVec4.ONE = Object.freeze(new Vec4(1, 1, 1, 1));\n\nconst _halfSize$1 = new Vec2();\n\nconst x = new Vec3();\nconst y = new Vec3();\nconst z = new Vec3();\nconst scale = new Vec3();\n\nclass Mat4 {\n\tconstructor() {\n\t\tconst data = new Float32Array(16);\n\t\tdata[0] = data[5] = data[10] = data[15] = 1;\n\t\tthis.data = data;\n\t}\n\n\tstatic _getPerspectiveHalfSize(halfSize, fov, aspect, znear, fovIsHorizontal) {\n\t\tif (fovIsHorizontal) {\n\t\t\thalfSize.x = znear * Math.tan(fov * Math.PI / 360);\n\t\t\thalfSize.y = halfSize.x / aspect;\n\t\t} else {\n\t\t\thalfSize.y = znear * Math.tan(fov * Math.PI / 360);\n\t\t\thalfSize.x = halfSize.y * aspect;\n\t\t}\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tconst a = lhs.data,\n\t\t\t\t\tb = rhs.data,\n\t\t\t\t\tr = this.data;\n\t\tr[0] = a[0] + b[0];\n\t\tr[1] = a[1] + b[1];\n\t\tr[2] = a[2] + b[2];\n\t\tr[3] = a[3] + b[3];\n\t\tr[4] = a[4] + b[4];\n\t\tr[5] = a[5] + b[5];\n\t\tr[6] = a[6] + b[6];\n\t\tr[7] = a[7] + b[7];\n\t\tr[8] = a[8] + b[8];\n\t\tr[9] = a[9] + b[9];\n\t\tr[10] = a[10] + b[10];\n\t\tr[11] = a[11] + b[11];\n\t\tr[12] = a[12] + b[12];\n\t\tr[13] = a[13] + b[13];\n\t\tr[14] = a[14] + b[14];\n\t\tr[15] = a[15] + b[15];\n\t\treturn this;\n\t}\n\n\tadd(rhs) {\n\t\treturn this.add2(this, rhs);\n\t}\n\n\tclone() {\n\t\treturn new Mat4().copy(this);\n\t}\n\n\tcopy(rhs) {\n\t\tconst src = rhs.data,\n\t\t\t\t\tdst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\tdst[9] = src[9];\n\t\tdst[10] = src[10];\n\t\tdst[11] = src[11];\n\t\tdst[12] = src[12];\n\t\tdst[13] = src[13];\n\t\tdst[14] = src[14];\n\t\tdst[15] = src[15];\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\tconst l = this.data,\n\t\t\t\t\tr = rhs.data;\n\t\treturn l[0] === r[0] && l[1] === r[1] && l[2] === r[2] && l[3] === r[3] && l[4] === r[4] && l[5] === r[5] && l[6] === r[6] && l[7] === r[7] && l[8] === r[8] && l[9] === r[9] && l[10] === r[10] && l[11] === r[11] && l[12] === r[12] && l[13] === r[13] && l[14] === r[14] && l[15] === r[15];\n\t}\n\n\tisIdentity() {\n\t\tconst m = this.data;\n\t\treturn m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 0 && m[4] === 0 && m[5] === 1 && m[6] === 0 && m[7] === 0 && m[8] === 0 && m[9] === 0 && m[10] === 1 && m[11] === 0 && m[12] === 0 && m[13] === 0 && m[14] === 0 && m[15] === 1;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tconst a = lhs.data;\n\t\tconst b = rhs.data;\n\t\tconst r = this.data;\n\t\tconst a00 = a[0];\n\t\tconst a01 = a[1];\n\t\tconst a02 = a[2];\n\t\tconst a03 = a[3];\n\t\tconst a10 = a[4];\n\t\tconst a11 = a[5];\n\t\tconst a12 = a[6];\n\t\tconst a13 = a[7];\n\t\tconst a20 = a[8];\n\t\tconst a21 = a[9];\n\t\tconst a22 = a[10];\n\t\tconst a23 = a[11];\n\t\tconst a30 = a[12];\n\t\tconst a31 = a[13];\n\t\tconst a32 = a[14];\n\t\tconst a33 = a[15];\n\t\tlet b0, b1, b2, b3;\n\t\tb0 = b[0];\n\t\tb1 = b[1];\n\t\tb2 = b[2];\n\t\tb3 = b[3];\n\t\tr[0] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[1] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[2] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[3] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tb3 = b[7];\n\t\tr[4] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[5] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[6] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[7] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tb3 = b[11];\n\t\tr[8] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[9] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[10] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[11] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tb3 = b[15];\n\t\tr[12] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[13] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[14] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[15] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\treturn this;\n\t}\n\n\tmulAffine2(lhs, rhs) {\n\t\tconst a = lhs.data;\n\t\tconst b = rhs.data;\n\t\tconst r = this.data;\n\t\tconst a00 = a[0];\n\t\tconst a01 = a[1];\n\t\tconst a02 = a[2];\n\t\tconst a10 = a[4];\n\t\tconst a11 = a[5];\n\t\tconst a12 = a[6];\n\t\tconst a20 = a[8];\n\t\tconst a21 = a[9];\n\t\tconst a22 = a[10];\n\t\tconst a30 = a[12];\n\t\tconst a31 = a[13];\n\t\tconst a32 = a[14];\n\t\tlet b0, b1, b2;\n\t\tb0 = b[0];\n\t\tb1 = b[1];\n\t\tb2 = b[2];\n\t\tr[0] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[1] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[2] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[3] = 0;\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tr[4] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[5] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[6] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[7] = 0;\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tr[8] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[9] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[10] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[11] = 0;\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tr[12] = a00 * b0 + a10 * b1 + a20 * b2 + a30;\n\t\tr[13] = a01 * b0 + a11 * b1 + a21 * b2 + a31;\n\t\tr[14] = a02 * b0 + a12 * b1 + a22 * b2 + a32;\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\treturn this.mul2(this, rhs);\n\t}\n\n\ttransformPoint(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8] + m[12];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9] + m[13];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10] + m[14];\n\t\treturn res;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10];\n\t\treturn res;\n\t}\n\n\ttransformVec4(vec, res = new Vec4()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tconst w = vec.w;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8] + w * m[12];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9] + w * m[13];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10] + w * m[14];\n\t\tres.w = x * m[3] + y * m[7] + z * m[11] + w * m[15];\n\t\treturn res;\n\t}\n\n\tsetLookAt(position, target, up) {\n\t\tz.sub2(position, target).normalize();\n\t\ty.copy(up).normalize();\n\t\tx.cross(y, z).normalize();\n\t\ty.cross(z, x);\n\t\tconst r = this.data;\n\t\tr[0] = x.x;\n\t\tr[1] = x.y;\n\t\tr[2] = x.z;\n\t\tr[3] = 0;\n\t\tr[4] = y.x;\n\t\tr[5] = y.y;\n\t\tr[6] = y.z;\n\t\tr[7] = 0;\n\t\tr[8] = z.x;\n\t\tr[9] = z.y;\n\t\tr[10] = z.z;\n\t\tr[11] = 0;\n\t\tr[12] = position.x;\n\t\tr[13] = position.y;\n\t\tr[14] = position.z;\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetFrustum(left, right, bottom, top, znear, zfar) {\n\t\tconst temp1 = 2 * znear;\n\t\tconst temp2 = right - left;\n\t\tconst temp3 = top - bottom;\n\t\tconst temp4 = zfar - znear;\n\t\tconst r = this.data;\n\t\tr[0] = temp1 / temp2;\n\t\tr[1] = 0;\n\t\tr[2] = 0;\n\t\tr[3] = 0;\n\t\tr[4] = 0;\n\t\tr[5] = temp1 / temp3;\n\t\tr[6] = 0;\n\t\tr[7] = 0;\n\t\tr[8] = (right + left) / temp2;\n\t\tr[9] = (top + bottom) / temp3;\n\t\tr[10] = (-zfar - znear) / temp4;\n\t\tr[11] = -1;\n\t\tr[12] = 0;\n\t\tr[13] = 0;\n\t\tr[14] = -temp1 * zfar / temp4;\n\t\tr[15] = 0;\n\t\treturn this;\n\t}\n\n\tsetPerspective(fov, aspect, znear, zfar, fovIsHorizontal) {\n\t\tMat4._getPerspectiveHalfSize(_halfSize$1, fov, aspect, znear, fovIsHorizontal);\n\n\t\treturn this.setFrustum(-_halfSize$1.x, _halfSize$1.x, -_halfSize$1.y, _halfSize$1.y, znear, zfar);\n\t}\n\n\tsetOrtho(left, right, bottom, top, near, far) {\n\t\tconst r = this.data;\n\t\tr[0] = 2 / (right - left);\n\t\tr[1] = 0;\n\t\tr[2] = 0;\n\t\tr[3] = 0;\n\t\tr[4] = 0;\n\t\tr[5] = 2 / (top - bottom);\n\t\tr[6] = 0;\n\t\tr[7] = 0;\n\t\tr[8] = 0;\n\t\tr[9] = 0;\n\t\tr[10] = -2 / (far - near);\n\t\tr[11] = 0;\n\t\tr[12] = -(right + left) / (right - left);\n\t\tr[13] = -(top + bottom) / (top - bottom);\n\t\tr[14] = -(far + near) / (far - near);\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetFromAxisAngle(axis, angle) {\n\t\tangle *= math.DEG_TO_RAD;\n\t\tconst x = axis.x;\n\t\tconst y = axis.y;\n\t\tconst z = axis.z;\n\t\tconst c = Math.cos(angle);\n\t\tconst s = Math.sin(angle);\n\t\tconst t = 1 - c;\n\t\tconst tx = t * x;\n\t\tconst ty = t * y;\n\t\tconst m = this.data;\n\t\tm[0] = tx * x + c;\n\t\tm[1] = tx * y + s * z;\n\t\tm[2] = tx * z - s * y;\n\t\tm[3] = 0;\n\t\tm[4] = tx * y - s * z;\n\t\tm[5] = ty * y + c;\n\t\tm[6] = ty * z + s * x;\n\t\tm[7] = 0;\n\t\tm[8] = tx * z + s * y;\n\t\tm[9] = ty * z - x * s;\n\t\tm[10] = t * z * z + c;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetTranslate(x, y, z) {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = 1;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 1;\n\t\tm[11] = 0;\n\t\tm[12] = x;\n\t\tm[13] = y;\n\t\tm[14] = z;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetScale(x, y, z) {\n\t\tconst m = this.data;\n\t\tm[0] = x;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = y;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = z;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetViewport(x, y, width, height) {\n\t\tconst m = this.data;\n\t\tm[0] = width * 0.5;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = height * 0.5;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 0.5;\n\t\tm[11] = 0;\n\t\tm[12] = x + width * 0.5;\n\t\tm[13] = y + height * 0.5;\n\t\tm[14] = 0.5;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tinvert() {\n\t\tconst m = this.data;\n\t\tconst a00 = m[0];\n\t\tconst a01 = m[1];\n\t\tconst a02 = m[2];\n\t\tconst a03 = m[3];\n\t\tconst a10 = m[4];\n\t\tconst a11 = m[5];\n\t\tconst a12 = m[6];\n\t\tconst a13 = m[7];\n\t\tconst a20 = m[8];\n\t\tconst a21 = m[9];\n\t\tconst a22 = m[10];\n\t\tconst a23 = m[11];\n\t\tconst a30 = m[12];\n\t\tconst a31 = m[13];\n\t\tconst a32 = m[14];\n\t\tconst a33 = m[15];\n\t\tconst b00 = a00 * a11 - a01 * a10;\n\t\tconst b01 = a00 * a12 - a02 * a10;\n\t\tconst b02 = a00 * a13 - a03 * a10;\n\t\tconst b03 = a01 * a12 - a02 * a11;\n\t\tconst b04 = a01 * a13 - a03 * a11;\n\t\tconst b05 = a02 * a13 - a03 * a12;\n\t\tconst b06 = a20 * a31 - a21 * a30;\n\t\tconst b07 = a20 * a32 - a22 * a30;\n\t\tconst b08 = a20 * a33 - a23 * a30;\n\t\tconst b09 = a21 * a32 - a22 * a31;\n\t\tconst b10 = a21 * a33 - a23 * a31;\n\t\tconst b11 = a22 * a33 - a23 * a32;\n\t\tconst det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n\t\tif (det === 0) {\n\t\t\tthis.setIdentity();\n\t\t} else {\n\t\t\tconst invDet = 1 / det;\n\t\t\tm[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\n\t\t\tm[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\n\t\t\tm[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\n\t\t\tm[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\n\t\t\tm[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\n\t\t\tm[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\n\t\t\tm[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\n\t\t\tm[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\n\t\t\tm[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\n\t\t\tm[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\n\t\t\tm[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\n\t\t\tm[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\n\t\t\tm[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\n\t\t\tm[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\n\t\t\tm[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\n\t\t\tm[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tset(src) {\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\tdst[9] = src[9];\n\t\tdst[10] = src[10];\n\t\tdst[11] = src[11];\n\t\tdst[12] = src[12];\n\t\tdst[13] = src[13];\n\t\tdst[14] = src[14];\n\t\tdst[15] = src[15];\n\t\treturn this;\n\t}\n\n\tsetIdentity() {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = 1;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 1;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetTRS(t, r, s) {\n\t\tconst qx = r.x;\n\t\tconst qy = r.y;\n\t\tconst qz = r.z;\n\t\tconst qw = r.w;\n\t\tconst sx = s.x;\n\t\tconst sy = s.y;\n\t\tconst sz = s.z;\n\t\tconst x2 = qx + qx;\n\t\tconst y2 = qy + qy;\n\t\tconst z2 = qz + qz;\n\t\tconst xx = qx * x2;\n\t\tconst xy = qx * y2;\n\t\tconst xz = qx * z2;\n\t\tconst yy = qy * y2;\n\t\tconst yz = qy * z2;\n\t\tconst zz = qz * z2;\n\t\tconst wx = qw * x2;\n\t\tconst wy = qw * y2;\n\t\tconst wz = qw * z2;\n\t\tconst m = this.data;\n\t\tm[0] = (1 - (yy + zz)) * sx;\n\t\tm[1] = (xy + wz) * sx;\n\t\tm[2] = (xz - wy) * sx;\n\t\tm[3] = 0;\n\t\tm[4] = (xy - wz) * sy;\n\t\tm[5] = (1 - (xx + zz)) * sy;\n\t\tm[6] = (yz + wx) * sy;\n\t\tm[7] = 0;\n\t\tm[8] = (xz + wy) * sz;\n\t\tm[9] = (yz - wx) * sz;\n\t\tm[10] = (1 - (xx + yy)) * sz;\n\t\tm[11] = 0;\n\t\tm[12] = t.x;\n\t\tm[13] = t.y;\n\t\tm[14] = t.z;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\ttranspose() {\n\t\tlet tmp;\n\t\tconst m = this.data;\n\t\ttmp = m[1];\n\t\tm[1] = m[4];\n\t\tm[4] = tmp;\n\t\ttmp = m[2];\n\t\tm[2] = m[8];\n\t\tm[8] = tmp;\n\t\ttmp = m[3];\n\t\tm[3] = m[12];\n\t\tm[12] = tmp;\n\t\ttmp = m[6];\n\t\tm[6] = m[9];\n\t\tm[9] = tmp;\n\t\ttmp = m[7];\n\t\tm[7] = m[13];\n\t\tm[13] = tmp;\n\t\ttmp = m[11];\n\t\tm[11] = m[14];\n\t\tm[14] = tmp;\n\t\treturn this;\n\t}\n\n\tinvertTo3x3(res) {\n\t\tconst m = this.data;\n\t\tconst r = res.data;\n\t\tconst m0 = m[0];\n\t\tconst m1 = m[1];\n\t\tconst m2 = m[2];\n\t\tconst m4 = m[4];\n\t\tconst m5 = m[5];\n\t\tconst m6 = m[6];\n\t\tconst m8 = m[8];\n\t\tconst m9 = m[9];\n\t\tconst m10 = m[10];\n\t\tconst a11 = m10 * m5 - m6 * m9;\n\t\tconst a21 = -m10 * m1 + m2 * m9;\n\t\tconst a31 = m6 * m1 - m2 * m5;\n\t\tconst a12 = -m10 * m4 + m6 * m8;\n\t\tconst a22 = m10 * m0 - m2 * m8;\n\t\tconst a32 = -m6 * m0 + m2 * m4;\n\t\tconst a13 = m9 * m4 - m5 * m8;\n\t\tconst a23 = -m9 * m0 + m1 * m8;\n\t\tconst a33 = m5 * m0 - m1 * m4;\n\t\tconst det = m0 * a11 + m1 * a12 + m2 * a13;\n\n\t\tif (det === 0) {\n\t\t\treturn this;\n\t\t}\n\n\t\tconst idet = 1 / det;\n\t\tr[0] = idet * a11;\n\t\tr[1] = idet * a21;\n\t\tr[2] = idet * a31;\n\t\tr[3] = idet * a12;\n\t\tr[4] = idet * a22;\n\t\tr[5] = idet * a32;\n\t\tr[6] = idet * a13;\n\t\tr[7] = idet * a23;\n\t\tr[8] = idet * a33;\n\t\treturn this;\n\t}\n\n\tgetTranslation(t = new Vec3()) {\n\t\treturn t.set(this.data[12], this.data[13], this.data[14]);\n\t}\n\n\tgetX(x = new Vec3()) {\n\t\treturn x.set(this.data[0], this.data[1], this.data[2]);\n\t}\n\n\tgetY(y = new Vec3()) {\n\t\treturn y.set(this.data[4], this.data[5], this.data[6]);\n\t}\n\n\tgetZ(z = new Vec3()) {\n\t\treturn z.set(this.data[8], this.data[9], this.data[10]);\n\t}\n\n\tgetScale(scale = new Vec3()) {\n\t\tthis.getX(x);\n\t\tthis.getY(y);\n\t\tthis.getZ(z);\n\t\tscale.set(x.length(), y.length(), z.length());\n\t\treturn scale;\n\t}\n\n\tsetFromEulerAngles(ex, ey, ez) {\n\t\tex *= math.DEG_TO_RAD;\n\t\tey *= math.DEG_TO_RAD;\n\t\tez *= math.DEG_TO_RAD;\n\t\tconst s1 = Math.sin(-ex);\n\t\tconst c1 = Math.cos(-ex);\n\t\tconst s2 = Math.sin(-ey);\n\t\tconst c2 = Math.cos(-ey);\n\t\tconst s3 = Math.sin(-ez);\n\t\tconst c3 = Math.cos(-ez);\n\t\tconst m = this.data;\n\t\tm[0] = c2 * c3;\n\t\tm[1] = -c2 * s3;\n\t\tm[2] = s2;\n\t\tm[3] = 0;\n\t\tm[4] = c1 * s3 + c3 * s1 * s2;\n\t\tm[5] = c1 * c3 - s1 * s2 * s3;\n\t\tm[6] = -c2 * s1;\n\t\tm[7] = 0;\n\t\tm[8] = s1 * s3 - c1 * c3 * s2;\n\t\tm[9] = c3 * s1 + c1 * s2 * s3;\n\t\tm[10] = c1 * c2;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tgetEulerAngles(eulers = new Vec3()) {\n\t\tthis.getScale(scale);\n\t\tconst sx = scale.x;\n\t\tconst sy = scale.y;\n\t\tconst sz = scale.z;\n\t\tif (sx === 0 || sy === 0 || sz === 0) return eulers.set(0, 0, 0);\n\t\tconst m = this.data;\n\t\tconst y = Math.asin(-m[2] / sx);\n\t\tconst halfPi = Math.PI * 0.5;\n\t\tlet x, z;\n\n\t\tif (y < halfPi) {\n\t\t\tif (y > -halfPi) {\n\t\t\t\tx = Math.atan2(m[6] / sy, m[10] / sz);\n\t\t\t\tz = Math.atan2(m[1] / sx, m[0] / sx);\n\t\t\t} else {\n\t\t\t\tz = 0;\n\t\t\t\tx = -Math.atan2(m[4] / sy, m[5] / sy);\n\t\t\t}\n\t\t} else {\n\t\t\tz = 0;\n\t\t\tx = Math.atan2(m[4] / sy, m[5] / sy);\n\t\t}\n\n\t\treturn eulers.set(x, y, z).mulScalar(math.RAD_TO_DEG);\n\t}\n\n\ttoString() {\n\t\tlet t = '[';\n\n\t\tfor (let i = 0; i < 16; i += 1) {\n\t\t\tt += this.data[i];\n\t\t\tt += i !== 15 ? ', ' : '';\n\t\t}\n\n\t\tt += ']';\n\t\treturn t;\n\t}\n\n}\n\nMat4.IDENTITY = Object.freeze(new Mat4());\nMat4.ZERO = Object.freeze(new Mat4().set([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));\n\nclass Quat {\n\tconstructor(x = 0, y = 0, z = 0, w = 1) {\n\t\tif (x.length === 4) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t\tthis.w = x[3];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t\tthis.w = w;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Quat(this.x, this.y, this.z, this.w);\n\t}\n\n\tconjugate() {\n\t\tthis.x *= -1;\n\t\tthis.y *= -1;\n\t\tthis.z *= -1;\n\t\treturn this;\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\tthis.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z && this.w === rhs.w;\n\t}\n\n\tgetAxisAngle(axis) {\n\t\tlet rad = Math.acos(this.w) * 2;\n\t\tconst s = Math.sin(rad / 2);\n\n\t\tif (s !== 0) {\n\t\t\taxis.x = this.x / s;\n\t\t\taxis.y = this.y / s;\n\t\t\taxis.z = this.z / s;\n\n\t\t\tif (axis.x < 0 || axis.y < 0 || axis.z < 0) {\n\t\t\t\taxis.x *= -1;\n\t\t\t\taxis.y *= -1;\n\t\t\t\taxis.z *= -1;\n\t\t\t\trad *= -1;\n\t\t\t}\n\t\t} else {\n\t\t\taxis.x = 1;\n\t\t\taxis.y = 0;\n\t\t\taxis.z = 0;\n\t\t}\n\n\t\treturn rad * math.RAD_TO_DEG;\n\t}\n\n\tgetEulerAngles(eulers = new Vec3()) {\n\t\tlet x, y, z;\n\t\tconst qx = this.x;\n\t\tconst qy = this.y;\n\t\tconst qz = this.z;\n\t\tconst qw = this.w;\n\t\tconst a2 = 2 * (qw * qy - qx * qz);\n\n\t\tif (a2 <= -0.99999) {\n\t\t\tx = 2 * Math.atan2(qx, qw);\n\t\t\ty = -Math.PI / 2;\n\t\t\tz = 0;\n\t\t} else if (a2 >= 0.99999) {\n\t\t\tx = 2 * Math.atan2(qx, qw);\n\t\t\ty = Math.PI / 2;\n\t\t\tz = 0;\n\t\t} else {\n\t\t\tx = Math.atan2(2 * (qw * qx + qy * qz), 1 - 2 * (qx * qx + qy * qy));\n\t\t\ty = Math.asin(a2);\n\t\t\tz = Math.atan2(2 * (qw * qz + qx * qy), 1 - 2 * (qy * qy + qz * qz));\n\t\t}\n\n\t\treturn eulers.set(x, y, z).mulScalar(math.RAD_TO_DEG);\n\t}\n\n\tinvert() {\n\t\treturn this.conjugate().normalize();\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\t}\n\n\tmul(rhs) {\n\t\tconst q1x = this.x;\n\t\tconst q1y = this.y;\n\t\tconst q1z = this.z;\n\t\tconst q1w = this.w;\n\t\tconst q2x = rhs.x;\n\t\tconst q2y = rhs.y;\n\t\tconst q2z = rhs.z;\n\t\tconst q2w = rhs.w;\n\t\tthis.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\n\t\tthis.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\n\t\tthis.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\n\t\tthis.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tconst q1x = lhs.x;\n\t\tconst q1y = lhs.y;\n\t\tconst q1z = lhs.z;\n\t\tconst q1w = lhs.w;\n\t\tconst q2x = rhs.x;\n\t\tconst q2y = rhs.y;\n\t\tconst q2z = rhs.z;\n\t\tconst q2w = rhs.w;\n\t\tthis.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\n\t\tthis.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\n\t\tthis.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\n\t\tthis.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tlet len = this.length();\n\n\t\tif (len === 0) {\n\t\t\tthis.x = this.y = this.z = 0;\n\t\t\tthis.w = 1;\n\t\t} else {\n\t\t\tlen = 1 / len;\n\t\t\tthis.x *= len;\n\t\t\tthis.y *= len;\n\t\t\tthis.z *= len;\n\t\t\tthis.w *= len;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tset(x, y, z, w) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\t\treturn this;\n\t}\n\n\tsetFromAxisAngle(axis, angle) {\n\t\tangle *= 0.5 * math.DEG_TO_RAD;\n\t\tconst sa = Math.sin(angle);\n\t\tconst ca = Math.cos(angle);\n\t\tthis.x = sa * axis.x;\n\t\tthis.y = sa * axis.y;\n\t\tthis.z = sa * axis.z;\n\t\tthis.w = ca;\n\t\treturn this;\n\t}\n\n\tsetFromEulerAngles(ex, ey, ez) {\n\t\tconst halfToRad = 0.5 * math.DEG_TO_RAD;\n\t\tex *= halfToRad;\n\t\tey *= halfToRad;\n\t\tez *= halfToRad;\n\t\tconst sx = Math.sin(ex);\n\t\tconst cx = Math.cos(ex);\n\t\tconst sy = Math.sin(ey);\n\t\tconst cy = Math.cos(ey);\n\t\tconst sz = Math.sin(ez);\n\t\tconst cz = Math.cos(ez);\n\t\tthis.x = sx * cy * cz - cx * sy * sz;\n\t\tthis.y = cx * sy * cz + sx * cy * sz;\n\t\tthis.z = cx * cy * sz - sx * sy * cz;\n\t\tthis.w = cx * cy * cz + sx * sy * sz;\n\t\treturn this;\n\t}\n\n\tsetFromMat4(m) {\n\t\tlet m00, m01, m02, m10, m11, m12, m20, m21, m22, s, rs, lx, ly, lz;\n\t\tm = m.data;\n\t\tm00 = m[0];\n\t\tm01 = m[1];\n\t\tm02 = m[2];\n\t\tm10 = m[4];\n\t\tm11 = m[5];\n\t\tm12 = m[6];\n\t\tm20 = m[8];\n\t\tm21 = m[9];\n\t\tm22 = m[10];\n\t\tlx = m00 * m00 + m01 * m01 + m02 * m02;\n\t\tif (lx === 0) return this;\n\t\tlx = 1 / Math.sqrt(lx);\n\t\tly = m10 * m10 + m11 * m11 + m12 * m12;\n\t\tif (ly === 0) return this;\n\t\tly = 1 / Math.sqrt(ly);\n\t\tlz = m20 * m20 + m21 * m21 + m22 * m22;\n\t\tif (lz === 0) return this;\n\t\tlz = 1 / Math.sqrt(lz);\n\t\tm00 *= lx;\n\t\tm01 *= lx;\n\t\tm02 *= lx;\n\t\tm10 *= ly;\n\t\tm11 *= ly;\n\t\tm12 *= ly;\n\t\tm20 *= lz;\n\t\tm21 *= lz;\n\t\tm22 *= lz;\n\t\tconst tr = m00 + m11 + m22;\n\n\t\tif (tr >= 0) {\n\t\t\ts = Math.sqrt(tr + 1);\n\t\t\tthis.w = s * 0.5;\n\t\t\ts = 0.5 / s;\n\t\t\tthis.x = (m12 - m21) * s;\n\t\t\tthis.y = (m20 - m02) * s;\n\t\t\tthis.z = (m01 - m10) * s;\n\t\t} else {\n\t\t\tif (m00 > m11) {\n\t\t\t\tif (m00 > m22) {\n\t\t\t\t\trs = m00 - (m11 + m22) + 1;\n\t\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\t\tthis.x = rs * 0.5;\n\t\t\t\t\trs = 0.5 / rs;\n\t\t\t\t\tthis.w = (m12 - m21) * rs;\n\t\t\t\t\tthis.y = (m01 + m10) * rs;\n\t\t\t\t\tthis.z = (m02 + m20) * rs;\n\t\t\t\t} else {\n\t\t\t\t\trs = m22 - (m00 + m11) + 1;\n\t\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\t\tthis.z = rs * 0.5;\n\t\t\t\t\trs = 0.5 / rs;\n\t\t\t\t\tthis.w = (m01 - m10) * rs;\n\t\t\t\t\tthis.x = (m20 + m02) * rs;\n\t\t\t\t\tthis.y = (m21 + m12) * rs;\n\t\t\t\t}\n\t\t\t} else if (m11 > m22) {\n\t\t\t\trs = m11 - (m22 + m00) + 1;\n\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\tthis.y = rs * 0.5;\n\t\t\t\trs = 0.5 / rs;\n\t\t\t\tthis.w = (m20 - m02) * rs;\n\t\t\t\tthis.z = (m12 + m21) * rs;\n\t\t\t\tthis.x = (m10 + m01) * rs;\n\t\t\t} else {\n\t\t\t\trs = m22 - (m00 + m11) + 1;\n\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\tthis.z = rs * 0.5;\n\t\t\t\trs = 0.5 / rs;\n\t\t\t\tthis.w = (m01 - m10) * rs;\n\t\t\t\tthis.x = (m20 + m02) * rs;\n\t\t\t\tthis.y = (m21 + m12) * rs;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tslerp(lhs, rhs, alpha) {\n\t\tconst lx = lhs.x;\n\t\tconst ly = lhs.y;\n\t\tconst lz = lhs.z;\n\t\tconst lw = lhs.w;\n\t\tlet rx = rhs.x;\n\t\tlet ry = rhs.y;\n\t\tlet rz = rhs.z;\n\t\tlet rw = rhs.w;\n\t\tlet cosHalfTheta = lw * rw + lx * rx + ly * ry + lz * rz;\n\n\t\tif (cosHalfTheta < 0) {\n\t\t\trw = -rw;\n\t\t\trx = -rx;\n\t\t\try = -ry;\n\t\t\trz = -rz;\n\t\t\tcosHalfTheta = -cosHalfTheta;\n\t\t}\n\n\t\tif (Math.abs(cosHalfTheta) >= 1) {\n\t\t\tthis.w = lw;\n\t\t\tthis.x = lx;\n\t\t\tthis.y = ly;\n\t\t\tthis.z = lz;\n\t\t\treturn this;\n\t\t}\n\n\t\tconst halfTheta = Math.acos(cosHalfTheta);\n\t\tconst sinHalfTheta = Math.sqrt(1 - cosHalfTheta * cosHalfTheta);\n\n\t\tif (Math.abs(sinHalfTheta) < 0.001) {\n\t\t\tthis.w = lw * 0.5 + rw * 0.5;\n\t\t\tthis.x = lx * 0.5 + rx * 0.5;\n\t\t\tthis.y = ly * 0.5 + ry * 0.5;\n\t\t\tthis.z = lz * 0.5 + rz * 0.5;\n\t\t\treturn this;\n\t\t}\n\n\t\tconst ratioA = Math.sin((1 - alpha) * halfTheta) / sinHalfTheta;\n\t\tconst ratioB = Math.sin(alpha * halfTheta) / sinHalfTheta;\n\t\tthis.w = lw * ratioA + rw * ratioB;\n\t\tthis.x = lx * ratioA + rx * ratioB;\n\t\tthis.y = ly * ratioA + ry * ratioB;\n\t\tthis.z = lz * ratioA + rz * ratioB;\n\t\treturn this;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst x = vec.x,\n\t\t\t\t\ty = vec.y,\n\t\t\t\t\tz = vec.z;\n\t\tconst qx = this.x,\n\t\t\t\t\tqy = this.y,\n\t\t\t\t\tqz = this.z,\n\t\t\t\t\tqw = this.w;\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = -qx * x - qy * y - qz * z;\n\t\tres.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n\t\tres.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n\t\tres.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\t\treturn res;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ']';\n\t}\n\n}\n\nQuat.IDENTITY = Object.freeze(new Quat(0, 0, 0, 1));\nQuat.ZERO = Object.freeze(new Quat(0, 0, 0, 0));\n\nconst tmpVecA$2 = new Vec3();\nconst tmpVecB$1 = new Vec3();\nconst tmpVecC = new Vec3();\nconst tmpVecD = new Vec3();\nconst tmpVecE = new Vec3();\n\nclass BoundingBox {\n\tconstructor(center = new Vec3(), halfExtents = new Vec3(0.5, 0.5, 0.5)) {\n\t\tthis.center = center;\n\t\tthis.halfExtents = halfExtents;\n\t\tthis._min = new Vec3();\n\t\tthis._max = new Vec3();\n\t}\n\n\tadd(other) {\n\t\tconst tc = this.center;\n\t\tconst tcx = tc.x;\n\t\tconst tcy = tc.y;\n\t\tconst tcz = tc.z;\n\t\tconst th = this.halfExtents;\n\t\tconst thx = th.x;\n\t\tconst thy = th.y;\n\t\tconst thz = th.z;\n\t\tlet tminx = tcx - thx;\n\t\tlet tmaxx = tcx + thx;\n\t\tlet tminy = tcy - thy;\n\t\tlet tmaxy = tcy + thy;\n\t\tlet tminz = tcz - thz;\n\t\tlet tmaxz = tcz + thz;\n\t\tconst oc = other.center;\n\t\tconst ocx = oc.x;\n\t\tconst ocy = oc.y;\n\t\tconst ocz = oc.z;\n\t\tconst oh = other.halfExtents;\n\t\tconst ohx = oh.x;\n\t\tconst ohy = oh.y;\n\t\tconst ohz = oh.z;\n\t\tconst ominx = ocx - ohx;\n\t\tconst omaxx = ocx + ohx;\n\t\tconst ominy = ocy - ohy;\n\t\tconst omaxy = ocy + ohy;\n\t\tconst ominz = ocz - ohz;\n\t\tconst omaxz = ocz + ohz;\n\t\tif (ominx < tminx) tminx = ominx;\n\t\tif (omaxx > tmaxx) tmaxx = omaxx;\n\t\tif (ominy < tminy) tminy = ominy;\n\t\tif (omaxy > tmaxy) tmaxy = omaxy;\n\t\tif (ominz < tminz) tminz = ominz;\n\t\tif (omaxz > tmaxz) tmaxz = omaxz;\n\t\ttc.x = (tminx + tmaxx) * 0.5;\n\t\ttc.y = (tminy + tmaxy) * 0.5;\n\t\ttc.z = (tminz + tmaxz) * 0.5;\n\t\tth.x = (tmaxx - tminx) * 0.5;\n\t\tth.y = (tmaxy - tminy) * 0.5;\n\t\tth.z = (tmaxz - tminz) * 0.5;\n\t}\n\n\tcopy(src) {\n\t\tthis.center.copy(src.center);\n\t\tthis.halfExtents.copy(src.halfExtents);\n\t}\n\n\tclone() {\n\t\treturn new BoundingBox(this.center.clone(), this.halfExtents.clone());\n\t}\n\n\tintersects(other) {\n\t\tconst aMax = this.getMax();\n\t\tconst aMin = this.getMin();\n\t\tconst bMax = other.getMax();\n\t\tconst bMin = other.getMin();\n\t\treturn aMin.x <= bMax.x && aMax.x >= bMin.x && aMin.y <= bMax.y && aMax.y >= bMin.y && aMin.z <= bMax.z && aMax.z >= bMin.z;\n\t}\n\n\t_intersectsRay(ray, point) {\n\t\tconst tMin = tmpVecA$2.copy(this.getMin()).sub(ray.origin);\n\t\tconst tMax = tmpVecB$1.copy(this.getMax()).sub(ray.origin);\n\t\tconst dir = ray.direction;\n\n\t\tif (dir.x === 0) {\n\t\t\ttMin.x = tMin.x < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.x = tMax.x < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.x /= dir.x;\n\t\t\ttMax.x /= dir.x;\n\t\t}\n\n\t\tif (dir.y === 0) {\n\t\t\ttMin.y = tMin.y < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.y = tMax.y < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.y /= dir.y;\n\t\t\ttMax.y /= dir.y;\n\t\t}\n\n\t\tif (dir.z === 0) {\n\t\t\ttMin.z = tMin.z < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.z = tMax.z < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.z /= dir.z;\n\t\t\ttMax.z /= dir.z;\n\t\t}\n\n\t\tconst realMin = tmpVecC.set(Math.min(tMin.x, tMax.x), Math.min(tMin.y, tMax.y), Math.min(tMin.z, tMax.z));\n\t\tconst realMax = tmpVecD.set(Math.max(tMin.x, tMax.x), Math.max(tMin.y, tMax.y), Math.max(tMin.z, tMax.z));\n\t\tconst minMax = Math.min(Math.min(realMax.x, realMax.y), realMax.z);\n\t\tconst maxMin = Math.max(Math.max(realMin.x, realMin.y), realMin.z);\n\t\tconst intersects = minMax >= maxMin && maxMin >= 0;\n\t\tif (intersects) point.copy(ray.direction).mulScalar(maxMin).add(ray.origin);\n\t\treturn intersects;\n\t}\n\n\t_fastIntersectsRay(ray) {\n\t\tconst diff = tmpVecA$2;\n\t\tconst cross = tmpVecB$1;\n\t\tconst prod = tmpVecC;\n\t\tconst absDiff = tmpVecD;\n\t\tconst absDir = tmpVecE;\n\t\tconst rayDir = ray.direction;\n\t\tdiff.sub2(ray.origin, this.center);\n\t\tabsDiff.set(Math.abs(diff.x), Math.abs(diff.y), Math.abs(diff.z));\n\t\tprod.mul2(diff, rayDir);\n\t\tif (absDiff.x > this.halfExtents.x && prod.x >= 0) return false;\n\t\tif (absDiff.y > this.halfExtents.y && prod.y >= 0) return false;\n\t\tif (absDiff.z > this.halfExtents.z && prod.z >= 0) return false;\n\t\tabsDir.set(Math.abs(rayDir.x), Math.abs(rayDir.y), Math.abs(rayDir.z));\n\t\tcross.cross(rayDir, diff);\n\t\tcross.set(Math.abs(cross.x), Math.abs(cross.y), Math.abs(cross.z));\n\t\tif (cross.x > this.halfExtents.y * absDir.z + this.halfExtents.z * absDir.y) return false;\n\t\tif (cross.y > this.halfExtents.x * absDir.z + this.halfExtents.z * absDir.x) return false;\n\t\tif (cross.z > this.halfExtents.x * absDir.y + this.halfExtents.y * absDir.x) return false;\n\t\treturn true;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tif (point) {\n\t\t\treturn this._intersectsRay(ray, point);\n\t\t}\n\n\t\treturn this._fastIntersectsRay(ray);\n\t}\n\n\tsetMinMax(min, max) {\n\t\tthis.center.add2(max, min).mulScalar(0.5);\n\t\tthis.halfExtents.sub2(max, min).mulScalar(0.5);\n\t}\n\n\tgetMin() {\n\t\treturn this._min.copy(this.center).sub(this.halfExtents);\n\t}\n\n\tgetMax() {\n\t\treturn this._max.copy(this.center).add(this.halfExtents);\n\t}\n\n\tcontainsPoint(point) {\n\t\tconst min = this.getMin();\n\t\tconst max = this.getMax();\n\n\t\tif (point.x < min.x || point.x > max.x || point.y < min.y || point.y > max.y || point.z < min.z || point.z > max.z) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetFromTransformedAabb(aabb, m) {\n\t\tconst ac = aabb.center;\n\t\tconst ar = aabb.halfExtents;\n\t\tconst d = m.data;\n\t\tconst mx0 = d[0];\n\t\tconst mx1 = d[4];\n\t\tconst mx2 = d[8];\n\t\tconst my0 = d[1];\n\t\tconst my1 = d[5];\n\t\tconst my2 = d[9];\n\t\tconst mz0 = d[2];\n\t\tconst mz1 = d[6];\n\t\tconst mz2 = d[10];\n\t\tthis.center.set(d[12] + mx0 * ac.x + mx1 * ac.y + mx2 * ac.z, d[13] + my0 * ac.x + my1 * ac.y + my2 * ac.z, d[14] + mz0 * ac.x + mz1 * ac.y + mz2 * ac.z);\n\t\tthis.halfExtents.set(Math.abs(mx0) * ar.x + Math.abs(mx1) * ar.y + Math.abs(mx2) * ar.z, Math.abs(my0) * ar.x + Math.abs(my1) * ar.y + Math.abs(my2) * ar.z, Math.abs(mz0) * ar.x + Math.abs(mz1) * ar.y + Math.abs(mz2) * ar.z);\n\t}\n\n\tcompute(vertices, numVerts) {\n\t\tnumVerts = numVerts === undefined ? vertices.length / 3 : numVerts;\n\n\t\tif (numVerts > 0) {\n\t\t\tconst min = tmpVecA$2.set(vertices[0], vertices[1], vertices[2]);\n\t\t\tconst max = tmpVecB$1.set(vertices[0], vertices[1], vertices[2]);\n\n\t\t\tfor (let i = 1; i < numVerts; i++) {\n\t\t\t\tconst x = vertices[i * 3 + 0];\n\t\t\t\tconst y = vertices[i * 3 + 1];\n\t\t\t\tconst z = vertices[i * 3 + 2];\n\t\t\t\tif (x < min.x) min.x = x;\n\t\t\t\tif (y < min.y) min.y = y;\n\t\t\t\tif (z < min.z) min.z = z;\n\t\t\t\tif (x > max.x) max.x = x;\n\t\t\t\tif (y > max.y) max.y = y;\n\t\t\t\tif (z > max.z) max.z = z;\n\t\t\t}\n\n\t\t\tthis.setMinMax(min, max);\n\t\t}\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\tconst sq = this._distanceToBoundingSphereSq(sphere);\n\n\t\tif (sq <= sphere.radius * sphere.radius) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_distanceToBoundingSphereSq(sphere) {\n\t\tconst boxMin = this.getMin();\n\t\tconst boxMax = this.getMax();\n\t\tlet sq = 0;\n\t\tconst axis = ['x', 'y', 'z'];\n\n\t\tfor (let i = 0; i < 3; ++i) {\n\t\t\tlet out = 0;\n\t\t\tconst pn = sphere.center[axis[i]];\n\t\t\tconst bMin = boxMin[axis[i]];\n\t\t\tconst bMax = boxMax[axis[i]];\n\t\t\tlet val = 0;\n\n\t\t\tif (pn < bMin) {\n\t\t\t\tval = bMin - pn;\n\t\t\t\tout += val * val;\n\t\t\t}\n\n\t\t\tif (pn > bMax) {\n\t\t\t\tval = pn - bMax;\n\t\t\t\tout += val * val;\n\t\t\t}\n\n\t\t\tsq += out;\n\t\t}\n\n\t\treturn sq;\n\t}\n\n\t_expand(expandMin, expandMax) {\n\t\ttmpVecA$2.add2(this.getMin(), expandMin);\n\t\ttmpVecB$1.add2(this.getMax(), expandMax);\n\t\tthis.setMinMax(tmpVecA$2, tmpVecB$1);\n\t}\n\n}\n\nconst tmpVecA$1 = new Vec3();\nconst tmpVecB = new Vec3();\n\nclass BoundingSphere {\n\tconstructor(center = new Vec3(), radius = 0.5) {\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\t}\n\n\tcontainsPoint(point) {\n\t\tconst lenSq = tmpVecA$1.sub2(point, this.center).lengthSq();\n\t\tconst r = this.radius;\n\t\treturn lenSq < r * r;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tconst m = tmpVecA$1.copy(ray.origin).sub(this.center);\n\t\tconst b = m.dot(tmpVecB.copy(ray.direction).normalize());\n\t\tconst c = m.dot(m) - this.radius * this.radius;\n\t\tif (c > 0 && b > 0) return null;\n\t\tconst discr = b * b - c;\n\t\tif (discr < 0) return false;\n\t\tconst t = Math.abs(-b - Math.sqrt(discr));\n\t\tif (point) point.copy(ray.direction).mulScalar(t).add(ray.origin);\n\t\treturn true;\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\ttmpVecA$1.sub2(sphere.center, this.center);\n\t\tconst totalRadius = sphere.radius + this.radius;\n\n\t\tif (tmpVecA$1.lengthSq() <= totalRadius * totalRadius) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n}\n\nconst BLEND_SUBTRACTIVE = 0;\nconst BLEND_ADDITIVE = 1;\nconst BLEND_NORMAL = 2;\nconst BLEND_NONE = 3;\nconst BLEND_PREMULTIPLIED = 4;\nconst BLEND_MULTIPLICATIVE = 5;\nconst BLEND_ADDITIVEALPHA = 6;\nconst BLEND_MULTIPLICATIVE2X = 7;\nconst BLEND_SCREEN = 8;\nconst BLEND_MIN = 9;\nconst BLEND_MAX = 10;\nconst FOG_NONE = 'none';\nconst FOG_LINEAR = 'linear';\nconst FOG_EXP = 'exp';\nconst FOG_EXP2 = 'exp2';\nconst FRESNEL_NONE = 0;\nconst FRESNEL_SCHLICK = 2;\nconst LAYER_HUD = 0;\nconst LAYER_GIZMO = 1;\nconst LAYER_FX = 2;\nconst LAYER_WORLD = 15;\nconst LAYERID_WORLD = 0;\nconst LAYERID_DEPTH = 1;\nconst LAYERID_SKYBOX = 2;\nconst LAYERID_IMMEDIATE = 3;\nconst LAYERID_UI = 4;\nconst LIGHTTYPE_DIRECTIONAL = 0;\nconst LIGHTTYPE_OMNI = 1;\nconst LIGHTTYPE_POINT = LIGHTTYPE_OMNI;\nconst LIGHTTYPE_SPOT = 2;\nconst LIGHTSHAPE_PUNCTUAL = 0;\nconst LIGHTSHAPE_RECT = 1;\nconst LIGHTSHAPE_DISK = 2;\nconst LIGHTSHAPE_SPHERE = 3;\nconst LIGHTFALLOFF_LINEAR = 0;\nconst LIGHTFALLOFF_INVERSESQUARED = 1;\nconst SHADOW_PCF3 = 0;\nconst SHADOW_DEPTH = 0;\nconst SHADOW_VSM8 = 1;\nconst SHADOW_VSM16 = 2;\nconst SHADOW_VSM32 = 3;\nconst SHADOW_PCF5 = 4;\nconst SHADOW_COUNT = 5;\nconst BLUR_BOX = 0;\nconst BLUR_GAUSSIAN = 1;\nconst PARTICLESORT_NONE = 0;\nconst PARTICLESORT_DISTANCE = 1;\nconst PARTICLESORT_NEWER_FIRST = 2;\nconst PARTICLESORT_OLDER_FIRST = 3;\nconst PARTICLEMODE_GPU = 0;\nconst PARTICLEMODE_CPU = 1;\nconst EMITTERSHAPE_BOX = 0;\nconst EMITTERSHAPE_SPHERE = 1;\nconst PARTICLEORIENTATION_SCREEN = 0;\nconst PARTICLEORIENTATION_WORLD = 1;\nconst PARTICLEORIENTATION_EMITTER = 2;\nconst PROJECTION_PERSPECTIVE = 0;\nconst PROJECTION_ORTHOGRAPHIC = 1;\nconst RENDERSTYLE_SOLID = 0;\nconst RENDERSTYLE_WIREFRAME = 1;\nconst RENDERSTYLE_POINTS = 2;\nconst CUBEPROJ_NONE = 0;\nconst CUBEPROJ_BOX = 1;\nconst SPECULAR_PHONG = 0;\nconst SPECULAR_BLINN = 1;\nconst DETAILMODE_MUL = 'mul';\nconst DETAILMODE_ADD = 'add';\nconst DETAILMODE_SCREEN = 'screen';\nconst DETAILMODE_OVERLAY = 'overlay';\nconst DETAILMODE_MIN = 'min';\nconst DETAILMODE_MAX = 'max';\nconst GAMMA_NONE = 0;\nconst GAMMA_SRGB = 1;\nconst GAMMA_SRGBFAST = 2;\nconst GAMMA_SRGBHDR = 3;\nconst TONEMAP_LINEAR = 0;\nconst TONEMAP_FILMIC = 1;\nconst TONEMAP_HEJL = 2;\nconst TONEMAP_ACES = 3;\nconst TONEMAP_ACES2 = 4;\nconst SPECOCC_NONE = 0;\nconst SPECOCC_AO = 1;\nconst SPECOCC_GLOSSDEPENDENT = 2;\nconst SHADERDEF_NOSHADOW = 1;\nconst SHADERDEF_SKIN = 2;\nconst SHADERDEF_UV0 = 4;\nconst SHADERDEF_UV1 = 8;\nconst SHADERDEF_VCOLOR = 16;\nconst SHADERDEF_INSTANCING = 32;\nconst SHADERDEF_LM = 64;\nconst SHADERDEF_DIRLM = 128;\nconst SHADERDEF_SCREENSPACE = 256;\nconst SHADERDEF_TANGENTS = 512;\nconst SHADERDEF_MORPH_POSITION = 1024;\nconst SHADERDEF_MORPH_NORMAL = 2048;\nconst SHADERDEF_MORPH_TEXTURE_BASED = 4096;\nconst LINEBATCH_WORLD = 0;\nconst LINEBATCH_OVERLAY = 1;\nconst LINEBATCH_GIZMO = 2;\nconst SHADOWUPDATE_NONE = 0;\nconst SHADOWUPDATE_THISFRAME = 1;\nconst SHADOWUPDATE_REALTIME = 2;\nconst SORTKEY_FORWARD = 0;\nconst SORTKEY_DEPTH = 1;\nconst MASK_DYNAMIC = 1;\nconst MASK_BAKED = 2;\nconst MASK_LIGHTMAP = 4;\nconst SHADER_FORWARD = 0;\nconst SHADER_FORWARDHDR = 1;\nconst SHADER_DEPTH = 2;\nconst SHADER_SHADOW = 3;\nconst SHADER_PICK = 18;\nconst SPRITE_RENDERMODE_SIMPLE = 0;\nconst SPRITE_RENDERMODE_SLICED = 1;\nconst SPRITE_RENDERMODE_TILED = 2;\nconst BAKE_COLOR = 0;\nconst BAKE_COLORDIR = 1;\nconst VIEW_CENTER = 0;\nconst VIEW_LEFT = 1;\nconst VIEW_RIGHT = 2;\nconst SORTMODE_NONE = 0;\nconst SORTMODE_MANUAL = 1;\nconst SORTMODE_MATERIALMESH = 2;\nconst SORTMODE_BACK2FRONT = 3;\nconst SORTMODE_FRONT2BACK = 4;\nconst SORTMODE_CUSTOM = 5;\nconst COMPUPDATED_INSTANCES = 1;\nconst COMPUPDATED_LIGHTS = 2;\nconst COMPUPDATED_CAMERAS = 4;\nconst COMPUPDATED_BLEND = 8;\nconst ASPECT_AUTO = 0;\nconst ASPECT_MANUAL = 1;\nconst ORIENTATION_HORIZONTAL = 0;\nconst ORIENTATION_VERTICAL = 1;\n\nconst _frustumPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\nclass Frustum {\n\tconstructor() {\n\t\tthis.planes = [];\n\n\t\tfor (let i = 0; i < 6; i++) this.planes[i] = [];\n\t}\n\n\tsetFromMat4(matrix) {\n\t\tconst vpm = matrix.data;\n\t\tlet plane;\n\t\tconst planes = this.planes;\n\t\tplane = planes[0];\n\t\tplane[0] = vpm[3] - vpm[0];\n\t\tplane[1] = vpm[7] - vpm[4];\n\t\tplane[2] = vpm[11] - vpm[8];\n\t\tplane[3] = vpm[15] - vpm[12];\n\t\tlet t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[1];\n\t\tplane[0] = vpm[3] + vpm[0];\n\t\tplane[1] = vpm[7] + vpm[4];\n\t\tplane[2] = vpm[11] + vpm[8];\n\t\tplane[3] = vpm[15] + vpm[12];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[2];\n\t\tplane[0] = vpm[3] + vpm[1];\n\t\tplane[1] = vpm[7] + vpm[5];\n\t\tplane[2] = vpm[11] + vpm[9];\n\t\tplane[3] = vpm[15] + vpm[13];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[3];\n\t\tplane[0] = vpm[3] - vpm[1];\n\t\tplane[1] = vpm[7] - vpm[5];\n\t\tplane[2] = vpm[11] - vpm[9];\n\t\tplane[3] = vpm[15] - vpm[13];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[4];\n\t\tplane[0] = vpm[3] - vpm[2];\n\t\tplane[1] = vpm[7] - vpm[6];\n\t\tplane[2] = vpm[11] - vpm[10];\n\t\tplane[3] = vpm[15] - vpm[14];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[5];\n\t\tplane[0] = vpm[3] + vpm[2];\n\t\tplane[1] = vpm[7] + vpm[6];\n\t\tplane[2] = vpm[11] + vpm[10];\n\t\tplane[3] = vpm[15] + vpm[14];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t}\n\n\tcontainsPoint(point) {\n\t\tlet p, plane;\n\n\t\tfor (p = 0; p < 6; p++) {\n\t\t\tplane = this.planes[p];\n\n\t\t\tif (plane[0] * point.x + plane[1] * point.y + plane[2] * point.z + plane[3] <= 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tcontainsSphere(sphere) {\n\t\tlet c = 0;\n\t\tlet d;\n\t\tlet p;\n\t\tconst sr = sphere.radius;\n\t\tconst sc = sphere.center;\n\t\tconst scx = sc.x;\n\t\tconst scy = sc.y;\n\t\tconst scz = sc.z;\n\t\tconst planes = this.planes;\n\t\tlet plane;\n\n\t\tfor (p = 0; p < 6; p++) {\n\t\t\tplane = planes[p];\n\t\t\td = plane[0] * scx + plane[1] * scy + plane[2] * scz + plane[3];\n\t\t\tif (d <= -sr) return 0;\n\t\t\tif (d > sr) c++;\n\t\t}\n\n\t\treturn c === 6 ? 2 : 1;\n\t}\n\n\tstatic getPoints(camera, near, far) {\n\t\tnear = near || camera._nearClip;\n\t\tfar = far || camera._farClip;\n\t\tconst fov = camera._fov * Math.PI / 180.0;\n\t\tlet y = camera._projection === PROJECTION_PERSPECTIVE ? Math.tan(fov / 2.0) * near : camera._orthoHeight;\n\t\tlet x = y * camera._aspectRatio;\n\t\tconst points = _frustumPoints;\n\t\tpoints[0].x = x;\n\t\tpoints[0].y = -y;\n\t\tpoints[0].z = -near;\n\t\tpoints[1].x = x;\n\t\tpoints[1].y = y;\n\t\tpoints[1].z = -near;\n\t\tpoints[2].x = -x;\n\t\tpoints[2].y = y;\n\t\tpoints[2].z = -near;\n\t\tpoints[3].x = -x;\n\t\tpoints[3].y = -y;\n\t\tpoints[3].z = -near;\n\n\t\tif (camera._projection === PROJECTION_PERSPECTIVE) {\n\t\t\ty = Math.tan(fov / 2.0) * far;\n\t\t\tx = y * camera._aspectRatio;\n\t\t}\n\n\t\tpoints[4].x = x;\n\t\tpoints[4].y = -y;\n\t\tpoints[4].z = -far;\n\t\tpoints[5].x = x;\n\t\tpoints[5].y = y;\n\t\tpoints[5].z = -far;\n\t\tpoints[6].x = -x;\n\t\tpoints[6].y = y;\n\t\tpoints[6].z = -far;\n\t\tpoints[7].x = -x;\n\t\tpoints[7].y = -y;\n\t\tpoints[7].z = -far;\n\t\treturn points;\n\t}\n\n}\n\nclass Ray {\n\tconstructor(origin = new Vec3(), direction = new Vec3(0, 0, -1)) {\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\t}\n\n\tset(origin, direction) {\n\t\tthis.origin.copy(origin);\n\t\tthis.direction.copy(direction);\n\t\treturn this;\n\t}\n\n}\n\nconst tmpRay = new Ray();\nconst tmpVec3$2 = new Vec3();\nconst tmpSphere = new BoundingSphere();\nconst tmpMat4$1 = new Mat4();\n\nclass OrientedBox {\n\tconstructor(worldTransform = new Mat4(), halfExtents = new Vec3(0.5, 0.5, 0.5)) {\n\t\tthis.halfExtents = halfExtents;\n\t\tthis._modelTransform = worldTransform.clone().invert();\n\t\tthis._worldTransform = worldTransform.clone();\n\t\tthis._aabb = new BoundingBox(new Vec3(), this.halfExtents);\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tthis._modelTransform.transformPoint(ray.origin, tmpRay.origin);\n\n\t\tthis._modelTransform.transformVector(ray.direction, tmpRay.direction);\n\n\t\tif (point) {\n\t\t\tconst result = this._aabb._intersectsRay(tmpRay, point);\n\n\t\t\ttmpMat4$1.copy(this._modelTransform).invert().transformPoint(point, point);\n\t\t\treturn result;\n\t\t}\n\n\t\treturn this._aabb._fastIntersectsRay(tmpRay);\n\t}\n\n\tcontainsPoint(point) {\n\t\tthis._modelTransform.transformPoint(point, tmpVec3$2);\n\n\t\treturn this._aabb.containsPoint(tmpVec3$2);\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\tthis._modelTransform.transformPoint(sphere.center, tmpSphere.center);\n\n\t\ttmpSphere.radius = sphere.radius;\n\n\t\tif (this._aabb.intersectsBoundingSphere(tmpSphere)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget worldTransform() {\n\t\treturn this._worldTransform;\n\t}\n\n\tset worldTransform(value) {\n\t\tthis._worldTransform.copy(value);\n\n\t\tthis._modelTransform.copy(value).invert();\n\t}\n\n}\n\nconst tmpVecA = new Vec3();\n\nclass Plane {\n\tconstructor(point = new Vec3(), normal = new Vec3(0, 0, 1)) {\n\t\tthis.normal = normal;\n\t\tthis.point = point;\n\t}\n\n\tintersectsLine(start, end, point) {\n\t\tconst d = -this.normal.dot(this.point);\n\t\tconst d0 = this.normal.dot(start) + d;\n\t\tconst d1 = this.normal.dot(end) + d;\n\t\tconst t = d0 / (d0 - d1);\n\t\tconst intersects = t >= 0 && t <= 1;\n\t\tif (intersects && point) point.lerp(start, end, t);\n\t\treturn intersects;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tconst pointToOrigin = tmpVecA.sub2(this.point, ray.origin);\n\t\tconst t = this.normal.dot(pointToOrigin) / this.normal.dot(ray.direction);\n\t\tconst intersects = t >= 0;\n\t\tif (intersects && point) point.copy(ray.direction).mulScalar(t).add(ray.origin);\n\t\treturn intersects;\n\t}\n\n}\n\nconst ADDRESS_REPEAT = 0;\nconst ADDRESS_CLAMP_TO_EDGE = 1;\nconst ADDRESS_MIRRORED_REPEAT = 2;\nconst BLENDMODE_ZERO = 0;\nconst BLENDMODE_ONE = 1;\nconst BLENDMODE_SRC_COLOR = 2;\nconst BLENDMODE_ONE_MINUS_SRC_COLOR = 3;\nconst BLENDMODE_DST_COLOR = 4;\nconst BLENDMODE_ONE_MINUS_DST_COLOR = 5;\nconst BLENDMODE_SRC_ALPHA = 6;\nconst BLENDMODE_SRC_ALPHA_SATURATE = 7;\nconst BLENDMODE_ONE_MINUS_SRC_ALPHA = 8;\nconst BLENDMODE_DST_ALPHA = 9;\nconst BLENDMODE_ONE_MINUS_DST_ALPHA = 10;\nconst BLENDEQUATION_ADD = 0;\nconst BLENDEQUATION_SUBTRACT = 1;\nconst BLENDEQUATION_REVERSE_SUBTRACT = 2;\nconst BLENDEQUATION_MIN = 3;\nconst BLENDEQUATION_MAX = 4;\nconst BUFFER_STATIC = 0;\nconst BUFFER_DYNAMIC = 1;\nconst BUFFER_STREAM = 2;\nconst BUFFER_GPUDYNAMIC = 3;\nconst CLEARFLAG_COLOR = 1;\nconst CLEARFLAG_DEPTH = 2;\nconst CLEARFLAG_STENCIL = 4;\nconst CUBEFACE_POSX = 0;\nconst CUBEFACE_NEGX = 1;\nconst CUBEFACE_POSY = 2;\nconst CUBEFACE_NEGY = 3;\nconst CUBEFACE_POSZ = 4;\nconst CUBEFACE_NEGZ = 5;\nconst CULLFACE_NONE = 0;\nconst CULLFACE_BACK = 1;\nconst CULLFACE_FRONT = 2;\nconst CULLFACE_FRONTANDBACK = 3;\nconst FILTER_NEAREST = 0;\nconst FILTER_LINEAR = 1;\nconst FILTER_NEAREST_MIPMAP_NEAREST = 2;\nconst FILTER_NEAREST_MIPMAP_LINEAR = 3;\nconst FILTER_LINEAR_MIPMAP_NEAREST = 4;\nconst FILTER_LINEAR_MIPMAP_LINEAR = 5;\nconst FUNC_NEVER = 0;\nconst FUNC_LESS = 1;\nconst FUNC_EQUAL = 2;\nconst FUNC_LESSEQUAL = 3;\nconst FUNC_GREATER = 4;\nconst FUNC_NOTEQUAL = 5;\nconst FUNC_GREATEREQUAL = 6;\nconst FUNC_ALWAYS = 7;\nconst INDEXFORMAT_UINT8 = 0;\nconst INDEXFORMAT_UINT16 = 1;\nconst INDEXFORMAT_UINT32 = 2;\nconst PIXELFORMAT_A8 = 0;\nconst PIXELFORMAT_L8 = 1;\nconst PIXELFORMAT_L8_A8 = 2;\nconst PIXELFORMAT_R5_G6_B5 = 3;\nconst PIXELFORMAT_R5_G5_B5_A1 = 4;\nconst PIXELFORMAT_R4_G4_B4_A4 = 5;\nconst PIXELFORMAT_R8_G8_B8 = 6;\nconst PIXELFORMAT_R8_G8_B8_A8 = 7;\nconst PIXELFORMAT_DXT1 = 8;\nconst PIXELFORMAT_DXT3 = 9;\nconst PIXELFORMAT_DXT5 = 10;\nconst PIXELFORMAT_RGB16F = 11;\nconst PIXELFORMAT_RGBA16F = 12;\nconst PIXELFORMAT_RGB32F = 13;\nconst PIXELFORMAT_RGBA32F = 14;\nconst PIXELFORMAT_R32F = 15;\nconst PIXELFORMAT_DEPTH = 16;\nconst PIXELFORMAT_DEPTHSTENCIL = 17;\nconst PIXELFORMAT_111110F = 18;\nconst PIXELFORMAT_SRGB = 19;\nconst PIXELFORMAT_SRGBA = 20;\nconst PIXELFORMAT_ETC1 = 21;\nconst PIXELFORMAT_ETC2_RGB = 22;\nconst PIXELFORMAT_ETC2_RGBA = 23;\nconst PIXELFORMAT_PVRTC_2BPP_RGB_1 = 24;\nconst PIXELFORMAT_PVRTC_2BPP_RGBA_1 = 25;\nconst PIXELFORMAT_PVRTC_4BPP_RGB_1 = 26;\nconst PIXELFORMAT_PVRTC_4BPP_RGBA_1 = 27;\nconst PIXELFORMAT_ASTC_4x4 = 28;\nconst PIXELFORMAT_ATC_RGB = 29;\nconst PIXELFORMAT_ATC_RGBA = 30;\nconst PRIMITIVE_POINTS = 0;\nconst PRIMITIVE_LINES = 1;\nconst PRIMITIVE_LINELOOP = 2;\nconst PRIMITIVE_LINESTRIP = 3;\nconst PRIMITIVE_TRIANGLES = 4;\nconst PRIMITIVE_TRISTRIP = 5;\nconst PRIMITIVE_TRIFAN = 6;\nconst SEMANTIC_POSITION = \"POSITION\";\nconst SEMANTIC_NORMAL = \"NORMAL\";\nconst SEMANTIC_TANGENT = \"TANGENT\";\nconst SEMANTIC_BLENDWEIGHT = \"BLENDWEIGHT\";\nconst SEMANTIC_BLENDINDICES = \"BLENDINDICES\";\nconst SEMANTIC_COLOR = \"COLOR\";\nconst SEMANTIC_TEXCOORD = \"TEXCOORD\";\nconst SEMANTIC_TEXCOORD0 = \"TEXCOORD0\";\nconst SEMANTIC_TEXCOORD1 = \"TEXCOORD1\";\nconst SEMANTIC_TEXCOORD2 = \"TEXCOORD2\";\nconst SEMANTIC_TEXCOORD3 = \"TEXCOORD3\";\nconst SEMANTIC_TEXCOORD4 = \"TEXCOORD4\";\nconst SEMANTIC_TEXCOORD5 = \"TEXCOORD5\";\nconst SEMANTIC_TEXCOORD6 = \"TEXCOORD6\";\nconst SEMANTIC_TEXCOORD7 = \"TEXCOORD7\";\nconst SEMANTIC_ATTR = \"ATTR\";\nconst SEMANTIC_ATTR0 = \"ATTR0\";\nconst SEMANTIC_ATTR1 = \"ATTR1\";\nconst SEMANTIC_ATTR2 = \"ATTR2\";\nconst SEMANTIC_ATTR3 = \"ATTR3\";\nconst SEMANTIC_ATTR4 = \"ATTR4\";\nconst SEMANTIC_ATTR5 = \"ATTR5\";\nconst SEMANTIC_ATTR6 = \"ATTR6\";\nconst SEMANTIC_ATTR7 = \"ATTR7\";\nconst SEMANTIC_ATTR8 = \"ATTR8\";\nconst SEMANTIC_ATTR9 = \"ATTR9\";\nconst SEMANTIC_ATTR10 = \"ATTR10\";\nconst SEMANTIC_ATTR11 = \"ATTR11\";\nconst SEMANTIC_ATTR12 = \"ATTR12\";\nconst SEMANTIC_ATTR13 = \"ATTR13\";\nconst SEMANTIC_ATTR14 = \"ATTR14\";\nconst SEMANTIC_ATTR15 = \"ATTR15\";\nconst SHADERTAG_MATERIAL = 1;\nconst STENCILOP_KEEP = 0;\nconst STENCILOP_ZERO = 1;\nconst STENCILOP_REPLACE = 2;\nconst STENCILOP_INCREMENT = 3;\nconst STENCILOP_INCREMENTWRAP = 4;\nconst STENCILOP_DECREMENT = 5;\nconst STENCILOP_DECREMENTWRAP = 6;\nconst STENCILOP_INVERT = 7;\nconst TEXTURELOCK_READ = 1;\nconst TEXTURELOCK_WRITE = 2;\nconst TEXTURETYPE_DEFAULT = 'default';\nconst TEXTURETYPE_RGBM = 'rgbm';\nconst TEXTURETYPE_RGBE = 'rgbe';\nconst TEXTURETYPE_SWIZZLEGGGR = 'swizzleGGGR';\nconst TEXHINT_NONE = 0;\nconst TEXHINT_SHADOWMAP = 1;\nconst TEXHINT_ASSET = 2;\nconst TEXHINT_LIGHTMAP = 3;\nconst TEXTUREPROJECTION_NONE = \"none\";\nconst TEXTUREPROJECTION_CUBE = \"cube\";\nconst TEXTUREPROJECTION_EQUIRECT = \"equirect\";\nconst TEXTUREPROJECTION_OCTAHEDRAL = \"octahedral\";\nconst TYPE_INT8 = 0;\nconst TYPE_UINT8 = 1;\nconst TYPE_INT16 = 2;\nconst TYPE_UINT16 = 3;\nconst TYPE_INT32 = 4;\nconst TYPE_UINT32 = 5;\nconst TYPE_FLOAT32 = 6;\nconst UNIFORMTYPE_BOOL = 0;\nconst UNIFORMTYPE_INT = 1;\nconst UNIFORMTYPE_FLOAT = 2;\nconst UNIFORMTYPE_VEC2 = 3;\nconst UNIFORMTYPE_VEC3 = 4;\nconst UNIFORMTYPE_VEC4 = 5;\nconst UNIFORMTYPE_IVEC2 = 6;\nconst UNIFORMTYPE_IVEC3 = 7;\nconst UNIFORMTYPE_IVEC4 = 8;\nconst UNIFORMTYPE_BVEC2 = 9;\nconst UNIFORMTYPE_BVEC3 = 10;\nconst UNIFORMTYPE_BVEC4 = 11;\nconst UNIFORMTYPE_MAT2 = 12;\nconst UNIFORMTYPE_MAT3 = 13;\nconst UNIFORMTYPE_MAT4 = 14;\nconst UNIFORMTYPE_TEXTURE2D = 15;\nconst UNIFORMTYPE_TEXTURECUBE = 16;\nconst UNIFORMTYPE_FLOATARRAY = 17;\nconst UNIFORMTYPE_TEXTURE2D_SHADOW = 18;\nconst UNIFORMTYPE_TEXTURECUBE_SHADOW = 19;\nconst UNIFORMTYPE_TEXTURE3D = 20;\nconst UNIFORMTYPE_VEC2ARRAY = 21;\nconst UNIFORMTYPE_VEC3ARRAY = 22;\nconst UNIFORMTYPE_VEC4ARRAY = 23;\nconst typedArrayTypes = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array];\nconst typedArrayTypesByteSize = [1, 1, 2, 2, 4, 4, 4];\nconst typedArrayToType = {\n\t\"Int8Array\": TYPE_INT8,\n\t\"Uint8Array\": TYPE_UINT8,\n\t\"Int16Array\": TYPE_INT16,\n\t\"Uint16Array\": TYPE_UINT16,\n\t\"Int32Array\": TYPE_INT32,\n\t\"Uint32Array\": TYPE_UINT32,\n\t\"Float32Array\": TYPE_FLOAT32\n};\nconst typedArrayIndexFormats = [Uint8Array, Uint16Array, Uint32Array];\nconst typedArrayIndexFormatsByteSize = [1, 2, 4];\nconst semanticToLocation = {};\nsemanticToLocation[SEMANTIC_POSITION] = 0;\nsemanticToLocation[SEMANTIC_NORMAL] = 1;\nsemanticToLocation[SEMANTIC_BLENDWEIGHT] = 2;\nsemanticToLocation[SEMANTIC_BLENDINDICES] = 3;\nsemanticToLocation[SEMANTIC_COLOR] = 4;\nsemanticToLocation[SEMANTIC_TEXCOORD0] = 5;\nsemanticToLocation[SEMANTIC_TEXCOORD1] = 6;\nsemanticToLocation[SEMANTIC_TEXCOORD2] = 7;\nsemanticToLocation[SEMANTIC_TEXCOORD3] = 8;\nsemanticToLocation[SEMANTIC_TEXCOORD4] = 9;\nsemanticToLocation[SEMANTIC_TEXCOORD5] = 10;\nsemanticToLocation[SEMANTIC_TEXCOORD6] = 11;\nsemanticToLocation[SEMANTIC_TEXCOORD7] = 12;\nsemanticToLocation[SEMANTIC_TANGENT] = 13;\nsemanticToLocation[SEMANTIC_ATTR0] = 0;\nsemanticToLocation[SEMANTIC_ATTR1] = 1;\nsemanticToLocation[SEMANTIC_ATTR2] = 2;\nsemanticToLocation[SEMANTIC_ATTR3] = 3;\nsemanticToLocation[SEMANTIC_ATTR4] = 4;\nsemanticToLocation[SEMANTIC_ATTR5] = 5;\nsemanticToLocation[SEMANTIC_ATTR6] = 6;\nsemanticToLocation[SEMANTIC_ATTR7] = 7;\nsemanticToLocation[SEMANTIC_ATTR8] = 8;\nsemanticToLocation[SEMANTIC_ATTR9] = 9;\nsemanticToLocation[SEMANTIC_ATTR10] = 10;\nsemanticToLocation[SEMANTIC_ATTR11] = 11;\nsemanticToLocation[SEMANTIC_ATTR12] = 12;\nsemanticToLocation[SEMANTIC_ATTR13] = 13;\nsemanticToLocation[SEMANTIC_ATTR14] = 14;\nsemanticToLocation[SEMANTIC_ATTR15] = 15;\n\nlet id$2 = 0;\n\nclass VertexBuffer {\n\tconstructor(graphicsDevice, format, numVertices, usage = BUFFER_STATIC, initialData) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.format = format;\n\t\tthis.numVertices = numVertices;\n\t\tthis.usage = usage;\n\t\tthis.id = id$2++;\n\t\tthis._vao = null;\n\t\tthis.instancing = false;\n\t\tthis.numBytes = format.verticesByteSize ? format.verticesByteSize : format.size * numVertices;\n\t\tgraphicsDevice._vram.vb += this.numBytes;\n\n\t\tif (initialData) {\n\t\t\tthis.setData(initialData);\n\t\t} else {\n\t\t\tthis.storage = new ArrayBuffer(this.numBytes);\n\t\t}\n\n\t\tthis.device.buffers.push(this);\n\t}\n\n\tdestroy() {\n\t\tconst device = this.device;\n\t\tconst idx = device.buffers.indexOf(this);\n\n\t\tif (idx !== -1) {\n\t\t\tdevice.buffers.splice(idx, 1);\n\t\t}\n\n\t\tif (this.bufferId) {\n\t\t\tconst gl = device.gl;\n\t\t\tdevice.boundVao = null;\n\t\t\tgl.bindVertexArray(null);\n\t\t\tgl.deleteBuffer(this.bufferId);\n\t\t\tdevice._vram.vb -= this.storage.byteLength;\n\t\t\tthis.bufferId = null;\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis.bufferId = undefined;\n\t\tthis._vao = null;\n\t}\n\n\tgetFormat() {\n\t\treturn this.format;\n\t}\n\n\tgetUsage() {\n\t\treturn this.usage;\n\t}\n\n\tgetNumVertices() {\n\t\treturn this.numVertices;\n\t}\n\n\tlock() {\n\t\treturn this.storage;\n\t}\n\n\tunlock() {\n\t\tconst gl = this.device.gl;\n\n\t\tif (!this.bufferId) {\n\t\t\tthis.bufferId = gl.createBuffer();\n\t\t}\n\n\t\tlet glUsage;\n\n\t\tswitch (this.usage) {\n\t\t\tcase BUFFER_STATIC:\n\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_DYNAMIC:\n\t\t\t\tglUsage = gl.DYNAMIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_STREAM:\n\t\t\t\tglUsage = gl.STREAM_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_GPUDYNAMIC:\n\t\t\t\tif (this.device.webgl2) {\n\t\t\t\t\tglUsage = gl.DYNAMIC_COPY;\n\t\t\t\t} else {\n\t\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.bufferId);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.storage, glUsage);\n\t}\n\n\tsetData(data) {\n\t\tif (data.byteLength !== this.numBytes) {\n\t\t\tconsole.error(\"VertexBuffer: wrong initial data size: expected \" + this.numBytes + \", got \" + data.byteLength);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.storage = data;\n\t\tthis.unlock();\n\t\treturn true;\n\t}\n\n}\n\nfunction hashCode(str) {\n\tvar hash = 0;\n\n\tfor (var i = 0, len = str.length; i < len; i++) {\n\t\thash = (hash << 5) - hash + str.charCodeAt(i);\n\t\thash |= 0;\n\t}\n\n\treturn hash;\n}\n\nclass VertexFormat {\n\tconstructor(graphicsDevice, description, vertexCount) {\n\t\tthis.elements = [];\n\t\tthis.hasUv0 = false;\n\t\tthis.hasUv1 = false;\n\t\tthis.hasColor = false;\n\t\tthis.hasTangents = false;\n\t\tthis.verticesByteSize = 0;\n\t\tthis.vertexCount = vertexCount;\n\t\tthis.interleaved = vertexCount === undefined;\n\t\tthis.size = description.reduce((total, desc) => {\n\t\t\treturn total + Math.ceil(desc.components * typedArrayTypesByteSize[desc.type] / 4) * 4;\n\t\t}, 0);\n\t\tlet offset = 0,\n\t\t\t\telementSize;\n\n\t\tfor (var i = 0, len = description.length; i < len; i++) {\n\t\t\tconst elementDesc = description[i];\n\t\t\telementSize = elementDesc.components * typedArrayTypesByteSize[elementDesc.type];\n\n\t\t\tif (vertexCount) {\n\t\t\t\toffset = math.roundUp(offset, elementSize);\n\t\t\t}\n\n\t\t\tconst element = {\n\t\t\t\tname: elementDesc.semantic,\n\t\t\t\toffset: vertexCount ? offset : elementDesc.hasOwnProperty('offset') ? elementDesc.offset : offset,\n\t\t\t\tstride: vertexCount ? elementSize : elementDesc.hasOwnProperty('stride') ? elementDesc.stride : this.size,\n\t\t\t\tdataType: elementDesc.type,\n\t\t\t\tnumComponents: elementDesc.components,\n\t\t\t\tnormalize: elementDesc.normalize === undefined ? false : elementDesc.normalize,\n\t\t\t\tsize: elementSize\n\t\t\t};\n\t\t\tthis.elements.push(element);\n\n\t\t\tif (vertexCount) {\n\t\t\t\toffset += elementSize * vertexCount;\n\t\t\t} else {\n\t\t\t\toffset += Math.ceil(elementSize / 4) * 4;\n\t\t\t}\n\n\t\t\tif (elementDesc.semantic === SEMANTIC_TEXCOORD0) {\n\t\t\t\tthis.hasUv0 = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_TEXCOORD1) {\n\t\t\t\tthis.hasUv1 = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_COLOR) {\n\t\t\t\tthis.hasColor = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_TANGENT) {\n\t\t\t\tthis.hasTangents = true;\n\t\t\t}\n\t\t}\n\n\t\tif (vertexCount) {\n\t\t\tthis.verticesByteSize = offset;\n\t\t}\n\n\t\tthis.update();\n\t}\n\n\tstatic init(graphicsDevice) {\n\t\tconst formatDesc = [{\n\t\t\tsemantic: SEMANTIC_TEXCOORD2,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD3,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD4,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD5,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tVertexFormat._defaultInstancingFormat = new VertexFormat(graphicsDevice, formatDesc);\n\t}\n\n\tstatic get defaultInstancingFormat() {\n\t\treturn VertexFormat._defaultInstancingFormat;\n\t}\n\n\tupdate() {\n\t\tthis._evaluateHash();\n\t}\n\n\t_evaluateHash() {\n\t\tlet stringElementBatch;\n\t\tconst stringElementsBatch = [];\n\t\tlet stringElementRender;\n\t\tconst stringElementsRender = [];\n\t\tconst len = this.elements.length;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst element = this.elements[i];\n\t\t\tstringElementBatch = element.name;\n\t\t\tstringElementBatch += element.dataType;\n\t\t\tstringElementBatch += element.numComponents;\n\t\t\tstringElementBatch += element.normalize;\n\t\t\tstringElementsBatch.push(stringElementBatch);\n\t\t\tstringElementRender = stringElementBatch;\n\t\t\tstringElementRender += element.offset;\n\t\t\tstringElementRender += element.stride;\n\t\t\tstringElementRender += element.size;\n\t\t\tstringElementsRender.push(stringElementRender);\n\t\t}\n\n\t\tstringElementsBatch.sort();\n\t\tthis.batchingHash = hashCode(stringElementsBatch.join());\n\t\tthis.renderingingHash = hashCode(stringElementsRender.join());\n\t}\n\n}\n\nVertexFormat._defaultInstancingFormat = null;\n\nfunction set1(a) {\n\tthis.array[this.index] = a;\n}\n\nfunction set2(a, b) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n}\n\nfunction set3(a, b, c) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n\tthis.array[this.index + 2] = c;\n}\n\nfunction set4(a, b, c, d) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n\tthis.array[this.index + 2] = c;\n\tthis.array[this.index + 3] = d;\n}\n\nfunction arraySet1(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n}\n\nfunction arraySet2(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n}\n\nfunction arraySet3(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n\tthis.array[index + 2] = inputArray[inputIndex + 2];\n}\n\nfunction arraySet4(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n\tthis.array[index + 2] = inputArray[inputIndex + 2];\n\tthis.array[index + 3] = inputArray[inputIndex + 3];\n}\n\nfunction arrayGet1(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n}\n\nfunction arrayGet2(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n}\n\nfunction arrayGet3(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n\toutputArray[outputIndex + 2] = this.array[offset + 2];\n}\n\nfunction arrayGet4(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n\toutputArray[outputIndex + 2] = this.array[offset + 2];\n\toutputArray[outputIndex + 3] = this.array[offset + 3];\n}\n\nclass VertexIteratorAccessor {\n\tconstructor(buffer, vertexElement, vertexFormat) {\n\t\tthis.index = 0;\n\t\tthis.numComponents = vertexElement.numComponents;\n\n\t\tif (vertexFormat.interleaved) {\n\t\t\tthis.array = new typedArrayTypes[vertexElement.dataType](buffer, vertexElement.offset);\n\t\t} else {\n\t\t\tthis.array = new typedArrayTypes[vertexElement.dataType](buffer, vertexElement.offset, vertexFormat.vertexCount * vertexElement.numComponents);\n\t\t}\n\n\t\tthis.stride = vertexElement.stride / this.array.constructor.BYTES_PER_ELEMENT;\n\n\t\tswitch (vertexElement.numComponents) {\n\t\t\tcase 1:\n\t\t\t\tthis.set = set1;\n\t\t\t\tthis.getToArray = arrayGet1;\n\t\t\t\tthis.setFromArray = arraySet1;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tthis.set = set2;\n\t\t\t\tthis.getToArray = arrayGet2;\n\t\t\t\tthis.setFromArray = arraySet2;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tthis.set = set3;\n\t\t\t\tthis.getToArray = arrayGet3;\n\t\t\t\tthis.setFromArray = arraySet3;\n\t\t\t\tbreak;\n\n\t\t\tcase 4:\n\t\t\t\tthis.set = set4;\n\t\t\t\tthis.getToArray = arrayGet4;\n\t\t\t\tthis.setFromArray = arraySet4;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tget(offset) {\n\t\treturn this.array[this.index + offset];\n\t}\n\n\tset(a, b, c, d) {}\n\n\tgetToArray(offset, outputArray, outputIndex) {}\n\n\tsetFromArray(index, inputArray, inputIndex) {}\n\n}\n\nclass VertexIterator {\n\tconstructor(vertexBuffer) {\n\t\tthis.vertexBuffer = vertexBuffer;\n\t\tthis.vertexFormatSize = vertexBuffer.getFormat().size;\n\t\tthis.buffer = this.vertexBuffer.lock();\n\t\tthis.accessors = [];\n\t\tthis.element = {};\n\t\tconst vertexFormat = this.vertexBuffer.getFormat();\n\n\t\tfor (let i = 0; i < vertexFormat.elements.length; i++) {\n\t\t\tconst vertexElement = vertexFormat.elements[i];\n\t\t\tthis.accessors[i] = new VertexIteratorAccessor(this.buffer, vertexElement, vertexFormat);\n\t\t\tthis.element[vertexElement.name] = this.accessors[i];\n\t\t}\n\t}\n\n\tnext(count = 1) {\n\t\tlet i = 0;\n\t\tconst accessors = this.accessors;\n\t\tconst numAccessors = this.accessors.length;\n\n\t\twhile (i < numAccessors) {\n\t\t\tconst accessor = accessors[i++];\n\t\t\taccessor.index += count * accessor.stride;\n\t\t}\n\t}\n\n\tend() {\n\t\tthis.vertexBuffer.unlock();\n\t}\n\n\twriteData(semantic, data, numVertices) {\n\t\tconst element = this.element[semantic];\n\n\t\tif (element) {\n\t\t\tif (numVertices > this.vertexBuffer.numVertices) {\n\t\t\t\tnumVertices = this.vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tconst numComponents = element.numComponents;\n\n\t\t\tif (this.vertexBuffer.getFormat().interleaved) {\n\t\t\t\tlet index = 0;\n\n\t\t\t\tfor (let i = 0; i < numVertices; i++) {\n\t\t\t\t\telement.setFromArray(index, data, i * numComponents);\n\t\t\t\t\tindex += element.stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (data.length > numVertices * numComponents) {\n\t\t\t\t\tconst copyCount = numVertices * numComponents;\n\n\t\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\t\tdata = data.subarray(0, copyCount);\n\t\t\t\t\t\telement.array.set(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0; i < copyCount; i++) element.array[i] = data[i];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.array.set(data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treadData(semantic, data) {\n\t\tconst element = this.element[semantic];\n\t\tlet count = 0;\n\n\t\tif (element) {\n\t\t\tcount = this.vertexBuffer.numVertices;\n\t\t\tlet i;\n\t\t\tconst numComponents = element.numComponents;\n\n\t\t\tif (this.vertexBuffer.getFormat().interleaved) {\n\t\t\t\tif (Array.isArray(data)) data.length = 0;\n\t\t\t\telement.index = 0;\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\t\telement.getToArray(offset, data, i * numComponents);\n\t\t\t\t\toffset += element.stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\tdata.set(element.array);\n\t\t\t\t} else {\n\t\t\t\t\tdata.length = 0;\n\t\t\t\t\tconst copyCount = count * numComponents;\n\n\t\t\t\t\tfor (i = 0; i < copyCount; i++) data[i] = element.array[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nlet _postEffectQuadVB = null;\nconst _postEffectQuadDraw = {\n\ttype: PRIMITIVE_TRISTRIP,\n\tbase: 0,\n\tcount: 4,\n\tindexed: false\n};\n\nfunction drawQuadWithShader(device, target, shader, rect, scissorRect, useBlend = false) {\n\tif (_postEffectQuadVB === null) {\n\t\tconst vertexFormat = new VertexFormat(device, [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 2,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}]);\n\t\t_postEffectQuadVB = new VertexBuffer(device, vertexFormat, 4);\n\t\tconst iterator = new VertexIterator(_postEffectQuadVB);\n\t\titerator.element[SEMANTIC_POSITION].set(-1.0, -1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(1.0, -1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(-1.0, 1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(1.0, 1.0);\n\t\titerator.end();\n\t}\n\n\tconst oldRt = device.renderTarget;\n\tdevice.setRenderTarget(target);\n\tdevice.updateBegin();\n\tlet x, y, w, h;\n\tlet sx, sy, sw, sh;\n\n\tif (!rect) {\n\t\tw = target ? target.width : device.width;\n\t\th = target ? target.height : device.height;\n\t\tx = 0;\n\t\ty = 0;\n\t} else {\n\t\tx = rect.x;\n\t\ty = rect.y;\n\t\tw = rect.z;\n\t\th = rect.w;\n\t}\n\n\tif (!scissorRect) {\n\t\tsx = x;\n\t\tsy = y;\n\t\tsw = w;\n\t\tsh = h;\n\t} else {\n\t\tsx = scissorRect.x;\n\t\tsy = scissorRect.y;\n\t\tsw = scissorRect.z;\n\t\tsh = scissorRect.w;\n\t}\n\n\tconst oldVx = device.vx;\n\tconst oldVy = device.vy;\n\tconst oldVw = device.vw;\n\tconst oldVh = device.vh;\n\tdevice.setViewport(x, y, w, h);\n\tconst oldSx = device.sx;\n\tconst oldSy = device.sy;\n\tconst oldSw = device.sw;\n\tconst oldSh = device.sh;\n\tdevice.setScissor(sx, sy, sw, sh);\n\tconst oldDepthTest = device.getDepthTest();\n\tconst oldDepthWrite = device.getDepthWrite();\n\tconst oldCullMode = device.getCullMode();\n\tconst oldWR = device.writeRed;\n\tconst oldWG = device.writeGreen;\n\tconst oldWB = device.writeBlue;\n\tconst oldWA = device.writeAlpha;\n\tdevice.setDepthTest(false);\n\tdevice.setDepthWrite(false);\n\tdevice.setCullMode(CULLFACE_NONE);\n\tdevice.setColorWrite(true, true, true, true);\n\tif (!useBlend) device.setBlending(false);\n\tdevice.setVertexBuffer(_postEffectQuadVB, 0);\n\tdevice.setShader(shader);\n\tdevice.draw(_postEffectQuadDraw);\n\tdevice.setDepthTest(oldDepthTest);\n\tdevice.setDepthWrite(oldDepthWrite);\n\tdevice.setCullMode(oldCullMode);\n\tdevice.setColorWrite(oldWR, oldWG, oldWB, oldWA);\n\tdevice.updateEnd();\n\tdevice.setRenderTarget(oldRt);\n\tdevice.updateBegin();\n\tdevice.setViewport(oldVx, oldVy, oldVw, oldVh);\n\tdevice.setScissor(oldSx, oldSy, oldSw, oldSh);\n}\n\nfunction destroyPostEffectQuad() {\n\tif (_postEffectQuadVB) {\n\t\t_postEffectQuadVB.destroy();\n\n\t\t_postEffectQuadVB = null;\n\t}\n}\n\nfunction drawTexture(device, texture, target, shader, rect, scissorRect, useBlend = false) {\n\tshader = shader || device.getCopyShader();\n\tdevice.constantTexSource.setValue(texture);\n\tdrawQuadWithShader(device, target, shader, rect, scissorRect, useBlend);\n}\n\nclass Shader {\n\tconstructor(graphicsDevice, definition) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.definition = definition;\n\t\tthis.init();\n\t\tthis.device.createShader(this);\n\t}\n\n\tinit() {\n\t\tthis.attributes = [];\n\t\tthis.uniforms = [];\n\t\tthis.samplers = [];\n\t\tthis.ready = false;\n\t\tthis.failed = false;\n\t}\n\n\tdestroy() {\n\t\tthis.device.destroyShader(this);\n\t}\n\n\tloseContext() {\n\t\tthis.init();\n\t}\n\n}\n\nvar alphaTestPS = \"uniform float alpha_ref;\\nvoid alphaTest(float a) {\\n\\tif (a < alpha_ref) discard;\\n}\\n\";\n\nvar ambientConstantPS = \"void addAmbient() {\\n\\tdDiffuseLight += light_globalAmbient;\\n}\\n\";\n\nvar ambientPrefilteredCubePS = \"#ifndef PMREM4\\n#define PMREM4\\nuniform samplerCube texture_prefilteredCubeMap4;\\n#endif\\nvoid addAmbient() {\\n\\tvec3 fixedReflDir = fixSeamsStatic(cubeMapRotate(dNormalW), 1.0 - 1.0 / 4.0);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tdDiffuseLight += processEnvironment($DECODE(textureCube(texture_prefilteredCubeMap4, fixedReflDir)).rgb);\\n}\\n\";\n\nvar ambientPrefilteredCubeLodPS = \"#ifndef PMREM4\\n#define PMREM4\\n#extension GL_EXT_shader_texture_lod : enable\\nuniform samplerCube texture_prefilteredCubeMap128;\\n#endif\\nvoid addAmbient() {\\n\\tvec3 fixedReflDir = fixSeamsStatic(cubeMapRotate(dNormalW), 1.0 - 1.0 / 4.0);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tdDiffuseLight += processEnvironment($DECODE( textureCubeLodEXT(texture_prefilteredCubeMap128, fixedReflDir, 5.0) ).rgb);\\n}\\n\";\n\nvar ambientSHPS = \"uniform vec3 ambientSH[9];\\nvoid addAmbient() {\\n\\tvec3 n = cubeMapRotate(dNormalW);\\n\\tvec3 color =\\n\\t\\tambientSH[0] +\\n\\t\\tambientSH[1] * n.x +\\n\\t\\tambientSH[2] * n.y +\\n\\t\\tambientSH[3] * n.z +\\n\\t\\tambientSH[4] * n.x * n.z +\\n\\t\\tambientSH[5] * n.z * n.y +\\n\\t\\tambientSH[6] * n.y * n.x +\\n\\t\\tambientSH[7] * (3.0 * n.z * n.z - 1.0) +\\n\\t\\tambientSH[8] * (n.x * n.x - n.y * n.y);\\n\\tdDiffuseLight += processEnvironment(max(color, vec3(0.0)));\\n}\\n\";\n\nvar aoPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_aoMap;\\n#endif\\nvoid applyAO() {\\n\\tdAo = 1.0;\\n\\t#ifdef MAPTEXTURE\\n\\tdAo *= texture2D(texture_aoMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAo *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdDiffuseLight *= dAo;\\n}\\n\";\n\nvar aoSpecOccPS = \"uniform float material_occludeSpecularIntensity;\\nvoid occludeSpecular() {\\n\\tfloat specPow = exp2(dGlossiness * 11.0);\\n\\tfloat specOcc = saturate(pow(dot(dNormalW, dViewDirW) + dAo, 0.01*specPow) - 1.0 + dAo);\\n\\tspecOcc = mix(1.0, specOcc, material_occludeSpecularIntensity);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccConstPS = \"void occludeSpecular() {\\n\\tfloat specPow = exp2(dGlossiness * 11.0);\\n\\tfloat specOcc = saturate(pow(dot(dNormalW, dViewDirW) + dAo, 0.01*specPow) - 1.0 + dAo);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccConstSimplePS = \"void occludeSpecular() {\\n\\tfloat specOcc = dAo;\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccSimplePS = \"uniform float material_occludeSpecularIntensity;\\nvoid occludeSpecular() {\\n\\tfloat specOcc = mix(1.0, dAo, material_occludeSpecularIntensity);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar bakeDirLmEndPS = \"\\tvec4 dirLm = texture2D(texture_dirLightMap, vUv1);\\n\\tif (bakeDir > 0.5) {\\n\\t\\tif (dAtten > 0.00001) {\\n\\t\\t\\tdirLm.xyz = dirLm.xyz * 2.0 - vec3(1.0);\\n\\t\\t\\tdAtten = saturate(dAtten);\\n\\t\\t\\tgl_FragColor.rgb = normalize(dLightDirNormW.xyz*dAtten + dirLm.xyz*dirLm.w) * 0.5 + vec3(0.5);\\n\\t\\t\\tgl_FragColor.a = dirLm.w + dAtten;\\n\\t\\t\\tgl_FragColor.a = max(gl_FragColor.a, 1.0 / 255.0);\\n\\t\\t} else {\\n\\t\\t\\tgl_FragColor = dirLm;\\n\\t\\t}\\n\\t} else {\\n\\t\\tgl_FragColor.rgb = dirLm.xyz;\\n\\t\\tgl_FragColor.a = max(dirLm.w, dAtten > 0.00001? (1.0/255.0) : 0.0);\\n\\t}\\n\";\n\nvar bakeLmEndPS = \"\\tgl_FragColor.rgb = dDiffuseLight;\\n\\tgl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(0.5));\\n\\tgl_FragColor.rgb /= 8.0;\\n\\tgl_FragColor.a = clamp( max( max( gl_FragColor.r, gl_FragColor.g ), max( gl_FragColor.b, 1.0 / 255.0 ) ), 0.0,1.0 );\\n\\tgl_FragColor.a = ceil(gl_FragColor.a * 255.0) / 255.0;\\n\\tgl_FragColor.rgb /= gl_FragColor.a;\\n\";\n\nvar basePS = \"uniform vec3 view_position;\\nuniform vec3 light_globalAmbient;\\nfloat square(float x) {\\n\\treturn x*x;\\n}\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 saturate(vec3 x) {\\n\\treturn clamp(x, vec3(0.0), vec3(1.0));\\n}\\n\";\n\nvar baseVS = \"attribute vec3 vertex_position;\\nattribute vec3 vertex_normal;\\nattribute vec4 vertex_tangent;\\nattribute vec2 vertex_texCoord0;\\nattribute vec2 vertex_texCoord1;\\nattribute vec4 vertex_color;\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\nuniform mat3 matrix_normal;\\nvec3 dPositionW;\\nmat4 dModelMatrix;\\nmat3 dNormalMatrix;\\n\";\n\nvar baseNineSlicedPS = \"#define NINESLICED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\nvec2 nineSlicedUv;\\n\";\n\nvar baseNineSlicedVS = \"#define NINESLICED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\n\";\n\nvar baseNineSlicedTiledPS = \"#define NINESLICED\\n#define NINESLICETILED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\nvec2 nineSlicedUv;\\n\";\n\nvar biasConstPS = \"#define SHADOWBIAS\\nfloat getShadowBias(float resolution, float maxBias) {\\n\\treturn maxBias;\\n}\\n\";\n\nvar blurVSMPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec2 pixelOffset;\\n#ifdef GAUSS\\nuniform float weight[SAMPLES];\\n#endif\\n#ifdef PACKED\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nvec2 encodeFloatRG( float v ) {\\n\\tvec2 enc = vec2(1.0, 255.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\\treturn enc;\\n}\\n#endif\\nvoid main(void) {\\n\\tvec3 moments = vec3(0.0);\\n\\tvec2 uv = vUv0 - pixelOffset * (float(SAMPLES) * 0.5);\\n\\tfor (int i=0; i<SAMPLES; i++) {\\n\\t\\tvec4 c = texture2D(source, uv + pixelOffset * float(i));\\n\\t\\t#ifdef PACKED\\n\\t\\tc.xy = vec2(decodeFloatRG(c.xy), decodeFloatRG(c.zw));\\n\\t\\t#endif\\n\\t\\t#ifdef GAUSS\\n\\t\\tmoments += c.xyz * weight[i];\\n\\t\\t#else\\n\\t\\tmoments += c.xyz;\\n\\t\\t#endif\\n\\t}\\n\\t#ifndef GAUSS\\n\\tmoments /= float(SAMPLES);\\n\\t#endif\\n\\t#ifdef PACKED\\n\\tgl_FragColor = vec4(encodeFloatRG(moments.x), encodeFloatRG(moments.y));\\n\\t#else\\n\\tgl_FragColor = vec4(moments.x, moments.y, moments.z, 1.0);\\n\\t#endif\\n}\\n\";\n\nvar clearCoatPS = \"#ifdef MAPFLOAT\\nuniform float material_clearCoat;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatMap;\\n#endif\\nvoid getClearCoat() {\\n\\tccSpecularity = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tccSpecularity *= material_clearCoat;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tccSpecularity *= texture2D(texture_clearCoatMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tccSpecularity *= saturate(vVertexColor.$VC);\\n\\t#endif\\n}\\n\";\n\nvar clearCoatGlossPS = \"#ifdef MAPFLOAT\\nuniform float material_clearCoatGlossiness;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatGlossMap;\\n#endif\\nvoid getClearCoatGlossiness() {\\n\\tccGlossiness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tccGlossiness *= material_clearCoatGlossiness;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tccGlossiness *= texture2D(texture_clearCoatGlossMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tccGlossiness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tccGlossiness += 0.0000001;\\n}\\n\";\n\nvar clearCoatNormalPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatNormalMap;\\nuniform float material_clearCoatBumpiness;\\n#endif\\nvoid getClearCoatNormal() {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_clearCoatNormalMap, $UV));\\n\\tnormalMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalMap, material_clearCoatBumpiness));\\n\\tccNormalW = dTBN * normalMap;\\n\\t#else\\n\\tccNormalW = normalize(dVertexNormalW);\\n\\t#endif\\n\\tccReflDirW = normalize(-reflect(dViewDirW, ccNormalW));\\n}\\n\";\n\nvar clusteredLightLoopPS = \"\\nvec3 cellCoords = floor((vPositionW - clusterBoundsMin) * clusterCellsCountByBoundsSize);\\nif (!(any(lessThan(cellCoords, vec3(0.0))) || any(greaterThanEqual(cellCoords, clusterCellsMax)))) {\\n\\tfloat cellIndex = dot(clusterCellsDot, cellCoords);\\n\\tfloat clusterV = floor(cellIndex * clusterTextureSize.y);\\n\\tfloat clusterU = cellIndex - (clusterV * clusterTextureSize.x);\\n\\tclusterV = (clusterV + 0.5) * clusterTextureSize.z;\\n\\tconst float maxLightCells = 256.0 / 4.0;\\n\\tfor (float lightCellIndex = 0.5; lightCellIndex < maxLightCells; lightCellIndex++) {\\n\\t\\tvec4 lightIndices = texture2D(clusterWorldTexture, vec2(clusterTextureSize.y * (clusterU + lightCellIndex), clusterV));\\n\\t\\tvec4 indices = lightIndices * 255.0;\\n\\t\\tif (indices.x <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.x);\\n\\t\\tif (indices.y <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.y);\\n\\t\\tif (indices.z <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.z);\\n\\t\\tif (indices.w <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.w);\\n\\t\\tif (lightCellIndex > clusterPixelsPerCell) {\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n}\\n\";\n\nvar clusteredLightPS = \"uniform sampler2D clusterWorldTexture;\\nuniform sampler2D lightsTexture8;\\nuniform highp sampler2D lightsTextureFloat;\\nuniform float clusterPixelsPerCell;\\nuniform vec3 clusterCellsCountByBoundsSize;\\nuniform vec4 lightsTextureInvSize;\\nuniform vec3 clusterTextureSize;\\nuniform vec3 clusterBoundsMin;\\nuniform vec3 clusterBoundsDelta;\\nuniform vec3 clusterCellsDot;\\nuniform vec3 clusterCellsMax;\\nuniform vec2 clusterCompressionLimit0;\\nfloat DecodeClusterFloat4(vec4 data) {\\n\\treturn dot(data, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));\\n}\\nfloat DecodeClusterFloat2(vec2 data) {\\n\\treturn dot(data, vec2(1.0, 1.0 / 255.0));\\n}\\nvoid EvaluateClusterLight(float lightIndex) {\\n\\tfloat lightV = (lightIndex + 0.5) * lightsTextureInvSize.w;\\n\\tvec4 lightInfo = texture2D(lightsTexture8, vec2(0.5 * lightsTextureInvSize.z, lightV));\\n\\tfloat lightType = lightInfo.x;\\n\\tfloat lightShape = lightInfo.y;\\n\\tfloat falloffMode = lightInfo.z;\\n\\tvec4 colorA = texture2D(lightsTexture8, vec2(1.5 * lightsTextureInvSize.z, lightV));\\n\\tvec4 colorB = texture2D(lightsTexture8, vec2(2.5 * lightsTextureInvSize.z, lightV));\\n\\tvec3 lightColor = vec3(\\n\\t\\tDecodeClusterFloat2(colorA.xy),\\n\\t\\tDecodeClusterFloat2(colorA.zw),\\n\\t\\tDecodeClusterFloat2(colorB.xy)\\n\\t) * clusterCompressionLimit0.y;\\n\\tvec4 coneAngle = texture2D(lightsTexture8, vec2(3.5 * lightsTextureInvSize.z, lightV));\\n\\tfloat innerConeAngleCos = DecodeClusterFloat2(coneAngle.xy) * 2.0 - 1.0;\\n\\tfloat outerConeAngleCos = DecodeClusterFloat2(coneAngle.zw) * 2.0 - 1.0;\\n\\t#ifdef CLUSTER_TEXTURE_FLOAT\\n\\t\\tvec4 lightPosRange = texture2D(lightsTextureFloat, vec2(0.5 * lightsTextureInvSize.x, lightV));\\n\\t\\tvec3 lightPos = lightPosRange.xyz;\\n\\t\\tfloat range = lightPosRange.w;\\n\\t\\tvec4 lightDir_Unused = texture2D(lightsTextureFloat, vec2(1.5 * lightsTextureInvSize.x, lightV));\\n\\t\\tvec3 lightDir = lightDir_Unused.xyz;\\n\\t#else\\n\\t\\tvec4 encPosX = texture2D(lightsTexture8, vec2(4.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encPosY = texture2D(lightsTexture8, vec2(5.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encPosZ = texture2D(lightsTexture8, vec2(6.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec3 lightPos = vec3(\\n\\t\\t\\tDecodeClusterFloat4(encPosX),\\n\\t\\t\\tDecodeClusterFloat4(encPosY),\\n\\t\\t\\tDecodeClusterFloat4(encPosZ)\\n\\t\\t) * clusterBoundsDelta + clusterBoundsMin;\\n\\t\\tvec4 encRange = texture2D(lightsTexture8, vec2(7.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tfloat range = DecodeClusterFloat4(encRange) * clusterCompressionLimit0.x;\\n\\t\\tvec4 encDirX = texture2D(lightsTexture8, vec2(8.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encDirY = texture2D(lightsTexture8, vec2(9.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encDirZ = texture2D(lightsTexture8, vec2(10.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec3 lightDir = vec3(\\n\\t\\t\\tDecodeClusterFloat4(encDirX),\\n\\t\\t\\tDecodeClusterFloat4(encDirY),\\n\\t\\t\\tDecodeClusterFloat4(encDirZ)\\n\\t\\t) * 2.0 - 1.0;\\n\\t#endif\\n\\tgetLightDirPoint(lightPos);\\n\\tdAtten = getFalloffLinear(range);\\n\\tif (dAtten > 0.00001) {\\n\\t\\tif (lightType > 0.5) {\\n\\t\\t\\tdAtten *= getSpotEffect(lightDir, innerConeAngleCos, outerConeAngleCos);\\n\\t\\t}\\n\\t\\tdAtten *= getLightDiffuse();\\n\\t\\tdDiffuseLight += dAtten * lightColor;\\n\\t}\\n}\\n\";\n\nvar combineClearCoatPS = \"vec3 combineColorCC() {\\n\\treturn combineColor()+(ccSpecularLight*ccSpecularity+ccReflection.rgb*ccSpecularity*ccReflection.a);\\n}\\n\";\n\nvar combineDiffusePS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight;\\n}\\n\";\n\nvar combineDiffuseSpecularPS = \"vec3 combineColor() {\\n\\treturn mix(dAlbedo * dDiffuseLight, dSpecularLight + dReflection.rgb * dReflection.a, dSpecularity);\\n}\\n\";\n\nvar combineDiffuseSpecularNoConservePS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight + (dSpecularLight + dReflection.rgb * dReflection.a) * dSpecularity;\\n}\\n\";\n\nvar combineDiffuseSpecularNoReflPS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight + dSpecularLight * dSpecularity;\\n}\\n\";\n\nvar combineDiffuseSpecularNoReflSeparateAmbientPS = \"uniform vec3 material_ambient;\\nvec3 combineColor() {\\n\\treturn (dDiffuseLight - light_globalAmbient) * dAlbedo + dSpecularLight * dSpecularity + material_ambient * light_globalAmbient;\\n}\\n\";\n\nvar combineDiffuseSpecularOldPS = \"vec3 combineColor() {\\n\\treturn mix(dAlbedo * dDiffuseLight + dSpecularLight * dSpecularity, dReflection.rgb, dReflection.a);\\n}\\n\";\n\nvar cookiePS = \"vec4 getCookie2D(sampler2D tex, mat4 transform, float intensity) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\treturn mix(vec4(1.0), texture2D(tex, projPos.xy), intensity);\\n}\\nvec4 getCookie2DClip(sampler2D tex, mat4 transform, float intensity) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tif (projPos.x < 0.0 || projPos.x > 1.0 || projPos.y < 0.0 || projPos.y > 1.0 || projPos.z < 0.0) return vec4(0.0);\\n\\treturn mix(vec4(1.0), texture2D(tex, projPos.xy), intensity);\\n}\\nvec4 getCookie2DXform(sampler2D tex, mat4 transform, float intensity, vec4 cookieMatrix, vec2 cookieOffset) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tprojPos.xy += cookieOffset;\\n\\tvec2 uv = mat2(cookieMatrix) * (projPos.xy-vec2(0.5)) + vec2(0.5);\\n\\treturn mix(vec4(1.0), texture2D(tex, uv), intensity);\\n}\\nvec4 getCookie2DClipXform(sampler2D tex, mat4 transform, float intensity, vec4 cookieMatrix, vec2 cookieOffset) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tprojPos.xy += cookieOffset;\\n\\tif (projPos.x < 0.0 || projPos.x > 1.0 || projPos.y < 0.0 || projPos.y > 1.0 || projPos.z < 0.0) return vec4(0.0);\\n\\tvec2 uv = mat2(cookieMatrix) * (projPos.xy-vec2(0.5)) + vec2(0.5);\\n\\treturn mix(vec4(1.0), texture2D(tex, uv), intensity);\\n}\\nvec4 getCookieCube(samplerCube tex, mat4 transform, float intensity) {\\n\\treturn mix(vec4(1.0), textureCube(tex, dLightDirNormW * mat3(transform)), intensity);\\n}\\n\";\n\nvar cubeMapProjectBoxPS = \"uniform vec3 envBoxMin, envBoxMax;\\nvec3 cubeMapProject(vec3 nrdir) {\\n\\tnrdir = cubeMapRotate(nrdir);\\n\\tvec3 rbmax = (envBoxMax - vPositionW) / nrdir;\\n\\tvec3 rbmin = (envBoxMin - vPositionW) / nrdir;\\n\\tvec3 rbminmax;\\n\\trbminmax.x = nrdir.x>0.0? rbmax.x : rbmin.x;\\n\\trbminmax.y = nrdir.y>0.0? rbmax.y : rbmin.y;\\n\\trbminmax.z = nrdir.z>0.0? rbmax.z : rbmin.z;\\n\\tfloat fa = min(min(rbminmax.x, rbminmax.y), rbminmax.z);\\n\\tvec3 posonbox = vPositionW + nrdir * fa;\\n\\tvec3 envBoxPos = (envBoxMin + envBoxMax) * 0.5;\\n\\treturn posonbox - envBoxPos;\\n}\\n\";\n\nvar cubeMapProjectNonePS = \"vec3 cubeMapProject(vec3 dir) {\\n\\treturn cubeMapRotate(dir);\\n}\\n\";\n\nvar cubeMapRotatePS = \"#ifdef CUBEMAP_ROTATION\\nuniform mat3 cubeMapRotationMatrix;\\n#endif\\nvec3 cubeMapRotate(vec3 refDir) {\\n#ifdef CUBEMAP_ROTATION\\n\\treturn refDir * cubeMapRotationMatrix;\\n#else\\n\\treturn refDir;\\n#endif\\n}\\n\";\n\nvar detailModesPS = \"vec3 detailMode_mul(vec3 c1, vec3 c2) {\\n\\treturn c1 * c2;\\n}\\nvec3 detailMode_add(vec3 c1, vec3 c2) {\\n\\treturn c1 + c2;\\n}\\nvec3 detailMode_screen(vec3 c1, vec3 c2) {\\n\\treturn 1.0 - (1.0 - c1)*(1.0 - c2);\\n}\\nvec3 detailMode_overlay(vec3 c1, vec3 c2) {\\n\\treturn mix(1.0 - 2.0*(1.0 - c1)*(1.0 - c2), 2.0*c1*c2, step(c1, vec3(0.5)));\\n}\\nvec3 detailMode_min(vec3 c1, vec3 c2) {\\n\\treturn min(c1, c2);\\n}\\nvec3 detailMode_max(vec3 c1, vec3 c2) {\\n\\treturn max(c1, c2);\\n}\\n\";\n\nvar diffusePS = \"#ifdef MAPCOLOR\\nuniform vec3 material_diffuse;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_diffuseMap;\\n#endif\\nvoid getAlbedo() {\\n\\tdAlbedo = vec3(1.0);\\n\\t#ifdef MAPCOLOR\\n\\tdAlbedo *= material_diffuse.rgb;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdAlbedo *= gammaCorrectInput(addAlbedoDetail(texture2D(texture_diffuseMap, $UV).$CH));\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAlbedo *= gammaCorrectInput(saturate(vVertexColor.$VC));\\n\\t#endif\\n}\\n\";\n\nvar diffuseDetailMapPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_diffuseDetailMap;\\n#endif\\nvec3 addAlbedoDetail(vec3 albedo) {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 albedoDetail = vec3(texture2D(texture_diffuseDetailMap, $UV).$CH);\\n\\treturn detailMode_$DETAILMODE(albedo, albedoDetail);\\n\\t#else\\n\\treturn albedo;\\n\\t#endif\\n}\\n\";\n\nvar dilatePS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec2 pixelOffset;\\nvoid main(void) {\\n\\tvec4 c = texture2D(source, vUv0);\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 - pixelOffset);\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(0, -pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(pixelOffset.x, -pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(-pixelOffset.x, 0));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(pixelOffset.x, 0));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(-pixelOffset.x, pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(0, pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + pixelOffset);\\n\\tgl_FragColor = c;\\n}\\n\";\n\nvar dpAtlasQuadPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec4 params;\\nvoid main(void) {\\n\\tvec2 uv = vUv0;\\n\\tuv = uv * 2.0 - vec2(1.0);\\n\\tuv *= params.xy;\\n\\tuv = uv * 0.5 + 0.5;\\n\\tgl_FragColor = texture2D(source, uv);\\n}\\n\";\n\nvar emissivePS = \"#ifdef MAPCOLOR\\nuniform vec3 material_emissive;\\n#endif\\n#ifdef MAPFLOAT\\nuniform float material_emissiveIntensity;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_emissiveMap;\\n#endif\\nvec3 getEmission() {\\n\\tvec3 emission = vec3(1.0);\\n\\t#ifdef MAPFLOAT\\n\\temission *= material_emissiveIntensity;\\n\\t#endif\\n\\t#ifdef MAPCOLOR\\n\\temission *= material_emissive;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\temission *= $texture2DSAMPLE(texture_emissiveMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\temission *= gammaCorrectInput(saturate(vVertexColor.$VC));\\n\\t#endif\\n\\treturn emission;\\n}\\n\";\n\nvar endPS = \"\\t#ifdef CLEARCOAT\\n\\tgl_FragColor.rgb = combineColorCC();\\n\\t#else\\n\\tgl_FragColor.rgb = combineColor();\\n\\t#endif\\n\\tgl_FragColor.rgb += getEmission();\\n\\tgl_FragColor.rgb = addFog(gl_FragColor.rgb);\\n\\t#ifndef HDR\\n\\tgl_FragColor.rgb = toneMap(gl_FragColor.rgb);\\n\\tgl_FragColor.rgb = gammaCorrectOutput(gl_FragColor.rgb);\\n\\t#endif\\n\";\n\nvar endVS = \"\\n\";\n\nvar envConstPS = \"vec3 processEnvironment(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar envMultiplyPS = \"uniform float skyboxIntensity;\\nvec3 processEnvironment(vec3 color) {\\n\\treturn color * skyboxIntensity;\\n}\\n\";\n\nvar extensionPS = \"\\n\";\n\nvar extensionVS = \"\\n\";\n\nvar falloffInvSquaredPS = \"float getFalloffWindow(float lightRadius) {\\n\\tfloat sqrDist = dot(dLightDirW, dLightDirW);\\n\\tfloat invRadius = 1.0 / lightRadius;\\n\\treturn square( saturate( 1.0 - square( sqrDist * square(invRadius) ) ) );\\n}\\nfloat getFalloffInvSquared(float lightRadius) {\\n\\tfloat sqrDist = dot(dLightDirW, dLightDirW);\\n\\tfloat falloff = 1.0 / (sqrDist + 1.0);\\n\\tfloat invRadius = 1.0 / lightRadius;\\n\\tfalloff *= 16.0;\\n\\tfalloff *= square( saturate( 1.0 - square( sqrDist * square(invRadius) ) ) );\\n\\treturn falloff;\\n}\\n\";\n\nvar falloffLinearPS = \"float getFalloffLinear(float lightRadius) {\\n\\tfloat d = length(dLightDirW);\\n\\treturn max(((lightRadius - d) / lightRadius), 0.0);\\n}\\n\";\n\nvar fixCubemapSeamsNonePS = \"vec3 fixSeams(vec3 vec, float mipmapIndex) {\\n\\treturn vec;\\n}\\nvec3 fixSeams(vec3 vec) {\\n\\treturn vec;\\n}\\nvec3 fixSeamsStatic(vec3 vec, float invRecMipSize) {\\n\\treturn vec;\\n}\\nvec3 calcSeam(vec3 vec) {\\n\\treturn vec3(0);\\n}\\nvec3 applySeam(vec3 vec, vec3 seam, float scale) {\\n\\treturn vec;\\n}\\n\";\n\nvar fixCubemapSeamsStretchPS = \"vec3 fixSeams(vec3 vec, float mipmapIndex) {\\n\\tfloat scale = 1.0 - exp2(mipmapIndex) / 128.0;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 fixSeams(vec3 vec) {\\n\\tfloat scale = 1.0 - 1.0 / 128.0;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 fixSeamsStatic(vec3 vec, float invRecMipSize) {\\n\\tfloat scale = invRecMipSize;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 calcSeam(vec3 vec) {\\n\\tvec3 avec = abs(vec);\\n\\tfloat M = max(avec.x, max(avec.y, avec.z));\\n\\treturn vec3(avec.x != M ? 1.0 : 0.0,\\n\\t\\t\\t\\tavec.y != M ? 1.0 : 0.0,\\n\\t\\t\\t\\tavec.z != M ? 1.0 : 0.0);\\n}\\nvec3 applySeam(vec3 vec, vec3 seam, float scale) {\\n\\treturn vec * (seam * -scale + vec3(1.0));\\n}\\n\";\n\nvar fogExpPS = \"uniform vec3 fog_color;\\nuniform float fog_density;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = exp(-depth * fog_density);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogExp2PS = \"uniform vec3 fog_color;\\nuniform float fog_density;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = exp(-depth * depth * fog_density * fog_density);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogLinearPS = \"uniform vec3 fog_color;\\nuniform float fog_start;\\nuniform float fog_end;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = (fog_end - depth) / (fog_end - fog_start);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\tfogFactor = gammaCorrectInput(fogFactor);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogNonePS = \"float dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar fresnelSchlickPS = \"\\nuniform float material_fresnelFactor;\\nvoid getFresnel() {\\n\\tfloat fresnel = 1.0 - max(dot(dNormalW, dViewDirW), 0.0);\\n\\tfloat fresnel2 = fresnel * fresnel;\\n\\tfresnel *= fresnel2 * fresnel2;\\n\\tfresnel *= dGlossiness * dGlossiness;\\n\\tdSpecularity = dSpecularity + (1.0 - dSpecularity) * fresnel;\\n\\t#ifdef CLEARCOAT\\n\\tfresnel = 1.0 - max(dot(ccNormalW, dViewDirW), 0.0);\\n\\tfresnel2 = fresnel * fresnel;\\n\\tfresnel *= fresnel2 * fresnel2;\\n\\tfresnel *= ccGlossiness * ccGlossiness;\\n\\tccSpecularity = ccSpecularity + (1.0 - ccSpecularity) * fresnel;\\n\\t#endif\\n}\\n\";\n\nvar fullscreenQuadPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nvoid main(void) {\\n\\tgl_FragColor = texture2D(source, vUv0);\\n}\\n\";\n\nvar fullscreenQuadVS = \"attribute vec2 vertex_position;\\nvarying vec2 vUv0;\\nvoid main(void)\\n{\\n\\tgl_Position = vec4(vertex_position, 0.5, 1.0);\\n\\tvUv0 = vertex_position.xy*0.5+0.5;\\n}\\n\";\n\nvar gamma1_0PS = \"vec4 texture2DSRGB(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv, float bias) {\\n\\treturn texture2D(tex, uv, bias);\\n}\\nvec4 textureCubeSRGB(samplerCube tex, vec3 uvw) {\\n\\treturn textureCube(tex, uvw);\\n}\\nvec3 gammaCorrectOutput(vec3 color) {\\n\\treturn color;\\n}\\nvec3 gammaCorrectInput(vec3 color) {\\n\\treturn color;\\n}\\nfloat gammaCorrectInput(float color) {\\n\\treturn color;\\n}\\nvec4 gammaCorrectInput(vec4 color) {\\n\\treturn color;\\n}\\n\";\n\nvar gamma2_2PS = \"vec3 gammaCorrectInput(vec3 color) {\\n\\treturn pow(color, vec3(2.2));\\n}\\nfloat gammaCorrectInput(float color) {\\n\\treturn pow(color, 2.2);\\n}\\nvec4 gammaCorrectInput(vec4 color) {\\n\\treturn vec4(pow(color.rgb, vec3(2.2)), color.a);\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv) {\\n\\tvec4 rgba = texture2D(tex, uv);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv, float bias) {\\n\\tvec4 rgba = texture2D(tex, uv, bias);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec4 textureCubeSRGB(samplerCube tex, vec3 uvw) {\\n\\tvec4 rgba = textureCube(tex, uvw);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec3 gammaCorrectOutput(vec3 color) {\\n\\t#ifdef HDR\\n\\treturn color;\\n\\t#else\\n\\tcolor += vec3(0.0000001);\\n\\treturn pow(color, vec3(0.45));\\n\\t#endif\\n}\\n\";\n\nvar genParaboloidPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nvoid main(void) {\\n\\tvec2 uv = vUv0;\\n\\tfloat side = uv.x < 0.5? 1.0 : -1.0;\\n\\tvec2 tc;\\n\\ttc.x = fract(uv.x * 2.0) * 2.0 - 1.0;\\n\\ttc.y = uv.y * 2.0 - 1.0;\\n\\tconst float scale = 1.1;\\n\\ttc *= scale;\\n\\tvec3 dir;\\n\\tdir.y = (dot(tc, tc) - 1.0) * side;\\n\\tdir.xz = tc * -2.0;\\n\\tdir.x *= -side * params.y;\\n\\tdir = fixSeams(dir, params.x);\\n\\tvec4 color = textureCube(source, dir, -100.0);\\n\\tgl_FragColor = color;\\n}\\n\";\n\nvar gles3PS = \"#define varying in\\nout highp vec4 pc_fragColor;\\n#define gl_FragColor pc_fragColor\\n#define texture2D texture\\n#define textureCube texture\\n#define texture2DProj textureProj\\n#define texture2DLodEXT textureLod\\n#define texture2DProjLodEXT textureProjLod\\n#define textureCubeLodEXT textureLod\\n#define texture2DGradEXT textureGrad\\n#define texture2DProjGradEXT textureProjGrad\\n#define textureCubeGradEXT textureGrad\\n#define GL2\\n\";\n\nvar gles3VS = \"#define attribute in\\n#define varying out\\n#define texture2D texture\\n#define GL2\\n#define VERTEXSHADER\\n\";\n\nvar glossPS = \"#ifdef MAPFLOAT\\nuniform float material_shininess;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_glossMap;\\n#endif\\nvoid getGlossiness() {\\n\\tdGlossiness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tdGlossiness *= material_shininess;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdGlossiness *= texture2D(texture_glossMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdGlossiness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdGlossiness += 0.0000001;\\n}\\n\";\n\nvar instancingVS = \"attribute vec4 instance_line1;\\nattribute vec4 instance_line2;\\nattribute vec4 instance_line3;\\nattribute vec4 instance_line4;\\n\";\n\nvar lightDiffuseLambertPS = \"float getLightDiffuse() {\\n\\treturn max(dot(dNormalW, -dLightDirNormW), 0.0);\\n}\\n\";\n\nvar lightDirPointPS = \"void getLightDirPoint(vec3 lightPosW) {\\n\\tdLightDirW = vPositionW - lightPosW;\\n\\tdLightDirNormW = normalize(dLightDirW);\\n\\tdLightPosW = lightPosW;\\n}\\n\";\n\nvar lightmapDirPS = \"uniform sampler2D texture_lightMap;\\nuniform sampler2D texture_dirLightMap;\\nvoid addLightMap() {\\n\\tvec3 color = $texture2DSAMPLE(texture_lightMap, $UV).$CH;\\n\\tvec3 dir = texture2D(texture_dirLightMap, $UV).xyz;\\n\\tif (dot(dir, vec3(1.0)) < 0.00001) {\\n\\t\\tdDiffuseLight += color;\\n\\t} else {\\n\\t\\tdLightDirNormW = normalize(dir * 2.0 - vec3(1.0));\\n\\t\\tfloat vlight = saturate(dot(dLightDirNormW, -dVertexNormalW));\\n\\t\\tfloat flight = saturate(dot(dLightDirNormW, -dNormalW));\\n\\t\\tfloat nlight = (flight / max(vlight, 0.01)) * 0.5;\\n\\t\\tdDiffuseLight += color * nlight * 2.0;\\n\\t}\\n\\tdSpecularLight += color * getLightSpecular();\\n}\\n\";\n\nvar lightmapSinglePS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_lightMap;\\n#endif\\nvoid addLightMap() {\\n\\tvec3 lm = vec3(1.0);\\n\\t#ifdef MAPTEXTURE\\n\\tlm *= $texture2DSAMPLE(texture_lightMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tlm *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdDiffuseLight += lm;\\n}\\n\";\n\nvar lightmapSingleVertPS = \"void addLightMap() {\\n\\tdDiffuseLight += saturate(vVertexColor.$CH);\\n}\\n\";\n\nvar lightSpecularAnisoGGXPS = \"\\nfloat calcLightSpecular(float tGlossiness, vec3 tNormalW) {\\n\\tfloat PI = 3.141592653589793;\\n\\tfloat roughness = max((1.0 - tGlossiness) * (1.0 - tGlossiness), 0.001);\\n\\tfloat anisotropy = material_anisotropy * roughness;\\n\\tfloat at = max((roughness + anisotropy), roughness / 4.0);\\n\\tfloat ab = max((roughness - anisotropy), roughness / 4.0);\\n\\tvec3 h = normalize(normalize(-dLightDirNormW) + normalize(dViewDirW));\\n\\tfloat NoH = dot(tNormalW, h);\\n\\tfloat ToH = dot(dTBN[0], h);\\n\\tfloat BoH = dot(dTBN[1], h);\\n\\tfloat a2 = at * ab;\\n\\tvec3 v = vec3(ab * ToH, at * BoH, a2 * NoH);\\n\\tfloat v2 = dot(v, v);\\n\\tfloat w2 = a2 / v2;\\n\\tfloat D = a2 * w2 * w2 * (1.0 / PI);\\n\\tfloat ToV = dot(dTBN[0], dViewDirW);\\n\\tfloat BoV = dot(dTBN[1], dViewDirW);\\n\\tfloat ToL = dot(dTBN[0], -dLightDirNormW);\\n\\tfloat BoL = dot(dTBN[1], -dLightDirNormW);\\n\\tfloat NoV = dot(tNormalW, dViewDirW);\\n\\tfloat NoL = dot(tNormalW, -dLightDirNormW);\\n\\tfloat lambdaV = NoL * length(vec3(at * ToV, ab * BoV, NoV));\\n\\tfloat lambdaL = NoV * length(vec3(at * ToL, ab * BoL, NoL));\\n\\tfloat G = 0.5 / (lambdaV + lambdaL);\\n\\treturn D * G;\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dNormalW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccNormalW);\\n}\\n\";\n\nvar lightSpecularBlinnPS = \"\\nfloat calcLightSpecular(float tGlossiness, vec3 tNormalW) {\\n\\tvec3 h = normalize( -dLightDirNormW + dViewDirW );\\n\\tfloat nh = max( dot( h, tNormalW ), 0.0 );\\n\\tfloat specPow = exp2(tGlossiness * 11.0);\\n\\tspecPow = antiAliasGlossiness(specPow);\\n\\tspecPow = max(specPow, 0.0001);\\n\\treturn pow(nh, specPow) * (specPow + 2.0) / 8.0;\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dNormalW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccNormalW);\\n}\\n\";\n\nvar lightSpecularPhongPS = \"float calcLightSpecular(float tGlossiness, vec3 tReflDirW) {\\n\\tfloat specPow = tGlossiness;\\n\\tspecPow = antiAliasGlossiness(specPow);\\n\\treturn pow(max(dot(tReflDirW, -dLightDirNormW), 0.0), specPow + 0.0001);\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dReflDirW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccReflDirW);\\n}\\n\";\n\nvar ltc = \"\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nstruct Coords {\\n\\tvec3 coord0;\\n\\tvec3 coord1;\\n\\tvec3 coord2;\\n\\tvec3 coord3;\\n};\\nfloat LTC_EvaluateRect( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in Coords rectCoords) {\\n\\tvec3 v1 = rectCoords.coord1 - rectCoords.coord0;\\n\\tvec3 v2 = rectCoords.coord3 - rectCoords.coord0;\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tfloat factor = sign(-dot( lightNormal, P - rectCoords.coord0 ));\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 =  factor * cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords.coord0 - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords.coord1 - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords.coord2 - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords.coord3 - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn result;\\n}\\nCoords dLTCCoords;\\nCoords getLTCLightCoords(vec3 lightPos, vec3 halfWidth, vec3 halfHeight){\\n\\tCoords coords;\\n\\tcoords.coord0 = lightPos + halfWidth - halfHeight;\\n\\tcoords.coord1 = lightPos - halfWidth - halfHeight;\\n\\tcoords.coord2 = lightPos - halfWidth + halfHeight;\\n\\tcoords.coord3 = lightPos + halfWidth + halfHeight;\\n\\treturn coords;\\n}\\nfloat dSphereRadius;\\nCoords getSphereLightCoords(vec3 lightPos, vec3 halfWidth, vec3 halfHeight){\\n\\tCoords coords;\\n\\tfloat radius = max(length(halfWidth), length(halfWidth));\\n\\tdSphereRadius = radius;\\n\\tvec3 f = normalize(lightPos-view_position);\\n\\tvec3 w = normalize(cross(f, halfHeight));\\n\\tvec3 h = normalize(cross(f, w));\\n\\tcoords.coord0 = lightPos + w * radius - h * radius;\\n\\tcoords.coord1 = lightPos - w * radius - h * radius;\\n\\tcoords.coord2 = lightPos - w * radius + h * radius;\\n\\tcoords.coord3 = lightPos + w * radius + h * radius;\\n\\treturn coords;\\n}\\nvec2 dLTCUV;\\n#ifdef CLEARCOAT\\nvec2 ccLTCUV;\\n#endif\\nvec2 getLTCLightUV(float tGlossiness, vec3 tNormalW)\\n{\\n\\tfloat roughness = max((1.0 - tGlossiness) * (1.0 - tGlossiness), 0.001);\\n\\treturn LTC_Uv( tNormalW, dViewDirW, roughness );\\n}\\nvec3 dLTCSpecFres;\\n#ifdef CLEARCOAT\\nvec3 ccLTCSpecFres;\\n#endif\\nvec3 getLTCLightSpecFres(vec2 uv, vec3 tSpecularity)\\n{\\n\\tvec4 t2 = texture2D( areaLightsLutTex2, uv );\\n\\t#ifdef AREA_R8_G8_B8_A8_LUTS\\n\\tt2 *= vec4(0.693103,1,1,1);\\n\\tt2 += vec4(0.306897,0,0,0);\\n\\t#endif\\n\\treturn tSpecularity * t2.x + ( vec3( 1.0 ) - tSpecularity) * t2.y;\\n}\\nvoid calcLTCLightValues()\\n{\\n\\tdLTCUV = getLTCLightUV(dGlossiness, dNormalW);\\n\\tdLTCSpecFres = getLTCLightSpecFres(dLTCUV, dSpecularityNoFres);\\n#ifdef CLEARCOAT\\n\\tccLTCUV = getLTCLightUV(ccGlossiness, ccNormalW);\\n\\tccLTCSpecFres = getLTCLightSpecFres(ccLTCUV, vec3(ccSpecularityNoFres));\\n#endif\\n}\\nvoid calcRectLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tdLTCCoords = getLTCLightCoords(lightPos, halfWidth, halfHeight);\\n\\tcalcLTCLightValues();\\n}\\nvoid calcDiskLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tcalcRectLightValues(lightPos, halfWidth, halfHeight);\\n}\\nvoid calcSphereLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tdLTCCoords = getSphereLightCoords(lightPos, halfWidth, halfHeight);\\n\\tcalcLTCLightValues();\\n}\\nvec3 SolveCubic(vec4 Coefficient)\\n{\\n\\tfloat pi = 3.14159;\\n\\tCoefficient.xyz /= Coefficient.w;\\n\\tCoefficient.yz /= 3.0;\\n\\tfloat A = Coefficient.w;\\n\\tfloat B = Coefficient.z;\\n\\tfloat C = Coefficient.y;\\n\\tfloat D = Coefficient.x;\\n\\tvec3 Delta = vec3(\\n\\t\\t-Coefficient.z * Coefficient.z + Coefficient.y,\\n\\t\\t-Coefficient.y * Coefficient.z + Coefficient.x,\\n\\t\\tdot(vec2(Coefficient.z, -Coefficient.y), Coefficient.xy)\\n\\t);\\n\\tfloat Discriminant = dot(vec2(4.0 * Delta.x, -Delta.y), Delta.zy);\\n\\tvec3 RootsA, RootsD;\\n\\tvec2 xlc, xsc;\\n\\t{\\n\\t\\tfloat A_a = 1.0;\\n\\t\\tfloat C_a = Delta.x;\\n\\t\\tfloat D_a = -2.0 * B * Delta.x + Delta.y;\\n\\t\\tfloat Theta = atan(sqrt(Discriminant), -D_a) / 3.0;\\n\\t\\tfloat x_1a = 2.0 * sqrt(-C_a) * cos(Theta);\\n\\t\\tfloat x_3a = 2.0 * sqrt(-C_a) * cos(Theta + (2.0 / 3.0) * pi);\\n\\t\\tfloat xl;\\n\\t\\tif ((x_1a + x_3a) > 2.0 * B)\\n\\t\\t\\txl = x_1a;\\n\\t\\telse\\n\\t\\t\\txl = x_3a;\\n\\t\\txlc = vec2(xl - B, A);\\n\\t}\\n\\t{\\n\\t\\tfloat A_d = D;\\n\\t\\tfloat C_d = Delta.z;\\n\\t\\tfloat D_d = -D * Delta.y + 2.0 * C * Delta.z;\\n\\t\\tfloat Theta = atan(D * sqrt(Discriminant), -D_d) / 3.0;\\n\\t\\tfloat x_1d = 2.0 * sqrt(-C_d) * cos(Theta);\\n\\t\\tfloat x_3d = 2.0 * sqrt(-C_d) * cos(Theta + (2.0 / 3.0) * pi);\\n\\t\\tfloat xs;\\n\\t\\tif (x_1d + x_3d < 2.0 * C)\\n\\t\\t\\txs = x_1d;\\n\\t\\telse\\n\\t\\t\\txs = x_3d;\\n\\t\\txsc = vec2(-D, xs + C);\\n\\t}\\n\\tfloat E =  xlc.y * xsc.y;\\n\\tfloat F = -xlc.x * xsc.y - xlc.y * xsc.x;\\n\\tfloat G =  xlc.x * xsc.x;\\n\\tvec2 xmc = vec2(C * F - B * G, -B * F + C * E);\\n\\tvec3 Root = vec3(xsc.x / xsc.y, xmc.x / xmc.y, xlc.x / xlc.y);\\n\\tif (Root.x < Root.y && Root.x < Root.z)\\n\\t\\tRoot.xyz = Root.yxz;\\n\\telse if (Root.z < Root.x && Root.z < Root.y)\\n\\t\\tRoot.xyz = Root.xzy;\\n\\treturn Root;\\n}\\nfloat LTC_EvaluateDisk(vec3 N, vec3 V, vec3 P, mat3 Minv, Coords points)\\n{\\n\\tvec3 T1, T2;\\n\\tT1 = normalize(V - N * dot(V, N));\\n\\tT2 = cross(N, T1);\\n\\tmat3 R = transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 L_[ 3 ];\\n\\tL_[ 0 ] = R * ( points.coord0 - P );\\n\\tL_[ 1 ] = R * ( points.coord1 - P );\\n\\tL_[ 2 ] = R * ( points.coord2 - P );\\n\\tvec3 Lo_i = vec3(0);\\n\\tvec3 C  = 0.5 * (L_[0] + L_[2]);\\n\\tvec3 V1 = 0.5 * (L_[1] - L_[2]);\\n\\tvec3 V2 = 0.5 * (L_[1] - L_[0]);\\n\\tC  = Minv * C;\\n\\tV1 = Minv * V1;\\n\\tV2 = Minv * V2;\\n\\tfloat a, b;\\n\\tfloat d11 = dot(V1, V1);\\n\\tfloat d22 = dot(V2, V2);\\n\\tfloat d12 = dot(V1, V2);\\n\\tif (abs(d12) / sqrt(d11 * d22) > 0.0001)\\n\\t{\\n\\t\\tfloat tr = d11 + d22;\\n\\t\\tfloat det = -d12 * d12 + d11 * d22;\\n\\t\\tdet = sqrt(det);\\n\\t\\tfloat u = 0.5 * sqrt(tr - 2.0 * det);\\n\\t\\tfloat v = 0.5 * sqrt(tr + 2.0 * det);\\n\\t\\tfloat e_max = (u + v) * (u + v);\\n\\t\\tfloat e_min = (u - v) * (u - v);\\n\\t\\tvec3 V1_, V2_;\\n\\t\\tif (d11 > d22)\\n\\t\\t{\\n\\t\\t\\tV1_ = d12 * V1 + (e_max - d11) * V2;\\n\\t\\t\\tV2_ = d12 * V1 + (e_min - d11) * V2;\\n\\t\\t}\\n\\t\\telse\\n\\t\\t{\\n\\t\\t\\tV1_ = d12*V2 + (e_max - d22)*V1;\\n\\t\\t\\tV2_ = d12*V2 + (e_min - d22)*V1;\\n\\t\\t}\\n\\t\\ta = 1.0 / e_max;\\n\\t\\tb = 1.0 / e_min;\\n\\t\\tV1 = normalize(V1_);\\n\\t\\tV2 = normalize(V2_);\\n\\t}\\n\\telse\\n\\t{\\n\\t\\ta = 1.0 / dot(V1, V1);\\n\\t\\tb = 1.0 / dot(V2, V2);\\n\\t\\tV1 *= sqrt(a);\\n\\t\\tV2 *= sqrt(b);\\n\\t}\\n\\tvec3 V3 = cross(V1, V2);\\n\\tif (dot(C, V3) < 0.0)\\n\\t\\tV3 *= -1.0;\\n\\tfloat L  = dot(V3, C);\\n\\tfloat x0 = dot(V1, C) / L;\\n\\tfloat y0 = dot(V2, C) / L;\\n\\tfloat E1 = inversesqrt(a);\\n\\tfloat E2 = inversesqrt(b);\\n\\ta *= L * L;\\n\\tb *= L * L;\\n\\tfloat c0 = a * b;\\n\\tfloat c1 = a * b * (1.0 + x0 * x0 + y0 * y0) - a - b;\\n\\tfloat c2 = 1.0 - a * (1.0 + x0 * x0) - b * (1.0 + y0 * y0);\\n\\tfloat c3 = 1.0;\\n\\tvec3 roots = SolveCubic(vec4(c0, c1, c2, c3));\\n\\tfloat e1 = roots.x;\\n\\tfloat e2 = roots.y;\\n\\tfloat e3 = roots.z;\\n\\tvec3 avgDir = vec3(a * x0 / (a - e2), b * y0 / (b - e2), 1.0);\\n\\tmat3 rotate = mat3(V1, V2, V3);\\n\\tavgDir = rotate * avgDir;\\n\\tavgDir = normalize(avgDir);\\n\\tfloat L1 = sqrt(-e2 / e3);\\n\\tfloat L2 = sqrt(-e2 / e1);\\n\\tfloat formFactor = L1 * L2 * inversesqrt((1.0 + L1 * L1) * (1.0 + L2 * L2));\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tvec2 uv = vec2(avgDir.z * 0.5 + 0.5, formFactor);\\n\\tuv = uv*LUT_SCALE + LUT_BIAS;\\n\\tfloat scale = texture2D( areaLightsLutTex2, uv ).w;\\n\\treturn formFactor*scale;\\n}\\nfloat getRectLightDiffuse() {\\n\\treturn LTC_EvaluateRect( dNormalW, dViewDirW, vPositionW, mat3( 1.0 ), dLTCCoords );\\n}\\nfloat getDiskLightDiffuse() {\\n\\treturn LTC_EvaluateDisk( dNormalW, dViewDirW, vPositionW, mat3( 1.0 ), dLTCCoords );\\n}\\nfloat getSphereLightDiffuse() {\\n\\tfloat falloff = dSphereRadius / (dot(dLightDirW, dLightDirW) + dSphereRadius);\\n\\treturn getLightDiffuse()*falloff;\\n}\\nmat3 getLTCLightInvMat(vec2 uv)\\n{\\n\\tvec4 t1 = texture2D( areaLightsLutTex1, uv );\\n\\t#ifdef AREA_R8_G8_B8_A8_LUTS\\n\\tt1 *= vec4(1.001, 0.3239, 0.60437568, 1.0);\\n\\tt1 += vec4(0.0, -0.2976, -0.01381, 0.0);\\n\\t#endif\\n\\treturn mat3(\\n\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\tvec3(\\t0, 1,\\t0 ),\\n\\t\\tvec3( t1.z, 0, t1.w )\\n\\t);\\n}\\nfloat calcRectLightSpecular(vec3 tNormalW, vec2 uv) {\\n\\tmat3 mInv = getLTCLightInvMat(uv);\\n\\treturn LTC_EvaluateRect( tNormalW, dViewDirW, vPositionW, mInv, dLTCCoords );\\n}\\nfloat getRectLightSpecular() {\\n\\treturn calcRectLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getRectLightSpecularCC() {\\n\\treturn calcRectLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\nfloat calcDiskLightSpecular(vec3 tNormalW, vec2 uv) {\\n\\tmat3 mInv = getLTCLightInvMat(uv);\\n\\treturn LTC_EvaluateDisk( tNormalW, dViewDirW, vPositionW, mInv, dLTCCoords );\\n}\\nfloat getDiskLightSpecular() {\\n\\treturn calcDiskLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getDiskLightSpecularCC() {\\n\\treturn calcDiskLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\nfloat getSphereLightSpecular() {\\n\\treturn calcDiskLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getSphereLightSpecularCC() {\\n\\treturn calcDiskLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\n\";\n\nvar metalnessPS = \"void processMetalness(float metalness) {\\n\\tconst float dielectricF0 = 0.04;\\n\\tdSpecularity = mix(vec3(dielectricF0), dAlbedo, metalness);\\n\\tdAlbedo *= 1.0 - metalness;\\n}\\n#ifdef MAPFLOAT\\nuniform float material_metalness;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_metalnessMap;\\n#endif\\nvoid getSpecularity() {\\n\\tfloat metalness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tmetalness *= material_metalness;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tmetalness *= texture2D(texture_metalnessMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tmetalness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tprocessMetalness(metalness);\\n}\\n\";\n\nvar msdfPS = \"uniform sampler2D texture_msdfMap;\\n#ifdef GL_OES_standard_derivatives\\n#define USE_FWIDTH\\n#endif\\n#ifdef GL2\\n#define USE_FWIDTH\\n#endif\\nfloat median(float r, float g, float b) {\\n\\treturn max(min(r, g), min(max(r, g), b));\\n}\\nfloat map (float min, float max, float v) {\\n\\treturn (v - min) / (max - min);\\n}\\nuniform float font_sdfIntensity;\\nuniform float font_pxrange;\\nuniform float font_textureWidth;\\nuniform vec4 outline_color;\\nuniform float outline_thickness;\\nuniform vec4 shadow_color;\\nuniform vec2 shadow_offset;\\nvec4 applyMsdf(vec4 color) {\\n\\tvec3 tsample = texture2D(texture_msdfMap, vUv0).rgb;\\n\\tvec2 uvShdw = vUv0 - shadow_offset;\\n\\tvec3 ssample = texture2D(texture_msdfMap, uvShdw).rgb;\\n\\tfloat sigDist = median(tsample.r, tsample.g, tsample.b);\\n\\tfloat sigDistShdw = median(ssample.r, ssample.g, ssample.b);\\n\\t#ifdef USE_FWIDTH\\n\\tvec2 w = fwidth(vUv0);\\n\\tfloat smoothing = clamp(w.x * font_textureWidth / font_pxrange, 0.0, 0.5);\\n\\t#else\\n\\tfloat font_size = 16.0;\\n\\tfloat smoothing = clamp(font_pxrange / font_size, 0.0, 0.5);\\n\\t#endif\\n\\tfloat mapMin = 0.05;\\n\\tfloat mapMax = clamp(1.0 - font_sdfIntensity, mapMin, 1.0);\\n\\tfloat sigDistInner = map(mapMin, mapMax, sigDist);\\n\\tfloat sigDistOutline = map(mapMin, mapMax, sigDist + outline_thickness);\\n\\tsigDistShdw = map(mapMin, mapMax, sigDistShdw + outline_thickness);\\n\\tfloat center = 0.5;\\n\\tfloat inside = smoothstep(center-smoothing, center+smoothing, sigDistInner);\\n\\tfloat outline = smoothstep(center-smoothing, center+smoothing, sigDistOutline);\\n\\tfloat shadow = smoothstep(center-smoothing, center+smoothing, sigDistShdw);\\n\\tvec4 tcolor = (outline > inside) ? outline * vec4(outline_color.a * outline_color.rgb, outline_color.a) : vec4(0.0);\\n\\ttcolor = mix(tcolor, color, inside);\\n\\tvec4 scolor = (shadow > outline) ? shadow * vec4(shadow_color.a * shadow_color.rgb, shadow_color.a) : tcolor;\\n\\ttcolor = mix(scolor, tcolor, outline);\\n\\treturn tcolor;\\n}\\n\";\n\nvar normalVS = \"#ifdef MORPHING_TEXTURE_BASED_NORMAL\\nuniform highp sampler2D morphNormalTex;\\n#endif\\nvec3 getNormal() {\\n\\t#ifdef SKIN\\n\\tdNormalMatrix = mat3(dModelMatrix[0].xyz, dModelMatrix[1].xyz, dModelMatrix[2].xyz);\\n\\t#elif defined(INSTANCING)\\n\\tdNormalMatrix = mat3(instance_line1.xyz, instance_line2.xyz, instance_line3.xyz);\\n\\t#else\\n\\tdNormalMatrix = matrix_normal;\\n\\t#endif\\n\\tvec3 tempNormal = vertex_normal;\\n\\t#ifdef MORPHING\\n\\t#ifdef MORPHING_NRM03\\n\\ttempNormal += morph_weights_a[0] * morph_nrm0;\\n\\ttempNormal += morph_weights_a[1] * morph_nrm1;\\n\\ttempNormal += morph_weights_a[2] * morph_nrm2;\\n\\ttempNormal += morph_weights_a[3] * morph_nrm3;\\n\\t#endif\\n\\t#ifdef MORPHING_NRM47\\n\\ttempNormal += morph_weights_b[0] * morph_nrm4;\\n\\ttempNormal += morph_weights_b[1] * morph_nrm5;\\n\\ttempNormal += morph_weights_b[2] * morph_nrm6;\\n\\ttempNormal += morph_weights_b[3] * morph_nrm7;\\n\\t#endif\\n\\t#endif\\n\\t#ifdef MORPHING_TEXTURE_BASED_NORMAL\\n\\tvec2 morphUV = getTextureMorphCoords();\\n\\tvec3 morphNormal = texture2D(morphNormalTex, morphUV).xyz;\\n\\ttempNormal += morphNormal;\\n\\t#endif\\n\\treturn normalize(dNormalMatrix * tempNormal);\\n}\\n\";\n\nvar normalDetailMapPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_normalDetailMap;\\nuniform float material_normalDetailMapBumpiness;\\nvec3 blendNormals(vec3 n1, vec3 n2) {\\n\\tn1 += vec3(0, 0, 1);\\n\\tn2 *= vec3(-1, -1, 1);\\n\\treturn normalize(n1*dot(n1, n2)/n1.z - n2);\\n}\\n#endif\\nvec3 addNormalDetail(vec3 normalMap) {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 normalDetailMap = unpackNormal(texture2D(texture_normalDetailMap, $UV));\\n\\tnormalDetailMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalDetailMap, material_normalDetailMapBumpiness));\\n\\treturn blendNormals(normalMap, normalDetailMap);\\n\\t#else\\n\\treturn normalMap;\\n\\t#endif\\n}\\n\";\n\nvar normalInstancedVS = \"vec3 getNormal() {\\n\\tdNormalMatrix = mat3(instance_line1.xyz, instance_line2.xyz, instance_line3.xyz);\\n\\treturn normalize(dNormalMatrix * vertex_normal);\\n}\\n\";\n\nvar normalMapPS = \"uniform sampler2D texture_normalMap;\\nuniform float material_bumpiness;\\nvoid getNormal() {\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_normalMap, $UV));\\n\\tnormalMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalMap, material_bumpiness));\\n\\tdNormalMap = addNormalDetail(normalMap);\\n\\tdNormalW = dTBN * dNormalMap;\\n}\\n\";\n\nvar normalMapFastPS = \"uniform sampler2D texture_normalMap;\\nvoid getNormal() {\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_normalMap, $UV));\\n\\tdNormalMap = addNormalDetail(normalMap);\\n\\tdNormalW = dTBN * dNormalMap;\\n}\\n\";\n\nvar normalSkinnedVS = \"vec3 getNormal() {\\n\\tdNormalMatrix = mat3(dModelMatrix[0].xyz, dModelMatrix[1].xyz, dModelMatrix[2].xyz);\\n\\treturn normalize(dNormalMatrix * vertex_normal);\\n}\\n\";\n\nvar normalVertexPS = \"void getNormal() {\\n\\tdNormalW = normalize(dVertexNormalW);\\n}\\n\";\n\nvar normalXYPS = \"vec3 unpackNormal(vec4 nmap) {\\n\\tvec3 normal;\\n\\tnormal.xy = nmap.wy * 2.0 - 1.0;\\n\\tnormal.z = sqrt(1.0 - saturate(dot(normal.xy, normal.xy)));\\n\\treturn normal;\\n}\\n\";\n\nvar normalXYZPS = \"vec3 unpackNormal(vec4 nmap) {\\n\\treturn nmap.xyz * 2.0 - 1.0;\\n}\\n\";\n\nvar opacityPS = \"#ifdef MAPFLOAT\\nuniform float material_opacity;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_opacityMap;\\n#endif\\nvoid getOpacity() {\\n\\tdAlpha = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tdAlpha *= material_opacity;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdAlpha *= texture2D(texture_opacityMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAlpha *= clamp(vVertexColor.$VC, 0.0, 1.0);\\n\\t#endif\\n}\\n\";\n\nvar outputAlphaPS = \"gl_FragColor.a = dAlpha;\\n\";\n\nvar outputAlphaOpaquePS = \"gl_FragColor.a = 1.0;\\n\";\n\nvar outputAlphaPremulPS = \"gl_FragColor.rgb *= dAlpha;\\ngl_FragColor.a = dAlpha;\\n\";\n\nvar outputCubemapPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec4 encodeRGBM(vec4 color) {\\n\\tcolor.rgb = pow(color.rgb, vec3(0.5));\\n\\tcolor.rgb *= 1.0 / 8.0;\\n\\tcolor.a = saturate( max( max( color.r, color.g ), max( color.b, 1.0 / 255.0 ) ) );\\n\\tcolor.a = ceil(color.a * 255.0) / 255.0;\\n\\tcolor.rgb /= color.a;\\n\\treturn color;\\n}\\nvoid main(void) {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tfloat face = params.x;\\n\\tvec3 vec;\\n\\tif (face==0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face==1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face==2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face==3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face==4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\tgl_FragColor = textureCube(source, vec);\\n\\tif (params.w >= 2.0) gl_FragColor = encodeRGBM(gl_FragColor);\\n}\\n\";\n\nvar outputTex2DPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nvoid main(void) {\\n\\tgl_FragColor = texture2D(source, vUv0);\\n}\\n\";\n\nvar packDepthPS = \"\\nvec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\n\";\n\nvar packDepthMaskPS = \"vec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres.x = 0.0;\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\n\";\n\nvar parallaxPS = \"uniform sampler2D texture_heightMap;\\nuniform float material_heightMapFactor;\\nvoid getParallax() {\\n\\tfloat parallaxScale = material_heightMapFactor;\\n\\tfloat height = texture2D(texture_heightMap, $UV).$CH;\\n\\theight = height * parallaxScale - parallaxScale*0.5;\\n\\tvec3 viewDirT = dViewDirW * dTBN;\\n\\tviewDirT.z += 0.42;\\n\\tdUvOffset = height * (viewDirT.xy / viewDirT.z);\\n}\\n\";\n\nvar particlePS = \"varying vec4 texCoordsAlphaLife;\\nuniform sampler2D colorMap;\\nuniform sampler2D colorParam;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\nuniform float softening;\\nuniform float colorMult;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\tfloat depth = dot(rgbaDepth, bitShift);\\n\\treturn depth;\\n}\\n#endif\\nvoid main(void) {\\n\\tvec4 tex  = texture2DSRGB(colorMap, vec2(texCoordsAlphaLife.x, 1.0 - texCoordsAlphaLife.y));\\n\\tvec4 ramp = texture2DSRGB(colorParam, vec2(texCoordsAlphaLife.w, 0.0));\\n\\tramp.rgb *= colorMult;\\n\\tramp.a += texCoordsAlphaLife.z;\\n\\tvec3 rgb = tex.rgb * ramp.rgb;\\n\\tfloat a  = tex.a * ramp.a;\\n\";\n\nvar particleVS = \"vec3 unpack3NFloats(float src) {\\n\\tfloat r = fract(src);\\n\\tfloat g = fract(src * 256.0);\\n\\tfloat b = fract(src * 65536.0);\\n\\treturn vec3(r, g, b);\\n}\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec4 tex1Dlod_lerp(highp sampler2D tex, vec2 tc) {\\n\\treturn mix( texture2D(tex,tc), texture2D(tex,tc + graphSampleSize), fract(tc.x*graphNumSamples) );\\n}\\nvec4 tex1Dlod_lerp(highp sampler2D tex, vec2 tc, out vec3 w) {\\n\\tvec4 a = texture2D(tex,tc);\\n\\tvec4 b = texture2D(tex,tc + graphSampleSize);\\n\\tfloat c = fract(tc.x*graphNumSamples);\\n\\tvec3 unpackedA = unpack3NFloats(a.w);\\n\\tvec3 unpackedB = unpack3NFloats(b.w);\\n\\tw = mix(unpackedA, unpackedB, c);\\n\\treturn mix(a, b, c);\\n}\\nvec2 rotate(vec2 quadXY, float pRotation, out mat2 rotMatrix) {\\n\\tfloat c = cos(pRotation);\\n\\tfloat s = sin(pRotation);\\n\\tmat2 m = mat2(c, -s, s, c);\\n\\trotMatrix = m;\\n\\treturn m * quadXY;\\n}\\nvec3 billboard(vec3 InstanceCoords, vec2 quadXY) {\\n\\t#ifdef SCREEN_SPACE\\n\\t\\tvec3 pos = vec3(-1, 0, 0) * quadXY.x + vec3(0, -1, 0) * quadXY.y;\\n\\t#else\\n\\t\\tvec3 pos = -matrix_viewInverse[0].xyz * quadXY.x + -matrix_viewInverse[1].xyz * quadXY.y;\\n\\t#endif\\n\\treturn pos;\\n}\\nvec3 customFace(vec3 InstanceCoords, vec2 quadXY) {\\n\\tvec3 pos = faceTangent * quadXY.x + faceBinorm * quadXY.y;\\n\\treturn pos;\\n}\\nvec2 safeNormalize(vec2 v) {\\n\\tfloat l = length(v);\\n\\treturn (l > 1e-06) ? v / l : v;\\n}\\nvoid main(void) {\\n\\tvec3 meshLocalPos = particle_vertexData.xyz;\\n\\tfloat id = floor(particle_vertexData.w);\\n\\tfloat rndFactor = fract(sin(id + 1.0 + seed));\\n\\tvec3 rndFactor3 = vec3(rndFactor, fract(rndFactor*10.0), fract(rndFactor*100.0));\\n\\tfloat uv = id / numParticlesPot;\\n\\treadInput(uv);\\n#ifdef LOCAL_SPACE\\n\\tinVel = mat3(matrix_model) * inVel;\\n#endif\\n\\tvec2 velocityV = safeNormalize((mat3(matrix_view) * inVel).xy);\\n\\tfloat particleLifetime = lifetime;\\n\\tif (inLife <= 0.0 || inLife > particleLifetime || !inShow) meshLocalPos = vec3(0.0);\\n\\tvec2 quadXY = meshLocalPos.xy;\\n\\tfloat nlife = clamp(inLife / particleLifetime, 0.0, 1.0);\\n\\tvec3 paramDiv;\\n\\tvec4 params = tex1Dlod_lerp(internalTex2, vec2(nlife, 0), paramDiv);\\n\\tfloat scale = params.y;\\n\\tfloat scaleDiv = paramDiv.x;\\n\\tfloat alphaDiv = paramDiv.z;\\n\\tscale += (scaleDiv * 2.0 - 1.0) * scaleDivMult * fract(rndFactor*10000.0);\\n#ifndef USE_MESH\\n\\ttexCoordsAlphaLife = vec4(quadXY * -0.5 + 0.5, (alphaDiv * 2.0 - 1.0) * alphaDivMult * fract(rndFactor*1000.0), nlife);\\n#else\\n\\ttexCoordsAlphaLife = vec4(particle_uv, (alphaDiv * 2.0 - 1.0) * alphaDivMult * fract(rndFactor*1000.0), nlife);\\n#endif\\n\\tvec3 particlePos = inPos;\\n\\tvec3 particlePosMoved = vec3(0.0);\\n\\tmat2 rotMatrix;\\n\";\n\nvar particleAnimFrameClampVS = \"\\tfloat animFrame = min(floor(texCoordsAlphaLife.w * animTexParams.y) + animTexParams.x, animTexParams.z);\\n\";\n\nvar particleAnimFrameLoopVS = \"\\tfloat animFrame = floor(mod(texCoordsAlphaLife.w * animTexParams.y + animTexParams.x, animTexParams.z + 1.0));\\n\";\n\nvar particleAnimTexVS = \"\\tfloat animationIndex;\\n\\tif (animTexIndexParams.y == 1.0) {\\n\\t\\tanimationIndex = floor((animTexParams.w + 1.0) * rndFactor3.z) * (animTexParams.z + 1.0);\\n\\t} else {\\n\\t\\tanimationIndex = animTexIndexParams.x * (animTexParams.z + 1.0);\\n\\t}\\n\\tfloat atlasX = (animationIndex + animFrame) * animTexTilesParams.x;\\n\\tfloat atlasY = 1.0 - floor(atlasX + 1.0) * animTexTilesParams.y;\\n\\tatlasX = fract(atlasX);\\n\\ttexCoordsAlphaLife.xy *= animTexTilesParams.xy;\\n\\ttexCoordsAlphaLife.xy += vec2(atlasX, atlasY);\\n\";\n\nvar particleInputFloatPS = \"void readInput(float uv) {\\n\\tvec4 tex = texture2D(particleTexIN, vec2(uv, 0.25));\\n\\tvec4 tex2 = texture2D(particleTexIN, vec2(uv, 0.75));\\n\\tinPos = tex.xyz;\\n\\tinVel = tex2.xyz;\\n\\tinAngle = (tex.w < 0.0? -tex.w : tex.w) - 1000.0;\\n\\tinShow = tex.w >= 0.0;\\n\\tinLife = tex2.w;\\n}\\n\";\n\nvar particleInputRgba8PS = \"\\n#define PI2 6.283185307179586\\nuniform vec3 inBoundsSize;\\nuniform vec3 inBoundsCenter;\\nuniform float maxVel;\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nfloat decodeFloatRGBA( vec4 rgba ) {\\n  return dot( rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\\n}\\nvoid readInput(float uv) {\\n\\tvec4 tex0 = texture2D(particleTexIN, vec2(uv, 0.125));\\n\\tvec4 tex1 = texture2D(particleTexIN, vec2(uv, 0.375));\\n\\tvec4 tex2 = texture2D(particleTexIN, vec2(uv, 0.625));\\n\\tvec4 tex3 = texture2D(particleTexIN, vec2(uv, 0.875));\\n\\tinPos = vec3(decodeFloatRG(tex0.rg), decodeFloatRG(tex0.ba), decodeFloatRG(tex1.rg));\\n\\tinPos = (inPos - vec3(0.5)) * inBoundsSize + inBoundsCenter;\\n\\tinVel = tex2.xyz;\\n\\tinVel = (inVel - vec3(0.5)) * maxVel;\\n\\tinAngle = decodeFloatRG(tex1.ba) * PI2;\\n\\tinShow = tex2.a > 0.5;\\n\\tinLife = decodeFloatRGBA(tex3);\\n\\tfloat maxNegLife = max(lifetime, (numParticles - 1.0) * (rate+rateDiv));\\n\\tfloat maxPosLife = lifetime+1.0;\\n\\tinLife = inLife * (maxNegLife + maxPosLife) - maxNegLife;\\n}\\n\";\n\nvar particleOutputFloatPS = \"void writeOutput() {\\n\\tif (gl_FragCoord.y<1.0) {\\n\\t\\tgl_FragColor = vec4(outPos, (outAngle + 1000.0) * visMode);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(outVel, outLife);\\n\\t}\\n}\\n\";\n\nvar particleOutputRgba8PS = \"uniform vec3 outBoundsMul;\\nuniform vec3 outBoundsAdd;\\nvec2 encodeFloatRG( float v ) {\\n\\tvec2 enc = vec2(1.0, 255.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\\treturn enc;\\n}\\nvec4 encodeFloatRGBA( float v ) {\\n\\tvec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\\n\\treturn enc;\\n}\\nvoid writeOutput() {\\n\\toutPos = outPos * outBoundsMul + outBoundsAdd;\\n\\toutAngle = fract(outAngle / PI2);\\n\\toutVel = (outVel / maxVel) + vec3(0.5);\\n\\tfloat maxNegLife = max(lifetime, (numParticles - 1.0) * (rate+rateDiv));\\n\\tfloat maxPosLife = lifetime+1.0;\\n\\toutLife = (outLife + maxNegLife) / (maxNegLife + maxPosLife);\\n\\tif (gl_FragCoord.y < 1.0) {\\n\\t\\tgl_FragColor = vec4(encodeFloatRG(outPos.x), encodeFloatRG(outPos.y));\\n\\t} else if (gl_FragCoord.y < 2.0) {\\n\\t\\tgl_FragColor = vec4(encodeFloatRG(outPos.z), encodeFloatRG(outAngle));\\n\\t} else if (gl_FragCoord.y < 3.0) {\\n\\t\\tgl_FragColor = vec4(outVel, visMode*0.5+0.5);\\n\\t} else {\\n\\t\\tgl_FragColor = encodeFloatRGBA(outLife);\\n\\t}\\n}\\n\";\n\nvar particleUpdaterAABBPS = \"uniform mat3 spawnBounds;\\nuniform vec3 spawnPosInnerRatio;\\nvec3 calcSpawnPosition(vec3 inBounds, float rndFactor) {\\n\\tvec3 pos = inBounds - vec3(0.5);\\n\\tvec3 posAbs = abs(pos);\\n\\tvec3 maxPos = vec3(max(posAbs.x, max(posAbs.y, posAbs.z)));\\n\\tvec3 edge = maxPos + (vec3(0.5) - maxPos) * spawnPosInnerRatio;\\n\\tpos.x = edge.x * (maxPos.x == posAbs.x ? sign(pos.x) : 2.0 * pos.x);\\n\\tpos.y = edge.y * (maxPos.y == posAbs.y ? sign(pos.y) : 2.0 * pos.y);\\n\\tpos.z = edge.z * (maxPos.z == posAbs.z ? sign(pos.z) : 2.0 * pos.z);\\n#ifndef LOCAL_SPACE\\n\\treturn emitterPos + spawnBounds * pos;\\n#else\\n\\treturn spawnBounds * pos;\\n#endif\\n}\\nvoid addInitialVelocity(inout vec3 localVelocity, vec3 inBounds) {\\n\\tlocalVelocity -= vec3(0, 0, initialVelocity);\\n}\\n\";\n\nvar particleUpdaterEndPS = \"\\twriteOutput();\\n}\\n\";\n\nvar particleUpdaterInitPS = \"varying vec2 vUv0;\\nuniform highp sampler2D particleTexIN;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\nuniform highp sampler2D internalTex3;\\nuniform mat3 emitterMatrix, emitterMatrixInv;\\nuniform vec3 emitterScale;\\nuniform vec3 emitterPos, frameRandom, localVelocityDivMult, velocityDivMult;\\nuniform float delta, rate, rateDiv, lifetime, numParticles, rotSpeedDivMult, radialSpeedDivMult, seed;\\nuniform float startAngle, startAngle2;\\nuniform float initialVelocity;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\nvec3 inPos;\\nvec3 inVel;\\nfloat inAngle;\\nbool inShow;\\nfloat inLife;\\nfloat visMode;\\nvec3 outPos;\\nvec3 outVel;\\nfloat outAngle;\\nbool outShow;\\nfloat outLife;\\n\";\n\nvar particleUpdaterNoRespawnPS = \"\\tif (outLife >= lifetime) {\\n\\t\\toutLife -= max(lifetime, (numParticles - 1.0) * particleRate);\\n\\t\\tvisMode = -1.0;\\n\\t}\\n\";\n\nvar particleUpdaterOnStopPS = \"\\tvisMode = outLife < 0.0? -1.0: visMode;\\n\";\n\nvar particleUpdaterRespawnPS = \"\\tif (outLife >= lifetime) {\\n\\t\\toutLife -= max(lifetime, (numParticles - 1.0) * particleRate);\\n\\t\\tvisMode = 1.0;\\n\\t}\\n\\tvisMode = outLife < 0.0? 1.0: visMode;\\n\";\n\nvar particleUpdaterSpherePS = \"uniform float spawnBoundsSphere;\\nuniform float spawnBoundsSphereInnerRatio;\\nvec3 calcSpawnPosition(vec3 inBounds, float rndFactor) {\\n\\tfloat rnd4 = fract(rndFactor * 1000.0);\\n\\tvec3 norm = normalize(inBounds.xyz - vec3(0.5));\\n\\tfloat r = rnd4 * (1.0 - spawnBoundsSphereInnerRatio) + spawnBoundsSphereInnerRatio;\\n#ifndef LOCAL_SPACE\\n\\treturn emitterPos + norm * r * spawnBoundsSphere;\\n#else\\n\\treturn norm * r * spawnBoundsSphere;\\n#endif\\n}\\nvoid addInitialVelocity(inout vec3 localVelocity, vec3 inBounds) {\\n\\tlocalVelocity += normalize(inBounds - vec3(0.5)) * initialVelocity;\\n}\\n\";\n\nvar particleUpdaterStartPS = \"float saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 unpack3NFloats(float src) {\\n\\tfloat r = fract(src);\\n\\tfloat g = fract(src * 256.0);\\n\\tfloat b = fract(src * 65536.0);\\n\\treturn vec3(r, g, b);\\n}\\nvec3 tex1Dlod_lerp(highp sampler2D tex, vec2 tc, out vec3 w) {\\n\\tvec4 a = texture2D(tex, tc);\\n\\tvec4 b = texture2D(tex, tc + graphSampleSize);\\n\\tfloat c = fract(tc.x * graphNumSamples);\\n\\tvec3 unpackedA = unpack3NFloats(a.w);\\n\\tvec3 unpackedB = unpack3NFloats(b.w);\\n\\tw = mix(unpackedA, unpackedB, c);\\n\\treturn mix(a.xyz, b.xyz, c);\\n}\\n#define HASHSCALE4 vec4(1031, .1030, .0973, .1099)\\nvec4 hash41(float p) {\\n\\tvec4 p4 = fract(vec4(p) * HASHSCALE4);\\n\\tp4 += dot(p4, p4.wzxy+19.19);\\n\\treturn fract(vec4((p4.x + p4.y)*p4.z, (p4.x + p4.z)*p4.y, (p4.y + p4.z)*p4.w, (p4.z + p4.w)*p4.x));\\n}\\nvoid main(void) {\\n\\tif (gl_FragCoord.x > numParticles) discard;\\n\\treadInput(vUv0.x);\\n\\tvisMode = inShow? 1.0 : -1.0;\\n\\tvec4 rndFactor = hash41(gl_FragCoord.x + seed);\\n\\tfloat particleRate = rate + rateDiv * rndFactor.x;\\n\\toutLife = inLife + delta;\\n\\tfloat nlife = clamp(outLife / lifetime, 0.0, 1.0);\\n\\tvec3 localVelocityDiv;\\n\\tvec3 velocityDiv;\\n\\tvec3 paramDiv;\\n\\tvec3 localVelocity = tex1Dlod_lerp(internalTex0, vec2(nlife, 0), localVelocityDiv);\\n\\tvec3 velocity =\\t  tex1Dlod_lerp(internalTex1, vec2(nlife, 0), velocityDiv);\\n\\tvec3 params =\\t\\ttex1Dlod_lerp(internalTex2, vec2(nlife, 0), paramDiv);\\n\\tfloat rotSpeed = params.x;\\n\\tfloat rotSpeedDiv = paramDiv.y;\\n\\tvec3 radialParams = tex1Dlod_lerp(internalTex3, vec2(nlife, 0), paramDiv);\\n\\tfloat radialSpeed = radialParams.x;\\n\\tfloat radialSpeedDiv = radialParams.y;\\n\\tbool respawn = inLife <= 0.0 || outLife >= lifetime;\\n\\tinPos = respawn ? calcSpawnPosition(rndFactor.xyz, rndFactor.x) : inPos;\\n\\tinAngle = respawn ? mix(startAngle, startAngle2, rndFactor.x) : inAngle;\\n#ifndef LOCAL_SPACE\\n\\tvec3 radialVel = inPos - emitterPos;\\n#else\\n\\tvec3 radialVel = inPos;\\n#endif\\n\\tradialVel = (dot(radialVel, radialVel) > 1.0E-8) ? radialSpeed * normalize(radialVel) : vec3(0.0);\\n\\tradialVel += (radialSpeedDiv * vec3(2.0) - vec3(1.0)) * radialSpeedDivMult * rndFactor.xyz;\\n\\tlocalVelocity +=\\t(localVelocityDiv * vec3(2.0) - vec3(1.0)) * localVelocityDivMult * rndFactor.xyz;\\n\\tvelocity +=\\t\\t (velocityDiv * vec3(2.0) - vec3(1.0)) * velocityDivMult * rndFactor.xyz;\\n\\trotSpeed +=\\t\\t (rotSpeedDiv * 2.0 - 1.0) * rotSpeedDivMult * rndFactor.y;\\n\\taddInitialVelocity(localVelocity, rndFactor.xyz);\\n#ifndef LOCAL_SPACE\\n\\toutVel = emitterMatrix * localVelocity + (radialVel + velocity) * emitterScale;\\n#else\\n\\toutVel = (localVelocity + radialVel) / emitterScale + emitterMatrixInv * velocity;\\n#endif\\n\\toutPos = inPos + outVel * delta;\\n\\toutAngle = inAngle + rotSpeed * delta;\\n\";\n\nvar particle_billboardVS = \"\\tquadXY = rotate(quadXY, inAngle, rotMatrix);\\n\\tvec3 localPos = billboard(particlePos, quadXY);\\n\";\n\nvar particle_blendAddPS = \"\\tdBlendModeFogFactor = 0.0;\\n\\trgb *= saturate(gammaCorrectInput(max(a, 0.0)));\\n\\tif ((rgb.r + rgb.g + rgb.b) < 0.000001) discard;\\n\";\n\nvar particle_blendMultiplyPS = \"\\trgb = mix(vec3(1.0), rgb, vec3(a));\\n\\tif (rgb.r + rgb.g + rgb.b > 2.99) discard;\\n\";\n\nvar particle_blendNormalPS = \"\\tif (a < 0.01) discard;\\n\";\n\nvar particle_cpuVS = \"attribute vec4 particle_vertexData;\\nattribute vec4 particle_vertexData2;\\nattribute vec4 particle_vertexData3;\\nattribute float particle_vertexData4;\\n#ifndef USE_MESH\\n#define VDATA5TYPE vec2\\n#else\\n#define VDATA5TYPE vec4\\n#endif\\nattribute VDATA5TYPE particle_vertexData5;\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform mat3 matrix_normal;\\nuniform mat4 matrix_viewInverse;\\nuniform float numParticles;\\nuniform float lifetime;\\nuniform float stretch;\\nuniform float seed;\\nuniform vec3 wrapBounds, emitterScale, faceTangent, faceBinorm;\\nuniform sampler2D texLifeAndSourcePosOUT;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\nuniform vec3 emitterPos;\\nvarying vec4 texCoordsAlphaLife;\\nvec2 rotate(vec2 quadXY, float pRotation, out mat2 rotMatrix)\\n{\\n\\tfloat c = cos(pRotation);\\n\\tfloat s = sin(pRotation);\\n\\tmat2 m = mat2(c, -s, s, c);\\n\\trotMatrix = m;\\n\\treturn m * quadXY;\\n}\\nvec3 billboard(vec3 InstanceCoords, vec2 quadXY)\\n{\\n\\tvec3 pos = -matrix_viewInverse[0].xyz * quadXY.x + -matrix_viewInverse[1].xyz * quadXY.y;\\n\\treturn pos;\\n}\\nvec3 customFace(vec3 InstanceCoords, vec2 quadXY)\\n{\\n\\tvec3 pos = faceTangent * quadXY.x + faceBinorm * quadXY.y;\\n\\treturn pos;\\n}\\nvoid main(void)\\n{\\n\\tvec3 particlePos = particle_vertexData.xyz;\\n\\tvec3 inPos = particlePos;\\n\\tvec3 vertPos = particle_vertexData3.xyz;\\n\\tvec3 inVel = vec3(particle_vertexData2.w, particle_vertexData3.w, particle_vertexData5.x);\\n\\tfloat id = floor(particle_vertexData4);\\n\\tfloat rndFactor = fract(sin(id + 1.0 + seed));\\n\\tvec3 rndFactor3 = vec3(rndFactor, fract(rndFactor*10.0), fract(rndFactor*100.0));\\n#ifdef LOCAL_SPACE\\n\\tinVel = mat3(matrix_model) * inVel;\\n#endif\\n\\tvec2 velocityV = normalize((mat3(matrix_view) * inVel).xy);\\n\\tvec2 quadXY = vertPos.xy;\\n#ifdef USE_MESH\\n\\ttexCoordsAlphaLife = vec4(particle_vertexData5.zw, particle_vertexData2.z, particle_vertexData.w);\\n#else\\n\\ttexCoordsAlphaLife = vec4(quadXY * -0.5 + 0.5, particle_vertexData2.z, particle_vertexData.w);\\n#endif\\n\\tmat2 rotMatrix;\\n\\tfloat inAngle = particle_vertexData2.x;\\n\\tvec3 particlePosMoved = vec3(0.0);\\n\\tvec3 meshLocalPos = particle_vertexData3.xyz;\\n\";\n\nvar particle_cpu_endVS = \"\\tlocalPos *= particle_vertexData2.y * emitterScale;\\n\\tlocalPos += particlePos;\\n\\tgl_Position = matrix_viewProjection * vec4(localPos, 1.0);\\n\";\n\nvar particle_customFaceVS = \"\\tquadXY = rotate(quadXY, inAngle, rotMatrix);\\n\\tvec3 localPos = customFace(particlePos, quadXY);\\n\";\n\nvar particle_endPS = \"\\trgb = addFog(rgb);\\n\\trgb = toneMap(rgb);\\n\\trgb = gammaCorrectOutput(rgb);\\n\\tgl_FragColor = vec4(rgb, a);\\n}\\n\";\n\nvar particle_endVS = \"\\tlocalPos *= scale * emitterScale;\\n\\tlocalPos += particlePos;\\n\\t#ifdef SCREEN_SPACE\\n\\tgl_Position = vec4(localPos.x, localPos.y, 0.0, 1.0);\\n\\t#else\\n\\tgl_Position = matrix_viewProjection * vec4(localPos.xyz, 1.0);\\n\\t#endif\\n\";\n\nvar particle_halflambertPS = \"\\tvec3 negNormal = normal*0.5+0.5;\\n\\tvec3 posNormal = -normal*0.5+0.5;\\n\\tnegNormal *= negNormal;\\n\\tposNormal *= posNormal;\\n\";\n\nvar particle_initVS = \"attribute vec4 particle_vertexData;\\n#ifdef USE_MESH\\nattribute vec2 particle_uv;\\n#endif\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\nuniform mat3 matrix_normal;\\nuniform mat4 matrix_viewInverse;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform float numParticles, numParticlesPot;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\nuniform float stretch;\\nuniform vec3 wrapBounds;\\nuniform vec3 emitterScale, emitterPos, faceTangent, faceBinorm;\\nuniform float rate, rateDiv, lifetime, deltaRandomnessStatic, scaleDivMult, alphaDivMult, seed, delta;\\nuniform sampler2D particleTexOUT, particleTexIN;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\nvarying vec4 texCoordsAlphaLife;\\nvec3 inPos;\\nvec3 inVel;\\nfloat inAngle;\\nbool inShow;\\nfloat inLife;\\n\";\n\nvar particle_lambertPS = \"\\tvec3 negNormal = max(normal, vec3(0.0));\\n\\tvec3 posNormal = max(-normal, vec3(0.0));\\n\";\n\nvar particle_lightingPS = \"\\tvec3 light = negNormal.x*lightCube[0] + posNormal.x*lightCube[1] +\\n\\t\\t\\t\\t\\t\\tnegNormal.y*lightCube[2] + posNormal.y*lightCube[3] +\\n\\t\\t\\t\\t\\t\\tnegNormal.z*lightCube[4] + posNormal.z*lightCube[5];\\n\\trgb *= light;\\n\";\n\nvar particle_localShiftVS = \"\\tparticlePos = (matrix_model * vec4(particlePos, 1.0)).xyz;\\n\";\n\nvar particle_meshVS = \"\\tvec3 localPos = meshLocalPos;\\n\\tlocalPos.xy = rotate(localPos.xy, inAngle, rotMatrix);\\n\\tlocalPos.yz = rotate(localPos.yz, inAngle, rotMatrix);\\n\\tbillboard(particlePos, quadXY);\\n\";\n\nvar particle_normalVS = \"\\tNormal = normalize(localPos + matrix_viewInverse[2].xyz);\\n\";\n\nvar particle_normalMapPS = \"\\tvec3 normalMap = normalize(texture2D(normalMap, vec2(texCoordsAlphaLife.x, 1.0 - texCoordsAlphaLife.y)).xyz * 2.0 - 1.0);\\n\\tvec3 normal = ParticleMat * normalMap;\\n\";\n\nvar particle_pointAlongVS = \"\\tinAngle = atan(velocityV.x, velocityV.y);\\n\";\n\nvar particle_softPS = \"\\tfloat depth = getLinearScreenDepth();\\n\\tfloat particleDepth = vDepth;\\n\\tfloat depthDiff = saturate(abs(particleDepth - depth) * softening);\\n\\ta *= depthDiff;\\n\";\n\nvar particle_softVS = \"\\tvDepth = getLinearDepth(localPos);\\n\";\n\nvar particle_stretchVS = \"\\tvec3 moveDir = inVel * stretch;\\n\\tvec3 posPrev = particlePos - moveDir;\\n\\tposPrev += particlePosMoved;\\n\\tvec2 centerToVertexV = normalize((mat3(matrix_view) * localPos).xy);\\n\\tfloat interpolation = dot(-velocityV, centerToVertexV) * 0.5 + 0.5;\\n\\tparticlePos = mix(particlePos, posPrev, interpolation);\\n\";\n\nvar particle_TBNVS = \"\\tmat3 rot3 = mat3(rotMatrix[0][0], rotMatrix[0][1], 0.0, rotMatrix[1][0], rotMatrix[1][1], 0.0, 0.0, 0.0, 1.0);\\n\\tParticleMat = mat3(-matrix_viewInverse[0].xyz, -matrix_viewInverse[1].xyz, matrix_viewInverse[2].xyz) * rot3;\\n\";\n\nvar particle_wrapVS = \"\\tvec3 origParticlePos = particlePos;\\n\\tparticlePos -= matrix_model[3].xyz;\\n\\tparticlePos = mod(particlePos, wrapBounds) - wrapBounds * 0.5;\\n\\tparticlePos += matrix_model[3].xyz;\\n\\tparticlePosMoved = particlePos - origParticlePos;\\n\";\n\nvar precisionTestPS = \"void main(void) {\\n\\tgl_FragColor = vec4(2147483648.0);\\n}\\n\";\n\nvar precisionTest2PS = \"uniform sampler2D source;\\nvec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\nvoid main(void) {\\n\\tfloat c = texture2D(source, vec2(0.0)).r;\\n\\tfloat diff = abs(c - 2147483648.0) / 2147483648.0;\\n\\tgl_FragColor = packFloat(diff);\\n}\\n\";\n\nvar prefilterCubemapPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nfloat rnd(vec2 uv) {\\n\\treturn fract(sin(dot(uv, vec2(12.9898, 78.233) * 2.0)) * 43758.5453);\\n}\\nconst float PI = 3.14159265358979;\\nvec3 hemisphereSample_cos(vec2 uv, mat3 vecSpace, vec3 cubeDir, float gloss) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = sqrt(1.0 - uv.x);\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n\\treturn normalize(mix(vecSpace * sampleDir, cubeDir, params.y));\\n}\\nvec3 hemisphereSample_phong(vec2 uv, mat3 vecSpace, vec3 cubeDir, float specPow) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n\\treturn vecSpace * sampleDir;\\n}\\nmat3 matrixFromVector(vec3 n) {\\n\\tfloat a = 1.0 / (1.0 + n.z);\\n\\tfloat b = -n.x * n.y * a;\\n\\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\\n\\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\\n\\treturn mat3(b1, b2, n);\\n}\\nvec4 encodeRGBM(vec3 color) {\\n\\tvec4 encoded;\\n\\tencoded.rgb = pow(color.rgb, vec3(0.5));\\n\\tencoded.rgb *= 1.0 / 8.0;\\n\\tencoded.a = saturate( max( max( encoded.r, encoded.g ), max( encoded.b, 1.0 / 255.0 ) ) );\\n\\tencoded.a = ceil(encoded.a * 255.0) / 255.0;\\n\\tencoded.rgb /= encoded.a;\\n\\treturn encoded;\\n}\\nvoid main(void) {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tif (params.w==1.0 || params.w==3.0) {\\n\\t\\tst = 2.0 * floor(gl_FragCoord.xy) / (params.z - 1.0) - 1.0;\\n\\t}\\n\\tfloat face = params.x;\\n\\tvec3 vec;\\n\\tif (face==0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face==1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face==2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face==3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face==4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\tmat3 vecSpace = matrixFromVector(normalize(vec));\\n\\tvec3 color = vec3(0.0);\\n\\tconst int samples = $NUMSAMPLES;\\n\\tvec3 vect;\\n\\tfor(int i=0; i<samples; i++) {\\n\\t\\tfloat sini = sin(float(i));\\n\\t\\tfloat cosi = cos(float(i));\\n\\t\\tfloat rand = rnd(vec2(sini, cosi));\\n\\t\\tvect = hemisphereSample_$METHOD(vec2(float(i) / float(samples), rand), vecSpace, vec, params.y);\\n\\t\\tcolor += $textureCube(source, vect).rgb;\\n\\t}\\n\\tcolor /= float(samples);\\n\\tgl_FragColor = params.w < 2.0? vec4(color, 1.0) : encodeRGBM(color);\\n}\\n\";\n\nvar reflDirPS = \"void getReflDir() {\\n\\tdReflDirW = normalize(-reflect(dViewDirW, dNormalW));\\n}\\n\";\n\nvar reflDirAnisoPS = \"void getReflDir() {\\n\\tfloat roughness = sqrt(1.0 - min(dGlossiness, 1.0));\\n\\tfloat anisotropy = material_anisotropy * roughness;\\n\\tvec3 anisotropicDirection = anisotropy >= 0.0 ? dTBN[1] : dTBN[0];\\n\\tvec3 anisotropicTangent = cross(anisotropicDirection, dViewDirW);\\n\\tvec3 anisotropicNormal = cross(anisotropicTangent, anisotropicDirection);\\n\\tvec3 bentNormal = normalize(mix(normalize(dNormalW), normalize(anisotropicNormal), anisotropy));\\n\\tdReflDirW = reflect(-dViewDirW, bentNormal);\\n}\\n\";\n\nvar reflectionCCPS = \"#ifdef CLEARCOAT\\nuniform float material_clearCoatReflectivity;\\nvoid addReflectionCC() {\\n\\tccReflection += vec4(calcReflection(ccReflDirW, ccGlossiness), material_clearCoatReflectivity);\\n}\\n#endif\\n\";\n\nvar reflectionCubePS = \"uniform samplerCube texture_cubeMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 lookupVec = fixSeams(cubeMapProject(tReflDirW));\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tlookupVec.x *= -1.0;\\n#endif\\n\\treturn $textureCubeSAMPLE(texture_cubeMap, lookupVec).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionDpAtlasPS = \"uniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec2 getDpAtlasUv(vec2 uv, float mip) {\\n\\tvec4 rect;\\n\\tfloat sx = saturate(mip - 2.0);\\n\\trect.x = sx * 0.5;\\n\\tfloat t = mip - rect.x * 6.0;\\n\\tfloat i = 1.0 - rect.x;\\n\\trect.y = min(t * 0.5, 0.75) * i + rect.x;\\n\\tfloat st = saturate(t);\\n\\trect.z = (1.0 - st * 0.5) * i;\\n\\trect.w = rect.z * 0.5;\\n\\tfloat rcRectZ = 1.0 / rect.z;\\n\\tfloat scaleFactor = 0.00390625 * rcRectZ;\\n\\tvec2 scale = vec2(scaleFactor, scaleFactor * 2.0);\\n\\tuv = uv * (vec2(1.0) - scale) + scale * 0.5;\\n\\tuv = uv * rect.zw + rect.xy;\\n\\treturn uv;\\n}\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDir = normalize(cubeMapProject(tReflDirW));\\n\\tbool up = reflDir.y > 0.0;\\n\\tfloat scale = 0.90909090909090909090909090909091;\\n\\tvec3 reflDirWarp = reflDir.xzx * vec3(-0.25, 0.5, 0.25);\\n\\tfloat reflDirVer = abs(reflDir.y) + 1.0;\\n\\treflDirWarp /= reflDirVer;\\n\\treflDirWarp *= scale;\\n\\treflDirWarp = vec3(0.75, 0.5, 0.25) - reflDirWarp;\\n\\tvec2 tc = up? reflDirWarp.xy : reflDirWarp.zy;\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tfloat mip = floor(bias);\\n\\tvec3 tex1 = $texture2DSAMPLE(texture_sphereMap, getDpAtlasUv(tc, mip)).rgb;\\n\\tmip = min(mip + 1.0, 5.0);\\n\\tvec3 tex2 = $texture2DSAMPLE(texture_sphereMap, getDpAtlasUv(tc, mip)).rgb;\\n\\ttex1 = mix(tex1, tex2, fract(bias));\\n\\ttex1 = processEnvironment(tex1);\\n\\treturn tex1;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionPrefilteredCubePS = \"uniform samplerCube texture_prefilteredCubeMap128;\\nuniform samplerCube texture_prefilteredCubeMap64;\\nuniform samplerCube texture_prefilteredCubeMap32;\\nuniform samplerCube texture_prefilteredCubeMap16;\\nuniform samplerCube texture_prefilteredCubeMap8;\\n#ifndef PMREM4\\n#define PMREM4\\nuniform samplerCube texture_prefilteredCubeMap4;\\n#endif\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 refl = cubeMapProject(tReflDirW);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\trefl.x *= -1.0;\\n#endif\\n\\tvec3 seam = calcSeam(refl);\\n\\tvec4 c0 = textureCube(texture_prefilteredCubeMap128, applySeam(refl, seam, 1.0 / 128.0));\\n\\tvec4 c1 = textureCube(texture_prefilteredCubeMap64, applySeam(refl, seam, 2.0 / 128.0));\\n\\tvec4 c2 = textureCube(texture_prefilteredCubeMap32, applySeam(refl, seam, 4.0 / 128.0));\\n\\tvec4 c3 = textureCube(texture_prefilteredCubeMap16, applySeam(refl, seam, 8.0 / 128.0));\\n\\tvec4 c4 = textureCube(texture_prefilteredCubeMap8, applySeam(refl, seam, 16.0 / 128.0));\\n\\tvec4 c5 = textureCube(texture_prefilteredCubeMap4, applySeam(refl, seam, 32.0 / 128.0));\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tvec4 cubes0;\\n\\tvec4 cubes1;\\n\\tif (bias < 1.0) {\\n\\t\\tcubes0 = c0;\\n\\t\\tcubes1 = c1;\\n\\t} else if (bias < 2.0) {\\n\\t\\tcubes0 = c1;\\n\\t\\tcubes1 = c2;\\n\\t} else if (bias < 3.0) {\\n\\t\\tcubes0 = c2;\\n\\t\\tcubes1 = c3;\\n\\t} else if (bias < 4.0) {\\n\\t\\tcubes0 = c3;\\n\\t\\tcubes1 = c4;\\n\\t} else {\\n\\t\\tcubes0 = c4;\\n\\t\\tcubes1 = c5;\\n\\t}\\n\\tvec4 cubeFinal = mix(cubes0, cubes1, fract(bias));\\n\\treturn processEnvironment($DECODE(cubeFinal).rgb);\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionPrefilteredCubeLodPS = \"#ifndef PMREM4\\n#define PMREM4\\n#ifndef GL2\\n#extension GL_EXT_shader_texture_lod : enable\\n#endif\\nuniform samplerCube texture_prefilteredCubeMap128;\\n#endif\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tvec3 fixedReflDir = fixSeams(cubeMapProject(tReflDirW), bias);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tvec3 refl = processEnvironment($DECODE( textureCubeLodEXT(texture_prefilteredCubeMap128, fixedReflDir, bias) ).rgb);\\n\\treturn refl;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionSpherePS = \"#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDirV = (mat3(matrix_view) * tReflDirW).xyz;\\n\\tfloat m = 2.0 * sqrt( dot(reflDirV.xy, reflDirV.xy) + (reflDirV.z+1.0)*(reflDirV.z+1.0) );\\n\\tvec2 sphereMapUv = reflDirV.xy / m + 0.5;\\n\\treturn $texture2DSAMPLE(texture_sphereMap, sphereMapUv).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionSphereLowPS = \"uniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDirV = vNormalV;\\n\\tvec2 sphereMapUv = reflDirV.xy * 0.5 + 0.5;\\n\\treturn $texture2DSAMPLE(texture_sphereMap, sphereMapUv).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar refractionPS = \"uniform float material_refraction, material_refractionIndex;\\nvec3 refract2(vec3 viewVec, vec3 Normal, float IOR) {\\n\\tfloat vn = dot(viewVec, Normal);\\n\\tfloat k = 1.0 - IOR * IOR * (1.0 - vn * vn);\\n\\tvec3 refrVec = IOR * viewVec - (IOR * vn + sqrt(k)) * Normal;\\n\\treturn refrVec;\\n}\\nvoid addRefraction() {\\n\\tvec3 tmp = dReflDirW;\\n\\tvec4 tmp2 = dReflection;\\n\\tdReflection = vec4(0.0);\\n\\tdReflDirW = refract2(-dViewDirW, dNormalW, material_refractionIndex);\\n\\taddReflection();\\n\\tdDiffuseLight = mix(dDiffuseLight, dReflection.rgb * dAlbedo, material_refraction);\\n\\tdReflDirW = tmp;\\n\\tdReflection = tmp2;\\n}\\n\";\n\nvar reprojectPS = \"\\nvarying vec2 vUv0;\\nuniform sampler2D sourceTex;\\nuniform samplerCube sourceCube;\\nuniform vec4 params;\\nfloat targetFace() { return params.x; }\\nfloat specularPower() { return params.y; }\\nfloat sourceCubeSeamScale() { return params.z; }\\nfloat targetCubeSeamScale() { return params.w; }\\nfloat PI = 3.141592653589793;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 decodeLinear(vec4 source) {\\n\\treturn source.rgb;\\n}\\nvec4 encodeLinear(vec3 source) {\\n\\treturn vec4(source, 1.0);\\n}\\nvec3 decodeGamma(vec4 source) {\\n\\treturn pow(source.xyz, vec3(2.2));\\n}\\nvec4 encodeGamma(vec3 source) {\\n\\treturn vec4(pow(source + 0.0000001, vec3(1.0 / 2.2)), 1.0);\\n}\\nvec3 decodeRGBM(vec4 rgbm) {\\n\\tvec3 color = (8.0 * rgbm.a) * rgbm.rgb;\\n\\treturn color * color;\\n}\\nvec4 encodeRGBM(vec3 source) {\\n\\tvec4 result;\\n\\tresult.rgb = pow(source.rgb, vec3(0.5));\\n\\tresult.rgb *= 1.0 / 8.0;\\n\\tresult.a = saturate( max( max( result.r, result.g ), max( result.b, 1.0 / 255.0 ) ) );\\n\\tresult.a = ceil(result.a * 255.0) / 255.0;\\n\\tresult.rgb /= result.a;\\n\\treturn result;\\n}\\nvec3 decodeRGBE(vec4 source) {\\n\\tif (source.a == 0.0) {\\n\\t\\treturn vec3(0.0, 0.0, 0.0);\\n\\t} else {\\n\\t\\treturn source.xyz * pow(2.0, source.w * 255.0 - 128.0);\\n\\t}\\n}\\nvec4 encodeRGBE(vec3 source) {\\n\\tfloat maxVal = max(source.x, max(source.y, source.z));\\n\\tif (maxVal < 1e-32) {\\n\\t\\treturn vec4(0, 0, 0, 0);\\n\\t} else {\\n\\t\\tfloat e = ceil(log2(maxVal));\\n\\t\\treturn vec4(source / pow(2.0, e), (e + 128.0) / 255.0);\\n\\t}\\n}\\nvec3 modifySeams(vec3 dir, float amount) {\\n\\tif (amount != 1.0) {\\n\\t\\tvec3 adir = abs(dir);\\n\\t\\tfloat M = max(max(adir.x, adir.y), adir.z);\\n\\t\\tif (adir.x == M) {\\n\\t\\t\\tdir.y *= amount;\\n\\t\\t\\tdir.z *= amount;\\n\\t\\t}\\n\\t\\telse if (adir.y == M) {\\n\\t\\t\\tdir.x *= amount;\\n\\t\\t\\tdir.z *= amount;\\n\\t\\t} else {\\n\\t\\t\\tdir.x *= amount;\\n\\t\\t\\tdir.y *= amount;\\n\\t\\t}\\n\\t}\\n\\treturn dir;\\n}\\nvec2 toSpherical(vec3 dir) {\\n\\treturn vec2(atan(dir.z, dir.x), asin(dir.y));\\n}\\nvec3 fromSpherical(vec2 uv) {\\n\\treturn vec3(cos(uv.y) * cos(uv.x),\\n\\t\\t\\t\\tsin(uv.y),\\n\\t\\t\\t\\tcos(uv.y) * sin(uv.x));\\n}\\nvec4 sampleEquirect(vec2 sph) {\\n\\tvec2 uv = sph / vec2(PI * 2.0, PI) + 0.5;\\n\\treturn texture2D(sourceTex, vec2(uv.x, 1.0 - uv.y));\\n}\\nvec4 sampleEquirect(vec3 dir) {\\n\\treturn sampleEquirect(toSpherical(dir));\\n}\\nvec4 sampleCubemap(vec3 dir) {\\n\\treturn textureCube(sourceCube, modifySeams(dir, sourceCubeSeamScale()));\\n}\\nvec4 sampleCubemap(vec2 sph) {\\n\\treturn sampleCubemap(fromSpherical(sph));\\n}\\nvec3 getDirectionEquirect() {\\n\\treturn fromSpherical((vec2(vUv0.x, 1.0 - vUv0.y) * 2.0 - 1.0) * vec2(PI, PI * 0.5));\\n}\\nfloat signNotZero(float k){\\n\\treturn(k >= 0.0) ? 1.0 : -1.0;\\n}\\nvec2 signNotZero(vec2 v) {\\n\\treturn vec2(signNotZero(v.x), signNotZero(v.y));\\n}\\nvec3 octDecode(vec2 o) {\\n\\tvec3 v = vec3(o.x, 1.0 - abs(o.x) - abs(o.y), o.y);\\n\\tif (v.y < 0.0) {\\n\\t\\tv.xz = (1.0 - abs(v.zx)) * signNotZero(v.xz);\\n\\t}\\n\\treturn normalize(v);\\n}\\nvec3 getDirectionOctahedral() {\\n\\treturn octDecode(vec2(vUv0.x, 1.0 - vUv0.y) * 2.0 - 1.0);\\n}\\nvec2 octEncode(in vec3 v) {\\n\\tfloat l1norm = abs(v.x) + abs(v.y) + abs(v.z);\\n\\tvec2 result = v.xz * (1.0 / l1norm);\\n\\tif (v.y < 0.0) {\\n\\t\\tresult = (1.0 - abs(result.yx)) * signNotZero(result.xy);\\n\\t}\\n\\treturn result;\\n}\\nvec4 sampleOctahedral(vec3 dir) {\\n\\tvec2 uv = octEncode(dir) * 0.5 + 0.5;\\n\\treturn texture2D(sourceTex, vec2(uv.x, 1.0 - uv.y));\\n}\\nvec4 sampleOctahedral(vec2 sph) {\\n\\treturn sampleOctahedral(fromSpherical(sph));\\n}\\nvec3 getDirectionCubemap() {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tfloat face = targetFace();\\n\\tvec3 vec;\\n\\tif (face == 0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face == 1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face == 2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face == 3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face == 4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\treturn normalize(modifySeams(vec, 1.0 / targetCubeSeamScale()));\\n}\\nmat3 matrixFromVector(vec3 n) {\\n\\tfloat a = 1.0 / (1.0 + n.z);\\n\\tfloat b = -n.x * n.y * a;\\n\\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\\n\\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\\n\\treturn mat3(b1, b2, n);\\n}\\nmat3 matrixFromVectorSlow(vec3 n) {\\n\\tvec3 a = normalize(cross(n, vec3(0, 1, 0)));\\n\\tvec3 b = cross(n, a);\\n\\treturn mat3(a, b, n);\\n}\\nfloat rnd(int i) {\\n\\tfloat sini = sin(float(i));\\n\\tfloat cosi = cos(float(i));\\n\\treturn fract(sin(dot(vec2(sini, cosi), vec2(12.9898, 78.233) * 2.0)) * 43758.5453);\\n}\\nvec3 hemisphereSamplePhong(vec2 uv, float specPow) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\treturn vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n}\\nvec4 reproject() {\\n\\tif (NUM_SAMPLES <= 1) {\\n\\t\\treturn ENCODE_FUNC(DECODE_FUNC(SOURCE_FUNC(TARGET_FUNC())));\\n\\t} else {\\n\\t\\tvec2 sph = toSpherical(TARGET_FUNC());\\n\\t\\tvec2 sphu = dFdx(sph);\\n\\t\\tvec2 sphv = dFdy(sph);\\n\\t\\tvec3 result = vec3(0.0);\\n\\t\\tfor (float u = 0.0; u < NUM_SAMPLES_SQRT; ++u) {\\n\\t\\t\\tfor (float v = 0.0; v < NUM_SAMPLES_SQRT; ++v) {\\n\\t\\t\\t\\tresult += DECODE_FUNC(SOURCE_FUNC(sph +\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  sphu * (u / NUM_SAMPLES_SQRT - 0.5) +\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  sphv * (v / NUM_SAMPLES_SQRT - 0.5)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn ENCODE_FUNC(result / (NUM_SAMPLES_SQRT * NUM_SAMPLES_SQRT));\\n\\t}\\n}\\nvec4 prefilter() {\\n\\tvec3 vec = TARGET_FUNC();\\n\\tmat3 vecSpace = matrixFromVectorSlow(vec);\\n\\tvec3 result = vec3(0.0);\\n\\tfor (int i=0; i<NUM_SAMPLES; ++i) {\\n\\t\\tvec2 uv = vec2(float(i) / float(NUM_SAMPLES), rnd(i));\\n\\t\\tvec3 dir = vecSpace * hemisphereSamplePhong(uv, specularPower());\\n\\t\\tresult += DECODE_FUNC(SOURCE_FUNC(dir));\\n\\t}\\n\\treturn ENCODE_FUNC(result / float(NUM_SAMPLES));\\n}\\nvoid main(void) {\\n\\tgl_FragColor = PROCESS_FUNC();\\n}\\n\";\n\nvar rgbmPS = \"vec3 decodeRGBM(vec4 rgbm) {\\n\\tvec3 color = (8.0 * rgbm.a) * rgbm.rgb;\\n\\treturn color * color;\\n}\\nvec3 texture2DRGBM(sampler2D tex, vec2 uv) {\\n\\treturn decodeRGBM(texture2D(tex, uv));\\n}\\nvec3 textureCubeRGBM(samplerCube tex, vec3 uvw) {\\n\\treturn decodeRGBM(textureCube(tex, uvw));\\n}\\n\";\n\nvar screenDepthPS = \"uniform sampler2D uDepthMap;\\n#ifndef SCREENSIZE\\n#define SCREENSIZE\\nuniform vec4 uScreenSize;\\n#endif\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\n#ifdef GL2\\nfloat linearizeDepth(float z) {\\n\\tz = z * 2.0 - 1.0;\\n\\treturn 1.0 / (camera_params.z * z + camera_params.w);\\n}\\n#else\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\treturn dot(rgbaDepth, bitShift);\\n}\\n#endif\\n#endif\\nfloat getLinearScreenDepth(vec2 uv) {\\n\\t#ifdef GL2\\n\\treturn linearizeDepth(texture2D(uDepthMap, uv).r) * camera_params.y;\\n\\t#else\\n\\treturn unpackFloat(texture2D(uDepthMap, uv)) * camera_params.y;\\n\\t#endif\\n}\\n#ifndef VERTEXSHADER\\nfloat getLinearScreenDepth() {\\n\\tvec2 uv = gl_FragCoord.xy * uScreenSize.zw;\\n\\treturn getLinearScreenDepth(uv);\\n}\\n#endif\\nfloat getLinearDepth(vec3 pos) {\\n\\treturn -(matrix_view * vec4(pos, 1.0)).z;\\n}\\n\";\n\nvar shadowCascadesPS = \"const float maxCascades = 4.0;\\nmat4 cascadeShadowMat;\\nvoid getShadowCascadeMatrix(mat4 shadowMatrixPalette[4], float shadowCascadeDistances[4], float shadowCascadeCount) {\\n\\tfloat depth = 1.0 / gl_FragCoord.w;\\n\\tfloat cascadeIndex = 0.0;\\n\\tfor (float i = 0.0; i < maxCascades; i++) {\\n\\t\\tif (depth < shadowCascadeDistances[int(i)]) {\\n\\t\\t\\tcascadeIndex = i;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n\\tcascadeIndex = min(cascadeIndex, shadowCascadeCount - 1.0);\\n\\t#ifdef GL2\\n\\t\\tcascadeShadowMat = shadowMatrixPalette[int(cascadeIndex)];\\n\\t#else\\n\\t\\tif (cascadeIndex == 0.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[0];\\n\\t\\t}\\n\\t\\telse if (cascadeIndex == 1.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[1];\\n\\t\\t}\\n\\t\\telse if (cascadeIndex == 2.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[2];\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[3];\\n\\t\\t}\\n\\t#endif\\n}\\nvoid fadeShadow(float shadowCascadeDistances[4]) {\\n\\tfloat depth = 1.0 / gl_FragCoord.w;\\n\\tif (depth > shadowCascadeDistances[int(maxCascades - 1.0)]) {\\n\\t\\tdShadowCoord.z = -9999999.0;\\n\\t}\\n}\\n\";\n\nvar shadowCommonPS = \"void normalOffsetPointShadow(vec4 shadowParams) {\\n\\tfloat distScale = length(dLightDirW);\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\tvec3 dir = wPos - dLightPosW;\\n\\tdLightDirW = dir;\\n}\\n\";\n\nvar shadowCoordPS = \"void _getShadowCoordOrtho(mat4 shadowMatrix, vec3 shadowParams, vec3 wPos) {\\n\\tdShadowCoord = (shadowMatrix * vec4(wPos, 1.0)).xyz;\\n\\tdShadowCoord.z = saturate(dShadowCoord.z) - 0.0001;\\n\\t#ifdef SHADOWBIAS\\n\\tdShadowCoord.z += getShadowBias(shadowParams.x, shadowParams.z);\\n\\t#endif\\n}\\nvoid _getShadowCoordPersp(mat4 shadowMatrix, vec4 shadowParams, vec3 wPos) {\\n\\tvec4 projPos = shadowMatrix * vec4(wPos, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tdShadowCoord.xy = projPos.xy;\\n\\tdShadowCoord.z = length(dLightDirW) * shadowParams.w;\\n\\t#ifdef SHADOWBIAS\\n\\tdShadowCoord.z += getShadowBias(shadowParams.x, shadowParams.z);\\n\\t#endif\\n}\\nvoid getShadowCoordOrtho(mat4 shadowMatrix, vec3 shadowParams) {\\n\\t_getShadowCoordOrtho(shadowMatrix, shadowParams, vPositionW);\\n}\\nvoid getShadowCoordPersp(mat4 shadowMatrix, vec4 shadowParams) {\\n\\t_getShadowCoordPersp(shadowMatrix, shadowParams, vPositionW);\\n}\\nvoid getShadowCoordPerspNormalOffset(mat4 shadowMatrix, vec4 shadowParams) {\\n\\tfloat distScale = abs(dot(vPositionW - dLightPosW, dLightDirNormW));\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\t_getShadowCoordPersp(shadowMatrix, shadowParams, wPos);\\n}\\nvoid getShadowCoordOrthoNormalOffset(mat4 shadowMatrix, vec3 shadowParams) {\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0);\\n\\t_getShadowCoordOrtho(shadowMatrix, shadowParams, wPos);\\n}\\n\";\n\nvar shadowCoordPerspZbufferPS = \"void _getShadowCoordPerspZbuffer(mat4 shadowMatrix, vec4 shadowParams, vec3 wPos) {\\n\\tvec4 projPos = shadowMatrix * vec4(wPos, 1.0);\\n\\tprojPos.xyz /= projPos.w;\\n\\tdShadowCoord = projPos.xyz;\\n}\\nvoid getShadowCoordPerspZbufferNormalOffset(mat4 shadowMatrix, vec4 shadowParams) {\\n\\tfloat distScale = abs(dot(vPositionW - dLightPosW, dLightDirNormW));\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\t_getShadowCoordPerspZbuffer(shadowMatrix, shadowParams, wPos);\\n}\\nvoid getShadowCoordPerspZbuffer(mat4 shadowMatrix, vec4 shadowParams) {\\n\\t_getShadowCoordPerspZbuffer(shadowMatrix, shadowParams, vPositionW);\\n}\\n\";\n\nvar shadowEVSMPS = \"float VSM$(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tvec3 moments = texture2D(tex, texCoords).xyz;\\n\\treturn calculateEVSM(moments, Z, vsmBias, exponent);\\n}\\nfloat getShadowVSM$(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, exponent);\\n}\\nfloat getShadowSpotVSM$(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, exponent);\\n}\\n\";\n\nvar shadowEVSMnPS = \"float VSM$(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tfloat pixelSize = 1.0 / resolution;\\n\\ttexCoords -= vec2(pixelSize);\\n\\tvec3 s00 = texture2D(tex, texCoords).xyz;\\n\\tvec3 s10 = texture2D(tex, texCoords + vec2(pixelSize, 0)).xyz;\\n\\tvec3 s01 = texture2D(tex, texCoords + vec2(0, pixelSize)).xyz;\\n\\tvec3 s11 = texture2D(tex, texCoords + vec2(pixelSize)).xyz;\\n\\tvec2 fr = fract(texCoords * resolution);\\n\\tvec3 h0 = mix(s00, s10, fr.x);\\n\\tvec3 h1 = mix(s01, s11, fr.x);\\n\\tvec3 moments = mix(h0, h1, fr.y);\\n\\treturn calculateEVSM(moments, Z, vsmBias, exponent);\\n}\\nfloat getShadowVSM$(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, exponent);\\n}\\nfloat getShadowSpotVSM$(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, exponent);\\n}\\n\";\n\nvar shadowStandardPS = \"vec3 lessThan2(vec3 a, vec3 b) {\\n\\treturn clamp((b - a)*1000.0, 0.0, 1.0);\\n}\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\treturn dot(rgbaDepth, bitShift);\\n}\\n#endif\\n#ifdef GL2\\nfloat _getShadowPCF3x3(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\tfloat z = dShadowCoord.z;\\n\\tvec2 uv = dShadowCoord.xy * shadowParams.x;\\n\\tfloat shadowMapSizeInv = 1.0 / shadowParams.x;\\n\\tvec2 base_uv = floor(uv + 0.5);\\n\\tfloat s = (uv.x + 0.5 - base_uv.x);\\n\\tfloat t = (uv.y + 0.5 - base_uv.y);\\n\\tbase_uv -= vec2(0.5);\\n\\tbase_uv *= shadowMapSizeInv;\\n\\tfloat sum = 0.0;\\n\\tfloat uw0 = (3.0 - 2.0 * s);\\n\\tfloat uw1 = (1.0 + 2.0 * s);\\n\\tfloat u0 = (2.0 - s) / uw0 - 1.0;\\n\\tfloat u1 = s / uw1 + 1.0;\\n\\tfloat vw0 = (3.0 - 2.0 * t);\\n\\tfloat vw1 = (1.0 + 2.0 * t);\\n\\tfloat v0 = (2.0 - t) / vw0 - 1.0;\\n\\tfloat v1 = t / vw1 + 1.0;\\n\\tu0 = u0 * shadowMapSizeInv + base_uv.x;\\n\\tv0 = v0 * shadowMapSizeInv + base_uv.y;\\n\\tu1 = u1 * shadowMapSizeInv + base_uv.x;\\n\\tv1 = v1 * shadowMapSizeInv + base_uv.y;\\n\\tsum += uw0 * vw0 * texture(shadowMap, vec3(u0, v0, z));\\n\\tsum += uw1 * vw0 * texture(shadowMap, vec3(u1, v0, z));\\n\\tsum += uw0 * vw1 * texture(shadowMap, vec3(u0, v1, z));\\n\\tsum += uw1 * vw1 * texture(shadowMap, vec3(u1, v1, z));\\n\\tsum *= 1.0f / 16.0;\\n\\treturn sum;\\n}\\nfloat getShadowPCF3x3(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF3x3(sampler2DShadow shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams.xyz);\\n}\\n#else\\nfloat _xgetShadowPCF3x3(mat3 depthKernel, sampler2D shadowMap, vec3 shadowParams) {\\n\\tmat3 shadowKernel;\\n\\tvec3 shadowCoord = dShadowCoord;\\n\\tvec3 shadowZ = vec3(shadowCoord.z);\\n\\tshadowKernel[0] = vec3(greaterThan(depthKernel[0], shadowZ));\\n\\tshadowKernel[1] = vec3(greaterThan(depthKernel[1], shadowZ));\\n\\tshadowKernel[2] = vec3(greaterThan(depthKernel[2], shadowZ));\\n\\tvec2 fractionalCoord = fract( shadowCoord.xy * shadowParams.x );\\n\\tshadowKernel[0] = mix(shadowKernel[0], shadowKernel[1], fractionalCoord.x);\\n\\tshadowKernel[1] = mix(shadowKernel[1], shadowKernel[2], fractionalCoord.x);\\n\\tvec4 shadowValues;\\n\\tshadowValues.x = mix(shadowKernel[0][0], shadowKernel[0][1], fractionalCoord.y);\\n\\tshadowValues.y = mix(shadowKernel[0][1], shadowKernel[0][2], fractionalCoord.y);\\n\\tshadowValues.z = mix(shadowKernel[1][0], shadowKernel[1][1], fractionalCoord.y);\\n\\tshadowValues.w = mix(shadowKernel[1][1], shadowKernel[1][2], fractionalCoord.y);\\n\\treturn dot( shadowValues, vec4( 1.0 ) ) * 0.25;\\n}\\nfloat _getShadowPCF3x3(sampler2D shadowMap, vec3 shadowParams) {\\n\\tvec3 shadowCoord = dShadowCoord;\\n\\tfloat xoffset = 1.0 / shadowParams.x;\\n\\tfloat dx0 = -xoffset;\\n\\tfloat dx1 = xoffset;\\n\\tmat3 depthKernel;\\n\\tdepthKernel[0][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, dx0)));\\n\\tdepthKernel[0][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, 0.0)));\\n\\tdepthKernel[0][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, dx1)));\\n\\tdepthKernel[1][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(0.0, dx0)));\\n\\tdepthKernel[1][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy));\\n\\tdepthKernel[1][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(0.0, dx1)));\\n\\tdepthKernel[2][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, dx0)));\\n\\tdepthKernel[2][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, 0.0)));\\n\\tdepthKernel[2][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, dx1)));\\n\\treturn _xgetShadowPCF3x3(depthKernel, shadowMap, shadowParams);\\n}\\nfloat getShadowPCF3x3(sampler2D shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF3x3(sampler2D shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams.xyz);\\n}\\n#endif\\nfloat _getShadowPoint(samplerCube shadowMap, vec4 shadowParams, vec3 dir) {\\n\\tvec3 tc = normalize(dir);\\n\\tvec3 tcAbs = abs(tc);\\n\\tvec4 dirX = vec4(1,0,0, tc.x);\\n\\tvec4 dirY = vec4(0,1,0, tc.y);\\n\\tfloat majorAxisLength = tc.z;\\n\\tif ((tcAbs.x > tcAbs.y) && (tcAbs.x > tcAbs.z)) {\\n\\t\\tdirX = vec4(0,0,1, tc.z);\\n\\t\\tdirY = vec4(0,1,0, tc.y);\\n\\t\\tmajorAxisLength = tc.x;\\n\\t} else if ((tcAbs.y > tcAbs.x) && (tcAbs.y > tcAbs.z)) {\\n\\t\\tdirX = vec4(1,0,0, tc.x);\\n\\t\\tdirY = vec4(0,0,1, tc.z);\\n\\t\\tmajorAxisLength = tc.y;\\n\\t}\\n\\tfloat shadowParamsInFaceSpace = ((1.0/shadowParams.x) * 2.0) * abs(majorAxisLength);\\n\\tvec3 xoffset = (dirX.xyz * shadowParamsInFaceSpace);\\n\\tvec3 yoffset = (dirY.xyz * shadowParamsInFaceSpace);\\n\\tvec3 dx0 = -xoffset;\\n\\tvec3 dy0 = -yoffset;\\n\\tvec3 dx1 = xoffset;\\n\\tvec3 dy1 = yoffset;\\n\\tmat3 shadowKernel;\\n\\tmat3 depthKernel;\\n\\tdepthKernel[0][0] = unpackFloat(textureCube(shadowMap, tc + dx0 + dy0));\\n\\tdepthKernel[0][1] = unpackFloat(textureCube(shadowMap, tc + dx0));\\n\\tdepthKernel[0][2] = unpackFloat(textureCube(shadowMap, tc + dx0 + dy1));\\n\\tdepthKernel[1][0] = unpackFloat(textureCube(shadowMap, tc + dy0));\\n\\tdepthKernel[1][1] = unpackFloat(textureCube(shadowMap, tc));\\n\\tdepthKernel[1][2] = unpackFloat(textureCube(shadowMap, tc + dy1));\\n\\tdepthKernel[2][0] = unpackFloat(textureCube(shadowMap, tc + dx1 + dy0));\\n\\tdepthKernel[2][1] = unpackFloat(textureCube(shadowMap, tc + dx1));\\n\\tdepthKernel[2][2] = unpackFloat(textureCube(shadowMap, tc + dx1 + dy1));\\n\\tvec3 shadowZ = vec3(length(dir) * shadowParams.w + shadowParams.z);\\n\\tshadowKernel[0] = vec3(lessThan2(depthKernel[0], shadowZ));\\n\\tshadowKernel[1] = vec3(lessThan2(depthKernel[1], shadowZ));\\n\\tshadowKernel[2] = vec3(lessThan2(depthKernel[2], shadowZ));\\n\\tvec2 uv = (vec2(dirX.w, dirY.w) / abs(majorAxisLength)) * 0.5;\\n\\tvec2 fractionalCoord = fract( uv * shadowParams.x );\\n\\tshadowKernel[0] = mix(shadowKernel[0], shadowKernel[1], fractionalCoord.x);\\n\\tshadowKernel[1] = mix(shadowKernel[1], shadowKernel[2], fractionalCoord.x);\\n\\tvec4 shadowValues;\\n\\tshadowValues.x = mix(shadowKernel[0][0], shadowKernel[0][1], fractionalCoord.y);\\n\\tshadowValues.y = mix(shadowKernel[0][1], shadowKernel[0][2], fractionalCoord.y);\\n\\tshadowValues.z = mix(shadowKernel[1][0], shadowKernel[1][1], fractionalCoord.y);\\n\\tshadowValues.w = mix(shadowKernel[1][1], shadowKernel[1][2], fractionalCoord.y);\\n\\treturn 1.0 - dot( shadowValues, vec4( 1.0 ) ) * 0.25;\\n}\\nfloat getShadowPointPCF3x3(samplerCube shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPoint(shadowMap, shadowParams, dLightDirW);\\n}\\n\";\n\nvar shadowStandardGL2PS = \"float _getShadowPCF5x5(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\tfloat z = dShadowCoord.z;\\n\\tvec2 uv = dShadowCoord.xy * shadowParams.x;\\n\\tfloat shadowMapSizeInv = 1.0 / shadowParams.x;\\n\\tvec2 base_uv = floor(uv + 0.5);\\n\\tfloat s = (uv.x + 0.5 - base_uv.x);\\n\\tfloat t = (uv.y + 0.5 - base_uv.y);\\n\\tbase_uv -= vec2(0.5);\\n\\tbase_uv *= shadowMapSizeInv;\\n\\tfloat uw0 = (4.0 - 3.0 * s);\\n\\tfloat uw1 = 7.0;\\n\\tfloat uw2 = (1.0 + 3.0 * s);\\n\\tfloat u0 = (3.0 - 2.0 * s) / uw0 - 2.0;\\n\\tfloat u1 = (3.0 + s) / uw1;\\n\\tfloat u2 = s / uw2 + 2.0;\\n\\tfloat vw0 = (4.0 - 3.0 * t);\\n\\tfloat vw1 = 7.0;\\n\\tfloat vw2 = (1.0 + 3.0 * t);\\n\\tfloat v0 = (3.0 - 2.0 * t) / vw0 - 2.0;\\n\\tfloat v1 = (3.0 + t) / vw1;\\n\\tfloat v2 = t / vw2 + 2.0;\\n\\tfloat sum = 0.0;\\n\\tu0 = u0 * shadowMapSizeInv + base_uv.x;\\n\\tv0 = v0 * shadowMapSizeInv + base_uv.y;\\n\\tu1 = u1 * shadowMapSizeInv + base_uv.x;\\n\\tv1 = v1 * shadowMapSizeInv + base_uv.y;\\n\\tu2 = u2 * shadowMapSizeInv + base_uv.x;\\n\\tv2 = v2 * shadowMapSizeInv + base_uv.y;\\n\\tsum += uw0 * vw0 * texture(shadowMap, vec3(u0, v0, z));\\n\\tsum += uw1 * vw0 * texture(shadowMap, vec3(u1, v0, z));\\n\\tsum += uw2 * vw0 * texture(shadowMap, vec3(u2, v0, z));\\n\\tsum += uw0 * vw1 * texture(shadowMap, vec3(u0, v1, z));\\n\\tsum += uw1 * vw1 * texture(shadowMap, vec3(u1, v1, z));\\n\\tsum += uw2 * vw1 * texture(shadowMap, vec3(u2, v1, z));\\n\\tsum += uw0 * vw2 * texture(shadowMap, vec3(u0, v2, z));\\n\\tsum += uw1 * vw2 * texture(shadowMap, vec3(u1, v2, z));\\n\\tsum += uw2 * vw2 * texture(shadowMap, vec3(u2, v2, z));\\n\\tsum *= 1.0f / 144.0;\\n\\tsum = gammaCorrectInput(sum);\\n\\tsum = saturate(sum);\\n\\treturn sum;\\n}\\nfloat getShadowPCF5x5(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF5x5(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF5x5(sampler2DShadow shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF5x5(shadowMap, shadowParams.xyz);\\n}\\n\";\n\nvar shadowVSM8PS = \"float calculateVSM8(vec3 moments, float Z, float vsmBias) {\\n\\tfloat VSMBias = vsmBias;\\n\\tfloat depthScale = VSMBias * Z;\\n\\tfloat minVariance1 = depthScale * depthScale;\\n\\treturn chebyshevUpperBound(moments.xy, Z, minVariance1, 0.1);\\n}\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nfloat VSM8(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tvec4 c = texture2D(tex, texCoords);\\n\\tvec3 moments = vec3(decodeFloatRG(c.xy), decodeFloatRG(c.zw), 0.0);\\n\\treturn calculateVSM8(moments, Z, vsmBias);\\n}\\nfloat getShadowVSM8(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM8(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, 0.0);\\n}\\nfloat getShadowSpotVSM8(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM8(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, 0.0);\\n}\\n\";\n\nvar shadowVSM_commonPS = \"float linstep(float a, float b, float v) {\\n\\treturn saturate((v - a) / (b - a));\\n}\\nfloat reduceLightBleeding(float pMax, float amount) {\\n   return linstep(amount, 1.0, pMax);\\n}\\nfloat chebyshevUpperBound(vec2 moments, float mean, float minVariance, float lightBleedingReduction) {\\n\\tfloat variance = moments.y - (moments.x * moments.x);\\n\\tvariance = max(variance, minVariance);\\n\\tfloat d = mean - moments.x;\\n\\tfloat pMax = variance / (variance + (d * d));\\n\\tpMax = reduceLightBleeding(pMax, lightBleedingReduction);\\n\\treturn (mean <= moments.x ? 1.0 : pMax);\\n}\\nfloat calculateEVSM(vec3 moments, float Z, float vsmBias, float exponent) {\\n\\tZ = 2.0 * Z - 1.0;\\n\\tfloat warpedDepth = exp(exponent * Z);\\n\\tmoments.xy += vec2(warpedDepth, warpedDepth*warpedDepth) * (1.0 - moments.z);\\n\\tfloat VSMBias = vsmBias;\\n\\tfloat depthScale = VSMBias * exponent * warpedDepth;\\n\\tfloat minVariance1 = depthScale * depthScale;\\n\\treturn chebyshevUpperBound(moments.xy, warpedDepth, minVariance1, 0.1);\\n}\\n\";\n\nvar skinBatchConstVS = \"attribute float vertex_boneIndices;\\nuniform vec4 matrix_pose[BONE_LIMIT * 3];\\nmat4 getBoneMatrix(const in float i) {\\n\\tvec4 v1 = matrix_pose[int(3.0 * i)];\\n\\tvec4 v2 = matrix_pose[int(3.0 * i + 1.0)];\\n\\tvec4 v3 = matrix_pose[int(3.0 * i + 2.0)];\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, 1\\n\\t);\\n}\\n\";\n\nvar skinBatchTexVS = \"attribute float vertex_boneIndices;\\nuniform highp sampler2D texture_poseMap;\\nuniform vec4 texture_poseMapSize;\\nmat4 getBoneMatrix(const in float i) {\\n\\tfloat j = i * 3.0;\\n\\tfloat dx = texture_poseMapSize.z;\\n\\tfloat dy = texture_poseMapSize.w;\\n\\tfloat y = floor(j * dx);\\n\\tfloat x = j - (y * texture_poseMapSize.x);\\n\\ty = dy * (y + 0.5);\\n\\tvec4 v1 = texture2D(texture_poseMap, vec2(dx * (x + 0.5), y));\\n\\tvec4 v2 = texture2D(texture_poseMap, vec2(dx * (x + 1.5), y));\\n\\tvec4 v3 = texture2D(texture_poseMap, vec2(dx * (x + 2.5), y));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, 1\\n\\t);\\n}\\n\";\n\nvar skinConstVS = \"attribute vec4 vertex_boneWeights;\\nattribute vec4 vertex_boneIndices;\\nuniform vec4 matrix_pose[BONE_LIMIT * 3];\\nvoid getBoneMatrix(const in float i, out vec4 v1, out vec4 v2, out vec4 v3) {\\n\\tv1 = matrix_pose[int(3.0 * i)];\\n\\tv2 = matrix_pose[int(3.0 * i + 1.0)];\\n\\tv3 = matrix_pose[int(3.0 * i + 2.0)];\\n}\\nmat4 getSkinMatrix(const in vec4 indices, const in vec4 weights) {\\n\\tvec4 a1, a2, a3;\\n\\tgetBoneMatrix(indices.x, a1, a2, a3);\\n\\tvec4 b1, b2, b3;\\n\\tgetBoneMatrix(indices.y, b1, b2, b3);\\n\\tvec4 c1, c2, c3;\\n\\tgetBoneMatrix(indices.z, c1, c2, c3);\\n\\tvec4 d1, d2, d3;\\n\\tgetBoneMatrix(indices.w, d1, d2, d3);\\n\\tvec4 v1 = a1 * weights.x + b1 * weights.y + c1 * weights.z + d1 * weights.w;\\n\\tvec4 v2 = a2 * weights.x + b2 * weights.y + c2 * weights.z + d2 * weights.w;\\n\\tvec4 v3 = a3 * weights.x + b3 * weights.y + c3 * weights.z + d3 * weights.w;\\n\\tfloat one = dot(weights, vec4(1.0));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, one\\n\\t);\\n}\\n\";\n\nvar skinTexVS = \"attribute vec4 vertex_boneWeights;\\nattribute vec4 vertex_boneIndices;\\nuniform highp sampler2D texture_poseMap;\\nuniform vec4 texture_poseMapSize;\\nvoid getBoneMatrix(const in float i, out vec4 v1, out vec4 v2, out vec4 v3) {\\n\\tfloat j = i * 3.0;\\n\\tfloat dx = texture_poseMapSize.z;\\n\\tfloat dy = texture_poseMapSize.w;\\n\\tfloat y = floor(j * dx);\\n\\tfloat x = j - (y * texture_poseMapSize.x);\\n\\ty = dy * (y + 0.5);\\n\\tv1 = texture2D(texture_poseMap, vec2(dx * (x + 0.5), y));\\n\\tv2 = texture2D(texture_poseMap, vec2(dx * (x + 1.5), y));\\n\\tv3 = texture2D(texture_poseMap, vec2(dx * (x + 2.5), y));\\n}\\nmat4 getSkinMatrix(const in vec4 indices, const in vec4 weights) {\\n\\tvec4 a1, a2, a3;\\n\\tgetBoneMatrix(indices.x, a1, a2, a3);\\n\\tvec4 b1, b2, b3;\\n\\tgetBoneMatrix(indices.y, b1, b2, b3);\\n\\tvec4 c1, c2, c3;\\n\\tgetBoneMatrix(indices.z, c1, c2, c3);\\n\\tvec4 d1, d2, d3;\\n\\tgetBoneMatrix(indices.w, d1, d2, d3);\\n\\tvec4 v1 = a1 * weights.x + b1 * weights.y + c1 * weights.z + d1 * weights.w;\\n\\tvec4 v2 = a2 * weights.x + b2 * weights.y + c2 * weights.z + d2 * weights.w;\\n\\tvec4 v3 = a3 * weights.x + b3 * weights.y + c3 * weights.z + d3 * weights.w;\\n\\tfloat one = dot(weights, vec4(1.0));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, one\\n\\t);\\n}\\n\";\n\nvar skyboxPS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\nvoid main(void) {\\n\\tgl_FragColor = textureCube(texture_cubeMap, fixSeams(vViewDir));\\n}\\n\";\n\nvar skyboxVS = \"attribute vec3 aPosition;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform mat4 matrix_projectionSkybox;\\nvarying vec3 vViewDir;\\nvoid main(void) {\\n\\tmat4 view = matrix_view;\\n\\tview[3][0] = view[3][1] = view[3][2] = 0.0;\\n\\tgl_Position = matrix_projectionSkybox * view * vec4(aPosition, 1.0);\\n\\tgl_Position.z = gl_Position.w - 0.00001;\\n\\tvViewDir = aPosition;\\n}\\n\";\n\nvar skyboxHDRPS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\n#ifdef CUBEMAP_ROTATION\\nuniform mat3 cubeMapRotationMatrix;\\n#endif\\nvoid main(void) {\\n#ifdef CUBEMAP_ROTATION\\n\\tvec3 dir=vViewDir * cubeMapRotationMatrix;\\n#else\\n\\tvec3 dir=vViewDir;\\n#endif\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tdir.x *= -1.0;\\n#endif\\n\\tvec3 color = processEnvironment($textureCubeSAMPLE(texture_cubeMap, fixSeamsStatic(dir, $FIXCONST)).rgb);\\n\\tcolor = toneMap(color);\\n\\tcolor = gammaCorrectOutput(color);\\n\\tgl_FragColor = vec4(color, 1.0);\\n}\\n\";\n\nvar skyboxPrefilteredCubePS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\nvec3 fixSeamsStretch(vec3 vec, float mipmapIndex, float cubemapSize) {\\n\\tfloat scale = 1.0 - exp2(mipmapIndex) / cubemapSize;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvoid main(void) {\\n\\tvec3 color = textureCubeRGBM(texture_cubeMap, fixSeamsStretch(vViewDir, 0.0, 128.0));\\n\\tcolor = toneMap(color);\\n\\tcolor = gammaCorrectOutput(color);\\n\\tgl_FragColor = vec4(color, 1.0);\\n}\\n\";\n\nvar specularPS = \"#ifdef MAPCOLOR\\nuniform vec3 material_specular;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_specularMap;\\n#endif\\nvoid getSpecularity() {\\n\\tdSpecularity = vec3(1.0);\\n\\t#ifdef MAPCOLOR\\n\\tdSpecularity *= material_specular;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdSpecularity *= texture2D(texture_specularMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdSpecularity *= saturate(vVertexColor.$VC);\\n\\t#endif\\n}\\n\";\n\nvar specularAaNonePS = \"float antiAliasGlossiness(float power) {\\n\\treturn power;\\n}\\n\";\n\nvar specularAaToksvigPS = \"float antiAliasGlossiness(float power) {\\n\\tfloat rlen = 1.0 / saturate(length(dNormalMap));\\n\\tfloat toksvig = 1.0 / (1.0 + power * (rlen - 1.0));\\n\\treturn power * mix(1.0, toksvig, material_bumpiness);\\n}\\n\";\n\nvar specularAaToksvigFastPS = \"float antiAliasGlossiness(float power) {\\n\\tfloat rlen = 1.0 / saturate(length(dNormalMap));\\n\\tfloat toksvig = 1.0 / (1.0 + power * (rlen - 1.0));\\n\\treturn power * toksvig;\\n}\\n\";\n\nvar spotPS = \"float getSpotEffect(vec3 lightSpotDirW, float lightInnerConeAngle, float lightOuterConeAngle) {\\n\\tfloat cosAngle = dot(dLightDirNormW, lightSpotDirW);\\n\\treturn smoothstep(lightOuterConeAngle, lightInnerConeAngle, cosAngle);\\n}\\n\";\n\nvar startPS = \"void main(void) {\\n\\tdDiffuseLight = vec3(0);\\n\\tdSpecularLight = vec3(0);\\n\\tdReflection = vec4(0);\\n\\tdSpecularity = vec3(0);\\n\\t#ifdef CLEARCOAT\\n\\tccSpecularLight = vec3(0);\\n\\tccReflection = vec4(0);\\n\\t#endif\\n\";\n\nvar startVS = \"void main(void) {\\n\\tgl_Position = getPosition();\\n\";\n\nvar startNineSlicedPS = \"\\tnineSlicedUv = vUv0;\\n\\tnineSlicedUv.y = 1.0 - nineSlicedUv.y;\\n\";\n\nvar startNineSlicedTiledPS = \"\\tvec2 tileMask = step(vMask, vec2(0.99999));\\n\\tvec2 tileSize = 0.5 * (innerOffset.xy + innerOffset.zw);\\n\\tvec2 tileScale = vec2(1.0) / (vec2(1.0) - tileSize);\\n\\tvec2 clampedUv = mix(innerOffset.xy * 0.5, vec2(1.0) - innerOffset.zw * 0.5, fract((vTiledUv - tileSize) * tileScale));\\n\\tclampedUv = clampedUv * atlasRect.zw + atlasRect.xy;\\n\\tnineSlicedUv = vUv0 * tileMask + clampedUv * (vec2(1.0) - tileMask);\\n\\tnineSlicedUv.y = 1.0 - nineSlicedUv.y;\\n\";\n\nvar storeEVSMPS = \"float exponent = VSM_EXPONENT;\\ndepth = 2.0 * depth - 1.0;\\ndepth =  exp(exponent * depth);\\ngl_FragColor = vec4(depth, depth*depth, 1.0, 1.0);\\n\";\n\nvar tangentBinormalVS = \"vec3 getTangent() {\\n\\treturn normalize(dNormalMatrix * vertex_tangent.xyz);\\n}\\nvec3 getBinormal() {\\n\\treturn cross(vNormalW, vTangentW) * vertex_tangent.w;\\n}\\nvec3 getObjectSpaceUp() {\\n\\treturn normalize(dNormalMatrix * vec3(0, 1, 0));\\n}\\n\";\n\nvar TBNPS = \"void getTBN() {\\n\\tdTBN = mat3(normalize(dTangentW), normalize(dBinormalW), normalize(dVertexNormalW));\\n}\\n\";\n\nvar TBNderivativePS = \"\\nvoid getTBN() {\\n\\tvec2 uv = $UV;\\n\\tvec3 dp1 = dFdx( vPositionW );\\n\\tvec3 dp2 = dFdy( vPositionW );\\n\\tvec2 duv1 = dFdx( uv );\\n\\tvec2 duv2 = dFdy( uv );\\n\\tvec3 dp2perp = cross( dp2, dVertexNormalW );\\n\\tvec3 dp1perp = cross( dVertexNormalW, dp1 );\\n\\tvec3 T = dp2perp * duv1.x + dp1perp * duv2.x;\\n\\tvec3 B = dp2perp * duv1.y + dp1perp * duv2.y;\\n\\tfloat denom = max( dot(T,T), dot(B,B) );\\n\\tfloat invmax = (denom == 0.0) ? 0.0 : 1.0 / sqrt( denom );\\n\\tdTBN = mat3( T * invmax, -B * invmax, dVertexNormalW );\\n}\\n\";\n\nvar TBNfastPS = \"void getTBN() {\\n\\tdTBN = mat3(dTangentW, dBinormalW, dVertexNormalW);\\n}\\n\";\n\nvar TBNObjectSpacePS = \"void getTBN() {\\n\\tvec3 B = cross(dVertexNormalW, vObjectSpaceUpW);\\n\\tvec3 T = cross(dVertexNormalW, B);\\n\\tif (dot(B,B)==0.0)\\n\\t{\\n\\t\\tfloat major=max(max(dVertexNormalW.x, dVertexNormalW.y),dVertexNormalW.z);\\n\\t\\tif (dVertexNormalW.x==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(0,1,0));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t\\telse if (dVertexNormalW.y==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(0,0,1));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t\\telse if (dVertexNormalW.z==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(1,0,0));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t}\\n\\tdTBN = mat3(normalize(T), normalize(B), normalize(dVertexNormalW));\\n}\\n\";\n\nvar tonemappingAcesPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\tfloat tA = 2.51;\\n\\tfloat tB = 0.03;\\n\\tfloat tC = 2.43;\\n\\tfloat tD = 0.59;\\n\\tfloat tE = 0.14;\\n\\tvec3 x = color * exposure;\\n\\treturn (x*(tA*x+tB))/(x*(tC*x+tD)+tE);\\n}\\n\";\n\nvar tonemappingAces2PS = \"uniform float exposure;\\nconst mat3 ACESInputMat = mat3(\\n\\t0.59719, 0.35458, 0.04823,\\n\\t0.07600, 0.90834, 0.01566,\\n\\t0.02840, 0.13383, 0.83777\\n);\\nconst mat3 ACESOutputMat = mat3(\\n\\t 1.60475, -0.53108, -0.07367,\\n\\t-0.10208,  1.10813, -0.00605,\\n\\t-0.00327, -0.07276,  1.07602\\n);\\nvec3 RRTAndODTFit(vec3 v) {\\n\\tvec3 a = v * (v + 0.0245786) - 0.000090537;\\n\\tvec3 b = v * (0.983729 * v + 0.4329510) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 toneMap(vec3 color) {\\n\\tcolor *= exposure;\\n\\tcolor = color * ACESInputMat;\\n\\tcolor = RRTAndODTFit(color);\\n\\tcolor = color * ACESOutputMat;\\n\\tcolor = clamp(color, 0.0, 1.0);\\n\\treturn color;\\n}\\n\";\n\nvar tonemappingFilmicPS = \"const float A =  0.15;\\nconst float B =  0.50;\\nconst float C =  0.10;\\nconst float D =  0.20;\\nconst float E =  0.02;\\nconst float F =  0.30;\\nconst float W =  11.2;\\nuniform float exposure;\\nvec3 uncharted2Tonemap(vec3 x) {\\n   return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\\n}\\nvec3 toneMap(vec3 color) {\\n\\tcolor = uncharted2Tonemap(color * exposure);\\n\\tvec3 whiteScale = 1.0 / uncharted2Tonemap(vec3(W,W,W));\\n\\tcolor = color * whiteScale;\\n\\treturn color;\\n}\\n\";\n\nvar tonemappingHejlPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\tcolor *= exposure;\\n\\tconst float  A = 0.22, B = 0.3, C = .1, D = 0.2, E = .01, F = 0.3;\\n\\tconst float Scl = 1.25;\\n\\tvec3 h = max( vec3(0.0), color - vec3(0.004) );\\n\\treturn (h*((Scl*A)*h+Scl*vec3(C*B,C*B,C*B))+Scl*vec3(D*E,D*E,D*E)) / (h*(A*h+vec3(B,B,B))+vec3(D*F,D*F,D*F)) - Scl*vec3(E/F,E/F,E/F);\\n}\\n\";\n\nvar tonemappingLinearPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\treturn color * exposure;\\n}\\n\";\n\nvar tonemappingNonePS = \"vec3 toneMap(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar transformVS = \"#ifdef PIXELSNAP\\nuniform vec4 uScreenSize;\\n#endif\\n#ifdef MORPHING\\nuniform vec4 morph_weights_a;\\nuniform vec4 morph_weights_b;\\n#endif\\n#ifdef MORPHING_TEXTURE_BASED\\nuniform vec4 morph_tex_params;\\nvec2 getTextureMorphCoords() {\\n\\tfloat vertexId = morph_vertex_id;\\n\\tvec2 textureSize = morph_tex_params.xy;\\n\\tvec2 invTextureSize = morph_tex_params.zw;\\n\\tfloat morphGridV = floor(vertexId * invTextureSize.x);\\n\\tfloat morphGridU = vertexId - (morphGridV * textureSize.x);\\n\\treturn (vec2(morphGridU, morphGridV) * invTextureSize) + (0.5 * invTextureSize);\\n}\\n#endif\\n#ifdef MORPHING_TEXTURE_BASED_POSITION\\nuniform highp sampler2D morphPositionTex;\\n#endif\\nmat4 getModelMatrix() {\\n\\t#ifdef DYNAMICBATCH\\n\\treturn getBoneMatrix(vertex_boneIndices);\\n\\t#elif defined(SKIN)\\n\\treturn matrix_model * getSkinMatrix(vertex_boneIndices, vertex_boneWeights);\\n\\t#elif defined(INSTANCING)\\n\\treturn mat4(instance_line1, instance_line2, instance_line3, instance_line4);\\n\\t#else\\n\\treturn matrix_model;\\n\\t#endif\\n}\\nvec4 getPosition() {\\n\\tdModelMatrix = getModelMatrix();\\n\\tvec3 localPos = vertex_position;\\n\\t#ifdef NINESLICED\\n\\tlocalPos.xz *= outerScale;\\n\\tvec2 positiveUnitOffset = clamp(vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tvec2 negativeUnitOffset = clamp(-vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tlocalPos.xz += (-positiveUnitOffset * innerOffset.xy + negativeUnitOffset * innerOffset.zw) * vertex_texCoord0.xy;\\n\\tvTiledUv = (localPos.xz - outerScale + innerOffset.xy) * -0.5 + 1.0;\\n\\tlocalPos.xz *= -0.5;\\n\\tlocalPos = localPos.xzy;\\n\\t#endif\\n\\t#ifdef MORPHING\\n\\t#ifdef MORPHING_POS03\\n\\tlocalPos.xyz += morph_weights_a[0] * morph_pos0;\\n\\tlocalPos.xyz += morph_weights_a[1] * morph_pos1;\\n\\tlocalPos.xyz += morph_weights_a[2] * morph_pos2;\\n\\tlocalPos.xyz += morph_weights_a[3] * morph_pos3;\\n\\t#endif\\n\\t#ifdef MORPHING_POS47\\n\\tlocalPos.xyz += morph_weights_b[0] * morph_pos4;\\n\\tlocalPos.xyz += morph_weights_b[1] * morph_pos5;\\n\\tlocalPos.xyz += morph_weights_b[2] * morph_pos6;\\n\\tlocalPos.xyz += morph_weights_b[3] * morph_pos7;\\n\\t#endif\\n\\t#endif\\n\\t#ifdef MORPHING_TEXTURE_BASED_POSITION\\n\\tvec2 morphUV = getTextureMorphCoords();\\n\\tvec3 morphPos = texture2D(morphPositionTex, morphUV).xyz;\\n\\tlocalPos += morphPos;\\n\\t#endif\\n\\tvec4 posW = dModelMatrix * vec4(localPos, 1.0);\\n\\t#ifdef SCREENSPACE\\n\\tposW.zw = vec2(0.0, 1.0);\\n\\t#endif\\n\\tdPositionW = posW.xyz;\\n\\tvec4 screenPos;\\n\\t#ifdef UV1LAYOUT\\n\\tscreenPos = vec4(vertex_texCoord1.xy * 2.0 - 1.0, 0.5, 1);\\n\\t#else\\n\\t#ifdef SCREENSPACE\\n\\tscreenPos = posW;\\n\\t#else\\n\\tscreenPos = matrix_viewProjection * posW;\\n\\t#endif\\n\\t#ifdef PIXELSNAP\\n\\tscreenPos.xy = (screenPos.xy * 0.5) + 0.5;\\n\\tscreenPos.xy *= uScreenSize.xy;\\n\\tscreenPos.xy = floor(screenPos.xy);\\n\\tscreenPos.xy *= uScreenSize.zw;\\n\\tscreenPos.xy = (screenPos.xy * 2.0) - 1.0;\\n\\t#endif\\n\\t#endif\\n\\treturn screenPos;\\n}\\nvec3 getWorldPosition() {\\n\\treturn dPositionW;\\n}\\n\";\n\nvar transformDeclVS = \"attribute vec3 vertex_position;\\nuniform mat4 matrix_model;\\nuniform mat4 matrix_viewProjection;\\nvec3 dPositionW;\\nmat4 dModelMatrix;\\n\";\n\nvar uv0VS = \"#ifdef NINESLICED\\nvec2 getUv0() {\\n\\tvec2 uv = vertex_position.xz;\\n\\tvec2 positiveUnitOffset = clamp(vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tvec2 negativeUnitOffset = clamp(-vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tuv += (-positiveUnitOffset * innerOffset.xy + negativeUnitOffset * innerOffset.zw) * vertex_texCoord0.xy;\\n\\tuv = uv * -0.5 + 0.5;\\n\\tuv = uv * atlasRect.zw + atlasRect.xy;\\n\\tvMask = vertex_texCoord0.xy;\\n\\treturn uv;\\n}\\n#else\\nvec2 getUv0() {\\n\\treturn vertex_texCoord0;\\n}\\n#endif\\n\";\n\nvar uv1VS = \"vec2 getUv1() {\\n\\treturn vertex_texCoord1;\\n}\\n\";\n\nvar viewDirPS = \"void getViewDir() {\\n\\tdViewDirW = normalize(view_position - vPositionW);\\n}\\n\";\n\nvar viewNormalVS = \"#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nvec3 getViewNormal() {\\n\\treturn mat3(matrix_view) * vNormalW;\\n}\\n\";\n\nconst shaderChunks = {\n\talphaTestPS: alphaTestPS,\n\tambientConstantPS: ambientConstantPS,\n\tambientPrefilteredCubePS: ambientPrefilteredCubePS,\n\tambientPrefilteredCubeLodPS: ambientPrefilteredCubeLodPS,\n\tambientSHPS: ambientSHPS,\n\taoPS: aoPS,\n\taoSpecOccPS: aoSpecOccPS,\n\taoSpecOccConstPS: aoSpecOccConstPS,\n\taoSpecOccConstSimplePS: aoSpecOccConstSimplePS,\n\taoSpecOccSimplePS: aoSpecOccSimplePS,\n\tbakeDirLmEndPS: bakeDirLmEndPS,\n\tbakeLmEndPS: bakeLmEndPS,\n\tbasePS: basePS,\n\tbaseVS: baseVS,\n\tbaseNineSlicedPS: baseNineSlicedPS,\n\tbaseNineSlicedVS: baseNineSlicedVS,\n\tbaseNineSlicedTiledPS: baseNineSlicedTiledPS,\n\tbiasConstPS: biasConstPS,\n\tblurVSMPS: blurVSMPS,\n\tclearCoatPS: clearCoatPS,\n\tclearCoatGlossPS: clearCoatGlossPS,\n\tclearCoatNormalPS: clearCoatNormalPS,\n\tclusteredLightLoopPS: clusteredLightLoopPS,\n\tclusteredLightPS: clusteredLightPS,\n\tcombineClearCoatPS: combineClearCoatPS,\n\tcombineDiffusePS: combineDiffusePS,\n\tcombineDiffuseSpecularPS: combineDiffuseSpecularPS,\n\tcombineDiffuseSpecularNoConservePS: combineDiffuseSpecularNoConservePS,\n\tcombineDiffuseSpecularNoReflPS: combineDiffuseSpecularNoReflPS,\n\tcombineDiffuseSpecularNoReflSeparateAmbientPS: combineDiffuseSpecularNoReflSeparateAmbientPS,\n\tcombineDiffuseSpecularOldPS: combineDiffuseSpecularOldPS,\n\tcookiePS: cookiePS,\n\tcubeMapProjectBoxPS: cubeMapProjectBoxPS,\n\tcubeMapProjectNonePS: cubeMapProjectNonePS,\n\tcubeMapRotatePS: cubeMapRotatePS,\n\tdetailModesPS: detailModesPS,\n\tdiffusePS: diffusePS,\n\tdiffuseDetailMapPS: diffuseDetailMapPS,\n\tdilatePS: dilatePS,\n\tdpAtlasQuadPS: dpAtlasQuadPS,\n\temissivePS: emissivePS,\n\tendPS: endPS,\n\tendVS: endVS,\n\tenvConstPS: envConstPS,\n\tenvMultiplyPS: envMultiplyPS,\n\textensionPS: extensionPS,\n\textensionVS: extensionVS,\n\tfalloffInvSquaredPS: falloffInvSquaredPS,\n\tfalloffLinearPS: falloffLinearPS,\n\tfixCubemapSeamsNonePS: fixCubemapSeamsNonePS,\n\tfixCubemapSeamsStretchPS: fixCubemapSeamsStretchPS,\n\tfogExpPS: fogExpPS,\n\tfogExp2PS: fogExp2PS,\n\tfogLinearPS: fogLinearPS,\n\tfogNonePS: fogNonePS,\n\tfresnelSchlickPS: fresnelSchlickPS,\n\tfullscreenQuadPS: fullscreenQuadPS,\n\tfullscreenQuadVS: fullscreenQuadVS,\n\tgamma1_0PS: gamma1_0PS,\n\tgamma2_2PS: gamma2_2PS,\n\tgenParaboloidPS: genParaboloidPS,\n\tgles3PS: gles3PS,\n\tgles3VS: gles3VS,\n\tglossPS: glossPS,\n\tinstancingVS: instancingVS,\n\tlightDiffuseLambertPS: lightDiffuseLambertPS,\n\tlightDirPointPS: lightDirPointPS,\n\tlightmapDirPS: lightmapDirPS,\n\tlightmapSinglePS: lightmapSinglePS,\n\tlightmapSingleVertPS: lightmapSingleVertPS,\n\tlightSpecularAnisoGGXPS: lightSpecularAnisoGGXPS,\n\tlightSpecularBlinnPS: lightSpecularBlinnPS,\n\tlightSpecularPhongPS: lightSpecularPhongPS,\n\tltc: ltc,\n\tmetalnessPS: metalnessPS,\n\tmsdfPS: msdfPS,\n\tnormalVS: normalVS,\n\tnormalDetailMapPS: normalDetailMapPS,\n\tnormalInstancedVS: normalInstancedVS,\n\tnormalMapPS: normalMapPS,\n\tnormalMapFastPS: normalMapFastPS,\n\tnormalSkinnedVS: normalSkinnedVS,\n\tnormalVertexPS: normalVertexPS,\n\tnormalXYPS: normalXYPS,\n\tnormalXYZPS: normalXYZPS,\n\topacityPS: opacityPS,\n\toutputAlphaPS: outputAlphaPS,\n\toutputAlphaOpaquePS: outputAlphaOpaquePS,\n\toutputAlphaPremulPS: outputAlphaPremulPS,\n\toutputCubemapPS: outputCubemapPS,\n\toutputTex2DPS: outputTex2DPS,\n\tpackDepthPS: packDepthPS,\n\tpackDepthMaskPS: packDepthMaskPS,\n\tparallaxPS: parallaxPS,\n\tparticlePS: particlePS,\n\tparticleVS: particleVS,\n\tparticleAnimFrameClampVS: particleAnimFrameClampVS,\n\tparticleAnimFrameLoopVS: particleAnimFrameLoopVS,\n\tparticleAnimTexVS: particleAnimTexVS,\n\tparticleInputFloatPS: particleInputFloatPS,\n\tparticleInputRgba8PS: particleInputRgba8PS,\n\tparticleOutputFloatPS: particleOutputFloatPS,\n\tparticleOutputRgba8PS: particleOutputRgba8PS,\n\tparticleUpdaterAABBPS: particleUpdaterAABBPS,\n\tparticleUpdaterEndPS: particleUpdaterEndPS,\n\tparticleUpdaterInitPS: particleUpdaterInitPS,\n\tparticleUpdaterNoRespawnPS: particleUpdaterNoRespawnPS,\n\tparticleUpdaterOnStopPS: particleUpdaterOnStopPS,\n\tparticleUpdaterRespawnPS: particleUpdaterRespawnPS,\n\tparticleUpdaterSpherePS: particleUpdaterSpherePS,\n\tparticleUpdaterStartPS: particleUpdaterStartPS,\n\tparticle_billboardVS: particle_billboardVS,\n\tparticle_blendAddPS: particle_blendAddPS,\n\tparticle_blendMultiplyPS: particle_blendMultiplyPS,\n\tparticle_blendNormalPS: particle_blendNormalPS,\n\tparticle_cpuVS: particle_cpuVS,\n\tparticle_cpu_endVS: particle_cpu_endVS,\n\tparticle_customFaceVS: particle_customFaceVS,\n\tparticle_endPS: particle_endPS,\n\tparticle_endVS: particle_endVS,\n\tparticle_halflambertPS: particle_halflambertPS,\n\tparticle_initVS: particle_initVS,\n\tparticle_lambertPS: particle_lambertPS,\n\tparticle_lightingPS: particle_lightingPS,\n\tparticle_localShiftVS: particle_localShiftVS,\n\tparticle_meshVS: particle_meshVS,\n\tparticle_normalVS: particle_normalVS,\n\tparticle_normalMapPS: particle_normalMapPS,\n\tparticle_pointAlongVS: particle_pointAlongVS,\n\tparticle_softPS: particle_softPS,\n\tparticle_softVS: particle_softVS,\n\tparticle_stretchVS: particle_stretchVS,\n\tparticle_TBNVS: particle_TBNVS,\n\tparticle_wrapVS: particle_wrapVS,\n\tprecisionTestPS: precisionTestPS,\n\tprecisionTest2PS: precisionTest2PS,\n\tprefilterCubemapPS: prefilterCubemapPS,\n\treflDirPS: reflDirPS,\n\treflDirAnisoPS: reflDirAnisoPS,\n\treflectionCCPS: reflectionCCPS,\n\treflectionCubePS: reflectionCubePS,\n\treflectionDpAtlasPS: reflectionDpAtlasPS,\n\treflectionPrefilteredCubePS: reflectionPrefilteredCubePS,\n\treflectionPrefilteredCubeLodPS: reflectionPrefilteredCubeLodPS,\n\treflectionSpherePS: reflectionSpherePS,\n\treflectionSphereLowPS: reflectionSphereLowPS,\n\trefractionPS: refractionPS,\n\treprojectPS: reprojectPS,\n\trgbmPS: rgbmPS,\n\tscreenDepthPS: screenDepthPS,\n\tshadowCascadesPS: shadowCascadesPS,\n\tshadowCommonPS: shadowCommonPS,\n\tshadowCoordPS: shadowCoordPS,\n\tshadowCoordPerspZbufferPS: shadowCoordPerspZbufferPS,\n\tshadowEVSMPS: shadowEVSMPS,\n\tshadowEVSMnPS: shadowEVSMnPS,\n\tshadowStandardPS: shadowStandardPS,\n\tshadowStandardGL2PS: shadowStandardGL2PS,\n\tshadowVSM8PS: shadowVSM8PS,\n\tshadowVSM_commonPS: shadowVSM_commonPS,\n\tskinBatchConstVS: skinBatchConstVS,\n\tskinBatchTexVS: skinBatchTexVS,\n\tskinConstVS: skinConstVS,\n\tskinTexVS: skinTexVS,\n\tskyboxPS: skyboxPS,\n\tskyboxVS: skyboxVS,\n\tskyboxHDRPS: skyboxHDRPS,\n\tskyboxPrefilteredCubePS: skyboxPrefilteredCubePS,\n\tspecularPS: specularPS,\n\tspecularAaNonePS: specularAaNonePS,\n\tspecularAaToksvigPS: specularAaToksvigPS,\n\tspecularAaToksvigFastPS: specularAaToksvigFastPS,\n\tspotPS: spotPS,\n\tstartPS: startPS,\n\tstartVS: startVS,\n\tstartNineSlicedPS: startNineSlicedPS,\n\tstartNineSlicedTiledPS: startNineSlicedTiledPS,\n\tstoreEVSMPS: storeEVSMPS,\n\ttangentBinormalVS: tangentBinormalVS,\n\tTBNPS: TBNPS,\n\tTBNderivativePS: TBNderivativePS,\n\tTBNfastPS: TBNfastPS,\n\tTBNObjectSpacePS: TBNObjectSpacePS,\n\ttonemappingAcesPS: tonemappingAcesPS,\n\ttonemappingAces2PS: tonemappingAces2PS,\n\ttonemappingFilmicPS: tonemappingFilmicPS,\n\ttonemappingHejlPS: tonemappingHejlPS,\n\ttonemappingLinearPS: tonemappingLinearPS,\n\ttonemappingNonePS: tonemappingNonePS,\n\ttransformVS: transformVS,\n\ttransformDeclVS: transformDeclVS,\n\tuv0VS: uv0VS,\n\tuv1VS: uv1VS,\n\tviewDirPS: viewDirPS,\n\tviewNormalVS: viewNormalVS\n};\n\nfunction gammaCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === GAMMA_SRGB || value === GAMMA_SRGBFAST) {\n\t\treturn chunks.gamma2_2PS ? chunks.gamma2_2PS : shaderChunks.gamma2_2PS;\n\t} else if (value === GAMMA_SRGBHDR) {\n\t\treturn \"#define HDR\\n\" + (chunks.gamma2_2PS ? chunks.gamma2_2PS : shaderChunks.gamma2_2PS);\n\t}\n\n\treturn chunks.gamma1_0PS ? chunks.gamma1_0PS : shaderChunks.gamma1_0PS;\n}\n\nfunction tonemapCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === TONEMAP_FILMIC) {\n\t\treturn chunks.tonemappingFilmicPS ? chunks.tonemappingFilmicPS : shaderChunks.tonemappingFilmicPS;\n\t} else if (value === TONEMAP_LINEAR) {\n\t\treturn chunks.tonemappingLinearPS ? chunks.tonemappingLinearPS : shaderChunks.tonemappingLinearPS;\n\t} else if (value === TONEMAP_HEJL) {\n\t\treturn chunks.tonemappingHejlPS ? chunks.tonemappingHejlPS : shaderChunks.tonemappingHejlPS;\n\t} else if (value === TONEMAP_ACES) {\n\t\treturn chunks.tonemappingAcesPS ? chunks.tonemappingAcesPS : shaderChunks.tonemappingAcesPS;\n\t} else if (value === TONEMAP_ACES2) {\n\t\treturn chunks.tonemappingAces2PS ? chunks.tonemappingAces2PS : shaderChunks.tonemappingAces2PS;\n\t}\n\n\treturn chunks.tonemapingNonePS ? chunks.tonemapingNonePS : shaderChunks.tonemappingNonePS;\n}\n\nfunction fogCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === 'linear') {\n\t\treturn chunks.fogLinearPS ? chunks.fogLinearPS : shaderChunks.fogLinearPS;\n\t} else if (value === 'exp') {\n\t\treturn chunks.fogExpPS ? chunks.fogExpPS : shaderChunks.fogExpPS;\n\t} else if (value === 'exp2') {\n\t\treturn chunks.fogExp2PS ? chunks.fogExp2PS : shaderChunks.fogExp2PS;\n\t}\n\n\treturn chunks.fogNonePS ? chunks.fogNonePS : shaderChunks.fogNonePS;\n}\n\nfunction skinCode(device, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (device.supportsBoneTextures) {\n\t\treturn chunks.skinTexVS;\n\t}\n\n\treturn \"#define BONE_LIMIT \" + device.getBoneLimit() + \"\\n\" + chunks.skinConstVS;\n}\n\nfunction precisionCode(device) {\n\tlet pcode = 'precision ' + device.precision + ' float;\\n';\n\n\tif (device.webgl2) {\n\t\tpcode += '#ifdef GL2\\nprecision ' + device.precision + ' sampler2DShadow;\\n#endif\\n';\n\t}\n\n\treturn pcode;\n}\n\nfunction versionCode(device) {\n\treturn device.webgl2 ? \"#version 300 es\\n\" : \"\";\n}\n\nfunction dummyFragmentCode() {\n\treturn \"void main(void) {gl_FragColor = vec4(0.0);}\";\n}\n\nfunction begin() {\n\treturn 'void main(void)\\n{\\n';\n}\n\nfunction end() {\n\treturn '}\\n';\n}\n\nconst attrib2Semantic = {\n\tvertex_position: SEMANTIC_POSITION,\n\tvertex_normal: SEMANTIC_NORMAL,\n\tvertex_tangent: SEMANTIC_TANGENT,\n\tvertex_texCoord0: SEMANTIC_TEXCOORD0,\n\tvertex_texCoord1: SEMANTIC_TEXCOORD1,\n\tvertex_texCoord2: SEMANTIC_TEXCOORD2,\n\tvertex_texCoord3: SEMANTIC_TEXCOORD3,\n\tvertex_texCoord4: SEMANTIC_TEXCOORD4,\n\tvertex_texCoord5: SEMANTIC_TEXCOORD5,\n\tvertex_texCoord6: SEMANTIC_TEXCOORD6,\n\tvertex_texCoord7: SEMANTIC_TEXCOORD7,\n\tvertex_color: SEMANTIC_COLOR,\n\tvertex_boneIndices: SEMANTIC_BLENDINDICES,\n\tvertex_boneWeights: SEMANTIC_BLENDWEIGHT\n};\n\nfunction collectAttribs(vsCode) {\n\tconst attribs = {};\n\tlet attrs = 0;\n\tlet found = vsCode.indexOf(\"attribute\");\n\n\twhile (found >= 0) {\n\t\tif (found > 0 && vsCode[found - 1] === \"/\") break;\n\t\tconst endOfLine = vsCode.indexOf(';', found);\n\t\tconst startOfAttribName = vsCode.lastIndexOf(' ', endOfLine);\n\t\tconst attribName = vsCode.substr(startOfAttribName + 1, endOfLine - (startOfAttribName + 1));\n\t\tconst semantic = attrib2Semantic[attribName];\n\n\t\tif (semantic !== undefined) {\n\t\t\tattribs[attribName] = semantic;\n\t\t} else {\n\t\t\tattribs[attribName] = \"ATTR\" + attrs;\n\t\t\tattrs++;\n\t\t}\n\n\t\tfound = vsCode.indexOf(\"attribute\", found + 1);\n\t}\n\n\treturn attribs;\n}\n\nfunction createShader(device, vsName, psName, useTransformFeedback) {\n\tlet vsCode = shaderChunks[vsName];\n\tlet psCode = precisionCode(device) + \"\\n\" + shaderChunks[psName];\n\tconst attribs = collectAttribs(vsCode);\n\n\tif (device.webgl2) {\n\t\tvsCode = versionCode(device) + shaderChunks.gles3VS + vsCode;\n\t\tpsCode = versionCode(device) + shaderChunks.gles3PS + psCode;\n\t}\n\n\treturn new Shader(device, {\n\t\tattributes: attribs,\n\t\tvshader: vsCode,\n\t\tfshader: psCode,\n\t\tuseTransformFeedback: useTransformFeedback\n\t});\n}\n\nfunction createShaderFromCode(device, vsCode, psCode, uName, useTransformFeedback, psPreamble) {\n\tconst shaderCache = device.programLib._cache;\n\tconst cached = shaderCache[uName];\n\tif (cached !== undefined) return cached;\n\tpsCode = precisionCode(device) + \"\\n\" + (psCode || dummyFragmentCode());\n\tconst attribs = collectAttribs(vsCode);\n\n\tif (device.webgl2) {\n\t\tvsCode = versionCode(device) + shaderChunks.gles3VS + vsCode;\n\t\tpsCode = versionCode(device) + shaderChunks.gles3PS + psCode;\n\t}\n\n\tshaderCache[uName] = new Shader(device, {\n\t\tattributes: attribs,\n\t\tvshader: vsCode,\n\t\tfshader: (psPreamble ? psPreamble : \"\") + psCode,\n\t\tuseTransformFeedback: useTransformFeedback\n\t});\n\treturn shaderCache[uName];\n}\n\nshaderChunks.collectAttribs = collectAttribs;\nshaderChunks.createShader = createShader;\nshaderChunks.createShaderFromCode = createShaderFromCode;\n\nconst basic = {\n\tgenerateKey: function (options) {\n\t\tlet key = 'basic';\n\t\tif (options.fog) key += '_fog';\n\t\tif (options.alphaTest) key += '_atst';\n\t\tif (options.vertexColors) key += '_vcol';\n\t\tif (options.diffuseMap) key += '_diff';\n\t\tif (options.skin) key += '_skin';\n\t\tif (options.screenSpace) key += '_ss';\n\t\tif (options.useInstancing) key += '_inst';\n\t\tif (options.useMorphPosition) key += '_morphp';\n\t\tif (options.useMorphNormal) key += '_morphn';\n\t\tif (options.useMorphTextureBased) key += '_morpht';\n\t\tkey += '_' + options.pass;\n\t\treturn key;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tconst attributes = {\n\t\t\tvertex_position: SEMANTIC_POSITION\n\t\t};\n\n\t\tif (options.skin) {\n\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tattributes.vertex_texCoord0 = SEMANTIC_TEXCOORD0;\n\t\t}\n\n\t\tlet code = '';\n\t\tcode += shaderChunks.transformDeclVS;\n\n\t\tif (options.skin) {\n\t\t\tcode += skinCode(device);\n\t\t\tcode += shaderChunks.transformSkinnedVS;\n\t\t} else {\n\t\t\tcode += shaderChunks.transformVS;\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += 'attribute vec4 vertex_color;\\n';\n\t\t\tcode += 'varying vec4 vColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += 'attribute vec2 vertex_texCoord0;\\n';\n\t\t\tcode += 'varying vec2 vUv0;\\n';\n\t\t}\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += '#ifndef VIEWMATRIX\\n';\n\t\t\tcode += '#define VIEWMATRIX\\n';\n\t\t\tcode += 'uniform mat4 matrix_view;\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcode += '#ifndef CAMERAPLANES\\n';\n\t\t\tcode += '#define CAMERAPLANES\\n';\n\t\t\tcode += 'uniform vec4 camera_params;\\n\\n';\n\t\t\tcode += '#endif\\n';\n\t\t}\n\n\t\tcode += begin();\n\t\tcode += \"\t gl_Position = getPosition();\\n\";\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += \"\t\tvDepth = -(matrix_view * vec4(getWorldPosition(),1.0)).z * camera_params.x;\\n\";\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += '\t\tvColor = vertex_color;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += '\t\tvUv0 = vertex_texCoord0;\\n';\n\t\t}\n\n\t\tcode += end();\n\t\tconst vshader = code;\n\t\tcode = precisionCode(device);\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += 'varying vec4 vColor;\\n';\n\t\t} else {\n\t\t\tcode += 'uniform vec4 uColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += 'varying vec2 vUv0;\\n';\n\t\t\tcode += 'uniform sampler2D texture_diffuseMap;\\n';\n\t\t}\n\n\t\tif (options.fog) {\n\t\t\tcode += fogCode(options.fog);\n\t\t}\n\n\t\tif (options.alphatest) {\n\t\t\tcode += shaderChunks.alphaTestPS;\n\t\t}\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += shaderChunks.packDepthPS;\n\t\t}\n\n\t\tcode += begin();\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += '\t\tgl_FragColor = vColor;\\n';\n\t\t} else {\n\t\t\tcode += '\t\tgl_FragColor = uColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += '\t\tgl_FragColor *= texture2D(texture_diffuseMap, vUv0);\\n';\n\t\t}\n\n\t\tif (options.alphatest) {\n\t\t\tcode += \"\t alphaTest(gl_FragColor.a);\\n\";\n\t\t}\n\n\t\tif (options.pass !== SHADER_PICK) {\n\t\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\t\tcode += \"\t\tgl_FragColor = packFloat(vDepth);\\n\";\n\t\t\t} else {\n\t\t\t\tif (options.fog) {\n\t\t\t\t\tcode += \"\t glFragColor.rgb = addFog(gl_FragColor.rgb);\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode += end();\n\t\tconst fshader = code;\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nconst particle = {\n\tgenerateKey: function (options) {\n\t\tlet key = \"particle\";\n\n\t\tfor (const prop in options) {\n\t\t\tif (options.hasOwnProperty(prop)) {\n\t\t\t\tkey += options[prop];\n\t\t\t}\n\t\t}\n\n\t\treturn key;\n\t},\n\t_animTex: function (options) {\n\t\tlet vshader = \"\";\n\t\tvshader += options.animTexLoop ? shaderChunks.particleAnimFrameLoopVS : shaderChunks.particleAnimFrameClampVS;\n\t\tvshader += shaderChunks.particleAnimTexVS;\n\t\treturn vshader;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tlet vshader = \"\";\n\t\tlet fshader = precisionCode(device) + \"\\n\";\n\t\tfshader += '#define PARTICLE\\n';\n\n\t\tif (device.webgl2) {\n\t\t\tvshader += \"#define GL2\\n\";\n\t\t\tfshader += \"#define GL2\\n\";\n\t\t}\n\n\t\tvshader += \"#define VERTEXSHADER\\n\";\n\t\tif (options.mesh) vshader += \"#define USE_MESH\\n\";\n\t\tif (options.localSpace) vshader += \"#define LOCAL_SPACE\\n\";\n\t\tif (options.screenSpace) vshader += \"#define SCREEN_SPACE\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec2 animTexTilesParams;\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec4 animTexParams;\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec2 animTexIndexParams;\\n\";\n\t\tif (options.normal === 2) vshader += \"\\nvarying mat3 ParticleMat;\\n\";\n\t\tif (options.normal === 1) vshader += \"\\nvarying vec3 Normal;\\n\";\n\t\tif (options.soft) vshader += \"\\nvarying float vDepth;\\n\";\n\t\tconst faceVS = options.customFace ? shaderChunks.particle_customFaceVS : shaderChunks.particle_billboardVS;\n\n\t\tif (!options.useCpu) {\n\t\t\tvshader += shaderChunks.particle_initVS;\n\t\t\tvshader += options.pack8 ? shaderChunks.particleInputRgba8PS : shaderChunks.particleInputFloatPS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.screenDepthPS;\n\t\t\tvshader += shaderChunks.particleVS;\n\t\t\tif (options.localSpace) vshader += shaderChunks.particle_localShiftVS;\n\t\t\tif (options.animTex) vshader += this._animTex(options);\n\t\t\tif (options.wrap) vshader += shaderChunks.particle_wrapVS;\n\t\t\tif (options.alignToMotion) vshader += shaderChunks.particle_pointAlongVS;\n\t\t\tvshader += options.mesh ? shaderChunks.particle_meshVS : faceVS;\n\t\t\tif (options.normal === 1) vshader += shaderChunks.particle_normalVS;\n\t\t\tif (options.normal === 2) vshader += shaderChunks.particle_TBNVS;\n\t\t\tif (options.stretch > 0.0) vshader += shaderChunks.particle_stretchVS;\n\t\t\tvshader += shaderChunks.particle_endVS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.particle_softVS;\n\t\t} else {\n\t\t\tif (options.soft > 0) vshader += shaderChunks.screenDepthPS;\n\t\t\tvshader += shaderChunks.particle_cpuVS;\n\t\t\tif (options.localSpace) vshader += shaderChunks.particle_localShiftVS;\n\t\t\tif (options.animTex) vshader += this._animTex(options);\n\t\t\tif (options.alignToMotion) vshader += shaderChunks.particle_pointAlongVS;\n\t\t\tvshader += options.mesh ? shaderChunks.particle_meshVS : faceVS;\n\t\t\tif (options.normal === 1) vshader += shaderChunks.particle_normalVS;\n\t\t\tif (options.normal === 2) vshader += shaderChunks.particle_TBNVS;\n\t\t\tif (options.stretch > 0.0) vshader += shaderChunks.particle_stretchVS;\n\t\t\tvshader += shaderChunks.particle_cpu_endVS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.particle_softVS;\n\t\t}\n\n\t\tvshader += \"}\\n\";\n\n\t\tif (options.normal > 0) {\n\t\t\tif (options.normal === 1) {\n\t\t\t\tfshader += \"\\nvarying vec3 Normal;\\n\";\n\t\t\t} else if (options.normal === 2) {\n\t\t\t\tfshader += \"\\nvarying mat3 ParticleMat;\\n\";\n\t\t\t}\n\n\t\t\tfshader += \"\\nuniform vec3 lightCube[6];\\n\";\n\t\t}\n\n\t\tif (options.soft) fshader += \"\\nvarying float vDepth;\\n\";\n\t\tif (options.normal === 0 && options.fog === \"none\") options.srgb = false;\n\t\tfshader += gammaCode(options.gamma);\n\t\tfshader += tonemapCode(options.toneMap);\n\n\t\tif (options.fog === 'linear') {\n\t\t\tfshader += shaderChunks.fogLinearPS;\n\t\t} else if (options.fog === 'exp') {\n\t\t\tfshader += shaderChunks.fogExpPS;\n\t\t} else if (options.fog === 'exp2') {\n\t\t\tfshader += shaderChunks.fogExp2PS;\n\t\t} else {\n\t\t\tfshader += shaderChunks.fogNonePS;\n\t\t}\n\n\t\tif (options.normal === 2) fshader += \"\\nuniform sampler2D normalMap;\\n\";\n\t\tif (options.soft > 0) fshader += shaderChunks.screenDepthPS;\n\t\tfshader += shaderChunks.particlePS;\n\t\tif (options.soft > 0) fshader += shaderChunks.particle_softPS;\n\t\tif (options.normal === 1) fshader += \"\\nvec3 normal = Normal;\\n\";\n\t\tif (options.normal === 2) fshader += shaderChunks.particle_normalMapPS;\n\t\tif (options.normal > 0) fshader += options.halflambert ? shaderChunks.particle_halflambertPS : shaderChunks.particle_lambertPS;\n\t\tif (options.normal > 0) fshader += shaderChunks.particle_lightingPS;\n\n\t\tif (options.blend === BLEND_NORMAL) {\n\t\t\tfshader += shaderChunks.particle_blendNormalPS;\n\t\t} else if (options.blend === BLEND_ADDITIVE) {\n\t\t\tfshader += shaderChunks.particle_blendAddPS;\n\t\t} else if (options.blend === BLEND_MULTIPLICATIVE) {\n\t\t\tfshader += shaderChunks.particle_blendMultiplyPS;\n\t\t}\n\n\t\tfshader += shaderChunks.particle_endPS;\n\t\tconst attributes = collectAttribs(vshader);\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nconst skybox = {\n\tgenerateKey: function (options) {\n\t\tconst key = \"skybox\" + options.rgbm + \" \" + options.hdr + \" \" + options.fixSeams + \"\" + options.toneMapping + \"\" + options.gamma + \"\" + options.useIntensity + \"\" + options.useCubeMapRotation + \"\" + options.useRightHandedCubeMap + \"\" + options.mip;\n\t\treturn key;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tconst mip2size = [128, 64, 32, 16, 8, 4, 2];\n\t\tlet fshader = precisionCode(device);\n\t\tfshader += options.useCubeMapRotation ? '#define CUBEMAP_ROTATION\\n' : '';\n\t\tfshader += options.useRightHandedCubeMap ? '#define RIGHT_HANDED_CUBEMAP\\n' : '';\n\t\tfshader += options.mip ? shaderChunks.fixCubemapSeamsStretchPS : shaderChunks.fixCubemapSeamsNonePS;\n\t\tfshader += options.useIntensity ? shaderChunks.envMultiplyPS : shaderChunks.envConstPS;\n\t\tfshader += gammaCode(options.gamma);\n\t\tfshader += tonemapCode(options.toneMapping);\n\t\tfshader += shaderChunks.rgbmPS;\n\t\tfshader += shaderChunks.skyboxHDRPS.replace(/\\$textureCubeSAMPLE/g, options.rgbm ? \"textureCubeRGBM\" : options.hdr ? \"textureCube\" : \"textureCubeSRGB\").replace(/\\$FIXCONST/g, 1 - 1 / mip2size[options.mip] + \"\");\n\t\treturn {\n\t\t\tattributes: {\n\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t},\n\t\t\tvshader: shaderChunks.skyboxVS,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nvar _pixelSizeTable = null;\nvar _blockSizeTable = null;\n\nclass Texture {\n\tconstructor(graphicsDevice, options) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.name = null;\n\t\tthis._width = 4;\n\t\tthis._height = 4;\n\t\tthis._depth = 1;\n\t\tthis._format = PIXELFORMAT_R8_G8_B8_A8;\n\t\tthis.type = TEXTURETYPE_DEFAULT;\n\t\tthis.projection = TEXTUREPROJECTION_NONE;\n\t\tthis._cubemap = false;\n\t\tthis._volume = false;\n\t\tthis.fixCubemapSeams = false;\n\t\tthis._flipY = false;\n\t\tthis._premultiplyAlpha = false;\n\t\tthis._isRenderTarget = false;\n\t\tthis._mipmaps = true;\n\t\tthis._minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\tthis._magFilter = FILTER_LINEAR;\n\t\tthis._anisotropy = 1;\n\t\tthis._addressU = ADDRESS_REPEAT;\n\t\tthis._addressV = ADDRESS_REPEAT;\n\t\tthis._addressW = ADDRESS_REPEAT;\n\t\tthis._compareOnRead = false;\n\t\tthis._compareFunc = FUNC_LESS;\n\n\t\tif (options !== undefined) {\n\t\t\tif (options.name !== undefined) {\n\t\t\t\tthis.name = options.name;\n\t\t\t}\n\n\t\t\tthis._width = options.width !== undefined ? options.width : this._width;\n\t\t\tthis._height = options.height !== undefined ? options.height : this._height;\n\t\t\tthis._format = options.format !== undefined ? options.format : this._format;\n\n\t\t\tif (options.hasOwnProperty('type')) {\n\t\t\t\tthis.type = options.type;\n\t\t\t} else if (options.hasOwnProperty('rgbm')) {\n\t\t\t\tthis.type = options.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t\t} else if (options.hasOwnProperty('swizzleGGGR')) {\n\t\t\t\tthis.type = options.swizzleGGGR ? TEXTURETYPE_SWIZZLEGGGR : TEXTURETYPE_DEFAULT;\n\t\t\t}\n\n\t\t\tif (options.mipmaps !== undefined) {\n\t\t\t\tthis._mipmaps = options.mipmaps;\n\t\t\t} else {\n\t\t\t\tthis._mipmaps = options.autoMipmap !== undefined ? options.autoMipmap : this._mipmaps;\n\t\t\t}\n\n\t\t\tthis._levels = options.levels;\n\t\t\tthis._cubemap = options.cubemap !== undefined ? options.cubemap : this._cubemap;\n\t\t\tthis.fixCubemapSeams = options.fixCubemapSeams !== undefined ? options.fixCubemapSeams : this.fixCubemapSeams;\n\n\t\t\tif (this._cubemap) {\n\t\t\t\tthis.projection = TEXTUREPROJECTION_CUBE;\n\t\t\t} else if (options.projection && options.projection !== TEXTUREPROJECTION_CUBE) {\n\t\t\t\tthis.projection = options.projection;\n\t\t\t}\n\n\t\t\tthis._minFilter = options.minFilter !== undefined ? options.minFilter : this._minFilter;\n\t\t\tthis._magFilter = options.magFilter !== undefined ? options.magFilter : this._magFilter;\n\t\t\tthis._anisotropy = options.anisotropy !== undefined ? options.anisotropy : this._anisotropy;\n\t\t\tthis._addressU = options.addressU !== undefined ? options.addressU : this._addressU;\n\t\t\tthis._addressV = options.addressV !== undefined ? options.addressV : this._addressV;\n\t\t\tthis._compareOnRead = options.compareOnRead !== undefined ? options.compareOnRead : this._compareOnRead;\n\t\t\tthis._compareFunc = options._compareFunc !== undefined ? options._compareFunc : this._compareFunc;\n\t\t\tthis._flipY = options.flipY !== undefined ? options.flipY : this._flipY;\n\t\t\tthis._premultiplyAlpha = options.premultiplyAlpha !== undefined ? options.premultiplyAlpha : this._premultiplyAlpha;\n\n\t\t\tif (graphicsDevice.webgl2) {\n\t\t\t\tthis._depth = options.depth !== undefined ? options.depth : this._depth;\n\t\t\t\tthis._volume = options.volume !== undefined ? options.volume : this._volume;\n\t\t\t\tthis._addressW = options.addressW !== undefined ? options.addressW : this._addressW;\n\t\t\t}\n\t\t}\n\n\t\tthis._compressed = this._format === PIXELFORMAT_DXT1 || this._format === PIXELFORMAT_DXT3 || this._format === PIXELFORMAT_DXT5 || this._format >= PIXELFORMAT_ETC1;\n\t\tthis._invalid = false;\n\t\tthis._lockedLevel = -1;\n\n\t\tif (!this._levels) {\n\t\t\tthis._levels = this._cubemap ? [[null, null, null, null, null, null]] : [null];\n\t\t}\n\n\t\tthis.dirtyAll();\n\t\tthis._gpuSize = 0;\n\t}\n\n\tget minFilter() {\n\t\treturn this._minFilter;\n\t}\n\n\tset minFilter(v) {\n\t\tif (this._minFilter !== v) {\n\t\t\tthis._minFilter = v;\n\t\t\tthis._parameterFlags |= 1;\n\t\t}\n\t}\n\n\tget magFilter() {\n\t\treturn this._magFilter;\n\t}\n\n\tset magFilter(v) {\n\t\tif (this._magFilter !== v) {\n\t\t\tthis._magFilter = v;\n\t\t\tthis._parameterFlags |= 2;\n\t\t}\n\t}\n\n\tget addressU() {\n\t\treturn this._addressU;\n\t}\n\n\tset addressU(v) {\n\t\tif (this._addressU !== v) {\n\t\t\tthis._addressU = v;\n\t\t\tthis._parameterFlags |= 4;\n\t\t}\n\t}\n\n\tget addressV() {\n\t\treturn this._addressV;\n\t}\n\n\tset addressV(v) {\n\t\tif (this._addressV !== v) {\n\t\t\tthis._addressV = v;\n\t\t\tthis._parameterFlags |= 8;\n\t\t}\n\t}\n\n\tget addressW() {\n\t\treturn this._addressW;\n\t}\n\n\tset addressW(addressW) {\n\t\tif (!this.device.webgl2) return;\n\n\t\tif (!this._volume) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (addressW !== this._addressW) {\n\t\t\tthis._addressW = addressW;\n\t\t\tthis._parameterFlags |= 16;\n\t\t}\n\t}\n\n\tget compareOnRead() {\n\t\treturn this._compareOnRead;\n\t}\n\n\tset compareOnRead(v) {\n\t\tif (this._compareOnRead !== v) {\n\t\t\tthis._compareOnRead = v;\n\t\t\tthis._parameterFlags |= 32;\n\t\t}\n\t}\n\n\tget compareFunc() {\n\t\treturn this._compareFunc;\n\t}\n\n\tset compareFunc(v) {\n\t\tif (this._compareFunc !== v) {\n\t\t\tthis._compareFunc = v;\n\t\t\tthis._parameterFlags |= 64;\n\t\t}\n\t}\n\n\tget anisotropy() {\n\t\treturn this._anisotropy;\n\t}\n\n\tset anisotropy(v) {\n\t\tif (this._anisotropy !== v) {\n\t\t\tthis._anisotropy = v;\n\t\t\tthis._parameterFlags |= 128;\n\t\t}\n\t}\n\n\tget autoMipmap() {\n\t\treturn this._mipmaps;\n\t}\n\n\tset autoMipmap(v) {\n\t\tthis._mipmaps = v;\n\t}\n\n\tget mipmaps() {\n\t\treturn this._mipmaps;\n\t}\n\n\tset mipmaps(v) {\n\t\tif (this._mipmaps !== v) {\n\t\t\tthis._mipmaps = v;\n\t\t\tthis._minFilterDirty = true;\n\t\t\tif (v) this._needsMipmapsUpload = true;\n\t\t}\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tget depth() {\n\t\treturn this._depth;\n\t}\n\n\tget format() {\n\t\treturn this._format;\n\t}\n\n\tget cubemap() {\n\t\treturn this._cubemap;\n\t}\n\n\tget gpuSize() {\n\t\tvar mips = this.pot && this._mipmaps && !(this._compressed && this._levels.length === 1);\n\t\treturn Texture.calcGpuSize(this._width, this._height, this._depth, this._format, mips, this._cubemap);\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tget flipY() {\n\t\treturn this._flipY;\n\t}\n\n\tset flipY(flipY) {\n\t\tif (this._flipY !== flipY) {\n\t\t\tthis._flipY = flipY;\n\t\t\tthis._needsUpload = true;\n\t\t}\n\t}\n\n\tget premultiplyAlpha() {\n\t\treturn this._premultiplyAlpha;\n\t}\n\n\tset premultiplyAlpha(premultiplyAlpha) {\n\t\tif (this._premultiplyAlpha !== premultiplyAlpha) {\n\t\t\tthis._premultiplyAlpha = premultiplyAlpha;\n\t\t\tthis._needsUpload = true;\n\t\t}\n\t}\n\n\tget pot() {\n\t\treturn math.powerOfTwo(this._width) && math.powerOfTwo(this._height);\n\t}\n\n\tstatic calcGpuSize(width, height, depth, format, mipmaps, cubemap) {\n\t\tif (!_pixelSizeTable) {\n\t\t\t_pixelSizeTable = [];\n\t\t\t_pixelSizeTable[PIXELFORMAT_A8] = 1;\n\t\t\t_pixelSizeTable[PIXELFORMAT_L8] = 1;\n\t\t\t_pixelSizeTable[PIXELFORMAT_L8_A8] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R5_G6_B5] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R5_G5_B5_A1] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R4_G4_B4_A4] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R8_G8_B8] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R8_G8_B8_A8] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGB16F] = 8;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGBA16F] = 8;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGB32F] = 16;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGBA32F] = 16;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R32F] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_DEPTH] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_DEPTHSTENCIL] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_111110F] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_SRGB] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_SRGBA] = 4;\n\t\t}\n\n\t\tif (!_blockSizeTable) {\n\t\t\t_blockSizeTable = [];\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC2_RGB] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_2BPP_RGB_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_2BPP_RGBA_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_4BPP_RGB_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_4BPP_RGBA_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ATC_RGB] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC2_RGBA] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT3] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT5] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_ASTC_4x4] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_ATC_RGBA] = 16;\n\t\t}\n\n\t\tvar pixelSize = _pixelSizeTable.hasOwnProperty(format) ? _pixelSizeTable[format] : 0;\n\t\tvar blockSize = _blockSizeTable.hasOwnProperty(format) ? _blockSizeTable[format] : 0;\n\t\tvar result = 0;\n\n\t\twhile (1) {\n\t\t\tif (pixelSize > 0) {\n\t\t\t\tresult += width * height * depth * pixelSize;\n\t\t\t} else {\n\t\t\t\tvar blockWidth = Math.floor((width + 3) / 4);\n\t\t\t\tvar blockHeight = Math.floor((height + 3) / 4);\n\t\t\t\tvar blockDepth = Math.floor((depth + 3) / 4);\n\n\t\t\t\tif (format === PIXELFORMAT_PVRTC_2BPP_RGB_1 || format === PIXELFORMAT_PVRTC_2BPP_RGBA_1) {\n\t\t\t\t\tblockWidth = Math.max(Math.floor(blockWidth / 2), 1);\n\t\t\t\t}\n\n\t\t\t\tresult += blockWidth * blockHeight * blockDepth * blockSize;\n\t\t\t}\n\n\t\t\tif (!mipmaps || width === 1 && height === 1 && depth === 1) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\twidth = Math.max(Math.floor(width / 2), 1);\n\t\t\theight = Math.max(Math.floor(height / 2), 1);\n\t\t\tdepth = Math.max(Math.floor(depth / 2), 1);\n\t\t}\n\n\t\treturn result * (cubemap ? 6 : 1);\n\t}\n\n\tdestroy() {\n\t\tif (this.device) {\n\t\t\tthis.device.destroyTexture(this);\n\t\t}\n\n\t\tthis.device = null;\n\t\tthis._levels = this._cubemap ? [[null, null, null, null, null, null]] : [null];\n\t}\n\n\tdirtyAll() {\n\t\tthis._levelsUpdated = this._cubemap ? [[true, true, true, true, true, true]] : [true];\n\t\tthis._needsUpload = true;\n\t\tthis._needsMipmapsUpload = this._mipmaps;\n\t\tthis._mipmapsUploaded = false;\n\t\tthis._parameterFlags = 255;\n\t}\n\n\tlock(options = {}) {\n\t\tif (options.level === undefined) {\n\t\t\toptions.level = 0;\n\t\t}\n\n\t\tif (options.face === undefined) {\n\t\t\toptions.face = 0;\n\t\t}\n\n\t\tif (options.mode === undefined) {\n\t\t\toptions.mode = TEXTURELOCK_WRITE;\n\t\t}\n\n\t\tthis._lockedLevel = options.level;\n\n\t\tif (this._levels[options.level] === null) {\n\t\t\tswitch (this._format) {\n\t\t\t\tcase PIXELFORMAT_A8:\n\t\t\t\tcase PIXELFORMAT_L8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_L8_A8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 2);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R5_G6_B5:\n\t\t\t\tcase PIXELFORMAT_R5_G5_B5_A1:\n\t\t\t\tcase PIXELFORMAT_R4_G4_B4_A4:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R8_G8_B8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R8_G8_B8_A8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_DXT1:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(Math.floor((this._width + 3) / 4) * Math.floor((this._height + 3) / 4) * 8 * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_DXT3:\n\t\t\t\tcase PIXELFORMAT_DXT5:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(Math.floor((this._width + 3) / 4) * Math.floor((this._height + 3) / 4) * 16 * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\t\tthis._levels[options.level] = new Float32Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\t\tthis._levels[options.level] = new Float32Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this._levels[options.level];\n\t}\n\n\tsetSource(source, mipLevel = 0) {\n\t\tvar i;\n\t\tvar invalid = false;\n\t\tvar width, height;\n\n\t\tif (this._cubemap) {\n\t\t\tif (source[0]) {\n\t\t\t\twidth = source[0].width || 0;\n\t\t\t\theight = source[0].height || 0;\n\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tvar face = source[i];\n\n\t\t\t\t\tif (!face || face.width !== width || face.height !== height || !this.device._isBrowserInterface(face)) {\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinvalid = true;\n\t\t\t}\n\n\t\t\tif (!invalid) {\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tif (this._levels[mipLevel][i] !== source[i]) this._levelsUpdated[mipLevel][i] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.device._isBrowserInterface(source)) invalid = true;\n\n\t\t\tif (!invalid) {\n\t\t\t\tif (source !== this._levels[mipLevel]) this._levelsUpdated[mipLevel] = true;\n\t\t\t\twidth = source.width;\n\t\t\t\theight = source.height;\n\t\t\t}\n\t\t}\n\n\t\tif (invalid) {\n\t\t\tthis._width = 4;\n\t\t\tthis._height = 4;\n\n\t\t\tif (this._cubemap) {\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tthis._levels[mipLevel][i] = null;\n\t\t\t\t\tthis._levelsUpdated[mipLevel][i] = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._levels[mipLevel] = null;\n\t\t\t\tthis._levelsUpdated[mipLevel] = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (mipLevel === 0) {\n\t\t\t\tthis._width = width;\n\t\t\t\tthis._height = height;\n\t\t\t}\n\n\t\t\tthis._levels[mipLevel] = source;\n\t\t}\n\n\t\tif (this._invalid !== invalid || !invalid) {\n\t\t\tthis._invalid = invalid;\n\t\t\tthis.upload();\n\t\t}\n\t}\n\n\tgetSource(mipLevel = 0) {\n\t\treturn this._levels[mipLevel];\n\t}\n\n\tunlock() {\n\t\tthis.upload();\n\t\tthis._lockedLevel = -1;\n\t}\n\n\tupload() {\n\t\tthis._needsUpload = true;\n\t\tthis._needsMipmapsUpload = this._mipmaps;\n\t}\n\n\tgetDds() {\n\t\tvar fsize = 128;\n\t\tvar i = 0;\n\t\tvar j;\n\t\tvar face;\n\n\t\twhile (this._levels[i]) {\n\t\t\tvar mipSize;\n\n\t\t\tif (!this.cubemap) {\n\t\t\t\tmipSize = this._levels[i].length;\n\n\t\t\t\tif (!mipSize) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfsize += mipSize;\n\t\t\t} else {\n\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\tif (!this._levels[i][face]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tmipSize = this._levels[i][face].length;\n\n\t\t\t\t\tif (!mipSize) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfsize += mipSize;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfsize += this._levels[i].length;\n\t\t\ti++;\n\t\t}\n\n\t\tvar buff = new ArrayBuffer(fsize);\n\t\tvar header = new Uint32Array(buff, 0, 128 / 4);\n\t\tvar DDS_MAGIC = 542327876;\n\t\tvar DDS_HEADER_SIZE = 124;\n\t\tvar DDS_FLAGS_REQUIRED = 0x01 | 0x02 | 0x04 | 0x1000 | 0x80000;\n\t\tvar DDS_FLAGS_MIPMAP = 0x20000;\n\t\tvar DDS_PIXELFORMAT_SIZE = 32;\n\t\tvar DDS_PIXELFLAGS_RGBA8 = 0x01 | 0x40;\n\t\tvar DDS_CAPS_REQUIRED = 0x1000;\n\t\tvar DDS_CAPS_MIPMAP = 0x400000;\n\t\tvar DDS_CAPS_COMPLEX = 0x8;\n\t\tvar DDS_CAPS2_CUBEMAP = 0x200 | 0x400 | 0x800 | 0x1000 | 0x2000 | 0x4000 | 0x8000;\n\t\tvar flags = DDS_FLAGS_REQUIRED;\n\t\tif (this._levels.length > 1) flags |= DDS_FLAGS_MIPMAP;\n\t\tvar caps = DDS_CAPS_REQUIRED;\n\t\tif (this._levels.length > 1) caps |= DDS_CAPS_MIPMAP;\n\t\tif (this._levels.length > 1 || this.cubemap) caps |= DDS_CAPS_COMPLEX;\n\t\tvar caps2 = this.cubemap ? DDS_CAPS2_CUBEMAP : 0;\n\t\theader[0] = DDS_MAGIC;\n\t\theader[1] = DDS_HEADER_SIZE;\n\t\theader[2] = flags;\n\t\theader[3] = this.height;\n\t\theader[4] = this.width;\n\t\theader[5] = this.width * this.height * 4;\n\t\theader[6] = 0;\n\t\theader[7] = this._levels.length;\n\n\t\tfor (i = 0; i < 11; i++) header[8 + i] = 0;\n\n\t\theader[19] = DDS_PIXELFORMAT_SIZE;\n\t\theader[20] = DDS_PIXELFLAGS_RGBA8;\n\t\theader[21] = 0;\n\t\theader[22] = 32;\n\t\theader[23] = 0x00FF0000;\n\t\theader[24] = 0x0000FF00;\n\t\theader[25] = 0x000000FF;\n\t\theader[26] = 0xFF000000;\n\t\theader[27] = caps;\n\t\theader[28] = caps2;\n\t\theader[29] = 0;\n\t\theader[30] = 0;\n\t\theader[31] = 0;\n\t\tvar offset = 128;\n\t\tvar level, mip;\n\n\t\tif (!this.cubemap) {\n\t\t\tfor (i = 0; i < this._levels.length; i++) {\n\t\t\t\tlevel = this._levels[i];\n\t\t\t\tmip = new Uint8Array(buff, offset, level.length);\n\n\t\t\t\tfor (j = 0; j < level.length; j++) mip[j] = level[j];\n\n\t\t\t\toffset += level.length;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\tfor (i = 0; i < this._levels.length; i++) {\n\t\t\t\t\tlevel = this._levels[i][face];\n\t\t\t\t\tmip = new Uint8Array(buff, offset, level.length);\n\n\t\t\t\t\tfor (j = 0; j < level.length; j++) mip[j] = level[j];\n\n\t\t\t\t\toffset += level.length;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn buff;\n\t}\n\n}\n\nconst tempVec3 = new Vec3();\nconst tempMin3 = new Vec3();\nconst tempMax3 = new Vec3();\nconst tempBox = new BoundingBox();\nconst epsilon = 0.000001;\nconst oneDiv255 = 1 / 255;\n\nfunction packFloatToBytes(value, array, offset, numBytes) {\n\tconst enc1 = 255.0 * value % 1;\n\tarray[offset + 0] = Math.round((value % 1 - oneDiv255 * enc1) * 255);\n\n\tif (numBytes > 1) {\n\t\tconst enc2 = 65025.0 * value % 1;\n\t\tarray[offset + 1] = Math.round((enc1 - oneDiv255 * enc2) * 255);\n\n\t\tif (numBytes > 2) {\n\t\t\tconst enc3 = 16581375.0 * value % 1;\n\t\t\tarray[offset + 2] = Math.round((enc2 - oneDiv255 * enc3) * 255);\n\n\t\t\tif (numBytes > 3) {\n\t\t\t\tarray[offset + 3] = Math.round(enc3 * 255);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ClusterLight {\n\tconstructor() {\n\t\tthis.light = null;\n\t\tthis.min = new Vec3();\n\t\tthis.max = new Vec3();\n\t}\n\n}\n\nclass WorldClusters {\n\tstatic init(device) {\n\t\tif (device.extTextureFloat) {\n\t\t\tWorldClusters.lightTextureFormat = WorldClusters.FORMAT_FLOAT;\n\t\t} else {\n\t\t\tWorldClusters.lightTextureFormat = WorldClusters.FORMAT_8BIT;\n\t\t}\n\t}\n\n\tconstructor(device, cells, maxCellLightCount) {\n\t\tthis.device = device;\n\t\tthis.name = \"Untitled\";\n\t\tthis.reportCount = 0;\n\t\tthis._bounds = new BoundingBox();\n\t\tthis.boundsMin = new Vec3();\n\t\tthis.boundsMax = new Vec3();\n\t\tthis.boundsDelta = new Vec3();\n\t\tthis._cells = new Vec3();\n\t\tthis._cellsLimit = new Vec3();\n\t\tthis.cells = cells;\n\t\tthis._maxCellLightCount = 0;\n\t\tthis._pixelsPerCellCount = 0;\n\t\tthis.maxCellLightCount = maxCellLightCount;\n\t\tthis._maxAttenuation = 0;\n\t\tthis._maxColorValue = 0;\n\t\tthis._usedLights = [];\n\n\t\tthis._usedLights.push(new ClusterLight());\n\n\t\tthis.registerUniforms(device);\n\t\tthis.initLightsTexture();\n\t}\n\n\tdestroy() {\n\t\tif (this.lightsTexture8) {\n\t\t\tthis.lightsTexture8.destroy();\n\t\t\tthis.lightsTexture8 = null;\n\t\t}\n\n\t\tif (this.lightsTextureFloat) {\n\t\t\tthis.lightsTextureFloat.destroy();\n\t\t\tthis.lightsTextureFloat = null;\n\t\t}\n\n\t\tthis.releaseClusterTexture();\n\t}\n\n\treleaseClusterTexture() {\n\t\tif (this.clusterTexture) {\n\t\t\tthis.clusterTexture.destroy();\n\t\t\tthis.clusterTexture = null;\n\t\t}\n\t}\n\n\tregisterUniforms(device) {\n\t\tthis._clusterWorldTextureId = device.scope.resolve(\"clusterWorldTexture\");\n\t\tthis._clusterPixelsPerCellId = device.scope.resolve(\"clusterPixelsPerCell\");\n\t\tthis._clusterTextureSizeId = device.scope.resolve(\"clusterTextureSize\");\n\t\tthis._clusterTextureSizeData = new Float32Array(3);\n\t\tthis._clusterBoundsMinId = device.scope.resolve(\"clusterBoundsMin\");\n\t\tthis._clusterBoundsMinData = new Float32Array(3);\n\t\tthis._clusterBoundsDeltaId = device.scope.resolve(\"clusterBoundsDelta\");\n\t\tthis._clusterBoundsDeltaData = new Float32Array(3);\n\t\tthis._clusterCellsCountByBoundsSizeId = device.scope.resolve(\"clusterCellsCountByBoundsSize\");\n\t\tthis._clusterCellsCountByBoundsSizeData = new Float32Array(3);\n\t\tthis._clusterCellsDotId = device.scope.resolve(\"clusterCellsDot\");\n\t\tthis._clusterCellsDotData = new Float32Array(3);\n\t\tthis._clusterCellsMaxId = device.scope.resolve(\"clusterCellsMax\");\n\t\tthis._clusterCellsMaxData = new Float32Array(3);\n\t\tthis._clusterCompressionLimit0Id = device.scope.resolve(\"clusterCompressionLimit0\");\n\t\tthis._clusterCompressionLimit0Data = new Float32Array(2);\n\t}\n\n\tget maxCellLightCount() {\n\t\treturn this._maxCellLightCount;\n\t}\n\n\tset maxCellLightCount(count) {\n\t\tconst maxCellLightCount = math.roundUp(count, 4);\n\n\t\tif (maxCellLightCount !== this._maxCellLightCount) {\n\t\t\tthis._maxCellLightCount = maxCellLightCount;\n\t\t\tthis._pixelsPerCellCount = this._maxCellLightCount / 4;\n\t\t\tthis._cellsDirty = true;\n\t\t}\n\t}\n\n\tget cells() {\n\t\treturn this._cells;\n\t}\n\n\tset cells(value) {\n\t\ttempVec3.copy(value).floor();\n\n\t\tif (!this._cells.equals(tempVec3)) {\n\t\t\tthis._cells.copy(tempVec3);\n\n\t\t\tthis._cellsLimit.copy(tempVec3).sub(Vec3.ONE);\n\n\t\t\tthis._cellsDirty = true;\n\t\t}\n\t}\n\n\tcreateTexture(width, height, format) {\n\t\tconst tex = new Texture(this.device, {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tmipmaps: false,\n\t\t\tformat: format,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tanisotropy: 1\n\t\t});\n\t\treturn tex;\n\t}\n\n\tinitLightsTexture() {\n\t\tthis.maxLights = 255;\n\t\tlet pixelsPerLight8 = 4;\n\t\tlet pixelsPerLightFloat = 0;\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tpixelsPerLightFloat = 2;\n\t\t} else {\n\t\t\tpixelsPerLight8 = 11;\n\t\t}\n\n\t\tthis.lights8 = new Uint8ClampedArray(4 * pixelsPerLight8 * this.maxLights);\n\t\tthis.lightsTexture8 = this.createTexture(pixelsPerLight8, this.maxLights, PIXELFORMAT_R8_G8_B8_A8);\n\t\tthis._lightsTexture8Id = this.device.scope.resolve(\"lightsTexture8\");\n\n\t\tif (pixelsPerLightFloat) {\n\t\t\tthis.lightsFloat = new Float32Array(4 * pixelsPerLightFloat * this.maxLights);\n\t\t\tthis.lightsTextureFloat = this.createTexture(pixelsPerLightFloat, this.maxLights, PIXELFORMAT_RGBA32F);\n\t\t\tthis._lightsTextureFloatId = this.device.scope.resolve(\"lightsTextureFloat\");\n\t\t} else {\n\t\t\tthis.lightsFloat = null;\n\t\t\tthis.lightsTextureFloat = null;\n\t\t\tthis._lightsTextureFloatId = undefined;\n\t\t}\n\n\t\tthis._lightsTextureInvSizeId = this.device.scope.resolve(\"lightsTextureInvSize\");\n\t\tthis._lightsTextureInvSizeData = new Float32Array(4);\n\t\tthis._lightsTextureInvSizeData[0] = pixelsPerLightFloat ? 1.0 / this.lightsTextureFloat.width : 0;\n\t\tthis._lightsTextureInvSizeData[1] = pixelsPerLightFloat ? 1.0 / this.lightsTextureFloat.height : 0;\n\t\tthis._lightsTextureInvSizeData[2] = 1.0 / this.lightsTexture8.width;\n\t\tthis._lightsTextureInvSizeData[3] = 1.0 / this.lightsTexture8.height;\n\t}\n\n\tgetSpotDirection(direction, spot) {\n\t\tconst mat = spot._node.getWorldTransform();\n\n\t\tmat.getY(direction).mulScalar(-1);\n\t\tdirection.normalize();\n\t}\n\n\taddLightData(light, lightIndex, gammaCorrection) {\n\t\tconst isSpot = light._type === LIGHTTYPE_SPOT;\n\n\t\tconst pos = light._node.getPosition();\n\n\t\tconst data8 = this.lights8;\n\t\tlet data8Index = lightIndex * this.lightsTexture8.width * 4;\n\t\tdata8[data8Index + 0] = isSpot ? 255 : 0;\n\t\tdata8[data8Index + 1] = light._shape * 255;\n\t\tdata8[data8Index + 2] = light._falloffMode * 255;\n\t\tdata8Index += 4;\n\t\tconst invMaxColorValue = 1.0 / this._maxColorValue;\n\t\tconst color = gammaCorrection ? light._linearFinalColor : light._finalColor;\n\t\tpackFloatToBytes(color[0] * invMaxColorValue, data8, data8Index + 0, 2);\n\t\tpackFloatToBytes(color[1] * invMaxColorValue, data8, data8Index + 2, 2);\n\t\tpackFloatToBytes(color[2] * invMaxColorValue, data8, data8Index + 4, 2);\n\t\tdata8Index += 8;\n\n\t\tif (isSpot) {\n\t\t\tpackFloatToBytes(light._innerConeAngleCos * (0.5 - epsilon) + 0.5, data8, data8Index + 0, 2);\n\t\t\tpackFloatToBytes(light._outerConeAngleCos * (0.5 - epsilon) + 0.5, data8, data8Index + 2, 2);\n\t\t}\n\n\t\tdata8Index += 4;\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tconst dataFloat = this.lightsFloat;\n\t\t\tconst dataFloatIndex = lightIndex * this.lightsTextureFloat.width * 4;\n\t\t\tdataFloat[dataFloatIndex + 0] = pos.x;\n\t\t\tdataFloat[dataFloatIndex + 1] = pos.y;\n\t\t\tdataFloat[dataFloatIndex + 2] = pos.z;\n\t\t\tdataFloat[dataFloatIndex + 3] = light.attenuationEnd;\n\n\t\t\tif (isSpot) {\n\t\t\t\tthis.getSpotDirection(tempVec3, light);\n\t\t\t\tdataFloat[dataFloatIndex + 4] = tempVec3.x;\n\t\t\t\tdataFloat[dataFloatIndex + 5] = tempVec3.y;\n\t\t\t\tdataFloat[dataFloatIndex + 6] = tempVec3.z;\n\t\t\t}\n\t\t} else {\n\t\t\tconst normPos = tempVec3.sub2(pos, this.boundsMin).div(this.boundsDelta);\n\t\t\tpackFloatToBytes(normPos.x, data8, data8Index + 0, 4);\n\t\t\tpackFloatToBytes(normPos.y, data8, data8Index + 4, 4);\n\t\t\tpackFloatToBytes(normPos.z, data8, data8Index + 8, 4);\n\t\t\tpackFloatToBytes(light.attenuationEnd / this._maxAttenuation, data8, data8Index + 12, 4);\n\t\t\tdata8Index += 16;\n\n\t\t\tif (isSpot) {\n\t\t\t\tthis.getSpotDirection(tempVec3, light);\n\t\t\t\tpackFloatToBytes(tempVec3.x * (0.5 - epsilon) + 0.5, data8, data8Index + 0, 4);\n\t\t\t\tpackFloatToBytes(tempVec3.y * (0.5 - epsilon) + 0.5, data8, data8Index + 4, 4);\n\t\t\t\tpackFloatToBytes(tempVec3.z * (0.5 - epsilon) + 0.5, data8, data8Index + 8, 4);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateCells() {\n\t\tif (this._cellsDirty) {\n\t\t\tthis._cellsDirty = false;\n\t\t\tconst cx = this._cells.x;\n\t\t\tconst cy = this._cells.y;\n\t\t\tconst cz = this._cells.z;\n\t\t\tconst numCells = cx * cy * cz;\n\t\t\tconst totalPixels = this._pixelsPerCellCount * numCells;\n\t\t\tlet width = Math.ceil(Math.sqrt(totalPixels));\n\t\t\twidth = math.roundUp(width, this._pixelsPerCellCount);\n\t\t\tconst height = Math.ceil(totalPixels / width);\n\n\t\t\tthis._clusterCellsMaxData[0] = cx;\n\t\t\tthis._clusterCellsMaxData[1] = cy;\n\t\t\tthis._clusterCellsMaxData[2] = cz;\n\t\t\tthis._clusterCellsDotData[0] = this._pixelsPerCellCount;\n\t\t\tthis._clusterCellsDotData[1] = cx * cz * this._pixelsPerCellCount;\n\t\t\tthis._clusterCellsDotData[2] = cx * this._pixelsPerCellCount;\n\t\t\tthis.clusters = new Uint8ClampedArray(4 * totalPixels);\n\t\t\tthis.counts = new Int32Array(numCells);\n\t\t\tthis._clusterTextureSizeData[0] = width;\n\t\t\tthis._clusterTextureSizeData[1] = 1.0 / width;\n\t\t\tthis._clusterTextureSizeData[2] = 1.0 / height;\n\t\t\tthis.releaseClusterTexture();\n\t\t\tthis.clusterTexture = this.createTexture(width, height, PIXELFORMAT_R8_G8_B8_A8);\n\t\t}\n\t}\n\n\tuploadTextures() {\n\t\tlet pixels = this.clusterTexture.lock();\n\t\tpixels.set(this.clusters);\n\t\tthis.clusterTexture.unlock();\n\n\t\tif (this.lightsTextureFloat) {\n\t\t\tpixels = this.lightsTextureFloat.lock();\n\t\t\tpixels.set(this.lightsFloat);\n\t\t\tthis.lightsTextureFloat.unlock();\n\t\t}\n\n\t\tpixels = this.lightsTexture8.lock();\n\t\tpixels.set(this.lights8);\n\t\tthis.lightsTexture8.unlock();\n\t}\n\n\tupdateUniforms() {\n\t\tthis._clusterWorldTextureId.setValue(this.clusterTexture);\n\n\t\tthis._lightsTexture8Id.setValue(this.lightsTexture8);\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tthis._lightsTextureFloatId.setValue(this.lightsTextureFloat);\n\t\t}\n\n\t\tconst boundsDelta = this.boundsDelta;\n\t\tthis._clusterCellsCountByBoundsSizeData[0] = this._cells.x / boundsDelta.x;\n\t\tthis._clusterCellsCountByBoundsSizeData[1] = this._cells.y / boundsDelta.y;\n\t\tthis._clusterCellsCountByBoundsSizeData[2] = this._cells.z / boundsDelta.z;\n\n\t\tthis._clusterCellsCountByBoundsSizeId.setValue(this._clusterCellsCountByBoundsSizeData);\n\n\t\tthis._clusterBoundsMinData[0] = this.boundsMin.x;\n\t\tthis._clusterBoundsMinData[1] = this.boundsMin.y;\n\t\tthis._clusterBoundsMinData[2] = this.boundsMin.z;\n\t\tthis._clusterBoundsDeltaData[0] = boundsDelta.x;\n\t\tthis._clusterBoundsDeltaData[1] = boundsDelta.y;\n\t\tthis._clusterBoundsDeltaData[2] = boundsDelta.z;\n\t\tthis._clusterCompressionLimit0Data[0] = this._maxAttenuation;\n\t\tthis._clusterCompressionLimit0Data[1] = this._maxColorValue;\n\n\t\tthis._clusterPixelsPerCellId.setValue(this._pixelsPerCellCount);\n\n\t\tthis._lightsTextureInvSizeId.setValue(this._lightsTextureInvSizeData);\n\n\t\tthis._clusterTextureSizeId.setValue(this._clusterTextureSizeData);\n\n\t\tthis._clusterBoundsMinId.setValue(this._clusterBoundsMinData);\n\n\t\tthis._clusterBoundsDeltaId.setValue(this._clusterBoundsDeltaData);\n\n\t\tthis._clusterCellsDotId.setValue(this._clusterCellsDotData);\n\n\t\tthis._clusterCellsMaxId.setValue(this._clusterCellsMaxData);\n\n\t\tthis._clusterCompressionLimit0Id.setValue(this._clusterCompressionLimit0Data);\n\t}\n\n\tevalLightCellMinMax(clusteredLight, min, max) {\n\t\tmin.copy(clusteredLight.min);\n\t\tmin.sub(this.boundsMin);\n\t\tmin.div(this.boundsDelta);\n\t\tmin.mul2(min, this.cells);\n\t\tmin.floor();\n\t\tmax.copy(clusteredLight.max);\n\t\tmax.sub(this.boundsMin);\n\t\tmax.div(this.boundsDelta);\n\t\tmax.mul2(max, this.cells);\n\t\tmax.ceil();\n\t\tmin.max(Vec3.ZERO);\n\t\tmax.min(this._cellsLimit);\n\t}\n\n\tcollectLights(lights) {\n\t\tconst usedLights = this._usedLights;\n\t\tlet lightIndex = 1;\n\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tconst light = lights[i];\n\n\t\t\tif (light.enabled && light.type !== LIGHTTYPE_DIRECTIONAL && light.visibleThisFrame && light.intensity > 0) {\n\t\t\t\tif (lightIndex < this.maxLights) {\n\t\t\t\t\tlet clusteredLight;\n\n\t\t\t\t\tif (lightIndex < usedLights.length) {\n\t\t\t\t\t\tclusteredLight = usedLights[lightIndex];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclusteredLight = new ClusterLight();\n\t\t\t\t\t\tusedLights.push(clusteredLight);\n\t\t\t\t\t}\n\n\t\t\t\t\tclusteredLight.light = light;\n\t\t\t\t\tlight.getBoundingBox(tempBox);\n\t\t\t\t\tclusteredLight.min.copy(tempBox.getMin());\n\t\t\t\t\tclusteredLight.max.copy(tempBox.getMax());\n\t\t\t\t\tlightIndex++;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Clustered lighting: more than \" + (this.maxLights - 1) + \" lights in the frame, ignoring some.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tusedLights.length = lightIndex;\n\t}\n\n\tevaluateBounds() {\n\t\tconst usedLights = this._usedLights;\n\t\tconst min = this.boundsMin;\n\t\tconst max = this.boundsMax;\n\n\t\tif (usedLights.length > 1) {\n\t\t\tmin.copy(usedLights[1].min);\n\t\t\tmax.copy(usedLights[1].max);\n\n\t\t\tfor (let i = 2; i < usedLights.length; i++) {\n\t\t\t\tmin.min(usedLights[i].min);\n\t\t\t\tmax.max(usedLights[i].max);\n\t\t\t}\n\t\t} else {\n\t\t\tmin.set(0, 0, 0);\n\t\t\tmax.set(1, 1, 1);\n\t\t}\n\n\t\tthis.boundsDelta.sub2(max, min);\n\t}\n\n\tevaluateCompressionLimits(gammaCorrection) {\n\t\tlet maxAttenuation = 0;\n\t\tlet maxColorValue = 0;\n\t\tconst usedLights = this._usedLights;\n\n\t\tfor (let i = 1; i < usedLights.length; i++) {\n\t\t\tconst light = usedLights[i].light;\n\t\t\tmaxAttenuation = Math.max(light.attenuationEnd, maxAttenuation);\n\t\t\tconst color = gammaCorrection ? light._linearFinalColor : light._finalColor;\n\t\t\tmaxColorValue = Math.max(color[0], maxColorValue);\n\t\t\tmaxColorValue = Math.max(color[1], maxColorValue);\n\t\t\tmaxColorValue = Math.max(color[2], maxColorValue);\n\t\t}\n\n\t\tthis._maxAttenuation = maxAttenuation + epsilon;\n\t\tthis._maxColorValue = maxColorValue + epsilon;\n\t}\n\n\tupdateClusters(gammaCorrection) {\n\t\tthis.counts.fill(0);\n\t\tthis.clusters.fill(0);\n\t\tconst divX = this._cells.x;\n\t\tconst divZ = this._cells.z;\n\t\tconst counts = this.counts;\n\t\tconst limit = this._maxCellLightCount;\n\t\tconst clusters = this.clusters;\n\t\tconst pixelsPerCellCount = this._pixelsPerCellCount;\n\t\tconst usedLights = this._usedLights;\n\n\t\tfor (let i = 1; i < usedLights.length; i++) {\n\t\t\tconst clusteredLight = usedLights[i];\n\t\t\tconst light = clusteredLight.light;\n\t\t\tthis.addLightData(light, i, gammaCorrection);\n\t\t\tthis.evalLightCellMinMax(clusteredLight, tempMin3, tempMax3);\n\t\t\tconst xStart = tempMin3.x;\n\t\t\tconst xEnd = tempMax3.x;\n\t\t\tconst yStart = tempMin3.y;\n\t\t\tconst yEnd = tempMax3.y;\n\t\t\tconst zStart = tempMin3.z;\n\t\t\tconst zEnd = tempMax3.z;\n\n\t\t\tfor (let x = xStart; x <= xEnd; x++) {\n\t\t\t\tfor (let z = zStart; z <= zEnd; z++) {\n\t\t\t\t\tfor (let y = yStart; y <= yEnd; y++) {\n\t\t\t\t\t\tconst clusterIndex = x + divX * (z + y * divZ);\n\t\t\t\t\t\tconst count = counts[clusterIndex];\n\n\t\t\t\t\t\tif (count < limit) {\n\t\t\t\t\t\t\tclusters[pixelsPerCellCount * clusterIndex * 4 + count] = i;\n\t\t\t\t\t\t\tcounts[clusterIndex] = count + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate(lights, gammaCorrection) {\n\t\tthis.updateCells();\n\t\tthis.collectLights(lights);\n\t\tthis.evaluateBounds();\n\t\tthis.evaluateCompressionLimits(gammaCorrection);\n\t\tthis.updateClusters(gammaCorrection);\n\t\tthis.uploadTextures();\n\t}\n\n\tactivate() {\n\t\tthis.updateUniforms();\n\t}\n\n}\n\nWorldClusters.FORMAT_FLOAT = 0;\nWorldClusters.FORMAT_8BIT = 1;\nWorldClusters.lightTextureFormat = WorldClusters.FORMAT_8BIT;\n\nconst set = {\n\tequals: function (set1, set2) {\n\t\tif (set1.size !== set2.size) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (const item of set1) {\n\t\t\tif (!set2.has(item)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n};\n\nclass RenderAction {\n\tconstructor() {\n\t\tthis.layerIndex = 0;\n\t\tthis.cameraIndex = 0;\n\t\tthis.camera = null;\n\t\tthis.renderTarget = null;\n\t\tthis.lightClusters = null;\n\t\tthis.clearColor = false;\n\t\tthis.clearDepth = false;\n\t\tthis.clearStencil = false;\n\t\tthis.triggerPostprocess = false;\n\t\tthis.firstCameraUse = false;\n\t\tthis.directionalLightsSet = new Set();\n\t\tthis.directionalLights = [];\n\t\tthis.directionalLightsIndices = [];\n\t}\n\n\treset() {\n\t\tthis.lightClusters = null;\n\t\tthis.directionalLightsSet.clear();\n\t\tthis.directionalLights.length = 0;\n\t\tthis.directionalLightsIndices.length = 0;\n\t}\n\n\tcollectDirectionalLights(cameraLayers, dirLights, allLights) {\n\t\tthis.directionalLightsSet.clear();\n\t\tthis.directionalLights.length = 0;\n\t\tthis.directionalLightsIndices.length = 0;\n\n\t\tfor (let i = 0; i < dirLights.length; i++) {\n\t\t\tconst light = dirLights[i];\n\n\t\t\tif (light.castShadows) {\n\t\t\t\tfor (let l = 0; l < cameraLayers.length; l++) {\n\t\t\t\t\tif (cameraLayers[l]._splitLights[LIGHTTYPE_DIRECTIONAL].indexOf(light) >= 0) {\n\t\t\t\t\t\tif (!this.directionalLightsSet.has(light)) {\n\t\t\t\t\t\t\tthis.directionalLightsSet.add(light);\n\t\t\t\t\t\t\tthis.directionalLights.push(light);\n\t\t\t\t\t\t\tconst lightIndex = allLights.indexOf(light);\n\t\t\t\t\t\t\tthis.directionalLightsIndices.push(lightIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass LightCompositionData {\n\tconstructor() {\n\t\tthis.shadowCastersSet = new Set();\n\t\tthis.shadowCastersList = [];\n\t}\n\n\tclearShadowCasters() {\n\t\tthis.shadowCastersSet.clear();\n\t\tthis.shadowCastersList.length = 0;\n\t}\n\n\taddShadowCasters(casters) {\n\t\tfor (let i = 0; i < casters.length; i++) {\n\t\t\tconst item = casters[i];\n\n\t\t\tif (!this.shadowCastersSet.has(item)) {\n\t\t\t\tthis.shadowCastersSet.add(item);\n\t\t\t\tthis.shadowCastersList.push(item);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nlet currentApplication;\n\nfunction getApplication() {\n\treturn currentApplication;\n}\n\nfunction setApplication(app) {\n\tcurrentApplication = app;\n}\n\nconst tempSet$1 = new Set();\nconst tempClusterArray = [];\n\nclass LayerComposition extends EventHandler {\n\tconstructor(graphicsDevice, name = \"Untitled\") {\n\t\tvar _getApplication;\n\n\t\tsuper();\n\n\t\tif (typeof graphicsDevice === 'string') {\n\t\t\tgraphicsDevice = null;\n\t\t\tname = graphicsDevice;\n\t\t}\n\n\t\tthis.device = graphicsDevice || ((_getApplication = getApplication()) == null ? void 0 : _getApplication.graphicsDevice);\n\t\tthis.name = name;\n\t\tthis.logRenderActions = false;\n\t\tthis.layerList = [];\n\t\tthis.subLayerList = [];\n\t\tthis.subLayerEnabled = [];\n\t\tthis._opaqueOrder = {};\n\t\tthis._transparentOrder = {};\n\t\tthis._dirty = false;\n\t\tthis._dirtyBlend = false;\n\t\tthis._dirtyLights = false;\n\t\tthis._dirtyCameras = false;\n\t\tthis._meshInstances = [];\n\t\tthis._meshInstancesSet = new Set();\n\t\tthis._lights = [];\n\t\tthis._lightsMap = new Map();\n\t\tthis._lightCompositionData = [];\n\t\tthis._splitLights = [[], [], []];\n\t\tthis.cameras = [];\n\t\tthis._renderActions = [];\n\t\tthis._worldClusters = [];\n\t\tthis._emptyWorldClusters = null;\n\t\tthis._clusteredLightingCells = new Vec3(10, 3, 10);\n\t\tthis._clusteredLightingMaxLights = 64;\n\t}\n\n\tdestroy() {\n\t\tif (this._emptyWorldClusters) {\n\t\t\tthis._emptyWorldClusters.destroy();\n\n\t\t\tthis._emptyWorldClusters = null;\n\t\t}\n\n\t\tthis._worldClusters.forEach(cluster => cluster.destroy());\n\n\t\tthis._worldClusters = null;\n\t}\n\n\tget clusteredLightingCells() {\n\t\treturn this._clusteredLightingCells;\n\t}\n\n\tset clusteredLightingCells(value) {\n\t\tif (!this._clusteredLightingCells.equals(value)) {\n\t\t\tthis._clusteredLightingCells.copy(value);\n\n\t\t\tthis.updateWorldClusters();\n\t\t}\n\t}\n\n\tget clusteredLightingMaxLights() {\n\t\treturn this._clusteredLightingMaxLights;\n\t}\n\n\tset clusteredLightingMaxLights(value) {\n\t\tif (this._clusteredLightingMaxLights !== value) {\n\t\t\tthis._clusteredLightingMaxLights = value;\n\t\t\tthis.updateWorldClusters();\n\t\t}\n\t}\n\n\tupdateWorldClusters() {\n\t\tthis._worldClusters.forEach(cluster => {\n\t\t\tcluster.cells = this._clusteredLightingCells;\n\t\t\tcluster.maxCellLightCount = this._clusteredLightingMaxLights;\n\t\t});\n\t}\n\n\tget emptyWorldClusters() {\n\t\tif (!this._emptyWorldClusters) {\n\t\t\tthis._emptyWorldClusters = new WorldClusters(this.device, new Vec3(1, 1, 1), 4);\n\t\t\tthis._emptyWorldClusters.name = \"ClusterEmpty\";\n\n\t\t\tthis._emptyWorldClusters.update([], false);\n\t\t}\n\n\t\treturn this._emptyWorldClusters;\n\t}\n\n\t_splitLightsArray(target) {\n\t\tvar light;\n\t\tvar lights = target._lights;\n\t\ttarget._splitLights[LIGHTTYPE_DIRECTIONAL].length = 0;\n\t\ttarget._splitLights[LIGHTTYPE_OMNI].length = 0;\n\t\ttarget._splitLights[LIGHTTYPE_SPOT].length = 0;\n\n\t\tfor (var i = 0; i < lights.length; i++) {\n\t\t\tlight = lights[i];\n\n\t\t\tif (light.enabled) {\n\t\t\t\ttarget._splitLights[light._type].push(light);\n\t\t\t}\n\t\t}\n\t}\n\n\t_update() {\n\t\tvar i, j;\n\t\tvar layer;\n\t\tvar len = this.layerList.length;\n\t\tvar result = 0;\n\n\t\tif (!this._dirty || !this._dirtyLights || !this._dirtyCameras) {\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (layer._dirty) {\n\t\t\t\t\tthis._dirty = true;\n\t\t\t\t}\n\n\t\t\t\tif (layer._dirtyLights) {\n\t\t\t\t\tthis._dirtyLights = true;\n\t\t\t\t}\n\n\t\t\t\tif (layer._dirtyCameras) {\n\t\t\t\t\tthis._dirtyCameras = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction addUniqueMeshInstance(destArray, destSet, srcArray) {\n\t\t\tvar meshInst,\n\t\t\t\t\tmaterial,\n\t\t\t\t\tdirtyBlend = false;\n\t\t\tvar srcLen = srcArray.length;\n\n\t\t\tfor (var s = 0; s < srcLen; s++) {\n\t\t\t\tmeshInst = srcArray[s];\n\n\t\t\t\tif (!destSet.has(meshInst)) {\n\t\t\t\t\tdestSet.add(meshInst);\n\t\t\t\t\tdestArray.push(meshInst);\n\t\t\t\t\tmaterial = meshInst.material;\n\n\t\t\t\t\tif (material && material._dirtyBlend) {\n\t\t\t\t\t\tdirtyBlend = true;\n\t\t\t\t\t\tmaterial._dirtyBlend = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dirtyBlend;\n\t\t}\n\n\t\tif (this._dirty) {\n\t\t\tresult |= COMPUPDATED_INSTANCES;\n\t\t\tthis._meshInstances.length = 0;\n\n\t\t\tthis._meshInstancesSet.clear();\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (!layer.passThrough) {\n\t\t\t\t\tthis._dirtyBlend = addUniqueMeshInstance(this._meshInstances, this._meshInstancesSet, layer.opaqueMeshInstances) || this._dirtyBlend;\n\t\t\t\t\tthis._dirtyBlend = addUniqueMeshInstance(this._meshInstances, this._meshInstancesSet, layer.transparentMeshInstances) || this._dirtyBlend;\n\t\t\t\t}\n\n\t\t\t\tlayer._dirty = false;\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tfunction moveByBlendType(dest, src, moveTransparent) {\n\t\t\tvar material, isTransparent;\n\n\t\t\tfor (var s = 0; s < src.length;) {\n\t\t\t\tmaterial = src[s].material;\n\t\t\t\tisTransparent = material && material.blendType !== BLEND_NONE;\n\n\t\t\t\tif (isTransparent === moveTransparent) {\n\t\t\t\t\tdest.push(src[s]);\n\t\t\t\t\tsrc[s] = src[src.length - 1];\n\t\t\t\t\tsrc.length--;\n\t\t\t\t} else {\n\t\t\t\t\ts++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._dirtyBlend) {\n\t\t\tresult |= COMPUPDATED_BLEND;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (!layer.passThrough) {\n\t\t\t\t\tmoveByBlendType(layer.opaqueMeshInstances, layer.transparentMeshInstances, false);\n\t\t\t\t\tmoveByBlendType(layer.transparentMeshInstances, layer.opaqueMeshInstances, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyBlend = false;\n\t\t}\n\n\t\tif (this._dirtyLights) {\n\t\t\tresult |= COMPUPDATED_LIGHTS;\n\t\t\tthis._dirtyLights = false;\n\t\t\tthis.updateLights();\n\t\t}\n\n\t\tif (result) {\n\t\t\tthis.updateShadowCasters();\n\t\t}\n\n\t\tvar camera, index, cameraIndex;\n\n\t\tif (this._dirtyCameras || result & COMPUPDATED_LIGHTS) {\n\t\t\tthis._dirtyCameras = false;\n\t\t\tresult |= COMPUPDATED_CAMERAS;\n\t\t\tthis.cameras.length = 0;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\t\t\t\tlayer._dirtyCameras = false;\n\n\t\t\t\tfor (j = 0; j < layer.cameras.length; j++) {\n\t\t\t\t\tcamera = layer.cameras[j];\n\t\t\t\t\tindex = this.cameras.indexOf(camera);\n\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tthis.cameras.push(camera);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.cameras.length > 1) {\n\t\t\t\tthis.cameras.sort((a, b) => a.priority - b.priority);\n\t\t\t}\n\n\t\t\tconst cameraLayers = [];\n\t\t\tvar renderActionCount = 0;\n\n\t\t\tfor (i = 0; i < this.cameras.length; i++) {\n\t\t\t\tcamera = this.cameras[i];\n\t\t\t\tcameraLayers.length = 0;\n\t\t\t\tlet cameraFirstRenderAction = true;\n\t\t\t\tconst cameraFirstRenderActionIndex = renderActionCount;\n\t\t\t\tlet lastRenderAction = null;\n\t\t\t\tlet postProcessMarked = false;\n\n\t\t\t\tfor (j = 0; j < len; j++) {\n\t\t\t\t\tlayer = this.layerList[j];\n\n\t\t\t\t\tif (layer) {\n\t\t\t\t\t\tif (layer.cameras.length > 0) {\n\t\t\t\t\t\t\tif (camera.layers.indexOf(layer.id) >= 0) {\n\t\t\t\t\t\t\t\tcameraLayers.push(layer);\n\n\t\t\t\t\t\t\t\tif (!postProcessMarked && layer.id === camera.disablePostEffectsLayer) {\n\t\t\t\t\t\t\t\t\tpostProcessMarked = true;\n\n\t\t\t\t\t\t\t\t\tif (lastRenderAction) {\n\t\t\t\t\t\t\t\t\t\tlastRenderAction.triggerPostprocess = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcameraIndex = layer.cameras.indexOf(camera);\n\n\t\t\t\t\t\t\t\tif (cameraIndex >= 0) {\n\t\t\t\t\t\t\t\t\tlastRenderAction = this.addRenderAction(this._renderActions, renderActionCount, layer, j, cameraIndex, cameraFirstRenderAction, postProcessMarked);\n\t\t\t\t\t\t\t\t\trenderActionCount++;\n\t\t\t\t\t\t\t\t\tcameraFirstRenderAction = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cameraFirstRenderActionIndex < renderActionCount) {\n\t\t\t\t\tthis._renderActions[cameraFirstRenderActionIndex].collectDirectionalLights(cameraLayers, this._splitLights[LIGHTTYPE_DIRECTIONAL], this._lights);\n\t\t\t\t}\n\n\t\t\t\tif (!postProcessMarked && lastRenderAction) {\n\t\t\t\t\tlastRenderAction.triggerPostprocess = true;\n\t\t\t\t}\n\n\t\t\t\tif (camera.renderTarget && camera.postEffectsEnabled) {\n\t\t\t\t\tthis.propagateRenderTarget(cameraFirstRenderActionIndex - 1, camera);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._renderActions.length = renderActionCount;\n\n\t\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\t\tthis.allocateLightClusters();\n\t\t\t}\n\t\t}\n\n\t\tif (result & COMPUPDATED_LIGHTS || result & COMPUPDATED_CAMERAS) {\n\t\t\tthis._logRenderActions();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateShadowCasters() {\n\t\tconst lightCount = this._lights.length;\n\n\t\tfor (let i = 0; i < lightCount; i++) {\n\t\t\tthis._lightCompositionData[i].clearShadowCasters();\n\t\t}\n\n\t\tconst len = this.layerList.length;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst layer = this.layerList[i];\n\n\t\t\tif (!tempSet$1.has(layer)) {\n\t\t\t\ttempSet$1.add(layer);\n\t\t\t\tconst lights = layer._lights;\n\n\t\t\t\tfor (let j = 0; j < lights.length; j++) {\n\t\t\t\t\tif (lights[j].castShadows) {\n\t\t\t\t\t\tconst lightIndex = this._lightsMap.get(lights[j]);\n\n\t\t\t\t\t\tconst lightCompData = this._lightCompositionData[lightIndex];\n\t\t\t\t\t\tlightCompData.addShadowCasters(layer.shadowCasters);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttempSet$1.clear();\n\t}\n\n\tupdateLights() {\n\t\tthis._lights.length = 0;\n\n\t\tthis._lightsMap.clear();\n\n\t\tconst count = this.layerList.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst layer = this.layerList[i];\n\n\t\t\tif (!tempSet$1.has(layer)) {\n\t\t\t\ttempSet$1.add(layer);\n\t\t\t\tconst lights = layer._lights;\n\n\t\t\t\tfor (let j = 0; j < lights.length; j++) {\n\t\t\t\t\tconst light = lights[j];\n\n\t\t\t\t\tlet lightIndex = this._lightsMap.get(light);\n\n\t\t\t\t\tif (lightIndex === undefined) {\n\t\t\t\t\t\tlightIndex = this._lights.length;\n\n\t\t\t\t\t\tthis._lightsMap.set(light, lightIndex);\n\n\t\t\t\t\t\tthis._lights.push(light);\n\n\t\t\t\t\t\tlet lightCompData = this._lightCompositionData[lightIndex];\n\n\t\t\t\t\t\tif (!lightCompData) {\n\t\t\t\t\t\t\tlightCompData = new LightCompositionData();\n\t\t\t\t\t\t\tthis._lightCompositionData[lightIndex] = lightCompData;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._splitLightsArray(layer);\n\n\t\t\tlayer._dirtyLights = false;\n\t\t}\n\n\t\ttempSet$1.clear();\n\n\t\tthis._splitLightsArray(this);\n\n\t\tconst lightCount = this._lights.length;\n\t\tthis._lightCompositionData.length = lightCount;\n\t}\n\n\tfindCompatibleCluster(layer, renderActionCount) {\n\t\tfor (let i = 0; i < renderActionCount; i++) {\n\t\t\tconst ra = this._renderActions[i];\n\t\t\tconst raLayer = this.layerList[ra.layerIndex];\n\n\t\t\tif (layer === raLayer) {\n\t\t\t\treturn ra.lightClusters;\n\t\t\t}\n\n\t\t\tif (ra.lightClusters) {\n\t\t\t\tif (set.equals(layer._clusteredLightsSet, raLayer._clusteredLightsSet)) {\n\t\t\t\t\treturn ra.lightClusters;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tallocateLightClusters() {\n\t\ttempClusterArray.push(...this._worldClusters);\n\t\tthis._worldClusters.length = 0;\n\t\tconst count = this._renderActions.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst ra = this._renderActions[i];\n\t\t\tconst layer = this.layerList[ra.layerIndex];\n\n\t\t\tif (layer._clusteredLightsSet.size) {\n\t\t\t\tconst transparent = this.subLayerList[ra.layerIndex];\n\t\t\t\tconst meshInstances = transparent ? layer.transparentMeshInstances : layer.opaqueMeshInstances;\n\n\t\t\t\tif (meshInstances.length) {\n\t\t\t\t\tlet clusters = this.findCompatibleCluster(layer, i);\n\n\t\t\t\t\tif (!clusters) {\n\t\t\t\t\t\tif (tempClusterArray.length) {\n\t\t\t\t\t\t\tclusters = tempClusterArray.pop();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!clusters) {\n\t\t\t\t\t\t\tclusters = new WorldClusters(this.device, this._clusteredLightingCells, this._clusteredLightingMaxLights);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tclusters.name = \"Cluster-\" + this._worldClusters.length;\n\n\t\t\t\t\t\tthis._worldClusters.push(clusters);\n\t\t\t\t\t}\n\n\t\t\t\t\tra.lightClusters = clusters;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!ra.lightClusters) {\n\t\t\t\tra.lightClusters = this.emptyWorldClusters;\n\t\t\t}\n\t\t}\n\n\t\ttempClusterArray.forEach(item => item.destroy());\n\t\ttempClusterArray.length = 0;\n\t}\n\n\taddRenderAction(renderActions, renderActionIndex, layer, layerIndex, cameraIndex, cameraFirstRenderAction, postProcessMarked) {\n\t\tlet renderAction = renderActions[renderActionIndex];\n\n\t\tif (!renderAction) {\n\t\t\trenderAction = renderActions[renderActionIndex] = new RenderAction();\n\t\t}\n\n\t\tlet rt = layer.renderTarget;\n\t\tconst camera = layer.cameras[cameraIndex];\n\n\t\tif (camera && camera.renderTarget) {\n\t\t\tif (layer.id !== LAYERID_DEPTH) {\n\t\t\t\trt = camera.renderTarget;\n\t\t\t}\n\t\t}\n\n\t\tlet used = false;\n\n\t\tfor (let i = renderActionIndex - 1; i >= 0; i--) {\n\t\t\tif (renderActions[i].camera === camera && renderActions[i].renderTarget === rt) {\n\t\t\t\tused = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst needsClear = cameraFirstRenderAction || !used;\n\t\tlet clearColor = needsClear ? camera.clearColorBuffer : false;\n\t\tlet clearDepth = needsClear ? camera.clearDepthBuffer : false;\n\t\tlet clearStencil = needsClear ? camera.clearStencilBuffer : false;\n\t\tclearColor |= layer.clearColorBuffer;\n\t\tclearDepth |= layer.clearDepthBuffer;\n\t\tclearStencil |= layer.clearStencilBuffer;\n\n\t\tif (postProcessMarked && camera.postEffectsEnabled) {\n\t\t\trt = null;\n\t\t}\n\n\t\trenderAction.reset();\n\t\trenderAction.triggerPostprocess = false;\n\t\trenderAction.layerIndex = layerIndex;\n\t\trenderAction.cameraIndex = cameraIndex;\n\t\trenderAction.camera = camera;\n\t\trenderAction.renderTarget = rt;\n\t\trenderAction.clearColor = clearColor;\n\t\trenderAction.clearDepth = clearDepth;\n\t\trenderAction.clearStencil = clearStencil;\n\t\trenderAction.firstCameraUse = cameraFirstRenderAction;\n\t\treturn renderAction;\n\t}\n\n\tpropagateRenderTarget(startIndex, fromCamera) {\n\t\tfor (let a = startIndex; a >= 0; a--) {\n\t\t\tconst ra = this._renderActions[a];\n\t\t\tconst layer = this.layerList[ra.layerIndex];\n\n\t\t\tif (ra.renderTarget && layer.id !== LAYERID_DEPTH) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (layer.id === LAYERID_DEPTH) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst thisCamera = ra == null ? void 0 : ra.camera.camera;\n\n\t\t\tif (thisCamera) {\n\t\t\t\tif (!fromCamera.camera.rect.equals(thisCamera.rect) || !fromCamera.camera.scissorRect.equals(thisCamera.scissorRect)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tra.renderTarget = fromCamera.renderTarget;\n\t\t}\n\t}\n\n\t_logRenderActions() {}\n\n\t_isLayerAdded(layer) {\n\t\tif (this.layerList.indexOf(layer) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_isSublayerAdded(layer, transparent) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i] === layer && this.subLayerList[i] === transparent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpush(layer) {\n\t\tif (this._isLayerAdded(layer)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis.layerList.push(layer);\n\t\tthis._opaqueOrder[layer.id] = this.subLayerList.push(false) - 1;\n\t\tthis._transparentOrder[layer.id] = this.subLayerList.push(true) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsert(layer, index) {\n\t\tif (this._isLayerAdded(layer)) return;\n\t\tthis.layerList.splice(index, 0, layer, layer);\n\t\tthis.subLayerList.splice(index, 0, false, true);\n\t\tvar count = this.layerList.length;\n\n\t\tthis._updateOpaqueOrder(index, count - 1);\n\n\t\tthis._updateTransparentOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremove(layer) {\n\t\tvar id = this.layerList.indexOf(layer);\n\t\tdelete this._opaqueOrder[id];\n\t\tdelete this._transparentOrder[id];\n\n\t\twhile (id >= 0) {\n\t\t\tthis.layerList.splice(id, 1);\n\t\t\tthis.subLayerList.splice(id, 1);\n\t\t\tthis.subLayerEnabled.splice(id, 1);\n\t\t\tid = this.layerList.indexOf(layer);\n\t\t\tthis._dirty = true;\n\t\t\tthis._dirtyLights = true;\n\t\t\tthis._dirtyCameras = true;\n\t\t\tthis.fire(\"remove\", layer);\n\t\t}\n\n\t\tvar count = this.layerList.length;\n\n\t\tthis._updateOpaqueOrder(0, count - 1);\n\n\t\tthis._updateTransparentOrder(0, count - 1);\n\t}\n\n\tpushOpaque(layer) {\n\t\tif (this._isSublayerAdded(layer, false)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis._opaqueOrder[layer.id] = this.subLayerList.push(false) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsertOpaque(layer, index) {\n\t\tif (this._isSublayerAdded(layer, false)) return;\n\t\tthis.layerList.splice(index, 0, layer);\n\t\tthis.subLayerList.splice(index, 0, false);\n\t\tvar count = this.subLayerList.length;\n\n\t\tthis._updateOpaqueOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremoveOpaque(layer) {\n\t\tfor (var i = 0, len = this.layerList.length; i < len; i++) {\n\t\t\tif (this.layerList[i] === layer && !this.subLayerList[i]) {\n\t\t\t\tthis.layerList.splice(i, 1);\n\t\t\t\tthis.subLayerList.splice(i, 1);\n\t\t\t\tlen--;\n\n\t\t\t\tthis._updateOpaqueOrder(i, len - 1);\n\n\t\t\t\tthis.subLayerEnabled.splice(i, 1);\n\t\t\t\tthis._dirty = true;\n\t\t\t\tthis._dirtyLights = true;\n\t\t\t\tthis._dirtyCameras = true;\n\n\t\t\t\tif (this.layerList.indexOf(layer) < 0) {\n\t\t\t\t\tthis.fire(\"remove\", layer);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpushTransparent(layer) {\n\t\tif (this._isSublayerAdded(layer, true)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis._transparentOrder[layer.id] = this.subLayerList.push(true) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsertTransparent(layer, index) {\n\t\tif (this._isSublayerAdded(layer, true)) return;\n\t\tthis.layerList.splice(index, 0, layer);\n\t\tthis.subLayerList.splice(index, 0, true);\n\t\tvar count = this.subLayerList.length;\n\n\t\tthis._updateTransparentOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremoveTransparent(layer) {\n\t\tfor (var i = 0, len = this.layerList.length; i < len; i++) {\n\t\t\tif (this.layerList[i] === layer && this.subLayerList[i]) {\n\t\t\t\tthis.layerList.splice(i, 1);\n\t\t\t\tthis.subLayerList.splice(i, 1);\n\t\t\t\tlen--;\n\n\t\t\t\tthis._updateTransparentOrder(i, len - 1);\n\n\t\t\t\tthis.subLayerEnabled.splice(i, 1);\n\t\t\t\tthis._dirty = true;\n\t\t\t\tthis._dirtyLights = true;\n\t\t\t\tthis._dirtyCameras = true;\n\n\t\t\t\tif (this.layerList.indexOf(layer) < 0) {\n\t\t\t\t\tthis.fire(\"remove\", layer);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t_getSublayerIndex(layer, transparent) {\n\t\tvar id = this.layerList.indexOf(layer);\n\t\tif (id < 0) return -1;\n\n\t\tif (this.subLayerList[id] !== transparent) {\n\t\t\tid = this.layerList.indexOf(layer, id + 1);\n\t\t\tif (id < 0) return -1;\n\n\t\t\tif (this.subLayerList[id] !== transparent) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tgetOpaqueIndex(layer) {\n\t\treturn this._getSublayerIndex(layer, false);\n\t}\n\n\tgetTransparentIndex(layer) {\n\t\treturn this._getSublayerIndex(layer, true);\n\t}\n\n\tgetLayerById(id) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i].id === id) return this.layerList[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetLayerByName(name) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i].name === name) return this.layerList[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_updateOpaqueOrder(startIndex, endIndex) {\n\t\tfor (var i = startIndex; i <= endIndex; i++) {\n\t\t\tif (this.subLayerList[i] === false) {\n\t\t\t\tthis._opaqueOrder[this.layerList[i].id] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateTransparentOrder(startIndex, endIndex) {\n\t\tfor (var i = startIndex; i <= endIndex; i++) {\n\t\t\tif (this.subLayerList[i] === true) {\n\t\t\t\tthis._transparentOrder[this.layerList[i].id] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_sortLayersDescending(layersA, layersB, order) {\n\t\tvar i = 0;\n\t\tvar len = 0;\n\t\tvar id = 0;\n\t\tvar topLayerA = -1;\n\t\tvar topLayerB = -1;\n\n\t\tfor (i = 0, len = layersA.length; i < len; i++) {\n\t\t\tid = layersA[i];\n\n\t\t\tif (order.hasOwnProperty(id)) {\n\t\t\t\ttopLayerA = Math.max(topLayerA, order[id]);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = layersB.length; i < len; i++) {\n\t\t\tid = layersB[i];\n\n\t\t\tif (order.hasOwnProperty(id)) {\n\t\t\t\ttopLayerB = Math.max(topLayerB, order[id]);\n\t\t\t}\n\t\t}\n\n\t\tif (topLayerA === -1 && topLayerB !== -1) {\n\t\t\treturn 1;\n\t\t} else if (topLayerB === -1 && topLayerA !== -1) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn topLayerB - topLayerA;\n\t}\n\n\tsortTransparentLayers(layersA, layersB) {\n\t\treturn this._sortLayersDescending(layersA, layersB, this._transparentOrder);\n\t}\n\n\tsortOpaqueLayers(layersA, layersB) {\n\t\treturn this._sortLayersDescending(layersA, layersB, this._opaqueOrder);\n\t}\n\n}\n\nLayerComposition.clusteredLightingEnabled = false;\n\nvar _oldChunkFloat = function _oldChunkFloat(s, o, p) {\n\n\treturn \"\\n#ifdef MAPFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkColor = function _oldChunkColor(s, o, p) {\n\n\treturn \"\\n#ifdef MAPCOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTex = function _oldChunkTex(s, o, p) {\n\n\treturn \"\\n#ifdef MAPTEXTURE\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTexColor = function _oldChunkTexColor(s, o, p) {\n\n\treturn \"#undef MAPTEXTURECOLOR\\n#ifdef MAPTEXTURE\\n#ifdef MAPCOLOR\\n#define MAPTEXTURECOLOR\\n#endif\\n#endif\\n\" + \"#ifdef MAPTEXTURECOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTexFloat = function _oldChunkTexFloat(s, o, p) {\n\n\treturn \"#undef MAPTEXTUREFLOAT\\n#ifdef MAPTEXTURE\\n#ifdef MAPFLOAT\\n#define MAPTEXTUREFLOAT\\n#endif\\n#endif\\n\" + \"#ifdef MAPTEXTUREFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVert = function _oldChunkVert(s, o, p) {\n\n\treturn \"\\n#ifdef MAPVERTEX\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVertColor = function _oldChunkVertColor(s, o, p) {\n\n\treturn \"#undef MAPVERTEXCOLOR\\n#ifdef MAPVERTEX\\n#ifdef MAPCOLOR\\n#define MAPVERTEXCOLOR\\n#endif\\n#endif\\n\" + \"#ifdef MAPVERTEXCOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVertFloat = function _oldChunkVertFloat(s, o, p) {\n\n\treturn \"#undef MAPVERTEXFLOAT\\n#ifdef MAPVERTEX\\n#ifdef MAPFLOAT\\n#define MAPVERTEXFLOAT\\n#endif\\n#endif\\n\" + \"#ifdef MAPVERTEXFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformSkin = function _oldChunkTransformSkin(s, o, p) {\n\n\treturn \"\\n#ifdef SKIN\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformDynbatch = function _oldChunkTransformDynbatch(s, o, p) {\n\n\treturn \"\\n#ifdef DYNAMICBATCH\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformInstanced = function _oldChunkTransformInstanced(s, o, p) {\n\n\treturn \"\\n#ifdef INSTANCING\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformPixelSnap = function _oldChunkTransformPixelSnap(s, o, p) {\n\n\treturn \"\\n#ifdef PIXELSNAP\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformScreenSpace = function _oldChunkTransformScreenSpace(s, o, p) {\n\n\treturn \"\\n#ifdef SCREENSPACE\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformScreenSpaceBatch = function _oldChunkTransformScreenSpaceBatch(s, o, p) {\n\n\treturn \"#undef SCREENSPACEBATCH\\n#ifdef SCREENSPACE\\n#ifdef BATCH\\n#define SCREENSPACEBATCH\\n#endif\\n#endif\\n\" + \"#ifdef SCREENSPACEBATCH\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformUv1 = function _oldChunkTransformUv1(s, o, p) {\n\n\treturn \"\\n#ifdef UV1LAYOUT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _matTex2D = [];\nvar standard = {\n\t_oldChunkToNew: {\n\t\taoTexPS: {\n\t\t\tn: \"aoPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\taoVertPS: {\n\t\t\tn: \"aoPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tdiffuseConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\tdiffuseTexPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tdiffuseTexConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\tdiffuseVertPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tdiffuseVertConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\temissiveConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\temissiveTexPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\temissiveTexConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\temissiveTexConstFloatPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\temissiveVertPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\temissiveVertConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\temissiveVertConstFloatPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tglossConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\tglossTexPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tglossTexConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\tglossVertPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tglossVertConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tmetalnessConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\tmetalnessTexPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tmetalnessTexConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\tmetalnessVertPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tmetalnessVertConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\topacityConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\topacityTexPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\topacityTexConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\topacityVertPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\topacityVertConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tspecularConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\tspecularTexPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tspecularTexConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\tspecularVertPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tspecularVertConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\ttransformBatchSkinnedVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformDynbatch\n\t\t},\n\t\ttransformInstancedVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformInstanced\n\t\t},\n\t\ttransformPixelSnapVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformPixelSnap\n\t\t},\n\t\ttransformScreenSpaceVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformScreenSpace\n\t\t},\n\t\ttransformScreenSpaceBatchSkinned: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformScreenSpaceBatch\n\t\t},\n\t\ttransformSkinned: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformSkin\n\t\t},\n\t\ttransformUv1: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformUv1\n\t\t}\n\t},\n\toptionsContext: {},\n\toptionsContextMin: {},\n\tgenerateKey: function (options) {\n\t\tvar buildPropertiesList = function buildPropertiesList(options) {\n\t\t\tvar props = [];\n\n\t\t\tfor (var prop in options) {\n\t\t\t\tif (options.hasOwnProperty(prop) && prop !== \"chunks\" && prop !== \"lights\") props.push(prop);\n\t\t\t}\n\n\t\t\treturn props.sort();\n\t\t};\n\n\t\tvar props;\n\n\t\tif (options === this.optionsContextMin) {\n\t\t\tif (!this.propsMin) this.propsMin = buildPropertiesList(options);\n\t\t\tprops = this.propsMin;\n\t\t} else if (options === this.optionsContext) {\n\t\t\tif (!this.props) this.props = buildPropertiesList(options);\n\t\t\tprops = this.props;\n\t\t} else {\n\t\t\tprops = buildPropertiesList(options);\n\t\t}\n\n\t\tvar key = \"standard\";\n\t\tvar i;\n\n\t\tfor (i = 0; i < props.length; i++) {\n\t\t\tif (options[props[i]]) key += props[i] + options[props[i]];\n\t\t}\n\n\t\tif (options.chunks) {\n\t\t\tvar chunks = [];\n\n\t\t\tfor (var p in options.chunks) {\n\t\t\t\tif (options.chunks.hasOwnProperty(p)) {\n\t\t\t\t\tchunks.push(p + options.chunks[p]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchunks.sort();\n\t\t\tkey += chunks;\n\t\t}\n\n\t\tif (options.lights) {\n\t\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\t\tkey += options.lights[i].key;\n\t\t\t}\n\t\t}\n\n\t\treturn hashCode(key);\n\t},\n\t_correctChannel: function (p, chan) {\n\t\tif (_matTex2D[p] > 0) {\n\t\t\tif (_matTex2D[p] < chan.length) {\n\t\t\t\treturn chan.substring(0, _matTex2D[p]);\n\t\t\t} else if (_matTex2D[p] > chan.length) {\n\t\t\t\tvar str = chan;\n\t\t\t\tvar chr = str.charAt(str.length - 1);\n\t\t\t\tvar addLen = _matTex2D[p] - str.length;\n\n\t\t\t\tfor (var i = 0; i < addLen; i++) str += chr;\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\treturn chan;\n\t\t}\n\t},\n\t_setMapTransform: function (codes, name, id, uv) {\n\t\tcodes[0] += \"uniform vec4 texture_\" + name + \"MapTransform;\\n\";\n\t\tvar checkId = id + uv * 100;\n\n\t\tif (!codes[3][checkId]) {\n\t\t\tcodes[1] += \"varying vec2 vUV\" + uv + \"_\" + id + \";\\n\";\n\t\t\tcodes[2] += \"\t vUV\" + uv + \"_\" + id + \" = uv\" + uv + \" * texture_\" + name + \"MapTransform.xy + texture_\" + name + \"MapTransform.zw;\\n\";\n\t\t\tcodes[3][checkId] = true;\n\t\t}\n\n\t\treturn codes;\n\t},\n\t_getUvSourceExpression: function (transformPropName, uVPropName, options) {\n\t\tvar transformId = options[transformPropName];\n\t\tvar uvChannel = options[uVPropName];\n\t\tvar expression;\n\t\tvar isMainPass = options.pass === SHADER_FORWARD || options.pass === SHADER_FORWARDHDR;\n\n\t\tif (isMainPass && options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\texpression = \"nineSlicedUv\";\n\t\t} else if (isMainPass && options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\texpression = \"nineSlicedUv, -1000.0\";\n\t\t} else {\n\t\t\tif (transformId === 0) {\n\t\t\t\texpression = \"vUv\" + uvChannel;\n\t\t\t} else {\n\t\t\t\texpression = \"vUV\" + uvChannel + \"_\" + transformId;\n\t\t\t}\n\n\t\t\tif (options.heightMap && transformPropName !== \"heightMapTransform\") {\n\t\t\t\texpression += \" + dUvOffset\";\n\t\t\t}\n\t\t}\n\n\t\treturn expression;\n\t},\n\t_addMapDef: function (name, enabled) {\n\t\tvar s = \"\\n#undef \" + name + \"\\n\";\n\t\tif (enabled) s += \" #define \" + name + \"\\n\";\n\t\treturn s;\n\t},\n\t_addMapDefs: function (float, color, vertex, map) {\n\t\tvar s = \"\";\n\t\ts += this._addMapDef(\"MAPFLOAT\", float);\n\t\ts += this._addMapDef(\"MAPCOLOR\", color);\n\t\ts += this._addMapDef(\"MAPVERTEX\", vertex);\n\t\ts += this._addMapDef(\"MAPTEXTURE\", map);\n\t\treturn s;\n\t},\n\t_addMap: function (propName, chunkName, options, chunks, samplerFormat) {\n\t\tvar mapPropName = propName + \"Map\";\n\t\tvar uVPropName = mapPropName + \"Uv\";\n\t\tvar transformPropName = mapPropName + \"Transform\";\n\t\tvar channelPropName = mapPropName + \"Channel\";\n\t\tvar vertexColorChannelPropName = propName + \"VertexColorChannel\";\n\t\tvar tintPropName = propName + \"Tint\";\n\t\tvar vertexColorPropName = propName + \"VertexColor\";\n\t\tvar detailModePropName = propName + \"Mode\";\n\t\tvar tintOption = options[tintPropName];\n\t\tvar vertexColorOption = options[vertexColorPropName];\n\t\tvar textureOption = options[mapPropName];\n\t\tvar detailModeOption = options[detailModePropName];\n\t\tvar subCode = chunks[chunkName];\n\n\t\tif (textureOption) {\n\t\t\tvar uv = this._getUvSourceExpression(transformPropName, uVPropName, options);\n\n\t\t\tsubCode = subCode.replace(/\\$UV/g, uv).replace(/\\$CH/g, options[channelPropName]);\n\n\t\t\tif (samplerFormat !== undefined) {\n\t\t\t\tvar fmt = samplerFormat === 0 ? \"texture2DSRGB\" : samplerFormat === 1 ? \"texture2DRGBM\" : \"texture2D\";\n\t\t\t\tsubCode = subCode.replace(/\\$texture2DSAMPLE/g, fmt);\n\t\t\t}\n\t\t}\n\n\t\tif (vertexColorOption) {\n\t\t\tsubCode = subCode.replace(/\\$VC/g, options[vertexColorChannelPropName]);\n\t\t}\n\n\t\tif (detailModeOption) {\n\t\t\tsubCode = subCode.replace(/\\$DETAILMODE/g, detailModeOption);\n\t\t}\n\n\t\tvar isFloatTint = tintOption === 1;\n\t\tvar isVecTint = tintOption === 3;\n\t\tsubCode = this._addMapDefs(isFloatTint, isVecTint, vertexColorOption, textureOption) + subCode;\n\t\treturn subCode.replace(/\\$/g, \"\");\n\t},\n\t_directionalShadowMapProjection: function (light, shadowCoordArgs, shadowParamArg, lightIndex, coordsFunctioName) {\n\t\tlet code = \"\";\n\n\t\tif (light.numCascades > 1) {\n\t\t\tcode += `getShadowCascadeMatrix(light${lightIndex}_shadowMatrixPalette, light${lightIndex}_shadowCascadeDistances, light${lightIndex}_shadowCascadeCount);\\n`;\n\t\t\tshadowCoordArgs = `(cascadeShadowMat, ${shadowParamArg});\\n`;\n\t\t}\n\n\t\tcode += coordsFunctioName + shadowCoordArgs;\n\t\tcode += `fadeShadow(light${lightIndex}_shadowCascadeDistances);\\n`;\n\t\treturn code;\n\t},\n\t_nonPointShadowMapProjection: function (device, light, shadowMatArg, shadowParamArg, lightIndex) {\n\t\tconst shadowCoordArgs = `(${shadowMatArg}, ${shadowParamArg});\\n`;\n\n\t\tif (!light._normalOffsetBias || light._isVsm) {\n\t\t\tif (light._type === LIGHTTYPE_SPOT) {\n\t\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\t\treturn \"\t\t\t getShadowCoordPerspZbuffer\" + shadowCoordArgs;\n\t\t\t\t}\n\n\t\t\t\treturn \"\t\t\t getShadowCoordPersp\" + shadowCoordArgs;\n\t\t\t}\n\n\t\t\treturn this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, \"getShadowCoordOrtho\");\n\t\t}\n\n\t\tif (light._type === LIGHTTYPE_SPOT) {\n\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\treturn \"\t\t\t getShadowCoordPerspZbufferNormalOffset\" + shadowCoordArgs;\n\t\t\t}\n\n\t\t\treturn \"\t\t\t getShadowCoordPerspNormalOffset\" + shadowCoordArgs;\n\t\t}\n\n\t\treturn this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, \"getShadowCoordOrthoNormalOffset\");\n\t},\n\t_addVaryingIfNeeded: function (code, type, name) {\n\t\treturn code.indexOf(name) >= 0 ? \"varying \" + type + \" \" + name + \";\\n\" : \"\";\n\t},\n\t_getLightSourceShapeString: function (shape) {\n\t\tswitch (shape) {\n\t\t\tcase LIGHTSHAPE_RECT:\n\t\t\t\treturn 'Rect';\n\n\t\t\tcase LIGHTSHAPE_DISK:\n\t\t\t\treturn 'Disk';\n\n\t\t\tcase LIGHTSHAPE_SPHERE:\n\t\t\t\treturn 'Sphere';\n\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t},\n\t_vsAddTransformCode: function (code, device, chunks, options) {\n\t\tcode += chunks.transformVS;\n\t\treturn code;\n\t},\n\t_vsAddBaseCode: function (code, device, chunks, options) {\n\t\tcode += chunks.baseVS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED || options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.baseNineSlicedVS;\n\t\t}\n\n\t\treturn code;\n\t},\n\t_fsAddBaseCode: function (code, device, chunks, options) {\n\t\tcode += chunks.basePS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tcode += chunks.baseNineSlicedPS;\n\t\t} else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.baseNineSlicedTiledPS;\n\t\t}\n\n\t\treturn code;\n\t},\n\t_fsAddStartCode: function (code, device, chunks, options) {\n\t\tcode += chunks.startPS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tcode += chunks.startNineSlicedPS;\n\t\t} else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.startNineSlicedTiledPS;\n\t\t}\n\n\t\treturn code;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tvar i, p;\n\t\tvar lighting = options.lights.length > 0;\n\n\t\tif (options.dirLightMap) {\n\t\t\tlighting = true;\n\t\t}\n\n\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\tlighting = true;\n\t\t}\n\n\t\tif (options.shadingModel === SPECULAR_PHONG) {\n\t\t\toptions.fresnelModel = 0;\n\t\t\toptions.specularAntialias = false;\n\t\t\toptions.prefilteredCubemap = false;\n\t\t\toptions.dpAtlas = false;\n\t\t\toptions.ambientSH = false;\n\t\t} else {\n\t\t\toptions.fresnelModel = options.fresnelModel === 0 ? FRESNEL_SCHLICK : options.fresnelModel;\n\t\t}\n\n\t\tvar cubemapReflection = (options.cubeMap || options.prefilteredCubemap && options.useSpecular) && !options.sphereMap && !options.dpAtlas;\n\t\tvar reflections = options.sphereMap || cubemapReflection || options.dpAtlas;\n\t\tvar useTexCubeLod = options.useTexCubeLod;\n\t\tif (options.cubeMap) options.sphereMap = null;\n\t\tif (options.dpAtlas) options.prefilteredCubemap = null;\n\t\tif (!options.useSpecular) options.specularMap = options.glossMap = null;\n\t\tvar needsNormal = lighting || reflections || options.ambientSH || options.prefilteredCubemap || options.heightMap || options.enableGGXSpecular;\n\t\tvar shadowPass = options.pass >= SHADER_SHADOW && options.pass <= 17;\n\t\tthis.options = options;\n\t\tvar code = '';\n\t\tvar codeBody = '';\n\t\tvar varyings = \"\";\n\t\tvar chunks = shaderChunks;\n\t\tvar lightType;\n\t\tvar shadowCoordArgs;\n\t\tvar chunk;\n\t\tvar attributes = {\n\t\t\tvertex_position: SEMANTIC_POSITION\n\t\t};\n\n\t\tif (options.chunks) {\n\t\t\tvar customChunks = {};\n\t\t\tvar newP;\n\n\t\t\tfor (p in chunks) {\n\t\t\t\tif (chunks.hasOwnProperty(p)) {\n\t\t\t\t\tif (!options.chunks[p]) {\n\t\t\t\t\t\tcustomChunks[p] = chunks[p];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchunk = options.chunks[p];\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_normal\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_normal = SEMANTIC_NORMAL;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_tangent\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_tangent = SEMANTIC_TANGENT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_texCoord0\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_texCoord0 = SEMANTIC_TEXCOORD0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_texCoord1\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_texCoord1 = SEMANTIC_TEXCOORD1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_color\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_boneWeights\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_boneIndices\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcustomChunks[p] = chunk;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (p in options.chunks) {\n\t\t\t\tnewP = this._oldChunkToNew[p];\n\n\t\t\t\tif (newP) {\n\t\t\t\t\tcustomChunks[newP.n] = newP.f(options.chunks[p], newP.n, p);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchunks = customChunks;\n\t\t}\n\n\t\tcode = this._vsAddBaseCode(code, device, chunks, options);\n\t\tcodeBody += \"\t vPositionW\t\t= getWorldPosition();\\n\";\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += '#ifndef VIEWMATRIX\\n';\n\t\t\tcode += '#define VIEWMATRIX\\n';\n\t\t\tcode += 'uniform mat4 matrix_view;\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcode += '#ifndef CAMERAPLANES\\n';\n\t\t\tcode += '#define CAMERAPLANES\\n';\n\t\t\tcode += 'uniform vec4 camera_params;\\n\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcodeBody += \"\t\tvDepth = -(matrix_view * vec4(vPositionW,1.0)).z * camera_params.x;\\n\";\n\t\t}\n\n\t\tif (options.useInstancing) {\n\t\t\tattributes.instance_line1 = SEMANTIC_TEXCOORD2;\n\t\t\tattributes.instance_line2 = SEMANTIC_TEXCOORD3;\n\t\t\tattributes.instance_line3 = SEMANTIC_TEXCOORD4;\n\t\t\tattributes.instance_line4 = SEMANTIC_TEXCOORD5;\n\t\t\tcode += chunks.instancingVS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tattributes.vertex_normal = SEMANTIC_NORMAL;\n\t\t\tcodeBody += \"\t vNormalW = getNormal();\\n\";\n\n\t\t\tif (options.sphereMap && device.fragmentUniformsCount <= 16) {\n\t\t\t\tcode += chunks.viewNormalVS;\n\t\t\t\tcodeBody += \"\t vNormalV\t\t= getViewNormal();\\n\";\n\t\t\t}\n\n\t\t\tif ((options.heightMap || options.normalMap || options.enableGGXSpecular) && options.hasTangents) {\n\t\t\t\tattributes.vertex_tangent = SEMANTIC_TANGENT;\n\t\t\t\tcode += chunks.tangentBinormalVS;\n\t\t\t\tcodeBody += \"\t vTangentW\t = getTangent();\\n\";\n\t\t\t\tcodeBody += \"\t vBinormalW\t= getBinormal();\\n\";\n\t\t\t} else if (options.enableGGXSpecular) {\n\t\t\t\tcode += chunks.tangentBinormalVS;\n\t\t\t\tcodeBody += \"\t vObjectSpaceUpW\t= getObjectSpaceUp();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tvar useUv = [];\n\t\tvar useUnmodifiedUv = [];\n\t\tvar maxUvSets = 2;\n\t\tvar cname, mname, tname, uname;\n\n\t\tfor (p in _matTex2D) {\n\t\t\tmname = p + \"Map\";\n\n\t\t\tif (options[p + \"VertexColor\"]) {\n\t\t\t\tcname = p + \"VertexColorChannel\";\n\t\t\t\toptions[cname] = this._correctChannel(p, options[cname]);\n\t\t\t}\n\n\t\t\tif (options[mname]) {\n\t\t\t\tcname = mname + \"Channel\";\n\t\t\t\ttname = mname + \"Transform\";\n\t\t\t\tuname = mname + \"Uv\";\n\t\t\t\toptions[uname] = Math.min(options[uname], maxUvSets - 1);\n\t\t\t\toptions[cname] = this._correctChannel(p, options[cname]);\n\t\t\t\tvar uvSet = options[uname];\n\t\t\t\tuseUv[uvSet] = true;\n\t\t\t\tuseUnmodifiedUv[uvSet] = useUnmodifiedUv[uvSet] || options[mname] && !options[tname];\n\t\t\t}\n\t\t}\n\n\t\tif (options.forceUv1) {\n\t\t\tuseUv[1] = true;\n\t\t\tuseUnmodifiedUv[1] = useUnmodifiedUv[1] !== undefined ? useUnmodifiedUv[1] : true;\n\t\t}\n\n\t\tfor (i = 0; i < maxUvSets; i++) {\n\t\t\tif (useUv[i]) {\n\t\t\t\tattributes[\"vertex_texCoord\" + i] = \"TEXCOORD\" + i;\n\t\t\t\tcode += chunks[\"uv\" + i + \"VS\"];\n\t\t\t\tcodeBody += \"\t vec2 uv\" + i + \" = getUv\" + i + \"();\\n\";\n\t\t\t}\n\n\t\t\tif (useUnmodifiedUv[i]) {\n\t\t\t\tcodeBody += \"\t vUv\" + i + \" = uv\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\tvar codes = [code, varyings, codeBody, []];\n\n\t\tfor (p in _matTex2D) {\n\t\t\tmname = p + \"Map\";\n\n\t\t\tif (options[mname]) {\n\t\t\t\ttname = mname + \"Transform\";\n\n\t\t\t\tif (options[tname]) {\n\t\t\t\t\tuname = mname + \"Uv\";\n\n\t\t\t\t\tthis._setMapTransform(codes, p, options[tname], options[uname]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode = codes[0];\n\t\tvaryings = codes[1];\n\t\tcodeBody = codes[2];\n\n\t\tif (options.vertexColors) {\n\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t\tcodeBody += \"\t vVertexColor = vertex_color;\\n\";\n\t\t}\n\n\t\tif (options.useMorphPosition || options.useMorphNormal) {\n\t\t\tif (options.useMorphTextureBased) {\n\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED\\n\";\n\n\t\t\t\tif (options.useMorphPosition) {\n\t\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED_POSITION\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (options.useMorphNormal) {\n\t\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED_NORMAL\\n\";\n\t\t\t\t}\n\n\t\t\t\tattributes.morph_vertex_id = SEMANTIC_ATTR15;\n\t\t\t\tcode += \"attribute float morph_vertex_id;\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"#define MORPHING\\n\";\n\n\t\t\t\tif (options.useMorphPosition) {\n\t\t\t\t\tattributes.morph_pos0 = SEMANTIC_ATTR8;\n\t\t\t\t\tattributes.morph_pos1 = SEMANTIC_ATTR9;\n\t\t\t\t\tattributes.morph_pos2 = SEMANTIC_ATTR10;\n\t\t\t\t\tattributes.morph_pos3 = SEMANTIC_ATTR11;\n\t\t\t\t\tcode += \"#define MORPHING_POS03\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos0;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos1;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos2;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos3;\\n\";\n\t\t\t\t} else if (options.useMorphNormal) {\n\t\t\t\t\tattributes.morph_nrm0 = SEMANTIC_ATTR8;\n\t\t\t\t\tattributes.morph_nrm1 = SEMANTIC_ATTR9;\n\t\t\t\t\tattributes.morph_nrm2 = SEMANTIC_ATTR10;\n\t\t\t\t\tattributes.morph_nrm3 = SEMANTIC_ATTR11;\n\t\t\t\t\tcode += \"#define MORPHING_NRM03\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm0;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm1;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm2;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm3;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (!options.useMorphNormal) {\n\t\t\t\t\tattributes.morph_pos4 = SEMANTIC_ATTR12;\n\t\t\t\t\tattributes.morph_pos5 = SEMANTIC_ATTR13;\n\t\t\t\t\tattributes.morph_pos6 = SEMANTIC_ATTR14;\n\t\t\t\t\tattributes.morph_pos7 = SEMANTIC_ATTR15;\n\t\t\t\t\tcode += \"#define MORPHING_POS47\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos4;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos5;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos6;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos7;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tattributes.morph_nrm4 = SEMANTIC_ATTR12;\n\t\t\t\t\tattributes.morph_nrm5 = SEMANTIC_ATTR13;\n\t\t\t\t\tattributes.morph_nrm6 = SEMANTIC_ATTR14;\n\t\t\t\t\tattributes.morph_nrm7 = SEMANTIC_ATTR15;\n\t\t\t\t\tcode += \"#define MORPHING_NRM47\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm4;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm5;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm6;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm7;\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.skin) {\n\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t\tcode += skinCode(device, chunks);\n\t\t\tcode += \"#define SKIN\\n\";\n\t\t} else if (options.useInstancing) {\n\t\t\tcode += \"#define INSTANCING\\n\";\n\t\t}\n\n\t\tif (options.screenSpace) {\n\t\t\tcode += \"#define SCREENSPACE\\n\";\n\t\t}\n\n\t\tif (options.pixelSnap) {\n\t\t\tcode += \"#define PIXELSNAP\\n\";\n\t\t}\n\n\t\tcode = this._vsAddTransformCode(code, device, chunks, options);\n\t\tif (needsNormal) code += chunks.normalVS;\n\t\tcode += \"\\n\";\n\t\tcode += chunks.startVS;\n\t\tcode += codeBody;\n\t\tcode += chunks.endVS;\n\t\tcode += \"}\";\n\t\tvar vshader = code;\n\t\tvar oldVars = varyings;\n\t\tvaryings = \"\";\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec4\", \"vVertexColor\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vPositionW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vNormalV\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vNormalW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vTangentW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vBinormalW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vObjectSpaceUpW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec2\", \"vUv0\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec2\", \"vUv1\");\n\t\tvaryings += oldVars;\n\t\tvshader = varyings + vshader;\n\t\tvar startCode = \"\";\n\n\t\tif (device.webgl2) {\n\t\t\tstartCode = versionCode(device);\n\n\t\t\tif (chunks.extensionVS) {\n\t\t\t\tstartCode += chunks.extensionVS + \"\\n\";\n\t\t\t}\n\n\t\t\tvshader = startCode + chunks.gles3VS + vshader;\n\t\t} else {\n\t\t\tif (chunks.extensionVS) {\n\t\t\t\tstartCode = chunks.extensionVS + \"\\n\";\n\t\t\t}\n\n\t\t\tvshader = startCode + vshader;\n\t\t}\n\n\t\tif (options.forceFragmentPrecision && options.forceFragmentPrecision !== \"highp\" && options.forceFragmentPrecision !== \"mediump\" && options.forceFragmentPrecision !== \"lowp\") options.forceFragmentPrecision = null;\n\n\t\tif (options.forceFragmentPrecision) {\n\t\t\tif (options.forceFragmentPrecision === \"highp\" && device.maxPrecision !== \"highp\") options.forceFragmentPrecision = \"mediump\";\n\t\t\tif (options.forceFragmentPrecision === \"mediump\" && device.maxPrecision === \"lowp\") options.forceFragmentPrecision = \"lowp\";\n\t\t}\n\n\t\tvar fshader;\n\t\tcode = '';\n\n\t\tif (device.webgl2) {\n\t\t\tcode += versionCode(device);\n\t\t}\n\n\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\tcode += \"#extension GL_OES_standard_derivatives : enable\\n\\n\";\n\t\t}\n\n\t\tif (chunks.extensionPS) {\n\t\t\tcode += chunks.extensionPS + \"\\n\";\n\t\t}\n\n\t\tif (device.webgl2) {\n\t\t\tcode += chunks.gles3PS;\n\t\t}\n\n\t\tcode += options.forceFragmentPrecision ? \"precision \" + options.forceFragmentPrecision + \" float;\\n\\n\" : precisionCode(device);\n\n\t\tif (options.pass === SHADER_PICK) {\n\t\t\tcode += \"uniform vec4 uColor;\\n\";\n\t\t\tcode += varyings;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"\t\tgl_FragColor = uColor;\\n\";\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t} else if (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += varyings;\n\t\t\tcode += chunks.packDepthPS;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"\t\tgl_FragColor = packFloat(vDepth);\\n\";\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t} else if (shadowPass) {\n\t\t\tconst smode = options.pass - SHADER_SHADOW;\n\t\t\tconst numShadowModes = SHADOW_COUNT;\n\t\t\tlightType = Math.floor(smode / numShadowModes);\n\t\t\tvar shadowType = smode - lightType * numShadowModes;\n\n\t\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\t\tcode += 'uniform vec2 polygonOffset;\\n';\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_VSM32) {\n\t\t\t\tif (device.textureFloatHighPrecision) {\n\t\t\t\t\tcode += '#define VSM_EXPONENT 15.0\\n\\n';\n\t\t\t\t} else {\n\t\t\t\t\tcode += '#define VSM_EXPONENT 5.54\\n\\n';\n\t\t\t\t}\n\t\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\t\tcode += '#define VSM_EXPONENT 5.54\\n\\n';\n\t\t\t}\n\n\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += 'uniform vec3 view_position;\\n';\n\t\t\t\tcode += 'uniform float light_radius;\\n';\n\t\t\t}\n\n\t\t\tcode += varyings;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_PCF3 && (!device.webgl2 || lightType === LIGHTTYPE_OMNI)) {\n\t\t\t\tcode += chunks.packDepthPS;\n\t\t\t} else if (shadowType === SHADOW_VSM8) {\n\t\t\t\tcode += \"vec2 encodeFloatRG( float v ) {\\n\";\n\t\t\t\tcode += \"\t\tvec2 enc = vec2(1.0, 255.0) * v;\\n\";\n\t\t\t\tcode += \"\t\tenc = fract(enc);\\n\";\n\t\t\t\tcode += \"\t\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\";\n\t\t\t\tcode += \"\t\treturn enc;\\n\";\n\t\t\t\tcode += \"}\\n\\n\";\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tvar isVsm = shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32;\n\n\t\t\tif (lightType === LIGHTTYPE_OMNI || isVsm && lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += \"\t float depth = min(distance(view_position, vPositionW) / light_radius, 0.99999);\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"\t float depth = gl_FragCoord.z;\\n\";\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_PCF3 && (!device.webgl2 || lightType === LIGHTTYPE_OMNI)) {\n\t\t\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\t\t\tcode += \"\t float minValue = 2.3374370500153186e-10; //(1.0 / 255.0) / (256.0 * 256.0 * 256.0);\\n\";\n\t\t\t\t\tcode += \"\t depth += polygonOffset.x * max(abs(dFdx(depth)), abs(dFdy(depth))) + minValue * polygonOffset.y;\\n\";\n\t\t\t\t\tcode += \"\t gl_FragColor = packFloat(depth);\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t gl_FragColor = packFloat(depth);\\n\";\n\t\t\t\t}\n\t\t\t} else if (shadowType === SHADOW_PCF3 || shadowType === SHADOW_PCF5) {\n\t\t\t\tcode += \"\t gl_FragColor = vec4(1.0);\\n\";\n\t\t\t} else if (shadowType === SHADOW_VSM8) {\n\t\t\t\tcode += \"\t gl_FragColor = vec4(encodeFloatRG(depth), encodeFloatRG(depth*depth));\\n\";\n\t\t\t} else {\n\t\t\t\tcode += chunks.storeEVSMPS;\n\t\t\t}\n\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t}\n\n\t\tif (options.customFragmentShader) {\n\t\t\tfshader = code + options.customFragmentShader;\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: fshader,\n\t\t\t\ttag: SHADERTAG_MATERIAL\n\t\t\t};\n\t\t}\n\n\t\tcode += varyings;\n\t\tcode = this._fsAddBaseCode(code, device, chunks, options);\n\n\t\tif (options.detailModes) {\n\t\t\tcode += chunks.detailModesPS;\n\t\t}\n\n\t\tvar codeBegin = code;\n\t\tcode = \"\";\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += '#define CLEARCOAT\\n';\n\t\t}\n\n\t\tif (options.opacityFadesSpecular === false) {\n\t\t\tcode += 'uniform float material_alphaFade;\\n';\n\t\t}\n\n\t\tvar numShadowLights = 0;\n\t\tvar shadowTypeUsed = [];\n\t\tvar shadowedDirectionalLightUsed = false;\n\t\tvar useVsm = false;\n\t\tvar usePerspZbufferShadow = false;\n\t\tvar light;\n\t\tvar hasAreaLights = options.lights.some(function (light) {\n\t\t\treturn light._shape && light._shape !== LIGHTSHAPE_PUNCTUAL;\n\t\t});\n\n\t\tif (device.areaLightLutFormat === PIXELFORMAT_R8_G8_B8_A8) {\n\t\t\tcode += \"#define AREA_R8_G8_B8_A8_LUTS\\n\";\n\t\t\tcode += \"#define AREA_LUTS_PRECISION lowp\\n\";\n\t\t} else {\n\t\t\tcode += \"#define AREA_LUTS_PRECISION highp\\n\";\n\t\t}\n\n\t\tif (hasAreaLights) {\n\t\t\tcode += \"#define AREA_LIGHTS\\n\";\n\t\t\tcode += \"uniform AREA_LUTS_PRECISION sampler2D areaLightsLutTex1;\\n\";\n\t\t\tcode += \"uniform AREA_LUTS_PRECISION sampler2D areaLightsLutTex2;\\n\";\n\t\t}\n\n\t\tvar lightShape = LIGHTSHAPE_PUNCTUAL;\n\n\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\tlight = options.lights[i];\n\t\t\tlightType = light._type;\n\n\t\t\tif (hasAreaLights && light._shape) {\n\t\t\t\tlightShape = light._shape;\n\t\t\t} else {\n\t\t\t\tlightShape = LIGHTSHAPE_PUNCTUAL;\n\t\t\t}\n\n\t\t\tcode += \"uniform vec3 light\" + i + \"_color;\\n\";\n\n\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_direction;\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_position;\\n\";\n\t\t\t\tcode += \"uniform float light\" + i + \"_radius;\\n\";\n\n\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_direction;\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_innerConeAngle;\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_outerConeAngle;\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_position;\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_halfWidth;\\n\";\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_halfHeight;\\n\";\n\t\t\t}\n\n\t\t\tif (light.castShadows && !options.noShadow) {\n\t\t\t\tcode += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform mat4 light\" + i + \"_shadowMatrixPalette[4];\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_shadowCascadeDistances[4];\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_shadowCascadeCount;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform vec4 light\" + i + \"_shadowParams;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tshadowedDirectionalLightUsed = true;\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_shadowParams;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\tcode += \"uniform samplerCube light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (light._isPcf && device.webgl2) {\n\t\t\t\t\t\tcode += \"uniform sampler2DShadow light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"uniform sampler2D light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnumShadowLights++;\n\t\t\t\tshadowTypeUsed[light._shadowType] = true;\n\t\t\t\tif (light._isVsm) useVsm = true;\n\t\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives) && lightType === LIGHTTYPE_SPOT) usePerspZbufferShadow = true;\n\t\t\t}\n\n\t\t\tif (light._cookie) {\n\t\t\t\tif (light._cookie._cubemap) {\n\t\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\t\tcode += \"uniform samplerCube light\" + i + \"_cookie;\\n\";\n\t\t\t\t\t\tcode += \"uniform float light\" + i + \"_cookieIntensity;\\n\";\n\t\t\t\t\t\tif (!light.castShadows || options.noShadow) code += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\tcode += \"uniform sampler2D light\" + i + \"_cookie;\\n\";\n\t\t\t\t\t\tcode += \"uniform float light\" + i + \"_cookieIntensity;\\n\";\n\t\t\t\t\t\tif (!light.castShadows || options.noShadow) code += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\n\t\t\t\t\t\tif (light._cookieTransform) {\n\t\t\t\t\t\t\tcode += \"uniform vec4 light\" + i + \"_cookieMatrix;\\n\";\n\t\t\t\t\t\t\tcode += \"uniform vec2 light\" + i + \"_cookieOffset;\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\\n\";\n\t\tvar tbn;\n\n\t\tif (!options.hasTangents && device.extStandardDerivatives) {\n\t\t\ttbn = chunks.TBNderivativePS;\n\t\t} else if (options.fastTbn) {\n\t\t\ttbn = chunks.TBNfastPS;\n\t\t} else {\n\t\t\ttbn = chunks.TBNPS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tif (options.normalMap || options.clearCoatNormalMap) {\n\t\t\t\tcode += options.packedNormal ? chunks.normalXYPS : chunks.normalXYZPS;\n\n\t\t\t\tif (!options.hasTangents) {\n\t\t\t\t\tvar normalMapUv = this._getUvSourceExpression(\"normalMapTransform\", \"normalMapUv\", options);\n\n\t\t\t\t\ttbn = tbn.replace(/\\$UV/g, normalMapUv);\n\t\t\t\t}\n\n\t\t\t\tcode += tbn;\n\t\t\t} else if (options.enableGGXSpecular && !options.heightMap) {\n\t\t\t\tcode += chunks.normalVertexPS;\n\t\t\t\tcode += chunks.TBNObjectSpacePS;\n\t\t\t}\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tif (options.normalMap) {\n\t\t\t\tif (options.normalDetail) {\n\t\t\t\t\tcode += this._addMap(\"normalDetail\", \"normalDetailMapPS\", options, chunks);\n\t\t\t\t}\n\n\t\t\t\tvar transformedNormalMapUv = this._getUvSourceExpression(\"normalMapTransform\", \"normalMapUv\", options);\n\n\t\t\t\tif (options.normalizeNormalMap) {\n\t\t\t\t\tcode += chunks.normalMapPS.replace(/\\$UV/g, transformedNormalMapUv);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.normalMapFastPS.replace(/\\$UV/g, transformedNormalMapUv);\n\t\t\t\t}\n\t\t\t} else if (!(options.enableGGXSpecular && !options.heightMap)) {\n\t\t\t\tcode += chunks.normalVertexPS;\n\t\t\t}\n\t\t}\n\n\t\tcode += gammaCode(options.gamma, chunks);\n\t\tcode += tonemapCode(options.toneMap, chunks);\n\t\tcode += fogCode(options.fog, chunks);\n\t\tif (options.useRgbm) code += chunks.rgbmPS;\n\n\t\tif (cubemapReflection || options.prefilteredCubemap) {\n\t\t\tcode += options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS;\n\t\t}\n\n\t\tif (options.useCubeMapRotation) {\n\t\t\tcode += \"#define CUBEMAP_ROTATION\\n\";\n\t\t}\n\n\t\tif (options.useRightHandedCubeMap) {\n\t\t\tcode += \"#define RIGHT_HANDED_CUBEMAP\\n\";\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tcode += chunks.cubeMapRotatePS;\n\t\t\tcode += options.cubeMapProjection > 0 ? chunks.cubeMapProjectBoxPS : chunks.cubeMapProjectNonePS;\n\t\t\tcode += options.skyboxIntensity ? chunks.envMultiplyPS : chunks.envConstPS;\n\t\t}\n\n\t\tif (options.diffuseDetail) {\n\t\t\tcode += this._addMap(\"diffuseDetail\", \"diffuseDetailMapPS\", options, chunks);\n\t\t}\n\n\t\tcode += this._addMap(\"diffuse\", \"diffusePS\", options, chunks);\n\n\t\tif (options.blendType !== BLEND_NONE || options.alphaTest || options.alphaToCoverage) {\n\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t}\n\n\t\tcode += this._addMap(\"emissive\", \"emissivePS\", options, chunks, options.emissiveFormat);\n\n\t\tif (lighting && options.useSpecular || reflections) {\n\t\t\tif (options.specularAntialias && options.normalMap) {\n\t\t\t\tif (options.normalizeNormalMap && needsNormal) {\n\t\t\t\t\tcode += chunks.specularAaToksvigPS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.specularAaToksvigFastPS;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.specularAaNonePS;\n\t\t\t}\n\n\t\t\tvar specularPropName = options.useMetalness ? \"metalness\" : \"specular\";\n\t\t\tcode += this._addMap(specularPropName, specularPropName + \"PS\", options, chunks);\n\t\t\tcode += this._addMap(\"gloss\", \"glossPS\", options, chunks);\n\n\t\t\tif (options.fresnelModel === FRESNEL_SCHLICK) {\n\t\t\t\tcode += chunks.fresnelSchlickPS;\n\t\t\t}\n\t\t}\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += this._addMap(\"clearCoat\", \"clearCoatPS\", options, chunks);\n\t\t\tcode += this._addMap(\"clearCoatGloss\", \"clearCoatGlossPS\", options, chunks);\n\t\t\tcode += this._addMap(\"clearCoatNormal\", \"clearCoatNormalPS\", options, chunks);\n\t\t}\n\n\t\tif (options.heightMap) {\n\t\t\tif (!options.normalMap) {\n\t\t\t\tvar transformedHeightMapUv = this._getUvSourceExpression(\"heightMapTransform\", \"heightMapUv\", options);\n\n\t\t\t\tif (!options.hasTangents) tbn = tbn.replace(/\\$UV/g, transformedHeightMapUv);\n\t\t\t\tcode += tbn;\n\t\t\t}\n\n\t\t\tcode += this._addMap(\"height\", \"parallaxPS\", options, chunks);\n\t\t}\n\n\t\tvar useAo = options.aoMap || options.aoVertexColor;\n\n\t\tif (useAo) {\n\t\t\tcode += this._addMap(\"ao\", \"aoPS\", options, chunks);\n\n\t\t\tif (options.occludeSpecular) {\n\t\t\t\tif (options.occludeSpecular === SPECOCC_AO) {\n\t\t\t\t\tcode += options.occludeSpecularFloat ? chunks.aoSpecOccSimplePS : chunks.aoSpecOccConstSimplePS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += options.occludeSpecularFloat ? chunks.aoSpecOccPS : chunks.aoSpecOccConstPS;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar reflectionDecode = options.rgbmReflection ? \"decodeRGBM\" : options.hdrReflection ? \"\" : \"gammaCorrectInput\";\n\n\t\tif (options.sphereMap) {\n\t\t\tvar scode = device.fragmentUniformsCount > 16 ? chunks.reflectionSpherePS : chunks.reflectionSphereLowPS;\n\t\t\tscode = scode.replace(/\\$texture2DSAMPLE/g, options.rgbmReflection ? \"texture2DRGBM\" : options.hdrReflection ? \"texture2D\" : \"texture2DSRGB\");\n\t\t\tcode += scode;\n\t\t} else if (cubemapReflection) {\n\t\t\tif (options.prefilteredCubemap) {\n\t\t\t\tif (useTexCubeLod) {\n\t\t\t\t\tcode += chunks.reflectionPrefilteredCubeLodPS.replace(/\\$DECODE/g, reflectionDecode);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.reflectionPrefilteredCubePS.replace(/\\$DECODE/g, reflectionDecode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.reflectionCubePS.replace(/\\$textureCubeSAMPLE/g, options.rgbmReflection ? \"textureCubeRGBM\" : options.hdrReflection ? \"textureCube\" : \"textureCubeSRGB\");\n\t\t\t}\n\t\t} else if (options.dpAtlas) {\n\t\t\tcode += chunks.reflectionDpAtlasPS.replace(/\\$texture2DSAMPLE/g, options.rgbmReflection ? \"texture2DRGBM\" : options.hdrReflection ? \"texture2D\" : \"texture2DSRGB\");\n\t\t}\n\n\t\tif (cubemapReflection || options.sphereMap || options.dpAtlas) {\n\t\t\tif (options.clearCoat > 0) {\n\t\t\t\tcode += chunks.reflectionCCPS;\n\t\t\t}\n\n\t\t\tif (options.refraction) {\n\t\t\t\tcode += chunks.refractionPS;\n\t\t\t}\n\t\t}\n\n\t\tif (numShadowLights > 0) {\n\t\t\tif (shadowedDirectionalLightUsed) {\n\t\t\t\tcode += shaderChunks.shadowCascadesPS;\n\t\t\t}\n\n\t\t\tif (shadowTypeUsed[SHADOW_PCF3]) {\n\t\t\t\tcode += chunks.shadowStandardPS;\n\t\t\t}\n\n\t\t\tif (shadowTypeUsed[SHADOW_PCF5]) {\n\t\t\t\tcode += chunks.shadowStandardGL2PS;\n\t\t\t}\n\n\t\t\tif (useVsm) {\n\t\t\t\tcode += chunks.shadowVSM_commonPS;\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM8]) {\n\t\t\t\t\tcode += chunks.shadowVSM8PS;\n\t\t\t\t}\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM16]) {\n\t\t\t\t\tcode += device.extTextureHalfFloatLinear ? chunks.shadowEVSMPS.replace(/\\$/g, \"16\") : chunks.shadowEVSMnPS.replace(/\\$/g, \"16\");\n\t\t\t\t}\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM32]) {\n\t\t\t\t\tcode += device.extTextureFloatLinear ? chunks.shadowEVSMPS.replace(/\\$/g, \"32\") : chunks.shadowEVSMnPS.replace(/\\$/g, \"32\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!(device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\tcode += chunks.biasConstPS;\n\t\t\t}\n\n\t\t\tcode += chunks.shadowCoordPS + chunks.shadowCommonPS;\n\t\t\tif (usePerspZbufferShadow) code += chunks.shadowCoordPerspZbufferPS;\n\t\t}\n\n\t\tif (options.enableGGXSpecular) code += \"uniform float material_anisotropy;\\n\";\n\n\t\tif (lighting) {\n\t\t\tcode += chunks.lightDiffuseLambertPS;\n\t\t\tif (hasAreaLights) code += chunks.ltc;\n\t\t}\n\n\t\tvar useOldAmbient = false;\n\n\t\tif (options.useSpecular) {\n\t\t\tif (lighting) code += options.shadingModel === SPECULAR_PHONG ? chunks.lightSpecularPhongPS : options.enableGGXSpecular ? chunks.lightSpecularAnisoGGXPS : chunks.lightSpecularBlinnPS;\n\n\t\t\tif (options.sphereMap || cubemapReflection || options.dpAtlas || options.fresnelModel > 0) {\n\t\t\t\tif (options.fresnelModel > 0) {\n\t\t\t\t\tif (options.conserveEnergy && !hasAreaLights) {\n\t\t\t\t\t\tcode += chunks.combineDiffuseSpecularPS;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoConservePS;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularOldPS;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (options.diffuseMap) {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoReflPS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoReflSeparateAmbientPS;\n\t\t\t\t\tuseOldAmbient = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcode += chunks.combineDiffusePS;\n\t\t}\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += chunks.combineClearCoatPS;\n\t\t}\n\n\t\tvar addAmbient = true;\n\n\t\tif (options.lightMap || options.lightVertexColor) {\n\t\t\tvar lightmapChunkPropName = options.dirLightMap && options.useSpecular ? 'lightmapDirPS' : 'lightmapSinglePS';\n\t\t\tcode += this._addMap(\"light\", lightmapChunkPropName, options, chunks, options.lightMapFormat);\n\t\t\taddAmbient = options.lightMapWithoutAmbient;\n\t\t}\n\n\t\tif (addAmbient) {\n\t\t\tvar ambientDecode = options.rgbmAmbient ? \"decodeRGBM\" : options.hdrAmbient ? \"\" : \"gammaCorrectInput\";\n\n\t\t\tif (options.ambientSH) {\n\t\t\t\tcode += chunks.ambientSHPS;\n\t\t\t} else if (options.prefilteredCubemap) {\n\t\t\t\tif (useTexCubeLod) {\n\t\t\t\t\tcode += chunks.ambientPrefilteredCubeLodPS.replace(/\\$DECODE/g, ambientDecode);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.ambientPrefilteredCubePS.replace(/\\$DECODE/g, ambientDecode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.ambientConstantPS;\n\t\t\t}\n\t\t}\n\n\t\tif (options.ambientTint && !useOldAmbient) {\n\t\t\tcode += \"uniform vec3 material_ambient;\\n\";\n\t\t}\n\n\t\tif (options.alphaTest) {\n\t\t\tcode += chunks.alphaTestPS;\n\t\t}\n\n\t\tif (options.msdf) {\n\t\t\tcode += chunks.msdfPS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tcode += chunks.viewDirPS;\n\n\t\t\tif (options.useSpecular) {\n\t\t\t\tcode += options.enableGGXSpecular ? chunks.reflDirAnisoPS : chunks.reflDirPS;\n\t\t\t}\n\t\t}\n\n\t\tvar hasPointLights = false;\n\t\tvar usesLinearFalloff = false;\n\t\tvar usesInvSquaredFalloff = false;\n\t\tvar usesSpot = false;\n\t\tvar usesCookie = false;\n\t\tvar usesCookieNow;\n\n\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\tusesSpot = true;\n\t\t\thasPointLights = true;\n\t\t\tusesLinearFalloff = true;\n\t\t\tconst clusterTextureFormat = WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT ? \"FLOAT\" : \"8BIT\";\n\t\t\tcode += `\\n#define CLUSTER_TEXTURE_${clusterTextureFormat}\\n`;\n\t\t\tcode += chunks.clusteredLightPS;\n\t\t}\n\n\t\tif (options.twoSidedLighting) code += \"uniform float twoSidedLightingNegScaleFactor;\\n\";\n\t\tcode = this._fsAddStartCode(code, device, chunks, options);\n\n\t\tif (needsNormal) {\n\t\t\tif (!options.hasTangents && device.extStandardDerivatives && !options.fastTbn) {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dVertexNormalW = normalize(gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor);\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dVertexNormalW = normalize(vNormalW);\\n\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dVertexNormalW = gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dVertexNormalW = vNormalW;\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((options.heightMap || options.normalMap) && options.hasTangents) {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dTangentW = gl_FrontFacing ? vTangentW * twoSidedLightingNegScaleFactor : -vTangentW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t\tcode += \"\t dBinormalW = gl_FrontFacing ? vBinormalW * twoSidedLightingNegScaleFactor : -vBinormalW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dTangentW = vTangentW;\\n\";\n\t\t\t\t\tcode += \"\t dBinormalW = vBinormalW;\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar opacityParallax = false;\n\n\t\tif (options.blendType === BLEND_NONE && !options.alphaTest && !options.alphaToCoverage) {\n\t\t\tcode += \"\t dAlpha = 1.0;\\n\";\n\t\t} else {\n\t\t\tif (options.heightMap && options.opacityMap) {\n\t\t\t\topacityParallax = true;\n\t\t\t} else {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\n\t\t\t\tif (options.alphaTest) {\n\t\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar getGlossinessCalled = false;\n\n\t\tif (needsNormal) {\n\t\t\tcode += \"\t getViewDir();\\n\";\n\n\t\t\tif (options.heightMap || options.normalMap || options.clearCoatNormalMap || options.enableGGXSpecular) {\n\t\t\t\tcode += \"\t getTBN();\\n\";\n\t\t\t}\n\n\t\t\tif (options.heightMap) {\n\t\t\t\tcode += \"\t getParallax();\\n\";\n\t\t\t}\n\n\t\t\tif (opacityParallax) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\n\t\t\t\tif (options.alphaTest) {\n\t\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcode += \"\t getNormal();\\n\";\n\n\t\t\tif (options.useSpecular) {\n\t\t\t\tif (options.enableGGXSpecular) {\n\t\t\t\t\tcode += \"\t getGlossiness();\\n\";\n\t\t\t\t\tgetGlossinessCalled = true;\n\t\t\t\t}\n\n\t\t\t\tcode += \"\t getReflDir();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\t getAlbedo();\\n\";\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += \"\t getClearCoat();\\n\";\n\t\t\tcode += \"\t getClearCoatGlossiness();\\n\";\n\t\t\tcode += \"\t getClearCoatNormal();\\n\";\n\t\t}\n\n\t\tif (lighting && options.useSpecular || reflections) {\n\t\t\tcode += \"\t getSpecularity();\\n\";\n\t\t\tif (!getGlossinessCalled) code += \"\t getGlossiness();\\n\";\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tcode += \"\t #ifdef AREA_LIGHTS\\n\";\n\t\t\t\tcode += \"\t dSpecularityNoFres = dSpecularity;\\n\";\n\t\t\t\tcode += \"\t #ifdef CLEARCOAT\\n\";\n\t\t\t\tcode += \"\t ccSpecularityNoFres = ccSpecularity;\\n\";\n\t\t\t\tcode += \"\t #endif\\n\";\n\t\t\t\tcode += \"\t #endif\\n\";\n\t\t\t}\n\n\t\t\tif (options.fresnelModel > 0) code += \"\t getFresnel();\\n\";\n\t\t}\n\n\t\tif (addAmbient) {\n\t\t\tcode += \"\t addAmbient();\\n\";\n\t\t}\n\n\t\tif (options.ambientTint && !useOldAmbient) {\n\t\t\tcode += \"\t dDiffuseLight *= material_ambient;\\n\";\n\t\t}\n\n\t\tif (useAo && !options.occludeDirect) {\n\t\t\tcode += \"\t\tapplyAO();\\n\";\n\t\t}\n\n\t\tif (options.lightMap || options.lightVertexColor) {\n\t\t\tcode += \"\t addLightMap();\\n\";\n\t\t}\n\n\t\tif (lighting || reflections) {\n\t\t\tif (cubemapReflection || options.sphereMap || options.dpAtlas) {\n\t\t\t\tif (options.clearCoat > 0) {\n\t\t\t\t\tcode += \"\t addReflectionCC();\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"\t addReflection();\\n\";\n\t\t\t}\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tcode += \"\t ccReflection.rgb *= ccSpecularity;\\n\";\n\t\t\t\tcode += \"\t dReflection.rgb *= dSpecularity;\\n\";\n\t\t\t\tcode += \"\t dSpecularLight *= dSpecularity;\\n\";\n\t\t\t\tcode += \"\t float roughness = max((1.0 - dGlossiness) * (1.0 - dGlossiness), 0.001);\\n\";\n\t\t\t}\n\n\t\t\tvar shapeString = '';\n\n\t\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\t\tusesLinearFalloff = true;\n\t\t\t\thasPointLights = true;\n\t\t\t\tcode += chunks.clusteredLightLoopPS;\n\t\t\t}\n\n\t\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\t\tlight = options.lights[i];\n\t\t\t\tlightType = light._type;\n\n\t\t\t\tif (LayerComposition.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tusesCookieNow = false;\n\n\t\t\t\tif (hasAreaLights && light._shape) {\n\t\t\t\t\tlightShape = light._shape;\n\t\t\t\t\tshapeString = this._getLightSourceShapeString(lightShape);\n\t\t\t\t} else {\n\t\t\t\t\tlightShape = LIGHTSHAPE_PUNCTUAL;\n\t\t\t\t\tshapeString = '';\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tcode += \"\t calc\" + shapeString + \"LightValues(light\" + i + \"_position, light\" + i + \"_halfWidth, light\" + i + \"_halfHeight);\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"\t dLightDirNormW = light\" + i + \"_direction;\\n\";\n\t\t\t\t\tcode += \"\t dAtten = 1.0;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (light._cookie) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT && !light._cookie._cubemap) {\n\t\t\t\t\t\t\tusesCookie = true;\n\t\t\t\t\t\t\tusesCookieNow = true;\n\t\t\t\t\t\t} else if (lightType === LIGHTTYPE_OMNI && light._cookie._cubemap) {\n\t\t\t\t\t\t\tusesCookie = true;\n\t\t\t\t\t\t\tusesCookieNow = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcode += \"\t getLightDirPoint(light\" + i + \"_position);\\n\";\n\t\t\t\t\thasPointLights = true;\n\n\t\t\t\t\tif (usesCookieNow) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\t\tcode += \"\t dAtten3 = getCookie2D\" + (light._cookieFalloff ? \"\" : \"Clip\") + (light._cookieTransform ? \"Xform\" : \"\") + \"(light\" + i + \"_cookie, light\" + i + \"_shadowMatrix, light\" + i + \"_cookieIntensity\" + (light._cookieTransform ? \", light\" + i + \"_cookieMatrix, light\" + i + \"_cookieOffset\" : \"\") + \").\" + light._cookieChannel + \";\\n\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcode += \"\t dAtten3 = getCookieCube(light\" + i + \"_cookie, light\" + i + \"_shadowMatrix, light\" + i + \"_cookieIntensity).\" + light._cookieChannel + \";\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lightShape === LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\t\tif (light._falloffMode === LIGHTFALLOFF_LINEAR) {\n\t\t\t\t\t\t\tcode += \"\t dAtten = getFalloffLinear(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\t\tusesLinearFalloff = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcode += \"\t dAtten = getFalloffInvSquared(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\t\tusesInvSquaredFalloff = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t dAtten = getFalloffWindow(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\tusesInvSquaredFalloff = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcode += \"\t if (dAtten > 0.00001) {\\n\";\n\n\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\tif (!(usesCookieNow && !light._cookieFalloff)) {\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getSpotEffect(light\" + i + \"_direction, light\" + i + \"_innerConeAngle, light\" + i + \"_outerConeAngle);\\n\";\n\t\t\t\t\t\t\tusesSpot = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\t\tcode += \"\t\t\t dAttenD = getLightDiffuse();\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dAttenD = get\" + shapeString + \"LightDiffuse() * 16.0;\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t\t\t dAtten *= getLightDiffuse();\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (light.castShadows && !options.noShadow) {\n\t\t\t\t\tvar shadowReadMode = null;\n\t\t\t\t\tvar evsmExp;\n\n\t\t\t\t\tif (light._shadowType === SHADOW_VSM8) {\n\t\t\t\t\t\tshadowReadMode = \"VSM8\";\n\t\t\t\t\t\tevsmExp = \"0.0\";\n\t\t\t\t\t} else if (light._shadowType === SHADOW_VSM16) {\n\t\t\t\t\t\tshadowReadMode = \"VSM16\";\n\t\t\t\t\t\tevsmExp = \"5.54\";\n\t\t\t\t\t} else if (light._shadowType === SHADOW_VSM32) {\n\t\t\t\t\t\tshadowReadMode = \"VSM32\";\n\n\t\t\t\t\t\tif (device.textureFloatHighPrecision) {\n\t\t\t\t\t\t\tevsmExp = \"15.0\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevsmExp = \"5.54\";\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (light._shadowType === SHADOW_PCF5) {\n\t\t\t\t\t\tshadowReadMode = \"PCF5x5\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshadowReadMode = \"PCF3x3\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shadowReadMode !== null) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\t\t\tshadowCoordArgs = \"(light\" + i + \"_shadowMap, light\" + i + \"_shadowParams);\\n\";\n\n\t\t\t\t\t\t\tif (light._normalOffsetBias) {\n\t\t\t\t\t\t\t\tcode += \"\t\t\t normalOffsetPointShadow(light\" + i + \"_shadowParams);\\n\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getShadowPoint\" + shadowReadMode + shadowCoordArgs;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst shadowMatArg = `light${i}_shadowMatrix`;\n\t\t\t\t\t\t\tconst shadowParamArg = `light${i}_shadowParams`;\n\t\t\t\t\t\t\tcode += this._nonPointShadowMapProjection(device, options.lights[i], shadowMatArg, shadowParamArg, i);\n\t\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) shadowReadMode = \"Spot\" + shadowReadMode;\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getShadow\" + shadowReadMode + \"(light\" + i + \"_shadowMap, light\" + i + \"_shadowParams\" + (light._isVsm ? \", \" + evsmExp : \"\") + \");\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (options.conserveEnergy && options.useSpecular) {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += mix((dAttenD * dAtten) * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \", vec3(0), dLTCSpecFres);\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += (dAttenD * dAtten) * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (hasAreaLights && options.conserveEnergy && options.useSpecular) {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += mix(dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \", vec3(0), dSpecularity);\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += ccLTCSpecFres * get\" + shapeString + \"LightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += dLTCSpecFres * get\" + shapeString + \"LightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (hasAreaLights) {\n\t\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += ccSpecularity * getLightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += dSpecularity * getLightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += getLightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += getLightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"\t }\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"\\n\";\n\t\t\t}\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tif (options.clearCoat > 0) {\n\t\t\t\t\tcode += \"\t ccSpecularity = 1.0;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (options.useSpecular) {\n\t\t\t\t\tcode += \"\t dSpecularity = vec3(1);\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((cubemapReflection || options.sphereMap || options.dpAtlas) && options.refraction) {\n\t\t\t\tcode += \"\t addRefraction();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\\n\";\n\n\t\tif (useAo) {\n\t\t\tif (options.occludeDirect) {\n\t\t\t\tcode += \"\t\tapplyAO();\\n\";\n\t\t\t}\n\n\t\t\tif (options.occludeSpecular) {\n\t\t\t\tcode += \"\t\toccludeSpecular();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tif (options.opacityFadesSpecular === false) {\n\t\t\tif (options.blendType === BLEND_NORMAL || options.blendType === BLEND_PREMULTIPLIED) {\n\t\t\t\tcode += \"float specLum = dot((dSpecularLight + dReflection.rgb * dReflection.a) * dSpecularity, vec3( 0.2126, 0.7152, 0.0722 ));\\n\";\n\t\t\t\tcode += \"#ifdef CLEARCOAT\\n specLum += dot(ccSpecularLight * ccSpecularity + ccReflection.rgb * ccReflection.a * ccSpecularity, vec3( 0.2126, 0.7152, 0.0722 ));\\n#endif\\n\";\n\t\t\t\tcode += \"dAlpha = clamp(dAlpha + gammaCorrectInput(specLum), 0.0, 1.0);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"dAlpha *= material_alphaFade;\\n\";\n\t\t}\n\n\t\tcode += chunks.endPS;\n\n\t\tif (options.blendType === BLEND_NORMAL || options.blendType === BLEND_ADDITIVEALPHA || options.alphaToCoverage) {\n\t\t\tcode += chunks.outputAlphaPS;\n\t\t} else if (options.blendType === BLEND_PREMULTIPLIED) {\n\t\t\tcode += chunks.outputAlphaPremulPS;\n\t\t} else {\n\t\t\tcode += chunks.outputAlphaOpaquePS;\n\t\t}\n\n\t\tif (options.msdf) {\n\t\t\tcode += \"\t gl_FragColor = applyMsdf(gl_FragColor);\\n\";\n\t\t}\n\n\t\tcode += \"\\n\";\n\t\tcode += end();\n\n\t\tif (hasPointLights) {\n\t\t\tcode = chunks.lightDirPointPS + code;\n\t\t}\n\n\t\tif (usesLinearFalloff) {\n\t\t\tcode = chunks.falloffLinearPS + code;\n\t\t}\n\n\t\tif (usesInvSquaredFalloff) {\n\t\t\tcode = chunks.falloffInvSquaredPS + code;\n\t\t}\n\n\t\tif (usesSpot) {\n\t\t\tcode = chunks.spotPS + code;\n\t\t}\n\n\t\tif (usesCookie) {\n\t\t\tcode = chunks.cookiePS + code;\n\t\t}\n\n\t\tvar structCode = \"\";\n\t\tif (code.includes(\"dReflection\")) structCode += \"vec4 dReflection;\\n\";\n\t\tif (code.includes(\"dTBN\")) structCode += \"mat3 dTBN;\\n\";\n\t\tif (code.includes(\"dAlbedo\")) structCode += \"vec3 dAlbedo;\\n\";\n\t\tif (code.includes(\"dEmission\")) structCode += \"vec3 dEmission;\\n\";\n\t\tif (code.includes(\"dNormalW\")) structCode += \"vec3 dNormalW;\\n\";\n\t\tif (code.includes(\"dVertexNormalW\")) structCode += \"vec3 dVertexNormalW;\\n\";\n\t\tif (code.includes(\"dTangentW\")) structCode += \"vec3 dTangentW;\\n\";\n\t\tif (code.includes(\"dBinormalW\")) structCode += \"vec3 dBinormalW;\\n\";\n\t\tif (code.includes(\"dViewDirW\")) structCode += \"vec3 dViewDirW;\\n\";\n\t\tif (code.includes(\"dReflDirW\")) structCode += \"vec3 dReflDirW;\\n\";\n\t\tif (code.includes(\"dDiffuseLight\")) structCode += \"vec3 dDiffuseLight;\\n\";\n\t\tif (code.includes(\"dSpecularLight\")) structCode += \"vec3 dSpecularLight;\\n\";\n\t\tif (code.includes(\"dLightDirNormW\")) structCode += \"vec3 dLightDirNormW;\\n\";\n\t\tif (code.includes(\"dLightDirW\")) structCode += \"vec3 dLightDirW;\\n\";\n\t\tif (code.includes(\"dLightPosW\")) structCode += \"vec3 dLightPosW;\\n\";\n\t\tif (code.includes(\"dShadowCoord\")) structCode += \"vec3 dShadowCoord;\\n\";\n\t\tif (code.includes(\"dNormalMap\")) structCode += \"vec3 dNormalMap;\\n\";\n\t\tif (code.includes(\"dSpecularity\")) structCode += \"vec3 dSpecularity;\\n\";\n\t\tif (code.includes(\"dSpecularityNoFres\")) structCode += \"vec3 dSpecularityNoFres;\\n\";\n\t\tif (code.includes(\"dUvOffset\")) structCode += \"vec2 dUvOffset;\\n\";\n\t\tif (code.includes(\"dGlossiness\")) structCode += \"float dGlossiness;\\n\";\n\t\tif (code.includes(\"dAlpha\")) structCode += \"float dAlpha;\\n\";\n\t\tif (code.includes(\"dAtten\")) structCode += \"float dAtten;\\n\";\n\t\tif (code.includes(\"dAttenD\")) structCode += \"float dAttenD;\\n\";\n\t\tif (code.includes(\"dAtten3\")) structCode += \"vec3 dAtten3;\\n\";\n\t\tif (code.includes(\"dAo\")) structCode += \"float dAo;\\n\";\n\t\tif (code.includes(\"dMsdf\")) structCode += \"vec4 dMsdf;\\n\";\n\t\tif (code.includes(\"ccReflection\")) structCode += \"vec4 ccReflection;\\n\";\n\t\tif (code.includes(\"ccNormalW\")) structCode += \"vec3 ccNormalW;\\n\";\n\t\tif (code.includes(\"ccReflDirW\")) structCode += \"vec3 ccReflDirW;\\n\";\n\t\tif (code.includes(\"ccSpecularLight\")) structCode += \"vec3 ccSpecularLight;\\n\";\n\t\tif (code.includes(\"ccSpecularity\")) structCode += \"float ccSpecularity;\\n\";\n\t\tif (code.includes(\"ccSpecularityNoFres\")) structCode += \"float ccSpecularityNoFres;\\n\";\n\t\tif (code.includes(\"ccGlossiness\")) structCode += \"float ccGlossiness;\\n\";\n\t\tcode = codeBegin + structCode + code;\n\t\tfshader = code;\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader,\n\t\t\ttag: SHADERTAG_MATERIAL\n\t\t};\n\t}\n};\n\nconst programlib = {\n\tbegin: begin,\n\tdummyFragmentCode: dummyFragmentCode,\n\tend: end,\n\tfogCode: fogCode,\n\tgammaCode: gammaCode,\n\tprecisionCode: precisionCode,\n\tskinCode: skinCode,\n\ttonemapCode: tonemapCode,\n\tversionCode: versionCode,\n\tbasic: basic,\n\tparticle: particle,\n\tskybox: skybox,\n\tstandard: standard\n};\n\nconst dpMult = 2.0;\n\nfunction paraboloidFromCubemap(device, sourceCubemap, fixSeamsAmount, dontFlipX) {\n\tconst seamsCode = sourceCubemap.fixCubemapSeams ? shaderChunks.fixCubemapSeamsStretchPS : shaderChunks.fixCubemapSeamsNonePS;\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, seamsCode + shaderChunks.genParaboloidPS, \"genParaboloid\");\n\tconst constantTexSource = device.scope.resolve(\"source\");\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst params = new Float32Array(4);\n\tlet size = sourceCubemap.width;\n\tconst format = sourceCubemap.format;\n\tsize = Math.max(size, 8) * dpMult;\n\tconst tex = new Texture(device, {\n\t\ttype: sourceCubemap.type,\n\t\tformat: format,\n\t\twidth: size * 2,\n\t\theight: size,\n\t\tmipmaps: false\n\t});\n\ttex.name = 'paraboloid';\n\tconst targ = new RenderTarget({\n\t\tcolorBuffer: tex,\n\t\tdepth: false\n\t});\n\tparams[0] = fixSeamsAmount;\n\tparams[1] = dontFlipX ? -1.0 : 1.0;\n\tconstantTexSource.setValue(sourceCubemap);\n\tconstantParams.setValue(params);\n\tdrawQuadWithShader(device, targ, shader);\n\treturn tex;\n}\n\nfunction getDpAtlasRect(rect, mip) {\n\trect.x = math.clamp(mip - 2.0, 0, 1) * 0.5;\n\tconst t = mip - rect.x * 6.0;\n\tconst i = 1.0 - rect.x;\n\trect.y = Math.min(t * 0.5, 0.75) * i + rect.x;\n\trect.z = (1.0 - math.clamp(t, 0, 1) * 0.5) * i;\n\trect.w = rect.z * 0.5;\n\treturn 1.0 / rect.z;\n}\n\nfunction generateDpAtlas(device, sixCubemaps, dontFlipX) {\n\tlet dp;\n\tconst rect = new Vec4();\n\tconst params = new Float32Array(4);\n\tconst size = sixCubemaps[0].width * 2 * dpMult;\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.dpAtlasQuadPS, \"dpAtlasQuad\");\n\tconst constantTexSource = device.scope.resolve(\"source\");\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst tex = new Texture(device, {\n\t\ttype: sixCubemaps[0].type,\n\t\tformat: sixCubemaps[0].format,\n\t\twidth: size,\n\t\theight: size,\n\t\tmipmaps: false\n\t});\n\ttex.name = 'paraboloid';\n\tconst targ = new RenderTarget({\n\t\tcolorBuffer: tex,\n\t\tdepth: false\n\t});\n\tconst borderSize = 2;\n\tconst mip0Width = size;\n\tconst scaleFactor = (mip0Width + borderSize) / mip0Width - 1;\n\tlet scaleAmount;\n\n\tfor (let i = 0; i < 6; i++) {\n\t\tdp = paraboloidFromCubemap(device, sixCubemaps[i], i, dontFlipX);\n\t\tconstantTexSource.setValue(dp);\n\t\tscaleAmount = getDpAtlasRect(rect, i);\n\t\tparams[0] = scaleAmount * scaleFactor;\n\t\tparams[1] = params[0] * 2;\n\t\tparams[0] += 1;\n\t\tparams[1] += 1;\n\t\tconstantParams.setValue(params);\n\t\trect.x *= size;\n\t\trect.y *= size;\n\t\trect.z *= size;\n\t\trect.w *= size;\n\t\tdrawQuadWithShader(device, targ, shader, rect);\n\t}\n\n\treturn tex;\n}\n\nvar id$1 = 0;\n\nclass Material {\n\tconstructor() {\n\t\tthis.name = \"Untitled\";\n\t\tthis.id = id$1++;\n\t\tthis._shader = null;\n\t\tthis.variants = {};\n\t\tthis.parameters = {};\n\t\tthis.alphaTest = 0;\n\t\tthis.alphaToCoverage = false;\n\t\tthis.blend = false;\n\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\tthis.separateAlphaBlend = false;\n\t\tthis.blendSrcAlpha = BLENDMODE_ONE;\n\t\tthis.blendDstAlpha = BLENDMODE_ZERO;\n\t\tthis.blendAlphaEquation = BLENDEQUATION_ADD;\n\t\tthis.cull = CULLFACE_BACK;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\t\tthis.stencilFront = null;\n\t\tthis.stencilBack = null;\n\t\tthis.depthBias = 0;\n\t\tthis.slopeDepthBias = 0;\n\t\tthis.redWrite = true;\n\t\tthis.greenWrite = true;\n\t\tthis.blueWrite = true;\n\t\tthis.alphaWrite = true;\n\t\tthis.meshInstances = [];\n\t\tthis._shaderVersion = 0;\n\t\tthis._scene = null;\n\t\tthis._dirtyBlend = false;\n\t\tthis.dirty = true;\n\t}\n\n\tget shader() {\n\t\treturn this._shader;\n\t}\n\n\tset shader(shader) {\n\t\tthis._shader = shader;\n\t}\n\n\tget blendType() {\n\t\tif (!this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ZERO && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_NONE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_SRC_ALPHA && this.blendDst === BLENDMODE_ONE_MINUS_SRC_ALPHA && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_NORMAL;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_ADDITIVE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_SRC_ALPHA && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_ADDITIVEALPHA;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_DST_COLOR && this.blendDst === BLENDMODE_SRC_COLOR && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_MULTIPLICATIVE2X;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE_MINUS_DST_COLOR && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_SCREEN;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_MIN) {\n\t\t\treturn BLEND_MIN;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_MAX) {\n\t\t\treturn BLEND_MAX;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_DST_COLOR && this.blendDst === BLENDMODE_ZERO && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_MULTIPLICATIVE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE_MINUS_SRC_ALPHA && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_PREMULTIPLIED;\n\t\t}\n\n\t\treturn BLEND_NORMAL;\n\t}\n\n\tset blendType(type) {\n\t\tvar prevBlend = this.blend;\n\n\t\tswitch (type) {\n\t\t\tcase BLEND_NONE:\n\t\t\t\tthis.blend = false;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_NORMAL:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_SRC_ALPHA;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE_MINUS_SRC_ALPHA;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_PREMULTIPLIED:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE_MINUS_SRC_ALPHA;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_ADDITIVE:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_ADDITIVEALPHA:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_SRC_ALPHA;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MULTIPLICATIVE2X:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_SRC_COLOR;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_SCREEN:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE_MINUS_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MULTIPLICATIVE:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MIN:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_MIN;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MAX:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_MAX;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (prevBlend !== this.blend) {\n\t\t\tif (this._scene) {\n\t\t\t\tthis._scene.layers._dirtyBlend = true;\n\t\t\t} else {\n\t\t\t\tthis._dirtyBlend = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._updateMeshInstanceKeys();\n\t}\n\n\t_cloneInternal(clone) {\n\t\tclone.name = this.name;\n\t\tclone.shader = this.shader;\n\t\tclone.alphaTest = this.alphaTest;\n\t\tclone.alphaToCoverage = this.alphaToCoverage;\n\t\tclone.blend = this.blend;\n\t\tclone.blendSrc = this.blendSrc;\n\t\tclone.blendDst = this.blendDst;\n\t\tclone.blendEquation = this.blendEquation;\n\t\tclone.separateAlphaBlend = this.separateAlphaBlend;\n\t\tclone.blendSrcAlpha = this.blendSrcAlpha;\n\t\tclone.blendDstAlpha = this.blendDstAlpha;\n\t\tclone.blendAlphaEquation = this.blendAlphaEquation;\n\t\tclone.cull = this.cull;\n\t\tclone.depthTest = this.depthTest;\n\t\tclone.depthWrite = this.depthWrite;\n\t\tclone.depthBias = this.depthBias;\n\t\tclone.slopeDepthBias = this.slopeDepthBias;\n\t\tif (this.stencilFront) clone.stencilFront = this.stencilFront.clone();\n\n\t\tif (this.stencilBack) {\n\t\t\tif (this.stencilFront === this.stencilBack) {\n\t\t\t\tclone.stencilBack = clone.stencilFront;\n\t\t\t} else {\n\t\t\t\tclone.stencilBack = this.stencilBack.clone();\n\t\t\t}\n\t\t}\n\n\t\tclone.redWrite = this.redWrite;\n\t\tclone.greenWrite = this.greenWrite;\n\t\tclone.blueWrite = this.blueWrite;\n\t\tclone.alphaWrite = this.alphaWrite;\n\t}\n\n\tclone() {\n\t\tvar clone = new Material();\n\n\t\tthis._cloneInternal(clone);\n\n\t\treturn clone;\n\t}\n\n\t_updateMeshInstanceKeys() {\n\t\tvar i,\n\t\t\t\tmeshInstances = this.meshInstances;\n\n\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].updateKey();\n\t\t}\n\t}\n\n\tupdateUniforms() {}\n\n\tupdateShader(device, scene, objDefs) {}\n\n\tupdate() {\n\t\tthis.dirty = true;\n\t\tif (this._shader) this._shader.failed = false;\n\t}\n\n\tclearParameters() {\n\t\tthis.parameters = {};\n\t}\n\n\tgetParameters() {\n\t\treturn this.parameters;\n\t}\n\n\tclearVariants() {\n\t\tvar meshInstance;\n\t\tthis.variants = {};\n\t\tvar j;\n\n\t\tfor (var i = 0; i < this.meshInstances.length; i++) {\n\t\t\tmeshInstance = this.meshInstances[i];\n\n\t\t\tfor (j = 0; j < meshInstance._shader.length; j++) {\n\t\t\t\tmeshInstance._shader[j] = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetParameter(name) {\n\t\treturn this.parameters[name];\n\t}\n\n\tsetParameter(name, data) {\n\t\tif (data === undefined && typeof name === 'object') {\n\t\t\tvar uniformObject = name;\n\n\t\t\tif (uniformObject.length) {\n\t\t\t\tfor (var i = 0; i < uniformObject.length; i++) {\n\t\t\t\t\tthis.setParameter(uniformObject[i]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tname = uniformObject.name;\n\t\t\tdata = uniformObject.value;\n\t\t}\n\n\t\tvar param = this.parameters[name];\n\n\t\tif (param) {\n\t\t\tparam.data = data;\n\t\t} else {\n\t\t\tthis.parameters[name] = {\n\t\t\t\tscopeId: null,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (this.parameters[name]) {\n\t\t\tdelete this.parameters[name];\n\t\t}\n\t}\n\n\tsetParameters(device, names) {\n\t\tvar parameter,\n\t\t\t\tparameters = this.parameters;\n\t\tif (names === undefined) names = parameters;\n\n\t\tfor (var paramName in names) {\n\t\t\tparameter = parameters[paramName];\n\n\t\t\tif (parameter) {\n\t\t\t\tif (!parameter.scopeId) {\n\t\t\t\t\tparameter.scopeId = device.scope.resolve(paramName);\n\t\t\t\t}\n\n\t\t\t\tparameter.scopeId.setValue(parameter.data);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.variants = {};\n\t\tthis.shader = null;\n\n\t\tfor (let i = 0; i < this.meshInstances.length; i++) {\n\t\t\tconst meshInstance = this.meshInstances[i];\n\n\t\t\tfor (let j = 0; j < meshInstance._shader.length; j++) {\n\t\t\t\tmeshInstance._shader[j] = null;\n\t\t\t}\n\n\t\t\tmeshInstance._material = null;\n\t\t\tconst defaultMaterial = Material.defaultMaterial;\n\n\t\t\tif (this !== defaultMaterial) {\n\t\t\t\tmeshInstance.material = defaultMaterial;\n\t\t\t}\n\t\t}\n\t}\n\n\taddMeshInstanceRef(meshInstance) {\n\t\tthis.meshInstances.push(meshInstance);\n\t}\n\n\tremoveMeshInstanceRef(meshInstance) {\n\t\tconst meshInstances = this.meshInstances;\n\t\tconst i = meshInstances.indexOf(meshInstance);\n\n\t\tif (i !== -1) {\n\t\t\tmeshInstances.splice(i, 1);\n\t\t}\n\t}\n\n}\n\nMaterial.defaultMaterial = null;\n\nfunction StandardMaterialOptionsBuilder() {\n\tthis._mapXForms = null;\n}\n\nStandardMaterialOptionsBuilder.prototype.updateMinRef = function (options, device, scene, stdMat, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128) {\n\tthis._updateSharedOptions(options, stdMat, objDefs, pass);\n\n\tthis._updateMinOptions(options, stdMat);\n\n\tthis._updateUVOptions(options, stdMat, objDefs, true);\n};\n\nStandardMaterialOptionsBuilder.prototype.updateRef = function (options, device, scene, stdMat, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128) {\n\tthis._updateSharedOptions(options, stdMat, objDefs, pass);\n\n\toptions.useTexCubeLod = device.useTexCubeLod;\n\n\tthis._updateEnvOptions(options, stdMat, scene, prefilteredCubeMap128);\n\n\tthis._updateMaterialOptions(options, stdMat);\n\n\tif (pass === SHADER_FORWARDHDR) {\n\t\tif (options.gamma) options.gamma = GAMMA_SRGBHDR;\n\t\toptions.toneMap = TONEMAP_LINEAR;\n\t}\n\n\toptions.hasTangents = objDefs && stdMat.normalMap && (objDefs & SHADERDEF_TANGENTS) !== 0;\n\n\tthis._updateLightOptions(options, stdMat, objDefs, sortedLights, staticLightList);\n\n\tthis._updateUVOptions(options, stdMat, objDefs, false);\n};\n\nStandardMaterialOptionsBuilder.prototype._updateSharedOptions = function (options, stdMat, objDefs, pass) {\n\toptions.pass = pass;\n\toptions.alphaTest = stdMat.alphaTest > 0;\n\toptions.forceFragmentPrecision = stdMat.forceFragmentPrecision || \"\";\n\toptions.chunks = stdMat.chunks || \"\";\n\toptions.blendType = stdMat.blendType;\n\toptions.forceUv1 = stdMat.forceUv1;\n\toptions.screenSpace = objDefs && (objDefs & SHADERDEF_SCREENSPACE) !== 0;\n\toptions.skin = objDefs && (objDefs & SHADERDEF_SKIN) !== 0;\n\toptions.useInstancing = objDefs && (objDefs & SHADERDEF_INSTANCING) !== 0;\n\toptions.useMorphPosition = objDefs && (objDefs & SHADERDEF_MORPH_POSITION) !== 0;\n\toptions.useMorphNormal = objDefs && (objDefs & SHADERDEF_MORPH_NORMAL) !== 0;\n\toptions.useMorphTextureBased = objDefs && (objDefs & SHADERDEF_MORPH_TEXTURE_BASED) !== 0;\n\toptions.nineSlicedMode = stdMat.nineSlicedMode || 0;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateUVOptions = function (options, stdMat, objDefs, minimalOptions) {\n\tvar hasUv0 = false;\n\tvar hasUv1 = false;\n\tvar hasVcolor = false;\n\n\tif (objDefs) {\n\t\thasUv0 = (objDefs & SHADERDEF_UV0) !== 0;\n\t\thasUv1 = (objDefs & SHADERDEF_UV1) !== 0;\n\t\thasVcolor = (objDefs & SHADERDEF_VCOLOR) !== 0;\n\t}\n\n\toptions.vertexColors = false;\n\tthis._mapXForms = [];\n\n\tfor (var p in _matTex2D) {\n\t\tthis._updateTexOptions(options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions);\n\t}\n\n\tthis._mapXForms = null;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateMinOptions = function (options, stdMat) {\n\toptions.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE;\n\toptions.lights = [];\n};\n\nStandardMaterialOptionsBuilder.prototype._updateMaterialOptions = function (options, stdMat) {\n\tvar diffuseTint = (stdMat.diffuse.r !== 1 || stdMat.diffuse.g !== 1 || stdMat.diffuse.b !== 1) && (stdMat.diffuseTint || !stdMat.diffuseMap && !stdMat.diffuseVertexColor) ? 3 : 0;\n\tvar specularTint = false;\n\tvar useSpecular = (stdMat.useMetalness ? true : !!stdMat.specularMap) || !!stdMat.sphereMap || !!stdMat.cubeMap || !!stdMat.dpAtlas;\n\tuseSpecular = useSpecular || (stdMat.useMetalness ? true : !(stdMat.specular.r === 0 && stdMat.specular.g === 0 && stdMat.specular.b === 0));\n\tuseSpecular = useSpecular || stdMat.enableGGXSpecular;\n\tuseSpecular = useSpecular || stdMat.clearCoat > 0;\n\n\tif (useSpecular) {\n\t\tif ((stdMat.specularTint || !stdMat.specularMap && !stdMat.specularVertexColor) && !stdMat.useMetalness) {\n\t\t\tspecularTint = stdMat.specular.r !== 1 || stdMat.specular.g !== 1 || stdMat.specular.b !== 1;\n\t\t}\n\t}\n\n\tvar emissiveTint = stdMat.emissiveMap ? 0 : 3;\n\n\tif (!emissiveTint) {\n\t\temissiveTint = (stdMat.emissive.r !== 1 || stdMat.emissive.g !== 1 || stdMat.emissive.b !== 1 || stdMat.emissiveIntensity !== 1) && stdMat.emissiveTint;\n\t\temissiveTint = emissiveTint ? 3 : stdMat.emissiveIntensity !== 1 ? 1 : 0;\n\t}\n\n\tvar isPackedNormalMap = stdMat.normalMap ? stdMat.normalMap.format === PIXELFORMAT_DXT5 || stdMat.normalMap.type === TEXTURETYPE_SWIZZLEGGGR : false;\n\toptions.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE ? 1 : 0;\n\toptions.blendMapsWithColors = true;\n\toptions.ambientTint = stdMat.ambientTint;\n\toptions.diffuseTint = diffuseTint;\n\toptions.specularTint = specularTint ? 3 : 0;\n\toptions.metalnessTint = stdMat.useMetalness && stdMat.metalness < 1 ? 1 : 0;\n\toptions.glossTint = 1;\n\toptions.emissiveTint = emissiveTint;\n\toptions.alphaToCoverage = stdMat.alphaToCoverage;\n\toptions.normalizeNormalMap = stdMat.normalizeNormalMap;\n\toptions.sphereMap = !!stdMat.sphereMap;\n\toptions.cubeMap = !!stdMat.cubeMap;\n\toptions.dpAtlas = !!stdMat.dpAtlas;\n\toptions.ambientSH = !!stdMat.ambientSH;\n\toptions.useSpecular = useSpecular;\n\toptions.emissiveFormat = stdMat.emissiveMap ? stdMat.emissiveMap.type === TEXTURETYPE_RGBM ? 1 : stdMat.emissiveMap.format === PIXELFORMAT_RGBA32F ? 2 : 0 : null;\n\toptions.lightMapFormat = stdMat.lightMap ? stdMat.lightMap.type === TEXTURETYPE_RGBM ? 1 : stdMat.lightMap.format === PIXELFORMAT_RGBA32F ? 2 : 0 : null;\n\toptions.specularAntialias = stdMat.specularAntialias && !!stdMat.normalMap && !!stdMat.normalMap.mipmaps && !isPackedNormalMap;\n\toptions.conserveEnergy = stdMat.conserveEnergy;\n\toptions.opacityFadesSpecular = stdMat.opacityFadesSpecular;\n\toptions.alphaFade = stdMat.alphaFade;\n\toptions.occludeSpecular = stdMat.occludeSpecular;\n\toptions.occludeSpecularFloat = stdMat.occludeSpecularIntensity !== 1.0;\n\toptions.occludeDirect = stdMat.occludeDirect;\n\toptions.shadingModel = stdMat.shadingModel;\n\toptions.fresnelModel = stdMat.fresnelModel;\n\toptions.packedNormal = isPackedNormalMap;\n\toptions.fastTbn = stdMat.fastTbn;\n\toptions.cubeMapProjection = stdMat.cubeMapProjection;\n\toptions.customFragmentShader = stdMat.customFragmentShader;\n\toptions.refraction = !!stdMat.refraction;\n\toptions.useMetalness = stdMat.useMetalness;\n\toptions.enableGGXSpecular = stdMat.enableGGXSpecular;\n\toptions.msdf = !!stdMat.msdfMap;\n\toptions.twoSidedLighting = stdMat.twoSidedLighting;\n\toptions.pixelSnap = stdMat.pixelSnap;\n\toptions.aoMapUv = stdMat.aoUvSet;\n\toptions.diffuseDetail = !!stdMat.diffuseMap;\n\toptions.normalDetail = !!stdMat.normalMap;\n\toptions.diffuseDetailMode = stdMat.diffuseDetailMode;\n\toptions.detailModes = !!options.diffuseDetail;\n\toptions.clearCoat = !!stdMat.clearCoat;\n\toptions.clearCoatTint = stdMat.clearCoat !== 1.0 ? 1 : 0;\n\toptions.clearCoatGlossiness = !!stdMat.clearCoatGlossiness;\n\toptions.clearCoatGlossTint = stdMat.clearCoatGlossiness !== 1.0 ? 1 : 0;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateEnvOptions = function (options, stdMat, scene, prefilteredCubeMap128) {\n\tvar rgbmAmbient = prefilteredCubeMap128 && prefilteredCubeMap128.type === TEXTURETYPE_RGBM || stdMat.cubeMap && stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.dpAtlas && stdMat.dpAtlas.type === TEXTURETYPE_RGBM;\n\tvar hdrAmbient = prefilteredCubeMap128 && (prefilteredCubeMap128.type === TEXTURETYPE_RGBM || prefilteredCubeMap128.format === PIXELFORMAT_RGBA32F) || stdMat.cubeMap && (stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.cubeMap.format === PIXELFORMAT_RGBA32F) || stdMat.dpAtlas && (stdMat.dpAtlas.type === TEXTURETYPE_RGBM || stdMat.dpAtlas.format === PIXELFORMAT_RGBA32F);\n\tvar rgbmReflection = prefilteredCubeMap128 && !stdMat.cubeMap && !stdMat.sphereMap && !stdMat.dpAtlas && prefilteredCubeMap128.type === TEXTURETYPE_RGBM || stdMat.cubeMap && stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.sphereMap && stdMat.sphereMap.type === TEXTURETYPE_RGBM || stdMat.dpAtlas && stdMat.dpAtlas.type === TEXTURETYPE_RGBM;\n\tvar hdrReflection = (prefilteredCubeMap128 && !stdMat.cubeMap && !stdMat.sphereMap && !stdMat.dpAtlas ? prefilteredCubeMap128.type === TEXTURETYPE_RGBM || prefilteredCubeMap128.format === PIXELFORMAT_RGBA32F : false) || stdMat.cubeMap && (stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.cubeMap.format === PIXELFORMAT_RGBA32F) || stdMat.sphereMap && (stdMat.sphereMap.type === TEXTURETYPE_RGBM || stdMat.sphereMap.format === PIXELFORMAT_RGBA32F) || stdMat.dpAtlas && (stdMat.dpAtlas.type === TEXTURETYPE_RGBM || stdMat.dpAtlas.format === PIXELFORMAT_RGBA32F);\n\tvar globalSky128;\n\tif (stdMat.useSkybox && scene._skyboxPrefiltered) globalSky128 = scene._skyboxPrefiltered[0];\n\toptions.fog = stdMat.useFog ? scene.fog : \"none\";\n\toptions.gamma = stdMat.useGammaTonemap ? scene.gammaCorrection : GAMMA_NONE;\n\toptions.toneMap = stdMat.useGammaTonemap ? scene.toneMapping : -1;\n\toptions.rgbmAmbient = rgbmAmbient;\n\toptions.hdrAmbient = hdrAmbient;\n\toptions.rgbmReflection = rgbmReflection;\n\toptions.hdrReflection = hdrReflection;\n\toptions.useRgbm = rgbmReflection || rgbmAmbient || stdMat.emissiveMap && stdMat.emissiveMap.type === TEXTURETYPE_RGBM || stdMat.lightMap && stdMat.lightMap.type === TEXTURETYPE_RGBM;\n\toptions.fixSeams = prefilteredCubeMap128 ? prefilteredCubeMap128.fixCubemapSeams : stdMat.cubeMap ? stdMat.cubeMap.fixCubemapSeams : false;\n\toptions.prefilteredCubemap = !!prefilteredCubeMap128;\n\toptions.skyboxIntensity = prefilteredCubeMap128 && globalSky128 && prefilteredCubeMap128 === globalSky128 && scene.skyboxIntensity !== 1;\n\toptions.useCubeMapRotation = !stdMat.cubeMap && !stdMat.prefilteredCubeMap128 && stdMat.useSkybox && scene && scene.skyboxRotation && !scene.skyboxRotation.equals(Quat.IDENTITY);\n\toptions.useRightHandedCubeMap = stdMat.cubeMap ? stdMat.cubeMap._isRenderTarget : !stdMat.prefilteredCubeMap128 && stdMat.useSkybox && scene && scene._skyboxIsRenderTarget;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateLightOptions = function (options, stdMat, objDefs, sortedLights, staticLightList) {\n\toptions.lightMap = false;\n\toptions.lightMapChannel = \"\";\n\toptions.lightMapUv = 0;\n\toptions.lightMapTransform = 0;\n\toptions.lightMapWithoutAmbient = false;\n\toptions.dirLightMap = false;\n\n\tif (objDefs) {\n\t\toptions.noShadow = (objDefs & SHADERDEF_NOSHADOW) !== 0;\n\n\t\tif ((objDefs & SHADERDEF_LM) !== 0) {\n\t\t\toptions.lightMapFormat = 1;\n\t\t\toptions.lightMap = true;\n\t\t\toptions.lightMapChannel = \"rgb\";\n\t\t\toptions.lightMapUv = 1;\n\t\t\toptions.lightMapTransform = 0;\n\t\t\toptions.lightMapWithoutAmbient = !stdMat.lightMap;\n\t\t\toptions.useRgbm = true;\n\n\t\t\tif ((objDefs & SHADERDEF_DIRLM) !== 0) {\n\t\t\t\toptions.dirLightMap = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (stdMat.useLighting) {\n\t\tvar lightsFiltered = [];\n\t\tvar mask = objDefs ? objDefs >> 16 : 1;\n\n\t\tif (sortedLights) {\n\t\t\tthis._collectLights(LIGHTTYPE_DIRECTIONAL, sortedLights[LIGHTTYPE_DIRECTIONAL], lightsFiltered, mask);\n\n\t\t\tthis._collectLights(LIGHTTYPE_OMNI, sortedLights[LIGHTTYPE_OMNI], lightsFiltered, mask, staticLightList);\n\n\t\t\tthis._collectLights(LIGHTTYPE_SPOT, sortedLights[LIGHTTYPE_SPOT], lightsFiltered, mask, staticLightList);\n\t\t}\n\n\t\toptions.lights = lightsFiltered;\n\t} else {\n\t\toptions.lights = [];\n\t}\n\n\tif (options.lights.length === 0) {\n\t\toptions.noShadow = true;\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._updateTexOptions = function (options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions) {\n\tvar mname = p + \"Map\";\n\tvar vname = p + \"VertexColor\";\n\tvar vcname = p + \"VertexColorChannel\";\n\tvar cname = mname + \"Channel\";\n\tvar tname = mname + \"Transform\";\n\tvar uname = mname + \"Uv\";\n\n\tif (p !== \"light\") {\n\t\toptions[mname] = false;\n\t\toptions[cname] = \"\";\n\t\toptions[tname] = 0;\n\t\toptions[uname] = 0;\n\t}\n\n\toptions[vname] = false;\n\toptions[vcname] = \"\";\n\tvar isOpacity = p === \"opacity\";\n\tif (isOpacity && stdMat.blendType === BLEND_NONE && stdMat.alphaTest === 0.0 && !stdMat.alphaToCoverage) return options;\n\n\tif (!minimalOptions || isOpacity) {\n\t\tif (p !== \"height\" && stdMat[vname]) {\n\t\t\tif (hasVcolor) {\n\t\t\t\toptions[vname] = stdMat[vname];\n\t\t\t\toptions[vcname] = stdMat[vcname];\n\t\t\t\toptions.vertexColors = true;\n\t\t\t}\n\t\t}\n\n\t\tif (stdMat[mname]) {\n\t\t\tvar allow = true;\n\t\t\tif (stdMat[uname] === 0 && !hasUv0) allow = false;\n\t\t\tif (stdMat[uname] === 1 && !hasUv1) allow = false;\n\n\t\t\tif (allow) {\n\t\t\t\toptions[mname] = !!stdMat[mname];\n\t\t\t\toptions[tname] = this._getMapTransformID(stdMat[tname], stdMat[uname]);\n\t\t\t\toptions[cname] = stdMat[cname];\n\t\t\t\toptions[uname] = stdMat[uname];\n\t\t\t}\n\t\t}\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._collectLights = function (lType, lights, lightsFiltered, mask, staticLightList) {\n\tvar light;\n\tvar i;\n\n\tfor (i = 0; i < lights.length; i++) {\n\t\tlight = lights[i];\n\n\t\tif (light.enabled) {\n\t\t\tif (light.mask & mask) {\n\t\t\t\tif (lType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tif (light.isStatic) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlightsFiltered.push(light);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (staticLightList) {\n\t\tfor (i = 0; i < staticLightList.length; i++) {\n\t\t\tlight = staticLightList[i];\n\n\t\t\tif (light._type === lType) {\n\t\t\t\tlightsFiltered.push(light);\n\t\t\t}\n\t\t}\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._getMapTransformID = function (xform, uv) {\n\tif (!xform) return 0;\n\tif (!this._mapXForms[uv]) this._mapXForms[uv] = [];\n\tvar i, same;\n\n\tfor (i = 0; i < this._mapXForms[uv].length; i++) {\n\t\tsame = true;\n\n\t\tif (this._mapXForms[uv][i][0] !== xform.x) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][1] !== xform.y) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][2] !== xform.z) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][3] !== xform.w) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (same) {\n\t\t\treturn i + 1;\n\t\t}\n\t}\n\n\tvar newID = this._mapXForms[uv].length;\n\tthis._mapXForms[uv][newID] = [];\n\tthis._mapXForms[uv][newID][0] = xform.x;\n\tthis._mapXForms[uv][newID][1] = xform.y;\n\tthis._mapXForms[uv][newID][2] = xform.z;\n\tthis._mapXForms[uv][newID][3] = xform.w;\n\treturn newID + 1;\n};\n\nvar standardMaterialParameterTypes = {\n\tname: 'string',\n\tchunks: 'chunks',\n\tmappingFormat: 'string',\n\t_engine: 'boolean',\n\tambient: 'rgb',\n\tambientTint: 'boolean',\n\taoVertexColor: 'boolean',\n\taoVertexColorChannel: 'string',\n\taoMap: 'texture',\n\taoMapChannel: 'string',\n\taoMapUv: 'number',\n\taoMapTiling: 'vec2',\n\taoMapOffset: 'vec2',\n\tdiffuse: 'rgb',\n\tdiffuseTint: 'boolean',\n\tdiffuseVertexColor: 'boolean',\n\tdiffuseVertexColorChannel: 'string',\n\tdiffuseMap: 'texture',\n\tdiffuseMapChannel: 'string',\n\tdiffuseMapUv: 'number',\n\tdiffuseMapTiling: 'vec2',\n\tdiffuseMapOffset: 'vec2',\n\tdiffuseDetailMap: 'texture',\n\tdiffuseDetailMapChannel: 'string',\n\tdiffuseDetailMapUv: 'number',\n\tdiffuseDetailMapTiling: 'vec2',\n\tdiffuseDetailMapOffset: 'vec2',\n\tdiffuseDetailMode: 'string',\n\tspecular: 'rgb',\n\tspecularTint: 'boolean',\n\tspecularVertexColor: 'boolean',\n\tspecularVertexColorChannel: 'string',\n\tspecularMap: 'texture',\n\tspecularMapChannel: 'string',\n\tspecularMapUv: 'number',\n\tspecularMapTiling: 'vec2',\n\tspecularMapOffset: 'vec2',\n\tspecularAntialias: 'boolean',\n\toccludeSpecular: 'enum:occludeSpecular',\n\tuseMetalness: 'boolean',\n\tmetalness: 'number',\n\tenableGGXSpecular: 'boolean',\n\tanisotropy: 'number',\n\tmetalnessTint: 'boolean',\n\tmetalnessVertexColor: 'boolean',\n\tmetalnessVertexColorChannel: 'string',\n\tmetalnessMap: 'texture',\n\tmetalnessMapChannel: 'string',\n\tmetalnessMapUv: 'number',\n\tmetalnessMapTiling: 'vec2',\n\tmetalnessMapOffset: 'vec2',\n\tconserveEnergy: 'boolean',\n\tshininess: 'number',\n\tglossVertexColor: 'boolean',\n\tglossVertexColorChannel: 'string',\n\tglossMap: 'texture',\n\tglossMapChannel: 'string',\n\tglossMapUv: 'number',\n\tglossMapTiling: 'vec2',\n\tglossMapOffset: 'vec2',\n\tclearCoat: 'number',\n\tclearCoatVertexColor: 'boolean',\n\tclearCoatVertexColorChannel: 'string',\n\tclearCoatMap: 'texture',\n\tclearCoatMapChannel: 'string',\n\tclearCoatMapUv: 'number',\n\tclearCoatMapTiling: 'vec2',\n\tclearCoatMapOffset: 'vec2',\n\tclearCoatGlossiness: 'number',\n\tclearCoatGlossVertexColor: 'boolean',\n\tclearCoatGlossVertexColorChannel: 'string',\n\tclearCoatGlossMap: 'texture',\n\tclearCoatGlossMapChannel: 'string',\n\tclearCoatGlossMapUv: 'number',\n\tclearCoatGlossMapTiling: 'vec2',\n\tclearCoatGlossMapOffset: 'vec2',\n\tclearCoatBumpiness: 'number',\n\tclearCoatNormalMap: 'texture',\n\tclearCoatNormalMapUv: 'number',\n\tclearCoatNormalMapTiling: 'vec2',\n\tclearCoatNormalMapOffset: 'vec2',\n\tfresnelModel: 'number',\n\temissive: 'rgb',\n\temissiveTint: 'boolean',\n\temissiveVertexColor: 'boolean',\n\temissiveVertexColorChannel: 'string',\n\temissiveMap: 'texture',\n\temissiveMapChannel: 'string',\n\temissiveMapUv: 'number',\n\temissiveMapTiling: 'vec2',\n\temissiveMapOffset: 'vec2',\n\temissiveIntensity: 'number',\n\tnormalMap: 'texture',\n\tnormalMapTiling: 'vec2',\n\tnormalMapOffset: 'vec2',\n\tnormalMapUv: 'number',\n\tbumpiness: 'number',\n\tnormalDetailMap: 'texture',\n\tnormalDetailMapTiling: 'vec2',\n\tnormalDetailMapOffset: 'vec2',\n\tnormalDetailMapUv: 'number',\n\tnormalDetailMapBumpiness: 'number',\n\theightMap: 'texture',\n\theightMapChannel: 'string',\n\theightMapUv: 'number',\n\theightMapTiling: 'vec2',\n\theightMapOffset: 'vec2',\n\theightMapFactor: 'number',\n\talphaToCoverage: 'boolean',\n\talphaTest: 'number',\n\talphaFade: 'number',\n\topacity: 'number',\n\topacityVertexColor: 'boolean',\n\topacityVertexColorChannel: 'string',\n\topacityMap: 'texture',\n\topacityMapChannel: 'string',\n\topacityMapUv: 'number',\n\topacityMapTiling: 'vec2',\n\topacityMapOffset: 'vec2',\n\topacityFadesSpecular: 'boolean',\n\treflectivity: 'number',\n\trefraction: 'number',\n\trefractionIndex: 'number',\n\tsphereMap: 'texture',\n\tcubeMap: 'cubemap',\n\tcubeMapProjection: 'number',\n\tcubeMapProjectionBox: 'boundingbox',\n\tlightVertexColor: 'boolean',\n\tlightVertexColorChannel: 'string',\n\tlightMap: 'texture',\n\tlightMapChannel: 'string',\n\tlightMapUv: 'number',\n\tlightMapTiling: 'vec2',\n\tlightMapOffset: 'vec2',\n\tdepthTest: 'boolean',\n\tdepthWrite: 'boolean',\n\tdepthBias: 'number',\n\tslopeDepthBias: 'number',\n\tcull: 'enum:cull',\n\tblendType: 'enum:blendType',\n\tshadingModel: 'enum:shadingModel',\n\tuseFog: 'boolean',\n\tuseLighting: 'boolean',\n\tuseSkybox: 'boolean',\n\tuseGammaTonemap: 'boolean',\n\tprefilteredCubeMap128: 'texture',\n\tprefilteredCubeMap64: 'texture',\n\tprefilteredCubeMap32: 'texture',\n\tprefilteredCubeMap16: 'texture',\n\tprefilteredCubeMap8: 'texture',\n\tprefilteredCubeMap4: 'texture'\n};\nvar key, type;\nvar standardMaterialTextureParameters = [];\n\nfor (key in standardMaterialParameterTypes) {\n\ttype = standardMaterialParameterTypes[key];\n\n\tif (type === 'texture') {\n\t\tstandardMaterialTextureParameters.push(key);\n\t}\n}\n\nvar standardMaterialCubemapParameters = [];\n\nfor (key in standardMaterialParameterTypes) {\n\ttype = standardMaterialParameterTypes[key];\n\n\tif (type === 'cubemap') {\n\t\tstandardMaterialCubemapParameters.push(key);\n\t}\n}\n\nconst _propsSerial = [];\nconst _propsSerialDefaultVal = [];\nconst _propsInternalNull = [];\nconst _propsInternalVec3 = [];\nconst _prop2Uniform = {};\nconst _propsColor = [];\n\nclass Chunks {\n\tcopy(from) {\n\t\tfor (const p in from) {\n\t\t\tif (from.hasOwnProperty(p) && p !== 'copy') this[p] = from[p];\n\t\t}\n\t}\n\n}\n\nclass StandardMaterial extends Material {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._assetReferences = {};\n\t\tthis._validator = null;\n\t\tthis.shaderOptBuilder = new StandardMaterialOptionsBuilder();\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t\tconst defVal = _propsSerialDefaultVal[i];\n\t\t\tthis[_propsSerial[i]] = defVal ? defVal.clone ? defVal.clone() : defVal : defVal;\n\t\t}\n\n\t\tfor (let i = 0; i < _propsInternalNull.length; i++) {\n\t\t\tthis[_propsInternalNull[i]] = null;\n\t\t}\n\n\t\tfor (let i = 0; i < _propsInternalVec3.length; i++) {\n\t\t\tthis[_propsInternalVec3[i]] = new Float32Array(3);\n\t\t}\n\n\t\tthis._chunks = new Chunks();\n\t\tthis.cubeMapMinUniform = new Float32Array(3);\n\t\tthis.cubeMapMaxUniform = new Float32Array(3);\n\t}\n\n\tclone() {\n\t\tconst clone = new StandardMaterial();\n\n\t\tthis._cloneInternal(clone);\n\n\t\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t\tconst pname = _propsSerial[i];\n\n\t\t\tif (this[pname] !== undefined) {\n\t\t\t\tif (this[pname] && this[pname].copy) {\n\t\t\t\t\tif (clone[pname]) {\n\t\t\t\t\t\tclone[pname].copy(this[pname]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone[pname] = this[pname].clone();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclone[pname] = this[pname];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n\t_updateMapTransform(transform, tiling, offset) {\n\t\tif (tiling.x === 1 && tiling.y === 1 && offset.x === 0 && offset.y === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttransform = transform || new Vec4();\n\t\ttransform.set(tiling.x, tiling.y, offset.x, 1.0 - tiling.y - offset.y);\n\t\treturn transform;\n\t}\n\n\t_setParameter(name, value) {\n\t\tif (!this.parameters[name]) this._propsSet.push(name);\n\t\tthis.setParameter(name, value);\n\t}\n\n\t_clearParameters() {\n\t\tconst props = this._propsSet;\n\n\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\tdelete this.parameters[props[i]];\n\t\t}\n\n\t\tthis._propsSet = [];\n\t}\n\n\t_updateMap(p) {\n\t\tconst mname = p + \"Map\";\n\t\tconst map = this[mname];\n\n\t\tif (map) {\n\t\t\tthis._setParameter(\"texture_\" + mname, map);\n\n\t\t\tconst tname = mname + \"Transform\";\n\t\t\tthis[tname] = this._updateMapTransform(this[tname], this[mname + \"Tiling\"], this[mname + \"Offset\"]);\n\t\t\tconst transform = this[tname];\n\n\t\t\tif (transform) {\n\t\t\t\tconst uname = mname + \"TransformUniform\";\n\t\t\t\tlet uniform = this[uname];\n\n\t\t\t\tif (!uniform) {\n\t\t\t\t\tuniform = new Float32Array(4);\n\t\t\t\t\tthis[uname] = uniform;\n\t\t\t\t}\n\n\t\t\t\tuniform[0] = transform.x;\n\t\t\t\tuniform[1] = transform.y;\n\t\t\t\tuniform[2] = transform.z;\n\t\t\t\tuniform[3] = transform.w;\n\n\t\t\t\tthis._setParameter('texture_' + tname, uniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUniform(varName, value, changeMat) {\n\t\tconst func = _prop2Uniform[varName];\n\n\t\tif (func) {\n\t\t\treturn func(this, value, changeMat);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateUniforms() {\n\t\tthis._clearParameters();\n\n\t\tthis._setParameter('material_ambient', this.ambientUniform);\n\n\t\tif (!this.diffuseMap || this.diffuseTint) {\n\t\t\tthis._setParameter('material_diffuse', this.diffuseUniform);\n\t\t}\n\n\t\tif (!this.useMetalness) {\n\t\t\tif (!this.specularMap || this.specularTint) {\n\t\t\t\tthis._setParameter('material_specular', this.specularUniform);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.metalnessMap || this.metalness < 1) {\n\t\t\t\tthis._setParameter('material_metalness', this.metalness);\n\t\t\t}\n\t\t}\n\n\t\tif (this.enableGGXSpecular) {\n\t\t\tthis._setParameter('material_anisotropy', this.anisotropy);\n\t\t}\n\n\t\tif (this.clearCoat > 0) {\n\t\t\tthis._setParameter('material_clearCoat', this.clearCoat);\n\n\t\t\tthis._setParameter('material_clearCoatGlossiness', this.clearCoatGlossiness);\n\n\t\t\tthis._setParameter('material_clearCoatReflectivity', this.clearCoat);\n\n\t\t\tthis._setParameter('material_clearCoatBumpiness', this.clearCoatBumpiness);\n\t\t}\n\n\t\tlet uniform = this.getUniform(\"shininess\", this.shininess, true);\n\n\t\tthis._setParameter(uniform.name, uniform.value);\n\n\t\tif (!this.emissiveMap || this.emissiveTint) {\n\t\t\tthis._setParameter('material_emissive', this.emissiveUniform);\n\t\t}\n\n\t\tif (this.emissiveMap) {\n\t\t\tthis._setParameter('material_emissiveIntensity', this.emissiveIntensity);\n\t\t}\n\n\t\tif (this.refraction > 0) {\n\t\t\tthis._setParameter('material_refraction', this.refraction);\n\n\t\t\tthis._setParameter('material_refractionIndex', this.refractionIndex);\n\t\t}\n\n\t\tthis._setParameter('material_opacity', this.opacity);\n\n\t\tif (this.opacityFadesSpecular === false) {\n\t\t\tthis._setParameter('material_alphaFade', this.alphaFade);\n\t\t}\n\n\t\tif (this.occludeSpecular) {\n\t\t\tthis._setParameter('material_occludeSpecularIntensity', this.occludeSpecularIntensity);\n\t\t}\n\n\t\tif (this.cubeMapProjection === CUBEPROJ_BOX) {\n\t\t\tthis._setParameter(this.getUniform(\"cubeMapProjectionBox\", this.cubeMapProjectionBox, true));\n\t\t}\n\n\t\tfor (const p in _matTex2D) {\n\t\t\tthis._updateMap(p);\n\t\t}\n\n\t\tif (this.ambientSH) {\n\t\t\tthis._setParameter('ambientSH[0]', this.ambientSH);\n\t\t}\n\n\t\tif (this.normalMap) {\n\t\t\tthis._setParameter('material_bumpiness', this.bumpiness);\n\t\t}\n\n\t\tif (this.normalMap && this.normalDetailMap) {\n\t\t\tthis._setParameter('material_normalDetailMapBumpiness', this.normalDetailMapBumpiness);\n\t\t}\n\n\t\tif (this.heightMap) {\n\t\t\tuniform = this.getUniform('heightMapFactor', this.heightMapFactor, true);\n\n\t\t\tthis._setParameter(uniform.name, uniform.value);\n\t\t}\n\n\t\tif (this.cubeMap) {\n\t\t\tthis._setParameter('texture_cubeMap', this.cubeMap);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap128) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap128', this.prefilteredCubeMap128);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[0]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap128', this._scene._skyboxPrefiltered[0]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap64) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap64', this.prefilteredCubeMap64);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[1]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap64', this._scene._skyboxPrefiltered[1]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap32) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap32', this.prefilteredCubeMap32);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[2]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap32', this._scene._skyboxPrefiltered[2]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap16) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap16', this.prefilteredCubeMap16);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[3]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap16', this._scene._skyboxPrefiltered[3]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap8) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap8', this.prefilteredCubeMap8);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[4]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap8', this._scene._skyboxPrefiltered[4]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap4) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap4', this.prefilteredCubeMap4);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[5]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap4', this._scene._skyboxPrefiltered[5]);\n\t\t}\n\n\t\tif (this.sphereMap) {\n\t\t\tthis._setParameter('texture_sphereMap', this.sphereMap);\n\t\t}\n\n\t\tif (this.dpAtlas) {\n\t\t\tthis._setParameter('texture_sphereMap', this.dpAtlas);\n\t\t}\n\n\t\tthis._setParameter('material_reflectivity', this.reflectivity);\n\n\t\tif (this.dirtyShader || !this._scene) {\n\t\t\tthis.shader = null;\n\t\t\tthis.clearVariants();\n\t\t}\n\n\t\tthis._processColor();\n\t}\n\n\t_processColor() {\n\t\tif (!this.dirtyColor) return;\n\t\tif (!this._scene && this.useGammaTonemap) return;\n\t\tlet gammaCorrection = false;\n\t\tif (this.useGammaTonemap) gammaCorrection = this._scene.gammaCorrection;\n\n\t\tfor (let i = 0; i < _propsColor.length; i++) {\n\t\t\tconst clr = this[\"_\" + _propsColor[i]];\n\t\t\tconst arr = this[_propsColor[i] + \"Uniform\"];\n\n\t\t\tif (gammaCorrection) {\n\t\t\t\tarr[0] = Math.pow(clr.r, 2.2);\n\t\t\t\tarr[1] = Math.pow(clr.g, 2.2);\n\t\t\t\tarr[2] = Math.pow(clr.b, 2.2);\n\t\t\t} else {\n\t\t\t\tarr[0] = clr.r;\n\t\t\t\tarr[1] = clr.g;\n\t\t\t\tarr[2] = clr.b;\n\t\t\t}\n\t\t}\n\n\t\tfor (let c = 0; c < 3; c++) {\n\t\t\tthis.emissiveUniform[c] *= this.emissiveIntensity;\n\t\t}\n\n\t\tthis.dirtyColor = false;\n\t}\n\n\tupdateShader(device, scene, objDefs, staticLightList, pass, sortedLights) {\n\t\tif (!this._colorProcessed && this._scene) {\n\t\t\tthis._colorProcessed = true;\n\n\t\t\tthis._processColor();\n\t\t}\n\n\t\tconst useTexCubeLod = device.useTexCubeLod;\n\t\tconst useDp = !device.extTextureLod;\n\t\tlet globalSky128, globalSky64, globalSky32, globalSky16, globalSky8, globalSky4;\n\n\t\tif (this.useSkybox) {\n\t\t\tglobalSky128 = scene._skyboxPrefiltered[0];\n\t\t\tglobalSky64 = scene._skyboxPrefiltered[1];\n\t\t\tglobalSky32 = scene._skyboxPrefiltered[2];\n\t\t\tglobalSky16 = scene._skyboxPrefiltered[3];\n\t\t\tglobalSky8 = scene._skyboxPrefiltered[4];\n\t\t\tglobalSky4 = scene._skyboxPrefiltered[5];\n\t\t}\n\n\t\tconst prefilteredCubeMap128 = this.prefilteredCubeMap128 || globalSky128;\n\t\tconst prefilteredCubeMap64 = this.prefilteredCubeMap64 || globalSky64;\n\t\tconst prefilteredCubeMap32 = this.prefilteredCubeMap32 || globalSky32;\n\t\tconst prefilteredCubeMap16 = this.prefilteredCubeMap16 || globalSky16;\n\t\tconst prefilteredCubeMap8 = this.prefilteredCubeMap8 || globalSky8;\n\t\tconst prefilteredCubeMap4 = this.prefilteredCubeMap4 || globalSky4;\n\n\t\tif (prefilteredCubeMap128) {\n\t\t\tconst allMips = prefilteredCubeMap128 && prefilteredCubeMap64 && prefilteredCubeMap32 && prefilteredCubeMap16 && prefilteredCubeMap8 && prefilteredCubeMap4;\n\n\t\t\tif (useDp && allMips) {\n\t\t\t\tif (!prefilteredCubeMap128.dpAtlas) {\n\t\t\t\t\tconst atlas = [prefilteredCubeMap128, prefilteredCubeMap64, prefilteredCubeMap32, prefilteredCubeMap16, prefilteredCubeMap8, prefilteredCubeMap4];\n\t\t\t\t\tprefilteredCubeMap128.dpAtlas = generateDpAtlas(device, atlas);\n\t\t\t\t\tprefilteredCubeMap128.sh = shFromCubemap(device, prefilteredCubeMap16);\n\t\t\t\t}\n\n\t\t\t\tthis.dpAtlas = prefilteredCubeMap128.dpAtlas;\n\t\t\t\tthis.ambientSH = prefilteredCubeMap128.sh;\n\n\t\t\t\tthis._setParameter('ambientSH[0]', this.ambientSH);\n\n\t\t\t\tthis._setParameter('texture_sphereMap', this.dpAtlas);\n\t\t\t} else if (useTexCubeLod) {\n\t\t\t\tif (prefilteredCubeMap128._levels.length < 6) {\n\t\t\t\t\tif (allMips) {\n\t\t\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"Can't use prefiltered cubemap: \" + allMips + \", \" + useTexCubeLod + \", \" + prefilteredCubeMap128._levels);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\t\t\t\t}\n\t\t\t} else if (allMips) {\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap64', prefilteredCubeMap64);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap32', prefilteredCubeMap32);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap16', prefilteredCubeMap16);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap8', prefilteredCubeMap8);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap4', prefilteredCubeMap4);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Can't use prefiltered cubemap: \" + allMips + \", \" + useTexCubeLod + \", \" + prefilteredCubeMap128._levels);\n\t\t\t}\n\n\t\t\tif (this.useSkybox && !scene.skyboxRotation.equals(Quat.IDENTITY) && scene._skyboxRotationMat3) {\n\t\t\t\tthis._setParameter('cubeMapRotationMatrix', scene._skyboxRotationMat3.data);\n\t\t\t}\n\t\t}\n\n\t\tconst minimalOptions = pass > SHADER_FORWARDHDR && pass <= SHADER_PICK;\n\t\tlet options = minimalOptions ? standard.optionsContextMin : standard.optionsContext;\n\t\tif (minimalOptions) this.shaderOptBuilder.updateMinRef(options, device, scene, this, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128);else this.shaderOptBuilder.updateRef(options, device, scene, this, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128);\n\n\t\tif (this.onUpdateShader) {\n\t\t\toptions = this.onUpdateShader(options);\n\t\t}\n\n\t\tconst library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('standard', options);\n\n\t\tif (!objDefs) {\n\t\t\tthis.clearVariants();\n\t\t\tthis.variants[0] = this.shader;\n\t\t}\n\n\t\tthis.dirtyShader = false;\n\t}\n\n\tdestroy() {\n\t\tfor (const asset in this._assetReferences) {\n\t\t\tthis._assetReferences[asset]._unbind();\n\t\t}\n\n\t\tthis._assetReferences = null;\n\t\tthis._validator = null;\n\t\tsuper.destroy();\n\t}\n\n}\n\nStandardMaterial.TEXTURE_PARAMETERS = standardMaterialTextureParameters;\nStandardMaterial.CUBEMAP_PARAMETERS = standardMaterialCubemapParameters;\n\nfunction _defineTex2D(obj, name, uv, channels, defChannel, vertexColor, detailMode) {\n\tvar privMap = \"_\" + name + \"Map\";\n\tvar privMapTiling = privMap + \"Tiling\";\n\tvar privMapOffset = privMap + \"Offset\";\n\tvar mapTransform = privMap.substring(1) + \"Transform\";\n\tvar mapTransformUniform = mapTransform + \"Uniform\";\n\tvar privMapUv = privMap + \"Uv\";\n\tvar privMapChannel = privMap + \"Channel\";\n\tvar privMapVertexColor = \"_\" + name + \"VertexColor\";\n\tvar privMapVertexColorChannel = \"_\" + name + \"VertexColorChannel\";\n\tvar privMapDetailMode = \"_\" + name + \"Mode\";\n\tobj[privMap] = null;\n\tobj[privMapTiling] = new Vec2(1, 1);\n\tobj[privMapOffset] = new Vec2(0, 0);\n\tobj[mapTransform] = null;\n\tobj[mapTransformUniform] = null;\n\tobj[privMapUv] = uv;\n\n\tif (channels > 0) {\n\t\tvar channel = defChannel ? defChannel : channels > 1 ? \"rgb\" : \"g\";\n\t\tobj[privMapChannel] = channel;\n\t\tif (vertexColor) obj[privMapVertexColorChannel] = channel;\n\t}\n\n\tif (vertexColor) obj[privMapVertexColor] = false;\n\tif (detailMode) obj[privMapDetailMode] = DETAILMODE_MUL;\n\t_matTex2D[name] = channels;\n\tObject.defineProperty(StandardMaterial.prototype, privMap.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMap];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar oldVal = this[privMap];\n\t\t\tif (!!oldVal ^ !!value) this.dirtyShader = true;\n\n\t\t\tif (oldVal && value) {\n\t\t\t\tif (oldVal.type !== value.type || oldVal.fixCubemapSeams !== value.fixCubemapSeams || oldVal.format !== value.format) {\n\t\t\t\t\tthis.dirtyShader = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis[privMap] = value;\n\t\t}\n\t});\n\tvar mapTiling = privMapTiling.substring(1);\n\tvar mapOffset = privMapOffset.substring(1);\n\tObject.defineProperty(StandardMaterial.prototype, mapTiling, {\n\t\tget: function () {\n\t\t\treturn this[privMapTiling];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis[privMapTiling] = value;\n\t\t}\n\t});\n\n\t_prop2Uniform[mapTiling] = function (mat, val, changeMat) {\n\t\tvar tform = mat._updateMapTransform(changeMat ? mat[mapTransform] : null, val, mat[privMapOffset]);\n\n\t\treturn {\n\t\t\tname: \"texture_\" + mapTransform,\n\t\t\tvalue: tform.data\n\t\t};\n\t};\n\n\tObject.defineProperty(StandardMaterial.prototype, mapOffset, {\n\t\tget: function () {\n\t\t\treturn this[privMapOffset];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis[privMapOffset] = value;\n\t\t}\n\t});\n\n\t_prop2Uniform[mapOffset] = function (mat, val, changeMat) {\n\t\tvar tform = mat._updateMapTransform(changeMat ? mat[mapTransform] : null, mat[privMapTiling], val);\n\n\t\treturn {\n\t\t\tname: \"texture_\" + mapTransform,\n\t\t\tvalue: tform.data\n\t\t};\n\t};\n\n\tObject.defineProperty(StandardMaterial.prototype, privMapUv.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMapUv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[privMapUv] !== value) this.dirtyShader = true;\n\t\t\tthis[privMapUv] = value;\n\t\t}\n\t});\n\tObject.defineProperty(StandardMaterial.prototype, privMapChannel.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMapChannel];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[privMapChannel] !== value) this.dirtyShader = true;\n\t\t\tthis[privMapChannel] = value;\n\t\t}\n\t});\n\n\tif (vertexColor) {\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapVertexColor.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapVertexColor];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tthis.dirtyShader = true;\n\t\t\t\tthis[privMapVertexColor] = value;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapVertexColorChannel.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapVertexColorChannel];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tif (this[privMapVertexColorChannel] !== value) this.dirtyShader = true;\n\t\t\t\tthis[privMapVertexColorChannel] = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (detailMode) {\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapDetailMode.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapDetailMode];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tthis.dirtyShader = true;\n\t\t\t\tthis[privMapDetailMode] = value;\n\t\t\t}\n\t\t});\n\t}\n\n\t_propsSerial.push(privMap.substring(1));\n\n\t_propsSerial.push(privMapTiling.substring(1));\n\n\t_propsSerial.push(privMapOffset.substring(1));\n\n\t_propsSerial.push(privMapUv.substring(1));\n\n\t_propsSerial.push(privMapChannel.substring(1));\n\n\tif (vertexColor) {\n\t\t_propsSerial.push(privMapVertexColor.substring(1));\n\n\t\t_propsSerial.push(privMapVertexColorChannel.substring(1));\n\t}\n\n\tif (detailMode) {\n\t\t_propsSerial.push(privMapDetailMode.substring(1));\n\t}\n\n\t_propsInternalNull.push(mapTransform);\n}\n\nfunction _defineColor(obj, name, defaultValue, hasMultiplier) {\n\tvar priv = \"_\" + name;\n\tvar uform = name + \"Uniform\";\n\tvar mult = name + \"Intensity\";\n\tvar pmult = \"_\" + mult;\n\tobj[priv] = defaultValue;\n\tobj[uform] = new Float32Array(3);\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\tthis.dirtyColor = true;\n\t\t\tthis.dirtyShader = true;\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tvar oldValue = this[priv];\n\t\t\tvar wasRound = oldValue.r === 0 && oldValue.g === 0 && oldValue.b === 0 || oldValue.r === 1 && oldValue.g === 1 && oldValue.b === 1;\n\t\t\tvar isRound = newValue.r === 0 && newValue.g === 0 && newValue.b === 0 || newValue.r === 1 && newValue.g === 1 && newValue.b === 1;\n\t\t\tif (wasRound ^ isRound) this.dirtyShader = true;\n\t\t\tthis.dirtyColor = true;\n\t\t\tthis[priv] = newValue;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_propsInternalVec3.push(uform);\n\n\t_propsColor.push(name);\n\n\t_prop2Uniform[name] = function (mat, val, changeMat) {\n\t\tvar arr = changeMat ? mat[uform] : new Float32Array(3);\n\t\tvar gammaCorrection = false;\n\n\t\tif (mat.useGammaTonemap) {\n\t\t\tvar scene = mat._scene || getApplication().scene;\n\t\t\tgammaCorrection = scene.gammaCorrection;\n\t\t}\n\n\t\tfor (var c = 0; c < 3; c++) {\n\t\t\tif (gammaCorrection) {\n\t\t\t\tarr[c] = Math.pow(val.data[c], 2.2);\n\t\t\t} else {\n\t\t\t\tarr[c] = val.data[c];\n\t\t\t}\n\n\t\t\tif (hasMultiplier) arr[c] *= mat[pmult];\n\t\t}\n\n\t\treturn {\n\t\t\tname: \"material_\" + name,\n\t\t\tvalue: arr\n\t\t};\n\t};\n\n\tif (hasMultiplier) {\n\t\tobj[pmult] = 1;\n\t\tObject.defineProperty(StandardMaterial.prototype, mult, {\n\t\t\tget: function () {\n\t\t\t\treturn this[pmult];\n\t\t\t},\n\t\t\tset: function (newValue) {\n\t\t\t\tvar oldValue = this[pmult];\n\t\t\t\tvar wasRound = oldValue === 0 || oldValue === 1;\n\t\t\t\tvar isRound = newValue === 0 || newValue === 1;\n\t\t\t\tif (wasRound ^ isRound) this.dirtyShader = true;\n\t\t\t\tthis.dirtyColor = true;\n\t\t\t\tthis[pmult] = newValue;\n\t\t\t}\n\t\t});\n\n\t\t_propsSerial.push(mult);\n\n\t\t_prop2Uniform[mult] = function (mat, val, changeMat) {\n\t\t\tvar arr = changeMat ? mat[uform] : new Float32Array(3);\n\t\t\tvar gammaCorrection = false;\n\n\t\t\tif (mat.useGammaTonemap) {\n\t\t\t\tvar scene = mat._scene || getApplication().scene;\n\t\t\t\tgammaCorrection = scene.gammaCorrection;\n\t\t\t}\n\n\t\t\tfor (var c = 0; c < 3; c++) {\n\t\t\t\tif (gammaCorrection) {\n\t\t\t\t\tarr[c] = Math.pow(mat[priv].data[c], 2.2);\n\t\t\t\t} else {\n\t\t\t\t\tarr[c] = mat[priv].data[c];\n\t\t\t\t}\n\n\t\t\t\tarr[c] *= mat[pmult];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tname: \"material_\" + name,\n\t\t\t\tvalue: arr\n\t\t\t};\n\t\t};\n\t}\n}\n\nfunction _defineFloat(obj, name, defaultValue, func) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = defaultValue;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tvar oldValue = this[priv];\n\t\t\tif (oldValue === newValue) return;\n\t\t\tthis[priv] = newValue;\n\t\t\tvar wasRound = oldValue === 0 || oldValue === 1;\n\t\t\tvar isRound = newValue === 0 || newValue === 1;\n\t\t\tif (wasRound || isRound) this.dirtyShader = true;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_prop2Uniform[name] = func !== undefined ? func : function (mat, val, changeMat) {\n\t\treturn {\n\t\t\tname: \"material_\" + name,\n\t\t\tvalue: val\n\t\t};\n\t};\n}\n\nfunction _defineObject(obj, name, func) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = null;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar oldVal = this[priv];\n\t\t\tif (!!oldVal ^ !!value) this.dirtyShader = true;\n\t\t\tthis[priv] = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_prop2Uniform[name] = func;\n}\n\nfunction _defineAlias(obj, newName, oldName) {\n\tObject.defineProperty(StandardMaterial.prototype, oldName, {\n\t\tget: function () {\n\t\t\treturn this[newName];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis[newName] = value;\n\t\t}\n\t});\n}\n\nfunction _defineChunks(obj) {\n\tObject.defineProperty(StandardMaterial.prototype, \"chunks\", {\n\t\tget: function () {\n\t\t\tthis.dirtyShader = true;\n\t\t\treturn this._chunks;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis._chunks = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(\"chunks\");\n}\n\nfunction _defineFlag(obj, name, defaultValue) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = defaultValue;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[priv] !== value) this.dirtyShader = true;\n\t\t\tthis[priv] = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n}\n\nfunction _defineMaterialProps(obj) {\n\tobj.dirtyShader = true;\n\tobj.dirtyColor = true;\n\tobj._scene = null;\n\tobj._colorProcessed = false;\n\n\t_defineColor(obj, \"ambient\", new Color(0.7, 0.7, 0.7));\n\n\t_defineColor(obj, \"diffuse\", new Color(1, 1, 1));\n\n\t_defineColor(obj, \"specular\", new Color(0, 0, 0));\n\n\t_defineColor(obj, \"emissive\", new Color(0, 0, 0), true);\n\n\t_defineFloat(obj, \"shininess\", 25, function (mat, shininess) {\n\t\tlet value;\n\n\t\tif (mat.shadingModel === SPECULAR_PHONG) {\n\t\t\tvalue = Math.pow(2, shininess * 0.01 * 11);\n\t\t} else {\n\t\t\tvalue = shininess * 0.01;\n\t\t}\n\n\t\treturn {\n\t\t\tname: \"material_shininess\",\n\t\t\tvalue: value\n\t\t};\n\t});\n\n\t_defineFloat(obj, \"heightMapFactor\", 1, function (mat, height) {\n\t\treturn {\n\t\t\tname: 'material_heightMapFactor',\n\t\t\tvalue: height * 0.025\n\t\t};\n\t});\n\n\t_defineFloat(obj, \"opacity\", 1);\n\n\t_defineFloat(obj, \"alphaFade\", 1);\n\n\t_defineFloat(obj, \"alphaTest\", 0);\n\n\t_defineFloat(obj, \"bumpiness\", 1);\n\n\t_defineFloat(obj, \"normalDetailMapBumpiness\", 1);\n\n\t_defineFloat(obj, \"reflectivity\", 1);\n\n\t_defineFloat(obj, \"occludeSpecularIntensity\", 1);\n\n\t_defineFloat(obj, \"refraction\", 0);\n\n\t_defineFloat(obj, \"refractionIndex\", 1.0 / 1.5);\n\n\t_defineFloat(obj, \"metalness\", 1);\n\n\t_defineFloat(obj, \"anisotropy\", 0);\n\n\t_defineFloat(obj, \"clearCoat\", 0);\n\n\t_defineFloat(obj, \"clearCoatGlossiness\", 1);\n\n\t_defineFloat(obj, \"clearCoatBumpiness\", 1);\n\n\t_defineFloat(obj, \"aoUvSet\", 0, null);\n\n\t_defineObject(obj, \"ambientSH\", function (mat, val, changeMat) {\n\t\treturn {\n\t\t\tname: \"ambientSH[0]\",\n\t\t\tvalue: val\n\t\t};\n\t});\n\n\t_defineObject(obj, \"cubeMapProjectionBox\", function (mat, val, changeMat) {\n\t\tconst bmin = changeMat ? mat.cubeMapMinUniform : new Float32Array(3);\n\t\tconst bmax = changeMat ? mat.cubeMapMaxUniform : new Float32Array(3);\n\t\tbmin[0] = val.center.x - val.halfExtents.x;\n\t\tbmin[1] = val.center.y - val.halfExtents.y;\n\t\tbmin[2] = val.center.z - val.halfExtents.z;\n\t\tbmax[0] = val.center.x + val.halfExtents.x;\n\t\tbmax[1] = val.center.y + val.halfExtents.y;\n\t\tbmax[2] = val.center.z + val.halfExtents.z;\n\t\treturn [{\n\t\t\tname: \"envBoxMin\",\n\t\t\tvalue: bmin\n\t\t}, {\n\t\t\tname: \"envBoxMax\",\n\t\t\tvalue: bmax\n\t\t}];\n\t});\n\n\t_defineChunks();\n\n\t_defineFlag(obj, \"ambientTint\", false);\n\n\t_defineFlag(obj, \"diffuseTint\", false);\n\n\t_defineFlag(obj, \"specularTint\", false);\n\n\t_defineFlag(obj, \"emissiveTint\", false);\n\n\t_defineFlag(obj, \"fastTbn\", false);\n\n\t_defineFlag(obj, \"specularAntialias\", false);\n\n\t_defineFlag(obj, \"useMetalness\", false);\n\n\t_defineFlag(obj, \"enableGGXSpecular\", false);\n\n\t_defineFlag(obj, \"occludeDirect\", false);\n\n\t_defineFlag(obj, \"normalizeNormalMap\", true);\n\n\t_defineFlag(obj, \"conserveEnergy\", true);\n\n\t_defineFlag(obj, \"opacityFadesSpecular\", true);\n\n\t_defineFlag(obj, \"occludeSpecular\", SPECOCC_AO);\n\n\t_defineFlag(obj, \"shadingModel\", SPECULAR_BLINN);\n\n\t_defineFlag(obj, \"fresnelModel\", FRESNEL_SCHLICK);\n\n\t_defineFlag(obj, \"cubeMapProjection\", CUBEPROJ_NONE);\n\n\t_defineFlag(obj, \"customFragmentShader\", null);\n\n\t_defineFlag(obj, \"forceFragmentPrecision\", null);\n\n\t_defineFlag(obj, \"useFog\", true);\n\n\t_defineFlag(obj, \"useLighting\", true);\n\n\t_defineFlag(obj, \"useGammaTonemap\", true);\n\n\t_defineFlag(obj, \"useSkybox\", true);\n\n\t_defineFlag(obj, \"forceUv1\", false);\n\n\t_defineFlag(obj, \"pixelSnap\", false);\n\n\t_defineFlag(obj, \"twoSidedLighting\", false);\n\n\t_defineFlag(obj, \"nineSlicedMode\", undefined);\n\n\t_defineTex2D(obj, \"diffuse\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"specular\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"emissive\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"normal\", 0, -1, \"\", false);\n\n\t_defineTex2D(obj, \"metalness\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"gloss\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"opacity\", 0, 1, \"a\", true);\n\n\t_defineTex2D(obj, \"height\", 0, 1, \"\", false);\n\n\t_defineTex2D(obj, \"ao\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"light\", 1, 3, \"\", true);\n\n\t_defineTex2D(obj, \"msdf\", 0, 3, \"\", false);\n\n\t_defineTex2D(obj, \"diffuseDetail\", 0, 3, \"\", false, true);\n\n\t_defineTex2D(obj, \"normalDetail\", 0, -1, \"\", false);\n\n\t_defineTex2D(obj, \"clearCoat\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"clearCoatGloss\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"clearCoatNormal\", 0, -1, \"\", false);\n\n\t_defineObject(obj, \"cubeMap\");\n\n\t_defineObject(obj, \"sphereMap\");\n\n\t_defineObject(obj, \"dpAtlas\");\n\n\t_defineObject(obj, \"prefilteredCubeMap128\");\n\n\t_defineObject(obj, \"prefilteredCubeMap64\");\n\n\t_defineObject(obj, \"prefilteredCubeMap32\");\n\n\t_defineObject(obj, \"prefilteredCubeMap16\");\n\n\t_defineObject(obj, \"prefilteredCubeMap8\");\n\n\t_defineObject(obj, \"prefilteredCubeMap4\");\n\n\t_defineAlias(obj, \"diffuseTint\", \"diffuseMapTint\");\n\n\t_defineAlias(obj, \"specularTint\", \"specularMapTint\");\n\n\t_defineAlias(obj, \"emissiveTint\", \"emissiveMapTint\");\n\n\t_defineAlias(obj, \"aoVertexColor\", \"aoMapVertexColor\");\n\n\t_defineAlias(obj, \"diffuseVertexColor\", \"diffuseMapVertexColor\");\n\n\t_defineAlias(obj, \"specularVertexColor\", \"specularMapVertexColor\");\n\n\t_defineAlias(obj, \"emissiveVertexColor\", \"emissiveMapVertexColor\");\n\n\t_defineAlias(obj, \"metalnessVertexColor\", \"metalnessMapVertexColor\");\n\n\t_defineAlias(obj, \"glossVertexColor\", \"glossMapVertexColor\");\n\n\t_defineAlias(obj, \"opacityVertexColor\", \"opacityMapVertexColor\");\n\n\t_defineAlias(obj, \"lightVertexColor\", \"lightMapVertexColor\");\n\n\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t_propsSerialDefaultVal[i] = obj[_propsSerial[i]];\n\t}\n\n\tobj._propsSet = [];\n}\n\n_defineMaterialProps(StandardMaterial.prototype);\n\nclass ProgramLibrary {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t\tthis._cache = {};\n\t\tthis._generators = {};\n\t\tthis._isClearingCache = false;\n\t\tthis._precached = false;\n\t\tthis._programsCollection = [];\n\t\tthis._defaultStdMatOption = {};\n\t\tthis._defaultStdMatOptionMin = {};\n\t\tconst m = new StandardMaterial();\n\t\tm.shaderOptBuilder.updateRef(this._defaultStdMatOption, device, {}, m, null, [], SHADER_FORWARD, null, null);\n\t\tm.shaderOptBuilder.updateMinRef(this._defaultStdMatOptionMin, device, {}, m, null, [], SHADER_SHADOW, null, null);\n\t}\n\n\tregister(name, generator) {\n\t\tif (!this.isRegistered(name)) {\n\t\t\tthis._generators[name] = generator;\n\t\t}\n\t}\n\n\tunregister(name) {\n\t\tif (this.isRegistered(name)) {\n\t\t\tdelete this._generators[name];\n\t\t}\n\t}\n\n\tisRegistered(name) {\n\t\tconst generator = this._generators[name];\n\t\treturn generator !== undefined;\n\t}\n\n\tgetProgram(name, options) {\n\t\tconst generator = this._generators[name];\n\n\t\tif (generator === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst gd = this._device;\n\t\tconst key = generator.generateKey(options);\n\t\tlet shader = this._cache[key];\n\n\t\tif (!shader) {\n\t\t\tlet lights;\n\n\t\t\tif (options.lights) {\n\t\t\t\tlights = options.lights;\n\t\t\t\toptions.lights = lights.map(function (l) {\n\t\t\t\t\tconst lcopy = l.clone ? l.clone() : l;\n\t\t\t\t\tlcopy.key = l.key;\n\t\t\t\t\treturn lcopy;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.storeNewProgram(name, options);\n\t\t\tif (options.lights) options.lights = lights;\n\t\t\tif (this._precached) console.warn(\"ProgramLibrary#getProgram: Cache miss for shader\", name, \"key\", key, \"after shaders precaching\");\n\t\t\tconst shaderDefinition = generator.createShaderDefinition(gd, options);\n\t\t\tshader = this._cache[key] = new Shader(gd, shaderDefinition);\n\t\t}\n\n\t\treturn shader;\n\t}\n\n\tstoreNewProgram(name, options) {\n\t\tlet opt = {};\n\n\t\tif (name === \"standard\") {\n\t\t\tconst defaultMat = this._getDefaultStdMatOptions(options.pass);\n\n\t\t\tfor (const p in options) {\n\t\t\t\tif (options.hasOwnProperty(p) && defaultMat[p] !== options[p] || p === \"pass\") opt[p] = options[p];\n\t\t\t}\n\t\t} else {\n\t\t\topt = options;\n\t\t}\n\n\t\tthis._programsCollection.push(JSON.stringify({\n\t\t\tname: name,\n\t\t\toptions: opt\n\t\t}));\n\t}\n\n\tdumpPrograms() {\n\t\tlet text = 'let device = pc.app ? pc.app.graphicsDevice : pc.Application.getApplication().graphicsDevice;\\n';\n\t\ttext += 'let shaders = [';\n\t\tif (this._programsCollection[0]) text += '\\n\\t' + this._programsCollection[0];\n\n\t\tfor (let i = 1; i < this._programsCollection.length; ++i) {\n\t\t\ttext += ',\\n\\t' + this._programsCollection[i];\n\t\t}\n\n\t\ttext += '\\n];\\n';\n\t\ttext += 'device.programLib.precompile(shaders);\\n';\n\t\ttext += 'if (pc.version != \\\"' + version + '\\\" || pc.revision != \\\"' + revision + '\\\")\\n';\n\t\ttext += '\\tconsole.warn(\\\"precompile-shaders.js: engine version mismatch, rebuild shaders lib with current engine\\\");';\n\t\tconst element = document.createElement('a');\n\t\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n\t\telement.setAttribute('download', 'precompile-shaders.js');\n\t\telement.style.display = 'none';\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tclearCache() {\n\t\tconst cache = this._cache;\n\t\tthis._isClearingCache = true;\n\n\t\tfor (const key in cache) {\n\t\t\tif (cache.hasOwnProperty(key)) {\n\t\t\t\tcache[key].destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis._cache = {};\n\t\tthis._isClearingCache = false;\n\t}\n\n\tremoveFromCache(shader) {\n\t\tif (this._isClearingCache) return;\n\t\tconst cache = this._cache;\n\n\t\tfor (const key in cache) {\n\t\t\tif (cache.hasOwnProperty(key)) {\n\t\t\t\tif (cache[key] === shader) {\n\t\t\t\t\tdelete cache[key];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_getDefaultStdMatOptions(pass) {\n\t\treturn pass > SHADER_FORWARDHDR && pass <= SHADER_PICK ? this._defaultStdMatOptionMin : this._defaultStdMatOption;\n\t}\n\n\tprecompile(cache) {\n\t\tif (cache) {\n\t\t\tconst shaders = new Array(cache.length);\n\n\t\t\tfor (let i = 0; i < cache.length; i++) {\n\t\t\t\tif (cache[i].name === \"standard\") {\n\t\t\t\t\tconst opt = cache[i].options;\n\n\t\t\t\t\tconst defaultMat = this._getDefaultStdMatOptions(opt.pass);\n\n\t\t\t\t\tfor (const p in defaultMat) {\n\t\t\t\t\t\tif (defaultMat.hasOwnProperty(p) && opt[p] === undefined) opt[p] = defaultMat[p];\n\t\t\t\t\t}\n\n\t\t\t\t\topt.useTexCubeLod = this._device.useTexCubeLod;\n\t\t\t\t}\n\n\t\t\t\tshaders[i] = this.getProgram(cache[i].name, cache[i].options);\n\t\t\t}\n\t\t}\n\n\t\tthis._precached = true;\n\t}\n\n}\n\nclass Version {\n\tconstructor() {\n\t\tthis.globalId = 0;\n\t\tthis.revision = 0;\n\t}\n\n\tequals(other) {\n\t\treturn this.globalId === other.globalId && this.revision === other.revision;\n\t}\n\n\tcopy(other) {\n\t\tthis.globalId = other.globalId;\n\t\tthis.revision = other.revision;\n\t}\n\n\treset() {\n\t\tthis.globalId = 0;\n\t\tthis.revision = 0;\n\t}\n\n}\n\nlet idCounter = 0;\n\nclass VersionedObject {\n\tconstructor() {\n\t\tidCounter++;\n\t\tthis.version = new Version();\n\t\tthis.version.globalId = idCounter;\n\t}\n\n\tincrement() {\n\t\tthis.version.revision++;\n\t}\n\n}\n\nclass ScopeId {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t\tthis.value = null;\n\t\tthis.versionObject = new VersionedObject();\n\t}\n\n\tsetValue(value) {\n\t\tthis.value = value;\n\t\tthis.versionObject.increment();\n\t}\n\n\tgetValue() {\n\t\treturn this.value;\n\t}\n\n}\n\nclass ScopeSpace {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t\tthis.variables = new Map();\n\t}\n\n\tresolve(name) {\n\t\tif (!this.variables.has(name)) {\n\t\t\tthis.variables.set(name, new ScopeId(name));\n\t\t}\n\n\t\treturn this.variables.get(name);\n\t}\n\n\tremoveValue(value) {\n\t\tfor (const uniformName in this.variables) {\n\t\t\tconst uniform = this.variables[uniformName];\n\n\t\t\tif (uniform.value === value) {\n\t\t\t\tuniform.value = null;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ShaderInput {\n\tconstructor(graphicsDevice, name, type, locationId) {\n\t\tthis.locationId = locationId;\n\t\tthis.scopeId = graphicsDevice.scope.resolve(name);\n\t\tthis.version = new Version();\n\n\t\tif (name.substr(name.length - 3) === \"[0]\") {\n\t\t\tswitch (type) {\n\t\t\t\tcase UNIFORMTYPE_FLOAT:\n\t\t\t\t\ttype = UNIFORMTYPE_FLOATARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC2:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC2ARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC3:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC3ARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC4:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC4ARRAY;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.dataType = type;\n\t\tthis.value = [null, null, null, null];\n\t\tthis.array = [];\n\t}\n\n}\n\nconst EVENT_RESIZE = 'resizecanvas';\n\nfunction downsampleImage(image, size) {\n\tconst srcW = image.width;\n\tconst srcH = image.height;\n\n\tif (srcW > size || srcH > size) {\n\t\tconst scale = size / Math.max(srcW, srcH);\n\t\tconst dstW = Math.floor(srcW * scale);\n\t\tconst dstH = Math.floor(srcH * scale);\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = dstW;\n\t\tcanvas.height = dstH;\n\t\tconst context = canvas.getContext('2d');\n\t\tcontext.drawImage(image, 0, 0, srcW, srcH, 0, 0, dstW, dstH);\n\t\treturn canvas;\n\t}\n\n\treturn image;\n}\n\nfunction testRenderable(gl, pixelFormat) {\n\tlet result = true;\n\tconst texture = gl.createTexture();\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, pixelFormat, null);\n\tconst framebuffer = gl.createFramebuffer();\n\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n\tif (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n\t\tresult = false;\n\t}\n\n\tgl.bindTexture(gl.TEXTURE_2D, null);\n\tgl.deleteTexture(texture);\n\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\tgl.deleteFramebuffer(framebuffer);\n\treturn result;\n}\n\nfunction testTextureHalfFloatUpdatable(gl, pixelFormat) {\n\tlet result = true;\n\tconst texture = gl.createTexture();\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\tconst data = new Uint16Array(4 * 2 * 2);\n\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, pixelFormat, data);\n\n\tif (gl.getError() !== gl.NO_ERROR) {\n\t\tresult = false;\n\t\tconsole.log(\"Above error related to HALF_FLOAT_OES can be ignored, it was triggered by testing half float texture support\");\n\t}\n\n\tgl.bindTexture(gl.TEXTURE_2D, null);\n\tgl.deleteTexture(texture);\n\treturn result;\n}\n\nfunction testTextureFloatHighPrecision(device) {\n\tif (!device.textureFloatRenderable) return false;\n\tconst test1 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.precisionTestPS, \"ptest1\");\n\tconst test2 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.precisionTest2PS, \"ptest2\");\n\tconst textureOptions = {\n\t\tformat: PIXELFORMAT_RGBA32F,\n\t\twidth: 1,\n\t\theight: 1,\n\t\tmipmaps: false,\n\t\tminFilter: FILTER_NEAREST,\n\t\tmagFilter: FILTER_NEAREST\n\t};\n\tconst tex1 = new Texture(device, textureOptions);\n\ttex1.name = 'testFHP';\n\tconst targ1 = new RenderTarget({\n\t\tcolorBuffer: tex1,\n\t\tdepth: false\n\t});\n\tdrawQuadWithShader(device, targ1, test1);\n\ttextureOptions.format = PIXELFORMAT_R8_G8_B8_A8;\n\tconst tex2 = new Texture(device, textureOptions);\n\ttex2.name = 'testFHP';\n\tconst targ2 = new RenderTarget({\n\t\tcolorBuffer: tex2,\n\t\tdepth: false\n\t});\n\tdevice.constantTexSource.setValue(tex1);\n\tdrawQuadWithShader(device, targ2, test2);\n\tconst prevFramebuffer = device.activeFramebuffer;\n\tdevice.setFramebuffer(targ2._glFrameBuffer);\n\tconst pixels = new Uint8Array(4);\n\tdevice.readPixels(0, 0, 1, 1, pixels);\n\tdevice.setFramebuffer(prevFramebuffer);\n\tconst x = pixels[0] / 255;\n\tconst y = pixels[1] / 255;\n\tconst z = pixels[2] / 255;\n\tconst w = pixels[3] / 255;\n\tconst f = x / (256 * 256 * 256) + y / (256 * 256) + z / 256 + w;\n\ttex1.destroy();\n\ttarg1.destroy();\n\ttex2.destroy();\n\ttarg2.destroy();\n\treturn f === 0;\n}\n\nclass GraphicsDevice extends EventHandler {\n\tconstructor(canvas, options) {\n\t\tsuper();\n\t\tthis.canvas = canvas;\n\t\tthis._enableAutoInstancing = false;\n\t\tthis.autoInstancingMaxObjects = 16384;\n\t\tthis.defaultFramebuffer = null;\n\t\tthis._maxPixelRatio = 1;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis.updateClientRect();\n\t\tthis.shaders = [];\n\t\tthis.buffers = [];\n\t\tthis.textures = [];\n\t\tthis.targets = [];\n\t\tthis.contextLost = false;\n\n\t\tthis._contextLostHandler = event => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.contextLost = true;\n\t\t\tthis.loseContext();\n\t\t\tthis.fire('devicelost');\n\t\t};\n\n\t\tthis._contextRestoredHandler = () => {\n\t\t\tthis.restoreContext();\n\t\t\tthis.contextLost = false;\n\t\t\tthis.fire('devicerestored');\n\t\t};\n\n\t\tconst preferWebGl2 = options && options.preferWebGl2 !== undefined ? options.preferWebGl2 : true;\n\t\tconst names = preferWebGl2 ? [\"webgl2\", \"webgl\", \"experimental-webgl\"] : [\"webgl\", \"experimental-webgl\"];\n\t\tlet gl = null;\n\t\toptions = options || {};\n\t\toptions.stencil = true;\n\n\t\tfor (let i = 0; i < names.length; i++) {\n\t\t\tgl = canvas.getContext(names[i], options);\n\n\t\t\tif (gl) {\n\t\t\t\tthis.webgl2 = names[i] === 'webgl2';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!gl) {\n\t\t\tthrow new Error(\"WebGL not supported\");\n\t\t}\n\n\t\tthis.gl = gl;\n\t\tthis._tempEnableSafariTextureUnitWorkaround = !!window.safari;\n\t\tconst isChrome = !!window.chrome;\n\t\tconst isMac = navigator.appVersion.indexOf(\"Mac\") !== -1;\n\t\tthis._tempMacChromeBlitFramebufferWorkaround = isMac && isChrome && !options.alpha;\n\t\twindow.setupVertexArrayObject(gl);\n\t\tcanvas.addEventListener(\"webglcontextlost\", this._contextLostHandler, false);\n\t\tcanvas.addEventListener(\"webglcontextrestored\", this._contextRestoredHandler, false);\n\t\tthis.initializeExtensions();\n\t\tthis.initializeCapabilities();\n\t\tthis.initializeRenderState();\n\t\tthis.initializeContextCaches();\n\t\tthis.defaultClearOptions = {\n\t\t\tcolor: [0, 0, 0, 1],\n\t\t\tdepth: 1,\n\t\t\tstencil: 0,\n\t\t\tflags: CLEARFLAG_COLOR | CLEARFLAG_DEPTH\n\t\t};\n\t\tthis.glAddress = [gl.REPEAT, gl.CLAMP_TO_EDGE, gl.MIRRORED_REPEAT];\n\t\tthis.glBlendEquation = [gl.FUNC_ADD, gl.FUNC_SUBTRACT, gl.FUNC_REVERSE_SUBTRACT, this.webgl2 ? gl.MIN : this.extBlendMinmax ? this.extBlendMinmax.MIN_EXT : gl.FUNC_ADD, this.webgl2 ? gl.MAX : this.extBlendMinmax ? this.extBlendMinmax.MAX_EXT : gl.FUNC_ADD];\n\t\tthis.glBlendFunction = [gl.ZERO, gl.ONE, gl.SRC_COLOR, gl.ONE_MINUS_SRC_COLOR, gl.DST_COLOR, gl.ONE_MINUS_DST_COLOR, gl.SRC_ALPHA, gl.SRC_ALPHA_SATURATE, gl.ONE_MINUS_SRC_ALPHA, gl.DST_ALPHA, gl.ONE_MINUS_DST_ALPHA];\n\t\tthis.glComparison = [gl.NEVER, gl.LESS, gl.EQUAL, gl.LEQUAL, gl.GREATER, gl.NOTEQUAL, gl.GEQUAL, gl.ALWAYS];\n\t\tthis.glStencilOp = [gl.KEEP, gl.ZERO, gl.REPLACE, gl.INCR, gl.INCR_WRAP, gl.DECR, gl.DECR_WRAP, gl.INVERT];\n\t\tthis.glClearFlag = [0, gl.COLOR_BUFFER_BIT, gl.DEPTH_BUFFER_BIT, gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, gl.STENCIL_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.COLOR_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT];\n\t\tthis.glCull = [0, gl.BACK, gl.FRONT, gl.FRONT_AND_BACK];\n\t\tthis.glFilter = [gl.NEAREST, gl.LINEAR, gl.NEAREST_MIPMAP_NEAREST, gl.NEAREST_MIPMAP_LINEAR, gl.LINEAR_MIPMAP_NEAREST, gl.LINEAR_MIPMAP_LINEAR];\n\t\tthis.glPrimitive = [gl.POINTS, gl.LINES, gl.LINE_LOOP, gl.LINE_STRIP, gl.TRIANGLES, gl.TRIANGLE_STRIP, gl.TRIANGLE_FAN];\n\t\tthis.glType = [gl.BYTE, gl.UNSIGNED_BYTE, gl.SHORT, gl.UNSIGNED_SHORT, gl.INT, gl.UNSIGNED_INT, gl.FLOAT];\n\t\tthis.pcUniformType = {};\n\t\tthis.pcUniformType[gl.BOOL] = UNIFORMTYPE_BOOL;\n\t\tthis.pcUniformType[gl.INT] = UNIFORMTYPE_INT;\n\t\tthis.pcUniformType[gl.FLOAT] = UNIFORMTYPE_FLOAT;\n\t\tthis.pcUniformType[gl.FLOAT_VEC2] = UNIFORMTYPE_VEC2;\n\t\tthis.pcUniformType[gl.FLOAT_VEC3] = UNIFORMTYPE_VEC3;\n\t\tthis.pcUniformType[gl.FLOAT_VEC4] = UNIFORMTYPE_VEC4;\n\t\tthis.pcUniformType[gl.INT_VEC2] = UNIFORMTYPE_IVEC2;\n\t\tthis.pcUniformType[gl.INT_VEC3] = UNIFORMTYPE_IVEC3;\n\t\tthis.pcUniformType[gl.INT_VEC4] = UNIFORMTYPE_IVEC4;\n\t\tthis.pcUniformType[gl.BOOL_VEC2] = UNIFORMTYPE_BVEC2;\n\t\tthis.pcUniformType[gl.BOOL_VEC3] = UNIFORMTYPE_BVEC3;\n\t\tthis.pcUniformType[gl.BOOL_VEC4] = UNIFORMTYPE_BVEC4;\n\t\tthis.pcUniformType[gl.FLOAT_MAT2] = UNIFORMTYPE_MAT2;\n\t\tthis.pcUniformType[gl.FLOAT_MAT3] = UNIFORMTYPE_MAT3;\n\t\tthis.pcUniformType[gl.FLOAT_MAT4] = UNIFORMTYPE_MAT4;\n\t\tthis.pcUniformType[gl.SAMPLER_2D] = UNIFORMTYPE_TEXTURE2D;\n\t\tthis.pcUniformType[gl.SAMPLER_CUBE] = UNIFORMTYPE_TEXTURECUBE;\n\n\t\tif (this.webgl2) {\n\t\t\tthis.pcUniformType[gl.SAMPLER_2D_SHADOW] = UNIFORMTYPE_TEXTURE2D_SHADOW;\n\t\t\tthis.pcUniformType[gl.SAMPLER_CUBE_SHADOW] = UNIFORMTYPE_TEXTURECUBE_SHADOW;\n\t\t\tthis.pcUniformType[gl.SAMPLER_3D] = UNIFORMTYPE_TEXTURE3D;\n\t\t}\n\n\t\tthis.targetToSlot = {};\n\t\tthis.targetToSlot[gl.TEXTURE_2D] = 0;\n\t\tthis.targetToSlot[gl.TEXTURE_CUBE_MAP] = 1;\n\t\tthis.targetToSlot[gl.TEXTURE_3D] = 2;\n\t\tlet scopeX, scopeY, scopeZ, scopeW;\n\t\tlet uniformValue;\n\t\tthis.commitFunction = [];\n\n\t\tthis.commitFunction[UNIFORMTYPE_BOOL] = function (uniform, value) {\n\t\t\tif (uniform.value !== value) {\n\t\t\t\tgl.uniform1i(uniform.locationId, value);\n\t\t\t\tuniform.value = value;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_INT] = this.commitFunction[UNIFORMTYPE_BOOL];\n\n\t\tthis.commitFunction[UNIFORMTYPE_FLOAT] = function (uniform, value) {\n\t\t\tif (uniform.value !== value) {\n\t\t\t\tgl.uniform1f(uniform.locationId, value);\n\t\t\t\tuniform.value = value;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC2] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY) {\n\t\t\t\tgl.uniform2fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC3] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ) {\n\t\t\t\tgl.uniform3fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC4] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\t\t\tscopeW = value[3];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ || uniformValue[3] !== scopeW) {\n\t\t\t\tgl.uniform4fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t\tuniformValue[3] = scopeW;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC2] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY) {\n\t\t\t\tgl.uniform2iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC2] = this.commitFunction[UNIFORMTYPE_IVEC2];\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC3] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ) {\n\t\t\t\tgl.uniform3iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC3] = this.commitFunction[UNIFORMTYPE_IVEC3];\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC4] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\t\t\tscopeW = value[3];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ || uniformValue[3] !== scopeW) {\n\t\t\t\tgl.uniform4iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t\tuniformValue[3] = scopeW;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC4] = this.commitFunction[UNIFORMTYPE_IVEC4];\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT2] = function (uniform, value) {\n\t\t\tgl.uniformMatrix2fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT3] = function (uniform, value) {\n\t\t\tgl.uniformMatrix3fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT4] = function (uniform, value) {\n\t\t\tgl.uniformMatrix4fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_FLOATARRAY] = function (uniform, value) {\n\t\t\tgl.uniform1fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC2ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform2fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC3ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform3fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC4ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform4fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.scope = new ScopeSpace(\"Device\");\n\t\tthis.programLib = new ProgramLibrary(this);\n\n\t\tfor (const generator in programlib) this.programLib.register(generator, programlib[generator]);\n\n\t\tthis.supportsBoneTextures = this.extTextureFloat && this.maxVertexTextures > 0;\n\t\tthis.useTexCubeLod = this.extTextureLod && this.maxTextures < 16;\n\t\tlet numUniforms = this.vertexUniformsCount;\n\t\tnumUniforms -= 4 * 4;\n\t\tnumUniforms -= 8;\n\t\tnumUniforms -= 1;\n\t\tnumUniforms -= 4 * 4;\n\t\tthis.boneLimit = Math.floor(numUniforms / 3);\n\t\tthis.boneLimit = Math.min(this.boneLimit, 128);\n\n\t\tif (this.unmaskedRenderer === 'Mali-450 MP') {\n\t\t\tthis.boneLimit = 34;\n\t\t}\n\n\t\tthis._drawCallsPerFrame = 0;\n\t\tthis._shaderSwitchesPerFrame = 0;\n\t\tthis._primsPerFrame = [];\n\n\t\tfor (let i = PRIMITIVE_POINTS; i <= PRIMITIVE_TRIFAN; i++) {\n\t\t\tthis._primsPerFrame[i] = 0;\n\t\t}\n\n\t\tthis._renderTargetCreationTime = 0;\n\t\tthis._vram = {\n\t\t\ttex: 0,\n\t\t\tvb: 0,\n\t\t\tib: 0\n\t\t};\n\t\tthis._shaderStats = {\n\t\t\tvsCompiled: 0,\n\t\t\tfsCompiled: 0,\n\t\t\tlinked: 0,\n\t\t\tmaterialShaders: 0,\n\t\t\tcompileTime: 0\n\t\t};\n\t\tthis.constantTexSource = this.scope.resolve(\"source\");\n\n\t\tif (this.extTextureFloat) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis.textureFloatRenderable = !!this.extColorBufferFloat;\n\t\t\t} else {\n\t\t\t\tthis.textureFloatRenderable = testRenderable(gl, gl.FLOAT);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.textureFloatRenderable = false;\n\t\t}\n\n\t\tif (this.extColorBufferHalfFloat) {\n\t\t\tthis.textureHalfFloatRenderable = !!this.extColorBufferHalfFloat;\n\t\t} else if (this.extTextureHalfFloat) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis.textureHalfFloatRenderable = !!this.extColorBufferFloat;\n\t\t\t} else {\n\t\t\t\tthis.textureHalfFloatRenderable = testRenderable(gl, this.extTextureHalfFloat.HALF_FLOAT_OES);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.textureHalfFloatRenderable = false;\n\t\t}\n\n\t\tthis.supportsMorphTargetTexturesCore = this.maxPrecision === \"highp\" && this.maxVertexTextures >= 2;\n\t\tthis._textureFloatHighPrecision = undefined;\n\t\tthis._textureHalfFloatUpdatable = undefined;\n\t\tthis.grabPassAvailable = true;\n\t\tthis.grabPassAlpha = options.alpha;\n\t\tthis.createGrabPass();\n\t\tVertexFormat.init(this);\n\t\tthis.areaLightLutFormat = PIXELFORMAT_R8_G8_B8_A8;\n\n\t\tif (this.extTextureHalfFloat && this.textureHalfFloatUpdatable && this.extTextureHalfFloatLinear) {\n\t\t\tthis.areaLightLutFormat = PIXELFORMAT_RGBA16F;\n\t\t} else if (this.extTextureFloat && this.extTextureFloatLinear) {\n\t\t\tthis.areaLightLutFormat = PIXELFORMAT_RGBA32F;\n\t\t}\n\t}\n\n\ttoJSON(key) {\n\t\treturn undefined;\n\t}\n\n\tgetPrecision() {\n\t\tconst gl = this.gl;\n\t\tlet precision = \"highp\";\n\n\t\tif (gl.getShaderPrecisionFormat) {\n\t\t\tconst vertexShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT);\n\t\t\tconst vertexShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT);\n\t\t\tconst fragmentShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n\t\t\tconst fragmentShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT);\n\t\t\tconst highpAvailable = vertexShaderPrecisionHighpFloat.precision > 0 && fragmentShaderPrecisionHighpFloat.precision > 0;\n\t\t\tconst mediumpAvailable = vertexShaderPrecisionMediumpFloat.precision > 0 && fragmentShaderPrecisionMediumpFloat.precision > 0;\n\n\t\t\tif (!highpAvailable) {\n\t\t\t\tif (mediumpAvailable) {\n\t\t\t\t\tprecision = \"mediump\";\n\t\t\t\t} else {\n\t\t\t\t\tprecision = \"lowp\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn precision;\n\t}\n\n\tinitializeExtensions() {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\tconst supportedExtensions = {};\n\t\tgl.getSupportedExtensions().forEach(e => {\n\t\t\tsupportedExtensions[e] = true;\n\t\t});\n\n\t\tconst getExtension = function getExtension() {\n\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\tif (supportedExtensions.hasOwnProperty(arguments[i])) {\n\t\t\t\t\treturn gl.getExtension(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (this.webgl2) {\n\t\t\tthis.extBlendMinmax = true;\n\t\t\tthis.extDrawBuffers = true;\n\t\t\tthis.extInstancing = true;\n\t\t\tthis.extStandardDerivatives = true;\n\t\t\tthis.extTextureFloat = true;\n\t\t\tthis.extTextureHalfFloat = true;\n\t\t\tthis.extTextureHalfFloatLinear = true;\n\t\t\tthis.extTextureLod = true;\n\t\t\tthis.extUintElement = true;\n\t\t\tthis.extVertexArrayObject = true;\n\t\t\tthis.extColorBufferFloat = getExtension('EXT_color_buffer_float');\n\t\t\tthis.extDisjointTimerQuery = getExtension('EXT_disjoint_timer_query_webgl2', 'EXT_disjoint_timer_query');\n\t\t} else {\n\t\t\tthis.extBlendMinmax = getExtension(\"EXT_blend_minmax\");\n\t\t\tthis.extDrawBuffers = getExtension('EXT_draw_buffers');\n\t\t\tthis.extInstancing = getExtension(\"ANGLE_instanced_arrays\");\n\n\t\t\tif (this.extInstancing) {\n\t\t\t\text = this.extInstancing;\n\t\t\t\tgl.drawArraysInstanced = ext.drawArraysInstancedANGLE.bind(ext);\n\t\t\t\tgl.drawElementsInstanced = ext.drawElementsInstancedANGLE.bind(ext);\n\t\t\t\tgl.vertexAttribDivisor = ext.vertexAttribDivisorANGLE.bind(ext);\n\t\t\t}\n\n\t\t\tthis.extStandardDerivatives = getExtension(\"OES_standard_derivatives\");\n\t\t\tthis.extTextureFloat = getExtension(\"OES_texture_float\");\n\t\t\tthis.extTextureHalfFloat = getExtension(\"OES_texture_half_float\");\n\t\t\tthis.extTextureHalfFloatLinear = getExtension(\"OES_texture_half_float_linear\");\n\t\t\tthis.extTextureLod = getExtension('EXT_shader_texture_lod');\n\t\t\tthis.extUintElement = getExtension(\"OES_element_index_uint\");\n\t\t\tthis.extVertexArrayObject = getExtension(\"OES_vertex_array_object\");\n\n\t\t\tif (this.extVertexArrayObject) {\n\t\t\t\text = this.extVertexArrayObject;\n\t\t\t\tgl.createVertexArray = ext.createVertexArrayOES.bind(ext);\n\t\t\t\tgl.deleteVertexArray = ext.deleteVertexArrayOES.bind(ext);\n\t\t\t\tgl.isVertexArray = ext.isVertexArrayOES.bind(ext);\n\t\t\t\tgl.bindVertexArray = ext.bindVertexArrayOES.bind(ext);\n\t\t\t}\n\n\t\t\tthis.extColorBufferFloat = null;\n\t\t\tthis.extDisjointTimerQuery = null;\n\t\t}\n\n\t\tthis.extDebugRendererInfo = getExtension('WEBGL_debug_renderer_info');\n\t\tthis.extTextureFloatLinear = getExtension(\"OES_texture_float_linear\");\n\t\tthis.extFloatBlend = getExtension(\"EXT_float_blend\");\n\t\tthis.extTextureFilterAnisotropic = getExtension('EXT_texture_filter_anisotropic', 'WEBKIT_EXT_texture_filter_anisotropic');\n\t\tthis.extCompressedTextureETC1 = getExtension('WEBGL_compressed_texture_etc1');\n\t\tthis.extCompressedTextureETC = getExtension('WEBGL_compressed_texture_etc');\n\t\tthis.extCompressedTexturePVRTC = getExtension('WEBGL_compressed_texture_pvrtc', 'WEBKIT_WEBGL_compressed_texture_pvrtc');\n\t\tthis.extCompressedTextureS3TC = getExtension('WEBGL_compressed_texture_s3tc', 'WEBKIT_WEBGL_compressed_texture_s3tc');\n\t\tthis.extCompressedTextureATC = getExtension('WEBGL_compressed_texture_atc');\n\t\tthis.extCompressedTextureASTC = getExtension('WEBGL_compressed_texture_astc');\n\t\tthis.extParallelShaderCompile = getExtension('KHR_parallel_shader_compile');\n\t\tthis.extColorBufferHalfFloat = getExtension(\"EXT_color_buffer_half_float\");\n\t\tthis.supportsInstancing = !!this.extInstancing;\n\t}\n\n\tinitializeCapabilities() {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\tthis.maxPrecision = this.precision = this.getPrecision();\n\t\tconst contextAttribs = gl.getContextAttributes();\n\t\tthis.supportsMsaa = contextAttribs.antialias;\n\t\tthis.supportsStencil = contextAttribs.stencil;\n\t\tthis.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\t\tthis.maxCubeMapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n\t\tthis.maxRenderBufferSize = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);\n\t\tthis.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\t\tthis.maxCombinedTextures = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n\t\tthis.maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n\t\tthis.vertexUniformsCount = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n\t\tthis.fragmentUniformsCount = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);\n\n\t\tif (this.webgl2) {\n\t\t\tthis.maxDrawBuffers = gl.getParameter(gl.MAX_DRAW_BUFFERS);\n\t\t\tthis.maxColorAttachments = gl.getParameter(gl.MAX_COLOR_ATTACHMENTS);\n\t\t\tthis.maxVolumeSize = gl.getParameter(gl.MAX_3D_TEXTURE_SIZE);\n\t\t} else {\n\t\t\text = this.extDrawBuffers;\n\t\t\tthis.maxDrawBuffers = ext ? gl.getParameter(ext.MAX_DRAW_BUFFERS_EXT) : 1;\n\t\t\tthis.maxColorAttachments = ext ? gl.getParameter(ext.MAX_COLOR_ATTACHMENTS_EXT) : 1;\n\t\t\tthis.maxVolumeSize = 1;\n\t\t}\n\n\t\text = this.extDebugRendererInfo;\n\t\tthis.unmaskedRenderer = ext ? gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : '';\n\t\tthis.unmaskedVendor = ext ? gl.getParameter(ext.UNMASKED_VENDOR_WEBGL) : '';\n\t\text = this.extTextureFilterAnisotropic;\n\t\tthis.maxAnisotropy = ext ? gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1;\n\t\tthis.samples = gl.getParameter(gl.SAMPLES);\n\t\tthis.maxSamples = this.webgl2 ? gl.getParameter(gl.MAX_SAMPLES) : 1;\n\t}\n\n\tinitializeRenderState() {\n\t\tconst gl = this.gl;\n\t\tthis.blending = false;\n\t\tgl.disable(gl.BLEND);\n\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\tthis.blendSrcAlpha = BLENDMODE_ONE;\n\t\tthis.blendDstAlpha = BLENDMODE_ZERO;\n\t\tthis.separateAlphaBlend = false;\n\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\tthis.blendAlphaEquation = BLENDEQUATION_ADD;\n\t\tthis.separateAlphaEquation = false;\n\t\tgl.blendFunc(gl.ONE, gl.ZERO);\n\t\tgl.blendEquation(gl.FUNC_ADD);\n\t\tthis.writeRed = true;\n\t\tthis.writeGreen = true;\n\t\tthis.writeBlue = true;\n\t\tthis.writeAlpha = true;\n\t\tgl.colorMask(true, true, true, true);\n\t\tthis.cullMode = CULLFACE_BACK;\n\t\tgl.enable(gl.CULL_FACE);\n\t\tgl.cullFace(gl.BACK);\n\t\tthis.depthTest = true;\n\t\tgl.enable(gl.DEPTH_TEST);\n\t\tthis.depthFunc = FUNC_LESSEQUAL;\n\t\tgl.depthFunc(gl.LEQUAL);\n\t\tthis.depthWrite = true;\n\t\tgl.depthMask(true);\n\t\tthis.stencil = false;\n\t\tgl.disable(gl.STENCIL_TEST);\n\t\tthis.stencilFuncFront = this.stencilFuncBack = FUNC_ALWAYS;\n\t\tthis.stencilRefFront = this.stencilRefBack = 0;\n\t\tthis.stencilMaskFront = this.stencilMaskBack = 0xFF;\n\t\tgl.stencilFunc(gl.ALWAYS, 0, 0xFF);\n\t\tthis.stencilFailFront = this.stencilFailBack = STENCILOP_KEEP;\n\t\tthis.stencilZfailFront = this.stencilZfailBack = STENCILOP_KEEP;\n\t\tthis.stencilZpassFront = this.stencilZpassBack = STENCILOP_KEEP;\n\t\tthis.stencilWriteMaskFront = 0xFF;\n\t\tthis.stencilWriteMaskBack = 0xFF;\n\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\t\tgl.stencilMask(0xFF);\n\t\tthis.alphaToCoverage = false;\n\t\tthis.raster = true;\n\n\t\tif (this.webgl2) {\n\t\t\tgl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t\tgl.disable(gl.RASTERIZER_DISCARD);\n\t\t}\n\n\t\tthis.depthBiasEnabled = false;\n\t\tgl.disable(gl.POLYGON_OFFSET_FILL);\n\t\tthis.clearDepth = 1;\n\t\tgl.clearDepth(1);\n\t\tthis.clearRed = 0;\n\t\tthis.clearBlue = 0;\n\t\tthis.clearGreen = 0;\n\t\tthis.clearAlpha = 0;\n\t\tgl.clearColor(0, 0, 0, 0);\n\t\tthis.clearStencil = 0;\n\t\tgl.clearStencil(0);\n\t\tthis.vx = this.vy = this.vw = this.vh = 0;\n\t\tthis.sx = this.sy = this.sw = this.sh = 0;\n\n\t\tif (this.webgl2) {\n\t\t\tgl.hint(gl.FRAGMENT_SHADER_DERIVATIVE_HINT, gl.NICEST);\n\t\t} else {\n\t\t\tif (this.extStandardDerivatives) {\n\t\t\t\tgl.hint(this.extStandardDerivatives.FRAGMENT_SHADER_DERIVATIVE_HINT_OES, gl.NICEST);\n\t\t\t}\n\t\t}\n\n\t\tgl.enable(gl.SCISSOR_TEST);\n\t\tgl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n\t\tthis.unpackFlipY = false;\n\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\t\tthis.unpackPremultiplyAlpha = false;\n\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n\t\tgl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n\t}\n\n\tinitializeContextCaches() {\n\t\tthis.vertexShaderCache = {};\n\t\tthis.fragmentShaderCache = {};\n\t\tthis._vaoMap = new Map();\n\t\tthis.boundVao = null;\n\t\tthis.indexBuffer = null;\n\t\tthis.vertexBuffers = [];\n\t\tthis.shader = null;\n\t\tthis.renderTarget = null;\n\t\tthis.activeFramebuffer = null;\n\t\tthis.feedback = null;\n\t\tthis.transformFeedbackBuffer = null;\n\t\tthis.textureUnit = 0;\n\t\tthis.textureUnits = [];\n\n\t\tfor (let i = 0; i < this.maxCombinedTextures; i++) {\n\t\t\tthis.textureUnits.push([null, null, null]);\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tfor (const shader of this.shaders) {\n\t\t\tshader.loseContext();\n\t\t}\n\n\t\tthis.destroyGrabPass();\n\n\t\twhile (this.textures.length > 0) {\n\t\t\tconst texture = this.textures[0];\n\t\t\tthis.destroyTexture(texture);\n\t\t\ttexture.dirtyAll();\n\t\t}\n\n\t\tfor (const buffer of this.buffers) {\n\t\t\tbuffer.loseContext();\n\t\t}\n\n\t\tfor (const target of this.targets) {\n\t\t\ttarget.loseContext();\n\t\t}\n\t}\n\n\trestoreContext() {\n\t\tthis.initializeExtensions();\n\t\tthis.initializeCapabilities();\n\t\tthis.initializeRenderState();\n\t\tthis.initializeContextCaches();\n\n\t\tfor (const shader of this.shaders) {\n\t\t\tthis.compileAndLinkShader(shader);\n\t\t}\n\n\t\tfor (const buffer of this.buffers) {\n\t\t\tbuffer.unlock();\n\t\t}\n\n\t\tthis.createGrabPass();\n\t}\n\n\tcreateGrabPass() {\n\t\tif (this.grabPassTexture) return;\n\t\tconst grabPassTexture = new Texture(this, {\n\t\t\tformat: this.grabPassAlpha === false ? PIXELFORMAT_R8_G8_B8 : PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tminFilter: FILTER_LINEAR,\n\t\t\tmagFilter: FILTER_LINEAR,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tmipmaps: false\n\t\t});\n\t\tgrabPassTexture.name = 'texture_grabPass';\n\t\tconst grabPassTextureId = this.scope.resolve(grabPassTexture.name);\n\t\tgrabPassTextureId.setValue(grabPassTexture);\n\t\tconst grabPassRenderTarget = new RenderTarget({\n\t\t\tcolorBuffer: grabPassTexture,\n\t\t\tdepth: false\n\t\t});\n\t\tthis.grabPassRenderTarget = grabPassRenderTarget;\n\t\tthis.grabPassTextureId = grabPassTextureId;\n\t\tthis.grabPassTexture = grabPassTexture;\n\t}\n\n\tupdateGrabPass() {\n\t\tconst gl = this.gl;\n\n\t\tif (!this.grabPassAvailable) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst renderTarget = this.renderTarget;\n\t\tconst resolveRenderTarget = renderTarget && renderTarget._glResolveFrameBuffer;\n\t\tconst grabPassTexture = this.grabPassTexture;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\n\t\tif (this.webgl2 && !this._tempMacChromeBlitFramebufferWorkaround && width === grabPassTexture._width && height === grabPassTexture._height) {\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\trenderTarget.resolve(true);\n\t\t\t}\n\n\t\t\tconst currentFrameBuffer = renderTarget ? renderTarget._glFrameBuffer : null;\n\t\t\tconst resolvedFrameBuffer = renderTarget ? renderTarget._glResolveFrameBuffer || renderTarget._glFrameBuffer : null;\n\t\t\tthis.initRenderTarget(this.grabPassRenderTarget);\n\t\t\tconst grabPassFrameBuffer = this.grabPassRenderTarget._glFrameBuffer;\n\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, resolvedFrameBuffer);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, grabPassFrameBuffer);\n\t\t\tgl.blitFramebuffer(0, 0, width, height, 0, 0, width, height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, currentFrameBuffer);\n\t\t} else {\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\trenderTarget.resolve(true);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget._glResolveFrameBuffer);\n\t\t\t}\n\n\t\t\tconst format = grabPassTexture._glFormat;\n\t\t\tgl.copyTexImage2D(gl.TEXTURE_2D, 0, format, 0, 0, width, height, 0);\n\t\t\tgrabPassTexture._width = width;\n\t\t\tgrabPassTexture._height = height;\n\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget._glFrameBuffer);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdestroyGrabPass() {\n\t\tthis.grabPassRenderTarget.destroy();\n\t\tthis.grabPassRenderTarget = null;\n\t\tthis.grabPassTextureId = null;\n\t\tthis.grabPassTexture.destroy();\n\t\tthis.grabPassTexture = null;\n\t}\n\n\tupdateClientRect() {\n\t\tthis.clientRect = this.canvas.getBoundingClientRect();\n\t}\n\n\tsetViewport(x, y, w, h) {\n\t\tif (this.vx !== x || this.vy !== y || this.vw !== w || this.vh !== h) {\n\t\t\tthis.gl.viewport(x, y, w, h);\n\t\t\tthis.vx = x;\n\t\t\tthis.vy = y;\n\t\t\tthis.vw = w;\n\t\t\tthis.vh = h;\n\t\t}\n\t}\n\n\tsetScissor(x, y, w, h) {\n\t\tif (this.sx !== x || this.sy !== y || this.sw !== w || this.sh !== h) {\n\t\t\tthis.gl.scissor(x, y, w, h);\n\t\t\tthis.sx = x;\n\t\t\tthis.sy = y;\n\t\t\tthis.sw = w;\n\t\t\tthis.sh = h;\n\t\t}\n\t}\n\n\tgetProgramLibrary() {\n\t\treturn this.programLib;\n\t}\n\n\tsetProgramLibrary(programLib) {\n\t\tthis.programLib = programLib;\n\t}\n\n\tsetFramebuffer(fb) {\n\t\tif (this.activeFramebuffer !== fb) {\n\t\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\n\t\t\tthis.activeFramebuffer = fb;\n\t\t}\n\t}\n\n\t_checkFbo() {\n\t\tconst gl = this.gl;\n\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\n\t\tswitch (status) {\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_ATTACHMENT\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_DIMENSIONS\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_UNSUPPORTED:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_UNSUPPORTED\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_COMPLETE:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcopyRenderTarget(source, dest, color, depth) {\n\t\tconst gl = this.gl;\n\n\t\tif (!this.webgl2 && depth) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color) {\n\t\t\tif (!dest) {\n\t\t\t\tif (!source._colorBuffer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!source._colorBuffer || !dest._colorBuffer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (source._colorBuffer._format !== dest._colorBuffer._format) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (depth) {\n\t\t\tif (!source._depthBuffer || !dest._depthBuffer) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (source._depthBuffer._format !== dest._depthBuffer._format) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && dest) {\n\t\t\tconst prevRt = this.renderTarget;\n\t\t\tthis.renderTarget = dest;\n\t\t\tthis.updateBegin();\n\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, source ? source._glFrameBuffer : null);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, dest._glFrameBuffer);\n\t\t\tconst w = source ? source.width : dest.width;\n\t\t\tconst h = source ? source.height : dest.height;\n\t\t\tgl.blitFramebuffer(0, 0, w, h, 0, 0, w, h, (color ? gl.COLOR_BUFFER_BIT : 0) | (depth ? gl.DEPTH_BUFFER_BIT : 0), gl.NEAREST);\n\t\t\tthis.renderTarget = prevRt;\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, prevRt ? prevRt._glFrameBuffer : null);\n\t\t} else {\n\t\t\tconst shader = this.getCopyShader();\n\t\t\tthis.constantTexSource.setValue(source._colorBuffer);\n\t\t\tdrawQuadWithShader(this, dest, shader);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tinitRenderTarget(target) {\n\t\tif (target._glFrameBuffer) return;\n\t\ttarget._device = this;\n\t\tconst gl = this.gl;\n\t\ttarget._glFrameBuffer = gl.createFramebuffer();\n\t\tthis.setFramebuffer(target._glFrameBuffer);\n\t\tconst colorBuffer = target._colorBuffer;\n\n\t\tif (colorBuffer) {\n\t\t\tif (!colorBuffer._glTexture) {\n\t\t\t\tcolorBuffer._width = Math.min(colorBuffer.width, this.maxRenderBufferSize);\n\t\t\t\tcolorBuffer._height = Math.min(colorBuffer.height, this.maxRenderBufferSize);\n\t\t\t\tthis.setTexture(colorBuffer, 0);\n\t\t\t}\n\n\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, colorBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, colorBuffer._glTexture, 0);\n\t\t}\n\n\t\tconst depthBuffer = target._depthBuffer;\n\n\t\tif (depthBuffer && this.webgl2) {\n\t\t\tif (!depthBuffer._glTexture) {\n\t\t\t\tdepthBuffer._width = Math.min(depthBuffer.width, this.maxRenderBufferSize);\n\t\t\t\tdepthBuffer._height = Math.min(depthBuffer.height, this.maxRenderBufferSize);\n\t\t\t\tthis.setTexture(depthBuffer, 0);\n\t\t\t}\n\n\t\t\tif (target._stencil) {\n\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer._glTexture, 0);\n\t\t\t} else {\n\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer._glTexture, 0);\n\t\t\t}\n\t\t} else if (target._depth) {\n\t\t\tconst willRenderMsaa = target._samples > 1 && this.webgl2;\n\n\t\t\tif (!willRenderMsaa) {\n\t\t\t\tif (!target._glDepthBuffer) {\n\t\t\t\t\ttarget._glDepthBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glDepthBuffer);\n\n\t\t\t\tif (target._stencil) {\n\t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, target._glDepthBuffer);\n\t\t\t\t} else {\n\t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target._glDepthBuffer);\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && target._samples > 1) {\n\t\t\ttarget._glResolveFrameBuffer = target._glFrameBuffer;\n\t\t\ttarget._glFrameBuffer = gl.createFramebuffer();\n\t\t\tthis.setFramebuffer(target._glFrameBuffer);\n\n\t\t\tif (colorBuffer) {\n\t\t\t\tif (!target._glMsaaColorBuffer) {\n\t\t\t\t\ttarget._glMsaaColorBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glMsaaColorBuffer);\n\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, colorBuffer._glInternalFormat, target.width, target.height);\n\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, target._glMsaaColorBuffer);\n\t\t\t}\n\n\t\t\tif (target._depth) {\n\t\t\t\tif (!target._glMsaaDepthBuffer) {\n\t\t\t\t\ttarget._glMsaaDepthBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\n\t\t\t\tif (target._stencil) {\n\t\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH24_STENCIL8, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\t\t\t\t} else {\n\t\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH_COMPONENT32F, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.targets.push(target);\n\t}\n\n\tgetCopyShader() {\n\t\tif (!this._copyShader) {\n\t\t\tthis._copyShader = createShaderFromCode(this, shaderChunks.fullscreenQuadVS, shaderChunks.outputTex2DPS, \"outputTex2D\");\n\t\t}\n\n\t\treturn this._copyShader;\n\t}\n\n\tupdateBegin() {\n\t\tthis.boundVao = null;\n\n\t\tif (this._tempEnableSafariTextureUnitWorkaround) {\n\t\t\tfor (let unit = 0; unit < this.textureUnits.length; ++unit) {\n\t\t\t\tfor (let slot = 0; slot < 3; ++slot) {\n\t\t\t\t\tthis.textureUnits[unit][slot] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst target = this.renderTarget;\n\n\t\tif (target) {\n\t\t\tif (!target._glFrameBuffer) {\n\t\t\t\tthis.initRenderTarget(target);\n\t\t\t} else {\n\t\t\t\tthis.setFramebuffer(target._glFrameBuffer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setFramebuffer(this.defaultFramebuffer);\n\t\t}\n\t}\n\n\tupdateEnd() {\n\t\tconst gl = this.gl;\n\t\tthis.boundVao = null;\n\t\tthis.gl.bindVertexArray(null);\n\t\tconst target = this.renderTarget;\n\n\t\tif (target) {\n\t\t\tconst colorBuffer = target._colorBuffer;\n\n\t\t\tif (colorBuffer && colorBuffer._glTexture && colorBuffer.mipmaps && (colorBuffer.pot || this.webgl2)) {\n\t\t\t\tthis.activeTexture(this.maxCombinedTextures - 1);\n\t\t\t\tthis.bindTexture(colorBuffer);\n\t\t\t\tgl.generateMipmap(colorBuffer._glTarget);\n\t\t\t}\n\n\t\t\tif (this.webgl2 && target._samples > 1 && target.autoResolve) {\n\t\t\t\ttarget.resolve();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeTexture(texture) {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\ttexture._glTexture = gl.createTexture();\n\t\ttexture._glTarget = texture._cubemap ? gl.TEXTURE_CUBE_MAP : texture._volume ? gl.TEXTURE_3D : gl.TEXTURE_2D;\n\n\t\tswitch (texture._format) {\n\t\t\tcase PIXELFORMAT_A8:\n\t\t\t\ttexture._glFormat = gl.ALPHA;\n\t\t\t\ttexture._glInternalFormat = gl.ALPHA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_L8:\n\t\t\t\ttexture._glFormat = gl.LUMINANCE;\n\t\t\t\ttexture._glInternalFormat = gl.LUMINANCE;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_L8_A8:\n\t\t\t\ttexture._glFormat = gl.LUMINANCE_ALPHA;\n\t\t\t\ttexture._glInternalFormat = gl.LUMINANCE_ALPHA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R5_G6_B5:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_5_6_5;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R5_G5_B5_A1:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_5_5_5_1;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R4_G4_B4_A4:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_4_4_4_4;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R8_G8_B8:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = this.webgl2 ? gl.RGB8 : gl.RGB;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R8_G8_B8_A8:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = this.webgl2 ? gl.RGBA8 : gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT1:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT3:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT5:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC1:\n\t\t\t\text = this.extCompressedTextureETC1;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_ETC1_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_2BPP_RGB_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_2BPP_RGBA_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_4BPP_RGB_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_4BPP_RGBA_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC2_RGB:\n\t\t\t\text = this.extCompressedTextureETC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB8_ETC2;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC2_RGBA:\n\t\t\t\text = this.extCompressedTextureETC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA8_ETC2_EAC;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ASTC_4x4:\n\t\t\t\text = this.extCompressedTextureASTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ATC_RGB:\n\t\t\t\text = this.extCompressedTextureATC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_ATC_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ATC_RGBA:\n\t\t\t\text = this.extCompressedTextureATC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\text = this.extTextureHalfFloat;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB16F;\n\t\t\t\t\ttexture._glPixelType = gl.HALF_FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\t\ttexture._glPixelType = ext.HALF_FLOAT_OES;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\text = this.extTextureHalfFloat;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA16F;\n\t\t\t\t\ttexture._glPixelType = gl.HALF_FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\t\ttexture._glPixelType = ext.HALF_FLOAT_OES;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB32F;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\t}\n\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA32F;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\t}\n\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R32F:\n\t\t\t\ttexture._glFormat = gl.RED;\n\t\t\t\ttexture._glInternalFormat = gl.R32F;\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DEPTH:\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glInternalFormat = gl.DEPTH_COMPONENT32F;\n\t\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glInternalFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DEPTHSTENCIL:\n\t\t\t\ttexture._glFormat = gl.DEPTH_STENCIL;\n\t\t\t\ttexture._glInternalFormat = gl.DEPTH24_STENCIL8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_INT_24_8;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_111110F:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.R11F_G11F_B10F;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_INT_10F_11F_11F_REV;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_SRGB:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.SRGB8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_SRGBA:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.SRGB8_ALPHA8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.textures.push(texture);\n\t}\n\n\tdestroyTexture(texture) {\n\t\tif (texture._glTexture) {\n\t\t\tconst idx = this.textures.indexOf(texture);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tthis.textures.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.scope.removeValue(texture);\n\n\t\t\tfor (let i = 0; i < this.textureUnits.length; i++) {\n\t\t\t\tconst textureUnit = this.textureUnits[i];\n\n\t\t\t\tfor (let j = 0; j < textureUnit.length; j++) {\n\t\t\t\t\tif (textureUnit[j] === texture._glTexture) {\n\t\t\t\t\t\ttextureUnit[j] = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst gl = this.gl;\n\t\t\tgl.deleteTexture(texture._glTexture);\n\t\t\tdelete texture._glTexture;\n\t\t\tdelete texture._glTarget;\n\t\t\tdelete texture._glFormat;\n\t\t\tdelete texture._glInternalFormat;\n\t\t\tdelete texture._glPixelType;\n\t\t\tthis._vram.tex -= texture._gpuSize;\n\t\t}\n\t}\n\n\tsetUnpackFlipY(flipY) {\n\t\tif (this.unpackFlipY !== flipY) {\n\t\t\tthis.unpackFlipY = flipY;\n\t\t\tconst gl = this.gl;\n\t\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\n\t\t}\n\t}\n\n\tsetUnpackPremultiplyAlpha(premultiplyAlpha) {\n\t\tif (this.unpackPremultiplyAlpha !== premultiplyAlpha) {\n\t\t\tthis.unpackPremultiplyAlpha = premultiplyAlpha;\n\t\t\tconst gl = this.gl;\n\t\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultiplyAlpha);\n\t\t}\n\t}\n\n\t_isBrowserInterface(texture) {\n\t\treturn typeof HTMLCanvasElement !== 'undefined' && texture instanceof HTMLCanvasElement || typeof HTMLImageElement !== 'undefined' && texture instanceof HTMLImageElement || typeof HTMLVideoElement !== 'undefined' && texture instanceof HTMLVideoElement || typeof ImageBitmap !== 'undefined' && texture instanceof ImageBitmap;\n\t}\n\n\tuploadTexture(texture) {\n\t\tconst gl = this.gl;\n\t\tif (!texture._needsUpload && (texture._needsMipmapsUpload && texture._mipmapsUploaded || !texture.pot)) return;\n\t\tlet mipLevel = 0;\n\t\tlet mipObject;\n\t\tlet resMult;\n\t\tconst requiredMipLevels = Math.log2(Math.max(texture._width, texture._height)) + 1;\n\n\t\twhile (texture._levels[mipLevel] || mipLevel === 0) {\n\t\t\tif (!texture._needsUpload && mipLevel === 0) {\n\t\t\t\tmipLevel++;\n\t\t\t\tcontinue;\n\t\t\t} else if (mipLevel && (!texture._needsMipmapsUpload || !texture._mipmaps)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tmipObject = texture._levels[mipLevel];\n\n\t\t\tif (mipLevel === 1 && !texture._compressed && texture._levels.length < requiredMipLevels) {\n\t\t\t\tgl.generateMipmap(texture._glTarget);\n\t\t\t\ttexture._mipmapsUploaded = true;\n\t\t\t}\n\n\t\t\tif (texture._cubemap) {\n\t\t\t\tlet face;\n\n\t\t\t\tif (this._isBrowserInterface(mipObject[0])) {\n\t\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\t\tif (!texture._levelsUpdated[0][face]) continue;\n\t\t\t\t\t\tlet src = mipObject[face];\n\n\t\t\t\t\t\tif (src instanceof HTMLImageElement) {\n\t\t\t\t\t\t\tif (src.width > this.maxCubeMapSize || src.height > this.maxCubeMapSize) {\n\t\t\t\t\t\t\t\tsrc = downsampleImage(src, this.maxCubeMapSize);\n\n\t\t\t\t\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\t\t\t\t\ttexture._width = src.width;\n\t\t\t\t\t\t\t\t\ttexture._height = src.height;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, texture._glFormat, texture._glPixelType, src);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\t\tif (!texture._levelsUpdated[0][face]) continue;\n\t\t\t\t\t\tconst texData = mipObject[face];\n\n\t\t\t\t\t\tif (texture._compressed) {\n\t\t\t\t\t\t\tgl.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texData);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texture._glFormat, texture._glPixelType, texData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (texture._volume) {\n\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\tif (texture._compressed) {\n\t\t\t\t\tgl.compressedTexImage3D(gl.TEXTURE_3D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), Math.max(texture._depth * resMult, 1), 0, mipObject);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\tgl.texImage3D(gl.TEXTURE_3D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), Math.max(texture._depth * resMult, 1), 0, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._isBrowserInterface(mipObject)) {\n\t\t\t\t\tif (mipObject instanceof HTMLImageElement) {\n\t\t\t\t\t\tif (mipObject.width > this.maxTextureSize || mipObject.height > this.maxTextureSize) {\n\t\t\t\t\t\t\tmipObject = downsampleImage(mipObject, this.maxTextureSize);\n\n\t\t\t\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\t\t\t\ttexture._width = mipObject.width;\n\t\t\t\t\t\t\t\ttexture._height = mipObject.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setUnpackFlipY(texture._flipY);\n\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t} else {\n\t\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\t\tif (texture._compressed) {\n\t\t\t\t\t\tgl.compressedTexImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, mipObject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\ttexture._mipmapsUploaded = false;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._mipmapsUploaded = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmipLevel++;\n\t\t}\n\n\t\tif (texture._needsUpload) {\n\t\t\tif (texture._cubemap) {\n\t\t\t\tfor (let i = 0; i < 6; i++) texture._levelsUpdated[0][i] = false;\n\t\t\t} else {\n\t\t\t\ttexture._levelsUpdated[0] = false;\n\t\t\t}\n\t\t}\n\n\t\tif (!texture._compressed && texture._mipmaps && texture._needsMipmapsUpload && (texture.pot || this.webgl2) && texture._levels.length === 1) {\n\t\t\tgl.generateMipmap(texture._glTarget);\n\t\t\ttexture._mipmapsUploaded = true;\n\t\t}\n\n\t\tif (texture._gpuSize) {\n\t\t\tthis._vram.tex -= texture._gpuSize;\n\t\t}\n\n\t\ttexture._gpuSize = texture.gpuSize;\n\t\tthis._vram.tex += texture._gpuSize;\n\t}\n\n\tactiveTexture(textureUnit) {\n\t\tif (this.textureUnit !== textureUnit) {\n\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0 + textureUnit);\n\t\t\tthis.textureUnit = textureUnit;\n\t\t}\n\t}\n\n\tbindTexture(texture) {\n\t\tconst textureTarget = texture._glTarget;\n\t\tconst textureObject = texture._glTexture;\n\t\tconst textureUnit = this.textureUnit;\n\t\tconst slot = this.targetToSlot[textureTarget];\n\n\t\tif (this.textureUnits[textureUnit][slot] !== textureObject) {\n\t\t\tthis.gl.bindTexture(textureTarget, textureObject);\n\t\t\tthis.textureUnits[textureUnit][slot] = textureObject;\n\t\t}\n\t}\n\n\tbindTextureOnUnit(texture, textureUnit) {\n\t\tconst textureTarget = texture._glTarget;\n\t\tconst textureObject = texture._glTexture;\n\t\tconst slot = this.targetToSlot[textureTarget];\n\n\t\tif (this.textureUnits[textureUnit][slot] !== textureObject) {\n\t\t\tthis.activeTexture(textureUnit);\n\t\t\tthis.gl.bindTexture(textureTarget, textureObject);\n\t\t\tthis.textureUnits[textureUnit][slot] = textureObject;\n\t\t}\n\t}\n\n\tsetTextureParameters(texture) {\n\t\tconst gl = this.gl;\n\t\tconst flags = texture._parameterFlags;\n\t\tconst target = texture._glTarget;\n\n\t\tif (flags & 1) {\n\t\t\tlet filter = texture._minFilter;\n\n\t\t\tif (!texture.pot && !this.webgl2 || !texture._mipmaps || texture._compressed && texture._levels.length === 1) {\n\t\t\t\tif (filter === FILTER_NEAREST_MIPMAP_NEAREST || filter === FILTER_NEAREST_MIPMAP_LINEAR) {\n\t\t\t\t\tfilter = FILTER_NEAREST;\n\t\t\t\t} else if (filter === FILTER_LINEAR_MIPMAP_NEAREST || filter === FILTER_LINEAR_MIPMAP_LINEAR) {\n\t\t\t\t\tfilter = FILTER_LINEAR;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.glFilter[filter]);\n\t\t}\n\n\t\tif (flags & 2) {\n\t\t\tgl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.glFilter[texture._magFilter]);\n\t\t}\n\n\t\tif (flags & 4) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_S, this.glAddress[texture._addressU]);\n\t\t\t} else {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_S, this.glAddress[texture.pot ? texture._addressU : ADDRESS_CLAMP_TO_EDGE]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 8) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_T, this.glAddress[texture._addressV]);\n\t\t\t} else {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_T, this.glAddress[texture.pot ? texture._addressV : ADDRESS_CLAMP_TO_EDGE]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 16) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_R, this.glAddress[texture._addressW]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 32) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, texture._compareOnRead ? gl.COMPARE_REF_TO_TEXTURE : gl.NONE);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 64) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, this.glComparison[texture._compareFunc]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 128) {\n\t\t\tconst ext = this.extTextureFilterAnisotropic;\n\n\t\t\tif (ext) {\n\t\t\t\tgl.texParameterf(target, ext.TEXTURE_MAX_ANISOTROPY_EXT, Math.max(1, Math.min(Math.round(texture._anisotropy), this.maxAnisotropy)));\n\t\t\t}\n\t\t}\n\t}\n\n\tsetTexture(texture, textureUnit) {\n\t\tif (!texture._glTexture) this.initializeTexture(texture);\n\n\t\tif (texture._parameterFlags > 0 || texture._needsUpload || texture._needsMipmapsUpload || texture === this.grabPassTexture) {\n\t\t\tthis.activeTexture(textureUnit);\n\t\t\tthis.bindTexture(texture);\n\n\t\t\tif (texture._parameterFlags) {\n\t\t\t\tthis.setTextureParameters(texture);\n\t\t\t\ttexture._parameterFlags = 0;\n\t\t\t}\n\n\t\t\tconst processed = texture === this.grabPassTexture && this.updateGrabPass();\n\n\t\t\tif (!processed && (texture._needsUpload || texture._needsMipmapsUpload)) {\n\t\t\t\tthis.uploadTexture(texture);\n\t\t\t\ttexture._needsUpload = false;\n\t\t\t\ttexture._needsMipmapsUpload = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.bindTextureOnUnit(texture, textureUnit);\n\t\t}\n\t}\n\n\tcreateVertexArray(vertexBuffers) {\n\t\tlet key, vao;\n\t\tconst useCache = vertexBuffers.length > 1;\n\n\t\tif (useCache) {\n\t\t\tkey = \"\";\n\n\t\t\tfor (let i = 0; i < vertexBuffers.length; i++) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[i];\n\t\t\t\tkey += vertexBuffer.id + vertexBuffer.format.renderingingHash;\n\t\t\t}\n\n\t\t\tvao = this._vaoMap.get(key);\n\t\t}\n\n\t\tif (!vao) {\n\t\t\tconst gl = this.gl;\n\t\t\tvao = gl.createVertexArray();\n\t\t\tgl.bindVertexArray(vao);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n\t\t\tfor (let i = 0; i < vertexBuffers.length; i++) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[i];\n\t\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.bufferId);\n\t\t\t\tconst elements = vertexBuffer.format.elements;\n\n\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\tconst e = elements[j];\n\t\t\t\t\tconst loc = semanticToLocation[e.name];\n\t\t\t\t\tgl.vertexAttribPointer(loc, e.numComponents, this.glType[e.dataType], e.normalize, e.stride, e.offset);\n\t\t\t\t\tgl.enableVertexAttribArray(loc);\n\n\t\t\t\t\tif (vertexBuffer.instancing) {\n\t\t\t\t\t\tgl.vertexAttribDivisor(loc, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.bindVertexArray(null);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n\t\t\tif (useCache) {\n\t\t\t\tthis._vaoMap.set(key, vao);\n\t\t\t}\n\t\t}\n\n\t\treturn vao;\n\t}\n\n\tsetBuffers() {\n\t\tconst gl = this.gl;\n\t\tlet vao;\n\n\t\tif (this.vertexBuffers.length === 1) {\n\t\t\tconst vertexBuffer = this.vertexBuffers[0];\n\n\t\t\tif (!vertexBuffer._vao) {\n\t\t\t\tvertexBuffer._vao = this.createVertexArray(this.vertexBuffers);\n\t\t\t}\n\n\t\t\tvao = vertexBuffer._vao;\n\t\t} else {\n\t\t\tvao = this.createVertexArray(this.vertexBuffers);\n\t\t}\n\n\t\tif (this.boundVao !== vao) {\n\t\t\tthis.boundVao = vao;\n\t\t\tgl.bindVertexArray(vao);\n\t\t}\n\n\t\tthis.vertexBuffers.length = 0;\n\t\tconst bufferId = this.indexBuffer ? this.indexBuffer.bufferId : null;\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferId);\n\t}\n\n\tdraw(primitive, numInstances, keepBuffers) {\n\t\tconst gl = this.gl;\n\t\tlet sampler, samplerValue, texture, numTextures;\n\t\tlet uniform, scopeId, uniformVersion, programVersion;\n\t\tconst shader = this.shader;\n\t\tif (!shader) return;\n\t\tconst samplers = shader.samplers;\n\t\tconst uniforms = shader.uniforms;\n\n\t\tif (!keepBuffers) {\n\t\t\tthis.setBuffers();\n\t\t}\n\n\t\tlet textureUnit = 0;\n\n\t\tfor (let i = 0, len = samplers.length; i < len; i++) {\n\t\t\tsampler = samplers[i];\n\t\t\tsamplerValue = sampler.scopeId.value;\n\n\t\t\tif (!samplerValue) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (samplerValue instanceof Texture) {\n\t\t\t\ttexture = samplerValue;\n\t\t\t\tthis.setTexture(texture, textureUnit);\n\n\t\t\t\tif (sampler.slot !== textureUnit) {\n\t\t\t\t\tgl.uniform1i(sampler.locationId, textureUnit);\n\t\t\t\t\tsampler.slot = textureUnit;\n\t\t\t\t}\n\n\t\t\t\ttextureUnit++;\n\t\t\t} else {\n\t\t\t\tsampler.array.length = 0;\n\t\t\t\tnumTextures = samplerValue.length;\n\n\t\t\t\tfor (let j = 0; j < numTextures; j++) {\n\t\t\t\t\ttexture = samplerValue[j];\n\t\t\t\t\tthis.setTexture(texture, textureUnit);\n\t\t\t\t\tsampler.array[j] = textureUnit;\n\t\t\t\t\ttextureUnit++;\n\t\t\t\t}\n\n\t\t\t\tgl.uniform1iv(sampler.locationId, sampler.array);\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = uniforms.length; i < len; i++) {\n\t\t\tuniform = uniforms[i];\n\t\t\tscopeId = uniform.scopeId;\n\t\t\tuniformVersion = uniform.version;\n\t\t\tprogramVersion = scopeId.versionObject.version;\n\n\t\t\tif (uniformVersion.globalId !== programVersion.globalId || uniformVersion.revision !== programVersion.revision) {\n\t\t\t\tuniformVersion.globalId = programVersion.globalId;\n\t\t\t\tuniformVersion.revision = programVersion.revision;\n\n\t\t\t\tif (scopeId.value !== null) {\n\t\t\t\t\tthis.commitFunction[uniform.dataType](uniform, scopeId.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && this.transformFeedbackBuffer) {\n\t\t\tgl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.transformFeedbackBuffer.bufferId);\n\t\t\tgl.beginTransformFeedback(gl.POINTS);\n\t\t}\n\n\t\tconst mode = this.glPrimitive[primitive.type];\n\t\tconst count = primitive.count;\n\n\t\tif (primitive.indexed) {\n\t\t\tconst indexBuffer = this.indexBuffer;\n\t\t\tconst format = indexBuffer.glFormat;\n\t\t\tconst offset = primitive.base * indexBuffer.bytesPerIndex;\n\n\t\t\tif (numInstances > 0) {\n\t\t\t\tgl.drawElementsInstanced(mode, count, format, offset, numInstances);\n\t\t\t} else {\n\t\t\t\tgl.drawElements(mode, count, format, offset);\n\t\t\t}\n\t\t} else {\n\t\t\tconst first = primitive.base;\n\n\t\t\tif (numInstances > 0) {\n\t\t\t\tgl.drawArraysInstanced(mode, first, count, numInstances);\n\t\t\t} else {\n\t\t\t\tgl.drawArrays(mode, first, count);\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && this.transformFeedbackBuffer) {\n\t\t\tgl.endTransformFeedback();\n\t\t\tgl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);\n\t\t}\n\n\t\tthis._drawCallsPerFrame++;\n\t}\n\n\tclear(options) {\n\t\tconst defaultOptions = this.defaultClearOptions;\n\t\toptions = options || defaultOptions;\n\t\tconst flags = options.flags == undefined ? defaultOptions.flags : options.flags;\n\n\t\tif (flags !== 0) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (flags & CLEARFLAG_COLOR) {\n\t\t\t\tconst color = options.color == undefined ? defaultOptions.color : options.color;\n\t\t\t\tthis.setClearColor(color[0], color[1], color[2], color[3]);\n\t\t\t}\n\n\t\t\tif (flags & CLEARFLAG_DEPTH) {\n\t\t\t\tconst depth = options.depth == undefined ? defaultOptions.depth : options.depth;\n\t\t\t\tthis.setClearDepth(depth);\n\n\t\t\t\tif (!this.depthWrite) {\n\t\t\t\t\tgl.depthMask(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (flags & CLEARFLAG_STENCIL) {\n\t\t\t\tconst stencil = options.stencil == undefined ? defaultOptions.stencil : options.stencil;\n\t\t\t\tthis.setClearStencil(stencil);\n\t\t\t}\n\n\t\t\tgl.clear(this.glClearFlag[flags]);\n\n\t\t\tif (flags & CLEARFLAG_DEPTH) {\n\t\t\t\tif (!this.depthWrite) {\n\t\t\t\t\tgl.depthMask(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treadPixels(x, y, w, h, pixels) {\n\t\tconst gl = this.gl;\n\t\tgl.readPixels(x, y, w, h, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\t}\n\n\tsetClearDepth(depth) {\n\t\tif (depth !== this.clearDepth) {\n\t\t\tthis.gl.clearDepth(depth);\n\t\t\tthis.clearDepth = depth;\n\t\t}\n\t}\n\n\tsetClearColor(r, g, b, a) {\n\t\tif (r !== this.clearRed || g !== this.clearGreen || b !== this.clearBlue || a !== this.clearAlpha) {\n\t\t\tthis.gl.clearColor(r, g, b, a);\n\t\t\tthis.clearRed = r;\n\t\t\tthis.clearGreen = g;\n\t\t\tthis.clearBlue = b;\n\t\t\tthis.clearAlpha = a;\n\t\t}\n\t}\n\n\tsetClearStencil(value) {\n\t\tif (value !== this.clearStencil) {\n\t\t\tthis.gl.clearStencil(value);\n\t\t\tthis.clearStencil = value;\n\t\t}\n\t}\n\n\tsetRenderTarget(renderTarget) {\n\t\tthis.renderTarget = renderTarget;\n\t}\n\n\tgetRenderTarget() {\n\t\treturn this.renderTarget;\n\t}\n\n\tgetDepthTest() {\n\t\treturn this.depthTest;\n\t}\n\n\tsetDepthTest(depthTest) {\n\t\tif (this.depthTest !== depthTest) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (depthTest) {\n\t\t\t\tgl.enable(gl.DEPTH_TEST);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\t}\n\n\t\t\tthis.depthTest = depthTest;\n\t\t}\n\t}\n\n\tsetDepthFunc(func) {\n\t\tif (this.depthFunc === func) return;\n\t\tthis.gl.depthFunc(this.glComparison[func]);\n\t\tthis.depthFunc = func;\n\t}\n\n\tgetDepthWrite() {\n\t\treturn this.depthWrite;\n\t}\n\n\tsetDepthWrite(writeDepth) {\n\t\tif (this.depthWrite !== writeDepth) {\n\t\t\tthis.gl.depthMask(writeDepth);\n\t\t\tthis.depthWrite = writeDepth;\n\t\t}\n\t}\n\n\tsetColorWrite(writeRed, writeGreen, writeBlue, writeAlpha) {\n\t\tif (this.writeRed !== writeRed || this.writeGreen !== writeGreen || this.writeBlue !== writeBlue || this.writeAlpha !== writeAlpha) {\n\t\t\tthis.gl.colorMask(writeRed, writeGreen, writeBlue, writeAlpha);\n\t\t\tthis.writeRed = writeRed;\n\t\t\tthis.writeGreen = writeGreen;\n\t\t\tthis.writeBlue = writeBlue;\n\t\t\tthis.writeAlpha = writeAlpha;\n\t\t}\n\t}\n\n\tsetAlphaToCoverage(state) {\n\t\tif (!this.webgl2) return;\n\t\tif (this.alphaToCoverage === state) return;\n\t\tthis.alphaToCoverage = state;\n\n\t\tif (state) {\n\t\t\tthis.gl.enable(this.gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t} else {\n\t\t\tthis.gl.disable(this.gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t}\n\t}\n\n\tsetTransformFeedbackBuffer(tf) {\n\t\tif (this.transformFeedbackBuffer === tf) return;\n\t\tthis.transformFeedbackBuffer = tf;\n\n\t\tif (this.webgl2) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (tf) {\n\t\t\t\tif (!this.feedback) {\n\t\t\t\t\tthis.feedback = gl.createTransformFeedback();\n\t\t\t\t}\n\n\t\t\t\tgl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.feedback);\n\t\t\t} else {\n\t\t\t\tgl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetRaster(on) {\n\t\tif (this.raster === on) return;\n\t\tthis.raster = on;\n\n\t\tif (this.webgl2) {\n\t\t\tif (on) {\n\t\t\t\tthis.gl.disable(this.gl.RASTERIZER_DISCARD);\n\t\t\t} else {\n\t\t\t\tthis.gl.enable(this.gl.RASTERIZER_DISCARD);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDepthBias(on) {\n\t\tif (this.depthBiasEnabled === on) return;\n\t\tthis.depthBiasEnabled = on;\n\n\t\tif (on) {\n\t\t\tthis.gl.enable(this.gl.POLYGON_OFFSET_FILL);\n\t\t} else {\n\t\t\tthis.gl.disable(this.gl.POLYGON_OFFSET_FILL);\n\t\t}\n\t}\n\n\tsetDepthBiasValues(constBias, slopeBias) {\n\t\tthis.gl.polygonOffset(slopeBias, constBias);\n\t}\n\n\tgetBlending() {\n\t\treturn this.blending;\n\t}\n\n\tsetBlending(blending) {\n\t\tif (this.blending !== blending) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (blending) {\n\t\t\t\tgl.enable(gl.BLEND);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.BLEND);\n\t\t\t}\n\n\t\t\tthis.blending = blending;\n\t\t}\n\t}\n\n\tsetStencilTest(enable) {\n\t\tif (this.stencil !== enable) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (enable) {\n\t\t\t\tgl.enable(gl.STENCIL_TEST);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.STENCIL_TEST);\n\t\t\t}\n\n\t\t\tthis.stencil = enable;\n\t\t}\n\t}\n\n\tsetStencilFunc(func, ref, mask) {\n\t\tif (this.stencilFuncFront !== func || this.stencilRefFront !== ref || this.stencilMaskFront !== mask || this.stencilFuncBack !== func || this.stencilRefBack !== ref || this.stencilMaskBack !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFunc(this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncFront = this.stencilFuncBack = func;\n\t\t\tthis.stencilRefFront = this.stencilRefBack = ref;\n\t\t\tthis.stencilMaskFront = this.stencilMaskBack = mask;\n\t\t}\n\t}\n\n\tsetStencilFuncFront(func, ref, mask) {\n\t\tif (this.stencilFuncFront !== func || this.stencilRefFront !== ref || this.stencilMaskFront !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFuncSeparate(gl.FRONT, this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncFront = func;\n\t\t\tthis.stencilRefFront = ref;\n\t\t\tthis.stencilMaskFront = mask;\n\t\t}\n\t}\n\n\tsetStencilFuncBack(func, ref, mask) {\n\t\tif (this.stencilFuncBack !== func || this.stencilRefBack !== ref || this.stencilMaskBack !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFuncSeparate(gl.BACK, this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncBack = func;\n\t\t\tthis.stencilRefBack = ref;\n\t\t\tthis.stencilMaskBack = mask;\n\t\t}\n\t}\n\n\tsetStencilOperation(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailFront !== fail || this.stencilZfailFront !== zfail || this.stencilZpassFront !== zpass || this.stencilFailBack !== fail || this.stencilZfailBack !== zfail || this.stencilZpassBack !== zpass) {\n\t\t\tthis.gl.stencilOp(this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailFront = this.stencilFailBack = fail;\n\t\t\tthis.stencilZfailFront = this.stencilZfailBack = zfail;\n\t\t\tthis.stencilZpassFront = this.stencilZpassBack = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskFront !== writeMask || this.stencilWriteMaskBack !== writeMask) {\n\t\t\tthis.gl.stencilMask(writeMask);\n\t\t\tthis.stencilWriteMaskFront = writeMask;\n\t\t\tthis.stencilWriteMaskBack = writeMask;\n\t\t}\n\t}\n\n\tsetStencilOperationFront(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailFront !== fail || this.stencilZfailFront !== zfail || this.stencilZpassFront !== zpass) {\n\t\t\tthis.gl.stencilOpSeparate(this.gl.FRONT, this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailFront = fail;\n\t\t\tthis.stencilZfailFront = zfail;\n\t\t\tthis.stencilZpassFront = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskFront !== writeMask) {\n\t\t\tthis.gl.stencilMaskSeparate(this.gl.FRONT, writeMask);\n\t\t\tthis.stencilWriteMaskFront = writeMask;\n\t\t}\n\t}\n\n\tsetStencilOperationBack(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailBack !== fail || this.stencilZfailBack !== zfail || this.stencilZpassBack !== zpass) {\n\t\t\tthis.gl.stencilOpSeparate(this.gl.BACK, this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailBack = fail;\n\t\t\tthis.stencilZfailBack = zfail;\n\t\t\tthis.stencilZpassBack = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskBack !== writeMask) {\n\t\t\tthis.gl.stencilMaskSeparate(this.gl.BACK, writeMask);\n\t\t\tthis.stencilWriteMaskBack = writeMask;\n\t\t}\n\t}\n\n\tsetBlendFunction(blendSrc, blendDst) {\n\t\tif (this.blendSrc !== blendSrc || this.blendDst !== blendDst || this.separateAlphaBlend) {\n\t\t\tthis.gl.blendFunc(this.glBlendFunction[blendSrc], this.glBlendFunction[blendDst]);\n\t\t\tthis.blendSrc = blendSrc;\n\t\t\tthis.blendDst = blendDst;\n\t\t\tthis.separateAlphaBlend = false;\n\t\t}\n\t}\n\n\tsetBlendFunctionSeparate(blendSrc, blendDst, blendSrcAlpha, blendDstAlpha) {\n\t\tif (this.blendSrc !== blendSrc || this.blendDst !== blendDst || this.blendSrcAlpha !== blendSrcAlpha || this.blendDstAlpha !== blendDstAlpha || !this.separateAlphaBlend) {\n\t\t\tthis.gl.blendFuncSeparate(this.glBlendFunction[blendSrc], this.glBlendFunction[blendDst], this.glBlendFunction[blendSrcAlpha], this.glBlendFunction[blendDstAlpha]);\n\t\t\tthis.blendSrc = blendSrc;\n\t\t\tthis.blendDst = blendDst;\n\t\t\tthis.blendSrcAlpha = blendSrcAlpha;\n\t\t\tthis.blendDstAlpha = blendDstAlpha;\n\t\t\tthis.separateAlphaBlend = true;\n\t\t}\n\t}\n\n\tsetBlendEquation(blendEquation) {\n\t\tif (this.blendEquation !== blendEquation || this.separateAlphaEquation) {\n\t\t\tthis.gl.blendEquation(this.glBlendEquation[blendEquation]);\n\t\t\tthis.blendEquation = blendEquation;\n\t\t\tthis.separateAlphaEquation = false;\n\t\t}\n\t}\n\n\tsetBlendEquationSeparate(blendEquation, blendAlphaEquation) {\n\t\tif (this.blendEquation !== blendEquation || this.blendAlphaEquation !== blendAlphaEquation || !this.separateAlphaEquation) {\n\t\t\tthis.gl.blendEquationSeparate(this.glBlendEquation[blendEquation], this.glBlendEquation[blendAlphaEquation]);\n\t\t\tthis.blendEquation = blendEquation;\n\t\t\tthis.blendAlphaEquation = blendAlphaEquation;\n\t\t\tthis.separateAlphaEquation = true;\n\t\t}\n\t}\n\n\tsetCullMode(cullMode) {\n\t\tif (this.cullMode !== cullMode) {\n\t\t\tif (cullMode === CULLFACE_NONE) {\n\t\t\t\tthis.gl.disable(this.gl.CULL_FACE);\n\t\t\t} else {\n\t\t\t\tif (this.cullMode === CULLFACE_NONE) {\n\t\t\t\t\tthis.gl.enable(this.gl.CULL_FACE);\n\t\t\t\t}\n\n\t\t\t\tconst mode = this.glCull[cullMode];\n\n\t\t\t\tif (this.cullFace !== mode) {\n\t\t\t\t\tthis.gl.cullFace(mode);\n\t\t\t\t\tthis.cullFace = mode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cullMode = cullMode;\n\t\t}\n\t}\n\n\tgetCullMode() {\n\t\treturn this.cullMode;\n\t}\n\n\tsetIndexBuffer(indexBuffer) {\n\t\tthis.indexBuffer = indexBuffer;\n\t}\n\n\tsetVertexBuffer(vertexBuffer) {\n\t\tif (vertexBuffer) {\n\t\t\tthis.vertexBuffers.push(vertexBuffer);\n\t\t}\n\t}\n\n\tcompileShaderSource(src, isVertexShader) {\n\t\tconst gl = this.gl;\n\t\tlet glShader = isVertexShader ? this.vertexShaderCache[src] : this.fragmentShaderCache[src];\n\n\t\tif (!glShader) {\n\t\t\tglShader = gl.createShader(isVertexShader ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n\t\t\tgl.shaderSource(glShader, src);\n\t\t\tgl.compileShader(glShader);\n\n\t\t\tif (isVertexShader) {\n\t\t\t\tthis.vertexShaderCache[src] = glShader;\n\t\t\t} else {\n\t\t\t\tthis.fragmentShaderCache[src] = glShader;\n\t\t\t}\n\t\t}\n\n\t\treturn glShader;\n\t}\n\n\tcompileAndLinkShader(shader) {\n\t\tconst gl = this.gl;\n\t\tconst definition = shader.definition;\n\t\tconst attrs = definition.attributes;\n\t\tconst glVertexShader = this.compileShaderSource(definition.vshader, true);\n\t\tconst glFragmentShader = this.compileShaderSource(definition.fshader, false);\n\t\tconst glProgram = gl.createProgram();\n\t\tgl.attachShader(glProgram, glVertexShader);\n\t\tgl.attachShader(glProgram, glFragmentShader);\n\n\t\tif (this.webgl2 && definition.useTransformFeedback) {\n\t\t\tconst outNames = [];\n\n\t\t\tfor (const attr in attrs) {\n\t\t\t\tif (attrs.hasOwnProperty(attr)) {\n\t\t\t\t\toutNames.push(\"out_\" + attr);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.transformFeedbackVaryings(glProgram, outNames, gl.INTERLEAVED_ATTRIBS);\n\t\t}\n\n\t\tconst locations = {};\n\n\t\tfor (const attr in attrs) {\n\t\t\tif (attrs.hasOwnProperty(attr)) {\n\t\t\t\tconst semantic = attrs[attr];\n\t\t\t\tconst loc = semanticToLocation[semantic];\n\t\t\t\tlocations[loc] = attr;\n\t\t\t\tgl.bindAttribLocation(glProgram, loc, attr);\n\t\t\t}\n\t\t}\n\n\t\tgl.linkProgram(glProgram);\n\t\tshader._glVertexShader = glVertexShader;\n\t\tshader._glFragmentShader = glFragmentShader;\n\t\tshader._glProgram = glProgram;\n\t}\n\n\tcreateShader(shader) {\n\t\tthis.compileAndLinkShader(shader);\n\t\tthis.shaders.push(shader);\n\t}\n\n\tdestroyShader(shader) {\n\t\tconst idx = this.shaders.indexOf(shader);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.shaders.splice(idx, 1);\n\t\t}\n\n\t\tif (shader._glProgram) {\n\t\t\tthis.gl.deleteProgram(shader._glProgram);\n\t\t\tshader._glProgram = null;\n\t\t\tthis.removeShaderFromCache(shader);\n\t\t}\n\t}\n\n\t_addLineNumbers(src) {\n\t\tif (!src) return \"\";\n\t\tconst lines = src.split(\"\\n\");\n\n\t\tfor (let i = 0, len = lines.length; i < len; i++) {\n\t\t\tlines[i] = i + 1 + \":\\t\" + lines[i];\n\t\t}\n\n\t\treturn lines.join(\"\\n\");\n\t}\n\n\tpostLink(shader) {\n\t\tconst gl = this.gl;\n\t\tconst glVertexShader = shader._glVertexShader;\n\t\tconst glFragmentShader = shader._glFragmentShader;\n\t\tconst glProgram = shader._glProgram;\n\t\tconst definition = shader.definition;\n\n\t\tif (!gl.getShaderParameter(glVertexShader, gl.COMPILE_STATUS)) {\n\t\t\tconsole.error(\"Failed to compile vertex shader:\\n\\n\" + this._addLineNumbers(definition.vshader) + \"\\n\\n\" + gl.getShaderInfoLog(glVertexShader));\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!gl.getShaderParameter(glFragmentShader, gl.COMPILE_STATUS)) {\n\t\t\tconsole.error(\"Failed to compile fragment shader:\\n\\n\" + this._addLineNumbers(definition.fshader) + \"\\n\\n\" + gl.getShaderInfoLog(glFragmentShader));\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {\n\t\t\tconsole.error(\"Failed to link shader program. Error: \" + gl.getProgramInfoLog(glProgram));\n\t\t\treturn false;\n\t\t}\n\n\t\tlet i, info, location, shaderInput;\n\t\ti = 0;\n\t\tconst numAttributes = gl.getProgramParameter(glProgram, gl.ACTIVE_ATTRIBUTES);\n\n\t\twhile (i < numAttributes) {\n\t\t\tinfo = gl.getActiveAttrib(glProgram, i++);\n\t\t\tlocation = gl.getAttribLocation(glProgram, info.name);\n\n\t\t\tif (definition.attributes[info.name] === undefined) {\n\t\t\t\tconsole.error(`Vertex shader attribute \"${info.name}\" is not mapped to a semantic in shader definition.`);\n\t\t\t}\n\n\t\t\tshaderInput = new ShaderInput(this, definition.attributes[info.name], this.pcUniformType[info.type], location);\n\t\t\tshader.attributes.push(shaderInput);\n\t\t}\n\n\t\ti = 0;\n\t\tconst numUniforms = gl.getProgramParameter(glProgram, gl.ACTIVE_UNIFORMS);\n\n\t\twhile (i < numUniforms) {\n\t\t\tinfo = gl.getActiveUniform(glProgram, i++);\n\t\t\tlocation = gl.getUniformLocation(glProgram, info.name);\n\t\t\tshaderInput = new ShaderInput(this, info.name, this.pcUniformType[info.type], location);\n\n\t\t\tif (info.type === gl.SAMPLER_2D || info.type === gl.SAMPLER_CUBE || this.webgl2 && (info.type === gl.SAMPLER_2D_SHADOW || info.type === gl.SAMPLER_CUBE_SHADOW || info.type === gl.SAMPLER_3D)) {\n\t\t\t\tshader.samplers.push(shaderInput);\n\t\t\t} else {\n\t\t\t\tshader.uniforms.push(shaderInput);\n\t\t\t}\n\t\t}\n\n\t\tshader.ready = true;\n\t\treturn true;\n\t}\n\n\tsetShader(shader) {\n\t\tif (shader !== this.shader) {\n\t\t\tif (!shader.ready) {\n\t\t\t\tif (!this.postLink(shader)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.shader = shader;\n\t\t\tthis.gl.useProgram(shader._glProgram);\n\t\t\tthis.attributesInvalidated = true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetHdrFormat() {\n\t\tif (this.textureHalfFloatRenderable) {\n\t\t\treturn PIXELFORMAT_RGBA16F;\n\t\t} else if (this.textureFloatRenderable) {\n\t\t\treturn PIXELFORMAT_RGBA32F;\n\t\t}\n\n\t\treturn PIXELFORMAT_R8_G8_B8_A8;\n\t}\n\n\tgetBoneLimit() {\n\t\treturn this.boneLimit;\n\t}\n\n\tsetBoneLimit(maxBones) {\n\t\tthis.boneLimit = maxBones;\n\t}\n\n\tresizeCanvas(width, height) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tconst ratio = Math.min(this._maxPixelRatio, window.devicePixelRatio);\n\t\twidth = Math.floor(width * ratio);\n\t\theight = Math.floor(height * ratio);\n\n\t\tif (this.canvas.width !== width || this.canvas.height !== height) {\n\t\t\tthis.canvas.width = width;\n\t\t\tthis.canvas.height = height;\n\t\t\tthis.fire(EVENT_RESIZE, width, height);\n\t\t}\n\t}\n\n\tsetResolution(width, height) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height = height;\n\t\tthis.fire(EVENT_RESIZE, width, height);\n\t}\n\n\tclearShaderCache() {\n\t\tconst gl = this.gl;\n\n\t\tfor (const shaderSrc in this.fragmentShaderCache) {\n\t\t\tgl.deleteShader(this.fragmentShaderCache[shaderSrc]);\n\t\t\tdelete this.fragmentShaderCache[shaderSrc];\n\t\t}\n\n\t\tfor (const shaderSrc in this.vertexShaderCache) {\n\t\t\tgl.deleteShader(this.vertexShaderCache[shaderSrc]);\n\t\t\tdelete this.vertexShaderCache[shaderSrc];\n\t\t}\n\n\t\tthis.programLib.clearCache();\n\t}\n\n\tclearVertexArrayObjectCache() {\n\t\tconst gl = this.gl;\n\n\t\tthis._vaoMap.forEach((item, key, mapObj) => {\n\t\t\tgl.deleteVertexArray(item);\n\t\t});\n\n\t\tthis._vaoMap.clear();\n\t}\n\n\tremoveShaderFromCache(shader) {\n\t\tthis.programLib.removeFromCache(shader);\n\t}\n\n\tdestroy() {\n\t\tconst gl = this.gl;\n\t\tthis.destroyGrabPass();\n\n\t\tif (this.webgl2 && this.feedback) {\n\t\t\tgl.deleteTransformFeedback(this.feedback);\n\t\t}\n\n\t\tthis.clearShaderCache();\n\t\tthis.clearVertexArrayObjectCache();\n\t\tthis.canvas.removeEventListener('webglcontextlost', this._contextLostHandler, false);\n\t\tthis.canvas.removeEventListener('webglcontextrestored', this._contextRestoredHandler, false);\n\t\tthis._contextLostHandler = null;\n\t\tthis._contextRestoredHandler = null;\n\t\tthis.canvas = null;\n\t\tthis.gl = null;\n\t}\n\n\tget width() {\n\t\treturn this.gl.drawingBufferWidth || this.canvas.width;\n\t}\n\n\tget height() {\n\t\treturn this.gl.drawingBufferHeight || this.canvas.height;\n\t}\n\n\tget fullscreen() {\n\t\treturn !!document.fullscreenElement;\n\t}\n\n\tset fullscreen(fullscreen) {\n\t\tif (fullscreen) {\n\t\t\tconst canvas = this.gl.canvas;\n\t\t\tcanvas.requestFullscreen();\n\t\t} else {\n\t\t\tdocument.exitFullscreen();\n\t\t}\n\t}\n\n\tget enableAutoInstancing() {\n\t\treturn this._enableAutoInstancing;\n\t}\n\n\tset enableAutoInstancing(value) {\n\t\tthis._enableAutoInstancing = value && this.extInstancing;\n\t}\n\n\tget maxPixelRatio() {\n\t\treturn this._maxPixelRatio;\n\t}\n\n\tset maxPixelRatio(ratio) {\n\t\tthis._maxPixelRatio = ratio;\n\t\tthis.resizeCanvas(this._width, this._height);\n\t}\n\n\tget textureFloatHighPrecision() {\n\t\tif (this._textureFloatHighPrecision === undefined) {\n\t\t\tthis._textureFloatHighPrecision = testTextureFloatHighPrecision(this);\n\t\t}\n\n\t\treturn this._textureFloatHighPrecision;\n\t}\n\n\tget textureHalfFloatUpdatable() {\n\t\tif (this._textureHalfFloatUpdatable === undefined) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis._textureHalfFloatUpdatable = true;\n\t\t\t} else {\n\t\t\t\tthis._textureHalfFloatUpdatable = testTextureHalfFloatUpdatable(this.gl, this.extTextureHalfFloat.HALF_FLOAT_OES);\n\t\t\t}\n\t\t}\n\n\t\treturn this._textureHalfFloatUpdatable;\n\t}\n\n}\n\nconst defaultOptions = {\n\tdepth: true,\n\tface: 0\n};\n\nclass RenderTarget {\n\tconstructor(options) {\n\t\tconst _arg2 = arguments[1];\n\t\tconst _arg3 = arguments[2];\n\n\t\tif (options instanceof GraphicsDevice) {\n\t\t\tthis._colorBuffer = _arg2;\n\t\t\toptions = _arg3;\n\t\t} else {\n\t\t\tthis._colorBuffer = options.colorBuffer;\n\t\t}\n\n\t\tif (this._colorBuffer) {\n\t\t\tthis._colorBuffer._isRenderTarget = true;\n\t\t}\n\n\t\tthis._device = null;\n\t\tthis._glFrameBuffer = null;\n\t\tthis._glDepthBuffer = null;\n\t\toptions = options !== undefined ? options : defaultOptions;\n\t\tthis._depthBuffer = options.depthBuffer;\n\t\tthis._face = options.face !== undefined ? options.face : 0;\n\n\t\tif (this._depthBuffer) {\n\t\t\tconst format = this._depthBuffer._format;\n\n\t\t\tif (format === PIXELFORMAT_DEPTH) {\n\t\t\t\tthis._depth = true;\n\t\t\t\tthis._stencil = false;\n\t\t\t} else if (format === PIXELFORMAT_DEPTHSTENCIL) {\n\t\t\t\tthis._depth = true;\n\t\t\t\tthis._stencil = true;\n\t\t\t} else {\n\t\t\t\tthis._depth = false;\n\t\t\t\tthis._stencil = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._depth = options.depth !== undefined ? options.depth : true;\n\t\t\tthis._stencil = options.stencil !== undefined ? options.stencil : false;\n\t\t}\n\n\t\tthis._samples = options.samples !== undefined ? options.samples : 1;\n\t\tthis.autoResolve = options.autoResolve !== undefined ? options.autoResolve : true;\n\t\tthis._glResolveFrameBuffer = null;\n\t\tthis._glMsaaColorBuffer = null;\n\t\tthis._glMsaaDepthBuffer = null;\n\t\tthis.name = options.name;\n\n\t\tif (!this.name) {\n\t\t\tvar _this$_colorBuffer;\n\n\t\t\tthis.name = (_this$_colorBuffer = this._colorBuffer) == null ? void 0 : _this$_colorBuffer.name;\n\t\t}\n\n\t\tif (!this.name) {\n\t\t\tvar _this$_depthBuffer;\n\n\t\t\tthis.name = (_this$_depthBuffer = this._depthBuffer) == null ? void 0 : _this$_depthBuffer.name;\n\t\t}\n\n\t\tif (!this.name) {\n\t\t\tthis.name = \"Untitled\";\n\t\t}\n\n\t\tthis.flipY = !!options.flipY;\n\t}\n\n\tdestroy() {\n\t\tconst device = this._device;\n\n\t\tif (device) {\n\t\t\tconst idx = device.targets.indexOf(this);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tdevice.targets.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.destroyFrameBuffers();\n\t\t}\n\t}\n\n\tdestroyFrameBuffers() {\n\t\tconst device = this._device;\n\n\t\tif (device) {\n\t\t\tconst gl = device.gl;\n\n\t\t\tif (this._glFrameBuffer) {\n\t\t\t\tgl.deleteFramebuffer(this._glFrameBuffer);\n\t\t\t\tthis._glFrameBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glDepthBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glDepthBuffer);\n\t\t\t\tthis._glDepthBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glResolveFrameBuffer) {\n\t\t\t\tgl.deleteFramebuffer(this._glResolveFrameBuffer);\n\t\t\t\tthis._glResolveFrameBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glMsaaColorBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glMsaaColorBuffer);\n\t\t\t\tthis._glMsaaColorBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glMsaaDepthBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glMsaaDepthBuffer);\n\t\t\t\tthis._glMsaaDepthBuffer = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroyTextureBuffers() {\n\t\tif (this._depthBuffer) {\n\t\t\tthis._depthBuffer.destroy();\n\n\t\t\tthis._depthBuffer = null;\n\t\t}\n\n\t\tif (this._colorBuffer) {\n\t\t\tthis._colorBuffer.destroy();\n\n\t\t\tthis._colorBuffer = null;\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis._glFrameBuffer = undefined;\n\t\tthis._glDepthBuffer = undefined;\n\t\tthis._glResolveFrameBuffer = undefined;\n\t\tthis._glMsaaColorBuffer = undefined;\n\t\tthis._glMsaaDepthBuffer = undefined;\n\t}\n\n\tresolve(color = true, depth = !!this._depthBuffer) {\n\t\tif (!this._device) return;\n\t\tif (!this._device.webgl2) return;\n\t\tconst gl = this._device.gl;\n\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._glFrameBuffer);\n\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._glResolveFrameBuffer);\n\t\tgl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, (color ? gl.COLOR_BUFFER_BIT : 0) | (depth ? gl.DEPTH_BUFFER_BIT : 0), gl.NEAREST);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this._glFrameBuffer);\n\t}\n\n\tcopy(source, color, depth) {\n\t\tif (!this._device) {\n\t\t\tif (source._device) {\n\t\t\t\tthis._device = source._device;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn this._device.copyRenderTarget(source, this, color, depth);\n\t}\n\n\tget colorBuffer() {\n\t\treturn this._colorBuffer;\n\t}\n\n\tget depthBuffer() {\n\t\treturn this._depthBuffer;\n\t}\n\n\tget face() {\n\t\treturn this._face;\n\t}\n\n\tget width() {\n\t\treturn this._colorBuffer ? this._colorBuffer.width : this._depthBuffer.width;\n\t}\n\n\tget height() {\n\t\treturn this._colorBuffer ? this._colorBuffer.height : this._depthBuffer.height;\n\t}\n\n}\n\nfunction syncToCpu(device, targ, face) {\n\tvar tex = targ._colorBuffer;\n\tif (tex.format !== PIXELFORMAT_R8_G8_B8_A8) return;\n\tvar pixels = new Uint8Array(tex.width * tex.height * 4);\n\tvar gl = device.gl;\n\tdevice.setFramebuffer(targ._glFrameBuffer);\n\tgl.readPixels(0, 0, tex.width, tex.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\tif (!tex._levels) tex._levels = [];\n\tif (!tex._levels[0]) tex._levels[0] = [];\n\ttex._levels[0][face] = pixels;\n}\n\nfunction prefilterCubemap(options) {\n\tvar device = options.device;\n\tvar sourceCubemap = options.sourceCubemap;\n\tvar method = options.method;\n\tvar samples = options.samples;\n\tvar cpuSync = options.cpuSync;\n\n\tif (cpuSync && !sourceCubemap._levels[0]) {\n\t\treturn;\n\t}\n\n\tvar sourceType = sourceCubemap.type;\n\tvar rgbmSource = sourceType === TEXTURETYPE_RGBM;\n\tvar shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.rgbmPS + shaderChunks.prefilterCubemapPS.replace(/\\$METHOD/g, method === 0 ? \"cos\" : \"phong\").replace(/\\$NUMSAMPLES/g, samples).replace(/\\$textureCube/g, rgbmSource ? \"textureCubeRGBM\" : \"textureCube\"), \"prefilter\" + method + \"\" + samples + \"\" + rgbmSource);\n\tvar shader2 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.outputCubemapPS, \"outputCubemap\");\n\tvar constantTexSource = device.scope.resolve(\"source\");\n\tvar constantParams = device.scope.resolve(\"params\");\n\tvar params = new Float32Array(4);\n\tvar size = sourceCubemap.width;\n\tvar format = sourceCubemap.format;\n\tvar cmapsList = [[], options.filteredFixed, options.filteredRgbm, options.filteredFixedRgbm];\n\tvar gloss = method === 0 ? [0.9, 0.85, 0.7, 0.4, 0.25, 0.15, 0.1] : [512, 128, 32, 8, 2, 1, 1];\n\tvar mipSize = [64, 32, 16, 8, 4, 2, 1];\n\tvar numMips = 7;\n\tvar targ;\n\tvar i, face, pass;\n\tvar rgbFormat = format === PIXELFORMAT_R8_G8_B8;\n\tvar isImg = false;\n\tvar nextCubemap, cubemap;\n\n\tif (cpuSync) {\n\t\tisImg = sourceCubemap._levels[0][0] instanceof HTMLImageElement;\n\t}\n\n\tif ((rgbFormat || isImg) && cpuSync) {\n\t\tformat = PIXELFORMAT_R8_G8_B8_A8;\n\t\tnextCubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: sourceType,\n\t\t\tformat: format,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false\n\t\t});\n\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\tfor (face = 0; face < 6; face++) {\n\t\t\ttarg = new RenderTarget({\n\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\tface: face,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = face;\n\t\t\tparams[1] = 0;\n\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, targ, shader2);\n\t\t\tsyncToCpu(device, targ, face);\n\t\t}\n\n\t\tsourceCubemap = nextCubemap;\n\t}\n\n\tif (size > 128) {\n\t\tvar log128 = Math.round(Math.log2(128));\n\t\tvar logSize = Math.round(Math.log2(size));\n\t\tvar steps = logSize - log128;\n\n\t\tfor (i = 0; i < steps; i++) {\n\t\t\tsize = sourceCubemap.width * 0.5;\n\t\t\tvar sampleGloss = method === 0 ? 1 : Math.pow(2, Math.round(Math.log2(gloss[0]) + (steps - i) * 2));\n\t\t\tnextCubemap = new Texture(device, {\n\t\t\t\tcubemap: true,\n\t\t\t\ttype: sourceType,\n\t\t\t\tformat: format,\n\t\t\t\twidth: size,\n\t\t\t\theight: size,\n\t\t\t\tmipmaps: false\n\t\t\t});\n\t\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\ttarg = new RenderTarget({\n\t\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\t\tface: face,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t\tparams[0] = face;\n\t\t\t\tparams[1] = sampleGloss;\n\t\t\t\tparams[2] = size;\n\t\t\t\tparams[3] = rgbmSource ? 3 : 0;\n\t\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\t\tconstantParams.setValue(params);\n\t\t\t\tdrawQuadWithShader(device, targ, shader2);\n\n\t\t\t\tif (i === steps - 1 && cpuSync) {\n\t\t\t\t\tsyncToCpu(device, targ, face);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsourceCubemap = nextCubemap;\n\t\t}\n\t}\n\n\toptions.sourceCubemap = sourceCubemap;\n\tvar sourceCubemapRgbm = null;\n\n\tif (!rgbmSource && options.filteredFixedRgbm) {\n\t\tnextCubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: TEXTURETYPE_RGBM,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false\n\t\t});\n\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\tfor (face = 0; face < 6; face++) {\n\t\t\ttarg = new RenderTarget({\n\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\tface: face,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = face;\n\t\t\tparams[3] = 2;\n\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, targ, shader2);\n\t\t\tsyncToCpu(device, targ, face);\n\t\t}\n\n\t\tsourceCubemapRgbm = nextCubemap;\n\t}\n\n\tvar unblurredGloss = method === 0 ? 1 : 2048;\n\tvar startPass = method === 0 ? 0 : -1;\n\tcmapsList[startPass] = [];\n\n\tfor (i = 0; i < numMips; i++) {\n\t\tfor (pass = startPass; pass < cmapsList.length; pass++) {\n\t\t\tif (cmapsList[pass] != null) {\n\t\t\t\tcmapsList[pass][i] = new Texture(device, {\n\t\t\t\t\tcubemap: true,\n\t\t\t\t\ttype: pass < 2 ? sourceType : TEXTURETYPE_RGBM,\n\t\t\t\t\tformat: pass < 2 ? format : PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\t\tfixCubemapSeams: pass === 1 || pass === 3,\n\t\t\t\t\twidth: mipSize[i],\n\t\t\t\t\theight: mipSize[i],\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\tcmapsList[pass][i].name = 'prefiltered-cube';\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (pass = startPass; pass < cmapsList.length; pass++) {\n\t\tif (cmapsList[pass] != null) {\n\t\t\tif (pass > 1 && rgbmSource) {\n\t\t\t\tcmapsList[pass] = cmapsList[pass - 2];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (i = 0; i < numMips; i++) {\n\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\ttarg = new RenderTarget({\n\t\t\t\t\t\tcolorBuffer: cmapsList[pass][i],\n\t\t\t\t\t\tface: face,\n\t\t\t\t\t\tdepth: false\n\t\t\t\t\t});\n\t\t\t\t\tparams[0] = face;\n\t\t\t\t\tparams[1] = pass < 0 ? unblurredGloss : gloss[i];\n\t\t\t\t\tparams[2] = mipSize[i];\n\t\t\t\t\tparams[3] = rgbmSource ? 3 : pass;\n\t\t\t\t\tconstantTexSource.setValue(i === 0 ? sourceCubemap : method === 0 ? cmapsList[0][i - 1] : cmapsList[-1][i - 1]);\n\t\t\t\t\tconstantParams.setValue(params);\n\t\t\t\t\tdrawQuadWithShader(device, targ, shader);\n\t\t\t\t\tif (cpuSync) syncToCpu(device, targ, face);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toptions.filtered = cmapsList[0];\n\tvar mips;\n\n\tif (cpuSync && options.singleFilteredFixed) {\n\t\tmips = [sourceCubemap].concat(options.filteredFixed);\n\t\tcubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: sourceType,\n\t\t\tfixCubemapSeams: true,\n\t\t\tformat: format,\n\t\t\twidth: 128,\n\t\t\theight: 128,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'prefiltered-cube';\n\n\t\tfor (i = 0; i < mips.length; i++) cubemap._levels[i] = mips[i]._levels[0];\n\n\t\tcubemap.upload();\n\t\toptions.singleFilteredFixed = cubemap;\n\t}\n\n\tif (cpuSync && options.singleFilteredFixedRgbm && options.filteredFixedRgbm) {\n\t\tmips = [sourceCubemapRgbm].concat(options.filteredFixedRgbm);\n\t\tcubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: TEXTURETYPE_RGBM,\n\t\t\tfixCubemapSeams: true,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: 128,\n\t\t\theight: 128,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'prefiltered-cube';\n\n\t\tfor (i = 0; i < mips.length; i++) {\n\t\t\tcubemap._levels[i] = mips[i]._levels[0];\n\t\t}\n\n\t\tcubemap.upload();\n\t\toptions.singleFilteredFixedRgbm = cubemap;\n\t}\n}\n\nfunction areaElement(x, y) {\n\treturn Math.atan2(x * y, Math.sqrt(x * x + y * y + 1));\n}\n\nfunction texelCoordSolidAngle(u, v, size) {\n\tvar _u = 2.0 * (u + 0.5) / size - 1.0;\n\n\tvar _v = 2.0 * (v + 0.5) / size - 1.0;\n\n\t_u *= 1.0 - 1.0 / size;\n\t_v *= 1.0 - 1.0 / size;\n\tvar invResolution = 1.0 / size;\n\tvar x0 = _u - invResolution;\n\tvar y0 = _v - invResolution;\n\tvar x1 = _u + invResolution;\n\tvar y1 = _v + invResolution;\n\tvar solidAngle = areaElement(x0, y0) - areaElement(x0, y1) - areaElement(x1, y0) + areaElement(x1, y1);\n\n\tif (u === 0 && v === 0 || u === size - 1 && v === 0 || u === 0 && v === size - 1 || u === size - 1 && v === size - 1) {\n\t\tsolidAngle /= 3;\n\t} else if (u === 0 || v === 0 || u === size - 1 || v === size - 1) {\n\t\tsolidAngle *= 0.5;\n\t}\n\n\treturn solidAngle;\n}\n\nfunction shFromCubemap(device, source, dontFlipX) {\n\tvar face;\n\tvar cubeSize = source.width;\n\tvar x, y;\n\n\tif (source.format !== PIXELFORMAT_R8_G8_B8_A8) {\n\t\treturn;\n\t}\n\n\tif (!source._levels[0]) {\n\t\treturn;\n\t}\n\n\tif (!source._levels[0][0].length) {\n\t\tif (source._levels[0][0] instanceof HTMLImageElement) {\n\t\t\tvar gl = device.gl;\n\t\t\tvar shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.fullscreenQuadPS, \"fsQuadSimple\");\n\t\t\tvar constantTexSource = device.scope.resolve(\"source\");\n\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\tvar img = source._levels[0][face];\n\t\t\t\tvar tex = new Texture(device, {\n\t\t\t\t\tcubemap: false,\n\t\t\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\t\t\tformat: source.format,\n\t\t\t\t\twidth: cubeSize,\n\t\t\t\t\theight: cubeSize,\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\ttex.name = 'prefiltered-cube';\n\t\t\t\ttex._levels[0] = img;\n\t\t\t\ttex.upload();\n\t\t\t\tvar tex2 = new Texture(device, {\n\t\t\t\t\tcubemap: false,\n\t\t\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\t\t\tformat: source.format,\n\t\t\t\t\twidth: cubeSize,\n\t\t\t\t\theight: cubeSize,\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\ttex2.name = 'prefiltered-cube';\n\t\t\t\tvar targ = new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex2,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t\tconstantTexSource.setValue(tex);\n\t\t\t\tdrawQuadWithShader(device, targ, shader);\n\t\t\t\tvar pixels = new Uint8Array(cubeSize * cubeSize * 4);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, targ._glFrameBuffer);\n\t\t\t\tgl.readPixels(0, 0, tex.width, tex.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\t\t\t\tsource._levels[0][face] = pixels;\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tvar dirs = [];\n\n\tfor (y = 0; y < cubeSize; y++) {\n\t\tfor (x = 0; x < cubeSize; x++) {\n\t\t\tvar u = x / (cubeSize - 1) * 2 - 1;\n\t\t\tvar v = y / (cubeSize - 1) * 2 - 1;\n\t\t\tdirs[y * cubeSize + x] = new Vec3(u, v, 1.0).normalize();\n\t\t}\n\t}\n\n\tvar sh = new Float32Array(9 * 3);\n\tvar coef1 = 0;\n\tvar coef2 = 1 * 3;\n\tvar coef3 = 2 * 3;\n\tvar coef4 = 3 * 3;\n\tvar coef5 = 4 * 3;\n\tvar coef6 = 5 * 3;\n\tvar coef7 = 6 * 3;\n\tvar coef8 = 7 * 3;\n\tvar coef9 = 8 * 3;\n\tvar nx = 0;\n\tvar px = 1;\n\tvar ny = 2;\n\tvar py = 3;\n\tvar nz = 4;\n\tvar pz = 5;\n\tvar addr, c, a, value, weight, dir, dx, dy, dz;\n\tvar weight1, weight2, weight3, weight4, weight5;\n\tvar accum = 0;\n\n\tfor (face = 0; face < 6; face++) {\n\t\tfor (y = 0; y < cubeSize; y++) {\n\t\t\tfor (x = 0; x < cubeSize; x++) {\n\t\t\t\taddr = y * cubeSize + x;\n\t\t\t\tweight = texelCoordSolidAngle(x, y, cubeSize);\n\t\t\t\tweight1 = weight * 4 / 17;\n\t\t\t\tweight2 = weight * 8 / 17;\n\t\t\t\tweight3 = weight * 15 / 17;\n\t\t\t\tweight4 = weight * 5 / 68;\n\t\t\t\tweight5 = weight * 15 / 68;\n\t\t\t\tdir = dirs[addr];\n\n\t\t\t\tif (face == nx) {\n\t\t\t\t\tdx = dir.z;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = -dir.x;\n\t\t\t\t} else if (face === px) {\n\t\t\t\t\tdx = -dir.z;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = dir.x;\n\t\t\t\t} else if (face === ny) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = dir.z;\n\t\t\t\t\tdz = dir.y;\n\t\t\t\t} else if (face === py) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = -dir.z;\n\t\t\t\t\tdz = -dir.y;\n\t\t\t\t} else if (face === nz) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = dir.z;\n\t\t\t\t} else if (face === pz) {\n\t\t\t\t\tdx = -dir.x;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = -dir.z;\n\t\t\t\t}\n\n\t\t\t\tif (!dontFlipX) dx = -dx;\n\t\t\t\ta = source._levels[0][face][addr * 4 + 3] / 255.0;\n\n\t\t\t\tfor (c = 0; c < 3; c++) {\n\t\t\t\t\tvalue = source._levels[0][face][addr * 4 + c] / 255.0;\n\n\t\t\t\t\tif (source.type === TEXTURETYPE_RGBM) {\n\t\t\t\t\t\tvalue *= a * 8.0;\n\t\t\t\t\t\tvalue *= value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = Math.pow(value, 2.2);\n\t\t\t\t\t}\n\n\t\t\t\t\tsh[coef1 + c] += value * weight1;\n\t\t\t\t\tsh[coef2 + c] += value * weight2 * dx;\n\t\t\t\t\tsh[coef3 + c] += value * weight2 * dy;\n\t\t\t\t\tsh[coef4 + c] += value * weight2 * dz;\n\t\t\t\t\tsh[coef5 + c] += value * weight3 * dx * dz;\n\t\t\t\t\tsh[coef6 + c] += value * weight3 * dz * dy;\n\t\t\t\t\tsh[coef7 + c] += value * weight3 * dy * dx;\n\t\t\t\t\tsh[coef8 + c] += value * weight4 * (3.0 * dz * dz - 1.0);\n\t\t\t\t\tsh[coef9 + c] += value * weight5 * (dx * dx - dy * dy);\n\t\t\t\t\taccum += weight;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (c = 0; c < sh.length; c++) {\n\t\tsh[c] *= 4 * Math.PI / accum;\n\t}\n\n\treturn sh;\n}\n\nfunction getCoding(texture) {\n\tswitch (texture.type) {\n\t\tcase TEXTURETYPE_RGBM:\n\t\t\treturn \"RGBM\";\n\n\t\tcase TEXTURETYPE_RGBE:\n\t\t\treturn \"RGBE\";\n\n\t\tdefault:\n\t\t\tswitch (texture.format) {\n\t\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\t\treturn \"Linear\";\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"Gamma\";\n\t\t\t}\n\n\t}\n}\n\nfunction getProjectionName(projection) {\n\tif (projection === TEXTUREPROJECTION_NONE) {\n\t\tprojection = TEXTUREPROJECTION_EQUIRECT;\n\t}\n\n\tswitch (projection) {\n\t\tcase TEXTUREPROJECTION_CUBE:\n\t\t\treturn \"Cubemap\";\n\n\t\tcase TEXTUREPROJECTION_EQUIRECT:\n\t\t\treturn \"Equirect\";\n\n\t\tcase TEXTUREPROJECTION_OCTAHEDRAL:\n\t\t\treturn \"Octahedral\";\n\t}\n}\n\nfunction reprojectTexture(source, target, options = {}) {\n\tif (source instanceof GraphicsDevice) {\n\t\tsource = arguments[1];\n\t\ttarget = arguments[2];\n\t\toptions = {\n\t\t\tspecularPower: arguments[3] === undefined ? 1 : arguments[3],\n\t\t\tnumSamples: arguments[4] === undefined ? 1024 : arguments[4]\n\t\t};\n\t}\n\n\tconst device = source.device;\n\tconst specularPower = options.hasOwnProperty('specularPower') ? options.specularPower : 1;\n\tconst numSamples = options.hasOwnProperty('numSamples') ? options.numSamples : 1024;\n\tconst face = options.hasOwnProperty('face') ? options.face : null;\n\tconst processFunc = specularPower === 1 ? 'reproject' : 'prefilter';\n\tconst decodeFunc = \"decode\" + getCoding(source);\n\tconst encodeFunc = \"encode\" + getCoding(target);\n\tconst sourceFunc = \"sample\" + getProjectionName(source.projection);\n\tconst targetFunc = \"getDirection\" + getProjectionName(target.projection);\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, \"#define PROCESS_FUNC \" + processFunc + \"\\n\" + \"#define DECODE_FUNC \" + decodeFunc + \"\\n\" + \"#define ENCODE_FUNC \" + encodeFunc + \"\\n\" + \"#define SOURCE_FUNC \" + sourceFunc + \"\\n\" + \"#define TARGET_FUNC \" + targetFunc + \"\\n\" + \"#define NUM_SAMPLES \" + numSamples + \"\\n\" + \"#define NUM_SAMPLES_SQRT \" + Math.round(Math.sqrt(numSamples)).toFixed(1) + \"\\n\\n\" + shaderChunks.reprojectPS, processFunc + decodeFunc + encodeFunc + sourceFunc + targetFunc, null, device.webgl2 ? \"\" : \"#extension GL_OES_standard_derivatives: enable\\n\");\n\tconst constantSource = device.scope.resolve(source.cubemap ? \"sourceCube\" : \"sourceTex\");\n\tconstantSource.setValue(source);\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst params = [0, specularPower, 1.0 - (source.fixCubemapSeams ? 1.0 / source.width : 0.0), 1.0 - (target.fixCubemapSeams ? 1.0 / target.width : 0.0)];\n\n\tfor (let f = 0; f < (target.cubemap ? 6 : 1); f++) {\n\t\tif (face === null || f === face) {\n\t\t\tconst renderTarget = new RenderTarget({\n\t\t\t\tcolorBuffer: target,\n\t\t\t\tface: f,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = f;\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, renderTarget, shader);\n\t\t\trenderTarget.destroy();\n\t\t}\n\t}\n}\n\nclass IndexBuffer {\n\tconstructor(graphicsDevice, format, numIndices, usage = BUFFER_STATIC, initialData) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.format = format;\n\t\tthis.numIndices = numIndices;\n\t\tthis.usage = usage;\n\t\tconst gl = this.device.gl;\n\t\tlet bytesPerIndex;\n\n\t\tif (format === INDEXFORMAT_UINT8) {\n\t\t\tbytesPerIndex = 1;\n\t\t\tthis.glFormat = gl.UNSIGNED_BYTE;\n\t\t} else if (format === INDEXFORMAT_UINT16) {\n\t\t\tbytesPerIndex = 2;\n\t\t\tthis.glFormat = gl.UNSIGNED_SHORT;\n\t\t} else if (format === INDEXFORMAT_UINT32) {\n\t\t\tbytesPerIndex = 4;\n\t\t\tthis.glFormat = gl.UNSIGNED_INT;\n\t\t}\n\n\t\tthis.bytesPerIndex = bytesPerIndex;\n\t\tthis.numBytes = this.numIndices * bytesPerIndex;\n\n\t\tif (initialData) {\n\t\t\tthis.setData(initialData);\n\t\t} else {\n\t\t\tthis.storage = new ArrayBuffer(this.numBytes);\n\t\t}\n\n\t\tgraphicsDevice._vram.ib += this.numBytes;\n\t\tthis.device.buffers.push(this);\n\t}\n\n\tdestroy() {\n\t\tconst device = this.device;\n\t\tconst idx = device.buffers.indexOf(this);\n\n\t\tif (idx !== -1) {\n\t\t\tdevice.buffers.splice(idx, 1);\n\t\t}\n\n\t\tif (this.bufferId) {\n\t\t\tconst gl = this.device.gl;\n\t\t\tgl.deleteBuffer(this.bufferId);\n\t\t\tthis.device._vram.ib -= this.storage.byteLength;\n\t\t\tthis.bufferId = null;\n\n\t\t\tif (this.device.indexBuffer === this) {\n\t\t\t\tthis.device.indexBuffer = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis.bufferId = undefined;\n\t}\n\n\tgetFormat() {\n\t\treturn this.format;\n\t}\n\n\tgetNumIndices() {\n\t\treturn this.numIndices;\n\t}\n\n\tlock() {\n\t\treturn this.storage;\n\t}\n\n\tunlock() {\n\t\tconst gl = this.device.gl;\n\n\t\tif (!this.bufferId) {\n\t\t\tthis.bufferId = gl.createBuffer();\n\t\t}\n\n\t\tlet glUsage;\n\n\t\tswitch (this.usage) {\n\t\t\tcase BUFFER_STATIC:\n\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_DYNAMIC:\n\t\t\t\tglUsage = gl.DYNAMIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_STREAM:\n\t\t\t\tglUsage = gl.STREAM_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_GPUDYNAMIC:\n\t\t\t\tif (this.device.webgl2) {\n\t\t\t\t\tglUsage = gl.DYNAMIC_COPY;\n\t\t\t\t} else {\n\t\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.bufferId);\n\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.storage, glUsage);\n\t}\n\n\tsetData(data) {\n\t\tif (data.byteLength !== this.numBytes) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.storage = data;\n\t\tthis.unlock();\n\t\treturn true;\n\t}\n\n\t_lockTypedArray() {\n\t\tconst lock = this.lock();\n\t\tconst indices = this.format === INDEXFORMAT_UINT32 ? new Uint32Array(lock) : this.format === INDEXFORMAT_UINT16 ? new Uint16Array(lock) : new Uint8Array(lock);\n\t\treturn indices;\n\t}\n\n\twriteData(data, count) {\n\t\tconst indices = this._lockTypedArray();\n\n\t\tif (data.length > count) {\n\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\tdata = data.subarray(0, count);\n\t\t\t\tindices.set(data);\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < count; i++) indices[i] = data[i];\n\t\t\t}\n\t\t} else {\n\t\t\tindices.set(data);\n\t\t}\n\n\t\tthis.unlock();\n\t}\n\n\treadData(data) {\n\t\tconst indices = this._lockTypedArray();\n\n\t\tconst count = this.numIndices;\n\n\t\tif (ArrayBuffer.isView(data)) {\n\t\t\tdata.set(indices);\n\t\t} else {\n\t\t\tdata.length = 0;\n\n\t\t\tfor (let i = 0; i < count; i++) data[i] = indices[i];\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nconst primitive = {\n\ttype: PRIMITIVE_TRISTRIP,\n\tbase: 0,\n\tcount: 4,\n\tindexed: false\n};\n\nclass PostEffect$1 {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.shader = null;\n\t\tthis.depthMap = null;\n\t\tthis.vertexBuffer = createFullscreenQuad(graphicsDevice);\n\t\tthis.needsDepthBuffer = false;\n\t}\n\n\trender(inputTarget, outputTarget, rect) {}\n\n}\n\nfunction createFullscreenQuad(device) {\n\tconst vertexFormat = new VertexFormat(device, [{\n\t\tsemantic: SEMANTIC_POSITION,\n\t\tcomponents: 2,\n\t\ttype: TYPE_FLOAT32\n\t}]);\n\tconst vertexBuffer = new VertexBuffer(device, vertexFormat, 4);\n\tconst iterator = new VertexIterator(vertexBuffer);\n\titerator.element[SEMANTIC_POSITION].set(-1.0, -1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(1.0, -1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(-1.0, 1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(1.0, 1.0);\n\titerator.end();\n\treturn vertexBuffer;\n}\n\nfunction drawFullscreenQuad(device, target, vertexBuffer, shader, rect) {\n\tconst oldRt = device.getRenderTarget();\n\tdevice.setRenderTarget(target);\n\tdevice.updateBegin();\n\tlet w = target ? target.width : device.width;\n\tlet h = target ? target.height : device.height;\n\tlet x = 0;\n\tlet y = 0;\n\n\tif (rect) {\n\t\tx = rect.x * w;\n\t\ty = rect.y * h;\n\t\tw *= rect.z;\n\t\th *= rect.w;\n\t}\n\n\tconst oldVx = device.vx;\n\tconst oldVy = device.vy;\n\tconst oldVw = device.vw;\n\tconst oldVh = device.vh;\n\tdevice.setViewport(x, y, w, h);\n\tconst oldSx = device.sx;\n\tconst oldSy = device.sy;\n\tconst oldSw = device.sw;\n\tconst oldSh = device.sh;\n\tdevice.setScissor(x, y, w, h);\n\tconst oldBlending = device.getBlending();\n\tconst oldDepthTest = device.getDepthTest();\n\tconst oldDepthWrite = device.getDepthWrite();\n\tconst oldCullMode = device.getCullMode();\n\tconst oldWR = device.writeRed;\n\tconst oldWG = device.writeGreen;\n\tconst oldWB = device.writeBlue;\n\tconst oldWA = device.writeAlpha;\n\tdevice.setBlending(false);\n\tdevice.setDepthTest(false);\n\tdevice.setDepthWrite(false);\n\tdevice.setCullMode(CULLFACE_NONE);\n\tdevice.setColorWrite(true, true, true, true);\n\tdevice.setVertexBuffer(vertexBuffer, 0);\n\tdevice.setShader(shader);\n\tdevice.draw(primitive);\n\tdevice.setBlending(oldBlending);\n\tdevice.setDepthTest(oldDepthTest);\n\tdevice.setDepthWrite(oldDepthWrite);\n\tdevice.setCullMode(oldCullMode);\n\tdevice.setColorWrite(oldWR, oldWG, oldWB, oldWA);\n\tdevice.updateEnd();\n\tdevice.setRenderTarget(oldRt);\n\tdevice.updateBegin();\n\tdevice.setViewport(oldVx, oldVy, oldVw, oldVh);\n\tdevice.setScissor(oldSx, oldSy, oldSw, oldSh);\n}\n\nclass TransformFeedback {\n\tconstructor(inputBuffer, usage = BUFFER_GPUDYNAMIC) {\n\t\tthis.device = inputBuffer.device;\n\t\tconst gl = this.device.gl;\n\t\tthis._inputBuffer = inputBuffer;\n\n\t\tif (usage === BUFFER_GPUDYNAMIC && inputBuffer.usage !== usage) {\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, inputBuffer.bufferId);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, inputBuffer.storage, gl.DYNAMIC_COPY);\n\t\t}\n\n\t\tthis._outputBuffer = new VertexBuffer(inputBuffer.device, inputBuffer.format, inputBuffer.numVertices, usage, inputBuffer.storage);\n\t}\n\n\tstatic createShader(graphicsDevice, vsCode, name) {\n\t\treturn createShaderFromCode(graphicsDevice, vsCode, null, name, true);\n\t}\n\n\tdestroy() {\n\t\tthis._outputBuffer.destroy();\n\t}\n\n\tprocess(shader, swap = true) {\n\t\tconst device = this.device;\n\t\tconst oldRt = device.getRenderTarget();\n\t\tdevice.setRenderTarget(null);\n\t\tdevice.updateBegin();\n\t\tdevice.setVertexBuffer(this._inputBuffer, 0);\n\t\tdevice.setRaster(false);\n\t\tdevice.setTransformFeedbackBuffer(this._outputBuffer);\n\t\tdevice.setShader(shader);\n\t\tdevice.draw({\n\t\t\ttype: PRIMITIVE_POINTS,\n\t\t\tbase: 0,\n\t\t\tcount: this._inputBuffer.numVertices,\n\t\t\tindexed: false\n\t\t});\n\t\tdevice.setTransformFeedbackBuffer(null);\n\t\tdevice.setRaster(true);\n\t\tdevice.updateEnd();\n\t\tdevice.setRenderTarget(oldRt);\n\n\t\tif (swap) {\n\t\t\tlet tmp = this._inputBuffer.bufferId;\n\t\t\tthis._inputBuffer.bufferId = this._outputBuffer.bufferId;\n\t\t\tthis._outputBuffer.bufferId = tmp;\n\t\t\ttmp = this._inputBuffer._vao;\n\t\t\tthis._inputBuffer._vao = this._outputBuffer._vao;\n\t\t\tthis._outputBuffer._vao = tmp;\n\t\t}\n\t}\n\n\tget inputBuffer() {\n\t\treturn this._inputBuffer;\n\t}\n\n\tget outputBuffer() {\n\t\treturn this._outputBuffer;\n\t}\n\n}\n\nclass RefCountedObject {\n\tconstructor() {\n\t\tthis._refCount = 0;\n\t}\n\n\tincRefCount() {\n\t\tthis._refCount++;\n\t}\n\n\tdecRefCount() {\n\t\tthis._refCount--;\n\t}\n\n\tgetRefCount() {\n\t\treturn this._refCount;\n\t}\n\n}\n\nvar id = 0;\n\nclass GeometryData {\n\tconstructor() {\n\t\tthis.initDefaults();\n\t}\n\n\tinitDefaults() {\n\t\tthis.recreate = false;\n\t\tthis.verticesUsage = BUFFER_STATIC;\n\t\tthis.indicesUsage = BUFFER_STATIC;\n\t\tthis.maxVertices = 0;\n\t\tthis.maxIndices = 0;\n\t\tthis.vertexCount = 0;\n\t\tthis.indexCount = 0;\n\t\tthis.vertexStreamsUpdated = false;\n\t\tthis.indexStreamUpdated = false;\n\t\tthis.vertexStreamDictionary = {};\n\t\tthis.indices = null;\n\t}\n\n\t_validateVertexCount(count, semantic) {}\n\n\t_changeVertexCount(count, semantic) {\n\t\tif (!this.vertexCount) {\n\t\t\tthis.vertexCount = count;\n\t\t} else {\n\t\t\tthis._validateVertexCount(count, semantic);\n\t\t}\n\t}\n\n}\n\nGeometryData.DEFAULT_COMPONENTS_POSITION = 3;\nGeometryData.DEFAULT_COMPONENTS_NORMAL = 3;\nGeometryData.DEFAULT_COMPONENTS_UV = 2;\nGeometryData.DEFAULT_COMPONENTS_COLORS = 4;\n\nclass GeometryVertexStream {\n\tconstructor(data, componentCount, dataType, dataTypeNormalize) {\n\t\tthis.data = data;\n\t\tthis.componentCount = componentCount;\n\t\tthis.dataType = dataType;\n\t\tthis.dataTypeNormalize = dataTypeNormalize;\n\t}\n\n}\n\nclass Mesh extends RefCountedObject {\n\tconstructor(graphicsDevice) {\n\t\tsuper();\n\t\tthis.id = id++;\n\t\tthis.device = graphicsDevice || getApplication().graphicsDevice;\n\t\tthis.vertexBuffer = null;\n\t\tthis.indexBuffer = [null];\n\t\tthis.primitive = [{\n\t\t\ttype: 0,\n\t\t\tbase: 0,\n\t\t\tcount: 0\n\t\t}];\n\t\tthis.skin = null;\n\t\tthis.morph = null;\n\t\tthis._geometryData = null;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis.boneAabb = null;\n\t}\n\n\tget aabb() {\n\t\treturn this._aabb;\n\t}\n\n\tset aabb(aabb) {\n\t\tthis._aabb = aabb;\n\t}\n\n\tdestroy() {\n\t\tif (this.vertexBuffer) {\n\t\t\tthis.vertexBuffer.destroy();\n\t\t\tthis.vertexBuffer = null;\n\t\t}\n\n\t\tfor (let j = 0; j < this.indexBuffer.length; j++) {\n\t\t\tthis._destroyIndexBuffer(j);\n\t\t}\n\n\t\tthis.indexBuffer.length = 0;\n\t\tthis._geometryData = null;\n\t}\n\n\t_destroyIndexBuffer(index) {\n\t\tif (this.indexBuffer[index]) {\n\t\t\tthis.indexBuffer[index].destroy();\n\t\t\tthis.indexBuffer[index] = null;\n\t\t}\n\t}\n\n\t_initBoneAabbs(morphTargets) {\n\t\tthis.boneAabb = [];\n\t\tthis.boneUsed = [];\n\t\tvar numVerts = this.vertexBuffer.numVertices;\n\t\tvar i, j, k, l;\n\t\tvar x, y, z;\n\t\tvar bMax, bMin;\n\t\tvar boneMin = [];\n\t\tvar boneMax = [];\n\t\tvar boneUsed = this.boneUsed;\n\t\tvar numBones = this.skin.boneNames.length;\n\t\tvar aabb;\n\t\tvar boneWeight, boneIndex;\n\t\tvar minMorphX, minMorphY, minMorphZ;\n\t\tvar maxMorphX, maxMorphY, maxMorphZ;\n\t\tvar dx, dy, dz;\n\t\tvar target;\n\n\t\tfor (i = 0; i < numBones; i++) {\n\t\t\tboneMin[i] = new Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n\t\t\tboneMax[i] = new Vec3(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n\t\t}\n\n\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\tvar posElement = iterator.element[SEMANTIC_POSITION];\n\t\tvar weightsElement = iterator.element[SEMANTIC_BLENDWEIGHT];\n\t\tvar indicesElement = iterator.element[SEMANTIC_BLENDINDICES];\n\n\t\tfor (j = 0; j < numVerts; j++) {\n\t\t\tfor (k = 0; k < 4; k++) {\n\t\t\t\tboneWeight = weightsElement.array[weightsElement.index + k];\n\n\t\t\t\tif (boneWeight > 0) {\n\t\t\t\t\tboneIndex = indicesElement.array[indicesElement.index + k];\n\t\t\t\t\tboneUsed[boneIndex] = true;\n\t\t\t\t\tx = posElement.array[posElement.index];\n\t\t\t\t\ty = posElement.array[posElement.index + 1];\n\t\t\t\t\tz = posElement.array[posElement.index + 2];\n\t\t\t\t\tbMax = boneMax[boneIndex];\n\t\t\t\t\tbMin = boneMin[boneIndex];\n\t\t\t\t\tif (bMin.x > x) bMin.x = x;\n\t\t\t\t\tif (bMin.y > y) bMin.y = y;\n\t\t\t\t\tif (bMin.z > z) bMin.z = z;\n\t\t\t\t\tif (bMax.x < x) bMax.x = x;\n\t\t\t\t\tif (bMax.y < y) bMax.y = y;\n\t\t\t\t\tif (bMax.z < z) bMax.z = z;\n\n\t\t\t\t\tif (morphTargets) {\n\t\t\t\t\t\tminMorphX = maxMorphX = x;\n\t\t\t\t\t\tminMorphY = maxMorphY = y;\n\t\t\t\t\t\tminMorphZ = maxMorphZ = z;\n\n\t\t\t\t\t\tfor (l = 0; l < morphTargets.length; l++) {\n\t\t\t\t\t\t\ttarget = morphTargets[l];\n\t\t\t\t\t\t\tdx = target.deltaPositions[j * 3];\n\t\t\t\t\t\t\tdy = target.deltaPositions[j * 3 + 1];\n\t\t\t\t\t\t\tdz = target.deltaPositions[j * 3 + 2];\n\n\t\t\t\t\t\t\tif (dx < 0) {\n\t\t\t\t\t\t\t\tminMorphX += dx;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphX += dx;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (dy < 0) {\n\t\t\t\t\t\t\t\tminMorphY += dy;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphY += dy;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (dz < 0) {\n\t\t\t\t\t\t\t\tminMorphZ += dz;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphZ += dz;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (bMin.x > minMorphX) bMin.x = minMorphX;\n\t\t\t\t\t\tif (bMin.y > minMorphY) bMin.y = minMorphY;\n\t\t\t\t\t\tif (bMin.z > minMorphZ) bMin.z = minMorphZ;\n\t\t\t\t\t\tif (bMax.x < maxMorphX) bMax.x = maxMorphX;\n\t\t\t\t\t\tif (bMax.y < maxMorphY) bMax.y = maxMorphY;\n\t\t\t\t\t\tif (bMax.z < maxMorphZ) bMax.z = maxMorphZ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titerator.next();\n\t\t}\n\n\t\tfor (i = 0; i < numBones; i++) {\n\t\t\taabb = new BoundingBox();\n\t\t\taabb.setMinMax(boneMin[i], boneMax[i]);\n\t\t\tthis.boneAabb.push(aabb);\n\t\t}\n\t}\n\n\t_initGeometryData() {\n\t\tif (!this._geometryData) {\n\t\t\tthis._geometryData = new GeometryData();\n\n\t\t\tif (this.vertexBuffer) {\n\t\t\t\tthis._geometryData.vertexCount = this.vertexBuffer.numVertices;\n\t\t\t\tthis._geometryData.maxVertices = this.vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tthis._geometryData.indexCount = this.indexBuffer[0].numIndices;\n\t\t\t\tthis._geometryData.maxIndices = this.indexBuffer[0].numIndices;\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(verticesDynamic, indicesDynamic, maxVertices = 0, maxIndices = 0) {\n\t\tthis._initGeometryData();\n\n\t\tthis._geometryData.initDefaults();\n\n\t\tthis._geometryData.recreate = true;\n\t\tthis._geometryData.maxVertices = maxVertices;\n\t\tthis._geometryData.maxIndices = maxIndices;\n\t\tthis._geometryData.verticesUsage = verticesDynamic ? BUFFER_STATIC : BUFFER_DYNAMIC;\n\t\tthis._geometryData.indicesUsage = indicesDynamic ? BUFFER_STATIC : BUFFER_DYNAMIC;\n\t}\n\n\tsetVertexStream(semantic, data, componentCount, numVertices, dataType = TYPE_FLOAT32, dataTypeNormalize = false) {\n\t\tthis._initGeometryData();\n\n\t\tvar vertexCount = numVertices || data.length / componentCount;\n\n\t\tthis._geometryData._changeVertexCount(vertexCount, semantic);\n\n\t\tthis._geometryData.vertexStreamsUpdated = true;\n\t\tthis._geometryData.vertexStreamDictionary[semantic] = new GeometryVertexStream(data, componentCount, dataType, dataTypeNormalize);\n\t}\n\n\tgetVertexStream(semantic, data) {\n\t\tvar count = 0;\n\t\tvar done = false;\n\n\t\tif (this._geometryData) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\n\t\t\tif (stream) {\n\t\t\t\tdone = true;\n\t\t\t\tcount = this._geometryData.vertexCount;\n\n\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\tdata.set(stream.data);\n\t\t\t\t} else {\n\t\t\t\t\tdata.length = 0;\n\t\t\t\t\tdata.push(stream.data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!done) {\n\t\t\tif (this.vertexBuffer) {\n\t\t\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\t\t\tcount = iterator.readData(semantic, data);\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tsetPositions(positions, componentCount = GeometryData.DEFAULT_COMPONENTS_POSITION, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_POSITION, positions, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetNormals(normals, componentCount = GeometryData.DEFAULT_COMPONENTS_NORMAL, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_NORMAL, normals, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetUvs(channel, uvs, componentCount = GeometryData.DEFAULT_COMPONENTS_UV, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_TEXCOORD + channel, uvs, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetColors(colors, componentCount = GeometryData.DEFAULT_COMPONENTS_COLORS, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_COLOR, colors, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetColors32(colors, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_COLOR, colors, GeometryData.DEFAULT_COMPONENTS_COLORS, numVertices, TYPE_UINT8, true);\n\t}\n\n\tsetIndices(indices, numIndices) {\n\t\tthis._initGeometryData();\n\n\t\tthis._geometryData.indexStreamUpdated = true;\n\t\tthis._geometryData.indices = indices;\n\t\tthis._geometryData.indexCount = numIndices || indices.length;\n\t}\n\n\tgetPositions(positions) {\n\t\treturn this.getVertexStream(SEMANTIC_POSITION, positions);\n\t}\n\n\tgetNormals(normals) {\n\t\treturn this.getVertexStream(SEMANTIC_NORMAL, normals);\n\t}\n\n\tgetUvs(channel, uvs) {\n\t\treturn this.getVertexStream(SEMANTIC_TEXCOORD + channel, uvs);\n\t}\n\n\tgetColors(colors) {\n\t\treturn this.getVertexStream(SEMANTIC_COLOR, colors);\n\t}\n\n\tgetIndices(indices) {\n\t\tvar count = 0;\n\n\t\tif (this._geometryData && this._geometryData.indices) {\n\t\t\tvar streamIndices = this._geometryData.indices;\n\t\t\tcount = this._geometryData.indexCount;\n\n\t\t\tif (ArrayBuffer.isView(indices)) {\n\t\t\t\tindices.set(streamIndices);\n\t\t\t} else {\n\t\t\t\tindices.length = 0;\n\t\t\t\tindices.push(streamIndices);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tvar indexBuffer = this.indexBuffer[0];\n\t\t\t\tcount = indexBuffer.readData(indices);\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tupdate(primitiveType = PRIMITIVE_TRIANGLES, updateBoundingBox = true) {\n\t\tif (this._geometryData) {\n\t\t\tif (updateBoundingBox) {\n\t\t\t\tvar stream = this._geometryData.vertexStreamDictionary[SEMANTIC_POSITION];\n\n\t\t\t\tif (stream) {\n\t\t\t\t\tif (stream.componentCount === 3) {\n\t\t\t\t\t\tthis._aabb.compute(stream.data, this._geometryData.vertexCount);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar destroyVB = this._geometryData.recreate;\n\n\t\t\tif (this._geometryData.vertexCount > this._geometryData.maxVertices) {\n\t\t\t\tdestroyVB = true;\n\t\t\t\tthis._geometryData.maxVertices = this._geometryData.vertexCount;\n\t\t\t}\n\n\t\t\tif (destroyVB) {\n\t\t\t\tif (this.vertexBuffer) {\n\t\t\t\t\tthis.vertexBuffer.destroy();\n\t\t\t\t\tthis.vertexBuffer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar destroyIB = this._geometryData.recreate;\n\n\t\t\tif (this._geometryData.indexCount > this._geometryData.maxIndices) {\n\t\t\t\tdestroyIB = true;\n\t\t\t\tthis._geometryData.maxIndices = this._geometryData.indexCount;\n\t\t\t}\n\n\t\t\tif (destroyIB) {\n\t\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\t\tthis.indexBuffer[0].destroy();\n\t\t\t\t\tthis.indexBuffer[0] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._geometryData.vertexStreamsUpdated) {\n\t\t\t\tthis._updateVertexBuffer();\n\t\t\t}\n\n\t\t\tif (this._geometryData.indexStreamUpdated) {\n\t\t\t\tthis._updateIndexBuffer();\n\t\t\t}\n\n\t\t\tthis.primitive[0].type = primitiveType;\n\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tif (this._geometryData.indexStreamUpdated) {\n\t\t\t\t\tthis.primitive[0].count = this._geometryData.indexCount;\n\t\t\t\t\tthis.primitive[0].indexed = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._geometryData.vertexStreamsUpdated) {\n\t\t\t\t\tthis.primitive[0].count = this._geometryData.vertexCount;\n\t\t\t\t\tthis.primitive[0].indexed = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._geometryData.vertexCount = 0;\n\t\t\tthis._geometryData.indexCount = 0;\n\t\t\tthis._geometryData.vertexStreamsUpdated = false;\n\t\t\tthis._geometryData.indexStreamUpdated = false;\n\t\t\tthis._geometryData.recreate = false;\n\t\t\tthis.updateRenderStates();\n\t\t}\n\t}\n\n\t_buildVertexFormat(vertexCount) {\n\t\tvar vertexDesc = [];\n\n\t\tfor (var semantic in this._geometryData.vertexStreamDictionary) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\t\t\tvertexDesc.push({\n\t\t\t\tsemantic: semantic,\n\t\t\t\tcomponents: stream.componentCount,\n\t\t\t\ttype: stream.dataType,\n\t\t\t\tnormalize: stream.dataTypeNormalize\n\t\t\t});\n\t\t}\n\n\t\treturn new VertexFormat(this.device, vertexDesc, vertexCount);\n\t}\n\n\t_updateVertexBuffer() {\n\t\tif (!this.vertexBuffer) {\n\t\t\tvar allocateVertexCount = this._geometryData.maxVertices;\n\n\t\t\tvar format = this._buildVertexFormat(allocateVertexCount);\n\n\t\t\tthis.vertexBuffer = new VertexBuffer(this.device, format, allocateVertexCount, this._geometryData.verticesUsage);\n\t\t}\n\n\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\tvar numVertices = this._geometryData.vertexCount;\n\n\t\tfor (var semantic in this._geometryData.vertexStreamDictionary) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\t\t\titerator.writeData(semantic, stream.data, numVertices);\n\t\t\tdelete this._geometryData.vertexStreamDictionary[semantic];\n\t\t}\n\n\t\titerator.end();\n\t}\n\n\t_updateIndexBuffer() {\n\t\tif (this.indexBuffer.length <= 0 || !this.indexBuffer[0]) {\n\t\t\tvar createFormat = this._geometryData.maxVertices > 0xffff ? INDEXFORMAT_UINT32 : INDEXFORMAT_UINT16;\n\t\t\tthis.indexBuffer[0] = new IndexBuffer(this.device, createFormat, this._geometryData.maxIndices, this._geometryData.indicesUsage);\n\t\t}\n\n\t\tvar srcIndices = this._geometryData.indices;\n\n\t\tif (srcIndices) {\n\t\t\tvar indexBuffer = this.indexBuffer[0];\n\t\t\tindexBuffer.writeData(srcIndices, this._geometryData.indexCount);\n\t\t\tthis._geometryData.indices = null;\n\t\t}\n\t}\n\n\tprepareRenderState(renderStyle) {\n\t\tif (renderStyle === RENDERSTYLE_WIREFRAME) {\n\t\t\tthis.generateWireframe();\n\t\t} else if (renderStyle === RENDERSTYLE_POINTS) {\n\t\t\tthis.primitive[RENDERSTYLE_POINTS] = {\n\t\t\t\ttype: PRIMITIVE_POINTS,\n\t\t\t\tbase: 0,\n\t\t\t\tcount: this.vertexBuffer ? this.vertexBuffer.numVertices : 0,\n\t\t\t\tindexed: false\n\t\t\t};\n\t\t}\n\t}\n\n\tupdateRenderStates() {\n\t\tif (this.primitive[RENDERSTYLE_POINTS]) {\n\t\t\tthis.prepareRenderState(RENDERSTYLE_POINTS);\n\t\t}\n\n\t\tif (this.primitive[RENDERSTYLE_WIREFRAME]) {\n\t\t\tthis.prepareRenderState(RENDERSTYLE_WIREFRAME);\n\t\t}\n\t}\n\n\tgenerateWireframe() {\n\t\tthis._destroyIndexBuffer(RENDERSTYLE_WIREFRAME);\n\n\t\tvar lines = [];\n\t\tvar format;\n\n\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\tvar offsets = [[0, 1], [1, 2], [2, 0]];\n\t\t\tvar base = this.primitive[RENDERSTYLE_SOLID].base;\n\t\t\tvar count = this.primitive[RENDERSTYLE_SOLID].count;\n\t\t\tvar indexBuffer = this.indexBuffer[RENDERSTYLE_SOLID];\n\t\t\tvar srcIndices = new typedArrayIndexFormats[indexBuffer.format](indexBuffer.storage);\n\t\t\tvar uniqueLineIndices = {};\n\n\t\t\tfor (var j = base; j < base + count; j += 3) {\n\t\t\t\tfor (var k = 0; k < 3; k++) {\n\t\t\t\t\tvar i1 = srcIndices[j + offsets[k][0]];\n\t\t\t\t\tvar i2 = srcIndices[j + offsets[k][1]];\n\t\t\t\t\tvar line = i1 > i2 ? i2 << 16 | i1 : i1 << 16 | i2;\n\n\t\t\t\t\tif (uniqueLineIndices[line] === undefined) {\n\t\t\t\t\t\tuniqueLineIndices[line] = 0;\n\t\t\t\t\t\tlines.push(i1, i2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tformat = indexBuffer.format;\n\t\t} else {\n\t\t\tfor (var i = 0; i < this.vertexBuffer.numVertices; i += 3) {\n\t\t\t\tlines.push(i, i + 1, i + 1, i + 2, i + 2, i);\n\t\t\t}\n\n\t\t\tformat = lines.length > 65535 ? INDEXFORMAT_UINT32 : INDEXFORMAT_UINT16;\n\t\t}\n\n\t\tvar wireBuffer = new IndexBuffer(this.vertexBuffer.device, format, lines.length);\n\t\tvar dstIndices = new typedArrayIndexFormats[wireBuffer.format](wireBuffer.storage);\n\t\tdstIndices.set(lines);\n\t\twireBuffer.unlock();\n\t\tthis.primitive[RENDERSTYLE_WIREFRAME] = {\n\t\t\ttype: PRIMITIVE_LINES,\n\t\t\tbase: 0,\n\t\t\tcount: lines.length,\n\t\t\tindexed: true\n\t\t};\n\t\tthis.indexBuffer[RENDERSTYLE_WIREFRAME] = wireBuffer;\n\t}\n\n}\n\nvar primitiveUv1Padding = 4.0 / 64;\nvar primitiveUv1PaddingScale = 1.0 - primitiveUv1Padding * 2;\nvar shapePrimitives = [];\n\nfunction calculateNormals(positions, indices) {\n\tvar triangleCount = indices.length / 3;\n\tvar vertexCount = positions.length / 3;\n\tvar i1, i2, i3;\n\tvar i;\n\tvar p1 = new Vec3();\n\tvar p2 = new Vec3();\n\tvar p3 = new Vec3();\n\tvar p1p2 = new Vec3();\n\tvar p1p3 = new Vec3();\n\tvar faceNormal = new Vec3();\n\tvar normals = [];\n\n\tfor (i = 0; i < positions.length; i++) {\n\t\tnormals[i] = 0;\n\t}\n\n\tfor (i = 0; i < triangleCount; i++) {\n\t\ti1 = indices[i * 3];\n\t\ti2 = indices[i * 3 + 1];\n\t\ti3 = indices[i * 3 + 2];\n\t\tp1.set(positions[i1 * 3], positions[i1 * 3 + 1], positions[i1 * 3 + 2]);\n\t\tp2.set(positions[i2 * 3], positions[i2 * 3 + 1], positions[i2 * 3 + 2]);\n\t\tp3.set(positions[i3 * 3], positions[i3 * 3 + 1], positions[i3 * 3 + 2]);\n\t\tp1p2.sub2(p2, p1);\n\t\tp1p3.sub2(p3, p1);\n\t\tfaceNormal.cross(p1p2, p1p3).normalize();\n\t\tnormals[i1 * 3] += faceNormal.x;\n\t\tnormals[i1 * 3 + 1] += faceNormal.y;\n\t\tnormals[i1 * 3 + 2] += faceNormal.z;\n\t\tnormals[i2 * 3] += faceNormal.x;\n\t\tnormals[i2 * 3 + 1] += faceNormal.y;\n\t\tnormals[i2 * 3 + 2] += faceNormal.z;\n\t\tnormals[i3 * 3] += faceNormal.x;\n\t\tnormals[i3 * 3 + 1] += faceNormal.y;\n\t\tnormals[i3 * 3 + 2] += faceNormal.z;\n\t}\n\n\tfor (i = 0; i < vertexCount; i++) {\n\t\tvar nx = normals[i * 3];\n\t\tvar ny = normals[i * 3 + 1];\n\t\tvar nz = normals[i * 3 + 2];\n\t\tvar invLen = 1 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n\t\tnormals[i * 3] *= invLen;\n\t\tnormals[i * 3 + 1] *= invLen;\n\t\tnormals[i * 3 + 2] *= invLen;\n\t}\n\n\treturn normals;\n}\n\nfunction calculateTangents(positions, normals, uvs, indices) {\n\tvar triangleCount = indices.length / 3;\n\tvar vertexCount = positions.length / 3;\n\tvar i1, i2, i3;\n\tvar x1, x2, y1, y2, z1, z2, s1, s2, t1, t2, r;\n\tvar sdir = new Vec3();\n\tvar tdir = new Vec3();\n\tvar v1 = new Vec3();\n\tvar v2 = new Vec3();\n\tvar v3 = new Vec3();\n\tvar w1 = new Vec2();\n\tvar w2 = new Vec2();\n\tvar w3 = new Vec2();\n\tvar i;\n\tvar tan1 = new Float32Array(vertexCount * 3);\n\tvar tan2 = new Float32Array(vertexCount * 3);\n\tvar tangents = [];\n\tvar area = 0.0;\n\n\tfor (i = 0; i < triangleCount; i++) {\n\t\ti1 = indices[i * 3];\n\t\ti2 = indices[i * 3 + 1];\n\t\ti3 = indices[i * 3 + 2];\n\t\tv1.set(positions[i1 * 3], positions[i1 * 3 + 1], positions[i1 * 3 + 2]);\n\t\tv2.set(positions[i2 * 3], positions[i2 * 3 + 1], positions[i2 * 3 + 2]);\n\t\tv3.set(positions[i3 * 3], positions[i3 * 3 + 1], positions[i3 * 3 + 2]);\n\t\tw1.set(uvs[i1 * 2], uvs[i1 * 2 + 1]);\n\t\tw2.set(uvs[i2 * 2], uvs[i2 * 2 + 1]);\n\t\tw3.set(uvs[i3 * 2], uvs[i3 * 2 + 1]);\n\t\tx1 = v2.x - v1.x;\n\t\tx2 = v3.x - v1.x;\n\t\ty1 = v2.y - v1.y;\n\t\ty2 = v3.y - v1.y;\n\t\tz1 = v2.z - v1.z;\n\t\tz2 = v3.z - v1.z;\n\t\ts1 = w2.x - w1.x;\n\t\ts2 = w3.x - w1.x;\n\t\tt1 = w2.y - w1.y;\n\t\tt2 = w3.y - w1.y;\n\t\tarea = s1 * t2 - s2 * t1;\n\n\t\tif (area === 0) {\n\t\t\tsdir.set(0.0, 1.0, 0.0);\n\t\t\ttdir.set(1.0, 0.0, 0.0);\n\t\t} else {\n\t\t\tr = 1.0 / area;\n\t\t\tsdir.set((t2 * x1 - t1 * x2) * r, (t2 * y1 - t1 * y2) * r, (t2 * z1 - t1 * z2) * r);\n\t\t\ttdir.set((s1 * x2 - s2 * x1) * r, (s1 * y2 - s2 * y1) * r, (s1 * z2 - s2 * z1) * r);\n\t\t}\n\n\t\ttan1[i1 * 3 + 0] += sdir.x;\n\t\ttan1[i1 * 3 + 1] += sdir.y;\n\t\ttan1[i1 * 3 + 2] += sdir.z;\n\t\ttan1[i2 * 3 + 0] += sdir.x;\n\t\ttan1[i2 * 3 + 1] += sdir.y;\n\t\ttan1[i2 * 3 + 2] += sdir.z;\n\t\ttan1[i3 * 3 + 0] += sdir.x;\n\t\ttan1[i3 * 3 + 1] += sdir.y;\n\t\ttan1[i3 * 3 + 2] += sdir.z;\n\t\ttan2[i1 * 3 + 0] += tdir.x;\n\t\ttan2[i1 * 3 + 1] += tdir.y;\n\t\ttan2[i1 * 3 + 2] += tdir.z;\n\t\ttan2[i2 * 3 + 0] += tdir.x;\n\t\ttan2[i2 * 3 + 1] += tdir.y;\n\t\ttan2[i2 * 3 + 2] += tdir.z;\n\t\ttan2[i3 * 3 + 0] += tdir.x;\n\t\ttan2[i3 * 3 + 1] += tdir.y;\n\t\ttan2[i3 * 3 + 2] += tdir.z;\n\t}\n\n\tt1 = new Vec3();\n\tt2 = new Vec3();\n\tvar n = new Vec3();\n\tvar temp = new Vec3();\n\n\tfor (i = 0; i < vertexCount; i++) {\n\t\tn.set(normals[i * 3], normals[i * 3 + 1], normals[i * 3 + 2]);\n\t\tt1.set(tan1[i * 3], tan1[i * 3 + 1], tan1[i * 3 + 2]);\n\t\tt2.set(tan2[i * 3], tan2[i * 3 + 1], tan2[i * 3 + 2]);\n\t\tvar ndott = n.dot(t1);\n\t\ttemp.copy(n).mulScalar(ndott);\n\t\ttemp.sub2(t1, temp).normalize();\n\t\ttangents[i * 4] = temp.x;\n\t\ttangents[i * 4 + 1] = temp.y;\n\t\ttangents[i * 4 + 2] = temp.z;\n\t\ttemp.cross(n, t1);\n\t\ttangents[i * 4 + 3] = temp.dot(t2) < 0.0 ? -1.0 : 1.0;\n\t}\n\n\treturn tangents;\n}\n\nfunction createMesh$1(device, positions, opts) {\n\tconst mesh = new Mesh(device);\n\tmesh.setPositions(positions);\n\n\tif (opts) {\n\t\tif (opts.normals) {\n\t\t\tmesh.setNormals(opts.normals);\n\t\t}\n\n\t\tif (opts.tangents) {\n\t\t\tmesh.setVertexStream(SEMANTIC_TANGENT, opts.tangents, 4);\n\t\t}\n\n\t\tif (opts.colors) {\n\t\t\tmesh.setColors32(opts.colors);\n\t\t}\n\n\t\tif (opts.uvs) {\n\t\t\tmesh.setUvs(0, opts.uvs);\n\t\t}\n\n\t\tif (opts.uvs1) {\n\t\t\tmesh.setUvs(1, opts.uvs1);\n\t\t}\n\n\t\tif (opts.blendIndices) {\n\t\t\tmesh.setVertexStream(SEMANTIC_BLENDINDICES, opts.blendIndices, 4, TYPE_UINT8);\n\t\t}\n\n\t\tif (opts.blendWeights) {\n\t\t\tmesh.setVertexStream(SEMANTIC_BLENDWEIGHT, opts.blendWeights, 4);\n\t\t}\n\n\t\tif (opts.indices) {\n\t\t\tmesh.setIndices(opts.indices);\n\t\t}\n\t}\n\n\tmesh.update();\n\treturn mesh;\n}\n\nfunction createTorus(device, opts) {\n\tvar rc = opts && opts.tubeRadius !== undefined ? opts.tubeRadius : 0.2;\n\tvar rt = opts && opts.ringRadius !== undefined ? opts.ringRadius : 0.3;\n\tvar segments = opts && opts.segments !== undefined ? opts.segments : 30;\n\tvar sides = opts && opts.sides !== undefined ? opts.sides : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar i, j;\n\tvar x, y, z, nx, ny, nz, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\tfor (i = 0; i <= sides; i++) {\n\t\tfor (j = 0; j <= segments; j++) {\n\t\t\tx = Math.cos(2.0 * Math.PI * j / segments) * (rt + rc * Math.cos(2.0 * Math.PI * i / sides));\n\t\t\ty = Math.sin(2.0 * Math.PI * i / sides) * rc;\n\t\t\tz = Math.sin(2.0 * Math.PI * j / segments) * (rt + rc * Math.cos(2.0 * Math.PI * i / sides));\n\t\t\tnx = Math.cos(2.0 * Math.PI * j / segments) * Math.cos(2.0 * Math.PI * i / sides);\n\t\t\tny = Math.sin(2.0 * Math.PI * i / sides);\n\t\t\tnz = Math.sin(2.0 * Math.PI * j / segments) * Math.cos(2.0 * Math.PI * i / sides);\n\t\t\tu = i / sides;\n\t\t\tv = 1.0 - j / segments;\n\t\t\tpositions.push(x, y, z);\n\t\t\tnormals.push(nx, ny, nz);\n\t\t\tuvs.push(u, 1.0 - v);\n\n\t\t\tif (i < sides && j < segments) {\n\t\t\t\tvar first, second, third, fourth;\n\t\t\t\tfirst = i * (segments + 1) + j;\n\t\t\t\tsecond = (i + 1) * (segments + 1) + j;\n\t\t\t\tthird = i * (segments + 1) + (j + 1);\n\t\t\t\tfourth = (i + 1) * (segments + 1) + (j + 1);\n\t\t\t\tindices.push(first, second, third);\n\t\t\t\tindices.push(second, fourth, third);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction _createConeData(baseRadius, peakRadius, height, heightSegments, capSegments, roundedCaps) {\n\tvar i, j;\n\tvar x, y, z, u, v;\n\tvar pos = new Vec3();\n\tvar bottomToTop = new Vec3();\n\tvar norm = new Vec3();\n\tvar top, bottom, tangent;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar uvs1 = [];\n\tvar indices = [];\n\tvar theta, cosTheta, sinTheta;\n\tvar phi, sinPhi, cosPhi;\n\tvar first, second, third, fourth;\n\tvar offset;\n\n\tif (height > 0) {\n\t\tfor (i = 0; i <= heightSegments; i++) {\n\t\t\tfor (j = 0; j <= capSegments; j++) {\n\t\t\t\ttheta = j / capSegments * 2.0 * Math.PI - Math.PI;\n\t\t\t\tsinTheta = Math.sin(theta);\n\t\t\t\tcosTheta = Math.cos(theta);\n\t\t\t\tbottom = new Vec3(sinTheta * baseRadius, -height / 2.0, cosTheta * baseRadius);\n\t\t\t\ttop = new Vec3(sinTheta * peakRadius, height / 2.0, cosTheta * peakRadius);\n\t\t\t\tpos.lerp(bottom, top, i / heightSegments);\n\t\t\t\tbottomToTop.sub2(top, bottom).normalize();\n\t\t\t\ttangent = new Vec3(cosTheta, 0.0, -sinTheta);\n\t\t\t\tnorm.cross(tangent, bottomToTop).normalize();\n\t\t\t\tpositions.push(pos.x, pos.y, pos.z);\n\t\t\t\tnormals.push(norm.x, norm.y, norm.z);\n\t\t\t\tu = j / capSegments;\n\t\t\t\tv = i / heightSegments;\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tvar _v = v;\n\t\t\t\tv = u;\n\t\t\t\tu = _v;\n\t\t\t\tu /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i < heightSegments && j < capSegments) {\n\t\t\t\t\tfirst = i * (capSegments + 1) + j;\n\t\t\t\t\tsecond = i * (capSegments + 1) + (j + 1);\n\t\t\t\t\tthird = (i + 1) * (capSegments + 1) + j;\n\t\t\t\t\tfourth = (i + 1) * (capSegments + 1) + (j + 1);\n\t\t\t\t\tindices.push(first, second, third);\n\t\t\t\t\tindices.push(second, fourth, third);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (roundedCaps) {\n\t\tvar lat, lon;\n\t\tvar latitudeBands = Math.floor(capSegments / 2);\n\t\tvar longitudeBands = capSegments;\n\t\tvar capOffset = height / 2;\n\n\t\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\t\ttheta = lat * Math.PI * 0.5 / latitudeBands;\n\t\t\tsinTheta = Math.sin(theta);\n\t\t\tcosTheta = Math.cos(theta);\n\n\t\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\t\tsinPhi = Math.sin(phi);\n\t\t\t\tcosPhi = Math.cos(phi);\n\t\t\t\tx = cosPhi * sinTheta;\n\t\t\t\ty = cosTheta;\n\t\t\t\tz = sinPhi * sinTheta;\n\t\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\t\tpositions.push(x * peakRadius, y * peakRadius + capOffset, z * peakRadius);\n\t\t\t\tnormals.push(x, y, z);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 1.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\t\t\t}\n\t\t}\n\n\t\toffset = (heightSegments + 1) * (capSegments + 1);\n\n\t\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\t\tsecond = first + longitudeBands + 1;\n\t\t\t\tindices.push(offset + first + 1, offset + second, offset + first);\n\t\t\t\tindices.push(offset + first + 1, offset + second + 1, offset + second);\n\t\t\t}\n\t\t}\n\n\t\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\t\ttheta = Math.PI * 0.5 + lat * Math.PI * 0.5 / latitudeBands;\n\t\t\tsinTheta = Math.sin(theta);\n\t\t\tcosTheta = Math.cos(theta);\n\n\t\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\t\tsinPhi = Math.sin(phi);\n\t\t\t\tcosPhi = Math.cos(phi);\n\t\t\t\tx = cosPhi * sinTheta;\n\t\t\t\ty = cosTheta;\n\t\t\t\tz = sinPhi * sinTheta;\n\t\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\t\tpositions.push(x * peakRadius, y * peakRadius - capOffset, z * peakRadius);\n\t\t\t\tnormals.push(x, y, z);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 2.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\t\t\t}\n\t\t}\n\n\t\toffset = (heightSegments + 1) * (capSegments + 1) + (longitudeBands + 1) * (latitudeBands + 1);\n\n\t\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\t\tsecond = first + longitudeBands + 1;\n\t\t\t\tindices.push(offset + first + 1, offset + second, offset + first);\n\t\t\t\tindices.push(offset + first + 1, offset + second + 1, offset + second);\n\t\t\t}\n\t\t}\n\t} else {\n\t\toffset = (heightSegments + 1) * (capSegments + 1);\n\n\t\tif (baseRadius > 0.0) {\n\t\t\tfor (i = 0; i < capSegments; i++) {\n\t\t\t\ttheta = i / capSegments * 2.0 * Math.PI;\n\t\t\t\tx = Math.sin(theta);\n\t\t\t\ty = -height / 2.0;\n\t\t\t\tz = Math.cos(theta);\n\t\t\t\tu = 1.0 - (x + 1.0) / 2.0;\n\t\t\t\tv = (z + 1.0) / 2.0;\n\t\t\t\tpositions.push(x * baseRadius, y, z * baseRadius);\n\t\t\t\tnormals.push(0.0, -1.0, 0.0);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 1.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i > 1) {\n\t\t\t\t\tindices.push(offset, offset + i, offset + i - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\toffset += capSegments;\n\n\t\tif (peakRadius > 0.0) {\n\t\t\tfor (i = 0; i < capSegments; i++) {\n\t\t\t\ttheta = i / capSegments * 2.0 * Math.PI;\n\t\t\t\tx = Math.sin(theta);\n\t\t\t\ty = height / 2.0;\n\t\t\t\tz = Math.cos(theta);\n\t\t\t\tu = 1.0 - (x + 1.0) / 2.0;\n\t\t\t\tv = (z + 1.0) / 2.0;\n\t\t\t\tpositions.push(x * peakRadius, y, z * peakRadius);\n\t\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 2.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i > 1) {\n\t\t\t\t\tindices.push(offset, offset + i - 1, offset + i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tpositions: positions,\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs1,\n\t\tindices: indices\n\t};\n}\n\nfunction createCylinder(device, opts) {\n\tvar radius = opts && (opts.radius || opts.baseRadius);\n\tradius = radius !== undefined ? radius : 0.5;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 5;\n\tvar capSegments = opts && opts.capSegments !== undefined ? opts.capSegments : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(radius, radius, height, heightSegments, capSegments, false);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createCapsule(device, opts) {\n\tvar radius = opts && opts.radius !== undefined ? opts.radius : 0.3;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 1;\n\tvar sides = opts && opts.sides !== undefined ? opts.sides : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(radius, radius, height - 2 * radius, heightSegments, sides, true);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createCone(device, opts) {\n\tvar baseRadius = opts && opts.baseRadius !== undefined ? opts.baseRadius : 0.5;\n\tvar peakRadius = opts && opts.peakRadius !== undefined ? opts.peakRadius : 0.0;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 5;\n\tvar capSegments = opts && opts.capSegments !== undefined ? opts.capSegments : 18;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(baseRadius, peakRadius, height, heightSegments, capSegments, false);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createSphere(device, opts) {\n\tvar radius = opts && opts.radius !== undefined ? opts.radius : 0.5;\n\tvar latitudeBands = opts && opts.latitudeBands !== undefined ? opts.latitudeBands : 16;\n\tvar longitudeBands = opts && opts.longitudeBands !== undefined ? opts.longitudeBands : 16;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar lon, lat;\n\tvar theta, sinTheta, cosTheta, phi, sinPhi, cosPhi;\n\tvar first, second;\n\tvar x, y, z, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\ttheta = lat * Math.PI / latitudeBands;\n\t\tsinTheta = Math.sin(theta);\n\t\tcosTheta = Math.cos(theta);\n\n\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\tsinPhi = Math.sin(phi);\n\t\t\tcosPhi = Math.cos(phi);\n\t\t\tx = cosPhi * sinTheta;\n\t\t\ty = cosTheta;\n\t\t\tz = sinPhi * sinTheta;\n\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\tpositions.push(x * radius, y * radius, z * radius);\n\t\t\tnormals.push(x, y, z);\n\t\t\tuvs.push(u, 1.0 - v);\n\t\t}\n\t}\n\n\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\tsecond = first + longitudeBands + 1;\n\t\t\tindices.push(first + 1, second, first);\n\t\t\tindices.push(first + 1, second + 1, second);\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction createPlane(device, opts) {\n\tvar he = opts && opts.halfExtents !== undefined ? opts.halfExtents : new Vec2(0.5, 0.5);\n\tvar ws = opts && opts.widthSegments !== undefined ? opts.widthSegments : 5;\n\tvar ls = opts && opts.lengthSegments !== undefined ? opts.lengthSegments : 5;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar i, j;\n\tvar x, y, z, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\tvar vcounter = 0;\n\n\tfor (i = 0; i <= ws; i++) {\n\t\tfor (j = 0; j <= ls; j++) {\n\t\t\tx = -he.x + 2.0 * he.x * i / ws;\n\t\t\ty = 0.0;\n\t\t\tz = -(-he.y + 2.0 * he.y * j / ls);\n\t\t\tu = i / ws;\n\t\t\tv = j / ls;\n\t\t\tpositions.push(x, y, z);\n\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\tuvs.push(u, 1.0 - v);\n\n\t\t\tif (i < ws && j < ls) {\n\t\t\t\tindices.push(vcounter + ls + 1, vcounter + 1, vcounter);\n\t\t\t\tindices.push(vcounter + ls + 1, vcounter + ls + 2, vcounter + 1);\n\t\t\t}\n\n\t\t\tvcounter++;\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction createBox(device, opts) {\n\tvar he = opts && opts.halfExtents !== undefined ? opts.halfExtents : new Vec3(0.5, 0.5, 0.5);\n\tvar ws = opts && opts.widthSegments !== undefined ? opts.widthSegments : 1;\n\tvar ls = opts && opts.lengthSegments !== undefined ? opts.lengthSegments : 1;\n\tvar hs = opts && opts.heightSegments !== undefined ? opts.heightSegments : 1;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar corners = [new Vec3(-he.x, -he.y, he.z), new Vec3(he.x, -he.y, he.z), new Vec3(he.x, he.y, he.z), new Vec3(-he.x, he.y, he.z), new Vec3(he.x, -he.y, -he.z), new Vec3(-he.x, -he.y, -he.z), new Vec3(-he.x, he.y, -he.z), new Vec3(he.x, he.y, -he.z)];\n\tvar faceAxes = [[0, 1, 3], [4, 5, 7], [3, 2, 6], [1, 0, 4], [1, 4, 2], [5, 0, 6]];\n\tvar faceNormals = [[0, 0, 1], [0, 0, -1], [0, 1, 0], [0, -1, 0], [1, 0, 0], [-1, 0, 0]];\n\tvar sides = {\n\t\tFRONT: 0,\n\t\tBACK: 1,\n\t\tTOP: 2,\n\t\tBOTTOM: 3,\n\t\tRIGHT: 4,\n\t\tLEFT: 5\n\t};\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar uvs1 = [];\n\tvar indices = [];\n\tvar vcounter = 0;\n\n\tvar generateFace = function generateFace(side, uSegments, vSegments) {\n\t\tvar u, v;\n\t\tvar i, j;\n\n\t\tfor (i = 0; i <= uSegments; i++) {\n\t\t\tfor (j = 0; j <= vSegments; j++) {\n\t\t\t\tvar temp1 = new Vec3();\n\t\t\t\tvar temp2 = new Vec3();\n\t\t\t\tvar temp3 = new Vec3();\n\t\t\t\tvar r = new Vec3();\n\t\t\t\ttemp1.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][1]], i / uSegments);\n\t\t\t\ttemp2.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][2]], j / vSegments);\n\t\t\t\ttemp3.sub2(temp2, corners[faceAxes[side][0]]);\n\t\t\t\tr.add2(temp1, temp3);\n\t\t\t\tu = i / uSegments;\n\t\t\t\tv = j / vSegments;\n\t\t\t\tpositions.push(r.x, r.y, r.z);\n\t\t\t\tnormals.push(faceNormals[side][0], faceNormals[side][1], faceNormals[side][2]);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += side % 3 / 3;\n\t\t\t\tv += Math.floor(side / 3) / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i < uSegments && j < vSegments) {\n\t\t\t\t\tindices.push(vcounter + vSegments + 1, vcounter + 1, vcounter);\n\t\t\t\t\tindices.push(vcounter + vSegments + 1, vcounter + vSegments + 2, vcounter + 1);\n\t\t\t\t}\n\n\t\t\t\tvcounter++;\n\t\t\t}\n\t\t}\n\t};\n\n\tgenerateFace(sides.FRONT, ws, hs);\n\tgenerateFace(sides.BACK, ws, hs);\n\tgenerateFace(sides.TOP, ws, ls);\n\tgenerateFace(sides.BOTTOM, ws, ls);\n\tgenerateFace(sides.RIGHT, ls, hs);\n\tgenerateFace(sides.LEFT, ls, hs);\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs1,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction getShapePrimitive(device, type) {\n\tvar primData = null;\n\n\tfor (var i = 0; i < shapePrimitives.length; i++) {\n\t\tif (shapePrimitives[i].type === type && shapePrimitives[i].device === device) {\n\t\t\tprimData = shapePrimitives[i].primData;\n\t\t}\n\t}\n\n\tif (!primData) {\n\t\tvar mesh, area;\n\n\t\tswitch (type) {\n\t\t\tcase 'box':\n\t\t\t\tmesh = createBox(device, {\n\t\t\t\t\thalfExtents: new Vec3(0.5, 0.5, 0.5)\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 2,\n\t\t\t\t\ty: 2,\n\t\t\t\t\tz: 2,\n\t\t\t\t\tuv: 2.0 / 3\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'capsule':\n\t\t\t\tmesh = createCapsule(device, {\n\t\t\t\t\tradius: 0.5,\n\t\t\t\t\theight: 2\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI * 2,\n\t\t\t\t\ty: Math.PI,\n\t\t\t\t\tz: Math.PI * 2,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3 * 2\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'cone':\n\t\t\t\tmesh = createCone(device, {\n\t\t\t\t\tbaseRadius: 0.5,\n\t\t\t\t\tpeakRadius: 0,\n\t\t\t\t\theight: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 2.54,\n\t\t\t\t\ty: 2.54,\n\t\t\t\t\tz: 2.54,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'cylinder':\n\t\t\t\tmesh = createCylinder(device, {\n\t\t\t\t\tradius: 0.5,\n\t\t\t\t\theight: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI,\n\t\t\t\t\ty: 0.79 * 2,\n\t\t\t\t\tz: Math.PI,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3 * 2\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'plane':\n\t\t\t\tmesh = createPlane(device, {\n\t\t\t\t\thalfExtents: new Vec2(0.5, 0.5),\n\t\t\t\t\twidthSegments: 1,\n\t\t\t\t\tlengthSegments: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 1,\n\t\t\t\t\tz: 0,\n\t\t\t\t\tuv: 1\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'sphere':\n\t\t\t\tmesh = createSphere(device, {\n\t\t\t\t\tradius: 0.5\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI,\n\t\t\t\t\ty: Math.PI,\n\t\t\t\t\tz: Math.PI,\n\t\t\t\t\tuv: 1\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Invalid primitive type: \" + type);\n\t\t}\n\n\t\tmesh.incRefCount();\n\t\tprimData = {\n\t\t\tmesh: mesh,\n\t\t\tarea: area\n\t\t};\n\t\tshapePrimitives.push({\n\t\t\ttype: type,\n\t\t\tdevice: device,\n\t\t\tprimData: primData\n\t\t});\n\t}\n\n\treturn primData;\n}\n\nclass BasicMaterial extends Material {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.color = new Color(1, 1, 1, 1);\n\t\tthis.colorUniform = new Float32Array(4);\n\t\tthis.colorMap = null;\n\t\tthis.vertexColors = false;\n\t}\n\n\tclone() {\n\t\tvar clone = new BasicMaterial();\n\n\t\tMaterial.prototype._cloneInternal.call(this, clone);\n\n\t\tclone.color.copy(this.color);\n\t\tclone.colorMap = this.colorMap;\n\t\tclone.vertexColors = this.vertexColors;\n\t\treturn clone;\n\t}\n\n\tupdateUniforms() {\n\t\tthis.clearParameters();\n\t\tthis.colorUniform[0] = this.color.r;\n\t\tthis.colorUniform[1] = this.color.g;\n\t\tthis.colorUniform[2] = this.color.b;\n\t\tthis.colorUniform[3] = this.color.a;\n\t\tthis.setParameter('uColor', this.colorUniform);\n\n\t\tif (this.colorMap) {\n\t\t\tthis.setParameter('texture_diffuseMap', this.colorMap);\n\t\t}\n\t}\n\n\tupdateShader(device, scene, objDefs, staticLightList, pass, sortedLights) {\n\t\tvar options = {\n\t\t\tskin: objDefs && (objDefs & SHADERDEF_SKIN) !== 0,\n\t\t\tscreenSpace: objDefs && (objDefs & SHADERDEF_SCREENSPACE) !== 0,\n\t\t\tuseInstancing: objDefs && (objDefs & SHADERDEF_INSTANCING) !== 0,\n\t\t\tuseMorphPosition: objDefs && (objDefs & SHADERDEF_MORPH_POSITION) !== 0,\n\t\t\tuseMorphNormal: objDefs && (objDefs & SHADERDEF_MORPH_NORMAL) !== 0,\n\t\t\tuseMorphTextureBased: objDefs && (objDefs & SHADERDEF_MORPH_TEXTURE_BASED) !== 0,\n\t\t\tvertexColors: this.vertexColors,\n\t\t\tdiffuseMap: !!this.colorMap,\n\t\t\tpass: pass\n\t\t};\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('basic', options);\n\t}\n\n}\n\nclass Batch {\n\tconstructor(meshInstances, dynamic, batchGroupId) {\n\t\tthis.origMeshInstances = meshInstances;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis.meshInstance = null;\n\t\tthis.dynamic = dynamic;\n\t\tthis.batchGroupId = batchGroupId;\n\t}\n\n\tdestroy(scene, layers) {\n\t\tif (this.meshInstance) {\n\t\t\tthis.removeFromLayers(scene, layers);\n\t\t\tthis.meshInstance.destroy();\n\t\t}\n\t}\n\n\taddToLayers(scene, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tvar layer = scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances([this.meshInstance]);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFromLayers(scene, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tvar layer = scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeMeshInstances([this.meshInstance]);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateBoundingBox() {\n\t\tthis._aabb.copy(this.origMeshInstances[0].aabb);\n\n\t\tfor (var i = 1; i < this.origMeshInstances.length; i++) {\n\t\t\tthis._aabb.add(this.origMeshInstances[i].aabb);\n\t\t}\n\n\t\tthis.meshInstance.aabb = this._aabb;\n\t\tthis.meshInstance._aabbVer = 0;\n\t}\n\n}\n\nclass BatchGroup {\n\tconstructor(id, name, dynamic, maxAabbSize, layers = [LAYERID_WORLD]) {\n\t\tthis.dynamic = dynamic;\n\t\tthis.maxAabbSize = maxAabbSize;\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.layers = layers;\n\t\tthis._ui = false;\n\t\tthis._sprite = false;\n\t\tthis._obj = {\n\t\t\tmodel: [],\n\t\t\telement: [],\n\t\t\tsprite: [],\n\t\t\trender: []\n\t\t};\n\t}\n\n}\n\nBatchGroup.MODEL = 'model';\nBatchGroup.ELEMENT = 'element';\nBatchGroup.SPRITE = 'sprite';\nBatchGroup.RENDER = 'render';\n\nvar _invMatrix = new Mat4();\n\nclass SkinInstance {\n\tconstructor(skin) {\n\t\tthis._dirty = true;\n\t\tthis._rootBone = null;\n\t\tthis._skinUpdateIndex = -1;\n\t\tthis._updateBeforeCull = true;\n\n\t\tif (skin) {\n\t\t\tthis.initSkin(skin);\n\t\t}\n\t}\n\n\tinit(device, numBones) {\n\t\tif (device.supportsBoneTextures) {\n\t\t\tvar numPixels = numBones * 3;\n\t\t\tvar width = Math.ceil(Math.sqrt(numPixels));\n\t\t\twidth = math.roundUp(width, 3);\n\t\t\tvar height = Math.ceil(numPixels / width);\n\t\t\tthis.boneTexture = new Texture(device, {\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tformat: PIXELFORMAT_RGBA32F,\n\t\t\t\tmipmaps: false,\n\t\t\t\tminFilter: FILTER_NEAREST,\n\t\t\t\tmagFilter: FILTER_NEAREST\n\t\t\t});\n\t\t\tthis.boneTexture.name = 'skin';\n\t\t\tthis.matrixPalette = this.boneTexture.lock();\n\t\t} else {\n\t\t\tthis.matrixPalette = new Float32Array(numBones * 12);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif (this.boneTexture) {\n\t\t\tthis.boneTexture.destroy();\n\t\t\tthis.boneTexture = null;\n\t\t}\n\t}\n\n\tget rootBone() {\n\t\treturn this._rootBone;\n\t}\n\n\tset rootBone(rootBone) {\n\t\tthis._rootBone = rootBone;\n\t}\n\n\tresolve(rootBone, entity) {\n\t\tthis.rootBone = rootBone;\n\t\tconst skin = this.skin;\n\t\tconst bones = [];\n\n\t\tfor (let j = 0; j < skin.boneNames.length; j++) {\n\t\t\tvar boneName = skin.boneNames[j];\n\t\t\tvar bone = rootBone.findByName(boneName);\n\n\t\t\tif (!bone) {\n\t\t\t\tbone = entity;\n\t\t\t}\n\n\t\t\tbones.push(bone);\n\t\t}\n\n\t\tthis.bones = bones;\n\t}\n\n\tinitSkin(skin) {\n\t\tthis.skin = skin;\n\t\tthis.bones = [];\n\t\tvar numBones = skin.inverseBindPose.length;\n\t\tthis.init(skin.device, numBones);\n\t\tthis.matrices = [];\n\n\t\tfor (var i = 0; i < numBones; i++) {\n\t\t\tthis.matrices[i] = new Mat4();\n\t\t}\n\t}\n\n\tuploadBones(device) {\n\t\tif (device.supportsBoneTextures) {\n\t\t\tthis.boneTexture.lock();\n\t\t\tthis.boneTexture.unlock();\n\t\t}\n\t}\n\n\t_updateMatrices(rootNode, skinUpdateIndex) {\n\t\tif (this._skinUpdateIndex !== skinUpdateIndex) {\n\t\t\tthis._skinUpdateIndex = skinUpdateIndex;\n\n\t\t\t_invMatrix.copy(rootNode.getWorldTransform()).invert();\n\n\t\t\tfor (var i = this.bones.length - 1; i >= 0; i--) {\n\t\t\t\tthis.matrices[i].mulAffine2(_invMatrix, this.bones[i].getWorldTransform());\n\t\t\t\tthis.matrices[i].mulAffine2(this.matrices[i], this.skin.inverseBindPose[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMatrices(rootNode, skinUpdateIndex) {\n\t\tif (this._updateBeforeCull) {\n\t\t\tthis._updateMatrices(rootNode, skinUpdateIndex);\n\t\t}\n\t}\n\n\tupdateMatrixPalette(rootNode, skinUpdateIndex) {\n\t\tthis._updateMatrices(rootNode, skinUpdateIndex);\n\n\t\tvar pe;\n\t\tvar mp = this.matrixPalette;\n\t\tvar base;\n\t\tvar count = this.bones.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tpe = this.matrices[i].data;\n\t\t\tbase = i * 12;\n\t\t\tmp[base] = pe[0];\n\t\t\tmp[base + 1] = pe[4];\n\t\t\tmp[base + 2] = pe[8];\n\t\t\tmp[base + 3] = pe[12];\n\t\t\tmp[base + 4] = pe[1];\n\t\t\tmp[base + 5] = pe[5];\n\t\t\tmp[base + 6] = pe[9];\n\t\t\tmp[base + 7] = pe[13];\n\t\t\tmp[base + 8] = pe[2];\n\t\t\tmp[base + 9] = pe[6];\n\t\t\tmp[base + 10] = pe[10];\n\t\t\tmp[base + 11] = pe[14];\n\t\t}\n\n\t\tthis.uploadBones(this.skin.device);\n\t}\n\n}\n\nclass SkinBatchInstance extends SkinInstance {\n\tconstructor(device, nodes, rootNode) {\n\t\tsuper();\n\t\tvar numBones = nodes.length;\n\t\tthis.init(device, numBones);\n\t\tthis.device = device;\n\t\tthis.rootNode = rootNode;\n\t\tthis.bones = nodes;\n\t}\n\n\tupdateMatrices(rootNode, skinUpdateIndex) {}\n\n\tupdateMatrixPalette(rootNode, skinUpdateIndex) {\n\t\tvar pe;\n\t\tvar mp = this.matrixPalette;\n\t\tvar base;\n\t\tvar count = this.bones.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tpe = this.bones[i].getWorldTransform().data;\n\t\t\tbase = i * 12;\n\t\t\tmp[base] = pe[0];\n\t\t\tmp[base + 1] = pe[4];\n\t\t\tmp[base + 2] = pe[8];\n\t\t\tmp[base + 3] = pe[12];\n\t\t\tmp[base + 4] = pe[1];\n\t\t\tmp[base + 5] = pe[5];\n\t\t\tmp[base + 6] = pe[9];\n\t\t\tmp[base + 7] = pe[13];\n\t\t\tmp[base + 8] = pe[2];\n\t\t\tmp[base + 9] = pe[6];\n\t\t\tmp[base + 10] = pe[10];\n\t\t\tmp[base + 11] = pe[14];\n\t\t}\n\n\t\tthis.uploadBones(this.device);\n\t}\n\n}\n\nclass RefCountedCache {\n\tconstructor() {\n\t\tthis.cache = new Map();\n\t}\n\n\tdestroy() {\n\t\tthis.cache.forEach((refCount, object) => {\n\t\t\tobject.destroy();\n\t\t});\n\t\tthis.cache.clear();\n\t}\n\n\tincRef(object) {\n\t\tconst refCount = (this.cache.get(object) || 0) + 1;\n\t\tthis.cache.set(object, refCount);\n\t}\n\n\tdecRef(object) {\n\t\tif (object) {\n\t\t\tlet refCount = this.cache.get(object);\n\n\t\t\tif (refCount) {\n\t\t\t\trefCount--;\n\n\t\t\t\tif (refCount === 0) {\n\t\t\t\t\tthis.cache.delete(object);\n\t\t\t\t\tobject.destroy();\n\t\t\t\t} else {\n\t\t\t\t\tthis.cache.set(object, refCount);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nvar scaleCompensatePosTransform = new Mat4();\nvar scaleCompensatePos = new Vec3();\nvar scaleCompensateRot = new Quat();\nvar scaleCompensateRot2 = new Quat();\nvar scaleCompensateScale = new Vec3();\nvar scaleCompensateScaleForParent = new Vec3();\nvar tmpMat4 = new Mat4();\nvar tmpQuat = new Quat();\nvar position$1 = new Vec3();\nvar invParentWtm$1 = new Mat4();\nvar rotation = new Quat();\nvar invParentRot = new Quat();\nvar matrix = new Mat4();\nvar target = new Vec3();\nvar up = new Vec3();\n\nclass GraphNode extends EventHandler {\n\tconstructor(name) {\n\t\tsuper();\n\t\tthis.name = typeof name === \"string\" ? name : \"Untitled\";\n\t\tthis.tags = new Tags(this);\n\t\tthis._labels = {};\n\t\tthis.localPosition = new Vec3(0, 0, 0);\n\t\tthis.localRotation = new Quat(0, 0, 0, 1);\n\t\tthis.localScale = new Vec3(1, 1, 1);\n\t\tthis.localEulerAngles = new Vec3(0, 0, 0);\n\t\tthis.position = new Vec3(0, 0, 0);\n\t\tthis.rotation = new Quat(0, 0, 0, 1);\n\t\tthis.eulerAngles = new Vec3(0, 0, 0);\n\t\tthis._scale = null;\n\t\tthis.localTransform = new Mat4();\n\t\tthis._dirtyLocal = false;\n\t\tthis._aabbVer = 0;\n\t\tthis._frozen = false;\n\t\tthis.worldTransform = new Mat4();\n\t\tthis._dirtyWorld = false;\n\t\tthis.normalMatrix = new Mat3();\n\t\tthis._dirtyNormal = true;\n\t\tthis._right = null;\n\t\tthis._up = null;\n\t\tthis._forward = null;\n\t\tthis._parent = null;\n\t\tthis._children = [];\n\t\tthis._graphDepth = 0;\n\t\tthis._enabled = true;\n\t\tthis._enabledInHierarchy = false;\n\t\tthis.scaleCompensation = false;\n\t}\n\n\tget right() {\n\t\tif (!this._right) {\n\t\t\tthis._right = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getX(this._right).normalize();\n\t}\n\n\tget up() {\n\t\tif (!this._up) {\n\t\t\tthis._up = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getY(this._up).normalize();\n\t}\n\n\tget forward() {\n\t\tif (!this._forward) {\n\t\t\tthis._forward = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getZ(this._forward).normalize().mulScalar(-1);\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled && this._enabledInHierarchy;\n\t}\n\n\tset enabled(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tif (!this._parent || this._parent.enabled) this._notifyHierarchyStateChanged(this, enabled);\n\t\t}\n\t}\n\n\tget parent() {\n\t\treturn this._parent;\n\t}\n\n\tget path() {\n\t\tvar parent = this._parent;\n\n\t\tif (parent) {\n\t\t\tvar path = this.name;\n\n\t\t\twhile (parent && parent._parent) {\n\t\t\t\tpath = parent.name + \"/\" + path;\n\t\t\t\tparent = parent._parent;\n\t\t\t}\n\n\t\t\treturn path;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tget root() {\n\t\tvar parent = this._parent;\n\t\tif (!parent) return this;\n\n\t\twhile (parent._parent) parent = parent._parent;\n\n\t\treturn parent;\n\t}\n\n\tget children() {\n\t\treturn this._children;\n\t}\n\n\tget graphDepth() {\n\t\treturn this._graphDepth;\n\t}\n\n\t_notifyHierarchyStateChanged(node, enabled) {\n\t\tnode._onHierarchyStateChanged(enabled);\n\n\t\tvar c = node._children;\n\n\t\tfor (var i = 0, len = c.length; i < len; i++) {\n\t\t\tif (c[i]._enabled) this._notifyHierarchyStateChanged(c[i], enabled);\n\t\t}\n\t}\n\n\t_onHierarchyStateChanged(enabled) {\n\t\tthis._enabledInHierarchy = enabled;\n\t\tif (enabled && !this._frozen) this._unfreezeParentToRoot();\n\t}\n\n\t_cloneInternal(clone) {\n\t\tclone.name = this.name;\n\t\tvar tags = this.tags._list;\n\t\tclone.tags.clear();\n\n\t\tfor (var i = 0; i < tags.length; i++) clone.tags.add(tags[i]);\n\n\t\tclone._labels = Object.assign({}, this._labels);\n\t\tclone.localPosition.copy(this.localPosition);\n\t\tclone.localRotation.copy(this.localRotation);\n\t\tclone.localScale.copy(this.localScale);\n\t\tclone.localEulerAngles.copy(this.localEulerAngles);\n\t\tclone.position.copy(this.position);\n\t\tclone.rotation.copy(this.rotation);\n\t\tclone.eulerAngles.copy(this.eulerAngles);\n\t\tclone.localTransform.copy(this.localTransform);\n\t\tclone._dirtyLocal = this._dirtyLocal;\n\t\tclone.worldTransform.copy(this.worldTransform);\n\t\tclone._dirtyWorld = this._dirtyWorld;\n\t\tclone._dirtyNormal = this._dirtyNormal;\n\t\tclone._aabbVer = this._aabbVer + 1;\n\t\tclone._enabled = this._enabled;\n\t\tclone.scaleCompensation = this.scaleCompensation;\n\t\tclone._enabledInHierarchy = false;\n\t}\n\n\tclone() {\n\t\tvar clone = new GraphNode();\n\n\t\tthis._cloneInternal(clone);\n\n\t\treturn clone;\n\t}\n\n\tcopy(source) {\n\t\tsource._cloneInternal(this);\n\n\t\treturn this;\n\t}\n\n\tfind(attr, value) {\n\t\tvar result,\n\t\t\t\tresults = [];\n\t\tvar len = this._children.length;\n\t\tvar i, descendants;\n\n\t\tif (attr instanceof Function) {\n\t\t\tvar fn = attr;\n\t\t\tresult = fn(this);\n\t\t\tif (result) results.push(this);\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tdescendants = this._children[i].find(fn);\n\t\t\t\tif (descendants.length) results = results.concat(descendants);\n\t\t\t}\n\t\t} else {\n\t\t\tvar testValue;\n\n\t\t\tif (this[attr]) {\n\t\t\t\tif (this[attr] instanceof Function) {\n\t\t\t\t\ttestValue = this[attr]();\n\t\t\t\t} else {\n\t\t\t\t\ttestValue = this[attr];\n\t\t\t\t}\n\n\t\t\t\tif (testValue === value) results.push(this);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tdescendants = this._children[i].find(attr, value);\n\t\t\t\tif (descendants.length) results = results.concat(descendants);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tfindOne(attr, value) {\n\t\tvar i;\n\t\tvar len = this._children.length;\n\t\tvar result = null;\n\n\t\tif (attr instanceof Function) {\n\t\t\tvar fn = attr;\n\t\t\tresult = fn(this);\n\t\t\tif (result) return this;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tresult = this._children[i].findOne(fn);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} else {\n\t\t\tvar testValue;\n\n\t\t\tif (this[attr]) {\n\t\t\t\tif (this[attr] instanceof Function) {\n\t\t\t\t\ttestValue = this[attr]();\n\t\t\t\t} else {\n\t\t\t\t\ttestValue = this[attr];\n\t\t\t\t}\n\n\t\t\t\tif (testValue === value) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tresult = this._children[i].findOne(attr, value);\n\t\t\t\tif (result !== null) return result;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByTag() {\n\t\tvar tags = this.tags._processArguments(arguments);\n\n\t\treturn this._findByTag(tags);\n\t}\n\n\t_findByTag(tags) {\n\t\tvar result = [];\n\t\tvar i,\n\t\t\t\tlen = this._children.length;\n\t\tvar descendants;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (this._children[i].tags._has(tags)) result.push(this._children[i]);\n\t\t\tdescendants = this._children[i]._findByTag(tags);\n\t\t\tif (descendants.length) result = result.concat(descendants);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfindByName(name) {\n\t\tif (this.name === name) return this;\n\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tvar found = this._children[i].findByName(name);\n\n\t\t\tif (found !== null) return found;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByPath(path) {\n\t\tvar parts;\n\n\t\tif (Array.isArray(path)) {\n\t\t\tif (path.length === 0) return null;\n\t\t\tparts = path;\n\t\t} else {\n\t\t\tparts = path.split('/');\n\t\t}\n\n\t\tvar currentParent = this;\n\t\tvar result = null;\n\n\t\tfor (var i = 0, imax = parts.length; i < imax && currentParent; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tresult = null;\n\t\t\tvar children = currentParent._children;\n\n\t\t\tfor (var j = 0, jmax = children.length; j < jmax; j++) {\n\t\t\t\tif (children[j].name === part) {\n\t\t\t\t\tresult = children[j];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentParent = result;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tforEach(callback, thisArg) {\n\t\tcallback.call(thisArg, this);\n\t\tvar children = this._children;\n\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tchildren[i].forEach(callback, thisArg);\n\t\t}\n\t}\n\n\tisDescendantOf(node) {\n\t\tvar parent = this._parent;\n\n\t\twhile (parent) {\n\t\t\tif (parent === node) return true;\n\t\t\tparent = parent._parent;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisAncestorOf(node) {\n\t\treturn node.isDescendantOf(this);\n\t}\n\n\tgetEulerAngles() {\n\t\tthis.getWorldTransform().getEulerAngles(this.eulerAngles);\n\t\treturn this.eulerAngles;\n\t}\n\n\tgetLocalEulerAngles() {\n\t\tthis.localRotation.getEulerAngles(this.localEulerAngles);\n\t\treturn this.localEulerAngles;\n\t}\n\n\tgetLocalPosition() {\n\t\treturn this.localPosition;\n\t}\n\n\tgetLocalRotation() {\n\t\treturn this.localRotation;\n\t}\n\n\tgetLocalScale() {\n\t\treturn this.localScale;\n\t}\n\n\tgetLocalTransform() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\treturn this.localTransform;\n\t}\n\n\tgetPosition() {\n\t\tthis.getWorldTransform().getTranslation(this.position);\n\t\treturn this.position;\n\t}\n\n\tgetRotation() {\n\t\tthis.rotation.setFromMat4(this.getWorldTransform());\n\t\treturn this.rotation;\n\t}\n\n\tgetScale() {\n\t\tif (!this._scale) {\n\t\t\tthis._scale = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getScale(this._scale);\n\t}\n\n\tgetWorldTransform() {\n\t\tif (!this._dirtyLocal && !this._dirtyWorld) return this.worldTransform;\n\t\tif (this._parent) this._parent.getWorldTransform();\n\n\t\tthis._sync();\n\n\t\treturn this.worldTransform;\n\t}\n\n\treparent(parent, index) {\n\t\tvar current = this._parent;\n\t\tif (current) current.removeChild(this);\n\n\t\tif (parent) {\n\t\t\tif (index >= 0) {\n\t\t\t\tparent.insertChild(this, index);\n\t\t\t} else {\n\t\t\t\tparent.addChild(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLocalEulerAngles(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localRotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\tthis.localRotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localPosition.copy(x);\n\t\t} else {\n\t\t\tthis.localPosition.set(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalRotation(x, y, z, w) {\n\t\tif (x instanceof Quat) {\n\t\t\tthis.localRotation.copy(x);\n\t\t} else {\n\t\t\tthis.localRotation.set(x, y, z, w);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalScale(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localScale.copy(x);\n\t\t} else {\n\t\t\tthis.localScale.set(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_dirtifyLocal() {\n\t\tif (!this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = true;\n\t\t\tif (!this._dirtyWorld) this._dirtifyWorld();\n\t\t}\n\t}\n\n\t_unfreezeParentToRoot() {\n\t\tvar p = this._parent;\n\n\t\twhile (p) {\n\t\t\tp._frozen = false;\n\t\t\tp = p._parent;\n\t\t}\n\t}\n\n\t_dirtifyWorld() {\n\t\tif (!this._dirtyWorld) this._unfreezeParentToRoot();\n\n\t\tthis._dirtifyWorldInternal();\n\t}\n\n\t_dirtifyWorldInternal() {\n\t\tif (!this._dirtyWorld) {\n\t\t\tthis._frozen = false;\n\t\t\tthis._dirtyWorld = true;\n\n\t\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\t\tif (!this._children[i]._dirtyWorld) this._children[i]._dirtifyWorldInternal();\n\t\t\t}\n\t\t}\n\n\t\tthis._dirtyNormal = true;\n\t\tthis._aabbVer++;\n\t}\n\n\tsetPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localPosition.copy(position$1);\n\t\t} else {\n\t\t\tinvParentWtm$1.copy(this._parent.getWorldTransform()).invert();\n\t\t\tinvParentWtm$1.transformPoint(position$1, this.localPosition);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetRotation(x, y, z, w) {\n\t\tif (x instanceof Quat) {\n\t\t\trotation.copy(x);\n\t\t} else {\n\t\t\trotation.set(x, y, z, w);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localRotation.copy(rotation);\n\t\t} else {\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\tthis.localRotation.copy(invParentRot).mul(rotation);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetEulerAngles(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localRotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\tthis.localRotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (this._parent !== null) {\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\tthis.localRotation.mul2(invParentRot, this.localRotation);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\taddChild(node) {\n\t\tif (node._parent !== null) throw new Error(\"GraphNode is already parented\");\n\n\t\tthis._children.push(node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\taddChildAndSaveTransform(node) {\n\t\tvar wPos = node.getPosition();\n\t\tvar wRot = node.getRotation();\n\t\tvar current = node._parent;\n\t\tif (current) current.removeChild(node);\n\t\tnode.setPosition(tmpMat4.copy(this.worldTransform).invert().transformPoint(wPos));\n\t\tnode.setRotation(tmpQuat.copy(this.getRotation()).invert().mul(wRot));\n\n\t\tthis._children.push(node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\tinsertChild(node, index) {\n\t\tif (node._parent !== null) throw new Error(\"GraphNode is already parented\");\n\n\t\tthis._children.splice(index, 0, node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\t_onInsertChild(node) {\n\t\tnode._parent = this;\n\t\tvar enabledInHierarchy = node._enabled && this.enabled;\n\n\t\tif (node._enabledInHierarchy !== enabledInHierarchy) {\n\t\t\tnode._enabledInHierarchy = enabledInHierarchy;\n\n\t\t\tnode._notifyHierarchyStateChanged(node, enabledInHierarchy);\n\t\t}\n\n\t\tnode._updateGraphDepth();\n\n\t\tnode._dirtifyWorld();\n\n\t\tif (this._frozen) node._unfreezeParentToRoot();\n\t\tif (node.fire) node.fire('insert', this);\n\t\tif (this.fire) this.fire('childinsert', node);\n\t}\n\n\t_updateGraphDepth() {\n\t\tif (this._parent) {\n\t\t\tthis._graphDepth = this._parent._graphDepth + 1;\n\t\t} else {\n\t\t\tthis._graphDepth = 0;\n\t\t}\n\n\t\tfor (var i = 0, len = this._children.length; i < len; i++) {\n\t\t\tthis._children[i]._updateGraphDepth();\n\t\t}\n\t}\n\n\tremoveChild(child) {\n\t\tvar i;\n\t\tvar length = this._children.length;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\tif (this._children[i] === child) {\n\t\t\t\tthis._children.splice(i, 1);\n\n\t\t\t\tchild._parent = null;\n\t\t\t\tif (child.fire) child.fire('remove', this);\n\t\t\t\tif (this.fire) this.fire('childremove', child);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t_sync() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\tif (this._dirtyWorld) {\n\t\t\tif (this._parent === null) {\n\t\t\t\tthis.worldTransform.copy(this.localTransform);\n\t\t\t} else {\n\t\t\t\tif (this.scaleCompensation) {\n\t\t\t\t\tvar parentWorldScale;\n\t\t\t\t\tvar parent = this._parent;\n\t\t\t\t\tvar scale = this.localScale;\n\t\t\t\t\tvar parentToUseScaleFrom = parent;\n\n\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\twhile (parentToUseScaleFrom && parentToUseScaleFrom.scaleCompensation) {\n\t\t\t\t\t\t\tparentToUseScaleFrom = parentToUseScaleFrom._parent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\t\tparentToUseScaleFrom = parentToUseScaleFrom._parent;\n\n\t\t\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\t\t\tparentWorldScale = parentToUseScaleFrom.worldTransform.getScale();\n\t\t\t\t\t\t\t\tscaleCompensateScale.mul2(parentWorldScale, this.localScale);\n\t\t\t\t\t\t\t\tscale = scaleCompensateScale;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tscaleCompensateRot2.setFromMat4(parent.worldTransform);\n\t\t\t\t\tscaleCompensateRot.mul2(scaleCompensateRot2, this.localRotation);\n\t\t\t\t\tvar tmatrix = parent.worldTransform;\n\n\t\t\t\t\tif (parent.scaleCompensation) {\n\t\t\t\t\t\tscaleCompensateScaleForParent.mul2(parentWorldScale, parent.getLocalScale());\n\t\t\t\t\t\tscaleCompensatePosTransform.setTRS(parent.worldTransform.getTranslation(scaleCompensatePos), scaleCompensateRot2, scaleCompensateScaleForParent);\n\t\t\t\t\t\ttmatrix = scaleCompensatePosTransform;\n\t\t\t\t\t}\n\n\t\t\t\t\ttmatrix.transformPoint(this.localPosition, scaleCompensatePos);\n\t\t\t\t\tthis.worldTransform.setTRS(scaleCompensatePos, scaleCompensateRot, scale);\n\t\t\t\t} else {\n\t\t\t\t\tthis.worldTransform.mulAffine2(this._parent.worldTransform, this.localTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyWorld = false;\n\t\t}\n\t}\n\n\tsyncHierarchy() {\n\t\tif (!this._enabled) return;\n\t\tif (this._frozen) return;\n\t\tthis._frozen = true;\n\n\t\tif (this._dirtyLocal || this._dirtyWorld) {\n\t\t\tthis._sync();\n\t\t}\n\n\t\tvar children = this._children;\n\n\t\tfor (var i = 0, len = children.length; i < len; i++) {\n\t\t\tchildren[i].syncHierarchy();\n\t\t}\n\t}\n\n\tlookAt(x, y, z, ux = 0, uy = 1, uz = 0) {\n\t\tif (x instanceof Vec3) {\n\t\t\ttarget.copy(x);\n\n\t\t\tif (y instanceof Vec3) {\n\t\t\t\tup.copy(y);\n\t\t\t} else {\n\t\t\t\tup.copy(Vec3.UP);\n\t\t\t}\n\t\t} else if (z === undefined) {\n\t\t\treturn;\n\t\t} else {\n\t\t\ttarget.set(x, y, z);\n\t\t\tup.set(ux, uy, uz);\n\t\t}\n\n\t\tmatrix.setLookAt(this.getPosition(), target, up);\n\t\trotation.setFromMat4(matrix);\n\t\tthis.setRotation(rotation);\n\t}\n\n\ttranslate(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tposition$1.add(this.getPosition());\n\t\tthis.setPosition(position$1);\n\t}\n\n\ttranslateLocal(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tthis.localRotation.transformVector(position$1, position$1);\n\t\tthis.localPosition.add(position$1);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\trotate(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\trotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\trotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localRotation.mul2(rotation, this.localRotation);\n\t\t} else {\n\t\t\tvar rot = this.getRotation();\n\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\trotation.mul2(invParentRot, rotation);\n\t\t\tthis.localRotation.mul2(rotation, rot);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\trotateLocal(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\trotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\trotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tthis.localRotation.mul(rotation);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n}\n\nvar _tmpAabb = new BoundingBox();\n\nvar _tempBoneAabb = new BoundingBox();\n\nvar _tempSphere = new BoundingSphere();\n\nvar _meshSet = new Set();\n\nclass InstancingData {\n\tconstructor(numObjects) {\n\t\tthis.count = numObjects;\n\t\tthis.vertexBuffer = null;\n\t}\n\n}\n\nclass Command {\n\tconstructor(layer, blendType, command) {\n\t\tthis._key = [];\n\t\tthis._key[SORTKEY_FORWARD] = getKey(layer, blendType, true, 0);\n\t\tthis.command = command;\n\t}\n\n\tget key() {\n\t\treturn this._key[SORTKEY_FORWARD];\n\t}\n\n\tset key(val) {\n\t\tthis._key[SORTKEY_FORWARD] = val;\n\t}\n\n}\n\nclass MeshInstance {\n\tconstructor(mesh, material, node = null) {\n\t\tif (mesh instanceof GraphNode) {\n\t\t\tconst temp = mesh;\n\t\t\tmesh = material;\n\t\t\tmaterial = node;\n\t\t\tnode = temp;\n\t\t}\n\n\t\tthis._key = [0, 0];\n\t\tthis._shader = [null, null, null];\n\t\tthis.isStatic = false;\n\t\tthis._staticLightList = null;\n\t\tthis._staticSource = null;\n\t\tthis.node = node;\n\t\tthis._mesh = mesh;\n\t\tmesh.incRefCount();\n\t\tthis.material = material;\n\t\tthis._shaderDefs = MASK_DYNAMIC << 16;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasUv0 ? SHADERDEF_UV0 : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasUv1 ? SHADERDEF_UV1 : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasColor ? SHADERDEF_VCOLOR : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasTangents ? SHADERDEF_TANGENTS : 0;\n\t\tthis._lightHash = 0;\n\t\tthis.visible = true;\n\t\tthis.layer = LAYER_WORLD;\n\t\tthis._renderStyle = RENDERSTYLE_SOLID;\n\t\tthis.castShadow = false;\n\t\tthis._receiveShadow = true;\n\t\tthis._screenSpace = false;\n\t\tthis._noDepthDrawGl1 = false;\n\t\tthis.cull = true;\n\t\tthis.pick = true;\n\t\tthis._updateAabb = true;\n\t\tthis._updateAabbFunc = null;\n\t\tthis._calculateSortDistance = null;\n\t\tthis.updateKey();\n\t\tthis._skinInstance = null;\n\t\tthis._morphInstance = null;\n\t\tthis.instancingData = null;\n\t\tthis._customAabb = null;\n\t\tthis.aabb = new BoundingBox();\n\t\tthis._aabbVer = -1;\n\t\tthis.drawOrder = 0;\n\t\tthis.visibleThisFrame = 0;\n\t\tthis.isVisibleFunc = null;\n\t\tthis.parameters = {};\n\t\tthis.stencilFront = null;\n\t\tthis.stencilBack = null;\n\t\tthis.flipFaces = false;\n\t}\n\n\tstatic incRefLightmap(texture) {\n\t\tthis._lightmapCache.incRef(texture);\n\t}\n\n\tstatic decRefLightmap(texture) {\n\t\tthis._lightmapCache.decRef(texture);\n\t}\n\n\tstatic destroyLightmapCache() {\n\t\tthis._lightmapCache.destroy();\n\t}\n\n\tget renderStyle() {\n\t\treturn this._renderStyle;\n\t}\n\n\tset renderStyle(renderStyle) {\n\t\tthis._renderStyle = renderStyle;\n\t\tthis.mesh.prepareRenderState(renderStyle);\n\t}\n\n\tstatic _prepareRenderStyleForArray(meshInstances, renderStyle) {\n\t\tif (meshInstances) {\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i]._renderStyle = renderStyle;\n\t\t\t\tconst mesh = meshInstances[i].mesh;\n\n\t\t\t\tif (!_meshSet.has(mesh)) {\n\t\t\t\t\t_meshSet.add(mesh);\n\n\t\t\t\t\tmesh.prepareRenderState(renderStyle);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_meshSet.clear();\n\t\t}\n\t}\n\n\tget mesh() {\n\t\treturn this._mesh;\n\t}\n\n\tset mesh(mesh) {\n\t\tif (mesh === this._mesh) return;\n\n\t\tif (this._mesh) {\n\t\t\tthis._mesh.decRefCount();\n\t\t}\n\n\t\tthis._mesh = mesh;\n\n\t\tif (mesh) {\n\t\t\tmesh.incRefCount();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (!this._updateAabb) {\n\t\t\treturn this._aabb;\n\t\t}\n\n\t\tif (this._updateAabbFunc) {\n\t\t\treturn this._updateAabbFunc(this._aabb);\n\t\t}\n\n\t\tlet localAabb = this._customAabb;\n\t\tlet toWorldSpace = !!localAabb;\n\n\t\tif (!localAabb) {\n\t\t\tlocalAabb = _tmpAabb;\n\n\t\t\tif (this.skinInstance) {\n\t\t\t\tif (!this.mesh.boneAabb) {\n\t\t\t\t\tconst morphTargets = this._morphInstance ? this._morphInstance.morph._targets : null;\n\n\t\t\t\t\tthis.mesh._initBoneAabbs(morphTargets);\n\t\t\t\t}\n\n\t\t\t\tconst boneUsed = this.mesh.boneUsed;\n\t\t\t\tlet first = true;\n\n\t\t\t\tfor (let i = 0; i < this.mesh.boneAabb.length; i++) {\n\t\t\t\t\tif (boneUsed[i]) {\n\t\t\t\t\t\t_tempBoneAabb.setFromTransformedAabb(this.mesh.boneAabb[i], this.skinInstance.matrices[i]);\n\n\t\t\t\t\t\tif (first) {\n\t\t\t\t\t\t\tfirst = false;\n\t\t\t\t\t\t\tlocalAabb.center.copy(_tempBoneAabb.center);\n\t\t\t\t\t\t\tlocalAabb.halfExtents.copy(_tempBoneAabb.halfExtents);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlocalAabb.add(_tempBoneAabb);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoWorldSpace = true;\n\t\t\t} else if (this.node._aabbVer !== this._aabbVer) {\n\t\t\t\tif (this.mesh) {\n\t\t\t\t\tlocalAabb.center.copy(this.mesh.aabb.center);\n\t\t\t\t\tlocalAabb.halfExtents.copy(this.mesh.aabb.halfExtents);\n\t\t\t\t} else {\n\t\t\t\t\tlocalAabb.center.set(0, 0, 0);\n\t\t\t\t\tlocalAabb.halfExtents.set(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif (this.mesh && this.mesh.morph) {\n\t\t\t\t\tlocalAabb._expand(this.mesh.morph.aabb.getMin(), this.mesh.morph.aabb.getMax());\n\t\t\t\t}\n\n\t\t\t\ttoWorldSpace = true;\n\t\t\t\tthis._aabbVer = this.node._aabbVer;\n\t\t\t}\n\t\t}\n\n\t\tif (toWorldSpace) {\n\t\t\tthis._aabb.setFromTransformedAabb(localAabb, this.node.getWorldTransform());\n\t\t}\n\n\t\treturn this._aabb;\n\t}\n\n\tset aabb(aabb) {\n\t\tthis._aabb = aabb;\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(material) {\n\t\tfor (let i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\n\t\tvar prevMat = this._material;\n\n\t\tif (prevMat) {\n\t\t\tprevMat.removeMeshInstanceRef(this);\n\t\t}\n\n\t\tthis._material = material;\n\n\t\tif (this._material) {\n\t\t\tthis._material.addMeshInstanceRef(this);\n\n\t\t\tthis.updateKey();\n\t\t\tvar prevBlend = prevMat && prevMat.blendType !== BLEND_NONE;\n\t\t\tvar thisBlend = this._material.blendType !== BLEND_NONE;\n\n\t\t\tif (prevBlend !== thisBlend) {\n\t\t\t\tvar scene = this._material._scene;\n\t\t\t\tif (!scene && prevMat && prevMat._scene) scene = prevMat._scene;\n\n\t\t\t\tif (scene) {\n\t\t\t\t\tscene.layers._dirtyBlend = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._material._dirtyBlend = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget layer() {\n\t\treturn this._layer;\n\t}\n\n\tset layer(layer) {\n\t\tthis._layer = layer;\n\t\tthis.updateKey();\n\t}\n\n\tget calculateSortDistance() {\n\t\treturn this._calculateSortDistance;\n\t}\n\n\tset calculateSortDistance(calculateSortDistance) {\n\t\tthis._calculateSortDistance = calculateSortDistance;\n\t}\n\n\tget receiveShadow() {\n\t\treturn this._receiveShadow;\n\t}\n\n\tset receiveShadow(val) {\n\t\tthis._receiveShadow = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs & ~SHADERDEF_NOSHADOW : this._shaderDefs | SHADERDEF_NOSHADOW;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t\tthis._shader[SHADER_FORWARDHDR] = null;\n\t}\n\n\tget skinInstance() {\n\t\treturn this._skinInstance;\n\t}\n\n\tset skinInstance(val) {\n\t\tthis._skinInstance = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs | SHADERDEF_SKIN : this._shaderDefs & ~SHADERDEF_SKIN;\n\n\t\tfor (var i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\n\t\tthis._setupSkinUpdate();\n\t}\n\n\tget morphInstance() {\n\t\treturn this._morphInstance;\n\t}\n\n\tset morphInstance(val) {\n\t\tthis._morphInstance = val;\n\n\t\tif (this._morphInstance) {\n\t\t\tthis._morphInstance.meshInstance = this;\n\t\t}\n\n\t\tthis._shaderDefs = val && val.morph.useTextureMorph ? this._shaderDefs | SHADERDEF_MORPH_TEXTURE_BASED : this._shaderDefs & ~SHADERDEF_MORPH_TEXTURE_BASED;\n\t\tthis._shaderDefs = val && val.morph.morphPositions ? this._shaderDefs | SHADERDEF_MORPH_POSITION : this._shaderDefs & ~SHADERDEF_MORPH_POSITION;\n\t\tthis._shaderDefs = val && val.morph.morphNormals ? this._shaderDefs | SHADERDEF_MORPH_NORMAL : this._shaderDefs & ~SHADERDEF_MORPH_NORMAL;\n\n\t\tfor (var i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\t}\n\n\tget screenSpace() {\n\t\treturn this._screenSpace;\n\t}\n\n\tset screenSpace(val) {\n\t\tthis._screenSpace = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs | SHADERDEF_SCREENSPACE : this._shaderDefs & ~SHADERDEF_SCREENSPACE;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t}\n\n\tget key() {\n\t\treturn this._key[SORTKEY_FORWARD];\n\t}\n\n\tset key(val) {\n\t\tthis._key[SORTKEY_FORWARD] = val;\n\t}\n\n\tget mask() {\n\t\treturn this._shaderDefs >> 16;\n\t}\n\n\tset mask(val) {\n\t\tvar toggles = this._shaderDefs & 0x0000FFFF;\n\t\tthis._shaderDefs = toggles | val << 16;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t\tthis._shader[SHADER_FORWARDHDR] = null;\n\t}\n\n\tget instancingCount() {\n\t\treturn this.instancingData ? this.instancingData.count : 0;\n\t}\n\n\tset instancingCount(value) {\n\t\tif (this.instancingData) this.instancingData.count = value;\n\t}\n\n\tdestroy() {\n\t\tconst mesh = this.mesh;\n\n\t\tif (mesh) {\n\t\t\tthis.mesh = null;\n\n\t\t\tif (mesh.getRefCount() < 1) {\n\t\t\t\tmesh.destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], null);\n\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], null);\n\n\t\tif (this._skinInstance) {\n\t\t\tthis._skinInstance.destroy();\n\n\t\t\tthis._skinInstance = null;\n\t\t}\n\n\t\tif (this.morphInstance) {\n\t\t\tthis.morphInstance.destroy();\n\t\t\tthis.morphInstance = null;\n\t\t}\n\n\t\tthis.material = null;\n\t}\n\n\tsyncAabb() {}\n\n\t_isVisible(camera) {\n\t\tif (this.visible) {\n\t\t\tif (this.isVisibleFunc) {\n\t\t\t\treturn this.isVisibleFunc(camera);\n\t\t\t}\n\n\t\t\t_tempSphere.center = this.aabb.center;\n\t\t\t_tempSphere.radius = this._aabb.halfExtents.length();\n\t\t\treturn camera.frustum.containsSphere(_tempSphere);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tupdateKey() {\n\t\tvar material = this.material;\n\t\tthis._key[SORTKEY_FORWARD] = getKey(this.layer, material.alphaToCoverage || material.alphaTest ? BLEND_NORMAL : material.blendType, false, material.id);\n\t}\n\n\tsetInstancing(vertexBuffer) {\n\t\tif (vertexBuffer) {\n\t\t\tthis.instancingData = new InstancingData(vertexBuffer.numVertices);\n\t\t\tthis.instancingData.vertexBuffer = vertexBuffer;\n\t\t\tvertexBuffer.instancing = true;\n\t\t\tthis.cull = false;\n\t\t} else {\n\t\t\tthis.instancingData = null;\n\t\t\tthis.cull = true;\n\t\t}\n\t}\n\n\tclearParameters() {\n\t\tthis.parameters = {};\n\t}\n\n\tgetParameters() {\n\t\treturn this.parameters;\n\t}\n\n\tgetParameter(name) {\n\t\treturn this.parameters[name];\n\t}\n\n\tsetParameter(name, data, passFlags = -262141) {\n\t\tif (data === undefined && typeof name === 'object') {\n\t\t\tvar uniformObject = name;\n\n\t\t\tif (uniformObject.length) {\n\t\t\t\tfor (var i = 0; i < uniformObject.length; i++) {\n\t\t\t\t\tthis.setParameter(uniformObject[i]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tname = uniformObject.name;\n\t\t\tdata = uniformObject.value;\n\t\t}\n\n\t\tvar param = this.parameters[name];\n\n\t\tif (param) {\n\t\t\tparam.data = data;\n\t\t\tparam.passFlags = passFlags;\n\t\t} else {\n\t\t\tthis.parameters[name] = {\n\t\t\t\tscopeId: null,\n\t\t\t\tdata: data,\n\t\t\t\tpassFlags: passFlags\n\t\t\t};\n\t\t}\n\t}\n\n\tsetRealtimeLightmap(name, texture) {\n\t\tconst old = this.getParameter(name);\n\t\tif (old === texture) return;\n\n\t\tif (old) {\n\t\t\tMeshInstance.decRefLightmap(old.data);\n\t\t}\n\n\t\tif (texture) {\n\t\t\tMeshInstance.incRefLightmap(texture);\n\t\t\tthis.setParameter(name, texture);\n\t\t} else {\n\t\t\tthis.deleteParameter(name);\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (this.parameters[name]) {\n\t\t\tdelete this.parameters[name];\n\t\t}\n\t}\n\n\tsetParameters(device, passFlag) {\n\t\tvar parameter,\n\t\t\t\tparameters = this.parameters;\n\n\t\tfor (var paramName in parameters) {\n\t\t\tparameter = parameters[paramName];\n\n\t\t\tif (parameter.passFlags & passFlag) {\n\t\t\t\tif (!parameter.scopeId) {\n\t\t\t\t\tparameter.scopeId = device.scope.resolve(paramName);\n\t\t\t\t}\n\n\t\t\t\tparameter.scopeId.setValue(parameter.data);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLightmapped(value) {\n\t\tif (value) {\n\t\t\tthis.mask = (this.mask | MASK_BAKED) & ~(MASK_DYNAMIC | MASK_LIGHTMAP);\n\t\t} else {\n\t\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], null);\n\t\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], null);\n\t\t\tthis._shaderDefs &= ~(SHADERDEF_LM | SHADERDEF_DIRLM);\n\t\t\tthis.mask = (this.mask | MASK_DYNAMIC) & ~(MASK_BAKED | MASK_LIGHTMAP);\n\t\t}\n\t}\n\n\tsetCustomAabb(aabb) {\n\t\tif (aabb) {\n\t\t\tif (this._customAabb) {\n\t\t\t\tthis._customAabb.copy(aabb);\n\t\t\t} else {\n\t\t\t\tthis._customAabb = aabb.clone();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._customAabb = null;\n\t\t\tthis._aabbVer = -1;\n\t\t}\n\n\t\tthis._setupSkinUpdate();\n\t}\n\n\t_setupSkinUpdate() {\n\t\tif (this._skinInstance) {\n\t\t\tthis._skinInstance._updateBeforeCull = !this._customAabb;\n\t\t}\n\t}\n\n}\n\nMeshInstance.lightmapParamNames = [\"texture_lightMap\", \"texture_dirLightMap\"];\nMeshInstance._lightmapCache = new RefCountedCache();\n\nfunction getKey(layer, blendType, isCommand, materialId) {\n\treturn (layer & 0x0f) << 27 | (blendType === BLEND_NONE ? 1 : 0) << 26 | (isCommand ? 1 : 0) << 25 | (materialId & 0x1ffffff) << 0;\n}\n\nfunction paramsIdentical(a, b) {\n\tif (a && !b) return false;\n\tif (!a && b) return false;\n\ta = a.data;\n\tb = b.data;\n\tif (a === b) return true;\n\n\tif (a instanceof Float32Array && b instanceof Float32Array) {\n\t\tif (a.length !== b.length) return false;\n\n\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\tif (a[i] !== b[i]) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction equalParamSets(params1, params2) {\n\tvar param;\n\n\tfor (param in params1) {\n\t\tif (params1.hasOwnProperty(param) && !paramsIdentical(params1[param], params2[param])) return false;\n\t}\n\n\tfor (param in params2) {\n\t\tif (params2.hasOwnProperty(param) && !paramsIdentical(params2[param], params1[param])) return false;\n\t}\n\n\treturn true;\n}\n\nfunction equalLightLists(lightList1, lightList2) {\n\tvar k;\n\n\tfor (k = 0; k < lightList1.length; k++) {\n\t\tif (lightList2.indexOf(lightList1[k]) < 0) return false;\n\t}\n\n\tfor (k = 0; k < lightList2.length; k++) {\n\t\tif (lightList1.indexOf(lightList2[k]) < 0) return false;\n\t}\n\n\treturn true;\n}\n\nvar mat3 = new Mat3();\nvar worldMatX$1 = new Vec3();\nvar worldMatY$1 = new Vec3();\nvar worldMatZ$1 = new Vec3();\n\nfunction getScaleSign(mi) {\n\tvar wt = mi.node.worldTransform;\n\twt.getX(worldMatX$1);\n\twt.getY(worldMatY$1);\n\twt.getZ(worldMatZ$1);\n\tworldMatX$1.cross(worldMatX$1, worldMatY$1);\n\treturn worldMatX$1.dot(worldMatZ$1) >= 0 ? 1 : -1;\n}\n\nclass BatchManager {\n\tconstructor(device, root, scene) {\n\t\tthis.device = device;\n\t\tthis.rootNode = root;\n\t\tthis.scene = scene;\n\t\tthis._init = false;\n\t\tthis._batchGroups = {};\n\t\tthis._batchGroupCounter = 0;\n\t\tthis._batchList = [];\n\t\tthis._dirtyGroups = [];\n\t}\n\n\tdestroy() {\n\t\tthis.device = null;\n\t\tthis.rootNode = null;\n\t\tthis.scene = null;\n\t\tthis._batchGroups = {};\n\t\tthis._batchList = [];\n\t\tthis._dirtyGroups = [];\n\t}\n\n\taddGroup(name, dynamic, maxAabbSize, id, layers) {\n\t\tif (id === undefined) {\n\t\t\tid = this._batchGroupCounter;\n\t\t\tthis._batchGroupCounter++;\n\t\t}\n\n\t\tif (this._batchGroups[id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar group;\n\t\tthis._batchGroups[id] = group = new BatchGroup(id, name, dynamic, maxAabbSize, layers);\n\t\treturn group;\n\t}\n\n\tremoveGroup(id) {\n\t\tif (!this._batchGroups[id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar newBatchList = [];\n\n\t\tfor (let i = 0; i < this._batchList.length; i++) {\n\t\t\tif (this._batchList[i].batchGroupId == id) {\n\t\t\t\tthis.destroyBatch(this._batchList[i]);\n\t\t\t} else {\n\t\t\t\tnewBatchList.push(this._batchList[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis._batchList = newBatchList;\n\n\t\tthis._removeModelsFromBatchGroup(this.rootNode, id);\n\n\t\tdelete this._batchGroups[id];\n\t}\n\n\tmarkGroupDirty(id) {\n\t\tif (this._dirtyGroups.indexOf(id) < 0) {\n\t\t\tthis._dirtyGroups.push(id);\n\t\t}\n\t}\n\n\tgetGroupByName(name) {\n\t\tvar groups = this._batchGroups;\n\n\t\tfor (var group in groups) {\n\t\t\tif (!groups.hasOwnProperty(group)) continue;\n\n\t\t\tif (groups[group].name === name) {\n\t\t\t\treturn groups[group];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetBatches(batchGroupId) {\n\t\tvar results = [];\n\t\tvar len = this._batchList.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar batch = this._batchList[i];\n\n\t\t\tif (batch.batchGroupId === batchGroupId) {\n\t\t\t\tresults.push(batch);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\t_removeModelsFromBatchGroup(node, id) {\n\t\tif (!node.enabled) return;\n\n\t\tif (node.model && node.model.batchGroupId === id) {\n\t\t\tnode.model.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.render && node.render.batchGroupId === id) {\n\t\t\tnode.render.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.element && node.element.batchGroupId === id) {\n\t\t\tnode.element.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.sprite && node.sprite.batchGroupId === id) {\n\t\t\tnode.sprite.batchGroupId = -1;\n\t\t}\n\n\t\tfor (var i = 0; i < node._children.length; i++) {\n\t\t\tthis._removeModelsFromBatchGroup(node._children[i], id);\n\t\t}\n\t}\n\n\tinsert(type, groupId, node) {\n\t\tvar group = this._batchGroups[groupId];\n\n\t\tif (group) {\n\t\t\tif (group._obj[type].indexOf(node) < 0) {\n\t\t\t\tgroup._obj[type].push(node);\n\n\t\t\t\tthis.markGroupDirty(groupId);\n\t\t\t}\n\t\t}\n\t}\n\n\tremove(type, groupId, node) {\n\t\tvar group = this._batchGroups[groupId];\n\n\t\tif (group) {\n\t\t\tvar idx = group._obj[type].indexOf(node);\n\n\t\t\tif (idx >= 0) {\n\t\t\t\tgroup._obj[type].splice(idx, 1);\n\n\t\t\t\tthis.markGroupDirty(groupId);\n\t\t\t}\n\t\t}\n\t}\n\n\t_extractRender(node, arr, group, groupMeshInstances) {\n\t\tif (node.render) {\n\t\t\tif (node.render.isStatic) {\n\t\t\t\tconst drawCalls = this.scene.drawCalls;\n\t\t\t\tvar nodeMeshInstances = node.render.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < drawCalls.length; i++) {\n\t\t\t\t\tif (!drawCalls[i]._staticSource) continue;\n\t\t\t\t\tif (nodeMeshInstances.indexOf(drawCalls[i]._staticSource) < 0) continue;\n\t\t\t\t\tarr.push(drawCalls[i]);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < nodeMeshInstances.length; i++) {\n\t\t\t\t\tif (drawCalls.indexOf(nodeMeshInstances[i]) >= 0) {\n\t\t\t\t\t\tarr.push(nodeMeshInstances[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr = groupMeshInstances[node.render.batchGroupId] = arr.concat(node.render.meshInstances);\n\t\t\t}\n\n\t\t\tnode.render.removeFromLayers();\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t_extractModel(node, arr, group, groupMeshInstances) {\n\t\tif (node.model && node.model.model) {\n\t\t\tif (node.model.isStatic) {\n\t\t\t\tconst drawCalls = this.scene.drawCalls;\n\t\t\t\tconst nodeMeshInstances = node.model.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < drawCalls.length; i++) {\n\t\t\t\t\tif (!drawCalls[i]._staticSource) continue;\n\t\t\t\t\tif (nodeMeshInstances.indexOf(drawCalls[i]._staticSource) < 0) continue;\n\t\t\t\t\tarr.push(drawCalls[i]);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < nodeMeshInstances.length; i++) {\n\t\t\t\t\tif (drawCalls.indexOf(nodeMeshInstances[i]) >= 0) {\n\t\t\t\t\t\tarr.push(nodeMeshInstances[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr = groupMeshInstances[node.model.batchGroupId] = arr.concat(node.model.meshInstances);\n\t\t\t}\n\n\t\t\tnode.model.removeModelFromLayers();\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t_extractElement(node, arr, group) {\n\t\tif (!node.element) return;\n\t\tvar valid = false;\n\n\t\tif (node.element._text && node.element._text._model.meshInstances.length > 0) {\n\t\t\tarr.push(node.element._text._model.meshInstances[0]);\n\t\t\tnode.element.removeModelFromLayers(node.element._text._model);\n\t\t\tvalid = true;\n\t\t} else if (node.element._image) {\n\t\t\tarr.push(node.element._image._renderable.meshInstance);\n\t\t\tnode.element.removeModelFromLayers(node.element._image._renderable.model);\n\n\t\t\tif (node.element._image._renderable.unmaskMeshInstance) {\n\t\t\t\tarr.push(node.element._image._renderable.unmaskMeshInstance);\n\n\t\t\t\tif (!node.element._image._renderable.unmaskMeshInstance.stencilFront || !node.element._image._renderable.unmaskMeshInstance.stencilBack) {\n\t\t\t\t\tnode.element._dirtifyMask();\n\n\t\t\t\t\tnode.element._onPrerender();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvalid = true;\n\t\t}\n\n\t\tif (valid) {\n\t\t\tgroup._ui = true;\n\t\t}\n\t}\n\n\t_collectAndRemoveMeshInstances(groupMeshInstances, groupIds) {\n\t\tfor (let g = 0; g < groupIds.length; g++) {\n\t\t\tconst id = groupIds[g];\n\t\t\tconst group = this._batchGroups[id];\n\t\t\tif (!group) continue;\n\t\t\tlet arr = groupMeshInstances[id];\n\t\t\tif (!arr) arr = groupMeshInstances[id] = [];\n\n\t\t\tfor (let m = 0; m < group._obj.model.length; m++) {\n\t\t\t\tarr = this._extractModel(group._obj.model[m], arr, group, groupMeshInstances);\n\t\t\t}\n\n\t\t\tfor (let r = 0; r < group._obj.render.length; r++) {\n\t\t\t\tarr = this._extractRender(group._obj.render[r], arr, group, groupMeshInstances);\n\t\t\t}\n\n\t\t\tfor (let e = 0; e < group._obj.element.length; e++) {\n\t\t\t\tthis._extractElement(group._obj.element[e], arr, group);\n\t\t\t}\n\n\t\t\tfor (let s = 0; s < group._obj.sprite.length; s++) {\n\t\t\t\tconst node = group._obj.sprite[s];\n\n\t\t\t\tif (node.sprite && node.sprite._meshInstance && (group.dynamic || node.sprite.sprite._renderMode === SPRITE_RENDERMODE_SIMPLE)) {\n\t\t\t\t\tarr.push(node.sprite._meshInstance);\n\t\t\t\t\tnode.sprite.removeModelFromLayers();\n\t\t\t\t\tgroup._sprite = true;\n\t\t\t\t\tnode.sprite._batchGroup = group;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerate(groupIds) {\n\t\tvar groupMeshInstances = {};\n\n\t\tif (!groupIds) {\n\t\t\tgroupIds = Object.keys(this._batchGroups);\n\t\t}\n\n\t\tvar newBatchList = [];\n\n\t\tfor (let i = 0; i < this._batchList.length; i++) {\n\t\t\tif (groupIds.indexOf(this._batchList[i].batchGroupId) < 0) {\n\t\t\t\tnewBatchList.push(this._batchList[i]);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.destroyBatch(this._batchList[i]);\n\t\t}\n\n\t\tthis._batchList = newBatchList;\n\n\t\tthis._collectAndRemoveMeshInstances(groupMeshInstances, groupIds);\n\n\t\tif (groupIds === this._dirtyGroups) {\n\t\t\tthis._dirtyGroups.length = 0;\n\t\t} else {\n\t\t\tvar newDirtyGroups = [];\n\n\t\t\tfor (let i = 0; i < this._dirtyGroups.length; i++) {\n\t\t\t\tif (groupIds.indexOf(this._dirtyGroups[i]) < 0) newDirtyGroups.push(this._dirtyGroups[i]);\n\t\t\t}\n\n\t\t\tthis._dirtyGroups = newDirtyGroups;\n\t\t}\n\n\t\tvar group, lists, groupData, batch;\n\n\t\tfor (var groupId in groupMeshInstances) {\n\t\t\tif (!groupMeshInstances.hasOwnProperty(groupId)) continue;\n\t\t\tgroup = groupMeshInstances[groupId];\n\t\t\tgroupData = this._batchGroups[groupId];\n\n\t\t\tif (!groupData) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlists = this.prepare(group, groupData.dynamic, groupData.maxAabbSize, groupData._ui || groupData._sprite);\n\n\t\t\tfor (let i = 0; i < lists.length; i++) {\n\t\t\t\tbatch = this.create(lists[i], groupData.dynamic, parseInt(groupId, 10));\n\n\t\t\t\tif (batch) {\n\t\t\t\t\tbatch.addToLayers(this.scene, groupData.layers);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprepare(meshInstances, dynamic, maxAabbSize = Number.POSITIVE_INFINITY, translucent) {\n\t\tif (meshInstances.length === 0) return [];\n\t\tvar halfMaxAabbSize = maxAabbSize * 0.5;\n\t\tvar maxInstanceCount = this.device.supportsBoneTextures ? 1024 : this.device.boneLimit;\n\t\tvar maxNumVertices = this.device.extUintElement ? 0xffffffff : 0xffff;\n\t\tvar material, layer, vertCount, params, lightList, defs, stencil, staticLights, scaleSign, drawOrder, indexed, vertexFormatBatchingHash;\n\t\tvar aabb = new BoundingBox();\n\t\tvar testAabb = new BoundingBox();\n\t\tvar skipTranslucentAabb = null;\n\t\tvar mi, sf;\n\t\tvar lists = [];\n\t\tvar i,\n\t\t\t\tj = 0;\n\n\t\tif (translucent) {\n\t\t\tmeshInstances.sort(function (a, b) {\n\t\t\t\treturn a.drawOrder - b.drawOrder;\n\t\t\t});\n\t\t}\n\n\t\tvar meshInstancesLeftA = meshInstances;\n\t\tvar meshInstancesLeftB;\n\t\tvar skipMesh = translucent ? function (mi) {\n\t\t\tif (skipTranslucentAabb) {\n\t\t\t\tskipTranslucentAabb.add(mi.aabb);\n\t\t\t} else {\n\t\t\t\tskipTranslucentAabb = mi.aabb.clone();\n\t\t\t}\n\n\t\t\tmeshInstancesLeftB.push(mi);\n\t\t} : function (mi) {\n\t\t\tmeshInstancesLeftB.push(mi);\n\t\t};\n\n\t\twhile (meshInstancesLeftA.length > 0) {\n\t\t\tlists[j] = [meshInstancesLeftA[0]];\n\t\t\tmeshInstancesLeftB = [];\n\t\t\tmaterial = meshInstancesLeftA[0].material;\n\t\t\tlayer = meshInstancesLeftA[0].layer;\n\t\t\tdefs = meshInstancesLeftA[0]._shaderDefs;\n\t\t\tparams = meshInstancesLeftA[0].parameters;\n\t\t\tstencil = meshInstancesLeftA[0].stencilFront;\n\t\t\tlightList = meshInstancesLeftA[0]._staticLightList;\n\t\t\tvertCount = meshInstancesLeftA[0].mesh.vertexBuffer.getNumVertices();\n\t\t\tdrawOrder = meshInstancesLeftA[0].drawOrder;\n\t\t\taabb.copy(meshInstancesLeftA[0].aabb);\n\t\t\tscaleSign = getScaleSign(meshInstancesLeftA[0]);\n\t\t\tvertexFormatBatchingHash = meshInstancesLeftA[0].mesh.vertexBuffer.format.batchingHash;\n\t\t\tindexed = meshInstancesLeftA[0].mesh.primitive[0].indexed;\n\t\t\tskipTranslucentAabb = null;\n\n\t\t\tfor (i = 1; i < meshInstancesLeftA.length; i++) {\n\t\t\t\tmi = meshInstancesLeftA[i];\n\n\t\t\t\tif (dynamic && lists[j].length >= maxInstanceCount) {\n\t\t\t\t\tmeshInstancesLeftB = meshInstancesLeftB.concat(meshInstancesLeftA.slice(i));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (material !== mi.material || layer !== mi.layer || vertexFormatBatchingHash !== mi.mesh.vertexBuffer.format.batchingHash || indexed !== mi.mesh.primitive[0].indexed || defs !== mi._shaderDefs || vertCount + mi.mesh.vertexBuffer.getNumVertices() > maxNumVertices) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttestAabb.copy(aabb);\n\t\t\t\ttestAabb.add(mi.aabb);\n\n\t\t\t\tif (testAabb.halfExtents.x > halfMaxAabbSize || testAabb.halfExtents.y > halfMaxAabbSize || testAabb.halfExtents.z > halfMaxAabbSize) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (stencil) {\n\t\t\t\t\tif (!(sf = mi.stencilFront) || stencil.func !== sf.func || stencil.zpass !== sf.zpass) {\n\t\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scaleSign !== getScaleSign(mi)) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!equalParamSets(params, mi.parameters)) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tstaticLights = mi._staticLightList;\n\n\t\t\t\tif (lightList && staticLights) {\n\t\t\t\t\tif (!equalLightLists(lightList, staticLights)) {\n\t\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else if (lightList || staticLights) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (translucent && skipTranslucentAabb && skipTranslucentAabb.intersects(mi.aabb) && mi.drawOrder !== drawOrder) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\taabb.add(mi.aabb);\n\t\t\t\tvertCount += mi.mesh.vertexBuffer.getNumVertices();\n\t\t\t\tlists[j].push(mi);\n\t\t\t}\n\n\t\t\tj++;\n\t\t\tmeshInstancesLeftA = meshInstancesLeftB;\n\t\t}\n\n\t\treturn lists;\n\t}\n\n\tcreate(meshInstances, dynamic, batchGroupId) {\n\t\tif (!this._init) {\n\t\t\tvar boneLimit = \"#define BONE_LIMIT \" + this.device.getBoneLimit() + \"\\n\";\n\t\t\tthis.transformVS = boneLimit + \"#define DYNAMICBATCH\\n\" + shaderChunks.transformVS;\n\t\t\tthis.skinTexVS = shaderChunks.skinBatchTexVS;\n\t\t\tthis.skinConstVS = shaderChunks.skinBatchConstVS;\n\t\t\tthis.vertexFormats = {};\n\t\t\tthis._init = true;\n\t\t}\n\n\t\tvar i, j;\n\t\tvar streams = null,\n\t\t\t\tstream;\n\t\tvar semantic;\n\t\tvar material = null;\n\t\tvar mesh, elems, numVerts;\n\t\tvar batchNumVerts = 0;\n\t\tvar batchNumIndices = 0;\n\t\tvar batch = null;\n\n\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\tif (meshInstances[i].visible) {\n\t\t\t\tmesh = meshInstances[i].mesh;\n\t\t\t\tnumVerts = mesh.vertexBuffer.numVertices;\n\t\t\t\tbatchNumVerts += numVerts;\n\t\t\t\tbatchNumIndices += mesh.primitive[0].indexed ? mesh.primitive[0].count : mesh.primitive[0].type === PRIMITIVE_TRIFAN && mesh.primitive[0].count === 4 ? 6 : 0;\n\n\t\t\t\tif (!streams) {\n\t\t\t\t\tmaterial = meshInstances[i].material;\n\t\t\t\t\tstreams = {};\n\t\t\t\t\telems = mesh.vertexBuffer.format.elements;\n\n\t\t\t\t\tfor (j = 0; j < elems.length; j++) {\n\t\t\t\t\t\tsemantic = elems[j].name;\n\t\t\t\t\t\tstreams[semantic] = {\n\t\t\t\t\t\t\tnumComponents: elems[j].numComponents,\n\t\t\t\t\t\t\tdataType: elems[j].dataType,\n\t\t\t\t\t\t\tnormalize: elems[j].normalize,\n\t\t\t\t\t\t\tcount: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dynamic) {\n\t\t\t\t\t\tstreams[SEMANTIC_BLENDINDICES] = {\n\t\t\t\t\t\t\tnumComponents: 1,\n\t\t\t\t\t\t\tdataType: TYPE_FLOAT32,\n\t\t\t\t\t\t\tnormalize: false,\n\t\t\t\t\t\t\tcount: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (streams) {\n\t\t\tbatch = new Batch(meshInstances, dynamic, batchGroupId);\n\n\t\t\tthis._batchList.push(batch);\n\n\t\t\tvar indexBase, numIndices, indexData;\n\t\t\tvar verticesOffset = 0;\n\t\t\tvar indexOffset = 0;\n\t\t\tvar transform,\n\t\t\t\t\tvec = new Vec3();\n\t\t\tvar indexArrayType = batchNumVerts <= 0xffff ? Uint16Array : Uint32Array;\n\t\t\tvar indices = new indexArrayType(batchNumIndices);\n\n\t\t\tfor (semantic in streams) {\n\t\t\t\tstream = streams[semantic];\n\t\t\t\tstream.typeArrayType = typedArrayTypes[stream.dataType];\n\t\t\t\tstream.elementByteSize = typedArrayTypesByteSize[stream.dataType];\n\t\t\t\tstream.buffer = new stream.typeArrayType(batchNumVerts * stream.numComponents);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (!meshInstances[i].visible) continue;\n\t\t\t\tmesh = meshInstances[i].mesh;\n\t\t\t\tnumVerts = mesh.vertexBuffer.numVertices;\n\n\t\t\t\tif (!dynamic) {\n\t\t\t\t\ttransform = meshInstances[i].node.getWorldTransform();\n\t\t\t\t}\n\n\t\t\t\tfor (semantic in streams) {\n\t\t\t\t\tif (semantic !== SEMANTIC_BLENDINDICES) {\n\t\t\t\t\t\tstream = streams[semantic];\n\t\t\t\t\t\tvar subarray = new stream.typeArrayType(stream.buffer.buffer, stream.elementByteSize * stream.count);\n\t\t\t\t\t\tvar totalComponents = mesh.getVertexStream(semantic, subarray) * stream.numComponents;\n\t\t\t\t\t\tstream.count += totalComponents;\n\n\t\t\t\t\t\tif (!dynamic && stream.numComponents >= 3) {\n\t\t\t\t\t\t\tif (semantic === SEMANTIC_POSITION) {\n\t\t\t\t\t\t\t\tfor (j = 0; j < totalComponents; j += stream.numComponents) {\n\t\t\t\t\t\t\t\t\tvec.set(subarray[j], subarray[j + 1], subarray[j + 2]);\n\t\t\t\t\t\t\t\t\ttransform.transformPoint(vec, vec);\n\t\t\t\t\t\t\t\t\tsubarray[j] = vec.x;\n\t\t\t\t\t\t\t\t\tsubarray[j + 1] = vec.y;\n\t\t\t\t\t\t\t\t\tsubarray[j + 2] = vec.z;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (semantic === SEMANTIC_NORMAL || semantic === SEMANTIC_TANGENT) {\n\t\t\t\t\t\t\t\ttransform.invertTo3x3(mat3);\n\t\t\t\t\t\t\t\tmat3.transpose();\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < totalComponents; j += stream.numComponents) {\n\t\t\t\t\t\t\t\t\tvec.set(subarray[j], subarray[j + 1], subarray[j + 2]);\n\t\t\t\t\t\t\t\t\tmat3.transformVector(vec, vec);\n\t\t\t\t\t\t\t\t\tsubarray[j] = vec.x;\n\t\t\t\t\t\t\t\t\tsubarray[j + 1] = vec.y;\n\t\t\t\t\t\t\t\t\tsubarray[j + 2] = vec.z;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (dynamic) {\n\t\t\t\t\tstream = streams[SEMANTIC_BLENDINDICES];\n\n\t\t\t\t\tfor (j = 0; j < numVerts; j++) stream.buffer[stream.count++] = i;\n\t\t\t\t}\n\n\t\t\t\tif (mesh.primitive[0].indexed) {\n\t\t\t\t\tindexBase = mesh.primitive[0].base;\n\t\t\t\t\tnumIndices = mesh.primitive[0].count;\n\t\t\t\t\tvar srcFormat = mesh.indexBuffer[0].getFormat();\n\t\t\t\t\tindexData = new typedArrayIndexFormats[srcFormat](mesh.indexBuffer[0].storage);\n\t\t\t\t} else if (mesh.primitive[0].type === PRIMITIVE_TRIFAN && mesh.primitive[0].count === 4) {\n\t\t\t\t\tindexBase = 0;\n\t\t\t\t\tnumIndices = 6;\n\t\t\t\t\tindexData = [0, 1, 3, 2, 3, 1];\n\t\t\t\t} else {\n\t\t\t\t\tnumIndices = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (j = 0; j < numIndices; j++) {\n\t\t\t\t\tindices[j + indexOffset] = indexData[indexBase + j] + verticesOffset;\n\t\t\t\t}\n\n\t\t\t\tindexOffset += numIndices;\n\t\t\t\tverticesOffset += numVerts;\n\t\t\t}\n\n\t\t\tmesh = new Mesh(this.device);\n\n\t\t\tfor (semantic in streams) {\n\t\t\t\tstream = streams[semantic];\n\t\t\t\tmesh.setVertexStream(semantic, stream.buffer, stream.numComponents, undefined, stream.dataType, stream.normalize);\n\t\t\t}\n\n\t\t\tif (indices.length > 0) mesh.setIndices(indices);\n\t\t\tmesh.update(PRIMITIVE_TRIANGLES, false);\n\n\t\t\tif (dynamic) {\n\t\t\t\tmaterial = material.clone();\n\t\t\t\tmaterial.chunks.transformVS = this.transformVS;\n\t\t\t\tmaterial.chunks.skinTexVS = this.skinTexVS;\n\t\t\t\tmaterial.chunks.skinConstVS = this.skinConstVS;\n\t\t\t\tmaterial.update();\n\t\t\t}\n\n\t\t\tvar meshInstance = new MeshInstance(mesh, material, this.rootNode);\n\t\t\tmeshInstance.castShadow = batch.origMeshInstances[0].castShadow;\n\t\t\tmeshInstance.parameters = batch.origMeshInstances[0].parameters;\n\t\t\tmeshInstance.isStatic = batch.origMeshInstances[0].isStatic;\n\t\t\tmeshInstance.layer = batch.origMeshInstances[0].layer;\n\t\t\tmeshInstance._staticLightList = batch.origMeshInstances[0]._staticLightList;\n\t\t\tmeshInstance._shaderDefs = batch.origMeshInstances[0]._shaderDefs;\n\t\t\tmeshInstance.cull = batch.origMeshInstances[0].cull;\n\t\t\tvar batchGroup = this._batchGroups[batchGroupId];\n\t\t\tif (batchGroup && batchGroup._ui) meshInstance.cull = false;\n\n\t\t\tif (dynamic) {\n\t\t\t\tvar nodes = [];\n\n\t\t\t\tfor (i = 0; i < batch.origMeshInstances.length; i++) {\n\t\t\t\t\tnodes.push(batch.origMeshInstances[i].node);\n\t\t\t\t}\n\n\t\t\t\tmeshInstance.skinInstance = new SkinBatchInstance(this.device, nodes, this.rootNode);\n\t\t\t}\n\n\t\t\tmeshInstance._updateAabb = false;\n\t\t\tmeshInstance.drawOrder = batch.origMeshInstances[0].drawOrder;\n\t\t\tmeshInstance.stencilFront = batch.origMeshInstances[0].stencilFront;\n\t\t\tmeshInstance.stencilBack = batch.origMeshInstances[0].stencilBack;\n\t\t\tmeshInstance.flipFaces = getScaleSign(batch.origMeshInstances[0]) < 0;\n\t\t\tmeshInstance.castShadow = batch.origMeshInstances[0].castShadow;\n\t\t\tbatch.meshInstance = meshInstance;\n\t\t\tbatch.updateBoundingBox();\n\t\t}\n\n\t\treturn batch;\n\t}\n\n\tupdateAll() {\n\t\tif (this._dirtyGroups.length > 0) {\n\t\t\tthis.generate(this._dirtyGroups);\n\t\t}\n\n\t\tfor (var i = 0; i < this._batchList.length; i++) {\n\t\t\tif (!this._batchList[i].dynamic) continue;\n\n\t\t\tthis._batchList[i].updateBoundingBox();\n\t\t}\n\t}\n\n\tclone(batch, clonedMeshInstances) {\n\t\tvar batch2 = new Batch(clonedMeshInstances, batch.dynamic, batch.batchGroupId);\n\n\t\tthis._batchList.push(batch2);\n\n\t\tvar nodes = [];\n\n\t\tfor (var i = 0; i < clonedMeshInstances.length; i++) {\n\t\t\tnodes.push(clonedMeshInstances[i].node);\n\t\t}\n\n\t\tbatch2.meshInstance = new MeshInstance(batch.meshInstance.mesh, batch.meshInstance.material, batch.meshInstance.node);\n\t\tbatch2.meshInstance._updateAabb = false;\n\t\tbatch2.meshInstance.parameters = clonedMeshInstances[0].parameters;\n\t\tbatch2.meshInstance.isStatic = clonedMeshInstances[0].isStatic;\n\t\tbatch2.meshInstance.cull = clonedMeshInstances[0].cull;\n\t\tbatch2.meshInstance.layer = clonedMeshInstances[0].layer;\n\t\tbatch2.meshInstance._staticLightList = clonedMeshInstances[0]._staticLightList;\n\n\t\tif (batch.dynamic) {\n\t\t\tbatch2.meshInstance.skinInstance = new SkinBatchInstance(this.device, nodes, this.rootNode);\n\t\t}\n\n\t\tbatch2.meshInstance.castShadow = batch.meshInstance.castShadow;\n\t\tbatch2.meshInstance._shader = batch.meshInstance._shader;\n\t\tbatch2.meshInstance.castShadow = batch.meshInstance.castShadow;\n\t\treturn batch2;\n\t}\n\n\tdestroyBatch(batch) {\n\t\tbatch.destroy(this.scene, this._batchGroups[batch.batchGroupId].layers);\n\t}\n\n}\n\nvar _deviceCoord = new Vec3();\n\nvar _halfSize = new Vec3();\n\nvar _point = new Vec3();\n\nvar _invViewProjMat = new Mat4();\n\nclass Camera {\n\tconstructor() {\n\t\tthis._aspectRatio = 16 / 9;\n\t\tthis._aspectRatioMode = ASPECT_AUTO;\n\t\tthis._calculateProjection = null;\n\t\tthis._calculateTransform = null;\n\t\tthis._clearColor = new Color(0.75, 0.75, 0.75, 1);\n\t\tthis._clearColorBuffer = true;\n\t\tthis._clearDepth = 1;\n\t\tthis._clearDepthBuffer = true;\n\t\tthis._clearStencil = 0;\n\t\tthis._clearStencilBuffer = true;\n\t\tthis._cullingMask = 0xFFFFFFFF;\n\t\tthis._cullFaces = true;\n\t\tthis._farClip = 1000;\n\t\tthis._flipFaces = false;\n\t\tthis._fov = 45;\n\t\tthis._frustumCulling = true;\n\t\tthis._horizontalFov = false;\n\t\tthis._layers = [LAYERID_WORLD, LAYERID_DEPTH, LAYERID_SKYBOX, LAYERID_UI, LAYERID_IMMEDIATE];\n\t\tthis._nearClip = 0.1;\n\t\tthis._node = null;\n\t\tthis._orthoHeight = 10;\n\t\tthis._projection = PROJECTION_PERSPECTIVE;\n\t\tthis._rect = new Vec4(0, 0, 1, 1);\n\t\tthis._renderTarget = null;\n\t\tthis._scissorRect = new Vec4(0, 0, 1, 1);\n\t\tthis._vrDisplay = null;\n\t\tthis._projMat = new Mat4();\n\t\tthis._projMatDirty = true;\n\t\tthis._projMatSkybox = new Mat4();\n\t\tthis._viewMat = new Mat4();\n\t\tthis._viewMatDirty = true;\n\t\tthis._viewProjMat = new Mat4();\n\t\tthis._viewProjMatDirty = true;\n\t\tthis.frustum = new Frustum();\n\t}\n\n\tget aspectRatio() {\n\t\treturn this._aspectRatio;\n\t}\n\n\tset aspectRatio(newValue) {\n\t\tif (this._aspectRatio !== newValue) {\n\t\t\tthis._aspectRatio = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget aspectRatioMode() {\n\t\treturn this._aspectRatioMode;\n\t}\n\n\tset aspectRatioMode(newValue) {\n\t\tif (this._aspectRatioMode !== newValue) {\n\t\t\tthis._aspectRatioMode = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget calculateProjection() {\n\t\treturn this._calculateProjection;\n\t}\n\n\tset calculateProjection(newValue) {\n\t\tthis._calculateProjection = newValue;\n\t\tthis._projMatDirty = true;\n\t}\n\n\tget calculateTransform() {\n\t\treturn this._calculateTransform;\n\t}\n\n\tset calculateTransform(newValue) {\n\t\tthis._calculateTransform = newValue;\n\t}\n\n\tget clearColor() {\n\t\treturn this._clearColor;\n\t}\n\n\tset clearColor(newValue) {\n\t\tthis._clearColor.copy(newValue);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(newValue) {\n\t\tthis._clearColorBuffer = newValue;\n\t}\n\n\tget clearDepth() {\n\t\treturn this._clearDepth;\n\t}\n\n\tset clearDepth(newValue) {\n\t\tthis._clearDepth = newValue;\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(newValue) {\n\t\tthis._clearDepthBuffer = newValue;\n\t}\n\n\tget clearStencil() {\n\t\treturn this._clearStencil;\n\t}\n\n\tset clearStencil(newValue) {\n\t\tthis._clearStencil = newValue;\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(newValue) {\n\t\tthis._clearStencilBuffer = newValue;\n\t}\n\n\tget cullingMask() {\n\t\treturn this._cullingMask;\n\t}\n\n\tset cullingMask(newValue) {\n\t\tthis._cullingMask = newValue;\n\t}\n\n\tget cullFaces() {\n\t\treturn this._cullFaces;\n\t}\n\n\tset cullFaces(newValue) {\n\t\tthis._cullFaces = newValue;\n\t}\n\n\tget farClip() {\n\t\treturn this._farClip;\n\t}\n\n\tset farClip(newValue) {\n\t\tif (this._farClip !== newValue) {\n\t\t\tthis._farClip = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget flipFaces() {\n\t\treturn this._flipFaces;\n\t}\n\n\tset flipFaces(newValue) {\n\t\tthis._flipFaces = newValue;\n\t}\n\n\tget fov() {\n\t\treturn this._fov;\n\t}\n\n\tset fov(newValue) {\n\t\tif (this._fov !== newValue) {\n\t\t\tthis._fov = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget frustumCulling() {\n\t\treturn this._frustumCulling;\n\t}\n\n\tset frustumCulling(newValue) {\n\t\tthis._frustumCulling = newValue;\n\t}\n\n\tget horizontalFov() {\n\t\treturn this._horizontalFov;\n\t}\n\n\tset horizontalFov(newValue) {\n\t\tif (this._horizontalFov !== newValue) {\n\t\t\tthis._horizontalFov = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(newValue) {\n\t\tthis._layers = newValue.slice(0);\n\t}\n\n\tget nearClip() {\n\t\treturn this._nearClip;\n\t}\n\n\tset nearClip(newValue) {\n\t\tif (this._nearClip !== newValue) {\n\t\t\tthis._nearClip = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget node() {\n\t\treturn this._node;\n\t}\n\n\tset node(newValue) {\n\t\tthis._node = newValue;\n\t}\n\n\tget orthoHeight() {\n\t\treturn this._orthoHeight;\n\t}\n\n\tset orthoHeight(newValue) {\n\t\tif (this._orthoHeight !== newValue) {\n\t\t\tthis._orthoHeight = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget projection() {\n\t\treturn this._projection;\n\t}\n\n\tset projection(newValue) {\n\t\tif (this._projection !== newValue) {\n\t\t\tthis._projection = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget projectionMatrix() {\n\t\tthis._evaluateProjectionMatrix();\n\n\t\treturn this._projMat;\n\t}\n\n\tget rect() {\n\t\treturn this._rect;\n\t}\n\n\tset rect(newValue) {\n\t\tthis._rect.copy(newValue);\n\t}\n\n\tget renderTarget() {\n\t\treturn this._renderTarget;\n\t}\n\n\tset renderTarget(newValue) {\n\t\tthis._renderTarget = newValue;\n\t}\n\n\tget scissorRect() {\n\t\treturn this._scissorRect;\n\t}\n\n\tset scissorRect(newValue) {\n\t\tthis._scissorRect.copy(newValue);\n\t}\n\n\tget viewMatrix() {\n\t\tif (this._viewMatDirty) {\n\t\t\tvar wtm = this._node.getWorldTransform();\n\n\t\t\tthis._viewMat.copy(wtm).invert();\n\n\t\t\tthis._viewMatDirty = false;\n\t\t}\n\n\t\treturn this._viewMat;\n\t}\n\n\tget vrDisplay() {\n\t\treturn this._vrDisplay;\n\t}\n\n\tset vrDisplay(newValue) {\n\t\tthis._vrDisplay = newValue;\n\n\t\tif (newValue) {\n\t\t\tnewValue._camera = this;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Camera().copy(this);\n\t}\n\n\tcopy(other) {\n\t\tthis.aspectRatio = other.aspectRatio;\n\t\tthis.aspectRatioMode = other.aspectRatioMode;\n\t\tthis.calculateProjection = other.calculateProjection;\n\t\tthis.calculateTransform = other.calculateTransform;\n\t\tthis.clearColor = other.clearColor;\n\t\tthis.clearColorBuffer = other.clearColorBuffer;\n\t\tthis.clearDepth = other.clearDepth;\n\t\tthis.clearDepthBuffer = other.clearDepthBuffer;\n\t\tthis.clearStencil = other.clearStencil;\n\t\tthis.clearStencilBuffer = other.clearStencilBuffer;\n\t\tthis.cullFaces = other.cullFaces;\n\t\tthis.cullingMask = other.cullingMask;\n\t\tthis.farClip = other.farClip;\n\t\tthis.flipFaces = other.flipFaces;\n\t\tthis.fov = other.fov;\n\t\tthis.frustumCulling = other.frustumCulling;\n\t\tthis.horizontalFov = other.horizontalFov;\n\t\tthis.layers = other.layers;\n\t\tthis.nearClip = other.nearClip;\n\t\tthis.orthoHeight = other.orthoHeight;\n\t\tthis.projection = other.projection;\n\t\tthis.rect = other.rect;\n\t\tthis.renderTarget = other.renderTarget;\n\t\tthis.scissorRect = other.scissorRect;\n\t\tthis.vrDisplay = other.vrDisplay;\n\t\treturn this;\n\t}\n\n\t_updateViewProjMat() {\n\t\tif (this._projMatDirty || this._viewMatDirty || this._viewProjMatDirty) {\n\t\t\tvar projMat = this.projectionMatrix;\n\t\t\tvar viewMat = this.viewMatrix;\n\n\t\t\tthis._viewProjMat.mul2(projMat, viewMat);\n\n\t\t\tthis._viewProjMatDirty = false;\n\t\t}\n\t}\n\n\tworldToScreen(worldCoord, cw, ch, screenCoord = new Vec3()) {\n\t\tthis._updateViewProjMat();\n\n\t\tthis._viewProjMat.transformPoint(worldCoord, screenCoord);\n\n\t\tvar vpm = this._viewProjMat.data;\n\t\tvar w = worldCoord.x * vpm[3] + worldCoord.y * vpm[7] + worldCoord.z * vpm[11] + 1 * vpm[15];\n\t\tscreenCoord.x = (screenCoord.x / w + 1) * 0.5 * cw;\n\t\tscreenCoord.y = (1 - screenCoord.y / w) * 0.5 * ch;\n\t\treturn screenCoord;\n\t}\n\n\tscreenToWorld(x, y, z, cw, ch, worldCoord = new Vec3()) {\n\t\tvar range = this._farClip - this._nearClip;\n\n\t\t_deviceCoord.set(x / cw, (ch - y) / ch, z / range);\n\n\t\t_deviceCoord.mulScalar(2);\n\n\t\t_deviceCoord.sub(Vec3.ONE);\n\n\t\tif (this._projection === PROJECTION_PERSPECTIVE) {\n\t\t\tMat4._getPerspectiveHalfSize(_halfSize, this._fov, this._aspectRatio, this._nearClip, this._horizontalFov);\n\n\t\t\t_halfSize.x *= _deviceCoord.x;\n\t\t\t_halfSize.y *= _deviceCoord.y;\n\n\t\t\tvar invView = this._node.getWorldTransform();\n\n\t\t\t_halfSize.z = -this._nearClip;\n\t\t\tinvView.transformPoint(_halfSize, _point);\n\n\t\t\tvar cameraPos = this._node.getPosition();\n\n\t\t\tworldCoord.sub2(_point, cameraPos);\n\t\t\tworldCoord.normalize();\n\t\t\tworldCoord.mulScalar(z);\n\t\t\tworldCoord.add(cameraPos);\n\t\t} else {\n\t\t\tthis._updateViewProjMat();\n\n\t\t\t_invViewProjMat.copy(this._viewProjMat).invert();\n\n\t\t\t_invViewProjMat.transformPoint(_deviceCoord, worldCoord);\n\t\t}\n\n\t\treturn worldCoord;\n\t}\n\n\t_evaluateProjectionMatrix() {\n\t\tif (this._projMatDirty) {\n\t\t\tif (this._projection === PROJECTION_PERSPECTIVE) {\n\t\t\t\tthis._projMat.setPerspective(this._fov, this._aspectRatio, this._nearClip, this._farClip, this._horizontalFov);\n\n\t\t\t\tthis._projMatSkybox.copy(this._projMat);\n\t\t\t} else {\n\t\t\t\tvar y = this._orthoHeight;\n\t\t\t\tvar x = y * this._aspectRatio;\n\n\t\t\t\tthis._projMat.setOrtho(-x, x, -y, y, this._nearClip, this._farClip);\n\n\t\t\t\tthis._projMatSkybox.setPerspective(this._fov, this._aspectRatio, this._nearClip, this._farClip);\n\t\t\t}\n\n\t\t\tthis._projMatDirty = false;\n\t\t}\n\t}\n\n\tgetProjectionMatrixSkybox() {\n\t\tthis._evaluateProjectionMatrix();\n\n\t\treturn this._projMatSkybox;\n\t}\n\n}\n\nclass DepthMaterial extends Material {\n\tclone() {\n\t\tvar clone = new DepthMaterial();\n\n\t\tMaterial.prototype._cloneInternal.call(this, clone);\n\n\t\treturn clone;\n\t}\n\n\tupdateShader(device) {\n\t\tvar options = {\n\t\t\tskin: !!this.meshInstances[0].skinInstance\n\t\t};\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('depth', options);\n\t}\n\n}\n\nclass ShadowMap {\n\tconstructor(texture, targets) {\n\t\tthis.texture = texture;\n\t\tthis.cached = false;\n\t\tthis.renderTargets = targets;\n\t}\n\n\tdestroy() {\n\t\tif (this.texture) {\n\t\t\tthis.texture.destroy();\n\t\t\tthis.texture = null;\n\t\t}\n\n\t\tconst targets = this.renderTargets;\n\n\t\tfor (let i = 0; i < targets.length; i++) {\n\t\t\ttargets[i].destroy();\n\t\t}\n\n\t\tthis.renderTargets.length = 0;\n\t}\n\n\tstatic getShadowFormat(device, shadowType) {\n\t\tif (shadowType === SHADOW_VSM32) {\n\t\t\treturn PIXELFORMAT_RGBA32F;\n\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\treturn PIXELFORMAT_RGBA16F;\n\t\t} else if (shadowType === SHADOW_PCF5) {\n\t\t\treturn PIXELFORMAT_DEPTH;\n\t\t} else if (shadowType === SHADOW_PCF3 && device.webgl2) {\n\t\t\treturn PIXELFORMAT_DEPTH;\n\t\t}\n\n\t\treturn PIXELFORMAT_R8_G8_B8_A8;\n\t}\n\n\tstatic getShadowFiltering(device, shadowType) {\n\t\tif (shadowType === SHADOW_PCF3 && !device.webgl2) {\n\t\t\treturn FILTER_NEAREST;\n\t\t} else if (shadowType === SHADOW_VSM32) {\n\t\t\treturn device.extTextureFloatLinear ? FILTER_LINEAR : FILTER_NEAREST;\n\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\treturn device.extTextureHalfFloatLinear ? FILTER_LINEAR : FILTER_NEAREST;\n\t\t}\n\n\t\treturn FILTER_LINEAR;\n\t}\n\n\tstatic create(device, light) {\n\t\tlet shadowMap = null;\n\n\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\tshadowMap = this.createCubemap(device, light._shadowResolution);\n\t\t} else {\n\t\t\tshadowMap = this.create2dMap(device, light._shadowResolution, light._shadowType);\n\t\t}\n\n\t\treturn shadowMap;\n\t}\n\n\tstatic create2dMap(device, size, shadowType) {\n\t\tconst format = this.getShadowFormat(device, shadowType);\n\t\tconst filter = this.getShadowFiltering(device, shadowType);\n\t\tconst texture = new Texture(device, {\n\t\t\tformat: format,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: filter,\n\t\t\tmagFilter: filter,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = 'ShadowMap2D';\n\t\tlet target = null;\n\n\t\tif (shadowType === SHADOW_PCF5 || shadowType === SHADOW_PCF3 && device.webgl2) {\n\t\t\ttexture.compareOnRead = true;\n\t\t\ttexture.compareFunc = FUNC_LESS;\n\t\t\ttarget = new RenderTarget({\n\t\t\t\tdepthBuffer: texture\n\t\t\t});\n\t\t} else {\n\t\t\ttarget = new RenderTarget({\n\t\t\t\tcolorBuffer: texture,\n\t\t\t\tdepth: true\n\t\t\t});\n\t\t}\n\n\t\treturn new ShadowMap(texture, [target]);\n\t}\n\n\tstatic createCubemap(device, size) {\n\t\tconst cubemap = new Texture(device, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tcubemap: true,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'ShadowMapCube';\n\t\tconst targets = [];\n\n\t\tfor (let i = 0; i < 6; i++) {\n\t\t\tconst target = new RenderTarget({\n\t\t\t\tcolorBuffer: cubemap,\n\t\t\t\tface: i,\n\t\t\t\tdepth: true\n\t\t\t});\n\t\t\ttargets.push(target);\n\t\t}\n\n\t\treturn new ShadowMap(cubemap, targets);\n\t}\n\n}\n\nclass ShadowMapCache {\n\tconstructor() {\n\t\tthis.shadowMapCache = new Map();\n\t}\n\n\tdestroy() {\n\t\tthis.clear();\n\t\tthis.shadowMapCache = null;\n\t}\n\n\tclear() {\n\t\tthis.shadowMapCache.forEach(shadowMaps => {\n\t\t\tshadowMaps.forEach(shadowMap => {\n\t\t\t\tshadowMap.destroy();\n\t\t\t});\n\t\t});\n\t\tthis.shadowMapCache.clear();\n\t}\n\n\tgetKey(light) {\n\t\tconst isCubeMap = light._type === LIGHTTYPE_OMNI;\n\t\tconst shadowType = light._shadowType;\n\t\tconst resolution = light._shadowResolution;\n\t\treturn `${isCubeMap}-${shadowType}-${resolution}`;\n\t}\n\n\tget(device, light) {\n\t\tconst key = this.getKey(light);\n\t\tconst shadowMaps = this.shadowMapCache.get(key);\n\n\t\tif (shadowMaps && shadowMaps.length) {\n\t\t\treturn shadowMaps.pop();\n\t\t}\n\n\t\tconst shadowMap = ShadowMap.create(device, light);\n\t\tshadowMap.cached = true;\n\t\treturn shadowMap;\n\t}\n\n\tadd(light, shadowMap) {\n\t\tconst key = this.getKey(light);\n\t\tconst shadowMaps = this.shadowMapCache.get(key);\n\n\t\tif (shadowMaps) {\n\t\t\tshadowMaps.push(shadowMap);\n\t\t} else {\n\t\t\tthis.shadowMapCache.set(key, [shadowMap]);\n\t\t}\n\t}\n\n}\n\nconst pointLightRotations = [new Quat().setFromEulerAngles(0, 90, 180), new Quat().setFromEulerAngles(0, -90, 180), new Quat().setFromEulerAngles(90, 0, 0), new Quat().setFromEulerAngles(-90, 0, 0), new Quat().setFromEulerAngles(0, 180, 180), new Quat().setFromEulerAngles(0, 0, 180)];\nconst aabbPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\nconst _depthRange = {\n\tmin: 0,\n\tmax: 0\n};\n\nfunction getDepthRange(cameraViewMatrix, aabbMin, aabbMax) {\n\taabbPoints[0].x = aabbPoints[1].x = aabbPoints[2].x = aabbPoints[3].x = aabbMin.x;\n\taabbPoints[1].y = aabbPoints[3].y = aabbPoints[7].y = aabbPoints[5].y = aabbMin.y;\n\taabbPoints[2].z = aabbPoints[3].z = aabbPoints[6].z = aabbPoints[7].z = aabbMin.z;\n\taabbPoints[4].x = aabbPoints[5].x = aabbPoints[6].x = aabbPoints[7].x = aabbMax.x;\n\taabbPoints[0].y = aabbPoints[2].y = aabbPoints[4].y = aabbPoints[6].y = aabbMax.y;\n\taabbPoints[0].z = aabbPoints[1].z = aabbPoints[4].z = aabbPoints[5].z = aabbMax.z;\n\tlet minz = 9999999999;\n\tlet maxz = -9999999999;\n\n\tfor (let i = 0; i < 8; ++i) {\n\t\tcameraViewMatrix.transformPoint(aabbPoints[i], aabbPoints[i]);\n\t\tconst z = aabbPoints[i].z;\n\t\tif (z < minz) minz = z;\n\t\tif (z > maxz) maxz = z;\n\t}\n\n\t_depthRange.min = minz;\n\t_depthRange.max = maxz;\n\treturn _depthRange;\n}\n\nfunction gauss(x, sigma) {\n\treturn Math.exp(-(x * x) / (2.0 * sigma * sigma));\n}\n\nconst maxBlurSize = 25;\n\nfunction gaussWeights(kernelSize) {\n\tif (kernelSize > maxBlurSize) {\n\t\tkernelSize = maxBlurSize;\n\t}\n\n\tconst sigma = (kernelSize - 1) / (2 * 3);\n\tconst halfWidth = (kernelSize - 1) * 0.5;\n\tconst values = new Array(kernelSize);\n\tlet sum = 0.0;\n\n\tfor (let i = 0; i < kernelSize; ++i) {\n\t\tvalues[i] = gauss(i - halfWidth, sigma);\n\t\tsum += values[i];\n\t}\n\n\tfor (let i = 0; i < kernelSize; ++i) {\n\t\tvalues[i] /= sum;\n\t}\n\n\treturn values;\n}\n\nconst visibleSceneAabb = new BoundingBox();\nconst shadowCamView$1 = new Mat4();\nconst shadowCamViewProj$1 = new Mat4();\nconst pixelOffset = new Float32Array(2);\nconst blurScissorRect = {\n\tx: 1,\n\ty: 1,\n\tz: 0,\n\tw: 0\n};\nconst opChanId = {\n\tr: 1,\n\tg: 2,\n\tb: 3,\n\ta: 4\n};\nconst center = new Vec3();\nconst viewportMatrix = new Mat4();\n\nfunction getDepthKey(meshInstance) {\n\tconst material = meshInstance.material;\n\tconst x = meshInstance.skinInstance ? 10 : 0;\n\tlet y = 0;\n\n\tif (material.opacityMap) {\n\t\tconst opChan = material.opacityMapChannel;\n\n\t\tif (opChan) {\n\t\t\ty = opChanId[opChan];\n\t\t}\n\t}\n\n\treturn x + y;\n}\n\nclass ShadowRenderer {\n\tconstructor(forwardRenderer) {\n\t\tthis.device = forwardRenderer.device;\n\t\tthis.forwardRenderer = forwardRenderer;\n\t\tconst scope = this.device.scope;\n\t\tthis.sourceId = scope.resolve(\"source\");\n\t\tthis.pixelOffsetId = scope.resolve(\"pixelOffset\");\n\t\tthis.weightId = scope.resolve(\"weight[0]\");\n\t\tthis.blurVsmShaderCode = [shaderChunks.blurVSMPS, \"#define GAUSS\\n\" + shaderChunks.blurVSMPS];\n\t\tconst packed = \"#define PACKED\\n\";\n\t\tthis.blurPackedVsmShaderCode = [packed + this.blurVsmShaderCode[0], packed + this.blurVsmShaderCode[1]];\n\t\tthis.blurVsmShader = [{}, {}];\n\t\tthis.blurPackedVsmShader = [{}, {}];\n\t\tthis.blurVsmWeights = {};\n\t\tthis.shadowMapLightRadiusId = scope.resolve('light_radius');\n\t\tthis.shadowMapCache = new ShadowMapCache();\n\t}\n\n\tdestroy() {\n\t\tthis.shadowMapCache.destroy();\n\t\tthis.shadowMapCache = null;\n\t}\n\n\tstatic createShadowCamera(device, shadowType, type, face) {\n\t\tconst shadowCam = new Camera();\n\t\tshadowCam.node = new GraphNode(\"ShadowCamera\");\n\t\tshadowCam.aspectRatio = 1;\n\n\t\tswitch (type) {\n\t\t\tcase LIGHTTYPE_OMNI:\n\t\t\t\tshadowCam.node.setRotation(pointLightRotations[face]);\n\t\t\t\tshadowCam.fov = 90;\n\t\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\t\tbreak;\n\n\t\t\tcase LIGHTTYPE_SPOT:\n\t\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\t\tbreak;\n\n\t\t\tcase LIGHTTYPE_DIRECTIONAL:\n\t\t\t\tshadowCam.projection = PROJECTION_ORTHOGRAPHIC;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet hwPcf = shadowType === SHADOW_PCF5 || shadowType === SHADOW_PCF3 && device.webgl2;\n\n\t\tif (type === LIGHTTYPE_OMNI) {\n\t\t\thwPcf = false;\n\t\t}\n\n\t\tif (shadowType >= SHADOW_VSM8 && shadowType <= SHADOW_VSM32) {\n\t\t\tshadowCam.clearColor = new Color(0, 0, 0, 0);\n\t\t} else {\n\t\t\tshadowCam.clearColor = new Color(1, 1, 1, 1);\n\t\t}\n\n\t\tshadowCam.clearColorBuffer = !hwPcf;\n\t\tshadowCam.clearDepthBuffer = true;\n\t\tshadowCam.clearStencilBuffer = false;\n\t\treturn shadowCam;\n\t}\n\n\tcullShadowCasters(meshInstances, visible, camera) {\n\t\tlet count = 0;\n\t\tconst numInstances = meshInstances.length;\n\n\t\tfor (let i = 0; i < numInstances; i++) {\n\t\t\tconst meshInstance = meshInstances[i];\n\n\t\t\tif (!meshInstance.cull || meshInstance._isVisible(camera)) {\n\t\t\t\tmeshInstance.visibleThisFrame = true;\n\t\t\t\tvisible[count] = meshInstance;\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\tvisible.length = count;\n\t\tvisible.sort(this.forwardRenderer.depthSortCompare);\n\t}\n\n\tcullLocal(light, drawCalls) {\n\t\tlight.visibleThisFrame = true;\n\n\t\tif (!light._shadowMap) {\n\t\t\tlight._shadowMap = ShadowMap.create(this.device, light);\n\t\t}\n\n\t\tconst type = light._type;\n\t\tconst faceCount = type === LIGHTTYPE_SPOT ? 1 : 6;\n\n\t\tfor (let face = 0; face < faceCount; face++) {\n\t\t\tconst lightRenderData = light.getRenderData(null, face);\n\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\tshadowCam.nearClip = light.attenuationEnd / 1000;\n\t\t\tshadowCam.farClip = light.attenuationEnd;\n\t\t\tconst shadowCamNode = shadowCam._node;\n\t\t\tconst lightNode = light._node;\n\t\t\tshadowCamNode.setPosition(lightNode.getPosition());\n\n\t\t\tif (type === LIGHTTYPE_SPOT) {\n\t\t\t\tshadowCam.fov = light._outerConeAngle * 2;\n\t\t\t\tshadowCamNode.setRotation(lightNode.getRotation());\n\t\t\t\tshadowCamNode.rotateLocal(-90, 0, 0);\n\t\t\t}\n\n\t\t\tshadowCam.renderTarget = light._shadowMap.renderTargets[face];\n\t\t\tthis.forwardRenderer.updateCameraFrustum(shadowCam);\n\t\t\tthis.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);\n\t\t}\n\t}\n\n\tgenerateSplitDistances(light, nearDist, farDist) {\n\t\tlight._shadowCascadeDistances.fill(farDist);\n\n\t\tfor (let i = 1; i < light.numCascades; i++) {\n\t\t\tconst fraction = i / light.numCascades;\n\t\t\tconst linearDist = nearDist + (farDist - nearDist) * fraction;\n\t\t\tconst logDist = nearDist * (farDist / nearDist) ** fraction;\n\t\t\tconst dist = math.lerp(linearDist, logDist, light.cascadeDistribution);\n\t\t\tlight._shadowCascadeDistances[i - 1] = dist;\n\t\t}\n\t}\n\n\tcullDirectional(light, drawCalls, camera) {\n\t\tlight.visibleThisFrame = true;\n\n\t\tif (!light._shadowMap) {\n\t\t\tlight._shadowMap = ShadowMap.create(this.device, light);\n\t\t}\n\n\t\tconst nearDist = camera._nearClip;\n\t\tthis.generateSplitDistances(light, nearDist, light.shadowDistance);\n\n\t\tfor (let cascade = 0; cascade < light.numCascades; cascade++) {\n\t\t\tconst lightRenderData = light.getRenderData(camera, cascade);\n\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\tshadowCam.renderTarget = light._shadowMap.renderTargets[0];\n\t\t\tconst shadowCamNode = shadowCam._node;\n\t\t\tconst lightNode = light._node;\n\t\t\tshadowCamNode.setPosition(lightNode.getPosition());\n\t\t\tshadowCamNode.setRotation(lightNode.getRotation());\n\t\t\tshadowCamNode.rotateLocal(-90, 0, 0);\n\t\t\tconst frustumNearDist = cascade === 0 ? nearDist : light._shadowCascadeDistances[cascade - 1];\n\t\t\tconst frustumFarDist = light._shadowCascadeDistances[cascade];\n\t\t\tconst frustumPoints = Frustum.getPoints(camera, frustumNearDist, frustumFarDist);\n\t\t\tcenter.set(0, 0, 0);\n\t\t\tconst cameraWorldMat = camera.node.getWorldTransform();\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tcameraWorldMat.transformPoint(frustumPoints[i], frustumPoints[i]);\n\t\t\t\tcenter.add(frustumPoints[i]);\n\t\t\t}\n\n\t\t\tcenter.mulScalar(1 / 8);\n\t\t\tlet radius = 0;\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tconst dist = frustumPoints[i].sub(center).length();\n\t\t\t\tif (dist > radius) radius = dist;\n\t\t\t}\n\n\t\t\tconst right = shadowCamNode.right;\n\t\t\tconst up = shadowCamNode.up;\n\t\t\tconst lightDir = shadowCamNode.forward;\n\t\t\tconst sizeRatio = 0.25 * light._shadowResolution / radius;\n\t\t\tconst x = Math.ceil(center.dot(up) * sizeRatio) / sizeRatio;\n\t\t\tconst y = Math.ceil(center.dot(right) * sizeRatio) / sizeRatio;\n\t\t\tconst scaledUp = up.mulScalar(x);\n\t\t\tconst scaledRight = right.mulScalar(y);\n\t\t\tconst dot = center.dot(lightDir);\n\t\t\tconst scaledDir = lightDir.mulScalar(dot);\n\t\t\tcenter.add2(scaledUp, scaledRight).add(scaledDir);\n\t\t\tshadowCamNode.setPosition(center);\n\t\t\tshadowCamNode.translateLocal(0, 0, 1000000);\n\t\t\tshadowCam.nearClip = 0;\n\t\t\tshadowCam.farClip = 2000000;\n\t\t\tshadowCam.orthoHeight = radius;\n\t\t\tthis.forwardRenderer.updateCameraFrustum(shadowCam);\n\t\t\tthis.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);\n\t\t\tlet emptyAabb = true;\n\t\t\tconst visibleCasters = lightRenderData.visibleCasters;\n\n\t\t\tfor (let i = 0; i < visibleCasters.length; i++) {\n\t\t\t\tconst meshInstance = visibleCasters[i];\n\n\t\t\t\tif (emptyAabb) {\n\t\t\t\t\temptyAabb = false;\n\t\t\t\t\tvisibleSceneAabb.copy(meshInstance.aabb);\n\t\t\t\t} else {\n\t\t\t\t\tvisibleSceneAabb.add(meshInstance.aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshadowCamView$1.copy(shadowCamNode.getWorldTransform()).invert();\n\t\t\tconst depthRange = getDepthRange(shadowCamView$1, visibleSceneAabb.getMin(), visibleSceneAabb.getMax());\n\t\t\tshadowCamNode.translateLocal(0, 0, depthRange.max + 0.1);\n\t\t\tshadowCam.farClip = depthRange.max - depthRange.min + 0.2;\n\t\t}\n\t}\n\n\tsetupRenderState(device, light) {\n\t\tif (device.webgl2) {\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\tdevice.setDepthBias(false);\n\t\t\t} else {\n\t\t\t\tdevice.setDepthBias(true);\n\t\t\t\tdevice.setDepthBiasValues(light.shadowBias * -1000.0, light.shadowBias * -1000.0);\n\t\t\t}\n\t\t} else if (device.extStandardDerivatives) {\n\t\t\tconst forwardRenderer = this.forwardRenderer;\n\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\tforwardRenderer.polygonOffset[0] = 0;\n\t\t\t\tforwardRenderer.polygonOffset[1] = 0;\n\t\t\t\tforwardRenderer.polygonOffsetId.setValue(forwardRenderer.polygonOffset);\n\t\t\t} else {\n\t\t\t\tforwardRenderer.polygonOffset[0] = light.shadowBias * -1000.0;\n\t\t\t\tforwardRenderer.polygonOffset[1] = light.shadowBias * -1000.0;\n\t\t\t\tforwardRenderer.polygonOffsetId.setValue(forwardRenderer.polygonOffset);\n\t\t\t}\n\t\t}\n\n\t\tdevice.setBlending(false);\n\t\tdevice.setDepthWrite(true);\n\t\tdevice.setDepthTest(true);\n\n\t\tif (light._isPcf && device.webgl2 && light._type !== LIGHTTYPE_OMNI) {\n\t\t\tdevice.setColorWrite(false, false, false, false);\n\t\t} else {\n\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t}\n\t}\n\n\tdispatchUniforms(light, shadowCam, lightRenderData, face) {\n\t\tconst shadowCamNode = shadowCam._node;\n\n\t\tif (light._type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\tthis.forwardRenderer.dispatchViewPos(shadowCamNode.getPosition());\n\t\t\tthis.shadowMapLightRadiusId.setValue(light.attenuationEnd);\n\t\t}\n\n\t\tif (light._type !== LIGHTTYPE_OMNI) {\n\t\t\tshadowCamView$1.setTRS(shadowCamNode.getPosition(), shadowCamNode.getRotation(), Vec3.ONE).invert();\n\t\t\tshadowCamViewProj$1.mul2(shadowCam.projectionMatrix, shadowCamView$1);\n\n\t\t\tif (light._type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tconst rect = light.cascades[face];\n\t\t\t\tshadowCam.rect = rect;\n\t\t\t\tshadowCam.scissorRect = rect;\n\t\t\t\tviewportMatrix.setViewport(rect.x, rect.y, rect.z, rect.w);\n\t\t\t\tlightRenderData.shadowMatrix.mul2(viewportMatrix, shadowCamViewProj$1);\n\n\t\t\t\tlight._shadowMatrixPalette.set(lightRenderData.shadowMatrix.data, face * 16);\n\t\t\t} else {\n\t\t\t\tlightRenderData.shadowMatrix.mul2(ShadowRenderer.scaleShiftMatrix, shadowCamViewProj$1);\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitCasters(visibleCasters, light) {\n\t\tconst device = this.device;\n\t\tconst forwardRenderer = this.forwardRenderer;\n\t\tconst shadowPass = 1 << SHADER_SHADOW;\n\t\tconst shadowType = light._shadowType;\n\t\tconst smode = shadowType + light._type * SHADOW_COUNT;\n\t\tconst count = visibleCasters.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst meshInstance = visibleCasters[i];\n\t\t\tconst mesh = meshInstance.mesh;\n\t\t\tconst material = meshInstance.material;\n\t\t\tforwardRenderer.setBaseConstants(device, material);\n\t\t\tforwardRenderer.setSkinning(device, meshInstance, material);\n\n\t\t\tif (material.dirty) {\n\t\t\t\tmaterial.updateUniforms();\n\t\t\t\tmaterial.dirty = false;\n\t\t\t}\n\n\t\t\tif (material.chunks) {\n\t\t\t\tforwardRenderer.setCullMode(true, false, meshInstance);\n\t\t\t\tmaterial.setParameters(device);\n\t\t\t\tmeshInstance.setParameters(device, shadowPass);\n\t\t\t}\n\n\t\t\tlet shadowShader = meshInstance._shader[SHADER_SHADOW + smode];\n\n\t\t\tif (!shadowShader) {\n\t\t\t\tforwardRenderer.updateShader(meshInstance, meshInstance._shaderDefs, null, SHADER_SHADOW + smode);\n\t\t\t\tshadowShader = meshInstance._shader[SHADER_SHADOW + smode];\n\t\t\t\tmeshInstance._key[SORTKEY_DEPTH] = getDepthKey(meshInstance);\n\t\t\t}\n\n\t\t\tdevice.setShader(shadowShader);\n\t\t\tforwardRenderer.setVertexBuffers(device, mesh);\n\t\t\tforwardRenderer.setMorphing(device, meshInstance.morphInstance);\n\t\t\tconst style = meshInstance.renderStyle;\n\t\t\tdevice.setIndexBuffer(mesh.indexBuffer[style]);\n\t\t\ti += forwardRenderer.drawInstance(device, meshInstance, mesh, style);\n\t\t\tforwardRenderer._shadowDrawCalls++;\n\t\t}\n\t}\n\n\trender(light, camera) {\n\t\tif (light.enabled && light.castShadows && light.shadowUpdateMode !== SHADOWUPDATE_NONE && light.visibleThisFrame) {\n\t\t\tconst device = this.device;\n\n\t\t\tif (light.shadowUpdateMode === SHADOWUPDATE_THISFRAME) {\n\t\t\t\tlight.shadowUpdateMode = SHADOWUPDATE_NONE;\n\t\t\t}\n\n\t\t\tlet faceCount = 1;\n\t\t\tconst type = light._type;\n\n\t\t\tif (type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tfaceCount = light.numCascades;\n\t\t\t} else if (type === LIGHTTYPE_OMNI) {\n\t\t\t\tfaceCount = 6;\n\t\t\t}\n\n\t\t\tconst forwardRenderer = this.forwardRenderer;\n\t\t\tforwardRenderer._shadowMapUpdates += faceCount;\n\t\t\tthis.setupRenderState(device, light);\n\n\t\t\tfor (let face = 0; face < faceCount; face++) {\n\t\t\t\tconst lightRenderData = light.getRenderData(type === LIGHTTYPE_DIRECTIONAL ? camera : null, face);\n\t\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\t\tthis.dispatchUniforms(light, shadowCam, lightRenderData, face);\n\t\t\t\tforwardRenderer.setCamera(shadowCam, shadowCam.renderTarget, true, faceCount === 1);\n\t\t\t\tthis.submitCasters(lightRenderData.visibleCasters, light);\n\t\t\t}\n\n\t\t\tif (light._isVsm && light._vsmBlurSize > 1) {\n\t\t\t\tthis.applyVsmBlur(light, camera);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetVsmBlurShader(isVsm8, blurMode, filterSize) {\n\t\tlet blurShader = (isVsm8 ? this.blurPackedVsmShader : this.blurVsmShader)[blurMode][filterSize];\n\n\t\tif (!blurShader) {\n\t\t\tthis.blurVsmWeights[filterSize] = gaussWeights(filterSize);\n\t\t\tconst blurVS = shaderChunks.fullscreenQuadVS;\n\t\t\tlet blurFS = \"#define SAMPLES \" + filterSize + \"\\n\";\n\n\t\t\tif (isVsm8) {\n\t\t\t\tblurFS += this.blurPackedVsmShaderCode[blurMode];\n\t\t\t} else {\n\t\t\t\tblurFS += this.blurVsmShaderCode[blurMode];\n\t\t\t}\n\n\t\t\tconst blurShaderName = \"blurVsm\" + blurMode + \"\" + filterSize + \"\" + isVsm8;\n\t\t\tblurShader = createShaderFromCode(this.device, blurVS, blurFS, blurShaderName);\n\n\t\t\tif (isVsm8) {\n\t\t\t\tthis.blurPackedVsmShader[blurMode][filterSize] = blurShader;\n\t\t\t} else {\n\t\t\t\tthis.blurVsmShader[blurMode][filterSize] = blurShader;\n\t\t\t}\n\t\t}\n\n\t\treturn blurShader;\n\t}\n\n\tapplyVsmBlur(light, camera) {\n\t\tconst device = this.device;\n\t\tconst lightRenderData = light.getRenderData(light._type === LIGHTTYPE_DIRECTIONAL ? camera : null, 0);\n\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\tconst origShadowMap = shadowCam.renderTarget;\n\t\tconst tempShadowMap = this.shadowMapCache.get(device, light);\n\t\tconst tempRt = tempShadowMap.renderTargets[0];\n\t\tconst isVsm8 = light._shadowType === SHADOW_VSM8;\n\t\tconst blurMode = light.vsmBlurMode;\n\t\tconst filterSize = light._vsmBlurSize;\n\t\tconst blurShader = this.getVsmBlurShader(isVsm8, blurMode, filterSize);\n\t\tblurScissorRect.z = light._shadowResolution - 2;\n\t\tblurScissorRect.w = blurScissorRect.z;\n\t\tthis.sourceId.setValue(origShadowMap.colorBuffer);\n\t\tpixelOffset[0] = 1 / light._shadowResolution;\n\t\tpixelOffset[1] = 0;\n\t\tthis.pixelOffsetId.setValue(pixelOffset);\n\t\tif (blurMode === BLUR_GAUSSIAN) this.weightId.setValue(this.blurVsmWeights[filterSize]);\n\t\tdrawQuadWithShader(device, tempRt, blurShader, null, blurScissorRect);\n\t\tthis.sourceId.setValue(tempRt.colorBuffer);\n\t\tpixelOffset[1] = pixelOffset[0];\n\t\tpixelOffset[0] = 0;\n\t\tthis.pixelOffsetId.setValue(pixelOffset);\n\t\tdrawQuadWithShader(device, origShadowMap, blurShader, null, blurScissorRect);\n\t\tthis.shadowMapCache.add(light, tempShadowMap);\n\t}\n\n}\n\nShadowRenderer.scaleShiftMatrix = new Mat4().setViewport(0, 0, 1, 1);\n\nvar shadowCamView = new Mat4();\nvar shadowCamViewProj = new Mat4();\nvar viewInvMat = new Mat4();\nvar viewMat = new Mat4();\nvar viewMat3 = new Mat3();\nvar viewProjMat = new Mat4();\nvar projMat;\nvar flipYMat = new Mat4().setScale(1, -1, 1);\nvar flippedViewProjMat = new Mat4();\nvar flippedSkyboxProjMat = new Mat4();\nvar viewInvL = new Mat4();\nvar viewInvR = new Mat4();\nvar viewL = new Mat4();\nvar viewR = new Mat4();\nvar viewPosL = new Vec3();\nvar viewPosR = new Vec3();\nvar projL, projR;\nvar viewMat3L = new Mat3();\nvar viewMat3R = new Mat3();\nvar viewProjMatL = new Mat4();\nvar viewProjMatR = new Mat4();\nvar worldMatX = new Vec3();\nvar worldMatY = new Vec3();\nvar worldMatZ = new Vec3();\nvar tempSphere$1 = new BoundingSphere();\nvar boneTextureSize = [0, 0, 0, 0];\nvar boneTexture, instancingData, modelMatrix, normalMatrix;\nvar keyA$1, keyB$1;\nvar _autoInstanceBuffer = null;\nvar _skinUpdateIndex = 0;\n\nvar _tempMaterialSet = new Set();\n\nclass ForwardRenderer {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tvar device = this.device;\n\t\tthis._shadowDrawCalls = 0;\n\t\tthis._forwardDrawCalls = 0;\n\t\tthis._skinDrawCalls = 0;\n\t\tthis._camerasRendered = 0;\n\t\tthis._materialSwitches = 0;\n\t\tthis._shadowMapUpdates = 0;\n\t\tthis._shadowMapTime = 0;\n\t\tthis._depthMapTime = 0;\n\t\tthis._forwardTime = 0;\n\t\tthis._cullTime = 0;\n\t\tthis._sortTime = 0;\n\t\tthis._skinTime = 0;\n\t\tthis._morphTime = 0;\n\t\tthis._instancingTime = 0;\n\t\tthis._layerCompositionUpdateTime = 0;\n\t\tthis._lightClustersTime = 0;\n\t\tthis._lightClusters = 0;\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.library = library;\n\t\tthis._shadowRenderer = new ShadowRenderer(this);\n\t\tvar scope = device.scope;\n\t\tthis.projId = scope.resolve('matrix_projection');\n\t\tthis.projSkyboxId = scope.resolve('matrix_projectionSkybox');\n\t\tthis.viewId = scope.resolve('matrix_view');\n\t\tthis.viewId3 = scope.resolve('matrix_view3');\n\t\tthis.viewInvId = scope.resolve('matrix_viewInverse');\n\t\tthis.viewProjId = scope.resolve('matrix_viewProjection');\n\t\tthis.viewPos = new Float32Array(3);\n\t\tthis.viewPosId = scope.resolve('view_position');\n\t\tthis.nearClipId = scope.resolve('camera_near');\n\t\tthis.farClipId = scope.resolve('camera_far');\n\t\tthis.cameraParamsId = scope.resolve('camera_params');\n\t\tthis.fogColorId = scope.resolve('fog_color');\n\t\tthis.fogStartId = scope.resolve('fog_start');\n\t\tthis.fogEndId = scope.resolve('fog_end');\n\t\tthis.fogDensityId = scope.resolve('fog_density');\n\t\tthis.modelMatrixId = scope.resolve('matrix_model');\n\t\tthis.normalMatrixId = scope.resolve('matrix_normal');\n\t\tthis.poseMatrixId = scope.resolve('matrix_pose[0]');\n\t\tthis.boneTextureId = scope.resolve('texture_poseMap');\n\t\tthis.boneTextureSizeId = scope.resolve('texture_poseMapSize');\n\t\tthis.morphWeightsA = scope.resolve('morph_weights_a');\n\t\tthis.morphWeightsB = scope.resolve('morph_weights_b');\n\t\tthis.morphPositionTex = scope.resolve('morphPositionTex');\n\t\tthis.morphNormalTex = scope.resolve('morphNormalTex');\n\t\tthis.morphTexParams = scope.resolve('morph_tex_params');\n\t\tthis.alphaTestId = scope.resolve('alpha_ref');\n\t\tthis.opacityMapId = scope.resolve('texture_opacityMap');\n\t\tthis.ambientId = scope.resolve(\"light_globalAmbient\");\n\t\tthis.exposureId = scope.resolve(\"exposure\");\n\t\tthis.skyboxIntensityId = scope.resolve(\"skyboxIntensity\");\n\t\tthis.lightColorId = [];\n\t\tthis.lightDir = [];\n\t\tthis.lightDirId = [];\n\t\tthis.lightShadowMapId = [];\n\t\tthis.lightShadowMatrixId = [];\n\t\tthis.lightShadowParamsId = [];\n\t\tthis.lightRadiusId = [];\n\t\tthis.lightPos = [];\n\t\tthis.lightPosId = [];\n\t\tthis.lightWidth = [];\n\t\tthis.lightWidthId = [];\n\t\tthis.lightHeight = [];\n\t\tthis.lightHeightId = [];\n\t\tthis.lightInAngleId = [];\n\t\tthis.lightOutAngleId = [];\n\t\tthis.lightCookieId = [];\n\t\tthis.lightCookieIntId = [];\n\t\tthis.lightCookieMatrixId = [];\n\t\tthis.lightCookieOffsetId = [];\n\t\tthis.shadowMatrixPaletteId = [];\n\t\tthis.shadowCascadeDistancesId = [];\n\t\tthis.shadowCascadeCountId = [];\n\t\tthis.depthMapId = scope.resolve('uDepthMap');\n\t\tthis.screenSizeId = scope.resolve('uScreenSize');\n\t\tthis._screenSize = new Float32Array(4);\n\t\tthis.twoSidedLightingNegScaleFactorId = scope.resolve(\"twoSidedLightingNegScaleFactor\");\n\t\tthis.polygonOffsetId = scope.resolve(\"polygonOffset\");\n\t\tthis.polygonOffset = new Float32Array(2);\n\t\tthis.fogColor = new Float32Array(3);\n\t\tthis.ambientColor = new Float32Array(3);\n\t\tthis.cameraParams = new Float32Array(4);\n\t}\n\n\tdestroy() {\n\t\tthis._shadowRenderer.destroy();\n\n\t\tthis._shadowRenderer = null;\n\t}\n\n\tstatic getSpotCookieCamera() {\n\t\tif (!this.spotCookieCamera) {\n\t\t\tthis.spotCookieCamera = new Camera();\n\t\t\tthis.spotCookieCamera.projection = PROJECTION_PERSPECTIVE;\n\t\t\tthis.spotCookieCamera.aspectRatio = 1;\n\t\t\tthis.spotCookieCamera.node = new GraphNode();\n\t\t}\n\n\t\treturn this.spotCookieCamera;\n\t}\n\n\tsortCompare(drawCallA, drawCallB) {\n\t\tif (drawCallA.layer === drawCallB.layer) {\n\t\t\tif (drawCallA.drawOrder && drawCallB.drawOrder) {\n\t\t\t\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n\t\t\t} else if (drawCallA.zdist && drawCallB.zdist) {\n\t\t\t\treturn drawCallB.zdist - drawCallA.zdist;\n\t\t\t} else if (drawCallA.zdist2 && drawCallB.zdist2) {\n\t\t\t\treturn drawCallA.zdist2 - drawCallB.zdist2;\n\t\t\t}\n\t\t}\n\n\t\treturn drawCallB._key[SORTKEY_FORWARD] - drawCallA._key[SORTKEY_FORWARD];\n\t}\n\n\tsortCompareMesh(drawCallA, drawCallB) {\n\t\tif (drawCallA.layer === drawCallB.layer) {\n\t\t\tif (drawCallA.drawOrder && drawCallB.drawOrder) {\n\t\t\t\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n\t\t\t} else if (drawCallA.zdist && drawCallB.zdist) {\n\t\t\t\treturn drawCallB.zdist - drawCallA.zdist;\n\t\t\t}\n\t\t}\n\n\t\tkeyA$1 = drawCallA._key[SORTKEY_FORWARD];\n\t\tkeyB$1 = drawCallB._key[SORTKEY_FORWARD];\n\n\t\tif (keyA$1 === keyB$1 && drawCallA.mesh && drawCallB.mesh) {\n\t\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t\t}\n\n\t\treturn keyB$1 - keyA$1;\n\t}\n\n\tdepthSortCompare(drawCallA, drawCallB) {\n\t\tkeyA$1 = drawCallA._key[SORTKEY_DEPTH];\n\t\tkeyB$1 = drawCallB._key[SORTKEY_DEPTH];\n\n\t\tif (keyA$1 === keyB$1 && drawCallA.mesh && drawCallB.mesh) {\n\t\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t\t}\n\n\t\treturn keyB$1 - keyA$1;\n\t}\n\n\tlightCompare(lightA, lightB) {\n\t\treturn lightA.key - lightB.key;\n\t}\n\n\tupdateCameraFrustum(camera) {\n\t\tif (camera.vrDisplay && camera.vrDisplay.presenting) {\n\t\t\tprojMat = camera.vrDisplay.combinedProj;\n\t\t\tvar parent = camera._node.parent;\n\n\t\t\tif (parent) {\n\t\t\t\tviewMat.copy(parent.getWorldTransform()).mul(camera.vrDisplay.combinedViewInv).invert();\n\t\t\t} else {\n\t\t\t\tviewMat.copy(camera.vrDisplay.combinedView);\n\t\t\t}\n\n\t\t\tviewInvMat.copy(viewMat).invert();\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t} else if (camera.xr && camera.xr.views.length) {\n\t\t\tvar view = camera.xr.views[0];\n\t\t\tviewProjMat.mul2(view.projMat, view.viewOffMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t\treturn;\n\t\t}\n\n\t\tprojMat = camera.projectionMatrix;\n\n\t\tif (camera.calculateProjection) {\n\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t}\n\n\t\tif (camera.calculateTransform) {\n\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t} else {\n\t\t\tvar pos = camera._node.getPosition();\n\n\t\t\tvar rot = camera._node.getRotation();\n\n\t\t\tviewInvMat.setTRS(pos, rot, Vec3.ONE);\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t}\n\n\t\tviewMat.copy(viewInvMat).invert();\n\t\tviewProjMat.mul2(projMat, viewMat);\n\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t}\n\n\tsetCamera(camera, target, clear, cullBorder) {\n\t\tvar vrDisplay = camera.vrDisplay;\n\t\tvar parent, transform;\n\n\t\tif (vrDisplay && vrDisplay.presenting) {\n\t\t\tprojL = vrDisplay.leftProj;\n\t\t\tprojR = vrDisplay.rightProj;\n\t\t\tprojMat = vrDisplay.combinedProj;\n\n\t\t\tif (camera.calculateProjection) {\n\t\t\t\tcamera.calculateProjection(projL, VIEW_LEFT);\n\t\t\t\tcamera.calculateProjection(projR, VIEW_RIGHT);\n\t\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t\t}\n\n\t\t\tif (camera.calculateTransform) {\n\t\t\t\tcamera.calculateTransform(viewInvL, VIEW_LEFT);\n\t\t\t\tcamera.calculateTransform(viewInvR, VIEW_RIGHT);\n\t\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t\t\tviewL.copy(viewInvL).invert();\n\t\t\t\tviewR.copy(viewInvR).invert();\n\t\t\t\tviewMat.copy(viewInvMat).invert();\n\t\t\t} else {\n\t\t\t\tparent = camera._node.parent;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\ttransform = parent.getWorldTransform();\n\t\t\t\t\tviewInvL.mul2(transform, vrDisplay.leftViewInv);\n\t\t\t\t\tviewInvR.mul2(transform, vrDisplay.rightViewInv);\n\t\t\t\t\tviewL.copy(viewInvL).invert();\n\t\t\t\t\tviewR.copy(viewInvR).invert();\n\t\t\t\t\tviewMat.copy(parent.getWorldTransform()).mul(vrDisplay.combinedViewInv).invert();\n\t\t\t\t} else {\n\t\t\t\t\tviewInvL.copy(vrDisplay.leftViewInv);\n\t\t\t\t\tviewInvR.copy(vrDisplay.rightViewInv);\n\t\t\t\t\tviewL.copy(vrDisplay.leftView);\n\t\t\t\t\tviewR.copy(vrDisplay.rightView);\n\t\t\t\t\tviewMat.copy(vrDisplay.combinedView);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tviewMat3L.setFromMat4(viewL);\n\t\t\tviewMat3R.setFromMat4(viewR);\n\t\t\tviewProjMatL.mul2(projL, viewL);\n\t\t\tviewProjMatR.mul2(projR, viewR);\n\t\t\tviewPosL.x = viewInvL.data[12];\n\t\t\tviewPosL.y = viewInvL.data[13];\n\t\t\tviewPosL.z = viewInvL.data[14];\n\t\t\tviewPosR.x = viewInvR.data[12];\n\t\t\tviewPosR.y = viewInvR.data[13];\n\t\t\tviewPosR.z = viewInvR.data[14];\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t} else if (camera.xr && camera.xr.session) {\n\t\t\tparent = camera._node.parent;\n\t\t\tif (parent) transform = parent.getWorldTransform();\n\t\t\tvar views = camera.xr.views;\n\n\t\t\tfor (var v = 0; v < views.length; v++) {\n\t\t\t\tvar view = views[v];\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tview.viewInvOffMat.mul2(transform, view.viewInvMat);\n\t\t\t\t\tview.viewOffMat.copy(view.viewInvOffMat).invert();\n\t\t\t\t} else {\n\t\t\t\t\tview.viewInvOffMat.copy(view.viewInvMat);\n\t\t\t\t\tview.viewOffMat.copy(view.viewMat);\n\t\t\t\t}\n\n\t\t\t\tview.viewMat3.setFromMat4(view.viewOffMat);\n\t\t\t\tview.projViewOffMat.mul2(view.projMat, view.viewOffMat);\n\t\t\t\tview.position[0] = view.viewInvOffMat.data[12];\n\t\t\t\tview.position[1] = view.viewInvOffMat.data[13];\n\t\t\t\tview.position[2] = view.viewInvOffMat.data[14];\n\t\t\t\tcamera.frustum.setFromMat4(view.projViewOffMat);\n\t\t\t}\n\t\t} else {\n\t\t\tprojMat = camera.projectionMatrix;\n\n\t\t\tif (camera.calculateProjection) {\n\t\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t\t}\n\n\t\t\tthis.projId.setValue(projMat.data);\n\t\t\tthis.projSkyboxId.setValue(camera.getProjectionMatrixSkybox().data);\n\n\t\t\tif (camera.calculateTransform) {\n\t\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t\t} else {\n\t\t\t\tvar pos = camera._node.getPosition();\n\n\t\t\t\tvar rot = camera._node.getRotation();\n\n\t\t\t\tviewInvMat.setTRS(pos, rot, Vec3.ONE);\n\t\t\t}\n\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t\tviewMat.copy(viewInvMat).invert();\n\t\t\tthis.viewId.setValue(viewMat.data);\n\t\t\tviewMat3.setFromMat4(viewMat);\n\t\t\tthis.viewId3.setValue(viewMat3.data);\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\n\t\t\tif (target && target.flipY) {\n\t\t\t\tflippedViewProjMat.mul2(flipYMat, viewProjMat);\n\t\t\t\tflippedSkyboxProjMat.mul2(flipYMat, camera.getProjectionMatrixSkybox());\n\t\t\t\tthis.viewProjId.setValue(flippedViewProjMat.data);\n\t\t\t\tthis.projSkyboxId.setValue(flippedSkyboxProjMat.data);\n\t\t\t} else {\n\t\t\t\tthis.viewProjId.setValue(viewProjMat.data);\n\t\t\t\tthis.projSkyboxId.setValue(camera.getProjectionMatrixSkybox().data);\n\t\t\t}\n\n\t\t\tthis.dispatchViewPos(camera._node.getPosition());\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t}\n\n\t\tthis.nearClipId.setValue(camera._nearClip);\n\t\tthis.farClipId.setValue(camera._farClip);\n\t\tvar n = camera._nearClip;\n\t\tvar f = camera._farClip;\n\t\tthis.cameraParams[0] = 1 / f;\n\t\tthis.cameraParams[1] = f;\n\t\tthis.cameraParams[2] = (1 - f / n) * 0.5;\n\t\tthis.cameraParams[3] = (1 + f / n) * 0.5;\n\t\tthis.cameraParamsId.setValue(this.cameraParams);\n\t\tthis.clearView(camera, target, clear, false);\n\t\tvar device = this.device;\n\t\tvar pixelWidth = target ? target.width : device.width;\n\t\tvar pixelHeight = target ? target.height : device.height;\n\t\tvar scissorRect = camera.scissorRect;\n\t\tvar x = Math.floor(scissorRect.x * pixelWidth);\n\t\tvar y = Math.floor(scissorRect.y * pixelHeight);\n\t\tvar w = Math.floor(scissorRect.z * pixelWidth);\n\t\tvar h = Math.floor(scissorRect.w * pixelHeight);\n\t\tdevice.setScissor(x, y, w, h);\n\t\tif (cullBorder) device.setScissor(1, 1, pixelWidth - 2, pixelHeight - 2);\n\t}\n\n\tclearView(camera, target, clear, forceWrite, options) {\n\t\tvar device = this.device;\n\t\tdevice.setRenderTarget(target);\n\t\tdevice.updateBegin();\n\n\t\tif (forceWrite) {\n\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t\tdevice.setDepthWrite(true);\n\t\t}\n\n\t\tvar rect = camera.rect;\n\t\tvar pixelWidth = target ? target.width : device.width;\n\t\tvar pixelHeight = target ? target.height : device.height;\n\t\tvar x = Math.floor(rect.x * pixelWidth);\n\t\tvar y = Math.floor(rect.y * pixelHeight);\n\t\tvar w = Math.floor(rect.z * pixelWidth);\n\t\tvar h = Math.floor(rect.w * pixelHeight);\n\t\tdevice.setViewport(x, y, w, h);\n\t\tdevice.setScissor(x, y, w, h);\n\n\t\tif (clear) {\n\t\t\tif (!options) options = camera._clearOptions;\n\t\t\tdevice.clear(options ? options : {\n\t\t\t\tcolor: [camera._clearColor.r, camera._clearColor.g, camera._clearColor.b, camera._clearColor.a],\n\t\t\t\tdepth: camera._clearDepth,\n\t\t\t\tflags: (camera._clearColorBuffer ? CLEARFLAG_COLOR : 0) | (camera._clearDepthBuffer ? CLEARFLAG_DEPTH : 0) | (camera._clearStencilBuffer ? CLEARFLAG_STENCIL : 0),\n\t\t\t\tstencil: camera._clearStencil\n\t\t\t});\n\t\t}\n\t}\n\n\tdispatchGlobalLights(scene) {\n\t\tthis.ambientColor[0] = scene.ambientLight.r;\n\t\tthis.ambientColor[1] = scene.ambientLight.g;\n\t\tthis.ambientColor[2] = scene.ambientLight.b;\n\n\t\tif (scene.gammaCorrection) {\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tthis.ambientColor[i] = Math.pow(this.ambientColor[i], 2.2);\n\t\t\t}\n\t\t}\n\n\t\tthis.ambientId.setValue(this.ambientColor);\n\t\tthis.exposureId.setValue(scene.exposure);\n\t\tif (scene.skyboxModel) this.skyboxIntensityId.setValue(scene.skyboxIntensity);\n\t}\n\n\t_resolveLight(scope, i) {\n\t\tconst light = \"light\" + i;\n\t\tthis.lightColorId[i] = scope.resolve(light + \"_color\");\n\t\tthis.lightDir[i] = new Float32Array(3);\n\t\tthis.lightDirId[i] = scope.resolve(light + \"_direction\");\n\t\tthis.lightShadowMapId[i] = scope.resolve(light + \"_shadowMap\");\n\t\tthis.lightShadowMatrixId[i] = scope.resolve(light + \"_shadowMatrix\");\n\t\tthis.lightShadowParamsId[i] = scope.resolve(light + \"_shadowParams\");\n\t\tthis.lightRadiusId[i] = scope.resolve(light + \"_radius\");\n\t\tthis.lightPos[i] = new Float32Array(3);\n\t\tthis.lightPosId[i] = scope.resolve(light + \"_position\");\n\t\tthis.lightWidth[i] = new Float32Array(3);\n\t\tthis.lightWidthId[i] = scope.resolve(light + \"_halfWidth\");\n\t\tthis.lightHeight[i] = new Float32Array(3);\n\t\tthis.lightHeightId[i] = scope.resolve(light + \"_halfHeight\");\n\t\tthis.lightInAngleId[i] = scope.resolve(light + \"_innerConeAngle\");\n\t\tthis.lightOutAngleId[i] = scope.resolve(light + \"_outerConeAngle\");\n\t\tthis.lightCookieId[i] = scope.resolve(light + \"_cookie\");\n\t\tthis.lightCookieIntId[i] = scope.resolve(light + \"_cookieIntensity\");\n\t\tthis.lightCookieMatrixId[i] = scope.resolve(light + \"_cookieMatrix\");\n\t\tthis.lightCookieOffsetId[i] = scope.resolve(light + \"_cookieOffset\");\n\t\tthis.shadowMatrixPaletteId[i] = scope.resolve(light + \"_shadowMatrixPalette[0]\");\n\t\tthis.shadowCascadeDistancesId[i] = scope.resolve(light + \"_shadowCascadeDistances[0]\");\n\t\tthis.shadowCascadeCountId[i] = scope.resolve(light + \"_shadowCascadeCount\");\n\t}\n\n\tsetLTCDirectionallLight(wtm, cnt, dir, campos, far) {\n\t\tthis.lightPos[cnt][0] = campos.x - dir.x * far;\n\t\tthis.lightPos[cnt][1] = campos.y - dir.y * far;\n\t\tthis.lightPos[cnt][2] = campos.z - dir.z * far;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\t\tvar hWidth = wtm.transformVector(new Vec3(-0.5, 0, 0));\n\t\tthis.lightWidth[cnt][0] = hWidth.x * far;\n\t\tthis.lightWidth[cnt][1] = hWidth.y * far;\n\t\tthis.lightWidth[cnt][2] = hWidth.z * far;\n\t\tthis.lightWidthId[cnt].setValue(this.lightWidth[cnt]);\n\t\tvar hHeight = wtm.transformVector(new Vec3(0, 0, 0.5));\n\t\tthis.lightHeight[cnt][0] = hHeight.x * far;\n\t\tthis.lightHeight[cnt][1] = hHeight.y * far;\n\t\tthis.lightHeight[cnt][2] = hHeight.z * far;\n\t\tthis.lightHeightId[cnt].setValue(this.lightHeight[cnt]);\n\t}\n\n\tdispatchDirectLights(dirs, scene, mask, camera) {\n\t\tvar numDirs = dirs.length;\n\t\tvar i;\n\t\tvar directional, wtm;\n\t\tvar cnt = 0;\n\t\tvar scope = this.device.scope;\n\n\t\tfor (i = 0; i < numDirs; i++) {\n\t\t\tif (!(dirs[i].mask & mask)) continue;\n\t\t\tdirectional = dirs[i];\n\t\t\twtm = directional._node.getWorldTransform();\n\n\t\t\tif (!this.lightColorId[cnt]) {\n\t\t\t\tthis._resolveLight(scope, cnt);\n\t\t\t}\n\n\t\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? directional._linearFinalColor : directional._finalColor);\n\t\t\twtm.getY(directional._direction).mulScalar(-1);\n\n\t\t\tdirectional._direction.normalize();\n\n\t\t\tthis.lightDir[cnt][0] = directional._direction.x;\n\t\t\tthis.lightDir[cnt][1] = directional._direction.y;\n\t\t\tthis.lightDir[cnt][2] = directional._direction.z;\n\t\t\tthis.lightDirId[cnt].setValue(this.lightDir[cnt]);\n\n\t\t\tif (directional.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\tthis.setLTCDirectionallLight(wtm, cnt, directional._direction, camera._node.getPosition(), camera.farClip);\n\t\t\t}\n\n\t\t\tif (directional.castShadows) {\n\t\t\t\tconst lightRenderData = directional.getRenderData(camera, 0);\n\t\t\t\tconst farClip = lightRenderData.shadowCamera._farClip;\n\t\t\t\tlet bias;\n\n\t\t\t\tif (directional._isVsm) {\n\t\t\t\t\tbias = -0.00001 * 20;\n\t\t\t\t} else {\n\t\t\t\t\tbias = directional.shadowBias / farClip * 100;\n\n\t\t\t\t\tif (!this.device.webgl2 && this.device.extStandardDerivatives) {\n\t\t\t\t\t\tbias *= -100;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar normalBias = directional._isVsm ? directional.vsmBias / (farClip / 7.0) : directional._normalOffsetBias;\n\t\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\t\tthis.lightShadowMatrixId[cnt].setValue(lightRenderData.shadowMatrix.data);\n\t\t\t\tthis.shadowMatrixPaletteId[cnt].setValue(directional._shadowMatrixPalette);\n\t\t\t\tthis.shadowCascadeDistancesId[cnt].setValue(directional._shadowCascadeDistances);\n\t\t\t\tthis.shadowCascadeCountId[cnt].setValue(directional.numCascades);\n\t\t\t\tvar params = directional._shadowRenderParams;\n\t\t\t\tparams.length = 3;\n\t\t\t\tparams[0] = directional._shadowResolution;\n\t\t\t\tparams[1] = normalBias;\n\t\t\t\tparams[2] = bias;\n\t\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t\t}\n\n\t\t\tcnt++;\n\t\t}\n\n\t\treturn cnt;\n\t}\n\n\tsetLTCPositionalLight(wtm, cnt) {\n\t\tvar hWidth = wtm.transformVector(new Vec3(-0.5, 0, 0));\n\t\tthis.lightWidth[cnt][0] = hWidth.x;\n\t\tthis.lightWidth[cnt][1] = hWidth.y;\n\t\tthis.lightWidth[cnt][2] = hWidth.z;\n\t\tthis.lightWidthId[cnt].setValue(this.lightWidth[cnt]);\n\t\tvar hHeight = wtm.transformVector(new Vec3(0, 0, 0.5));\n\t\tthis.lightHeight[cnt][0] = hHeight.x;\n\t\tthis.lightHeight[cnt][1] = hHeight.y;\n\t\tthis.lightHeight[cnt][2] = hHeight.z;\n\t\tthis.lightHeightId[cnt].setValue(this.lightHeight[cnt]);\n\t}\n\n\tdispatchOmniLight(scene, scope, omni, cnt) {\n\t\tvar wtm = omni._node.getWorldTransform();\n\n\t\tif (!this.lightColorId[cnt]) {\n\t\t\tthis._resolveLight(scope, cnt);\n\t\t}\n\n\t\tthis.lightRadiusId[cnt].setValue(omni.attenuationEnd);\n\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? omni._linearFinalColor : omni._finalColor);\n\t\twtm.getTranslation(omni._position);\n\t\tthis.lightPos[cnt][0] = omni._position.x;\n\t\tthis.lightPos[cnt][1] = omni._position.y;\n\t\tthis.lightPos[cnt][2] = omni._position.z;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\n\t\tif (omni.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\tthis.setLTCPositionalLight(wtm, cnt);\n\t\t}\n\n\t\tif (omni.castShadows) {\n\t\t\tconst lightRenderData = omni.getRenderData(null, 0);\n\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\tvar params = omni._shadowRenderParams;\n\t\t\tparams.length = 4;\n\t\t\tparams[0] = omni._shadowResolution;\n\t\t\tparams[1] = omni._normalOffsetBias;\n\t\t\tparams[2] = omni.shadowBias;\n\t\t\tparams[3] = 1.0 / omni.attenuationEnd;\n\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t}\n\n\t\tif (omni._cookie) {\n\t\t\tthis.lightCookieId[cnt].setValue(omni._cookie);\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(wtm.data);\n\t\t\tthis.lightCookieIntId[cnt].setValue(omni.cookieIntensity);\n\t\t}\n\t}\n\n\tdispatchSpotLight(scene, scope, spot, cnt) {\n\t\tvar wtm = spot._node.getWorldTransform();\n\n\t\tif (!this.lightColorId[cnt]) {\n\t\t\tthis._resolveLight(scope, cnt);\n\t\t}\n\n\t\tthis.lightInAngleId[cnt].setValue(spot._innerConeAngleCos);\n\t\tthis.lightOutAngleId[cnt].setValue(spot._outerConeAngleCos);\n\t\tthis.lightRadiusId[cnt].setValue(spot.attenuationEnd);\n\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? spot._linearFinalColor : spot._finalColor);\n\t\twtm.getTranslation(spot._position);\n\t\tthis.lightPos[cnt][0] = spot._position.x;\n\t\tthis.lightPos[cnt][1] = spot._position.y;\n\t\tthis.lightPos[cnt][2] = spot._position.z;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\n\t\tif (spot.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\tthis.setLTCPositionalLight(wtm, cnt);\n\t\t}\n\n\t\twtm.getY(spot._direction).mulScalar(-1);\n\n\t\tspot._direction.normalize();\n\n\t\tthis.lightDir[cnt][0] = spot._direction.x;\n\t\tthis.lightDir[cnt][1] = spot._direction.y;\n\t\tthis.lightDir[cnt][2] = spot._direction.z;\n\t\tthis.lightDirId[cnt].setValue(this.lightDir[cnt]);\n\t\tlet cookieMatrix;\n\n\t\tif (spot.castShadows) {\n\t\t\tvar bias;\n\n\t\t\tif (spot._isVsm) {\n\t\t\t\tbias = -0.00001 * 20;\n\t\t\t} else {\n\t\t\t\tbias = spot.shadowBias * 20;\n\t\t\t\tif (!this.device.webgl2 && this.device.extStandardDerivatives) bias *= -100;\n\t\t\t}\n\n\t\t\tvar normalBias = spot._isVsm ? spot.vsmBias / (spot.attenuationEnd / 7.0) : spot._normalOffsetBias;\n\t\t\tconst lightRenderData = spot.getRenderData(null, 0);\n\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(lightRenderData.shadowMatrix.data);\n\t\t\tvar params = spot._shadowRenderParams;\n\t\t\tparams.length = 4;\n\t\t\tparams[0] = spot._shadowResolution;\n\t\t\tparams[1] = normalBias;\n\t\t\tparams[2] = bias;\n\t\t\tparams[3] = 1.0 / spot.attenuationEnd;\n\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t\tcookieMatrix = lightRenderData.shadowMatrix;\n\t\t}\n\n\t\tif (spot._cookie) {\n\t\t\tthis.lightCookieId[cnt].setValue(spot._cookie);\n\n\t\t\tif (!spot.castShadows) {\n\t\t\t\tconst cookieCam = ForwardRenderer.getSpotCookieCamera();\n\t\t\t\tcookieCam.fov = spot._outerConeAngle * 2;\n\t\t\t\tconst cookieNode = cookieCam._node;\n\t\t\t\tcookieNode.setPosition(spot._node.getPosition());\n\t\t\t\tcookieNode.setRotation(spot._node.getRotation());\n\t\t\t\tcookieNode.rotateLocal(-90, 0, 0);\n\t\t\t\tshadowCamView.setTRS(cookieNode.getPosition(), cookieNode.getRotation(), Vec3.ONE).invert();\n\t\t\t\tshadowCamViewProj.mul2(cookieCam.projectionMatrix, shadowCamView);\n\t\t\t\tcookieMatrix = spot.cookieMatrix;\n\t\t\t\tcookieMatrix.mul2(ShadowRenderer.scaleShiftMatrix, shadowCamViewProj);\n\t\t\t}\n\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(cookieMatrix.data);\n\t\t\tthis.lightCookieIntId[cnt].setValue(spot.cookieIntensity);\n\n\t\t\tif (spot._cookieTransform) {\n\t\t\t\tspot._cookieTransformUniform[0] = spot._cookieTransform.x;\n\t\t\t\tspot._cookieTransformUniform[1] = spot._cookieTransform.y;\n\t\t\t\tspot._cookieTransformUniform[2] = spot._cookieTransform.z;\n\t\t\t\tspot._cookieTransformUniform[3] = spot._cookieTransform.w;\n\t\t\t\tthis.lightCookieMatrixId[cnt].setValue(spot._cookieTransformUniform);\n\t\t\t\tspot._cookieOffsetUniform[0] = spot._cookieOffset.x;\n\t\t\t\tspot._cookieOffsetUniform[1] = spot._cookieOffset.y;\n\t\t\t\tthis.lightCookieOffsetId[cnt].setValue(spot._cookieOffsetUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispatchLocalLights(sortedLights, scene, mask, usedDirLights, staticLightList) {\n\t\tvar i;\n\t\tvar omni, spot;\n\t\tvar omnis = sortedLights[LIGHTTYPE_OMNI];\n\t\tvar spts = sortedLights[LIGHTTYPE_SPOT];\n\t\tvar numDirs = usedDirLights;\n\t\tvar numOmnis = omnis.length;\n\t\tvar numSpts = spts.length;\n\t\tvar cnt = numDirs;\n\t\tvar scope = this.device.scope;\n\n\t\tfor (i = 0; i < numOmnis; i++) {\n\t\t\tomni = omnis[i];\n\t\t\tif (!(omni.mask & mask)) continue;\n\t\t\tif (omni.isStatic) continue;\n\t\t\tthis.dispatchOmniLight(scene, scope, omni, cnt);\n\t\t\tcnt++;\n\t\t}\n\n\t\tvar staticId = 0;\n\n\t\tif (staticLightList) {\n\t\t\tomni = staticLightList[staticId];\n\n\t\t\twhile (omni && omni._type === LIGHTTYPE_OMNI) {\n\t\t\t\tthis.dispatchOmniLight(scene, scope, omni, cnt);\n\t\t\t\tcnt++;\n\t\t\t\tstaticId++;\n\t\t\t\tomni = staticLightList[staticId];\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < numSpts; i++) {\n\t\t\tspot = spts[i];\n\t\t\tif (!(spot.mask & mask)) continue;\n\t\t\tif (spot.isStatic) continue;\n\t\t\tthis.dispatchSpotLight(scene, scope, spot, cnt);\n\t\t\tcnt++;\n\t\t}\n\n\t\tif (staticLightList) {\n\t\t\tspot = staticLightList[staticId];\n\n\t\t\twhile (spot && spot._type === LIGHTTYPE_SPOT) {\n\t\t\t\tthis.dispatchSpotLight(scene, scope, spot, cnt);\n\t\t\t\tcnt++;\n\t\t\t\tstaticId++;\n\t\t\t\tspot = staticLightList[staticId];\n\t\t\t}\n\t\t}\n\t}\n\n\tcull(camera, drawCalls, visibleList) {\n\t\tvar visibleLength = 0;\n\t\tvar i, drawCall, visible;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar cullingMask = camera.cullingMask || 0xFFFFFFFF;\n\n\t\tif (!camera.frustumCulling) {\n\t\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\t\tdrawCall = drawCalls[i];\n\t\t\t\tif (!drawCall.visible && !drawCall.command) continue;\n\t\t\t\tif (drawCall.mask && (drawCall.mask & cullingMask) === 0) continue;\n\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\tvisibleLength++;\n\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t}\n\n\t\t\treturn visibleLength;\n\t\t}\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (!drawCall.command) {\n\t\t\t\tif (!drawCall.visible) continue;\n\t\t\t\tvisible = true;\n\t\t\t\tif (drawCall.mask && (drawCall.mask & cullingMask) === 0) continue;\n\n\t\t\t\tif (drawCall.cull) {\n\t\t\t\t\tvisible = drawCall._isVisible(camera);\n\t\t\t\t}\n\n\t\t\t\tif (visible) {\n\t\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\t\tvisibleLength++;\n\t\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\tvisibleLength++;\n\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleLength;\n\t}\n\n\tcullLights(camera, lights) {\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tconst light = lights[i];\n\n\t\t\tif (!light.visibleThisFrame && light.enabled) {\n\t\t\t\tif (light._type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t} else {\n\t\t\t\t\tlight.getBoundingSphere(tempSphere$1);\n\n\t\t\t\t\tif (camera.frustum.containsSphere(tempSphere$1)) {\n\t\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (light.castShadows && !light.shadowMap) {\n\t\t\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateCpuSkinMatrices(drawCalls) {\n\t\t_skinUpdateIndex++;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tif (drawCallsCount === 0) return;\n\t\tvar i, si;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tsi = drawCalls[i].skinInstance;\n\n\t\t\tif (si) {\n\t\t\t\tsi.updateMatrices(drawCalls[i].node, _skinUpdateIndex);\n\t\t\t\tsi._dirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateGpuSkinMatrices(drawCalls) {\n\t\tvar i, skin;\n\t\tvar drawCallsCount = drawCalls.length;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tif (!drawCalls[i].visibleThisFrame) continue;\n\t\t\tskin = drawCalls[i].skinInstance;\n\n\t\t\tif (skin) {\n\t\t\t\tif (skin._dirty) {\n\t\t\t\t\tskin.updateMatrixPalette(drawCalls[i].node, _skinUpdateIndex);\n\t\t\t\t\tskin._dirty = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMorphing(drawCalls) {\n\t\tvar i, morphInst;\n\t\tvar drawCallsCount = drawCalls.length;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tmorphInst = drawCalls[i].morphInstance;\n\n\t\t\tif (morphInst && morphInst._dirty && drawCalls[i].visibleThisFrame) {\n\t\t\t\tmorphInst.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetBaseConstants(device, material) {\n\t\tdevice.setCullMode(material.cull);\n\n\t\tif (material.opacityMap) {\n\t\t\tthis.opacityMapId.setValue(material.opacityMap);\n\t\t\tthis.alphaTestId.setValue(material.alphaTest);\n\t\t}\n\t}\n\n\tsetSkinning(device, meshInstance, material) {\n\t\tif (meshInstance.skinInstance) {\n\t\t\tthis._skinDrawCalls++;\n\n\t\t\tif (device.supportsBoneTextures) {\n\t\t\t\tboneTexture = meshInstance.skinInstance.boneTexture;\n\t\t\t\tthis.boneTextureId.setValue(boneTexture);\n\t\t\t\tboneTextureSize[0] = boneTexture.width;\n\t\t\t\tboneTextureSize[1] = boneTexture.height;\n\t\t\t\tboneTextureSize[2] = 1.0 / boneTexture.width;\n\t\t\t\tboneTextureSize[3] = 1.0 / boneTexture.height;\n\t\t\t\tthis.boneTextureSizeId.setValue(boneTextureSize);\n\t\t\t} else {\n\t\t\t\tthis.poseMatrixId.setValue(meshInstance.skinInstance.matrixPalette);\n\t\t\t}\n\t\t}\n\t}\n\n\tdrawInstance(device, meshInstance, mesh, style, normal) {\n\t\tinstancingData = meshInstance.instancingData;\n\n\t\tif (instancingData) {\n\t\t\tif (instancingData.count > 0) {\n\t\t\t\tthis._instancedDrawCalls++;\n\t\t\t\tdevice.setVertexBuffer(instancingData.vertexBuffer);\n\t\t\t\tdevice.draw(mesh.primitive[style], instancingData.count);\n\n\t\t\t\tif (instancingData.vertexBuffer === _autoInstanceBuffer) {\n\t\t\t\t\tthis._removedByInstancing += instancingData.count;\n\t\t\t\t\tmeshInstance.instancingData = null;\n\t\t\t\t\treturn instancingData.count - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmodelMatrix = meshInstance.node.worldTransform;\n\t\t\tthis.modelMatrixId.setValue(modelMatrix.data);\n\n\t\t\tif (normal) {\n\t\t\t\tnormalMatrix = meshInstance.node.normalMatrix;\n\n\t\t\t\tif (meshInstance.node._dirtyNormal) {\n\t\t\t\t\tmodelMatrix.invertTo3x3(normalMatrix);\n\t\t\t\t\tnormalMatrix.transpose();\n\t\t\t\t\tmeshInstance.node._dirtyNormal = false;\n\t\t\t\t}\n\n\t\t\t\tthis.normalMatrixId.setValue(normalMatrix.data);\n\t\t\t}\n\n\t\t\tdevice.draw(mesh.primitive[style]);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tdrawInstance2(device, meshInstance, mesh, style) {\n\t\tinstancingData = meshInstance.instancingData;\n\n\t\tif (instancingData) {\n\t\t\tif (instancingData.count > 0) {\n\t\t\t\tthis._instancedDrawCalls++;\n\t\t\t\tdevice.draw(mesh.primitive[style], instancingData.count, true);\n\n\t\t\t\tif (instancingData.vertexBuffer === _autoInstanceBuffer) {\n\t\t\t\t\tthis._removedByInstancing += instancingData.count;\n\t\t\t\t\tmeshInstance.instancingData = null;\n\t\t\t\t\treturn instancingData.count - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdevice.draw(mesh.primitive[style], undefined, true);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\trenderShadows(lights, camera) {\n\t\tvar device = this.device;\n\t\tdevice.grabPassAvailable = false;\n\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tthis._shadowRenderer.render(lights[i], camera);\n\t\t}\n\n\t\tif (device.webgl2) {\n\t\t\tdevice.setDepthBias(false);\n\t\t} else if (device.extStandardDerivatives) {\n\t\t\tthis.polygonOffset[0] = 0;\n\t\t\tthis.polygonOffset[1] = 0;\n\t\t\tthis.polygonOffsetId.setValue(this.polygonOffset);\n\t\t}\n\n\t\tdevice.grabPassAvailable = true;\n\t}\n\n\tupdateShader(meshInstance, objDefs, staticLightList, pass, sortedLights) {\n\t\tmeshInstance.material._scene = this.scene;\n\n\t\tif (meshInstance.material._dirtyBlend) {\n\t\t\tthis.scene.layers._dirtyBlend = true;\n\t\t}\n\n\t\tmeshInstance.material.updateShader(this.device, this.scene, objDefs, staticLightList, pass, sortedLights);\n\t\tmeshInstance._shader[pass] = meshInstance.material.shader;\n\t}\n\n\tsetCullMode(cullFaces, flip, drawCall) {\n\t\tvar material = drawCall.material;\n\t\tvar mode = CULLFACE_NONE;\n\n\t\tif (cullFaces) {\n\t\t\tvar flipFaces = 1;\n\n\t\t\tif (material.cull > CULLFACE_NONE && material.cull < CULLFACE_FRONTANDBACK) {\n\t\t\t\tif (drawCall.flipFaces) flipFaces *= -1;\n\t\t\t\tif (flip) flipFaces *= -1;\n\t\t\t\tvar wt = drawCall.node.worldTransform;\n\t\t\t\twt.getX(worldMatX);\n\t\t\t\twt.getY(worldMatY);\n\t\t\t\twt.getZ(worldMatZ);\n\t\t\t\tworldMatX.cross(worldMatX, worldMatY);\n\n\t\t\t\tif (worldMatX.dot(worldMatZ) < 0) {\n\t\t\t\t\tflipFaces *= -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (flipFaces < 0) {\n\t\t\t\tmode = material.cull === CULLFACE_FRONT ? CULLFACE_BACK : CULLFACE_FRONT;\n\t\t\t} else {\n\t\t\t\tmode = material.cull;\n\t\t\t}\n\t\t}\n\n\t\tthis.device.setCullMode(mode);\n\n\t\tif (mode === CULLFACE_NONE && material.cull === CULLFACE_NONE) {\n\t\t\tvar wt2 = drawCall.node.worldTransform;\n\t\t\twt2.getX(worldMatX);\n\t\t\twt2.getY(worldMatY);\n\t\t\twt2.getZ(worldMatZ);\n\t\t\tworldMatX.cross(worldMatX, worldMatY);\n\n\t\t\tif (worldMatX.dot(worldMatZ) < 0) {\n\t\t\t\tthis.twoSidedLightingNegScaleFactorId.setValue(-1.0);\n\t\t\t} else {\n\t\t\t\tthis.twoSidedLightingNegScaleFactorId.setValue(1.0);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetVertexBuffers(device, mesh) {\n\t\tdevice.setVertexBuffer(mesh.vertexBuffer);\n\t}\n\n\tsetMorphing(device, morphInstance) {\n\t\tif (morphInstance) {\n\t\t\tif (morphInstance.morph.useTextureMorph) {\n\t\t\t\tdevice.setVertexBuffer(morphInstance.morph.vertexBufferIds);\n\t\t\t\tthis.morphPositionTex.setValue(morphInstance.texturePositions);\n\t\t\t\tthis.morphNormalTex.setValue(morphInstance.textureNormals);\n\t\t\t\tthis.morphTexParams.setValue(morphInstance._textureParams);\n\t\t\t} else {\n\t\t\t\tvar vb, semantic;\n\n\t\t\t\tfor (var t = 0; t < morphInstance._activeVertexBuffers.length; t++) {\n\t\t\t\t\tvb = morphInstance._activeVertexBuffers[t];\n\n\t\t\t\t\tif (vb) {\n\t\t\t\t\t\tsemantic = SEMANTIC_ATTR + (t + 8);\n\t\t\t\t\t\tvb.format.elements[0].name = semantic;\n\t\t\t\t\t\tvb.format.elements[0].scopeId = device.scope.resolve(semantic);\n\t\t\t\t\t\tvb.format.update();\n\t\t\t\t\t\tdevice.setVertexBuffer(vb);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.morphWeightsA.setValue(morphInstance._shaderMorphWeightsA);\n\t\t\t\tthis.morphWeightsB.setValue(morphInstance._shaderMorphWeightsB);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispatchViewPos(position) {\n\t\tconst vp = this.viewPos;\n\t\tvp[0] = position.x;\n\t\tvp[1] = position.y;\n\t\tvp[2] = position.z;\n\t\tthis.viewPosId.setValue(vp);\n\t}\n\n\trenderForward(camera, drawCalls, drawCallsCount, sortedLights, pass, cullingMask, drawCallback, layer, flipFaces) {\n\t\tvar device = this.device;\n\t\tvar scene = this.scene;\n\t\tvar vrDisplay = camera.vrDisplay;\n\t\tvar lightHash = layer ? layer._lightHash : 0;\n\t\tvar passFlag = 1 << pass;\n\t\tvar i, drawCall, mesh, material, objDefs, variantKey, lightMask, style, usedDirLights;\n\t\tvar prevMaterial = null,\n\t\t\t\tprevObjDefs,\n\t\t\t\tprevLightMask,\n\t\t\t\tprevStatic;\n\t\tvar stencilFront, stencilBack;\n\t\tvar halfWidth = device.width * 0.5;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\t\t\tif (cullingMask && drawCall.mask && !(cullingMask & drawCall.mask)) continue;\n\n\t\t\tif (drawCall.command) {\n\t\t\t\tdrawCall.command();\n\t\t\t} else {\n\t\t\t\tmesh = drawCall.mesh;\n\t\t\t\tmaterial = drawCall.material;\n\t\t\t\tobjDefs = drawCall._shaderDefs;\n\t\t\t\tlightMask = drawCall.mask;\n\t\t\t\tthis.setSkinning(device, drawCall, material);\n\n\t\t\t\tif (material && material === prevMaterial && objDefs !== prevObjDefs) {\n\t\t\t\t\tprevMaterial = null;\n\t\t\t\t}\n\n\t\t\t\tif (drawCall.isStatic || prevStatic) {\n\t\t\t\t\tprevMaterial = null;\n\t\t\t\t}\n\n\t\t\t\tif (material !== prevMaterial) {\n\t\t\t\t\tthis._materialSwitches++;\n\n\t\t\t\t\tif (material.dirty) {\n\t\t\t\t\t\tmaterial.updateUniforms();\n\t\t\t\t\t\tmaterial.dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!drawCall._shader[pass] || drawCall._shaderDefs !== objDefs || drawCall._lightHash !== lightHash) {\n\t\t\t\t\t\tif (!drawCall.isStatic) {\n\t\t\t\t\t\t\tvariantKey = pass + \"_\" + objDefs + \"_\" + lightHash;\n\t\t\t\t\t\t\tdrawCall._shader[pass] = material.variants[variantKey];\n\n\t\t\t\t\t\t\tif (!drawCall._shader[pass]) {\n\t\t\t\t\t\t\t\tthis.updateShader(drawCall, objDefs, null, pass, sortedLights);\n\t\t\t\t\t\t\t\tmaterial.variants[variantKey] = drawCall._shader[pass];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.updateShader(drawCall, objDefs, drawCall._staticLightList, pass, sortedLights);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdrawCall._shaderDefs = objDefs;\n\t\t\t\t\t\tdrawCall._lightHash = lightHash;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!drawCall._shader[pass].failed && !device.setShader(drawCall._shader[pass])) {\n\t\t\t\t\t\tdrawCall._shader[pass].failed = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterial.setParameters(device);\n\n\t\t\t\t\tif (!prevMaterial || lightMask !== prevLightMask) {\n\t\t\t\t\t\tusedDirLights = this.dispatchDirectLights(sortedLights[LIGHTTYPE_DIRECTIONAL], scene, lightMask, camera);\n\t\t\t\t\t\tthis.dispatchLocalLights(sortedLights, scene, lightMask, usedDirLights, drawCall._staticLightList);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.alphaTestId.setValue(material.alphaTest);\n\t\t\t\t\tdevice.setBlending(material.blend);\n\n\t\t\t\t\tif (material.blend) {\n\t\t\t\t\t\tif (material.separateAlphaBlend) {\n\t\t\t\t\t\t\tdevice.setBlendFunctionSeparate(material.blendSrc, material.blendDst, material.blendSrcAlpha, material.blendDstAlpha);\n\t\t\t\t\t\t\tdevice.setBlendEquationSeparate(material.blendEquation, material.blendAlphaEquation);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setBlendFunction(material.blendSrc, material.blendDst);\n\t\t\t\t\t\t\tdevice.setBlendEquation(material.blendEquation);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdevice.setColorWrite(material.redWrite, material.greenWrite, material.blueWrite, material.alphaWrite);\n\t\t\t\t\tdevice.setDepthWrite(material.depthWrite);\n\n\t\t\t\t\tif (material.depthWrite && !material.depthTest) {\n\t\t\t\t\t\tdevice.setDepthFunc(FUNC_ALWAYS);\n\t\t\t\t\t\tdevice.setDepthTest(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdevice.setDepthFunc(FUNC_LESSEQUAL);\n\t\t\t\t\t\tdevice.setDepthTest(material.depthTest);\n\t\t\t\t\t}\n\n\t\t\t\t\tdevice.setAlphaToCoverage(material.alphaToCoverage);\n\n\t\t\t\t\tif (material.depthBias || material.slopeDepthBias) {\n\t\t\t\t\t\tdevice.setDepthBias(true);\n\t\t\t\t\t\tdevice.setDepthBiasValues(material.depthBias, material.slopeDepthBias);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdevice.setDepthBias(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setCullMode(camera._cullFaces, flipFaces, drawCall);\n\t\t\t\tstencilFront = drawCall.stencilFront || material.stencilFront;\n\t\t\t\tstencilBack = drawCall.stencilBack || material.stencilBack;\n\n\t\t\t\tif (stencilFront || stencilBack) {\n\t\t\t\t\tdevice.setStencilTest(true);\n\n\t\t\t\t\tif (stencilFront === stencilBack) {\n\t\t\t\t\t\tdevice.setStencilFunc(stencilFront.func, stencilFront.ref, stencilFront.readMask);\n\t\t\t\t\t\tdevice.setStencilOperation(stencilFront.fail, stencilFront.zfail, stencilFront.zpass, stencilFront.writeMask);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (stencilFront) {\n\t\t\t\t\t\t\tdevice.setStencilFuncFront(stencilFront.func, stencilFront.ref, stencilFront.readMask);\n\t\t\t\t\t\t\tdevice.setStencilOperationFront(stencilFront.fail, stencilFront.zfail, stencilFront.zpass, stencilFront.writeMask);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setStencilFuncFront(FUNC_ALWAYS, 0, 0xFF);\n\t\t\t\t\t\t\tdevice.setStencilOperationFront(STENCILOP_KEEP, STENCILOP_KEEP, STENCILOP_KEEP, 0xFF);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (stencilBack) {\n\t\t\t\t\t\t\tdevice.setStencilFuncBack(stencilBack.func, stencilBack.ref, stencilBack.readMask);\n\t\t\t\t\t\t\tdevice.setStencilOperationBack(stencilBack.fail, stencilBack.zfail, stencilBack.zpass, stencilBack.writeMask);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setStencilFuncBack(FUNC_ALWAYS, 0, 0xFF);\n\t\t\t\t\t\t\tdevice.setStencilOperationBack(STENCILOP_KEEP, STENCILOP_KEEP, STENCILOP_KEEP, 0xFF);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdevice.setStencilTest(false);\n\t\t\t\t}\n\n\t\t\t\tdrawCall.setParameters(device, passFlag);\n\t\t\t\tthis.setVertexBuffers(device, mesh);\n\t\t\t\tthis.setMorphing(device, drawCall.morphInstance);\n\t\t\t\tstyle = drawCall.renderStyle;\n\t\t\t\tdevice.setIndexBuffer(mesh.indexBuffer[style]);\n\n\t\t\t\tif (drawCallback) {\n\t\t\t\t\tdrawCallback(drawCall, i);\n\t\t\t\t}\n\n\t\t\t\tif (vrDisplay && vrDisplay.presenting) {\n\t\t\t\t\tdevice.setViewport(0, 0, halfWidth, device.height);\n\t\t\t\t\tthis.projId.setValue(projL.data);\n\t\t\t\t\tthis.projSkyboxId.setValue(projL.data);\n\t\t\t\t\tthis.viewInvId.setValue(viewInvL.data);\n\t\t\t\t\tthis.viewId.setValue(viewL.data);\n\t\t\t\t\tthis.viewId3.setValue(viewMat3L.data);\n\t\t\t\t\tthis.viewProjId.setValue(viewProjMatL.data);\n\t\t\t\t\tthis.dispatchViewPos(viewPosL);\n\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t\tdevice.setViewport(halfWidth, 0, halfWidth, device.height);\n\t\t\t\t\tthis.projId.setValue(projR.data);\n\t\t\t\t\tthis.projSkyboxId.setValue(projR.data);\n\t\t\t\t\tthis.viewInvId.setValue(viewInvR.data);\n\t\t\t\t\tthis.viewId.setValue(viewR.data);\n\t\t\t\t\tthis.viewId3.setValue(viewMat3R.data);\n\t\t\t\t\tthis.viewProjId.setValue(viewProjMatR.data);\n\t\t\t\t\tthis.dispatchViewPos(viewPosR);\n\t\t\t\t\ti += this.drawInstance2(device, drawCall, mesh, style);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t} else if (camera.xr && camera.xr.session && camera.xr.views.length) {\n\t\t\t\t\tvar views = camera.xr.views;\n\n\t\t\t\t\tfor (var v = 0; v < views.length; v++) {\n\t\t\t\t\t\tvar view = views[v];\n\t\t\t\t\t\tdevice.setViewport(view.viewport.x, view.viewport.y, view.viewport.z, view.viewport.w);\n\t\t\t\t\t\tthis.projId.setValue(view.projMat.data);\n\t\t\t\t\t\tthis.projSkyboxId.setValue(view.projMat.data);\n\t\t\t\t\t\tthis.viewId.setValue(view.viewOffMat.data);\n\t\t\t\t\t\tthis.viewInvId.setValue(view.viewInvOffMat.data);\n\t\t\t\t\t\tthis.viewId3.setValue(view.viewMat3.data);\n\t\t\t\t\t\tthis.viewProjId.setValue(view.projViewOffMat.data);\n\t\t\t\t\t\tthis.viewPosId.setValue(view.position);\n\n\t\t\t\t\t\tif (v === 0) {\n\t\t\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ti += this.drawInstance2(device, drawCall, mesh, style);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t}\n\n\t\t\t\tif (i < drawCallsCount - 1 && drawCalls[i + 1].material === material) {\n\t\t\t\t\tmaterial.setParameters(device, drawCall.parameters);\n\t\t\t\t}\n\n\t\t\t\tprevMaterial = material;\n\t\t\t\tprevObjDefs = objDefs;\n\t\t\t\tprevLightMask = lightMask;\n\t\t\t\tprevStatic = drawCall.isStatic;\n\t\t\t}\n\t\t}\n\n\t\tdevice.updateEnd();\n\t}\n\n\tsetupInstancing(device) {\n\t\tif (device.enableAutoInstancing) {\n\t\t\tif (!_autoInstanceBuffer) {\n\t\t\t\t_autoInstanceBuffer = new VertexBuffer(device, VertexFormat.defaultInstancingFormat, device.autoInstancingMaxObjects, BUFFER_DYNAMIC);\n\t\t\t}\n\t\t}\n\t}\n\n\trevertStaticMeshes(meshInstances) {\n\t\tvar i;\n\t\tvar drawCalls = meshInstances;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar drawCall;\n\t\tvar newDrawCalls = [];\n\t\tvar prevStaticSource;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (drawCall._staticSource) {\n\t\t\t\tif (drawCall._staticSource !== prevStaticSource) {\n\t\t\t\t\tnewDrawCalls.push(drawCall._staticSource);\n\t\t\t\t\tprevStaticSource = drawCall._staticSource;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t}\n\t\t}\n\n\t\tmeshInstances.length = newDrawCalls.length;\n\n\t\tfor (i = 0; i < newDrawCalls.length; i++) {\n\t\t\tmeshInstances[i] = newDrawCalls[i];\n\t\t}\n\t}\n\n\tprepareStaticMeshes(meshInstances, lights) {\n\t\tvar i, j, k, v, s, index;\n\t\tvar device = this.device;\n\t\tthis.scene;\n\t\tvar drawCalls = meshInstances;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar drawCall, light;\n\t\tvar newDrawCalls = [];\n\t\tvar mesh;\n\t\tvar indices, verts, numTris, elems, vertSize, offsetP, baseIndex;\n\n\t\tvar _x, _y, _z;\n\n\t\tvar minx, miny, minz, maxx, maxy, maxz;\n\t\tvar minv, maxv;\n\t\tvar minVec = new Vec3();\n\t\tvar maxVec = new Vec3();\n\t\tvar localLightBounds = new BoundingBox();\n\t\tvar invMatrix = new Mat4();\n\t\tvar triLightComb = [];\n\t\tvar triLightCombUsed;\n\t\tvar indexBuffer, vertexBuffer;\n\t\tvar combIndices, combIbName, combIb;\n\t\tvar lightTypePass;\n\t\tvar lightAabb = [];\n\t\tvar aabb;\n\t\tvar triBounds = [];\n\t\tvar staticLights = [];\n\t\tvar bit;\n\t\tvar lht;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (!drawCall.isStatic) {\n\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t} else {\n\t\t\t\taabb = drawCall.aabb;\n\t\t\t\tstaticLights.length = 0;\n\n\t\t\t\tfor (lightTypePass = LIGHTTYPE_OMNI; lightTypePass <= LIGHTTYPE_SPOT; lightTypePass++) {\n\t\t\t\t\tfor (j = 0; j < lights.length; j++) {\n\t\t\t\t\t\tlight = lights[j];\n\t\t\t\t\t\tif (light._type !== lightTypePass) continue;\n\n\t\t\t\t\t\tif (light.enabled) {\n\t\t\t\t\t\t\tif (light.mask & drawCall.mask) {\n\t\t\t\t\t\t\t\tif (light.isStatic) {\n\t\t\t\t\t\t\t\t\tif (!lightAabb[j]) {\n\t\t\t\t\t\t\t\t\t\tlightAabb[j] = new BoundingBox();\n\n\t\t\t\t\t\t\t\t\t\tlight._node.getWorldTransform();\n\n\t\t\t\t\t\t\t\t\t\tlight.getBoundingSphere(tempSphere$1);\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].center.copy(tempSphere$1.center);\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.x = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.y = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.z = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (!lightAabb[j].intersects(aabb)) continue;\n\t\t\t\t\t\t\t\t\tstaticLights.push(j);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (staticLights.length === 0) {\n\t\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tmesh = drawCall.mesh;\n\t\t\t\tvertexBuffer = mesh.vertexBuffer;\n\t\t\t\tindexBuffer = mesh.indexBuffer[drawCall.renderStyle];\n\t\t\t\tindices = indexBuffer.bytesPerIndex === 2 ? new Uint16Array(indexBuffer.lock()) : new Uint32Array(indexBuffer.lock());\n\t\t\t\tnumTris = mesh.primitive[drawCall.renderStyle].count / 3;\n\t\t\t\tbaseIndex = mesh.primitive[drawCall.renderStyle].base;\n\t\t\t\telems = vertexBuffer.format.elements;\n\t\t\t\tvertSize = vertexBuffer.format.size / 4;\n\t\t\t\tverts = new Float32Array(vertexBuffer.storage);\n\n\t\t\t\tfor (k = 0; k < elems.length; k++) {\n\t\t\t\t\tif (elems[k].name === SEMANTIC_POSITION) {\n\t\t\t\t\t\toffsetP = elems[k].offset / 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttriLightComb.length = numTris;\n\n\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\ttriLightComb[k] = 0;\n\t\t\t\t}\n\n\t\t\t\ttriLightCombUsed = false;\n\t\t\t\ttriBounds.length = numTris * 6;\n\n\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\tminx = Number.MAX_VALUE;\n\t\t\t\t\tminy = Number.MAX_VALUE;\n\t\t\t\t\tminz = Number.MAX_VALUE;\n\t\t\t\t\tmaxx = -Number.MAX_VALUE;\n\t\t\t\t\tmaxy = -Number.MAX_VALUE;\n\t\t\t\t\tmaxz = -Number.MAX_VALUE;\n\n\t\t\t\t\tfor (v = 0; v < 3; v++) {\n\t\t\t\t\t\tindex = indices[k * 3 + v + baseIndex];\n\t\t\t\t\t\tindex = index * vertSize + offsetP;\n\t\t\t\t\t\t_x = verts[index];\n\t\t\t\t\t\t_y = verts[index + 1];\n\t\t\t\t\t\t_z = verts[index + 2];\n\t\t\t\t\t\tif (_x < minx) minx = _x;\n\t\t\t\t\t\tif (_y < miny) miny = _y;\n\t\t\t\t\t\tif (_z < minz) minz = _z;\n\t\t\t\t\t\tif (_x > maxx) maxx = _x;\n\t\t\t\t\t\tif (_y > maxy) maxy = _y;\n\t\t\t\t\t\tif (_z > maxz) maxz = _z;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex = k * 6;\n\t\t\t\t\ttriBounds[index] = minx;\n\t\t\t\t\ttriBounds[index + 1] = miny;\n\t\t\t\t\ttriBounds[index + 2] = minz;\n\t\t\t\t\ttriBounds[index + 3] = maxx;\n\t\t\t\t\ttriBounds[index + 4] = maxy;\n\t\t\t\t\ttriBounds[index + 5] = maxz;\n\t\t\t\t}\n\n\t\t\t\tfor (s = 0; s < staticLights.length; s++) {\n\t\t\t\t\tj = staticLights[s];\n\t\t\t\t\tlight = lights[j];\n\t\t\t\t\tinvMatrix.copy(drawCall.node.worldTransform).invert();\n\t\t\t\t\tlocalLightBounds.setFromTransformedAabb(lightAabb[j], invMatrix);\n\t\t\t\t\tminv = localLightBounds.getMin();\n\t\t\t\t\tmaxv = localLightBounds.getMax();\n\t\t\t\t\tbit = 1 << s;\n\n\t\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\t\tindex = k * 6;\n\n\t\t\t\t\t\tif (triBounds[index] <= maxv.x && triBounds[index + 3] >= minv.x && triBounds[index + 1] <= maxv.y && triBounds[index + 4] >= minv.y && triBounds[index + 2] <= maxv.z && triBounds[index + 5] >= minv.z) {\n\t\t\t\t\t\t\ttriLightComb[k] |= bit;\n\t\t\t\t\t\t\ttriLightCombUsed = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (triLightCombUsed) {\n\t\t\t\t\tcombIndices = {};\n\n\t\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\t\tj = k * 3 + baseIndex;\n\t\t\t\t\t\tcombIbName = triLightComb[k];\n\t\t\t\t\t\tif (!combIndices[combIbName]) combIndices[combIbName] = [];\n\t\t\t\t\t\tcombIb = combIndices[combIbName];\n\t\t\t\t\t\tcombIb.push(indices[j]);\n\t\t\t\t\t\tcombIb.push(indices[j + 1]);\n\t\t\t\t\t\tcombIb.push(indices[j + 2]);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (combIbName in combIndices) {\n\t\t\t\t\t\tcombIb = combIndices[combIbName];\n\t\t\t\t\t\tvar ib = new IndexBuffer(device, indexBuffer.format, combIb.length, indexBuffer.usage);\n\t\t\t\t\t\tvar ib2 = ib.bytesPerIndex === 2 ? new Uint16Array(ib.lock()) : new Uint32Array(ib.lock());\n\t\t\t\t\t\tib2.set(combIb);\n\t\t\t\t\t\tib.unlock();\n\t\t\t\t\t\tminx = Number.MAX_VALUE;\n\t\t\t\t\t\tminy = Number.MAX_VALUE;\n\t\t\t\t\t\tminz = Number.MAX_VALUE;\n\t\t\t\t\t\tmaxx = -Number.MAX_VALUE;\n\t\t\t\t\t\tmaxy = -Number.MAX_VALUE;\n\t\t\t\t\t\tmaxz = -Number.MAX_VALUE;\n\n\t\t\t\t\t\tfor (k = 0; k < combIb.length; k++) {\n\t\t\t\t\t\t\tindex = combIb[k];\n\t\t\t\t\t\t\t_x = verts[index * vertSize + offsetP];\n\t\t\t\t\t\t\t_y = verts[index * vertSize + offsetP + 1];\n\t\t\t\t\t\t\t_z = verts[index * vertSize + offsetP + 2];\n\t\t\t\t\t\t\tif (_x < minx) minx = _x;\n\t\t\t\t\t\t\tif (_y < miny) miny = _y;\n\t\t\t\t\t\t\tif (_z < minz) minz = _z;\n\t\t\t\t\t\t\tif (_x > maxx) maxx = _x;\n\t\t\t\t\t\t\tif (_y > maxy) maxy = _y;\n\t\t\t\t\t\t\tif (_z > maxz) maxz = _z;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tminVec.set(minx, miny, minz);\n\t\t\t\t\t\tmaxVec.set(maxx, maxy, maxz);\n\t\t\t\t\t\tvar chunkAabb = new BoundingBox();\n\t\t\t\t\t\tchunkAabb.setMinMax(minVec, maxVec);\n\t\t\t\t\t\tvar mesh2 = new Mesh(device);\n\t\t\t\t\t\tmesh2.vertexBuffer = vertexBuffer;\n\t\t\t\t\t\tmesh2.indexBuffer[0] = ib;\n\t\t\t\t\t\tmesh2.primitive[0].type = PRIMITIVE_TRIANGLES;\n\t\t\t\t\t\tmesh2.primitive[0].base = 0;\n\t\t\t\t\t\tmesh2.primitive[0].count = combIb.length;\n\t\t\t\t\t\tmesh2.primitive[0].indexed = true;\n\t\t\t\t\t\tmesh2.aabb = chunkAabb;\n\t\t\t\t\t\tvar instance = new MeshInstance(mesh2, drawCall.material, drawCall.node);\n\t\t\t\t\t\tinstance.isStatic = drawCall.isStatic;\n\t\t\t\t\t\tinstance.visible = drawCall.visible;\n\t\t\t\t\t\tinstance.layer = drawCall.layer;\n\t\t\t\t\t\tinstance.castShadow = drawCall.castShadow;\n\t\t\t\t\t\tinstance._receiveShadow = drawCall._receiveShadow;\n\t\t\t\t\t\tinstance.cull = drawCall.cull;\n\t\t\t\t\t\tinstance.pick = drawCall.pick;\n\t\t\t\t\t\tinstance.mask = drawCall.mask;\n\t\t\t\t\t\tinstance.parameters = drawCall.parameters;\n\t\t\t\t\t\tinstance._shaderDefs = drawCall._shaderDefs;\n\t\t\t\t\t\tinstance._staticSource = drawCall;\n\n\t\t\t\t\t\tif (drawCall._staticLightList) {\n\t\t\t\t\t\t\tinstance._staticLightList = drawCall._staticLightList;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinstance._staticLightList = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (k = 0; k < staticLights.length; k++) {\n\t\t\t\t\t\t\tbit = 1 << k;\n\n\t\t\t\t\t\t\tif (combIbName & bit) {\n\t\t\t\t\t\t\t\tlht = lights[staticLights[k]];\n\n\t\t\t\t\t\t\t\tif (instance._staticLightList.indexOf(lht) < 0) {\n\t\t\t\t\t\t\t\t\tinstance._staticLightList.push(lht);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinstance._staticLightList.sort(this.lightCompare);\n\n\t\t\t\t\t\tnewDrawCalls.push(instance);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmeshInstances.length = newDrawCalls.length;\n\n\t\tfor (i = 0; i < newDrawCalls.length; i++) {\n\t\t\tmeshInstances[i] = newDrawCalls[i];\n\t\t}\n\t}\n\n\tupdateShaders(drawCalls) {\n\t\tvar mat,\n\t\t\t\tcount = drawCalls.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tmat = drawCalls[i].material;\n\n\t\t\tif (mat) {\n\t\t\t\tif (!_tempMaterialSet.has(mat)) {\n\t\t\t\t\t_tempMaterialSet.add(mat);\n\n\t\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\t\tmat.shader = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_tempMaterialSet.clear();\n\t}\n\n\tupdateLitShaders(drawCalls) {\n\t\tvar mat,\n\t\t\t\tcount = drawCalls.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tmat = drawCalls[i].material;\n\n\t\t\tif (mat) {\n\t\t\t\tif (!_tempMaterialSet.has(mat)) {\n\t\t\t\t\t_tempMaterialSet.add(mat);\n\n\t\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\t\tif (mat.useLighting && (!mat.emitter || mat.emitter.lighting)) {\n\t\t\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\t\t\tmat.shader = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_tempMaterialSet.clear();\n\t}\n\n\tbeginFrame(comp) {\n\t\tvar scene = this.scene;\n\t\tvar meshInstances = comp._meshInstances;\n\t\tvar lights = comp._lights;\n\n\t\tif (scene.updateShaders) {\n\t\t\tthis.updateShaders(meshInstances);\n\t\t\tscene.updateShaders = false;\n\t\t\tscene.updateLitShaders = false;\n\t\t\tscene._shaderVersion++;\n\t\t} else if (scene.updateLitShaders) {\n\t\t\tthis.updateLitShaders(meshInstances);\n\t\t\tscene.updateLitShaders = false;\n\t\t\tscene._shaderVersion++;\n\t\t}\n\n\t\tthis.updateCpuSkinMatrices(meshInstances);\n\t\tvar i;\n\t\tvar len = meshInstances.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tmeshInstances[i].visibleThisFrame = false;\n\t\t}\n\n\t\tlen = lights.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tlights[i].visibleThisFrame = lights[i]._type === LIGHTTYPE_DIRECTIONAL;\n\t\t}\n\t}\n\n\tbeginLayers(comp) {\n\t\tvar scene = this.scene;\n\t\tvar len = comp.layerList.length;\n\t\tvar layer;\n\t\tvar i, j;\n\t\tvar shaderVersion = this.scene._shaderVersion;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcomp.layerList[i]._postRenderCounter = 0;\n\t\t}\n\n\t\tvar transparent;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tlayer = comp.layerList[i];\n\t\t\tlayer._shaderVersion = shaderVersion;\n\t\t\tlayer._preRenderCalledForCameras = 0;\n\t\t\tlayer._postRenderCalledForCameras = 0;\n\t\t\ttransparent = comp.subLayerList[i];\n\n\t\t\tif (transparent) {\n\t\t\t\tlayer._postRenderCounter |= 2;\n\t\t\t} else {\n\t\t\t\tlayer._postRenderCounter |= 1;\n\t\t\t}\n\n\t\t\tlayer._postRenderCounterMax = layer._postRenderCounter;\n\n\t\t\tfor (j = 0; j < layer.cameras.length; j++) {\n\t\t\t\tlayer.instances.prepare(j);\n\t\t\t}\n\n\t\t\tif (layer._needsStaticPrepare && layer._staticLightHash) {\n\t\t\t\tif (layer._staticPrepareDone) {\n\t\t\t\t\tthis.revertStaticMeshes(layer.opaqueMeshInstances);\n\t\t\t\t\tthis.revertStaticMeshes(layer.transparentMeshInstances);\n\t\t\t\t}\n\n\t\t\t\tthis.prepareStaticMeshes(layer.opaqueMeshInstances, layer._lights);\n\t\t\t\tthis.prepareStaticMeshes(layer.transparentMeshInstances, layer._lights);\n\t\t\t\tcomp._dirty = true;\n\t\t\t\tscene.updateShaders = true;\n\t\t\t\tlayer._needsStaticPrepare = false;\n\t\t\t\tlayer._staticPrepareDone = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tgpuUpdate(drawCalls) {\n\t\tthis.updateGpuSkinMatrices(drawCalls);\n\t\tthis.updateMorphing(drawCalls);\n\t}\n\n\tsetSceneConstants() {\n\t\tvar i;\n\t\tvar device = this.device;\n\t\tvar scene = this.scene;\n\t\tthis.dispatchGlobalLights(scene);\n\n\t\tif (scene.fog !== FOG_NONE) {\n\t\t\tthis.fogColor[0] = scene.fogColor.r;\n\t\t\tthis.fogColor[1] = scene.fogColor.g;\n\t\t\tthis.fogColor[2] = scene.fogColor.b;\n\n\t\t\tif (scene.gammaCorrection) {\n\t\t\t\tfor (i = 0; i < 3; i++) {\n\t\t\t\t\tthis.fogColor[i] = Math.pow(this.fogColor[i], 2.2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fogColorId.setValue(this.fogColor);\n\n\t\t\tif (scene.fog === FOG_LINEAR) {\n\t\t\t\tthis.fogStartId.setValue(scene.fogStart);\n\t\t\t\tthis.fogEndId.setValue(scene.fogEnd);\n\t\t\t} else {\n\t\t\t\tthis.fogDensityId.setValue(scene.fogDensity);\n\t\t\t}\n\t\t}\n\n\t\tthis._screenSize[0] = device.width;\n\t\tthis._screenSize[1] = device.height;\n\t\tthis._screenSize[2] = 1 / device.width;\n\t\tthis._screenSize[3] = 1 / device.height;\n\t\tthis.screenSizeId.setValue(this._screenSize);\n\t}\n\n\tupdateLightStats(comp, compUpdatedFlags) {}\n\n\tcullShadowmaps(comp) {\n\t\tfor (let i = 0; i < comp._lights.length; i++) {\n\t\t\tconst light = comp._lights[i];\n\n\t\t\tif (light._type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tif (light.visibleThisFrame && light.castShadows && light.shadowUpdateMode !== SHADOWUPDATE_NONE) {\n\t\t\t\t\tconst casters = comp._lightCompositionData[i].shadowCastersList;\n\n\t\t\t\t\tthis._shadowRenderer.cullLocal(light, casters);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst renderActions = comp._renderActions;\n\n\t\tfor (let i = 0; i < renderActions.length; i++) {\n\t\t\tconst renderAction = renderActions[i];\n\t\t\tconst count = renderAction.directionalLightsIndices.length;\n\n\t\t\tfor (let j = 0; j < count; j++) {\n\t\t\t\tconst lightIndex = renderAction.directionalLightsIndices[j];\n\t\t\t\tconst light = comp._lights[lightIndex];\n\t\t\t\tconst casters = comp._lightCompositionData[lightIndex].shadowCastersList;\n\n\t\t\t\tthis._shadowRenderer.cullDirectional(light, casters, renderAction.camera.camera);\n\t\t\t}\n\t\t}\n\t}\n\n\tcullComposition(comp) {\n\t\tconst renderActions = comp._renderActions;\n\n\t\tfor (let i = 0; i < renderActions.length; i++) {\n\t\t\tconst renderAction = renderActions[i];\n\t\t\tconst layerIndex = renderAction.layerIndex;\n\t\t\tconst layer = comp.layerList[layerIndex];\n\t\t\tif (!layer.enabled || !comp.subLayerEnabled[layerIndex]) continue;\n\t\t\tconst transparent = comp.subLayerList[layerIndex];\n\t\t\tconst cameraPass = renderAction.cameraIndex;\n\t\t\tconst camera = layer.cameras[cameraPass];\n\n\t\t\tif (camera) {\n\t\t\t\tcamera.frameBegin(renderAction.renderTarget);\n\n\t\t\t\tif (renderAction.firstCameraUse) {\n\t\t\t\t\tthis.updateCameraFrustum(camera.camera);\n\t\t\t\t\tthis._camerasRendered++;\n\t\t\t\t}\n\n\t\t\t\tthis.cullLights(camera.camera, layer._lights);\n\t\t\t\tconst objects = layer.instances;\n\t\t\t\tconst visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\n\t\t\t\tif (!visible.done) {\n\t\t\t\t\tif (layer.onPreCull) {\n\t\t\t\t\t\tlayer.onPreCull(cameraPass);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst drawCalls = transparent ? layer.transparentMeshInstances : layer.opaqueMeshInstances;\n\t\t\t\t\tvisible.length = this.cull(camera.camera, drawCalls, visible.list);\n\t\t\t\t\tvisible.done = true;\n\n\t\t\t\t\tif (layer.onPostCull) {\n\t\t\t\t\t\tlayer.onPostCull(cameraPass);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcamera.frameEnd();\n\t\t\t}\n\t\t}\n\n\t\tthis.cullShadowmaps(comp);\n\t}\n\n\tupdateClusters(comp) {\n\t\tfor (let i = 0; i < comp._worldClusters.length; i++) {\n\t\t\tconst cluster = comp._worldClusters[i];\n\t\t\tcluster.update(comp._lights, this.scene.gammaCorrection);\n\t\t}\n\t}\n\n\trenderComposition(comp) {\n\t\tvar device = this.device;\n\t\tvar camera;\n\t\tvar renderAction,\n\t\t\t\trenderActions = comp._renderActions;\n\t\tvar i, layer, layerIndex, transparent;\n\n\t\tif (this.scene.updateSkybox) {\n\t\t\tthis.scene._updateSkybox(device);\n\n\t\t\tthis.scene.updateSkybox = false;\n\t\t}\n\n\t\tthis.beginLayers(comp);\n\n\t\tvar updated = comp._update();\n\n\t\tif (updated & COMPUPDATED_LIGHTS) {\n\t\t\tthis.scene.updateLitShaders = true;\n\t\t}\n\n\t\tthis.updateLightStats(comp, updated);\n\t\tthis.beginFrame(comp);\n\t\tthis.setSceneConstants();\n\t\tthis.cullComposition(comp);\n\t\tthis.updateClusters(comp);\n\t\tthis.gpuUpdate(comp._meshInstances);\n\n\t\tif (!LayerComposition.clusteredLightingEnabled) {\n\t\t\tthis.renderShadows(comp._splitLights[LIGHTTYPE_SPOT]);\n\t\t\tthis.renderShadows(comp._splitLights[LIGHTTYPE_OMNI]);\n\t\t}\n\n\t\tfor (i = 0; i < renderActions.length; i++) {\n\t\t\trenderAction = renderActions[i];\n\t\t\tlayerIndex = renderAction.layerIndex;\n\t\t\tlayer = comp.layerList[layerIndex];\n\t\t\ttransparent = comp.subLayerList[layerIndex];\n\t\t\tconst cameraPass = renderAction.cameraIndex;\n\t\t\tcamera = layer.cameras[cameraPass];\n\n\t\t\tif (renderAction.directionalLights.length > 0) {\n\t\t\t\tthis.renderShadows(renderAction.directionalLights, camera.camera);\n\t\t\t}\n\n\t\t\tif (!layer.enabled || !comp.subLayerEnabled[layerIndex]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (camera) {\n\t\t\t\tcamera.frameBegin(renderAction.renderTarget);\n\t\t\t}\n\n\t\t\tif (!transparent && layer.onPreRenderOpaque) {\n\t\t\t\tlayer.onPreRenderOpaque(cameraPass);\n\t\t\t} else if (transparent && layer.onPreRenderTransparent) {\n\t\t\t\tlayer.onPreRenderTransparent(cameraPass);\n\t\t\t}\n\n\t\t\tif (!(layer._preRenderCalledForCameras & 1 << cameraPass)) {\n\t\t\t\tif (layer.onPreRender) {\n\t\t\t\t\tlayer.onPreRender(cameraPass);\n\t\t\t\t}\n\n\t\t\t\tlayer._preRenderCalledForCameras |= 1 << cameraPass;\n\t\t\t}\n\n\t\t\tif (camera) {\n\t\t\t\tvar _renderAction, _renderAction$renderT;\n\n\t\t\t\tif (renderAction.clearColor || renderAction.clearDepth || renderAction.clearStencil) {\n\t\t\t\t\tconst backupColor = camera.camera._clearColorBuffer;\n\t\t\t\t\tconst backupDepth = camera.camera._clearDepthBuffer;\n\t\t\t\t\tconst backupStencil = camera.camera._clearStencilBuffer;\n\t\t\t\t\tcamera.camera._clearColorBuffer = renderAction.clearColor;\n\t\t\t\t\tcamera.camera._clearDepthBuffer = renderAction.clearDepth;\n\t\t\t\t\tcamera.camera._clearStencilBuffer = renderAction.clearStencil;\n\t\t\t\t\tthis.clearView(camera.camera, renderAction.renderTarget, true, true);\n\t\t\t\t\tcamera.camera._clearColorBuffer = backupColor;\n\t\t\t\t\tcamera.camera._clearDepthBuffer = backupDepth;\n\t\t\t\t\tcamera.camera._clearStencilBuffer = backupStencil;\n\t\t\t\t}\n\n\t\t\t\tlayer._sortVisible(transparent, camera.camera.node, cameraPass);\n\n\t\t\t\tconst objects = layer.instances;\n\t\t\t\tconst visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\t\t\t\tthis.scene._activeCamera = camera.camera;\n\t\t\t\tthis.setCamera(camera.camera, renderAction.renderTarget);\n\n\t\t\t\tif (LayerComposition.clusteredLightingEnabled && renderAction.lightClusters) {\n\t\t\t\t\trenderAction.lightClusters.activate();\n\t\t\t\t}\n\n\t\t\t\tconst flipFaces = !!(camera.camera._flipFaces ^ ((_renderAction = renderAction) == null ? void 0 : (_renderAction$renderT = _renderAction.renderTarget) == null ? void 0 : _renderAction$renderT.flipY));\n\t\t\t\tconst draws = this._forwardDrawCalls;\n\t\t\t\tthis.renderForward(camera.camera, visible.list, visible.length, layer._splitLights, layer.shaderPass, layer.cullingMask, layer.onDrawCall, layer, flipFaces);\n\t\t\t\tlayer._forwardDrawCalls += this._forwardDrawCalls - draws;\n\t\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t\t\tdevice.setStencilTest(false);\n\t\t\t\tdevice.setAlphaToCoverage(false);\n\t\t\t\tdevice.setDepthBias(false);\n\t\t\t\tcamera.frameEnd();\n\n\t\t\t\tif (renderAction.triggerPostprocess && camera.onPostprocessing) {\n\t\t\t\t\tcamera.onPostprocessing(camera);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!transparent && layer.onPostRenderOpaque) {\n\t\t\t\tlayer.onPostRenderOpaque(cameraPass);\n\t\t\t} else if (transparent && layer.onPostRenderTransparent) {\n\t\t\t\tlayer.onPostRenderTransparent(cameraPass);\n\t\t\t}\n\n\t\t\tif (layer.onPostRender && !(layer._postRenderCalledForCameras & 1 << cameraPass)) {\n\t\t\t\tlayer._postRenderCounter &= ~(transparent ? 2 : 1);\n\n\t\t\t\tif (layer._postRenderCounter === 0) {\n\t\t\t\t\tlayer.onPostRender(cameraPass);\n\t\t\t\t\tlayer._postRenderCalledForCameras |= 1 << cameraPass;\n\t\t\t\t\tlayer._postRenderCounter = layer._postRenderCounterMax;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nForwardRenderer.spotCookieCamera = null;\n\nvar keyA, keyB, sortPos, sortDir;\n\nfunction sortManual(drawCallA, drawCallB) {\n\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n}\n\nfunction sortMaterialMesh(drawCallA, drawCallB) {\n\tkeyA = drawCallA._key[SORTKEY_FORWARD];\n\tkeyB = drawCallB._key[SORTKEY_FORWARD];\n\n\tif (keyA === keyB && drawCallA.mesh && drawCallB.mesh) {\n\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t}\n\n\treturn keyB - keyA;\n}\n\nfunction sortBackToFront(drawCallA, drawCallB) {\n\treturn drawCallB.zdist - drawCallA.zdist;\n}\n\nfunction sortFrontToBack(drawCallA, drawCallB) {\n\treturn drawCallA.zdist - drawCallB.zdist;\n}\n\nvar sortCallbacks = [null, sortManual, sortMaterialMesh, sortBackToFront, sortFrontToBack];\n\nfunction sortLights(lightA, lightB) {\n\treturn lightB.key - lightA.key;\n}\n\nvar layerCounter = 0;\n\nclass VisibleInstanceList {\n\tconstructor() {\n\t\tthis.list = [];\n\t\tthis.length = 0;\n\t\tthis.done = false;\n\t}\n\n}\n\nclass InstanceList {\n\tconstructor() {\n\t\tthis.opaqueMeshInstances = [];\n\t\tthis.transparentMeshInstances = [];\n\t\tthis.shadowCasters = [];\n\t\tthis.visibleOpaque = [];\n\t\tthis.visibleTransparent = [];\n\t}\n\n\tprepare(index) {\n\t\tif (!this.visibleOpaque[index]) {\n\t\t\tthis.visibleOpaque[index] = new VisibleInstanceList();\n\t\t}\n\n\t\tif (!this.visibleTransparent[index]) {\n\t\t\tthis.visibleTransparent[index] = new VisibleInstanceList();\n\t\t}\n\n\t\tthis.visibleOpaque[index].done = false;\n\t\tthis.visibleTransparent[index].done = false;\n\t}\n\n\tdelete(index) {\n\t\tif (index < this.visibleOpaque.length) {\n\t\t\tthis.visibleOpaque.splice(index, 1);\n\t\t}\n\n\t\tif (index < this.visibleTransparent.length) {\n\t\t\tthis.visibleTransparent.splice(index, 1);\n\t\t}\n\t}\n\n}\n\nclass Layer {\n\tconstructor(options = {}) {\n\t\tif (options.id !== undefined) {\n\t\t\tthis.id = options.id;\n\t\t\tlayerCounter = Math.max(this.id + 1, layerCounter);\n\t\t} else {\n\t\t\tthis.id = layerCounter++;\n\t\t}\n\n\t\tthis.name = options.name;\n\t\tthis._enabled = options.enabled === undefined ? true : options.enabled;\n\t\tthis._refCounter = this._enabled ? 1 : 0;\n\t\tthis.opaqueSortMode = options.opaqueSortMode === undefined ? SORTMODE_MATERIALMESH : options.opaqueSortMode;\n\t\tthis.transparentSortMode = options.transparentSortMode === undefined ? SORTMODE_BACK2FRONT : options.transparentSortMode;\n\t\tthis.renderTarget = options.renderTarget;\n\t\tthis.shaderPass = options.shaderPass === undefined ? SHADER_FORWARD : options.shaderPass;\n\t\tthis.passThrough = options.passThrough === undefined ? false : options.passThrough;\n\t\tthis._clearColorBuffer = options.clearColorBuffer ? options.clearColorBuffer : false;\n\t\tthis._clearDepthBuffer = options.clearDepthBuffer ? options.clearDepthBuffer : false;\n\t\tthis._clearStencilBuffer = options.clearStencilBuffer ? options.clearStencilBuffer : false;\n\t\tthis.onPreCull = options.onPreCull;\n\t\tthis.onPreRender = options.onPreRender;\n\t\tthis.onPreRenderOpaque = options.onPreRenderOpaque;\n\t\tthis.onPreRenderTransparent = options.onPreRenderTransparent;\n\t\tthis.onPostCull = options.onPostCull;\n\t\tthis.onPostRender = options.onPostRender;\n\t\tthis.onPostRenderOpaque = options.onPostRenderOpaque;\n\t\tthis.onPostRenderTransparent = options.onPostRenderTransparent;\n\t\tthis.onDrawCall = options.onDrawCall;\n\t\tthis.onEnable = options.onEnable;\n\t\tthis.onDisable = options.onDisable;\n\n\t\tif (this._enabled && this.onEnable) {\n\t\t\tthis.onEnable();\n\t\t}\n\n\t\tthis.layerReference = options.layerReference;\n\t\tthis.instances = options.layerReference ? options.layerReference.instances : new InstanceList();\n\t\tthis.cullingMask = options.cullingMask ? options.cullingMask : 0xFFFFFFFF;\n\t\tthis.opaqueMeshInstances = this.instances.opaqueMeshInstances;\n\t\tthis.transparentMeshInstances = this.instances.transparentMeshInstances;\n\t\tthis.shadowCasters = this.instances.shadowCasters;\n\t\tthis.customSortCallback = null;\n\t\tthis.customCalculateSortValues = null;\n\t\tthis._lights = [];\n\t\tthis._lightsSet = new Set();\n\t\tthis._clusteredLightsSet = new Set();\n\t\tthis._splitLights = [[], [], []];\n\t\tthis.cameras = [];\n\t\tthis._dirty = false;\n\t\tthis._dirtyLights = false;\n\t\tthis._dirtyCameras = false;\n\t\tthis._lightHash = 0;\n\t\tthis._staticLightHash = 0;\n\t\tthis._needsStaticPrepare = true;\n\t\tthis._staticPrepareDone = false;\n\t\tthis._shaderVersion = -1;\n\t\tthis._lightCube = null;\n\t}\n\n\tget renderTarget() {\n\t\treturn this._renderTarget;\n\t}\n\n\tset renderTarget(rt) {\n\t\tthis._renderTarget = rt;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(val) {\n\t\tif (val !== this._enabled) {\n\t\t\tthis._enabled = val;\n\n\t\t\tif (val) {\n\t\t\t\tthis.incrementCounter();\n\t\t\t\tif (this.onEnable) this.onEnable();\n\t\t\t} else {\n\t\t\t\tthis.decrementCounter();\n\t\t\t\tif (this.onDisable) this.onDisable();\n\t\t\t}\n\t\t}\n\t}\n\n\tget clearColor() {\n\t\treturn this._clearColor;\n\t}\n\n\tset clearColor(val) {\n\t\tthis._clearColor.copy(val);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(val) {\n\t\tthis._clearColorBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(val) {\n\t\tthis._clearDepthBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(val) {\n\t\tthis._clearStencilBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tincrementCounter() {\n\t\tif (this._refCounter === 0) {\n\t\t\tthis._enabled = true;\n\t\t\tif (this.onEnable) this.onEnable();\n\t\t}\n\n\t\tthis._refCounter++;\n\t}\n\n\tdecrementCounter() {\n\t\tif (this._refCounter === 1) {\n\t\t\tthis._enabled = false;\n\t\t\tif (this.onDisable) this.onDisable();\n\t\t} else if (this._refCounter === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._refCounter--;\n\t}\n\n\taddMeshInstances(meshInstances, skipShadowCasters) {\n\t\tvar sceneShaderVer = this._shaderVersion;\n\t\tvar m, arr, mat;\n\t\tvar casters = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tmat = m.material;\n\n\t\t\tif (mat.blendType === BLEND_NONE) {\n\t\t\t\tarr = this.opaqueMeshInstances;\n\t\t\t} else {\n\t\t\t\tarr = this.transparentMeshInstances;\n\t\t\t}\n\n\t\t\tif (this.opaqueMeshInstances.indexOf(m) < 0 && this.transparentMeshInstances.indexOf(m) < 0) {\n\t\t\t\tarr.push(m);\n\t\t\t}\n\n\t\t\tif (!skipShadowCasters && m.castShadow && casters.indexOf(m) < 0) casters.push(m);\n\n\t\t\tif (!this.passThrough && sceneShaderVer >= 0 && mat._shaderVersion !== sceneShaderVer) {\n\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\tmat.shader = null;\n\t\t\t\t}\n\n\t\t\t\tmat._shaderVersion = sceneShaderVer;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.passThrough) this._dirty = true;\n\t}\n\n\tremoveMeshInstanceFromArray(m, arr) {\n\t\tvar drawCall;\n\t\tvar spliceOffset = -1;\n\t\tvar spliceCount = 0;\n\t\tvar len = arr.length;\n\n\t\tfor (var j = 0; j < len; j++) {\n\t\t\tdrawCall = arr[j];\n\n\t\t\tif (drawCall === m) {\n\t\t\t\tspliceOffset = j;\n\t\t\t\tspliceCount = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (drawCall._staticSource === m) {\n\t\t\t\tif (spliceOffset < 0) spliceOffset = j;\n\t\t\t\tspliceCount++;\n\t\t\t} else if (spliceOffset >= 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (spliceOffset >= 0) {\n\t\t\tarr.splice(spliceOffset, spliceCount);\n\t\t}\n\t}\n\n\tremoveMeshInstances(meshInstances, skipShadowCasters) {\n\t\tvar j, m;\n\t\tvar opaque = this.opaqueMeshInstances;\n\t\tvar transparent = this.transparentMeshInstances;\n\t\tvar casters = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tthis.removeMeshInstanceFromArray(m, opaque);\n\t\t\tthis.removeMeshInstanceFromArray(m, transparent);\n\n\t\t\tif (!skipShadowCasters) {\n\t\t\t\tj = casters.indexOf(m);\n\t\t\t\tif (j >= 0) casters.splice(j, 1);\n\t\t\t}\n\t\t}\n\n\t\tthis._dirty = true;\n\t}\n\n\tclearMeshInstances(skipShadowCasters) {\n\t\tif (this.opaqueMeshInstances.length === 0 && this.transparentMeshInstances.length === 0) {\n\t\t\tif (skipShadowCasters || this.shadowCasters.length === 0) return;\n\t\t}\n\n\t\tthis.opaqueMeshInstances.length = 0;\n\t\tthis.transparentMeshInstances.length = 0;\n\t\tif (!skipShadowCasters) this.shadowCasters.length = 0;\n\t\tif (!this.passThrough) this._dirty = true;\n\t}\n\n\taddLight(light) {\n\t\tconst l = light.light;\n\n\t\tif (!this._lightsSet.has(l)) {\n\t\t\tthis._lightsSet.add(l);\n\n\t\t\tif (l.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis._clusteredLightsSet.add(l);\n\t\t\t}\n\n\t\t\tthis._lights.push(l);\n\n\t\t\tthis._dirtyLights = true;\n\n\t\t\tthis._generateLightHash();\n\t\t}\n\t}\n\n\tremoveLight(light) {\n\t\tconst l = light.light;\n\n\t\tif (this._lightsSet.has(l)) {\n\t\t\tthis._lightsSet.delete(l);\n\n\t\t\tif (l.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis._clusteredLightsSet.delete(l);\n\t\t\t}\n\n\t\t\tthis._lights.splice(this._lights.indexOf(l), 1);\n\n\t\t\tthis._dirtyLights = true;\n\n\t\t\tthis._generateLightHash();\n\t\t}\n\t}\n\n\tclearLights() {\n\t\tthis._lightsSet.clear();\n\n\t\tthis._clusteredLightsSet.clear();\n\n\t\tthis._lights.length = 0;\n\t\tthis._dirtyLights = true;\n\t}\n\n\tget clusteredLightsSet() {\n\t\treturn this._clusteredLightsSet;\n\t}\n\n\taddShadowCasters(meshInstances) {\n\t\tvar m;\n\t\tvar arr = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tif (!m.castShadow) continue;\n\t\t\tif (arr.indexOf(m) < 0) arr.push(m);\n\t\t}\n\n\t\tthis._dirtyLights = true;\n\t}\n\n\tremoveShadowCasters(meshInstances) {\n\t\tvar id;\n\t\tvar arr = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tid = arr.indexOf(meshInstances[i]);\n\t\t\tif (id >= 0) arr.splice(id, 1);\n\t\t}\n\n\t\tthis._dirtyLights = true;\n\t}\n\n\t_generateLightHash() {\n\t\tif (this._lights.length > 0) {\n\t\t\tthis._lights.sort(sortLights);\n\n\t\t\tvar str = \"\";\n\t\t\tvar strStatic = \"\";\n\n\t\t\tfor (var i = 0; i < this._lights.length; i++) {\n\t\t\t\tif (this._lights[i].isStatic) {\n\t\t\t\t\tstrStatic += this._lights[i].key;\n\t\t\t\t} else {\n\t\t\t\t\tstr += this._lights[i].key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (str.length === 0) {\n\t\t\t\tthis._lightHash = 0;\n\t\t\t} else {\n\t\t\t\tthis._lightHash = hashCode(str);\n\t\t\t}\n\n\t\t\tif (strStatic.length === 0) {\n\t\t\t\tthis._staticLightHash = 0;\n\t\t\t} else {\n\t\t\t\tthis._staticLightHash = hashCode(strStatic);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._lightHash = 0;\n\t\t\tthis._staticLightHash = 0;\n\t\t}\n\t}\n\n\taddCamera(camera) {\n\t\tif (this.cameras.indexOf(camera) >= 0) return;\n\t\tthis.cameras.push(camera);\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tremoveCamera(camera) {\n\t\tvar index = this.cameras.indexOf(camera);\n\n\t\tif (index >= 0) {\n\t\t\tthis.cameras.splice(index, 1);\n\t\t\tthis._dirtyCameras = true;\n\t\t\tthis.instances.delete(index);\n\t\t}\n\t}\n\n\tclearCameras() {\n\t\tthis.cameras.length = 0;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\t_calculateSortDistances(drawCalls, drawCallsCount, camPos, camFwd) {\n\t\tvar i, drawCall, meshPos;\n\t\tvar tempx, tempy, tempz;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\t\t\tif (drawCall.command) continue;\n\t\t\tif (drawCall.layer <= LAYER_FX) continue;\n\n\t\t\tif (drawCall.calculateSortDistance) {\n\t\t\t\tdrawCall.zdist = drawCall.calculateSortDistance(drawCall, camPos, camFwd);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmeshPos = drawCall.aabb.center;\n\t\t\ttempx = meshPos.x - camPos.x;\n\t\t\ttempy = meshPos.y - camPos.y;\n\t\t\ttempz = meshPos.z - camPos.z;\n\t\t\tdrawCall.zdist = tempx * camFwd.x + tempy * camFwd.y + tempz * camFwd.z;\n\t\t}\n\t}\n\n\t_sortVisible(transparent, cameraNode, cameraPass) {\n\t\tvar objects = this.instances;\n\t\tvar sortMode = transparent ? this.transparentSortMode : this.opaqueSortMode;\n\t\tif (sortMode === SORTMODE_NONE) return;\n\t\tvar visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\n\t\tif (sortMode === SORTMODE_CUSTOM) {\n\t\t\tsortPos = cameraNode.getPosition();\n\t\t\tsortDir = cameraNode.forward;\n\n\t\t\tif (this.customCalculateSortValues) {\n\t\t\t\tthis.customCalculateSortValues(visible.list, visible.length, sortPos, sortDir);\n\t\t\t}\n\n\t\t\tif (visible.list.length !== visible.length) {\n\t\t\t\tvisible.list.length = visible.length;\n\t\t\t}\n\n\t\t\tif (this.customSortCallback) {\n\t\t\t\tvisible.list.sort(this.customSortCallback);\n\t\t\t}\n\t\t} else {\n\t\t\tif (sortMode === SORTMODE_BACK2FRONT || sortMode === SORTMODE_FRONT2BACK) {\n\t\t\t\tsortPos = cameraNode.getPosition();\n\t\t\t\tsortDir = cameraNode.forward;\n\n\t\t\t\tthis._calculateSortDistances(visible.list, visible.length, sortPos, sortDir);\n\t\t\t}\n\n\t\t\tif (visible.list.length !== visible.length) {\n\t\t\t\tvisible.list.length = visible.length;\n\t\t\t}\n\n\t\t\tvisible.list.sort(sortCallbacks[sortMode]);\n\t\t}\n\t}\n\n}\n\nvar spotCenter = new Vec3();\nvar spotEndPoint = new Vec3();\nvar tmpVec = new Vec3();\nvar chanId = {\n\tr: 0,\n\tg: 1,\n\tb: 2,\n\ta: 3\n};\nconst directionalCascades = [[new Vec4(0, 0, 1, 1)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5), new Vec4(0.5, 0, 0.5, 0.5)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5), new Vec4(0.5, 0, 0.5, 0.5), new Vec4(0.5, 0.5, 0.5, 0.5)]];\n\nclass LightRenderData {\n\tconstructor(device, camera, face, light) {\n\t\tthis.light = light;\n\t\tthis.camera = camera;\n\t\tthis.shadowCamera = ShadowRenderer.createShadowCamera(device, light._shadowType, light._type, face);\n\t\tthis.shadowMatrix = new Mat4();\n\t\tthis.face = face;\n\t\tthis.visibleCasters = [];\n\t}\n\n\tget shadowBuffer() {\n\t\tconst rt = this.shadowCamera.renderTarget;\n\n\t\tif (rt) {\n\t\t\tconst light = this.light;\n\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\treturn rt.colorBuffer;\n\t\t\t}\n\n\t\t\treturn light._isPcf && light.device.webgl2 ? rt.depthBuffer : rt.colorBuffer;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass Light {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tthis._type = LIGHTTYPE_DIRECTIONAL;\n\t\tthis._color = new Color(0.8, 0.8, 0.8);\n\t\tthis._intensity = 1;\n\t\tthis._castShadows = false;\n\t\tthis._enabled = false;\n\t\tthis.mask = MASK_DYNAMIC;\n\t\tthis.isStatic = false;\n\t\tthis.key = 0;\n\t\tthis.bakeDir = true;\n\t\tthis.attenuationStart = 10;\n\t\tthis.attenuationEnd = 10;\n\t\tthis._falloffMode = 0;\n\t\tthis._shadowType = SHADOW_PCF3;\n\t\tthis._vsmBlurSize = 11;\n\t\tthis.vsmBlurMode = BLUR_GAUSSIAN;\n\t\tthis.vsmBias = 0.01 * 0.25;\n\t\tthis._cookie = null;\n\t\tthis.cookieIntensity = 1;\n\t\tthis._cookieFalloff = true;\n\t\tthis._cookieChannel = \"rgb\";\n\t\tthis._cookieTransform = null;\n\t\tthis._cookieTransformUniform = new Float32Array(4);\n\t\tthis._cookieOffset = null;\n\t\tthis._cookieOffsetUniform = new Float32Array(2);\n\t\tthis._cookieTransformSet = false;\n\t\tthis._cookieOffsetSet = false;\n\t\tthis._innerConeAngle = 40;\n\t\tthis._outerConeAngle = 45;\n\t\tthis.cascades = null;\n\t\tthis._shadowMatrixPalette = null;\n\t\tthis._shadowCascadeDistances = null;\n\t\tthis.numCascades = 1;\n\t\tthis.cascadeDistribution = 0.5;\n\t\tthis._shape = LIGHTSHAPE_PUNCTUAL;\n\t\tthis._finalColor = new Float32Array([0.8, 0.8, 0.8]);\n\t\tvar c = Math.pow(this._finalColor[0], 2.2);\n\t\tthis._linearFinalColor = new Float32Array([c, c, c]);\n\t\tthis._position = new Vec3(0, 0, 0);\n\t\tthis._direction = new Vec3(0, 0, 0);\n\t\tthis._innerConeAngleCos = Math.cos(this._innerConeAngle * Math.PI / 180);\n\t\tthis._outerConeAngleCos = Math.cos(this._outerConeAngle * Math.PI / 180);\n\t\tthis._shadowMap = null;\n\t\tthis._shadowRenderParams = [];\n\t\tthis.shadowDistance = 40;\n\t\tthis._shadowResolution = 1024;\n\t\tthis.shadowBias = -0.0005;\n\t\tthis._normalOffsetBias = 0.0;\n\t\tthis.shadowUpdateMode = SHADOWUPDATE_REALTIME;\n\t\tthis._isVsm = false;\n\t\tthis._isPcf = true;\n\t\tthis._cookieMatrix = null;\n\t\tthis._scene = null;\n\t\tthis._node = null;\n\t\tthis._renderData = [];\n\t\tthis.visibleThisFrame = false;\n\t}\n\n\tdestroy() {\n\t\tthis._destroyShadowMap();\n\n\t\tthis._renderData = null;\n\t}\n\n\t_destroyShadowMap() {\n\t\tif (this._renderData) {\n\t\t\tthis._renderData.length = 0;\n\t\t}\n\n\t\tif (this._shadowMap) {\n\t\t\tif (!this._shadowMap.cached) {\n\t\t\t\tthis._shadowMap.destroy();\n\t\t\t}\n\n\t\t\tthis._shadowMap = null;\n\t\t}\n\n\t\tif (this.shadowUpdateMode === SHADOWUPDATE_NONE) {\n\t\t\tthis.shadowUpdateMode = SHADOWUPDATE_THISFRAME;\n\t\t}\n\t}\n\n\tgetRenderData(camera, face) {\n\t\tfor (let i = 0; i < this._renderData.length; i++) {\n\t\t\tconst current = this._renderData[i];\n\n\t\t\tif (current.camera === camera && current.face === face) {\n\t\t\t\treturn current;\n\t\t\t}\n\t\t}\n\n\t\tconst rd = new LightRenderData(this.device, camera, face, this);\n\n\t\tthis._renderData.push(rd);\n\n\t\treturn rd;\n\t}\n\n\tclone() {\n\t\tvar clone = new Light(this.device);\n\t\tclone.type = this._type;\n\t\tclone.setColor(this._color);\n\t\tclone.intensity = this._intensity;\n\t\tclone.castShadows = this.castShadows;\n\t\tclone._enabled = this._enabled;\n\t\tclone.attenuationStart = this.attenuationStart;\n\t\tclone.attenuationEnd = this.attenuationEnd;\n\t\tclone.falloffMode = this._falloffMode;\n\t\tclone.shadowType = this._shadowType;\n\t\tclone.vsmBlurSize = this._vsmBlurSize;\n\t\tclone.vsmBlurMode = this.vsmBlurMode;\n\t\tclone.vsmBias = this.vsmBias;\n\t\tclone.shadowUpdateMode = this.shadowUpdateMode;\n\t\tclone.mask = this.mask;\n\t\tclone.innerConeAngle = this._innerConeAngle;\n\t\tclone.outerConeAngle = this._outerConeAngle;\n\t\tclone.numCascades = this.numCascades;\n\t\tclone.cascadeDistribution = this.cascadeDistribution;\n\t\tclone.shape = this._shape;\n\t\tclone.shadowBias = this.shadowBias;\n\t\tclone.normalOffsetBias = this._normalOffsetBias;\n\t\tclone.shadowResolution = this._shadowResolution;\n\t\tclone.shadowDistance = this.shadowDistance;\n\t\treturn clone;\n\t}\n\n\tget numCascades() {\n\t\treturn this.cascades.length;\n\t}\n\n\tset numCascades(value) {\n\t\tif (!this.cascades || this.numCascades != value) {\n\t\t\tthis.cascades = directionalCascades[value - 1];\n\t\t\tthis._shadowMatrixPalette = new Float32Array(4 * 16);\n\t\t\tthis._shadowCascadeDistances = new Float32Array(4);\n\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis.updateKey();\n\t\t}\n\t}\n\n\tget shadowMap() {\n\t\treturn this._shadowMap;\n\t}\n\n\tset shadowMap(shadowMap) {\n\t\tif (this._shadowMap !== shadowMap) {\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis._shadowMap = shadowMap;\n\t\t}\n\t}\n\n\tgetColor() {\n\t\treturn this._color;\n\t}\n\n\tgetBoundingSphere(sphere) {\n\t\tif (this._type === LIGHTTYPE_SPOT) {\n\t\t\tvar range = this.attenuationEnd;\n\t\t\tvar angle = this._outerConeAngle;\n\t\t\tvar f = Math.cos(angle * math.DEG_TO_RAD);\n\t\t\tvar node = this._node;\n\t\t\tspotCenter.copy(node.up);\n\t\t\tspotCenter.mulScalar(-range * 0.5 * f);\n\t\t\tspotCenter.add(node.getPosition());\n\t\t\tsphere.center = spotCenter;\n\t\t\tspotEndPoint.copy(node.up);\n\t\t\tspotEndPoint.mulScalar(-range);\n\t\t\ttmpVec.copy(node.right);\n\t\t\ttmpVec.mulScalar(Math.sin(angle * math.DEG_TO_RAD) * range);\n\t\t\tspotEndPoint.add(tmpVec);\n\t\t\tsphere.radius = spotEndPoint.length() * 0.5;\n\t\t} else if (this._type === LIGHTTYPE_OMNI) {\n\t\t\tsphere.center = this._node.getPosition();\n\t\t\tsphere.radius = this.attenuationEnd;\n\t\t}\n\t}\n\n\tgetBoundingBox(box) {\n\t\tif (this._type === LIGHTTYPE_SPOT) {\n\t\t\tvar range = this.attenuationEnd;\n\t\t\tvar angle = this._outerConeAngle;\n\t\t\tvar node = this._node;\n\t\t\tvar scl = Math.abs(Math.sin(angle * math.DEG_TO_RAD) * range);\n\t\t\tbox.center.set(0, -range * 0.5, 0);\n\t\t\tbox.halfExtents.set(scl, range * 0.5, scl);\n\t\t\tbox.setFromTransformedAabb(box, node.getWorldTransform());\n\t\t} else if (this._type === LIGHTTYPE_OMNI) {\n\t\t\tbox.center.copy(this._node.getPosition());\n\t\t\tbox.halfExtents.set(this.attenuationEnd, this.attenuationEnd, this.attenuationEnd);\n\t\t}\n\t}\n\n\t_updateFinalColor() {\n\t\tvar color = this._color;\n\t\tvar r = color.r;\n\t\tvar g = color.g;\n\t\tvar b = color.b;\n\t\tvar i = this._intensity;\n\t\tvar finalColor = this._finalColor;\n\t\tvar linearFinalColor = this._linearFinalColor;\n\t\tfinalColor[0] = r * i;\n\t\tfinalColor[1] = g * i;\n\t\tfinalColor[2] = b * i;\n\n\t\tif (i >= 1) {\n\t\t\tlinearFinalColor[0] = Math.pow(r, 2.2) * i;\n\t\t\tlinearFinalColor[1] = Math.pow(g, 2.2) * i;\n\t\t\tlinearFinalColor[2] = Math.pow(b, 2.2) * i;\n\t\t} else {\n\t\t\tlinearFinalColor[0] = Math.pow(finalColor[0], 2.2);\n\t\t\tlinearFinalColor[1] = Math.pow(finalColor[1], 2.2);\n\t\t\tlinearFinalColor[2] = Math.pow(finalColor[2], 2.2);\n\t\t}\n\t}\n\n\tsetColor() {\n\t\tvar r, g, b;\n\n\t\tif (arguments.length === 1) {\n\t\t\tr = arguments[0].r;\n\t\t\tg = arguments[0].g;\n\t\t\tb = arguments[0].b;\n\t\t} else if (arguments.length === 3) {\n\t\t\tr = arguments[0];\n\t\t\tg = arguments[1];\n\t\t\tb = arguments[2];\n\t\t}\n\n\t\tthis._color.set(r, g, b);\n\n\t\tthis._updateFinalColor();\n\t}\n\n\tupdateShadow() {\n\t\tif (this.shadowUpdateMode !== SHADOWUPDATE_REALTIME) {\n\t\t\tthis.shadowUpdateMode = SHADOWUPDATE_THISFRAME;\n\t\t}\n\t}\n\n\tlayersDirty() {\n\t\tvar _this$_scene;\n\n\t\tif ((_this$_scene = this._scene) != null && _this$_scene.layers) {\n\t\t\tthis._scene.layers._dirtyLights = true;\n\t\t}\n\t}\n\n\tupdateKey() {\n\t\tvar key = this._type << 29 | (this._castShadows ? 1 : 0) << 28 | this._shadowType << 25 | this._falloffMode << 23 | (this._normalOffsetBias !== 0.0 ? 1 : 0) << 22 | (this._cookie ? 1 : 0) << 21 | (this._cookieFalloff ? 1 : 0) << 20 | chanId[this._cookieChannel.charAt(0)] << 18 | (this._cookieTransform ? 1 : 0) << 12 | this._shape << 10 | this.numCascades - 1 << 8;\n\n\t\tif (this._cookieChannel.length === 3) {\n\t\t\tkey |= chanId[this._cookieChannel.charAt(1)] << 16;\n\t\t\tkey |= chanId[this._cookieChannel.charAt(2)] << 14;\n\t\t}\n\n\t\tif (key !== this.key && this._scene !== null) {\n\t\t\tthis.layersDirty();\n\t\t}\n\n\t\tthis.key = key;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._type = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t\tvar stype = this._shadowType;\n\t\tthis._shadowType = null;\n\t\tthis.shadowType = stype;\n\t}\n\n\tget shape() {\n\t\treturn this._shape;\n\t}\n\n\tset shape(value) {\n\t\tif (this._shape === value) return;\n\t\tthis._shape = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t\tvar stype = this._shadowType;\n\t\tthis._shadowType = null;\n\t\tthis.shadowType = stype;\n\t}\n\n\tget shadowType() {\n\t\treturn this._shadowType;\n\t}\n\n\tset shadowType(value) {\n\t\tif (this._shadowType === value) return;\n\t\tvar device = this.device;\n\t\tif (this._type === LIGHTTYPE_OMNI) value = SHADOW_PCF3;\n\n\t\tif (value === SHADOW_PCF5 && !device.webgl2) {\n\t\t\tvalue = SHADOW_PCF3;\n\t\t}\n\n\t\tif (value === SHADOW_VSM32 && !device.textureFloatRenderable) value = SHADOW_VSM16;\n\t\tif (value === SHADOW_VSM16 && !device.textureHalfFloatRenderable) value = SHADOW_VSM8;\n\t\tthis._isVsm = value >= SHADOW_VSM8 && value <= SHADOW_VSM32;\n\t\tthis._isPcf = value === SHADOW_PCF5 || value === SHADOW_PCF3;\n\t\tthis._shadowType = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tif (this._enabled !== value) {\n\t\t\tthis._enabled = value;\n\t\t\tthis.layersDirty();\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows && this.mask !== MASK_LIGHTMAP && this.mask !== 0;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows !== value) {\n\t\t\tthis._castShadows = value;\n\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis.layersDirty();\n\t\t\tthis.updateKey();\n\t\t}\n\t}\n\n\tget shadowResolution() {\n\t\treturn this._shadowResolution;\n\t}\n\n\tset shadowResolution(value) {\n\t\tif (this._shadowResolution !== value) {\n\t\t\tif (this._type === LIGHTTYPE_OMNI) {\n\t\t\t\tvalue = Math.min(value, this.device.maxCubeMapSize);\n\t\t\t} else {\n\t\t\t\tvalue = Math.min(value, this.device.maxTextureSize);\n\t\t\t}\n\n\t\t\tthis._shadowResolution = value;\n\n\t\t\tthis._destroyShadowMap();\n\t\t}\n\t}\n\n\tget vsmBlurSize() {\n\t\treturn this._vsmBlurSize;\n\t}\n\n\tset vsmBlurSize(value) {\n\t\tif (this._vsmBlurSize === value) return;\n\t\tif (value % 2 === 0) value++;\n\t\tthis._vsmBlurSize = value;\n\t}\n\n\tget normalOffsetBias() {\n\t\treturn this._normalOffsetBias;\n\t}\n\n\tset normalOffsetBias(value) {\n\t\tif (this._normalOffsetBias === value) return;\n\n\t\tif (!this._normalOffsetBias && value || this._normalOffsetBias && !value) {\n\t\t\tthis.updateKey();\n\t\t}\n\n\t\tthis._normalOffsetBias = value;\n\t}\n\n\tget falloffMode() {\n\t\treturn this._falloffMode;\n\t}\n\n\tset falloffMode(value) {\n\t\tif (this._falloffMode === value) return;\n\t\tthis._falloffMode = value;\n\t\tthis.updateKey();\n\t}\n\n\tget innerConeAngle() {\n\t\treturn this._innerConeAngle;\n\t}\n\n\tset innerConeAngle(value) {\n\t\tif (this._innerConeAngle === value) return;\n\t\tthis._innerConeAngle = value;\n\t\tthis._innerConeAngleCos = Math.cos(value * Math.PI / 180);\n\t}\n\n\tget outerConeAngle() {\n\t\treturn this._outerConeAngle;\n\t}\n\n\tset outerConeAngle(value) {\n\t\tif (this._outerConeAngle === value) return;\n\t\tthis._outerConeAngle = value;\n\t\tthis._outerConeAngleCos = Math.cos(value * Math.PI / 180);\n\t}\n\n\tget intensity() {\n\t\treturn this._intensity;\n\t}\n\n\tset intensity(value) {\n\t\tif (this._intensity !== value) {\n\t\t\tthis._intensity = value;\n\n\t\t\tthis._updateFinalColor();\n\t\t}\n\t}\n\n\tget cookieMatrix() {\n\t\tif (!this._cookieMatrix) {\n\t\t\tthis._cookieMatrix = new Mat4();\n\t\t}\n\n\t\treturn this._cookieMatrix;\n\t}\n\n\tget cookie() {\n\t\treturn this._cookie;\n\t}\n\n\tset cookie(value) {\n\t\tif (this._cookie === value) return;\n\t\tthis._cookie = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieFalloff() {\n\t\treturn this._cookieFalloff;\n\t}\n\n\tset cookieFalloff(value) {\n\t\tif (this._cookieFalloff === value) return;\n\t\tthis._cookieFalloff = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieChannel() {\n\t\treturn this._cookieChannel;\n\t}\n\n\tset cookieChannel(value) {\n\t\tif (this._cookieChannel === value) return;\n\n\t\tif (value.length < 3) {\n\t\t\tvar chr = value.charAt(value.length - 1);\n\t\t\tvar addLen = 3 - value.length;\n\n\t\t\tfor (var i = 0; i < addLen; i++) value += chr;\n\t\t}\n\n\t\tthis._cookieChannel = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieTransform() {\n\t\treturn this._cookieTransform;\n\t}\n\n\tset cookieTransform(value) {\n\t\tif (this._cookieTransform === value) return;\n\t\tthis._cookieTransform = value;\n\t\tthis._cookieTransformSet = !!value;\n\n\t\tif (value && !this._cookieOffset) {\n\t\t\tthis.cookieOffset = new Vec2();\n\t\t\tthis._cookieOffsetSet = false;\n\t\t}\n\n\t\tthis.updateKey();\n\t}\n\n\tget cookieOffset() {\n\t\treturn this._cookieOffset;\n\t}\n\n\tset cookieOffset(value) {\n\t\tif (this._cookieOffset === value) return;\n\t\tvar xformNew = !!(this._cookieTransformSet || value);\n\n\t\tif (xformNew && !value && this._cookieOffset) {\n\t\t\tthis._cookieOffset.set(0, 0);\n\t\t} else {\n\t\t\tthis._cookieOffset = value;\n\t\t}\n\n\t\tthis._cookieOffsetSet = !!value;\n\n\t\tif (value && !this._cookieTransform) {\n\t\t\tthis.cookieTransform = new Vec4(1, 1, 0, 0);\n\t\t\tthis._cookieTransformSet = false;\n\t\t}\n\n\t\tthis.updateKey();\n\t}\n\n}\n\nconst MAX_LIGHTMAP_SIZE = 2048;\nconst PASS_COLOR = 0;\nconst PASS_DIR = 1;\nconst tempVec$1 = new Vec3();\nconst tempSphere = new BoundingSphere();\n\nclass MeshNode {\n\tconstructor(node, meshInstances = null) {\n\t\tthis.node = node;\n\n\t\tif (node.render) {\n\t\t\tthis.component = node.render;\n\t\t\tmeshInstances = meshInstances ? meshInstances : node.render.meshInstances;\n\t\t} else {\n\t\t\tthis.component = node.model;\n\t\t\tmeshInstances = meshInstances ? meshInstances : node.model.model.meshInstances;\n\t\t}\n\n\t\tthis.castShadows = this.component.castShadows;\n\t\tthis.meshInstances = meshInstances;\n\t\tthis.bounds = null;\n\t\tthis.renderTargets = [];\n\t}\n\n}\n\nclass LightInfo {\n\tconstructor(light) {\n\t\tthis.light = light;\n\t\tthis.store();\n\t\tlight.numCascades = 1;\n\n\t\tif (light.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\tlight._node.getWorldTransform();\n\n\t\t\tlight.getBoundingSphere(tempSphere);\n\t\t\tthis.lightBounds = new BoundingBox();\n\t\t\tthis.lightBounds.center.copy(tempSphere.center);\n\t\t\tthis.lightBounds.halfExtents.set(tempSphere.radius, tempSphere.radius, tempSphere.radius);\n\t\t}\n\t}\n\n\tstore() {\n\t\tthis.mask = this.light.mask;\n\t\tthis.shadowUpdateMode = this.light.shadowUpdateMode;\n\t\tthis.enabled = this.light.enabled;\n\t\tthis.numCascades = this.light.numCascades;\n\t}\n\n\trestore() {\n\t\tthis.light.mask = this.mask;\n\t\tthis.light.shadowUpdateMode = this.shadowUpdateMode;\n\t\tthis.light.enabled = this.enabled;\n\t\tthis.light.numCascades = this.numCascades;\n\t}\n\n}\n\nclass Lightmapper {\n\tconstructor(device, root, scene, renderer, assets) {\n\t\tthis.device = device;\n\t\tthis.root = root;\n\t\tthis.scene = scene;\n\t\tthis.renderer = renderer;\n\t\tthis.assets = assets;\n\t\tthis.shadowMapCache = renderer._shadowRenderer.shadowMapCache;\n\t\tthis._tempSet = new Set();\n\t\tthis._initCalled = false;\n\t\tthis.passMaterials = [];\n\t\tthis.fog = \"\";\n\t\tthis.ambientLight = new Color();\n\t\tthis.renderTargets = new Map();\n\t\tthis.stats = {\n\t\t\trenderPasses: 0,\n\t\t\tlightmapCount: 0,\n\t\t\ttotalRenderTime: 0,\n\t\t\tforwardTime: 0,\n\t\t\tfboTime: 0,\n\t\t\tshadowMapTime: 0,\n\t\t\tcompileTime: 0,\n\t\t\tshadersLinked: 0\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tMeshInstance.decRefLightmap(this.blackTex);\n\t\tthis.blackTex = null;\n\t\tMeshInstance.destroyLightmapCache();\n\t\tthis.device = null;\n\t\tthis.root = null;\n\t\tthis.scene = null;\n\t\tthis.renderer = null;\n\t\tthis.assets = null;\n\t}\n\n\tinitBake(device) {\n\t\tif (!this._initCalled) {\n\t\t\tthis._initCalled = true;\n\t\t\tthis.dilateShader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.dilatePS, \"lmDilate\");\n\t\t\tthis.constantTexSource = device.scope.resolve(\"source\");\n\t\t\tthis.constantPixelOffset = device.scope.resolve(\"pixelOffset\");\n\t\t\tthis.constantBakeDir = device.scope.resolve(\"bakeDir\");\n\t\t\tthis.pixelOffset = new Float32Array(2);\n\t\t\tthis.materials = [];\n\t\t\tthis.blackTex = new Texture(this.device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\ttype: TEXTURETYPE_RGBM\n\t\t\t});\n\t\t\tthis.blackTex.name = 'lightmapBlack';\n\t\t\tMeshInstance.incRefLightmap(this.blackTex);\n\t\t\tconst camera = new Camera();\n\t\t\tcamera.clearColor.set(0, 0, 0, 0);\n\t\t\tcamera.clearColorBuffer = true;\n\t\t\tcamera.clearDepthBuffer = false;\n\t\t\tcamera.clearStencilBuffer = false;\n\t\t\tcamera.frustumCulling = false;\n\t\t\tcamera.projection = PROJECTION_ORTHOGRAPHIC;\n\t\t\tcamera.aspectRatio = 1;\n\t\t\tcamera.node = new GraphNode();\n\t\t\tthis.camera = camera;\n\t\t}\n\t}\n\n\tfinishBake(bakeNodes) {\n\t\tthis.materials = [];\n\n\t\tfunction destroyRT(rt) {\n\t\t\tMeshInstance.decRefLightmap(rt.colorBuffer);\n\t\t\trt.destroy();\n\t\t}\n\n\t\tthis.renderTargets.forEach(rt => {\n\t\t\tdestroyRT(rt);\n\t\t});\n\t\tthis.renderTargets.clear();\n\t\tbakeNodes.forEach(node => {\n\t\t\tnode.renderTargets.forEach(rt => {\n\t\t\t\tdestroyRT(rt);\n\t\t\t});\n\t\t\tnode.renderTargets.lenght = 0;\n\t\t});\n\t}\n\n\tcreateMaterials(device, scene, passCount) {\n\t\tconst xformUv1 = \"#define UV1LAYOUT\\n\" + shaderChunks.transformVS;\n\t\tconst bakeLmEnd = shaderChunks.bakeLmEndPS;\n\n\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\tif (!this.passMaterials[pass]) {\n\t\t\t\tconst lmMaterial = new StandardMaterial();\n\t\t\t\tlmMaterial.chunks.transformVS = xformUv1;\n\n\t\t\t\tif (pass === PASS_COLOR) {\n\t\t\t\t\tlmMaterial.chunks.endPS = bakeLmEnd;\n\t\t\t\t\tlmMaterial.ambient = new Color(0, 0, 0);\n\t\t\t\t\tlmMaterial.ambientTint = true;\n\t\t\t\t\tlmMaterial.lightMap = this.blackTex;\n\t\t\t\t} else {\n\t\t\t\t\tlmMaterial.chunks.basePS = shaderChunks.basePS + \"\\nuniform sampler2D texture_dirLightMap;\\nuniform float bakeDir;\\n\";\n\t\t\t\t\tlmMaterial.chunks.endPS = shaderChunks.bakeDirLmEndPS;\n\t\t\t\t}\n\n\t\t\t\tlmMaterial.chunks.outputAlphaPS = \"\\n\";\n\t\t\t\tlmMaterial.chunks.outputAlphaOpaquePS = \"\\n\";\n\t\t\t\tlmMaterial.chunks.outputAlphaPremulPS = \"\\n\";\n\t\t\t\tlmMaterial.cull = CULLFACE_NONE;\n\t\t\t\tlmMaterial.forceUv1 = true;\n\t\t\t\tlmMaterial.update();\n\t\t\t\tlmMaterial.updateShader(device, scene);\n\t\t\t\tlmMaterial.name = \"lmMaterial\" + pass;\n\t\t\t\tthis.passMaterials[pass] = lmMaterial;\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateTexture(size, type, name) {\n\t\tconst tex = new Texture(this.device, {\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tmipmaps: false,\n\t\t\ttype: type,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST\n\t\t});\n\t\ttex.name = name;\n\t\treturn tex;\n\t}\n\n\tcollectModels(node, bakeNodes, allNodes) {\n\t\tvar _node$model, _node$model2, _node$render;\n\n\t\tif (!node.enabled) return;\n\t\tlet meshInstances;\n\n\t\tif ((_node$model = node.model) != null && _node$model.model && (_node$model2 = node.model) != null && _node$model2.enabled) {\n\t\t\tif (allNodes) allNodes.push(new MeshNode(node));\n\n\t\t\tif (node.model.lightmapped) {\n\t\t\t\tif (bakeNodes) {\n\t\t\t\t\tmeshInstances = node.model.model.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((_node$render = node.render) != null && _node$render.enabled) {\n\t\t\tif (allNodes) allNodes.push(new MeshNode(node));\n\n\t\t\tif (node.render.lightmapped) {\n\t\t\t\tif (bakeNodes) {\n\t\t\t\t\tmeshInstances = node.render.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (meshInstances) {\n\t\t\tlet hasUv1 = true;\n\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (!meshInstances[i].mesh.vertexBuffer.format.hasUv1) {\n\t\t\t\t\thasUv1 = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasUv1) {\n\t\t\t\tconst notInstancedMeshInstances = [];\n\n\t\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\t\tconst mesh = meshInstances[i].mesh;\n\n\t\t\t\t\tif (this._tempSet.has(mesh)) {\n\t\t\t\t\t\tbakeNodes.push(new MeshNode(node, [meshInstances[i]]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnotInstancedMeshInstances.push(meshInstances[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._tempSet.add(mesh);\n\t\t\t\t}\n\n\t\t\t\tthis._tempSet.clear();\n\n\t\t\t\tif (notInstancedMeshInstances.length > 0) {\n\t\t\t\t\tbakeNodes.push(new MeshNode(node, notInstancedMeshInstances));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < node._children.length; i++) {\n\t\t\tthis.collectModels(node._children[i], bakeNodes, allNodes);\n\t\t}\n\t}\n\n\tprepareShadowCasters(nodes) {\n\t\tconst casters = [];\n\n\t\tfor (let n = 0; n < nodes.length; n++) {\n\t\t\tconst component = nodes[n].component;\n\t\t\tcomponent.castShadows = component.castShadowsLightmap;\n\n\t\t\tif (component.castShadowsLightmap) {\n\t\t\t\tconst meshes = nodes[n].meshInstances;\n\n\t\t\t\tfor (let i = 0; i < meshes.length; i++) {\n\t\t\t\t\tmeshes[i].visibleThisFrame = true;\n\t\t\t\t\tcasters.push(meshes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn casters;\n\t}\n\n\tupdateTransforms(nodes) {\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst meshInstances = nodes[i].meshInstances;\n\n\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\tmeshInstances[j].node.getWorldTransform();\n\t\t\t}\n\t\t}\n\t}\n\n\tcalculateLightmapSize(node) {\n\t\tlet data, parent;\n\t\tconst sizeMult = this.scene.lightmapSizeMultiplier || 16;\n\t\tconst scale = tempVec$1;\n\t\tlet srcArea, lightmapSizeMultiplier;\n\n\t\tif (node.model) {\n\t\t\tlightmapSizeMultiplier = node.model.lightmapSizeMultiplier;\n\n\t\t\tif (node.model.asset) {\n\t\t\t\tdata = this.assets.get(node.model.asset).data;\n\n\t\t\t\tif (data.area) {\n\t\t\t\t\tsrcArea = data.area;\n\t\t\t\t}\n\t\t\t} else if (node.model._area) {\n\t\t\t\tdata = node.model;\n\n\t\t\t\tif (data._area) {\n\t\t\t\t\tsrcArea = data._area;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (node.render) {\n\t\t\tlightmapSizeMultiplier = node.render.lightmapSizeMultiplier;\n\n\t\t\tif (node.render.type !== 'asset') {\n\t\t\t\tif (node.render._area) {\n\t\t\t\t\tdata = node.render;\n\n\t\t\t\t\tif (data._area) {\n\t\t\t\t\t\tsrcArea = data._area;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst area = {\n\t\t\tx: 1,\n\t\t\ty: 1,\n\t\t\tz: 1,\n\t\t\tuv: 1\n\t\t};\n\n\t\tif (srcArea) {\n\t\t\tarea.x = srcArea.x;\n\t\t\tarea.y = srcArea.y;\n\t\t\tarea.z = srcArea.z;\n\t\t\tarea.uv = srcArea.uv;\n\t\t}\n\n\t\tconst areaMult = lightmapSizeMultiplier || 1;\n\t\tarea.x *= areaMult;\n\t\tarea.y *= areaMult;\n\t\tarea.z *= areaMult;\n\t\tscale.copy(node.localScale);\n\t\tparent = node._parent;\n\n\t\twhile (parent) {\n\t\t\tscale.mul(parent.localScale);\n\t\t\tparent = parent._parent;\n\t\t}\n\n\t\tscale.x = Math.abs(scale.x);\n\t\tscale.y = Math.abs(scale.y);\n\t\tscale.z = Math.abs(scale.z);\n\t\tlet totalArea = area.x * scale.y * scale.z + area.y * scale.x * scale.z + area.z * scale.x * scale.y;\n\t\ttotalArea /= area.uv;\n\t\ttotalArea = Math.sqrt(totalArea);\n\t\treturn Math.min(math.nextPowerOfTwo(totalArea * sizeMult), this.scene.lightmapMaxResolution || MAX_LIGHTMAP_SIZE);\n\t}\n\n\tsetLightmaping(nodes, value, passCount, shaderDefs) {\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tconst meshInstances = node.meshInstances;\n\n\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\tconst meshInstance = meshInstances[j];\n\t\t\t\tmeshInstance.setLightmapped(value);\n\n\t\t\t\tif (value) {\n\t\t\t\t\tif (shaderDefs) {\n\t\t\t\t\t\tmeshInstance._shaderDefs |= shaderDefs;\n\t\t\t\t\t}\n\n\t\t\t\t\tmeshInstance.mask = MASK_BAKED;\n\n\t\t\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\t\t\tconst tex = node.renderTargets[pass].colorBuffer;\n\t\t\t\t\t\ttex.minFilter = FILTER_LINEAR;\n\t\t\t\t\t\ttex.magFilter = FILTER_LINEAR;\n\t\t\t\t\t\tmeshInstance.setRealtimeLightmap(MeshInstance.lightmapParamNames[pass], tex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbake(nodes, mode = BAKE_COLORDIR) {\n\t\tconst device = this.device;\n\t\tconst startTime = now();\n\t\tthis.stats.renderPasses = 0;\n\t\tthis.stats.shadowMapTime = 0;\n\t\tthis.stats.forwardTime = 0;\n\t\tconst startShaders = device._shaderStats.linked;\n\t\tconst startFboTime = device._renderTargetCreationTime;\n\t\tconst startCompileTime = device._shaderStats.compileTime;\n\t\tconst bakeNodes = [];\n\t\tconst allNodes = [];\n\n\t\tif (nodes) {\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tthis.collectModels(nodes[i], bakeNodes, null);\n\t\t\t}\n\n\t\t\tthis.collectModels(this.root, null, allNodes);\n\t\t} else {\n\t\t\tthis.collectModels(this.root, bakeNodes, allNodes);\n\t\t}\n\n\t\tif (bakeNodes.length > 0) {\n\t\t\tconst passCount = mode === BAKE_COLORDIR ? 2 : 1;\n\t\t\tthis.setLightmaping(bakeNodes, false, passCount);\n\t\t\tthis.initBake(device);\n\t\t\tthis.bakeInternal(passCount, bakeNodes, allNodes);\n\t\t\tconst shaderDefs = mode === BAKE_COLORDIR ? SHADERDEF_LM | SHADERDEF_DIRLM : SHADERDEF_LM;\n\t\t\tthis.setLightmaping(bakeNodes, true, passCount, shaderDefs);\n\t\t\tthis.finishBake(bakeNodes);\n\t\t}\n\n\t\tconst nowTime = now();\n\t\tthis.stats.totalRenderTime = nowTime - startTime;\n\t\tthis.stats.shadersLinked = device._shaderStats.linked - startShaders;\n\t\tthis.stats.compileTime = device._shaderStats.compileTime - startCompileTime;\n\t\tthis.stats.fboTime = device._renderTargetCreationTime - startFboTime;\n\t\tthis.stats.lightmapCount = bakeNodes.length;\n\t}\n\n\tallocateTextures(bakeNodes, passCount) {\n\t\tfor (let i = 0; i < bakeNodes.length; i++) {\n\t\t\tconst bakeNode = bakeNodes[i];\n\t\t\tconst size = this.calculateLightmapSize(bakeNode.node);\n\n\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\tconst tex = this.createTexture(size, TEXTURETYPE_DEFAULT, \"lightmapper_lightmap_\" + i);\n\t\t\t\tMeshInstance.incRefLightmap(tex);\n\t\t\t\tbakeNode.renderTargets[pass] = new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.renderTargets.has(size)) {\n\t\t\t\tconst tex = this.createTexture(size, TEXTURETYPE_DEFAULT, \"lightmapper_temp_lightmap_\" + size);\n\t\t\t\tMeshInstance.incRefLightmap(tex);\n\t\t\t\tthis.renderTargets.set(size, new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex,\n\t\t\t\t\tdepth: false\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareLightsToBake(layerComposition, allLights, bakeLights) {\n\t\tconst sceneLights = layerComposition._lights;\n\n\t\tfor (let i = 0; i < sceneLights.length; i++) {\n\t\t\tconst light = sceneLights[i];\n\t\t\tconst lightInfo = new LightInfo(light);\n\t\t\tallLights.push(lightInfo);\n\n\t\t\tif (light.enabled && (light.mask & MASK_LIGHTMAP) !== 0) {\n\t\t\t\tlight.isStatic = false;\n\t\t\t\tlight.mask = 0xFFFFFFFF;\n\t\t\t\tlight.shadowUpdateMode = light.type === LIGHTTYPE_DIRECTIONAL ? SHADOWUPDATE_REALTIME : SHADOWUPDATE_THISFRAME;\n\t\t\t\tbakeLights.push(lightInfo);\n\t\t\t}\n\t\t}\n\n\t\tbakeLights.sort();\n\t}\n\n\trestoreLights(allLights) {\n\t\tfor (let i = 0; i < allLights.length; i++) {\n\t\t\tallLights[i].restore();\n\t\t}\n\t}\n\n\tsetupScene() {\n\t\tthis.revertStatic = false;\n\n\t\tif (this.scene._needsStaticPrepare) {\n\t\t\tthis.scene._needsStaticPrepare = false;\n\t\t\tthis.revertStatic = true;\n\t\t}\n\n\t\tthis.fog = this.scene.fog;\n\t\tthis.ambientLight.copy(this.scene.ambientLight);\n\t\tthis.scene.fog = FOG_NONE;\n\t\tthis.scene.ambientLight.set(0, 0, 0);\n\t}\n\n\trestoreScene() {\n\t\tthis.scene.fog = this.fog;\n\t\tthis.scene.ambientLight.copy(this.ambientLight);\n\n\t\tif (this.revertStatic) {\n\t\t\tthis.scene._needsStaticPrepare = true;\n\t\t}\n\t}\n\n\tcomputeNodeBounds(nodes) {\n\t\tconst bounds = new BoundingBox();\n\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst meshInstances = nodes[i].meshInstances;\n\n\t\t\tif (meshInstances.length > 0) {\n\t\t\t\tbounds.copy(meshInstances[0].aabb);\n\n\t\t\t\tfor (let m = 1; m < meshInstances.length; m++) {\n\t\t\t\t\tbounds.add(meshInstances[m].aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes[i].bounds = bounds.clone();\n\t\t}\n\t}\n\n\tcomputeBounds(meshInstances) {\n\t\tconst bounds = new BoundingBox();\n\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tbounds.copy(meshInstances[0].aabb);\n\n\t\t\tfor (let m = 1; m < meshInstances.length; m++) {\n\t\t\t\tbounds.add(meshInstances[m].aabb);\n\t\t\t}\n\t\t}\n\n\t\treturn bounds;\n\t}\n\n\tbackupMaterials(meshInstances) {\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tthis.materials[i] = meshInstances[i].material;\n\t\t}\n\t}\n\n\trestoreMaterials(meshInstances) {\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].material = this.materials[i];\n\t\t}\n\t}\n\n\tlightCameraPrepare(device, bakeLight) {\n\t\tconst light = bakeLight.light;\n\t\tlet shadowCam;\n\n\t\tif (light.type === LIGHTTYPE_SPOT) {\n\t\t\tconst lightRenderData = light.getRenderData(null, 0);\n\t\t\tshadowCam = lightRenderData.shadowCamera;\n\n\t\t\tshadowCam._node.setPosition(light._node.getPosition());\n\n\t\t\tshadowCam._node.setRotation(light._node.getRotation());\n\n\t\t\tshadowCam._node.rotateLocal(-90, 0, 0);\n\n\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\tshadowCam.nearClip = light.attenuationEnd / 1000;\n\t\t\tshadowCam.farClip = light.attenuationEnd;\n\t\t\tshadowCam.aspectRatio = 1;\n\t\t\tshadowCam.fov = light._outerConeAngle * 2;\n\t\t\tthis.renderer.updateCameraFrustum(shadowCam);\n\t\t}\n\n\t\treturn shadowCam;\n\t}\n\n\tlightCameraPrepareAndCull(bakeLight, bakeNode, shadowCam, casterBounds) {\n\t\tconst light = bakeLight.light;\n\t\tlet lightAffectsNode = true;\n\n\t\tif (light.type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\ttempVec$1.copy(casterBounds.center);\n\t\t\ttempVec$1.y += casterBounds.halfExtents.y;\n\t\t\tthis.camera.node.setPosition(tempVec$1);\n\t\t\tthis.camera.node.setEulerAngles(-90, 0, 0);\n\t\t\tthis.camera.nearClip = 0;\n\t\t\tthis.camera.farClip = casterBounds.halfExtents.y * 2;\n\t\t\tconst frustumSize = Math.max(casterBounds.halfExtents.x, casterBounds.halfExtents.z);\n\t\t\tthis.camera.orthoHeight = frustumSize;\n\t\t} else {\n\t\t\tif (!bakeLight.lightBounds.intersects(bakeNode.bounds)) {\n\t\t\t\tlightAffectsNode = false;\n\t\t\t}\n\t\t}\n\n\t\tif (light.type === LIGHTTYPE_SPOT) {\n\t\t\tlet nodeVisible = false;\n\t\t\tconst meshInstances = bakeNode.meshInstances;\n\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (meshInstances[i]._isVisible(shadowCam)) {\n\t\t\t\t\tnodeVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!nodeVisible) {\n\t\t\t\tlightAffectsNode = false;\n\t\t\t}\n\t\t}\n\n\t\treturn lightAffectsNode;\n\t}\n\n\tsetupLightArray(lightArray, light) {\n\t\tlightArray[LIGHTTYPE_DIRECTIONAL].length = 0;\n\t\tlightArray[LIGHTTYPE_OMNI].length = 0;\n\t\tlightArray[LIGHTTYPE_SPOT].length = 0;\n\t\tlightArray[light.type][0] = light;\n\t}\n\n\trenderShadowMap(shadowMapRendered, casters, lightArray, bakeLight) {\n\t\tconst light = bakeLight.light;\n\n\t\tif (!shadowMapRendered && light.castShadows) {\n\t\t\tlight.shadowMap = this.shadowMapCache.get(this.device, light);\n\n\t\t\tif (light.type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis.renderer._shadowRenderer.cullDirectional(light, casters, this.camera);\n\t\t\t} else {\n\t\t\t\tthis.renderer._shadowRenderer.cullLocal(light, casters);\n\t\t\t}\n\n\t\t\tthis.renderer.renderShadows(lightArray[light.type], this.camera);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdilateTextures(device, bakeNodes, passCount) {\n\t\tconst numDilates2x = 4;\n\t\tconst pixelOffset = this.pixelOffset;\n\t\tconst dilateShader = this.dilateShader;\n\t\tconst constantTexSource = this.constantTexSource;\n\t\tconst constantPixelOffset = this.constantPixelOffset;\n\n\t\tfor (let node = 0; node < bakeNodes.length; node++) {\n\t\t\tconst bakeNode = bakeNodes[node];\n\n\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\tconst nodeRT = bakeNode.renderTargets[pass];\n\t\t\t\tconst lightmap = nodeRT.colorBuffer;\n\t\t\t\tconst tempRT = this.renderTargets.get(lightmap.width);\n\t\t\t\tconst tempTex = tempRT.colorBuffer;\n\t\t\t\tpixelOffset[0] = 1 / lightmap.width;\n\t\t\t\tpixelOffset[1] = 1 / lightmap.height;\n\t\t\t\tconstantPixelOffset.setValue(pixelOffset);\n\n\t\t\t\tfor (let i = 0; i < numDilates2x; i++) {\n\t\t\t\t\tconstantTexSource.setValue(lightmap);\n\t\t\t\t\tdrawQuadWithShader(device, tempRT, dilateShader);\n\t\t\t\t\tconstantTexSource.setValue(tempTex);\n\t\t\t\t\tdrawQuadWithShader(device, nodeRT, dilateShader);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbakeInternal(passCount, bakeNodes, allNodes) {\n\t\tconst scene = this.scene;\n\t\tconst device = this.device;\n\t\tthis.createMaterials(device, scene, passCount);\n\t\tthis.setupScene();\n\n\t\tscene.layers._update();\n\n\t\tthis.allocateTextures(bakeNodes, passCount);\n\t\tconst allLights = [],\n\t\t\t\t\tbakeLights = [];\n\t\tthis.prepareLightsToBake(scene.layers, allLights, bakeLights);\n\t\tthis.updateTransforms(allNodes);\n\t\tconst casters = this.prepareShadowCasters(allNodes);\n\t\tthis.renderer.updateMorphing(casters);\n\t\tthis.renderer.updateCpuSkinMatrices(casters);\n\t\tthis.renderer.gpuUpdate(casters);\n\t\tthis.computeNodeBounds(bakeNodes);\n\t\tconst casterBounds = this.computeBounds(casters);\n\t\tlet i, j, rcv, m;\n\n\t\tfor (i = 0; i < bakeNodes.length; i++) {\n\t\t\tconst bakeNode = bakeNodes[i];\n\t\t\trcv = bakeNode.meshInstances;\n\n\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\tm = rcv[j];\n\t\t\t\tm.setLightmapped(false);\n\t\t\t\tm.mask = MASK_LIGHTMAP;\n\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], m.material.lightMap ? m.material.lightMap : this.blackTex);\n\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], this.blackTex);\n\t\t\t}\n\t\t}\n\n\t\tfor (j = 0; j < bakeLights.length; j++) {\n\t\t\tbakeLights[j].light.enabled = false;\n\t\t}\n\n\t\tconst lightArray = [[], [], []];\n\t\tlet pass, node;\n\t\tlet shadersUpdatedOn1stPass = false;\n\n\t\tfor (i = 0; i < bakeLights.length; i++) {\n\t\t\tvar _bakeLight$light$shad;\n\n\t\t\tconst bakeLight = bakeLights[i];\n\t\t\tbakeLight.light.enabled = true;\n\t\t\tlet shadowMapRendered = false;\n\t\t\tconst shadowCam = this.lightCameraPrepare(device, bakeLight);\n\n\t\t\tfor (node = 0; node < bakeNodes.length; node++) {\n\t\t\t\tconst bakeNode = bakeNodes[node];\n\t\t\t\trcv = bakeNode.meshInstances;\n\t\t\t\tconst lightAffectsNode = this.lightCameraPrepareAndCull(bakeLight, bakeNode, shadowCam, casterBounds);\n\n\t\t\t\tif (!lightAffectsNode) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.setupLightArray(lightArray, bakeLight.light);\n\t\t\t\tshadowMapRendered = this.renderShadowMap(shadowMapRendered, casters, lightArray, bakeLight);\n\t\t\t\tthis.backupMaterials(rcv);\n\n\t\t\t\tfor (pass = 0; pass < passCount; pass++) {\n\t\t\t\t\tconst nodeRT = bakeNode.renderTargets[pass];\n\t\t\t\t\tconst lightmapSize = bakeNode.renderTargets[pass].colorBuffer.width;\n\t\t\t\t\tconst tempRT = this.renderTargets.get(lightmapSize);\n\t\t\t\t\tconst tempTex = tempRT.colorBuffer;\n\n\t\t\t\t\tif (pass === 0) {\n\t\t\t\t\t\tshadersUpdatedOn1stPass = scene.updateShaders;\n\t\t\t\t\t} else if (shadersUpdatedOn1stPass) {\n\t\t\t\t\t\tscene.updateShaders = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\t\t\trcv[j].material = this.passMaterials[pass];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.renderer.updateShaders(rcv);\n\t\t\t\t\tthis.renderer.setCamera(this.camera, tempRT, true);\n\n\t\t\t\t\tif (pass === PASS_DIR) {\n\t\t\t\t\t\tthis.constantBakeDir.setValue(bakeLight.light.bakeDir ? 1 : 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.renderer._forwardTime = 0;\n\t\t\t\t\tthis.renderer._shadowMapTime = 0;\n\t\t\t\t\tthis.renderer.renderForward(this.camera, rcv, rcv.length, lightArray, SHADER_FORWARDHDR);\n\t\t\t\t\tbakeNode.renderTargets[pass] = tempRT;\n\t\t\t\t\tthis.renderTargets.set(lightmapSize, nodeRT);\n\n\t\t\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\t\t\tm = rcv[j];\n\t\t\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[pass], tempTex);\n\t\t\t\t\t\tm._shaderDefs |= SHADERDEF_LM;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.restoreMaterials(rcv);\n\t\t\t}\n\n\t\t\tbakeLight.light.enabled = false;\n\n\t\t\tif ((_bakeLight$light$shad = bakeLight.light.shadowMap) != null && _bakeLight$light$shad.cached) {\n\t\t\t\tthis.shadowMapCache.add(bakeLight.light, bakeLight.light.shadowMap);\n\t\t\t\tbakeLight.light.shadowMap = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.shadowMapCache.clear();\n\t\tthis.dilateTextures(device, bakeNodes, passCount);\n\n\t\tfor (node = 0; node < allNodes.length; node++) {\n\t\t\tallNodes[node].component.castShadows = allNodes[node].castShadows;\n\t\t}\n\n\t\tthis.restoreLights(allLights);\n\t\tthis.restoreScene();\n\t}\n\n}\n\nclass Morph extends RefCountedObject {\n\tconstructor(targets, graphicsDevice) {\n\t\tsuper();\n\t\tthis.device = graphicsDevice || getApplication().graphicsDevice;\n\t\tthis._targets = targets;\n\n\t\tif (this.device.supportsMorphTargetTexturesCore) {\n\t\t\tif (this.device.extTextureHalfFloat && this.device.textureHalfFloatRenderable) {\n\t\t\t\tthis._renderTextureFormat = Morph.FORMAT_HALF_FLOAT;\n\t\t\t} else if (this.device.extTextureFloat && this.device.textureFloatRenderable) {\n\t\t\t\tthis._renderTextureFormat = Morph.FORMAT_FLOAT;\n\t\t\t}\n\n\t\t\tif (this.device.extTextureHalfFloat && this.device.textureHalfFloatUpdatable) {\n\t\t\t\tthis._textureFormat = Morph.FORMAT_HALF_FLOAT;\n\t\t\t} else if (this.device.extTextureFloat) {\n\t\t\t\tthis._textureFormat = Morph.FORMAT_FLOAT;\n\t\t\t}\n\n\t\t\tif (this._renderTextureFormat !== undefined && this._textureFormat !== undefined) {\n\t\t\t\tthis._useTextureMorph = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._init();\n\n\t\tthis._updateMorphFlags();\n\n\t\tthis._calculateAabb();\n\t}\n\n\tget morphPositions() {\n\t\treturn this._morphPositions;\n\t}\n\n\tget morphNormals() {\n\t\treturn this._morphNormals;\n\t}\n\n\tget maxActiveTargets() {\n\t\tif (this._useTextureMorph) return this._targets.length;\n\t\treturn this._morphPositions && this._morphNormals ? 4 : 8;\n\t}\n\n\tget useTextureMorph() {\n\t\treturn this._useTextureMorph;\n\t}\n\n\t_init() {\n\t\tif (this._useTextureMorph) {\n\t\t\tthis._useTextureMorph = this._initTextureBased();\n\t\t}\n\n\t\tvar i;\n\n\t\tif (!this._useTextureMorph) {\n\t\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\t\tthis._targets[i]._initVertexBuffers(this.device);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\tthis._targets[i]._postInit();\n\t\t}\n\t}\n\n\t_initTextureBased() {\n\t\tvar target, i, v;\n\t\tvar deltaArrays = [],\n\t\t\t\tdeltaInfos = [];\n\n\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tif (target.options.deltaPositions) {\n\t\t\t\tdeltaArrays.push(target.options.deltaPositions);\n\t\t\t\tdeltaInfos.push({\n\t\t\t\t\ttarget: target,\n\t\t\t\t\tname: 'texturePositions'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (target.options.deltaNormals) {\n\t\t\t\tdeltaArrays.push(target.options.deltaNormals);\n\t\t\t\tdeltaInfos.push({\n\t\t\t\t\ttarget: target,\n\t\t\t\t\tname: 'textureNormals'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar ids = [],\n\t\t\t\tusedDataIndices = [];\n\t\tvar vertexUsed, data;\n\t\tvar freeIndex = 1;\n\t\tvar dataCount = deltaArrays[0].length;\n\n\t\tfor (v = 0; v < dataCount; v += 3) {\n\t\t\tvertexUsed = false;\n\n\t\t\tfor (i = 0; i < deltaArrays.length; i++) {\n\t\t\t\tdata = deltaArrays[i];\n\n\t\t\t\tif (data[v] !== 0 || data[v + 1] !== 0 || data[v + 2] !== 0) {\n\t\t\t\t\tvertexUsed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (vertexUsed) {\n\t\t\t\tids.push(freeIndex);\n\t\t\t\tusedDataIndices.push(v / 3);\n\t\t\t\tfreeIndex++;\n\t\t\t} else {\n\t\t\t\tids.push(0);\n\t\t\t}\n\t\t}\n\n\t\tvar maxTextureSize = Math.min(this.device.maxTextureSize, 4096);\n\t\tvar morphTextureWidth = Math.ceil(Math.sqrt(freeIndex));\n\t\tmorphTextureWidth = Math.min(morphTextureWidth, maxTextureSize);\n\t\tvar morphTextureHeight = Math.ceil(freeIndex / morphTextureWidth);\n\n\t\tif (morphTextureHeight > maxTextureSize) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.morphTextureWidth = morphTextureWidth;\n\t\tthis.morphTextureHeight = morphTextureHeight;\n\t\tvar halfFloat = false;\n\t\tvar numComponents = 3;\n\t\tvar float2Half = math.float2Half;\n\n\t\tif (this._textureFormat === Morph.FORMAT_HALF_FLOAT) {\n\t\t\thalfFloat = true;\n\t\t\tnumComponents = 4;\n\t\t}\n\n\t\tvar arraySize = this.morphTextureWidth * this.morphTextureHeight * numComponents;\n\t\tvar packedDeltas = halfFloat ? new Uint16Array(arraySize) : new Float32Array(arraySize);\n\n\t\tfor (i = 0; i < deltaArrays.length; i++) {\n\t\t\tdata = deltaArrays[i];\n\n\t\t\tfor (v = 0; v < usedDataIndices.length; v++) {\n\t\t\t\tvar index = usedDataIndices[v];\n\n\t\t\t\tif (halfFloat) {\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents] = float2Half(data[index * 3]);\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 1] = float2Half(data[index * 3 + 1]);\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 2] = float2Half(data[index * 3 + 2]);\n\t\t\t\t} else {\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents] = data[index * 3];\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 1] = data[index * 3 + 1];\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 2] = data[index * 3 + 2];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttarget = deltaInfos[i].target;\n\t\t\tvar format = this._textureFormat === Morph.FORMAT_FLOAT ? PIXELFORMAT_RGB32F : PIXELFORMAT_RGBA16F;\n\n\t\t\ttarget._setTexture(deltaInfos[i].name, this._createTexture(\"MorphTarget\", format, packedDeltas));\n\t\t}\n\n\t\tvar formatDesc = [{\n\t\t\tsemantic: SEMANTIC_ATTR15,\n\t\t\tcomponents: 1,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tthis.vertexBufferIds = new VertexBuffer(this.device, new VertexFormat(this.device, formatDesc), ids.length, BUFFER_STATIC, new Float32Array(ids));\n\t\treturn true;\n\t}\n\n\tdestroy() {\n\t\tif (this.vertexBufferIds) {\n\t\t\tthis.vertexBufferIds.destroy();\n\t\t\tthis.vertexBufferIds = null;\n\t\t}\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\tthis._targets[i].destroy();\n\t\t}\n\n\t\tthis._targets.length = 0;\n\t}\n\n\tget targets() {\n\t\treturn this._targets;\n\t}\n\n\t_updateMorphFlags() {\n\t\tthis._morphPositions = false;\n\t\tthis._morphNormals = false;\n\t\tvar target;\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tif (target.morphPositions) {\n\t\t\t\tthis._morphPositions = true;\n\t\t\t}\n\n\t\t\tif (target.morphNormals) {\n\t\t\t\tthis._morphNormals = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_calculateAabb() {\n\t\tthis.aabb = new BoundingBox(new Vec3(0, 0, 0), new Vec3(0, 0, 0));\n\t\tvar target;\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tthis.aabb._expand(target.aabb.getMin(), target.aabb.getMax());\n\t\t}\n\t}\n\n\t_createTexture(name, format, pixelData) {\n\t\tvar texture = new Texture(this.device, {\n\t\t\twidth: this.morphTextureWidth,\n\t\t\theight: this.morphTextureHeight,\n\t\t\tformat: format,\n\t\t\tcubemap: false,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = name;\n\n\t\tif (pixelData) {\n\t\t\tvar pixels = texture.lock();\n\t\t\tpixels.set(pixelData);\n\t\t\ttexture.unlock();\n\t\t}\n\n\t\treturn texture;\n\t}\n\n}\n\nMorph.FORMAT_FLOAT = 0;\nMorph.FORMAT_HALF_FLOAT = 1;\n\nvar textureMorphVertexShader = 'attribute vec2 vertex_position;\\n' + 'varying vec2 uv0;\\n' + 'void main(void) {\\n' + '\t\tgl_Position = vec4(vertex_position, 0.5, 1.0);\\n' + '\t\tuv0 = vertex_position.xy * 0.5 + 0.5;\\n' + '}\\n';\n\nclass MorphInstance {\n\tconstructor(morph) {\n\t\tthis.morph = morph;\n\t\tmorph.incRefCount();\n\t\tthis.device = morph.device;\n\t\tthis.meshInstance = null;\n\t\tthis._weights = [];\n\n\t\tfor (var v = 0; v < morph._targets.length; v++) {\n\t\t\tthis.setWeight(v, morph._targets[v].defaultWeight);\n\t\t}\n\n\t\tthis._activeTargets = [];\n\n\t\tif (morph.useTextureMorph) {\n\t\t\tthis.shaderCache = {};\n\t\t\tthis.maxSubmitCount = this.device.maxTextures;\n\t\t\tthis._shaderMorphWeights = new Float32Array(this.maxSubmitCount);\n\n\t\t\tvar createRT = function (name, textureVar) {\n\t\t\t\tvar format = morph._renderTextureFormat === Morph.FORMAT_FLOAT ? PIXELFORMAT_RGBA32F : PIXELFORMAT_RGBA16F;\n\t\t\t\tthis[textureVar] = morph._createTexture(name, format);\n\t\t\t\treturn new RenderTarget({\n\t\t\t\t\tcolorBuffer: this[textureVar],\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t}.bind(this);\n\n\t\t\tif (morph.morphPositions) {\n\t\t\t\tthis.rtPositions = createRT(\"MorphRTPos\", \"texturePositions\");\n\t\t\t}\n\n\t\t\tif (morph.morphNormals) {\n\t\t\t\tthis.rtNormals = createRT(\"MorphRTNrm\", \"textureNormals\");\n\t\t\t}\n\n\t\t\tthis._textureParams = new Float32Array([morph.morphTextureWidth, morph.morphTextureHeight, 1 / morph.morphTextureWidth, 1 / morph.morphTextureHeight]);\n\n\t\t\tfor (var i = 0; i < this.maxSubmitCount; i++) {\n\t\t\t\tthis[\"morphBlendTex\" + i] = this.device.scope.resolve(\"morphBlendTex\" + i);\n\t\t\t}\n\n\t\t\tthis.morphFactor = this.device.scope.resolve(\"morphFactor[0]\");\n\t\t\tthis.zeroTextures = false;\n\t\t} else {\n\t\t\tthis.maxSubmitCount = 8;\n\t\t\tthis._shaderMorphWeights = new Float32Array(this.maxSubmitCount);\n\t\t\tthis._shaderMorphWeightsA = new Float32Array(this._shaderMorphWeights.buffer, 0, 4);\n\t\t\tthis._shaderMorphWeightsB = new Float32Array(this._shaderMorphWeights.buffer, 4 * 4, 4);\n\t\t\tthis._activeVertexBuffers = new Array(this.maxSubmitCount);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.meshInstance = null;\n\t\tthis.shader = null;\n\t\tconst morph = this.morph;\n\n\t\tif (morph) {\n\t\t\tthis.morph = null;\n\t\t\tmorph.decRefCount();\n\n\t\t\tif (morph.getRefCount() < 1) {\n\t\t\t\tmorph.destroy();\n\t\t\t}\n\t\t}\n\n\t\tif (this.rtPositions) {\n\t\t\tthis.rtPositions.destroy();\n\t\t\tthis.rtPositions = null;\n\t\t}\n\n\t\tif (this.texturePositions) {\n\t\t\tthis.texturePositions.destroy();\n\t\t\tthis.texturePositions = null;\n\t\t}\n\n\t\tif (this.rtNormals) {\n\t\t\tthis.rtNormals.destroy();\n\t\t\tthis.rtNormals = null;\n\t\t}\n\n\t\tif (this.textureNormals) {\n\t\t\tthis.textureNormals.destroy();\n\t\t\tthis.textureNormals = null;\n\t\t}\n\t}\n\n\tclone() {\n\t\tvar clone = new MorphInstance(this.morph);\n\t\treturn clone;\n\t}\n\n\tgetWeight(index) {\n\t\treturn this._weights[index];\n\t}\n\n\tsetWeight(index, weight) {\n\t\tthis._weights[index] = weight;\n\t\tthis._dirty = true;\n\t}\n\n\t_getFragmentShader(numTextures) {\n\t\tvar i,\n\t\t\t\tfragmentShader = '';\n\n\t\tif (numTextures > 0) {\n\t\t\tfragmentShader += 'varying vec2 uv0;\\n' + 'uniform highp float morphFactor[' + numTextures + '];\\n';\n\t\t}\n\n\t\tfor (i = 0; i < numTextures; i++) {\n\t\t\tfragmentShader += 'uniform highp sampler2D morphBlendTex' + i + ';\\n';\n\t\t}\n\n\t\tfragmentShader += 'void main (void) {\\n' + '\t\thighp vec4 color = vec4(0, 0, 0, 1);\\n';\n\n\t\tfor (i = 0; i < numTextures; i++) {\n\t\t\tfragmentShader += '\t\tcolor.xyz += morphFactor[' + i + '] * texture2D(morphBlendTex' + i + ', uv0).xyz;\\n';\n\t\t}\n\n\t\tfragmentShader += '\t\tgl_FragColor = color;\\n' + '}\\n';\n\t\treturn fragmentShader;\n\t}\n\n\t_getShader(count) {\n\t\tvar shader = this.shaderCache[count];\n\n\t\tif (!shader) {\n\t\t\tvar fs = this._getFragmentShader(count);\n\n\t\t\tshader = createShaderFromCode(this.device, textureMorphVertexShader, fs, \"textureMorph\" + count);\n\t\t\tthis.shaderCache[count] = shader;\n\t\t}\n\n\t\treturn shader;\n\t}\n\n\t_updateTextureRenderTarget(renderTarget, srcTextureName) {\n\t\tvar device = this.device;\n\n\t\tvar submitBatch = function (usedCount, blending) {\n\t\t\tthis.morphFactor.setValue(this._shaderMorphWeights);\n\t\t\tdevice.setBlending(blending);\n\n\t\t\tif (blending) {\n\t\t\t\tdevice.setBlendFunction(BLENDMODE_ONE, BLENDMODE_ONE);\n\t\t\t\tdevice.setBlendEquation(BLENDEQUATION_ADD);\n\t\t\t}\n\n\t\t\tvar shader = this._getShader(usedCount);\n\n\t\t\tdrawQuadWithShader(device, renderTarget, shader, undefined, undefined, blending);\n\t\t}.bind(this);\n\n\t\tvar usedCount = 0;\n\t\tvar blending = false;\n\t\tvar count = this._activeTargets.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tvar activeTarget = this._activeTargets[i];\n\t\t\tvar tex = activeTarget.target[srcTextureName];\n\n\t\t\tif (tex) {\n\t\t\t\tthis[\"morphBlendTex\" + usedCount].setValue(tex);\n\t\t\t\tthis._shaderMorphWeights[usedCount] = activeTarget.weight;\n\t\t\t\tusedCount++;\n\n\t\t\t\tif (usedCount >= this.maxSubmitCount) {\n\t\t\t\t\tsubmitBatch(usedCount, blending);\n\t\t\t\t\tusedCount = 0;\n\t\t\t\t\tblending = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (usedCount > 0 || count === 0 && !this.zeroTextures) {\n\t\t\tsubmitBatch(usedCount, blending);\n\t\t}\n\t}\n\n\t_updateTextureMorph() {\n\t\tthis.device;\n\n\t\tif (this._activeTargets.length > 0 || !this.zeroTextures) {\n\t\t\tthis._updateTextureRenderTarget(this.rtPositions, 'texturePositions');\n\n\t\t\tthis._updateTextureRenderTarget(this.rtNormals, 'textureNormals');\n\n\t\t\tthis.zeroTextures = this._activeTargets.length === 0;\n\t\t}\n\t}\n\n\t_updateVertexMorph() {\n\t\tvar i,\n\t\t\t\tcount = this.maxSubmitCount;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tthis._shaderMorphWeights[i] = 0;\n\t\t\tthis._activeVertexBuffers[i] = null;\n\t\t}\n\n\t\tvar posIndex = 0;\n\t\tvar nrmIndex = this.morph.morphPositions ? 4 : 0;\n\t\tvar target;\n\n\t\tfor (i = 0; i < this._activeTargets.length; i++) {\n\t\t\ttarget = this._activeTargets[i].target;\n\n\t\t\tif (target._vertexBufferPositions) {\n\t\t\t\tthis._activeVertexBuffers[posIndex] = target._vertexBufferPositions;\n\t\t\t\tthis._shaderMorphWeights[posIndex] = this._activeTargets[i].weight;\n\t\t\t\tposIndex++;\n\t\t\t}\n\n\t\t\tif (target._vertexBufferNormals) {\n\t\t\t\tthis._activeVertexBuffers[nrmIndex] = target._vertexBufferNormals;\n\t\t\t\tthis._shaderMorphWeights[nrmIndex] = this._activeTargets[i].weight;\n\t\t\t\tnrmIndex++;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis._dirty = false;\n\t\tvar targets = this.morph._targets;\n\t\tvar activeCount = 0,\n\t\t\t\tactiveTarget;\n\t\tvar i,\n\t\t\t\tabsWeight,\n\t\t\t\tepsilon = 0.00001;\n\n\t\tfor (i = 0; i < targets.length; i++) {\n\t\t\tabsWeight = Math.abs(this.getWeight(i));\n\n\t\t\tif (absWeight > epsilon) {\n\t\t\t\tif (this._activeTargets.length <= activeCount) {\n\t\t\t\t\tthis._activeTargets[activeCount] = {};\n\t\t\t\t}\n\n\t\t\t\tactiveTarget = this._activeTargets[activeCount++];\n\t\t\t\tactiveTarget.absWeight = absWeight;\n\t\t\t\tactiveTarget.weight = this.getWeight(i);\n\t\t\t\tactiveTarget.target = targets[i];\n\t\t\t}\n\t\t}\n\n\t\tthis._activeTargets.length = activeCount;\n\t\tvar maxActiveTargets = this.morph.maxActiveTargets;\n\n\t\tif (this._activeTargets.length > maxActiveTargets) {\n\t\t\tthis._activeTargets.sort(function (l, r) {\n\t\t\t\treturn l.absWeight < r.absWeight ? 1 : r.absWeight < l.absWeight ? -1 : 0;\n\t\t\t});\n\n\t\t\tthis._activeTargets.length = maxActiveTargets;\n\t\t}\n\n\t\tif (this.morph.useTextureMorph) {\n\t\t\tthis._updateTextureMorph();\n\t\t} else {\n\t\t\tthis._updateVertexMorph();\n\t\t}\n\t}\n\n}\n\nclass Model {\n\tconstructor() {\n\t\tthis.graph = null;\n\t\tthis.meshInstances = [];\n\t\tthis.skinInstances = [];\n\t\tthis.morphInstances = [];\n\t\tthis.cameras = [];\n\t\tthis.lights = [];\n\t\tthis._shadersVersion = 0;\n\t\tthis._immutable = false;\n\t}\n\n\tgetGraph() {\n\t\treturn this.graph;\n\t}\n\n\tsetGraph(graph) {\n\t\tthis.graph = graph;\n\t}\n\n\tgetCameras() {\n\t\treturn this.cameras;\n\t}\n\n\tsetCameras(cameras) {\n\t\tthis.cameras = cameras;\n\t}\n\n\tgetLights() {\n\t\treturn this.lights;\n\t}\n\n\tsetLights(lights) {\n\t\tthis.lights = lights;\n\t}\n\n\tgetMaterials() {\n\t\tvar i;\n\t\tvar materials = [];\n\n\t\tfor (i = 0; i < this.meshInstances.length; i++) {\n\t\t\tvar meshInstance = this.meshInstances[i];\n\n\t\t\tif (materials.indexOf(meshInstance.material) === -1) {\n\t\t\t\tmaterials.push(meshInstance.material);\n\t\t\t}\n\t\t}\n\n\t\treturn materials;\n\t}\n\n\tclone() {\n\t\tvar i, j;\n\t\tvar srcNodes = [];\n\t\tvar cloneNodes = [];\n\n\t\tvar _duplicate = function _duplicate(node) {\n\t\t\tvar newNode = node.clone();\n\t\t\tsrcNodes.push(node);\n\t\t\tcloneNodes.push(newNode);\n\n\t\t\tfor (var idx = 0; idx < node._children.length; idx++) {\n\t\t\t\tnewNode.addChild(_duplicate(node._children[idx]));\n\t\t\t}\n\n\t\t\treturn newNode;\n\t\t};\n\n\t\tvar cloneGraph = _duplicate(this.graph);\n\n\t\tvar cloneMeshInstances = [];\n\t\tvar cloneSkinInstances = [];\n\t\tvar cloneMorphInstances = [];\n\n\t\tfor (i = 0; i < this.skinInstances.length; i++) {\n\t\t\tvar skin = this.skinInstances[i].skin;\n\t\t\tvar cloneSkinInstance = new SkinInstance(skin);\n\t\t\tvar bones = [];\n\n\t\t\tfor (j = 0; j < skin.boneNames.length; j++) {\n\t\t\t\tvar boneName = skin.boneNames[j];\n\t\t\t\tvar bone = cloneGraph.findByName(boneName);\n\t\t\t\tbones.push(bone);\n\t\t\t}\n\n\t\t\tcloneSkinInstance.bones = bones;\n\t\t\tcloneSkinInstances.push(cloneSkinInstance);\n\t\t}\n\n\t\tfor (i = 0; i < this.morphInstances.length; i++) {\n\t\t\tvar morph = this.morphInstances[i].morph;\n\t\t\tvar cloneMorphInstance = new MorphInstance(morph);\n\t\t\tcloneMorphInstances.push(cloneMorphInstance);\n\t\t}\n\n\t\tfor (i = 0; i < this.meshInstances.length; i++) {\n\t\t\tvar meshInstance = this.meshInstances[i];\n\t\t\tvar nodeIndex = srcNodes.indexOf(meshInstance.node);\n\t\t\tvar cloneMeshInstance = new MeshInstance(meshInstance.mesh, meshInstance.material, cloneNodes[nodeIndex]);\n\n\t\t\tif (meshInstance.skinInstance) {\n\t\t\t\tvar skinInstanceIndex = this.skinInstances.indexOf(meshInstance.skinInstance);\n\t\t\t\tcloneMeshInstance.skinInstance = cloneSkinInstances[skinInstanceIndex];\n\t\t\t}\n\n\t\t\tif (meshInstance.morphInstance) {\n\t\t\t\tvar morphInstanceIndex = this.morphInstances.indexOf(meshInstance.morphInstance);\n\t\t\t\tcloneMeshInstance.morphInstance = cloneMorphInstances[morphInstanceIndex];\n\t\t\t}\n\n\t\t\tcloneMeshInstances.push(cloneMeshInstance);\n\t\t}\n\n\t\tvar clone = new Model();\n\t\tclone.graph = cloneGraph;\n\t\tclone.meshInstances = cloneMeshInstances;\n\t\tclone.skinInstances = cloneSkinInstances;\n\t\tclone.morphInstances = cloneMorphInstances;\n\t\tclone.getGraph().syncHierarchy();\n\t\treturn clone;\n\t}\n\n\tdestroy() {\n\t\tvar meshInstances = this.meshInstances;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].destroy();\n\t\t}\n\n\t\tthis.meshInstances.length = 0;\n\t}\n\n\tgenerateWireframe() {\n\t\tMeshInstance._prepareRenderStyleForArray(this.meshInstances, RENDERSTYLE_WIREFRAME);\n\t}\n\n}\n\nclass MorphTarget {\n\tconstructor(options) {\n\t\tif (arguments.length === 2) {\n\t\t\toptions = arguments[1];\n\t\t}\n\n\t\tthis.options = options;\n\t\tthis._name = options.name;\n\t\tthis._defaultWeight = options.defaultWeight || 0;\n\t\tthis.aabb = options.aabb;\n\n\t\tif (!this.aabb) {\n\t\t\tthis.aabb = new BoundingBox();\n\t\t\tif (options.deltaPositions) this.aabb.compute(options.deltaPositions);\n\t\t}\n\n\t\tthis.deltaPositions = options.deltaPositions;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget defaultWeight() {\n\t\treturn this._defaultWeight;\n\t}\n\n\tget morphPositions() {\n\t\treturn !!this._vertexBufferPositions || !!this.texturePositions;\n\t}\n\n\tget morphNormals() {\n\t\treturn !!this._vertexBufferNormals || !!this.textureNormals;\n\t}\n\n\t_postInit() {\n\t\tthis.options = null;\n\t}\n\n\t_initVertexBuffers(graphicsDevice) {\n\t\tvar options = this.options;\n\t\tthis._vertexBufferPositions = this._createVertexBuffer(graphicsDevice, options.deltaPositions, options.deltaPositionsType);\n\t\tthis._vertexBufferNormals = this._createVertexBuffer(graphicsDevice, options.deltaNormals, options.deltaNormalsType);\n\n\t\tif (this._vertexBufferPositions) {\n\t\t\tthis.deltaPositions = this._vertexBufferPositions.lock();\n\t\t}\n\t}\n\n\t_createVertexBuffer(device, data, dataType = TYPE_FLOAT32) {\n\t\tif (data) {\n\t\t\tvar formatDesc = [{\n\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\tcomponents: 3,\n\t\t\t\ttype: dataType\n\t\t\t}];\n\t\t\treturn new VertexBuffer(device, new VertexFormat(device, formatDesc), data.length / 3, BUFFER_STATIC, data);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_setTexture(name, texture) {\n\t\tthis[name] = texture;\n\t}\n\n\tdestroy() {\n\t\tif (this._vertexBufferPositions) {\n\t\t\tthis._vertexBufferPositions.destroy();\n\n\t\t\tthis._vertexBufferPositions = null;\n\t\t}\n\n\t\tif (this._vertexBufferNormals) {\n\t\t\tthis._vertexBufferNormals.destroy();\n\n\t\t\tthis._vertexBufferNormals = null;\n\t\t}\n\n\t\tif (this.texturePositions) {\n\t\t\tthis.texturePositions.destroy();\n\t\t\tthis.texturePositions = null;\n\t\t}\n\n\t\tif (this.textureNormals) {\n\t\t\tthis.textureNormals.destroy();\n\t\t\tthis.textureNormals = null;\n\t\t}\n\t}\n\n}\n\nvar nonUniformScale;\nvar uniformScale = 1;\nvar particleTexChannels$1 = 4;\nvar rotMat = new Mat4();\nvar rotMatInv = new Mat4();\nvar randomPosTformed = new Vec3();\nvar randomPos = new Vec3();\nvar rndFactor3Vec = new Vec3();\nvar particlePosPrev = new Vec3();\nvar velocityVec = new Vec3();\nvar localVelocityVec = new Vec3();\nvar velocityVec2 = new Vec3();\nvar localVelocityVec2 = new Vec3();\nvar radialVelocityVec = new Vec3();\nvar particlePos = new Vec3();\nvar particleFinalPos = new Vec3();\nvar moveDirVec = new Vec3();\nvar tmpVec3$1 = new Vec3();\n\nfunction frac(f) {\n\treturn f - Math.floor(f);\n}\n\nfunction saturate$1(x) {\n\treturn Math.max(Math.min(x, 1), 0);\n}\n\nfunction glMod(x, y) {\n\treturn x - y * Math.floor(x / y);\n}\n\nfunction encodeFloatRGBA(v) {\n\tvar encX = frac(v);\n\tvar encY = frac(255.0 * v);\n\tvar encZ = frac(65025.0 * v);\n\tvar encW = frac(160581375.0 * v);\n\tencX -= encY / 255.0;\n\tencY -= encZ / 255.0;\n\tencZ -= encW / 255.0;\n\tencW -= encW / 255.0;\n\treturn [encX, encY, encZ, encW];\n}\n\nfunction encodeFloatRG(v) {\n\tvar encX = frac(v);\n\tvar encY = frac(255.0 * v);\n\tencX -= encY / 255.0;\n\tencY -= encY / 255.0;\n\treturn [encX, encY];\n}\n\nclass ParticleCPUUpdater {\n\tconstructor(emitter) {\n\t\tthis._emitter = emitter;\n\t}\n\n\tcalcSpawnPosition(particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, i) {\n\t\tvar emitter = this._emitter;\n\t\tvar rX = Math.random();\n\t\tvar rY = Math.random();\n\t\tvar rZ = Math.random();\n\t\tvar rW = Math.random();\n\n\t\tif (emitter.useCpu) {\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rX;\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rY;\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rZ;\n\t\t}\n\n\t\trandomPos.x = rX - 0.5;\n\t\trandomPos.y = rY - 0.5;\n\t\trandomPos.z = rZ - 0.5;\n\n\t\tif (emitter.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tvar max = Math.max(Math.abs(randomPos.x), Math.max(Math.abs(randomPos.y), Math.abs(randomPos.z)));\n\t\t\tvar edgeX = max + (0.5 - max) * extentsInnerRatioUniform[0];\n\t\t\tvar edgeY = max + (0.5 - max) * extentsInnerRatioUniform[1];\n\t\t\tvar edgeZ = max + (0.5 - max) * extentsInnerRatioUniform[2];\n\t\t\trandomPos.x = edgeX * (max === Math.abs(randomPos.x) ? Math.sign(randomPos.x) : 2 * randomPos.x);\n\t\t\trandomPos.y = edgeY * (max === Math.abs(randomPos.y) ? Math.sign(randomPos.y) : 2 * randomPos.y);\n\t\t\trandomPos.z = edgeZ * (max === Math.abs(randomPos.z) ? Math.sign(randomPos.z) : 2 * randomPos.z);\n\t\t\tif (!emitter.localSpace) randomPosTformed.copy(emitterPos).add(spawnMatrix.transformPoint(randomPos));else randomPosTformed.copy(spawnMatrix.transformPoint(randomPos));\n\t\t} else {\n\t\t\trandomPos.normalize();\n\t\t\tvar spawnBoundsSphereInnerRatio = emitter.emitterRadius === 0 ? 0 : emitter.emitterRadiusInner / emitter.emitterRadius;\n\t\t\tvar r = rW * (1.0 - spawnBoundsSphereInnerRatio) + spawnBoundsSphereInnerRatio;\n\t\t\tif (!emitter.localSpace) randomPosTformed.copy(emitterPos).add(randomPos.mulScalar(r * emitter.emitterRadius));else randomPosTformed.copy(randomPos.mulScalar(r * emitter.emitterRadius));\n\t\t}\n\n\t\tvar particleRate, startSpawnTime;\n\t\tparticleRate = math.lerp(emitter.rate, emitter.rate2, rX);\n\t\tstartSpawnTime = -particleRate * i;\n\n\t\tif (emitter.pack8) {\n\t\t\tvar packX = (randomPosTformed.x - emitter.worldBounds.center.x) / emitter.worldBoundsSize.x + 0.5;\n\t\t\tvar packY = (randomPosTformed.y - emitter.worldBounds.center.y) / emitter.worldBoundsSize.y + 0.5;\n\t\t\tvar packZ = (randomPosTformed.z - emitter.worldBounds.center.z) / emitter.worldBoundsSize.z + 0.5;\n\t\t\tvar packA = math.lerp(emitter.startAngle * math.DEG_TO_RAD, emitter.startAngle2 * math.DEG_TO_RAD, rX);\n\t\t\tpackA = packA % (Math.PI * 2) / (Math.PI * 2);\n\t\t\tvar rg0 = encodeFloatRG(packX);\n\t\t\tparticleTex[i * particleTexChannels$1] = rg0[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1] = rg0[1];\n\t\t\tvar ba0 = encodeFloatRG(packY);\n\t\t\tparticleTex[i * particleTexChannels$1 + 2] = ba0[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3] = ba0[1];\n\t\t\tvar rg1 = encodeFloatRG(packZ);\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * particleTexChannels$1] = rg1[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * particleTexChannels$1] = rg1[1];\n\t\t\tvar ba1 = encodeFloatRG(packA);\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * particleTexChannels$1] = ba1[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = ba1[1];\n\t\t\tvar a2 = 1.0;\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1 * 2] = a2;\n\t\t\tvar maxNegLife = Math.max(emitter.lifetime, (emitter.numParticles - 1.0) * Math.max(emitter.rate, emitter.rate2));\n\t\t\tvar maxPosLife = emitter.lifetime + 1.0;\n\t\t\tstartSpawnTime = (startSpawnTime + maxNegLife) / (maxNegLife + maxPosLife);\n\t\t\tvar rgba3 = encodeFloatRGBA(startSpawnTime);\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[1];\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[2];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[3];\n\t\t} else {\n\t\t\tparticleTex[i * particleTexChannels$1] = randomPosTformed.x;\n\t\t\tparticleTex[i * particleTexChannels$1 + 1] = randomPosTformed.y;\n\t\t\tparticleTex[i * particleTexChannels$1 + 2] = randomPosTformed.z;\n\t\t\tparticleTex[i * particleTexChannels$1 + 3] = math.lerp(emitter.startAngle * math.DEG_TO_RAD, emitter.startAngle2 * math.DEG_TO_RAD, rX);\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = startSpawnTime;\n\t\t}\n\t}\n\n\tupdate(data, vbToSort, particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, delta, isOnStop) {\n\t\tvar a, b, c, i, j;\n\t\tvar emitter = this._emitter;\n\n\t\tif (emitter.meshInstance.node) {\n\t\t\tvar fullMat = emitter.meshInstance.node.worldTransform;\n\n\t\t\tfor (j = 0; j < 12; j++) {\n\t\t\t\trotMat.data[j] = fullMat.data[j];\n\t\t\t}\n\n\t\t\trotMatInv.copy(rotMat);\n\t\t\trotMatInv.invert();\n\t\t\tnonUniformScale = emitter.meshInstance.node.localScale;\n\t\t\tuniformScale = Math.max(Math.max(nonUniformScale.x, nonUniformScale.y), nonUniformScale.z);\n\t\t}\n\n\t\temitterPos = emitter.meshInstance.node === null || emitter.localSpace ? Vec3.ZERO : emitter.meshInstance.node.getPosition();\n\t\tvar posCam = emitter.camera ? emitter.camera._node.getPosition() : Vec3.ZERO;\n\t\tvar vertSize = !emitter.useMesh ? 15 : 17;\n\t\tvar cf, cc;\n\t\tvar rotSpeed, rotSpeed2, scale2, alpha, alpha2, radialSpeed, radialSpeed2;\n\t\tvar precision1 = emitter.precision - 1;\n\n\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\tvar id = Math.floor(emitter.vbCPU[i * emitter.numParticleVerts * (emitter.useMesh ? 6 : 4) + 3]);\n\t\t\tvar rndFactor = particleTex[id * particleTexChannels$1 + 0 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\trndFactor3Vec.x = rndFactor;\n\t\t\trndFactor3Vec.y = particleTex[id * particleTexChannels$1 + 1 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\trndFactor3Vec.z = particleTex[id * particleTexChannels$1 + 2 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\tvar particleRate = emitter.rate + (emitter.rate2 - emitter.rate) * rndFactor;\n\t\t\tvar particleLifetime = emitter.lifetime;\n\t\t\tvar life = particleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] + delta;\n\t\t\tvar nlife = saturate$1(life / particleLifetime);\n\t\t\tvar scale = 0;\n\t\t\tvar alphaDiv = 0;\n\t\t\tvar angle = 0;\n\t\t\tvar respawn = life - delta <= 0.0 || life >= particleLifetime;\n\n\t\t\tif (respawn) {\n\t\t\t\tthis.calcSpawnPosition(particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, id);\n\t\t\t}\n\n\t\t\tvar particleEnabled = life > 0.0 && life < particleLifetime;\n\n\t\t\tif (particleEnabled) {\n\t\t\t\tc = nlife * precision1;\n\t\t\t\tcf = Math.floor(c);\n\t\t\t\tcc = Math.ceil(c);\n\t\t\t\tc %= 1;\n\t\t\t\ta = emitter.qRotSpeed[cf];\n\t\t\t\tb = emitter.qRotSpeed[cc];\n\t\t\t\trotSpeed = a + (b - a) * c;\n\t\t\t\ta = emitter.qRotSpeed2[cf];\n\t\t\t\tb = emitter.qRotSpeed2[cc];\n\t\t\t\trotSpeed2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qScale[cf];\n\t\t\t\tb = emitter.qScale[cc];\n\t\t\t\tscale = a + (b - a) * c;\n\t\t\t\ta = emitter.qScale2[cf];\n\t\t\t\tb = emitter.qScale2[cc];\n\t\t\t\tscale2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qAlpha[cf];\n\t\t\t\tb = emitter.qAlpha[cc];\n\t\t\t\talpha = a + (b - a) * c;\n\t\t\t\ta = emitter.qAlpha2[cf];\n\t\t\t\tb = emitter.qAlpha2[cc];\n\t\t\t\talpha2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qRadialSpeed[cf];\n\t\t\t\tb = emitter.qRadialSpeed[cc];\n\t\t\t\tradialSpeed = a + (b - a) * c;\n\t\t\t\ta = emitter.qRadialSpeed2[cf];\n\t\t\t\tb = emitter.qRadialSpeed2[cc];\n\t\t\t\tradialSpeed2 = a + (b - a) * c;\n\t\t\t\tradialSpeed += (radialSpeed2 - radialSpeed) * (rndFactor * 100.0 % 1.0);\n\t\t\t\tparticlePosPrev.x = particleTex[id * particleTexChannels$1];\n\t\t\t\tparticlePosPrev.y = particleTex[id * particleTexChannels$1 + 1];\n\t\t\t\tparticlePosPrev.z = particleTex[id * particleTexChannels$1 + 2];\n\t\t\t\tif (!emitter.localSpace) radialVelocityVec.copy(particlePosPrev).sub(emitterPos);else radialVelocityVec.copy(particlePosPrev);\n\t\t\t\tradialVelocityVec.normalize().mulScalar(radialSpeed);\n\t\t\t\tcf *= 3;\n\t\t\t\tcc *= 3;\n\t\t\t\ta = emitter.qLocalVelocity[cf];\n\t\t\t\tb = emitter.qLocalVelocity[cc];\n\t\t\t\tlocalVelocityVec.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity[cf + 1];\n\t\t\t\tb = emitter.qLocalVelocity[cc + 1];\n\t\t\t\tlocalVelocityVec.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity[cf + 2];\n\t\t\t\tb = emitter.qLocalVelocity[cc + 2];\n\t\t\t\tlocalVelocityVec.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf];\n\t\t\t\tb = emitter.qLocalVelocity2[cc];\n\t\t\t\tlocalVelocityVec2.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf + 1];\n\t\t\t\tb = emitter.qLocalVelocity2[cc + 1];\n\t\t\t\tlocalVelocityVec2.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf + 2];\n\t\t\t\tb = emitter.qLocalVelocity2[cc + 2];\n\t\t\t\tlocalVelocityVec2.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf];\n\t\t\t\tb = emitter.qVelocity[cc];\n\t\t\t\tvelocityVec.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf + 1];\n\t\t\t\tb = emitter.qVelocity[cc + 1];\n\t\t\t\tvelocityVec.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf + 2];\n\t\t\t\tb = emitter.qVelocity[cc + 2];\n\t\t\t\tvelocityVec.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf];\n\t\t\t\tb = emitter.qVelocity2[cc];\n\t\t\t\tvelocityVec2.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf + 1];\n\t\t\t\tb = emitter.qVelocity2[cc + 1];\n\t\t\t\tvelocityVec2.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf + 2];\n\t\t\t\tb = emitter.qVelocity2[cc + 2];\n\t\t\t\tvelocityVec2.z = a + (b - a) * c;\n\t\t\t\tlocalVelocityVec.x += (localVelocityVec2.x - localVelocityVec.x) * rndFactor3Vec.x;\n\t\t\t\tlocalVelocityVec.y += (localVelocityVec2.y - localVelocityVec.y) * rndFactor3Vec.y;\n\t\t\t\tlocalVelocityVec.z += (localVelocityVec2.z - localVelocityVec.z) * rndFactor3Vec.z;\n\n\t\t\t\tif (emitter.initialVelocity > 0) {\n\t\t\t\t\tif (emitter.emitterShape === EMITTERSHAPE_SPHERE) {\n\t\t\t\t\t\trandomPos.copy(rndFactor3Vec).mulScalar(2).sub(Vec3.ONE).normalize();\n\t\t\t\t\t\tlocalVelocityVec.add(randomPos.mulScalar(emitter.initialVelocity));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalVelocityVec.add(Vec3.FORWARD.mulScalar(emitter.initialVelocity));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvelocityVec.x += (velocityVec2.x - velocityVec.x) * rndFactor3Vec.x;\n\t\t\t\tvelocityVec.y += (velocityVec2.y - velocityVec.y) * rndFactor3Vec.y;\n\t\t\t\tvelocityVec.z += (velocityVec2.z - velocityVec.z) * rndFactor3Vec.z;\n\t\t\t\trotSpeed += (rotSpeed2 - rotSpeed) * rndFactor3Vec.y;\n\t\t\t\tscale = (scale + (scale2 - scale) * (rndFactor * 10000.0 % 1.0)) * uniformScale;\n\t\t\t\talphaDiv = (alpha2 - alpha) * (rndFactor * 1000.0 % 1.0);\n\n\t\t\t\tif (emitter.meshInstance.node) {\n\t\t\t\t\tif (!emitter.localSpace) {\n\t\t\t\t\t\trotMat.transformPoint(localVelocityVec, localVelocityVec);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalVelocityVec.x /= nonUniformScale.x;\n\t\t\t\t\t\tlocalVelocityVec.y /= nonUniformScale.y;\n\t\t\t\t\t\tlocalVelocityVec.z /= nonUniformScale.z;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!emitter.localSpace) {\n\t\t\t\t\tlocalVelocityVec.add(velocityVec.mul(nonUniformScale));\n\t\t\t\t\tlocalVelocityVec.add(radialVelocityVec.mul(nonUniformScale));\n\t\t\t\t} else {\n\t\t\t\t\trotMatInv.transformPoint(velocityVec, velocityVec);\n\t\t\t\t\tlocalVelocityVec.add(velocityVec).add(radialVelocityVec);\n\t\t\t\t}\n\n\t\t\t\tmoveDirVec.copy(localVelocityVec);\n\t\t\t\tparticlePos.copy(particlePosPrev).add(localVelocityVec.mulScalar(delta));\n\t\t\t\tparticleFinalPos.copy(particlePos);\n\t\t\t\tparticleTex[id * particleTexChannels$1] = particleFinalPos.x;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 1] = particleFinalPos.y;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 2] = particleFinalPos.z;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 3] += rotSpeed * delta;\n\n\t\t\t\tif (emitter.wrap && emitter.wrapBounds) {\n\t\t\t\t\tif (!emitter.localSpace) particleFinalPos.sub(emitterPos);\n\t\t\t\t\tparticleFinalPos.x = glMod(particleFinalPos.x, emitter.wrapBounds.x) - emitter.wrapBounds.x * 0.5;\n\t\t\t\t\tparticleFinalPos.y = glMod(particleFinalPos.y, emitter.wrapBounds.y) - emitter.wrapBounds.y * 0.5;\n\t\t\t\t\tparticleFinalPos.z = glMod(particleFinalPos.z, emitter.wrapBounds.z) - emitter.wrapBounds.z * 0.5;\n\t\t\t\t\tif (!emitter.localSpace) particleFinalPos.add(emitterPos);\n\t\t\t\t}\n\n\t\t\t\tif (emitter.sort > 0) {\n\t\t\t\t\tif (emitter.sort === 1) {\n\t\t\t\t\t\ttmpVec3$1.copy(particleFinalPos).sub(posCam);\n\t\t\t\t\t\temitter.particleDistance[id] = -(tmpVec3$1.x * tmpVec3$1.x + tmpVec3$1.y * tmpVec3$1.y + tmpVec3$1.z * tmpVec3$1.z);\n\t\t\t\t\t} else if (emitter.sort === 2) {\n\t\t\t\t\t\temitter.particleDistance[id] = life;\n\t\t\t\t\t} else if (emitter.sort === 3) {\n\t\t\t\t\t\temitter.particleDistance[id] = -life;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isOnStop) {\n\t\t\t\tif (life < 0) {\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (life >= particleLifetime) {\n\t\t\t\t\tlife -= Math.max(particleLifetime, (emitter.numParticles - 1) * particleRate);\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = emitter.loop ? 1 : -1;\n\t\t\t\t}\n\n\t\t\t\tif (life < 0 && emitter.loop) {\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (particleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] < 0) particleEnabled = false;\n\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = life;\n\n\t\t\tfor (var v = 0; v < emitter.numParticleVerts; v++) {\n\t\t\t\tvar vbOffset = (i * emitter.numParticleVerts + v) * (emitter.useMesh ? 6 : 4);\n\t\t\t\tvar quadX = emitter.vbCPU[vbOffset];\n\t\t\t\tvar quadY = emitter.vbCPU[vbOffset + 1];\n\t\t\t\tvar quadZ = emitter.vbCPU[vbOffset + 2];\n\n\t\t\t\tif (!particleEnabled) {\n\t\t\t\t\tquadX = quadY = quadZ = 0;\n\t\t\t\t}\n\n\t\t\t\tvar w = i * emitter.numParticleVerts * vertSize + v * vertSize;\n\t\t\t\tdata[w] = particleFinalPos.x;\n\t\t\t\tdata[w + 1] = particleFinalPos.y;\n\t\t\t\tdata[w + 2] = particleFinalPos.z;\n\t\t\t\tdata[w + 3] = nlife;\n\t\t\t\tdata[w + 4] = emitter.alignToMotion ? angle : particleTex[id * particleTexChannels$1 + 3];\n\t\t\t\tdata[w + 5] = scale;\n\t\t\t\tdata[w + 6] = alphaDiv;\n\t\t\t\tdata[w + 7] = moveDirVec.x;\n\t\t\t\tdata[w + 8] = quadX;\n\t\t\t\tdata[w + 9] = quadY;\n\t\t\t\tdata[w + 10] = quadZ;\n\t\t\t\tdata[w + 11] = moveDirVec.y;\n\t\t\t\tdata[w + 12] = id;\n\t\t\t\tdata[w + 13] = moveDirVec.z;\n\t\t\t\tdata[w + 14] = emitter.vbCPU[vbOffset + 3];\n\n\t\t\t\tif (emitter.useMesh) {\n\t\t\t\t\tdata[w + 15] = emitter.vbCPU[vbOffset + 4];\n\t\t\t\t\tdata[w + 16] = emitter.vbCPU[vbOffset + 5];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (emitter.sort > PARTICLESORT_NONE && emitter.camera) {\n\t\t\tvar vbStride = emitter.useMesh ? 6 : 4;\n\t\t\tvar particleDistance = emitter.particleDistance;\n\n\t\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\t\tvbToSort[i][0] = i;\n\t\t\t\tvbToSort[i][1] = particleDistance[Math.floor(emitter.vbCPU[i * emitter.numParticleVerts * vbStride + 3])];\n\t\t\t}\n\n\t\t\temitter.vbOld.set(emitter.vbCPU);\n\t\t\tvbToSort.sort(function (p1, p2) {\n\t\t\t\treturn p1[1] - p2[1];\n\t\t\t});\n\n\t\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\t\tvar src = vbToSort[i][0] * emitter.numParticleVerts * vbStride;\n\t\t\t\tvar dest = i * emitter.numParticleVerts * vbStride;\n\n\t\t\t\tfor (j = 0; j < emitter.numParticleVerts * vbStride; j++) {\n\t\t\t\t\temitter.vbCPU[dest + j] = emitter.vbOld[src + j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nvar spawnMatrix3 = new Mat3();\nvar emitterMatrix3 = new Mat3();\nvar emitterMatrix3Inv = new Mat3();\n\nclass ParticleGPUUpdater {\n\tconstructor(emitter, gd) {\n\t\tthis._emitter = emitter;\n\t\tthis.frameRandomUniform = new Float32Array(3);\n\t\tthis.emitterPosUniform = new Float32Array(3);\n\t\tthis.emitterScaleUniform = new Float32Array([1, 1, 1]);\n\t\tthis.worldBoundsMulUniform = new Float32Array(3);\n\t\tthis.worldBoundsAddUniform = new Float32Array(3);\n\t\tthis.inBoundsSizeUniform = new Float32Array(3);\n\t\tthis.inBoundsCenterUniform = new Float32Array(3);\n\t\tthis.constantParticleTexIN = gd.scope.resolve(\"particleTexIN\");\n\t\tthis.constantParticleTexOUT = gd.scope.resolve(\"particleTexOUT\");\n\t\tthis.constantEmitterPos = gd.scope.resolve(\"emitterPos\");\n\t\tthis.constantEmitterScale = gd.scope.resolve(\"emitterScale\");\n\t\tthis.constantSpawnBounds = gd.scope.resolve(\"spawnBounds\");\n\t\tthis.constantSpawnPosInnerRatio = gd.scope.resolve(\"spawnPosInnerRatio\");\n\t\tthis.constantSpawnBoundsSphere = gd.scope.resolve(\"spawnBoundsSphere\");\n\t\tthis.constantSpawnBoundsSphereInnerRatio = gd.scope.resolve(\"spawnBoundsSphereInnerRatio\");\n\t\tthis.constantInitialVelocity = gd.scope.resolve(\"initialVelocity\");\n\t\tthis.constantFrameRandom = gd.scope.resolve(\"frameRandom\");\n\t\tthis.constantDelta = gd.scope.resolve(\"delta\");\n\t\tthis.constantRate = gd.scope.resolve(\"rate\");\n\t\tthis.constantRateDiv = gd.scope.resolve(\"rateDiv\");\n\t\tthis.constantLifetime = gd.scope.resolve(\"lifetime\");\n\t\tthis.constantGraphSampleSize = gd.scope.resolve(\"graphSampleSize\");\n\t\tthis.constantGraphNumSamples = gd.scope.resolve(\"graphNumSamples\");\n\t\tthis.constantInternalTex0 = gd.scope.resolve(\"internalTex0\");\n\t\tthis.constantInternalTex1 = gd.scope.resolve(\"internalTex1\");\n\t\tthis.constantInternalTex2 = gd.scope.resolve(\"internalTex2\");\n\t\tthis.constantInternalTex3 = gd.scope.resolve(\"internalTex3\");\n\t\tthis.constantEmitterMatrix = gd.scope.resolve(\"emitterMatrix\");\n\t\tthis.constantEmitterMatrixInv = gd.scope.resolve(\"emitterMatrixInv\");\n\t\tthis.constantNumParticles = gd.scope.resolve(\"numParticles\");\n\t\tthis.constantNumParticlesPot = gd.scope.resolve(\"numParticlesPot\");\n\t\tthis.constantLocalVelocityDivMult = gd.scope.resolve(\"localVelocityDivMult\");\n\t\tthis.constantVelocityDivMult = gd.scope.resolve(\"velocityDivMult\");\n\t\tthis.constantRotSpeedDivMult = gd.scope.resolve(\"rotSpeedDivMult\");\n\t\tthis.constantSeed = gd.scope.resolve(\"seed\");\n\t\tthis.constantStartAngle = gd.scope.resolve(\"startAngle\");\n\t\tthis.constantStartAngle2 = gd.scope.resolve(\"startAngle2\");\n\t\tthis.constantOutBoundsMul = gd.scope.resolve(\"outBoundsMul\");\n\t\tthis.constantOutBoundsAdd = gd.scope.resolve(\"outBoundsAdd\");\n\t\tthis.constantInBoundsSize = gd.scope.resolve(\"inBoundsSize\");\n\t\tthis.constantInBoundsCenter = gd.scope.resolve(\"inBoundsCenter\");\n\t\tthis.constantMaxVel = gd.scope.resolve(\"maxVel\");\n\t\tthis.constantFaceTangent = gd.scope.resolve(\"faceTangent\");\n\t\tthis.constantFaceBinorm = gd.scope.resolve(\"faceBinorm\");\n\t}\n\n\t_setInputBounds() {\n\t\tthis.inBoundsSizeUniform[0] = this._emitter.prevWorldBoundsSize.x;\n\t\tthis.inBoundsSizeUniform[1] = this._emitter.prevWorldBoundsSize.y;\n\t\tthis.inBoundsSizeUniform[2] = this._emitter.prevWorldBoundsSize.z;\n\t\tthis.constantInBoundsSize.setValue(this.inBoundsSizeUniform);\n\t\tthis.inBoundsCenterUniform[0] = this._emitter.prevWorldBoundsCenter.x;\n\t\tthis.inBoundsCenterUniform[1] = this._emitter.prevWorldBoundsCenter.y;\n\t\tthis.inBoundsCenterUniform[2] = this._emitter.prevWorldBoundsCenter.z;\n\t\tthis.constantInBoundsCenter.setValue(this.inBoundsCenterUniform);\n\t}\n\n\trandomize() {\n\t\tthis.frameRandomUniform[0] = Math.random();\n\t\tthis.frameRandomUniform[1] = Math.random();\n\t\tthis.frameRandomUniform[2] = Math.random();\n\t}\n\n\tupdate(device, spawnMatrix, extentsInnerRatioUniform, delta, isOnStop) {\n\t\tvar emitter = this._emitter;\n\t\tdevice.setBlending(false);\n\t\tdevice.setColorWrite(true, true, true, true);\n\t\tdevice.setCullMode(CULLFACE_NONE);\n\t\tdevice.setDepthTest(false);\n\t\tdevice.setDepthWrite(false);\n\t\tthis.randomize();\n\t\tthis.constantGraphSampleSize.setValue(1.0 / emitter.precision);\n\t\tthis.constantGraphNumSamples.setValue(emitter.precision);\n\t\tthis.constantNumParticles.setValue(emitter.numParticles);\n\t\tthis.constantNumParticlesPot.setValue(emitter.numParticlesPot);\n\t\tthis.constantInternalTex0.setValue(emitter.internalTex0);\n\t\tthis.constantInternalTex1.setValue(emitter.internalTex1);\n\t\tthis.constantInternalTex2.setValue(emitter.internalTex2);\n\t\tthis.constantInternalTex3.setValue(emitter.internalTex3);\n\t\tvar node = emitter.meshInstance.node;\n\t\tvar emitterScale = node === null ? Vec3.ONE : node.localScale;\n\n\t\tif (emitter.pack8) {\n\t\t\tthis.worldBoundsMulUniform[0] = emitter.worldBoundsMul.x;\n\t\t\tthis.worldBoundsMulUniform[1] = emitter.worldBoundsMul.y;\n\t\t\tthis.worldBoundsMulUniform[2] = emitter.worldBoundsMul.z;\n\t\t\tthis.constantOutBoundsMul.setValue(this.worldBoundsMulUniform);\n\t\t\tthis.worldBoundsAddUniform[0] = emitter.worldBoundsAdd.x;\n\t\t\tthis.worldBoundsAddUniform[1] = emitter.worldBoundsAdd.y;\n\t\t\tthis.worldBoundsAddUniform[2] = emitter.worldBoundsAdd.z;\n\t\t\tthis.constantOutBoundsAdd.setValue(this.worldBoundsAddUniform);\n\n\t\t\tthis._setInputBounds();\n\n\t\t\tvar maxVel = emitter.maxVel * Math.max(Math.max(emitterScale.x, emitterScale.y), emitterScale.z);\n\t\t\tmaxVel = Math.max(maxVel, 1);\n\t\t\tthis.constantMaxVel.setValue(maxVel);\n\t\t}\n\n\t\tvar emitterPos = node === null || emitter.localSpace ? Vec3.ZERO : node.getPosition();\n\t\tvar emitterMatrix = node === null ? Mat4.IDENTITY : node.getWorldTransform();\n\n\t\tif (emitter.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tspawnMatrix3.setFromMat4(spawnMatrix);\n\t\t\tthis.constantSpawnBounds.setValue(spawnMatrix3.data);\n\t\t\tthis.constantSpawnPosInnerRatio.setValue(extentsInnerRatioUniform);\n\t\t} else {\n\t\t\tthis.constantSpawnBoundsSphere.setValue(emitter.emitterRadius);\n\t\t\tthis.constantSpawnBoundsSphereInnerRatio.setValue(emitter.emitterRadius === 0 ? 0 : emitter.emitterRadiusInner / emitter.emitterRadius);\n\t\t}\n\n\t\tthis.constantInitialVelocity.setValue(emitter.initialVelocity);\n\t\temitterMatrix3.setFromMat4(emitterMatrix);\n\t\temitterMatrix.invertTo3x3(emitterMatrix3Inv);\n\t\tthis.emitterPosUniform[0] = emitterPos.x;\n\t\tthis.emitterPosUniform[1] = emitterPos.y;\n\t\tthis.emitterPosUniform[2] = emitterPos.z;\n\t\tthis.constantEmitterPos.setValue(this.emitterPosUniform);\n\t\tthis.constantFrameRandom.setValue(this.frameRandomUniform);\n\t\tthis.constantDelta.setValue(delta);\n\t\tthis.constantRate.setValue(emitter.rate);\n\t\tthis.constantRateDiv.setValue(emitter.rate2 - emitter.rate);\n\t\tthis.constantStartAngle.setValue(emitter.startAngle * math.DEG_TO_RAD);\n\t\tthis.constantStartAngle2.setValue(emitter.startAngle2 * math.DEG_TO_RAD);\n\t\tthis.constantSeed.setValue(emitter.seed);\n\t\tthis.constantLifetime.setValue(emitter.lifetime);\n\t\tthis.emitterScaleUniform[0] = emitterScale.x;\n\t\tthis.emitterScaleUniform[1] = emitterScale.y;\n\t\tthis.emitterScaleUniform[2] = emitterScale.z;\n\t\tthis.constantEmitterScale.setValue(this.emitterScaleUniform);\n\t\tthis.constantEmitterMatrix.setValue(emitterMatrix3.data);\n\t\tthis.constantEmitterMatrixInv.setValue(emitterMatrix3Inv.data);\n\t\tthis.constantLocalVelocityDivMult.setValue(emitter.localVelocityUMax);\n\t\tthis.constantVelocityDivMult.setValue(emitter.velocityUMax);\n\t\tthis.constantRotSpeedDivMult.setValue(emitter.rotSpeedUMax[0]);\n\t\tvar texIN = emitter.swapTex ? emitter.particleTexOUT : emitter.particleTexIN;\n\t\ttexIN = emitter.beenReset ? emitter.particleTexStart : texIN;\n\t\tvar texOUT = emitter.swapTex ? emitter.particleTexIN : emitter.particleTexOUT;\n\t\tthis.constantParticleTexIN.setValue(texIN);\n\t\tdrawQuadWithShader(device, emitter.swapTex ? emitter.rtParticleTexIN : emitter.rtParticleTexOUT, !isOnStop ? emitter.loop ? emitter.shaderParticleUpdateRespawn : emitter.shaderParticleUpdateNoRespawn : emitter.shaderParticleUpdateOnStop);\n\t\temitter.material.setParameter(\"particleTexOUT\", texIN);\n\t\temitter.material.setParameter(\"particleTexIN\", texOUT);\n\t\temitter.beenReset = false;\n\t\temitter.swapTex = !emitter.swapTex;\n\t\tdevice.setDepthTest(true);\n\t\tdevice.setDepthWrite(true);\n\t\temitter.prevWorldBoundsSize.copy(emitter.worldBoundsSize);\n\t\temitter.prevWorldBoundsCenter.copy(emitter.worldBounds.center);\n\t\tif (emitter.pack8) this._setInputBounds();\n\t}\n\n}\n\nconst particleVerts = [[-1, -1], [1, -1], [1, 1], [-1, 1]];\n\nfunction _createTexture(device, width, height, pixelData, format = PIXELFORMAT_RGBA32F, mult8Bit, filter) {\n\tvar mipFilter = FILTER_NEAREST;\n\tif (filter && format === PIXELFORMAT_R8_G8_B8_A8) mipFilter = FILTER_LINEAR;\n\tvar texture = new Texture(device, {\n\t\twidth: width,\n\t\theight: height,\n\t\tformat: format,\n\t\tcubemap: false,\n\t\tmipmaps: false,\n\t\tminFilter: mipFilter,\n\t\tmagFilter: mipFilter,\n\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t});\n\ttexture.name = \"PSTexture\";\n\tvar pixels = texture.lock();\n\n\tif (format === PIXELFORMAT_R8_G8_B8_A8) {\n\t\tvar temp = new Uint8Array(pixelData.length);\n\n\t\tfor (var i = 0; i < pixelData.length; i++) {\n\t\t\ttemp[i] = pixelData[i] * mult8Bit * 255;\n\t\t}\n\n\t\tpixelData = temp;\n\t}\n\n\tpixels.set(pixelData);\n\ttexture.unlock();\n\treturn texture;\n}\n\nfunction saturate(x) {\n\treturn Math.max(Math.min(x, 1), 0);\n}\n\nvar default0Curve = new Curve([0, 0, 1, 0]);\nvar default1Curve = new Curve([0, 1, 1, 1]);\nvar default0Curve3 = new CurveSet([0, 0, 1, 0], [0, 0, 1, 0], [0, 0, 1, 0]);\nvar default1Curve3 = new CurveSet([0, 1, 1, 1], [0, 1, 1, 1], [0, 1, 1, 1]);\nvar particleTexHeight = 2;\nvar particleTexChannels = 4;\nvar extentsInnerRatioUniform = new Float32Array(3);\nvar spawnMatrix = new Mat4();\nvar tmpVec3 = new Vec3();\nvar bMin = new Vec3();\nvar bMax = new Vec3();\nvar setPropertyTarget;\nvar setPropertyOptions;\n\nfunction setProperty(pName, defaultVal) {\n\tif (setPropertyOptions[pName] !== undefined && setPropertyOptions[pName] !== null) {\n\t\tsetPropertyTarget[pName] = setPropertyOptions[pName];\n\t} else {\n\t\tsetPropertyTarget[pName] = defaultVal;\n\t}\n}\n\nfunction pack3NFloats(a, b, c) {\n\tvar packed = a * 255 << 16 | b * 255 << 8 | c * 255;\n\treturn packed / (1 << 24);\n}\n\nfunction packTextureXYZ_NXYZ(qXYZ, qXYZ2) {\n\tvar num = qXYZ.length / 3;\n\tvar colors = new Array(num * 4);\n\n\tfor (var i = 0; i < num; i++) {\n\t\tcolors[i * 4] = qXYZ[i * 3];\n\t\tcolors[i * 4 + 1] = qXYZ[i * 3 + 1];\n\t\tcolors[i * 4 + 2] = qXYZ[i * 3 + 2];\n\t\tcolors[i * 4 + 3] = pack3NFloats(qXYZ2[i * 3], qXYZ2[i * 3 + 1], qXYZ2[i * 3 + 2]);\n\t}\n\n\treturn colors;\n}\n\nfunction packTextureRGBA(qRGB, qA) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qRGB[i * 3];\n\t\tcolors[i * 4 + 1] = qRGB[i * 3 + 1];\n\t\tcolors[i * 4 + 2] = qRGB[i * 3 + 2];\n\t\tcolors[i * 4 + 3] = qA[i];\n\t}\n\n\treturn colors;\n}\n\nfunction packTexture5Floats(qA, qB, qC, qD, qE) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qA[i];\n\t\tcolors[i * 4 + 1] = qB[i];\n\t\tcolors[i * 4 + 2] = 0;\n\t\tcolors[i * 4 + 3] = pack3NFloats(qC[i], qD[i], qE[i]);\n\t}\n\n\treturn colors;\n}\n\nfunction packTexture2Floats(qA, qB) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qA[i];\n\t\tcolors[i * 4 + 1] = qB[i];\n\t\tcolors[i * 4 + 2] = 0;\n\t\tcolors[i * 4 + 3] = 0;\n\t}\n\n\treturn colors;\n}\n\nfunction calcEndTime(emitter) {\n\tvar interval = Math.max(emitter.rate, emitter.rate2) * emitter.numParticles + emitter.lifetime;\n\treturn Date.now() + interval * 1000;\n}\n\nfunction subGraph(A, B) {\n\tvar r = new Float32Array(A.length);\n\n\tfor (var i = 0; i < A.length; i++) {\n\t\tr[i] = A[i] - B[i];\n\t}\n\n\treturn r;\n}\n\nfunction maxUnsignedGraphValue(A, outUMax) {\n\tvar i, j;\n\tvar chans = outUMax.length;\n\tvar values = A.length / chans;\n\n\tfor (i = 0; i < values; i++) {\n\t\tfor (j = 0; j < chans; j++) {\n\t\t\tvar a = Math.abs(A[i * chans + j]);\n\t\t\toutUMax[j] = Math.max(outUMax[j], a);\n\t\t}\n\t}\n}\n\nfunction normalizeGraph(A, uMax) {\n\tvar chans = uMax.length;\n\tvar i, j;\n\tvar values = A.length / chans;\n\n\tfor (i = 0; i < values; i++) {\n\t\tfor (j = 0; j < chans; j++) {\n\t\t\tA[i * chans + j] /= uMax[j] === 0 ? 1 : uMax[j];\n\t\t\tA[i * chans + j] *= 0.5;\n\t\t\tA[i * chans + j] += 0.5;\n\t\t}\n\t}\n}\n\nfunction divGraphFrom2Curves(curve1, curve2, outUMax) {\n\tvar sub = subGraph(curve2, curve1);\n\tmaxUnsignedGraphValue(sub, outUMax);\n\tnormalizeGraph(sub, outUMax);\n\treturn sub;\n}\n\nclass ParticleEmitter {\n\tconstructor(graphicsDevice, options) {\n\t\tthis.graphicsDevice = graphicsDevice;\n\t\tvar gd = graphicsDevice;\n\t\tvar precision = 32;\n\t\tthis.precision = precision;\n\t\tthis._addTimeTime = 0;\n\n\t\tif (!ParticleEmitter.DEFAULT_PARAM_TEXTURE) {\n\t\t\tvar resolution = 16;\n\t\t\tvar centerPoint = resolution * 0.5 + 0.5;\n\t\t\tvar dtex = new Float32Array(resolution * resolution * 4);\n\t\t\tvar x, y, xgrad, ygrad, p, c;\n\n\t\t\tfor (y = 0; y < resolution; y++) {\n\t\t\t\tfor (x = 0; x < resolution; x++) {\n\t\t\t\t\txgrad = x + 1 - centerPoint;\n\t\t\t\t\tygrad = y + 1 - centerPoint;\n\t\t\t\t\tc = saturate(1 - saturate(Math.sqrt(xgrad * xgrad + ygrad * ygrad) / resolution) - 0.5);\n\t\t\t\t\tp = y * resolution + x;\n\t\t\t\t\tdtex[p * 4] = 1;\n\t\t\t\t\tdtex[p * 4 + 1] = 1;\n\t\t\t\t\tdtex[p * 4 + 2] = 1;\n\t\t\t\t\tdtex[p * 4 + 3] = c;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE = _createTexture(gd, resolution, resolution, dtex, PIXELFORMAT_R8_G8_B8_A8, 1.0, true);\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE.minFilter = FILTER_LINEAR;\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE.magFilter = FILTER_LINEAR;\n\t\t}\n\n\t\tsetPropertyTarget = this;\n\t\tsetPropertyOptions = options;\n\t\tsetProperty(\"numParticles\", 1);\n\n\t\tif (this.numParticles > graphicsDevice.maxTextureSize) {\n\t\t\tconsole.warn(\"WARNING: can't create more than \" + graphicsDevice.maxTextureSize + \" particles on this device.\");\n\t\t\tthis.numParticles = graphicsDevice.maxTextureSize;\n\t\t}\n\n\t\tsetProperty(\"rate\", 1);\n\t\tsetProperty(\"rate2\", this.rate);\n\t\tsetProperty(\"lifetime\", 50);\n\t\tsetProperty(\"emitterExtents\", new Vec3(0, 0, 0));\n\t\tsetProperty(\"emitterExtentsInner\", new Vec3(0, 0, 0));\n\t\tsetProperty(\"emitterRadius\", 0);\n\t\tsetProperty(\"emitterRadiusInner\", 0);\n\t\tsetProperty(\"emitterShape\", EMITTERSHAPE_BOX);\n\t\tsetProperty(\"initialVelocity\", 1);\n\t\tsetProperty(\"wrap\", false);\n\t\tsetProperty(\"localSpace\", false);\n\t\tsetProperty(\"screenSpace\", false);\n\t\tsetProperty(\"wrapBounds\", null);\n\t\tsetProperty(\"colorMap\", ParticleEmitter.DEFAULT_PARAM_TEXTURE);\n\t\tsetProperty(\"normalMap\", null);\n\t\tsetProperty(\"loop\", true);\n\t\tsetProperty(\"preWarm\", false);\n\t\tsetProperty(\"sort\", PARTICLESORT_NONE);\n\t\tsetProperty(\"mode\", PARTICLEMODE_GPU);\n\t\tsetProperty(\"scene\", null);\n\t\tsetProperty(\"lighting\", false);\n\t\tsetProperty(\"halfLambert\", false);\n\t\tsetProperty(\"intensity\", 1.0);\n\t\tsetProperty(\"stretch\", 0.0);\n\t\tsetProperty(\"alignToMotion\", false);\n\t\tsetProperty(\"depthSoftening\", 0);\n\t\tsetProperty(\"mesh\", null);\n\t\tsetProperty(\"particleNormal\", new Vec3(0, 1, 0));\n\t\tsetProperty(\"orientation\", PARTICLEORIENTATION_SCREEN);\n\t\tsetProperty(\"depthWrite\", false);\n\t\tsetProperty(\"noFog\", false);\n\t\tsetProperty(\"blendType\", BLEND_NORMAL);\n\t\tsetProperty(\"node\", null);\n\t\tsetProperty(\"startAngle\", 0);\n\t\tsetProperty(\"startAngle2\", this.startAngle);\n\t\tsetProperty(\"animTilesX\", 1);\n\t\tsetProperty(\"animTilesY\", 1);\n\t\tsetProperty(\"animStartFrame\", 0);\n\t\tsetProperty(\"animNumFrames\", 1);\n\t\tsetProperty(\"animNumAnimations\", 1);\n\t\tsetProperty(\"animIndex\", 0);\n\t\tsetProperty(\"randomizeAnimIndex\", false);\n\t\tsetProperty(\"animSpeed\", 1);\n\t\tsetProperty(\"animLoop\", true);\n\t\tthis._gpuUpdater = new ParticleGPUUpdater(this, gd);\n\t\tthis._cpuUpdater = new ParticleCPUUpdater(this);\n\t\tthis.constantLightCube = gd.scope.resolve(\"lightCube[0]\");\n\t\tthis.emitterPosUniform = new Float32Array(3);\n\t\tthis.wrapBoundsUniform = new Float32Array(3);\n\t\tthis.emitterScaleUniform = new Float32Array([1, 1, 1]);\n\t\tsetProperty(\"colorGraph\", default1Curve3);\n\t\tsetProperty(\"colorGraph2\", this.colorGraph);\n\t\tsetProperty(\"scaleGraph\", default1Curve);\n\t\tsetProperty(\"scaleGraph2\", this.scaleGraph);\n\t\tsetProperty(\"alphaGraph\", default1Curve);\n\t\tsetProperty(\"alphaGraph2\", this.alphaGraph);\n\t\tsetProperty(\"localVelocityGraph\", default0Curve3);\n\t\tsetProperty(\"localVelocityGraph2\", this.localVelocityGraph);\n\t\tsetProperty(\"velocityGraph\", default0Curve3);\n\t\tsetProperty(\"velocityGraph2\", this.velocityGraph);\n\t\tsetProperty(\"rotationSpeedGraph\", default0Curve);\n\t\tsetProperty(\"rotationSpeedGraph2\", this.rotationSpeedGraph);\n\t\tsetProperty(\"radialSpeedGraph\", default0Curve);\n\t\tsetProperty(\"radialSpeedGraph2\", this.radialSpeedGraph);\n\t\tthis.lightCube = new Float32Array(6 * 3);\n\t\tthis.lightCubeDir = new Array(6);\n\t\tthis.lightCubeDir[0] = new Vec3(-1, 0, 0);\n\t\tthis.lightCubeDir[1] = new Vec3(1, 0, 0);\n\t\tthis.lightCubeDir[2] = new Vec3(0, -1, 0);\n\t\tthis.lightCubeDir[3] = new Vec3(0, 1, 0);\n\t\tthis.lightCubeDir[4] = new Vec3(0, 0, -1);\n\t\tthis.lightCubeDir[5] = new Vec3(0, 0, 1);\n\t\tthis.animTilesParams = new Float32Array(2);\n\t\tthis.animParams = new Float32Array(4);\n\t\tthis.animIndexParams = new Float32Array(2);\n\t\tthis.internalTex0 = null;\n\t\tthis.internalTex1 = null;\n\t\tthis.internalTex2 = null;\n\t\tthis.colorParam = null;\n\t\tthis.vbToSort = null;\n\t\tthis.vbOld = null;\n\t\tthis.particleDistance = null;\n\t\tthis.camera = null;\n\t\tthis.swapTex = false;\n\t\tthis.useMesh = true;\n\t\tthis.useCpu = false;\n\t\tthis.pack8 = true;\n\t\tthis.localBounds = new BoundingBox();\n\t\tthis.worldBoundsNoTrail = new BoundingBox();\n\t\tthis.worldBoundsTrail = [new BoundingBox(), new BoundingBox()];\n\t\tthis.worldBounds = new BoundingBox();\n\t\tthis.worldBoundsSize = new Vec3();\n\t\tthis.prevWorldBoundsSize = new Vec3();\n\t\tthis.prevWorldBoundsCenter = new Vec3();\n\t\tthis.prevEmitterExtents = this.emitterExtents;\n\t\tthis.prevEmitterRadius = this.emitterRadius;\n\t\tthis.worldBoundsMul = new Vec3();\n\t\tthis.worldBoundsAdd = new Vec3();\n\t\tthis.timeToSwitchBounds = 0;\n\t\tthis.shaderParticleUpdateRespawn = null;\n\t\tthis.shaderParticleUpdateNoRespawn = null;\n\t\tthis.shaderParticleUpdateOnStop = null;\n\t\tthis.numParticleVerts = 0;\n\t\tthis.numParticleIndices = 0;\n\t\tthis.material = null;\n\t\tthis.meshInstance = null;\n\t\tthis.drawOrder = 0;\n\t\tthis.seed = Math.random();\n\t\tthis.fixedTimeStep = 1.0 / 60;\n\t\tthis.maxSubSteps = 10;\n\t\tthis.simTime = 0;\n\t\tthis.simTimeTotal = 0;\n\t\tthis.beenReset = false;\n\t\tthis._layer = null;\n\t\tthis.rebuild();\n\t}\n\n\tonChangeCamera() {\n\t\tthis.regenShader();\n\t\tthis.resetMaterial();\n\t}\n\n\tcalculateBoundsMad() {\n\t\tthis.worldBoundsMul.x = 1.0 / this.worldBoundsSize.x;\n\t\tthis.worldBoundsMul.y = 1.0 / this.worldBoundsSize.y;\n\t\tthis.worldBoundsMul.z = 1.0 / this.worldBoundsSize.z;\n\t\tthis.worldBoundsAdd.copy(this.worldBounds.center).mul(this.worldBoundsMul).mulScalar(-1);\n\t\tthis.worldBoundsAdd.x += 0.5;\n\t\tthis.worldBoundsAdd.y += 0.5;\n\t\tthis.worldBoundsAdd.z += 0.5;\n\t}\n\n\tcalculateWorldBounds() {\n\t\tif (!this.node) return;\n\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\n\t\tif (!this.useCpu) {\n\t\t\tvar recalculateLocalBounds = false;\n\n\t\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\t\trecalculateLocalBounds = !this.emitterExtents.equals(this.prevEmitterExtents);\n\t\t\t} else {\n\t\t\t\trecalculateLocalBounds = !(this.emitterRadius === this.prevEmitterRadius);\n\t\t\t}\n\n\t\t\tif (recalculateLocalBounds) {\n\t\t\t\tthis.calculateLocalBounds();\n\t\t\t}\n\t\t}\n\n\t\tvar nodeWT = this.node.getWorldTransform();\n\n\t\tif (this.localSpace) {\n\t\t\tthis.worldBoundsNoTrail.copy(this.localBounds);\n\t\t} else {\n\t\t\tthis.worldBoundsNoTrail.setFromTransformedAabb(this.localBounds, nodeWT);\n\t\t}\n\n\t\tthis.worldBoundsTrail[0].add(this.worldBoundsNoTrail);\n\t\tthis.worldBoundsTrail[1].add(this.worldBoundsNoTrail);\n\t\tvar now = this.simTimeTotal;\n\n\t\tif (now >= this.timeToSwitchBounds) {\n\t\t\tthis.worldBoundsTrail[0].copy(this.worldBoundsTrail[1]);\n\t\t\tthis.worldBoundsTrail[1].copy(this.worldBoundsNoTrail);\n\t\t\tthis.timeToSwitchBounds = now + this.lifetime;\n\t\t}\n\n\t\tthis.worldBounds.copy(this.worldBoundsTrail[0]);\n\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\n\t\tif (this.localSpace) {\n\t\t\tthis.meshInstance.aabb.setFromTransformedAabb(this.worldBounds, nodeWT);\n\t\t\tthis.meshInstance.mesh.aabb.setFromTransformedAabb(this.worldBounds, nodeWT);\n\t\t} else {\n\t\t\tthis.meshInstance.aabb.copy(this.worldBounds);\n\t\t\tthis.meshInstance.mesh.aabb.copy(this.worldBounds);\n\t\t}\n\n\t\tthis.meshInstance._aabbVer = 1 - this.meshInstance._aabbVer;\n\t\tif (this.pack8) this.calculateBoundsMad();\n\t}\n\n\tresetWorldBounds() {\n\t\tif (!this.node) return;\n\t\tthis.worldBoundsNoTrail.setFromTransformedAabb(this.localBounds, this.localSpace ? Mat4.IDENTITY : this.node.getWorldTransform());\n\t\tthis.worldBoundsTrail[0].copy(this.worldBoundsNoTrail);\n\t\tthis.worldBoundsTrail[1].copy(this.worldBoundsNoTrail);\n\t\tthis.worldBounds.copy(this.worldBoundsTrail[0]);\n\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\t\tthis.simTimeTotal = 0;\n\t\tthis.timeToSwitchBounds = 0;\n\t}\n\n\tcalculateLocalBounds() {\n\t\tvar minx = Number.MAX_VALUE;\n\t\tvar miny = Number.MAX_VALUE;\n\t\tvar minz = Number.MAX_VALUE;\n\t\tvar maxx = -Number.MAX_VALUE;\n\t\tvar maxy = -Number.MAX_VALUE;\n\t\tvar maxz = -Number.MAX_VALUE;\n\t\tvar maxR = 0;\n\t\tvar maxScale = 0;\n\t\tvar stepWeight = this.lifetime / this.precision;\n\t\tvar wVels = [this.qVelocity, this.qVelocity2];\n\t\tvar lVels = [this.qLocalVelocity, this.qLocalVelocity2];\n\t\tvar accumX = [0, 0];\n\t\tvar accumY = [0, 0];\n\t\tvar accumZ = [0, 0];\n\t\tvar accumR = [0, 0];\n\t\tvar accumW = [0, 0];\n\t\tvar i, j;\n\t\tvar index;\n\t\tvar x, y, z;\n\n\t\tfor (i = 0; i < this.precision + 1; i++) {\n\t\t\tindex = Math.min(i, this.precision - 1);\n\n\t\t\tfor (j = 0; j < 2; j++) {\n\t\t\t\tx = lVels[j][index * 3 + 0] * stepWeight + accumX[j];\n\t\t\t\ty = lVels[j][index * 3 + 1] * stepWeight + accumY[j];\n\t\t\t\tz = lVels[j][index * 3 + 2] * stepWeight + accumZ[j];\n\t\t\t\tminx = Math.min(x, minx);\n\t\t\t\tminy = Math.min(y, miny);\n\t\t\t\tminz = Math.min(z, minz);\n\t\t\t\tmaxx = Math.max(x, maxx);\n\t\t\t\tmaxy = Math.max(y, maxy);\n\t\t\t\tmaxz = Math.max(z, maxz);\n\t\t\t\taccumX[j] = x;\n\t\t\t\taccumY[j] = y;\n\t\t\t\taccumZ[j] = z;\n\t\t\t}\n\n\t\t\tfor (j = 0; j < 2; j++) {\n\t\t\t\taccumW[j] += stepWeight * Math.sqrt(wVels[j][index * 3 + 0] * wVels[j][index * 3 + 0] + wVels[j][index * 3 + 1] * wVels[j][index * 3 + 1] + wVels[j][index * 3 + 2] * wVels[j][index * 3 + 2]);\n\t\t\t}\n\n\t\t\taccumR[0] += this.qRadialSpeed[index] * stepWeight;\n\t\t\taccumR[1] += this.qRadialSpeed2[index] * stepWeight;\n\t\t\tmaxR = Math.max(maxR, Math.max(Math.abs(accumR[0]), Math.abs(accumR[1])));\n\t\t\tmaxScale = Math.max(maxScale, this.qScale[index]);\n\t\t}\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tx = this.emitterExtents.x * 0.5;\n\t\t\ty = this.emitterExtents.y * 0.5;\n\t\t\tz = this.emitterExtents.z * 0.5;\n\t\t} else {\n\t\t\tx = this.emitterRadius;\n\t\t\ty = this.emitterRadius;\n\t\t\tz = this.emitterRadius;\n\t\t}\n\n\t\tvar w = Math.max(accumW[0], accumW[1]);\n\t\tbMin.x = minx - maxScale - x - maxR - w;\n\t\tbMin.y = miny - maxScale - y - maxR - w;\n\t\tbMin.z = minz - maxScale - z - maxR - w;\n\t\tbMax.x = maxx + maxScale + x + maxR + w;\n\t\tbMax.y = maxy + maxScale + y + maxR + w;\n\t\tbMax.z = maxz + maxScale + z + maxR + w;\n\t\tthis.localBounds.setMinMax(bMin, bMax);\n\t}\n\n\trebuild() {\n\t\tvar i;\n\t\tvar gd = this.graphicsDevice;\n\t\tif (this.colorMap === null) this.colorMap = ParticleEmitter.DEFAULT_PARAM_TEXTURE;\n\t\tthis.spawnBounds = this.emitterShape === EMITTERSHAPE_BOX ? this.emitterExtents : this.emitterRadius;\n\t\tthis.useCpu = this.useCpu || this.sort > PARTICLESORT_NONE || gd.maxVertexTextures <= 1 || gd.fragmentUniformsCount < 64 || gd.forceCpuParticles || !gd.extTextureFloat;\n\n\t\tthis._destroyResources();\n\n\t\tthis.pack8 = (this.pack8 || !gd.textureFloatRenderable) && !this.useCpu;\n\t\tparticleTexHeight = this.useCpu || this.pack8 ? 4 : 2;\n\t\tthis.useMesh = false;\n\n\t\tif (this.mesh) {\n\t\t\tvar totalVertCount = this.numParticles * this.mesh.vertexBuffer.numVertices;\n\n\t\t\tif (totalVertCount > 65535) {\n\t\t\t\tconsole.warn(\"WARNING: particle system can't render mesh particles because numParticles * numVertices is more than 65k. Reverting to quad particles.\");\n\t\t\t} else {\n\t\t\t\tthis.useMesh = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.numParticlesPot = math.nextPowerOfTwo(this.numParticles);\n\t\tthis.rebuildGraphs();\n\t\tthis.calculateLocalBounds();\n\t\tthis.resetWorldBounds();\n\n\t\tif (this.node) {\n\t\t\tthis.worldBounds.setFromTransformedAabb(this.localBounds, this.localSpace ? Mat4.IDENTITY : this.node.getWorldTransform());\n\t\t\tthis.worldBoundsTrail[0].copy(this.worldBounds);\n\t\t\tthis.worldBoundsTrail[1].copy(this.worldBounds);\n\t\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\t\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\t\t\tif (this.pack8) this.calculateBoundsMad();\n\t\t}\n\n\t\tthis.vbToSort = new Array(this.numParticles);\n\n\t\tfor (var iSort = 0; iSort < this.numParticles; iSort++) this.vbToSort[iSort] = [0, 0];\n\n\t\tthis.particleDistance = new Float32Array(this.numParticles);\n\n\t\tthis._gpuUpdater.randomize();\n\n\t\tthis.particleTex = new Float32Array(this.numParticlesPot * particleTexHeight * particleTexChannels);\n\t\tvar emitterPos = this.node === null || this.localSpace ? Vec3.ZERO : this.node.getPosition();\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tif (this.node === null || this.localSpace) {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, Quat.IDENTITY, this.spawnBounds);\n\t\t\t} else {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, this.node.getRotation(), tmpVec3.copy(this.spawnBounds).mul(this.node.localScale));\n\t\t\t}\n\n\t\t\textentsInnerRatioUniform[0] = this.emitterExtents.x !== 0 ? this.emitterExtentsInner.x / this.emitterExtents.x : 0;\n\t\t\textentsInnerRatioUniform[1] = this.emitterExtents.y !== 0 ? this.emitterExtentsInner.y / this.emitterExtents.y : 0;\n\t\t\textentsInnerRatioUniform[2] = this.emitterExtents.z !== 0 ? this.emitterExtentsInner.z / this.emitterExtents.z : 0;\n\t\t}\n\n\t\tfor (i = 0; i < this.numParticles; i++) {\n\t\t\tthis._cpuUpdater.calcSpawnPosition(this.particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, i);\n\n\t\t\tif (this.useCpu) this.particleTex[i * particleTexChannels + 3 + this.numParticlesPot * 2 * particleTexChannels] = 1;\n\t\t}\n\n\t\tthis.particleTexStart = new Float32Array(this.numParticlesPot * particleTexHeight * particleTexChannels);\n\n\t\tfor (i = 0; i < this.particleTexStart.length; i++) this.particleTexStart[i] = this.particleTex[i];\n\n\t\tif (!this.useCpu) {\n\t\t\tif (this.pack8) {\n\t\t\t\tthis.particleTexIN = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t\tthis.particleTexOUT = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t\tthis.particleTexStart = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTexStart, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t} else {\n\t\t\t\tthis.particleTexIN = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex);\n\t\t\t\tthis.particleTexOUT = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex);\n\t\t\t\tthis.particleTexStart = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTexStart);\n\t\t\t}\n\n\t\t\tthis.rtParticleTexIN = new RenderTarget({\n\t\t\t\tcolorBuffer: this.particleTexIN,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tthis.rtParticleTexOUT = new RenderTarget({\n\t\t\t\tcolorBuffer: this.particleTexOUT,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tthis.swapTex = false;\n\t\t}\n\n\t\tvar shaderCodeStart = (this.localSpace ? '#define LOCAL_SPACE\\n' : '') + shaderChunks.particleUpdaterInitPS + (this.pack8 ? shaderChunks.particleInputRgba8PS + shaderChunks.particleOutputRgba8PS : shaderChunks.particleInputFloatPS + shaderChunks.particleOutputFloatPS) + (this.emitterShape === EMITTERSHAPE_BOX ? shaderChunks.particleUpdaterAABBPS : shaderChunks.particleUpdaterSpherePS) + shaderChunks.particleUpdaterStartPS;\n\t\tvar shaderCodeRespawn = shaderCodeStart + shaderChunks.particleUpdaterRespawnPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar shaderCodeNoRespawn = shaderCodeStart + shaderChunks.particleUpdaterNoRespawnPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar shaderCodeOnStop = shaderCodeStart + shaderChunks.particleUpdaterOnStopPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar params = this.emitterShape + \"\" + this.pack8 + \"\" + this.localSpace;\n\t\tthis.shaderParticleUpdateRespawn = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeRespawn, \"fsQuad0\" + params);\n\t\tthis.shaderParticleUpdateNoRespawn = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeNoRespawn, \"fsQuad1\" + params);\n\t\tthis.shaderParticleUpdateOnStop = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeOnStop, \"fsQuad2\" + params);\n\t\tthis.numParticleVerts = this.useMesh ? this.mesh.vertexBuffer.numVertices : 4;\n\t\tthis.numParticleIndices = this.useMesh ? this.mesh.indexBuffer[0].numIndices : 6;\n\n\t\tthis._allocate(this.numParticles);\n\n\t\tvar mesh = new Mesh(gd);\n\t\tmesh.vertexBuffer = this.vertexBuffer;\n\t\tmesh.indexBuffer[0] = this.indexBuffer;\n\t\tmesh.primitive[0].type = PRIMITIVE_TRIANGLES;\n\t\tmesh.primitive[0].base = 0;\n\t\tmesh.primitive[0].count = this.numParticles * this.numParticleIndices;\n\t\tmesh.primitive[0].indexed = true;\n\t\tthis.material = new Material();\n\t\tthis.material.name = this.node.name;\n\t\tthis.material.cull = CULLFACE_NONE;\n\t\tthis.material.alphaWrite = false;\n\t\tthis.material.blend = true;\n\t\tthis.material.blendType = this.blendType;\n\t\tthis.material.depthWrite = this.depthWrite;\n\t\tthis.material.emitter = this;\n\t\tthis.regenShader();\n\t\tthis.resetMaterial();\n\t\tvar wasVisible = this.meshInstance ? this.meshInstance.visible : true;\n\t\tthis.meshInstance = new MeshInstance(mesh, this.material, this.node);\n\t\tthis.meshInstance.pick = false;\n\t\tthis.meshInstance.updateKey();\n\t\tthis.meshInstance.cull = true;\n\t\tthis.meshInstance._noDepthDrawGl1 = true;\n\n\t\tif (this.localSpace) {\n\t\t\tthis.meshInstance.aabb.setFromTransformedAabb(this.worldBounds, this.node.getWorldTransform());\n\t\t} else {\n\t\t\tthis.meshInstance.aabb.copy(this.worldBounds);\n\t\t}\n\n\t\tthis.meshInstance._updateAabb = false;\n\t\tthis.meshInstance.visible = wasVisible;\n\n\t\tthis._initializeTextures();\n\n\t\tthis.resetTime();\n\t\tthis.addTime(0, false);\n\t\tif (this.preWarm) this.prewarm(this.lifetime);\n\t}\n\n\t_isAnimated() {\n\t\treturn this.animNumFrames >= 1 && (this.animTilesX > 1 || this.animTilesY > 1) && (this.colorMap && this.colorMap !== ParticleEmitter.DEFAULT_PARAM_TEXTURE || this.normalMap);\n\t}\n\n\trebuildGraphs() {\n\t\tvar precision = this.precision;\n\t\tvar gd = this.graphicsDevice;\n\t\tvar i;\n\t\tthis.qLocalVelocity = this.localVelocityGraph.quantize(precision);\n\t\tthis.qVelocity = this.velocityGraph.quantize(precision);\n\t\tthis.qColor = this.colorGraph.quantizeClamped(precision, 0, 1);\n\t\tthis.qRotSpeed = this.rotationSpeedGraph.quantize(precision);\n\t\tthis.qScale = this.scaleGraph.quantize(precision);\n\t\tthis.qAlpha = this.alphaGraph.quantize(precision);\n\t\tthis.qRadialSpeed = this.radialSpeedGraph.quantize(precision);\n\t\tthis.qLocalVelocity2 = this.localVelocityGraph2.quantize(precision);\n\t\tthis.qVelocity2 = this.velocityGraph2.quantize(precision);\n\t\tthis.qColor2 = this.colorGraph2.quantizeClamped(precision, 0, 1);\n\t\tthis.qRotSpeed2 = this.rotationSpeedGraph2.quantize(precision);\n\t\tthis.qScale2 = this.scaleGraph2.quantize(precision);\n\t\tthis.qAlpha2 = this.alphaGraph2.quantize(precision);\n\t\tthis.qRadialSpeed2 = this.radialSpeedGraph2.quantize(precision);\n\n\t\tfor (i = 0; i < precision; i++) {\n\t\t\tthis.qRotSpeed[i] *= math.DEG_TO_RAD;\n\t\t\tthis.qRotSpeed2[i] *= math.DEG_TO_RAD;\n\t\t}\n\n\t\tthis.localVelocityUMax = new Float32Array(3);\n\t\tthis.velocityUMax = new Float32Array(3);\n\t\tthis.colorUMax = new Float32Array(3);\n\t\tthis.rotSpeedUMax = [0];\n\t\tthis.scaleUMax = [0];\n\t\tthis.alphaUMax = [0];\n\t\tthis.radialSpeedUMax = [0];\n\t\tthis.qLocalVelocityDiv = divGraphFrom2Curves(this.qLocalVelocity, this.qLocalVelocity2, this.localVelocityUMax);\n\t\tthis.qVelocityDiv = divGraphFrom2Curves(this.qVelocity, this.qVelocity2, this.velocityUMax);\n\t\tthis.qColorDiv = divGraphFrom2Curves(this.qColor, this.qColor2, this.colorUMax);\n\t\tthis.qRotSpeedDiv = divGraphFrom2Curves(this.qRotSpeed, this.qRotSpeed2, this.rotSpeedUMax);\n\t\tthis.qScaleDiv = divGraphFrom2Curves(this.qScale, this.qScale2, this.scaleUMax);\n\t\tthis.qAlphaDiv = divGraphFrom2Curves(this.qAlpha, this.qAlpha2, this.alphaUMax);\n\t\tthis.qRadialSpeedDiv = divGraphFrom2Curves(this.qRadialSpeed, this.qRadialSpeed2, this.radialSpeedUMax);\n\n\t\tif (this.pack8) {\n\t\t\tvar umax = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qVelocity, umax);\n\t\t\tvar umax2 = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qVelocity2, umax2);\n\t\t\tvar lumax = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qLocalVelocity, lumax);\n\t\t\tvar lumax2 = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qLocalVelocity2, lumax2);\n\t\t\tvar rumax = [0];\n\t\t\tmaxUnsignedGraphValue(this.qRadialSpeed, rumax);\n\t\t\tvar rumax2 = [0];\n\t\t\tmaxUnsignedGraphValue(this.qRadialSpeed2, rumax2);\n\t\t\tvar maxVel = Math.max(umax[0], umax2[0]);\n\t\t\tmaxVel = Math.max(maxVel, umax[1]);\n\t\t\tmaxVel = Math.max(maxVel, umax2[1]);\n\t\t\tmaxVel = Math.max(maxVel, umax[2]);\n\t\t\tmaxVel = Math.max(maxVel, umax2[2]);\n\t\t\tvar lmaxVel = Math.max(lumax[0], lumax2[0]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax[1]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax2[1]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax[2]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax2[2]);\n\t\t\tvar maxRad = Math.max(rumax[0], rumax2[0]);\n\t\t\tthis.maxVel = maxVel + lmaxVel + maxRad;\n\t\t}\n\n\t\tif (!this.useCpu) {\n\t\t\tthis.internalTex0 = _createTexture(gd, precision, 1, packTextureXYZ_NXYZ(this.qLocalVelocity, this.qLocalVelocityDiv));\n\t\t\tthis.internalTex1 = _createTexture(gd, precision, 1, packTextureXYZ_NXYZ(this.qVelocity, this.qVelocityDiv));\n\t\t\tthis.internalTex2 = _createTexture(gd, precision, 1, packTexture5Floats(this.qRotSpeed, this.qScale, this.qScaleDiv, this.qRotSpeedDiv, this.qAlphaDiv));\n\t\t\tthis.internalTex3 = _createTexture(gd, precision, 1, packTexture2Floats(this.qRadialSpeed, this.qRadialSpeedDiv));\n\t\t}\n\n\t\tthis.colorParam = _createTexture(gd, precision, 1, packTextureRGBA(this.qColor, this.qAlpha), PIXELFORMAT_R8_G8_B8_A8, 1.0, true);\n\t}\n\n\t_initializeTextures() {\n\t\tif (this.colorMap) {\n\t\t\tthis.material.setParameter('colorMap', this.colorMap);\n\n\t\t\tif (this.lighting && this.normalMap) {\n\t\t\t\tthis.material.setParameter('normalMap', this.normalMap);\n\t\t\t}\n\t\t}\n\t}\n\n\tregenShader() {\n\t\tvar programLib = this.graphicsDevice.getProgramLibrary();\n\t\tvar hasNormal = this.normalMap !== null;\n\t\tthis.normalOption = 0;\n\n\t\tif (this.lighting) {\n\t\t\tthis.normalOption = hasNormal ? 2 : 1;\n\t\t}\n\n\t\tthis.material.updateShader = function () {\n\t\t\tif (this.emitter.scene) {\n\t\t\t\tif (this.emitter.camera !== this.emitter.scene._activeCamera) {\n\t\t\t\t\tthis.emitter.camera = this.emitter.scene._activeCamera;\n\t\t\t\t\tthis.emitter.onChangeCamera();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar inTools = this.emitter.inTools;\n\t\t\tvar shader = programLib.getProgram(\"particle\", {\n\t\t\t\tuseCpu: this.emitter.useCpu,\n\t\t\t\tnormal: this.emitter.normalOption,\n\t\t\t\thalflambert: this.emitter.halfLambert,\n\t\t\t\tstretch: this.emitter.stretch,\n\t\t\t\talignToMotion: this.emitter.alignToMotion,\n\t\t\t\tsoft: this.emitter.depthSoftening,\n\t\t\t\tmesh: this.emitter.useMesh,\n\t\t\t\tgamma: this.emitter.scene ? this.emitter.scene.gammaCorrection : 0,\n\t\t\t\ttoneMap: this.emitter.scene ? this.emitter.scene.toneMapping : 0,\n\t\t\t\tfog: this.emitter.scene && !this.emitter.noFog ? this.emitter.scene.fog : \"none\",\n\t\t\t\twrap: this.emitter.wrap && this.emitter.wrapBounds,\n\t\t\t\tlocalSpace: this.emitter.localSpace,\n\t\t\t\tscreenSpace: inTools ? false : this.emitter.screenSpace,\n\t\t\t\tblend: this.blendType,\n\t\t\t\tanimTex: this.emitter._isAnimated(),\n\t\t\t\tanimTexLoop: this.emitter.animLoop,\n\t\t\t\tpack8: this.emitter.pack8,\n\t\t\t\tcustomFace: this.emitter.orientation !== PARTICLEORIENTATION_SCREEN\n\t\t\t});\n\t\t\tthis.shader = shader;\n\t\t};\n\n\t\tthis.material.updateShader();\n\t}\n\n\tresetMaterial() {\n\t\tvar material = this.material;\n\t\tmaterial.setParameter('stretch', this.stretch);\n\n\t\tif (this._isAnimated()) {\n\t\t\tmaterial.setParameter('animTexTilesParams', this.animTilesParams);\n\t\t\tmaterial.setParameter('animTexParams', this.animParams);\n\t\t\tmaterial.setParameter('animTexIndexParams', this.animIndexParams);\n\t\t}\n\n\t\tmaterial.setParameter('colorMult', this.intensity);\n\n\t\tif (!this.useCpu) {\n\t\t\tmaterial.setParameter('internalTex0', this.internalTex0);\n\t\t\tmaterial.setParameter('internalTex1', this.internalTex1);\n\t\t\tmaterial.setParameter('internalTex2', this.internalTex2);\n\t\t\tmaterial.setParameter('internalTex3', this.internalTex3);\n\t\t}\n\n\t\tmaterial.setParameter('colorParam', this.colorParam);\n\t\tmaterial.setParameter('numParticles', this.numParticles);\n\t\tmaterial.setParameter('numParticlesPot', this.numParticlesPot);\n\t\tmaterial.setParameter('lifetime', this.lifetime);\n\t\tmaterial.setParameter('rate', this.rate);\n\t\tmaterial.setParameter('rateDiv', this.rate2 - this.rate);\n\t\tmaterial.setParameter('seed', this.seed);\n\t\tmaterial.setParameter('scaleDivMult', this.scaleUMax[0]);\n\t\tmaterial.setParameter('alphaDivMult', this.alphaUMax[0]);\n\t\tmaterial.setParameter('radialSpeedDivMult', this.radialSpeedUMax[0]);\n\t\tmaterial.setParameter(\"graphNumSamples\", this.precision);\n\t\tmaterial.setParameter(\"graphSampleSize\", 1.0 / this.precision);\n\t\tmaterial.setParameter(\"emitterScale\", new Float32Array([1, 1, 1]));\n\n\t\tif (this.pack8) {\n\t\t\tthis._gpuUpdater._setInputBounds();\n\n\t\t\tmaterial.setParameter(\"inBoundsSize\", this._gpuUpdater.inBoundsSizeUniform);\n\t\t\tmaterial.setParameter(\"inBoundsCenter\", this._gpuUpdater.inBoundsCenterUniform);\n\t\t\tmaterial.setParameter(\"maxVel\", this.maxVel);\n\t\t}\n\n\t\tif (this.wrap && this.wrapBounds) {\n\t\t\tthis.wrapBoundsUniform[0] = this.wrapBounds.x;\n\t\t\tthis.wrapBoundsUniform[1] = this.wrapBounds.y;\n\t\t\tthis.wrapBoundsUniform[2] = this.wrapBounds.z;\n\t\t\tmaterial.setParameter('wrapBounds', this.wrapBoundsUniform);\n\t\t}\n\n\t\tif (this.colorMap) {\n\t\t\tmaterial.setParameter('colorMap', this.colorMap);\n\t\t}\n\n\t\tif (this.lighting) {\n\t\t\tif (this.normalMap) {\n\t\t\t\tmaterial.setParameter('normalMap', this.normalMap);\n\t\t\t}\n\t\t}\n\n\t\tif (this.depthSoftening > 0) {\n\t\t\tmaterial.setParameter('softening', 1.0 / (this.depthSoftening * this.depthSoftening * 100));\n\t\t}\n\n\t\tif (this.stretch > 0.0) material.cull = CULLFACE_NONE;\n\n\t\tthis._compParticleFaceParams();\n\t}\n\n\t_compParticleFaceParams() {\n\t\tvar tangent, binormal;\n\n\t\tif (this.orientation === PARTICLEORIENTATION_SCREEN) {\n\t\t\ttangent = new Float32Array([1, 0, 0]);\n\t\t\tbinormal = new Float32Array([0, 0, 1]);\n\t\t} else {\n\t\t\tvar n;\n\n\t\t\tif (this.orientation === PARTICLEORIENTATION_WORLD) {\n\t\t\t\tn = this.particleNormal.normalize();\n\t\t\t} else {\n\t\t\t\tvar emitterMat = this.node === null ? Mat4.IDENTITY : this.node.getWorldTransform();\n\t\t\t\tn = emitterMat.transformVector(this.particleNormal).normalize();\n\t\t\t}\n\n\t\t\tvar t = new Vec3(1, 0, 0);\n\t\t\tif (Math.abs(t.dot(n)) === 1) t.set(0, 0, 1);\n\t\t\tvar b = new Vec3().cross(n, t).normalize();\n\t\t\tt.cross(b, n).normalize();\n\t\t\ttangent = new Float32Array([t.x, t.y, t.z]);\n\t\t\tbinormal = new Float32Array([b.x, b.y, b.z]);\n\t\t}\n\n\t\tthis.material.setParameter(\"faceTangent\", tangent);\n\t\tthis.material.setParameter(\"faceBinorm\", binormal);\n\t}\n\n\t_allocate(numParticles) {\n\t\tvar psysVertCount = numParticles * this.numParticleVerts;\n\t\tvar psysIndexCount = numParticles * this.numParticleIndices;\n\t\tvar elements, particleFormat;\n\t\tvar i;\n\n\t\tif (this.vertexBuffer === undefined || this.vertexBuffer.getNumVertices() !== psysVertCount) {\n\t\t\tif (!this.useCpu) {\n\t\t\t\telements = [{\n\t\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}];\n\n\t\t\t\tif (this.useMesh) {\n\t\t\t\t\telements.push({\n\t\t\t\t\t\tsemantic: SEMANTIC_ATTR1,\n\t\t\t\t\t\tcomponents: 2,\n\t\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tparticleFormat = new VertexFormat(this.graphicsDevice, elements);\n\t\t\t\tthis.vertexBuffer = new VertexBuffer(this.graphicsDevice, particleFormat, psysVertCount, BUFFER_DYNAMIC);\n\t\t\t\tthis.indexBuffer = new IndexBuffer(this.graphicsDevice, INDEXFORMAT_UINT16, psysIndexCount);\n\t\t\t} else {\n\t\t\t\telements = [{\n\t\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR1,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR2,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR3,\n\t\t\t\t\tcomponents: 1,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR4,\n\t\t\t\t\tcomponents: this.useMesh ? 4 : 2,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}];\n\t\t\t\tparticleFormat = new VertexFormat(this.graphicsDevice, elements);\n\t\t\t\tthis.vertexBuffer = new VertexBuffer(this.graphicsDevice, particleFormat, psysVertCount, BUFFER_DYNAMIC);\n\t\t\t\tthis.indexBuffer = new IndexBuffer(this.graphicsDevice, INDEXFORMAT_UINT16, psysIndexCount);\n\t\t\t}\n\n\t\t\tvar data = new Float32Array(this.vertexBuffer.lock());\n\t\t\tvar meshData, stride, texCoordOffset;\n\n\t\t\tif (this.useMesh) {\n\t\t\t\tmeshData = new Float32Array(this.mesh.vertexBuffer.lock());\n\t\t\t\tstride = meshData.length / this.mesh.vertexBuffer.numVertices;\n\n\t\t\t\tfor (var elem = 0; elem < this.mesh.vertexBuffer.format.elements.length; elem++) {\n\t\t\t\t\tif (this.mesh.vertexBuffer.format.elements[elem].name === SEMANTIC_TEXCOORD0) {\n\t\t\t\t\t\ttexCoordOffset = this.mesh.vertexBuffer.format.elements[elem].offset / 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar id;\n\n\t\t\tfor (i = 0; i < psysVertCount; i++) {\n\t\t\t\tid = Math.floor(i / this.numParticleVerts);\n\n\t\t\t\tif (!this.useMesh) {\n\t\t\t\t\tvar vertID = i % 4;\n\t\t\t\t\tdata[i * 4] = particleVerts[vertID][0];\n\t\t\t\t\tdata[i * 4 + 1] = particleVerts[vertID][1];\n\t\t\t\t\tdata[i * 4 + 2] = 0;\n\t\t\t\t\tdata[i * 4 + 3] = id;\n\t\t\t\t} else {\n\t\t\t\t\tvar vert = i % this.numParticleVerts;\n\t\t\t\t\tdata[i * 6] = meshData[vert * stride];\n\t\t\t\t\tdata[i * 6 + 1] = meshData[vert * stride + 1];\n\t\t\t\t\tdata[i * 6 + 2] = meshData[vert * stride + 2];\n\t\t\t\t\tdata[i * 6 + 3] = id;\n\t\t\t\t\tdata[i * 6 + 4] = meshData[vert * stride + texCoordOffset + 0];\n\t\t\t\t\tdata[i * 6 + 5] = meshData[vert * stride + texCoordOffset + 1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.useCpu) {\n\t\t\t\tthis.vbCPU = new Float32Array(data);\n\t\t\t\tthis.vbOld = new Float32Array(this.vbCPU.length);\n\t\t\t}\n\n\t\t\tthis.vertexBuffer.unlock();\n\n\t\t\tif (this.useMesh) {\n\t\t\t\tthis.mesh.vertexBuffer.unlock();\n\t\t\t}\n\n\t\t\tvar dst = 0;\n\t\t\tvar indices = new Uint16Array(this.indexBuffer.lock());\n\t\t\tif (this.useMesh) meshData = new Uint16Array(this.mesh.indexBuffer[0].lock());\n\n\t\t\tfor (i = 0; i < numParticles; i++) {\n\t\t\t\tif (!this.useMesh) {\n\t\t\t\t\tvar baseIndex = i * 4;\n\t\t\t\t\tindices[dst++] = baseIndex;\n\t\t\t\t\tindices[dst++] = baseIndex + 1;\n\t\t\t\t\tindices[dst++] = baseIndex + 2;\n\t\t\t\t\tindices[dst++] = baseIndex;\n\t\t\t\t\tindices[dst++] = baseIndex + 2;\n\t\t\t\t\tindices[dst++] = baseIndex + 3;\n\t\t\t\t} else {\n\t\t\t\t\tfor (var j = 0; j < this.numParticleIndices; j++) {\n\t\t\t\t\t\tindices[i * this.numParticleIndices + j] = meshData[j] + i * this.numParticleVerts;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.indexBuffer.unlock();\n\t\t\tif (this.useMesh) this.mesh.indexBuffer[0].unlock();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.beenReset = true;\n\t\tthis.seed = Math.random();\n\t\tthis.material.setParameter('seed', this.seed);\n\n\t\tif (this.useCpu) {\n\t\t\tfor (var i = 0; i < this.particleTexStart.length; i++) {\n\t\t\t\tthis.particleTex[i] = this.particleTexStart[i];\n\t\t\t}\n\t\t} else {\n\t\t\tthis._initializeTextures();\n\t\t}\n\n\t\tthis.resetWorldBounds();\n\t\tthis.resetTime();\n\t\tvar origLoop = this.loop;\n\t\tthis.loop = true;\n\t\tthis.addTime(0, false);\n\t\tthis.loop = origLoop;\n\n\t\tif (this.preWarm) {\n\t\t\tthis.prewarm(this.lifetime);\n\t\t}\n\t}\n\n\tprewarm(time) {\n\t\tvar lifetimeFraction = time / this.lifetime;\n\t\tvar iterations = Math.min(Math.floor(lifetimeFraction * this.precision), this.precision);\n\t\tvar stepDelta = time / iterations;\n\n\t\tfor (var i = 0; i < iterations; i++) {\n\t\t\tthis.addTime(stepDelta, false);\n\t\t}\n\t}\n\n\tresetTime() {\n\t\tthis.endTime = calcEndTime(this);\n\t}\n\n\tfinishFrame() {\n\t\tif (this.useCpu) this.vertexBuffer.unlock();\n\t}\n\n\taddTime(delta, isOnStop) {\n\t\tvar device = this.graphicsDevice;\n\t\tthis.simTimeTotal += delta;\n\t\tthis.calculateWorldBounds();\n\n\t\tif (this._isAnimated()) {\n\t\t\tvar tilesParams = this.animTilesParams;\n\t\t\ttilesParams[0] = 1.0 / this.animTilesX;\n\t\t\ttilesParams[1] = 1.0 / this.animTilesY;\n\t\t\tvar params = this.animParams;\n\t\t\tparams[0] = this.animStartFrame;\n\t\t\tparams[1] = this.animNumFrames * this.animSpeed;\n\t\t\tparams[2] = this.animNumFrames - 1;\n\t\t\tparams[3] = this.animNumAnimations - 1;\n\t\t\tvar animIndexParams = this.animIndexParams;\n\t\t\tanimIndexParams[0] = this.animIndex;\n\t\t\tanimIndexParams[1] = this.randomizeAnimIndex;\n\t\t}\n\n\t\tif (this.scene) {\n\t\t\tif (this.camera !== this.scene._activeCamera) {\n\t\t\t\tthis.camera = this.scene._activeCamera;\n\t\t\t\tthis.onChangeCamera();\n\t\t\t}\n\t\t}\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\textentsInnerRatioUniform[0] = this.emitterExtents.x !== 0 ? this.emitterExtentsInner.x / this.emitterExtents.x : 0;\n\t\t\textentsInnerRatioUniform[1] = this.emitterExtents.y !== 0 ? this.emitterExtentsInner.y / this.emitterExtents.y : 0;\n\t\t\textentsInnerRatioUniform[2] = this.emitterExtents.z !== 0 ? this.emitterExtentsInner.z / this.emitterExtents.z : 0;\n\n\t\t\tif (this.meshInstance.node === null) {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, Quat.IDENTITY, this.emitterExtents);\n\t\t\t} else {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, this.meshInstance.node.getRotation(), tmpVec3.copy(this.emitterExtents).mul(this.meshInstance.node.localScale));\n\t\t\t}\n\t\t}\n\n\t\tvar emitterPos;\n\t\tvar emitterScale = this.meshInstance.node === null ? Vec3.ONE : this.meshInstance.node.localScale;\n\t\tthis.emitterScaleUniform[0] = emitterScale.x;\n\t\tthis.emitterScaleUniform[1] = emitterScale.y;\n\t\tthis.emitterScaleUniform[2] = emitterScale.z;\n\t\tthis.material.setParameter(\"emitterScale\", this.emitterScaleUniform);\n\n\t\tif (this.localSpace && this.meshInstance.node) {\n\t\t\temitterPos = this.meshInstance.node.getPosition();\n\t\t\tthis.emitterPosUniform[0] = emitterPos.x;\n\t\t\tthis.emitterPosUniform[1] = emitterPos.y;\n\t\t\tthis.emitterPosUniform[2] = emitterPos.z;\n\t\t\tthis.material.setParameter(\"emitterPos\", this.emitterPosUniform);\n\t\t}\n\n\t\tthis._compParticleFaceParams();\n\n\t\tif (!this.useCpu) {\n\t\t\tthis._gpuUpdater.update(device, spawnMatrix, extentsInnerRatioUniform, delta, isOnStop);\n\t\t} else {\n\t\t\tvar data = new Float32Array(this.vertexBuffer.lock());\n\n\t\t\tthis._cpuUpdater.update(data, this.vbToSort, this.particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, delta, isOnStop);\n\t\t}\n\n\t\tif (!this.loop) {\n\t\t\tif (Date.now() > this.endTime) {\n\t\t\t\tif (this.onFinished) this.onFinished();\n\t\t\t\tthis.meshInstance.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.meshInstance) {\n\t\t\tthis.meshInstance.drawOrder = this.drawOrder;\n\t\t}\n\t}\n\n\t_destroyResources() {\n\t\tif (this.particleTexIN) {\n\t\t\tthis.particleTexIN.destroy();\n\t\t\tthis.particleTexIN = null;\n\t\t}\n\n\t\tif (this.particleTexOUT) {\n\t\t\tthis.particleTexOUT.destroy();\n\t\t\tthis.particleTexOUT = null;\n\t\t}\n\n\t\tif (this.particleTexStart && this.particleTexStart.destroy) {\n\t\t\tthis.particleTexStart.destroy();\n\t\t\tthis.particleTexStart = null;\n\t\t}\n\n\t\tif (this.rtParticleTexIN) {\n\t\t\tthis.rtParticleTexIN.destroy();\n\t\t\tthis.rtParticleTexIN = null;\n\t\t}\n\n\t\tif (this.rtParticleTexOUT) {\n\t\t\tthis.rtParticleTexOUT.destroy();\n\t\t\tthis.rtParticleTexOUT = null;\n\t\t}\n\n\t\tif (this.internalTex0) {\n\t\t\tthis.internalTex0.destroy();\n\t\t\tthis.internalTex0 = null;\n\t\t}\n\n\t\tif (this.internalTex1) {\n\t\t\tthis.internalTex1.destroy();\n\t\t\tthis.internalTex1 = null;\n\t\t}\n\n\t\tif (this.internalTex2) {\n\t\t\tthis.internalTex2.destroy();\n\t\t\tthis.internalTex2 = null;\n\t\t}\n\n\t\tif (this.internalTex3) {\n\t\t\tthis.internalTex3.destroy();\n\t\t\tthis.internalTex3 = null;\n\t\t}\n\n\t\tif (this.colorParam) {\n\t\t\tthis.colorParam.destroy();\n\t\t\tthis.colorParam = null;\n\t\t}\n\n\t\tif (this.vertexBuffer) {\n\t\t\tthis.vertexBuffer.destroy();\n\t\t\tthis.vertexBuffer = undefined;\n\t\t}\n\n\t\tif (this.indexBuffer) {\n\t\t\tthis.indexBuffer.destroy();\n\t\t\tthis.indexBuffer = undefined;\n\t\t}\n\n\t\tif (this.material) {\n\t\t\tthis.material.destroy();\n\t\t\tthis.material = null;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.camera = null;\n\n\t\tthis._destroyResources();\n\t}\n\n}\n\nclass AreaLightLuts {\n\tstatic createTexture(device, format, size) {\n\t\tconst tex = new Texture(device, {\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tformat: format,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\tmagFilter: FILTER_LINEAR,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tanisotropy: 1\n\t\t});\n\t\ttex.name = 'AreaLightLUT';\n\t\treturn tex;\n\t}\n\n\tstatic setUniforms(device, texture1, texture2) {\n\t\tdevice.scope.resolve('areaLightsLutTex1').setValue(texture1);\n\t\tdevice.scope.resolve('areaLightsLutTex2').setValue(texture2);\n\t}\n\n\tstatic createPlaceholder(device) {\n\t\tconst texture = AreaLightLuts.createTexture(device, PIXELFORMAT_R8_G8_B8_A8, 2);\n\t\tconst pixels = texture.lock();\n\t\tpixels.fill(0);\n\t\ttexture.unlock();\n\t\tAreaLightLuts.setUniforms(device, texture, texture);\n\t}\n\n\tstatic set(device, resource) {\n\t\tfunction buildTexture(device, data, format) {\n\t\t\tconst texture = AreaLightLuts.createTexture(device, format, 64);\n\t\t\ttexture.lock().set(data);\n\t\t\ttexture.unlock();\n\t\t\ttexture.upload();\n\t\t\treturn texture;\n\t\t}\n\n\t\tfunction offsetScale(data, offset, scale) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Float32Array(count);\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst n = i % 4;\n\t\t\t\tret[i] = (data[i] + offset[n]) * scale[n];\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tfunction convertToHalfFloat(data) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Uint16Array(count);\n\t\t\tconst float2Half = math.float2Half;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tret[i] = float2Half(data[i]);\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tfunction convertToUint(data) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Uint8ClampedArray(count);\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tret[i] = data[i] * 255;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tconst versions = new Int16Array(resource, 0, 2);\n\t\tconst majorVersion = versions[0];\n\t\tconst minorVersion = versions[1];\n\n\t\tif (majorVersion !== 0 || minorVersion !== 1) {\n\t\t\tconsole.warn(`areaLightLuts asset version: ${majorVersion}.${minorVersion} is not supported in current engine version!`);\n\t\t} else {\n\t\t\tconst srcData1 = new Float32Array(resource, 4, 16384);\n\t\t\tconst srcData2 = new Float32Array(resource, 4 + 16384 * 4, 16384);\n\t\t\tlet data1, data2;\n\t\t\tconst format = device.areaLightLutFormat;\n\n\t\t\tif (format === PIXELFORMAT_RGBA32F) {\n\t\t\t\tdata1 = srcData1;\n\t\t\t\tdata2 = srcData2;\n\t\t\t} else if (format === PIXELFORMAT_RGBA16F) {\n\t\t\t\tdata1 = convertToHalfFloat(srcData1);\n\t\t\t\tdata2 = convertToHalfFloat(srcData2);\n\t\t\t} else {\n\t\t\t\tconst o1 = [0.0, 0.2976, 0.01381, 0.0];\n\t\t\t\tconst s1 = [0.999, 3.08737, 1.6546, 0.603249];\n\t\t\t\tconst o2 = [-0.306897, 0.0, 0.0, 0.0];\n\t\t\t\tconst s2 = [1.442787, 1.0, 1.0, 1.0];\n\t\t\t\tdata1 = convertToUint(offsetScale(srcData1, o1, s1));\n\t\t\t\tdata2 = convertToUint(offsetScale(srcData2, o2, s2));\n\t\t\t}\n\n\t\t\tconst tex1 = buildTexture(device, data1, format);\n\t\t\tconst tex2 = buildTexture(device, data2, format);\n\t\t\tAreaLightLuts.setUniforms(device, tex1, tex2);\n\t\t}\n\t}\n\n}\n\nvar identityGraphNode = new GraphNode();\n\nclass LineBatch {\n\tconstructor() {\n\t\tthis.numLinesAllocated = 128;\n\t\tthis.vb = null;\n\t\tthis.vbRam = null;\n\t\tthis.mesh = null;\n\t\tthis.linesUsed = 0;\n\t\tthis.material = null;\n\t\tthis.meshInstance = null;\n\t\tthis.meshInstanceArray = [];\n\t\tthis.layer = null;\n\t}\n\n\tinit(device, vertexFormat, layer, linesToAdd) {\n\t\tif (!this.mesh) {\n\t\t\tthis.mesh = new Mesh(device);\n\t\t\tthis.mesh.primitive[0].type = PRIMITIVE_LINES;\n\t\t\tthis.mesh.primitive[0].base = 0;\n\t\t\tthis.mesh.primitive[0].indexed = false;\n\t\t\tthis.material = new BasicMaterial();\n\t\t\tthis.material.vertexColors = true;\n\t\t\tthis.material.blend = true;\n\t\t\tthis.material.blendType = BLEND_NORMAL;\n\t\t\tthis.material.update();\n\t\t}\n\n\t\tthis.layer = layer;\n\n\t\twhile (this.linesUsed + linesToAdd > this.numLinesAllocated) {\n\t\t\tif (this.vb) {\n\t\t\t\tthis.vb.destroy();\n\t\t\t\tthis.vb = null;\n\t\t\t}\n\n\t\t\tthis.numLinesAllocated *= 2;\n\t\t}\n\n\t\tthis.vertexFormat = vertexFormat;\n\n\t\tif (!this.vb) {\n\t\t\tthis.vb = new VertexBuffer(device, vertexFormat, this.numLinesAllocated * 2, BUFFER_DYNAMIC);\n\t\t\tthis.mesh.vertexBuffer = this.vb;\n\t\t\tthis.vbRam = new DataView(this.vb.lock());\n\n\t\t\tif (!this.meshInstance) {\n\t\t\t\tidentityGraphNode.worldTransform = Mat4.IDENTITY;\n\t\t\t\tidentityGraphNode._dirtyWorld = identityGraphNode._dirtyNormal = false;\n\t\t\t\tthis.meshInstance = new MeshInstance(this.mesh, this.material, identityGraphNode);\n\t\t\t\tthis.meshInstance.cull = false;\n\t\t\t}\n\t\t}\n\t}\n\n\taddLines(position, color) {\n\t\tvar multiColor = !!color.length;\n\t\tvar offset = this.linesUsed * 2 * this.vertexFormat.size;\n\t\tvar clr;\n\n\t\tfor (var i = 0; i < position.length; i++) {\n\t\t\tthis.vbRam.setFloat32(offset, position[i].x, true);\n\t\t\toffset += 4;\n\t\t\tthis.vbRam.setFloat32(offset, position[i].y, true);\n\t\t\toffset += 4;\n\t\t\tthis.vbRam.setFloat32(offset, position[i].z, true);\n\t\t\toffset += 4;\n\t\t\tclr = multiColor ? color[i] : color;\n\t\t\tthis.vbRam.setUint8(offset, clr.r * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.g * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.b * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.a * 255);\n\t\t\toffset += 1;\n\t\t}\n\n\t\tthis.linesUsed += position.length / 2;\n\t}\n\n\tfinalize(meshInstanceArray) {\n\t\tif (this.linesUsed > 0) {\n\t\t\tthis.vb.setData(this.vbRam.buffer);\n\t\t\tthis.mesh.primitive[0].count = this.linesUsed * 2;\n\t\t\tmeshInstanceArray[0] = this.meshInstance;\n\t\t\tthis.layer.addMeshInstances(meshInstanceArray, true);\n\t\t\tthis.linesUsed = 0;\n\t\t}\n\t}\n\n}\n\nclass ImmediateData {\n\tconstructor(device) {\n\t\tthis.lineVertexFormat = new VertexFormat(device, [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_COLOR,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_UINT8,\n\t\t\tnormalize: true\n\t\t}]);\n\t\tthis.device = device;\n\t\tthis.lineBatches = [];\n\t\tthis.layers = [];\n\t\tthis.layerToBatch = {};\n\t\tthis.quadMesh = null;\n\t\tthis.textureShader = null;\n\t\tthis.depthTextureShader = null;\n\t\tthis.cubeLocalPos = null;\n\t\tthis.cubeWorldPos = null;\n\t\tthis.meshInstanceArray = [];\n\t\tthis.usedGraphNodes = [];\n\t\tthis.freeGraphNodes = [];\n\t}\n\n\tstatic getTextureVS() {\n\t\treturn `\n\t\t\t\t\t\tattribute vec2 aPosition;\n\t\t\t\t\t\tuniform mat4 matrix_model;\n\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\t\t\tgl_Position = matrix_model * vec4(aPosition, 0, 1);\n\t\t\t\t\t\t\t\tuv0 = aPosition.xy + 0.5;\n\t\t\t\t\t\t\t\tuv0.y = 1.0 - uv0.y;\n\t\t\t\t\t\t}\n\t\t\t\t`;\n\t}\n\n\tgetTextureShader() {\n\t\tif (!this.textureShader) {\n\t\t\tconst shaderDefinition = {\n\t\t\t\tattributes: {\n\t\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t\t},\n\t\t\t\tvshader: ImmediateData.getTextureVS(),\n\t\t\t\tfshader: `\n\t\t\t\t\t\t\t\t\t\tprecision lowp float;\n\t\t\t\t\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\t\t\t\t\tuniform sampler2D colorMap;\n\t\t\t\t\t\t\t\t\t\tvoid main (void) {\n\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(texture2D(colorMap, uv0).xyz, 1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`\n\t\t\t};\n\t\t\tthis.textureShader = new Shader(this.device, shaderDefinition);\n\t\t}\n\n\t\treturn this.textureShader;\n\t}\n\n\tgetDepthTextureShader() {\n\t\tif (!this.depthTextureShader) {\n\t\t\tconst gl2 = this.device.webgl2 ? \"#define GL2\" : \"\";\n\t\t\tconst shaderDefinition = {\n\t\t\t\tattributes: {\n\t\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t\t},\n\t\t\t\tvshader: ImmediateData.getTextureVS(),\n\t\t\t\tfshader: `\n\t\t\t\t\t\t\t\t\t\tprecision ${this.device.precision} float;\n\t\t\t\t\t\t\t\t\t\t${gl2}\n\t\t\t\t\t\t\t\t\t\t${shaderChunks.screenDepthPS}\n\t\t\t\t\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\t\t\t\t\t\tfloat depth = getLinearScreenDepth(uv0) * camera_params.x;\n\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(vec3(depth), 1.0);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`\n\t\t\t};\n\t\t\tthis.depthTextureShader = new Shader(this.device, shaderDefinition);\n\t\t}\n\n\t\treturn this.depthTextureShader;\n\t}\n\n\tgetQuadMesh() {\n\t\tif (!this.quadMesh) {\n\t\t\tvar format = new VertexFormat(this.device, [{\n\t\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\t\tcomponents: 3,\n\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t}]);\n\t\t\tvar quadVb = new VertexBuffer(this.device, format, 4);\n\t\t\tvar iterator = new VertexIterator(quadVb);\n\t\t\titerator.element[SEMANTIC_POSITION].set(-0.5, -0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(0.5, -0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(-0.5, 0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(0.5, 0.5, 0);\n\t\t\titerator.end();\n\t\t\tthis.quadMesh = new Mesh(this.device);\n\t\t\tthis.quadMesh.vertexBuffer = quadVb;\n\t\t\tthis.quadMesh.primitive[0].type = PRIMITIVE_TRISTRIP;\n\t\t\tthis.quadMesh.primitive[0].base = 0;\n\t\t\tthis.quadMesh.primitive[0].count = 4;\n\t\t\tthis.quadMesh.primitive[0].indexed = false;\n\t\t}\n\n\t\treturn this.quadMesh;\n\t}\n\n\trenderMesh(material, matrix, mesh, meshInstance, options) {\n\t\tif (!meshInstance) {\n\t\t\tvar graphNode = this.getGraphNode(matrix);\n\t\t\tmeshInstance = new MeshInstance(mesh, material, graphNode);\n\t\t\tmeshInstance.cull = false;\n\t\t}\n\n\t\tthis.addLayer(options.layer);\n\n\t\tif (options.mask) {\n\t\t\tmeshInstance.mask = options.mask;\n\t\t}\n\n\t\tthis.meshInstanceArray[0] = meshInstance;\n\t\toptions.layer.addMeshInstances(this.meshInstanceArray, true);\n\t}\n\n\trenderWireCube(matrix, color, options) {\n\t\tif (!this.cubeLocalPos) {\n\t\t\tconst x = 0.5;\n\t\t\tthis.cubeLocalPos = [new Vec3(-x, -x, -x), new Vec3(-x, x, -x), new Vec3(x, x, -x), new Vec3(x, -x, -x), new Vec3(-x, -x, x), new Vec3(-x, x, x), new Vec3(x, x, x), new Vec3(x, -x, x)];\n\t\t\tthis.cubeWorldPos = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\t\tconst _cubeWorldPos = this.cubeWorldPos;\n\t\t\tthis.cubePositions = [_cubeWorldPos[0], _cubeWorldPos[1], _cubeWorldPos[1], _cubeWorldPos[2], _cubeWorldPos[2], _cubeWorldPos[3], _cubeWorldPos[3], _cubeWorldPos[0], _cubeWorldPos[4], _cubeWorldPos[5], _cubeWorldPos[5], _cubeWorldPos[6], _cubeWorldPos[6], _cubeWorldPos[7], _cubeWorldPos[7], _cubeWorldPos[4], _cubeWorldPos[0], _cubeWorldPos[4], _cubeWorldPos[1], _cubeWorldPos[5], _cubeWorldPos[2], _cubeWorldPos[6], _cubeWorldPos[3], _cubeWorldPos[7]];\n\t\t}\n\n\t\tconst cubeLocalPos = this.cubeLocalPos;\n\t\tconst cubeWorldPos = this.cubeWorldPos;\n\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tmatrix.transformPoint(cubeLocalPos[i], cubeWorldPos[i]);\n\t\t}\n\n\t\tconst lineBatch = this.prepareLineBatch(options.layer, options.depthTest, undefined, this.cubePositions.length);\n\t\tlineBatch.addLines(this.cubePositions, color);\n\t}\n\n\trenderWireSphere(center, radius, color, options) {\n\t\tconst numSegments = 20;\n\n\t\tif (!this.spherePoints) {\n\t\t\tthis.spherePoints = [];\n\n\t\t\tfor (let i = 0; i < numSegments * 6; i++) {\n\t\t\t\tthis.spherePoints.push(new Vec3());\n\t\t\t}\n\t\t}\n\n\t\tconst points = this.spherePoints;\n\t\tconst step = 2 * Math.PI / numSegments;\n\t\tlet angle = 0;\n\n\t\tfor (let i = 0; i < numSegments; i++) {\n\t\t\tconst sin0 = Math.sin(angle);\n\t\t\tconst cos0 = Math.cos(angle);\n\t\t\tangle += step;\n\t\t\tconst sin1 = Math.sin(angle);\n\t\t\tconst cos1 = Math.cos(angle);\n\t\t\tpoints[i * 6].set(center.x + radius * sin0, center.y, center.z + radius * cos0);\n\t\t\tpoints[i * 6 + 1].set(center.x + radius * sin1, center.y, center.z + radius * cos1);\n\t\t\tpoints[i * 6 + 2].set(center.x + radius * sin0, center.y + radius * cos0, center.z);\n\t\t\tpoints[i * 6 + 3].set(center.x + radius * sin1, center.y + radius * cos1, center.z);\n\t\t\tpoints[i * 6 + 4].set(center.x, center.y + radius * sin0, center.z + radius * cos0);\n\t\t\tpoints[i * 6 + 5].set(center.x, center.y + radius * sin1, center.z + radius * cos1);\n\t\t}\n\n\t\tconst lineBatch = this.prepareLineBatch(options.layer, options.depthTest, undefined, points.length);\n\t\tlineBatch.addLines(points, color);\n\t}\n\n\tgetGraphNode(matrix) {\n\t\tlet graphNode = null;\n\n\t\tif (this.freeGraphNodes.length > 0) {\n\t\t\tgraphNode = this.freeGraphNodes.pop();\n\t\t} else {\n\t\t\tgraphNode = new GraphNode();\n\t\t}\n\n\t\tthis.usedGraphNodes.push(graphNode);\n\t\tgraphNode.worldTransform = matrix;\n\t\tgraphNode._dirtyWorld = graphNode._dirtyNormal = false;\n\t\treturn graphNode;\n\t}\n\n\taddLayer(layer) {\n\t\tif (this.layers.indexOf(layer) < 0) {\n\t\t\tthis.layers.push(layer);\n\t\t}\n\t}\n\n\tgetLayerIdx(layer) {\n\t\treturn this.layerToBatch[layer.id];\n\t}\n\n\taddLayerIdx(idx, layer) {\n\t\tthis.layerToBatch[layer.id] = idx;\n\t}\n\n\tfinalize() {\n\t\tfor (var i = 0; i < this.lineBatches.length; i++) {\n\t\t\tif (this.lineBatches[i]) {\n\t\t\t\tthis.lineBatches[i].finalize(this.meshInstanceArray);\n\t\t\t}\n\t\t}\n\t}\n\n\tclear() {\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tthis.layers[i].clearMeshInstances(true);\n\t\t}\n\n\t\tconst temp = this.freeGraphNodes;\n\t\tthis.freeGraphNodes = this.usedGraphNodes;\n\t\tthis.usedGraphNodes = temp;\n\t\tthis.layers.length = 0;\n\t}\n\n\tprepareLineBatch(layer, depthTest, mask, numLines) {\n\t\tthis.addLayer(layer);\n\t\tvar idx = this.getLayerIdx(layer);\n\n\t\tif (idx === undefined) {\n\t\t\tvar batch = new LineBatch();\n\t\t\tbatch.init(this.device, this.lineVertexFormat, layer, numLines);\n\t\t\tbatch.material.depthTest = depthTest;\n\n\t\t\tif (mask) {\n\t\t\t\tbatch.meshInstance.mask = mask;\n\t\t\t}\n\n\t\t\tidx = this.lineBatches.push(batch) - 1;\n\t\t\tthis.addLayerIdx(idx, layer);\n\t\t} else {\n\t\t\tthis.lineBatches[idx].init(this.device, this.lineVertexFormat, layer, numLines);\n\t\t\tthis.lineBatches[idx].material.depthTest = depthTest;\n\n\t\t\tif (mask) {\n\t\t\t\tthis.lineBatches[idx].meshInstance.mask = mask;\n\t\t\t}\n\t\t}\n\n\t\treturn this.lineBatches[idx];\n\t}\n\n}\n\nclass Scene extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.root = null;\n\t\tthis._gravity = new Vec3(0, -9.8, 0);\n\t\tthis._layers = null;\n\t\tthis._fog = FOG_NONE;\n\t\tthis.fogColor = new Color(0, 0, 0);\n\t\tthis.fogStart = 1;\n\t\tthis.fogEnd = 1000;\n\t\tthis.fogDensity = 0;\n\t\tthis.ambientLight = new Color(0, 0, 0);\n\t\tthis._gammaCorrection = GAMMA_NONE;\n\t\tthis._toneMapping = 0;\n\t\tthis.exposure = 1.0;\n\t\tthis._skyboxPrefiltered = [null, null, null, null, null, null];\n\t\tthis._skyboxCubeMap = null;\n\t\tthis.skyboxModel = null;\n\t\tthis._skyboxIntensity = 1;\n\t\tthis._skyboxMip = 0;\n\t\tthis._skyboxRotation = new Quat();\n\t\tthis._skyboxRotationMat3 = null;\n\t\tthis._skyboxRotationMat4 = null;\n\t\tthis._skyboxIsRenderTarget = false;\n\t\tthis.lightmapSizeMultiplier = 1;\n\t\tthis.lightmapMaxResolution = 2048;\n\t\tthis.lightmapMode = BAKE_COLORDIR;\n\t\tthis._stats = {\n\t\t\tmeshInstances: 0,\n\t\t\tlights: 0,\n\t\t\tdynamicLights: 0,\n\t\t\tbakedLights: 0,\n\t\t\tlastStaticPrepareFullTime: 0,\n\t\t\tlastStaticPrepareSearchTime: 0,\n\t\t\tlastStaticPrepareWriteTime: 0,\n\t\t\tlastStaticPrepareTriAabbTime: 0,\n\t\t\tlastStaticPrepareCombineTime: 0,\n\t\t\tupdateShadersTime: 0\n\t\t};\n\t\tthis.updateShaders = true;\n\t\tthis.updateSkybox = true;\n\t\tthis._shaderVersion = 0;\n\t\tthis._statsUpdated = false;\n\t\tthis._models = [];\n\t\tthis.defaultMaterial = new StandardMaterial();\n\t\tthis.defaultMaterial.name = \"Default Material\";\n\t\tthis.defaultMaterial.shadingModel = SPECULAR_BLINN;\n\t}\n\n\tdestroy() {\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.root = null;\n\t\tthis.defaultMaterial.destroy();\n\t\tthis.defaultMaterial = null;\n\t\tthis.off();\n\t}\n\n\tget fog() {\n\t\treturn this._fog;\n\t}\n\n\tset fog(type) {\n\t\tif (type !== this._fog) {\n\t\t\tthis._fog = type;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget gammaCorrection() {\n\t\treturn this._gammaCorrection;\n\t}\n\n\tset gammaCorrection(value) {\n\t\tif (value !== this._gammaCorrection) {\n\t\t\tthis._gammaCorrection = value;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget toneMapping() {\n\t\treturn this._toneMapping;\n\t}\n\n\tset toneMapping(value) {\n\t\tif (value !== this._toneMapping) {\n\t\t\tthis._toneMapping = value;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget skybox() {\n\t\treturn this._skyboxCubeMap;\n\t}\n\n\tset skybox(value) {\n\t\tthis._skyboxCubeMap = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxIntensity() {\n\t\treturn this._skyboxIntensity;\n\t}\n\n\tset skyboxIntensity(value) {\n\t\tthis._skyboxIntensity = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxRotation() {\n\t\treturn this._skyboxRotation;\n\t}\n\n\tset skyboxRotation(value) {\n\t\tif (!this._skyboxRotation.equals(value)) {\n\t\t\tthis._skyboxRotation.copy(value);\n\n\t\t\tthis._resetSkyboxModel();\n\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget skyboxMip() {\n\t\treturn this._skyboxMip;\n\t}\n\n\tset skyboxMip(value) {\n\t\tthis._skyboxMip = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered128() {\n\t\treturn this._skyboxPrefiltered[0];\n\t}\n\n\tset skyboxPrefiltered128(value) {\n\t\tif (this._skyboxPrefiltered[0] === value) return;\n\t\tthis._skyboxPrefiltered[0] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered64() {\n\t\treturn this._skyboxPrefiltered[1];\n\t}\n\n\tset skyboxPrefiltered64(value) {\n\t\tif (this._skyboxPrefiltered[1] === value) return;\n\t\tthis._skyboxPrefiltered[1] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered32() {\n\t\treturn this._skyboxPrefiltered[2];\n\t}\n\n\tset skyboxPrefiltered32(value) {\n\t\tif (this._skyboxPrefiltered[2] === value) return;\n\t\tthis._skyboxPrefiltered[2] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered16() {\n\t\treturn this._skyboxPrefiltered[3];\n\t}\n\n\tset skyboxPrefiltered16(value) {\n\t\tif (this._skyboxPrefiltered[3] === value) return;\n\t\tthis._skyboxPrefiltered[3] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered8() {\n\t\treturn this._skyboxPrefiltered[4];\n\t}\n\n\tset skyboxPrefiltered8(value) {\n\t\tif (this._skyboxPrefiltered[4] === value) return;\n\t\tthis._skyboxPrefiltered[4] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered4() {\n\t\treturn this._skyboxPrefiltered[5];\n\t}\n\n\tset skyboxPrefiltered4(value) {\n\t\tif (this._skyboxPrefiltered[5] === value) return;\n\t\tthis._skyboxPrefiltered[5] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget drawCalls() {\n\t\tvar drawCalls = this.layers._meshInstances;\n\n\t\tif (!drawCalls.length) {\n\t\t\tthis.layers._update();\n\n\t\t\tdrawCalls = this.layers._meshInstances;\n\t\t}\n\n\t\treturn drawCalls;\n\t}\n\n\tset drawCalls(value) {}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(layers) {\n\t\tvar prev = this._layers;\n\t\tthis._layers = layers;\n\t\tthis.fire(\"set:layers\", prev, layers);\n\t}\n\n\tget defaultMaterial() {\n\t\treturn Material.defaultMaterial;\n\t}\n\n\tset defaultMaterial(value) {\n\t\tMaterial.defaultMaterial = value;\n\t}\n\n\tapplySettings(settings) {\n\t\tthis._gravity.set(settings.physics.gravity[0], settings.physics.gravity[1], settings.physics.gravity[2]);\n\n\t\tthis.ambientLight.set(settings.render.global_ambient[0], settings.render.global_ambient[1], settings.render.global_ambient[2]);\n\t\tthis._fog = settings.render.fog;\n\t\tthis.fogColor.set(settings.render.fog_color[0], settings.render.fog_color[1], settings.render.fog_color[2]);\n\t\tthis.fogStart = settings.render.fog_start;\n\t\tthis.fogEnd = settings.render.fog_end;\n\t\tthis.fogDensity = settings.render.fog_density;\n\t\tthis._gammaCorrection = settings.render.gamma_correction;\n\t\tthis._toneMapping = settings.render.tonemapping;\n\t\tthis.lightmapSizeMultiplier = settings.render.lightmapSizeMultiplier;\n\t\tthis.lightmapMaxResolution = settings.render.lightmapMaxResolution;\n\t\tthis.lightmapMode = settings.render.lightmapMode;\n\t\tthis.exposure = settings.render.exposure;\n\t\tthis._skyboxIntensity = settings.render.skyboxIntensity === undefined ? 1 : settings.render.skyboxIntensity;\n\t\tthis._skyboxMip = settings.render.skyboxMip === undefined ? 0 : settings.render.skyboxMip;\n\n\t\tif (settings.render.skyboxRotation) {\n\t\t\tthis._skyboxRotation.setFromEulerAngles(settings.render.skyboxRotation[0], settings.render.skyboxRotation[1], settings.render.skyboxRotation[2]);\n\t\t}\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\t_updateSkybox(device) {\n\t\tif (!this.skyboxModel) {\n\t\t\tvar skyboxMapping = [0, 1, 3, 4, 5, 6];\n\t\t\tvar usedTex = this._skyboxMip ? this._skyboxPrefiltered[skyboxMapping[this._skyboxMip]] || this._skyboxPrefiltered[0] || this._skyboxCubeMap : this._skyboxCubeMap || this._skyboxPrefiltered[0];\n\n\t\t\tif (!usedTex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (usedTex._isRenderTarget) {\n\t\t\t\tthis._skyboxIsRenderTarget = true;\n\t\t\t} else {\n\t\t\t\tthis._skyboxIsRenderTarget = false;\n\t\t\t}\n\n\t\t\tvar material = new Material();\n\t\t\tvar scene = this;\n\n\t\t\tmaterial.updateShader = function (dev, sc, defs, staticLightList, pass) {\n\t\t\t\tvar library = device.getProgramLibrary();\n\t\t\t\tvar shader = library.getProgram('skybox', {\n\t\t\t\t\trgbm: usedTex.type === TEXTURETYPE_RGBM,\n\t\t\t\t\thdr: usedTex.type === TEXTURETYPE_RGBM || usedTex.format === PIXELFORMAT_RGBA32F,\n\t\t\t\t\tuseIntensity: scene.skyboxIntensity !== 1,\n\t\t\t\t\tuseCubeMapRotation: !scene.skyboxRotation.equals(Quat.IDENTITY),\n\t\t\t\t\tuseRightHandedCubeMap: scene._skyboxIsRenderTarget,\n\t\t\t\t\tmip: usedTex.fixCubemapSeams ? scene.skyboxMip : 0,\n\t\t\t\t\tfixSeams: usedTex.fixCubemapSeams,\n\t\t\t\t\tgamma: pass === SHADER_FORWARDHDR ? scene.gammaCorrection ? GAMMA_SRGBHDR : GAMMA_NONE : scene.gammaCorrection,\n\t\t\t\t\ttoneMapping: pass === SHADER_FORWARDHDR ? TONEMAP_LINEAR : scene.toneMapping\n\t\t\t\t});\n\t\t\t\tthis.shader = shader;\n\t\t\t};\n\n\t\t\tmaterial.updateShader();\n\t\t\tmaterial.setParameter(\"texture_cubeMap\", usedTex);\n\n\t\t\tif (!this.skyboxRotation.equals(Quat.IDENTITY)) {\n\t\t\t\tif (!this._skyboxRotationMat4) this._skyboxRotationMat4 = new Mat4();\n\t\t\t\tif (!this._skyboxRotationMat3) this._skyboxRotationMat3 = new Mat3();\n\n\t\t\t\tthis._skyboxRotationMat4.setTRS(Vec3.ZERO, this._skyboxRotation, Vec3.ONE);\n\n\t\t\t\tthis._skyboxRotationMat4.invertTo3x3(this._skyboxRotationMat3);\n\n\t\t\t\tmaterial.setParameter(\"cubeMapRotationMatrix\", this._skyboxRotationMat3.data);\n\t\t\t}\n\n\t\t\tmaterial.cull = CULLFACE_FRONT;\n\t\t\tmaterial.depthWrite = false;\n\t\t\tvar skyLayer = this.layers.getLayerById(LAYERID_SKYBOX);\n\n\t\t\tif (skyLayer) {\n\t\t\t\tvar node = new GraphNode(\"Skybox\");\n\t\t\t\tvar mesh = createBox(device);\n\t\t\t\tvar meshInstance = new MeshInstance(mesh, material, node);\n\t\t\t\tmeshInstance.cull = false;\n\t\t\t\tmeshInstance._noDepthDrawGl1 = true;\n\t\t\t\tvar model = new Model();\n\t\t\t\tmodel.graph = node;\n\t\t\t\tmodel.meshInstances = [meshInstance];\n\t\t\t\tthis.skyboxModel = model;\n\t\t\t\tskyLayer.addMeshInstances(model.meshInstances);\n\t\t\t\tthis.skyLayer = skyLayer;\n\t\t\t\tthis.fire(\"set:skybox\", usedTex);\n\t\t\t}\n\t\t}\n\t}\n\n\t_resetSkyboxModel() {\n\t\tif (this.skyboxModel) {\n\t\t\tthis.skyLayer.removeMeshInstances(this.skyboxModel.meshInstances);\n\t\t\tthis.skyboxModel.destroy();\n\t\t}\n\n\t\tthis.skyboxModel = null;\n\t\tthis.updateSkybox = true;\n\t}\n\n\tsetSkybox(cubemaps) {\n\t\tvar i;\n\t\tif (!cubemaps) cubemaps = [null, null, null, null, null, null, null];\n\t\tvar different = false;\n\t\tif (this._skyboxCubeMap !== cubemaps[0]) different = true;\n\n\t\tif (!different) {\n\t\t\tfor (i = 0; i < 6 && !different; i++) {\n\t\t\t\tif (this._skyboxPrefiltered[i] !== cubemaps[i + 1]) different = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!different) return;\n\n\t\tfor (i = 0; i < 6; i++) this._skyboxPrefiltered[i] = cubemaps[i + 1];\n\n\t\tthis.skybox = cubemaps[0];\n\t}\n\n\taddModel(model) {\n\t\tif (this.containsModel(model)) return;\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.addMeshInstances(model.meshInstances);\n\n\t\tthis._models.push(model);\n\t}\n\n\taddShadowCaster(model) {\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.addShadowCasters(model.meshInstances);\n\t}\n\n\tremoveModel(model) {\n\t\tvar index = this._models.indexOf(model);\n\n\t\tif (index !== -1) {\n\t\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\t\tif (!layer) return;\n\t\t\tlayer.removeMeshInstances(model.meshInstances);\n\n\t\t\tthis._models.splice(index, 1);\n\t\t}\n\t}\n\n\tremoveShadowCasters(model) {\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.removeShadowCasters(model.meshInstances);\n\t}\n\n\tcontainsModel(model) {\n\t\treturn this._models.indexOf(model) >= 0;\n\t}\n\n\tgetModels(model) {\n\t\treturn this._models;\n\t}\n\n}\n\nfunction hasAudioContext() {\n\treturn !!(typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined');\n}\n\nclass Channel {\n\tconstructor(manager, sound, options = {}) {\n\t\tthis.volume = options.volume === undefined ? 1 : options.volume;\n\t\tthis.loop = options.loop === undefined ? false : options.loop;\n\t\tthis.pitch = options.pitch === undefined ? 1 : options.pitch;\n\t\tthis.sound = sound;\n\t\tthis.paused = false;\n\t\tthis.suspended = false;\n\t\tthis.manager = manager;\n\t\tthis.source = null;\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis.startTime = 0;\n\t\t\tthis.startOffset = 0;\n\t\t\tconst context = manager.context;\n\t\t\tthis.gain = context.createGain();\n\t\t} else if (sound.audio) {\n\t\t\tthis.source = sound.audio.cloneNode(false);\n\t\t\tthis.source.pause();\n\t\t}\n\t}\n\n\tgetVolume() {\n\t\treturn this.volume;\n\t}\n\n\tgetLoop() {\n\t\treturn this.loop;\n\t}\n\n\tsetLoop(loop) {\n\t\tthis.loop = loop;\n\n\t\tif (this.source) {\n\t\t\tthis.source.loop = loop;\n\t\t}\n\t}\n\n\tgetPitch() {\n\t\treturn this.pitch;\n\t}\n\n\tonManagerVolumeChange() {\n\t\tthis.setVolume(this.getVolume());\n\t}\n\n\tonManagerSuspend() {\n\t\tif (this.isPlaying() && !this.suspended) {\n\t\t\tthis.suspended = true;\n\t\t\tthis.pause();\n\t\t}\n\t}\n\n\tonManagerResume() {\n\t\tif (this.suspended) {\n\t\t\tthis.suspended = false;\n\t\t\tthis.unpause();\n\t\t}\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(Channel.prototype, {\n\t\tplay: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthrow new Error('Call stop() before calling play()');\n\t\t\t}\n\n\t\t\tthis._createSource();\n\n\t\t\tif (!this.source) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startTime = this.manager.context.currentTime;\n\t\t\tthis.source.start(0, this.startOffset % this.source.buffer.duration);\n\t\t\tthis.setVolume(this.volume);\n\t\t\tthis.setLoop(this.loop);\n\t\t\tthis.setPitch(this.pitch);\n\t\t\tthis.manager.on('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.on('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.on('resume', this.onManagerResume, this);\n\t\t\tif (this.manager.suspended) this.onManagerSuspend();\n\t\t},\n\t\tpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.startOffset += this.manager.context.currentTime - this.startTime;\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\t\t},\n\t\tunpause: function () {\n\t\t\tif (this.source || !this.paused) {\n\t\t\t\tconsole.warn('Call pause() before unpausing.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._createSource();\n\n\t\t\tif (!this.source) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startTime = this.manager.context.currentTime;\n\t\t\tthis.source.start(0, this.startOffset % this.source.buffer.duration);\n\t\t\tthis.setVolume(this.volume);\n\t\t\tthis.setLoop(this.loop);\n\t\t\tthis.setPitch(this.pitch);\n\t\t\tthis.paused = false;\n\t\t},\n\t\tstop: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\n\t\t\tthis.manager.off('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.off('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.off('resume', this.onManagerResume, this);\n\t\t},\n\t\tsetVolume: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis.volume = volume;\n\n\t\t\tif (this.gain) {\n\t\t\t\tthis.gain.gain.value = volume * this.manager.volume;\n\t\t\t}\n\t\t},\n\t\tsetPitch: function (pitch) {\n\t\t\tthis.pitch = pitch;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate.value = pitch;\n\t\t\t}\n\t\t},\n\t\tisPlaying: function () {\n\t\t\treturn !this.paused && this.source.playbackState === this.source.PLAYING_STATE;\n\t\t},\n\t\tgetDuration: function () {\n\t\t\treturn this.source ? this.source.buffer.duration : 0;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tconst context = this.manager.context;\n\n\t\t\tif (this.sound.buffer) {\n\t\t\t\tthis.source = context.createBufferSource();\n\t\t\t\tthis.source.buffer = this.sound.buffer;\n\t\t\t\tthis.source.connect(this.gain);\n\t\t\t\tthis.gain.connect(context.destination);\n\n\t\t\t\tif (!this.loop) {\n\t\t\t\t\tthis.source.onended = this.pause.bind(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tObject.assign(Channel.prototype, {\n\t\tplay: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.setVolume(this.volume);\n\t\t\t\tthis.setLoop(this.loop);\n\t\t\t\tthis.setPitch(this.pitch);\n\t\t\t\tthis.source.play();\n\t\t\t}\n\n\t\t\tthis.manager.on('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.on('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.on('resume', this.onManagerResume, this);\n\t\t\tif (this.manager.suspended) this.onManagerSuspend();\n\t\t},\n\t\tpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\t\t},\n\t\tunpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.source.play();\n\t\t\t}\n\t\t},\n\t\tstop: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\n\t\t\tthis.manager.off('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.off('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.off('resume', this.onManagerResume, this);\n\t\t},\n\t\tsetVolume: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis.volume = volume;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.volume = volume * this.manager.volume;\n\t\t\t}\n\t\t},\n\t\tsetPitch: function (pitch) {\n\t\t\tthis.pitch = pitch;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate = pitch;\n\t\t\t}\n\t\t},\n\t\tgetDuration: function () {\n\t\t\treturn this.source && !isNaN(this.source.duration) ? this.source.duration : 0;\n\t\t},\n\t\tisPlaying: function () {\n\t\t\treturn !this.source.paused;\n\t\t}\n\t});\n}\n\nconst DISTANCE_LINEAR = 'linear';\nconst DISTANCE_INVERSE = 'inverse';\nconst DISTANCE_EXPONENTIAL = 'exponential';\n\nconst MAX_DISTANCE$1 = 10000;\n\nclass Channel3d extends Channel {\n\tconstructor(manager, sound, options) {\n\t\tsuper(manager, sound, options);\n\t\tthis.position = new Vec3();\n\t\tthis.velocity = new Vec3();\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis.panner = manager.context.createPanner();\n\t\t} else {\n\t\t\tthis.maxDistance = MAX_DISTANCE$1;\n\t\t\tthis.minDistance = 1;\n\t\t\tthis.rollOffFactor = 1;\n\t\t\tthis.distanceModel = DISTANCE_INVERSE;\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tgetVelocity() {\n\t\treturn this.velocity;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(Channel3d.prototype, {\n\t\tsetPosition: function (position) {\n\t\t\tthis.position.copy(position);\n\t\t\tthis.panner.setPosition(position.x, position.y, position.z);\n\t\t},\n\t\tsetVelocity: function (velocity) {\n\t\t\tthis.velocity.copy(velocity);\n\t\t\tthis.panner.setVelocity(velocity.x, velocity.y, velocity.z);\n\t\t},\n\t\tgetMaxDistance: function () {\n\t\t\treturn this.panner.maxDistance;\n\t\t},\n\t\tsetMaxDistance: function (max) {\n\t\t\tthis.panner.maxDistance = max;\n\t\t},\n\t\tgetMinDistance: function () {\n\t\t\treturn this.panner.refDistance;\n\t\t},\n\t\tsetMinDistance: function (min) {\n\t\t\tthis.panner.refDistance = min;\n\t\t},\n\t\tgetRollOffFactor: function () {\n\t\t\treturn this.panner.rolloffFactor;\n\t\t},\n\t\tsetRollOffFactor: function (factor) {\n\t\t\tthis.panner.rolloffFactor = factor;\n\t\t},\n\t\tgetDistanceModel: function () {\n\t\t\treturn this.pannel.distanceModel;\n\t\t},\n\t\tsetDistanceModel: function (distanceModel) {\n\t\t\tthis.panner.distanceModel = distanceModel;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tconst context = this.manager.context;\n\t\t\tthis.source = context.createBufferSource();\n\t\t\tthis.source.buffer = this.sound.buffer;\n\t\t\tthis.source.connect(this.panner);\n\t\t\tthis.panner.connect(this.gain);\n\t\t\tthis.gain.connect(context.destination);\n\n\t\t\tif (!this.loop) {\n\t\t\t\tthis.source.onended = this.pause.bind(this);\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tlet offset = new Vec3();\n\n\tconst fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rolloffFactor, distanceModel) {\n\t\toffset = offset.sub2(posOne, posTwo);\n\t\tconst distance = offset.length();\n\n\t\tif (distance < refDistance) {\n\t\t\treturn 1;\n\t\t} else if (distance > maxDistance) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet result = 0;\n\n\t\tif (distanceModel === DISTANCE_LINEAR) {\n\t\t\tresult = 1 - rolloffFactor * (distance - refDistance) / (maxDistance - refDistance);\n\t\t} else if (distanceModel === DISTANCE_INVERSE) {\n\t\t\tresult = refDistance / (refDistance + rolloffFactor * (distance - refDistance));\n\t\t} else if (distanceModel === DISTANCE_EXPONENTIAL) {\n\t\t\tresult = Math.pow(distance / refDistance, -rolloffFactor);\n\t\t}\n\n\t\treturn math.clamp(result, 0, 1);\n\t};\n\n\tObject.assign(Channel3d.prototype, {\n\t\tsetPosition: function (position) {\n\t\t\tthis.position.copy(position);\n\n\t\t\tif (this.source) {\n\t\t\t\tconst listener = this.manager.listener;\n\t\t\t\tconst lpos = listener.getPosition();\n\t\t\t\tconst factor = fallOff(lpos, this.position, this.minDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);\n\t\t\t\tconst v = this.getVolume();\n\t\t\t\tthis.source.volume = v * factor;\n\t\t\t}\n\t\t},\n\t\tsetVelocity: function (velocity) {\n\t\t\tthis.velocity.copy(velocity);\n\t\t},\n\t\tgetMaxDistance: function () {\n\t\t\treturn this.maxDistance;\n\t\t},\n\t\tsetMaxDistance: function (max) {\n\t\t\tthis.maxDistance = max;\n\t\t},\n\t\tgetMinDistance: function () {\n\t\t\treturn this.minDistance;\n\t\t},\n\t\tsetMinDistance: function (min) {\n\t\t\tthis.minDistance = min;\n\t\t},\n\t\tgetRollOffFactor: function () {\n\t\t\treturn this.rollOffFactor;\n\t\t},\n\t\tsetRollOffFactor: function (factor) {\n\t\t\tthis.rollOffFactor = factor;\n\t\t},\n\t\tgetDistanceModel: function () {\n\t\t\treturn this.distanceModel;\n\t\t},\n\t\tsetDistanceModel: function (distanceModel) {\n\t\t\tthis.distanceModel = distanceModel;\n\t\t}\n\t});\n}\n\nclass Listener {\n\tconstructor(manager) {\n\t\tthis._manager = manager;\n\t\tthis.position = new Vec3();\n\t\tthis.velocity = new Vec3();\n\t\tthis.orientation = new Mat4();\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tsetPosition(position) {\n\t\tthis.position.copy(position);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setPosition(position.x, position.y, position.z);\n\t\t}\n\t}\n\n\tgetVelocity() {\n\t\treturn this.velocity;\n\t}\n\n\tsetVelocity(velocity) {\n\t\tthis.velocity.copy(velocity);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setPosition(velocity.x, velocity.y, velocity.z);\n\t\t}\n\t}\n\n\tsetOrientation(orientation) {\n\t\tthis.orientation.copy(orientation);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setOrientation(-orientation.data[8], -orientation.data[9], -orientation.data[10], orientation.data[4], orientation.data[5], orientation.data[6]);\n\t\t}\n\t}\n\n\tgetOrientation() {\n\t\treturn this.orientation;\n\t}\n\n\tget listener() {\n\t\tconst context = this._manager.context;\n\t\treturn context ? context.listener : null;\n\t}\n\n}\n\nclass SoundManager extends EventHandler {\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis._context = null;\n\t\tthis._forceWebAudioApi = options.forceWebAudioApi;\n\t\tthis._resumeContext = null;\n\t\tthis._unlock = null;\n\n\t\tif (hasAudioContext() || this._forceWebAudioApi) {\n\t\t\tthis._resumeContext = () => {\n\t\t\t\twindow.removeEventListener('mousedown', this._resumeContext);\n\t\t\t\twindow.removeEventListener('touchend', this._resumeContext);\n\n\t\t\t\tif (this.context) {\n\t\t\t\t\tthis.context.resume();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.addEventListener('mousedown', this._resumeContext);\n\t\t\twindow.addEventListener('touchend', this._resumeContext);\n\n\t\t\tif (platform.ios) {\n\t\t\t\tthis._unlock = () => {\n\t\t\t\t\twindow.removeEventListener('touchend', this._unlock);\n\t\t\t\t\tconst context = this.context;\n\n\t\t\t\t\tif (context) {\n\t\t\t\t\t\tvar buffer = context.createBuffer(1, 1, 44100);\n\t\t\t\t\t\tvar source = context.createBufferSource();\n\t\t\t\t\t\tsource.buffer = buffer;\n\t\t\t\t\t\tsource.connect(context.destination);\n\t\t\t\t\t\tsource.start(0);\n\t\t\t\t\t\tsource.disconnect();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twindow.addEventListener('touchend', this._unlock);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No support for 3D audio found');\n\t\t}\n\n\t\tthis.listener = new Listener(this);\n\t\tthis._volume = 1;\n\t\tthis.suspended = false;\n\t}\n\n\tsuspend() {\n\t\tthis.suspended = true;\n\t\tthis.fire('suspend');\n\t}\n\n\tresume() {\n\t\tthis.suspended = false;\n\t\tthis.fire('resume');\n\t}\n\n\tdestroy() {\n\t\tif (this._resumeContext) {\n\t\t\twindow.removeEventListener('mousedown', this._resumeContext);\n\t\t\twindow.removeEventListener('touchend', this._resumeContext);\n\t\t}\n\n\t\tif (this._unlock) {\n\t\t\twindow.removeEventListener('touchend', this._unlock);\n\t\t}\n\n\t\tthis.fire('destroy');\n\n\t\tif (this._context && this._context.close) {\n\t\t\tthis._context.close();\n\n\t\t\tthis._context = null;\n\t\t}\n\t}\n\n\tplaySound(sound, options) {\n\t\toptions = options || {};\n\t\tvar channel = null;\n\n\t\tif (Channel) {\n\t\t\tchannel = new Channel(this, sound, options);\n\t\t\tchannel.play();\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\tplaySound3d(sound, position, options) {\n\t\toptions = options || {};\n\t\tvar channel = null;\n\n\t\tif (Channel3d) {\n\t\t\tchannel = new Channel3d(this, sound, options);\n\t\t\tchannel.setPosition(position);\n\n\t\t\tif (options.volume) {\n\t\t\t\tchannel.setVolume(options.volume);\n\t\t\t}\n\n\t\t\tif (options.loop) {\n\t\t\t\tchannel.setLoop(options.loop);\n\t\t\t}\n\n\t\t\tif (options.maxDistance) {\n\t\t\t\tchannel.setMaxDistance(options.maxDistance);\n\t\t\t}\n\n\t\t\tif (options.minDistance) {\n\t\t\t\tchannel.setMinDistance(options.minDistance);\n\t\t\t}\n\n\t\t\tif (options.rollOffFactor) {\n\t\t\t\tchannel.setRollOffFactor(options.rollOffFactor);\n\t\t\t}\n\n\t\t\tif (options.distanceModel) {\n\t\t\t\tchannel.setDistanceModel(options.distanceModel);\n\t\t\t}\n\n\t\t\tchannel.play();\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tset volume(volume) {\n\t\tvolume = math.clamp(volume, 0, 1);\n\t\tthis._volume = volume;\n\t\tthis.fire('volumechange', volume);\n\t}\n\n\tget context() {\n\t\tif (!this._context) {\n\t\t\tif (hasAudioContext() || this._forceWebAudioApi) {\n\t\t\t\tif (typeof AudioContext !== 'undefined') {\n\t\t\t\t\tthis._context = new AudioContext();\n\t\t\t\t} else if (typeof webkitAudioContext !== 'undefined') {\n\t\t\t\t\tthis._context = new webkitAudioContext();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._context;\n\t}\n\n}\n\nclass Key {\n\tconstructor(time, position, rotation, scale) {\n\t\tthis.time = time;\n\t\tthis.position = position;\n\t\tthis.rotation = rotation;\n\t\tthis.scale = scale;\n\t}\n\n}\n\nclass Node {\n\tconstructor() {\n\t\tthis._name = \"\";\n\t\tthis._keys = [];\n\t}\n\n}\n\nclass Animation {\n\tconstructor() {\n\t\tthis.name = '';\n\t\tthis.duration = 0;\n\t\tthis._nodes = [];\n\t\tthis._nodeDict = {};\n\t}\n\n\tgetNode(name) {\n\t\treturn this._nodeDict[name];\n\t}\n\n\tget nodes() {\n\t\treturn this._nodes;\n\t}\n\n\taddNode(node) {\n\t\tthis._nodes.push(node);\n\n\t\tthis._nodeDict[node._name] = node;\n\t}\n\n}\n\nclass Skin {\n\tconstructor(graphicsDevice, ibp, boneNames) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.inverseBindPose = ibp;\n\t\tthis.boneNames = boneNames;\n\t}\n\n}\n\nclass Render extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._meshes = null;\n\t}\n\n\tdestroy() {\n\t\tthis.meshes = null;\n\t}\n\n\tdecRefMeshes() {\n\t\tif (this._meshes) {\n\t\t\tconst count = this._meshes.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst mesh = this._meshes[i];\n\n\t\t\t\tif (mesh) {\n\t\t\t\t\tmesh.decRefCount();\n\n\t\t\t\t\tif (mesh.getRefCount() < 1) {\n\t\t\t\t\t\tmesh.destroy();\n\t\t\t\t\t\tthis._meshes[i] = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tincRefMeshes() {\n\t\tif (this._meshes) {\n\t\t\tconst count = this._meshes.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tif (this._meshes[i]) {\n\t\t\t\t\tthis._meshes[i].incRefCount();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshes() {\n\t\treturn this._meshes;\n\t}\n\n\tset meshes(value) {\n\t\tthis.decRefMeshes();\n\t\tthis._meshes = value;\n\t\tthis.incRefMeshes();\n\t\tthis.fire('set:meshes', value);\n\t}\n\n}\n\nclass AnimCurve {\n\tconstructor(paths, input, output, interpolation) {\n\t\tthis._paths = paths;\n\t\tthis._input = input;\n\t\tthis._output = output;\n\t\tthis._interpolation = interpolation;\n\t}\n\n\tget paths() {\n\t\treturn this._paths;\n\t}\n\n\tget input() {\n\t\treturn this._input;\n\t}\n\n\tget output() {\n\t\treturn this._output;\n\t}\n\n\tget interpolation() {\n\t\treturn this._interpolation;\n\t}\n\n}\n\nclass AnimData {\n\tconstructor(components, data) {\n\t\tthis._components = components;\n\t\tthis._data = data;\n\t}\n\n\tget components() {\n\t\treturn this._components;\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n}\n\nclass AnimEvents {\n\tconstructor(events) {\n\t\tthis._events = [...events];\n\n\t\tthis._events.sort((a, b) => a.time - b.time);\n\t}\n\n\tget events() {\n\t\treturn this._events;\n\t}\n\n}\n\nclass AnimTrack {\n\tconstructor(name, duration, inputs, outputs, curves, animEvents = new AnimEvents([])) {\n\t\tthis._name = name;\n\t\tthis._duration = duration;\n\t\tthis._inputs = inputs;\n\t\tthis._outputs = outputs;\n\t\tthis._curves = curves;\n\t\tthis._animEvents = animEvents;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget duration() {\n\t\treturn this._duration;\n\t}\n\n\tget inputs() {\n\t\treturn this._inputs;\n\t}\n\n\tget outputs() {\n\t\treturn this._outputs;\n\t}\n\n\tget curves() {\n\t\treturn this._curves;\n\t}\n\n\tget events() {\n\t\treturn this._animEvents.events;\n\t}\n\n\tset events(animEvents) {\n\t\tthis._animEvents = animEvents;\n\t}\n\n\teval(time, snapshot) {\n\t\tsnapshot._time = time;\n\t\tvar inputs = this._inputs;\n\t\tvar outputs = this._outputs;\n\t\tvar curves = this._curves;\n\t\tvar cache = snapshot._cache;\n\t\tvar results = snapshot._results;\n\t\tvar i;\n\n\t\tfor (i = 0; i < inputs.length; ++i) {\n\t\t\tcache[i].update(time, inputs[i]._data);\n\t\t}\n\n\t\tfor (i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar output = outputs[curve._output];\n\t\t\tvar result = results[i];\n\n\t\t\tcache[curve._input].eval(result, curve._interpolation, output);\n\t\t}\n\t}\n\n}\n\nclass AnimBinder {\n\tstatic joinPath(pathSegments, character) {\n\t\tcharacter = character || '.';\n\n\t\tvar escape = function escape(string) {\n\t\t\treturn string.replace(/\\\\/g, '\\\\\\\\').replace(new RegExp('\\\\' + character, 'g'), '\\\\' + character);\n\t\t};\n\n\t\treturn pathSegments.map(escape).join(character);\n\t}\n\n\tstatic splitPath(path, character) {\n\t\tcharacter = character || '.';\n\t\tvar result = [];\n\t\tvar curr = \"\";\n\t\tvar i = 0;\n\n\t\twhile (i < path.length) {\n\t\t\tvar c = path[i++];\n\n\t\t\tif (c === '\\\\' && i < path.length) {\n\t\t\t\tc = path[i++];\n\n\t\t\t\tif (c === '\\\\' || c === character) {\n\t\t\t\t\tcurr += c;\n\t\t\t\t} else {\n\t\t\t\t\tcurr += '\\\\' + c;\n\t\t\t\t}\n\t\t\t} else if (c === character) {\n\t\t\t\tresult.push(curr);\n\t\t\t\tcurr = '';\n\t\t\t} else {\n\t\t\t\tcurr += c;\n\t\t\t}\n\t\t}\n\n\t\tif (curr.length > 0) {\n\t\t\tresult.push(curr);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic encode(entityPath, component, propertyPath) {\n\t\treturn `${Array.isArray(entityPath) ? entityPath.join('/') : entityPath}/${component}/${Array.isArray(propertyPath) ? propertyPath.join('/') : propertyPath}`;\n\t}\n\n\tresolve(path) {\n\t\treturn null;\n\t}\n\n\tunresolve(path) {}\n\n\tupdate(deltaTime) {}\n\n}\n\nconst INTERPOLATION_STEP = 0;\nconst INTERPOLATION_LINEAR = 1;\nconst INTERPOLATION_CUBIC = 2;\n\nconst DEFAULT_LOCALE = 'en-US';\nconst DEFAULT_LOCALE_FALLBACKS = {\n\t'en': 'en-US',\n\t'es': 'en-ES',\n\t'zh': 'zh-CN',\n\t'zh-HK': 'zh-TW',\n\t'zh-TW': 'zh-HK',\n\t'zh-MO': 'zh-HK',\n\t'fr': 'fr-FR',\n\t'de': 'de-DE',\n\t'it': 'it-IT',\n\t'ru': 'ru-RU',\n\t'ja': 'ja-JP'\n};\n\nvar PLURALS = {};\n\nfunction definePluralFn(locales, fn) {\n\tfor (var i = 0, len = locales.length; i < len; i++) {\n\t\tPLURALS[locales[i]] = fn;\n\t}\n}\n\nfunction getLang(locale) {\n\tvar idx = locale.indexOf('-');\n\n\tif (idx !== -1) {\n\t\treturn locale.substring(0, idx);\n\t}\n\n\treturn locale;\n}\n\nfunction replaceLang(locale, desiredLang) {\n\tvar idx = locale.indexOf('-');\n\n\tif (idx !== -1) {\n\t\treturn desiredLang + locale.substring(idx);\n\t}\n\n\treturn desiredLang;\n}\n\nfunction findAvailableLocale(desiredLocale, availableLocales) {\n\tif (availableLocales[desiredLocale]) {\n\t\treturn desiredLocale;\n\t}\n\n\tvar fallback = DEFAULT_LOCALE_FALLBACKS[desiredLocale];\n\n\tif (fallback && availableLocales[fallback]) {\n\t\treturn fallback;\n\t}\n\n\tvar lang = getLang(desiredLocale);\n\tfallback = DEFAULT_LOCALE_FALLBACKS[lang];\n\n\tif (availableLocales[fallback]) {\n\t\treturn fallback;\n\t}\n\n\tif (availableLocales[lang]) {\n\t\treturn lang;\n\t}\n\n\treturn DEFAULT_LOCALE;\n}\n\ndefinePluralFn(['ja', 'ko', 'th', 'vi', 'zh', 'id'], function (n) {\n\treturn 0;\n});\ndefinePluralFn(['fa', 'hi'], function (n) {\n\tif (n >= 0 && n <= 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['fr', 'pt'], function (n) {\n\tif (n >= 0 && n < 2) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['da'], function (n) {\n\tif (n === 1 || !Number.isInteger(n) && n >= 0 && n <= 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['de', 'en', 'it', 'el', 'es', 'tr', 'fi', 'sv', 'nb', 'no', 'ur'], function (n) {\n\tif (n === 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['ru', 'uk'], function (n) {\n\tif (Number.isInteger(n)) {\n\t\tvar mod10 = n % 10;\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod10 === 1 && mod100 !== 11) {\n\t\t\treturn 0;\n\t\t} else if (mod10 >= 2 && mod10 <= 4 && (mod100 < 12 || mod100 > 14)) {\n\t\t\treturn 1;\n\t\t} else if (mod10 === 0 || mod10 >= 5 && mod10 <= 9 || mod100 >= 11 && mod100 <= 14) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\treturn 3;\n});\ndefinePluralFn(['pl'], function (n) {\n\tif (Number.isInteger(n)) {\n\t\tif (n === 1) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar mod10 = n % 10;\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod10 >= 2 && mod10 <= 4 && (mod100 < 12 || mod100 > 14)) {\n\t\t\treturn 1;\n\t\t} else if (mod10 >= 0 && mod10 <= 1 || mod10 >= 5 && mod10 <= 9 || mod100 >= 12 && mod100 <= 14) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\treturn 3;\n});\ndefinePluralFn(['ar'], function (n) {\n\tif (n === 0) {\n\t\treturn 0;\n\t} else if (n === 1) {\n\t\treturn 1;\n\t} else if (n === 2) {\n\t\treturn 2;\n\t}\n\n\tif (Number.isInteger(n)) {\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod100 >= 3 && mod100 <= 10) {\n\t\t\treturn 3;\n\t\t} else if (mod100 >= 11 && mod100 <= 99) {\n\t\t\treturn 4;\n\t\t}\n\t}\n\n\treturn 5;\n});\nvar DEFAULT_PLURAL_FN = PLURALS[getLang(DEFAULT_LOCALE)];\n\nfunction getPluralFn(lang) {\n\treturn PLURALS[lang] || DEFAULT_PLURAL_FN;\n}\n\nconst ABSOLUTE_URL = new RegExp('^' + '\\\\s*' + '(?:' + '(?:' + '[a-z]+[a-z0-9\\\\-\\\\+\\\\.]*' + ':' + ')?' + '//' + '|' + 'data:' + '|blob:' + ')', 'i');\nconst ASSET_ANIMATION = 'animation';\nconst ASSET_AUDIO = 'audio';\nconst ASSET_IMAGE = 'image';\nconst ASSET_JSON = 'json';\nconst ASSET_MODEL = 'model';\nconst ASSET_MATERIAL = 'material';\nconst ASSET_TEXT = 'text';\nconst ASSET_TEXTURE = 'texture';\nconst ASSET_CUBEMAP = 'cubemap';\nconst ASSET_SHADER = 'shader';\nconst ASSET_CSS = 'css';\nconst ASSET_HTML = 'html';\nconst ASSET_SCRIPT = 'script';\nconst ASSET_CONTAINER = 'container';\n\nconst properties$2 = [];\n\nclass AssetVariants {\n\tconstructor(asset) {\n\t\tthis.asset = asset;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < properties$2.length; i++) this[properties$2[i]] = null;\n\t}\n\n}\n\nfunction defineVariantProperty(name) {\n\tconst field = '_' + name;\n\tproperties$2.push(field);\n\tObject.defineProperty(AssetVariants.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[field] || null;\n\t\t},\n\t\tset: function (value) {\n\t\t\tconst fieldAsBool = !!this[field];\n\t\t\tconst valueAsBool = !!value;\n\n\t\t\tif (fieldAsBool !== valueAsBool || this[field] && value && this[field].hash !== value.hash) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis[field] = {\n\t\t\t\t\t\turl: value.url,\n\t\t\t\t\t\tfilename: value.filename,\n\t\t\t\t\t\tsize: value.size,\n\t\t\t\t\t\thash: value.hash,\n\t\t\t\t\t\topt: value.opt || 0\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis[field] = null;\n\t\t\t\t}\n\n\t\t\t\tif (this.asset.file) {\n\t\t\t\t\tthis.asset.fire('change', this.asset, 'file', this.asset._file, this.asset._file);\n\t\t\t\t\tthis.asset.reload();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineVariantProperty('dxt');\ndefineVariantProperty('pvr');\ndefineVariantProperty('etc1');\ndefineVariantProperty('etc2');\ndefineVariantProperty('basis');\n\nvar assetIdCounter = -1;\nconst VARIANT_SUPPORT = {\n\tpvr: 'extCompressedTexturePVRTC',\n\tdxt: 'extCompressedTextureS3TC',\n\tetc2: 'extCompressedTextureETC',\n\tetc1: 'extCompressedTextureETC1',\n\tbasis: 'canvas'\n};\nconst VARIANT_DEFAULT_PRIORITY = ['pvr', 'dxt', 'etc2', 'etc1', 'basis'];\n\nclass Asset extends EventHandler {\n\tconstructor(name, type, file, data, options) {\n\t\tsuper();\n\t\tthis._id = assetIdCounter--;\n\t\tthis.name = name || '';\n\t\tthis.type = type;\n\t\tthis.tags = new Tags(this);\n\t\tthis._preload = false;\n\t\tthis.variants = new AssetVariants(this);\n\t\tthis._file = null;\n\t\tthis._data = data || {};\n\t\tthis.options = options || {};\n\t\tthis._resources = [];\n\t\tthis._i18n = {};\n\t\tthis.loaded = false;\n\t\tthis.loading = false;\n\t\tthis.registry = null;\n\t\tif (file) this.file = file;\n\t}\n\n\tgetFileUrl() {\n\t\tvar file = this.getPreferredFile();\n\t\tif (!file || !file.url) return null;\n\t\tvar url = file.url;\n\t\tif (this.registry && this.registry.prefix && !ABSOLUTE_URL.test(url)) url = this.registry.prefix + url;\n\n\t\tif (this.type !== 'script' && file.hash) {\n\t\t\tvar separator = url.indexOf('?') !== -1 ? '&' : '?';\n\t\t\turl += separator + 't=' + file.hash;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tgetPreferredFile() {\n\t\tif (!this.file) return null;\n\n\t\tif (this.type === 'texture' || this.type === 'textureatlas' || this.type === 'bundle') {\n\t\t\tvar _this$registry, _this$registry$_loade;\n\n\t\t\tvar app = ((_this$registry = this.registry) == null ? void 0 : (_this$registry$_loade = _this$registry._loader) == null ? void 0 : _this$registry$_loade._app) || getApplication();\n\t\t\tvar device = app == null ? void 0 : app.graphicsDevice;\n\n\t\t\tif (device) {\n\t\t\t\tfor (var i = 0, len = VARIANT_DEFAULT_PRIORITY.length; i < len; i++) {\n\t\t\t\t\tvar variant = VARIANT_DEFAULT_PRIORITY[i];\n\t\t\t\t\tif (!device[VARIANT_SUPPORT[variant]]) continue;\n\n\t\t\t\t\tif (this.file.variants[variant]) {\n\t\t\t\t\t\treturn this.file.variants[variant];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (app.enableBundles) {\n\t\t\t\t\t\tvar bundles = app.bundles.listBundlesForAsset(this);\n\t\t\t\t\t\tif (!bundles) continue;\n\n\t\t\t\t\t\tfor (var j = 0, len2 = bundles.length; j < len2; j++) {\n\t\t\t\t\t\t\tif (bundles[j].file && bundles[j].file.variants && bundles[j].file.variants[variant]) {\n\t\t\t\t\t\t\t\treturn this.file;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.file;\n\t}\n\n\tgetAbsoluteUrl(relativePath) {\n\t\tif (relativePath.startsWith('blob:') || relativePath.startsWith('data:')) {\n\t\t\treturn relativePath;\n\t\t}\n\n\t\tvar base = path.getDirectory(this.file.url);\n\t\treturn path.join(base, relativePath);\n\t}\n\n\tgetLocalizedAssetId(locale) {\n\t\tlocale = findAvailableLocale(locale, this._i18n);\n\t\treturn this._i18n[locale] || null;\n\t}\n\n\taddLocalizedAssetId(locale, assetId) {\n\t\tthis._i18n[locale] = assetId;\n\t\tthis.fire('add:localized', locale, assetId);\n\t}\n\n\tremoveLocalizedAssetId(locale) {\n\t\tvar assetId = this._i18n[locale];\n\n\t\tif (assetId) {\n\t\t\tdelete this._i18n[locale];\n\t\t\tthis.fire('remove:localized', locale, assetId);\n\t\t}\n\t}\n\n\tready(callback, scope) {\n\t\tscope = scope || this;\n\n\t\tif (this.resource) {\n\t\t\tcallback.call(scope, this);\n\t\t} else {\n\t\t\tthis.once(\"load\", function (asset) {\n\t\t\t\tcallback.call(scope, asset);\n\t\t\t});\n\t\t}\n\t}\n\n\treload() {\n\t\tif (this.loaded) {\n\t\t\tthis.loaded = false;\n\t\t\tthis.registry.load(this);\n\t\t}\n\t}\n\n\tunload() {\n\t\tif (!this.loaded && this._resources.length === 0) return;\n\t\tthis.fire('unload', this);\n\t\tthis.registry.fire('unload:' + this.id, this);\n\t\tvar old = this._resources;\n\t\tthis.resources = [];\n\t\tthis.loaded = false;\n\n\t\tif (this.file) {\n\t\t\tthis.registry._loader.clearCache(this.getFileUrl(), this.type);\n\t\t}\n\n\t\tfor (var i = 0; i < old.length; ++i) {\n\t\t\tvar resource = old[i];\n\n\t\t\tif (resource && resource.destroy) {\n\t\t\t\tresource.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget file() {\n\t\treturn this._file;\n\t}\n\n\tset file(value) {\n\t\tvar key;\n\t\tvar valueAsBool = !!value;\n\t\tvar fileAsBool = !!this._file;\n\n\t\tif (valueAsBool !== fileAsBool || value && this._file && value.hash !== this._file) {\n\t\t\tif (value) {\n\t\t\t\tif (!this._file) this._file = {};\n\t\t\t\tthis._file.url = value.url;\n\t\t\t\tthis._file.filename = value.filename;\n\t\t\t\tthis._file.hash = value.hash;\n\t\t\t\tthis._file.size = value.size;\n\t\t\t\tthis._file.variants = this.variants;\n\t\t\t\tthis._file.contents = value.contents;\n\n\t\t\t\tif (value.hasOwnProperty('variants')) {\n\t\t\t\t\tthis.variants.clear();\n\n\t\t\t\t\tif (value.variants) {\n\t\t\t\t\t\tfor (key in value.variants) {\n\t\t\t\t\t\t\tif (!value.variants[key]) continue;\n\t\t\t\t\t\t\tthis.variants[key] = value.variants[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.fire('change', this, 'file', this._file, this._file);\n\t\t\t\tthis.reload();\n\t\t\t} else {\n\t\t\t\tthis._file = null;\n\t\t\t\tthis.variants.clear();\n\t\t\t}\n\t\t} else if (value && this._file && value.hasOwnProperty('variants')) {\n\t\t\tthis.variants.clear();\n\n\t\t\tif (value.variants) {\n\t\t\t\tfor (key in value.variants) {\n\t\t\t\t\tif (!value.variants[key]) continue;\n\t\t\t\t\tthis.variants[key] = value.variants[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\tset data(value) {\n\t\tvar old = this._data;\n\t\tthis._data = value;\n\n\t\tif (value !== old) {\n\t\t\tthis.fire('change', this, 'data', value, old);\n\t\t\tif (this.loaded) this.registry._loader.patch(this, this.registry);\n\t\t}\n\t}\n\n\tget resource() {\n\t\treturn this._resources[0];\n\t}\n\n\tset resource(value) {\n\t\tvar _old = this._resources[0];\n\t\tthis._resources[0] = value;\n\t\tthis.fire('change', this, 'resource', value, _old);\n\t}\n\n\tget resources() {\n\t\treturn this._resources;\n\t}\n\n\tset resources(value) {\n\t\tvar _old = this._resources;\n\t\tthis._resources = value;\n\t\tthis.fire('change', this, 'resources', value, _old);\n\t}\n\n\tget preload() {\n\t\treturn this._preload;\n\t}\n\n\tset preload(value) {\n\t\tvalue = !!value;\n\t\tif (this._preload === value) return;\n\t\tthis._preload = value;\n\t\tif (this._preload && !this.loaded && !this.loading && this.registry) this.registry.load(this);\n\t}\n\n\tget loadFaces() {\n\t\treturn this._loadFaces;\n\t}\n\n\tset loadFaces(value) {\n\t\tvalue = !!value;\n\n\t\tif (!this.hasOwnProperty('_loadFaces') || value !== this._loadFaces) {\n\t\t\tthis._loadFaces = value;\n\t\t\tif (this.loaded) this.registry._loader.patch(this, this.registry);\n\t\t}\n\t}\n\n}\n\nclass GlbResources {\n\tconstructor(gltf) {\n\t\tthis.gltf = gltf;\n\t\tthis.nodes = null;\n\t\tthis.scenes = null;\n\t\tthis.animations = null;\n\t\tthis.textures = null;\n\t\tthis.materials = null;\n\t\tthis.renders = null;\n\t\tthis.skins = null;\n\t\tthis.lights = null;\n\t}\n\n\tdestroy() {\n\t\tif (this.renders) {\n\t\t\tthis.renders.forEach(render => {\n\t\t\t\trender.meshes = null;\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nconst isDataURI = function isDataURI(uri) {\n\treturn /^data:.*,.*$/i.test(uri);\n};\n\nconst getDataURIMimeType = function getDataURIMimeType(uri) {\n\treturn uri.substring(uri.indexOf(\":\") + 1, uri.indexOf(\";\"));\n};\n\nconst getNumComponents = function getNumComponents(accessorType) {\n\tswitch (accessorType) {\n\t\tcase 'SCALAR':\n\t\t\treturn 1;\n\n\t\tcase 'VEC2':\n\t\t\treturn 2;\n\n\t\tcase 'VEC3':\n\t\t\treturn 3;\n\n\t\tcase 'VEC4':\n\t\t\treturn 4;\n\n\t\tcase 'MAT2':\n\t\t\treturn 4;\n\n\t\tcase 'MAT3':\n\t\t\treturn 9;\n\n\t\tcase 'MAT4':\n\t\t\treturn 16;\n\n\t\tdefault:\n\t\t\treturn 3;\n\t}\n};\n\nconst getComponentType = function getComponentType(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn TYPE_INT8;\n\n\t\tcase 5121:\n\t\t\treturn TYPE_UINT8;\n\n\t\tcase 5122:\n\t\t\treturn TYPE_INT16;\n\n\t\tcase 5123:\n\t\t\treturn TYPE_UINT16;\n\n\t\tcase 5124:\n\t\t\treturn TYPE_INT32;\n\n\t\tcase 5125:\n\t\t\treturn TYPE_UINT32;\n\n\t\tcase 5126:\n\t\t\treturn TYPE_FLOAT32;\n\n\t\tdefault:\n\t\t\treturn 0;\n\t}\n};\n\nconst getComponentSizeInBytes = function getComponentSizeInBytes(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn 1;\n\n\t\tcase 5121:\n\t\t\treturn 1;\n\n\t\tcase 5122:\n\t\t\treturn 2;\n\n\t\tcase 5123:\n\t\t\treturn 2;\n\n\t\tcase 5124:\n\t\t\treturn 4;\n\n\t\tcase 5125:\n\t\t\treturn 4;\n\n\t\tcase 5126:\n\t\t\treturn 4;\n\n\t\tdefault:\n\t\t\treturn 0;\n\t}\n};\n\nconst getComponentDataType = function getComponentDataType(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn Int8Array;\n\n\t\tcase 5121:\n\t\t\treturn Uint8Array;\n\n\t\tcase 5122:\n\t\t\treturn Int16Array;\n\n\t\tcase 5123:\n\t\t\treturn Uint16Array;\n\n\t\tcase 5124:\n\t\t\treturn Int32Array;\n\n\t\tcase 5125:\n\t\t\treturn Uint32Array;\n\n\t\tcase 5126:\n\t\t\treturn Float32Array;\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n\nconst gltfToEngineSemanticMap = {\n\t'POSITION': SEMANTIC_POSITION,\n\t'NORMAL': SEMANTIC_NORMAL,\n\t'TANGENT': SEMANTIC_TANGENT,\n\t'COLOR_0': SEMANTIC_COLOR,\n\t'JOINTS_0': SEMANTIC_BLENDINDICES,\n\t'WEIGHTS_0': SEMANTIC_BLENDWEIGHT,\n\t'TEXCOORD_0': SEMANTIC_TEXCOORD0,\n\t'TEXCOORD_1': SEMANTIC_TEXCOORD1\n};\n\nconst getAccessorData = function getAccessorData(gltfAccessor, bufferViews) {\n\tconst numComponents = getNumComponents(gltfAccessor.type);\n\tconst dataType = getComponentDataType(gltfAccessor.componentType);\n\n\tif (!dataType) {\n\t\treturn null;\n\t}\n\n\tlet result;\n\n\tif (gltfAccessor.sparse) {\n\t\tconst sparse = gltfAccessor.sparse;\n\t\tconst indicesAccessor = {\n\t\t\tcount: sparse.count,\n\t\t\ttype: \"SCALAR\"\n\t\t};\n\t\tconst indices = getAccessorData(Object.assign(indicesAccessor, sparse.indices), bufferViews);\n\t\tconst valuesAccessor = {\n\t\t\tcount: sparse.count,\n\t\t\ttype: gltfAccessor.scalar,\n\t\t\tcomponentType: gltfAccessor.componentType\n\t\t};\n\t\tconst values = getAccessorData(Object.assign(valuesAccessor, sparse.values), bufferViews);\n\n\t\tif (gltfAccessor.hasOwnProperty('bufferView')) {\n\t\t\tconst baseAccessor = {\n\t\t\t\tbufferView: gltfAccessor.bufferView,\n\t\t\t\tbyteOffset: gltfAccessor.byteOffset,\n\t\t\t\tcomponentType: gltfAccessor.componentType,\n\t\t\t\tcount: gltfAccessor.count,\n\t\t\t\ttype: gltfAccessor.type\n\t\t\t};\n\t\t\tresult = getAccessorData(baseAccessor, bufferViews).slice();\n\t\t} else {\n\t\t\tresult = new dataType(gltfAccessor.count * numComponents);\n\t\t}\n\n\t\tfor (let i = 0; i < sparse.count; ++i) {\n\t\t\tconst targetIndex = indices[i];\n\n\t\t\tfor (let j = 0; j < numComponents; ++j) {\n\t\t\t\tresult[targetIndex * numComponents + j] = values[i * numComponents + j];\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst bufferView = bufferViews[gltfAccessor.bufferView];\n\t\tresult = new dataType(bufferView.buffer, bufferView.byteOffset + (gltfAccessor.byteOffset || 0), gltfAccessor.count * numComponents);\n\t}\n\n\treturn result;\n};\n\nconst getPrimitiveType = function getPrimitiveType(primitive) {\n\tif (!primitive.hasOwnProperty('mode')) {\n\t\treturn PRIMITIVE_TRIANGLES;\n\t}\n\n\tswitch (primitive.mode) {\n\t\tcase 0:\n\t\t\treturn PRIMITIVE_POINTS;\n\n\t\tcase 1:\n\t\t\treturn PRIMITIVE_LINES;\n\n\t\tcase 2:\n\t\t\treturn PRIMITIVE_LINELOOP;\n\n\t\tcase 3:\n\t\t\treturn PRIMITIVE_LINESTRIP;\n\n\t\tcase 4:\n\t\t\treturn PRIMITIVE_TRIANGLES;\n\n\t\tcase 5:\n\t\t\treturn PRIMITIVE_TRISTRIP;\n\n\t\tcase 6:\n\t\t\treturn PRIMITIVE_TRIFAN;\n\n\t\tdefault:\n\t\t\treturn PRIMITIVE_TRIANGLES;\n\t}\n};\n\nconst generateIndices = function generateIndices(numVertices) {\n\tconst dummyIndices = new Uint16Array(numVertices);\n\n\tfor (let i = 0; i < numVertices; i++) {\n\t\tdummyIndices[i] = i;\n\t}\n\n\treturn dummyIndices;\n};\n\nconst generateNormals = function generateNormals(sourceDesc, indices) {\n\tconst p = sourceDesc[SEMANTIC_POSITION];\n\n\tif (!p || p.components !== 3) {\n\t\treturn;\n\t}\n\n\tlet positions;\n\n\tif (p.size !== p.stride) {\n\t\tconst srcStride = p.stride / typedArrayTypesByteSize[p.type];\n\t\tconst src = new typedArrayTypes[p.type](p.buffer, p.offset, p.count * srcStride);\n\t\tpositions = new typedArrayTypes[p.type](p.count * 3);\n\n\t\tfor (let i = 0; i < p.count; ++i) {\n\t\t\tpositions[i * 3 + 0] = src[i * srcStride + 0];\n\t\t\tpositions[i * 3 + 1] = src[i * srcStride + 1];\n\t\t\tpositions[i * 3 + 2] = src[i * srcStride + 2];\n\t\t}\n\t} else {\n\t\tpositions = new typedArrayTypes[p.type](p.buffer, p.offset, p.count * 3);\n\t}\n\n\tconst numVertices = p.count;\n\n\tif (!indices) {\n\t\tindices = generateIndices(numVertices);\n\t}\n\n\tconst normalsTemp = calculateNormals(positions, indices);\n\tconst normals = new Float32Array(normalsTemp.length);\n\tnormals.set(normalsTemp);\n\tsourceDesc[SEMANTIC_NORMAL] = {\n\t\tbuffer: normals.buffer,\n\t\tsize: 12,\n\t\toffset: 0,\n\t\tstride: 12,\n\t\tcount: numVertices,\n\t\tcomponents: 3,\n\t\ttype: TYPE_FLOAT32\n\t};\n};\n\nconst flipTexCoordVs = function flipTexCoordVs(vertexBuffer) {\n\tlet i, j;\n\tconst floatOffsets = [];\n\tconst shortOffsets = [];\n\tconst byteOffsets = [];\n\n\tfor (i = 0; i < vertexBuffer.format.elements.length; ++i) {\n\t\tconst element = vertexBuffer.format.elements[i];\n\n\t\tif (element.name === SEMANTIC_TEXCOORD0 || element.name === SEMANTIC_TEXCOORD1) {\n\t\t\tswitch (element.dataType) {\n\t\t\t\tcase TYPE_FLOAT32:\n\t\t\t\t\tfloatOffsets.push({\n\t\t\t\t\t\toffset: element.offset / 4 + 1,\n\t\t\t\t\t\tstride: element.stride / 4\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TYPE_UINT16:\n\t\t\t\t\tshortOffsets.push({\n\t\t\t\t\t\toffset: element.offset / 2 + 1,\n\t\t\t\t\t\tstride: element.stride / 2\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TYPE_UINT8:\n\t\t\t\t\tbyteOffsets.push({\n\t\t\t\t\t\toffset: element.offset + 1,\n\t\t\t\t\t\tstride: element.stride\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst flip = function flip(offsets, type, one) {\n\t\tconst typedArray = new type(vertexBuffer.storage);\n\n\t\tfor (i = 0; i < offsets.length; ++i) {\n\t\t\tlet index = offsets[i].offset;\n\t\t\tconst stride = offsets[i].stride;\n\n\t\t\tfor (j = 0; j < vertexBuffer.numVertices; ++j) {\n\t\t\t\ttypedArray[index] = one - typedArray[index];\n\t\t\t\tindex += stride;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (floatOffsets.length > 0) {\n\t\tflip(floatOffsets, Float32Array, 1.0);\n\t}\n\n\tif (shortOffsets.length > 0) {\n\t\tflip(shortOffsets, Uint16Array, 65535);\n\t}\n\n\tif (byteOffsets.length > 0) {\n\t\tflip(byteOffsets, Uint8Array, 255);\n\t}\n};\n\nconst cloneTexture = function cloneTexture(texture) {\n\tconst shallowCopyLevels = function shallowCopyLevels(texture) {\n\t\tconst result = [];\n\n\t\tfor (let mip = 0; mip < texture._levels.length; ++mip) {\n\t\t\tlet level = [];\n\n\t\t\tif (texture.cubemap) {\n\t\t\t\tfor (let face = 0; face < 6; ++face) {\n\t\t\t\t\tlevel.push(texture._levels[mip][face]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlevel = texture._levels[mip];\n\t\t\t}\n\n\t\t\tresult.push(level);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconst result = new Texture(texture.device, texture);\n\tresult._levels = shallowCopyLevels(texture);\n\treturn result;\n};\n\nconst cloneTextureAsset = function cloneTextureAsset(src) {\n\tconst result = new Asset(src.name + '_clone', src.type, src.file, src.data, src.options);\n\tresult.loaded = true;\n\tresult.resource = cloneTexture(src.resource);\n\tsrc.registry.add(result);\n\treturn result;\n};\n\nconst createVertexBufferInternal = function createVertexBufferInternal(device, sourceDesc, disableFlipV) {\n\tconst positionDesc = sourceDesc[SEMANTIC_POSITION];\n\n\tif (!positionDesc) {\n\t\treturn null;\n\t}\n\n\tconst numVertices = positionDesc.count;\n\tconst vertexDesc = [];\n\n\tfor (const semantic in sourceDesc) {\n\t\tif (sourceDesc.hasOwnProperty(semantic)) {\n\t\t\tvertexDesc.push({\n\t\t\t\tsemantic: semantic,\n\t\t\t\tcomponents: sourceDesc[semantic].components,\n\t\t\t\ttype: sourceDesc[semantic].type,\n\t\t\t\tnormalize: !!sourceDesc[semantic].normalize\n\t\t\t});\n\t\t}\n\t}\n\n\tconst elementOrder = [SEMANTIC_POSITION, SEMANTIC_NORMAL, SEMANTIC_TANGENT, SEMANTIC_COLOR, SEMANTIC_BLENDINDICES, SEMANTIC_BLENDWEIGHT, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1];\n\tvertexDesc.sort(function (lhs, rhs) {\n\t\tconst lhsOrder = elementOrder.indexOf(lhs.semantic);\n\t\tconst rhsOrder = elementOrder.indexOf(rhs.semantic);\n\t\treturn lhsOrder < rhsOrder ? -1 : rhsOrder < lhsOrder ? 1 : 0;\n\t});\n\tlet i, j, k;\n\tlet source, target, sourceOffset;\n\tconst vertexFormat = new VertexFormat(device, vertexDesc);\n\tlet isCorrectlyInterleaved = true;\n\n\tfor (i = 0; i < vertexFormat.elements.length; ++i) {\n\t\ttarget = vertexFormat.elements[i];\n\t\tsource = sourceDesc[target.name];\n\t\tsourceOffset = source.offset - positionDesc.offset;\n\n\t\tif (source.buffer !== positionDesc.buffer || source.stride !== target.stride || source.size !== target.size || sourceOffset !== target.offset) {\n\t\t\tisCorrectlyInterleaved = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst vertexBuffer = new VertexBuffer(device, vertexFormat, numVertices, BUFFER_STATIC);\n\tconst vertexData = vertexBuffer.lock();\n\tconst targetArray = new Uint32Array(vertexData);\n\tlet sourceArray;\n\n\tif (isCorrectlyInterleaved) {\n\t\tsourceArray = new Uint32Array(positionDesc.buffer, positionDesc.offset, numVertices * vertexBuffer.format.size / 4);\n\t\ttargetArray.set(sourceArray);\n\t} else {\n\t\tlet targetStride, sourceStride;\n\n\t\tfor (i = 0; i < vertexBuffer.format.elements.length; ++i) {\n\t\t\ttarget = vertexBuffer.format.elements[i];\n\t\t\ttargetStride = target.stride / 4;\n\t\t\tsource = sourceDesc[target.name];\n\t\t\tsourceStride = source.stride / 4;\n\t\t\tsourceArray = new Uint32Array(source.buffer, source.offset, (source.count - 1) * sourceStride + source.size / 4);\n\t\t\tlet src = 0;\n\t\t\tlet dst = target.offset / 4;\n\t\t\tconst kend = Math.floor((source.size + 3) / 4);\n\n\t\t\tfor (j = 0; j < numVertices; ++j) {\n\t\t\t\tfor (k = 0; k < kend; ++k) {\n\t\t\t\t\ttargetArray[dst + k] = sourceArray[src + k];\n\t\t\t\t}\n\n\t\t\t\tsrc += sourceStride;\n\t\t\t\tdst += targetStride;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!disableFlipV) {\n\t\tflipTexCoordVs(vertexBuffer);\n\t}\n\n\tvertexBuffer.unlock();\n\treturn vertexBuffer;\n};\n\nconst createVertexBuffer = function createVertexBuffer(device, attributes, indices, accessors, bufferViews, disableFlipV, vertexBufferDict) {\n\tconst useAttributes = {};\n\tconst attribIds = [];\n\n\tfor (const attrib in attributes) {\n\t\tif (attributes.hasOwnProperty(attrib) && gltfToEngineSemanticMap.hasOwnProperty(attrib)) {\n\t\t\tuseAttributes[attrib] = attributes[attrib];\n\t\t\tattribIds.push(attrib + \":\" + attributes[attrib]);\n\t\t}\n\t}\n\n\tattribIds.sort();\n\tconst vbKey = attribIds.join();\n\tlet vb = vertexBufferDict[vbKey];\n\n\tif (!vb) {\n\t\tconst sourceDesc = {};\n\n\t\tfor (const attrib in useAttributes) {\n\t\t\tconst accessor = accessors[attributes[attrib]];\n\t\t\tconst accessorData = getAccessorData(accessor, bufferViews);\n\t\t\tconst bufferView = bufferViews[accessor.bufferView];\n\t\t\tconst semantic = gltfToEngineSemanticMap[attrib];\n\t\t\tconst size = getNumComponents(accessor.type) * getComponentSizeInBytes(accessor.componentType);\n\t\t\tconst stride = bufferView.hasOwnProperty('byteStride') ? bufferView.byteStride : size;\n\t\t\tsourceDesc[semantic] = {\n\t\t\t\tbuffer: accessorData.buffer,\n\t\t\t\tsize: size,\n\t\t\t\toffset: accessorData.byteOffset,\n\t\t\t\tstride: stride,\n\t\t\t\tcount: accessor.count,\n\t\t\t\tcomponents: getNumComponents(accessor.type),\n\t\t\t\ttype: getComponentType(accessor.componentType),\n\t\t\t\tnormalize: accessor.normalized\n\t\t\t};\n\t\t}\n\n\t\tif (!sourceDesc.hasOwnProperty(SEMANTIC_NORMAL)) {\n\t\t\tgenerateNormals(sourceDesc, indices);\n\t\t}\n\n\t\tvb = createVertexBufferInternal(device, sourceDesc, disableFlipV);\n\t\tvertexBufferDict[vbKey] = vb;\n\t}\n\n\treturn vb;\n};\n\nconst createVertexBufferDraco = function createVertexBufferDraco(device, outputGeometry, extDraco, decoder, decoderModule, indices, disableFlipV) {\n\tconst numPoints = outputGeometry.num_points();\n\n\tconst extractDracoAttributeInfo = function extractDracoAttributeInfo(uniqueId) {\n\t\tconst attribute = decoder.GetAttributeByUniqueId(outputGeometry, uniqueId);\n\t\tconst numValues = numPoints * attribute.num_components();\n\t\tconst dracoFormat = attribute.data_type();\n\t\tlet ptr, values, componentSizeInBytes, storageType;\n\n\t\tswitch (dracoFormat) {\n\t\t\tcase decoderModule.DT_UINT8:\n\t\t\t\tstorageType = TYPE_UINT8;\n\t\t\t\tcomponentSizeInBytes = 1;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_UINT8, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Uint8Array(decoderModule.HEAPU8.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\n\t\t\tcase decoderModule.DT_UINT16:\n\t\t\t\tstorageType = TYPE_UINT16;\n\t\t\t\tcomponentSizeInBytes = 2;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_UINT16, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Uint16Array(decoderModule.HEAPU16.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\n\t\t\tcase decoderModule.DT_FLOAT32:\n\t\t\tdefault:\n\t\t\t\tstorageType = TYPE_FLOAT32;\n\t\t\t\tcomponentSizeInBytes = 4;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_FLOAT32, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Float32Array(decoderModule.HEAPF32.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tdecoderModule._free(ptr);\n\n\t\treturn {\n\t\t\tvalues: values,\n\t\t\tnumComponents: attribute.num_components(),\n\t\t\tcomponentSizeInBytes: componentSizeInBytes,\n\t\t\tstorageType: storageType,\n\t\t\tnormalized: attribute.normalized()\n\t\t};\n\t};\n\n\tconst sourceDesc = {};\n\tconst attributes = extDraco.attributes;\n\n\tfor (const attrib in attributes) {\n\t\tif (attributes.hasOwnProperty(attrib) && gltfToEngineSemanticMap.hasOwnProperty(attrib)) {\n\t\t\tconst semantic = gltfToEngineSemanticMap[attrib];\n\t\t\tconst attributeInfo = extractDracoAttributeInfo(attributes[attrib]);\n\t\t\tconst size = attributeInfo.numComponents * attributeInfo.componentSizeInBytes;\n\t\t\tsourceDesc[semantic] = {\n\t\t\t\tvalues: attributeInfo.values,\n\t\t\t\tbuffer: attributeInfo.values.buffer,\n\t\t\t\tsize: size,\n\t\t\t\toffset: 0,\n\t\t\t\tstride: size,\n\t\t\t\tcount: numPoints,\n\t\t\t\tcomponents: attributeInfo.numComponents,\n\t\t\t\ttype: attributeInfo.storageType,\n\t\t\t\tnormalize: attributeInfo.normalized\n\t\t\t};\n\t\t}\n\t}\n\n\tif (!sourceDesc.hasOwnProperty(SEMANTIC_NORMAL)) {\n\t\tgenerateNormals(sourceDesc, indices);\n\t}\n\n\treturn createVertexBufferInternal(device, sourceDesc, disableFlipV);\n};\n\nconst createSkin = function createSkin(device, gltfSkin, accessors, bufferViews, nodes, glbSkins) {\n\tlet i, j, bindMatrix;\n\tconst joints = gltfSkin.joints;\n\tconst numJoints = joints.length;\n\tconst ibp = [];\n\n\tif (gltfSkin.hasOwnProperty('inverseBindMatrices')) {\n\t\tconst inverseBindMatrices = gltfSkin.inverseBindMatrices;\n\t\tconst ibmData = getAccessorData(accessors[inverseBindMatrices], bufferViews);\n\t\tconst ibmValues = [];\n\n\t\tfor (i = 0; i < numJoints; i++) {\n\t\t\tfor (j = 0; j < 16; j++) {\n\t\t\t\tibmValues[j] = ibmData[i * 16 + j];\n\t\t\t}\n\n\t\t\tbindMatrix = new Mat4();\n\t\t\tbindMatrix.set(ibmValues);\n\t\t\tibp.push(bindMatrix);\n\t\t}\n\t} else {\n\t\tfor (i = 0; i < numJoints; i++) {\n\t\t\tbindMatrix = new Mat4();\n\t\t\tibp.push(bindMatrix);\n\t\t}\n\t}\n\n\tconst boneNames = [];\n\n\tfor (i = 0; i < numJoints; i++) {\n\t\tboneNames[i] = nodes[joints[i]].name;\n\t}\n\n\tconst key = boneNames.join(\"#\");\n\tlet skin = glbSkins.get(key);\n\n\tif (!skin) {\n\t\tskin = new Skin(device, ibp, boneNames);\n\t\tglbSkins.set(key, skin);\n\t}\n\n\treturn skin;\n};\n\nconst tempMat = new Mat4();\nconst tempVec = new Vec3();\n\nconst createMesh = function createMesh(device, gltfMesh, accessors, bufferViews, callback, disableFlipV, vertexBufferDict) {\n\tconst meshes = [];\n\tgltfMesh.primitives.forEach(function (primitive) {\n\t\tlet primitiveType, vertexBuffer, numIndices;\n\t\tlet indices = null;\n\t\tlet canUseMorph = true;\n\n\t\tif (primitive.hasOwnProperty('extensions')) {\n\t\t\tconst extensions = primitive.extensions;\n\n\t\t\tif (extensions.hasOwnProperty('KHR_draco_mesh_compression')) {\n\t\t\t\tconst decoderModule = window.DracoDecoderModule;\n\n\t\t\t\tif (decoderModule) {\n\t\t\t\t\tconst extDraco = extensions.KHR_draco_mesh_compression;\n\n\t\t\t\t\tif (extDraco.hasOwnProperty('attributes')) {\n\t\t\t\t\t\tconst uint8Buffer = bufferViews[extDraco.bufferView];\n\t\t\t\t\t\tconst buffer = new decoderModule.DecoderBuffer();\n\t\t\t\t\t\tbuffer.Init(uint8Buffer, uint8Buffer.length);\n\t\t\t\t\t\tconst decoder = new decoderModule.Decoder();\n\t\t\t\t\t\tconst geometryType = decoder.GetEncodedGeometryType(buffer);\n\t\t\t\t\t\tlet outputGeometry, status;\n\n\t\t\t\t\t\tswitch (geometryType) {\n\t\t\t\t\t\t\tcase decoderModule.POINT_CLOUD:\n\t\t\t\t\t\t\t\tprimitiveType = PRIMITIVE_POINTS;\n\t\t\t\t\t\t\t\toutputGeometry = new decoderModule.PointCloud();\n\t\t\t\t\t\t\t\tstatus = decoder.DecodeBufferToPointCloud(buffer, outputGeometry);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase decoderModule.TRIANGULAR_MESH:\n\t\t\t\t\t\t\t\tprimitiveType = PRIMITIVE_TRIANGLES;\n\t\t\t\t\t\t\t\toutputGeometry = new decoderModule.Mesh();\n\t\t\t\t\t\t\t\tstatus = decoder.DecodeBufferToMesh(buffer, outputGeometry);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase decoderModule.INVALID_GEOMETRY_TYPE:\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!status || !status.ok() || outputGeometry.ptr == 0) {\n\t\t\t\t\t\t\tcallback(\"Failed to decode draco compressed asset: \" + (status ? status.error_msg() : 'Mesh asset - invalid draco compressed geometry type: ' + geometryType));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst numFaces = outputGeometry.num_faces();\n\n\t\t\t\t\t\tif (geometryType === decoderModule.TRIANGULAR_MESH) {\n\t\t\t\t\t\t\tconst bit32 = outputGeometry.num_points() > 65535;\n\t\t\t\t\t\t\tnumIndices = numFaces * 3;\n\t\t\t\t\t\t\tconst dataSize = numIndices * (bit32 ? 4 : 2);\n\n\t\t\t\t\t\t\tconst ptr = decoderModule._malloc(dataSize);\n\n\t\t\t\t\t\t\tif (bit32) {\n\t\t\t\t\t\t\t\tdecoder.GetTrianglesUInt32Array(outputGeometry, dataSize, ptr);\n\t\t\t\t\t\t\t\tindices = new Uint32Array(decoderModule.HEAPU32.buffer, ptr, numIndices).slice();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdecoder.GetTrianglesUInt16Array(outputGeometry, dataSize, ptr);\n\t\t\t\t\t\t\t\tindices = new Uint16Array(decoderModule.HEAPU16.buffer, ptr, numIndices).slice();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdecoderModule._free(ptr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvertexBuffer = createVertexBufferDraco(device, outputGeometry, extDraco, decoder, decoderModule, indices, disableFlipV);\n\t\t\t\t\t\tdecoderModule.destroy(outputGeometry);\n\t\t\t\t\t\tdecoderModule.destroy(decoder);\n\t\t\t\t\t\tdecoderModule.destroy(buffer);\n\t\t\t\t\t\tcanUseMorph = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!vertexBuffer) {\n\t\t\tindices = primitive.hasOwnProperty('indices') ? getAccessorData(accessors[primitive.indices], bufferViews) : null;\n\t\t\tvertexBuffer = createVertexBuffer(device, primitive.attributes, indices, accessors, bufferViews, disableFlipV, vertexBufferDict);\n\t\t\tprimitiveType = getPrimitiveType(primitive);\n\t\t}\n\n\t\tlet mesh = null;\n\n\t\tif (vertexBuffer) {\n\t\t\tmesh = new Mesh(device);\n\t\t\tmesh.vertexBuffer = vertexBuffer;\n\t\t\tmesh.primitive[0].type = primitiveType;\n\t\t\tmesh.primitive[0].base = 0;\n\t\t\tmesh.primitive[0].indexed = indices !== null;\n\n\t\t\tif (indices !== null) {\n\t\t\t\tlet indexFormat;\n\n\t\t\t\tif (indices instanceof Uint8Array) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT8;\n\t\t\t\t} else if (indices instanceof Uint16Array) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT16;\n\t\t\t\t} else {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT32;\n\t\t\t\t}\n\n\t\t\t\tif (indexFormat === INDEXFORMAT_UINT32 && !device.extUintElement) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT16;\n\t\t\t\t\tindices = new Uint16Array(indices);\n\t\t\t\t}\n\n\t\t\t\tconst indexBuffer = new IndexBuffer(device, indexFormat, indices.length, BUFFER_STATIC, indices);\n\t\t\t\tmesh.indexBuffer[0] = indexBuffer;\n\t\t\t\tmesh.primitive[0].count = indices.length;\n\t\t\t} else {\n\t\t\t\tmesh.primitive[0].count = vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tmesh.materialIndex = primitive.material;\n\t\t\tlet accessor = accessors[primitive.attributes.POSITION];\n\t\t\tconst min = accessor.min;\n\t\t\tconst max = accessor.max;\n\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) / 2, (max[1] + min[1]) / 2, (max[2] + min[2]) / 2), new Vec3((max[0] - min[0]) / 2, (max[1] - min[1]) / 2, (max[2] - min[2]) / 2));\n\t\t\tmesh.aabb = aabb;\n\n\t\t\tif (canUseMorph && primitive.hasOwnProperty('targets')) {\n\t\t\t\tconst targets = [];\n\t\t\t\tprimitive.targets.forEach(function (target, index) {\n\t\t\t\t\tconst options = {};\n\n\t\t\t\t\tif (target.hasOwnProperty('POSITION')) {\n\t\t\t\t\t\taccessor = accessors[target.POSITION];\n\t\t\t\t\t\toptions.deltaPositions = getAccessorData(accessor, bufferViews);\n\t\t\t\t\t\toptions.deltaPositionsType = getComponentType(accessor.componentType);\n\n\t\t\t\t\t\tif (accessor.hasOwnProperty('min') && accessor.hasOwnProperty('max')) {\n\t\t\t\t\t\t\toptions.aabb = new BoundingBox();\n\t\t\t\t\t\t\toptions.aabb.setMinMax(new Vec3(accessor.min), new Vec3(accessor.max));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target.hasOwnProperty('NORMAL')) {\n\t\t\t\t\t\taccessor = accessors[target.NORMAL];\n\t\t\t\t\t\toptions.deltaNormals = getAccessorData(accessor, bufferViews);\n\t\t\t\t\t\toptions.deltaNormalsType = getComponentType(accessor.componentType);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gltfMesh.hasOwnProperty('extras') && gltfMesh.extras.hasOwnProperty('targetNames')) {\n\t\t\t\t\t\toptions.name = gltfMesh.extras.targetNames[index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions.name = index.toString(10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gltfMesh.hasOwnProperty('weights')) {\n\t\t\t\t\t\toptions.defaultWeight = gltfMesh.weights[index];\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push(new MorphTarget(options));\n\t\t\t\t});\n\t\t\t\tmesh.morph = new Morph(targets, device);\n\t\t\t}\n\t\t}\n\n\t\tmeshes.push(mesh);\n\t});\n\treturn meshes;\n};\n\nconst createMaterial = function createMaterial(gltfMaterial, textures, disableFlipV) {\n\tconst glossChunk = [\"#ifdef MAPFLOAT\", \"uniform float material_shininess;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_glossMap;\", \"#endif\", \"\", \"void getGlossiness() {\", \"\t\tdGlossiness = 1.0;\", \"\", \"#ifdef MAPFLOAT\", \"\t\tdGlossiness *= material_shininess;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"\t\tdGlossiness *= texture2D(texture_glossMap, $UV).$CH;\", \"#endif\", \"\", \"#ifdef MAPVERTEX\", \"\t\tdGlossiness *= saturate(vVertexColor.$VC);\", \"#endif\", \"\", \"\t\tdGlossiness = 1.0 - dGlossiness;\", \"\", \"\t\tdGlossiness += 0.0000001;\", \"}\"].join('\\n');\n\tconst specularChunk = [\"#ifdef MAPCOLOR\", \"uniform vec3 material_specular;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_specularMap;\", \"#endif\", \"\", \"void getSpecularity() {\", \"\t\tdSpecularity = vec3(1.0);\", \"\", \"\t\t#ifdef MAPCOLOR\", \"\t\t\t\tdSpecularity *= material_specular;\", \"\t\t#endif\", \"\", \"\t\t#ifdef MAPTEXTURE\", \"\t\t\t\tvec3 srgb = texture2D(texture_specularMap, $UV).$CH;\", \"\t\t\t\tdSpecularity *= vec3(pow(srgb.r, 2.2), pow(srgb.g, 2.2), pow(srgb.b, 2.2));\", \"\t\t#endif\", \"\", \"\t\t#ifdef MAPVERTEX\", \"\t\t\t\tdSpecularity *= saturate(vVertexColor.$VC);\", \"\t\t#endif\", \"}\"].join('\\n');\n\tconst clearCoatGlossChunk = [\"#ifdef MAPFLOAT\", \"uniform float material_clearCoatGlossiness;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_clearCoatGlossMap;\", \"#endif\", \"\", \"void getClearCoatGlossiness() {\", \"\t\tccGlossiness = 1.0;\", \"\", \"#ifdef MAPFLOAT\", \"\t\tccGlossiness *= material_clearCoatGlossiness;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"\t\tccGlossiness *= texture2D(texture_clearCoatGlossMap, $UV).$CH;\", \"#endif\", \"\", \"#ifdef MAPVERTEX\", \"\t\tccGlossiness *= saturate(vVertexColor.$VC);\", \"#endif\", \"\", \"\t\tccGlossiness = 1.0 - ccGlossiness;\", \"\", \"\t\tccGlossiness += 0.0000001;\", \"}\"].join('\\n');\n\tconst uvONE = [1, 1];\n\tconst uvZERO = [0, 0];\n\n\tconst extractTextureTransform = function extractTextureTransform(source, material, maps) {\n\t\tlet map;\n\t\tconst texCoord = source.texCoord;\n\n\t\tif (texCoord) {\n\t\t\tfor (map = 0; map < maps.length; ++map) {\n\t\t\t\tmaterial[maps[map] + 'MapUv'] = texCoord;\n\t\t\t}\n\t\t}\n\n\t\tlet scale = uvONE;\n\t\tlet offset = uvZERO;\n\t\tconst extensions = source.extensions;\n\n\t\tif (extensions) {\n\t\t\tconst textureTransformData = extensions.KHR_texture_transform;\n\n\t\t\tif (textureTransformData) {\n\t\t\t\tif (textureTransformData.scale) {\n\t\t\t\t\tscale = textureTransformData.scale;\n\t\t\t\t}\n\n\t\t\t\tif (textureTransformData.offset) {\n\t\t\t\t\toffset = textureTransformData.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (map = 0; map < maps.length; ++map) {\n\t\t\tmaterial[maps[map] + 'MapTiling'] = new Vec2(scale[0], scale[1]);\n\t\t\tmaterial[maps[map] + 'MapOffset'] = new Vec2(offset[0], disableFlipV ? 1.0 - scale[1] - offset[1] : offset[1]);\n\t\t}\n\t};\n\n\tconst material = new StandardMaterial();\n\tmaterial.occludeSpecular = true;\n\tmaterial.diffuseTint = true;\n\tmaterial.diffuseVertexColor = true;\n\tmaterial.specularTint = true;\n\tmaterial.specularVertexColor = true;\n\n\tif (gltfMaterial.hasOwnProperty('name')) {\n\t\tmaterial.name = gltfMaterial.name;\n\t}\n\n\tlet color, texture;\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_pbrSpecularGlossiness')) {\n\t\tconst specData = gltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness;\n\n\t\tif (specData.hasOwnProperty('diffuseFactor')) {\n\t\t\tcolor = specData.diffuseFactor;\n\t\t\tmaterial.diffuse.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t\tmaterial.opacity = color[3];\n\t\t} else {\n\t\t\tmaterial.diffuse.set(1, 1, 1);\n\t\t\tmaterial.opacity = 1;\n\t\t}\n\n\t\tif (specData.hasOwnProperty('diffuseTexture')) {\n\t\t\tconst diffuseTexture = specData.diffuseTexture;\n\t\t\ttexture = textures[diffuseTexture.index];\n\t\t\tmaterial.diffuseMap = texture;\n\t\t\tmaterial.diffuseMapChannel = 'rgb';\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = 'a';\n\t\t\textractTextureTransform(diffuseTexture, material, ['diffuse', 'opacity']);\n\t\t}\n\n\t\tmaterial.useMetalness = false;\n\n\t\tif (specData.hasOwnProperty('specularFactor')) {\n\t\t\tcolor = specData.specularFactor;\n\t\t\tmaterial.specular.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t} else {\n\t\t\tmaterial.specular.set(1, 1, 1);\n\t\t}\n\n\t\tif (specData.hasOwnProperty('glossinessFactor')) {\n\t\t\tmaterial.shininess = 100 * specData.glossinessFactor;\n\t\t} else {\n\t\t\tmaterial.shininess = 100;\n\t\t}\n\n\t\tif (specData.hasOwnProperty('specularGlossinessTexture')) {\n\t\t\tconst specularGlossinessTexture = specData.specularGlossinessTexture;\n\t\t\tmaterial.specularMap = material.glossMap = textures[specularGlossinessTexture.index];\n\t\t\tmaterial.specularMapChannel = 'rgb';\n\t\t\tmaterial.glossMapChannel = 'a';\n\t\t\textractTextureTransform(specularGlossinessTexture, material, ['gloss', 'metalness']);\n\t\t}\n\n\t\tmaterial.chunks.specularPS = specularChunk;\n\t} else if (gltfMaterial.hasOwnProperty('pbrMetallicRoughness')) {\n\t\tconst pbrData = gltfMaterial.pbrMetallicRoughness;\n\n\t\tif (pbrData.hasOwnProperty('baseColorFactor')) {\n\t\t\tcolor = pbrData.baseColorFactor;\n\t\t\tmaterial.diffuse.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t\tmaterial.opacity = color[3];\n\t\t} else {\n\t\t\tmaterial.diffuse.set(1, 1, 1);\n\t\t\tmaterial.opacity = 1;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('baseColorTexture')) {\n\t\t\tconst baseColorTexture = pbrData.baseColorTexture;\n\t\t\ttexture = textures[baseColorTexture.index];\n\t\t\tmaterial.diffuseMap = texture;\n\t\t\tmaterial.diffuseMapChannel = 'rgb';\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = 'a';\n\t\t\textractTextureTransform(baseColorTexture, material, ['diffuse', 'opacity']);\n\t\t}\n\n\t\tmaterial.useMetalness = true;\n\n\t\tif (pbrData.hasOwnProperty('metallicFactor')) {\n\t\t\tmaterial.metalness = pbrData.metallicFactor;\n\t\t} else {\n\t\t\tmaterial.metalness = 1;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('roughnessFactor')) {\n\t\t\tmaterial.shininess = 100 * pbrData.roughnessFactor;\n\t\t} else {\n\t\t\tmaterial.shininess = 100;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('metallicRoughnessTexture')) {\n\t\t\tconst metallicRoughnessTexture = pbrData.metallicRoughnessTexture;\n\t\t\tmaterial.metalnessMap = material.glossMap = textures[metallicRoughnessTexture.index];\n\t\t\tmaterial.metalnessMapChannel = 'b';\n\t\t\tmaterial.glossMapChannel = 'g';\n\t\t\textractTextureTransform(metallicRoughnessTexture, material, ['gloss', 'metalness']);\n\t\t}\n\n\t\tmaterial.chunks.glossPS = glossChunk;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('normalTexture')) {\n\t\tconst normalTexture = gltfMaterial.normalTexture;\n\t\tmaterial.normalMap = textures[normalTexture.index];\n\t\textractTextureTransform(normalTexture, material, ['normal']);\n\n\t\tif (normalTexture.hasOwnProperty('scale')) {\n\t\t\tmaterial.bumpiness = normalTexture.scale;\n\t\t}\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('occlusionTexture')) {\n\t\tconst occlusionTexture = gltfMaterial.occlusionTexture;\n\t\tmaterial.aoMap = textures[occlusionTexture.index];\n\t\tmaterial.aoMapChannel = 'r';\n\t\textractTextureTransform(occlusionTexture, material, ['ao']);\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('emissiveFactor')) {\n\t\tcolor = gltfMaterial.emissiveFactor;\n\t\tmaterial.emissive.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\tmaterial.emissiveTint = true;\n\t} else {\n\t\tmaterial.emissive.set(0, 0, 0);\n\t\tmaterial.emissiveTint = false;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('emissiveTexture')) {\n\t\tconst emissiveTexture = gltfMaterial.emissiveTexture;\n\t\tmaterial.emissiveMap = textures[emissiveTexture.index];\n\t\textractTextureTransform(emissiveTexture, material, ['emissive']);\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('alphaMode')) {\n\t\tswitch (gltfMaterial.alphaMode) {\n\t\t\tcase 'MASK':\n\t\t\t\tmaterial.blendType = BLEND_NONE;\n\n\t\t\t\tif (gltfMaterial.hasOwnProperty('alphaCutoff')) {\n\t\t\t\t\tmaterial.alphaTest = gltfMaterial.alphaCutoff;\n\t\t\t\t} else {\n\t\t\t\t\tmaterial.alphaTest = 0.5;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'BLEND':\n\t\t\t\tmaterial.blendType = BLEND_NORMAL;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\tcase 'OPAQUE':\n\t\t\t\tmaterial.blendType = BLEND_NONE;\n\t\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tmaterial.blendType = BLEND_NONE;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('doubleSided')) {\n\t\tmaterial.twoSidedLighting = gltfMaterial.doubleSided;\n\t\tmaterial.cull = gltfMaterial.doubleSided ? CULLFACE_NONE : CULLFACE_BACK;\n\t} else {\n\t\tmaterial.twoSidedLighting = false;\n\t\tmaterial.cull = CULLFACE_BACK;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_clearcoat')) {\n\t\tconst ccData = gltfMaterial.extensions.KHR_materials_clearcoat;\n\n\t\tif (ccData.hasOwnProperty('clearcoatFactor')) {\n\t\t\tmaterial.clearCoat = ccData.clearcoatFactor * 0.25;\n\t\t} else {\n\t\t\tmaterial.clearCoat = 0;\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatTexture')) {\n\t\t\tconst clearcoatTexture = ccData.clearcoatTexture;\n\t\t\tmaterial.clearCoatMap = textures[clearcoatTexture.index];\n\t\t\tmaterial.clearCoatMapChannel = 'r';\n\t\t\textractTextureTransform(clearcoatTexture, material, ['clearCoat']);\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatRoughnessFactor')) {\n\t\t\tmaterial.clearCoatGlossiness = ccData.clearcoatRoughnessFactor;\n\t\t} else {\n\t\t\tmaterial.clearCoatGlossiness = 0;\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatRoughnessTexture')) {\n\t\t\tconst clearcoatRoughnessTexture = ccData.clearcoatRoughnessTexture;\n\t\t\tmaterial.clearCoatGlossMap = textures[clearcoatRoughnessTexture.index];\n\t\t\tmaterial.clearCoatGlossMapChannel = 'g';\n\t\t\textractTextureTransform(clearcoatRoughnessTexture, material, ['clearCoatGloss']);\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatNormalTexture')) {\n\t\t\tconst clearcoatNormalTexture = ccData.clearcoatNormalTexture;\n\t\t\tmaterial.clearCoatNormalMap = textures[clearcoatNormalTexture.index];\n\t\t\textractTextureTransform(clearcoatNormalTexture, material, ['clearCoatNormal']);\n\n\t\t\tif (clearcoatNormalTexture.hasOwnProperty('scale')) {\n\t\t\t\tmaterial.clearCoatBumpiness = clearcoatNormalTexture.scale;\n\t\t\t}\n\t\t}\n\n\t\tmaterial.chunks.clearCoatGlossPS = clearCoatGlossChunk;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_unlit')) {\n\t\tmaterial.useLighting = false;\n\t\tmaterial.emissive.copy(material.diffuse);\n\t\tmaterial.emissiveTint = material.diffuseTint;\n\t\tmaterial.emissiveMap = material.diffuseMap;\n\t\tmaterial.emissiveMapUv = material.diffuseMapUv;\n\t\tmaterial.emissiveMapTiling.copy(material.diffuseMapTiling);\n\t\tmaterial.emissiveMapOffset.copy(material.diffuseMapOffset);\n\t\tmaterial.emissiveMapChannel = material.diffuseMapChannel;\n\t\tmaterial.emissiveVertexColor = material.diffuseVertexColor;\n\t\tmaterial.emissiveVertexColorChannel = material.diffuseVertexColorChannel;\n\t\tmaterial.diffuse.set(0, 0, 0);\n\t\tmaterial.diffuseTint = false;\n\t\tmaterial.diffuseMap = null;\n\t\tmaterial.diffuseVertexColor = false;\n\t}\n\n\tmaterial.update();\n\treturn material;\n};\n\nconst createAnimation = function createAnimation(gltfAnimation, animationIndex, gltfAccessors, bufferViews, nodes) {\n\tconst createAnimData = function createAnimData(gltfAccessor) {\n\t\tconst data = getAccessorData(gltfAccessor, bufferViews);\n\t\treturn new AnimData(getNumComponents(gltfAccessor.type), new data.constructor(data));\n\t};\n\n\tconst interpMap = {\n\t\t\"STEP\": INTERPOLATION_STEP,\n\t\t\"LINEAR\": INTERPOLATION_LINEAR,\n\t\t\"CUBICSPLINE\": INTERPOLATION_CUBIC\n\t};\n\tconst inputMap = {};\n\tconst inputs = [];\n\tconst outputMap = {};\n\tconst outputs = [];\n\tconst curves = [];\n\tlet i;\n\n\tfor (i = 0; i < gltfAnimation.samplers.length; ++i) {\n\t\tconst sampler = gltfAnimation.samplers[i];\n\n\t\tif (!inputMap.hasOwnProperty(sampler.input)) {\n\t\t\tinputMap[sampler.input] = inputs.length;\n\t\t\tinputs.push(createAnimData(gltfAccessors[sampler.input]));\n\t\t}\n\n\t\tif (!outputMap.hasOwnProperty(sampler.output)) {\n\t\t\toutputMap[sampler.output] = outputs.length;\n\t\t\toutputs.push(createAnimData(gltfAccessors[sampler.output]));\n\t\t}\n\n\t\tconst interpolation = sampler.hasOwnProperty('interpolation') && interpMap.hasOwnProperty(sampler.interpolation) ? interpMap[sampler.interpolation] : INTERPOLATION_LINEAR;\n\t\tcurves.push(new AnimCurve([], inputMap[sampler.input], outputMap[sampler.output], interpolation));\n\t}\n\n\tconst quatArrays = [];\n\tconst transformSchema = {\n\t\t'translation': 'localPosition',\n\t\t'rotation': 'localRotation',\n\t\t'scale': 'localScale',\n\t\t'weights': 'weights'\n\t};\n\n\tfor (i = 0; i < gltfAnimation.channels.length; ++i) {\n\t\tconst channel = gltfAnimation.channels[i];\n\t\tconst target = channel.target;\n\t\tconst curve = curves[channel.sampler];\n\t\tconst node = nodes[target.node];\n\t\tconst entityPath = [nodes[0].name, ...AnimBinder.splitPath(node.path, '/')];\n\n\t\tcurve._paths.push({\n\t\t\tentityPath: entityPath,\n\t\t\tcomponent: 'graph',\n\t\t\tpropertyPath: [transformSchema[target.path]]\n\t\t});\n\n\t\tif (target.path.startsWith('rotation') && curve.interpolation !== INTERPOLATION_CUBIC) {\n\t\t\tquatArrays.push(curve.output);\n\t\t} else if (target.path.startsWith('weights')) {\n\t\t\toutputs[curve.output]._components = outputs[curve.output].data.length / inputs[curve.input].data.length;\n\t\t}\n\t}\n\n\tquatArrays.sort();\n\tlet prevIndex = null;\n\tlet data;\n\n\tfor (i = 0; i < quatArrays.length; ++i) {\n\t\tconst index = quatArrays[i];\n\n\t\tif (i === 0 || index !== prevIndex) {\n\t\t\tdata = outputs[index];\n\n\t\t\tif (data.components === 4) {\n\t\t\t\tconst d = data.data;\n\t\t\t\tconst len = d.length - 4;\n\n\t\t\t\tfor (let j = 0; j < len; j += 4) {\n\t\t\t\t\tconst dp = d[j + 0] * d[j + 4] + d[j + 1] * d[j + 5] + d[j + 2] * d[j + 6] + d[j + 3] * d[j + 7];\n\n\t\t\t\t\tif (dp < 0) {\n\t\t\t\t\t\td[j + 4] *= -1;\n\t\t\t\t\t\td[j + 5] *= -1;\n\t\t\t\t\t\td[j + 6] *= -1;\n\t\t\t\t\t\td[j + 7] *= -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprevIndex = index;\n\t\t}\n\t}\n\n\tlet duration = 0;\n\n\tfor (i = 0; i < inputs.length; i++) {\n\t\tdata = inputs[i]._data;\n\t\tduration = Math.max(duration, data.length === 0 ? 0 : data[data.length - 1]);\n\t}\n\n\treturn new AnimTrack(gltfAnimation.hasOwnProperty('name') ? gltfAnimation.name : \"animation_\" + animationIndex, duration, inputs, outputs, curves);\n};\n\nconst createNode = function createNode(gltfNode, nodeIndex) {\n\tconst entity = new GraphNode();\n\n\tif (gltfNode.hasOwnProperty('name') && gltfNode.name.length > 0) {\n\t\tentity.name = gltfNode.name;\n\t} else {\n\t\tentity.name = \"node_\" + nodeIndex;\n\t}\n\n\tif (gltfNode.hasOwnProperty('matrix')) {\n\t\ttempMat.data.set(gltfNode.matrix);\n\t\ttempMat.getTranslation(tempVec);\n\t\tentity.setLocalPosition(tempVec);\n\t\ttempMat.getEulerAngles(tempVec);\n\t\tentity.setLocalEulerAngles(tempVec);\n\t\ttempMat.getScale(tempVec);\n\t\tentity.setLocalScale(tempVec);\n\t}\n\n\tif (gltfNode.hasOwnProperty('rotation')) {\n\t\tconst r = gltfNode.rotation;\n\t\tentity.setLocalRotation(r[0], r[1], r[2], r[3]);\n\t}\n\n\tif (gltfNode.hasOwnProperty('translation')) {\n\t\tconst t = gltfNode.translation;\n\t\tentity.setLocalPosition(t[0], t[1], t[2]);\n\t}\n\n\tif (gltfNode.hasOwnProperty('scale')) {\n\t\tconst s = gltfNode.scale;\n\t\tentity.setLocalScale(s[0], s[1], s[2]);\n\t}\n\n\treturn entity;\n};\n\nconst createLight = function createLight(gltfLight, node) {\n\tconst lightProps = {\n\t\ttype: gltfLight.type === \"point\" ? \"omni\" : gltfLight.type,\n\t\tcolor: gltfLight.hasOwnProperty('color') ? new Color(gltfLight.color) : Color.WHITE,\n\t\trange: gltfLight.hasOwnProperty('range') ? gltfLight.range : Number.MAX_VALUE,\n\t\tfalloffMode: LIGHTFALLOFF_INVERSESQUARED,\n\t\tintensity: gltfLight.hasOwnProperty('intensity') ? math.clamp(gltfLight.intensity, 0, 2) : 1\n\t};\n\n\tif (gltfLight.hasOwnProperty('spot')) {\n\t\tlightProps.innerConeAngle = gltfLight.spot.hasOwnProperty('innerConeAngle') ? gltfLight.spot.innerConeAngle * math.RAD_TO_DEG : 0;\n\t\tlightProps.outerConeAngle = gltfLight.spot.hasOwnProperty('outerConeAngle') ? gltfLight.spot.outerConeAngle * math.RAD_TO_DEG : Math.PI / 4;\n\t}\n\n\tvar lightNode = new Entity(node.name);\n\tlightNode.rotateLocal(90, 0, 0);\n\tlightNode.addComponent(\"light\", lightProps);\n\treturn lightNode;\n};\n\nconst createSkins = function createSkins(device, gltf, nodes, bufferViews) {\n\tif (!gltf.hasOwnProperty('skins') || gltf.skins.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst glbSkins = new Map();\n\treturn gltf.skins.map(function (gltfSkin) {\n\t\treturn createSkin(device, gltfSkin, gltf.accessors, bufferViews, nodes, glbSkins);\n\t});\n};\n\nconst createMeshes = function createMeshes(device, gltf, bufferViews, callback, disableFlipV) {\n\tif (!gltf.hasOwnProperty('meshes') || gltf.meshes.length === 0 || !gltf.hasOwnProperty('accessors') || gltf.accessors.length === 0 || !gltf.hasOwnProperty('bufferViews') || gltf.bufferViews.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst vertexBufferDict = {};\n\treturn gltf.meshes.map(function (gltfMesh) {\n\t\treturn createMesh(device, gltfMesh, gltf.accessors, bufferViews, callback, disableFlipV, vertexBufferDict);\n\t});\n};\n\nconst createMaterials = function createMaterials(gltf, textures, options, disableFlipV) {\n\tif (!gltf.hasOwnProperty('materials') || gltf.materials.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.material && options.material.preprocess;\n\tconst process = options && options.material && options.material.process || createMaterial;\n\tconst postprocess = options && options.material && options.material.postprocess;\n\treturn gltf.materials.map(function (gltfMaterial) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfMaterial);\n\t\t}\n\n\t\tconst material = process(gltfMaterial, textures, disableFlipV);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfMaterial, material);\n\t\t}\n\n\t\treturn material;\n\t});\n};\n\nconst createAnimations = function createAnimations(gltf, nodes, bufferViews, options) {\n\tif (!gltf.hasOwnProperty('animations') || gltf.animations.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.animation && options.animation.preprocess;\n\tconst postprocess = options && options.animation && options.animation.postprocess;\n\treturn gltf.animations.map(function (gltfAnimation, index) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfAnimation);\n\t\t}\n\n\t\tconst animation = createAnimation(gltfAnimation, index, gltf.accessors, bufferViews, nodes);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfAnimation, animation);\n\t\t}\n\n\t\treturn animation;\n\t});\n};\n\nconst createNodes = function createNodes(gltf, options) {\n\tif (!gltf.hasOwnProperty('nodes') || gltf.nodes.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.node && options.node.preprocess;\n\tconst process = options && options.node && options.node.process || createNode;\n\tconst postprocess = options && options.node && options.node.postprocess;\n\tconst nodes = gltf.nodes.map(function (gltfNode, index) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfNode);\n\t\t}\n\n\t\tconst node = process(gltfNode, index);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfNode, node);\n\t\t}\n\n\t\treturn node;\n\t});\n\n\tfor (let i = 0; i < gltf.nodes.length; ++i) {\n\t\tconst gltfNode = gltf.nodes[i];\n\n\t\tif (gltfNode.hasOwnProperty('children')) {\n\t\t\tfor (let j = 0; j < gltfNode.children.length; ++j) {\n\t\t\t\tconst parent = nodes[i];\n\t\t\t\tconst child = nodes[gltfNode.children[j]];\n\n\t\t\t\tif (!child.parent) {\n\t\t\t\t\tparent.addChild(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\nconst createScenes = function createScenes(gltf, nodes) {\n\tconst scenes = [];\n\tconst count = gltf.scenes.length;\n\n\tif (count === 1 && gltf.scenes[0].nodes.length === 1) {\n\t\tconst nodeIndex = gltf.scenes[0].nodes[0];\n\t\tscenes.push(nodes[nodeIndex]);\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst scene = gltf.scenes[i];\n\t\t\tconst sceneRoot = new GraphNode(scene.name);\n\n\t\t\tfor (let n = 0; n < scene.nodes.length; n++) {\n\t\t\t\tconst childNode = nodes[scene.nodes[n]];\n\t\t\t\tsceneRoot.addChild(childNode);\n\t\t\t}\n\n\t\t\tscenes.push(sceneRoot);\n\t\t}\n\t}\n\n\treturn scenes;\n};\n\nconst createLights = function createLights(gltf, nodes, options) {\n\tlet lights = null;\n\n\tif (gltf.hasOwnProperty('nodes') && gltf.hasOwnProperty('extensions') && gltf.extensions.hasOwnProperty('KHR_lights_punctual') && gltf.extensions.KHR_lights_punctual.hasOwnProperty('lights')) {\n\t\tconst gltfLights = gltf.extensions.KHR_lights_punctual.lights;\n\n\t\tif (gltfLights.length) {\n\t\t\tconst preprocess = options && options.light && options.light.preprocess;\n\t\t\tconst process = options && options.light && options.light.process || createLight;\n\t\t\tconst postprocess = options && options.light && options.light.postprocess;\n\t\t\tgltf.nodes.forEach(function (gltfNode, nodeIndex) {\n\t\t\t\tif (gltfNode.hasOwnProperty('extensions') && gltfNode.extensions.hasOwnProperty('KHR_lights_punctual') && gltfNode.extensions.KHR_lights_punctual.hasOwnProperty('light')) {\n\t\t\t\t\tconst lightIndex = gltfNode.extensions.KHR_lights_punctual.light;\n\t\t\t\t\tconst gltfLight = gltfLights[lightIndex];\n\n\t\t\t\t\tif (gltfLight) {\n\t\t\t\t\t\tif (preprocess) {\n\t\t\t\t\t\t\tpreprocess(gltfLight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst light = process(gltfLight, nodes[nodeIndex]);\n\n\t\t\t\t\t\tif (postprocess) {\n\t\t\t\t\t\t\tpostprocess(gltfLight, light);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (light) {\n\t\t\t\t\t\t\tif (!lights) lights = new Map();\n\t\t\t\t\t\t\tlights.set(gltfNode, light);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\treturn lights;\n};\n\nconst linkSkins = function linkSkins(gltf, renders, skins) {\n\tgltf.nodes.forEach(gltfNode => {\n\t\tif (gltfNode.hasOwnProperty('mesh') && gltfNode.hasOwnProperty('skin')) {\n\t\t\tconst meshGroup = renders[gltfNode.mesh].meshes;\n\t\t\tmeshGroup.forEach(mesh => {\n\t\t\t\tmesh.skin = skins[gltfNode.skin];\n\t\t\t});\n\t\t}\n\t});\n};\n\nconst createResources = function createResources(device, gltf, bufferViews, textureAssets, options, callback) {\n\tconst preprocess = options && options.global && options.global.preprocess;\n\tconst postprocess = options && options.global && options.global.postprocess;\n\n\tif (preprocess) {\n\t\tpreprocess(gltf);\n\t}\n\n\tconst disableFlipV = !(gltf.asset && gltf.asset.generator === 'PlayCanvas');\n\tconst nodes = createNodes(gltf, options);\n\tconst scenes = createScenes(gltf, nodes);\n\tconst lights = createLights(gltf, nodes, options);\n\tconst animations = createAnimations(gltf, nodes, bufferViews, options);\n\tconst materials = createMaterials(gltf, textureAssets.map(function (textureAsset) {\n\t\treturn textureAsset.resource;\n\t}), options, disableFlipV);\n\tconst meshes = createMeshes(device, gltf, bufferViews, callback, disableFlipV);\n\tconst skins = createSkins(device, gltf, nodes, bufferViews);\n\tconst renders = [];\n\n\tfor (let i = 0; i < meshes.length; i++) {\n\t\trenders[i] = new Render();\n\t\trenders[i].meshes = meshes[i];\n\t}\n\n\tlinkSkins(gltf, renders, skins);\n\tconst result = new GlbResources(gltf);\n\tresult.nodes = nodes;\n\tresult.scenes = scenes;\n\tresult.animations = animations;\n\tresult.textures = textureAssets;\n\tresult.materials = materials;\n\tresult.renders = renders;\n\tresult.skins = skins;\n\tresult.lights = lights;\n\n\tif (postprocess) {\n\t\tpostprocess(gltf, result);\n\t}\n\n\tcallback(null, result);\n};\n\nconst applySampler = function applySampler(texture, gltfSampler) {\n\tconst getFilter = function getFilter(filter, defaultValue) {\n\t\tswitch (filter) {\n\t\t\tcase 9728:\n\t\t\t\treturn FILTER_NEAREST;\n\n\t\t\tcase 9729:\n\t\t\t\treturn FILTER_LINEAR;\n\n\t\t\tcase 9984:\n\t\t\t\treturn FILTER_NEAREST_MIPMAP_NEAREST;\n\n\t\t\tcase 9985:\n\t\t\t\treturn FILTER_LINEAR_MIPMAP_NEAREST;\n\n\t\t\tcase 9986:\n\t\t\t\treturn FILTER_NEAREST_MIPMAP_LINEAR;\n\n\t\t\tcase 9987:\n\t\t\t\treturn FILTER_LINEAR_MIPMAP_LINEAR;\n\n\t\t\tdefault:\n\t\t\t\treturn defaultValue;\n\t\t}\n\t};\n\n\tconst getWrap = function getWrap(wrap, defaultValue) {\n\t\tswitch (wrap) {\n\t\t\tcase 33071:\n\t\t\t\treturn ADDRESS_CLAMP_TO_EDGE;\n\n\t\t\tcase 33648:\n\t\t\t\treturn ADDRESS_MIRRORED_REPEAT;\n\n\t\t\tcase 10497:\n\t\t\t\treturn ADDRESS_REPEAT;\n\n\t\t\tdefault:\n\t\t\t\treturn defaultValue;\n\t\t}\n\t};\n\n\tif (texture) {\n\t\tgltfSampler = gltfSampler || {};\n\t\ttexture.minFilter = getFilter(gltfSampler.minFilter, FILTER_LINEAR_MIPMAP_LINEAR);\n\t\ttexture.magFilter = getFilter(gltfSampler.magFilter, FILTER_LINEAR);\n\t\ttexture.addressU = getWrap(gltfSampler.wrapS, ADDRESS_REPEAT);\n\t\ttexture.addressV = getWrap(gltfSampler.wrapT, ADDRESS_REPEAT);\n\t}\n};\n\nconst loadImageAsync = function loadImageAsync(gltfImage, index, bufferViews, urlBase, registry, options, callback) {\n\tconst preprocess = options && options.image && options.image.preprocess;\n\n\tconst processAsync = options && options.image && options.image.processAsync || function (gltfImage, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.image && options.image.postprocess;\n\n\tconst onLoad = function onLoad(textureAsset) {\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfImage, textureAsset);\n\t\t}\n\n\t\tcallback(null, textureAsset);\n\t};\n\n\tconst loadTexture = function loadTexture(url, mimeType, crossOrigin, isBlobUrl) {\n\t\tconst mimeTypeFileExtensions = {\n\t\t\t'image/png': 'png',\n\t\t\t'image/jpeg': 'jpg',\n\t\t\t'image/basis': 'basis',\n\t\t\t'image/ktx': 'ktx',\n\t\t\t'image/vnd-ms.dds': 'dds'\n\t\t};\n\t\tconst file = {\n\t\t\turl: url\n\t\t};\n\n\t\tif (mimeType) {\n\t\t\tconst extension = mimeTypeFileExtensions[mimeType];\n\n\t\t\tif (extension) {\n\t\t\t\tfile.filename = 'glb-texture-' + index + '.' + extension;\n\t\t\t}\n\t\t}\n\n\t\tconst asset = new Asset('texture_' + index, 'texture', file, null, {\n\t\t\tcrossOrigin: crossOrigin\n\t\t});\n\t\tasset.on('load', function () {\n\t\t\tif (isBlobUrl) {\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t}\n\n\t\t\tonLoad(asset);\n\t\t});\n\t\tasset.on('error', function (err, asset) {\n\t\t\tcallback(err);\n\t\t});\n\t\tregistry.add(asset);\n\t\tregistry.load(asset);\n\t};\n\n\tif (preprocess) {\n\t\tpreprocess(gltfImage);\n\t}\n\n\tprocessAsync(gltfImage, function (err, textureAsset) {\n\t\tif (err) {\n\t\t\tcallback(err);\n\t\t} else if (textureAsset) {\n\t\t\tonLoad(textureAsset);\n\t\t} else {\n\t\t\tif (gltfImage.hasOwnProperty('uri')) {\n\t\t\t\tif (isDataURI(gltfImage.uri)) {\n\t\t\t\t\tloadTexture(gltfImage.uri, getDataURIMimeType(gltfImage.uri));\n\t\t\t\t} else {\n\t\t\t\t\tloadTexture(path.join(urlBase, gltfImage.uri), null, \"anonymous\");\n\t\t\t\t}\n\t\t\t} else if (gltfImage.hasOwnProperty('bufferView') && gltfImage.hasOwnProperty('mimeType')) {\n\t\t\t\tconst blob = new Blob([bufferViews[gltfImage.bufferView]], {\n\t\t\t\t\ttype: gltfImage.mimeType\n\t\t\t\t});\n\t\t\t\tloadTexture(URL.createObjectURL(blob), gltfImage.mimeType, null, true);\n\t\t\t} else {\n\t\t\t\tcallback(\"Invalid image found in gltf (neither uri or bufferView found). index=\" + index);\n\t\t\t}\n\t\t}\n\t});\n};\n\nconst loadTexturesAsync = function loadTexturesAsync(gltf, bufferViews, urlBase, registry, options, callback) {\n\tif (!gltf.hasOwnProperty('images') || gltf.images.length === 0 || !gltf.hasOwnProperty('textures') || gltf.textures.length === 0) {\n\t\tcallback(null, []);\n\t\treturn;\n\t}\n\n\tconst preprocess = options && options.texture && options.texture.preprocess;\n\n\tconst processAsync = options && options.texture && options.texture.processAsync || function (gltfTexture, gltfImages, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.texture && options.texture.postprocess;\n\tconst assets = [];\n\tconst textures = [];\n\tlet remaining = gltf.textures.length;\n\n\tconst onLoad = function onLoad(textureIndex, imageIndex) {\n\t\tif (!textures[imageIndex]) {\n\t\t\ttextures[imageIndex] = [];\n\t\t}\n\n\t\ttextures[imageIndex].push(textureIndex);\n\n\t\tif (--remaining === 0) {\n\t\t\tconst result = [];\n\t\t\ttextures.forEach(function (textureList, imageIndex) {\n\t\t\t\ttextureList.forEach(function (textureIndex, index) {\n\t\t\t\t\tconst textureAsset = index === 0 ? assets[imageIndex] : cloneTextureAsset(assets[imageIndex]);\n\t\t\t\t\tapplySampler(textureAsset.resource, (gltf.samplers || [])[gltf.textures[textureIndex].sampler]);\n\t\t\t\t\tresult[textureIndex] = textureAsset;\n\n\t\t\t\t\tif (postprocess) {\n\t\t\t\t\t\tpostprocess(gltf.textures[textureIndex], textureAsset);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.textures.length; ++i) {\n\t\tconst gltfTexture = gltf.textures[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfTexture);\n\t\t}\n\n\t\tprocessAsync(gltfTexture, gltf.images, function (i, gltfTexture, err, gltfImageIndex) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tif (gltfImageIndex === undefined || gltfImageIndex === null) {\n\t\t\t\t\tgltfImageIndex = gltfTexture.source;\n\t\t\t\t}\n\n\t\t\t\tif (assets[gltfImageIndex]) {\n\t\t\t\t\tonLoad(i, gltfImageIndex);\n\t\t\t\t} else {\n\t\t\t\t\tconst gltfImage = gltf.images[gltfImageIndex];\n\t\t\t\t\tloadImageAsync(gltfImage, i, bufferViews, urlBase, registry, options, function (err, textureAsset) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassets[gltfImageIndex] = textureAsset;\n\t\t\t\t\t\t\tonLoad(i, gltfImageIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(null, i, gltfTexture));\n\t}\n};\n\nconst loadBuffersAsync = function loadBuffersAsync(gltf, binaryChunk, urlBase, options, callback) {\n\tconst result = [];\n\n\tif (!gltf.buffers || gltf.buffers.length === 0) {\n\t\tcallback(null, result);\n\t\treturn;\n\t}\n\n\tconst preprocess = options && options.buffer && options.buffer.preprocess;\n\n\tconst processAsync = options && options.buffer && options.buffer.processAsync || function (gltfBuffer, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.buffer && options.buffer.postprocess;\n\tlet remaining = gltf.buffers.length;\n\n\tconst onLoad = function onLoad(index, buffer) {\n\t\tresult[index] = buffer;\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltf.buffers[index], buffer);\n\t\t}\n\n\t\tif (--remaining === 0) {\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.buffers.length; ++i) {\n\t\tconst gltfBuffer = gltf.buffers[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfBuffer);\n\t\t}\n\n\t\tprocessAsync(gltfBuffer, function (i, gltfBuffer, err, arrayBuffer) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else if (arrayBuffer) {\n\t\t\t\tonLoad(i, new Uint8Array(arrayBuffer));\n\t\t\t} else {\n\t\t\t\tif (gltfBuffer.hasOwnProperty('uri')) {\n\t\t\t\t\tif (isDataURI(gltfBuffer.uri)) {\n\t\t\t\t\t\tconst byteString = atob(gltfBuffer.uri.split(',')[1]);\n\t\t\t\t\t\tconst binaryArray = new Uint8Array(byteString.length);\n\n\t\t\t\t\t\tfor (let j = 0; j < byteString.length; j++) {\n\t\t\t\t\t\t\tbinaryArray[j] = byteString.charCodeAt(j);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonLoad(i, binaryArray);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thttp.get(path.join(urlBase, gltfBuffer.uri), {\n\t\t\t\t\t\t\tcache: true,\n\t\t\t\t\t\t\tresponseType: 'arraybuffer',\n\t\t\t\t\t\t\tretry: false\n\t\t\t\t\t\t}, function (i, err, result) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonLoad(i, new Uint8Array(result));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(null, i));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tonLoad(i, binaryChunk);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(null, i, gltfBuffer));\n\t}\n};\n\nconst parseGltf = function parseGltf(gltfChunk, callback) {\n\tconst decodeBinaryUtf8 = function decodeBinaryUtf8(array) {\n\t\tif (typeof TextDecoder !== 'undefined') {\n\t\t\treturn new TextDecoder().decode(array);\n\t\t}\n\n\t\tlet str = \"\";\n\n\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\tstr += String.fromCharCode(array[i]);\n\t\t}\n\n\t\treturn decodeURIComponent(escape(str));\n\t};\n\n\tconst gltf = JSON.parse(decodeBinaryUtf8(gltfChunk));\n\n\tif (gltf.asset && gltf.asset.version && parseFloat(gltf.asset.version) < 2) {\n\t\tcallback(\"Invalid gltf version. Expected version 2.0 or above but found version '\" + gltf.asset.version + \"'.\");\n\t\treturn;\n\t}\n\n\tcallback(null, gltf);\n};\n\nconst parseGlb = function parseGlb(glbData, callback) {\n\tconst data = new DataView(glbData);\n\tconst magic = data.getUint32(0, true);\n\tconst version = data.getUint32(4, true);\n\tconst length = data.getUint32(8, true);\n\n\tif (magic !== 0x46546C67) {\n\t\tcallback(\"Invalid magic number found in glb header. Expected 0x46546C67, found 0x\" + magic.toString(16));\n\t\treturn;\n\t}\n\n\tif (version !== 2) {\n\t\tcallback(\"Invalid version number found in glb header. Expected 2, found \" + version);\n\t\treturn;\n\t}\n\n\tif (length <= 0 || length > glbData.byteLength) {\n\t\tcallback(\"Invalid length found in glb header. Found \" + length);\n\t\treturn;\n\t}\n\n\tconst chunks = [];\n\tlet offset = 12;\n\n\twhile (offset < length) {\n\t\tconst chunkLength = data.getUint32(offset, true);\n\n\t\tif (offset + chunkLength + 8 > glbData.byteLength) {\n\t\t\tthrow new Error(\"Invalid chunk length found in glb. Found \" + chunkLength);\n\t\t}\n\n\t\tconst chunkType = data.getUint32(offset + 4, true);\n\t\tconst chunkData = new Uint8Array(glbData, offset + 8, chunkLength);\n\t\tchunks.push({\n\t\t\tlength: chunkLength,\n\t\t\ttype: chunkType,\n\t\t\tdata: chunkData\n\t\t});\n\t\toffset += chunkLength + 8;\n\t}\n\n\tif (chunks.length !== 1 && chunks.length !== 2) {\n\t\tcallback(\"Invalid number of chunks found in glb file.\");\n\t\treturn;\n\t}\n\n\tif (chunks[0].type !== 0x4E4F534A) {\n\t\tcallback(\"Invalid chunk type found in glb file. Expected 0x4E4F534A, found 0x\" + chunks[0].type.toString(16));\n\t\treturn;\n\t}\n\n\tif (chunks.length > 1 && chunks[1].type !== 0x004E4942) {\n\t\tcallback(\"Invalid chunk type found in glb file. Expected 0x004E4942, found 0x\" + chunks[1].type.toString(16));\n\t\treturn;\n\t}\n\n\tcallback(null, {\n\t\tgltfChunk: chunks[0].data,\n\t\tbinaryChunk: chunks.length === 2 ? chunks[1].data : null\n\t});\n};\n\nconst parseChunk = function parseChunk(filename, data, callback) {\n\tif (filename && filename.toLowerCase().endsWith('.glb')) {\n\t\tparseGlb(data, callback);\n\t} else {\n\t\tcallback(null, {\n\t\t\tgltfChunk: data,\n\t\t\tbinaryChunk: null\n\t\t});\n\t}\n};\n\nconst parseBufferViewsAsync = function parseBufferViewsAsync(gltf, buffers, options, callback) {\n\tconst result = [];\n\tconst preprocess = options && options.bufferView && options.bufferView.preprocess;\n\n\tconst processAsync = options && options.bufferView && options.bufferView.processAsync || function (gltfBufferView, buffers, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.bufferView && options.bufferView.postprocess;\n\tlet remaining = gltf.bufferViews ? gltf.bufferViews.length : 0;\n\n\tif (!remaining) {\n\t\tcallback(null, null);\n\t\treturn;\n\t}\n\n\tconst onLoad = function onLoad(index, bufferView) {\n\t\tconst gltfBufferView = gltf.bufferViews[index];\n\n\t\tif (gltfBufferView.hasOwnProperty('byteStride')) {\n\t\t\tbufferView.byteStride = gltfBufferView.byteStride;\n\t\t}\n\n\t\tresult[index] = bufferView;\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfBufferView, bufferView);\n\t\t}\n\n\t\tif (--remaining === 0) {\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.bufferViews.length; ++i) {\n\t\tconst gltfBufferView = gltf.bufferViews[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfBufferView);\n\t\t}\n\n\t\tprocessAsync(gltfBufferView, buffers, function (i, gltfBufferView, err, result) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else if (result) {\n\t\t\t\tonLoad(i, result);\n\t\t\t} else {\n\t\t\t\tconst buffer = buffers[gltfBufferView.buffer];\n\t\t\t\tconst typedArray = new Uint8Array(buffer.buffer, buffer.byteOffset + (gltfBufferView.byteOffset || 0), gltfBufferView.byteLength);\n\t\t\t\tonLoad(i, typedArray);\n\t\t\t}\n\t\t}.bind(null, i, gltfBufferView));\n\t}\n};\n\nclass GlbParser {\n\tstatic parseAsync(filename, urlBase, data, device, registry, options, callback) {\n\t\tparseChunk(filename, data, function (err, chunks) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tparseGltf(chunks.gltfChunk, function (err, gltf) {\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tloadBuffersAsync(gltf, chunks.binaryChunk, urlBase, options, function (err, buffers) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tparseBufferViewsAsync(gltf, buffers, options, function (err, bufferViews) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloadTexturesAsync(gltf, bufferViews, urlBase, registry, options, function (err, textureAssets) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcreateResources(device, gltf, bufferViews, textureAssets, options, callback);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic parse(filename, data, device, options) {\n\t\tlet result = null;\n\t\toptions = options || {};\n\t\tparseChunk(filename, data, function (err, chunks) {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t} else {\n\t\t\t\tparseGltf(chunks.gltfChunk, function (err, gltf) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparseBufferViewsAsync(gltf, [chunks.binaryChunk], options, function (err, bufferViews) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcreateResources(device, gltf, bufferViews, [], options, function (err, result_) {\n\t\t\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tresult = result_;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n}\n\nclass AnimationHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:') || url.load.startsWith('data:')) {\n\t\t\tif (path.getExtension(url.original).toLowerCase() === '.glb') {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t} else {\n\t\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t\t}\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tif (path.getExtension(url).toLowerCase() === '.glb') {\n\t\t\tconst glbResources = GlbParser.parse(\"filename.glb\", data, null);\n\n\t\t\tif (glbResources) {\n\t\t\t\tconst animations = glbResources.animations;\n\t\t\t\tglbResources.destroy();\n\t\t\t\treturn animations;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[\"_parseAnimationV\" + data.animation.version](data);\n\t}\n\n\t_parseAnimationV3(data) {\n\t\tconst animData = data.animation;\n\t\tconst anim = new Animation();\n\t\tanim.name = animData.name;\n\t\tanim.duration = animData.duration;\n\n\t\tfor (let i = 0; i < animData.nodes.length; i++) {\n\t\t\tconst node = new Node();\n\t\t\tconst n = animData.nodes[i];\n\t\t\tnode._name = n.name;\n\n\t\t\tfor (let j = 0; j < n.keys.length; j++) {\n\t\t\t\tconst k = n.keys[j];\n\t\t\t\tconst t = k.time;\n\t\t\t\tconst p = k.pos;\n\t\t\t\tconst r = k.rot;\n\t\t\t\tconst s = k.scale;\n\t\t\t\tconst pos = new Vec3(p[0], p[1], p[2]);\n\t\t\t\tconst rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);\n\t\t\t\tconst scl = new Vec3(s[0], s[1], s[2]);\n\t\t\t\tconst key = new Key(t, pos, rot, scl);\n\n\t\t\t\tnode._keys.push(key);\n\t\t\t}\n\n\t\t\tanim.addNode(node);\n\t\t}\n\n\t\treturn anim;\n\t}\n\n\t_parseAnimationV4(data) {\n\t\tconst animData = data.animation;\n\t\tconst anim = new Animation();\n\t\tanim.name = animData.name;\n\t\tanim.duration = animData.duration;\n\n\t\tfor (let i = 0; i < animData.nodes.length; i++) {\n\t\t\tconst node = new Node();\n\t\t\tconst n = animData.nodes[i];\n\t\t\tnode._name = n.name;\n\t\t\tconst defPos = n.defaults.p;\n\t\t\tconst defRot = n.defaults.r;\n\t\t\tconst defScl = n.defaults.s;\n\n\t\t\tfor (let j = 0; j < n.keys.length; j++) {\n\t\t\t\tconst k = n.keys[j];\n\t\t\t\tconst t = k.t;\n\t\t\t\tconst p = defPos ? defPos : k.p;\n\t\t\t\tconst r = defRot ? defRot : k.r;\n\t\t\t\tconst s = defScl ? defScl : k.s;\n\t\t\t\tconst pos = new Vec3(p[0], p[1], p[2]);\n\t\t\t\tconst rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);\n\t\t\t\tconst scl = new Vec3(s[0], s[1], s[2]);\n\t\t\t\tconst key = new Key(t, pos, rot, scl);\n\n\t\t\t\tnode._keys.push(key);\n\t\t\t}\n\n\t\t\tanim.addNode(node);\n\t\t}\n\n\t\treturn anim;\n\t}\n\n}\n\nclass AnimClipHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation clip resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tconst name = data.name;\n\t\tconst duration = data.duration;\n\t\tconst inputs = data.inputs.map(function (input) {\n\t\t\treturn new AnimData(1, input);\n\t\t});\n\t\tconst outputs = data.outputs.map(function (output) {\n\t\t\treturn new AnimData(output.components, output.data);\n\t\t});\n\t\tconst curves = data.curves.map(function (curve) {\n\t\t\treturn new AnimCurve([curve.path], curve.inputIndex, curve.outputIndex, curve.interpolation);\n\t\t});\n\t\treturn new AnimTrack(name, duration, inputs, outputs, curves);\n\t}\n\n}\n\nclass AnimStateGraph {\n\tconstructor(data) {\n\t\tthis._layers = [];\n\t\tthis._parameters = {};\n\t\tvar i;\n\n\t\tif (!Array.isArray(data.layers)) {\n\t\t\tfor (var layerId in data.layers) {\n\t\t\t\tvar dataLayer = data.layers[layerId];\n\t\t\t\tvar layer = {\n\t\t\t\t\tname: dataLayer.name,\n\t\t\t\t\tstates: [],\n\t\t\t\t\ttransitions: []\n\t\t\t\t};\n\n\t\t\t\tfor (i = 0; i < dataLayer.states.length; i++) {\n\t\t\t\t\tlayer.states.push(data.states[dataLayer.states[i]]);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < dataLayer.transitions.length; i++) {\n\t\t\t\t\tvar dataLayerTransition = data.transitions[dataLayer.transitions[i]];\n\n\t\t\t\t\tif (dataLayerTransition.conditions && !Array.isArray(dataLayerTransition.conditions)) {\n\t\t\t\t\t\tvar conditionKeys = Object.keys(dataLayerTransition.conditions);\n\t\t\t\t\t\tvar conditions = [];\n\n\t\t\t\t\t\tfor (var j = 0; j < conditionKeys.length; j++) {\n\t\t\t\t\t\t\tvar condition = dataLayerTransition.conditions[conditionKeys[j]];\n\n\t\t\t\t\t\t\tif (condition.parameterName) {\n\t\t\t\t\t\t\t\tconditions.push(condition);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataLayerTransition.conditions = conditions;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Number.isInteger(dataLayerTransition.from)) {\n\t\t\t\t\t\tdataLayerTransition.from = data.states[dataLayerTransition.from].name;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Number.isInteger(dataLayerTransition.to)) {\n\t\t\t\t\t\tdataLayerTransition.to = data.states[dataLayerTransition.to].name;\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer.transitions.push(dataLayerTransition);\n\t\t\t\t}\n\n\t\t\t\tthis._layers.push(layer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._layers = data.layers;\n\t\t}\n\n\t\tfor (var paramId in data.parameters) {\n\t\t\tvar param = data.parameters[paramId];\n\t\t\tthis._parameters[param.name] = {\n\t\t\t\ttype: param.type,\n\t\t\t\tvalue: param.value\n\t\t\t};\n\t\t}\n\t}\n\n\tget parameters() {\n\t\treturn Object.assign({}, this._parameters);\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n}\n\nclass AnimStateGraphHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation state graph resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn new AnimStateGraph(data);\n\t}\n\n}\n\nclass Sound {\n\tconstructor(resource) {\n\t\tif (resource instanceof Audio) {\n\t\t\tthis.audio = resource;\n\t\t} else {\n\t\t\tthis.buffer = resource;\n\t\t}\n\t}\n\n\tget duration() {\n\t\tlet duration = 0;\n\n\t\tif (this.buffer) {\n\t\t\tduration = this.buffer.duration;\n\t\t} else if (this.audio) {\n\t\t\tduration = this.audio.duration;\n\t\t}\n\n\t\treturn duration || 0;\n\t}\n\n}\n\nconst ie = function () {\n\tif (typeof window === 'undefined') {\n\t\treturn false;\n\t}\n\n\tconst ua = window.navigator.userAgent;\n\tconst msie = ua.indexOf('MSIE ');\n\n\tif (msie > 0) {\n\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n\t}\n\n\tconst trident = ua.indexOf('Trident/');\n\n\tif (trident > 0) {\n\t\tconst rv = ua.indexOf('rv:');\n\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n\t}\n\n\treturn false;\n}();\n\nconst toMIME = {\n\t'.ogg': 'audio/ogg',\n\t'.mp3': 'audio/mpeg',\n\t'.wav': 'audio/x-wav',\n\t'.mp4a': 'audio/mp4',\n\t'.m4a': 'audio/mp4',\n\t'.mp4': 'audio/mp4',\n\t'.aac': 'audio/aac'\n};\n\nclass AudioHandler {\n\tconstructor(manager) {\n\t\tthis.manager = manager;\n\t\tthis.maxRetries = 0;\n\t}\n\n\t_isSupported(url) {\n\t\tconst ext = path.getExtension(url);\n\n\t\tif (toMIME[ext]) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst success = function success(resource) {\n\t\t\tcallback(null, new Sound(resource));\n\t\t};\n\n\t\tconst error = function error(err) {\n\t\t\tlet msg = 'Error loading audio url: ' + url.original;\n\n\t\t\tif (err) {\n\t\t\t\tmsg += ': ' + (err.message || err);\n\t\t\t}\n\n\t\t\tconsole.warn(msg);\n\t\t\tcallback(msg);\n\t\t};\n\n\t\tif (this._createSound) {\n\t\t\tif (!this._isSupported(url.original)) {\n\t\t\t\terror(\"Audio format for \" + url.original + \" not supported\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._createSound(url.load, success, error);\n\t\t} else {\n\t\t\terror(null);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\t_createSound(url, success, error) {\n\t\tif (hasAudioContext()) {\n\t\t\tconst manager = this.manager;\n\n\t\t\tif (!manager.context) {\n\t\t\t\terror('Audio manager has no audio context');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst options = {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t};\n\n\t\t\tif (url.startsWith('blob:') || url.startsWith('data:')) {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t}\n\n\t\t\thttp.get(url, options, function (err, response) {\n\t\t\t\tif (err) {\n\t\t\t\t\terror(err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmanager.context.decodeAudioData(response, success, error);\n\t\t\t});\n\t\t} else {\n\t\t\tlet audio = null;\n\n\t\t\ttry {\n\t\t\t\taudio = new Audio();\n\t\t\t} catch (e) {\n\t\t\t\terror(\"No support for Audio element\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (ie) {\n\t\t\t\tdocument.body.appendChild(audio);\n\t\t\t}\n\n\t\t\tconst onReady = function onReady() {\n\t\t\t\taudio.removeEventListener('canplaythrough', onReady);\n\n\t\t\t\tif (ie) {\n\t\t\t\t\tdocument.body.removeChild(audio);\n\t\t\t\t}\n\n\t\t\t\tsuccess(audio);\n\t\t\t};\n\n\t\t\taudio.onerror = function () {\n\t\t\t\taudio.onerror = null;\n\n\t\t\t\tif (ie) {\n\t\t\t\t\tdocument.body.removeChild(audio);\n\t\t\t\t}\n\n\t\t\t\terror();\n\t\t\t};\n\n\t\t\taudio.addEventListener('canplaythrough', onReady);\n\t\t\taudio.src = url;\n\t\t}\n\t}\n\n}\n\nclass BinaryHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading binary resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass Bundle {\n\tconstructor(files) {\n\t\tthis._blobUrls = {};\n\n\t\tfor (var i = 0, len = files.length; i < len; i++) {\n\t\t\tif (files[i].url) {\n\t\t\t\tthis._blobUrls[files[i].name] = files[i].url;\n\t\t\t}\n\t\t}\n\t}\n\n\thasBlobUrl(url) {\n\t\treturn !!this._blobUrls[url];\n\t}\n\n\tgetBlobUrl(url) {\n\t\treturn this._blobUrls[url];\n\t}\n\n\tdestroy() {\n\t\tfor (var key in this._blobUrls) {\n\t\t\tURL.revokeObjectURL(this._blobUrls[key]);\n\t\t}\n\n\t\tthis._blobUrls = null;\n\t}\n\n}\n\nlet Untar;\n\nfunction UntarScope(isWorker) {\n\tlet utfDecoder;\n\tlet asciiDecoder;\n\n\tif (typeof TextDecoder !== 'undefined') {\n\t\tutfDecoder = new TextDecoder('utf-8');\n\t\tasciiDecoder = new TextDecoder('windows-1252');\n\t} else {\n\t\tconsole.warn('TextDecoder not supported - pc.Untar module will not work');\n\t}\n\n\tfunction PaxHeader(fields) {\n\t\tthis._fields = fields;\n\t}\n\n\tPaxHeader.parse = function (buffer, start, length) {\n\t\tconst paxArray = new Uint8Array(buffer, start, length);\n\t\tlet bytesRead = 0;\n\t\tconst fields = [];\n\n\t\twhile (bytesRead < length) {\n\t\t\tlet spaceIndex;\n\n\t\t\tfor (spaceIndex = bytesRead; spaceIndex < length; spaceIndex++) {\n\t\t\t\tif (paxArray[spaceIndex] === 0x20) break;\n\t\t\t}\n\n\t\t\tif (spaceIndex >= length) {\n\t\t\t\tthrow new Error('Invalid PAX header data format.');\n\t\t\t}\n\n\t\t\tconst fieldLength = parseInt(utfDecoder.decode(new Uint8Array(buffer, start + bytesRead, spaceIndex - bytesRead)), 10);\n\t\t\tconst fieldText = utfDecoder.decode(new Uint8Array(buffer, start + spaceIndex + 1, fieldLength - (spaceIndex - bytesRead) - 2));\n\t\t\tconst field = fieldText.split('=');\n\n\t\t\tif (field.length !== 2) {\n\t\t\t\tthrow new Error('Invalid PAX header data format.');\n\t\t\t}\n\n\t\t\tif (field[1].length === 0) {\n\t\t\t\tfield[1] = null;\n\t\t\t}\n\n\t\t\tfields.push({\n\t\t\t\tname: field[0],\n\t\t\t\tvalue: field[1]\n\t\t\t});\n\t\t\tbytesRead += fieldLength;\n\t\t}\n\n\t\treturn new PaxHeader(fields);\n\t};\n\n\tPaxHeader.prototype.applyHeader = function (file) {\n\t\tfor (let i = 0; i < this._fields.length; i++) {\n\t\t\tlet fieldName = this._fields[i].name;\n\t\t\tconst fieldValue = this._fields[i].value;\n\n\t\t\tif (fieldName === 'path') {\n\t\t\t\tfieldName = 'name';\n\t\t\t}\n\n\t\t\tif (fieldValue === null) {\n\t\t\t\tdelete file[fieldName];\n\t\t\t} else {\n\t\t\t\tfile[fieldName] = fieldValue;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction UntarInternal(arrayBuffer) {\n\t\tthis._arrayBuffer = arrayBuffer || new ArrayBuffer(0);\n\t\tthis._bufferView = new DataView(this._arrayBuffer);\n\t\tthis._globalPaxHeader = null;\n\t\tthis._paxHeader = null;\n\t\tthis._bytesRead = 0;\n\t}\n\n\tif (!isWorker) {\n\t\tUntar = UntarInternal;\n\t}\n\n\tUntarInternal.prototype._hasNext = function () {\n\t\treturn this._bytesRead + 4 < this._arrayBuffer.byteLength && this._bufferView.getUint32(this._bytesRead) !== 0;\n\t};\n\n\tUntarInternal.prototype._readNextFile = function () {\n\t\tconst headersDataView = new DataView(this._arrayBuffer, this._bytesRead, 512);\n\t\tconst headers = asciiDecoder.decode(headersDataView);\n\t\tthis._bytesRead += 512;\n\t\tlet name = headers.substr(0, 100).replace(/\\0/g, '');\n\t\tconst ustarFormat = headers.substr(257, 6);\n\t\tconst size = parseInt(headers.substr(124, 12), 8);\n\t\tconst type = headers.substr(156, 1);\n\t\tconst start = this._bytesRead;\n\t\tlet url = null;\n\t\tlet normalFile = false;\n\n\t\tswitch (type) {\n\t\t\tcase \"0\":\n\t\t\tcase \"\":\n\t\t\t\tnormalFile = true;\n\n\t\t\t\tif (!isWorker) {\n\t\t\t\t\tconst blob = new Blob([this._arrayBuffer.slice(this._bytesRead, this._bytesRead + size)]);\n\t\t\t\t\turl = URL.createObjectURL(blob);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"g\":\n\t\t\t\tthis._globalPaxHeader = PaxHeader.parse(this._arrayBuffer, this._bytesRead, size);\n\t\t\t\tbreak;\n\n\t\t\tcase \"x\":\n\t\t\t\tthis._paxHeader = PaxHeader.parse(this._arrayBuffer, this._bytesRead, size);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._bytesRead += size;\n\t\tconst remainder = size % 512;\n\n\t\tif (remainder !== 0) {\n\t\t\tthis._bytesRead += 512 - remainder;\n\t\t}\n\n\t\tif (!normalFile) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (ustarFormat.indexOf(\"ustar\") !== -1) {\n\t\t\tconst namePrefix = headers.substr(345, 155).replace(/\\0/g, '');\n\n\t\t\tif (namePrefix.length > 0) {\n\t\t\t\tname = namePrefix.trim() + name.trim();\n\t\t\t}\n\t\t}\n\n\t\tconst file = {\n\t\t\tname: name,\n\t\t\tstart: start,\n\t\t\tsize: size,\n\t\t\turl: url\n\t\t};\n\n\t\tif (this._globalPaxHeader) {\n\t\t\tthis._globalPaxHeader.applyHeader(file);\n\t\t}\n\n\t\tif (this._paxHeader) {\n\t\t\tthis._paxHeader.applyHeader(file);\n\n\t\t\tthis._paxHeader = null;\n\t\t}\n\n\t\treturn file;\n\t};\n\n\tUntarInternal.prototype.untar = function (filenamePrefix) {\n\t\tif (!utfDecoder) {\n\t\t\tconsole.error('Cannot untar because TextDecoder interface is not available for this platform.');\n\t\t\treturn [];\n\t\t}\n\n\t\tconst files = [];\n\n\t\twhile (this._hasNext()) {\n\t\t\tconst file = this._readNextFile();\n\n\t\t\tif (!file) continue;\n\n\t\t\tif (filenamePrefix && file.name) {\n\t\t\t\tfile.name = filenamePrefix + file.name;\n\t\t\t}\n\n\t\t\tfiles.push(file);\n\t\t}\n\n\t\treturn files;\n\t};\n\n\tif (isWorker) {\n\t\tself.onmessage = function (e) {\n\t\t\tconst id = e.data.id;\n\n\t\t\ttry {\n\t\t\t\tconst archive = new UntarInternal(e.data.arrayBuffer);\n\t\t\t\tconst files = archive.untar(e.data.prefix);\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: id,\n\t\t\t\t\tfiles: files,\n\t\t\t\t\tarrayBuffer: e.data.arrayBuffer\n\t\t\t\t}, [e.data.arrayBuffer]);\n\t\t\t} catch (err) {\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: id,\n\t\t\t\t\terror: err.toString()\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n}\n\nlet workerUrl = null;\n\nfunction getWorkerUrl() {\n\tif (!workerUrl) {\n\t\tconst code = '(' + UntarScope.toString() + ')(true)\\n\\n';\n\t\tconst blob = new Blob([code], {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tworkerUrl = URL.createObjectURL(blob);\n\t}\n\n\treturn workerUrl;\n}\n\nclass UntarWorker {\n\tconstructor(filenamePrefix) {\n\t\tthis._requestId = 0;\n\t\tthis._pendingRequests = {};\n\t\tthis._filenamePrefix = filenamePrefix;\n\t\tthis._worker = new Worker(getWorkerUrl());\n\n\t\tthis._worker.addEventListener('message', this._onMessage.bind(this));\n\t}\n\n\t_onMessage(e) {\n\t\tconst id = e.data.id;\n\t\tif (!this._pendingRequests[id]) return;\n\t\tconst callback = this._pendingRequests[id];\n\t\tdelete this._pendingRequests[id];\n\n\t\tif (e.data.error) {\n\t\t\tcallback(e.data.error);\n\t\t} else {\n\t\t\tconst arrayBuffer = e.data.arrayBuffer;\n\n\t\t\tfor (let i = 0, len = e.data.files.length; i < len; i++) {\n\t\t\t\tconst file = e.data.files[i];\n\t\t\t\tconst blob = new Blob([arrayBuffer.slice(file.start, file.start + file.size)]);\n\t\t\t\tfile.url = URL.createObjectURL(blob);\n\t\t\t}\n\n\t\t\tcallback(null, e.data.files);\n\t\t}\n\t}\n\n\tuntar(arrayBuffer, callback) {\n\t\tconst id = this._requestId++;\n\t\tthis._pendingRequests[id] = callback;\n\n\t\tthis._worker.postMessage({\n\t\t\tid: id,\n\t\t\tprefix: this._filenamePrefix,\n\t\t\tarrayBuffer: arrayBuffer\n\t\t}, [arrayBuffer]);\n\t}\n\n\thasPendingRequests() {\n\t\tfor (const key in this._pendingRequests) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdestroy() {\n\t\tif (this._worker) {\n\t\t\tthis._worker.terminate();\n\n\t\t\tthis._worker = null;\n\t\t\tthis._pendingRequests = null;\n\t\t}\n\t}\n\n}\n\nUntarScope();\n\nclass BundleHandler {\n\tconstructor(assets) {\n\t\tthis._assets = assets;\n\t\tthis._worker = null;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\thttp.get(url.load, {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\ttry {\n\t\t\t\t\tself._untar(response, callback);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tcallback(\"Error loading bundle resource \" + url.original + \": \" + ex);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading bundle resource \" + url.original + \": \" + err);\n\t\t\t}\n\t\t});\n\t}\n\n\t_untar(response, callback) {\n\t\tconst self = this;\n\n\t\tif (platform.workers) {\n\t\t\tif (!self._worker) {\n\t\t\t\tself._worker = new UntarWorker(self._assets.prefix);\n\t\t\t}\n\n\t\t\tself._worker.untar(response, function (err, files) {\n\t\t\t\tcallback(err, files);\n\n\t\t\t\tif (!self._worker.hasPendingRequests()) {\n\t\t\t\t\tself._worker.destroy();\n\n\t\t\t\t\tself._worker = null;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconst archive = new Untar(response);\n\t\t\tconst files = archive.untar(self._assets.prefix);\n\t\t\tcallback(null, files);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\treturn new Bundle(data);\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass SkinInstanceCachedObject extends RefCountedObject {\n\tconstructor(skin, skinInstance) {\n\t\tsuper();\n\t\tthis.skin = skin;\n\t\tthis.skinInstance = skinInstance;\n\t}\n\n}\n\nclass SkinInstanceCache {\n\tstatic createCachedSkinedInstance(skin, rootBone, entity) {\n\t\tlet skinInst = SkinInstanceCache.getCachedSkinInstance(skin, rootBone);\n\n\t\tif (!skinInst) {\n\t\t\tskinInst = new SkinInstance(skin);\n\t\t\tskinInst.resolve(rootBone, entity);\n\t\t\tSkinInstanceCache.addCachedSkinInstance(skin, rootBone, skinInst);\n\t\t}\n\n\t\treturn skinInst;\n\t}\n\n\tstatic getCachedSkinInstance(skin, rootBone) {\n\t\tlet skinInstance = null;\n\n\t\tconst cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\tif (cachedObjArray) {\n\t\t\tconst cachedObj = cachedObjArray.find(element => element.skin === skin);\n\n\t\t\tif (cachedObj) {\n\t\t\t\tcachedObj.incRefCount();\n\t\t\t\tskinInstance = cachedObj.skinInstance;\n\t\t\t}\n\t\t}\n\n\t\treturn skinInstance;\n\t}\n\n\tstatic addCachedSkinInstance(skin, rootBone, skinInstance) {\n\t\tlet cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\tif (!cachedObjArray) {\n\t\t\tcachedObjArray = [];\n\n\t\t\tSkinInstanceCache._skinInstanceCache.set(rootBone, cachedObjArray);\n\t\t}\n\n\t\tlet cachedObj = cachedObjArray.find(element => element.skin === skin);\n\n\t\tif (!cachedObj) {\n\t\t\tcachedObj = new SkinInstanceCachedObject(skin, skinInstance);\n\t\t\tcachedObjArray.push(cachedObj);\n\t\t}\n\n\t\tcachedObj.incRefCount();\n\t}\n\n\tstatic removeCachedSkinInstance(skinInstance) {\n\t\tif (skinInstance) {\n\t\t\tconst rootBone = skinInstance.rootBone;\n\n\t\t\tif (rootBone) {\n\t\t\t\tconst cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\t\t\tif (cachedObjArray) {\n\t\t\t\t\tconst cachedObjIndex = cachedObjArray.findIndex(element => element.skinInstance === skinInstance);\n\n\t\t\t\t\tif (cachedObjIndex >= 0) {\n\t\t\t\t\t\tconst cachedObj = cachedObjArray[cachedObjIndex];\n\t\t\t\t\t\tcachedObj.decRefCount();\n\n\t\t\t\t\t\tif (cachedObj.getRefCount() === 0) {\n\t\t\t\t\t\t\tcachedObjArray.splice(cachedObjIndex, 1);\n\n\t\t\t\t\t\t\tif (!cachedObjArray.length) {\n\t\t\t\t\t\t\t\tSkinInstanceCache._skinInstanceCache.delete(rootBone);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (skinInstance) {\n\t\t\t\t\t\t\t\tskinInstance.destroy();\n\t\t\t\t\t\t\t\tcachedObj.skinInstance = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nSkinInstanceCache._skinInstanceCache = new Map();\n\nclass ContainerResource {\n\tconstructor(data) {\n\t\tthis.data = data;\n\t\tthis._model = null;\n\t\tthis.renders = [];\n\t\tthis.materials = [];\n\t\tthis.textures = [];\n\t\tthis.animations = [];\n\t\tthis.registry = null;\n\t\tthis._defaultMaterial = null;\n\t\tthis._assetName = null;\n\t\tthis._assets = null;\n\t}\n\n\tget model() {\n\t\tif (!this._model) {\n\t\t\tconst model = ContainerResource.createModel(this.data, this._defaultMaterial);\n\t\t\tconst modelAsset = ContainerResource.createAsset(this._assetName, 'model', model, 0);\n\n\t\t\tthis._assets.add(modelAsset);\n\n\t\t\tthis._model = modelAsset;\n\t\t}\n\n\t\treturn this._model;\n\t}\n\n\tstatic createAsset(assetName, type, resource, index) {\n\t\tconst subAsset = new Asset(assetName + '/' + type + '/' + index, type, {\n\t\t\turl: ''\n\t\t});\n\t\tsubAsset.resource = resource;\n\t\tsubAsset.loaded = true;\n\t\treturn subAsset;\n\t}\n\n\tinstantiateModelEntity(options) {\n\t\tconst entity = new Entity();\n\t\tentity.addComponent(\"model\", Object.assign({\n\t\t\ttype: \"asset\",\n\t\t\tasset: this.model\n\t\t}, options));\n\t\treturn entity;\n\t}\n\n\tinstantiateRenderEntity(options) {\n\t\tconst defaultMaterial = this._defaultMaterial;\n\t\tconst skinedMeshInstances = [];\n\n\t\tconst createMeshInstance = function createMeshInstance(root, entity, mesh, materials, skins, gltfNode) {\n\t\t\tconst material = mesh.materialIndex === undefined ? defaultMaterial : materials[mesh.materialIndex];\n\t\t\tconst meshInstance = new MeshInstance(mesh, material);\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tmeshInstance.morphInstance = new MorphInstance(mesh.morph);\n\t\t\t}\n\n\t\t\tif (gltfNode.hasOwnProperty('skin')) {\n\t\t\t\tskinedMeshInstances.push({\n\t\t\t\t\tmeshInstance: meshInstance,\n\t\t\t\t\trootBone: root,\n\t\t\t\t\tentity: entity\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn meshInstance;\n\t\t};\n\n\t\tconst cloneHierarchy = function cloneHierarchy(root, node, glb) {\n\t\t\tconst entity = new Entity();\n\n\t\t\tnode._cloneInternal(entity);\n\n\t\t\tif (!root) root = entity;\n\t\t\tlet attachedMi = null;\n\n\t\t\tfor (let i = 0; i < glb.nodes.length; i++) {\n\t\t\t\tconst glbNode = glb.nodes[i];\n\n\t\t\t\tif (glbNode === node) {\n\t\t\t\t\tconst gltfNode = glb.gltf.nodes[i];\n\n\t\t\t\t\tif (gltfNode.hasOwnProperty('mesh')) {\n\t\t\t\t\t\tconst meshGroup = glb.renders[gltfNode.mesh].meshes;\n\n\t\t\t\t\t\tfor (var mi = 0; mi < meshGroup.length; mi++) {\n\t\t\t\t\t\t\tconst mesh = meshGroup[mi];\n\n\t\t\t\t\t\t\tif (mesh) {\n\t\t\t\t\t\t\t\tconst cloneMi = createMeshInstance(root, entity, mesh, glb.materials, glb.skins, gltfNode);\n\n\t\t\t\t\t\t\t\tif (!attachedMi) {\n\t\t\t\t\t\t\t\t\tattachedMi = [];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tattachedMi.push(cloneMi);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (glb.lights) {\n\t\t\t\t\t\tconst lightEntity = glb.lights.get(gltfNode);\n\n\t\t\t\t\t\tif (lightEntity) {\n\t\t\t\t\t\t\tentity.addChild(lightEntity.clone());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attachedMi) {\n\t\t\t\tentity.addComponent(\"render\", Object.assign({\n\t\t\t\t\ttype: \"asset\",\n\t\t\t\t\tmeshInstances: attachedMi\n\t\t\t\t}, options));\n\t\t\t}\n\n\t\t\tconst children = node.children;\n\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tconst childClone = cloneHierarchy(root, children[i], glb);\n\t\t\t\tentity.addChild(childClone);\n\t\t\t}\n\n\t\t\treturn entity;\n\t\t};\n\n\t\tconst sceneClones = [];\n\n\t\tfor (const scene of this.data.scenes) {\n\t\t\tsceneClones.push(cloneHierarchy(null, scene, this.data));\n\t\t}\n\n\t\tskinedMeshInstances.forEach(data => {\n\t\t\tdata.meshInstance.skinInstance = SkinInstanceCache.createCachedSkinedInstance(data.meshInstance.mesh.skin, data.rootBone, data.entity);\n\t\t});\n\t\treturn ContainerResource.createSceneHierarchy(sceneClones, \"Entity\");\n\t}\n\n\tstatic createSceneHierarchy(sceneNodes, nodeType) {\n\t\tlet root = null;\n\n\t\tif (sceneNodes.length === 1) {\n\t\t\troot = sceneNodes[0];\n\t\t} else {\n\t\t\troot = new nodeType('SceneGroup');\n\n\t\t\tfor (const scene of sceneNodes) {\n\t\t\t\troot.addChild(scene);\n\t\t\t}\n\t\t}\n\n\t\treturn root;\n\t}\n\n\tstatic createModel(glb, defaultMaterial) {\n\t\tconst createMeshInstance = function createMeshInstance(model, mesh, skins, skinInstances, materials, node, gltfNode) {\n\t\t\tconst material = mesh.materialIndex === undefined ? defaultMaterial : materials[mesh.materialIndex];\n\t\t\tconst meshInstance = new MeshInstance(mesh, material, node);\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tconst morphInstance = new MorphInstance(mesh.morph);\n\t\t\t\tmeshInstance.morphInstance = morphInstance;\n\t\t\t\tmodel.morphInstances.push(morphInstance);\n\t\t\t}\n\n\t\t\tif (gltfNode.hasOwnProperty('skin')) {\n\t\t\t\tconst skinIndex = gltfNode.skin;\n\t\t\t\tconst skin = skins[skinIndex];\n\t\t\t\tmesh.skin = skin;\n\t\t\t\tconst skinInstance = skinInstances[skinIndex];\n\t\t\t\tmeshInstance.skinInstance = skinInstance;\n\t\t\t\tmodel.skinInstances.push(skinInstance);\n\t\t\t}\n\n\t\t\tmodel.meshInstances.push(meshInstance);\n\t\t};\n\n\t\tconst model = new Model();\n\t\tconst skinInstances = [];\n\n\t\tfor (const skin of glb.skins) {\n\t\t\tconst skinInstance = new SkinInstance(skin);\n\t\t\tskinInstance.bones = skin.bones;\n\t\t\tskinInstances.push(skinInstance);\n\t\t}\n\n\t\tmodel.graph = ContainerResource.createSceneHierarchy(glb.scenes, \"GraphNode\");\n\n\t\tfor (let i = 0; i < glb.nodes.length; i++) {\n\t\t\tconst node = glb.nodes[i];\n\n\t\t\tif (node.root === model.graph) {\n\t\t\t\tconst gltfNode = glb.gltf.nodes[i];\n\n\t\t\t\tif (gltfNode.hasOwnProperty('mesh')) {\n\t\t\t\t\tconst meshGroup = glb.renders[gltfNode.mesh].meshes;\n\n\t\t\t\t\tfor (var mi = 0; mi < meshGroup.length; mi++) {\n\t\t\t\t\t\tconst mesh = meshGroup[mi];\n\n\t\t\t\t\t\tif (mesh) {\n\t\t\t\t\t\t\tcreateMeshInstance(model, mesh, glb.skins, skinInstances, glb.materials, node, gltfNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tdestroy() {\n\t\tconst registry = this.registry;\n\n\t\tconst destroyAsset = function destroyAsset(asset) {\n\t\t\tregistry.remove(asset);\n\t\t\tasset.unload();\n\t\t};\n\n\t\tconst destroyAssets = function destroyAssets(assets) {\n\t\t\tassets.forEach(function (asset) {\n\t\t\t\tdestroyAsset(asset);\n\t\t\t});\n\t\t};\n\n\t\tif (this.animations) {\n\t\t\tdestroyAssets(this.animations);\n\t\t\tthis.animations = null;\n\t\t}\n\n\t\tif (this.textures) {\n\t\t\tdestroyAssets(this.textures);\n\t\t\tthis.textures = null;\n\t\t}\n\n\t\tif (this.materials) {\n\t\t\tdestroyAssets(this.materials);\n\t\t\tthis.materials = null;\n\t\t}\n\n\t\tif (this.renders) {\n\t\t\tdestroyAssets(this.renders);\n\t\t\tthis.renders = null;\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tdestroyAsset(this._model);\n\t\t\tthis._model = null;\n\t\t}\n\n\t\tthis.data = null;\n\t\tthis.assets = null;\n\t}\n\n}\n\nclass ContainerHandler {\n\tconstructor(device, defaultMaterial) {\n\t\tthis._device = device;\n\t\tthis._defaultMaterial = defaultMaterial;\n\t\tthis.maxRetries = 0;\n\t}\n\n\t_getUrlWithoutParams(url) {\n\t\treturn url.indexOf('?') >= 0 ? url.split('?')[0] : url;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\tconst self = this;\n\n\t\tconst parseData = function parseData(arrayBuffer) {\n\t\t\tGlbParser.parseAsync(self._getUrlWithoutParams(url.original), path.extractPath(url.load), arrayBuffer, self._device, asset.registry, asset.options, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, new ContainerResource(result));\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif (asset && asset.file && asset.file.contents) {\n\t\t\tparseData(asset.file.contents);\n\t\t} else {\n\t\t\thttp.get(url.load, options, function (err, response) {\n\t\t\t\tif (!callback) return;\n\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(\"Error loading model: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t} else {\n\t\t\t\t\tparseData(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\topen(url, data, asset) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst container = asset.resource;\n\t\tconst data = container && container.data;\n\n\t\tif (data) {\n\t\t\tconst createAsset = function createAsset(type, resource, index) {\n\t\t\t\tconst subAsset = ContainerResource.createAsset(asset.name, type, resource, index);\n\t\t\t\tassets.add(subAsset);\n\t\t\t\treturn subAsset;\n\t\t\t};\n\n\t\t\tlet i;\n\t\t\tconst renders = [];\n\n\t\t\tfor (i = 0; i < data.renders.length; ++i) {\n\t\t\t\trenders.push(createAsset('render', data.renders[i], i));\n\t\t\t}\n\n\t\t\tconst materials = [];\n\n\t\t\tfor (i = 0; i < data.materials.length; ++i) {\n\t\t\t\tmaterials.push(createAsset('material', data.materials[i], i));\n\t\t\t}\n\n\t\t\tconst animations = [];\n\n\t\t\tfor (i = 0; i < data.animations.length; ++i) {\n\t\t\t\tanimations.push(createAsset('animation', data.animations[i], i));\n\t\t\t}\n\n\t\t\tcontainer._assetName = asset.name;\n\t\t\tcontainer._assets = assets;\n\t\t\tcontainer.renders = renders;\n\t\t\tcontainer.materials = materials;\n\t\t\tcontainer.textures = data.textures;\n\t\t\tcontainer.animations = animations;\n\t\t\tcontainer.registry = assets;\n\t\t\tcontainer._defaultMaterial = this._defaultMaterial;\n\t\t}\n\t}\n\n}\n\nclass CssHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading css resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nfunction createStyle(cssString) {\n\tconst result = document.createElement('style');\n\tresult.type = 'text/css';\n\n\tif (result.styleSheet) {\n\t\tresult.styleSheet.cssText = cssString;\n\t} else {\n\t\tresult.appendChild(document.createTextNode(cssString));\n\t}\n\n\treturn result;\n}\n\nclass CubemapHandler {\n\tconstructor(device, assets, loader) {\n\t\tthis._device = device;\n\t\tthis._registry = assets;\n\t\tthis._loader = loader;\n\t}\n\n\tload(url, callback, asset) {\n\t\tthis.loadAssets(asset, callback);\n\t}\n\n\topen(url, data, asset) {\n\t\treturn asset ? asset.resource : null;\n\t}\n\n\tpatch(asset, registry) {\n\t\tthis.loadAssets(asset, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tregistry.fire('error', asset);\n\t\t\t\tregistry.fire('error:' + asset.id, err, asset);\n\t\t\t\tasset.fire('error', asset);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetAssetIds(cubemapAsset) {\n\t\tconst result = [];\n\t\tresult[0] = cubemapAsset.file;\n\n\t\tif ((cubemapAsset.loadFaces || !cubemapAsset.file) && cubemapAsset.data && cubemapAsset.data.textures) {\n\t\t\tfor (let i = 0; i < 6; ++i) {\n\t\t\t\tresult[i + 1] = cubemapAsset.data.textures[i];\n\t\t\t}\n\t\t} else {\n\t\t\tresult[1] = result[2] = result[3] = result[4] = result[5] = result[6] = null;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tcompareAssetIds(assetIdA, assetIdB) {\n\t\tif (assetIdA && assetIdB) {\n\t\t\tif (parseInt(assetIdA, 10) === assetIdA || typeof assetIdA === \"string\") {\n\t\t\t\treturn assetIdA === assetIdB;\n\t\t\t}\n\n\t\t\treturn assetIdA.url === assetIdB.url;\n\t\t}\n\n\t\treturn assetIdA !== null === (assetIdB !== null);\n\t}\n\n\tupdate(cubemapAsset, assetIds, assets) {\n\t\tconst assetData = cubemapAsset.data || {};\n\t\tconst oldAssets = cubemapAsset._handlerState.assets;\n\t\tconst oldResources = cubemapAsset._resources;\n\t\tlet tex, mip, i;\n\t\tconst resources = [null, null, null, null, null, null, null];\n\n\t\tconst getType = function getType() {\n\t\t\tif (assetData.hasOwnProperty('type')) {\n\t\t\t\treturn assetData.type;\n\t\t\t}\n\n\t\t\tif (assetData.hasOwnProperty('rgbm')) {\n\t\t\t\treturn assetData.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (!cubemapAsset.loaded || assets[0] !== oldAssets[0]) {\n\t\t\tif (assets[0]) {\n\t\t\t\ttex = assets[0].resource;\n\n\t\t\t\tfor (i = 0; i < 6; ++i) {\n\t\t\t\t\tconst prelitLevels = [tex._levels[i]];\n\n\t\t\t\t\tif (i === 0 && this._device.useTexCubeLod) {\n\t\t\t\t\t\tfor (mip = 1; mip < tex._levels.length; ++mip) {\n\t\t\t\t\t\t\tprelitLevels[mip] = tex._levels[mip];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst prelit = new Texture(this._device, {\n\t\t\t\t\t\tname: cubemapAsset.name + '_prelitCubemap' + (tex.width >> i),\n\t\t\t\t\t\tcubemap: true,\n\t\t\t\t\t\ttype: getType() || tex.type,\n\t\t\t\t\t\twidth: tex.width >> i,\n\t\t\t\t\t\theight: tex.height >> i,\n\t\t\t\t\t\tformat: tex.format,\n\t\t\t\t\t\tlevels: prelitLevels,\n\t\t\t\t\t\tfixCubemapSeams: true,\n\t\t\t\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t\t\t\t});\n\t\t\t\t\tresources[i + 1] = prelit;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresources[1] = oldResources[1] || null;\n\t\t\tresources[2] = oldResources[2] || null;\n\t\t\tresources[3] = oldResources[3] || null;\n\t\t\tresources[4] = oldResources[4] || null;\n\t\t\tresources[5] = oldResources[5] || null;\n\t\t\tresources[6] = oldResources[6] || null;\n\t\t}\n\n\t\tconst faceAssets = assets.slice(1);\n\n\t\tif (!cubemapAsset.loaded || !this.cmpArrays(faceAssets, oldAssets.slice(1))) {\n\t\t\tif (faceAssets.indexOf(null) === -1) {\n\t\t\t\tconst faceTextures = faceAssets.map(function (asset) {\n\t\t\t\t\treturn asset.resource;\n\t\t\t\t});\n\t\t\t\tconst faceLevels = [];\n\n\t\t\t\tfor (mip = 0; mip < faceTextures[0]._levels.length; ++mip) {\n\t\t\t\t\tfaceLevels.push(faceTextures.map(function (faceTexture) {\n\t\t\t\t\t\treturn faceTexture._levels[mip];\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tconst faces = new Texture(this._device, {\n\t\t\t\t\tname: cubemapAsset.name + '_faces',\n\t\t\t\t\tcubemap: true,\n\t\t\t\t\ttype: getType() || faceTextures[0].type,\n\t\t\t\t\twidth: faceTextures[0].width,\n\t\t\t\t\theight: faceTextures[0].height,\n\t\t\t\t\tformat: faceTextures[0].format,\n\t\t\t\t\tlevels: faceLevels,\n\t\t\t\t\tminFilter: assetData.hasOwnProperty('minFilter') ? assetData.minFilter : faceTextures[0].minFilter,\n\t\t\t\t\tmagFilter: assetData.hasOwnProperty('magFilter') ? assetData.magFilter : faceTextures[0].magFilter,\n\t\t\t\t\tanisotropy: assetData.hasOwnProperty('anisotropy') ? assetData.anisotropy : 1,\n\t\t\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\tfixCubemapSeams: !!assets[0]\n\t\t\t\t});\n\t\t\t\tresources[0] = faces;\n\t\t\t}\n\t\t} else {\n\t\t\tresources[0] = oldResources[0] || null;\n\t\t}\n\n\t\tif (!this.cmpArrays(resources, oldResources)) {\n\t\t\tcubemapAsset.resources = resources;\n\t\t\tcubemapAsset._handlerState.assetIds = assetIds;\n\t\t\tcubemapAsset._handlerState.assets = assets;\n\n\t\t\tfor (i = 0; i < oldResources.length; ++i) {\n\t\t\t\tif (oldResources[i] !== null && resources.indexOf(oldResources[i]) === -1) {\n\t\t\t\t\toldResources[i].destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < oldAssets.length; ++i) {\n\t\t\tif (oldAssets[i] !== null && assets.indexOf(oldAssets[i]) === -1) {\n\t\t\t\toldAssets[i].unload();\n\t\t\t}\n\t\t}\n\t}\n\n\tcmpArrays(arr1, arr2) {\n\t\tif (arr1.length !== arr2.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < arr1.length; ++i) {\n\t\t\tif (arr1[i] !== arr2[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tresolveId(value) {\n\t\tconst valueInt = parseInt(value, 10);\n\t\treturn valueInt === value || valueInt.toString() === value ? valueInt : value;\n\t}\n\n\tloadAssets(cubemapAsset, callback) {\n\t\tif (!cubemapAsset.hasOwnProperty('_handlerState')) {\n\t\t\tcubemapAsset._handlerState = {\n\t\t\t\tassetIds: [null, null, null, null, null, null, null],\n\t\t\t\tassets: [null, null, null, null, null, null, null]\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\tconst assetIds = self.getAssetIds(cubemapAsset);\n\t\tconst assets = [null, null, null, null, null, null, null];\n\t\tconst loadedAssetIds = cubemapAsset._handlerState.assetIds;\n\t\tconst loadedAssets = cubemapAsset._handlerState.assets;\n\t\tconst registry = self._registry;\n\t\tlet awaiting = 7;\n\n\t\tconst onLoad = function onLoad(index, asset) {\n\t\t\tassets[index] = asset;\n\t\t\tawaiting--;\n\n\t\t\tif (awaiting === 0) {\n\t\t\t\tself.update(cubemapAsset, assetIds, assets);\n\t\t\t\tcallback(null, cubemapAsset.resources);\n\t\t\t}\n\t\t};\n\n\t\tconst onError = function onError(index, err, asset) {\n\t\t\tcallback(err);\n\t\t};\n\n\t\tconst processTexAsset = function processTexAsset(index, texAsset) {\n\t\t\tif (texAsset.loaded) {\n\t\t\t\tonLoad(index, texAsset);\n\t\t\t} else {\n\t\t\t\tregistry.once('load:' + texAsset.id, onLoad.bind(self, index));\n\t\t\t\tregistry.once('error:' + texAsset.id, onError.bind(self, index));\n\n\t\t\t\tif (!texAsset.loading) {\n\t\t\t\t\tregistry.load(texAsset);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet texAsset;\n\n\t\tfor (let i = 0; i < 7; ++i) {\n\t\t\tconst assetId = this.resolveId(assetIds[i]);\n\n\t\t\tif (!assetId) {\n\t\t\t\tonLoad(i, null);\n\t\t\t} else if (self.compareAssetIds(assetId, loadedAssetIds[i])) {\n\t\t\t\tonLoad(i, loadedAssets[i]);\n\t\t\t} else if (parseInt(assetId, 10) === assetId) {\n\t\t\t\ttexAsset = registry.get(assetId);\n\n\t\t\t\tif (texAsset) {\n\t\t\t\t\tprocessTexAsset(i, texAsset);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(function (index, assetId_) {\n\t\t\t\t\t\tconst texAsset = registry.get(assetId_);\n\n\t\t\t\t\t\tif (texAsset) {\n\t\t\t\t\t\t\tprocessTexAsset(index, texAsset);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonError(index, \"failed to find dependent cubemap asset=\" + assetId_);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(null, i, assetId));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst file = typeof assetId === \"string\" ? {\n\t\t\t\t\turl: assetId,\n\t\t\t\t\tfilename: assetId\n\t\t\t\t} : assetId;\n\t\t\t\ttexAsset = new Asset(cubemapAsset.name + \"_part_\" + i, \"texture\", file);\n\t\t\t\tregistry.add(texAsset);\n\t\t\t\tregistry.once('load:' + texAsset.id, onLoad.bind(self, i));\n\t\t\t\tregistry.once('error:' + texAsset.id, onError.bind(self, i));\n\t\t\t\tregistry.load(texAsset);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass FolderHandler {\n\tload(url, callback) {\n\t\tcallback(null, null);\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n}\n\nconst FONT_MSDF = 'msdf';\nconst FONT_BITMAP = 'bitmap';\n\nclass Font {\n\tconstructor(textures, data) {\n\t\tthis.type = data ? data.type || FONT_MSDF : FONT_MSDF;\n\t\tthis.em = 1;\n\t\tthis.textures = textures;\n\t\tthis.intensity = 0.0;\n\t\tthis._data = null;\n\t\tthis.data = data;\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\tset data(value) {\n\t\tthis._data = value;\n\t\tif (!value) return;\n\n\t\tif (this._data.intensity !== undefined) {\n\t\t\tthis.intensity = this._data.intensity;\n\t\t}\n\n\t\tif (!this._data.info) this._data.info = {};\n\n\t\tif (!this._data.version || this._data.version < 2) {\n\t\t\tthis._data.info.maps = [{\n\t\t\t\twidth: this._data.info.width,\n\t\t\t\theight: this._data.info.height\n\t\t\t}];\n\n\t\t\tif (this._data.chars) {\n\t\t\t\tfor (var key in this._data.chars) {\n\t\t\t\t\tthis._data.chars[key].map = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction upgradeDataSchema(data) {\n\tif (data.version < 3) {\n\t\tif (data.version < 2) {\n\t\t\tdata.info.maps = data.info.maps || [{\n\t\t\t\twidth: data.info.width,\n\t\t\t\theight: data.info.height\n\t\t\t}];\n\t\t}\n\n\t\tdata.chars = Object.keys(data.chars || {}).reduce(function (newChars, key) {\n\t\t\tconst existing = data.chars[key];\n\t\t\tconst newKey = existing.letter !== undefined ? existing.letter : string.fromCodePoint(key);\n\n\t\t\tif (data.version < 2) {\n\t\t\t\texisting.map = existing.map || 0;\n\t\t\t}\n\n\t\t\tnewChars[newKey] = existing;\n\t\t\treturn newChars;\n\t\t}, {});\n\t\tdata.version = 3;\n\t}\n\n\treturn data;\n}\n\nclass FontHandler {\n\tconstructor(loader) {\n\t\tthis._loader = loader;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tconst data = upgradeDataSchema(response);\n\n\t\t\t\t\tself._loadTextures(url.load.replace('.json', '.png'), data, function (err, textures) {\n\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\ttextures: textures\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(\"Error loading font resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (asset && asset.data) {\n\t\t\t\tasset.data = upgradeDataSchema(asset.data);\n\t\t\t}\n\n\t\t\tthis._loadTextures(url.load, asset && asset.data, callback);\n\t\t}\n\t}\n\n\t_loadTextures(url, data, callback) {\n\t\tconst numTextures = data.info.maps.length;\n\t\tlet numLoaded = 0;\n\t\tlet error = null;\n\t\tconst textures = new Array(numTextures);\n\t\tconst loader = this._loader;\n\n\t\tconst loadTexture = function loadTexture(index) {\n\t\t\tconst onLoaded = function onLoaded(err, texture) {\n\t\t\t\tif (error) return;\n\n\t\t\t\tif (err) {\n\t\t\t\t\terror = err;\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\n\t\t\t\ttexture.upload();\n\t\t\t\ttextures[index] = texture;\n\t\t\t\tnumLoaded++;\n\n\t\t\t\tif (numLoaded === numTextures) {\n\t\t\t\t\tcallback(null, textures);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (index === 0) {\n\t\t\t\tloader.load(url, \"texture\", onLoaded);\n\t\t\t} else {\n\t\t\t\tloader.load(url.replace('.png', index + '.png'), \"texture\", onLoaded);\n\t\t\t}\n\t\t};\n\n\t\tfor (let i = 0; i < numTextures; i++) loadTexture(i);\n\t}\n\n\topen(url, data, asset) {\n\t\tlet font;\n\n\t\tif (data.textures) {\n\t\t\tfont = new Font(data.textures, data.data);\n\t\t} else {\n\t\t\tfont = new Font(data, null);\n\t\t}\n\n\t\treturn font;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst font = asset.resource;\n\n\t\tif (!font.data && asset.data) {\n\t\t\tfont.data = asset.data;\n\t\t} else if (!asset.data && font.data) {\n\t\t\tasset.data = font.data;\n\t\t}\n\n\t\tif (asset.data) {\n\t\t\tasset.data = upgradeDataSchema(asset.data);\n\t\t}\n\t}\n\n}\n\nvar CompressUtils = {\n\tsetCompressedPRS: function (entity, data, compressed) {\n\t\tvar a = compressed.singleVecs;\n\t\tvar b, i;\n\t\tvar v = data.___1;\n\n\t\tif (!v) {\n\t\t\tb = compressed.tripleVecs;\n\t\t\ti = data.___2;\n\t\t}\n\n\t\tvar n = v ? v[0] : b[i];\n\t\tentity.setLocalPosition(a[n], a[n + 1], a[n + 2]);\n\t\tn = v ? v[1] : b[i + 1];\n\t\tentity.setLocalEulerAngles(a[n], a[n + 1], a[n + 2]);\n\t\tn = v ? v[2] : b[i + 2];\n\t\tentity.setLocalScale(a[n], a[n + 1], a[n + 2]);\n\t},\n\toneCharToKey: function (s, data) {\n\t\tvar i = s.charCodeAt(0) - data.fieldFirstCode;\n\t\treturn data.fieldArray[i];\n\t},\n\tmultCharToKey: function (s, data) {\n\t\tvar ind = 0;\n\n\t\tfor (var i = 0; i < s.length; i++) {\n\t\t\tind = ind * data.fieldCodeBase + s.charCodeAt(i) - data.fieldFirstCode;\n\t\t}\n\n\t\treturn data.fieldArray[ind];\n\t}\n};\n\nclass Decompress {\n\tconstructor(node, data) {\n\t\tthis._node = node;\n\t\tthis._data = data;\n\t}\n\n\trun() {\n\t\tvar type = Object.prototype.toString.call(this._node);\n\n\t\tif (type === '[object Object]') {\n\t\t\tthis._handleMap();\n\t\t} else if (type === '[object Array]') {\n\t\t\tthis._handleArray();\n\t\t} else {\n\t\t\tthis._result = this._node;\n\t\t}\n\n\t\treturn this._result;\n\t}\n\n\t_handleMap() {\n\t\tthis._result = {};\n\t\tvar a = Object.keys(this._node);\n\t\ta.forEach(this._handleKey, this);\n\t}\n\n\t_handleKey(origKey) {\n\t\tvar newKey = origKey;\n\t\tvar len = origKey.length;\n\n\t\tif (len === 1) {\n\t\t\tnewKey = CompressUtils.oneCharToKey(origKey, this._data);\n\t\t} else if (len === 2) {\n\t\t\tnewKey = CompressUtils.multCharToKey(origKey, this._data);\n\t\t}\n\n\t\tthis._result[newKey] = new Decompress(this._node[origKey], this._data).run();\n\t}\n\n\t_handleArray() {\n\t\tthis._result = [];\n\n\t\tthis._node.forEach(this._handleArElt, this);\n\t}\n\n\t_handleArElt(elt) {\n\t\tvar v = new Decompress(elt, this._data).run();\n\n\t\tthis._result.push(v);\n\t}\n\n}\n\nclass SceneParser {\n\tconstructor(app, isTemplate) {\n\t\tthis._app = app;\n\t\tthis._isTemplate = isTemplate;\n\t}\n\n\tparse(data) {\n\t\tconst entities = {};\n\t\tlet parent = null;\n\t\tconst compressed = data.compressedFormat;\n\n\t\tif (compressed && !data.entDecompressed) {\n\t\t\tdata.entDecompressed = true;\n\t\t\tdata.entities = new Decompress(data.entities, compressed).run();\n\t\t}\n\n\t\tfor (const id in data.entities) {\n\t\t\tconst curData = data.entities[id];\n\n\t\t\tconst curEnt = this._createEntity(curData, compressed);\n\n\t\t\tentities[id] = curEnt;\n\n\t\t\tif (curData.parent === null) {\n\t\t\t\tparent = curEnt;\n\t\t\t}\n\t\t}\n\n\t\tfor (const id in data.entities) {\n\t\t\tconst curEnt = entities[id];\n\t\t\tconst children = data.entities[id].children;\n\t\t\tconst len = children.length;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tconst childEnt = entities[children[i]];\n\n\t\t\t\tif (childEnt) {\n\t\t\t\t\tcurEnt.addChild(childEnt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._openComponentData(parent, data.entities);\n\n\t\treturn parent;\n\t}\n\n\t_createEntity(data, compressed) {\n\t\tconst entity = new Entity();\n\t\tentity.name = data.name;\n\t\tentity.setGuid(data.resource_id);\n\n\t\tthis._setPosRotScale(entity, data, compressed);\n\n\t\tentity._enabled = data.enabled !== undefined ? data.enabled : true;\n\n\t\tif (this._isTemplate) {\n\t\t\tentity._template = true;\n\t\t} else {\n\t\t\tentity._enabledInHierarchy = entity._enabled;\n\t\t}\n\n\t\tentity.template = data.template;\n\n\t\tif (data.tags) {\n\t\t\tfor (let i = 0; i < data.tags.length; i++) {\n\t\t\t\tentity.tags.add(data.tags[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.labels) {\n\t\t\tdata.labels.forEach(function (label) {\n\t\t\t\tentity.addLabel(label);\n\t\t\t});\n\t\t}\n\n\t\treturn entity;\n\t}\n\n\t_setPosRotScale(entity, data, compressed) {\n\t\tif (compressed) {\n\t\t\tCompressUtils.setCompressedPRS(entity, data, compressed);\n\t\t} else {\n\t\t\tconst p = data.position;\n\t\t\tconst r = data.rotation;\n\t\t\tconst s = data.scale;\n\t\t\tentity.setLocalPosition(p[0], p[1], p[2]);\n\t\t\tentity.setLocalEulerAngles(r[0], r[1], r[2]);\n\t\t\tentity.setLocalScale(s[0], s[1], s[2]);\n\t\t}\n\t}\n\n\t_openComponentData(entity, entities) {\n\t\tconst systemsList = this._app.systems.list;\n\t\tlet len = systemsList.length;\n\t\tconst entityData = entities[entity.getGuid()];\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst system = systemsList[i];\n\t\t\tconst componentData = entityData.components[system.id];\n\n\t\t\tif (componentData) {\n\t\t\t\tsystem.addComponent(entity, componentData);\n\t\t\t}\n\t\t}\n\n\t\tlen = entityData.children.length;\n\t\tconst children = entity._children;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tchildren[i] = this._openComponentData(children[i], entities);\n\t\t}\n\n\t\treturn entity;\n\t}\n\n}\n\nconst SceneUtils = {\n\tload: function (url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(err, response);\n\t\t\t} else {\n\t\t\t\tlet errMsg = 'Error while loading scene JSON ' + url.original;\n\n\t\t\t\tif (err.message) {\n\t\t\t\t\terrMsg += ': ' + err.message;\n\n\t\t\t\t\tif (err.stack) {\n\t\t\t\t\t\terrMsg += '\\n' + err.stack;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\terrMsg += ': ' + err;\n\t\t\t\t}\n\n\t\t\t\tcallback(errMsg);\n\t\t\t}\n\t\t});\n\t}\n};\n\nclass HierarchyHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\tthis._app.systems.script.preloading = true;\n\t\tconst parser = new SceneParser(this._app, false);\n\t\tconst parent = parser.parse(data);\n\t\tthis._app.systems.script.preloading = false;\n\t\treturn parent;\n\t}\n\n}\n\nclass HtmlHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading html resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass JsonHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading JSON resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass AssetReference {\n\tconstructor(propertyName, parent, registry, callbacks, scope) {\n\t\tthis.propertyName = propertyName;\n\t\tthis.parent = parent;\n\t\tthis._scope = scope;\n\t\tthis._registry = registry;\n\t\tthis.id = null;\n\t\tthis.url = null;\n\t\tthis.asset = null;\n\t\tthis._onAssetLoad = callbacks.load;\n\t\tthis._onAssetAdd = callbacks.add;\n\t\tthis._onAssetRemove = callbacks.remove;\n\t\tthis._onAssetUnload = callbacks.unload;\n\t}\n\n\t_bind() {\n\t\tif (this.id) {\n\t\t\tif (this._onAssetLoad) this._registry.on(\"load:\" + this.id, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.once(\"add:\" + this.id, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.on(\"remove:\" + this.id, this._onRemove, this);\n\t\t\tif (this._onAssetUnload) this._registry.on(\"unload:\" + this.id, this._onUnload, this);\n\t\t}\n\n\t\tif (this.url) {\n\t\t\tif (this._onAssetLoad) this._registry.on(\"load:url:\" + this.url, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.once(\"add:url:\" + this.url, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.on(\"remove:url:\" + this.url, this._onRemove, this);\n\t\t}\n\t}\n\n\t_unbind() {\n\t\tif (this.id) {\n\t\t\tif (this._onAssetLoad) this._registry.off('load:' + this.id, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.off('add:' + this.id, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.off('remove:' + this.id, this._onRemove, this);\n\t\t\tif (this._onAssetUnload) this._registry.off(\"unload:\" + this.id, this._onUnload, this);\n\t\t}\n\n\t\tif (this.url) {\n\t\t\tif (this._onAssetLoad) this._registry.off('load:' + this.url, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.off('add:' + this.url, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.off('remove:' + this.url, this._onRemove, this);\n\t\t}\n\t}\n\n\t_onLoad(asset) {\n\t\tthis._onAssetLoad.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\t_onAdd(asset) {\n\t\tthis.asset = asset;\n\n\t\tthis._onAssetAdd.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\t_onRemove(asset) {\n\t\tthis._onAssetRemove.call(this._scope, this.propertyName, this.parent, asset);\n\n\t\tthis.asset = null;\n\t}\n\n\t_onUnload(asset) {\n\t\tthis._onAssetUnload.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tset id(value) {\n\t\tif (this.url) throw Error(\"Can't set id and url\");\n\n\t\tthis._unbind();\n\n\t\tthis._id = value;\n\t\tthis.asset = this._registry.get(this._id);\n\n\t\tthis._bind();\n\t}\n\n\tget url() {\n\t\treturn this._url;\n\t}\n\n\tset url(value) {\n\t\tif (this.id) throw Error(\"Can't set id and url\");\n\n\t\tthis._unbind();\n\n\t\tthis._url = value;\n\t\tthis.asset = this._registry.getByUrl(this._url);\n\n\t\tthis._bind();\n\t}\n\n}\n\nfunction StandardMaterialValidator() {\n\tthis.removeInvalid = true;\n\tthis.valid = true;\n\tthis.enumValidators = {\n\t\toccludeSpecular: this._createEnumValidator([SPECOCC_NONE, SPECOCC_AO, SPECOCC_GLOSSDEPENDENT]),\n\t\tcull: this._createEnumValidator([CULLFACE_NONE, CULLFACE_BACK, CULLFACE_FRONT, CULLFACE_FRONTANDBACK]),\n\t\tblendType: this._createEnumValidator([BLEND_SUBTRACTIVE, BLEND_ADDITIVE, BLEND_NORMAL, BLEND_NONE, BLEND_PREMULTIPLIED, BLEND_MULTIPLICATIVE, BLEND_ADDITIVEALPHA, BLEND_MULTIPLICATIVE2X, BLEND_SCREEN, BLEND_MIN, BLEND_MAX]),\n\t\tshadingModel: this._createEnumValidator([SPECULAR_PHONG, SPECULAR_BLINN])\n\t};\n}\n\nStandardMaterialValidator.prototype.setInvalid = function (key, data) {\n\tthis.valid = false;\n\n\tif (this.removeInvalid) {\n\t\tdelete data[key];\n\t}\n};\n\nStandardMaterialValidator.prototype.validate = function (data) {\n\tvar TYPES = standardMaterialParameterTypes;\n\tvar type;\n\tvar i;\n\tvar pathMapping = data.mappingFormat === \"path\";\n\n\tfor (var key in data) {\n\t\ttype = TYPES[key];\n\n\t\tif (!type) {\n\t\t\tthis.valid = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (type.startsWith(\"enum\")) {\n\t\t\tvar enumType = type.split(\":\")[1];\n\n\t\t\tif (this.enumValidators[enumType]) {\n\t\t\t\tif (!this.enumValidators[enumType](data[key])) {\n\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'number') {\n\t\t\tif (typeof data[key] !== 'number') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'boolean') {\n\t\t\tif (typeof data[key] !== 'boolean') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'string') {\n\t\t\tif (typeof data[key] !== 'string') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'vec2') {\n\t\t\tif (!(data[key] instanceof Array && data[key].length === 2)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'rgb') {\n\t\t\tif (!(data[key] instanceof Array && data[key].length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'texture') {\n\t\t\tif (!pathMapping) {\n\t\t\t\tif (!(typeof data[key] === 'number' || data[key] === null)) {\n\t\t\t\t\tif (!(data[key] instanceof Texture)) {\n\t\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!(typeof data[key] === 'string' || data[key === null])) {\n\t\t\t\t\tif (!(data[key] instanceof Texture)) {\n\t\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'boundingbox') {\n\t\t\tif (!(data[key].center && data[key].center instanceof Array && data[key].center.length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\n\t\t\tif (!(data[key].halfExtents && data[key].halfExtents instanceof Array && data[key].halfExtents.length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'cubemap') {\n\t\t\tif (!(typeof data[key] === 'number' || data[key] === null || data[key] === undefined)) {\n\t\t\t\tif (!(data[key] instanceof Texture && data[key].cubemap)) {\n\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'chunks') {\n\t\t\tvar chunkNames = Object.keys(data[key]);\n\n\t\t\tfor (i = 0; i < chunkNames.length; i++) {\n\t\t\t\tif (typeof data[key][chunkNames[i]] !== 'string') {\n\t\t\t\t\tthis.setInvalid(chunkNames[i], data[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"Unknown material type: \" + type);\n\t\t}\n\t}\n\n\tdata.validated = true;\n\treturn this.valid;\n};\n\nStandardMaterialValidator.prototype._createEnumValidator = function (values) {\n\treturn function (value) {\n\t\treturn values.indexOf(value) >= 0;\n\t};\n};\n\nclass JsonStandardMaterialParser {\n\tconstructor() {\n\t\tthis._validator = null;\n\t}\n\n\tparse(input) {\n\t\tconst migrated = this.migrate(input);\n\n\t\tconst validated = this._validate(migrated);\n\n\t\tconst material = new StandardMaterial();\n\t\tthis.initialize(material, validated);\n\t\treturn material;\n\t}\n\n\tinitialize(material, data) {\n\t\tif (!data.validated) {\n\t\t\tdata = this._validate(data);\n\t\t}\n\n\t\tif (data.chunks) {\n\t\t\tmaterial.chunks.copy(data.chunks);\n\t\t}\n\n\t\tfor (const key in data) {\n\t\t\tconst type = standardMaterialParameterTypes[key];\n\t\t\tconst value = data[key];\n\n\t\t\tif (type === 'vec2') {\n\t\t\t\tmaterial[key] = new Vec2(value[0], value[1]);\n\t\t\t} else if (type === 'rgb') {\n\t\t\t\tmaterial[key] = new Color(value[0], value[1], value[2]);\n\t\t\t} else if (type === 'texture') {\n\t\t\t\tif (value instanceof Texture) {\n\t\t\t\t\tmaterial[key] = value;\n\t\t\t\t} else if (!(material[key] instanceof Texture && typeof value === 'number' && value > 0)) {\n\t\t\t\t\tmaterial[key] = null;\n\t\t\t\t}\n\t\t\t} else if (type === 'cubemap') {\n\t\t\t\tif (value instanceof Texture) {\n\t\t\t\t\tmaterial[key] = value;\n\t\t\t\t} else if (!(material[key] instanceof Texture && typeof value === 'number' && value > 0)) {\n\t\t\t\t\tmaterial[key] = null;\n\t\t\t\t}\n\t\t\t} else if (type === 'boundingbox') {\n\t\t\t\tconst center = new Vec3(value.center[0], value.center[1], value.center[2]);\n\t\t\t\tconst halfExtents = new Vec3(value.halfExtents[0], value.halfExtents[1], value.halfExtents[2]);\n\t\t\t\tmaterial[key] = new BoundingBox(center, halfExtents);\n\t\t\t} else {\n\t\t\t\tmaterial[key] = data[key];\n\t\t\t}\n\t\t}\n\n\t\tmaterial.update();\n\t}\n\n\tmigrate(data) {\n\t\tif (data.shadingModel === undefined) {\n\t\t\tif (data.shader === 'blinn') {\n\t\t\t\tdata.shadingModel = SPECULAR_BLINN;\n\t\t\t} else {\n\t\t\t\tdata.shadingModel = SPECULAR_PHONG;\n\t\t\t}\n\t\t}\n\n\t\tif (data.shader) delete data.shader;\n\n\t\tif (data.mapping_format) {\n\t\t\tdata.mappingFormat = data.mapping_format;\n\t\t\tdelete data.mapping_format;\n\t\t}\n\n\t\tlet i;\n\t\tconst RENAMED_PROPERTIES = [[\"bumpMapFactor\", \"bumpiness\"], [\"aoUvSet\", \"aoMapUv\"], [\"aoMapVertexColor\", \"aoVertexColor\"], [\"diffuseMapVertexColor\", \"diffuseVertexColor\"], [\"emissiveMapVertexColor\", \"emissiveVertexColor\"], [\"specularMapVertexColor\", \"specularVertexColor\"], [\"metalnessMapVertexColor\", \"metalnessVertexColor\"], [\"opacityMapVertexColor\", \"opacityVertexColor\"], [\"glossMapVertexColor\", \"glossVertexColor\"], [\"lightMapVertexColor\", \"lightVertexColor\"], [\"diffuseMapTint\", \"diffuseTint\"], [\"specularMapTint\", \"specularTint\"], [\"emissiveMapTint\", \"emissiveTint\"], [\"metalnessMapTint\", \"metalnessTint\"]];\n\n\t\tfor (i = 0; i < RENAMED_PROPERTIES.length; i++) {\n\t\t\tconst _old = RENAMED_PROPERTIES[i][0];\n\t\t\tconst _new = RENAMED_PROPERTIES[i][1];\n\n\t\t\tif (data[_old] !== undefined && !(data[_new] !== undefined)) {\n\t\t\t\tdata[_new] = data[_old];\n\t\t\t\tdelete data[_old];\n\t\t\t}\n\t\t}\n\n\t\tconst DEPRECATED_PROPERTIES = ['fresnelFactor', 'shadowSampleType'];\n\n\t\tfor (i = 0; i < DEPRECATED_PROPERTIES.length; i++) {\n\t\t\tconst name = DEPRECATED_PROPERTIES[i];\n\n\t\t\tif (data.hasOwnProperty(name)) {\n\t\t\t\tdelete data[name];\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t_validate(data) {\n\t\tif (!data.validated) {\n\t\t\tif (!this._validator) {\n\t\t\t\tthis._validator = new StandardMaterialValidator();\n\t\t\t}\n\n\t\t\tthis._validator.validate(data);\n\t\t}\n\n\t\treturn data;\n\t}\n\n}\n\nconst PLACEHOLDER_MAP = {\n\taoMap: 'white',\n\tdiffuseMap: 'gray',\n\tspecularMap: 'gray',\n\tmetalnessMap: 'black',\n\tglossMap: 'gray',\n\temissiveMap: 'gray',\n\tnormalMap: 'normal',\n\theightMap: 'gray',\n\topacityMap: 'gray',\n\tsphereMap: 'gray',\n\tlightMap: 'white'\n};\n\nclass MaterialHandler {\n\tconstructor(app) {\n\t\tthis._assets = app.assets;\n\t\tthis._device = app.graphicsDevice;\n\t\tthis._placeholderTextures = null;\n\t\tthis._parser = new JsonStandardMaterialParser();\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tif (callback) {\n\t\t\t\t\tresponse._engine = true;\n\t\t\t\t\tcallback(null, response);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(\"Error loading material: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tconst material = this._parser.parse(data);\n\n\t\tif (data._engine) {\n\t\t\tmaterial._data = data;\n\t\t\tdelete data._engine;\n\t\t}\n\n\t\treturn material;\n\t}\n\n\t_createPlaceholders() {\n\t\tthis._placeholderTextures = {};\n\t\tconst textures = {\n\t\t\twhite: [255, 255, 255, 255],\n\t\t\tgray: [128, 128, 128, 255],\n\t\t\tblack: [0, 0, 0, 255],\n\t\t\tnormal: [128, 128, 255, 255]\n\t\t};\n\n\t\tfor (const key in textures) {\n\t\t\tif (!textures.hasOwnProperty(key)) continue;\n\t\t\tthis._placeholderTextures[key] = new Texture(this._device, {\n\t\t\t\twidth: 2,\n\t\t\t\theight: 2,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t\t});\n\t\t\tthis._placeholderTextures[key].name = 'placeholder';\n\n\t\t\tconst pixels = this._placeholderTextures[key].lock();\n\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tfor (let c = 0; c < 4; c++) {\n\t\t\t\t\tpixels[i * 4 + c] = textures[key][c];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._placeholderTextures[key].unlock();\n\t\t}\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (asset.resource._data) {\n\t\t\tasset._data = asset.resource._data;\n\t\t\tdelete asset.resource._data;\n\t\t}\n\n\t\tasset.data.name = asset.name;\n\t\tasset.resource.name = asset.name;\n\n\t\tthis._bindAndAssignAssets(asset, assets);\n\n\t\tasset.off('unload', this._onAssetUnload, this);\n\t\tasset.on('unload', this._onAssetUnload, this);\n\t}\n\n\t_onAssetUnload(asset) {\n\t\tdelete asset.data.parameters;\n\t\tdelete asset.data.chunks;\n\t\tdelete asset.data.name;\n\t}\n\n\t_assignTexture(parameterName, materialAsset, texture) {\n\t\tmaterialAsset.resource[parameterName] = texture;\n\t}\n\n\t_getPlaceholderTexture(parameterName) {\n\t\tif (!this._placeholderTextures) {\n\t\t\tthis._createPlaceholders();\n\t\t}\n\n\t\tconst placeholder = PLACEHOLDER_MAP[parameterName];\n\t\tconst texture = this._placeholderTextures[placeholder];\n\t\treturn texture;\n\t}\n\n\t_assignPlaceholderTexture(parameterName, materialAsset) {\n\t\tmaterialAsset.resource[parameterName] = this._getPlaceholderTexture(parameterName, materialAsset);\n\t}\n\n\t_onTextureLoad(parameterName, materialAsset, textureAsset) {\n\t\tthis._assignTexture(parameterName, materialAsset, textureAsset.resource);\n\n\t\tmaterialAsset.resource.update();\n\t}\n\n\t_onTextureAdd(parameterName, materialAsset, textureAsset) {\n\t\tthis._assets.load(textureAsset);\n\t}\n\n\t_onTextureRemoveOrUnload(parameterName, materialAsset, textureAsset) {\n\t\tconst material = materialAsset.resource;\n\n\t\tif (material) {\n\t\t\tif (materialAsset.resource[parameterName] === textureAsset.resource) {\n\t\t\t\tthis._assignPlaceholderTexture(parameterName, materialAsset);\n\n\t\t\t\tmaterial.update();\n\t\t\t}\n\t\t}\n\t}\n\n\t_assignCubemap(parameterName, materialAsset, textures) {\n\t\tmaterialAsset.resource[parameterName] = textures[0];\n\n\t\tif (textures.length === 7) {\n\t\t\tmaterialAsset.resource.prefilteredCubeMap128 = textures[1];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap64 = textures[2];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap32 = textures[3];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap16 = textures[4];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap8 = textures[5];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap4 = textures[6];\n\t\t}\n\t}\n\n\t_onCubemapLoad(parameterName, materialAsset, cubemapAsset) {\n\t\tthis._assignCubemap(parameterName, materialAsset, cubemapAsset.resources);\n\n\t\tthis._parser.initialize(materialAsset.resource, materialAsset.data);\n\t}\n\n\t_onCubemapAdd(parameterName, materialAsset, cubemapAsset) {\n\t\tif (materialAsset.data.shadingModel === SPECULAR_PHONG) {\n\t\t\tmaterialAsset.loadFaces = true;\n\t\t}\n\n\t\tthis._assets.load(cubemapAsset);\n\t}\n\n\t_onCubemapRemoveOrUnload(parameterName, materialAsset, cubemapAsset) {\n\t\tconst material = materialAsset.resource;\n\n\t\tif (materialAsset.data.prefilteredCubeMap128 === cubemapAsset.resources[1]) {\n\t\t\tthis._assignCubemap(parameterName, materialAsset, [null, null, null, null, null, null, null]);\n\n\t\t\tmaterial.update();\n\t\t}\n\t}\n\n\t_bindAndAssignAssets(materialAsset, assets) {\n\t\tconst data = this._parser.migrate(materialAsset.data);\n\n\t\tconst material = materialAsset.resource;\n\t\tconst pathMapping = data.mappingFormat === \"path\";\n\t\tconst TEXTURES = standardMaterialTextureParameters;\n\t\tlet i, name, assetReference;\n\n\t\tfor (i = 0; i < TEXTURES.length; i++) {\n\t\t\tname = TEXTURES[i];\n\t\t\tassetReference = material._assetReferences[name];\n\t\t\tconst dataAssetId = data[name];\n\t\t\tconst materialTexture = material[name];\n\n\t\t\tconst isPlaceHolderTexture = materialTexture === this._getPlaceholderTexture(name, materialAsset);\n\n\t\t\tconst dataValidated = data.validated;\n\n\t\t\tif (dataAssetId && (!materialTexture || !dataValidated || isPlaceHolderTexture)) {\n\t\t\t\tif (!assetReference) {\n\t\t\t\t\tassetReference = new AssetReference(name, materialAsset, assets, {\n\t\t\t\t\t\tload: this._onTextureLoad,\n\t\t\t\t\t\tadd: this._onTextureAdd,\n\t\t\t\t\t\tremove: this._onTextureRemoveOrUnload,\n\t\t\t\t\t\tunload: this._onTextureRemoveOrUnload\n\t\t\t\t\t}, this);\n\t\t\t\t\tmaterial._assetReferences[name] = assetReference;\n\t\t\t\t}\n\n\t\t\t\tif (pathMapping) {\n\t\t\t\t\tassetReference.url = materialAsset.getAbsoluteUrl(dataAssetId);\n\t\t\t\t} else {\n\t\t\t\t\tassetReference.id = dataAssetId;\n\t\t\t\t}\n\n\t\t\t\tif (assetReference.asset) {\n\t\t\t\t\tif (assetReference.asset.resource) {\n\t\t\t\t\t\tthis._assignTexture(name, materialAsset, assetReference.asset.resource);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._assignPlaceholderTexture(name, materialAsset);\n\t\t\t\t\t}\n\n\t\t\t\t\tassets.load(assetReference.asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (assetReference) {\n\t\t\t\t\tif (pathMapping) {\n\t\t\t\t\t\tassetReference.url = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tassetReference.id = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst CUBEMAPS = standardMaterialCubemapParameters;\n\n\t\tfor (i = 0; i < CUBEMAPS.length; i++) {\n\t\t\tname = CUBEMAPS[i];\n\t\t\tassetReference = material._assetReferences[name];\n\n\t\t\tif (data[name] && !materialAsset.data.prefilteredCubeMap128) {\n\t\t\t\tif (!assetReference) {\n\t\t\t\t\tassetReference = new AssetReference(name, materialAsset, assets, {\n\t\t\t\t\t\tload: this._onCubemapLoad,\n\t\t\t\t\t\tadd: this._onCubemapAdd,\n\t\t\t\t\t\tremove: this._onCubemapRemoveOrUnload,\n\t\t\t\t\t\tunload: this._onCubemapRemoveOrUnload\n\t\t\t\t\t}, this);\n\t\t\t\t\tmaterial._assetReferences[name] = assetReference;\n\t\t\t\t}\n\n\t\t\t\tif (pathMapping) {\n\t\t\t\t\tassetReference.url = data[name];\n\t\t\t\t} else {\n\t\t\t\t\tassetReference.id = data[name];\n\t\t\t\t}\n\n\t\t\t\tif (assetReference.asset) {\n\t\t\t\t\tif (assetReference.asset.loaded) {\n\t\t\t\t\t\tthis._assignCubemap(name, materialAsset, assetReference.asset.resources);\n\t\t\t\t\t}\n\n\t\t\t\t\tassets.load(assetReference.asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._parser.initialize(material, data);\n\t}\n\n}\n\nclass GlbModelParser {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t}\n\n\tparse(data) {\n\t\tconst glbResources = GlbParser.parse(\"filename.glb\", data, this._device);\n\n\t\tif (glbResources) {\n\t\t\tconst model = ContainerResource.createModel(glbResources, Material.defaultMaterial);\n\t\t\tglbResources.destroy();\n\t\t\treturn model;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass PartitionedVertex {\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.boneIndices = [0, 0, 0, 0];\n\t}\n\n}\n\nclass SkinPartition {\n\tconstructor() {\n\t\tthis.partition = 0;\n\t\tthis.vertexStart = 0;\n\t\tthis.vertexCount = 0;\n\t\tthis.indexStart = 0;\n\t\tthis.indexCount = 0;\n\t\tthis.boneIndices = [];\n\t\tthis.vertices = [];\n\t\tthis.indices = [];\n\t\tthis.indexMap = {};\n\t\tthis.originalMesh = null;\n\t}\n\n\taddVertex(vertex, idx, vertexArray) {\n\t\tvar remappedIndex = -1;\n\n\t\tif (this.indexMap[idx] !== undefined) {\n\t\t\tremappedIndex = this.indexMap[idx];\n\t\t\tthis.indices.push(remappedIndex);\n\t\t} else {\n\t\t\tfor (var influence = 0; influence < 4; influence++) {\n\t\t\t\tif (vertexArray.blendWeight.data[idx * 4 + influence] === 0) continue;\n\t\t\t\tvar originalBoneIndex = vertexArray.blendIndices.data[vertex.index * 4 + influence];\n\t\t\t\tvertex.boneIndices[influence] = this.getBoneRemap(originalBoneIndex);\n\t\t\t}\n\n\t\t\tremappedIndex = this.vertices.length;\n\t\t\tthis.indices.push(remappedIndex);\n\t\t\tthis.vertices.push(vertex);\n\t\t\tthis.indexMap[idx] = remappedIndex;\n\t\t}\n\t}\n\n\taddPrimitive(vertices, vertexIndices, vertexArray, boneLimit) {\n\t\tvar i, j;\n\t\tvar bonesToAdd = [];\n\t\tvar bonesToAddCount = 0;\n\t\tvar vertexCount = vertices.length;\n\n\t\tfor (i = 0; i < vertexCount; i++) {\n\t\t\tvar vertex = vertices[i];\n\t\t\tvar idx = vertex.index;\n\n\t\t\tfor (var influence = 0; influence < 4; influence++) {\n\t\t\t\tif (vertexArray.blendWeight.data[idx * 4 + influence] > 0) {\n\t\t\t\t\tvar boneIndex = vertexArray.blendIndices.data[idx * 4 + influence];\n\t\t\t\t\tvar needToAdd = true;\n\n\t\t\t\t\tfor (j = 0; j < bonesToAddCount; j++) {\n\t\t\t\t\t\tif (bonesToAdd[j] === boneIndex) {\n\t\t\t\t\t\t\tneedToAdd = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (needToAdd) {\n\t\t\t\t\t\tbonesToAdd[bonesToAddCount] = boneIndex;\n\t\t\t\t\t\tvar boneRemap = this.getBoneRemap(boneIndex);\n\t\t\t\t\t\tbonesToAddCount += boneRemap === -1 ? 1 : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.boneIndices.length + bonesToAddCount > boneLimit) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0; i < bonesToAddCount; i++) {\n\t\t\tthis.boneIndices.push(bonesToAdd[i]);\n\t\t}\n\n\t\tfor (i = 0; i < vertexCount; i++) {\n\t\t\tthis.addVertex(vertices[i], vertexIndices[i], vertexArray);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetBoneRemap(boneIndex) {\n\t\tfor (var i = 0; i < this.boneIndices.length; i++) {\n\t\t\tif (this.boneIndices[i] === boneIndex) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n}\n\nfunction indicesToReferences(model) {\n\tvar i;\n\tvar vertices = model.vertices;\n\tvar skins = model.skins;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tfor (i = 0; i < meshes.length; i++) {\n\t\tmeshes[i].vertices = vertices[meshes[i].vertices];\n\n\t\tif (meshes[i].skin !== undefined) {\n\t\t\tmeshes[i].skin = skins[meshes[i].skin];\n\t\t}\n\t}\n\n\tfor (i = 0; i < meshInstances.length; i++) {\n\t\tmeshInstances[i].mesh = meshes[meshInstances[i].mesh];\n\t}\n}\n\nfunction referencesToIndices(model) {\n\tvar i;\n\tvar vertices = model.vertices;\n\tvar skins = model.skins;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tfor (i = 0; i < meshes.length; i++) {\n\t\tmeshes[i].vertices = vertices.indexOf(meshes[i].vertices);\n\n\t\tif (meshes[i].skin !== undefined) {\n\t\t\tmeshes[i].skin = skins.indexOf(meshes[i].skin);\n\t\t}\n\t}\n\n\tfor (i = 0; i < meshInstances.length; i++) {\n\t\tmeshInstances[i].mesh = meshes.indexOf(meshInstances[i].mesh);\n\t}\n}\n\nfunction partitionSkin(model, materialMappings, boneLimit) {\n\tvar i, j, k, index;\n\tindicesToReferences(model);\n\tvar vertexArrays = model.vertices;\n\tvar skins = model.skins;\n\tvar mesh;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tvar getVertex = function getVertex(idx) {\n\t\tvar vert = new PartitionedVertex();\n\t\tvert.index = idx;\n\t\treturn vert;\n\t};\n\n\tfor (i = skins.length - 1; i >= 0; i--) {\n\t\tif (skins[i].boneNames.length > boneLimit) {\n\t\t\tvar skin = skins.splice(i, 1)[0];\n\t\t\tvar meshesToSplit = [];\n\n\t\t\tfor (j = 0; j < meshes.length; j++) {\n\t\t\t\tif (meshes[j].skin === skin) {\n\t\t\t\t\tmeshesToSplit.push(meshes[j]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (j = 0; j < meshesToSplit.length; j++) {\n\t\t\t\tindex = meshes.indexOf(meshesToSplit[j]);\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tmeshes.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (meshesToSplit.length === 0) {\n\t\t\t\tthrow new Error('partitionSkin: There should be at least one mesh that references a skin');\n\t\t\t}\n\n\t\t\tvar vertexArray = meshesToSplit[0].vertices;\n\n\t\t\tfor (j = 1; j < meshesToSplit.length; j++) {\n\t\t\t\tif (meshesToSplit[j].vertices !== vertexArray) {\n\t\t\t\t\tthrow new Error('partitionSkin: All meshes that share a skin should also share the same vertex buffer');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar partition;\n\t\t\tvar partitions = [];\n\t\t\tvar primitiveVertices = [];\n\t\t\tvar primitiveIndices = [];\n\t\t\tvar basePartition = 0;\n\n\t\t\tfor (j = 0; j < meshesToSplit.length; j++) {\n\t\t\t\tmesh = meshesToSplit[j];\n\t\t\t\tvar indices = mesh.indices;\n\n\t\t\t\tfor (var iIndex = mesh.base; iIndex < mesh.base + mesh.count;) {\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[0] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[0] = index;\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[1] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[1] = index;\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[2] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[2] = index;\n\t\t\t\t\tvar added = false;\n\n\t\t\t\t\tfor (var iBonePartition = basePartition; iBonePartition < partitions.length; iBonePartition++) {\n\t\t\t\t\t\tpartition = partitions[iBonePartition];\n\n\t\t\t\t\t\tif (partition.addPrimitive(primitiveVertices, primitiveIndices, vertexArray, boneLimit)) {\n\t\t\t\t\t\t\tadded = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!added) {\n\t\t\t\t\t\tpartition = new SkinPartition();\n\t\t\t\t\t\tpartition.originalMesh = mesh;\n\t\t\t\t\t\tpartition.addPrimitive(primitiveVertices, primitiveIndices, vertexArray, boneLimit);\n\t\t\t\t\t\tpartitions.push(partition);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbasePartition = partitions.length;\n\t\t\t}\n\n\t\t\tvar partitionedVertices = [];\n\t\t\tvar partitionedIndices = [];\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\n\t\t\t\tif (partition.vertices.length && partition.indices.length) {\n\t\t\t\t\tvar vertexStart = partitionedVertices.length;\n\t\t\t\t\tvar vertexCount = partition.vertices.length;\n\t\t\t\t\tvar indexStart = partitionedIndices.length;\n\t\t\t\t\tvar indexCount = partition.indices.length;\n\t\t\t\t\tpartition.partition = j;\n\t\t\t\t\tpartition.vertexStart = vertexStart;\n\t\t\t\t\tpartition.vertexCount = vertexCount;\n\t\t\t\t\tpartition.indexStart = indexStart;\n\t\t\t\t\tpartition.indexCount = indexCount;\n\t\t\t\t\tvar iSour;\n\t\t\t\t\tvar iDest;\n\t\t\t\t\tiSour = 0;\n\t\t\t\t\tiDest = vertexStart;\n\n\t\t\t\t\twhile (iSour < vertexCount) {\n\t\t\t\t\t\tpartitionedVertices[iDest++] = partition.vertices[iSour++];\n\t\t\t\t\t}\n\n\t\t\t\t\tiSour = 0;\n\t\t\t\t\tiDest = indexStart;\n\n\t\t\t\t\twhile (iSour < indexCount) {\n\t\t\t\t\t\tpartitionedIndices[iDest++] = partition.indices[iSour++] + vertexStart;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar splitSkins = [];\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\t\t\t\tvar ibp = [];\n\t\t\t\tvar boneNames = [];\n\n\t\t\t\tfor (k = 0; k < partition.boneIndices.length; k++) {\n\t\t\t\t\tibp.push(skin.inverseBindMatrices[partition.boneIndices[k]]);\n\t\t\t\t\tboneNames.push(skin.boneNames[partition.boneIndices[k]]);\n\t\t\t\t}\n\n\t\t\t\tvar splitSkin = {\n\t\t\t\t\tinverseBindMatrices: ibp,\n\t\t\t\t\tboneNames: boneNames\n\t\t\t\t};\n\t\t\t\tsplitSkins.push(splitSkin);\n\t\t\t\tskins.push(splitSkin);\n\t\t\t}\n\n\t\t\tvar attrib, attribName, data, components;\n\t\t\tvar splitVertexArray = {};\n\n\t\t\tfor (attribName in vertexArray) {\n\t\t\t\tsplitVertexArray[attribName] = {\n\t\t\t\t\tcomponents: vertexArray[attribName].components,\n\t\t\t\t\tdata: [],\n\t\t\t\t\ttype: vertexArray[attribName].type\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (attribName in vertexArray) {\n\t\t\t\tif (attribName === 'blendIndices') {\n\t\t\t\t\tvar dstBoneIndices = splitVertexArray[attribName].data;\n\n\t\t\t\t\tfor (j = 0; j < partitionedVertices.length; j++) {\n\t\t\t\t\t\tvar srcBoneIndices = partitionedVertices[j].boneIndices;\n\t\t\t\t\t\tdstBoneIndices.push(srcBoneIndices[0], srcBoneIndices[1], srcBoneIndices[2], srcBoneIndices[3]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tattrib = vertexArray[attribName];\n\t\t\t\t\tdata = attrib.data;\n\t\t\t\t\tcomponents = attrib.components;\n\n\t\t\t\t\tfor (j = 0; j < partitionedVertices.length; j++) {\n\t\t\t\t\t\tindex = partitionedVertices[j].index;\n\n\t\t\t\t\t\tfor (k = 0; k < components; k++) {\n\t\t\t\t\t\t\tsplitVertexArray[attribName].data.push(data[index * components + k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvertexArrays[vertexArrays.indexOf(vertexArray)] = splitVertexArray;\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\t\t\t\tmesh = {\n\t\t\t\t\taabb: {\n\t\t\t\t\t\tmin: [0, 0, 0],\n\t\t\t\t\t\tmax: [0, 0, 0]\n\t\t\t\t\t},\n\t\t\t\t\tvertices: splitVertexArray,\n\t\t\t\t\tskin: splitSkins[j],\n\t\t\t\t\tindices: partitionedIndices.splice(0, partition.indexCount),\n\t\t\t\t\ttype: 'triangles',\n\t\t\t\t\tbase: 0,\n\t\t\t\t\tcount: partition.indexCount\n\t\t\t\t};\n\t\t\t\tmeshes.push(mesh);\n\n\t\t\t\tfor (k = meshInstances.length - 1; k >= 0; k--) {\n\t\t\t\t\tif (meshInstances[k].mesh === partition.originalMesh) {\n\t\t\t\t\t\tmeshInstances.push({\n\t\t\t\t\t\t\tmesh: mesh,\n\t\t\t\t\t\t\tnode: meshInstances[k].node\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (materialMappings) {\n\t\t\t\t\t\t\tmaterialMappings.push({\n\t\t\t\t\t\t\t\tmaterial: materialMappings[k].material,\n\t\t\t\t\t\t\t\tpath: materialMappings[k].path\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\n\t\t\t\tfor (k = meshInstances.length - 1; k >= 0; k--) {\n\t\t\t\t\tif (meshInstances[k].mesh === partition.originalMesh) {\n\t\t\t\t\t\tmeshInstances.splice(k, 1);\n\n\t\t\t\t\t\tif (materialMappings) {\n\t\t\t\t\t\t\tmaterialMappings.splice(k, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treferencesToIndices(model);\n}\n\nconst JSON_PRIMITIVE_TYPE = {\n\t\"points\": PRIMITIVE_POINTS,\n\t\"lines\": PRIMITIVE_LINES,\n\t\"lineloop\": PRIMITIVE_LINELOOP,\n\t\"linestrip\": PRIMITIVE_LINESTRIP,\n\t\"triangles\": PRIMITIVE_TRIANGLES,\n\t\"trianglestrip\": PRIMITIVE_TRISTRIP,\n\t\"trianglefan\": PRIMITIVE_TRIFAN\n};\nconst JSON_VERTEX_ELEMENT_TYPE = {\n\t\"int8\": TYPE_INT8,\n\t\"uint8\": TYPE_UINT8,\n\t\"int16\": TYPE_INT16,\n\t\"uint16\": TYPE_UINT16,\n\t\"int32\": TYPE_INT32,\n\t\"uint32\": TYPE_UINT32,\n\t\"float32\": TYPE_FLOAT32\n};\n\nclass JsonModelParser {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t}\n\n\tparse(data) {\n\t\tconst modelData = data.model;\n\n\t\tif (!modelData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (modelData.version <= 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst nodes = this._parseNodes(data);\n\n\t\tconst skins = this._parseSkins(data, nodes);\n\n\t\tconst vertexBuffers = this._parseVertexBuffers(data);\n\n\t\tconst indices = this._parseIndexBuffers(data, vertexBuffers);\n\n\t\tconst morphs = this._parseMorphs(data, nodes, vertexBuffers);\n\n\t\tconst meshes = this._parseMeshes(data, skins.skins, morphs.morphs, vertexBuffers, indices.buffer, indices.data);\n\n\t\tconst meshInstances = this._parseMeshInstances(data, nodes, meshes, skins.skins, skins.instances, morphs.morphs, morphs.instances);\n\n\t\tconst model = new Model();\n\t\tmodel.graph = nodes[0];\n\t\tmodel.meshInstances = meshInstances;\n\t\tmodel.skinInstances = skins.instances;\n\t\tmodel.morphInstances = morphs.instances;\n\t\tmodel.getGraph().syncHierarchy();\n\t\treturn model;\n\t}\n\n\t_parseNodes(data) {\n\t\tconst modelData = data.model;\n\t\tconst nodes = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < modelData.nodes.length; i++) {\n\t\t\tconst nodeData = modelData.nodes[i];\n\t\t\tconst node = new GraphNode(nodeData.name);\n\t\t\tnode.setLocalPosition(nodeData.position[0], nodeData.position[1], nodeData.position[2]);\n\t\t\tnode.setLocalEulerAngles(nodeData.rotation[0], nodeData.rotation[1], nodeData.rotation[2]);\n\t\t\tnode.setLocalScale(nodeData.scale[0], nodeData.scale[1], nodeData.scale[2]);\n\t\t\tnode.scaleCompensation = !!nodeData.scaleCompensation;\n\t\t\tnodes.push(node);\n\t\t}\n\n\t\tfor (i = 1; i < modelData.parents.length; i++) {\n\t\t\tnodes[modelData.parents[i]].addChild(nodes[i]);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t_parseSkins(data, nodes) {\n\t\tconst modelData = data.model;\n\t\tconst skins = [];\n\t\tconst skinInstances = [];\n\t\tlet i, j;\n\n\t\tif (!this._device.supportsBoneTextures && modelData.skins.length > 0) {\n\t\t\tconst boneLimit = this._device.getBoneLimit();\n\n\t\t\tpartitionSkin(modelData, null, boneLimit);\n\t\t}\n\n\t\tfor (i = 0; i < modelData.skins.length; i++) {\n\t\t\tconst skinData = modelData.skins[i];\n\t\t\tconst inverseBindMatrices = [];\n\n\t\t\tfor (j = 0; j < skinData.inverseBindMatrices.length; j++) {\n\t\t\t\tconst ibm = skinData.inverseBindMatrices[j];\n\t\t\t\tinverseBindMatrices[j] = new Mat4().set(ibm);\n\t\t\t}\n\n\t\t\tconst skin = new Skin(this._device, inverseBindMatrices, skinData.boneNames);\n\t\t\tskins.push(skin);\n\t\t\tconst skinInstance = new SkinInstance(skin);\n\t\t\tconst bones = [];\n\n\t\t\tfor (j = 0; j < skin.boneNames.length; j++) {\n\t\t\t\tconst boneName = skin.boneNames[j];\n\t\t\t\tconst bone = nodes[0].findByName(boneName);\n\t\t\t\tbones.push(bone);\n\t\t\t}\n\n\t\t\tskinInstance.bones = bones;\n\t\t\tskinInstances.push(skinInstance);\n\t\t}\n\n\t\treturn {\n\t\t\tskins: skins,\n\t\t\tinstances: skinInstances\n\t\t};\n\t}\n\n\t_getMorphVertexCount(modelData, morphIndex, vertexBuffers) {\n\t\tfor (let i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\n\t\t\tif (meshData.morph === morphIndex) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[meshData.vertices];\n\t\t\t\treturn vertexBuffer.numVertices;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t_parseMorphs(data, nodes, vertexBuffers) {\n\t\tconst modelData = data.model;\n\t\tconst morphs = [];\n\t\tconst morphInstances = [];\n\t\tlet i, j, vertexCount;\n\t\tlet targets, morphTarget, morphTargetArray;\n\n\t\tif (modelData.morphs) {\n\t\t\tconst sparseToFull = function sparseToFull(data, indices, totalCount) {\n\t\t\t\tconst full = new Float32Array(totalCount * 3);\n\n\t\t\t\tfor (let s = 0; s < indices.length; s++) {\n\t\t\t\t\tconst dstIndex = indices[s] * 3;\n\t\t\t\t\tfull[dstIndex] = data[s * 3];\n\t\t\t\t\tfull[dstIndex + 1] = data[s * 3 + 1];\n\t\t\t\t\tfull[dstIndex + 2] = data[s * 3 + 2];\n\t\t\t\t}\n\n\t\t\t\treturn full;\n\t\t\t};\n\n\t\t\tfor (i = 0; i < modelData.morphs.length; i++) {\n\t\t\t\ttargets = modelData.morphs[i].targets;\n\t\t\t\tmorphTargetArray = [];\n\t\t\t\tvertexCount = this._getMorphVertexCount(modelData, i, vertexBuffers);\n\n\t\t\t\tfor (j = 0; j < targets.length; j++) {\n\t\t\t\t\tconst targetAabb = targets[j].aabb;\n\t\t\t\t\tconst min = targetAabb.min;\n\t\t\t\t\tconst max = targetAabb.max;\n\t\t\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) * 0.5, (max[1] + min[1]) * 0.5, (max[2] + min[2]) * 0.5), new Vec3((max[0] - min[0]) * 0.5, (max[1] - min[1]) * 0.5, (max[2] - min[2]) * 0.5));\n\t\t\t\t\tconst indices = targets[j].indices;\n\t\t\t\t\tlet deltaPositions = targets[j].deltaPositions;\n\t\t\t\t\tlet deltaNormals = targets[j].deltaNormals;\n\n\t\t\t\t\tif (indices) {\n\t\t\t\t\t\tdeltaPositions = sparseToFull(deltaPositions, indices, vertexCount);\n\t\t\t\t\t\tdeltaNormals = sparseToFull(deltaNormals, indices, vertexCount);\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphTarget = new MorphTarget({\n\t\t\t\t\t\tdeltaPositions: deltaPositions,\n\t\t\t\t\t\tdeltaNormals: deltaNormals,\n\t\t\t\t\t\tname: targets[j].name,\n\t\t\t\t\t\taabb: aabb\n\t\t\t\t\t});\n\t\t\t\t\tmorphTargetArray.push(morphTarget);\n\t\t\t\t}\n\n\t\t\t\tconst morph = new Morph(morphTargetArray, this._device);\n\t\t\t\tmorphs.push(morph);\n\t\t\t\tconst morphInstance = new MorphInstance(morph);\n\t\t\t\tmorphInstances.push(morphInstance);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tmorphs: morphs,\n\t\t\tinstances: morphInstances\n\t\t};\n\t}\n\n\t_parseVertexBuffers(data) {\n\t\tconst modelData = data.model;\n\t\tconst vertexBuffers = [];\n\t\tconst attributeMap = {\n\t\t\tposition: SEMANTIC_POSITION,\n\t\t\tnormal: SEMANTIC_NORMAL,\n\t\t\ttangent: SEMANTIC_TANGENT,\n\t\t\tblendWeight: SEMANTIC_BLENDWEIGHT,\n\t\t\tblendIndices: SEMANTIC_BLENDINDICES,\n\t\t\tcolor: SEMANTIC_COLOR,\n\t\t\ttexCoord0: SEMANTIC_TEXCOORD0,\n\t\t\ttexCoord1: SEMANTIC_TEXCOORD1,\n\t\t\ttexCoord2: SEMANTIC_TEXCOORD2,\n\t\t\ttexCoord3: SEMANTIC_TEXCOORD3,\n\t\t\ttexCoord4: SEMANTIC_TEXCOORD4,\n\t\t\ttexCoord5: SEMANTIC_TEXCOORD5,\n\t\t\ttexCoord6: SEMANTIC_TEXCOORD6,\n\t\t\ttexCoord7: SEMANTIC_TEXCOORD7\n\t\t};\n\n\t\tfor (let i = 0; i < modelData.vertices.length; i++) {\n\t\t\tconst vertexData = modelData.vertices[i];\n\t\t\tconst formatDesc = [];\n\n\t\t\tfor (const attributeName in vertexData) {\n\t\t\t\tconst attribute = vertexData[attributeName];\n\t\t\t\tformatDesc.push({\n\t\t\t\t\tsemantic: attributeMap[attributeName],\n\t\t\t\t\tcomponents: attribute.components,\n\t\t\t\t\ttype: JSON_VERTEX_ELEMENT_TYPE[attribute.type],\n\t\t\t\t\tnormalize: attributeMap[attributeName] === SEMANTIC_COLOR\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst vertexFormat = new VertexFormat(this._device, formatDesc);\n\t\t\tconst numVertices = vertexData.position.data.length / vertexData.position.components;\n\t\t\tconst vertexBuffer = new VertexBuffer(this._device, vertexFormat, numVertices);\n\t\t\tconst iterator = new VertexIterator(vertexBuffer);\n\n\t\t\tfor (let j = 0; j < numVertices; j++) {\n\t\t\t\tfor (const attributeName in vertexData) {\n\t\t\t\t\tconst attribute = vertexData[attributeName];\n\n\t\t\t\t\tswitch (attribute.components) {\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 2], 1.0 - attribute.data[j * 2 + 1]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 3], attribute.data[j * 3 + 1], attribute.data[j * 3 + 2]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 4], attribute.data[j * 4 + 1], attribute.data[j * 4 + 2], attribute.data[j * 4 + 3]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titerator.next();\n\t\t\t}\n\n\t\t\titerator.end();\n\t\t\tvertexBuffers.push(vertexBuffer);\n\t\t}\n\n\t\treturn vertexBuffers;\n\t}\n\n\t_parseIndexBuffers(data, vertexBuffers) {\n\t\tconst modelData = data.model;\n\t\tlet indexBuffer = null;\n\t\tlet indexData = null;\n\t\tlet i;\n\t\tlet numIndices = 0;\n\n\t\tfor (i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\n\t\t\tif (meshData.indices !== undefined) {\n\t\t\t\tnumIndices += meshData.indices.length;\n\t\t\t}\n\t\t}\n\n\t\tlet maxVerts = 0;\n\n\t\tfor (i = 0; i < vertexBuffers.length; i++) {\n\t\t\tmaxVerts = Math.max(maxVerts, vertexBuffers[i].numVertices);\n\t\t}\n\n\t\tif (numIndices > 0) {\n\t\t\tif (maxVerts > 0xFFFF && this._device.extUintElement) {\n\t\t\t\tindexBuffer = new IndexBuffer(this._device, INDEXFORMAT_UINT32, numIndices);\n\t\t\t\tindexData = new Uint32Array(indexBuffer.lock());\n\t\t\t} else {\n\t\t\t\tindexBuffer = new IndexBuffer(this._device, INDEXFORMAT_UINT16, numIndices);\n\t\t\t\tindexData = new Uint16Array(indexBuffer.lock());\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: indexBuffer,\n\t\t\tdata: indexData\n\t\t};\n\t}\n\n\t_parseMeshes(data, skins, morphs, vertexBuffers, indexBuffer, indexData) {\n\t\tconst modelData = data.model;\n\t\tconst meshes = [];\n\t\tlet indexBase = 0;\n\n\t\tfor (let i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\t\t\tconst meshAabb = meshData.aabb;\n\t\t\tconst min = meshAabb.min;\n\t\t\tconst max = meshAabb.max;\n\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) * 0.5, (max[1] + min[1]) * 0.5, (max[2] + min[2]) * 0.5), new Vec3((max[0] - min[0]) * 0.5, (max[1] - min[1]) * 0.5, (max[2] - min[2]) * 0.5));\n\t\t\tconst indexed = meshData.indices !== undefined;\n\t\t\tconst mesh = new Mesh(this._device);\n\t\t\tmesh.vertexBuffer = vertexBuffers[meshData.vertices];\n\t\t\tmesh.indexBuffer[0] = indexed ? indexBuffer : null;\n\t\t\tmesh.primitive[0].type = JSON_PRIMITIVE_TYPE[meshData.type];\n\t\t\tmesh.primitive[0].base = indexed ? meshData.base + indexBase : meshData.base;\n\t\t\tmesh.primitive[0].count = meshData.count;\n\t\t\tmesh.primitive[0].indexed = indexed;\n\t\t\tmesh.skin = meshData.skin !== undefined ? skins[meshData.skin] : null;\n\t\t\tmesh.morph = meshData.morph !== undefined ? morphs[meshData.morph] : null;\n\t\t\tmesh.aabb = aabb;\n\n\t\t\tif (indexed) {\n\t\t\t\tindexData.set(meshData.indices, indexBase);\n\t\t\t\tindexBase += meshData.indices.length;\n\t\t\t}\n\n\t\t\tmeshes.push(mesh);\n\t\t}\n\n\t\tif (indexBuffer !== null) {\n\t\t\tindexBuffer.unlock();\n\t\t}\n\n\t\treturn meshes;\n\t}\n\n\t_parseMeshInstances(data, nodes, meshes, skins, skinInstances, morphs, morphInstances) {\n\t\tconst modelData = data.model;\n\t\tconst meshInstances = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < modelData.meshInstances.length; i++) {\n\t\t\tconst meshInstanceData = modelData.meshInstances[i];\n\t\t\tconst node = nodes[meshInstanceData.node];\n\t\t\tconst mesh = meshes[meshInstanceData.mesh];\n\t\t\tconst meshInstance = new MeshInstance(mesh, Material.defaultMaterial, node);\n\n\t\t\tif (mesh.skin) {\n\t\t\t\tconst skinIndex = skins.indexOf(mesh.skin);\n\t\t\t\tmeshInstance.skinInstance = skinInstances[skinIndex];\n\t\t\t}\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tconst morphIndex = morphs.indexOf(mesh.morph);\n\t\t\t\tmeshInstance.morphInstance = morphInstances[morphIndex];\n\t\t\t}\n\n\t\t\tmeshInstances.push(meshInstance);\n\t\t}\n\n\t\treturn meshInstances;\n\t}\n\n}\n\nclass ModelHandler {\n\tconstructor(device, defaultMaterial) {\n\t\tthis._device = device;\n\t\tthis._parsers = [];\n\t\tthis._defaultMaterial = defaultMaterial;\n\t\tthis.maxRetries = 0;\n\t\tthis.addParser(new JsonModelParser(this._device), function (url, data) {\n\t\t\treturn path.getExtension(url) === '.json';\n\t\t});\n\t\tthis.addParser(new GlbModelParser(this._device), function (url, data) {\n\t\t\treturn path.getExtension(url) === '.glb';\n\t\t});\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:') || url.load.startsWith('data:')) {\n\t\t\tif (path.getExtension(url.original).toLowerCase() === '.glb') {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t} else {\n\t\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t\t}\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (!callback) return;\n\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading model: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tfor (let i = 0; i < this._parsers.length; i++) {\n\t\t\tconst p = this._parsers[i];\n\n\t\t\tif (p.decider(url, data)) {\n\t\t\t\treturn p.parser.parse(data);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (!asset.resource) return;\n\t\tconst data = asset.data;\n\t\tconst self = this;\n\t\tasset.resource.meshInstances.forEach(function (meshInstance, i) {\n\t\t\tif (data.mapping) {\n\t\t\t\tconst handleMaterial = function handleMaterial(asset) {\n\t\t\t\t\tif (asset.resource) {\n\t\t\t\t\t\tmeshInstance.material = asset.resource;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasset.once('load', handleMaterial);\n\t\t\t\t\t\tassets.load(asset);\n\t\t\t\t\t}\n\n\t\t\t\t\tasset.once('remove', function (asset) {\n\t\t\t\t\t\tif (meshInstance.material === asset.resource) {\n\t\t\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tif (!data.mapping[i]) {\n\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst id = data.mapping[i].material;\n\t\t\t\tconst url = data.mapping[i].path;\n\t\t\t\tlet material;\n\n\t\t\t\tif (id !== undefined) {\n\t\t\t\t\tif (!id) {\n\t\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmaterial = assets.get(id);\n\n\t\t\t\t\t\tif (material) {\n\t\t\t\t\t\t\thandleMaterial(material);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassets.once('add:' + id, handleMaterial);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (url) {\n\t\t\t\t\tconst path = asset.getAbsoluteUrl(data.mapping[i].path);\n\t\t\t\t\tmaterial = assets.getByUrl(path);\n\n\t\t\t\t\tif (material) {\n\t\t\t\t\t\thandleMaterial(material);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tassets.once('add:url:' + path, handleMaterial);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\taddParser(parser, decider) {\n\t\tthis._parsers.push({\n\t\t\tparser: parser,\n\t\t\tdecider: decider\n\t\t});\n\t}\n\n}\n\nfunction onContainerAssetLoaded(containerAsset) {\n\tconst renderAsset = this;\n\tif (!renderAsset.resource) return;\n\tconst containerResource = containerAsset.resource;\n\tconst render = containerResource.renders && containerResource.renders[renderAsset.data.renderIndex];\n\n\tif (render) {\n\t\trenderAsset.resource.meshes = render.resource.meshes;\n\t}\n}\n\nfunction onContainerAssetAdded(containerAsset) {\n\tconst renderAsset = this;\n\trenderAsset.registry.off('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\trenderAsset.registry.on('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\trenderAsset.registry.off('remove:' + containerAsset.id, onContainerAssetRemoved, renderAsset);\n\trenderAsset.registry.once('remove:' + containerAsset.id, onContainerAssetRemoved, renderAsset);\n\n\tif (!containerAsset.resource) {\n\t\trenderAsset.registry.load(containerAsset);\n\t} else {\n\t\tonContainerAssetLoaded.call(renderAsset, containerAsset);\n\t}\n}\n\nfunction onContainerAssetRemoved(containerAsset) {\n\tconst renderAsset = this;\n\trenderAsset.registry.off('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\n\tif (renderAsset.resource) {\n\t\trenderAsset.resource.destroy();\n\t}\n}\n\nclass RenderHandler {\n\tconstructor(assets) {\n\t\tthis._registry = assets;\n\t}\n\n\tload(url, callback, asset) {}\n\n\topen(url, data) {\n\t\treturn new Render();\n\t}\n\n\tpatch(asset, registry) {\n\t\tif (!asset.data.containerAsset) return;\n\t\tconst containerAsset = registry.get(asset.data.containerAsset);\n\n\t\tif (!containerAsset) {\n\t\t\tregistry.once('add:' + asset.data.containerAsset, onContainerAssetAdded, asset);\n\t\t\treturn;\n\t\t}\n\n\t\tonContainerAssetAdded.call(asset, containerAsset);\n\t}\n\n}\n\nclass ResourceLoader {\n\tconstructor(app) {\n\t\tthis._handlers = {};\n\t\tthis._requests = {};\n\t\tthis._cache = {};\n\t\tthis._app = app;\n\t}\n\n\taddHandler(type, handler) {\n\t\tthis._handlers[type] = handler;\n\t\thandler._loader = this;\n\t}\n\n\tremoveHandler(type) {\n\t\tdelete this._handlers[type];\n\t}\n\n\tgetHandler(type) {\n\t\treturn this._handlers[type];\n\t}\n\n\tload(url, type, callback, asset) {\n\t\tconst handler = this._handlers[type];\n\n\t\tif (!handler) {\n\t\t\tconst err = \"No handler for asset type: \" + type;\n\t\t\tcallback(err);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!url) {\n\t\t\tthis._loadNull(handler, callback, asset);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst key = url + type;\n\n\t\tif (this._cache[key] !== undefined) {\n\t\t\tcallback(null, this._cache[key]);\n\t\t} else if (this._requests[key]) {\n\t\t\tthis._requests[key].push(callback);\n\t\t} else {\n\t\t\tthis._requests[key] = [callback];\n\t\t\tconst self = this;\n\n\t\t\tconst handleLoad = function handleLoad(err, urlObj) {\n\t\t\t\tif (err) {\n\t\t\t\t\tself._onFailure(key, err);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thandler.load(urlObj, function (err, data, extra) {\n\t\t\t\t\tif (!self._requests[key]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tself._onFailure(key, err);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tself._onSuccess(key, handler.open(urlObj.original, data, asset), extra);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tself._onFailure(key, e);\n\t\t\t\t\t}\n\t\t\t\t}, asset);\n\t\t\t};\n\n\t\t\tconst normalizedUrl = url.split('?')[0];\n\n\t\t\tif (this._app.enableBundles && this._app.bundles.hasUrl(normalizedUrl)) {\n\t\t\t\tif (!this._app.bundles.canLoadUrl(normalizedUrl)) {\n\t\t\t\t\thandleLoad('Bundle for ' + url + ' not loaded yet');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._app.bundles.loadUrl(normalizedUrl, function (err, fileUrlFromBundle) {\n\t\t\t\t\thandleLoad(err, {\n\t\t\t\t\t\tload: fileUrlFromBundle,\n\t\t\t\t\t\toriginal: normalizedUrl\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\thandleLoad(null, {\n\t\t\t\t\tload: url,\n\t\t\t\t\toriginal: asset && asset.getPreferredFile().filename || url\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t_loadNull(handler, callback, asset) {\n\t\tconst onLoad = function onLoad(err, data, extra) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tcallback(null, handler.open(null, data, asset), extra);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcallback(e);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thandler.load(null, onLoad, asset);\n\t}\n\n\t_onSuccess(key, result, extra) {\n\t\tthis._cache[key] = result;\n\n\t\tfor (let i = 0; i < this._requests[key].length; i++) {\n\t\t\tthis._requests[key][i](null, result, extra);\n\t\t}\n\n\t\tdelete this._requests[key];\n\t}\n\n\t_onFailure(key, err) {\n\t\tconsole.error(err);\n\n\t\tif (this._requests[key]) {\n\t\t\tfor (let i = 0; i < this._requests[key].length; i++) {\n\t\t\t\tthis._requests[key][i](err);\n\t\t\t}\n\n\t\t\tdelete this._requests[key];\n\t\t}\n\t}\n\n\topen(type, data) {\n\t\tconst handler = this._handlers[type];\n\n\t\tif (!handler) {\n\t\t\tconsole.warn(\"No resource handler found for: \" + type);\n\t\t\treturn data;\n\t\t}\n\n\t\treturn handler.open(null, data);\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst handler = this._handlers[asset.type];\n\n\t\tif (!handler) {\n\t\t\tconsole.warn(\"No resource handler found for: \" + asset.type);\n\t\t\treturn;\n\t\t}\n\n\t\tif (handler.patch) {\n\t\t\thandler.patch(asset, assets);\n\t\t}\n\t}\n\n\tclearCache(url, type) {\n\t\tdelete this._cache[url + type];\n\t}\n\n\tgetFromCache(url, type) {\n\t\tif (this._cache[url + type]) {\n\t\t\treturn this._cache[url + type];\n\t\t}\n\t}\n\n\tenableRetry(maxRetries = 5) {\n\t\tmaxRetries = Math.max(0, maxRetries) || 0;\n\n\t\tfor (const key in this._handlers) {\n\t\t\tthis._handlers[key].maxRetries = maxRetries;\n\t\t}\n\t}\n\n\tdisableRetry() {\n\t\tfor (const key in this._handlers) {\n\t\t\tthis._handlers[key].maxRetries = 0;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._handlers = {};\n\t\tthis._requests = {};\n\t\tthis._cache = {};\n\t}\n\n}\n\nclass SceneHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\tthis._app.systems.script.preloading = true;\n\t\tconst parser = new SceneParser(this._app, false);\n\t\tconst parent = parser.parse(data);\n\t\tconst scene = this._app.scene;\n\t\tscene.root = parent;\n\n\t\tthis._app.applySceneSettings(data.settings);\n\n\t\tthis._app.systems.script.preloading = false;\n\t\treturn scene;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nvar _legacy = false;\nvar _createdLoadingScreen = false;\nvar script = {\n\tapp: null,\n\tcreate: function (name, callback) {\n\t\tif (!_legacy) return;\n\t\tvar ScriptType = callback(script.app);\n\t\tScriptType._pcScriptName = name;\n\n\t\tScriptHandler._push(ScriptType);\n\n\t\tthis.fire(\"created\", name, callback);\n\t},\n\tattribute: function (name, type, defaultValue, options) {},\n\tcreateLoadingScreen: function (callback) {\n\t\tif (_createdLoadingScreen) return;\n\t\t_createdLoadingScreen = true;\n\t\tvar app = getApplication();\n\t\tcallback(app);\n\t}\n};\nObject.defineProperty(script, 'legacy', {\n\tget: function () {\n\t\treturn _legacy;\n\t},\n\tset: function (value) {\n\t\t_legacy = value;\n\t}\n});\nevents.attach(script);\n\nclass ScriptHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis._scripts = {};\n\t\tthis._cache = {};\n\t}\n\n\tstatic _push(Type) {\n\t\tif (script.legacy && ScriptHandler._types.length > 0) {\n\t\t\tconsole.assert(\"Script Ordering Error. Contact support@playcanvas.com\");\n\t\t} else {\n\t\t\tScriptHandler._types.push(Type);\n\t\t}\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\tscript.app = this._app;\n\n\t\tthis._loadScript(url.load, function (err, url, extra) {\n\t\t\tif (!err) {\n\t\t\t\tif (script.legacy) {\n\t\t\t\t\tlet Type = null;\n\n\t\t\t\t\tif (ScriptHandler._types.length) {\n\t\t\t\t\t\tType = ScriptHandler._types.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type) {\n\t\t\t\t\t\tthis._scripts[url] = Type;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tType = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(null, Type, extra);\n\t\t\t\t} else {\n\t\t\t\t\tconst obj = {};\n\n\t\t\t\t\tfor (let i = 0; i < ScriptHandler._types.length; i++) obj[ScriptHandler._types[i].name] = ScriptHandler._types[i];\n\n\t\t\t\t\tScriptHandler._types.length = 0;\n\t\t\t\t\tcallback(null, obj, extra);\n\t\t\t\t\tdelete self._loader._cache[url + 'script'];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback(err);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n\t_loadScript(url, callback) {\n\t\tconst head = document.head;\n\t\tconst element = document.createElement('script');\n\t\tthis._cache[url] = element;\n\t\telement.async = false;\n\t\telement.addEventListener('error', function (e) {\n\t\t\tcallback(\"Script: \" + e.target.src + \" failed to load\");\n\t\t}, false);\n\t\tlet done = false;\n\n\t\telement.onload = element.onreadystatechange = function () {\n\t\t\tif (!done && (!this.readyState || this.readyState === \"loaded\" || this.readyState === \"complete\")) {\n\t\t\t\tdone = true;\n\t\t\t\tcallback(null, url, element);\n\t\t\t}\n\t\t};\n\n\t\telement.src = url;\n\t\thead.appendChild(element);\n\t}\n\n}\n\nScriptHandler._types = [];\n\nclass ShaderHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading shader resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nconst spriteNormals = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1];\nconst spriteIndices = [0, 1, 3, 2, 3, 1];\n\nclass Sprite extends EventHandler {\n\tconstructor(device, options) {\n\t\tsuper();\n\t\tthis._device = device;\n\t\tthis._pixelsPerUnit = options && options.pixelsPerUnit !== undefined ? options.pixelsPerUnit : 1;\n\t\tthis._renderMode = options && options.renderMode !== undefined ? options.renderMode : SPRITE_RENDERMODE_SIMPLE;\n\t\tthis._atlas = options && options.atlas !== undefined ? options.atlas : null;\n\t\tthis._frameKeys = options && options.frameKeys !== undefined ? options.frameKeys : null;\n\t\tthis._meshes = [];\n\t\tthis._updatingProperties = false;\n\t\tthis._meshesDirty = false;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tthis._createMeshes();\n\t\t}\n\t}\n\n\t_createMeshes() {\n\t\tvar i, len;\n\n\t\tfor (i = 0, len = this._meshes.length; i < len; i++) {\n\t\t\tvar mesh = this._meshes[i];\n\n\t\t\tif (mesh) {\n\t\t\t\tmesh.destroy();\n\t\t\t}\n\t\t}\n\n\t\tvar count = this._frameKeys.length;\n\t\tthis._meshes = new Array(count);\n\t\tvar createMeshFunc = this.renderMode === SPRITE_RENDERMODE_SLICED || this._renderMode === SPRITE_RENDERMODE_TILED ? this._create9SliceMesh : this._createSimpleMesh;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tvar frame = this._atlas.frames[this._frameKeys[i]];\n\t\t\tthis._meshes[i] = frame ? createMeshFunc.call(this, frame) : null;\n\t\t}\n\n\t\tthis.fire('set:meshes');\n\t}\n\n\t_createSimpleMesh(frame) {\n\t\tvar rect = frame.rect;\n\t\tvar texWidth = this._atlas.texture.width;\n\t\tvar texHeight = this._atlas.texture.height;\n\t\tvar w = rect.z / this._pixelsPerUnit;\n\t\tvar h = rect.w / this._pixelsPerUnit;\n\t\tvar hp = frame.pivot.x;\n\t\tvar vp = frame.pivot.y;\n\t\tvar positions = [-hp * w, -vp * h, 0, (1 - hp) * w, -vp * h, 0, (1 - hp) * w, (1 - vp) * h, 0, -hp * w, (1 - vp) * h, 0];\n\t\tvar lu = rect.x / texWidth;\n\t\tvar bv = 1.0 - rect.y / texHeight;\n\t\tvar ru = (rect.x + rect.z) / texWidth;\n\t\tvar tv = 1.0 - (rect.y + rect.w) / texHeight;\n\t\tvar uvs = [lu, bv, ru, bv, ru, tv, lu, tv];\n\t\tvar mesh = createMesh$1(this._device, positions, {\n\t\t\tuvs: uvs,\n\t\t\tnormals: spriteNormals,\n\t\t\tindices: spriteIndices\n\t\t});\n\t\treturn mesh;\n\t}\n\n\t_create9SliceMesh() {\n\t\tvar he = Vec2.ONE;\n\t\tvar ws = 3;\n\t\tvar ls = 3;\n\t\tvar i, j;\n\t\tvar x, y, z, u, v;\n\t\tvar positions = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\t\tvar indices = [];\n\t\tvar vcounter = 0;\n\n\t\tfor (i = 0; i <= ws; i++) {\n\t\t\tu = i === 0 || i === ws ? 0 : 1;\n\n\t\t\tfor (j = 0; j <= ls; j++) {\n\t\t\t\tx = -he.x + 2.0 * he.x * (i <= 1 ? 0 : 3) / ws;\n\t\t\t\ty = 0.0;\n\t\t\t\tz = -(-he.y + 2.0 * he.y * (j <= 1 ? 0 : 3) / ls);\n\t\t\t\tv = j === 0 || j === ls ? 0 : 1;\n\t\t\t\tpositions.push(-x, y, z);\n\t\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\t\tuvs.push(u, v);\n\n\t\t\t\tif (i < ws && j < ls) {\n\t\t\t\t\tindices.push(vcounter + ls + 1, vcounter + 1, vcounter);\n\t\t\t\t\tindices.push(vcounter + ls + 1, vcounter + ls + 2, vcounter + 1);\n\t\t\t\t}\n\n\t\t\t\tvcounter++;\n\t\t\t}\n\t\t}\n\n\t\tvar options = {\n\t\t\tnormals: normals,\n\t\t\tuvs: uvs,\n\t\t\tindices: indices\n\t\t};\n\t\treturn createMesh$1(this._device, positions, options);\n\t}\n\n\t_onSetFrames(frames) {\n\t\tif (this._updatingProperties) {\n\t\t\tthis._meshesDirty = true;\n\t\t} else {\n\t\t\tthis._createMeshes();\n\t\t}\n\t}\n\n\t_onFrameChanged(frameKey, frame) {\n\t\tvar idx = this._frameKeys.indexOf(frameKey);\n\n\t\tif (idx < 0) return;\n\n\t\tif (frame) {\n\t\t\tif (this.renderMode === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\t\tthis._meshes[idx] = this._createSimpleMesh(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._meshes[idx] = null;\n\t\t}\n\n\t\tthis.fire('set:meshes');\n\t}\n\n\t_onFrameRemoved(frameKey) {\n\t\tvar idx = this._frameKeys.indexOf(frameKey);\n\n\t\tif (idx < 0) return;\n\t\tthis._meshes[idx] = null;\n\t\tthis.fire('set:meshes');\n\t}\n\n\tstartUpdate() {\n\t\tthis._updatingProperties = true;\n\t\tthis._meshesDirty = false;\n\t}\n\n\tendUpdate() {\n\t\tthis._updatingProperties = false;\n\n\t\tif (this._meshesDirty && this._atlas && this._frameKeys) {\n\t\t\tthis._createMeshes();\n\t\t}\n\n\t\tthis._meshesDirty = false;\n\t}\n\n\tdestroy() {\n\t\tfor (const mesh of this._meshes) {\n\t\t\tif (mesh) mesh.destroy();\n\t\t}\n\n\t\tthis._meshes.length = 0;\n\t}\n\n\tget frameKeys() {\n\t\treturn this._frameKeys;\n\t}\n\n\tset frameKeys(value) {\n\t\tthis._frameKeys = value;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:frameKeys', value);\n\t}\n\n\tget atlas() {\n\t\treturn this._atlas;\n\t}\n\n\tset atlas(value) {\n\t\tif (value === this._atlas) return;\n\n\t\tif (this._atlas) {\n\t\t\tthis._atlas.off('set:frames', this._onSetFrames, this);\n\n\t\t\tthis._atlas.off('set:frame', this._onFrameChanged, this);\n\n\t\t\tthis._atlas.off('remove:frame', this._onFrameRemoved, this);\n\t\t}\n\n\t\tthis._atlas = value;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tthis._atlas.on('set:frames', this._onSetFrames, this);\n\n\t\t\tthis._atlas.on('set:frame', this._onFrameChanged, this);\n\n\t\t\tthis._atlas.on('remove:frame', this._onFrameRemoved, this);\n\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:atlas', value);\n\t}\n\n\tget pixelsPerUnit() {\n\t\treturn this._pixelsPerUnit;\n\t}\n\n\tset pixelsPerUnit(value) {\n\t\tif (this._pixelsPerUnit === value) return;\n\t\tthis._pixelsPerUnit = value;\n\t\tthis.fire('set:pixelsPerUnit', value);\n\n\t\tif (this._atlas && this._frameKeys && this.renderMode === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\t}\n\n\tget renderMode() {\n\t\treturn this._renderMode;\n\t}\n\n\tset renderMode(value) {\n\t\tif (this._renderMode === value) return;\n\t\tvar prev = this._renderMode;\n\t\tthis._renderMode = value;\n\t\tthis.fire('set:renderMode', value);\n\n\t\tif (prev === SPRITE_RENDERMODE_SIMPLE || value === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\tif (this._atlas && this._frameKeys) {\n\t\t\t\tif (this._updatingProperties) {\n\t\t\t\t\tthis._meshesDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._createMeshes();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshes() {\n\t\treturn this._meshes;\n\t}\n\n}\n\nfunction onTextureAtlasLoaded(atlasAsset) {\n\tconst spriteAsset = this;\n\n\tif (spriteAsset.resource) {\n\t\tspriteAsset.resource.atlas = atlasAsset.resource;\n\t}\n}\n\nfunction onTextureAtlasAdded(atlasAsset) {\n\tconst spriteAsset = this;\n\tspriteAsset.registry.load(atlasAsset);\n}\n\nclass SpriteHandler {\n\tconstructor(assets, device) {\n\t\tthis._assets = assets;\n\t\tthis._device = device;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tcallback(null, response);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\tconst sprite = new Sprite(this._device);\n\n\t\tif (url) {\n\t\t\tsprite.__data = data;\n\t\t}\n\n\t\treturn sprite;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst sprite = asset.resource;\n\n\t\tif (sprite.__data) {\n\t\t\tasset.data.pixelsPerUnit = sprite.__data.pixelsPerUnit;\n\t\t\tasset.data.renderMode = sprite.__data.renderMode;\n\t\t\tasset.data.frameKeys = sprite.__data.frameKeys;\n\n\t\t\tif (sprite.__data.textureAtlasAsset) {\n\t\t\t\tconst atlas = assets.getByUrl(sprite.__data.textureAtlasAsset);\n\n\t\t\t\tif (atlas) {\n\t\t\t\t\tasset.data.textureAtlasAsset = atlas.id;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Could not find textureatlas with url: \" + sprite.__data.textureAtlasAsset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsprite.startUpdate();\n\t\tsprite.renderMode = asset.data.renderMode;\n\t\tsprite.pixelsPerUnit = asset.data.pixelsPerUnit;\n\t\tsprite.frameKeys = asset.data.frameKeys;\n\n\t\tthis._updateAtlas(asset);\n\n\t\tsprite.endUpdate();\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t}\n\n\t_updateAtlas(asset) {\n\t\tconst sprite = asset.resource;\n\n\t\tif (!asset.data.textureAtlasAsset) {\n\t\t\tsprite.atlas = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._assets.off('load:' + asset.data.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\tthis._assets.on('load:' + asset.data.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\tconst atlasAsset = this._assets.get(asset.data.textureAtlasAsset);\n\n\t\tif (atlasAsset && atlasAsset.resource) {\n\t\t\tsprite.atlas = atlasAsset.resource;\n\t\t} else {\n\t\t\tif (!atlasAsset) {\n\t\t\t\tthis._assets.off('add:' + asset.data.textureAtlasAsset, onTextureAtlasAdded, asset);\n\n\t\t\t\tthis._assets.on('add:' + asset.data.textureAtlasAsset, onTextureAtlasAdded, asset);\n\t\t\t} else {\n\t\t\t\tthis._assets.load(atlasAsset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onAssetChange(asset, attribute, value, oldValue) {\n\t\tif (attribute === 'data') {\n\t\t\tif (value && value.textureAtlasAsset && oldValue && value.textureAtlasAsset !== oldValue.textureAtlasAsset) {\n\t\t\t\tthis._assets.off('load:' + oldValue.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\t\t\tthis._assets.off('add:' + oldValue.textureAtlasAsset, onTextureAtlasAdded, asset);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass Template {\n\tconstructor(app, data) {\n\t\tthis._app = app;\n\t\tthis._data = data;\n\t\tthis._templateRoot = null;\n\t}\n\n\tinstantiate() {\n\t\tif (!this._templateRoot) {\n\t\t\tthis._parseTemplate();\n\t\t}\n\n\t\treturn this._templateRoot.clone();\n\t}\n\n\t_parseTemplate() {\n\t\tvar parser = new SceneParser(this._app, true);\n\t\tthis._templateRoot = parser.parse(this._data);\n\t}\n\n}\n\nclass TemplateHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {}, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error requesting template: \" + url.original);\n\t\t\t} else {\n\t\t\t\tcallback(err, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn new Template(this._app, data);\n\t}\n\n}\n\nclass TextHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading text resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass TextureAtlas extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._texture = null;\n\t\tthis._frames = null;\n\t}\n\n\tsetFrame(key, data) {\n\t\tvar frame = this._frames[key];\n\n\t\tif (!frame) {\n\t\t\tframe = {\n\t\t\t\trect: data.rect.clone(),\n\t\t\t\tpivot: data.pivot.clone(),\n\t\t\t\tborder: data.border.clone()\n\t\t\t};\n\t\t\tthis._frames[key] = frame;\n\t\t} else {\n\t\t\tframe.rect.copy(data.rect);\n\t\t\tframe.pivot.copy(data.pivot);\n\t\t\tframe.border.copy(data.border);\n\t\t}\n\n\t\tthis.fire('set:frame', key.toString(), frame);\n\t}\n\n\tremoveFrame(key) {\n\t\tvar frame = this._frames[key];\n\n\t\tif (frame) {\n\t\t\tdelete this._frames[key];\n\t\t\tthis.fire('remove:frame', key.toString(), frame);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif (this._texture) {\n\t\t\tthis._texture.destroy();\n\t\t}\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tset texture(value) {\n\t\tthis._texture = value;\n\t\tthis.fire('set:texture', value);\n\t}\n\n\tget frames() {\n\t\treturn this._frames;\n\t}\n\n\tset frames(value) {\n\t\tthis._frames = value;\n\t\tthis.fire('set:frames', value);\n\t}\n\n}\n\nconst JSON_ADDRESS_MODE$1 = {\n\t\"repeat\": ADDRESS_REPEAT,\n\t\"clamp\": ADDRESS_CLAMP_TO_EDGE,\n\t\"mirror\": ADDRESS_MIRRORED_REPEAT\n};\nconst JSON_FILTER_MODE$1 = {\n\t\"nearest\": FILTER_NEAREST,\n\t\"linear\": FILTER_LINEAR,\n\t\"nearest_mip_nearest\": FILTER_NEAREST_MIPMAP_NEAREST,\n\t\"linear_mip_nearest\": FILTER_LINEAR_MIPMAP_NEAREST,\n\t\"nearest_mip_linear\": FILTER_NEAREST_MIPMAP_LINEAR,\n\t\"linear_mip_linear\": FILTER_LINEAR_MIPMAP_LINEAR\n};\nconst regexFrame = /^data\\.frames\\.(\\d+)$/;\n\nclass TextureAtlasHandler {\n\tconstructor(loader) {\n\t\tthis._loader = loader;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\n\t\tconst handler = this._loader.getHandler(\"texture\");\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tconst textureUrl = url.original.replace('.json', '.png');\n\n\t\t\t\t\tself._loader.load(textureUrl, \"texture\", function (err, texture) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\t\tdata: response,\n\t\t\t\t\t\t\t\ttexture: texture\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn handler.load(url, callback);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\tconst resource = new TextureAtlas();\n\n\t\tif (data.texture && data.data) {\n\t\t\tresource.texture = data.texture;\n\t\t\tresource.__data = data.data;\n\t\t} else {\n\t\t\tconst handler = this._loader.getHandler(\"texture\");\n\n\t\t\tconst texture = handler.open(url, data);\n\t\t\tif (!texture) return null;\n\t\t\tresource.texture = texture;\n\t\t}\n\n\t\treturn resource;\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (asset.resource.__data) {\n\t\t\tif (asset.resource.__data.minfilter !== undefined) asset.data.minfilter = asset.resource.__data.minfilter;\n\t\t\tif (asset.resource.__data.magfilter !== undefined) asset.data.magfilter = asset.resource.__data.magfilter;\n\t\t\tif (asset.resource.__data.addressu !== undefined) asset.data.addressu = asset.resource.__data.addressu;\n\t\t\tif (asset.resource.__data.addressv !== undefined) asset.data.addressv = asset.resource.__data.addressv;\n\t\t\tif (asset.resource.__data.mipmaps !== undefined) asset.data.mipmaps = asset.resource.__data.mipmaps;\n\t\t\tif (asset.resource.__data.anisotropy !== undefined) asset.data.anisotropy = asset.resource.__data.anisotropy;\n\t\t\tif (asset.resource.__data.rgbm !== undefined) asset.data.rgbm = !!asset.resource.__data.rgbm;\n\t\t\tasset.data.frames = asset.resource.__data.frames;\n\t\t\tdelete asset.resource.__data;\n\t\t}\n\n\t\tconst texture = asset.resource.texture;\n\n\t\tif (texture) {\n\t\t\ttexture.name = asset.name;\n\t\t\tif (asset.data.hasOwnProperty('minfilter') && texture.minFilter !== JSON_FILTER_MODE$1[asset.data.minfilter]) texture.minFilter = JSON_FILTER_MODE$1[asset.data.minfilter];\n\t\t\tif (asset.data.hasOwnProperty('magfilter') && texture.magFilter !== JSON_FILTER_MODE$1[asset.data.magfilter]) texture.magFilter = JSON_FILTER_MODE$1[asset.data.magfilter];\n\t\t\tif (asset.data.hasOwnProperty('addressu') && texture.addressU !== JSON_ADDRESS_MODE$1[asset.data.addressu]) texture.addressU = JSON_ADDRESS_MODE$1[asset.data.addressu];\n\t\t\tif (asset.data.hasOwnProperty('addressv') && texture.addressV !== JSON_ADDRESS_MODE$1[asset.data.addressv]) texture.addressV = JSON_ADDRESS_MODE$1[asset.data.addressv];\n\t\t\tif (asset.data.hasOwnProperty('mipmaps') && texture.mipmaps !== asset.data.mipmaps) texture.mipmaps = asset.data.mipmaps;\n\t\t\tif (asset.data.hasOwnProperty('anisotropy') && texture.anisotropy !== asset.data.anisotropy) texture.anisotropy = asset.data.anisotropy;\n\n\t\t\tif (asset.data.hasOwnProperty('rgbm')) {\n\t\t\t\tconst type = asset.data.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\n\t\t\t\tif (texture.type !== type) {\n\t\t\t\t\ttexture.type = type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasset.resource.texture = texture;\n\t\tconst frames = {};\n\n\t\tfor (const key in asset.data.frames) {\n\t\t\tconst frame = asset.data.frames[key];\n\t\t\tframes[key] = {\n\t\t\t\trect: new Vec4(frame.rect),\n\t\t\t\tpivot: new Vec2(frame.pivot),\n\t\t\t\tborder: new Vec4(frame.border)\n\t\t\t};\n\t\t}\n\n\t\tasset.resource.frames = frames;\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t}\n\n\t_onAssetChange(asset, attribute, value) {\n\t\tlet frame;\n\n\t\tif (attribute === 'data' || attribute === 'data.frames') {\n\t\t\tconst frames = {};\n\n\t\t\tfor (const key in value.frames) {\n\t\t\t\tframe = value.frames[key];\n\t\t\t\tframes[key] = {\n\t\t\t\t\trect: new Vec4(frame.rect),\n\t\t\t\t\tpivot: new Vec2(frame.pivot),\n\t\t\t\t\tborder: new Vec4(frame.border)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tasset.resource.frames = frames;\n\t\t} else {\n\t\t\tconst match = attribute.match(regexFrame);\n\n\t\t\tif (match) {\n\t\t\t\tconst frameKey = match[1];\n\n\t\t\t\tif (value) {\n\t\t\t\t\tif (!asset.resource.frames[frameKey]) {\n\t\t\t\t\t\tasset.resource.frames[frameKey] = {\n\t\t\t\t\t\t\trect: new Vec4(value.rect),\n\t\t\t\t\t\t\tpivot: new Vec2(value.pivot),\n\t\t\t\t\t\t\tborder: new Vec4(value.border)\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tframe = asset.resource.frames[frameKey];\n\t\t\t\t\t\tframe.rect.set(value.rect[0], value.rect[1], value.rect[2], value.rect[3]);\n\t\t\t\t\t\tframe.pivot.set(value.pivot[0], value.pivot[1]);\n\t\t\t\t\t\tframe.border.set(value.border[0], value.border[1], value.border[2], value.border[3]);\n\t\t\t\t\t}\n\n\t\t\t\t\tasset.resource.fire('set:frame', frameKey, asset.resource.frames[frameKey]);\n\t\t\t\t} else {\n\t\t\t\t\tif (asset.resource.frames[frameKey]) {\n\t\t\t\t\t\tdelete asset.resource.frames[frameKey];\n\t\t\t\t\t\tasset.resource.fire('remove:frame', frameKey);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction BasisWorker() {\n\tconst BASIS_FORMAT = {\n\t\tcTFETC1: 0,\n\t\tcTFETC2: 1,\n\t\tcTFBC1: 2,\n\t\tcTFBC3: 3,\n\t\tcTFPVRTC1_4_RGB: 8,\n\t\tcTFPVRTC1_4_RGBA: 9,\n\t\tcTFASTC_4x4: 10,\n\t\tcTFATC_RGB: 11,\n\t\tcTFATC_RGBA_INTERPOLATED_ALPHA: 12,\n\t\tcTFRGBA32: 13,\n\t\tcTFRGB565: 14,\n\t\tcTFRGBA4444: 16\n\t};\n\tconst opaqueMapping = {\n\t\tastc: BASIS_FORMAT.cTFASTC_4x4,\n\t\tdxt: BASIS_FORMAT.cTFBC1,\n\t\tetc1: BASIS_FORMAT.cTFETC1,\n\t\tetc2: BASIS_FORMAT.cTFETC1,\n\t\tpvr: BASIS_FORMAT.cTFPVRTC1_4_RGB,\n\t\tatc: BASIS_FORMAT.cTFATC_RGB,\n\t\tnone: BASIS_FORMAT.cTFRGB565\n\t};\n\tconst alphaMapping = {\n\t\tastc: BASIS_FORMAT.cTFASTC_4x4,\n\t\tdxt: BASIS_FORMAT.cTFBC3,\n\t\tetc1: BASIS_FORMAT.cTFRGBA4444,\n\t\tetc2: BASIS_FORMAT.cTFETC2,\n\t\tpvr: BASIS_FORMAT.cTFPVRTC1_4_RGBA,\n\t\tatc: BASIS_FORMAT.cTFATC_RGBA_INTERPOLATED_ALPHA,\n\t\tnone: BASIS_FORMAT.cTFRGBA4444\n\t};\n\tconst PIXEL_FORMAT = {\n\t\tETC1: 21,\n\t\tETC2_RGB: 22,\n\t\tETC2_RGBA: 23,\n\t\tDXT1: 8,\n\t\tDXT5: 10,\n\t\tPVRTC_4BPP_RGB_1: 26,\n\t\tPVRTC_4BPP_RGBA_1: 27,\n\t\tASTC_4x4: 28,\n\t\tATC_RGB: 29,\n\t\tATC_RGBA: 30,\n\t\tR8_G8_B8_A8: 7,\n\t\tR5_G6_B5: 3,\n\t\tR4_G4_B4_A4: 5\n\t};\n\n\tconst basisToEngineMapping = (basisFormat, deviceDetails) => {\n\t\tswitch (basisFormat) {\n\t\t\tcase BASIS_FORMAT.cTFETC1:\n\t\t\t\treturn deviceDetails.formats.etc1 ? PIXEL_FORMAT.ETC1 : PIXEL_FORMAT.ETC2_RGB;\n\n\t\t\tcase BASIS_FORMAT.cTFETC2:\n\t\t\t\treturn PIXEL_FORMAT.ETC2_RGBA;\n\n\t\t\tcase BASIS_FORMAT.cTFBC1:\n\t\t\t\treturn PIXEL_FORMAT.DXT1;\n\n\t\t\tcase BASIS_FORMAT.cTFBC3:\n\t\t\t\treturn PIXEL_FORMAT.DXT5;\n\n\t\t\tcase BASIS_FORMAT.cTFPVRTC1_4_RGB:\n\t\t\t\treturn PIXEL_FORMAT.PVRTC_4BPP_RGB_1;\n\n\t\t\tcase BASIS_FORMAT.cTFPVRTC1_4_RGBA:\n\t\t\t\treturn PIXEL_FORMAT.PVRTC_4BPP_RGBA_1;\n\n\t\t\tcase BASIS_FORMAT.cTFASTC_4x4:\n\t\t\t\treturn PIXEL_FORMAT.ASTC_4x4;\n\n\t\t\tcase BASIS_FORMAT.cTFATC_RGB:\n\t\t\t\treturn PIXEL_FORMAT.ATC_RGB;\n\n\t\t\tcase BASIS_FORMAT.cTFATC_RGBA_INTERPOLATED_ALPHA:\n\t\t\t\treturn PIXEL_FORMAT.ATC_RGBA;\n\n\t\t\tcase BASIS_FORMAT.cTFRGBA32:\n\t\t\t\treturn PIXEL_FORMAT.R8_G8_B8_A8;\n\n\t\t\tcase BASIS_FORMAT.cTFRGB565:\n\t\t\t\treturn PIXEL_FORMAT.R5_G6_B5;\n\n\t\t\tcase BASIS_FORMAT.cTFRGBA4444:\n\t\t\t\treturn PIXEL_FORMAT.R4_G4_B4_A4;\n\t\t}\n\t};\n\n\tconst unswizzleGGGR = data => {\n\t\tconst genB = function genB(R, G) {\n\t\t\tconst r = R * (2.0 / 255.0) - 1.0;\n\t\t\tconst g = G * (2.0 / 255.0) - 1.0;\n\t\t\tconst b = Math.sqrt(1.0 - Math.min(1.0, r * r + g * g));\n\t\t\treturn Math.max(0, Math.min(255, Math.floor((b + 1.0) * 0.5 * 255.0)));\n\t\t};\n\n\t\tfor (let offset = 0; offset < data.length; offset += 4) {\n\t\t\tconst R = data[offset + 3];\n\t\t\tconst G = data[offset + 1];\n\t\t\tdata[offset + 0] = R;\n\t\t\tdata[offset + 2] = genB(R, G);\n\t\t\tdata[offset + 3] = 255;\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tconst isCompressedFormat = basisFormat => {\n\t\treturn basisFormat !== BASIS_FORMAT.cTFRGBA32 && basisFormat !== BASIS_FORMAT.cTFRGB565 && basisFormat !== BASIS_FORMAT.cTFRGBA4444;\n\t};\n\n\tconst pack565 = data => {\n\t\tconst result = new Uint16Array(data.length / 4);\n\n\t\tfor (let offset = 0; offset < data.length; offset += 4) {\n\t\t\tconst R = data[offset + 0];\n\t\t\tconst G = data[offset + 1];\n\t\t\tconst B = data[offset + 2];\n\t\t\tresult[offset / 4] = (R & 0xf8) << 8 | (G & 0xfc) << 3 | B >> 3;\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconst performanceNow = () => {\n\t\treturn typeof performance !== 'undefined' ? performance.now() : 0;\n\t};\n\n\tlet basis;\n\tlet rgbPriority;\n\tlet rgbaPriority;\n\n\tconst chooseTargetFormat = (deviceDetails, hasAlpha, isUASTC) => {\n\t\tif (isUASTC) {\n\t\t\tif (deviceDetails.formats.astc) {\n\t\t\t\treturn 'astc';\n\t\t\t}\n\t\t} else {\n\t\t\tif (hasAlpha) {\n\t\t\t\tif (deviceDetails.formats.etc2) {\n\t\t\t\t\treturn 'etc2';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (deviceDetails.formats.etc1 || deviceDetails.formats.etc2) {\n\t\t\t\t\treturn 'etc1';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst testInOrder = priority => {\n\t\t\tfor (let i = 0; i < priority.length; ++i) {\n\t\t\t\tconst format = priority[i];\n\n\t\t\t\tif (deviceDetails.formats[format]) {\n\t\t\t\t\treturn format;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 'none';\n\t\t};\n\n\t\treturn testInOrder(hasAlpha ? rgbaPriority : rgbPriority);\n\t};\n\n\tconst transcode = (url, data, options) => {\n\t\tconst funcStart = performanceNow();\n\t\tconst basisFile = new basis.BasisFile(new Uint8Array(data));\n\t\tconst width = basisFile.getImageWidth(0, 0);\n\t\tconst height = basisFile.getImageHeight(0, 0);\n\t\tconst images = basisFile.getNumImages();\n\t\tconst levels = basisFile.getNumLevels(0);\n\t\tconst hasAlpha = !!basisFile.getHasAlpha();\n\t\tconst isUASTC = basisFile.isUASTC && basisFile.isUASTC();\n\n\t\tif (!width || !height || !images || !levels) {\n\t\t\tbasisFile.close();\n\t\t\tbasisFile.delete();\n\t\t\tthrow new Error('Invalid image dimensions url=' + url + ' width=' + width + ' height=' + height + ' images=' + images + ' levels=' + levels);\n\t\t}\n\n\t\tconst format = chooseTargetFormat(options.deviceDetails, hasAlpha, isUASTC);\n\t\tconst unswizzle = !!options.isGGGR && format === 'pvr';\n\t\tlet basisFormat;\n\n\t\tif (unswizzle) {\n\t\t\tbasisFormat = BASIS_FORMAT.cTFRGBA32;\n\t\t} else {\n\t\t\tbasisFormat = hasAlpha ? alphaMapping[format] : opaqueMapping[format];\n\t\t\tconst isPVRTC = basisFormat === BASIS_FORMAT.cTFPVRTC1_4_RGB || basisFormat === BASIS_FORMAT.cTFPVRTC1_4_RGBA;\n\t\t\tconst notPOT = (width & width - 1) !== 0 || (height & height - 1) !== 0;\n\t\t\tconst notSquare = width !== height;\n\n\t\t\tif (isPVRTC && (notPOT || notSquare) || !options.deviceDetails.webgl2 && notPOT) {\n\t\t\t\tbasisFormat = hasAlpha ? BASIS_FORMAT.cTFRGBA32 : BASIS_FORMAT.cTFRGB565;\n\t\t\t}\n\t\t}\n\n\t\tif (!basisFile.startTranscoding()) {\n\t\t\tbasisFile.close();\n\t\t\tbasisFile.delete();\n\t\t\tthrow new Error('Failed to start transcoding url=' + url);\n\t\t}\n\n\t\tlet i;\n\t\tconst levelData = [];\n\n\t\tfor (let mip = 0; mip < levels; ++mip) {\n\t\t\tconst dstSize = basisFile.getImageTranscodedSizeInBytes(0, mip, basisFormat);\n\t\t\tconst dst = new Uint8Array(dstSize);\n\n\t\t\tif (!basisFile.transcodeImage(dst, 0, mip, basisFormat, 1, 0)) {\n\t\t\t\tbasisFile.close();\n\t\t\t\tbasisFile.delete();\n\t\t\t\tthrow new Error('Failed to transcode image url=' + url);\n\t\t\t}\n\n\t\t\tconst is16BitFormat = basisFormat === BASIS_FORMAT.cTFRGB565 || basisFormat === BASIS_FORMAT.cTFRGBA4444;\n\t\t\tlevelData.push(is16BitFormat ? new Uint16Array(dst.buffer) : dst);\n\t\t}\n\n\t\tbasisFile.close();\n\t\tbasisFile.delete();\n\n\t\tif (unswizzle) {\n\t\t\tbasisFormat = BASIS_FORMAT.cTFRGB565;\n\n\t\t\tfor (i = 0; i < levelData.length; ++i) {\n\t\t\t\tlevelData[i] = pack565(unswizzleGGGR(levelData[i]));\n\t\t\t}\n\t\t}\n\n\t\tconst compressedFormat = isCompressedFormat(basisFormat);\n\t\treturn {\n\t\t\tformat: basisToEngineMapping(basisFormat, options.deviceDetails),\n\t\t\twidth: compressedFormat ? width + 3 & ~3 : width,\n\t\t\theight: compressedFormat ? height + 3 & ~3 : height,\n\t\t\tlevels: levelData,\n\t\t\tcubemap: false,\n\t\t\tmipmaps: true,\n\t\t\ttranscodeTime: performanceNow() - funcStart,\n\t\t\turl: url,\n\t\t\tunswizzledGGGR: unswizzle\n\t\t};\n\t};\n\n\tconst workerTranscode = (url, data, options) => {\n\t\ttry {\n\t\t\tconst result = transcode(url, data, options);\n\t\t\tresult.levels = result.levels.map(function (v) {\n\t\t\t\treturn v.buffer;\n\t\t\t});\n\t\t\tself.postMessage({\n\t\t\t\turl: url,\n\t\t\t\tdata: result\n\t\t\t}, result.levels);\n\t\t} catch (err) {\n\t\t\tself.postMessage({\n\t\t\t\turl: url,\n\t\t\t\terr: err\n\t\t\t});\n\t\t}\n\t};\n\n\tconst workerInit = (config, callback) => {\n\t\tself.importScripts(config.basisUrl);\n\n\t\tconst instantiateWasmFunc = (imports, successCallback) => {\n\t\t\tWebAssembly.instantiate(config.module, imports).then(result => {\n\t\t\t\tsuccessCallback(result);\n\t\t\t}).catch(reason => {\n\t\t\t\tconsole.error('instantiate failed + ' + reason);\n\t\t\t});\n\t\t\treturn {};\n\t\t};\n\n\t\tself.BASIS(config.module ? {\n\t\t\tinstantiateWasm: instantiateWasmFunc\n\t\t} : null).then(instance => {\n\t\t\tinstance.initializeBasis();\n\t\t\tbasis = instance;\n\t\t\trgbPriority = config.rgbPriority;\n\t\t\trgbaPriority = config.rgbaPriority;\n\t\t\tcallback(null);\n\t\t});\n\t};\n\n\tconst queue = [];\n\n\tself.onmessage = function (message) {\n\t\tconst data = message.data;\n\n\t\tswitch (data.type) {\n\t\t\tcase 'init':\n\t\t\t\tworkerInit(data.config, () => {\n\t\t\t\t\tfor (let i = 0; i < queue.length; ++i) {\n\t\t\t\t\t\tworkerTranscode(queue[i].url, queue[i].data, queue[i].options);\n\t\t\t\t\t}\n\n\t\t\t\t\tqueue.length = 0;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\tif (basis) {\n\t\t\t\t\tworkerTranscode(data.url, data.data, data.options);\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push(data);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n\nconst getCompressionFormats = device => {\n\treturn {\n\t\tastc: !!device.extCompressedTextureASTC,\n\t\tatc: !!device.extCompressedTextureATC,\n\t\tdxt: !!device.extCompressedTextureS3TC,\n\t\tetc1: !!device.extCompressedTextureETC1,\n\t\tetc2: !!device.extCompressedTextureETC,\n\t\tpvr: !!device.extCompressedTexturePVRTC\n\t};\n};\n\nconst prepareWorkerModules = (config, callback) => {\n\tconst getWorkerBlob = () => {\n\t\tconst code = '(' + BasisWorker.toString() + ')()\\n\\n';\n\t\treturn new File([code], 'basis_worker.js', {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t};\n\n\tconst wasmSupported = () => {\n\t\ttry {\n\t\t\tif (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n\t\t\t\tconst module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n\t\t\t\tif (module instanceof WebAssembly.Module) return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n\t\t\t}\n\t\t} catch (e) {}\n\n\t\treturn false;\n\t};\n\n\tconst sendResponse = (basisCode, module) => {\n\t\tcallback(null, {\n\t\t\tworkerUrl: URL.createObjectURL(getWorkerBlob()),\n\t\t\tbasisUrl: URL.createObjectURL(basisCode),\n\t\t\tmodule: module,\n\t\t\trgbPriority: config.rgbPriority,\n\t\t\trgbaPriority: config.rgbaPriority\n\t\t});\n\t};\n\n\tif (config.glueUrl && config.wasmUrl && wasmSupported()) {\n\t\tlet basisCode = null;\n\t\tlet module = null;\n\t\thttp.get(config.glueUrl, {\n\t\t\tresponseType: 'blob'\n\t\t}, (err, response) => {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tif (module) {\n\t\t\t\t\tsendResponse(response, module);\n\t\t\t\t} else {\n\t\t\t\t\tbasisCode = response;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst fetchPromise = fetch(config.wasmUrl);\n\n\t\tconst compileManual = () => {\n\t\t\tfetchPromise.then(result => result.arrayBuffer()).then(buffer => WebAssembly.compile(buffer)).then(module_ => {\n\t\t\t\tif (basisCode) {\n\t\t\t\t\tsendResponse(basisCode, module_);\n\t\t\t\t} else {\n\t\t\t\t\tmodule = module_;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tcallback(err, null);\n\t\t\t});\n\t\t};\n\n\t\tif (WebAssembly.compileStreaming) {\n\t\t\tWebAssembly.compileStreaming(fetchPromise).then(module_ => {\n\t\t\t\tif (basisCode) {\n\t\t\t\t\tsendResponse(basisCode, module_);\n\t\t\t\t} else {\n\t\t\t\t\tmodule = module_;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tcompileManual();\n\t\t\t});\n\t\t} else {\n\t\t\tcompileManual();\n\t\t}\n\t} else {\n\t\thttp.get(config.fallbackUrl, {\n\t\t\tresponseType: 'blob'\n\t\t}, (err, response) => {\n\t\t\tif (err) {\n\t\t\t\tcallback(err, null);\n\t\t\t} else {\n\t\t\t\tsendResponse(response, null);\n\t\t\t}\n\t\t});\n\t}\n};\n\nclass BasisQueue {\n\tconstructor() {\n\t\tthis.callbacks = {};\n\t\tthis.queue = [];\n\t\tthis.clients = [];\n\t}\n\n\tenqueueJob(url, data, callback, options) {\n\t\tif (this.callbacks.hasOwnProperty(url)) {\n\t\t\tthis.callbacks[url].push(callback);\n\t\t} else {\n\t\t\tthis.callbacks[url] = [callback];\n\t\t\tconst job = {\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\toptions: options\n\t\t\t};\n\n\t\t\tif (this.clients.length > 0) {\n\t\t\t\tthis.clients.shift().run(job);\n\t\t\t} else {\n\t\t\t\tthis.queue.push(job);\n\t\t\t}\n\t\t}\n\t}\n\n\tenqueueClient(client) {\n\t\tif (this.queue.length > 0) {\n\t\t\tclient.run(this.queue.shift());\n\t\t} else {\n\t\t\tthis.clients.push(client);\n\t\t}\n\t}\n\n\thandleResponse(url, err, data) {\n\t\tconst callback = this.callbacks[url];\n\n\t\tif (err) {\n\t\t\tfor (let i = 0; i < callback.length; ++i) {\n\t\t\t\tcallback[i](err);\n\t\t\t}\n\t\t} else {\n\t\t\tif (data.format === PIXELFORMAT_R5_G6_B5 || data.format === PIXELFORMAT_R4_G4_B4_A4) {\n\t\t\t\tdata.levels = data.levels.map(function (v) {\n\t\t\t\t\treturn new Uint16Array(v);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdata.levels = data.levels.map(function (v) {\n\t\t\t\t\treturn new Uint8Array(v);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < callback.length; ++i) {\n\t\t\t\tcallback[i](null, data);\n\t\t\t}\n\t\t}\n\n\t\tdelete this.callbacks[url];\n\t}\n\n}\n\nclass BasisClient {\n\tconstructor(queue, config, eager) {\n\t\tthis.queue = queue;\n\t\tthis.worker = new Worker(config.workerUrl);\n\t\tthis.worker.addEventListener('message', message => {\n\t\t\tconst data = message.data;\n\t\t\tthis.queue.handleResponse(data.url, data.err, data.data);\n\n\t\t\tif (!this.eager) {\n\t\t\t\tthis.queue.enqueueClient(this);\n\t\t\t}\n\t\t});\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'init',\n\t\t\tconfig: config\n\t\t});\n\t\tthis.eager = eager;\n\t}\n\n\trun(job) {\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'transcode',\n\t\t\turl: job.url,\n\t\t\tformat: job.format,\n\t\t\tdata: job.data,\n\t\t\toptions: job.options\n\t\t}, [job.data]);\n\n\t\tif (this.eager) {\n\t\t\tthis.queue.enqueueClient(this);\n\t\t}\n\t}\n\n}\n\nconst defaultNumWorkers = 1;\nconst defaultRgbPriority = ['etc1', 'etc2', 'astc', 'dxt', 'pvr', 'atc'];\nconst defaultRgbaPriority = ['astc', 'dxt', 'etc2', 'pvr', 'atc'];\nconst queue = new BasisQueue();\nlet lazyConfig = null;\nlet initializing = false;\n\nfunction basisInitialize(config) {\n\tif (initializing) {\n\t\treturn;\n\t}\n\n\tif (!config) {\n\t\tconfig = lazyConfig || {};\n\t} else if (config.lazyInit) {\n\t\tlazyConfig = config;\n\t\treturn;\n\t}\n\n\tif (!config.glueUrl || !config.wasmUrl || !config.fallbackUrl) {\n\t\tconst modules = (window.config ? window.config.wasmModules : window.PRELOAD_MODULES) || [];\n\t\tconst wasmModule = modules.find(function (m) {\n\t\t\treturn m.moduleName === 'BASIS';\n\t\t});\n\n\t\tif (wasmModule) {\n\t\t\tconst urlBase = window.ASSET_PREFIX || \"\";\n\n\t\t\tif (!config.glueUrl) {\n\t\t\t\tconfig.glueUrl = urlBase + wasmModule.glueUrl;\n\t\t\t}\n\n\t\t\tif (!config.wasmUrl) {\n\t\t\t\tconfig.wasmUrl = urlBase + wasmModule.wasmUrl;\n\t\t\t}\n\n\t\t\tif (!config.fallbackUrl) {\n\t\t\t\tconfig.fallbackUrl = urlBase + wasmModule.fallbackUrl;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (config.glueUrl || config.wasmUrl || config.fallbackUrl) {\n\t\tinitializing = true;\n\t\tconst numWorkers = Math.max(1, Math.min(16, config.numWorkers || defaultNumWorkers));\n\t\tconst eagerWorkers = config.numWorkers === 1 || (config.hasOwnProperty('eagerWorkers') ? config.eagerWorkers : true);\n\t\tconfig.rgbPriority = config.rgbPriority || defaultRgbPriority;\n\t\tconfig.rgbaPriority = config.rgbaPriority || defaultRgbaPriority;\n\t\tprepareWorkerModules(config, (err, clientConfig) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(`failed to initialize basis worker: ${err}`);\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < numWorkers; ++i) {\n\t\t\t\t\tqueue.enqueueClient(new BasisClient(queue, clientConfig, eagerWorkers));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nlet deviceDetails = null;\n\nfunction basisTranscode(device, url, data, callback, options) {\n\tbasisInitialize();\n\n\tif (!deviceDetails) {\n\t\tdeviceDetails = {\n\t\t\twebgl2: device.webgl2,\n\t\t\tformats: getCompressionFormats(device)\n\t\t};\n\t}\n\n\tqueue.enqueueJob(url, data, callback, {\n\t\tdeviceDetails: deviceDetails,\n\t\tisGGGR: !!(options != null && options.isGGGR)\n\t});\n\treturn initializing;\n}\n\nclass BasisParser {\n\tconstructor(registry, device) {\n\t\tthis.device = device;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst device = this.device;\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err, result);\n\t\t\t} else {\n\t\t\t\tvar _asset$file, _asset$file$variants, _asset$file$variants$;\n\n\t\t\t\tconst basisModuleFound = basisTranscode(device, url.load, result, callback, {\n\t\t\t\t\tisGGGR: ((asset == null ? void 0 : (_asset$file = asset.file) == null ? void 0 : (_asset$file$variants = _asset$file.variants) == null ? void 0 : (_asset$file$variants$ = _asset$file$variants.basis) == null ? void 0 : _asset$file$variants$.opt) & 8) !== 0\n\t\t\t\t});\n\n\t\t\t\tif (!basisModuleFound) {\n\t\t\t\t\tcallback('Basis module not found. Asset \"' + asset.name + '\" basis texture variant will not be loaded.');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data, device) {\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: data.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: data.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: data.width,\n\t\t\theight: data.height,\n\t\t\tformat: data.format,\n\t\t\tcubemap: data.cubemap,\n\t\t\tlevels: data.levels\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n}\n\nclass ImgParser {\n\tconstructor(registry) {\n\t\tthis.crossOrigin = registry.prefix ? 'anonymous' : null;\n\t\tthis.maxRetries = 0;\n\t\tthis.useImageBitmap = false  ;\n\t}\n\n\tload(url, callback, asset) {\n\t\tlet crossOrigin;\n\n\t\tif (asset && asset.options && asset.options.hasOwnProperty('crossOrigin')) {\n\t\t\tcrossOrigin = asset.options.crossOrigin;\n\t\t} else if (ABSOLUTE_URL.test(url.load)) {\n\t\t\tcrossOrigin = this.crossOrigin;\n\t\t}\n\n\t\tif (this.useImageBitmap) {\n\t\t\tthis._loadImageBitmap(url.load, url.original, crossOrigin, callback);\n\t\t} else {\n\t\t\tthis._loadImage(url.load, url.original, crossOrigin, callback);\n\t\t}\n\t}\n\n\topen(url, data, device) {\n\t\tconst ext = path.getExtension(url).toLowerCase();\n\t\tconst format = ext === \".jpg\" || ext === \".jpeg\" ? PIXELFORMAT_R8_G8_B8 : PIXELFORMAT_R8_G8_B8_A8;\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\twidth: data.width,\n\t\t\theight: data.height,\n\t\t\tformat: format\n\t\t});\n\t\ttexture.setSource(data);\n\t\treturn texture;\n\t}\n\n\t_loadImage(url, originalUrl, crossOrigin, callback) {\n\t\tconst image = new Image();\n\n\t\tif (crossOrigin) {\n\t\t\timage.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tlet retries = 0;\n\t\tconst maxRetries = this.maxRetries;\n\t\tlet retryTimeout;\n\n\t\timage.onload = function () {\n\t\t\tcallback(null, image);\n\t\t};\n\n\t\timage.onerror = function () {\n\t\t\tif (retryTimeout) return;\n\n\t\t\tif (maxRetries > 0 && ++retries <= maxRetries) {\n\t\t\t\tconst retryDelay = Math.pow(2, retries) * 100;\n\t\t\t\tconsole.log(\"Error loading Texture from: '\" + originalUrl + \"' - Retrying in \" + retryDelay + \"ms...\");\n\t\t\t\tconst idx = url.indexOf('?');\n\t\t\t\tconst separator = idx >= 0 ? '&' : '?';\n\t\t\t\tretryTimeout = setTimeout(function () {\n\t\t\t\t\timage.src = url + separator + 'retry=' + Date.now();\n\t\t\t\t\tretryTimeout = null;\n\t\t\t\t}, retryDelay);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading Texture from: '\" + originalUrl + \"'\");\n\t\t\t}\n\t\t};\n\n\t\timage.src = url;\n\t}\n\n\t_loadImageBitmap(url, originalUrl, crossOrigin, callback) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"blob\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url, options, function (err, blob) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tcreateImageBitmap(blob, {\n\t\t\t\t\tpremultiplyAlpha: 'none'\n\t\t\t\t}).then(function (imageBitmap) {\n\t\t\t\t\tcallback(null, imageBitmap);\n\t\t\t\t}).catch(function (e) {\n\t\t\t\t\tcallback(e);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nconst IDENTIFIER = [0x58544BAB, 0xBB313120, 0x0A1A0A0D];\nconst KNOWN_FORMATS = {\n\t0x83F0: PIXELFORMAT_DXT1,\n\t0x83F2: PIXELFORMAT_DXT3,\n\t0x83F3: PIXELFORMAT_DXT5,\n\t0x8D64: PIXELFORMAT_ETC1,\n\t0x9274: PIXELFORMAT_ETC2_RGB,\n\t0x9278: PIXELFORMAT_ETC2_RGBA,\n\t0x8C00: PIXELFORMAT_PVRTC_4BPP_RGB_1,\n\t0x8C01: PIXELFORMAT_PVRTC_2BPP_RGB_1,\n\t0x8C02: PIXELFORMAT_PVRTC_4BPP_RGBA_1,\n\t0x8C03: PIXELFORMAT_PVRTC_2BPP_RGBA_1,\n\t0x8051: PIXELFORMAT_R8_G8_B8,\n\t0x8058: PIXELFORMAT_R8_G8_B8_A8,\n\t0x8C41: PIXELFORMAT_SRGB,\n\t0x8C43: PIXELFORMAT_SRGBA,\n\t0x8C3A: PIXELFORMAT_111110F,\n\t0x881B: PIXELFORMAT_RGB16F,\n\t0x881A: PIXELFORMAT_RGBA16F\n};\n\nfunction createContainer(pixelFormat, buffer, byteOffset, byteSize) {\n\treturn pixelFormat === PIXELFORMAT_111110F ? new Uint32Array(buffer, byteOffset, byteSize / 4) : new Uint8Array(buffer, byteOffset, byteSize);\n}\n\nclass KtxParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst textureData = this.parse(data);\n\n\t\tif (!textureData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: textureData.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: textureData.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: textureData.width,\n\t\t\theight: textureData.height,\n\t\t\tformat: textureData.format,\n\t\t\tcubemap: textureData.cubemap,\n\t\t\tlevels: textureData.levels\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n\tparse(data) {\n\t\tconst dataU32 = new Uint32Array(data);\n\n\t\tif (IDENTIFIER[0] !== dataU32[0] || IDENTIFIER[1] !== dataU32[1] || IDENTIFIER[2] !== dataU32[2]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst header = {\n\t\t\tendianness: dataU32[3],\n\t\t\tglType: dataU32[4],\n\t\t\tglTypeSize: dataU32[5],\n\t\t\tglFormat: dataU32[6],\n\t\t\tglInternalFormat: dataU32[7],\n\t\t\tglBaseInternalFormat: dataU32[8],\n\t\t\tpixelWidth: dataU32[9],\n\t\t\tpixelHeight: dataU32[10],\n\t\t\tpixelDepth: dataU32[11],\n\t\t\tnumberOfArrayElements: dataU32[12],\n\t\t\tnumberOfFaces: dataU32[13],\n\t\t\tnumberOfMipmapLevels: dataU32[14],\n\t\t\tbytesOfKeyValueData: dataU32[15]\n\t\t};\n\n\t\tif (header.pixelDepth > 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (header.numberOfArrayElements !== 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst format = KNOWN_FORMATS[header.glInternalFormat];\n\n\t\tif (format === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet offset = 16 + header.bytesOfKeyValueData / 4;\n\t\tconst isCubemap = header.numberOfFaces > 1;\n\t\tconst levels = [];\n\n\t\tfor (let mipmapLevel = 0; mipmapLevel < (header.numberOfMipmapLevels || 1); mipmapLevel++) {\n\t\t\tconst imageSizeInBytes = dataU32[offset++];\n\n\t\t\tif (isCubemap) {\n\t\t\t\tlevels.push([]);\n\t\t\t}\n\n\t\t\tconst target = isCubemap ? levels[mipmapLevel] : levels;\n\n\t\t\tfor (let face = 0; face < (isCubemap ? 6 : 1); ++face) {\n\t\t\t\ttarget.push(createContainer(format, data, offset * 4, imageSizeInBytes));\n\t\t\t\toffset += imageSizeInBytes + 3 >> 2;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tformat: format,\n\t\t\twidth: header.pixelWidth,\n\t\t\theight: header.pixelHeight,\n\t\t\tlevels: levels,\n\t\t\tcubemap: isCubemap\n\t\t};\n\t}\n\n}\n\nclass LegacyDdsParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst header = new Uint32Array(data, 0, 128 / 4);\n\t\tconst width = header[4];\n\t\tconst height = header[3];\n\t\tconst mips = Math.max(header[7], 1);\n\t\tconst isFourCc = header[20] === 4;\n\t\tconst fcc = header[21];\n\t\tconst bpp = header[22];\n\t\tconst isCubemap = header[28] === 65024;\n\t\tconst FCC_DXT1 = 827611204;\n\t\tconst FCC_DXT5 = 894720068;\n\t\tconst FCC_FP32 = 116;\n\t\tconst FCC_ETC1 = 826496069;\n\t\tconst FCC_PVRTC_2BPP_RGB_1 = 825438800;\n\t\tconst FCC_PVRTC_2BPP_RGBA_1 = 825504336;\n\t\tconst FCC_PVRTC_4BPP_RGB_1 = 825439312;\n\t\tconst FCC_PVRTC_4BPP_RGBA_1 = 825504848;\n\t\tlet compressed = false;\n\t\tlet floating = false;\n\t\tlet etc1 = false;\n\t\tlet pvrtc2 = false;\n\t\tlet pvrtc4 = false;\n\t\tlet format = null;\n\t\tlet texture;\n\n\t\tif (isFourCc) {\n\t\t\tif (fcc === FCC_DXT1) {\n\t\t\t\tformat = PIXELFORMAT_DXT1;\n\t\t\t\tcompressed = true;\n\t\t\t} else if (fcc === FCC_DXT5) {\n\t\t\t\tformat = PIXELFORMAT_DXT5;\n\t\t\t\tcompressed = true;\n\t\t\t} else if (fcc === FCC_FP32) {\n\t\t\t\tformat = PIXELFORMAT_RGBA32F;\n\t\t\t\tfloating = true;\n\t\t\t} else if (fcc === FCC_ETC1) {\n\t\t\t\tformat = PIXELFORMAT_ETC1;\n\t\t\t\tcompressed = true;\n\t\t\t\tetc1 = true;\n\t\t\t} else if (fcc === FCC_PVRTC_2BPP_RGB_1 || fcc === FCC_PVRTC_2BPP_RGBA_1) {\n\t\t\t\tformat = fcc === FCC_PVRTC_2BPP_RGB_1 ? PIXELFORMAT_PVRTC_2BPP_RGB_1 : PIXELFORMAT_PVRTC_2BPP_RGBA_1;\n\t\t\t\tcompressed = true;\n\t\t\t\tpvrtc2 = true;\n\t\t\t} else if (fcc === FCC_PVRTC_4BPP_RGB_1 || fcc === FCC_PVRTC_4BPP_RGBA_1) {\n\t\t\t\tformat = fcc === FCC_PVRTC_4BPP_RGB_1 ? PIXELFORMAT_PVRTC_4BPP_RGB_1 : PIXELFORMAT_PVRTC_4BPP_RGBA_1;\n\t\t\t\tcompressed = true;\n\t\t\t\tpvrtc4 = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (bpp === 32) {\n\t\t\t\tformat = PIXELFORMAT_R8_G8_B8_A8;\n\t\t\t}\n\t\t}\n\n\t\tif (!format) {\n\t\t\ttexture = new Texture(device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8\n\t\t\t});\n\t\t\ttexture.name = 'dds-legacy-empty';\n\t\t\treturn texture;\n\t\t}\n\n\t\ttexture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: isCubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: isCubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tformat: format,\n\t\t\tcubemap: isCubemap\n\t\t});\n\t\tlet offset = 128;\n\t\tconst faces = isCubemap ? 6 : 1;\n\t\tlet mipSize;\n\t\tconst DXT_BLOCK_WIDTH = 4;\n\t\tconst DXT_BLOCK_HEIGHT = 4;\n\t\tconst blockSize = fcc === FCC_DXT1 ? 8 : 16;\n\t\tlet numBlocksAcross, numBlocksDown, numBlocks;\n\n\t\tfor (let face = 0; face < faces; face++) {\n\t\t\tlet mipWidth = width;\n\t\t\tlet mipHeight = height;\n\n\t\t\tfor (let i = 0; i < mips; i++) {\n\t\t\t\tif (compressed) {\n\t\t\t\t\tif (etc1) {\n\t\t\t\t\t\tmipSize = Math.floor((mipWidth + 3) / 4) * Math.floor((mipHeight + 3) / 4) * 8;\n\t\t\t\t\t} else if (pvrtc2) {\n\t\t\t\t\t\tmipSize = Math.max(mipWidth, 16) * Math.max(mipHeight, 8) / 4;\n\t\t\t\t\t} else if (pvrtc4) {\n\t\t\t\t\t\tmipSize = Math.max(mipWidth, 8) * Math.max(mipHeight, 8) / 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnumBlocksAcross = Math.floor((mipWidth + DXT_BLOCK_WIDTH - 1) / DXT_BLOCK_WIDTH);\n\t\t\t\t\t\tnumBlocksDown = Math.floor((mipHeight + DXT_BLOCK_HEIGHT - 1) / DXT_BLOCK_HEIGHT);\n\t\t\t\t\t\tnumBlocks = numBlocksAcross * numBlocksDown;\n\t\t\t\t\t\tmipSize = numBlocks * blockSize;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmipSize = mipWidth * mipHeight * 4;\n\t\t\t\t}\n\n\t\t\t\tconst mipBuff = floating ? new Float32Array(data, offset, mipSize) : new Uint8Array(data, offset, mipSize);\n\n\t\t\t\tif (!isCubemap) {\n\t\t\t\t\ttexture._levels[i] = mipBuff;\n\t\t\t\t} else {\n\t\t\t\t\tif (!texture._levels[i]) texture._levels[i] = [];\n\t\t\t\t\ttexture._levels[i][face] = mipBuff;\n\t\t\t\t}\n\n\t\t\t\toffset += floating ? mipSize * 4 : mipSize;\n\t\t\t\tmipWidth = Math.max(mipWidth * 0.5, 1);\n\t\t\t\tmipHeight = Math.max(mipHeight * 0.5, 1);\n\t\t\t}\n\t\t}\n\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n}\n\nclass Reader {\n\tconstructor(data) {\n\t\tthis.view = new DataView(data);\n\t\tthis.offset = 0;\n\t}\n\n\treadLine() {\n\t\tconst view = this.view;\n\t\tlet result = \"\";\n\n\t\twhile (true) {\n\t\t\tif (this.offset >= view.byteLength) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst c = String.fromCharCode(this.readUint8());\n\n\t\t\tif (c === '\\n') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tresult += c;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\treadUint8() {\n\t\treturn this.view.getUint8(this.offset++);\n\t}\n\n\treadUint8s(result) {\n\t\tconst view = this.view;\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = view.getUint8(this.offset++);\n\t\t}\n\t}\n\n\tpeekUint8s(result) {\n\t\tconst view = this.view;\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = view.getUint8(this.offset + i);\n\t\t}\n\t}\n\n}\n\nclass HdrParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst textureData = this.parse(data);\n\n\t\tif (!textureData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: ADDRESS_REPEAT,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tminFilter: FILTER_NEAREST_MIPMAP_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\twidth: textureData.width,\n\t\t\theight: textureData.height,\n\t\t\tlevels: textureData.levels,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\ttype: TEXTURETYPE_RGBE,\n\t\t\tmipmaps: false\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n\tparse(data) {\n\t\tconst reader = new Reader(data);\n\t\tconst magic = reader.readLine();\n\n\t\tif (!magic.startsWith('#?RADIANCE')) {\n\t\t\tthis._error(\"radiance header has invalid magic\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst variables = {};\n\n\t\twhile (true) {\n\t\t\tconst line = reader.readLine();\n\n\t\t\tif (line.length === 0) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tconst parts = line.split('=');\n\n\t\t\t\tif (parts.length === 2) {\n\t\t\t\t\tvariables[parts[0]] = parts[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!variables.hasOwnProperty('FORMAT')) {\n\t\t\tthis._error(\"radiance header missing FORMAT variable\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst resolution = reader.readLine().split(' ');\n\n\t\tif (resolution.length !== 4) {\n\t\t\tthis._error(\"radiance header has invalid resolution\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst height = parseInt(resolution[1], 10);\n\t\tconst width = parseInt(resolution[3], 10);\n\n\t\tconst pixels = this._readPixels(reader, width, height, resolution[0] === '-Y');\n\n\t\tif (!pixels) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tlevels: [pixels]\n\t\t};\n\t}\n\n\t_readPixels(reader, width, height, flipY) {\n\t\tif (width < 8 || width > 0x7fff) {\n\t\t\treturn this._readPixelsFlat(reader, width, height);\n\t\t}\n\n\t\tconst rgbe = [0, 0, 0, 0];\n\t\treader.peekUint8s(rgbe);\n\n\t\tif (rgbe[0] !== 2 || rgbe[1] !== 2 || (rgbe[2] & 0x80) !== 0) {\n\t\t\treturn this._readPixelsFlat(reader, width, height);\n\t\t}\n\n\t\tconst buffer = new ArrayBuffer(width * height * 4);\n\t\tconst view = new Uint8Array(buffer);\n\t\tlet scanstart = flipY ? width * 4 * (height - 1) : 0;\n\t\tlet x, y, i, channel, count, value;\n\n\t\tfor (y = 0; y < height; ++y) {\n\t\t\treader.readUint8s(rgbe);\n\n\t\t\tif ((rgbe[2] << 8) + rgbe[3] !== width) {\n\t\t\t\tthis._error(\"radiance has invalid scanline width\");\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor (channel = 0; channel < 4; ++channel) {\n\t\t\t\tx = 0;\n\n\t\t\t\twhile (x < width) {\n\t\t\t\t\tcount = reader.readUint8();\n\n\t\t\t\t\tif (count > 128) {\n\t\t\t\t\t\tcount -= 128;\n\n\t\t\t\t\t\tif (x + count > width) {\n\t\t\t\t\t\t\tthis._error(\"radiance has invalid scanline data\");\n\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = reader.readUint8();\n\n\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\t\t\tview[scanstart + channel + 4 * x++] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (count === 0 || x + count > width) {\n\t\t\t\t\t\t\tthis._error(\"radiance has invalid scanline data\");\n\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\t\t\tview[scanstart + channel + 4 * x++] = reader.readUint8();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tscanstart += width * 4 * (flipY ? -1 : 1);\n\t\t}\n\n\t\treturn view;\n\t}\n\n\t_readPixelsFlat(reader, width, height) {\n\t\tconst filePixelBytes = reader.view.buffer.byteLength - reader.offset;\n\t\treturn filePixelBytes === width * height * 4 ? new Uint8Array(reader.view.buffer, reader.offset) : null;\n\t}\n\n\t_error(message) {}\n\n}\n\nconst JSON_ADDRESS_MODE = {\n\t\"repeat\": ADDRESS_REPEAT,\n\t\"clamp\": ADDRESS_CLAMP_TO_EDGE,\n\t\"mirror\": ADDRESS_MIRRORED_REPEAT\n};\nconst JSON_FILTER_MODE = {\n\t\"nearest\": FILTER_NEAREST,\n\t\"linear\": FILTER_LINEAR,\n\t\"nearest_mip_nearest\": FILTER_NEAREST_MIPMAP_NEAREST,\n\t\"linear_mip_nearest\": FILTER_LINEAR_MIPMAP_NEAREST,\n\t\"nearest_mip_linear\": FILTER_NEAREST_MIPMAP_LINEAR,\n\t\"linear_mip_linear\": FILTER_LINEAR_MIPMAP_LINEAR\n};\nconst JSON_TEXTURE_TYPE = {\n\t\"default\": TEXTURETYPE_DEFAULT,\n\t\"rgbm\": TEXTURETYPE_RGBM,\n\t\"rgbe\": TEXTURETYPE_RGBE,\n\t\"swizzleGGGR\": TEXTURETYPE_SWIZZLEGGGR\n};\n\nclass TextureParser {\n\tload(url, callback, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\topen(url, data, device) {\n\t\tthrow new Error('not implemented');\n\t}\n\n}\n\nconst _completePartialMipmapChain = function _completePartialMipmapChain(texture) {\n\tconst requiredMipLevels = Math.log2(Math.max(texture._width, texture._height)) + 1;\n\n\tconst isHtmlElement = function isHtmlElement(object) {\n\t\treturn object instanceof HTMLCanvasElement || object instanceof HTMLImageElement || object instanceof HTMLVideoElement;\n\t};\n\n\tif (!(texture._format === PIXELFORMAT_R8_G8_B8_A8 || texture._format === PIXELFORMAT_RGBA32F) || texture._volume || texture._compressed || texture._levels.length === 1 || texture._levels.length === requiredMipLevels || isHtmlElement(texture._cubemap ? texture._levels[0][0] : texture._levels[0])) {\n\t\treturn;\n\t}\n\n\tconst downsample = function downsample(width, height, data) {\n\t\tconst sampledWidth = Math.max(1, width >> 1);\n\t\tconst sampledHeight = Math.max(1, height >> 1);\n\t\tconst sampledData = new data.constructor(sampledWidth * sampledHeight * 4);\n\t\tconst xs = Math.floor(width / sampledWidth);\n\t\tconst ys = Math.floor(height / sampledHeight);\n\t\tconst xsys = xs * ys;\n\n\t\tfor (let y = 0; y < sampledHeight; ++y) {\n\t\t\tfor (let x = 0; x < sampledWidth; ++x) {\n\t\t\t\tfor (let e = 0; e < 4; ++e) {\n\t\t\t\t\tlet sum = 0;\n\n\t\t\t\t\tfor (let sy = 0; sy < ys; ++sy) {\n\t\t\t\t\t\tfor (let sx = 0; sx < xs; ++sx) {\n\t\t\t\t\t\t\tsum += data[(x * xs + sx + (y * ys + sy) * width) * 4 + e];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsampledData[(x + y * sampledWidth) * 4 + e] = sum / xsys;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sampledData;\n\t};\n\n\tfor (let level = texture._levels.length; level < requiredMipLevels; ++level) {\n\t\tconst width = Math.max(1, texture._width >> level - 1);\n\t\tconst height = Math.max(1, texture._height >> level - 1);\n\n\t\tif (texture._cubemap) {\n\t\t\tconst mips = [];\n\n\t\t\tfor (let face = 0; face < 6; ++face) {\n\t\t\t\tmips.push(downsample(width, height, texture._levels[level - 1][face]));\n\t\t\t}\n\n\t\t\ttexture._levels.push(mips);\n\t\t} else {\n\t\t\ttexture._levels.push(downsample(width, height, texture._levels[level - 1]));\n\t\t}\n\t}\n\n\ttexture._levelsUpdated = texture._cubemap ? [[true, true, true, true, true, true]] : [true];\n};\n\nclass TextureHandler {\n\tconstructor(device, assets, loader) {\n\t\tthis._device = device;\n\t\tthis._assets = assets;\n\t\tthis._loader = loader;\n\t\tthis.imgParser = new ImgParser(assets);\n\t\tthis.parsers = {\n\t\t\tdds: new LegacyDdsParser(assets),\n\t\t\tktx: new KtxParser(assets),\n\t\t\tbasis: new BasisParser(assets, device),\n\t\t\thdr: new HdrParser(assets)\n\t\t};\n\t}\n\n\tget crossOrigin() {\n\t\treturn this.imgParser.crossOrigin;\n\t}\n\n\tset crossOrigin(value) {\n\t\tthis.imgParser.crossOrigin = value;\n\t}\n\n\tget maxRetries() {\n\t\treturn this.imgParser.maxRetries;\n\t}\n\n\tset maxRetries(value) {\n\t\tthis.imgParser.maxRetries = value;\n\n\t\tfor (const parser in this.parsers) {\n\t\t\tif (this.parsers.hasOwnProperty(parser)) {\n\t\t\t\tthis.parsers[parser].maxRetries = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t_getUrlWithoutParams(url) {\n\t\treturn url.indexOf('?') >= 0 ? url.split('?')[0] : url;\n\t}\n\n\t_getParser(url) {\n\t\tconst ext = path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '');\n\t\treturn this.parsers[ext] || this.imgParser;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tthis._getParser(url.original).load(url, callback, asset);\n\t}\n\n\topen(url, data, asset) {\n\t\tif (!url) return;\n\n\t\tlet texture = this._getParser(url).open(url, data, this._device);\n\n\t\tif (texture === null) {\n\t\t\ttexture = new Texture(this._device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8\n\t\t\t});\n\t\t} else {\n\t\t\t_completePartialMipmapChain(texture);\n\n\t\t\tif (data.unswizzledGGGR) {\n\t\t\t\tasset.file.variants.basis.opt &= ~8;\n\t\t\t}\n\t\t}\n\n\t\treturn texture;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst texture = asset.resource;\n\n\t\tif (!texture) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (asset.name && asset.name.length > 0) {\n\t\t\ttexture.name = asset.name;\n\t\t}\n\n\t\tconst assetData = asset.data;\n\n\t\tif (assetData.hasOwnProperty('minfilter')) {\n\t\t\ttexture.minFilter = JSON_FILTER_MODE[assetData.minfilter];\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('magfilter')) {\n\t\t\ttexture.magFilter = JSON_FILTER_MODE[assetData.magfilter];\n\t\t}\n\n\t\tif (!texture.cubemap) {\n\t\t\tif (assetData.hasOwnProperty('addressu')) {\n\t\t\t\ttexture.addressU = JSON_ADDRESS_MODE[assetData.addressu];\n\t\t\t}\n\n\t\t\tif (assetData.hasOwnProperty('addressv')) {\n\t\t\t\ttexture.addressV = JSON_ADDRESS_MODE[assetData.addressv];\n\t\t\t}\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('mipmaps')) {\n\t\t\ttexture.mipmaps = assetData.mipmaps;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('anisotropy')) {\n\t\t\ttexture.anisotropy = assetData.anisotropy;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('flipY')) {\n\t\t\ttexture.flipY = !!assetData.flipY;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('type')) {\n\t\t\ttexture.type = JSON_TEXTURE_TYPE[assetData.type];\n\t\t} else if (assetData.hasOwnProperty('rgbm') && assetData.rgbm) {\n\t\t\ttexture.type = TEXTURETYPE_RGBM;\n\t\t} else if (asset.file && asset.getPreferredFile) {\n\t\t\tconst preferredFile = asset.getPreferredFile();\n\n\t\t\tif (preferredFile) {\n\t\t\t\tif (preferredFile.opt && (preferredFile.opt & 8) !== 0) {\n\t\t\t\t\ttexture.type = TEXTURETYPE_SWIZZLEGGGR;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass TagsCache {\n\tconstructor(key = null) {\n\t\tthis._index = {};\n\t\tthis._key = key;\n\t}\n\n\taddItem(item) {\n\t\tconst tags = item.tags._list;\n\n\t\tfor (const tag of tags) this.add(tag, item);\n\t}\n\n\tremoveItem(item) {\n\t\tconst tags = item.tags._list;\n\n\t\tfor (const tag of tags) this.remove(tag, item);\n\t}\n\n\tadd(tag, item) {\n\t\tif (this._index[tag] && this._index[tag].list.indexOf(item) !== -1) return;\n\n\t\tif (!this._index[tag]) {\n\t\t\tthis._index[tag] = {\n\t\t\t\tlist: []\n\t\t\t};\n\t\t\tif (this._key) this._index[tag].keys = {};\n\t\t}\n\n\t\tthis._index[tag].list.push(item);\n\n\t\tif (this._key) this._index[tag].keys[item[this._key]] = item;\n\t}\n\n\tremove(tag, item) {\n\t\tif (!this._index[tag]) return;\n\n\t\tif (this._key) {\n\t\t\tif (!this._index[tag].keys[item[this._key]]) return;\n\t\t}\n\n\t\tconst ind = this._index[tag].list.indexOf(item);\n\n\t\tif (ind === -1) return;\n\n\t\tthis._index[tag].list.splice(ind, 1);\n\n\t\tif (this._key) delete this._index[tag].keys[item[this._key]];\n\t\tif (this._index[tag].list.length === 0) delete this._index[tag];\n\t}\n\n\tfind(args) {\n\t\tconst index = {};\n\t\tconst items = [];\n\t\tlet item, tag, tags, tagsRest, missingIndex;\n\n\t\tconst sort = (a, b) => {\n\t\t\treturn this._index[a].list.length - this._index[b].list.length;\n\t\t};\n\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\ttag = args[i];\n\n\t\t\tif (tag instanceof Array) {\n\t\t\t\tif (tag.length === 0) continue;\n\n\t\t\t\tif (tag.length === 1) {\n\t\t\t\t\ttag = tag[0];\n\t\t\t\t} else {\n\t\t\t\t\tmissingIndex = false;\n\n\t\t\t\t\tfor (let t = 0; t < tag.length; t++) {\n\t\t\t\t\t\tif (!this._index[tag[t]]) {\n\t\t\t\t\t\t\tmissingIndex = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (missingIndex) continue;\n\t\t\t\t\ttags = tag.slice(0).sort(sort);\n\t\t\t\t\ttagsRest = tags.slice(1);\n\t\t\t\t\tif (tagsRest.length === 1) tagsRest = tagsRest[0];\n\n\t\t\t\t\tfor (let n = 0; n < this._index[tags[0]].list.length; n++) {\n\t\t\t\t\t\titem = this._index[tags[0]].list[n];\n\n\t\t\t\t\t\tif ((this._key ? !index[item[this._key]] : items.indexOf(item) === -1) && item.tags.has(tagsRest)) {\n\t\t\t\t\t\t\tif (this._key) index[item[this._key]] = true;\n\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tag && typeof tag === 'string' && this._index[tag]) {\n\t\t\t\tfor (let n = 0; n < this._index[tag].list.length; n++) {\n\t\t\t\t\titem = this._index[tag].list[n];\n\n\t\t\t\t\tif (this._key) {\n\t\t\t\t\t\tif (!index[item[this._key]]) {\n\t\t\t\t\t\t\tindex[item[this._key]] = true;\n\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (items.indexOf(item) === -1) {\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n}\n\nclass AssetRegistry extends EventHandler {\n\tconstructor(loader) {\n\t\tsuper();\n\t\tthis._loader = loader;\n\t\tthis._assets = [];\n\t\tthis._cache = {};\n\t\tthis._names = {};\n\t\tthis._tags = new TagsCache('_id');\n\t\tthis._urls = {};\n\t\tthis.prefix = null;\n\t}\n\n\tlist(filters) {\n\t\tfilters = filters || {};\n\t\treturn this._assets.filter(function (asset) {\n\t\t\tvar include = true;\n\n\t\t\tif (filters.preload !== undefined) {\n\t\t\t\tinclude = asset.preload === filters.preload;\n\t\t\t}\n\n\t\t\treturn include;\n\t\t});\n\t}\n\n\tadd(asset) {\n\t\tvar index = this._assets.push(asset) - 1;\n\t\tvar url;\n\t\tthis._cache[asset.id] = index;\n\t\tif (!this._names[asset.name]) this._names[asset.name] = [];\n\n\t\tthis._names[asset.name].push(index);\n\n\t\tif (asset.file) {\n\t\t\turl = asset.file.url;\n\t\t\tthis._urls[url] = index;\n\t\t}\n\n\t\tasset.registry = this;\n\n\t\tthis._tags.addItem(asset);\n\n\t\tasset.tags.on('add', this._onTagAdd, this);\n\t\tasset.tags.on('remove', this._onTagRemove, this);\n\t\tthis.fire(\"add\", asset);\n\t\tthis.fire(\"add:\" + asset.id, asset);\n\t\tif (url) this.fire(\"add:url:\" + url, asset);\n\t\tif (asset.preload) this.load(asset);\n\t}\n\n\tremove(asset) {\n\t\tvar idx = this._cache[asset.id];\n\t\tvar url = asset.file ? asset.file.url : null;\n\n\t\tif (idx !== undefined) {\n\t\t\tthis._assets.splice(idx, 1);\n\n\t\t\tdelete this._cache[asset.id];\n\t\t\tthis._names = {};\n\t\t\tthis._urls = [];\n\n\t\t\tfor (var i = 0, l = this._assets.length; i < l; i++) {\n\t\t\t\tvar a = this._assets[i];\n\t\t\t\tthis._cache[a.id] = i;\n\n\t\t\t\tif (!this._names[a.name]) {\n\t\t\t\t\tthis._names[a.name] = [];\n\t\t\t\t}\n\n\t\t\t\tthis._names[a.name].push(i);\n\n\t\t\t\tif (a.file) {\n\t\t\t\t\tthis._urls[a.file.url] = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._tags.removeItem(asset);\n\n\t\t\tasset.tags.off('add', this._onTagAdd, this);\n\t\t\tasset.tags.off('remove', this._onTagRemove, this);\n\t\t\tasset.fire(\"remove\", asset);\n\t\t\tthis.fire(\"remove\", asset);\n\t\t\tthis.fire(\"remove:\" + asset.id, asset);\n\t\t\tif (url) this.fire(\"remove:url:\" + url, asset);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget(id) {\n\t\tvar idx = this._cache[id];\n\t\treturn this._assets[idx];\n\t}\n\n\tgetByUrl(url) {\n\t\tvar idx = this._urls[url];\n\t\treturn this._assets[idx];\n\t}\n\n\tload(asset) {\n\t\tif (asset.loading || asset.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\t\tvar file = asset.getPreferredFile();\n\n\t\tvar _opened = function _opened(resource) {\n\t\t\tif (resource instanceof Array) {\n\t\t\t\tasset.resources = resource;\n\t\t\t} else {\n\t\t\t\tasset.resource = resource;\n\t\t\t}\n\n\t\t\tself._loader.patch(asset, self);\n\n\t\t\tself.fire(\"load\", asset);\n\t\t\tself.fire(\"load:\" + asset.id, asset);\n\t\t\tif (file && file.url) self.fire(\"load:url:\" + file.url, asset);\n\t\t\tasset.fire(\"load\", asset);\n\t\t};\n\n\t\tvar _loaded = function _loaded(err, resource, extra) {\n\t\t\tasset.loaded = true;\n\t\t\tasset.loading = false;\n\n\t\t\tif (err) {\n\t\t\t\tself.fire(\"error\", err, asset);\n\t\t\t\tself.fire(\"error:\" + asset.id, err, asset);\n\t\t\t\tasset.fire(\"error\", err, asset);\n\t\t\t} else {\n\t\t\t\tif (!script.legacy && asset.type === 'script') {\n\t\t\t\t\tvar handler = self._loader.getHandler('script');\n\n\t\t\t\t\tif (handler._cache[asset.id] && handler._cache[asset.id].parentNode === document.head) {\n\t\t\t\t\t\tdocument.head.removeChild(handler._cache[asset.id]);\n\t\t\t\t\t}\n\n\t\t\t\t\thandler._cache[asset.id] = extra;\n\t\t\t\t}\n\n\t\t\t\t_opened(resource);\n\t\t\t}\n\t\t};\n\n\t\tif (file || asset.type === 'cubemap') {\n\t\t\tthis.fire(\"load:start\", asset);\n\t\t\tthis.fire(\"load:\" + asset.id + \":start\", asset);\n\t\t\tasset.loading = true;\n\n\t\t\tself._loader.load(asset.getFileUrl(), asset.type, _loaded, asset);\n\t\t} else {\n\t\t\tvar resource = self._loader.open(asset.type, asset.data);\n\n\t\t\tasset.loaded = true;\n\n\t\t\t_opened(resource);\n\t\t}\n\t}\n\n\tloadFromUrl(url, type, callback) {\n\t\tthis.loadFromUrlAndFilename(url, null, type, callback);\n\t}\n\n\tloadFromUrlAndFilename(url, filename, type, callback) {\n\t\tvar self = this;\n\t\tvar name = path.getBasename(filename || url);\n\t\tvar file = {\n\t\t\tfilename: filename || name,\n\t\t\turl: url\n\t\t};\n\t\tvar asset = self.getByUrl(url);\n\n\t\tif (!asset) {\n\t\t\tasset = new Asset(name, type, file);\n\t\t\tself.add(asset);\n\t\t} else if (asset.loaded) {\n\t\t\tcallback(asset.loadFromUrlError || null, asset);\n\t\t\treturn;\n\t\t}\n\n\t\tvar startLoad = function startLoad(asset) {\n\t\t\tasset.once(\"load\", function (loadedAsset) {\n\t\t\t\tif (type === 'material') {\n\t\t\t\t\tself._loadTextures(loadedAsset, function (err, textures) {\n\t\t\t\t\t\tcallback(err, loadedAsset);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, loadedAsset);\n\t\t\t\t}\n\t\t\t});\n\t\t\tasset.once(\"error\", function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\tthis.loadFromUrlError = err;\n\t\t\t\t}\n\n\t\t\t\tcallback(err, asset);\n\t\t\t});\n\t\t\tself.load(asset);\n\t\t};\n\n\t\tif (asset.resource) {\n\t\t\tcallback(null, asset);\n\t\t} else if (type === 'model') {\n\t\t\tself._loadModel(asset, startLoad);\n\t\t} else {\n\t\t\tstartLoad(asset);\n\t\t}\n\t}\n\n\t_loadModel(modelAsset, continuation) {\n\t\tvar self = this;\n\t\tvar url = modelAsset.getFileUrl();\n\t\tvar ext = path.getExtension(url);\n\n\t\tif (ext === '.json' || ext === '.glb') {\n\t\t\tvar dir = path.getDirectory(url);\n\t\t\tvar basename = path.getBasename(url);\n\t\t\tvar mappingUrl = path.join(dir, basename.replace(ext, \".mapping.json\"));\n\n\t\t\tthis._loader.load(mappingUrl, 'json', function (err, data) {\n\t\t\t\tif (err) {\n\t\t\t\t\tmodelAsset.data = {\n\t\t\t\t\t\tmapping: []\n\t\t\t\t\t};\n\t\t\t\t\tcontinuation(modelAsset);\n\t\t\t\t} else {\n\t\t\t\t\tself._loadMaterials(modelAsset, data, function (e, materials) {\n\t\t\t\t\t\tmodelAsset.data = data;\n\t\t\t\t\t\tcontinuation(modelAsset);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tcontinuation(modelAsset);\n\t\t}\n\t}\n\n\t_loadMaterials(modelAsset, mapping, callback) {\n\t\tvar self = this;\n\t\tvar materials = [];\n\t\tvar count = 0;\n\n\t\tvar onMaterialLoaded = function onMaterialLoaded(err, materialAsset) {\n\t\t\tself._loadTextures(materialAsset, function (err, textures) {\n\t\t\t\tmaterials.push(materialAsset);\n\n\t\t\t\tif (materials.length === count) {\n\t\t\t\t\tcallback(null, materials);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tfor (var i = 0; i < mapping.mapping.length; i++) {\n\t\t\tvar path = mapping.mapping[i].path;\n\n\t\t\tif (path) {\n\t\t\t\tcount++;\n\t\t\t\tself.loadFromUrl(modelAsset.getAbsoluteUrl(path), \"material\", onMaterialLoaded);\n\t\t\t}\n\t\t}\n\n\t\tif (count === 0) {\n\t\t\tcallback(null, materials);\n\t\t}\n\t}\n\n\t_loadTextures(materialAsset, callback) {\n\t\tvar self = this;\n\t\tvar textures = [];\n\t\tvar count = 0;\n\t\tvar data = materialAsset.data;\n\n\t\tif (data.mappingFormat !== 'path') {\n\t\t\tcallback(null, textures);\n\t\t\treturn;\n\t\t}\n\n\t\tvar onTextureLoaded = function onTextureLoaded(err, texture) {\n\t\t\tif (err) console.error(err);\n\t\t\ttextures.push(texture);\n\n\t\t\tif (textures.length === count) {\n\t\t\t\tcallback(null, textures);\n\t\t\t}\n\t\t};\n\n\t\tvar texParams = standardMaterialTextureParameters;\n\n\t\tfor (var i = 0; i < texParams.length; i++) {\n\t\t\tvar path = data[texParams[i]];\n\n\t\t\tif (path && typeof path === 'string') {\n\t\t\t\tcount++;\n\t\t\t\tself.loadFromUrl(materialAsset.getAbsoluteUrl(path), \"texture\", onTextureLoaded);\n\t\t\t}\n\t\t}\n\n\t\tif (count === 0) {\n\t\t\tcallback(null, textures);\n\t\t}\n\t}\n\n\tfindAll(name, type) {\n\t\tvar self = this;\n\t\tvar idxs = this._names[name];\n\n\t\tif (idxs) {\n\t\t\tvar assets = idxs.map(function (idx) {\n\t\t\t\treturn self._assets[idx];\n\t\t\t});\n\n\t\t\tif (type) {\n\t\t\t\treturn assets.filter(function (asset) {\n\t\t\t\t\treturn asset.type === type;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn assets;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t_onTagAdd(tag, asset) {\n\t\tthis._tags.add(tag, asset);\n\t}\n\n\t_onTagRemove(tag, asset) {\n\t\tthis._tags.remove(tag, asset);\n\t}\n\n\tfindByTag() {\n\t\treturn this._tags.find(arguments);\n\t}\n\n\tfilter(callback) {\n\t\tvar items = [];\n\n\t\tfor (var i = 0, len = this._assets.length; i < len; i++) {\n\t\t\tif (callback(this._assets[i])) items.push(this._assets[i]);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tfind(name, type) {\n\t\tvar asset = this.findAll(name, type);\n\t\treturn asset.length > 0 ? asset[0] : null;\n\t}\n\n}\n\nclass BundleRegistry {\n\tconstructor(assets) {\n\t\tthis._assets = assets;\n\t\tthis._bundleAssets = {};\n\t\tthis._assetsInBundles = {};\n\t\tthis._urlsInBundles = {};\n\t\tthis._fileRequests = {};\n\n\t\tthis._assets.on('add', this._onAssetAdded, this);\n\n\t\tthis._assets.on('remove', this._onAssetRemoved, this);\n\t}\n\n\t_onAssetAdded(asset) {\n\t\tif (asset.type === 'bundle') {\n\t\t\tthis._bundleAssets[asset.id] = asset;\n\n\t\t\tthis._registerBundleEventListeners(asset.id);\n\n\t\t\tfor (var i = 0, len = asset.data.assets.length; i < len; i++) {\n\t\t\t\tthis._indexAssetInBundle(asset.data.assets[i], asset);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._assetsInBundles[asset.id]) {\n\t\t\t\tthis._indexAssetFileUrls(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_registerBundleEventListeners(bundleAssetId) {\n\t\tthis._assets.on('load:' + bundleAssetId, this._onBundleLoaded, this);\n\n\t\tthis._assets.on('error:' + bundleAssetId, this._onBundleError, this);\n\t}\n\n\t_unregisterBundleEventListeners(bundleAssetId) {\n\t\tthis._assets.off('load:' + bundleAssetId, this._onBundleLoaded, this);\n\n\t\tthis._assets.off('error:' + bundleAssetId, this._onBundleError, this);\n\t}\n\n\t_indexAssetInBundle(assetId, bundleAsset) {\n\t\tif (!this._assetsInBundles[assetId]) {\n\t\t\tthis._assetsInBundles[assetId] = [bundleAsset];\n\t\t} else {\n\t\t\tvar bundles = this._assetsInBundles[assetId];\n\t\t\tvar idx = bundles.indexOf(bundleAsset);\n\n\t\t\tif (idx === -1) {\n\t\t\t\tbundles.push(bundleAsset);\n\t\t\t}\n\t\t}\n\n\t\tvar asset = this._assets.get(assetId);\n\n\t\tif (asset) {\n\t\t\tthis._indexAssetFileUrls(asset);\n\t\t}\n\t}\n\n\t_indexAssetFileUrls(asset) {\n\t\tvar urls = this._getAssetFileUrls(asset);\n\n\t\tif (!urls) return;\n\n\t\tfor (var i = 0, len = urls.length; i < len; i++) {\n\t\t\tvar url = urls[i];\n\t\t\tthis._urlsInBundles[url] = this._assetsInBundles[asset.id];\n\t\t}\n\t}\n\n\t_getAssetFileUrls(asset) {\n\t\tvar url = asset.getFileUrl();\n\t\tif (!url) return null;\n\t\turl = this._normalizeUrl(url);\n\t\tvar urls = [url];\n\n\t\tif (asset.type === 'font') {\n\t\t\tvar numFiles = asset.data.info.maps.length;\n\n\t\t\tfor (var i = 1; i < numFiles; i++) {\n\t\t\t\turls.push(url.replace('.png', i + '.png'));\n\t\t\t}\n\t\t}\n\n\t\treturn urls;\n\t}\n\n\t_normalizeUrl(url) {\n\t\treturn url && url.split('?')[0];\n\t}\n\n\t_onAssetRemoved(asset) {\n\t\tif (asset.type === 'bundle') {\n\t\t\tdelete this._bundleAssets[asset.id];\n\n\t\t\tthis._unregisterBundleEventListeners(asset.id);\n\n\t\t\tvar idx, id;\n\n\t\t\tfor (id in this._assetsInBundles) {\n\t\t\t\tvar array = this._assetsInBundles[id];\n\t\t\t\tidx = array.indexOf(asset);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tarray.splice(idx, 1);\n\n\t\t\t\t\tif (!array.length) {\n\t\t\t\t\t\tdelete this._assetsInBundles[id];\n\n\t\t\t\t\t\tfor (var url in this._urlsInBundles) {\n\t\t\t\t\t\t\tif (this._urlsInBundles[url] === array) {\n\t\t\t\t\t\t\t\tdelete this._urlsInBundles[url];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._onBundleError('Bundle ' + asset.id + ' was removed', asset);\n\t\t} else if (this._assetsInBundles[asset.id]) {\n\t\t\tdelete this._assetsInBundles[asset.id];\n\n\t\t\tvar urls = this._getAssetFileUrls(asset);\n\n\t\t\tfor (var i = 0, len = urls.length; i < len; i++) {\n\t\t\t\tdelete this._urlsInBundles[urls[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t_onBundleLoaded(bundleAsset) {\n\t\tif (!bundleAsset.resource) {\n\t\t\tthis._onBundleError('Bundle ' + bundleAsset.id + ' failed to load', bundleAsset);\n\n\t\t\treturn;\n\t\t}\n\n\t\trequestAnimationFrame(function () {\n\t\t\tif (!this._fileRequests) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var url in this._fileRequests) {\n\t\t\t\tvar bundles = this._urlsInBundles[url];\n\t\t\t\tif (!bundles || bundles.indexOf(bundleAsset) === -1) continue;\n\t\t\t\tvar decodedUrl = decodeURIComponent(url);\n\t\t\t\tvar err = null;\n\n\t\t\t\tif (!bundleAsset.resource.hasBlobUrl(decodedUrl)) {\n\t\t\t\t\terr = 'Bundle ' + bundleAsset.id + ' does not contain URL ' + url;\n\t\t\t\t}\n\n\t\t\t\tvar requests = this._fileRequests[url];\n\n\t\t\t\tfor (var i = 0, len = requests.length; i < len; i++) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\trequests[i](err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequests[i](null, bundleAsset.resource.getBlobUrl(decodedUrl));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete this._fileRequests[url];\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\t_onBundleError(err, bundleAsset) {\n\t\tfor (var url in this._fileRequests) {\n\t\t\tvar bundle = this._findLoadedOrLoadingBundleForUrl(url);\n\n\t\t\tif (!bundle) {\n\t\t\t\tvar requests = this._fileRequests[url];\n\n\t\t\t\tfor (var i = 0, len = requests.length; i < len; i++) {\n\t\t\t\t\trequests[i](err);\n\t\t\t\t}\n\n\t\t\t\tdelete this._fileRequests[url];\n\t\t\t}\n\t\t}\n\t}\n\n\t_findLoadedOrLoadingBundleForUrl(url) {\n\t\tvar bundles = this._urlsInBundles[url];\n\t\tif (!bundles) return null;\n\t\tvar len = bundles.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (bundles[i].loaded && bundles[i].resource) {\n\t\t\t\treturn bundles[i];\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (bundles[i].loading) {\n\t\t\t\treturn bundles[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tlistBundlesForAsset(asset) {\n\t\treturn this._assetsInBundles[asset.id] || null;\n\t}\n\n\tlist() {\n\t\tvar result = [];\n\n\t\tfor (var id in this._bundleAssets) {\n\t\t\tresult.push(this._bundleAssets[id]);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\thasUrl(url) {\n\t\treturn !!this._urlsInBundles[url];\n\t}\n\n\tcanLoadUrl(url) {\n\t\treturn !!this._findLoadedOrLoadingBundleForUrl(url);\n\t}\n\n\tloadUrl(url, callback) {\n\t\tvar bundle = this._findLoadedOrLoadingBundleForUrl(url);\n\n\t\tif (!bundle) {\n\t\t\tcallback('URL ' + url + ' not found in any bundles');\n\t\t\treturn;\n\t\t}\n\n\t\tif (bundle.loaded) {\n\t\t\tvar decodedUrl = decodeURIComponent(url);\n\n\t\t\tif (!bundle.resource.hasBlobUrl(decodedUrl)) {\n\t\t\t\tcallback('Bundle ' + bundle.id + ' does not contain URL ' + url);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallback(null, bundle.resource.getBlobUrl(decodedUrl));\n\t\t} else if (this._fileRequests.hasOwnProperty(url)) {\n\t\t\tthis._fileRequests[url].push(callback);\n\t\t} else {\n\t\t\tthis._fileRequests[url] = [callback];\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._assets.off('add', this._onAssetAdded, this);\n\n\t\tthis._assets.off('remove', this._onAssetRemoved, this);\n\n\t\tfor (var id in this._bundleAssets) {\n\t\t\tthis._unregisterBundleEventListeners(id);\n\t\t}\n\n\t\tthis._assets = null;\n\t\tthis._bundleAssets = null;\n\t\tthis._assetsInBundles = null;\n\t\tthis._urlsInBundles = null;\n\t\tthis._fileRequests = null;\n\t}\n\n}\n\nclass ScriptRegistry extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis._scripts = {};\n\t\tthis._list = [];\n\t}\n\n\tdestroy() {\n\t\tthis.app = null;\n\t\tthis.off();\n\t}\n\n\tadd(script) {\n\t\tvar self = this;\n\t\tvar scriptName = script.__name;\n\n\t\tif (this._scripts.hasOwnProperty(scriptName)) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (script.prototype.swap) {\n\t\t\t\t\tvar old = self._scripts[scriptName];\n\n\t\t\t\t\tvar ind = self._list.indexOf(old);\n\n\t\t\t\t\tself._list[ind] = script;\n\t\t\t\t\tself._scripts[scriptName] = script;\n\t\t\t\t\tself.fire('swap', scriptName, script);\n\t\t\t\t\tself.fire('swap:' + scriptName, script);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('script registry already has \\'' + scriptName + '\\' script, define \\'swap\\' method for new script type to enable code hot swapping');\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._scripts[scriptName] = script;\n\n\t\tthis._list.push(script);\n\n\t\tthis.fire('add', scriptName, script);\n\t\tthis.fire('add:' + scriptName, script);\n\t\tsetTimeout(function () {\n\t\t\tif (!self._scripts.hasOwnProperty(scriptName)) return;\n\n\t\t\tif (!self.app || !self.app.systems || !self.app.systems.script) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar components = self.app.systems.script._components;\n\t\t\tvar i, scriptInstance, attributes;\n\t\t\tvar scriptInstances = [];\n\t\t\tvar scriptInstancesInitialized = [];\n\n\t\t\tfor (components.loopIndex = 0; components.loopIndex < components.length; components.loopIndex++) {\n\t\t\t\tvar component = components.items[components.loopIndex];\n\n\t\t\t\tif (component._scriptsIndex[scriptName] && component._scriptsIndex[scriptName].awaiting) {\n\t\t\t\t\tif (component._scriptsData && component._scriptsData[scriptName]) attributes = component._scriptsData[scriptName].attributes;\n\t\t\t\t\tscriptInstance = component.create(scriptName, {\n\t\t\t\t\t\tpreloading: true,\n\t\t\t\t\t\tind: component._scriptsIndex[scriptName].ind,\n\t\t\t\t\t\tattributes: attributes\n\t\t\t\t\t});\n\t\t\t\t\tif (scriptInstance) scriptInstances.push(scriptInstance);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < scriptInstances.length; i++) scriptInstances[i].__initializeAttributes();\n\n\t\t\tfor (i = 0; i < scriptInstances.length; i++) {\n\t\t\t\tif (scriptInstances[i].enabled) {\n\t\t\t\t\tscriptInstances[i]._initialized = true;\n\t\t\t\t\tscriptInstancesInitialized.push(scriptInstances[i]);\n\t\t\t\t\tif (scriptInstances[i].initialize) scriptInstances[i].initialize();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < scriptInstancesInitialized.length; i++) {\n\t\t\t\tif (!scriptInstancesInitialized[i].enabled || scriptInstancesInitialized[i]._postInitialized) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tscriptInstancesInitialized[i]._postInitialized = true;\n\t\t\t\tif (scriptInstancesInitialized[i].postInitialize) scriptInstancesInitialized[i].postInitialize();\n\t\t\t}\n\t\t});\n\t\treturn true;\n\t}\n\n\tremove(nameOrType) {\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptName !== 'string') {\n\t\t\tscriptName = scriptType.__name;\n\t\t} else {\n\t\t\tscriptType = this.get(scriptName);\n\t\t}\n\n\t\tif (this.get(scriptName) !== scriptType) return false;\n\t\tdelete this._scripts[scriptName];\n\n\t\tvar ind = this._list.indexOf(scriptType);\n\n\t\tthis._list.splice(ind, 1);\n\n\t\tthis.fire('remove', scriptName, scriptType);\n\t\tthis.fire('remove:' + scriptName, scriptType);\n\t\treturn true;\n\t}\n\n\tget(name) {\n\t\treturn this._scripts[name] || null;\n\t}\n\n\thas(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\treturn this._scripts.hasOwnProperty(nameOrType);\n\t\t}\n\n\t\tif (!nameOrType) return false;\n\t\tvar scriptName = nameOrType.__name;\n\t\treturn this._scripts[scriptName] === nameOrType;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n}\n\nclass I18nParser {\n\t_validate(data) {\n\t\tif (!data.header) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"header\" field');\n\t\t}\n\n\t\tif (!data.header.version) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"header.version\" field');\n\t\t}\n\n\t\tif (data.header.version !== 1) {\n\t\t\tthrow new Error('pc.I18n#addData: Invalid \"header.version\" field');\n\t\t}\n\n\t\tif (!data.data) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"data\" field');\n\t\t} else if (!Array.isArray(data.data)) {\n\t\t\tthrow new Error('pc.I18n#addData: \"data\" field must be an array');\n\t\t}\n\n\t\tfor (var i = 0, len = data.data.length; i < len; i++) {\n\t\t\tvar entry = data.data[i];\n\n\t\t\tif (!entry.info) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].info\" field');\n\t\t\t}\n\n\t\t\tif (!entry.info.locale) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].info.locale\" field');\n\t\t\t}\n\n\t\t\tif (typeof entry.info.locale !== 'string') {\n\t\t\t\tthrow new Error('pc.I18n#addData: \"data[' + i + '].info.locale\" must be a string');\n\t\t\t}\n\n\t\t\tif (!entry.messages) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].messages\" field');\n\t\t\t}\n\t\t}\n\t}\n\n\tparse(data) {\n\t\treturn data.data;\n\t}\n\n}\n\nclass I18n extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.locale = DEFAULT_LOCALE;\n\t\tthis._translations = {};\n\t\tthis._availableLangs = {};\n\t\tthis._app = app;\n\t\tthis._assets = [];\n\t\tthis._parser = new I18nParser();\n\t}\n\n\tstatic findAvailableLocale(desiredLocale, availableLocales) {\n\t\treturn findAvailableLocale(desiredLocale, availableLocales);\n\t}\n\n\tfindAvailableLocale(desiredLocale) {\n\t\tif (this._translations[desiredLocale]) {\n\t\t\treturn desiredLocale;\n\t\t}\n\n\t\tconst lang = getLang(desiredLocale);\n\t\treturn this._findFallbackLocale(desiredLocale, lang);\n\t}\n\n\tgetText(key, locale) {\n\t\tvar result = key;\n\t\tvar lang;\n\n\t\tif (!locale) {\n\t\t\tlocale = this._locale;\n\t\t\tlang = this._lang;\n\t\t}\n\n\t\tvar translations = this._translations[locale];\n\n\t\tif (!translations) {\n\t\t\tif (!lang) {\n\t\t\t\tlang = getLang(locale);\n\t\t\t}\n\n\t\t\tlocale = this._findFallbackLocale(locale, lang);\n\t\t\ttranslations = this._translations[locale];\n\t\t}\n\n\t\tif (translations && translations.hasOwnProperty(key)) {\n\t\t\tresult = translations[key];\n\n\t\t\tif (Array.isArray(result)) {\n\t\t\t\tresult = result[0];\n\t\t\t}\n\n\t\t\tif (result === null || result === undefined) {\n\t\t\t\tresult = key;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetPluralText(key, n, locale) {\n\t\tvar result = key;\n\t\tvar pluralFn;\n\t\tvar lang;\n\n\t\tif (!locale) {\n\t\t\tlocale = this._locale;\n\t\t\tlang = this._lang;\n\t\t\tpluralFn = this._pluralFn;\n\t\t} else {\n\t\t\tlang = getLang(locale);\n\t\t\tpluralFn = getPluralFn(lang);\n\t\t}\n\n\t\tvar translations = this._translations[locale];\n\n\t\tif (!translations) {\n\t\t\tlocale = this._findFallbackLocale(locale, lang);\n\t\t\tlang = getLang(locale);\n\t\t\tpluralFn = getPluralFn(lang);\n\t\t\ttranslations = this._translations[locale];\n\t\t}\n\n\t\tif (translations && translations[key] && pluralFn) {\n\t\t\tvar index = pluralFn(n);\n\t\t\tresult = translations[key][index];\n\n\t\t\tif (result === null || result === undefined) {\n\t\t\t\tresult = key;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddData(data) {\n\t\tvar parsed;\n\n\t\ttry {\n\t\t\tparsed = this._parser.parse(data);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, len = parsed.length; i < len; i++) {\n\t\t\tvar entry = parsed[i];\n\t\t\tvar locale = entry.info.locale;\n\t\t\tvar messages = entry.messages;\n\n\t\t\tif (!this._translations[locale]) {\n\t\t\t\tthis._translations[locale] = {};\n\t\t\t\tvar lang = getLang(locale);\n\n\t\t\t\tif (!this._availableLangs[lang]) {\n\t\t\t\t\tthis._availableLangs[lang] = locale;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.assign(this._translations[locale], messages);\n\t\t\tthis.fire('data:add', locale, messages);\n\t\t}\n\t}\n\n\tremoveData(data) {\n\t\tvar parsed;\n\t\tvar key;\n\n\t\ttry {\n\t\t\tparsed = this._parser.parse(data);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, len = parsed.length; i < len; i++) {\n\t\t\tvar entry = parsed[i];\n\t\t\tvar locale = entry.info.locale;\n\t\t\tvar translations = this._translations[locale];\n\t\t\tif (!translations) continue;\n\t\t\tvar messages = entry.messages;\n\n\t\t\tfor (key in messages) {\n\t\t\t\tdelete translations[key];\n\t\t\t}\n\n\t\t\tvar hasAny = false;\n\n\t\t\tfor (key in translations) {\n\t\t\t\thasAny = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!hasAny) {\n\t\t\t\tdelete this._translations[locale];\n\t\t\t\tdelete this._availableLangs[getLang(locale)];\n\t\t\t}\n\n\t\t\tthis.fire('data:remove', locale, messages);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._translations = null;\n\t\tthis._availableLangs = null;\n\t\tthis._assets = null;\n\t\tthis._parser = null;\n\t\tthis.off();\n\t}\n\n\tget locale() {\n\t\treturn this._locale;\n\t}\n\n\tset locale(value) {\n\t\tif (this._locale === value) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar lang = getLang(value);\n\n\t\tif (lang === 'in') {\n\t\t\tlang = 'id';\n\t\t\tvalue = replaceLang(value, lang);\n\n\t\t\tif (this._locale === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar old = this._locale;\n\t\tthis._locale = value;\n\t\tthis._lang = lang;\n\t\tthis._pluralFn = getPluralFn(this._lang);\n\t\tthis.fire('set:locale', value, old);\n\t}\n\n\tget assets() {\n\t\treturn this._assets;\n\t}\n\n\tset assets(value) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar id;\n\t\tvar asset;\n\t\tvar index = {};\n\n\t\tfor (i = 0, len = value.length; i < len; i++) {\n\t\t\tid = value[i] instanceof Asset ? value[i].id : value[i];\n\t\t\tindex[id] = true;\n\t\t}\n\n\t\ti = this._assets.length;\n\n\t\twhile (i--) {\n\t\t\tid = this._assets[i];\n\n\t\t\tif (!index[id]) {\n\t\t\t\tthis._app.assets.off('add:' + id, this._onAssetAdd, this);\n\n\t\t\t\tasset = this._app.assets.get(id);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis._onAssetRemove(asset);\n\t\t\t\t}\n\n\t\t\t\tthis._assets.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tfor (id in index) {\n\t\t\tid = parseInt(id, 10);\n\t\t\tif (this._assets.indexOf(id) !== -1) continue;\n\n\t\t\tthis._assets.push(id);\n\n\t\t\tasset = this._app.assets.get(id);\n\n\t\t\tif (!asset) {\n\t\t\t\tthis._app.assets.once('add:' + id, this._onAssetAdd, this);\n\t\t\t} else {\n\t\t\t\tthis._onAssetAdd(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_findFallbackLocale(locale, lang) {\n\t\tvar result = DEFAULT_LOCALE_FALLBACKS[locale];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = DEFAULT_LOCALE_FALLBACKS[lang];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this._availableLangs[lang];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\treturn DEFAULT_LOCALE;\n\t}\n\n\t_onAssetAdd(asset) {\n\t\tasset.on('load', this._onAssetLoad, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t\tasset.on('remove', this._onAssetRemove, this);\n\t\tasset.on('unload', this._onAssetUnload, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onAssetLoad(asset);\n\t\t}\n\t}\n\n\t_onAssetLoad(asset) {\n\t\tthis.addData(asset.resource);\n\t}\n\n\t_onAssetChange(asset) {\n\t\tif (asset.resource) {\n\t\t\tthis.addData(asset.resource);\n\t\t}\n\t}\n\n\t_onAssetRemove(asset) {\n\t\tasset.off('load', this._onAssetLoad, this);\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.off('remove', this._onAssetRemove, this);\n\t\tasset.off('unload', this._onAssetUnload, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis.removeData(asset.resource);\n\t\t}\n\n\t\tthis._app.assets.once('add:' + asset.id, this._onAssetAdd, this);\n\t}\n\n\t_onAssetUnload(asset) {\n\t\tif (asset.resource) {\n\t\t\tthis.removeData(asset.resource);\n\t\t}\n\t}\n\n}\n\nconst FILLMODE_NONE = 'NONE';\nconst FILLMODE_FILL_WINDOW = 'FILL_WINDOW';\nconst FILLMODE_KEEP_ASPECT = 'KEEP_ASPECT';\nconst RESOLUTION_AUTO = 'AUTO';\nconst RESOLUTION_FIXED = 'FIXED';\n\nclass VrDisplay extends EventHandler {\n\tconstructor(app, display) {\n\t\tsuper();\n\t\tvar self = this;\n\t\tthis._app = app;\n\t\tthis._device = app.graphicsDevice;\n\t\tthis.id = display.displayId;\n\t\tthis._frameData = null;\n\n\t\tif (window.VRFrameData) {\n\t\t\tthis._frameData = new window.VRFrameData();\n\t\t}\n\n\t\tthis.display = display;\n\t\tthis._camera = null;\n\t\tthis.sitToStandInv = new Mat4();\n\t\tthis.leftView = new Mat4();\n\t\tthis.leftProj = new Mat4();\n\t\tthis.leftViewInv = new Mat4();\n\t\tthis.leftPos = new Vec3();\n\t\tthis.rightView = new Mat4();\n\t\tthis.rightProj = new Mat4();\n\t\tthis.rightViewInv = new Mat4();\n\t\tthis.rightPos = new Vec3();\n\t\tthis.combinedPos = new Vec3();\n\t\tthis.combinedView = new Mat4();\n\t\tthis.combinedProj = new Mat4();\n\t\tthis.combinedViewInv = new Mat4();\n\t\tthis.combinedFov = 0;\n\t\tthis.combinedAspect = 0;\n\t\tthis.presenting = false;\n\n\t\tself._presentChange = function (event) {\n\t\t\tvar display;\n\n\t\t\tif (event.display) {\n\t\t\t\tdisplay = event.display;\n\t\t\t} else if (event.detail && event.detail.display) {\n\t\t\t\tdisplay = event.detail.display;\n\t\t\t} else if (event.detail && event.detail.vrdisplay) {\n\t\t\t\tdisplay = event.detail.vrdisplay;\n\t\t\t} else {\n\t\t\t\tdisplay = self.display;\n\t\t\t}\n\n\t\t\tif (display === self.display) {\n\t\t\t\tself.presenting = self.display && self.display.isPresenting;\n\n\t\t\t\tif (self.presenting) {\n\t\t\t\t\tvar leftEye = self.display.getEyeParameters(\"left\");\n\t\t\t\t\tvar rightEye = self.display.getEyeParameters(\"right\");\n\t\t\t\t\tvar w = Math.max(leftEye.renderWidth, rightEye.renderWidth) * 2;\n\t\t\t\t\tvar h = Math.max(leftEye.renderHeight, rightEye.renderHeight);\n\n\t\t\t\t\tself._app.graphicsDevice.setResolution(w, h);\n\n\t\t\t\t\tself._app._allowResize = false;\n\t\t\t\t} else {\n\t\t\t\t\tself._app.setCanvasResolution(RESOLUTION_AUTO);\n\n\t\t\t\t\tself._app._allowResize = true;\n\t\t\t\t}\n\n\t\t\t\tself.fire('beforepresentchange', self);\n\t\t\t\tself.fire('presentchange', self);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('vrdisplaypresentchange', self._presentChange, false);\n\t}\n\n\tdestroy() {\n\t\twindow.removeEventListener('vrdisplaypresentchange', self._presentChange);\n\t\tif (this._camera) this._camera.vrDisplay = null;\n\t\tthis._camera = null;\n\t}\n\n\tpoll() {\n\t\tif (this.display) {\n\t\t\tthis.display.getFrameData(this._frameData);\n\t\t\tthis.leftProj.data = this._frameData.leftProjectionMatrix;\n\t\t\tthis.rightProj.data = this._frameData.rightProjectionMatrix;\n\t\t\tvar stage = this.display.stageParameters;\n\n\t\t\tif (stage) {\n\t\t\t\tthis.sitToStandInv.set(stage.sittingToStandingTransform).invert();\n\t\t\t\tthis.combinedView.set(this._frameData.leftViewMatrix);\n\t\t\t\tthis.leftView.mul2(this.combinedView, this.sitToStandInv);\n\t\t\t\tthis.combinedView.set(this._frameData.rightViewMatrix);\n\t\t\t\tthis.rightView.mul2(this.combinedView, this.sitToStandInv);\n\t\t\t} else {\n\t\t\t\tthis.leftView.set(this._frameData.leftViewMatrix);\n\t\t\t\tthis.rightView.set(this._frameData.rightViewMatrix);\n\t\t\t}\n\n\t\t\tvar nx = this.leftProj.data[3] + this.leftProj.data[0];\n\t\t\tvar nz = this.leftProj.data[11] + this.leftProj.data[8];\n\t\t\tvar l = 1.0 / Math.sqrt(nx * nx + nz * nz);\n\t\t\tnx *= l;\n\t\t\tnz *= l;\n\t\t\tvar maxFov = -Math.atan2(nz, nx);\n\t\t\tnx = this.rightProj.data[3] + this.rightProj.data[0];\n\t\t\tnz = this.rightProj.data[11] + this.rightProj.data[8];\n\t\t\tl = 1.0 / Math.sqrt(nx * nx + nz * nz);\n\t\t\tnx *= l;\n\t\t\tnz *= l;\n\t\t\tmaxFov = Math.max(maxFov, -Math.atan2(nz, nx));\n\t\t\tmaxFov *= 2.0;\n\t\t\tthis.combinedFov = maxFov;\n\t\t\tvar aspect = this.rightProj.data[5] / this.rightProj.data[0];\n\t\t\tthis.combinedAspect = aspect;\n\t\t\tvar view = this.combinedView;\n\t\t\tview.copy(this.leftView);\n\t\t\tview.invert();\n\t\t\tthis.leftViewInv.copy(view);\n\t\t\tvar pos = this.combinedPos;\n\t\t\tpos.x = this.leftPos.x = view.data[12];\n\t\t\tpos.y = this.leftPos.y = view.data[13];\n\t\t\tpos.z = this.leftPos.z = view.data[14];\n\t\t\tview.copy(this.rightView);\n\t\t\tview.invert();\n\t\t\tthis.rightViewInv.copy(view);\n\t\t\tvar deltaX = pos.x - view.data[12];\n\t\t\tvar deltaY = pos.y - view.data[13];\n\t\t\tvar deltaZ = pos.z - view.data[14];\n\t\t\tvar dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n\t\t\tthis.rightPos.x = view.data[12];\n\t\t\tthis.rightPos.y = view.data[13];\n\t\t\tthis.rightPos.z = view.data[14];\n\t\t\tpos.x += view.data[12];\n\t\t\tpos.y += view.data[13];\n\t\t\tpos.z += view.data[14];\n\t\t\tpos.x *= 0.5;\n\t\t\tpos.y *= 0.5;\n\t\t\tpos.z *= 0.5;\n\t\t\tvar b = Math.PI * 0.5;\n\t\t\tvar c = maxFov * 0.5;\n\t\t\tvar a = Math.PI - (b + c);\n\t\t\tvar offset = dist * 0.5 * Math.sin(a);\n\t\t\tvar fwdX = view.data[8];\n\t\t\tvar fwdY = view.data[9];\n\t\t\tvar fwdZ = view.data[10];\n\t\t\tview.data[12] = pos.x + fwdX * offset;\n\t\t\tview.data[13] = pos.y + fwdY * offset;\n\t\t\tview.data[14] = pos.z + fwdZ * offset;\n\t\t\tthis.combinedViewInv.copy(view);\n\t\t\tview.invert();\n\t\t\tthis.combinedProj.setPerspective(maxFov * math.RAD_TO_DEG, aspect, this.display.depthNear + offset, this.display.depthFar + offset, true);\n\t\t}\n\t}\n\n\trequestPresent(callback) {\n\t\tif (!this.display) {\n\t\t\tif (callback) callback(new Error(\"No VrDisplay to requestPresent\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.presenting) {\n\t\t\tif (callback) callback(new Error(\"VrDisplay already presenting\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.display.requestPresent([{\n\t\t\tsource: this._device.canvas\n\t\t}]).then(function () {\n\t\t\tif (callback) callback();\n\t\t}, function (err) {\n\t\t\tif (callback) callback(err);\n\t\t});\n\t}\n\n\texitPresent(callback) {\n\t\tif (!this.display) {\n\t\t\tif (callback) callback(new Error(\"No VrDisplay to exitPresent\"));\n\t\t}\n\n\t\tif (!this.presenting) {\n\t\t\tif (callback) callback(new Error(\"VrDisplay not presenting\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.display.exitPresent().then(function () {\n\t\t\tif (callback) callback();\n\t\t}, function () {\n\t\t\tif (callback) callback(new Error(\"exitPresent failed\"));\n\t\t});\n\t}\n\n\trequestAnimationFrame(fn) {\n\t\tif (this.display) this.display.requestAnimationFrame(fn);\n\t}\n\n\tsubmitFrame() {\n\t\tif (this.display) this.display.submitFrame();\n\t}\n\n\treset() {\n\t\tif (this.display) this.display.resetPose();\n\t}\n\n\tsetClipPlanes(n, f) {\n\t\tif (this.display) {\n\t\t\tthis.display.depthNear = n;\n\t\t\tthis.display.depthFar = f;\n\t\t}\n\t}\n\n\tgetFrameData() {\n\t\tif (this.display) return this._frameData;\n\t}\n\n\tget capabilities() {\n\t\tif (this.display) return this.display.capabilities;\n\t\treturn {};\n\t}\n\n}\n\nclass VrManager extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tvar self = this;\n\t\tthis.isSupported = VrManager.isSupported;\n\t\tthis._index = {};\n\t\tthis.displays = [];\n\t\tthis.display = null;\n\t\tthis._app = app;\n\t\tthis._onDisplayConnect = this._onDisplayConnect.bind(this);\n\t\tthis._onDisplayDisconnect = this._onDisplayDisconnect.bind(this);\n\n\t\tself._attach();\n\n\t\tthis._getDisplays(function (err, displays) {\n\t\t\tif (err) {\n\t\t\t\tself.fire('error', err);\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < displays.length; i++) {\n\t\t\t\t\tself._addDisplay(displays[i]);\n\t\t\t\t}\n\n\t\t\t\tself.fire('ready', self.displays);\n\t\t\t}\n\t\t});\n\t}\n\n\t_attach() {\n\t\twindow.addEventListener('vrdisplayconnect', this._onDisplayConnect);\n\t\twindow.addEventListener('vrdisplaydisconnect', this._onDisplayDisconnect);\n\t}\n\n\t_detach() {\n\t\twindow.removeEventListener('vrdisplayconnect', this._onDisplayConnect);\n\t\twindow.removeEventListener('vrdisplaydisconnect', this._onDisplayDisconnect);\n\t}\n\n\tdestroy() {\n\t\tthis._detach();\n\t}\n\n\tpoll() {\n\t\tvar l = this.displays.length;\n\t\tif (!l) return;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this.displays[i]._camera) this.displays[i].poll();\n\t\t}\n\t}\n\n\t_getDisplays(callback) {\n\t\tif (navigator.getVRDisplays) {\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\t\t\t\tif (callback) callback(null, displays);\n\t\t\t});\n\t\t} else {\n\t\t\tif (callback) callback(new Error('WebVR not supported'));\n\t\t}\n\t}\n\n\t_addDisplay(vrDisplay) {\n\t\tif (this._index[vrDisplay.displayId]) return;\n\t\tvar display = new VrDisplay(this._app, vrDisplay);\n\t\tthis._index[display.id] = display;\n\t\tthis.displays.push(display);\n\t\tif (!this.display) this.display = display;\n\t\tthis.fire('displayconnect', display);\n\t}\n\n\t_onDisplayConnect(e) {\n\t\tif (e.detail && e.detail.display) {\n\t\t\tthis._addDisplay(e.detail.display);\n\t\t} else {\n\t\t\tthis._addDisplay(e.display);\n\t\t}\n\t}\n\n\t_onDisplayDisconnect(e) {\n\t\tvar id;\n\n\t\tif (e.detail && e.detail.display) {\n\t\t\tid = e.detail.display.displayId;\n\t\t} else {\n\t\t\tid = e.display.displayId;\n\t\t}\n\n\t\tvar display = this._index[id];\n\t\tif (!display) return;\n\t\tdisplay.destroy();\n\t\tdelete this._index[display.id];\n\t\tvar ind = this.displays.indexOf(display);\n\t\tthis.displays.splice(ind, 1);\n\n\t\tif (this.display === display) {\n\t\t\tif (this.displays.length) {\n\t\t\t\tthis.display = this.displays[0];\n\t\t\t} else {\n\t\t\t\tthis.display = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('displaydisconnect', display);\n\t}\n\n}\n\nVrManager.isSupported = typeof navigator !== 'undefined' ? !!navigator.getVRDisplays : false;\n\nconst XRTYPE_INLINE = 'inline';\nconst XRTYPE_VR = 'immersive-vr';\nconst XRTYPE_AR = 'immersive-ar';\nconst XRSPACE_VIEWER = 'viewer';\nconst XRSPACE_LOCAL = 'local';\nconst XRSPACE_LOCALFLOOR = 'local-floor';\nconst XRSPACE_BOUNDEDFLOOR = 'bounded-floor';\nconst XRSPACE_UNBOUNDED = 'unbounded';\nconst XRTARGETRAY_GAZE = 'gaze';\nconst XRTARGETRAY_SCREEN = 'screen';\nconst XRTARGETRAY_POINTER = 'tracked-pointer';\nconst XRHAND_NONE = 'none';\nconst XRHAND_LEFT = 'left';\nconst XRHAND_RIGHT = 'right';\nconst XRTRACKABLE_POINT = 'point';\nconst XRTRACKABLE_PLANE = 'plane';\nconst XRTRACKABLE_MESH = 'mesh';\nconst XRDEPTHSENSINGUSAGE_CPU = 'cpu-optimized';\nconst XRDEPTHSENSINGUSAGE_GPU = 'gpu-optimized';\nconst XRDEPTHSENSINGFORMAT_L8A8 = 'luminance-alpha';\nconst XRDEPTHSENSINGFORMAT_F32 = 'float32';\n\nconst poolVec3 = [];\nconst poolQuat = [];\n\nclass XrHitTestSource extends EventHandler {\n\tconstructor(manager, xrHitTestSource, transient) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._xrHitTestSource = xrHitTestSource;\n\t\tthis._transient = transient;\n\t}\n\n\tremove() {\n\t\tif (!this._xrHitTestSource) return;\n\t\tconst sources = this.manager.hitTest.sources;\n\t\tconst ind = sources.indexOf(this);\n\t\tif (ind !== -1) sources.splice(ind, 1);\n\t\tthis.onStop();\n\t}\n\n\tonStop() {\n\t\tthis._xrHitTestSource.cancel();\n\n\t\tthis._xrHitTestSource = null;\n\t\tthis.fire('remove');\n\t\tthis.manager.hitTest.fire('remove', this);\n\t}\n\n\tupdate(frame) {\n\t\tif (this._transient) {\n\t\t\tconst transientResults = frame.getHitTestResultsForTransientInput(this._xrHitTestSource);\n\n\t\t\tfor (let i = 0; i < transientResults.length; i++) {\n\t\t\t\tconst transientResult = transientResults[i];\n\t\t\t\tlet inputSource;\n\t\t\t\tif (transientResult.inputSource) inputSource = this.manager.input._getByInputSource(transientResult.inputSource);\n\t\t\t\tthis.updateHitResults(transientResult.results, inputSource);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateHitResults(frame.getHitTestResults(this._xrHitTestSource));\n\t\t}\n\t}\n\n\tupdateHitResults(results, inputSource) {\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tconst pose = results[i].getPose(this.manager._referenceSpace);\n\t\t\tlet position = poolVec3.pop();\n\t\t\tif (!position) position = new Vec3();\n\t\t\tposition.copy(pose.transform.position);\n\t\t\tlet rotation = poolQuat.pop();\n\t\t\tif (!rotation) rotation = new Quat();\n\t\t\trotation.copy(pose.transform.orientation);\n\t\t\tthis.fire('result', position, rotation, inputSource);\n\t\t\tthis.manager.hitTest.fire('result', this, position, rotation, inputSource);\n\t\t\tpoolVec3.push(position);\n\t\t\tpoolQuat.push(rotation);\n\t\t}\n\t}\n\n}\n\nclass XrHitTest extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._supported = !!(window.XRSession && window.XRSession.prototype.requestHitTestSource);\n\t\tthis._session = null;\n\t\tthis.sources = [];\n\n\t\tif (this._supported) {\n\t\t\tthis.manager.on('start', this._onSessionStart, this);\n\t\t\tthis.manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tif (this.manager.type !== XRTYPE_AR) return;\n\t\tthis._session = this.manager.session;\n\t}\n\n\t_onSessionEnd() {\n\t\tif (!this._session) return;\n\t\tthis._session = null;\n\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sources[i].onStop();\n\t\t}\n\n\t\tthis.sources = [];\n\t}\n\n\tisAvailable(callback, fireError) {\n\t\tlet err;\n\t\tif (!this._supported) err = new Error('XR HitTest is not supported');\n\t\tif (!this._session) err = new Error('XR Session is not started (1)');\n\t\tif (this.manager.type !== XRTYPE_AR) err = new Error('XR HitTest is available only for AR');\n\n\t\tif (err) {\n\t\t\tif (callback) callback(err);\n\t\t\tif (fireError) fireError.fire('error', err);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tstart(options) {\n\t\toptions = options || {};\n\t\tif (!this.isAvailable(options.callback, this)) return;\n\t\tif (!options.profile && !options.spaceType) options.spaceType = XRSPACE_VIEWER;\n\t\tlet xrRay;\n\t\tconst offsetRay = options.offsetRay;\n\t\tif (offsetRay) xrRay = new XRRay(new DOMPoint(offsetRay.origin.x, offsetRay.origin.y, offsetRay.origin.z), new DOMPoint(offsetRay.direction.x, offsetRay.direction.y, offsetRay.direction.z));\n\t\tconst callback = options.callback;\n\n\t\tif (options.spaceType) {\n\t\t\tthis._session.requestReferenceSpace(options.spaceType).then(referenceSpace => {\n\t\t\t\tif (!this._session) {\n\t\t\t\t\tconst err = new Error('XR Session is not started (2)');\n\t\t\t\t\tif (callback) callback(err);\n\t\t\t\t\tthis.fire('error', err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._session.requestHitTestSource({\n\t\t\t\t\tspace: referenceSpace,\n\t\t\t\t\tentityTypes: options.entityTypes || undefined,\n\t\t\t\t\toffsetRay: xrRay\n\t\t\t\t}).then(xrHitTestSource => {\n\t\t\t\t\tthis._onHitTestSource(xrHitTestSource, false, callback);\n\t\t\t\t}).catch(ex => {\n\t\t\t\t\tif (callback) callback(ex);\n\t\t\t\t\tthis.fire('error', ex);\n\t\t\t\t});\n\t\t\t}).catch(ex => {\n\t\t\t\tif (callback) callback(ex);\n\t\t\t\tthis.fire('error', ex);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._session.requestHitTestSourceForTransientInput({\n\t\t\t\tprofile: options.profile,\n\t\t\t\tentityTypes: options.entityTypes || undefined,\n\t\t\t\toffsetRay: xrRay\n\t\t\t}).then(xrHitTestSource => {\n\t\t\t\tthis._onHitTestSource(xrHitTestSource, true, callback);\n\t\t\t}).catch(ex => {\n\t\t\t\tif (callback) callback(ex);\n\t\t\t\tthis.fire('error', ex);\n\t\t\t});\n\t\t}\n\t}\n\n\t_onHitTestSource(xrHitTestSource, transient, callback) {\n\t\tif (!this._session) {\n\t\t\txrHitTestSource.cancel();\n\t\t\tconst err = new Error('XR Session is not started (3)');\n\t\t\tif (callback) callback(err);\n\t\t\tthis.fire('error', err);\n\t\t\treturn;\n\t\t}\n\n\t\tconst hitTestSource = new XrHitTestSource(this.manager, xrHitTestSource, transient);\n\t\tthis.sources.push(hitTestSource);\n\t\tif (callback) callback(null, hitTestSource);\n\t\tthis.fire('add', hitTestSource);\n\t}\n\n\tupdate(frame) {\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sources[i].update(frame);\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n}\n\nclass XrFinger {\n\tconstructor(index, hand) {\n\t\tthis._index = index;\n\t\tthis._hand = hand;\n\n\t\tthis._hand._fingers.push(this);\n\n\t\tthis._joints = [];\n\t\tthis._tip = null;\n\t}\n\n\tget index() {\n\t\treturn this._index;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget joints() {\n\t\treturn this._joints;\n\t}\n\n\tget tip() {\n\t\treturn this._tip;\n\t}\n\n}\n\nconst tipJointIds = window.XRHand ? ['thumb-tip', 'index-finger-tip', 'middle-finger-tip', 'ring-finger-tip', 'pinky-finger-tip'] : [];\nconst tipJointIdsIndex = {};\n\nfor (let i = 0; i < tipJointIds.length; i++) {\n\ttipJointIdsIndex[tipJointIds[i]] = true;\n}\n\nclass XrJoint {\n\tconstructor(index, id, hand, finger = null) {\n\t\tthis._index = index;\n\t\tthis._id = id;\n\t\tthis._hand = hand;\n\t\tthis._finger = finger;\n\t\tthis._wrist = id === 'wrist';\n\t\tthis._tip = this._finger && !!tipJointIdsIndex[id];\n\t\tthis._radius = null;\n\t\tthis._localTransform = new Mat4();\n\t\tthis._worldTransform = new Mat4();\n\t\tthis._localPosition = new Vec3();\n\t\tthis._localRotation = new Quat();\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t\tthis._dirtyLocal = true;\n\t}\n\n\tupdate(pose) {\n\t\tthis._dirtyLocal = true;\n\t\tthis._radius = pose.radius;\n\n\t\tthis._localPosition.copy(pose.transform.position);\n\n\t\tthis._localRotation.copy(pose.transform.orientation);\n\t}\n\n\t_updateTransforms() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = false;\n\n\t\t\tthis._localTransform.setTRS(this._localPosition, this._localRotation, Vec3.ONE);\n\t\t}\n\n\t\tconst manager = this._hand._manager;\n\t\tconst parent = manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tthis._worldTransform.mul2(parent.getWorldTransform(), this._localTransform);\n\t\t} else {\n\t\t\tthis._worldTransform.copy(this._localTransform);\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tthis._updateTransforms();\n\n\t\tthis._worldTransform.getTranslation(this._position);\n\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\tthis._updateTransforms();\n\n\t\tthis._rotation.setFromMat4(this._worldTransform);\n\n\t\treturn this._rotation;\n\t}\n\n\tget index() {\n\t\treturn this._index;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget finger() {\n\t\treturn this._finger;\n\t}\n\n\tget wrist() {\n\t\treturn this._wrist;\n\t}\n\n\tget tip() {\n\t\treturn this._tip;\n\t}\n\n\tget radius() {\n\t\treturn this._radius || 0.005;\n\t}\n\n}\n\nlet fingerJointIds = [];\nconst vecA$2 = new Vec3();\nconst vecB$2 = new Vec3();\nconst vecC = new Vec3();\n\nif (window.XRHand) {\n\tfingerJointIds = [['thumb-metacarpal', 'thumb-phalanx-proximal', 'thumb-phalanx-distal', 'thumb-tip'], ['index-finger-metacarpal', 'index-finger-phalanx-proximal', 'index-finger-phalanx-intermediate', 'index-finger-phalanx-distal', 'index-finger-tip'], ['middle-finger-metacarpal', 'middle-finger-phalanx-proximal', 'middle-finger-phalanx-intermediate', 'middle-finger-phalanx-distal', 'middle-finger-tip'], ['ring-finger-metacarpal', 'ring-finger-phalanx-proximal', 'ring-finger-phalanx-intermediate', 'ring-finger-phalanx-distal', 'ring-finger-tip'], ['pinky-finger-metacarpal', 'pinky-finger-phalanx-proximal', 'pinky-finger-phalanx-intermediate', 'pinky-finger-phalanx-distal', 'pinky-finger-tip']];\n}\n\nclass XrHand extends EventHandler {\n\tconstructor(inputSource) {\n\t\tsuper();\n\t\tconst xrHand = inputSource._xrInputSource.hand;\n\t\tthis._manager = inputSource._manager;\n\t\tthis._inputSource = inputSource;\n\t\tthis._tracking = false;\n\t\tthis._fingers = [];\n\t\tthis._joints = [];\n\t\tthis._jointsById = {};\n\t\tthis._tips = [];\n\t\tthis._wrist = null;\n\n\t\tif (xrHand.get('wrist')) {\n\t\t\tconst joint = new XrJoint(0, 'wrist', this, null);\n\t\t\tthis._wrist = joint;\n\n\t\t\tthis._joints.push(joint);\n\n\t\t\tthis._jointsById.wrist = joint;\n\t\t}\n\n\t\tfor (let f = 0; f < fingerJointIds.length; f++) {\n\t\t\tconst finger = new XrFinger(f, this);\n\n\t\t\tfor (let j = 0; j < fingerJointIds[f].length; j++) {\n\t\t\t\tconst jointId = fingerJointIds[f][j];\n\t\t\t\tif (!xrHand.get(jointId)) continue;\n\t\t\t\tconst joint = new XrJoint(j, jointId, this, finger);\n\n\t\t\t\tthis._joints.push(joint);\n\n\t\t\t\tthis._jointsById[jointId] = joint;\n\n\t\t\t\tif (joint.tip) {\n\t\t\t\t\tthis._tips.push(joint);\n\n\t\t\t\t\tfinger._tip = joint;\n\t\t\t\t}\n\n\t\t\t\tfinger._joints.push(joint);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tconst xrInputSource = this._inputSource._xrInputSource;\n\n\t\tfor (let j = 0; j < this._joints.length; j++) {\n\t\t\tconst joint = this._joints[j];\n\t\t\tconst jointSpace = xrInputSource.hand.get(joint._id);\n\n\t\t\tif (jointSpace) {\n\t\t\t\tlet pose;\n\t\t\t\tif (frame.session.visibilityState !== 'hidden') pose = frame.getJointPose(jointSpace, this._manager._referenceSpace);\n\n\t\t\t\tif (pose) {\n\t\t\t\t\tjoint.update(pose);\n\n\t\t\t\t\tif (joint.wrist && !this._tracking) {\n\t\t\t\t\t\tthis._tracking = true;\n\t\t\t\t\t\tthis.fire('tracking');\n\t\t\t\t\t}\n\t\t\t\t} else if (joint.wrist) {\n\t\t\t\t\tif (this._tracking) {\n\t\t\t\t\t\tthis._tracking = false;\n\t\t\t\t\t\tthis.fire('trackinglost');\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst j1 = this._jointsById['thumb-metacarpal'];\n\t\tconst j4 = this._jointsById['thumb-tip'];\n\t\tconst j6 = this._jointsById['index-finger-phalanx-proximal'];\n\t\tconst j9 = this._jointsById['index-finger-tip'];\n\t\tconst j16 = this._jointsById['ring-finger-phalanx-proximal'];\n\t\tconst j21 = this._jointsById['pinky-finger-phalanx-proximal'];\n\n\t\tif (j1 && j4 && j6 && j9 && j16 && j21) {\n\t\t\tthis._inputSource._dirtyRay = true;\n\n\t\t\tthis._inputSource._rayLocal.origin.lerp(j4._localPosition, j9._localPosition, 0.5);\n\n\t\t\tlet jointL = j1;\n\t\t\tlet jointR = j21;\n\n\t\t\tif (this._inputSource.handedness === XRHAND_LEFT) {\n\t\t\t\tconst t = jointL;\n\t\t\t\tjointL = jointR;\n\t\t\t\tjointR = t;\n\t\t\t}\n\n\t\t\tvecA$2.sub2(jointL._localPosition, this._wrist._localPosition);\n\t\t\tvecB$2.sub2(jointR._localPosition, this._wrist._localPosition);\n\t\t\tvecC.cross(vecA$2, vecB$2).normalize();\n\t\t\tvecA$2.lerp(j6._localPosition, j16._localPosition, 0.5);\n\t\t\tvecA$2.sub(this._wrist._localPosition).normalize();\n\n\t\t\tthis._inputSource._rayLocal.direction.lerp(vecC, vecA$2, 0.5).normalize();\n\t\t}\n\n\t\tconst squeezing = this._fingerIsClosed(1) && this._fingerIsClosed(2) && this._fingerIsClosed(3) && this._fingerIsClosed(4);\n\n\t\tif (squeezing) {\n\t\t\tif (!this._inputSource._squeezing) {\n\t\t\t\tthis._inputSource._squeezing = true;\n\n\t\t\t\tthis._inputSource.fire('squeezestart');\n\n\t\t\t\tthis._manager.input.fire('squeezestart', this._inputSource);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._inputSource._squeezing) {\n\t\t\t\tthis._inputSource._squeezing = false;\n\n\t\t\t\tthis._inputSource.fire('squeeze');\n\n\t\t\t\tthis._manager.input.fire('squeeze', this._inputSource);\n\n\t\t\t\tthis._inputSource.fire('squeezeend');\n\n\t\t\t\tthis._manager.input.fire('squeezeend', this._inputSource);\n\t\t\t}\n\t\t}\n\t}\n\n\t_fingerIsClosed(index) {\n\t\tconst finger = this._fingers[index];\n\t\tvecA$2.sub2(finger.joints[0]._localPosition, finger.joints[1]._localPosition).normalize();\n\t\tvecB$2.sub2(finger.joints[2]._localPosition, finger.joints[3]._localPosition).normalize();\n\t\treturn vecA$2.dot(vecB$2) < -0.8;\n\t}\n\n\tgetJointById(id) {\n\t\treturn this._jointsById[id] || null;\n\t}\n\n\tget fingers() {\n\t\treturn this._fingers;\n\t}\n\n\tget joints() {\n\t\treturn this._joints;\n\t}\n\n\tget tips() {\n\t\treturn this._tips;\n\t}\n\n\tget wrist() {\n\t\treturn this._wrist;\n\t}\n\n\tget tracking() {\n\t\treturn this._tracking;\n\t}\n\n}\n\nconst quat$1 = new Quat();\nlet ids$1 = 0;\n\nclass XrInputSource extends EventHandler {\n\tconstructor(manager, xrInputSource) {\n\t\tsuper();\n\t\tthis._id = ++ids$1;\n\t\tthis._manager = manager;\n\t\tthis._xrInputSource = xrInputSource;\n\t\tthis._ray = new Ray();\n\t\tthis._rayLocal = new Ray();\n\t\tthis._grip = false;\n\t\tthis._hand = null;\n\t\tif (xrInputSource.hand) this._hand = new XrHand(this);\n\t\tthis._localTransform = null;\n\t\tthis._worldTransform = null;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t\tthis._localPosition = null;\n\t\tthis._localRotation = null;\n\t\tthis._dirtyLocal = true;\n\t\tthis._selecting = false;\n\t\tthis._squeezing = false;\n\t\tthis._elementInput = true;\n\t\tthis._elementEntity = null;\n\t\tthis._hitTestSources = [];\n\t}\n\n\tupdate(frame) {\n\t\tif (this._hand) {\n\t\t\tthis._hand.update(frame);\n\t\t} else {\n\t\t\tif (this._xrInputSource.gripSpace) {\n\t\t\t\tconst gripPose = frame.getPose(this._xrInputSource.gripSpace, this._manager._referenceSpace);\n\n\t\t\t\tif (gripPose) {\n\t\t\t\t\tif (!this._grip) {\n\t\t\t\t\t\tthis._grip = true;\n\t\t\t\t\t\tthis._localTransform = new Mat4();\n\t\t\t\t\t\tthis._worldTransform = new Mat4();\n\t\t\t\t\t\tthis._localPosition = new Vec3();\n\t\t\t\t\t\tthis._localRotation = new Quat();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._dirtyLocal = true;\n\n\t\t\t\t\tthis._localPosition.copy(gripPose.transform.position);\n\n\t\t\t\t\tthis._localRotation.copy(gripPose.transform.orientation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst targetRayPose = frame.getPose(this._xrInputSource.targetRaySpace, this._manager._referenceSpace);\n\n\t\t\tif (targetRayPose) {\n\t\t\t\tthis._dirtyRay = true;\n\n\t\t\t\tthis._rayLocal.origin.copy(targetRayPose.transform.position);\n\n\t\t\t\tthis._rayLocal.direction.set(0, 0, -1);\n\n\t\t\t\tquat$1.copy(targetRayPose.transform.orientation);\n\t\t\t\tquat$1.transformVector(this._rayLocal.direction, this._rayLocal.direction);\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateTransforms() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = false;\n\n\t\t\tthis._localTransform.setTRS(this._localPosition, this._localRotation, Vec3.ONE);\n\t\t}\n\n\t\tconst parent = this._manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tthis._worldTransform.mul2(parent.getWorldTransform(), this._localTransform);\n\t\t} else {\n\t\t\tthis._worldTransform.copy(this._localTransform);\n\t\t}\n\t}\n\n\t_updateRayTransforms() {\n\t\tconst dirty = this._dirtyRay;\n\t\tthis._dirtyRay = false;\n\t\tconst parent = this._manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tconst parentTransform = this._manager.camera.parent.getWorldTransform();\n\n\t\t\tparentTransform.getTranslation(this._position);\n\n\t\t\tthis._rotation.setFromMat4(parentTransform);\n\n\t\t\tthis._rotation.transformVector(this._rayLocal.origin, this._ray.origin);\n\n\t\t\tthis._ray.origin.add(this._position);\n\n\t\t\tthis._rotation.transformVector(this._rayLocal.direction, this._ray.direction);\n\t\t} else if (dirty) {\n\t\t\tthis._ray.origin.copy(this._rayLocal.origin);\n\n\t\t\tthis._ray.direction.copy(this._rayLocal.direction);\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tif (!this._position) return null;\n\n\t\tthis._updateTransforms();\n\n\t\tthis._worldTransform.getTranslation(this._position);\n\n\t\treturn this._position;\n\t}\n\n\tgetLocalPosition() {\n\t\treturn this._localPosition;\n\t}\n\n\tgetRotation() {\n\t\tif (!this._rotation) return null;\n\n\t\tthis._updateTransforms();\n\n\t\tthis._rotation.setFromMat4(this._worldTransform);\n\n\t\treturn this._rotation;\n\t}\n\n\tgetLocalRotation() {\n\t\treturn this._localRotation;\n\t}\n\n\tgetOrigin() {\n\t\tthis._updateRayTransforms();\n\n\t\treturn this._ray.origin;\n\t}\n\n\tgetDirection() {\n\t\tthis._updateRayTransforms();\n\n\t\treturn this._ray.direction;\n\t}\n\n\thitTestStart(options = {}) {\n\t\toptions.profile = this._xrInputSource.profiles[0];\n\t\tconst callback = options.callback;\n\n\t\toptions.callback = (err, hitTestSource) => {\n\t\t\tif (hitTestSource) this.onHitTestSourceAdd(hitTestSource);\n\t\t\tif (callback) callback(err, hitTestSource);\n\t\t};\n\n\t\tthis._manager.hitTest.start(options);\n\t}\n\n\tonHitTestSourceAdd(hitTestSource) {\n\t\tthis._hitTestSources.push(hitTestSource);\n\n\t\tthis.fire('hittest:add', hitTestSource);\n\t\thitTestSource.on('result', function (position, rotation, inputSource) {\n\t\t\tif (inputSource !== this) return;\n\t\t\tthis.fire('hittest:result', hitTestSource, position, rotation);\n\t\t}, this);\n\t\thitTestSource.once('remove', function () {\n\t\t\tthis.onHitTestSourceRemove(hitTestSource);\n\t\t\tthis.fire('hittest:remove', hitTestSource);\n\t\t}, this);\n\t}\n\n\tonHitTestSourceRemove(hitTestSource) {\n\t\tconst ind = this._hitTestSources.indexOf(hitTestSource);\n\n\t\tif (ind !== -1) this._hitTestSources.splice(ind, 1);\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget inputSource() {\n\t\treturn this._xrInputSource;\n\t}\n\n\tget targetRayMode() {\n\t\treturn this._xrInputSource.targetRayMode;\n\t}\n\n\tget handedness() {\n\t\treturn this._xrInputSource.handedness;\n\t}\n\n\tget profiles() {\n\t\treturn this._xrInputSource.profiles;\n\t}\n\n\tget grip() {\n\t\treturn this._grip;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget gamepad() {\n\t\treturn this._xrInputSource.gamepad || null;\n\t}\n\n\tget selecting() {\n\t\treturn this._selecting;\n\t}\n\n\tget squeezing() {\n\t\treturn this._squeezing;\n\t}\n\n\tget elementInput() {\n\t\treturn this._elementInput;\n\t}\n\n\tset elementInput(value) {\n\t\tif (this._elementInput === value) return;\n\t\tthis._elementInput = value;\n\t\tif (!this._elementInput) this._elementEntity = null;\n\t}\n\n\tget elementEntity() {\n\t\treturn this._elementEntity;\n\t}\n\n\tget hitTestSources() {\n\t\treturn this._hitTestSources;\n\t}\n\n}\n\nclass XrInput extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._session = null;\n\t\tthis._inputSources = [];\n\n\t\tthis._onInputSourcesChangeEvt = evt => {\n\t\t\tthis._onInputSourcesChange(evt);\n\t\t};\n\n\t\tthis.manager.on('start', this._onSessionStart, this);\n\t\tthis.manager.on('end', this._onSessionEnd, this);\n\t}\n\n\t_onSessionStart() {\n\t\tthis._session = this.manager.session;\n\n\t\tthis._session.addEventListener('inputsourceschange', this._onInputSourcesChangeEvt);\n\n\t\tthis._session.addEventListener('select', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource.fire('select', evt);\n\t\t\tthis.fire('select', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('selectstart', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._selecting = true;\n\t\t\tinputSource.fire('selectstart', evt);\n\t\t\tthis.fire('selectstart', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('selectend', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._selecting = false;\n\t\t\tinputSource.fire('selectend', evt);\n\t\t\tthis.fire('selectend', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeeze', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource.fire('squeeze', evt);\n\t\t\tthis.fire('squeeze', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeezestart', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._squeezing = true;\n\t\t\tinputSource.fire('squeezestart', evt);\n\t\t\tthis.fire('squeezestart', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeezeend', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._squeezing = false;\n\t\t\tinputSource.fire('squeezeend', evt);\n\t\t\tthis.fire('squeezeend', inputSource, evt);\n\t\t});\n\n\t\tconst inputSources = this._session.inputSources;\n\n\t\tfor (let i = 0; i < inputSources.length; i++) {\n\t\t\tthis._addInputSource(inputSources[i]);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tlet i = this._inputSources.length;\n\n\t\twhile (i--) {\n\t\t\tconst inputSource = this._inputSources[i];\n\n\t\t\tthis._inputSources.splice(i, 1);\n\n\t\t\tinputSource.fire('remove');\n\t\t\tthis.fire('remove', inputSource);\n\t\t}\n\n\t\tthis._session.removeEventListener('inputsourceschange', this._onInputSourcesChangeEvt);\n\n\t\tthis._session = null;\n\t}\n\n\t_onInputSourcesChange(evt) {\n\t\tfor (let i = 0; i < evt.removed.length; i++) {\n\t\t\tthis._removeInputSource(evt.removed[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < evt.added.length; i++) {\n\t\t\tthis._addInputSource(evt.added[i]);\n\t\t}\n\t}\n\n\t_getByInputSource(xrInputSource) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tif (this._inputSources[i].inputSource === xrInputSource) {\n\t\t\t\treturn this._inputSources[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_addInputSource(xrInputSource) {\n\t\tif (this._getByInputSource(xrInputSource)) return;\n\t\tconst inputSource = new XrInputSource(this.manager, xrInputSource);\n\n\t\tthis._inputSources.push(inputSource);\n\n\t\tthis.fire('add', inputSource);\n\t}\n\n\t_removeInputSource(xrInputSource) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tif (this._inputSources[i].inputSource !== xrInputSource) continue;\n\t\t\tconst inputSource = this._inputSources[i];\n\n\t\t\tthis._inputSources.splice(i, 1);\n\n\t\t\tlet h = inputSource.hitTestSources.length;\n\n\t\t\twhile (h--) {\n\t\t\t\tinputSource.hitTestSources[h].remove();\n\t\t\t}\n\n\t\t\tinputSource.fire('remove');\n\t\t\tthis.fire('remove', inputSource);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tthis._inputSources[i].update(frame);\n\t\t}\n\t}\n\n\tget inputSources() {\n\t\treturn this._inputSources;\n\t}\n\n}\n\nconst vec3A = new Vec3();\nconst vec3B = new Vec3();\nconst mat4A = new Mat4();\nconst mat4B = new Mat4();\n\nclass XrLightEstimation extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = false;\n\t\tthis._available = false;\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t\tthis._intensity = 0;\n\t\tthis._rotation = new Quat();\n\t\tthis._color = new Color();\n\t\tthis._sphericalHarmonics = new Float32Array(27);\n\n\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t}\n\n\t_onSessionStart() {\n\t\tconst supported = !!this._manager.session.requestLightProbe;\n\t\tif (!supported) return;\n\t\tthis._supported = true;\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._supported = false;\n\t\tthis._available = false;\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t}\n\n\tstart() {\n\t\tlet err;\n\t\tif (!this._manager.session) err = new Error('XR session is not running');\n\t\tif (!err && this._manager.type !== XRTYPE_AR) err = new Error('XR session type is not AR');\n\t\tif (!err && !this._supported) err = new Error('light-estimation is not supported');\n\t\tif (!err && this._lightProbe || this._lightProbeRequested) err = new Error('light estimation is already requested');\n\n\t\tif (err) {\n\t\t\tthis.fire('error', err);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._lightProbeRequested = true;\n\n\t\tthis._manager.session.requestLightProbe().then(lightProbe => {\n\t\t\tconst wasRequested = this._lightProbeRequested;\n\t\t\tthis._lightProbeRequested = false;\n\n\t\t\tif (this._manager.active) {\n\t\t\t\tif (wasRequested) {\n\t\t\t\t\tthis._lightProbe = lightProbe;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.fire('error', new Error('XR session is not active'));\n\t\t\t}\n\t\t}).catch(ex => {\n\t\t\tthis._lightProbeRequested = false;\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\tend() {\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t\tthis._available = false;\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._lightProbe) return;\n\t\tconst lightEstimate = frame.getLightEstimate(this._lightProbe);\n\t\tif (!lightEstimate) return;\n\n\t\tif (!this._available) {\n\t\t\tthis._available = true;\n\t\t\tthis.fire('available');\n\t\t}\n\n\t\tconst pli = lightEstimate.primaryLightIntensity;\n\t\tthis._intensity = Math.max(1.0, Math.max(pli.x, Math.max(pli.y, pli.z)));\n\t\tvec3A.copy(pli).mulScalar(1 / this._intensity);\n\n\t\tthis._color.set(vec3A.x, vec3A.y, vec3A.z);\n\n\t\tvec3A.set(0, 0, 0);\n\t\tvec3B.copy(lightEstimate.primaryLightDirection);\n\t\tmat4A.setLookAt(vec3B, vec3A, Vec3.UP);\n\t\tmat4B.setFromAxisAngle(Vec3.RIGHT, 90);\n\t\tmat4A.mul(mat4B);\n\n\t\tthis._rotation.setFromMat4(mat4A);\n\n\t\tthis._sphericalHarmonics.set(lightEstimate.sphericalHarmonicsCoefficients);\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget intensity() {\n\t\treturn this._available ? this._intensity : null;\n\t}\n\n\tget color() {\n\t\treturn this._available ? this._color : null;\n\t}\n\n\tget rotation() {\n\t\treturn this._available ? this._rotation : null;\n\t}\n\n\tget sphericalHarmonics() {\n\t\treturn this._available ? this._sphericalHarmonics : null;\n\t}\n\n}\n\nclass XrTrackedImage extends EventHandler {\n\tconstructor(image, width) {\n\t\tsuper();\n\t\tthis._image = image;\n\t\tthis._bitmap = null;\n\t\tthis._width = width;\n\t\tthis._measuredWidth = 0;\n\t\tthis._trackable = false;\n\t\tthis._tracking = false;\n\t\tthis._emulated = false;\n\t\tthis._pose = null;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t}\n\n\tprepare() {\n\t\tif (this._bitmap) {\n\t\t\treturn {\n\t\t\t\timage: this._bitmap,\n\t\t\t\twidthInMeters: this._width\n\t\t\t};\n\t\t}\n\n\t\treturn createImageBitmap(this._image).then(bitmap => {\n\t\t\tthis._bitmap = bitmap;\n\t\t\treturn {\n\t\t\t\timage: this._bitmap,\n\t\t\t\twidthInMeters: this._width\n\t\t\t};\n\t\t});\n\t}\n\n\tdestroy() {\n\t\tthis._image = null;\n\t\tthis._pose = null;\n\n\t\tif (this._bitmap) {\n\t\t\tthis._bitmap.close();\n\n\t\t\tthis._bitmap = null;\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tif (this._pose) this._position.copy(this._pose.transform.position);\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\tif (this._pose) this._rotation.copy(this._pose.transform.orientation);\n\t\treturn this._rotation;\n\t}\n\n\tget image() {\n\t\treturn this._image;\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tset width(value) {\n\t\tthis._width = value;\n\t}\n\n\tget trackable() {\n\t\treturn this._trackable;\n\t}\n\n\tget tracking() {\n\t\treturn this._tracking;\n\t}\n\n\tget emulated() {\n\t\treturn this._emulated;\n\t}\n\n}\n\nclass XrImageTracking extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRImageTrackingResult;\n\t\tthis._available = false;\n\t\tthis._images = [];\n\n\t\tif (this._supported) {\n\t\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\tadd(image, width) {\n\t\tif (!this._supported || this._manager.active) return null;\n\t\tconst trackedImage = new XrTrackedImage(image, width);\n\n\t\tthis._images.push(trackedImage);\n\n\t\treturn trackedImage;\n\t}\n\n\tremove(trackedImage) {\n\t\tif (this._manager.active) return;\n\n\t\tconst ind = this._images.indexOf(trackedImage);\n\n\t\tif (ind !== -1) {\n\t\t\ttrackedImage.destroy();\n\n\t\t\tthis._images.splice(ind, 1);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tthis._manager.session.getTrackedImageScores().then(images => {\n\t\t\tthis._available = true;\n\n\t\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\t\tthis._images[i]._trackable = images[i] === 'trackable';\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('error', err);\n\t\t});\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._available = false;\n\n\t\tfor (let i = 0; i < this._images.length; i++) {\n\t\t\tthis._images[i]._pose = null;\n\t\t\tthis._images[i]._measuredWidth = 0;\n\n\t\t\tif (this._images[i]._tracking) {\n\t\t\t\tthis._images[i]._tracking = false;\n\n\t\t\t\tthis._images[i].fire('untracked');\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareImages(callback) {\n\t\tif (this._images.length) {\n\t\t\tPromise.all(this._images.map(function (trackedImage) {\n\t\t\t\treturn trackedImage.prepare();\n\t\t\t})).then(function (bitmaps) {\n\t\t\t\tcallback(null, bitmaps);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcallback(err, null);\n\t\t\t});\n\t\t} else {\n\t\t\tcallback(null, null);\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._available) return;\n\t\tconst results = frame.getImageTrackingResults();\n\t\tconst index = {};\n\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tindex[results[i].index] = results[i];\n\t\t\tconst trackedImage = this._images[results[i].index];\n\t\t\ttrackedImage._emulated = results[i].trackingState === 'emulated';\n\t\t\ttrackedImage._measuredWidth = results[i].measuredWidthInMeters;\n\t\t\ttrackedImage._dirtyTransform = true;\n\t\t\ttrackedImage._pose = frame.getPose(results[i].imageSpace, this._manager._referenceSpace);\n\t\t}\n\n\t\tfor (let i = 0; i < this._images.length; i++) {\n\t\t\tif (this._images[i]._tracking && !index[i]) {\n\t\t\t\tthis._images[i]._tracking = false;\n\n\t\t\t\tthis._images[i].fire('untracked');\n\t\t\t} else if (!this._images[i]._tracking && index[i]) {\n\t\t\t\tthis._images[i]._tracking = true;\n\n\t\t\t\tthis._images[i].fire('tracked');\n\t\t\t}\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget images() {\n\t\treturn this._images;\n\t}\n\n}\n\nclass XrDomOverlay {\n\tconstructor(manager) {\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRDOMOverlayState;\n\t\tthis._root = null;\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._supported && this._manager.active && this._manager._session.domOverlayState !== null;\n\t}\n\n\tget state() {\n\t\tif (!this._supported || !this._manager.active || !this._manager._session.domOverlayState) return null;\n\t\treturn this._manager._session.domOverlayState.type;\n\t}\n\n\tset root(value) {\n\t\tif (!this._supported || this._manager.active) return;\n\t\tthis._root = value;\n\t}\n\n\tget root() {\n\t\treturn this._root;\n\t}\n\n}\n\nclass XrDepthSensing extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._available = false;\n\t\tthis._depthInfoCpu = null;\n\t\tthis._depthInfoGpu = null;\n\t\tthis._usage = null;\n\t\tthis._dataFormat = null;\n\t\tthis._matrixDirty = false;\n\t\tthis._matrix = new Mat4();\n\t\tthis._emptyBuffer = new Uint8Array(32);\n\t\tthis._depthBuffer = null;\n\t\tthis._texture = new Texture(this._manager.app.graphicsDevice, {\n\t\t\tformat: PIXELFORMAT_L8_A8,\n\t\t\tmipmaps: false,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tminFilter: FILTER_LINEAR,\n\t\t\tmagFilter: FILTER_LINEAR\n\t\t});\n\n\t\tif (this.supported) {\n\t\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tconst session = this._manager.session;\n\n\t\ttry {\n\t\t\tthis._usage = session.depthUsage;\n\t\t\tthis._dataFormat = session.depthDataFormat;\n\t\t} catch (ex) {\n\t\t\tthis._usage = null;\n\t\t\tthis._dataFormat = null;\n\t\t\tthis._available = false;\n\t\t\tthis.fire('error', ex);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._depthInfoCpu = null;\n\t\tthis._depthInfoGpu = null;\n\t\tthis._usage = null;\n\t\tthis._dataFormat = null;\n\n\t\tif (this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\n\t\tthis._depthBuffer = null;\n\t\tthis._texture._width = 4;\n\t\tthis._texture._height = 4;\n\t\tthis._texture._levels[0] = this._emptyBuffer;\n\n\t\tthis._texture.upload();\n\t}\n\n\t_updateTexture() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\n\t\tif (depthInfo) {\n\t\t\tlet resized = false;\n\n\t\t\tif (depthInfo.width !== this._texture.width || depthInfo.height !== this._texture.height) {\n\t\t\t\tthis._texture._width = depthInfo.width;\n\t\t\t\tthis._texture._height = depthInfo.height;\n\t\t\t\tthis._matrixDirty = true;\n\t\t\t\tresized = true;\n\t\t\t}\n\n\t\t\tif (this._depthInfoCpu) {\n\t\t\t\tconst dataBuffer = this._depthInfoCpu.data;\n\t\t\t\tthis._depthBuffer = new Uint8Array(dataBuffer);\n\t\t\t\tthis._texture._levels[0] = this._depthBuffer;\n\n\t\t\t\tthis._texture.upload();\n\t\t\t} else if (this._depthInfoGpu) {\n\t\t\t\tthis._texture._levels[0] = this._depthInfoGpu.texture;\n\n\t\t\t\tthis._texture.upload();\n\t\t\t}\n\n\t\t\tif (resized) this.fire('resize', depthInfo.width, depthInfo.height);\n\t\t} else if (this._depthBuffer) {\n\t\t\tthis._depthBuffer = null;\n\t\t\tthis._texture._width = 4;\n\t\t\tthis._texture._height = 4;\n\t\t\tthis._texture._levels[0] = this._emptyBuffer;\n\n\t\t\tthis._texture.upload();\n\t\t}\n\t}\n\n\tupdate(frame, view) {\n\t\tif (!this._usage) return;\n\t\tlet depthInfoCpu = null;\n\t\tlet depthInfoGpu = null;\n\n\t\tif (this._usage === XRDEPTHSENSINGUSAGE_CPU && view) {\n\t\t\tdepthInfoCpu = frame.getDepthInformation(view);\n\t\t} else if (this._usage === XRDEPTHSENSINGUSAGE_GPU && view) {\n\t\t\tdepthInfoGpu = frame.getDepthInformation(view);\n\t\t}\n\n\t\tif (this._depthInfoCpu && !depthInfoCpu || !this._depthInfoCpu && depthInfoCpu || this.depthInfoGpu && !depthInfoGpu || !this._depthInfoGpu && depthInfoGpu) {\n\t\t\tthis._matrixDirty = true;\n\t\t}\n\n\t\tthis._depthInfoCpu = depthInfoCpu;\n\t\tthis._depthInfoGpu = depthInfoGpu;\n\n\t\tthis._updateTexture();\n\n\t\tif (this._matrixDirty) {\n\t\t\tthis._matrixDirty = false;\n\t\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\n\t\t\tif (depthInfo) {\n\t\t\t\tthis._matrix.data.set(depthInfo.normDepthBufferFromNormView.matrix);\n\t\t\t} else {\n\t\t\t\tthis._matrix.setIdentity();\n\t\t\t}\n\t\t}\n\n\t\tif ((this._depthInfoCpu || this._depthInfoGpu) && !this._available) {\n\t\t\tthis._available = true;\n\t\t\tthis.fire('available');\n\t\t} else if (!this._depthInfoCpu && !this._depthInfoGpu && this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\t}\n\n\tgetDepth(u, v) {\n\t\tif (!this._depthInfoCpu) return null;\n\t\treturn this._depthInfoCpu.getDepthInMeters(u, v);\n\t}\n\n\tget supported() {\n\t\treturn !!window.XRDepthInformation;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget usage() {\n\t\treturn this._usage;\n\t}\n\n\tget dataFormat() {\n\t\treturn this._dataFormat;\n\t}\n\n\tget width() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.width || 0;\n\t}\n\n\tget height() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.height || 0;\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tget uvMatrix() {\n\t\treturn this._matrix;\n\t}\n\n\tget rawValueToMeters() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.rawValueToMeters || 0;\n\t}\n\n}\n\nlet ids = 0;\n\nclass XrPlane extends EventHandler {\n\tconstructor(planeDetection, xrPlane) {\n\t\tsuper();\n\t\tthis._id = ++ids;\n\t\tthis._planeDetection = planeDetection;\n\t\tthis._manager = this._planeDetection._manager;\n\t\tthis._xrPlane = xrPlane;\n\t\tthis._lastChangedTime = this._xrPlane.lastChangedTime;\n\t\tthis._orientation = this._xrPlane.orientation;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t}\n\n\tdestroy() {\n\t\tthis.fire('remove');\n\t}\n\n\tupdate(frame) {\n\t\tconst pose = frame.getPose(this._xrPlane.planeSpace, this._manager._referenceSpace);\n\n\t\tif (pose) {\n\t\t\tthis._position.copy(pose.transform.position);\n\n\t\t\tthis._rotation.copy(pose.transform.orientation);\n\t\t}\n\n\t\tif (this._lastChangedTime !== this._xrPlane.lastChangedTime) {\n\t\t\tthis._lastChangedTime = this._xrPlane.lastChangedTime;\n\t\t\tthis.fire('change');\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\treturn this._rotation;\n\t}\n\n\tget id() {\n\t\treturn this.id;\n\t}\n\n\tget orientation() {\n\t\treturn this._orientation;\n\t}\n\n\tget points() {\n\t\treturn this._xrPlane.polygon;\n\t}\n\n}\n\nclass XrPlaneDetection extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRPlane;\n\t\tthis._available = false;\n\t\tthis._planesIndex = new Map();\n\t\tthis._planes = null;\n\n\t\tif (this._supported) {\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tif (this._planes) {\n\t\t\tfor (let i = 0; i < this._planes.length; i++) {\n\t\t\t\tthis._planes[i].destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis._planesIndex.clear();\n\n\t\tthis._planes = null;\n\n\t\tif (this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tlet detectedPlanes;\n\n\t\tif (!this._available) {\n\t\t\ttry {\n\t\t\t\tdetectedPlanes = frame.detectedPlanes;\n\t\t\t\tthis._planes = [];\n\t\t\t\tthis._available = true;\n\t\t\t\tthis.fire('available');\n\t\t\t} catch (ex) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tdetectedPlanes = frame.detectedPlanes;\n\t\t}\n\n\t\tfor (const [xrPlane, plane] of this._planesIndex) {\n\t\t\tif (detectedPlanes.has(xrPlane)) continue;\n\n\t\t\tthis._planesIndex.delete(xrPlane);\n\n\t\t\tthis._planes.splice(this._planes.indexOf(plane), 1);\n\n\t\t\tplane.destroy();\n\t\t\tthis.fire('remove', plane);\n\t\t}\n\n\t\tfor (const xrPlane of detectedPlanes) {\n\t\t\tlet plane = this._planesIndex.get(xrPlane);\n\n\t\t\tif (!plane) {\n\t\t\t\tplane = new XrPlane(this, xrPlane);\n\n\t\t\t\tthis._planesIndex.set(xrPlane, plane);\n\n\t\t\t\tthis._planes.push(plane);\n\n\t\t\t\tplane.update(frame);\n\t\t\t\tthis.fire('add', plane);\n\t\t\t} else {\n\t\t\t\tplane.update(frame);\n\t\t\t}\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget planes() {\n\t\treturn this._planes;\n\t}\n\n}\n\nclass XrManager extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis._supported = !!navigator.xr;\n\t\tthis._available = {};\n\t\tthis._available[XRTYPE_INLINE] = false;\n\t\tthis._available[XRTYPE_VR] = false;\n\t\tthis._available[XRTYPE_AR] = false;\n\t\tthis._type = null;\n\t\tthis._spaceType = null;\n\t\tthis._session = null;\n\t\tthis._baseLayer = null;\n\t\tthis._referenceSpace = null;\n\t\tthis.depthSensing = new XrDepthSensing(this);\n\t\tthis.domOverlay = new XrDomOverlay(this);\n\t\tthis.hitTest = new XrHitTest(this);\n\t\tthis.imageTracking = new XrImageTracking(this);\n\t\tthis.planeDetection = new XrPlaneDetection(this);\n\t\tthis.input = new XrInput(this);\n\t\tthis.lightEstimation = new XrLightEstimation(this);\n\t\tthis._camera = null;\n\t\tthis.views = [];\n\t\tthis.viewsPool = [];\n\t\tthis._localPosition = new Vec3();\n\t\tthis._localRotation = new Quat();\n\t\tthis._depthNear = 0.1;\n\t\tthis._depthFar = 1000;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tif (this._supported) {\n\t\t\tnavigator.xr.addEventListener('devicechange', () => {\n\t\t\t\tthis._deviceAvailabilityCheck();\n\t\t\t});\n\n\t\t\tthis._deviceAvailabilityCheck();\n\t\t}\n\t}\n\n\tstart(camera, type, spaceType, options) {\n\t\tlet callback = options;\n\t\tif (typeof options === 'object') callback = options.callback;\n\n\t\tif (!this._available[type]) {\n\t\t\tif (callback) callback(new Error('XR is not available'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._session) {\n\t\t\tif (callback) callback(new Error('XR session is already started'));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._camera = camera;\n\t\tthis._camera.camera.xr = this;\n\t\tthis._type = type;\n\t\tthis._spaceType = spaceType;\n\n\t\tthis._setClipPlanes(camera.nearClip, camera.farClip);\n\n\t\tconst opts = {\n\t\t\trequiredFeatures: [spaceType],\n\t\t\toptionalFeatures: []\n\t\t};\n\n\t\tif (type === XRTYPE_AR) {\n\t\t\topts.optionalFeatures.push('light-estimation');\n\t\t\topts.optionalFeatures.push('hit-test');\n\n\t\t\tif (options) {\n\t\t\t\tif (options.imageTracking && this.imageTracking.supported) opts.optionalFeatures.push('image-tracking');\n\t\t\t\tif (options.planeDetection) opts.optionalFeatures.push('plane-detection');\n\t\t\t}\n\n\t\t\tif (this.domOverlay.supported && this.domOverlay.root) {\n\t\t\t\topts.optionalFeatures.push('dom-overlay');\n\t\t\t\topts.domOverlay = {\n\t\t\t\t\troot: this.domOverlay.root\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (options && options.depthSensing && this.depthSensing.supported) {\n\t\t\t\topts.optionalFeatures.push('depth-sensing');\n\t\t\t\tconst usagePreference = [XRDEPTHSENSINGUSAGE_CPU];\n\t\t\t\tconst dataFormatPreference = [XRDEPTHSENSINGFORMAT_L8A8];\n\n\t\t\t\tif (options.depthSensing.usagePreference) {\n\t\t\t\t\tconst ind = usagePreference.indexOf(options.depthSensing.usagePreference);\n\t\t\t\t\tif (ind !== -1) usagePreference.splice(ind, 1);\n\t\t\t\t\tusagePreference.unshift(options.depthSensing.usagePreference);\n\t\t\t\t}\n\n\t\t\t\tif (options.depthSensing.dataFormatPreference) {\n\t\t\t\t\tconst ind = dataFormatPreference.indexOf(options.depthSensing.dataFormatPreference);\n\t\t\t\t\tif (ind !== -1) dataFormatPreference.splice(ind, 1);\n\t\t\t\t\tdataFormatPreference.unshift(options.depthSensing.dataFormatPreference);\n\t\t\t\t}\n\n\t\t\t\topts.depthSensing = {\n\t\t\t\t\tusagePreference: usagePreference,\n\t\t\t\t\tdataFormatPreference: dataFormatPreference\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (type === XRTYPE_VR) {\n\t\t\topts.optionalFeatures.push('hand-tracking');\n\t\t}\n\n\t\tif (options && options.optionalFeatures) opts.optionalFeatures = opts.optionalFeatures.concat(options.optionalFeatures);\n\n\t\tif (this.imageTracking.supported && this.imageTracking.images.length) {\n\t\t\tthis.imageTracking.prepareImages((err, trackedImages) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (callback) callback(err);\n\t\t\t\t\tthis.fire('error', err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (trackedImages !== null) opts.trackedImages = trackedImages;\n\n\t\t\t\tthis._onStartOptionsReady(type, spaceType, opts, callback);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._onStartOptionsReady(type, spaceType, opts, callback);\n\t\t}\n\t}\n\n\t_onStartOptionsReady(type, spaceType, options, callback) {\n\t\tnavigator.xr.requestSession(type, options).then(session => {\n\t\t\tthis._onSessionStart(session, spaceType, callback);\n\t\t}).catch(ex => {\n\t\t\tthis._camera.camera.xr = null;\n\t\t\tthis._camera = null;\n\t\t\tthis._type = null;\n\t\t\tthis._spaceType = null;\n\t\t\tif (callback) callback(ex);\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\tend(callback) {\n\t\tif (!this._session) {\n\t\t\tif (callback) callback(new Error('XR Session is not initialized'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (callback) this.once('end', callback);\n\n\t\tthis._session.end();\n\t}\n\n\tisAvailable(type) {\n\t\treturn this._available[type];\n\t}\n\n\t_deviceAvailabilityCheck() {\n\t\tfor (const key in this._available) {\n\t\t\tthis._sessionSupportCheck(key);\n\t\t}\n\t}\n\n\t_sessionSupportCheck(type) {\n\t\tnavigator.xr.isSessionSupported(type).then(available => {\n\t\t\tif (this._available[type] === available) return;\n\t\t\tthis._available[type] = available;\n\t\t\tthis.fire('available', type, available);\n\t\t\tthis.fire('available:' + type, available);\n\t\t}).catch(ex => {\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\t_onSessionStart(session, spaceType, callback) {\n\t\tlet failed = false;\n\t\tthis._session = session;\n\n\t\tconst onVisibilityChange = () => {\n\t\t\tthis.fire('visibility:change', session.visibilityState);\n\t\t};\n\n\t\tconst onClipPlanesChange = () => {\n\t\t\tthis._setClipPlanes(this._camera.nearClip, this._camera.farClip);\n\t\t};\n\n\t\tconst onEnd = () => {\n\t\t\tthis._session = null;\n\t\t\tthis._referenceSpace = null;\n\t\t\tthis.views = [];\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\t\tthis._type = null;\n\t\t\tthis._spaceType = null;\n\n\t\t\tif (this._camera) {\n\t\t\t\tthis._camera.off('set_nearClip', onClipPlanesChange);\n\n\t\t\t\tthis._camera.off('set_farClip', onClipPlanesChange);\n\n\t\t\t\tthis._camera.camera.xr = null;\n\t\t\t\tthis._camera = null;\n\t\t\t}\n\n\t\t\tsession.removeEventListener('end', onEnd);\n\t\t\tsession.removeEventListener('visibilitychange', onVisibilityChange);\n\t\t\tif (!failed) this.fire('end');\n\t\t\tthis.app.tick();\n\t\t};\n\n\t\tsession.addEventListener('end', onEnd);\n\t\tsession.addEventListener('visibilitychange', onVisibilityChange);\n\n\t\tthis._camera.on('set_nearClip', onClipPlanesChange);\n\n\t\tthis._camera.on('set_farClip', onClipPlanesChange);\n\n\t\tthis._baseLayer = new XRWebGLLayer(session, this.app.graphicsDevice.gl);\n\t\tsession.updateRenderState({\n\t\t\tbaseLayer: this._baseLayer,\n\t\t\tdepthNear: this._depthNear,\n\t\t\tdepthFar: this._depthFar\n\t\t});\n\t\tsession.requestReferenceSpace(spaceType).then(referenceSpace => {\n\t\t\tthis._referenceSpace = referenceSpace;\n\t\t\tthis.app.tick();\n\t\t\tif (callback) callback(null);\n\t\t\tthis.fire('start');\n\t\t}).catch(ex => {\n\t\t\tfailed = true;\n\t\t\tsession.end();\n\t\t\tif (callback) callback(ex);\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\t_setClipPlanes(near, far) {\n\t\tif (this._depthNear === near && this._depthFar === far) return;\n\t\tthis._depthNear = near;\n\t\tthis._depthFar = far;\n\t\tif (!this._session) return;\n\n\t\tthis._session.updateRenderState({\n\t\t\tdepthNear: this._depthNear,\n\t\t\tdepthFar: this._depthFar\n\t\t});\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._session) return;\n\t\tconst width = frame.session.renderState.baseLayer.framebufferWidth;\n\t\tconst height = frame.session.renderState.baseLayer.framebufferHeight;\n\n\t\tif (this._width !== width || this._height !== height) {\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t\tthis.app.graphicsDevice.setResolution(width, height);\n\t\t}\n\n\t\tconst pose = frame.getViewerPose(this._referenceSpace);\n\t\tconst lengthNew = pose ? pose.views.length : 0;\n\n\t\tif (lengthNew > this.views.length) {\n\t\t\tfor (let i = 0; i <= lengthNew - this.views.length; i++) {\n\t\t\t\tlet view = this.viewsPool.pop();\n\n\t\t\t\tif (!view) {\n\t\t\t\t\tview = {\n\t\t\t\t\t\tviewport: new Vec4(),\n\t\t\t\t\t\tprojMat: new Mat4(),\n\t\t\t\t\t\tviewMat: new Mat4(),\n\t\t\t\t\t\tviewOffMat: new Mat4(),\n\t\t\t\t\t\tviewInvMat: new Mat4(),\n\t\t\t\t\t\tviewInvOffMat: new Mat4(),\n\t\t\t\t\t\tprojViewOffMat: new Mat4(),\n\t\t\t\t\t\tviewMat3: new Mat3(),\n\t\t\t\t\t\tposition: new Float32Array(3),\n\t\t\t\t\t\trotation: new Quat()\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.views.push(view);\n\t\t\t}\n\t\t} else if (lengthNew <= this.views.length) {\n\t\t\tfor (let i = 0; i < this.views.length - lengthNew; i++) {\n\t\t\t\tthis.viewsPool.push(this.views.pop());\n\t\t\t}\n\t\t}\n\n\t\tif (pose) {\n\t\t\tconst posePosition = pose.transform.position;\n\t\t\tconst poseOrientation = pose.transform.orientation;\n\n\t\t\tthis._localPosition.set(posePosition.x, posePosition.y, posePosition.z);\n\n\t\t\tthis._localRotation.set(poseOrientation.x, poseOrientation.y, poseOrientation.z, poseOrientation.w);\n\n\t\t\tconst layer = frame.session.renderState.baseLayer;\n\n\t\t\tfor (let i = 0; i < pose.views.length; i++) {\n\t\t\t\tconst viewRaw = pose.views[i];\n\t\t\t\tconst view = this.views[i];\n\t\t\t\tconst viewport = layer.getViewport(viewRaw);\n\t\t\t\tview.viewport.x = viewport.x;\n\t\t\t\tview.viewport.y = viewport.y;\n\t\t\t\tview.viewport.z = viewport.width;\n\t\t\t\tview.viewport.w = viewport.height;\n\t\t\t\tview.projMat.set(viewRaw.projectionMatrix);\n\t\t\t\tview.viewMat.set(viewRaw.transform.inverse.matrix);\n\t\t\t\tview.viewInvMat.set(viewRaw.transform.matrix);\n\t\t\t}\n\t\t}\n\n\t\tthis._camera.camera._node.setLocalPosition(this._localPosition);\n\n\t\tthis._camera.camera._node.setLocalRotation(this._localRotation);\n\n\t\tthis.input.update(frame);\n\n\t\tif (this._type === XRTYPE_AR) {\n\t\t\tif (this.hitTest.supported) this.hitTest.update(frame);\n\t\t\tif (this.lightEstimation.supported) this.lightEstimation.update(frame);\n\t\t\tif (this.depthSensing.supported) this.depthSensing.update(frame, pose && pose.views[0]);\n\t\t\tif (this.imageTracking.supported) this.imageTracking.update(frame);\n\t\t\tif (this.planeDetection.supported) this.planeDetection.update(frame);\n\t\t}\n\n\t\tthis.fire('update', frame);\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget active() {\n\t\treturn !!this._session;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tget spaceType() {\n\t\treturn this._spaceType;\n\t}\n\n\tget session() {\n\t\treturn this._session;\n\t}\n\n\tget visibilityState() {\n\t\tif (!this._session) return null;\n\t\treturn this._session.visibilityState;\n\t}\n\n\tget camera() {\n\t\treturn this._camera ? this._camera.entity : null;\n\t}\n\n}\n\nclass Component extends EventHandler {\n\tconstructor(system, entity) {\n\t\tsuper();\n\t\tthis.system = system;\n\t\tthis.entity = entity;\n\n\t\tif (this.system.schema && !this._accessorsBuilt) {\n\t\t\tthis.buildAccessors(this.system.schema);\n\t\t}\n\n\t\tthis.on(\"set\", function (name, oldValue, newValue) {\n\t\t\tthis.fire(\"set_\" + name, name, oldValue, newValue);\n\t\t});\n\t\tthis.on('set_enabled', this.onSetEnabled, this);\n\t}\n\n\tstatic _buildAccessors(obj, schema) {\n\t\tschema.forEach(function (descriptor) {\n\t\t\tvar name = typeof descriptor === 'object' ? descriptor.name : descriptor;\n\t\t\tObject.defineProperty(obj, name, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.data[name];\n\t\t\t\t},\n\t\t\t\tset: function (value) {\n\t\t\t\t\tvar data = this.data;\n\t\t\t\t\tvar oldValue = data[name];\n\t\t\t\t\tdata[name] = value;\n\t\t\t\t\tthis.fire('set', name, oldValue, value);\n\t\t\t\t},\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t});\n\t\tobj._accessorsBuilt = true;\n\t}\n\n\tbuildAccessors(schema) {\n\t\tComponent._buildAccessors(this, schema);\n\t}\n\n\tonSetEnabled(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.entity.enabled) {\n\t\t\t\tif (newValue) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t} else {\n\t\t\t\t\tthis.onDisable();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {}\n\n\tonDisable() {}\n\n\tonPostStateChange() {}\n\n\tget data() {\n\t\tvar record = this.system.store[this.entity.getGuid()];\n\t\treturn record ? record.data : null;\n\t}\n\n}\n\nclass ComponentSystem extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis.store = {};\n\t\tthis.schema = [];\n\t}\n\n\tstatic _helper(a, p) {\n\t\tfor (var i = 0, l = a.length; i < l; i++) {\n\t\t\ta[i].f.call(a[i].s, p);\n\t\t}\n\t}\n\n\tstatic initialize(root) {\n\t\tthis._helper(this._init, root);\n\t}\n\n\tstatic postInitialize(root) {\n\t\tthis._helper(this._postInit, root);\n\n\t\tthis.fire('postinitialize', root);\n\t}\n\n\tstatic update(dt, inTools) {\n\t\tthis._helper(inTools ? this._toolsUpdate : this._update, dt);\n\t}\n\n\tstatic animationUpdate(dt, inTools) {\n\t\tthis._helper(this._animationUpdate, dt);\n\t}\n\n\tstatic fixedUpdate(dt, inTools) {\n\t\tthis._helper(this._fixedUpdate, dt);\n\t}\n\n\tstatic postUpdate(dt, inTools) {\n\t\tthis._helper(this._postUpdate, dt);\n\t}\n\n\tstatic bind(event, func, scope) {\n\t\tswitch (event) {\n\t\t\tcase 'initialize':\n\t\t\t\tthis._init.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postInitialize':\n\t\t\t\tthis._postInit.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update':\n\t\t\t\tthis._update.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'animationUpdate':\n\t\t\t\tthis._animationUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postUpdate':\n\t\t\t\tthis._postUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'fixedUpdate':\n\t\t\t\tthis._fixedUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'toolsUpdate':\n\t\t\t\tthis._toolsUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error('Component System does not support event', event);\n\t\t}\n\t}\n\n\tstatic _erase(a, f, s) {\n\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\tif (a[i].f === f && a[i].s === s) {\n\t\t\t\ta.splice(i--, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic unbind(event, func, scope) {\n\t\tswitch (event) {\n\t\t\tcase 'initialize':\n\t\t\t\tthis._erase(this._init, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postInitialize':\n\t\t\t\tthis._erase(this._postInit, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update':\n\t\t\t\tthis._erase(this._update, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'animationUpdate':\n\t\t\t\tthis._erase(this._animationUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postUpdate':\n\t\t\t\tthis._erase(this._postUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'fixedUpdate':\n\t\t\t\tthis._erase(this._fixedUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'toolsUpdate':\n\t\t\t\tthis._erase(this._toolsUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error('Component System does not support event', event);\n\t\t}\n\t}\n\n\taddComponent(entity, data) {\n\t\tvar component = new this.ComponentType(this, entity);\n\t\tvar componentData = new this.DataType();\n\t\tdata = data || {};\n\t\tthis.store[entity.getGuid()] = {\n\t\t\tentity: entity,\n\t\t\tdata: componentData\n\t\t};\n\t\tentity[this.id] = component;\n\t\tentity.c[this.id] = component;\n\t\tthis.initializeComponentData(component, data, []);\n\t\tthis.fire('add', entity, component);\n\t\treturn component;\n\t}\n\n\tremoveComponent(entity) {\n\t\tvar record = this.store[entity.getGuid()];\n\t\tvar component = entity.c[this.id];\n\t\tthis.fire('beforeremove', entity, component);\n\t\tdelete this.store[entity.getGuid()];\n\t\tdelete entity[this.id];\n\t\tdelete entity.c[this.id];\n\t\tthis.fire('remove', entity, record.data);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar src = this.store[entity.getGuid()];\n\t\treturn this.addComponent(clone, src.data);\n\t}\n\n\tinitializeComponentData(component, data = {}, properties) {\n\t\tvar descriptor;\n\t\tvar name, type, value;\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tdescriptor = properties[i];\n\n\t\t\tif (typeof descriptor === 'object') {\n\t\t\t\tname = descriptor.name;\n\t\t\t\ttype = descriptor.type;\n\t\t\t} else {\n\t\t\t\tname = descriptor;\n\t\t\t\ttype = undefined;\n\t\t\t}\n\n\t\t\tvalue = data[name];\n\n\t\t\tif (value !== undefined) {\n\t\t\t\tif (type !== undefined) {\n\t\t\t\t\tvalue = convertValue(value, type);\n\t\t\t\t}\n\n\t\t\t\tcomponent[name] = value;\n\t\t\t} else {\n\t\t\t\tcomponent[name] = component.data[name];\n\t\t\t}\n\t\t}\n\n\t\tif (component.enabled && component.entity.enabled) {\n\t\t\tcomponent.onEnable();\n\t\t}\n\t}\n\n\tgetPropertiesOfType(type) {\n\t\tvar matchingProperties = [];\n\t\tvar schema = this.schema || [];\n\t\tschema.forEach(function (descriptor) {\n\t\t\tif (descriptor && typeof descriptor === 'object' && descriptor.type === type) {\n\t\t\t\tmatchingProperties.push(descriptor);\n\t\t\t}\n\t\t});\n\t\treturn matchingProperties;\n\t}\n\n\tdestroy() {\n\t\tthis.off();\n\t}\n\n}\n\nComponentSystem._init = [];\nComponentSystem._postInit = [];\nComponentSystem._toolsUpdate = [];\nComponentSystem._update = [];\nComponentSystem._animationUpdate = [];\nComponentSystem._fixedUpdate = [];\nComponentSystem._postUpdate = [];\n\nfunction convertValue(value, type) {\n\tif (!value) {\n\t\treturn value;\n\t}\n\n\tswitch (type) {\n\t\tcase 'rgb':\n\t\t\tif (value instanceof Color) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Color(value[0], value[1], value[2]);\n\n\t\tcase 'rgba':\n\t\t\tif (value instanceof Color) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Color(value[0], value[1], value[2], value[3]);\n\n\t\tcase 'vec2':\n\t\t\tif (value instanceof Vec2) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec2(value[0], value[1]);\n\n\t\tcase 'vec3':\n\t\t\tif (value instanceof Vec3) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec3(value[0], value[1], value[2]);\n\n\t\tcase 'vec4':\n\t\t\tif (value instanceof Vec4) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec4(value[0], value[1], value[2], value[3]);\n\n\t\tcase 'boolean':\n\t\tcase 'number':\n\t\tcase 'string':\n\t\t\treturn value;\n\n\t\tcase 'entity':\n\t\t\treturn value;\n\n\t\tdefault:\n\t\t\tthrow new Error('Could not convert unhandled type: ' + type);\n\t}\n}\n\nevents.attach(ComponentSystem);\n\nComponentSystem.destroy = function () {\n\tComponentSystem.off('initialize');\n\tComponentSystem.off('postInitialize');\n\tComponentSystem.off('toolsUpdate');\n\tComponentSystem.off('update');\n\tComponentSystem.off('animationUpdate');\n\tComponentSystem.off('fixedUpdate');\n\tComponentSystem.off('postUpdate');\n\tComponentSystem._init = [];\n\tComponentSystem._postInit = [];\n\tComponentSystem._toolsUpdate = [];\n\tComponentSystem._update = [];\n\tComponentSystem._animationUpdate = [];\n\tComponentSystem._fixedUpdate = [];\n\tComponentSystem._postUpdate = [];\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nclass AnimCache {\n\tconstructor() {\n\t\tthis._left = Infinity;\n\t\tthis._right = -Infinity;\n\t\tthis._len = 0;\n\t\tthis._recip = 0;\n\t\tthis._p0 = 0;\n\t\tthis._p1 = 0;\n\t\tthis._t = 0;\n\t\tthis._hermite = {\n\t\t\tvalid: false,\n\t\t\tp0: 0,\n\t\t\tm0: 0,\n\t\t\tp1: 0,\n\t\t\tm1: 0\n\t\t};\n\t}\n\n\tupdate(time, input) {\n\t\tif (time < this._left || time >= this._right) {\n\t\t\tvar len = input.length;\n\n\t\t\tif (!len) {\n\t\t\t\tthis._left = -Infinity;\n\t\t\t\tthis._right = Infinity;\n\t\t\t\tthis._len = 0;\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = 0;\n\t\t\t} else {\n\t\t\t\tif (time < input[0]) {\n\t\t\t\t\tthis._left = -Infinity;\n\t\t\t\t\tthis._right = input[0];\n\t\t\t\t\tthis._len = 0;\n\t\t\t\t\tthis._recip = 0;\n\t\t\t\t\tthis._p0 = this._p1 = 0;\n\t\t\t\t} else if (time >= input[len - 1]) {\n\t\t\t\t\tthis._left = input[len - 1];\n\t\t\t\t\tthis._right = Infinity;\n\t\t\t\t\tthis._len = 0;\n\t\t\t\t\tthis._recip = 0;\n\t\t\t\t\tthis._p0 = this._p1 = len - 1;\n\t\t\t\t} else {\n\t\t\t\t\tvar index = this._findKey(time, input);\n\n\t\t\t\t\tthis._left = input[index];\n\t\t\t\t\tthis._right = input[index + 1];\n\t\t\t\t\tthis._len = this._right - this._left;\n\t\t\t\t\tvar diff = 1.0 / this._len;\n\t\t\t\t\tthis._recip = isFinite(diff) ? diff : 0;\n\t\t\t\t\tthis._p0 = index;\n\t\t\t\t\tthis._p1 = index + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._t = this._recip === 0 ? 0 : (time - this._left) * this._recip;\n\t\tthis._hermite.valid = false;\n\t}\n\n\t_findKey(time, input) {\n\t\tvar index = 0;\n\n\t\twhile (time >= input[index + 1]) {\n\t\t\tindex++;\n\t\t}\n\n\t\treturn index;\n\t}\n\n\teval(result, interpolation, output) {\n\t\tvar data = output._data;\n\t\tvar comp = output._components;\n\t\tvar idx0 = this._p0 * comp;\n\t\tvar i;\n\n\t\tif (interpolation === INTERPOLATION_STEP) {\n\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\tresult[i] = data[idx0 + i];\n\t\t\t}\n\t\t} else {\n\t\t\tvar t = this._t;\n\t\t\tvar idx1 = this._p1 * comp;\n\n\t\t\tswitch (interpolation) {\n\t\t\t\tcase INTERPOLATION_LINEAR:\n\t\t\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\t\t\tresult[i] = math.lerp(data[idx0 + i], data[idx1 + i], t);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase INTERPOLATION_CUBIC:\n\t\t\t\t\tvar hermite = this._hermite;\n\n\t\t\t\t\tif (!hermite.valid) {\n\t\t\t\t\t\tvar t2 = t * t;\n\t\t\t\t\t\tvar twot = t + t;\n\t\t\t\t\t\tvar omt = 1 - t;\n\t\t\t\t\t\tvar omt2 = omt * omt;\n\t\t\t\t\t\thermite.valid = true;\n\t\t\t\t\t\thermite.p0 = (1 + twot) * omt2;\n\t\t\t\t\t\thermite.m0 = t * omt2;\n\t\t\t\t\t\thermite.p1 = t2 * (3 - twot);\n\t\t\t\t\t\thermite.m1 = t2 * (t - 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar p0 = (this._p0 * 3 + 1) * comp;\n\t\t\t\t\tvar m0 = (this._p0 * 3 + 2) * comp;\n\t\t\t\t\tvar p1 = (this._p1 * 3 + 1) * comp;\n\t\t\t\t\tvar m1 = (this._p1 * 3 + 0) * comp;\n\n\t\t\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\t\t\tresult[i] = hermite.p0 * data[p0 + i] + hermite.m0 * data[m0 + i] * this._len + hermite.p1 * data[p1 + i] + hermite.m1 * data[m1 + i] * this._len;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimSnapshot {\n\tconstructor(animTrack) {\n\t\tthis._name = animTrack.name + 'Snapshot';\n\t\tthis._time = -1;\n\t\tthis._cache = [];\n\t\tthis._results = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < animTrack._inputs.length; ++i) {\n\t\t\tthis._cache[i] = new AnimCache();\n\t\t}\n\n\t\tvar curves = animTrack._curves;\n\t\tvar outputs = animTrack._outputs;\n\n\t\tfor (i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar output = outputs[curve._output];\n\t\t\tvar storage = [];\n\n\t\t\tfor (var j = 0; j < output._components; ++j) {\n\t\t\t\tstorage[j] = 0;\n\t\t\t}\n\n\t\t\tthis._results[i] = storage;\n\t\t}\n\t}\n\n}\n\nclass AnimClip {\n\tconstructor(track, time, speed, playing, loop, eventHandler) {\n\t\tthis._name = track.name;\n\t\tthis._track = track;\n\t\tthis._snapshot = new AnimSnapshot(track);\n\t\tthis._playing = playing;\n\t\tthis._time = time;\n\t\tthis._speed = speed;\n\t\tthis._loop = loop;\n\t\tthis._blendWeight = 1.0;\n\t\tthis._blendOrder = 0.0;\n\t\tthis._eventHandler = eventHandler;\n\t\tthis._eventCursor = 0;\n\n\t\twhile (this._track.events[this._eventCursor] && this._track.events[this._eventCursor].time < this.time) {\n\t\t\tthis._eventCursor++;\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tset name(name) {\n\t\tthis._name = name;\n\t}\n\n\tget track() {\n\t\treturn this._track;\n\t}\n\n\tget snapshot() {\n\t\treturn this._snapshot;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tset time(time) {\n\t\tthis._time = time;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(speed) {\n\t\tthis._speed = speed;\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(loop) {\n\t\tthis._loop = loop;\n\t}\n\n\tget blendWeight() {\n\t\treturn this._blendWeight;\n\t}\n\n\tset blendWeight(blendWeight) {\n\t\tthis._blendWeight = blendWeight;\n\t}\n\n\tget blendOrder() {\n\t\treturn this._blendOrder;\n\t}\n\n\tset blendOrder(blendOrder) {\n\t\tthis._blendOrder = blendOrder;\n\t}\n\n\tget eventCursor() {\n\t\treturn this._eventCursor;\n\t}\n\n\tset eventCursor(value) {\n\t\tthis._eventCursor = value;\n\t}\n\n\tactiveEventsForFrame(frameStartTime, frameEndTime) {\n\t\tif (frameStartTime === 0) {\n\t\t\tthis.eventCursor = 0;\n\t\t}\n\n\t\tvar clippedFrameDuration;\n\n\t\tif (frameEndTime > this.track.duration) {\n\t\t\tclippedFrameDuration = frameEndTime - this.track.duration;\n\t\t\tframeEndTime = this.track.duration;\n\t\t}\n\n\t\twhile (this.track.events[this.eventCursor] && this.track.events[this.eventCursor].time >= frameStartTime && (frameEndTime === this.track.duration ? this.track.events[this.eventCursor].time <= frameEndTime : this.track.events[this.eventCursor].time < frameEndTime)) {\n\t\t\tconst event = this.track.events[this.eventCursor];\n\n\t\t\tthis._eventHandler.fire(event.name, _extends({\n\t\t\t\ttrack: this.track\n\t\t\t}, event));\n\n\t\t\tthis.eventCursor++;\n\t\t}\n\n\t\tif (Number.isFinite(clippedFrameDuration)) {\n\t\t\tthis.activeEventsForFrame(0, clippedFrameDuration);\n\t\t}\n\t}\n\n\t_update(deltaTime) {\n\t\tif (this._playing) {\n\t\t\tvar time = this._time;\n\t\t\tvar duration = this._track.duration;\n\t\t\tvar speed = this._speed;\n\t\t\tvar loop = this._loop;\n\n\t\t\tif (this._track.events.length > 0 && duration > 0) {\n\t\t\t\tthis.activeEventsForFrame(time, time + speed * deltaTime);\n\t\t\t}\n\n\t\t\ttime += speed * deltaTime;\n\n\t\t\tif (speed >= 0) {\n\t\t\t\tif (time > duration) {\n\t\t\t\t\tif (loop) {\n\t\t\t\t\t\ttime = time % duration || 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttime = this._track.duration;\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (time < 0) {\n\t\t\t\t\tif (loop) {\n\t\t\t\t\t\ttime = duration + (time % duration || 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._time = time;\n\t\t}\n\n\t\tif (this._time !== this._snapshot._time) {\n\t\t\tthis._track.eval(this._time, this._snapshot);\n\t\t}\n\t}\n\n\tplay() {\n\t\tthis._playing = true;\n\t\tthis._time = 0;\n\t}\n\n\tstop() {\n\t\tthis._playing = false;\n\t\tthis._time = 0;\n\t}\n\n\tpause() {\n\t\tthis._playing = false;\n\t}\n\n\tresume() {\n\t\tthis._playing = true;\n\t}\n\n\treset() {\n\t\tthis._time = 0;\n\t}\n\n}\n\nclass AnimEvaluator {\n\tconstructor(binder) {\n\t\tthis._binder = binder;\n\t\tthis._clips = [];\n\t\tthis._inputs = [];\n\t\tthis._outputs = [];\n\t\tthis._targets = {};\n\t}\n\n\tstatic _dot(a, b) {\n\t\tvar len = a.length;\n\t\tvar result = 0;\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\tresult += a[i] * b[i];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic _normalize(a) {\n\t\tvar l = AnimEvaluator._dot(a, a);\n\n\t\tif (l > 0) {\n\t\t\tl = 1.0 / Math.sqrt(l);\n\t\t\tvar len = a.length;\n\n\t\t\tfor (var i = 0; i < len; ++i) {\n\t\t\t\ta[i] *= l;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _set(a, b, type) {\n\t\tvar len = a.length;\n\t\tvar i;\n\n\t\tif (type === 'quaternion') {\n\t\t\tvar l = AnimEvaluator._dot(b, b);\n\n\t\t\tif (l > 0) {\n\t\t\t\tl = 1.0 / Math.sqrt(l);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\ta[i] = b[i] * l;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\ta[i] = b[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _blendVec(a, b, t) {\n\t\tvar it = 1.0 - t;\n\t\tvar len = a.length;\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ta[i] = a[i] * it + b[i] * t;\n\t\t}\n\t}\n\n\tstatic _blendQuat(a, b, t) {\n\t\tvar len = a.length;\n\t\tvar it = 1.0 - t;\n\n\t\tif (AnimEvaluator._dot(a, b) < 0) {\n\t\t\tt = -t;\n\t\t}\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ta[i] = a[i] * it + b[i] * t;\n\t\t}\n\n\t\tAnimEvaluator._normalize(a);\n\t}\n\n\tstatic _blend(a, b, t, type) {\n\t\tif (type === 'quaternion') {\n\t\t\tAnimEvaluator._blendQuat(a, b, t);\n\t\t} else {\n\t\t\tAnimEvaluator._blendVec(a, b, t);\n\t\t}\n\t}\n\n\tstatic _stableSort(a, lessFunc) {\n\t\tvar len = a.length;\n\n\t\tfor (var i = 0; i < len - 1; ++i) {\n\t\t\tfor (var j = i + 1; j < len; ++j) {\n\t\t\t\tif (lessFunc(a[j], a[i])) {\n\t\t\t\t\tvar tmp = a[i];\n\t\t\t\t\ta[i] = a[j];\n\t\t\t\t\ta[j] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget clips() {\n\t\treturn this._clips;\n\t}\n\n\taddClip(clip) {\n\t\tvar targets = this._targets;\n\t\tvar curves = clip.track.curves;\n\t\tvar snapshot = clip.snapshot;\n\t\tvar inputs = [];\n\t\tvar outputs = [];\n\n\t\tfor (var i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar paths = curve.paths;\n\n\t\t\tfor (var j = 0; j < paths.length; ++j) {\n\t\t\t\tvar path = paths[j];\n\n\t\t\t\tvar resolved = this._binder.resolve(path);\n\n\t\t\t\tvar target = targets[resolved && resolved.targetPath || null];\n\n\t\t\t\tif (!target && resolved) {\n\t\t\t\t\ttarget = {\n\t\t\t\t\t\ttarget: resolved,\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tcurves: 0,\n\t\t\t\t\t\tblendCounter: 0\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (var k = 0; k < target.target.components; ++k) {\n\t\t\t\t\t\ttarget.value.push(0);\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets[resolved.targetPath] = target;\n\t\t\t\t}\n\n\t\t\t\tif (target) {\n\t\t\t\t\ttarget.curves++;\n\t\t\t\t\tinputs.push(snapshot._results[i]);\n\t\t\t\t\toutputs.push(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._clips.push(clip);\n\n\t\tthis._inputs.push(inputs);\n\n\t\tthis._outputs.push(outputs);\n\t}\n\n\tremoveClip(index) {\n\t\tvar targets = this._targets;\n\t\tvar clips = this._clips;\n\t\tvar clip = clips[index];\n\t\tvar curves = clip.track.curves;\n\n\t\tfor (var i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar paths = curve.paths;\n\n\t\t\tfor (var j = 0; j < paths.length; ++j) {\n\t\t\t\tvar path = paths[j];\n\n\t\t\t\tvar target = this._binder.resolve(path);\n\n\t\t\t\tif (target) {\n\t\t\t\t\ttarget.curves--;\n\n\t\t\t\t\tif (target.curves === 0) {\n\t\t\t\t\t\tthis._binder.unresolve(path);\n\n\t\t\t\t\t\tdelete targets[target.targetPath];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclips.splice(index, 1);\n\n\t\tthis._inputs.splice(index, 1);\n\n\t\tthis._outputs.splice(index, 1);\n\t}\n\n\tremoveClips() {\n\t\twhile (this._clips.length > 0) {\n\t\t\tthis.removeClip(0);\n\t\t}\n\t}\n\n\tfindClip(name) {\n\t\tvar clips = this._clips;\n\n\t\tfor (var i = 0; i < clips.length; ++i) {\n\t\t\tvar clip = clips[i];\n\n\t\t\tif (clip.name === name) {\n\t\t\t\treturn clip;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trebind() {\n\t\tthis._binder.rebind();\n\n\t\tthis._targets = {};\n\t\tvar clips = [...this.clips];\n\t\tthis.removeClips();\n\t\tclips.forEach(clip => {\n\t\t\tthis.addClip(clip);\n\t\t});\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar clips = this._clips;\n\t\tvar order = clips.map(function (c, i) {\n\t\t\treturn i;\n\t\t});\n\n\t\tAnimEvaluator._stableSort(order, function (a, b) {\n\t\t\treturn clips[a].blendOrder < clips[b].blendOrder;\n\t\t});\n\n\t\tvar i, j;\n\n\t\tfor (i = 0; i < order.length; ++i) {\n\t\t\tvar index = order[i];\n\t\t\tvar clip = clips[index];\n\t\t\tvar inputs = this._inputs[index];\n\t\t\tvar outputs = this._outputs[index];\n\t\t\tvar blendWeight = clip.blendWeight;\n\n\t\t\tif (blendWeight > 0.0) {\n\t\t\t\tclip._update(deltaTime);\n\t\t\t}\n\n\t\t\tvar input;\n\t\t\tvar output;\n\t\t\tvar value;\n\n\t\t\tif (blendWeight >= 1.0) {\n\t\t\t\tfor (j = 0; j < inputs.length; ++j) {\n\t\t\t\t\tinput = inputs[j];\n\t\t\t\t\toutput = outputs[j];\n\t\t\t\t\tvalue = output.value;\n\n\t\t\t\t\tAnimEvaluator._set(value, input, output.target.type);\n\n\t\t\t\t\toutput.blendCounter++;\n\t\t\t\t}\n\t\t\t} else if (blendWeight > 0.0) {\n\t\t\t\tfor (j = 0; j < inputs.length; ++j) {\n\t\t\t\t\tinput = inputs[j];\n\t\t\t\t\toutput = outputs[j];\n\t\t\t\t\tvalue = output.value;\n\n\t\t\t\t\tif (output.blendCounter === 0) {\n\t\t\t\t\t\tAnimEvaluator._set(value, input, output.target.type);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tAnimEvaluator._blend(value, input, blendWeight, output.target.type);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.blendCounter++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar targets = this._targets;\n\n\t\tfor (var path in targets) {\n\t\t\tif (targets.hasOwnProperty(path)) {\n\t\t\t\tvar target = targets[path];\n\t\t\t\ttarget.target.func(target.value);\n\t\t\t\ttarget.blendCounter = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis._binder.update(deltaTime);\n\t}\n\n}\n\nclass AnimTarget {\n\tconstructor(func, type, components, targetPath) {\n\t\tthis._func = func;\n\t\tthis._type = type;\n\t\tthis._components = components;\n\t\tthis._targetPath = targetPath;\n\t}\n\n\tget func() {\n\t\treturn this._func;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tget components() {\n\t\treturn this._components;\n\t}\n\n\tget targetPath() {\n\t\treturn this._targetPath;\n\t}\n\n}\n\nclass DefaultAnimBinder {\n\tconstructor(graph) {\n\t\tthis.graph = graph;\n\t\tif (!graph) return;\n\t\tvar nodes = {};\n\n\t\tvar flatten = function flatten(node) {\n\t\t\tnodes[node.name] = node;\n\n\t\t\tfor (var i = 0; i < node.children.length; ++i) {\n\t\t\t\tflatten(node.children[i]);\n\t\t\t}\n\t\t};\n\n\t\tflatten(graph);\n\t\tthis.nodes = nodes;\n\t\tthis.targetCache = {};\n\n\t\tvar findMeshInstances = function findMeshInstances(node) {\n\t\t\tvar object = node;\n\n\t\t\twhile (object && !(object instanceof Entity)) {\n\t\t\t\tobject = object.parent;\n\t\t\t}\n\n\t\t\tvar meshInstances;\n\n\t\t\tif (object) {\n\t\t\t\tif (object.render) {\n\t\t\t\t\tmeshInstances = object.render.meshInstances;\n\t\t\t\t} else if (object.model) {\n\t\t\t\t\tmeshInstances = object.model.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn meshInstances;\n\t\t};\n\n\t\tthis.nodeCounts = {};\n\t\tthis.activeNodes = [];\n\t\tthis.handlers = {\n\t\t\t'localPosition': function (node) {\n\t\t\t\tvar object = node.localPosition;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 3, node, 'localPosition');\n\t\t\t},\n\t\t\t'localRotation': function (node) {\n\t\t\t\tvar object = node.localRotation;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'quaternion', 4, node, 'localRotation');\n\t\t\t},\n\t\t\t'localScale': function (node) {\n\t\t\t\tvar object = node.localScale;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 3, node, 'localScale');\n\t\t\t},\n\t\t\t'weights': function (node) {\n\t\t\t\tvar meshInstances = findMeshInstances(node);\n\n\t\t\t\tif (meshInstances) {\n\t\t\t\t\tvar morphInstances = [];\n\n\t\t\t\t\tfor (var i = 0; i < meshInstances.length; ++i) {\n\t\t\t\t\t\tif (meshInstances[i].node.name === node.name && meshInstances[i].morphInstance) {\n\t\t\t\t\t\t\tmorphInstances.push(meshInstances[i].morphInstance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (morphInstances.length > 0) {\n\t\t\t\t\t\tvar func = function func(value) {\n\t\t\t\t\t\t\tfor (var i = 0; i < value.length; ++i) {\n\t\t\t\t\t\t\t\tfor (var j = 0; j < morphInstances.length; j++) {\n\t\t\t\t\t\t\t\t\tmorphInstances[j].setWeight(i, value[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', morphInstances[0].morph._targets.length, node, 'weights');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t'materialTexture': function (node, textureName) {\n\t\t\t\tvar meshInstances = findMeshInstances(node);\n\n\t\t\t\tif (meshInstances) {\n\t\t\t\t\tvar meshInstance;\n\n\t\t\t\t\tfor (var i = 0; i < meshInstances.length; ++i) {\n\t\t\t\t\t\tif (meshInstances[i].node.name === node.name) {\n\t\t\t\t\t\t\tmeshInstance = meshInstances[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (meshInstance) {\n\t\t\t\t\t\tvar func = function (value) {\n\t\t\t\t\t\t\tvar textureAsset = this.animComponent.system.app.assets.get(value[0]);\n\n\t\t\t\t\t\t\tif (textureAsset && textureAsset.resource && textureAsset.type === 'texture') {\n\t\t\t\t\t\t\t\tmeshInstance.material[textureName] = textureAsset.resource;\n\t\t\t\t\t\t\t\tmeshInstance.material.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this);\n\n\t\t\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 1, node, 'materialTexture', 'material');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tfindNode(path) {\n\t\tvar node;\n\n\t\tif (this.graph) {\n\t\t\tnode = this.graph.findByPath(path.entityPath);\n\t\t}\n\n\t\tif (!node) {\n\t\t\tnode = this.nodes[path.entityPath[path.entityPath.length - 1] || \"\"];\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tstatic createAnimTarget(func, type, valueCount, node, propertyPath, componentType) {\n\t\tvar targetPath = AnimBinder.encode(node.path, componentType ? componentType : 'entity', propertyPath);\n\t\treturn new AnimTarget(func, type, valueCount, targetPath);\n\t}\n\n\tresolve(path) {\n\t\tvar encodedPath = AnimBinder.encode(path.entityPath, path.component, path.propertyPath);\n\t\tvar target = this.targetCache[encodedPath];\n\t\tif (target) return target;\n\t\tvar node = this.findNode(path);\n\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar handler = this.handlers[path.propertyPath];\n\n\t\tif (!handler) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttarget = handler(node);\n\n\t\tif (!target) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.targetCache[encodedPath] = target;\n\n\t\tif (!this.nodeCounts[node.path]) {\n\t\t\tthis.activeNodes.push(node);\n\t\t\tthis.nodeCounts[node.path] = 1;\n\t\t} else {\n\t\t\tthis.nodeCounts[node.path]++;\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tunresolve(path) {\n\t\tif (path.component !== 'graph') return;\n\t\tvar node = this.nodes[path.entityPath[path.entityPath.length - 1] || \"\"];\n\t\tthis.nodeCounts[node.path]--;\n\n\t\tif (this.nodeCounts[node.path] === 0) {\n\t\t\tvar activeNodes = this.activeNodes;\n\t\t\tvar i = activeNodes.indexOf(node.node);\n\t\t\tvar len = activeNodes.length;\n\n\t\t\tif (i < len - 1) {\n\t\t\t\tactiveNodes[i] = activeNodes[len - 1];\n\t\t\t}\n\n\t\t\tactiveNodes.pop();\n\t\t}\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar activeNodes = this.activeNodes;\n\n\t\tfor (var i = 0; i < activeNodes.length; ++i) {\n\t\t\tactiveNodes[i]._dirtifyLocal();\n\t\t}\n\t}\n\n}\n\nclass InterpolatedKey {\n\tconstructor() {\n\t\tthis._written = false;\n\t\tthis._name = \"\";\n\t\tthis._keyFrames = [];\n\t\tthis._quat = new Quat();\n\t\tthis._pos = new Vec3();\n\t\tthis._scale = new Vec3();\n\t\tthis._targetNode = null;\n\t}\n\n\tgetTarget() {\n\t\treturn this._targetNode;\n\t}\n\n\tsetTarget(node) {\n\t\tthis._targetNode = node;\n\t}\n\n}\n\nclass Skeleton {\n\tconstructor(graph) {\n\t\tthis._animation = null;\n\t\tthis._time = 0;\n\t\tthis.looping = true;\n\t\tthis._interpolatedKeys = [];\n\t\tthis._interpolatedKeyDict = {};\n\t\tthis._currKeyIndices = {};\n\t\tthis.graph = null;\n\t\tvar self = this;\n\n\t\tfunction addInterpolatedKeys(node) {\n\t\t\tvar interpKey = new InterpolatedKey();\n\t\t\tinterpKey._name = node.name;\n\n\t\t\tself._interpolatedKeys.push(interpKey);\n\n\t\t\tself._interpolatedKeyDict[node.name] = interpKey;\n\t\t\tself._currKeyIndices[node.name] = 0;\n\n\t\t\tfor (var i = 0; i < node._children.length; i++) addInterpolatedKeys(node._children[i]);\n\t\t}\n\n\t\taddInterpolatedKeys(graph);\n\t}\n\n\tget animation() {\n\t\treturn this._animation;\n\t}\n\n\tset animation(value) {\n\t\tthis._animation = value;\n\t\tthis.currentTime = 0;\n\t}\n\n\tget currentTime() {\n\t\treturn this._time;\n\t}\n\n\tset currentTime(value) {\n\t\tthis._time = value;\n\t\tvar numNodes = this._interpolatedKeys.length;\n\n\t\tfor (var i = 0; i < numNodes; i++) {\n\t\t\tvar node = this._interpolatedKeys[i];\n\t\t\tvar nodeName = node._name;\n\t\t\tthis._currKeyIndices[nodeName] = 0;\n\t\t}\n\n\t\tthis.addTime(0);\n\t\tthis.updateGraph();\n\t}\n\n\tget numNodes() {\n\t\treturn this._interpolatedKeys.length;\n\t}\n\n\taddTime(delta) {\n\t\tif (this._animation !== null) {\n\t\t\tvar i;\n\t\t\tvar node, nodeName;\n\t\t\tvar keys, interpKey;\n\t\t\tvar k1, k2, alpha;\n\t\t\tvar nodes = this._animation._nodes;\n\t\t\tvar duration = this._animation.duration;\n\n\t\t\tif (this._time === duration && !this.looping) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._time += delta;\n\n\t\t\tif (this._time > duration) {\n\t\t\t\tthis._time = this.looping ? 0.0 : duration;\n\n\t\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnodeName = node._name;\n\t\t\t\t\tthis._currKeyIndices[nodeName] = 0;\n\t\t\t\t}\n\t\t\t} else if (this._time < 0) {\n\t\t\t\tthis._time = this.looping ? duration : 0.0;\n\n\t\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnodeName = node._name;\n\t\t\t\t\tthis._currKeyIndices[nodeName] = node._keys.length - 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar offset = delta >= 0 ? 1 : -1;\n\t\t\tvar foundKey;\n\n\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tnodeName = node._name;\n\t\t\t\tkeys = node._keys;\n\t\t\t\tinterpKey = this._interpolatedKeyDict[nodeName];\n\n\t\t\t\tif (interpKey === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfoundKey = false;\n\n\t\t\t\tif (keys.length !== 1) {\n\t\t\t\t\tfor (var currKeyIndex = this._currKeyIndices[nodeName]; currKeyIndex < keys.length - 1 && currKeyIndex >= 0; currKeyIndex += offset) {\n\t\t\t\t\t\tk1 = keys[currKeyIndex];\n\t\t\t\t\t\tk2 = keys[currKeyIndex + 1];\n\n\t\t\t\t\t\tif (k1.time <= this._time && k2.time >= this._time) {\n\t\t\t\t\t\t\talpha = (this._time - k1.time) / (k2.time - k1.time);\n\n\t\t\t\t\t\t\tinterpKey._pos.lerp(k1.position, k2.position, alpha);\n\n\t\t\t\t\t\t\tinterpKey._quat.slerp(k1.rotation, k2.rotation, alpha);\n\n\t\t\t\t\t\t\tinterpKey._scale.lerp(k1.scale, k2.scale, alpha);\n\n\t\t\t\t\t\t\tinterpKey._written = true;\n\t\t\t\t\t\t\tthis._currKeyIndices[nodeName] = currKeyIndex;\n\t\t\t\t\t\t\tfoundKey = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (keys.length === 1 || !foundKey && this._time === 0.0 && this.looping) {\n\t\t\t\t\tinterpKey._pos.copy(keys[0].position);\n\n\t\t\t\t\tinterpKey._quat.copy(keys[0].rotation);\n\n\t\t\t\t\tinterpKey._scale.copy(keys[0].scale);\n\n\t\t\t\t\tinterpKey._written = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tblend(skel1, skel2, alpha) {\n\t\tvar numNodes = this._interpolatedKeys.length;\n\n\t\tfor (var i = 0; i < numNodes; i++) {\n\t\t\tvar key1 = skel1._interpolatedKeys[i];\n\t\t\tvar key2 = skel2._interpolatedKeys[i];\n\t\t\tvar dstKey = this._interpolatedKeys[i];\n\n\t\t\tif (key1._written && key2._written) {\n\t\t\t\tdstKey._quat.slerp(key1._quat, skel2._interpolatedKeys[i]._quat, alpha);\n\n\t\t\t\tdstKey._pos.lerp(key1._pos, skel2._interpolatedKeys[i]._pos, alpha);\n\n\t\t\t\tdstKey._scale.lerp(key1._scale, key2._scale, alpha);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t} else if (key1._written) {\n\t\t\t\tdstKey._quat.copy(key1._quat);\n\n\t\t\t\tdstKey._pos.copy(key1._pos);\n\n\t\t\t\tdstKey._scale.copy(key1._scale);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t} else if (key2._written) {\n\t\t\t\tdstKey._quat.copy(key2._quat);\n\n\t\t\t\tdstKey._pos.copy(key2._pos);\n\n\t\t\t\tdstKey._scale.copy(key2._scale);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetGraph(graph) {\n\t\tvar i;\n\t\tthis.graph = graph;\n\n\t\tif (graph) {\n\t\t\tfor (i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tvar interpKey = this._interpolatedKeys[i];\n\t\t\t\tvar graphNode = graph.findByName(interpKey._name);\n\n\t\t\t\tthis._interpolatedKeys[i].setTarget(graphNode);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tthis._interpolatedKeys[i].setTarget(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateGraph() {\n\t\tif (this.graph) {\n\t\t\tfor (var i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tvar interpKey = this._interpolatedKeys[i];\n\n\t\t\t\tif (interpKey._written) {\n\t\t\t\t\tvar transform = interpKey.getTarget();\n\t\t\t\t\ttransform.localPosition.copy(interpKey._pos);\n\t\t\t\t\ttransform.localRotation.copy(interpKey._quat);\n\t\t\t\t\ttransform.localScale.copy(interpKey._scale);\n\t\t\t\t\tif (!transform._dirtyLocal) transform._dirtifyLocal();\n\t\t\t\t\tinterpKey._written = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimationComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.animationsIndex = {};\n\t\tthis.on('set_animations', this.onSetAnimations, this);\n\t\tthis.on('set_assets', this.onSetAssets, this);\n\t\tthis.on('set_loop', this.onSetLoop, this);\n\t}\n\n\tplay(name, blendTime) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar data = this.data;\n\n\t\tif (!data.animations[name]) {\n\t\t\treturn;\n\t\t}\n\n\t\tblendTime = blendTime || 0;\n\t\tdata.prevAnim = data.currAnim;\n\t\tdata.currAnim = name;\n\n\t\tif (data.model) {\n\t\t\tif (!data.skeleton && !data.animEvaluator) {\n\t\t\t\tthis._createAnimationController();\n\t\t\t}\n\n\t\t\tvar prevAnim = data.animations[data.prevAnim];\n\t\t\tvar currAnim = data.animations[data.currAnim];\n\t\t\tdata.blending = blendTime > 0 && data.prevAnim;\n\n\t\t\tif (data.blending) {\n\t\t\t\tdata.blend = 0;\n\t\t\t\tdata.blendSpeed = 1.0 / blendTime;\n\t\t\t}\n\n\t\t\tif (data.skeleton) {\n\t\t\t\tif (data.blending) {\n\t\t\t\t\tdata.fromSkel.animation = prevAnim;\n\t\t\t\t\tdata.fromSkel.addTime(data.skeleton._time);\n\t\t\t\t\tdata.toSkel.animation = currAnim;\n\t\t\t\t} else {\n\t\t\t\t\tdata.skeleton.animation = currAnim;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.animEvaluator) {\n\t\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\t\tif (data.blending) {\n\t\t\t\t\twhile (animEvaluator.clips.length > 1) {\n\t\t\t\t\t\tanimEvaluator.removeClip(0);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdata.animEvaluator.removeClips();\n\t\t\t\t}\n\n\t\t\t\tvar clip = new AnimClip(data.animations[data.currAnim], 0, 1.0, true, data.loop);\n\t\t\t\tclip.name = data.currAnim;\n\t\t\t\tclip.blendWeight = data.blending ? 0 : 1;\n\t\t\t\tclip.reset();\n\t\t\t\tdata.animEvaluator.addClip(clip);\n\t\t\t}\n\t\t}\n\n\t\tdata.playing = true;\n\t}\n\n\tgetAnimation(name) {\n\t\treturn this.data.animations[name];\n\t}\n\n\tsetModel(model) {\n\t\tvar data = this.data;\n\n\t\tif (model !== data.model) {\n\t\t\tthis._resetAnimationController();\n\n\t\t\tdata.model = model;\n\n\t\t\tif (data.animations && data.currAnim && data.animations[data.currAnim]) {\n\t\t\t\tthis.play(data.currAnim);\n\t\t\t}\n\t\t}\n\t}\n\n\t_resetAnimationController() {\n\t\tvar data = this.data;\n\t\tdata.skeleton = null;\n\t\tdata.fromSkel = null;\n\t\tdata.toSkel = null;\n\t\tdata.animEvaluator = null;\n\t}\n\n\t_createAnimationController() {\n\t\tvar data = this.data;\n\t\tvar model = data.model;\n\t\tvar animations = data.animations;\n\t\tvar hasJson = false;\n\t\tvar hasGlb = false;\n\n\t\tfor (var animation in animations) {\n\t\t\tif (animations.hasOwnProperty(animation)) {\n\t\t\t\tvar anim = animations[animation];\n\n\t\t\t\tif (anim.constructor === AnimTrack) {\n\t\t\t\t\thasGlb = true;\n\t\t\t\t} else {\n\t\t\t\t\thasJson = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar graph = model.getGraph();\n\n\t\tif (hasJson) {\n\t\t\tdata.fromSkel = new Skeleton(graph);\n\t\t\tdata.toSkel = new Skeleton(graph);\n\t\t\tdata.skeleton = new Skeleton(graph);\n\t\t\tdata.skeleton.looping = data.loop;\n\t\t\tdata.skeleton.setGraph(graph);\n\t\t} else if (hasGlb) {\n\t\t\tdata.animEvaluator = new AnimEvaluator(new DefaultAnimBinder(this.entity));\n\t\t}\n\t}\n\n\tloadAnimationAssets(ids) {\n\t\tif (!ids || !ids.length) return;\n\t\tvar self = this;\n\t\tvar assets = this.system.app.assets;\n\t\tvar i,\n\t\t\t\tl = ids.length;\n\n\t\tvar onAssetReady = function onAssetReady(asset) {\n\t\t\tif (asset.resources.length > 1) {\n\t\t\t\tfor (var i = 0; i < asset.resources.length; i++) {\n\t\t\t\t\tself.animations[asset.resources[i].name] = asset.resources[i];\n\t\t\t\t\tself.animationsIndex[asset.id] = asset.resources[i].name;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.animations[asset.name] = asset.resource;\n\t\t\t\tself.animationsIndex[asset.id] = asset.name;\n\t\t\t}\n\n\t\t\tself.animations = self.animations;\n\t\t};\n\n\t\tvar onAssetAdd = function onAssetAdd(asset) {\n\t\t\tasset.off('change', self.onAssetChanged, self);\n\t\t\tasset.on('change', self.onAssetChanged, self);\n\t\t\tasset.off('remove', self.onAssetRemoved, self);\n\t\t\tasset.on('remove', self.onAssetRemoved, self);\n\n\t\t\tif (asset.resource) {\n\t\t\t\tonAssetReady(asset);\n\t\t\t} else {\n\t\t\t\tasset.once('load', onAssetReady, self);\n\t\t\t\tif (self.enabled && self.entity.enabled) assets.load(asset);\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tvar asset = assets.get(ids[i]);\n\n\t\t\tif (asset) {\n\t\t\t\tonAssetAdd(asset);\n\t\t\t} else {\n\t\t\t\tassets.on('add:' + ids[i], onAssetAdd);\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetChanged(asset, attribute, newValue, oldValue) {\n\t\tvar i;\n\n\t\tif (attribute === 'resource' || attribute === 'resources') {\n\t\t\tif (attribute === 'resources' && newValue && newValue.length === 0) {\n\t\t\t\tnewValue = null;\n\t\t\t}\n\n\t\t\tif (newValue) {\n\t\t\t\tvar restarted = false;\n\n\t\t\t\tif (newValue.length > 1) {\n\t\t\t\t\tif (oldValue && oldValue.length > 1) {\n\t\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.animations[asset.name];\n\t\t\t\t\t}\n\n\t\t\t\t\trestarted = false;\n\n\t\t\t\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\t\t\t\tthis.animations[newValue[i].name] = newValue[i];\n\n\t\t\t\t\t\tif (!restarted && this.data.currAnim === newValue[i].name) {\n\t\t\t\t\t\t\tif (this.data.playing && this.data.enabled && this.entity.enabled) {\n\t\t\t\t\t\t\t\trestarted = true;\n\t\t\t\t\t\t\t\tthis.play(newValue[i].name, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!restarted) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\n\t\t\t\t\t\tthis.onSetAnimations();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (oldValue && oldValue.length > 1) {\n\t\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.animations[asset.name] = newValue[0] || newValue;\n\t\t\t\t\trestarted = false;\n\n\t\t\t\t\tif (this.data.currAnim === asset.name) {\n\t\t\t\t\t\tif (this.data.playing && this.data.enabled && this.entity.enabled) {\n\t\t\t\t\t\t\trestarted = true;\n\t\t\t\t\t\t\tthis.play(asset.name, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!restarted) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\n\t\t\t\t\t\tthis.onSetAnimations();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.animationsIndex[asset.id] = asset.name;\n\t\t\t} else {\n\t\t\t\tif (oldValue.length > 1) {\n\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\n\t\t\t\t\t\tif (this.data.currAnim === oldValue[i].name) {\n\t\t\t\t\t\t\tthis._stopCurrentAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.animations[asset.name];\n\n\t\t\t\t\tif (this.data.currAnim === asset.name) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete this.animationsIndex[asset.id];\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.animations) {\n\t\t\tif (asset.resources.length > 1) {\n\t\t\t\tfor (var i = 0; i < asset.resources.length; i++) {\n\t\t\t\t\tdelete this.animations[asset.resources[i].name];\n\t\t\t\t\tif (this.data.currAnim === asset.resources[i].name) this._stopCurrentAnimation();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdelete this.animations[asset.name];\n\t\t\t\tif (this.data.currAnim === asset.name) this._stopCurrentAnimation();\n\t\t\t}\n\n\t\t\tdelete this.animationsIndex[asset.id];\n\t\t}\n\t}\n\n\t_stopCurrentAnimation() {\n\t\tvar data = this.data;\n\t\tdata.currAnim = null;\n\t\tdata.playing = false;\n\n\t\tif (data.skeleton) {\n\t\t\tdata.skeleton.currentTime = 0;\n\t\t\tdata.skeleton.animation = null;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tfor (var i = 0; i < data.animEvaluator.clips.length; ++i) {\n\t\t\t\tdata.animEvaluator.clips[i].stop();\n\t\t\t}\n\n\t\t\tdata.animEvaluator.update(0);\n\t\t\tdata.animEvaluator.removeClips();\n\t\t}\n\t}\n\n\tonSetAnimations(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\t\tvar modelComponent = this.entity.model;\n\n\t\tif (modelComponent) {\n\t\t\tvar m = modelComponent.model;\n\n\t\t\tif (m && m !== data.model) {\n\t\t\t\tthis.setModel(m);\n\t\t\t}\n\t\t}\n\n\t\tif (!data.currAnim && data.activate && data.enabled && this.entity.enabled) {\n\t\t\tfor (var animName in data.animations) {\n\t\t\t\tthis.play(animName, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetAssets(name, oldValue, newValue) {\n\t\tif (oldValue && oldValue.length) {\n\t\t\tfor (var i = 0; i < oldValue.length; i++) {\n\t\t\t\tif (oldValue[i]) {\n\t\t\t\t\tvar asset = this.system.app.assets.get(oldValue[i]);\n\n\t\t\t\t\tif (asset) {\n\t\t\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\t\t\tvar animName = this.animationsIndex[asset.id];\n\t\t\t\t\t\tif (this.data.currAnim === animName) this._stopCurrentAnimation();\n\t\t\t\t\t\tdelete this.animations[animName];\n\t\t\t\t\t\tdelete this.animationsIndex[asset.id];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar ids = newValue.map(function (value) {\n\t\t\treturn value instanceof Asset ? value.id : value;\n\t\t});\n\t\tthis.loadAnimationAssets(ids);\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tdata.skeleton.looping = data.loop;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tfor (var i = 0; i < data.animEvaluator.clips.length; ++i) {\n\t\t\t\tdata.animEvaluator.clips[i].loop = data.loop;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetCurrentTime(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tvar skeleton = data.skeleton;\n\t\t\tskeleton.currentTime = newValue;\n\t\t\tskeleton.addTime(0);\n\t\t\tskeleton.updateGraph();\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\tanimEvaluator.clips[i].time = newValue;\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tsuper.onEnable();\n\t\tvar data = this.data;\n\t\tvar assets = data.assets;\n\t\tvar registry = this.system.app.assets;\n\n\t\tif (assets) {\n\t\t\tfor (var i = 0, len = assets.length; i < len; i++) {\n\t\t\t\tvar asset = assets[i];\n\t\t\t\tif (!(asset instanceof Asset)) asset = registry.get(asset);\n\t\t\t\tif (asset && !asset.resource) registry.load(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (data.activate && !data.currAnim) {\n\t\t\tfor (var animName in data.animations) {\n\t\t\t\tthis.play(animName, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tfor (var i = 0; i < this.assets.length; i++) {\n\t\t\tvar asset = this.assets[i];\n\n\t\t\tif (typeof asset === 'number') {\n\t\t\t\tasset = this.system.app.assets.get(asset);\n\t\t\t}\n\n\t\t\tif (!asset) continue;\n\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t}\n\n\t\tvar data = this.data;\n\t\tdelete data.animation;\n\t\tdelete data.skeleton;\n\t\tdelete data.fromSkel;\n\t\tdelete data.toSkel;\n\t\tdelete data.animEvaluator;\n\t}\n\n\tget currentTime() {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\treturn this.data.skeleton._time;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar clips = data.animEvaluator.clips;\n\n\t\t\tif (clips.length > 0) {\n\t\t\t\treturn clips[clips.length - 1].time;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tset currentTime(currentTime) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tvar skeleton = data.skeleton;\n\t\t\tskeleton.currentTime = currentTime;\n\t\t\tskeleton.addTime(0);\n\t\t\tskeleton.updateGraph();\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\tanimEvaluator.clips[i].time = currentTime;\n\t\t\t}\n\t\t}\n\t}\n\n\tget duration() {\n\t\treturn this.data.animations[this.data.currAnim].duration;\n\t}\n\n}\n\nclass AnimationComponentData {\n\tconstructor() {\n\t\tthis.assets = [];\n\t\tthis.speed = 1.0;\n\t\tthis.loop = true;\n\t\tthis.activate = true;\n\t\tthis.enabled = true;\n\t\tthis.animations = {};\n\t\tthis.model = null;\n\t\tthis.prevAnim = null;\n\t\tthis.currAnim = null;\n\t\tthis.blending = false;\n\t\tthis.blend = 0;\n\t\tthis.blendSpeed = 0;\n\t\tthis.playing = false;\n\t\tthis.skeleton = null;\n\t\tthis.fromSkel = null;\n\t\tthis.toSkel = null;\n\t\tthis.animEvaluator = null;\n\t}\n\n}\n\nconst _schema$l = ['enabled', 'assets', 'speed', 'loop', 'activate', 'animations', 'skeleton', 'model', 'prevAnim', 'currAnim', 'fromSkel', 'toSkel', 'blending', 'blendTimeRemaining', 'playing'];\n\nclass AnimationComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'animation';\n\t\tthis.ComponentType = AnimationComponent;\n\t\tthis.DataType = AnimationComponentData;\n\t\tthis.schema = _schema$l;\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('update', this.onUpdate, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['activate', 'enabled', 'loop', 'speed', 'assets'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar key;\n\t\tthis.addComponent(clone, {});\n\t\tclone.animation.assets = entity.animation.assets.slice();\n\t\tclone.animation.data.speed = entity.animation.speed;\n\t\tclone.animation.data.loop = entity.animation.loop;\n\t\tclone.animation.data.activate = entity.animation.activate;\n\t\tclone.animation.data.enabled = entity.animation.enabled;\n\t\tvar clonedAnimations = {};\n\t\tvar animations = entity.animation.animations;\n\n\t\tfor (key in animations) {\n\t\t\tif (animations.hasOwnProperty(key)) {\n\t\t\t\tclonedAnimations[key] = animations[key];\n\t\t\t}\n\t\t}\n\n\t\tclone.animation.animations = clonedAnimations;\n\t\tvar clonedAnimationsIndex = {};\n\t\tvar animationsIndex = entity.animation.animationsIndex;\n\n\t\tfor (key in animationsIndex) {\n\t\t\tif (animationsIndex.hasOwnProperty(key)) {\n\t\t\t\tclonedAnimationsIndex[key] = animationsIndex[key];\n\t\t\t}\n\t\t}\n\n\t\tclone.animation.animationsIndex = clonedAnimationsIndex;\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && component.entity.enabled) {\n\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\tcomponentData.blend += dt * componentData.blendSpeed;\n\n\t\t\t\t\t\tif (componentData.blend >= 1.0) {\n\t\t\t\t\t\t\tcomponentData.blend = 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (componentData.playing) {\n\t\t\t\t\t\tvar skeleton = componentData.skeleton;\n\n\t\t\t\t\t\tif (skeleton !== null && componentData.model !== null) {\n\t\t\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\t\t\tskeleton.blend(componentData.fromSkel, componentData.toSkel, componentData.blend);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar delta = dt * componentData.speed;\n\t\t\t\t\t\t\t\tskeleton.addTime(delta);\n\n\t\t\t\t\t\t\t\tif (componentData.speed > 0 && skeleton._time === skeleton._animation.duration && !componentData.loop) {\n\t\t\t\t\t\t\t\t\tcomponentData.playing = false;\n\t\t\t\t\t\t\t\t} else if (componentData.speed < 0 && skeleton._time === 0 && !componentData.loop) {\n\t\t\t\t\t\t\t\t\tcomponentData.playing = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (componentData.blending && componentData.blend === 1.0) {\n\t\t\t\t\t\t\t\tskeleton.animation = componentData.toSkel._animation;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tskeleton.updateGraph();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar animEvaluator = componentData.animEvaluator;\n\n\t\t\t\t\tif (animEvaluator) {\n\t\t\t\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\t\t\t\tvar clip = animEvaluator.clips[i];\n\t\t\t\t\t\t\tclip.speed = componentData.speed;\n\n\t\t\t\t\t\t\tif (!componentData.playing) {\n\t\t\t\t\t\t\t\tclip.pause();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclip.resume();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\t\tanimEvaluator.clips[1].blendWeight = componentData.blend;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tanimEvaluator.update(dt);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (componentData.blending && componentData.blend === 1.0) {\n\t\t\t\t\t\tcomponentData.blending = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(AnimationComponent.prototype, _schema$l);\n\nclass AnimNode {\n\tconstructor(state, parent, name, point, speed = 1) {\n\t\tthis._state = state;\n\t\tthis._parent = parent;\n\t\tthis._name = name;\n\n\t\tif (Array.isArray(point)) {\n\t\t\tthis._point = new Vec2(point[0], point[1]);\n\t\t\tthis._pointLength = this._point.length();\n\t\t} else {\n\t\t\tthis._point = point;\n\t\t\tthis._pointLength = point;\n\t\t}\n\n\t\tthis._speed = speed;\n\t\tthis._weightedSpeed = 1.0;\n\t\tthis._weight = 1.0;\n\t\tthis._animTrack = null;\n\t}\n\n\tget parent() {\n\t\treturn this._parent;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget path() {\n\t\treturn this._parent ? this._parent.path + '.' + this._name : this._name;\n\t}\n\n\tget point() {\n\t\treturn this._point;\n\t}\n\n\tget pointLength() {\n\t\treturn this._pointLength;\n\t}\n\n\tget weight() {\n\t\treturn this._parent ? this._parent.weight * this._weight : this._weight;\n\t}\n\n\tset weight(value) {\n\t\tthis._weight = value;\n\t}\n\n\tget normalizedWeight() {\n\t\tvar totalWeight = this._state.totalWeight;\n\t\tif (totalWeight === 0.0) return 0.0;\n\t\treturn this.weight / totalWeight;\n\t}\n\n\tget speed() {\n\t\treturn this._weightedSpeed * this._speed;\n\t}\n\n\tget absoluteSpeed() {\n\t\treturn Math.abs(this._speed);\n\t}\n\n\tget weightedSpeed() {\n\t\treturn this._weightedSpeed;\n\t}\n\n\tset weightedSpeed(weightedSpeed) {\n\t\tthis._weightedSpeed = weightedSpeed;\n\t}\n\n\tget animTrack() {\n\t\treturn this._animTrack;\n\t}\n\n\tset animTrack(value) {\n\t\tthis._animTrack = value;\n\t}\n\n}\n\nclass AnimBlendTree extends AnimNode {\n\tconstructor(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tsuper(state, parent, name, point);\n\t\tthis._parameters = parameters;\n\t\tthis._parameterValues = new Array(parameters.length);\n\t\tthis._children = [];\n\t\tthis._findParameter = findParameter;\n\t\tthis._syncAnimations = syncAnimations !== false;\n\t\tthis._pointCache = {};\n\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tvar child = children[i];\n\n\t\t\tif (child.children) {\n\t\t\t\tthis._children.push(createTree(child.type, this, null, name, 1.0, child.parameter ? [child.parameter] : child.parameters, child.children, createTree, findParameter));\n\t\t\t} else {\n\t\t\t\tthis._children.push(new AnimNode(state, this, child.name, child.point, child.speed));\n\t\t\t}\n\t\t}\n\t}\n\n\tget weight() {\n\t\tthis.calculateWeights();\n\t\treturn this._parent ? this._parent.weight * this._weight : this._weight;\n\t}\n\n\tget syncAnimations() {\n\t\treturn this._syncAnimations;\n\t}\n\n\tgetChild(name) {\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tif (this._children[i].name === name) return this._children[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateParameterValues() {\n\t\tvar paramsEqual = true;\n\n\t\tfor (let i = 0; i < this._parameterValues.length; i++) {\n\t\t\tvar updatedParameter = this._findParameter(this._parameters[i]).value;\n\n\t\t\tif (this._parameterValues[i] !== updatedParameter) {\n\t\t\t\tthis._parameterValues[i] = updatedParameter;\n\t\t\t\tparamsEqual = false;\n\t\t\t}\n\t\t}\n\n\t\treturn paramsEqual;\n\t}\n\n\tgetNodeWeightedDuration(i) {\n\t\treturn this._children[i].animTrack.duration / this._children[i].speedMultiplier * this._children[i].weight;\n\t}\n\n\tgetNodeCount() {\n\t\tvar count = 0;\n\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tvar child = this._children[i];\n\n\t\t\tif (child.constructor === AnimBlendTree) {\n\t\t\t\tcount += this._children[i].getNodeCount();\n\t\t\t} else {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nclass AnimBlendTree1D extends AnimBlendTree {\n\tconstructor(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tchildren.sort((a, b) => a.point - b.point);\n\t\tsuper(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i;\n\t\tvar weightedDurationSum = 0.0;\n\t\tthis._children[0].weight = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tvar c1 = this._children[i];\n\n\t\t\tif (i !== this._children.length - 1) {\n\t\t\t\tvar c2 = this._children[i + 1];\n\n\t\t\t\tif (c1.point === c2.point) {\n\t\t\t\t\tc1.weight = 0.5;\n\t\t\t\t\tc2.weight = 0.5;\n\t\t\t\t} else if (math.between(this._parameterValues[0], c1.point, c2.point, true)) {\n\t\t\t\t\tvar child2Distance = Math.abs(c1.point - c2.point);\n\t\t\t\t\tvar parameterDistance = Math.abs(c1.point - this._parameterValues[0]);\n\t\t\t\t\tvar weight = (child2Distance - parameterDistance) / child2Distance;\n\t\t\t\t\tc1.weight = weight;\n\t\t\t\t\tc2.weight = 1.0 - weight;\n\t\t\t\t} else {\n\t\t\t\t\tc2.weight = 0.0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += c1.animTrack.duration / c1.absoluteSpeed * c1.weight;\n\t\t\t}\n\t\t}\n\n\t\tif (this._syncAnimations) {\n\t\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\t\tconst child = this._children[i];\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimBlendTreeCartesian2D extends AnimBlendTree {\n\tpointDistanceCache(i, j) {\n\t\tvar pointKey = `${i}${j}`;\n\n\t\tif (!this._pointCache[pointKey]) {\n\t\t\tthis._pointCache[pointKey] = this._children[j].point.clone().sub(this._children[i].point);\n\t\t}\n\n\t\treturn this._pointCache[pointKey];\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i, j, pi, pipj, minj, result, weightSum, weightedDurationSum;\n\n\t\tAnimBlendTreeCartesian2D._p.set(...this._parameterValues);\n\n\t\tweightSum = 0.0;\n\t\tweightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tpi = child.point;\n\n\t\t\tAnimBlendTreeCartesian2D._pip.set(...AnimBlendTreeCartesian2D._p.data).sub(pi);\n\n\t\t\tminj = Number.MAX_VALUE;\n\n\t\t\tfor (j = 0; j < this._children.length; j++) {\n\t\t\t\tif (i === j) continue;\n\t\t\t\tpipj = this.pointDistanceCache(i, j);\n\t\t\t\tresult = math.clamp(1.0 - AnimBlendTreeCartesian2D._pip.dot(pipj) / pipj.lengthSq(), 0.0, 1.0);\n\t\t\t\tif (result < minj) minj = result;\n\t\t\t}\n\n\t\t\tchild.weight = minj;\n\t\t\tweightSum += minj;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = child._weight / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nAnimBlendTreeCartesian2D._p = new Vec2();\nAnimBlendTreeCartesian2D._pip = new Vec2();\n\nclass AnimBlendTreeDirectional2D extends AnimBlendTree {\n\tpointCache(i, j) {\n\t\tvar pointKey = `${i}${j}`;\n\n\t\tif (!this._pointCache[pointKey]) {\n\t\t\tthis._pointCache[pointKey] = new Vec2((this._children[j].pointLength - this._children[i].pointLength) / ((this._children[j].pointLength + this._children[i].pointLength) / 2), Vec2.angleRad(this._children[i].point, this._children[j].point) * 2.0);\n\t\t}\n\n\t\treturn this._pointCache[pointKey];\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i, j, pi, pipj, minj, result, weightSum, weightedDurationSum;\n\n\t\tAnimBlendTreeDirectional2D._p.set(...this._parameterValues);\n\n\t\tvar pLength = AnimBlendTreeDirectional2D._p.length();\n\n\t\tweightSum = 0.0;\n\t\tweightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tpi = child.point;\n\t\t\tvar piLength = child.pointLength;\n\t\t\tminj = Number.MAX_VALUE;\n\n\t\t\tfor (j = 0; j < this._children.length; j++) {\n\t\t\t\tif (i === j) continue;\n\t\t\t\tvar pjLength = this._children[j].pointLength;\n\t\t\t\tpipj = this.pointCache(i, j);\n\n\t\t\t\tAnimBlendTreeDirectional2D._pip.set((pLength - piLength) / ((pjLength + piLength) / 2), Vec2.angleRad(pi, AnimBlendTreeDirectional2D._p) * 2.0);\n\n\t\t\t\tresult = math.clamp(1.0 - Math.abs(AnimBlendTreeDirectional2D._pip.dot(pipj) / pipj.lengthSq()), 0.0, 1.0);\n\t\t\t\tif (result < minj) minj = result;\n\t\t\t}\n\n\t\t\tchild.weight = minj;\n\t\t\tweightSum += minj;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = child._weight / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tconst weightedChildDuration = child.animTrack.duration / weightedDurationSum * weightSum;\n\t\t\t\tchild.weightedSpeed = child.absoluteSpeed * weightedChildDuration;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nAnimBlendTreeDirectional2D._p = new Vec2();\nAnimBlendTreeDirectional2D._pip = new Vec2();\n\nclass AnimBlendTreeDirect extends AnimBlendTree {\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i;\n\t\tvar weightSum = 0.0;\n\t\tvar weightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tweightSum += Math.max(this._parameterValues[i], 0.0);\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tconst child = this._children[i];\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = Math.max(this._parameterValues[i], 0.0) / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nconst ANIM_INTERRUPTION_NONE = 'NONE';\nconst ANIM_INTERRUPTION_PREV = 'PREV_STATE';\nconst ANIM_INTERRUPTION_NEXT = 'NEXT_STATE';\nconst ANIM_INTERRUPTION_PREV_NEXT = 'PREV_STATE_NEXT_STATE';\nconst ANIM_INTERRUPTION_NEXT_PREV = 'NEXT_STATE_PREV_STATE';\nconst ANIM_GREATER_THAN = 'GREATER_THAN';\nconst ANIM_LESS_THAN = 'LESS_THAN';\nconst ANIM_GREATER_THAN_EQUAL_TO = 'GREATER_THAN_EQUAL_TO';\nconst ANIM_LESS_THAN_EQUAL_TO = 'LESS_THAN_EQUAL_TO';\nconst ANIM_EQUAL_TO = 'EQUAL_TO';\nconst ANIM_NOT_EQUAL_TO = 'NOT_EQUAL_TO';\nconst ANIM_PARAMETER_INTEGER = 'INTEGER';\nconst ANIM_PARAMETER_FLOAT = 'FLOAT';\nconst ANIM_PARAMETER_BOOLEAN = 'BOOLEAN';\nconst ANIM_PARAMETER_TRIGGER = 'TRIGGER';\nconst ANIM_BLEND_1D = '1D';\nconst ANIM_BLEND_2D_DIRECTIONAL = '2D_DIRECTIONAL';\nconst ANIM_BLEND_2D_CARTESIAN = '2D_CARTESIAN';\nconst ANIM_BLEND_DIRECT = 'DIRECT';\nconst ANIM_STATE_START = 'START';\nconst ANIM_STATE_END = 'END';\nconst ANIM_STATE_ANY = 'ANY';\nconst ANIM_CONTROL_STATES = [ANIM_STATE_START, ANIM_STATE_END, ANIM_STATE_ANY];\n\nclass AnimState {\n\tconstructor(controller, name, speed, loop, blendTree) {\n\t\tthis._controller = controller;\n\t\tthis._name = name;\n\t\tthis._animations = {};\n\t\tthis._animationList = [];\n\t\tthis._speed = speed || 1.0;\n\t\tthis._loop = loop === undefined ? true : loop;\n\n\t\tvar findParameter = this._controller.findParameter.bind(this._controller);\n\n\t\tif (blendTree) {\n\t\t\tthis._blendTree = this._createTree(blendTree.type, this, null, name, 1.0, blendTree.parameter ? [blendTree.parameter] : blendTree.parameters, blendTree.children, blendTree.syncAnimations, this._createTree, findParameter);\n\t\t} else {\n\t\t\tthis._blendTree = new AnimNode(this, null, name, 1.0, speed);\n\t\t}\n\t}\n\n\t_createTree(type, state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tswitch (type) {\n\t\t\tcase ANIM_BLEND_1D:\n\t\t\t\treturn new AnimBlendTree1D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_2D_CARTESIAN:\n\t\t\t\treturn new AnimBlendTreeCartesian2D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_2D_DIRECTIONAL:\n\t\t\t\treturn new AnimBlendTreeDirectional2D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_DIRECT:\n\t\t\t\treturn new AnimBlendTreeDirect(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\t\t}\n\t}\n\n\t_getNodeFromPath(path) {\n\t\tvar currNode = this._blendTree;\n\n\t\tfor (var i = 1; i < path.length; i++) {\n\t\t\tcurrNode = currNode.getChild(path[i]);\n\t\t}\n\n\t\treturn currNode;\n\t}\n\n\taddAnimation(path, animTrack) {\n\t\tvar pathString = path.join('.');\n\n\t\tvar indexOfAnimation = this._animationList.findIndex(function (animation) {\n\t\t\treturn animation.path === pathString;\n\t\t});\n\n\t\tif (indexOfAnimation >= 0) {\n\t\t\tthis._animationList[indexOfAnimation].animTrack = animTrack;\n\t\t} else {\n\t\t\tvar node = this._getNodeFromPath(path);\n\n\t\t\tnode.animTrack = animTrack;\n\n\t\t\tthis._animationList.push(node);\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget animations() {\n\t\treturn this._animationList;\n\t}\n\n\tset animations(value) {\n\t\tthis._animationList = value;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = value;\n\t}\n\n\tget nodeCount() {\n\t\tif (!this._blendTree || this._blendTree.constructor === AnimNode) return 1;\n\t\treturn this._blendTree.getNodeCount();\n\t}\n\n\tget playable() {\n\t\treturn ANIM_CONTROL_STATES.indexOf(this.name) !== -1 || this.animations.length === this.nodeCount;\n\t}\n\n\tget looping() {\n\t\tif (this.animations.length > 0) {\n\t\t\tvar trackClipName = this.name + '.' + this.animations[0].animTrack.name;\n\n\t\t\tvar trackClip = this._controller.animEvaluator.findClip(trackClipName);\n\n\t\t\tif (trackClip) {\n\t\t\t\treturn trackClip.loop;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget totalWeight() {\n\t\tvar sum = 0;\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.animations.length; i++) {\n\t\t\tsum += this.animations[i].weight;\n\t\t}\n\n\t\treturn sum;\n\t}\n\n\tget timelineDuration() {\n\t\tvar duration = 0;\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.animations.length; i++) {\n\t\t\tvar animation = this.animations[i];\n\n\t\t\tif (animation.animTrack.duration > duration) {\n\t\t\t\tduration = animation.animTrack.duration;\n\t\t\t}\n\t\t}\n\n\t\treturn duration;\n\t}\n\n}\n\nclass AnimTransition {\n\tconstructor({\n\t\tfrom,\n\t\tto,\n\t\ttime = 0,\n\t\tpriority = 0,\n\t\tconditions = [],\n\t\texitTime = null,\n\t\ttransitionOffset = null,\n\t\tinterruptionSource = ANIM_INTERRUPTION_NONE\n\t}) {\n\t\tthis._from = from;\n\t\tthis._to = to;\n\t\tthis._time = time;\n\t\tthis._priority = priority;\n\t\tthis._conditions = conditions;\n\t\tthis._exitTime = exitTime;\n\t\tthis._transitionOffset = transitionOffset;\n\t\tthis._interruptionSource = interruptionSource;\n\t}\n\n\tget from() {\n\t\treturn this._from;\n\t}\n\n\tget to() {\n\t\treturn this._to;\n\t}\n\n\tset to(value) {\n\t\tthis._to = value;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tget conditions() {\n\t\treturn this._conditions;\n\t}\n\n\tget exitTime() {\n\t\treturn this._exitTime;\n\t}\n\n\tget transitionOffset() {\n\t\treturn this._transitionOffset;\n\t}\n\n\tget interruptionSource() {\n\t\treturn this._interruptionSource;\n\t}\n\n\tget hasExitTime() {\n\t\treturn !!this.exitTime;\n\t}\n\n}\n\nclass AnimController {\n\tconstructor(animEvaluator, states, transitions, parameters, activate, eventHandler) {\n\t\tthis._animEvaluator = animEvaluator;\n\t\tthis._states = {};\n\t\tthis._stateNames = [];\n\t\tthis._eventHandler = eventHandler;\n\n\t\tfor (let i = 0; i < states.length; i++) {\n\t\t\tthis._states[states[i].name] = new AnimState(this, states[i].name, states[i].speed, states[i].loop, states[i].blendTree);\n\n\t\t\tthis._stateNames.push(states[i].name);\n\t\t}\n\n\t\tthis._transitions = transitions.map(transition => {\n\t\t\treturn new AnimTransition(_extends({}, transition));\n\t\t});\n\t\tthis._findTransitionsFromStateCache = {};\n\t\tthis._findTransitionsBetweenStatesCache = {};\n\t\tthis._parameters = parameters;\n\t\tthis._previousStateName = null;\n\t\tthis._activeStateName = ANIM_STATE_START;\n\t\tthis._playing = false;\n\t\tthis._activate = activate;\n\t\tthis._currTransitionTime = 1.0;\n\t\tthis._totalTransitionTime = 1.0;\n\t\tthis._isTransitioning = false;\n\t\tthis._transitionInterruptionSource = ANIM_INTERRUPTION_NONE;\n\t\tthis._transitionPreviousStates = [];\n\t\tthis._timeInState = 0;\n\t\tthis._timeInStateBefore = 0;\n\t}\n\n\tget animEvaluator() {\n\t\treturn this._animEvaluator;\n\t}\n\n\tget activeState() {\n\t\treturn this._findState(this._activeStateName);\n\t}\n\n\tset activeState(stateName) {\n\t\tthis._activeStateName = stateName;\n\t}\n\n\tget activeStateName() {\n\t\treturn this._activeStateName;\n\t}\n\n\tget activeStateAnimations() {\n\t\treturn this.activeState.animations;\n\t}\n\n\tget previousState() {\n\t\treturn this._findState(this._previousStateName);\n\t}\n\n\tset previousState(stateName) {\n\t\tthis._previousStateName = stateName;\n\t}\n\n\tget previousStateName() {\n\t\treturn this._previousStateName;\n\t}\n\n\tget playable() {\n\t\tlet playable = true;\n\n\t\tfor (let i = 0; i < this._stateNames.length; i++) {\n\t\t\tif (!this._states[this._stateNames[i]].playable) {\n\t\t\t\tplayable = false;\n\t\t\t}\n\t\t}\n\n\t\treturn playable;\n\t}\n\n\tget playing() {\n\t\treturn this._playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._playing = value;\n\t}\n\n\tget activeStateProgress() {\n\t\treturn this._getActiveStateProgressForTime(this._timeInState);\n\t}\n\n\tget activeStateDuration() {\n\t\tif (this.activeStateName === ANIM_STATE_START || this.activeStateName === ANIM_STATE_END) return 0.0;\n\t\tlet maxDuration = 0.0;\n\n\t\tfor (let i = 0; i < this.activeStateAnimations.length; i++) {\n\t\t\tconst activeClip = this._animEvaluator.findClip(this.activeStateAnimations[i].name);\n\n\t\t\tif (activeClip) {\n\t\t\t\tmaxDuration = Math.max(maxDuration, activeClip.track.duration);\n\t\t\t}\n\t\t}\n\n\t\treturn maxDuration;\n\t}\n\n\tget activeStateCurrentTime() {\n\t\treturn this._timeInState;\n\t}\n\n\tset activeStateCurrentTime(time) {\n\t\tthis._timeInStateBefore = time;\n\t\tthis._timeInState = time;\n\n\t\tfor (let i = 0; i < this.activeStateAnimations.length; i++) {\n\t\t\tconst clip = this.animEvaluator.findClip(this.activeStateAnimations[i].name);\n\n\t\t\tif (clip) {\n\t\t\t\tclip.time = time;\n\t\t\t}\n\t\t}\n\t}\n\n\tget transitioning() {\n\t\treturn this._isTransitioning;\n\t}\n\n\tget transitionProgress() {\n\t\treturn this._currTransitionTime / this._totalTransitionTime;\n\t}\n\n\tget states() {\n\t\treturn this._stateNames;\n\t}\n\n\t_findState(stateName) {\n\t\treturn this._states[stateName];\n\t}\n\n\t_getActiveStateProgressForTime(time) {\n\t\tif (this.activeStateName === ANIM_STATE_START || this.activeStateName === ANIM_STATE_END || this.activeStateName === ANIM_STATE_ANY) return 1.0;\n\n\t\tconst activeClip = this._animEvaluator.findClip(this.activeStateAnimations[0].name);\n\n\t\tif (activeClip) {\n\t\t\treturn time / activeClip.track.duration;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_findTransitionsFromState(stateName) {\n\t\tlet transitions = this._findTransitionsFromStateCache[stateName];\n\n\t\tif (!transitions) {\n\t\t\ttransitions = this._transitions.filter(function (transition) {\n\t\t\t\treturn transition.from === stateName;\n\t\t\t});\n\t\t\ttransitions.sort(function (a, b) {\n\t\t\t\treturn a.priority < b.priority;\n\t\t\t});\n\t\t\tthis._findTransitionsFromStateCache[stateName] = transitions;\n\t\t}\n\n\t\treturn transitions;\n\t}\n\n\t_findTransitionsBetweenStates(sourceStateName, destinationStateName) {\n\t\tlet transitions = this._findTransitionsBetweenStatesCache[sourceStateName + '->' + destinationStateName];\n\n\t\tif (!transitions) {\n\t\t\ttransitions = this._transitions.filter(function (transition) {\n\t\t\t\treturn transition.from === sourceStateName && transition.to === destinationStateName;\n\t\t\t});\n\t\t\ttransitions.sort(function (a, b) {\n\t\t\t\treturn a.priority < b.priority;\n\t\t\t});\n\t\t\tthis._findTransitionsBetweenStatesCache[sourceStateName + '->' + destinationStateName] = transitions;\n\t\t}\n\n\t\treturn transitions;\n\t}\n\n\t_transitionHasConditionsMet(transition) {\n\t\tlet conditionsMet = true;\n\n\t\tfor (let i = 0; i < transition.conditions.length; i++) {\n\t\t\tconst condition = transition.conditions[i];\n\t\t\tconst parameter = this.findParameter(condition.parameterName);\n\n\t\t\tswitch (condition.predicate) {\n\t\t\t\tcase ANIM_GREATER_THAN:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value > condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_LESS_THAN:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value < condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_GREATER_THAN_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value >= condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_LESS_THAN_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value <= condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value === condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_NOT_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value !== condition.value;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!conditionsMet) return conditionsMet;\n\t\t}\n\n\t\treturn conditionsMet;\n\t}\n\n\t_findTransition(from, to) {\n\t\tlet transitions = [];\n\n\t\tif (from && to) {\n\t\t\ttransitions.concat(this._findTransitionsBetweenStates(from, to));\n\t\t} else {\n\t\t\tif (!this._isTransitioning) {\n\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t} else {\n\t\t\t\tswitch (this._transitionInterruptionSource) {\n\t\t\t\t\tcase ANIM_INTERRUPTION_PREV:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_NEXT:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_PREV_NEXT:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_NEXT_PREV:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttransitions = transitions.filter(function (transition) {\n\t\t\tif (transition.to === this.activeStateName) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (transition.hasExitTime) {\n\t\t\t\tlet progressBefore = this._getActiveStateProgressForTime(this._timeInStateBefore);\n\n\t\t\t\tlet progress = this._getActiveStateProgressForTime(this._timeInState);\n\n\t\t\t\tif (transition.exitTime < 1.0 && this.activeState.loop) {\n\t\t\t\t\tprogressBefore -= Math.floor(progressBefore);\n\t\t\t\t\tprogress -= Math.floor(progress);\n\t\t\t\t}\n\n\t\t\t\tif (!(transition.exitTime > progressBefore && transition.exitTime <= progress)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._transitionHasConditionsMet(transition);\n\t\t}.bind(this));\n\n\t\tif (transitions.length > 0) {\n\t\t\tconst transition = transitions[0];\n\n\t\t\tif (transition.to === ANIM_STATE_END) {\n\t\t\t\tconst startTransition = this._findTransitionsFromState(ANIM_STATE_START)[0];\n\n\t\t\t\ttransition.to = startTransition.to;\n\t\t\t}\n\n\t\t\treturn transition;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateStateFromTransition(transition) {\n\t\tlet state;\n\t\tlet animation;\n\t\tlet clip;\n\t\tthis.previousState = transition.from;\n\t\tthis.activeState = transition.to;\n\n\t\tfor (let i = 0; i < transition.conditions.length; i++) {\n\t\t\tconst condition = transition.conditions[i];\n\t\t\tconst parameter = this.findParameter(condition.parameterName);\n\n\t\t\tif (parameter.type === ANIM_PARAMETER_TRIGGER) {\n\t\t\t\tparameter.value = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.previousState) {\n\t\t\tif (!this._isTransitioning) {\n\t\t\t\tthis._transitionPreviousStates = [];\n\t\t\t}\n\n\t\t\tthis._transitionPreviousStates.push({\n\t\t\t\tname: this._previousStateName,\n\t\t\t\tweight: 1\n\t\t\t});\n\n\t\t\tconst interpolatedTime = Math.min(this._currTransitionTime / this._totalTransitionTime, 1.0);\n\n\t\t\tfor (let i = 0; i < this._transitionPreviousStates.length; i++) {\n\t\t\t\tif (!this._isTransitioning) {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight = 1.0;\n\t\t\t\t} else if (i !== this._transitionPreviousStates.length - 1) {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight *= 1.0 - interpolatedTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight = interpolatedTime;\n\t\t\t\t}\n\n\t\t\t\tstate = this._findState(this._transitionPreviousStates[i].name);\n\n\t\t\t\tfor (let j = 0; j < state.animations.length; j++) {\n\t\t\t\t\tanimation = state.animations[j];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name + '.previous.' + i);\n\n\t\t\t\t\tif (!clip) {\n\t\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\t\t\t\t\t\tclip.name = animation.name + '.previous.' + i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (i !== this._transitionPreviousStates.length - 1) {\n\t\t\t\t\t\tclip.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._isTransitioning = true;\n\t\tthis._totalTransitionTime = transition.time;\n\t\tthis._currTransitionTime = 0;\n\t\tthis._transitionInterruptionSource = transition.interruptionSource;\n\t\tconst activeState = this.activeState;\n\t\tconst hasTransitionOffset = transition.transitionOffset && transition.transitionOffset > 0.0 && transition.transitionOffset < 1.0;\n\t\tlet timeInState = 0;\n\t\tlet timeInStateBefore = 0;\n\n\t\tif (hasTransitionOffset) {\n\t\t\tconst offsetTime = activeState.timelineDuration * transition.transitionOffset;\n\t\t\ttimeInState = offsetTime;\n\t\t\ttimeInStateBefore = offsetTime;\n\t\t}\n\n\t\tthis._timeInState = timeInState;\n\t\tthis._timeInStateBefore = timeInStateBefore;\n\n\t\tfor (let i = 0; i < activeState.animations.length; i++) {\n\t\t\tclip = this._animEvaluator.findClip(activeState.animations[i].name);\n\n\t\t\tif (!clip) {\n\t\t\t\tconst speed = Number.isFinite(activeState.animations[i].speed) ? activeState.animations[i].speed : activeState.speed;\n\t\t\t\tclip = new AnimClip(activeState.animations[i].animTrack, this._timeInState, speed, true, activeState.loop, this._eventHandler);\n\t\t\t\tclip.name = activeState.animations[i].name;\n\n\t\t\t\tthis._animEvaluator.addClip(clip);\n\t\t\t} else {\n\t\t\t\tclip.reset();\n\t\t\t}\n\n\t\t\tif (transition.time > 0) {\n\t\t\t\tclip.blendWeight = 0.0;\n\t\t\t} else {\n\t\t\t\tclip.blendWeight = activeState.animations[i].normalizedWeight;\n\t\t\t}\n\n\t\t\tclip.play();\n\n\t\t\tif (hasTransitionOffset) {\n\t\t\t\tclip.time = activeState.timelineDuration * transition.transitionOffset;\n\t\t\t} else {\n\t\t\t\tconst startTime = activeState.speed >= 0 ? 0 : this.activeStateDuration;\n\t\t\t\tclip.time = startTime;\n\t\t\t}\n\t\t}\n\t}\n\n\t_transitionToState(newStateName) {\n\t\tif (!this._findState(newStateName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet transition = this._findTransition(this._activeStateName, newStateName);\n\n\t\tif (!transition) {\n\t\t\tthis._animEvaluator.removeClips();\n\n\t\t\ttransition = new AnimTransition({\n\t\t\t\tfrom: null,\n\t\t\t\tto: newStateName\n\t\t\t});\n\t\t}\n\n\t\tthis.updateStateFromTransition(transition);\n\t}\n\n\tassignAnimation(pathString, animTrack, speed, loop) {\n\t\tconst path = pathString.split('.');\n\n\t\tlet state = this._findState(path[0]);\n\n\t\tif (!state) {\n\t\t\tstate = new AnimState(this, path[0], 1.0);\n\t\t\tthis._states[path[0]] = state;\n\n\t\t\tthis._stateNames.push(path[0]);\n\t\t}\n\n\t\tstate.addAnimation(path, animTrack);\n\n\t\tif (speed !== undefined) {\n\t\t\tstate.speed = speed;\n\t\t}\n\n\t\tif (loop !== undefined) {\n\t\t\tstate.loop = loop;\n\t\t}\n\n\t\tif (!this._playing && this._activate && this.playable) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tremoveNodeAnimations(nodeName) {\n\t\tif (ANIM_CONTROL_STATES.indexOf(nodeName) !== -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state = this._findState(nodeName);\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\tstate.animations = [];\n\t\treturn true;\n\t}\n\n\tplay(stateName) {\n\t\tif (stateName) {\n\t\t\tthis._transitionToState(stateName);\n\t\t}\n\n\t\tthis._playing = true;\n\t}\n\n\tpause() {\n\t\tthis._playing = false;\n\t}\n\n\treset() {\n\t\tthis._previousStateName = null;\n\t\tthis._activeStateName = ANIM_STATE_START;\n\t\tthis._playing = false;\n\t\tthis._currTransitionTime = 1.0;\n\t\tthis._totalTransitionTime = 1.0;\n\t\tthis._isTransitioning = false;\n\t\tthis._timeInState = 0;\n\t\tthis._timeInStateBefore = 0;\n\n\t\tthis._animEvaluator.removeClips();\n\t}\n\n\trebind() {\n\t\tthis._animEvaluator.rebind();\n\t}\n\n\tupdate(dt) {\n\t\tif (!this._playing) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet state;\n\t\tlet animation;\n\t\tlet clip;\n\t\tthis._timeInStateBefore = this._timeInState;\n\t\tthis._timeInState += dt;\n\n\t\tconst transition = this._findTransition(this._activeStateName);\n\n\t\tif (transition) this.updateStateFromTransition(transition);\n\n\t\tif (this._isTransitioning) {\n\t\t\tthis._currTransitionTime += dt;\n\n\t\t\tif (this._currTransitionTime <= this._totalTransitionTime) {\n\t\t\t\tconst interpolatedTime = this._currTransitionTime / this._totalTransitionTime;\n\n\t\t\t\tfor (let i = 0; i < this._transitionPreviousStates.length; i++) {\n\t\t\t\t\tstate = this._findState(this._transitionPreviousStates[i].name);\n\t\t\t\t\tconst stateWeight = this._transitionPreviousStates[i].weight;\n\n\t\t\t\t\tfor (let j = 0; j < state.animations.length; j++) {\n\t\t\t\t\t\tanimation = state.animations[j];\n\t\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name + '.previous.' + i);\n\n\t\t\t\t\t\tif (clip) {\n\t\t\t\t\t\t\tclip.blendWeight = (1.0 - interpolatedTime) * animation.normalizedWeight * stateWeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tthis._animEvaluator.findClip(animation.name).blendWeight = interpolatedTime * animation.normalizedWeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._isTransitioning = false;\n\t\t\t\tconst activeClips = this.activeStateAnimations.length;\n\t\t\t\tconst totalClips = this._animEvaluator.clips.length;\n\n\t\t\t\tfor (let i = 0; i < totalClips - activeClips; i++) {\n\t\t\t\t\tthis._animEvaluator.removeClip(0);\n\t\t\t\t}\n\n\t\t\t\tthis._transitionPreviousStates = [];\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\n\t\t\t\t\tif (clip) {\n\t\t\t\t\t\tclip.blendWeight = animation.normalizedWeight;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.activeState._blendTree.constructor !== AnimNode) {\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\n\t\t\t\t\tif (clip) {\n\t\t\t\t\t\tclip.blendWeight = animation.normalizedWeight;\n\n\t\t\t\t\t\tif (animation.parent.syncAnimations) {\n\t\t\t\t\t\t\tclip.speed = animation.speed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._animEvaluator.update(dt);\n\t}\n\n\tfindParameter(name) {\n\t\treturn this._parameters[name];\n\t}\n\n}\n\nconst v2 = new Vec2();\nconst v3 = new Vec3();\nconst v4 = new Vec4();\nconst c = new Color();\nconst q = new Quat();\n\nclass AnimComponentBinder extends DefaultAnimBinder {\n\tconstructor(animComponent, graph) {\n\t\tsuper(graph);\n\t\tthis.animComponent = animComponent;\n\t}\n\n\tstatic _packFloat(values) {\n\t\treturn values[0];\n\t}\n\n\tstatic _packBoolean(values) {\n\t\treturn !!values[0];\n\t}\n\n\tstatic _packVec2(values) {\n\t\tv2.x = values[0];\n\t\tv2.y = values[1];\n\t\treturn v2;\n\t}\n\n\tstatic _packVec3(values) {\n\t\tv3.x = values[0];\n\t\tv3.y = values[1];\n\t\tv3.z = values[2];\n\t\treturn v3;\n\t}\n\n\tstatic _packVec4(values) {\n\t\tv4.x = values[0];\n\t\tv4.y = values[1];\n\t\tv4.z = values[2];\n\t\tv4.w = values[3];\n\t\treturn v4;\n\t}\n\n\tstatic _packColor(values) {\n\t\tc.r = values[0];\n\t\tc.g = values[1];\n\t\tc.b = values[2];\n\t\tc.a = values[3];\n\t\treturn c;\n\t}\n\n\tstatic _packQuat(values) {\n\t\tq.x = values[0];\n\t\tq.y = values[1];\n\t\tq.z = values[2];\n\t\tq.w = values[3];\n\t\treturn q;\n\t}\n\n\tresolve(path) {\n\t\tvar encodedPath = AnimBinder.encode(path.entityPath, path.component, path.propertyPath);\n\t\tvar target = this.targetCache[encodedPath];\n\t\tif (target) return target;\n\t\tvar entity;\n\t\tvar propertyComponent;\n\t\tvar targetPath;\n\n\t\tswitch (path.component) {\n\t\t\tcase 'entity':\n\t\t\t\tentity = this._getEntityFromHierarchy(path.entityPath);\n\t\t\t\ttargetPath = AnimBinder.encode(entity.path, 'entity', path.propertyPath);\n\t\t\t\tpropertyComponent = entity;\n\t\t\t\tbreak;\n\n\t\t\tcase 'graph':\n\t\t\t\tpropertyComponent = this.findNode(path);\n\t\t\t\tif (!propertyComponent) return null;\n\t\t\t\ttargetPath = AnimBinder.encode(propertyComponent.path, 'graph', path.propertyPath);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tentity = this._getEntityFromHierarchy(path.entityPath);\n\t\t\t\tpropertyComponent = entity.findComponent(path.component);\n\t\t\t\tif (!propertyComponent) return null;\n\t\t\t\ttargetPath = AnimBinder.encode(entity.path, path.component, path.propertyPath);\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttarget = this._createAnimTargetForProperty(propertyComponent, path.propertyPath, targetPath);\n\t\tthis.targetCache[encodedPath] = target;\n\t\treturn target;\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar activeNodes = this.activeNodes;\n\n\t\tif (activeNodes) {\n\t\t\tfor (var i = 0; i < activeNodes.length; i++) {\n\t\t\t\tactiveNodes[i]._dirtifyLocal();\n\t\t\t}\n\t\t}\n\t}\n\n\t_getEntityFromHierarchy(entityHierarchy) {\n\t\tif (!this.animComponent.entity.name === entityHierarchy[0]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar currEntity = this.animComponent.entity;\n\n\t\tif (entityHierarchy.length === 1) {\n\t\t\treturn currEntity;\n\t\t}\n\n\t\treturn currEntity._parent.findByPath(entityHierarchy);\n\t}\n\n\t_resolvePath(object, path, resolveLeaf) {\n\t\tvar steps = path.length - (resolveLeaf ? 0 : 1);\n\n\t\tfor (var i = 0; i < steps; i++) {\n\t\t\tobject = object[path[i]];\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t_setter(object, path, packFunc) {\n\t\tvar obj = this._resolvePath(object, path);\n\n\t\tvar key = path[path.length - 1];\n\t\tvar setterFunc = \"set\" + key.substring(0, 1).toUpperCase() + key.substring(1);\n\n\t\tif (obj[setterFunc]) {\n\t\t\tvar func = obj[setterFunc].bind(obj);\n\t\t\treturn function (values) {\n\t\t\t\tfunc(packFunc(values));\n\t\t\t};\n\t\t}\n\n\t\tvar prop = obj[key];\n\n\t\tif (typeof prop === 'object' && prop.hasOwnProperty('copy')) {\n\t\t\treturn function (values) {\n\t\t\t\tprop.copy(packFunc(values));\n\t\t\t};\n\t\t}\n\n\t\tif ([Vec2, Vec3, Vec4, Color, Quat].indexOf(obj.constructor) !== -1 && path.length > 1) {\n\t\t\tvar parent = path.length > 2 ? this._resolvePath(object, path.slice(0, -1)) : object;\n\t\t\tvar objKey = path[path.length - 2];\n\t\t\treturn function (values) {\n\t\t\t\tobj[key] = packFunc(values);\n\t\t\t\tparent[objKey] = obj;\n\t\t\t};\n\t\t}\n\n\t\treturn function (values) {\n\t\t\tobj[key] = packFunc(values);\n\t\t};\n\t}\n\n\t_createAnimTargetForProperty(propertyComponent, propertyHierarchy, targetPath) {\n\t\tif (this.handlers && propertyHierarchy[0] === 'weights') {\n\t\t\treturn this.handlers.weights(propertyComponent);\n\t\t} else if (this.handlers && propertyHierarchy[0] === 'material' && propertyHierarchy.length === 2) {\n\t\t\tvar materialPropertyName = propertyHierarchy[1];\n\n\t\t\tif (materialPropertyName.indexOf('Map') === materialPropertyName.length - 3) {\n\t\t\t\treturn this.handlers.materialTexture(propertyComponent, materialPropertyName);\n\t\t\t}\n\t\t}\n\n\t\tvar property = this._resolvePath(propertyComponent, propertyHierarchy, true);\n\n\t\tif (typeof property === 'undefined') return null;\n\t\tvar setter;\n\t\tvar animDataType;\n\t\tvar animDataComponents;\n\n\t\tif (typeof property === 'number') {\n\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packFloat);\n\t\t\tanimDataType = 'vector';\n\t\t\tanimDataComponents = 1;\n\t\t} else if (typeof property === 'boolean') {\n\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packBoolean);\n\t\t\tanimDataType = 'vector';\n\t\t\tanimDataComponents = 1;\n\t\t} else if (typeof property === 'object') {\n\t\t\tswitch (property.constructor) {\n\t\t\t\tcase Vec2:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec2);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 2;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Vec3:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec3);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 3;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Vec4:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec4);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Color:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packColor);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Quat:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packQuat);\n\t\t\t\t\tanimDataType = 'quaternion';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tif (propertyHierarchy.indexOf('material') !== -1) {\n\t\t\treturn new AnimTarget(function (values) {\n\t\t\t\tsetter(values);\n\t\t\t\tpropertyComponent.material.update();\n\t\t\t}, animDataType, animDataComponents, targetPath);\n\t\t}\n\n\t\treturn new AnimTarget(setter, animDataType, animDataComponents, targetPath);\n\t}\n\n\trebind() {\n\t\tthis.targetCache = {};\n\n\t\tif (this.animComponent.rootBone) {\n\t\t\tthis.graph = this.animComponent.rootBone;\n\t\t} else {\n\t\t\tthis.graph = this.animComponent.entity;\n\t\t}\n\n\t\tvar nodes = {};\n\n\t\tvar flatten = function flatten(node) {\n\t\t\tnodes[node.name] = node;\n\n\t\t\tfor (var i = 0; i < node.children.length; ++i) {\n\t\t\t\tflatten(node.children[i]);\n\t\t\t}\n\t\t};\n\n\t\tflatten(this.graph);\n\t\tthis.nodes = nodes;\n\t}\n\n}\n\nclass AnimComponentLayer {\n\tconstructor(name, controller, component) {\n\t\tthis._name = name;\n\t\tthis._controller = controller;\n\t\tthis._component = component;\n\t}\n\n\tplay(name) {\n\t\tthis._controller.play(name);\n\t}\n\n\tpause() {\n\t\tthis._controller.pause();\n\t}\n\n\treset() {\n\t\tthis._controller.reset();\n\t}\n\n\trebind() {\n\t\tthis._controller.rebind();\n\t}\n\n\tupdate(dt) {\n\t\tthis._controller.update(dt);\n\t}\n\n\tassignAnimation(nodeName, animTrack, speed, loop) {\n\t\tif (animTrack.constructor !== AnimTrack) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._controller.assignAnimation(nodeName, animTrack, speed, loop);\n\n\t\tif (this._component.activate && this._component.playable) {\n\t\t\tthis._component.playing = true;\n\t\t}\n\t}\n\n\tremoveNodeAnimations(nodeName) {\n\t\tif (this._controller.removeNodeAnimations(nodeName)) {\n\t\t\tthis._component.playing = false;\n\t\t}\n\t}\n\n\ttransition(to, time = 0, transitionOffset = null) {\n\t\tthis._controller.updateStateFromTransition(new AnimTransition({\n\t\t\tfrom: this._controller.activeStateName,\n\t\t\tto,\n\t\t\ttime,\n\t\t\ttransitionOffset\n\t\t}));\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget playing() {\n\t\treturn this._controller.playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._controller.playing = value;\n\t}\n\n\tget playable() {\n\t\treturn this._controller.playable;\n\t}\n\n\tget activeState() {\n\t\treturn this._controller.activeStateName;\n\t}\n\n\tget previousState() {\n\t\treturn this._controller.previousStateName;\n\t}\n\n\tget activeStateProgress() {\n\t\treturn this._controller.activeStateProgress;\n\t}\n\n\tget activeStateDuration() {\n\t\treturn this._controller.activeStateDuration;\n\t}\n\n\tget activeStateCurrentTime() {\n\t\treturn this._controller.activeStateCurrentTime;\n\t}\n\n\tset activeStateCurrentTime(time) {\n\t\tthis._controller.activeStateCurrentTime = time;\n\t}\n\n\tget transitioning() {\n\t\treturn this._controller.transitioning;\n\t}\n\n\tget transitionProgress() {\n\t\tif (this.transitioning) {\n\t\t\treturn this._controller.transitionProgress;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tget states() {\n\t\treturn this._controller.states;\n\t}\n\n}\n\nclass AnimComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\n\t\tthis._onStateGraphAssetChangeEvent = asset => {\n\t\t\tthis._stateGraph = new AnimStateGraph(asset._data);\n\t\t\tthis.loadStateGraph(this._stateGraph);\n\t\t};\n\n\t\tthis._stateGraphAsset = null;\n\t\tthis._animationAssets = {};\n\t\tthis._speed = 1.0;\n\t\tthis._activate = true;\n\t\tthis._playing = false;\n\t\tthis._rootBone = null;\n\t\tthis._stateGraph = null;\n\t\tthis._layers = [];\n\t\tthis._layerIndices = {};\n\t\tthis._parameters = {};\n\t}\n\n\tget stateGraphAsset() {\n\t\treturn this._stateGraphAsset;\n\t}\n\n\tset stateGraphAsset(value) {\n\t\tif (value === null) {\n\t\t\tthis.removeStateGraph();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._stateGraphAsset) this.system.app.assets.get(this._stateGraphAsset).off('change', this._onStateGraphAssetChangeEvent);\n\n\t\tlet _id;\n\n\t\tlet _asset;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t\t_asset = this.system.app.assets.get(_id);\n\n\t\t\tif (!_asset) {\n\t\t\t\tthis.system.app.assets.add(value);\n\t\t\t\t_asset = this.system.app.assets.get(_id);\n\t\t\t}\n\t\t} else {\n\t\t\t_id = value;\n\t\t\t_asset = this.system.app.assets.get(_id);\n\t\t}\n\n\t\tif (!_asset || this._stateGraphAsset === _id) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_asset.resource) {\n\t\t\tthis._stateGraph = _asset.resource;\n\t\t\tthis.loadStateGraph(this._stateGraph);\n\n\t\t\t_asset.on('change', this._onStateGraphAssetChangeEvent);\n\t\t} else {\n\t\t\t_asset.once('load', asset => {\n\t\t\t\tthis._stateGraph = asset.resource;\n\t\t\t\tthis.loadStateGraph(this._stateGraph);\n\t\t\t});\n\n\t\t\t_asset.on('change', this._onStateGraphAssetChangeEvent);\n\n\t\t\tthis.system.app.assets.load(_asset);\n\t\t}\n\n\t\tthis._stateGraphAsset = _id;\n\t}\n\n\tget animationAssets() {\n\t\treturn this._animationAssets;\n\t}\n\n\tset animationAssets(value) {\n\t\tthis._animationAssets = value;\n\t\tthis.loadAnimationAssets();\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget activate() {\n\t\treturn this._activate;\n\t}\n\n\tset activate(value) {\n\t\tthis._activate = value;\n\t}\n\n\tget playing() {\n\t\treturn this._playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._playing = value;\n\t}\n\n\tget rootBone() {\n\t\treturn this._rootBone;\n\t}\n\n\tset rootBone(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tconst entity = this.entity.root.findByGuid(value);\n\t\t\tthis._rootBone = entity;\n\t\t} else if ((value == null ? void 0 : value.constructor.name) === 'Entity') {\n\t\t\tthis._rootBone = value;\n\t\t} else {\n\t\t\tthis._rootBone = null;\n\t\t}\n\n\t\tthis.rebind();\n\t}\n\n\tget stateGraph() {\n\t\treturn this._stateGraph;\n\t}\n\n\tset stateGraph(value) {\n\t\tthis._stateGraph = value;\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tthis._layers = value;\n\t}\n\n\tget layerIndicies() {\n\t\treturn this._layerIndicies;\n\t}\n\n\tset layerIndicies(value) {\n\t\tthis._layerIndicies = value;\n\t}\n\n\tget parameters() {\n\t\treturn this._parameters;\n\t}\n\n\tset parameters(value) {\n\t\tthis._parameters = value;\n\t}\n\n\tget playable() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tif (!this._layers[i].playable) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget baseLayer() {\n\t\tif (this._layers.length > 0) {\n\t\t\treturn this._layers[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_addLayer(name, states, transitions, order) {\n\t\tlet graph;\n\n\t\tif (this.rootBone) {\n\t\t\tgraph = this.rootBone;\n\t\t} else {\n\t\t\tgraph = this.entity;\n\t\t}\n\n\t\tconst animBinder = new AnimComponentBinder(this, graph);\n\t\tconst animEvaluator = new AnimEvaluator(animBinder);\n\t\tconst controller = new AnimController(animEvaluator, states, transitions, this._parameters, this._activate, this);\n\n\t\tthis._layers.push(new AnimComponentLayer(name, controller, this));\n\n\t\tthis._layerIndices[name] = order;\n\t}\n\n\taddLayer(layerName) {\n\t\tconst layer = this.findAnimationLayer(layerName);\n\t\tif (layer) return layer;\n\t\tconst states = [{\n\t\t\t\"name\": \"START\",\n\t\t\t\"speed\": 1\n\t\t}];\n\t\tconst transitions = [];\n\n\t\tthis._addLayer(layerName, states, transitions, this._layers.length);\n\t}\n\n\tloadStateGraph(stateGraph) {\n\t\tthis._stateGraph = stateGraph;\n\t\tthis._parameters = {};\n\t\tconst paramKeys = Object.keys(stateGraph.parameters);\n\n\t\tfor (let i = 0; i < paramKeys.length; i++) {\n\t\t\tconst paramKey = paramKeys[i];\n\t\t\tthis._parameters[paramKey] = {\n\t\t\t\ttype: stateGraph.parameters[paramKey].type,\n\t\t\t\tvalue: stateGraph.parameters[paramKey].value\n\t\t\t};\n\t\t}\n\n\t\tthis._layers = [];\n\n\t\tfor (let i = 0; i < stateGraph.layers.length; i++) {\n\t\t\tconst layer = stateGraph.layers[i];\n\n\t\t\tthis._addLayer.bind(this)(layer.name, layer.states, layer.transitions, i);\n\t\t}\n\n\t\tthis.setupAnimationAssets();\n\t}\n\n\tsetupAnimationAssets() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = this._layers[i];\n\t\t\tconst layerName = layer.name;\n\n\t\t\tfor (let j = 0; j < layer.states.length; j++) {\n\t\t\t\tconst stateName = layer.states[j];\n\n\t\t\t\tif (ANIM_CONTROL_STATES.indexOf(stateName) === -1) {\n\t\t\t\t\tconst stateKey = layerName + ':' + stateName;\n\n\t\t\t\t\tif (!this._animationAssets[stateKey]) {\n\t\t\t\t\t\tthis._animationAssets[stateKey] = {\n\t\t\t\t\t\t\tasset: null\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loadAnimationAssets();\n\t}\n\n\tloadAnimationAssets() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = this._layers[i];\n\n\t\t\tfor (let j = 0; j < layer.states.length; j++) {\n\t\t\t\tconst stateName = layer.states[j];\n\t\t\t\tif (ANIM_CONTROL_STATES.indexOf(stateName) !== -1) continue;\n\t\t\t\tconst animationAsset = this._animationAssets[layer.name + ':' + stateName];\n\n\t\t\t\tif (!animationAsset || !animationAsset.asset) {\n\t\t\t\t\tthis.removeNodeAnimations(stateName, layer.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst assetId = animationAsset.asset;\n\t\t\t\tconst asset = this.system.app.assets.get(assetId);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tif (asset.resource) {\n\t\t\t\t\t\tconst animTrack = asset.resource;\n\n\t\t\t\t\t\tif (asset.data.events) {\n\t\t\t\t\t\t\tanimTrack.events = new AnimEvents(Object.values(asset.data.events));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.findAnimationLayer(layer.name).assignAnimation(stateName, animTrack);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasset.once('load', function (layerName, stateName) {\n\t\t\t\t\t\t\treturn function (asset) {\n\t\t\t\t\t\t\t\tthis.findAnimationLayer(layerName).assignAnimation(stateName, asset.resource);\n\t\t\t\t\t\t\t}.bind(this);\n\t\t\t\t\t\t}.bind(this)(layer.name, stateName));\n\t\t\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveStateGraph() {\n\t\tthis._stateGraph = null;\n\t\tthis._stateGraphAsset = null;\n\t\tthis._animationAssets = {};\n\t\tthis._layers = [];\n\t\tthis._layerIndices = {};\n\t\tthis._parameters = {};\n\t\tthis._playing = false;\n\t}\n\n\tresetStateGraph() {\n\t\tif (this.stateGraphAsset) {\n\t\t\tconst stateGraph = this.system.app.assets.get(this.stateGraphAsset).resource;\n\t\t\tthis.loadStateGraph(stateGraph);\n\t\t} else {\n\t\t\tthis.removeStateGraph();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis._parameters = Object.assign({}, this._stateGraph.parameters);\n\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layerPlaying = this._layers[i].playing;\n\n\t\t\tthis._layers[i].reset();\n\n\t\t\tthis._layers[i].playing = layerPlaying;\n\t\t}\n\t}\n\n\trebind() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tthis._layers[i].rebind();\n\t\t}\n\t}\n\n\tfindAnimationLayer(layerName) {\n\t\tconst layerIndex = this._layerIndices[layerName];\n\t\treturn this._layers[layerIndex] || null;\n\t}\n\n\taddAnimationState(nodeName, animTrack, speed = 1, loop = true, layerName = 'Base') {\n\t\tif (!this._stateGraph) {\n\t\t\tthis.loadStateGraph(new AnimStateGraph({\n\t\t\t\t\"layers\": [{\n\t\t\t\t\t\"name\": layerName,\n\t\t\t\t\t\"states\": [{\n\t\t\t\t\t\t\"name\": \"START\",\n\t\t\t\t\t\t\"speed\": 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\t\"name\": nodeName,\n\t\t\t\t\t\t\"speed\": speed,\n\t\t\t\t\t\t\"loop\": loop,\n\t\t\t\t\t\t\"defaultState\": true\n\t\t\t\t\t}],\n\t\t\t\t\t\"transitions\": [{\n\t\t\t\t\t\t\"from\": 'START',\n\t\t\t\t\t\t\"to\": nodeName\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\t\"parameters\": {}\n\t\t\t}));\n\t\t}\n\n\t\tconst layer = this.findAnimationLayer(layerName);\n\n\t\tif (layer) {\n\t\t\tlayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t\t} else {\n\t\t\tvar _this$addLayer;\n\n\t\t\t(_this$addLayer = this.addLayer(layerName)) == null ? void 0 : _this$addLayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t\t}\n\t}\n\n\tassignAnimation(nodeName, animTrack, layerName, speed = 1, loop = true) {\n\t\tif (!this._stateGraph) {\n\t\t\tthis.loadStateGraph(new AnimStateGraph({\n\t\t\t\t\"layers\": [{\n\t\t\t\t\t\"name\": \"Base\",\n\t\t\t\t\t\"states\": [{\n\t\t\t\t\t\t\"name\": \"START\",\n\t\t\t\t\t\t\"speed\": 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\t\"name\": nodeName,\n\t\t\t\t\t\t\"speed\": speed,\n\t\t\t\t\t\t\"loop\": loop,\n\t\t\t\t\t\t\"defaultState\": true\n\t\t\t\t\t}],\n\t\t\t\t\t\"transitions\": [{\n\t\t\t\t\t\t\"from\": 'START',\n\t\t\t\t\t\t\"to\": nodeName\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\t\"parameters\": {}\n\t\t\t}));\n\t\t\tthis.baseLayer.assignAnimation(nodeName, animTrack);\n\t\t\treturn;\n\t\t}\n\n\t\tconst layer = layerName ? this.findAnimationLayer(layerName) : this.baseLayer;\n\n\t\tif (!layer) {\n\t\t\treturn;\n\t\t}\n\n\t\tlayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t}\n\n\tremoveNodeAnimations(nodeName, layerName) {\n\t\tconst layer = layerName ? this.findAnimationLayer(layerName) : this.baseLayer;\n\n\t\tif (!layer) {\n\t\t\treturn;\n\t\t}\n\n\t\tlayer.removeNodeAnimations(nodeName);\n\t}\n\n\tgetParameterValue(name, type) {\n\t\tconst param = this._parameters[name];\n\n\t\tif (param && param.type === type) {\n\t\t\treturn param.value;\n\t\t}\n\t}\n\n\tsetParameterValue(name, type, value) {\n\t\tconst param = this._parameters[name];\n\n\t\tif (param && param.type === type) {\n\t\t\tparam.value = value;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tgetFloat(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_FLOAT);\n\t}\n\n\tsetFloat(name, value) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_FLOAT, value);\n\t}\n\n\tgetInteger(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_INTEGER);\n\t}\n\n\tsetInteger(name, value) {\n\t\tif (typeof value === 'number' && value % 1 === 0) {\n\t\t\tthis.setParameterValue(name, ANIM_PARAMETER_INTEGER, value);\n\t\t}\n\t}\n\n\tgetBoolean(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_BOOLEAN);\n\t}\n\n\tsetBoolean(name, value) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_BOOLEAN, !!value);\n\t}\n\n\tgetTrigger(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_TRIGGER);\n\t}\n\n\tsetTrigger(name) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_TRIGGER, true);\n\t}\n\n\tresetTrigger(name) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_TRIGGER, false);\n\t}\n\n\tonBeforeRemove() {\n\t\tif (Number.isFinite(this._stateGraphAsset)) {\n\t\t\tthis.system.app.assets.get(this._stateGraphAsset).off('change', this._onStateGraphAssetChangeEvent);\n\t\t}\n\t}\n\n}\n\nclass AnimComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$k = ['enabled'];\n\nclass AnimComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'anim';\n\t\tthis.ComponentType = AnimComponent;\n\t\tthis.DataType = AnimComponentData;\n\t\tthis.schema = _schema$k;\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind('animationUpdate', this.onAnimationUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$k);\n\t\tconst complexProperties = ['animationAssets', 'stateGraph', 'layers'];\n\t\tObject.keys(data).forEach(key => {\n\t\t\tif (complexProperties.includes(key)) return;\n\t\t\tcomponent[key] = data[key];\n\t\t});\n\n\t\tif (data.stateGraph) {\n\t\t\tcomponent.stateGraph = data.stateGraph;\n\t\t\tcomponent.loadStateGraph(component.stateGraph);\n\t\t}\n\n\t\tif (data.layers) {\n\t\t\tdata.layers.forEach((layer, i) => {\n\t\t\t\tlayer._controller.states.forEach(stateKey => {\n\t\t\t\t\tlayer._controller._states[stateKey]._animationList.forEach(node => {\n\t\t\t\t\t\tcomponent.layers[i].assignAnimation(node.name, node.animTrack);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (data.animationAssets) {\n\t\t\tcomponent.animationAssets = Object.assign(component.animationAssets, data.animationAssets);\n\t\t}\n\t}\n\n\tonAnimationUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id].entity.anim;\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && component.entity.enabled && component.playing) {\n\t\t\t\t\tfor (var i = 0; i < component.layers.length; i++) {\n\t\t\t\t\t\tcomponent.layers[i].update(dt * component.speed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\tstateGraphAsset: entity.anim.stateGraphAsset,\n\t\t\tanimationAssets: entity.anim.animationAssets,\n\t\t\tspeed: entity.anim.speed,\n\t\t\tactivate: entity.anim.activate,\n\t\t\tplaying: entity.anim.playing,\n\t\t\trootBone: entity.anim.rootBone,\n\t\t\tstateGraph: entity.anim.stateGraph,\n\t\t\tlayers: entity.anim.layers,\n\t\t\tlayerIndices: entity.anim.layerIndices,\n\t\t\tparameters: entity.anim.parameters\n\t\t};\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(AnimComponent.prototype, _schema$k);\n\nclass AudioListenerComponent extends Component {\n\tsetCurrentListener() {\n\t\tif (this.enabled && this.entity.audiolistener && this.entity.enabled) {\n\t\t\tthis.system.current = this.entity;\n\t\t\tvar position = this.system.current.getPosition();\n\t\t\tthis.system.manager.listener.setPosition(position);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis.setCurrentListener();\n\t}\n\n\tonDisable() {\n\t\tif (this.system.current === this.entity) {\n\t\t\tthis.system.current = null;\n\t\t}\n\t}\n\n}\n\nclass AudioListenerComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$j = ['enabled'];\n\nclass AudioListenerComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"audiolistener\";\n\t\tthis.ComponentType = AudioListenerComponent;\n\t\tthis.DataType = AudioListenerComponentData;\n\t\tthis.schema = _schema$j;\n\t\tthis.manager = manager;\n\t\tthis.current = null;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['enabled'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tonUpdate(dt) {\n\t\tif (this.current) {\n\t\t\tvar position = this.current.getPosition();\n\t\t\tthis.manager.listener.setPosition(position);\n\t\t\tvar wtm = this.current.getWorldTransform();\n\t\t\tthis.manager.listener.setOrientation(wtm);\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(AudioListenerComponent.prototype, _schema$j);\n\nclass AudioSourceComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_assets\", this.onSetAssets, this);\n\t\tthis.on(\"set_loop\", this.onSetLoop, this);\n\t\tthis.on(\"set_volume\", this.onSetVolume, this);\n\t\tthis.on(\"set_pitch\", this.onSetPitch, this);\n\t\tthis.on(\"set_minDistance\", this.onSetMinDistance, this);\n\t\tthis.on(\"set_maxDistance\", this.onSetMaxDistance, this);\n\t\tthis.on(\"set_rollOffFactor\", this.onSetRollOffFactor, this);\n\t\tthis.on(\"set_distanceModel\", this.onSetDistanceModel, this);\n\t\tthis.on(\"set_3d\", this.onSet3d, this);\n\t}\n\n\tplay(name) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.channel) {\n\t\t\tthis.stop();\n\t\t}\n\n\t\tvar channel;\n\t\tvar componentData = this.data;\n\n\t\tif (componentData.sources[name]) {\n\t\t\tif (!componentData['3d']) {\n\t\t\t\tchannel = this.system.manager.playSound(componentData.sources[name], componentData);\n\t\t\t\tcomponentData.currentSource = name;\n\t\t\t\tcomponentData.channel = channel;\n\t\t\t} else {\n\t\t\t\tvar pos = this.entity.getPosition();\n\t\t\t\tchannel = this.system.manager.playSound3d(componentData.sources[name], pos, componentData);\n\t\t\t\tcomponentData.currentSource = name;\n\t\t\t\tcomponentData.channel = channel;\n\t\t\t}\n\t\t}\n\t}\n\n\tpause() {\n\t\tif (this.channel) {\n\t\t\tthis.channel.pause();\n\t\t}\n\t}\n\n\tunpause() {\n\t\tif (this.channel && this.channel.paused) {\n\t\t\tthis.channel.unpause();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.channel) {\n\t\t\tthis.channel.stop();\n\t\t\tthis.channel = null;\n\t\t}\n\t}\n\n\tonSetAssets(name, oldValue, newValue) {\n\t\tvar newAssets = [];\n\t\tvar i,\n\t\t\t\tlen = newValue.length;\n\n\t\tif (oldValue && oldValue.length) {\n\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\tif (oldValue[i]) {\n\t\t\t\t\tvar asset = this.system.app.assets.get(oldValue[i]);\n\n\t\t\t\t\tif (asset) {\n\t\t\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\t\t\t\t\tif (this.currentSource === asset.name) {\n\t\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (len) {\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (oldValue.indexOf(newValue[i]) < 0) {\n\t\t\t\t\tif (newValue[i] instanceof Asset) {\n\t\t\t\t\t\tnewAssets.push(newValue[i].id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAssets.push(newValue[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.system._inTools && newAssets.length) {\n\t\t\tthis.loadAudioSourceAssets(newAssets);\n\t\t}\n\t}\n\n\tonAssetChanged(asset, attribute, newValue, oldValue) {\n\t\tif (attribute === 'resource') {\n\t\t\tvar sources = this.data.sources;\n\n\t\t\tif (sources) {\n\t\t\t\tthis.data.sources[asset.name] = newValue;\n\n\t\t\t\tif (this.data.currentSource === asset.name) {\n\t\t\t\t\tif (this.channel) {\n\t\t\t\t\t\tif (this.channel.paused) {\n\t\t\t\t\t\t\tthis.play(asset.name);\n\t\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.play(asset.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.data.sources[asset.name]) {\n\t\t\tdelete this.data.sources[asset.name];\n\n\t\t\tif (this.data.currentSource === asset.name) {\n\t\t\t\tthis.stop();\n\t\t\t\tthis.data.currentSource = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setLoop(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetVolume(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setVolume(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetPitch(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setPitch(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetMaxDistance(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setMaxDistance(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetMinDistance(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setMinDistance(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetRollOffFactor(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setRollOffFactor(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetDistanceModel(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setDistanceModel(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSet3d(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.system.initialized && this.currentSource) {\n\t\t\t\tvar paused = false;\n\t\t\t\tvar suspended = false;\n\n\t\t\t\tif (this.channel) {\n\t\t\t\t\tpaused = this.channel.paused;\n\t\t\t\t\tsuspended = this.channel.suspended;\n\t\t\t\t}\n\n\t\t\t\tthis.play(this.currentSource);\n\n\t\t\t\tif (this.channel) {\n\t\t\t\t\tthis.channel.paused = paused;\n\t\t\t\t\tthis.channel.suspended = suspended;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar assets = this.data.assets;\n\n\t\tif (assets) {\n\t\t\tvar registry = this.system.app.assets;\n\n\t\t\tfor (var i = 0, len = assets.length; i < len; i++) {\n\t\t\t\tvar asset = assets[i];\n\t\t\t\tif (!(asset instanceof Asset)) asset = registry.get(asset);\n\n\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\tregistry.load(asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.system.initialized) {\n\t\t\tif (this.data.activate && !this.channel) {\n\t\t\t\tthis.play(this.currentSource);\n\t\t\t} else {\n\t\t\t\tthis.unpause();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.pause();\n\t}\n\n\tloadAudioSourceAssets(ids) {\n\t\tvar self = this;\n\t\tvar assets = ids.map(function (id) {\n\t\t\treturn this.system.app.assets.get(id);\n\t\t}, this);\n\t\tvar sources = {};\n\t\tvar currentSource = null;\n\t\tvar count = assets.length;\n\n\t\tvar _error = function _error(e) {\n\t\t\tcount--;\n\t\t};\n\n\t\tvar _done = function () {\n\t\t\tthis.data.sources = sources;\n\t\t\tthis.data.currentSource = currentSource;\n\n\t\t\tif (this.enabled && this.activate && currentSource) {\n\t\t\t\tthis.onEnable();\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tassets.forEach(function (asset, index) {\n\t\t\tif (asset) {\n\t\t\t\tcurrentSource = currentSource || asset.name;\n\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\tasset.on('change', this.onAssetChanged, this);\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.off('error', _error, this);\n\t\t\t\tasset.on('error', _error, this);\n\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\tsources[asset.name] = asset.resource;\n\t\t\t\t\tcount--;\n\n\t\t\t\t\tif (count === 0) {\n\t\t\t\t\t\t_done();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!asset.resource && self.enabled && self.entity.enabled) this.system.app.assets.load(asset);\n\t\t\t} else {\n\t\t\t\tcount--;\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\t_done();\n\t\t\t\t}\n\n\t\t\t\tthis.system.app.assets.on(\"add:\" + ids[index], function (asset) {\n\t\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\t\tself.data.sources[asset.name] = asset.resource;\n\t\t\t\t\t});\n\t\t\t\t\tif (!asset.resource) self.system.app.assets.load(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\t}\n\n}\n\nclass AudioSourceComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.assets = [];\n\t\tthis.activate = true;\n\t\tthis.volume = 1;\n\t\tthis.pitch = 1;\n\t\tthis.loop = false;\n\t\tthis['3d'] = true;\n\t\tthis.minDistance = 1;\n\t\tthis.maxDistance = 10000;\n\t\tthis.rollOffFactor = 1;\n\t\tthis.distanceModel = DISTANCE_INVERSE;\n\t\tthis.paused = true;\n\t\tthis.sources = {};\n\t\tthis.currentSource = null;\n\t\tthis.channel = null;\n\t}\n\n}\n\nconst _schema$i = ['enabled', 'assets', 'volume', 'pitch', 'loop', 'activate', '3d', 'minDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'sources', 'currentSource', 'channel'];\n\nclass AudioSourceComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"audiosource\";\n\t\tthis.ComponentType = AudioSourceComponent;\n\t\tthis.DataType = AudioSourceComponentData;\n\t\tthis.schema = _schema$i;\n\t\tthis.manager = manager;\n\t\tthis.initialized = false;\n\t\tComponentSystem.bind('initialize', this.onInitialize, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['activate', 'volume', 'pitch', 'loop', '3d', 'minDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'enabled', 'assets'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\tcomponent.paused = !(component.enabled && component.activate);\n\t}\n\n\tonInitialize(root) {\n\t\tif (root.audiosource && root.enabled && root.audiosource.enabled && root.audiosource.activate) {\n\t\t\troot.audiosource.play(root.audiosource.currentSource);\n\t\t}\n\n\t\tvar children = root._children;\n\t\tvar i,\n\t\t\t\tlen = children.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\tthis.onInitialize(children[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis.initialized = true;\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\t\t\t\tvar entity = component.entity;\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && entity.enabled && componentData.channel instanceof Channel3d) {\n\t\t\t\t\tvar pos = entity.getPosition();\n\t\t\t\t\tcomponentData.channel.setPosition(pos);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonRemove(entity, data) {\n\t\tif (data.channel) {\n\t\t\tdata.channel.stop();\n\t\t\tdata.channel = null;\n\t\t}\n\t}\n\n\tsetVolume(volume) {\n\t\tthis.manager.setVolume(volume);\n\t}\n\n}\n\nComponent._buildAccessors(AudioSourceComponent.prototype, _schema$i);\n\nclass EntityReference extends EventHandler {\n\tconstructor(parentComponent, entityPropertyName, eventConfig) {\n\t\tsuper();\n\n\t\tif (!parentComponent || !(parentComponent instanceof Component)) {\n\t\t\tthrow new Error('The parentComponent argument is required and must be a Component');\n\t\t} else if (!entityPropertyName || typeof entityPropertyName !== 'string') {\n\t\t\tthrow new Error('The propertyName argument is required and must be a string');\n\t\t} else if (eventConfig && typeof eventConfig !== 'object') {\n\t\t\tthrow new Error('If provided, the eventConfig argument must be an object');\n\t\t}\n\n\t\tthis._parentComponent = parentComponent;\n\t\tthis._entityPropertyName = entityPropertyName;\n\t\tthis._entity = null;\n\t\tthis._app = parentComponent.system.app;\n\n\t\tthis._configureEventListeners(eventConfig || {}, {\n\t\t\t'entity#destroy': this._onEntityDestroy\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_configureEventListeners(externalEventConfig, internalEventConfig) {\n\t\tvar externalEventListenerConfigs = this._parseEventListenerConfig(externalEventConfig, 'external', this._parentComponent);\n\n\t\tvar internalEventListenerConfigs = this._parseEventListenerConfig(internalEventConfig, 'internal', this);\n\n\t\tthis._eventListenerConfigs = externalEventListenerConfigs.concat(internalEventListenerConfigs);\n\t\tthis._listenerStatusFlags = {};\n\t\tthis._gainListeners = {};\n\t\tthis._loseListeners = {};\n\t}\n\n\t_parseEventListenerConfig(eventConfig, prefix, scope) {\n\t\treturn Object.keys(eventConfig).map(function (listenerDescription, index) {\n\t\t\tvar listenerDescriptionParts = listenerDescription.split('#');\n\t\t\tvar sourceName = listenerDescriptionParts[0];\n\t\t\tvar eventName = listenerDescriptionParts[1];\n\t\t\tvar callback = eventConfig[listenerDescription];\n\n\t\t\tif (listenerDescriptionParts.length !== 2 || typeof sourceName !== 'string' || sourceName.length === 0 || typeof eventName !== 'string' || eventName.length === 0) {\n\t\t\t\tthrow new Error('Invalid event listener description: `' + listenerDescription + '`');\n\t\t\t}\n\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\tthrow new Error('Invalid or missing callback for event listener `' + listenerDescription + '`');\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tid: prefix + '_' + index + '_' + listenerDescription,\n\t\t\t\tsourceName: sourceName,\n\t\t\t\teventName: eventName,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope: scope\n\t\t\t};\n\t\t}, this);\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis._parentComponent[onOrOff]('set_' + this._entityPropertyName, this._onSetEntity, this);\n\n\t\tthis._parentComponent.system[onOrOff]('beforeremove', this._onParentComponentRemove, this);\n\n\t\tComponentSystem[onOrOff]('postinitialize', this._onPostInitialize, this);\n\n\t\tthis._app[onOrOff]('tools:sceneloaded', this._onSceneLoaded, this);\n\n\t\tvar allComponentSystems = [];\n\n\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\tvar config = this._eventListenerConfigs[i];\n\t\t\tvar componentSystem = this._app.systems[config.sourceName];\n\n\t\t\tif (componentSystem) {\n\t\t\t\tif (allComponentSystems.indexOf(componentSystem) === -1) {\n\t\t\t\t\tallComponentSystems.push(componentSystem);\n\t\t\t\t}\n\n\t\t\t\tif (componentSystem && config.eventName === 'gain') {\n\t\t\t\t\tthis._gainListeners[config.sourceName] = config;\n\t\t\t\t}\n\n\t\t\t\tif (componentSystem && config.eventName === 'lose') {\n\t\t\t\t\tthis._loseListeners[config.sourceName] = config;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var j = 0; j < allComponentSystems.length; ++j) {\n\t\t\tallComponentSystems[j][onOrOff]('add', this._onComponentAdd, this);\n\t\t\tallComponentSystems[j][onOrOff]('beforeremove', this._onComponentRemove, this);\n\t\t}\n\t}\n\n\t_onSetEntity(name, oldValue, newValue) {\n\t\tif (newValue instanceof Entity) {\n\t\t\tthis._updateEntityReference();\n\t\t} else {\n\t\t\tif (newValue !== null && newValue !== undefined && typeof newValue !== 'string') {\n\t\t\t\tconsole.warn(\"Entity field `\" + this._entityPropertyName + \"` was set to unexpected type '\" + typeof newValue + \"'\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (oldValue !== newValue) {\n\t\t\t\tthis._updateEntityReference();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onPostInitialize() {\n\t\tthis._updateEntityReference();\n\t}\n\n\tonParentComponentEnable() {\n\t\tif (!this._entity) {\n\t\t\tthis._updateEntityReference();\n\t\t}\n\t}\n\n\t_onSceneLoaded() {\n\t\tthis._updateEntityReference();\n\t}\n\n\t_updateEntityReference() {\n\t\tvar nextEntityGuid = this._parentComponent.data[this._entityPropertyName];\n\t\tvar nextEntity;\n\n\t\tif (nextEntityGuid instanceof Entity) {\n\t\t\tnextEntity = nextEntityGuid;\n\t\t\tnextEntityGuid = nextEntity.getGuid();\n\t\t\tthis._parentComponent.data[this._entityPropertyName] = nextEntityGuid;\n\t\t} else {\n\t\t\tvar root = this._parentComponent.system.app.root;\n\n\t\t\tvar isOnSceneGraph = this._parentComponent.entity.isDescendantOf(root);\n\n\t\t\tnextEntity = isOnSceneGraph && nextEntityGuid ? root.findByGuid(nextEntityGuid) : null;\n\t\t}\n\n\t\tvar hasChanged = this._entity !== nextEntity;\n\n\t\tif (hasChanged) {\n\t\t\tif (this._entity) {\n\t\t\t\tthis._onBeforeEntityChange();\n\t\t\t}\n\n\t\t\tthis._entity = nextEntity;\n\n\t\t\tif (this._entity) {\n\t\t\t\tthis._onAfterEntityChange();\n\t\t\t}\n\n\t\t\tthis.fire('set:entity', this._entity);\n\t\t}\n\t}\n\n\t_onBeforeEntityChange() {\n\t\tthis._toggleEntityListeners('off');\n\n\t\tthis._callAllGainOrLoseListeners(this._loseListeners);\n\t}\n\n\t_onAfterEntityChange() {\n\t\tthis._toggleEntityListeners('on');\n\n\t\tthis._callAllGainOrLoseListeners(this._gainListeners);\n\t}\n\n\t_onComponentAdd(entity, component) {\n\t\tvar componentName = component.system.id;\n\n\t\tif (entity === this._entity) {\n\t\t\tthis._callGainOrLoseListener(componentName, this._gainListeners);\n\n\t\t\tthis._toggleComponentListeners('on', componentName);\n\t\t}\n\t}\n\n\t_onComponentRemove(entity, component) {\n\t\tvar componentName = component.system.id;\n\n\t\tif (entity === this._entity) {\n\t\t\tthis._callGainOrLoseListener(componentName, this._loseListeners);\n\n\t\t\tthis._toggleComponentListeners('off', componentName, true);\n\t\t}\n\t}\n\n\t_callAllGainOrLoseListeners(listenerMap) {\n\t\tfor (var componentName in this._entity.c) {\n\t\t\tthis._callGainOrLoseListener(componentName, listenerMap);\n\t\t}\n\t}\n\n\t_callGainOrLoseListener(componentName, listenerMap) {\n\t\tif (this._entity.c.hasOwnProperty(componentName) && listenerMap[componentName]) {\n\t\t\tvar config = listenerMap[componentName];\n\t\t\tconfig.callback.call(config.scope);\n\t\t}\n\t}\n\n\t_toggleEntityListeners(onOrOff, isDestroying) {\n\t\tif (this._entity) {\n\t\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\t\tthis._safeToggleListener(onOrOff, this._eventListenerConfigs[i], isDestroying);\n\t\t\t}\n\t\t}\n\t}\n\n\t_toggleComponentListeners(onOrOff, componentName, isDestroying) {\n\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\tvar config = this._eventListenerConfigs[i];\n\n\t\t\tif (config.sourceName === componentName) {\n\t\t\t\tthis._safeToggleListener(onOrOff, config, isDestroying);\n\t\t\t}\n\t\t}\n\t}\n\n\t_safeToggleListener(onOrOff, config, isDestroying) {\n\t\tvar isAdding = onOrOff === 'on';\n\n\t\tif (isAdding && this._listenerStatusFlags[config.id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar source = this._getEventSource(config.sourceName, isDestroying);\n\n\t\tif (source) {\n\t\t\tsource[onOrOff](config.eventName, config.callback, config.scope);\n\t\t\tthis._listenerStatusFlags[config.id] = isAdding;\n\t\t}\n\t}\n\n\t_getEventSource(sourceName, isDestroying) {\n\t\tif (sourceName === 'entity') {\n\t\t\treturn this._entity;\n\t\t}\n\n\t\tvar component = this._entity[sourceName];\n\n\t\tif (component) {\n\t\t\treturn component;\n\t\t}\n\n\t\tif (!isDestroying) {\n\t\t\tconsole.warn('Entity has no component with name ' + sourceName);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_onEntityDestroy(entity) {\n\t\tif (this._entity === entity) {\n\t\t\tthis._toggleEntityListeners('off', true);\n\n\t\t\tthis._entity = null;\n\t\t}\n\t}\n\n\t_onParentComponentRemove(entity, component) {\n\t\tif (component === this._parentComponent) {\n\t\t\tthis._toggleLifecycleListeners('off');\n\n\t\t\tthis._toggleEntityListeners('off', true);\n\t\t}\n\t}\n\n\thasComponent(componentName) {\n\t\treturn this._entity && this._entity.c ? !!this._entity.c[componentName] : false;\n\t}\n\n\tget entity() {\n\t\treturn this._entity;\n\t}\n\n}\n\nconst BUTTON_TRANSITION_MODE_TINT = 0;\nconst BUTTON_TRANSITION_MODE_SPRITE_CHANGE = 1;\n\nvar VisualState = {\n\tDEFAULT: 'DEFAULT',\n\tHOVER: 'HOVER',\n\tPRESSED: 'PRESSED',\n\tINACTIVE: 'INACTIVE'\n};\nvar STATES_TO_TINT_NAMES = {};\nSTATES_TO_TINT_NAMES[VisualState.DEFAULT] = '_defaultTint';\nSTATES_TO_TINT_NAMES[VisualState.HOVER] = 'hoverTint';\nSTATES_TO_TINT_NAMES[VisualState.PRESSED] = 'pressedTint';\nSTATES_TO_TINT_NAMES[VisualState.INACTIVE] = 'inactiveTint';\nvar STATES_TO_SPRITE_ASSET_NAMES = {};\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.DEFAULT] = '_defaultSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.HOVER] = 'hoverSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.PRESSED] = 'pressedSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.INACTIVE] = 'inactiveSpriteAsset';\nvar STATES_TO_SPRITE_FRAME_NAMES = {};\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.DEFAULT] = '_defaultSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.HOVER] = 'hoverSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.PRESSED] = 'pressedSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.INACTIVE] = 'inactiveSpriteFrame';\n\nclass ButtonComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._visualState = VisualState.DEFAULT;\n\t\tthis._isHovering = false;\n\t\tthis._hoveringCounter = 0;\n\t\tthis._isPressed = false;\n\t\tthis._defaultTint = new Color(1, 1, 1, 1);\n\t\tthis._defaultSpriteAsset = null;\n\t\tthis._defaultSpriteFrame = 0;\n\t\tthis._imageReference = new EntityReference(this, 'imageEntity', {\n\t\t\t'element#gain': this._onImageElementGain,\n\t\t\t'element#lose': this._onImageElementLose,\n\t\t\t'element#set:color': this._onSetColor,\n\t\t\t'element#set:opacity': this._onSetOpacity,\n\t\t\t'element#set:spriteAsset': this._onSetSpriteAsset,\n\t\t\t'element#set:spriteFrame': this._onSetSpriteFrame\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on', system);\n\t}\n\n\t_toggleLifecycleListeners(onOrOff, system) {\n\t\tthis[onOrOff]('set_active', this._onSetActive, this);\n\t\tthis[onOrOff]('set_transitionMode', this._onSetTransitionMode, this);\n\t\tthis[onOrOff]('set_hoverTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_hoverSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_hoverSpriteFrame', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedSpriteFrame', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveSpriteFrame', this._onSetTransitionValue, this);\n\t\tsystem.app.systems.element[onOrOff]('add', this._onElementComponentAdd, this);\n\t\tsystem.app.systems.element[onOrOff]('beforeremove', this._onElementComponentRemove, this);\n\t}\n\n\t_onSetActive(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._updateVisualState();\n\t\t}\n\t}\n\n\t_onSetTransitionMode(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._cancelTween();\n\n\t\t\tthis._resetToDefaultVisualState(oldValue);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetTransitionValue(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onElementComponentRemove(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleHitElementListeners('off');\n\t\t}\n\t}\n\n\t_onElementComponentAdd(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleHitElementListeners('on');\n\t\t}\n\t}\n\n\t_onImageElementLose() {\n\t\tthis._cancelTween();\n\n\t\tthis._resetToDefaultVisualState(this.transitionMode);\n\t}\n\n\t_onImageElementGain() {\n\t\tthis._storeDefaultVisualState();\n\n\t\tthis._forceReapplyVisualState();\n\t}\n\n\t_toggleHitElementListeners(onOrOff) {\n\t\tif (this.entity.element) {\n\t\t\tvar isAdding = onOrOff === 'on';\n\n\t\t\tif (isAdding && this._hasHitElementListeners) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.entity.element[onOrOff]('mouseenter', this._onMouseEnter, this);\n\t\t\tthis.entity.element[onOrOff]('mouseleave', this._onMouseLeave, this);\n\t\t\tthis.entity.element[onOrOff]('mousedown', this._onMouseDown, this);\n\t\t\tthis.entity.element[onOrOff]('mouseup', this._onMouseUp, this);\n\t\t\tthis.entity.element[onOrOff]('touchstart', this._onTouchStart, this);\n\t\t\tthis.entity.element[onOrOff]('touchend', this._onTouchEnd, this);\n\t\t\tthis.entity.element[onOrOff]('touchleave', this._onTouchLeave, this);\n\t\t\tthis.entity.element[onOrOff]('touchcancel', this._onTouchCancel, this);\n\t\t\tthis.entity.element[onOrOff]('selectstart', this._onSelectStart, this);\n\t\t\tthis.entity.element[onOrOff]('selectend', this._onSelectEnd, this);\n\t\t\tthis.entity.element[onOrOff]('selectenter', this._onSelectEnter, this);\n\t\t\tthis.entity.element[onOrOff]('selectleave', this._onSelectLeave, this);\n\t\t\tthis.entity.element[onOrOff]('click', this._onClick, this);\n\t\t\tthis._hasHitElementListeners = isAdding;\n\t\t}\n\t}\n\n\t_storeDefaultVisualState() {\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tthis._storeDefaultColor(this._imageReference.entity.element.color);\n\n\t\t\tthis._storeDefaultOpacity(this._imageReference.entity.element.opacity);\n\n\t\t\tthis._storeDefaultSpriteAsset(this._imageReference.entity.element.spriteAsset);\n\n\t\t\tthis._storeDefaultSpriteFrame(this._imageReference.entity.element.spriteFrame);\n\t\t}\n\t}\n\n\t_storeDefaultColor(color) {\n\t\tthis._defaultTint.r = color.r;\n\t\tthis._defaultTint.g = color.g;\n\t\tthis._defaultTint.b = color.b;\n\t}\n\n\t_storeDefaultOpacity(opacity) {\n\t\tthis._defaultTint.a = opacity;\n\t}\n\n\t_storeDefaultSpriteAsset(spriteAsset) {\n\t\tthis._defaultSpriteAsset = spriteAsset;\n\t}\n\n\t_storeDefaultSpriteFrame(spriteFrame) {\n\t\tthis._defaultSpriteFrame = spriteFrame;\n\t}\n\n\t_onSetColor(color) {\n\t\tif (!this._isApplyingTint) {\n\t\t\tthis._storeDefaultColor(color);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetOpacity(opacity) {\n\t\tif (!this._isApplyingTint) {\n\t\t\tthis._storeDefaultOpacity(opacity);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetSpriteAsset(spriteAsset) {\n\t\tif (!this._isApplyingSprite) {\n\t\t\tthis._storeDefaultSpriteAsset(spriteAsset);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetSpriteFrame(spriteFrame) {\n\t\tif (!this._isApplyingSprite) {\n\t\t\tthis._storeDefaultSpriteFrame(spriteFrame);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onMouseEnter(event) {\n\t\tthis._isHovering = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseenter', event);\n\t}\n\n\t_onMouseLeave(event) {\n\t\tthis._isHovering = false;\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseleave', event);\n\t}\n\n\t_onMouseDown(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mousedown', event);\n\t}\n\n\t_onMouseUp(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseup', event);\n\t}\n\n\t_onTouchStart(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchstart', event);\n\t}\n\n\t_onTouchEnd(event) {\n\t\tevent.event.preventDefault();\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchend', event);\n\t}\n\n\t_onTouchLeave(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchleave', event);\n\t}\n\n\t_onTouchCancel(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchcancel', event);\n\t}\n\n\t_onSelectStart(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('selectstart', event);\n\t}\n\n\t_onSelectEnd(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('selectend', event);\n\t}\n\n\t_onSelectEnter(event) {\n\t\tthis._hoveringCounter++;\n\n\t\tif (this._hoveringCounter === 1) {\n\t\t\tthis._isHovering = true;\n\n\t\t\tthis._updateVisualState();\n\t\t}\n\n\t\tthis._fireIfActive('selectenter', event);\n\t}\n\n\t_onSelectLeave(event) {\n\t\tthis._hoveringCounter--;\n\n\t\tif (this._hoveringCounter === 0) {\n\t\t\tthis._isHovering = false;\n\t\t\tthis._isPressed = false;\n\n\t\t\tthis._updateVisualState();\n\t\t}\n\n\t\tthis._fireIfActive('selectleave', event);\n\t}\n\n\t_onClick(event) {\n\t\tthis._fireIfActive('click', event);\n\t}\n\n\t_fireIfActive(name, event) {\n\t\tif (this.data.active) {\n\t\t\tthis.fire(name, event);\n\t\t}\n\t}\n\n\t_updateVisualState(force) {\n\t\tvar oldVisualState = this._visualState;\n\n\t\tvar newVisualState = this._determineVisualState();\n\n\t\tif ((oldVisualState !== newVisualState || force) && this.enabled) {\n\t\t\tthis._visualState = newVisualState;\n\n\t\t\tif (oldVisualState === VisualState.HOVER) {\n\t\t\t\tthis._fireIfActive('hoverend');\n\t\t\t}\n\n\t\t\tif (oldVisualState === VisualState.PRESSED) {\n\t\t\t\tthis._fireIfActive('pressedend');\n\t\t\t}\n\n\t\t\tif (newVisualState === VisualState.HOVER) {\n\t\t\t\tthis._fireIfActive('hoverstart');\n\t\t\t}\n\n\t\t\tif (newVisualState === VisualState.PRESSED) {\n\t\t\t\tthis._fireIfActive('pressedstart');\n\t\t\t}\n\n\t\t\tswitch (this.transitionMode) {\n\t\t\t\tcase BUTTON_TRANSITION_MODE_TINT:\n\t\t\t\t\tvar tintName = STATES_TO_TINT_NAMES[this._visualState];\n\t\t\t\t\tvar tintColor = this[tintName];\n\n\t\t\t\t\tthis._applyTint(tintColor);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BUTTON_TRANSITION_MODE_SPRITE_CHANGE:\n\t\t\t\t\tvar spriteAssetName = STATES_TO_SPRITE_ASSET_NAMES[this._visualState];\n\t\t\t\t\tvar spriteFrameName = STATES_TO_SPRITE_FRAME_NAMES[this._visualState];\n\t\t\t\t\tvar spriteAsset = this[spriteAssetName];\n\t\t\t\t\tvar spriteFrame = this[spriteFrameName];\n\n\t\t\t\t\tthis._applySprite(spriteAsset, spriteFrame);\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_forceReapplyVisualState() {\n\t\tthis._updateVisualState(true);\n\t}\n\n\t_resetToDefaultVisualState(transitionMode) {\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tswitch (transitionMode) {\n\t\t\t\tcase BUTTON_TRANSITION_MODE_TINT:\n\t\t\t\t\tthis._cancelTween();\n\n\t\t\t\t\tthis._applyTintImmediately(this._defaultTint);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BUTTON_TRANSITION_MODE_SPRITE_CHANGE:\n\t\t\t\t\tthis._applySprite(this._defaultSpriteAsset, this._defaultSpriteFrame);\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_determineVisualState() {\n\t\tif (!this.active) {\n\t\t\treturn VisualState.INACTIVE;\n\t\t} else if (this._isPressed) {\n\t\t\treturn VisualState.PRESSED;\n\t\t} else if (this._isHovering) {\n\t\t\treturn VisualState.HOVER;\n\t\t}\n\n\t\treturn VisualState.DEFAULT;\n\t}\n\n\t_applySprite(spriteAsset, spriteFrame) {\n\t\tspriteFrame = spriteFrame || 0;\n\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tthis._isApplyingSprite = true;\n\t\t\tthis._imageReference.entity.element.spriteAsset = spriteAsset;\n\t\t\tthis._imageReference.entity.element.spriteFrame = spriteFrame;\n\t\t\tthis._isApplyingSprite = false;\n\t\t}\n\t}\n\n\t_applyTint(tintColor) {\n\t\tthis._cancelTween();\n\n\t\tif (this.fadeDuration === 0) {\n\t\t\tthis._applyTintImmediately(tintColor);\n\t\t} else {\n\t\t\tthis._applyTintWithTween(tintColor);\n\t\t}\n\t}\n\n\t_applyTintImmediately(tintColor) {\n\t\tif (this._imageReference.hasComponent('element') && tintColor) {\n\t\t\tthis._isApplyingTint = true;\n\t\t\tthis._imageReference.entity.element.color = toColor3(tintColor);\n\t\t\tthis._imageReference.entity.element.opacity = tintColor.a;\n\t\t\tthis._isApplyingTint = false;\n\t\t}\n\t}\n\n\t_applyTintWithTween(tintColor) {\n\t\tif (this._imageReference.hasComponent('element') && tintColor) {\n\t\t\tvar color = this._imageReference.entity.element.color;\n\t\t\tvar opacity = this._imageReference.entity.element.opacity;\n\t\t\tthis._tweenInfo = {\n\t\t\t\tstartTime: now(),\n\t\t\t\tfrom: new Color(color.r, color.g, color.b, opacity),\n\t\t\t\tto: tintColor.clone(),\n\t\t\t\tlerpColor: new Color()\n\t\t\t};\n\t\t}\n\t}\n\n\t_updateTintTween() {\n\t\tvar elapsedTime = now() - this._tweenInfo.startTime;\n\n\t\tvar elapsedProportion = this.fadeDuration === 0 ? 1 : elapsedTime / this.fadeDuration;\n\t\telapsedProportion = math.clamp(elapsedProportion, 0, 1);\n\n\t\tif (Math.abs(elapsedProportion - 1) > 1e-5) {\n\t\t\tvar lerpColor = this._tweenInfo.lerpColor;\n\t\t\tlerpColor.lerp(this._tweenInfo.from, this._tweenInfo.to, elapsedProportion);\n\n\t\t\tthis._applyTintImmediately(new Color(lerpColor.r, lerpColor.g, lerpColor.b, lerpColor.a));\n\t\t} else {\n\t\t\tthis._applyTintImmediately(this._tweenInfo.to);\n\n\t\t\tthis._cancelTween();\n\t\t}\n\t}\n\n\t_cancelTween() {\n\t\tdelete this._tweenInfo;\n\t}\n\n\tonUpdate() {\n\t\tif (this._tweenInfo) {\n\t\t\tthis._updateTintTween();\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis._isHovering = false;\n\t\tthis._hoveringCounter = 0;\n\t\tthis._isPressed = false;\n\n\t\tthis._imageReference.onParentComponentEnable();\n\n\t\tthis._toggleHitElementListeners('on');\n\n\t\tthis._forceReapplyVisualState();\n\t}\n\n\tonDisable() {\n\t\tthis._toggleHitElementListeners('off');\n\n\t\tthis._resetToDefaultVisualState(this.transitionMode);\n\t}\n\n\tonRemove() {\n\t\tthis._toggleLifecycleListeners('off', this.system);\n\n\t\tthis.onDisable();\n\t}\n\n}\n\nfunction toColor3(color4) {\n\treturn new Color(color4.r, color4.g, color4.b);\n}\n\nclass ButtonComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.active = true;\n\t\tthis.imageEntity = null;\n\t\tthis.hitPadding = new Vec4();\n\t\tthis.transitionMode = BUTTON_TRANSITION_MODE_TINT;\n\t\tthis.hoverTint = new Color(0.75, 0.75, 0.75);\n\t\tthis.pressedTint = new Color(0.5, 0.5, 0.5);\n\t\tthis.inactiveTint = new Color(0.25, 0.25, 0.25);\n\t\tthis.fadeDuration = 0;\n\t\tthis.hoverSpriteAsset = null;\n\t\tthis.hoverSpriteFrame = 0;\n\t\tthis.pressedSpriteAsset = null;\n\t\tthis.pressedSpriteFrame = 0;\n\t\tthis.inactiveSpriteAsset = null;\n\t\tthis.inactiveSpriteFrame = 0;\n\t}\n\n}\n\nconst _schema$h = ['enabled', 'active', {\n\tname: 'imageEntity',\n\ttype: 'entity'\n}, {\n\tname: 'hitPadding',\n\ttype: 'vec4'\n}, 'transitionMode', {\n\tname: 'hoverTint',\n\ttype: 'rgba'\n}, {\n\tname: 'pressedTint',\n\ttype: 'rgba'\n}, {\n\tname: 'inactiveTint',\n\ttype: 'rgba'\n}, 'fadeDuration', 'hoverSpriteAsset', 'hoverSpriteFrame', 'pressedSpriteAsset', 'pressedSpriteFrame', 'inactiveSpriteAsset', 'inactiveSpriteFrame'];\n\nclass ButtonComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'button';\n\t\tthis.ComponentType = ButtonComponent;\n\t\tthis.DataType = ButtonComponentData;\n\t\tthis.schema = _schema$h;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$h);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tvar entity = components[id].entity;\n\t\t\tvar component = entity.button;\n\n\t\t\tif (component.enabled && entity.enabled) {\n\t\t\t\tcomponent.onUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ButtonComponent.prototype, _schema$h);\n\nlet depthLayer$1;\n\nclass PostEffect {\n\tconstructor(effect, inputTarget) {\n\t\tthis.effect = effect;\n\t\tthis.inputTarget = inputTarget;\n\t\tthis.outputTarget = null;\n\t\tthis.name = effect.constructor.name;\n\t}\n\n}\n\nclass PostEffectQueue {\n\tconstructor(app, camera) {\n\t\tvar self = this;\n\t\tthis.app = app;\n\t\tthis.camera = camera;\n\t\tthis.destinationRenderTarget = null;\n\t\tthis.effects = [];\n\t\tthis.enabled = false;\n\t\tthis.depthTarget = null;\n\t\tthis.renderTargetScale = 1;\n\t\tthis.resizeTimeout = null;\n\t\tthis.resizeLast = 0;\n\n\t\tthis._resizeTimeoutCallback = function () {\n\t\t\tself.resizeRenderTargets();\n\t\t};\n\n\t\tcamera.on('set:rect', this.onCameraRectChanged, this);\n\t}\n\n\t_allocateColorBuffer(format, name) {\n\t\tvar rect = this.camera.rect;\n\t\tvar width = Math.floor(rect.z * this.app.graphicsDevice.width * this.renderTargetScale);\n\t\tvar height = Math.floor(rect.w * this.app.graphicsDevice.height * this.renderTargetScale);\n\t\tvar colorBuffer = new Texture(this.app.graphicsDevice, {\n\t\t\tformat: format,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcolorBuffer.name = name;\n\t\treturn colorBuffer;\n\t}\n\n\t_createOffscreenTarget(useDepth, hdr) {\n\t\tvar device = this.app.graphicsDevice;\n\t\tconst format = hdr ? device.getHdrFormat() : PIXELFORMAT_R8_G8_B8_A8;\n\t\tconst name = this.camera.entity.name + '-posteffect-' + this.effects.length;\n\n\t\tconst colorBuffer = this._allocateColorBuffer(format, name);\n\n\t\tvar useStencil = this.app.graphicsDevice.supportsStencil;\n\t\tvar samples = useDepth ? device.samples : 1;\n\t\treturn new RenderTarget({\n\t\t\tcolorBuffer: colorBuffer,\n\t\t\tdepth: useDepth,\n\t\t\tstencil: useStencil,\n\t\t\tsamples: samples\n\t\t});\n\t}\n\n\t_resizeOffscreenTarget(rt) {\n\t\tconst format = rt.colorBuffer.format;\n\t\tconst name = rt.colorBuffer.name;\n\t\trt.destroyFrameBuffers();\n\t\trt.destroyTextureBuffers();\n\t\trt._colorBuffer = this._allocateColorBuffer(format, name);\n\t}\n\n\t_destroyOffscreenTarget(rt) {\n\t\trt.destroyTextureBuffers();\n\t\trt.destroy();\n\t}\n\n\tsetRenderTargetScale(scale) {\n\t\tthis.renderTargetScale = scale;\n\t\tthis.resizeRenderTargets();\n\t}\n\n\taddEffect(effect) {\n\t\tconst effects = this.effects;\n\t\tconst isFirstEffect = effects.length === 0;\n\n\t\tconst inputTarget = this._createOffscreenTarget(isFirstEffect, effect.hdr);\n\n\t\tconst newEntry = new PostEffect(effect, inputTarget);\n\t\teffects.push(newEntry);\n\t\tthis._sourceTarget = newEntry.inputTarget;\n\n\t\tif (effects.length > 1) {\n\t\t\teffects[effects.length - 2].outputTarget = newEntry.inputTarget;\n\t\t}\n\n\t\tthis._newPostEffect = effect;\n\n\t\tif (effect.needsDepthBuffer) {\n\t\t\tthis._requestDepthMap();\n\t\t}\n\n\t\tthis.enable();\n\t\tthis._newPostEffect = undefined;\n\t}\n\n\tremoveEffect(effect) {\n\t\tvar i,\n\t\t\t\tlen,\n\t\t\t\tindex = -1;\n\n\t\tfor (i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tif (this.effects[i].effect === effect) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (index >= 0) {\n\t\t\tif (index > 0) {\n\t\t\t\tthis.effects[index - 1].outputTarget = index + 1 < this.effects.length ? this.effects[index + 1].inputTarget : null;\n\t\t\t} else {\n\t\t\t\tif (this.effects.length > 1) {\n\t\t\t\t\tif (!this.effects[1].inputTarget._depth) {\n\t\t\t\t\t\tthis._destroyOffscreenTarget(this.effects[1].inputTarget);\n\n\t\t\t\t\t\tthis.effects[1].inputTarget = this._createOffscreenTarget(true, this.effects[1].hdr);\n\t\t\t\t\t\tthis._sourceTarget = this.effects[1].inputTarget;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.camera.renderTarget = this.effects[1].inputTarget;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._destroyOffscreenTarget(this.effects[index].inputTarget);\n\n\t\t\tthis.effects.splice(index, 1);\n\t\t}\n\n\t\tif (this.enabled) {\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._releaseDepthMap();\n\t\t\t}\n\t\t}\n\n\t\tif (this.effects.length === 0) {\n\t\t\tthis.disable();\n\t\t}\n\t}\n\n\t_requestDepthMaps() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tvar effect = this.effects[i].effect;\n\t\t\tif (this._newPostEffect === effect) continue;\n\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._requestDepthMap();\n\t\t\t}\n\t\t}\n\t}\n\n\t_releaseDepthMaps() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tvar effect = this.effects[i].effect;\n\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._releaseDepthMap();\n\t\t\t}\n\t\t}\n\t}\n\n\t_requestDepthMap() {\n\t\tif (!depthLayer$1) depthLayer$1 = this.app.scene.layers.getLayerById(LAYERID_DEPTH);\n\t\tif (depthLayer$1) depthLayer$1.incrementCounter();\n\t}\n\n\t_releaseDepthMap() {\n\t\tif (depthLayer$1) depthLayer$1.decrementCounter();\n\t}\n\n\tdestroy() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tthis.effects[i].inputTarget.destroy();\n\t\t}\n\n\t\tthis.effects.length = 0;\n\t\tthis.disable();\n\t}\n\n\tenable() {\n\t\tif (!this.enabled && this.effects.length) {\n\t\t\tthis.enabled = true;\n\t\t\tvar self = this;\n\n\t\t\tthis._requestDepthMaps();\n\n\t\t\tthis.app.graphicsDevice.on('resizecanvas', this._onCanvasResized, this);\n\t\t\tthis.destinationRenderTarget = this.camera.renderTarget;\n\t\t\tthis.camera.renderTarget = this.effects[0].inputTarget;\n\n\t\t\tthis.camera.onPostprocessing = function (camera) {\n\t\t\t\tif (self.enabled) {\n\t\t\t\t\tvar rect = null;\n\t\t\t\t\tvar len = self.effects.length;\n\n\t\t\t\t\tif (len) {\n\t\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\t\tvar fx = self.effects[i];\n\t\t\t\t\t\t\tvar destTarget = fx.outputTarget;\n\n\t\t\t\t\t\t\tif (i === len - 1) {\n\t\t\t\t\t\t\t\trect = self.camera.rect;\n\n\t\t\t\t\t\t\t\tif (self.destinationRenderTarget) {\n\t\t\t\t\t\t\t\t\tdestTarget = self.destinationRenderTarget;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfx.effect.render(fx.inputTarget, destTarget, rect);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tdisable() {\n\t\tif (this.enabled) {\n\t\t\tthis.enabled = false;\n\t\t\tthis.app.graphicsDevice.off('resizecanvas', this._onCanvasResized, this);\n\n\t\t\tthis._releaseDepthMaps();\n\n\t\t\tthis._destroyOffscreenTarget(this._sourceTarget);\n\n\t\t\tthis.camera.renderTarget = null;\n\t\t\tthis.camera.onPostprocessing = null;\n\t\t}\n\t}\n\n\t_onCanvasResized(width, height) {\n\t\tvar rect = this.camera.rect;\n\t\tvar device = this.app.graphicsDevice;\n\t\tthis.camera.camera.aspectRatio = device.width * rect.z / (device.height * rect.w);\n\t\tif (this.resizeTimeout) return;\n\n\t\tif (now() - this.resizeLast > 100) {\n\t\t\tthis.resizeRenderTargets();\n\t\t} else {\n\t\t\tthis.resizeTimeout = setTimeout(this._resizeTimeoutCallback, 100);\n\t\t}\n\t}\n\n\tresizeRenderTargets() {\n\t\tif (this.resizeTimeout) {\n\t\t\tclearTimeout(this.resizeTimeout);\n\t\t\tthis.resizeTimeout = null;\n\t\t}\n\n\t\tthis.resizeLast = now();\n\t\tvar rect = this.camera.rect;\n\t\tvar desiredWidth = Math.floor(rect.z * this.app.graphicsDevice.width * this.renderTargetScale);\n\t\tvar desiredHeight = Math.floor(rect.w * this.app.graphicsDevice.height * this.renderTargetScale);\n\t\tvar effects = this.effects;\n\n\t\tfor (var i = 0, len = effects.length; i < len; i++) {\n\t\t\tvar fx = effects[i];\n\n\t\t\tif (fx.inputTarget.width !== desiredWidth || fx.inputTarget.height !== desiredHeight) {\n\t\t\t\tthis._resizeOffscreenTarget(fx.inputTarget);\n\t\t\t}\n\t\t}\n\t}\n\n\tonCameraRectChanged(name, oldValue, newValue) {\n\t\tif (this.enabled) {\n\t\t\tthis.resizeRenderTargets();\n\t\t}\n\t}\n\n}\n\nconst properties$1 = [{\n\tname: 'aspectRatio',\n\treadonly: false\n}, {\n\tname: 'aspectRatioMode',\n\treadonly: false\n}, {\n\tname: 'calculateProjection',\n\treadonly: false\n}, {\n\tname: 'calculateTransform',\n\treadonly: false\n}, {\n\tname: 'clearColor',\n\treadonly: false\n}, {\n\tname: 'cullFaces',\n\treadonly: false\n}, {\n\tname: 'farClip',\n\treadonly: false\n}, {\n\tname: 'flipFaces',\n\treadonly: false\n}, {\n\tname: 'fov',\n\treadonly: false\n}, {\n\tname: 'frustum',\n\treadonly: true\n}, {\n\tname: 'frustumCulling',\n\treadonly: false\n}, {\n\tname: 'horizontalFov',\n\treadonly: false\n}, {\n\tname: 'nearClip',\n\treadonly: false\n}, {\n\tname: 'orthoHeight',\n\treadonly: false\n}, {\n\tname: 'projection',\n\treadonly: false\n}, {\n\tname: 'projectionMatrix',\n\treadonly: true\n}, {\n\tname: 'scissorRect',\n\treadonly: false\n}, {\n\tname: 'viewMatrix',\n\treadonly: true\n}, {\n\tname: 'vrDisplay',\n\treadonly: false\n}];\n\nclass CameraComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._camera = new Camera();\n\t\tthis._camera.node = entity;\n\t\tthis._priority = 0;\n\t\tthis.onPostprocessing = null;\n\t\tthis._disablePostEffectsLayer = LAYERID_UI;\n\t\tthis._postEffects = new PostEffectQueue(system.app, this);\n\t}\n\n\tget camera() {\n\t\treturn this._camera;\n\t}\n\n\tdirtyLayerCompositionCameras() {\n\t\tconst layerComp = this.system.app.scene.layers;\n\t\tlayerComp._dirtyCameras = true;\n\t}\n\n\tget disablePostEffectsLayer() {\n\t\treturn this._disablePostEffectsLayer;\n\t}\n\n\tset disablePostEffectsLayer(layer) {\n\t\tthis._disablePostEffectsLayer = layer;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget postEffectsEnabled() {\n\t\treturn this._postEffects.enabled;\n\t}\n\n\tget layers() {\n\t\treturn this._camera.layers;\n\t}\n\n\tset layers(newValue) {\n\t\tvar i, layer;\n\t\tvar layers = this._camera.layers;\n\n\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeCamera(this);\n\t\t}\n\n\t\tthis._camera.layers = newValue;\n\t\tif (!this.enabled || !this.entity.enabled) return;\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addCamera(this);\n\t\t}\n\t}\n\n\tget postEffects() {\n\t\treturn this._postEffects;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tset priority(newValue) {\n\t\tthis._priority = newValue;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget rect() {\n\t\treturn this._camera.rect;\n\t}\n\n\tset rect(value) {\n\t\tthis._camera.rect = value;\n\t\tthis.fire('set:rect', this._camera.rect);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._camera.clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(value) {\n\t\tthis._camera.clearColorBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._camera.clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(value) {\n\t\tthis._camera.clearDepthBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._camera.clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(value) {\n\t\tthis._camera.clearStencilBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget renderTarget() {\n\t\treturn this._camera.renderTarget;\n\t}\n\n\tset renderTarget(value) {\n\t\tthis._camera.renderTarget = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tscreenToWorld(screenx, screeny, cameraz, worldCoord) {\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar w = device.clientRect.width;\n\t\tvar h = device.clientRect.height;\n\t\treturn this._camera.screenToWorld(screenx, screeny, cameraz, w, h, worldCoord);\n\t}\n\n\tworldToScreen(worldCoord, screenCoord) {\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar w = device.clientRect.width;\n\t\tvar h = device.clientRect.height;\n\t\treturn this._camera.worldToScreen(worldCoord, w, h, screenCoord);\n\t}\n\n\tonAppPrerender() {\n\t\tthis._camera._viewMatDirty = true;\n\t\tthis._camera._viewProjMatDirty = true;\n\t}\n\n\taddCameraToLayers() {\n\t\tvar layers = this.layers;\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addCamera(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveCameraFromLayers() {\n\t\tvar layers = this.layers;\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeCamera(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addCameraToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addCamera(this);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeCamera(this);\n\t}\n\n\tonEnable() {\n\t\tvar system = this.system;\n\t\tvar scene = system.app.scene;\n\t\tvar layers = scene.layers;\n\t\tsystem.addCamera(this);\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (layers) {\n\t\t\tlayers.on(\"add\", this.onLayerAdded, this);\n\t\t\tlayers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addCameraToLayers();\n\t\t}\n\n\t\tthis.postEffects.enable();\n\t}\n\n\tonDisable() {\n\t\tvar system = this.system;\n\t\tvar scene = system.app.scene;\n\t\tvar layers = scene.layers;\n\t\tthis.postEffects.disable();\n\t\tthis.removeCameraFromLayers();\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (layers) {\n\t\t\tlayers.off(\"add\", this.onLayerAdded, this);\n\t\t\tlayers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tsystem.removeCamera(this);\n\t}\n\n\tonRemove() {\n\t\tthis.onDisable();\n\t\tthis.off();\n\t}\n\n\tcalculateAspectRatio(rt) {\n\t\tvar src = rt ? rt : this.system.app.graphicsDevice;\n\t\tvar rect = this.rect;\n\t\treturn src.width * rect.z / (src.height * rect.w);\n\t}\n\n\tframeBegin(rt) {\n\t\tif (this.aspectRatioMode === ASPECT_AUTO) {\n\t\t\tthis.aspectRatio = this.calculateAspectRatio(rt);\n\t\t}\n\t}\n\n\tframeEnd() {}\n\n\tenterVr(display, callback) {\n\t\tif (display instanceof Function && !callback) {\n\t\t\tcallback = display;\n\t\t\tdisplay = null;\n\t\t}\n\n\t\tif (!this.system.app.vr) {\n\t\t\tcallback(\"VrManager not created. Enable VR in project settings.\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!display) {\n\t\t\tdisplay = this.system.app.vr.display;\n\t\t}\n\n\t\tif (display) {\n\t\t\tvar self = this;\n\n\t\t\tif (display.capabilities.canPresent) {\n\t\t\t\tdisplay.requestPresent(function (err) {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tself.vrDisplay = display;\n\t\t\t\t\t\tself.vrDisplay.once('beforepresentchange', function (display) {\n\t\t\t\t\t\t\tif (!display.presenting) {\n\t\t\t\t\t\t\t\tself.vrDisplay = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.vrDisplay = display;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(\"No pc.VrDisplay to present\");\n\t\t}\n\t}\n\n\texitVr(callback) {\n\t\tif (this.vrDisplay) {\n\t\t\tif (this.vrDisplay.capabilities.canPresent) {\n\t\t\t\tvar display = this.vrDisplay;\n\t\t\t\tthis.vrDisplay = null;\n\t\t\t\tdisplay.exitPresent(callback);\n\t\t\t} else {\n\t\t\t\tthis.vrDisplay = null;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(\"Not presenting VR\");\n\t\t}\n\t}\n\n\tstartXr(type, spaceType, options) {\n\t\tthis.system.app.xr.start(this, type, spaceType, options);\n\t}\n\n\tendXr(callback) {\n\t\tif (!this._camera.xr) {\n\t\t\tif (callback) callback(new Error(\"Camera is not in XR\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._camera.xr.end(callback);\n\t}\n\n\tcopy(source) {\n\t\tproperties$1.forEach(property => {\n\t\t\tif (!property.readonly) {\n\t\t\t\tconst name = property.name;\n\t\t\t\tthis[name] = source[name];\n\t\t\t}\n\t\t});\n\t\tthis.clearColorBuffer = source.clearColorBuffer;\n\t\tthis.clearDepthBuffer = source.clearDepthBuffer;\n\t\tthis.clearStencilBuffer = source.clearStencilBuffer;\n\t\tthis.disablePostEffectsLayer = source.disablePostEffectsLayer;\n\t\tthis.layers = source.layers;\n\t\tthis.priority = source.priority;\n\t\tthis.renderTarget = source.renderTarget;\n\t\tthis.rect = source.rect;\n\t}\n\n}\n\nproperties$1.forEach(function (property) {\n\tvar name = property.name;\n\tvar options = {};\n\n\toptions.get = function () {\n\t\treturn this._camera[name];\n\t};\n\n\tif (!property.readonly) {\n\t\toptions.set = function (newValue) {\n\t\t\tthis._camera[name] = newValue;\n\t\t};\n\t}\n\n\tObject.defineProperty(CameraComponent.prototype, name, options);\n});\n\nclass CameraComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$g = ['enabled'];\n\nclass CameraComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'camera';\n\t\tthis.ComponentType = CameraComponent;\n\t\tthis.DataType = CameraComponentData;\n\t\tthis.schema = _schema$g;\n\t\tthis.cameras = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.app.on(\"prerender\", this.onAppPrerender, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['aspectRatio', 'aspectRatioMode', 'calculateProjection', 'calculateTransform', 'clearColor', 'clearColorBuffer', 'clearDepthBuffer', 'clearStencilBuffer', 'cullFaces', 'farClip', 'flipFaces', 'fov', 'frustumCulling', 'horizontalFov', 'layers', 'renderTarget', 'nearClip', 'orthoHeight', 'projection', 'priority', 'rect', 'scissorRect'];\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tvar property = properties[i];\n\n\t\t\tif (data.hasOwnProperty(property)) {\n\t\t\t\tvar value = data[property];\n\n\t\t\t\tswitch (property) {\n\t\t\t\t\tcase 'rect':\n\t\t\t\t\tcase 'scissorRect':\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tcomponent[property] = new Vec4(value[0], value[1], value[2], value[3]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'clearColor':\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tcomponent[property] = new Color(value[0], value[1], value[2], value[3]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar c = entity.camera;\n\t\tthis.addComponent(clone, {\n\t\t\taspectRatio: c.aspectRatio,\n\t\t\taspectRatioMode: c.aspectRatioMode,\n\t\t\tcalculateProjection: c.calculateProjection,\n\t\t\tcalculateTransform: c.calculateTransform,\n\t\t\tclearColor: c.clearColor,\n\t\t\tclearColorBuffer: c.clearColorBuffer,\n\t\t\tclearDepthBuffer: c.clearDepthBuffer,\n\t\t\tclearStencilBuffer: c.clearStencilBuffer,\n\t\t\tcullFaces: c.cullFaces,\n\t\t\tfarClip: c.farClip,\n\t\t\tflipFaces: c.flipFaces,\n\t\t\tfov: c.fov,\n\t\t\tfrustumCulling: c.frustumCulling,\n\t\t\thorizontalFov: c.horizontalFov,\n\t\t\tlayers: c.layers,\n\t\t\trenderTarget: c.renderTarget,\n\t\t\tnearClip: c.nearClip,\n\t\t\torthoHeight: c.orthoHeight,\n\t\t\tprojection: c.projection,\n\t\t\tpriority: c.priority,\n\t\t\trect: c.rect,\n\t\t\tscissorRect: c.scissorRect\n\t\t});\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tthis.removeCamera(component);\n\t}\n\n\tonUpdate(dt) {\n\t\tif (this.app.vr) {\n\t\t\tvar components = this.store;\n\n\t\t\tfor (var id in components) {\n\t\t\t\tvar component = components[id];\n\n\t\t\t\tif (component.data.enabled && component.entity.enabled) {\n\t\t\t\t\tvar cameraComponent = component.entity.camera;\n\t\t\t\t\tvar vrDisplay = cameraComponent.vrDisplay;\n\n\t\t\t\t\tif (vrDisplay) {\n\t\t\t\t\t\tvrDisplay.setClipPlanes(cameraComponent.nearClip, cameraComponent.farClip);\n\n\t\t\t\t\t\tif (component.entity) {\n\t\t\t\t\t\t\tcomponent.entity.localTransform.copy(vrDisplay.combinedViewInv);\n\t\t\t\t\t\t\tcomponent.entity._dirtyLocal = false;\n\n\t\t\t\t\t\t\tcomponent.entity._dirtifyWorld();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonAppPrerender() {\n\t\tfor (var i = 0, len = this.cameras.length; i < len; i++) {\n\t\t\tthis.cameras[i].onAppPrerender();\n\t\t}\n\t}\n\n\taddCamera(camera) {\n\t\tthis.cameras.push(camera);\n\t\tthis.sortCamerasByPriority();\n\t}\n\n\tremoveCamera(camera) {\n\t\tvar index = this.cameras.indexOf(camera);\n\n\t\tif (index >= 0) {\n\t\t\tthis.cameras.splice(index, 1);\n\t\t\tthis.sortCamerasByPriority();\n\t\t}\n\t}\n\n\tsortCamerasByPriority() {\n\t\tthis.cameras.sort(function (a, b) {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\t}\n\n}\n\nComponent._buildAccessors(CameraComponent.prototype, _schema$g);\n\nclass CollisionComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._compoundParent = null;\n\t\tthis.entity.on('insert', this._onInsert, this);\n\t\tthis.on('set_type', this.onSetType, this);\n\t\tthis.on('set_halfExtents', this.onSetHalfExtents, this);\n\t\tthis.on('set_radius', this.onSetRadius, this);\n\t\tthis.on('set_height', this.onSetHeight, this);\n\t\tthis.on('set_axis', this.onSetAxis, this);\n\t\tthis.on(\"set_asset\", this.onSetAsset, this);\n\t\tthis.on(\"set_renderAsset\", this.onSetRenderAsset, this);\n\t\tthis.on(\"set_model\", this.onSetModel, this);\n\t\tthis.on(\"set_render\", this.onSetRender, this);\n\t}\n\n\tonSetType(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis.system.changeType(this, oldValue, newValue);\n\t\t}\n\t}\n\n\tonSetHalfExtents(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && t === 'box') {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetRadius(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'sphere' || t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetHeight(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetAxis(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.asset = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(this.data.asset);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tif (!newValue) {\n\t\t\t\tthis.data.model = null;\n\t\t\t}\n\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetRenderAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.renderAsset = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(this.data.renderAsset);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onRenderAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tif (!newValue) {\n\t\t\t\tthis.data.render = null;\n\t\t\t}\n\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetModel(name, oldValue, newValue) {\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tthis.system.implementations.mesh.doRecreatePhysicalShape(this);\n\t\t}\n\t}\n\n\tonSetRender(name, oldValue, newValue) {\n\t\tthis.onSetModel(name, oldValue, newValue);\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.data.asset === asset.id) {\n\t\t\tthis.asset = null;\n\t\t}\n\t}\n\n\tonRenderAssetRemoved(asset) {\n\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\n\t\tif (this.data.renderAsset === asset.id) {\n\t\t\tthis.renderAsset = null;\n\t\t}\n\t}\n\n\t_getCompoundChildShapeIndex(shape) {\n\t\tvar compound = this.data.shape;\n\t\tvar shapes = compound.getNumChildShapes();\n\n\t\tfor (var i = 0; i < shapes; i++) {\n\t\t\tvar childShape = compound.getChildShape(i);\n\n\t\t\tif (childShape.ptr === shape.ptr) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_onInsert(parent) {\n\t\tif (typeof Ammo === 'undefined') return;\n\n\t\tif (this._compoundParent) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t} else if (!this.entity.rigidbody) {\n\t\t\tvar ancestor = this.entity.parent;\n\n\t\t\twhile (ancestor) {\n\t\t\t\tif (ancestor.collision && ancestor.collision.type === 'compound') {\n\t\t\t\t\tif (ancestor.collision.shape.getNumChildShapes() === 0) {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(ancestor.collision);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tancestor = ancestor.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateCompound() {\n\t\tvar entity = this.entity;\n\n\t\tif (entity._dirtyWorld) {\n\t\t\tvar dirty = entity._dirtyLocal;\n\t\t\tvar parent = entity;\n\n\t\t\twhile (parent && !dirty) {\n\t\t\t\tif (parent.collision && parent.collision === this._compoundParent) break;\n\t\t\t\tif (parent._dirtyLocal) dirty = true;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\n\t\t\tif (dirty) {\n\t\t\t\tentity.forEach(this.system.implementations.compound._updateEachDescendantTransform, entity);\n\t\t\t\tvar bodyComponent = this._compoundParent.entity.rigidbody;\n\t\t\t\tif (bodyComponent) bodyComponent.activate();\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this.data.type === 'mesh' && (this.data.asset || this.data.renderAsset) && this.data.initialized) {\n\t\t\tvar asset = this.system.app.assets.get(this.data.asset || this.data.renderAsset);\n\n\t\t\tif (asset && (!asset.resource || !this.data.shape)) {\n\t\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this.entity.rigidbody) {\n\t\t\tif (this.entity.rigidbody.enabled) {\n\t\t\t\tthis.entity.rigidbody.enableSimulation();\n\t\t\t}\n\t\t} else if (this._compoundParent && this !== this._compoundParent) {\n\t\t\tif (this._compoundParent.shape.getNumChildShapes() === 0) {\n\t\t\t\tthis.system.recreatePhysicalShapes(this._compoundParent);\n\t\t\t} else {\n\t\t\t\tvar transform = this.system._getNodeTransform(this.entity, this._compoundParent.entity);\n\n\t\t\t\tthis._compoundParent.shape.addChildShape(transform, this.data.shape);\n\n\t\t\t\tAmmo.destroy(transform);\n\t\t\t\tif (this._compoundParent.entity.rigidbody) this._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\t\t} else if (this.entity.trigger) {\n\t\t\tthis.entity.trigger.enable();\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tif (this.entity.rigidbody) {\n\t\t\tthis.entity.rigidbody.disableSimulation();\n\t\t} else if (this._compoundParent && this !== this._compoundParent) {\n\t\t\tif (!this._compoundParent.entity._destroying) {\n\t\t\t\tthis.system._removeCompoundChild(this._compoundParent, this.data.shape);\n\n\t\t\t\tif (this._compoundParent.entity.rigidbody) this._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\t\t} else if (this.entity.trigger) {\n\t\t\tthis.entity.trigger.disable();\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tif (this.asset) {\n\t\t\tthis.asset = null;\n\t\t}\n\n\t\tif (this.renderAsset) {\n\t\t\tthis.renderAsset = null;\n\t\t}\n\n\t\tthis.entity.off('insert', this._onInsert, this);\n\t\tthis.off();\n\t}\n\n}\n\nclass CollisionComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.type = 'box';\n\t\tthis.halfExtents = new Vec3(0.5, 0.5, 0.5);\n\t\tthis.radius = 0.5;\n\t\tthis.axis = 1;\n\t\tthis.height = 2;\n\t\tthis.asset = null;\n\t\tthis.renderAsset = null;\n\t\tthis.shape = null;\n\t\tthis.model = null;\n\t\tthis.render = null;\n\t\tthis.initialized = false;\n\t}\n\n}\n\nconst BODYTYPE_STATIC = 'static';\nconst BODYTYPE_DYNAMIC = 'dynamic';\nconst BODYTYPE_KINEMATIC = 'kinematic';\nconst BODYFLAG_STATIC_OBJECT = 1;\nconst BODYFLAG_KINEMATIC_OBJECT = 2;\nconst BODYFLAG_NORESPONSE_OBJECT = 4;\nconst BODYSTATE_ACTIVE_TAG = 1;\nconst BODYSTATE_ISLAND_SLEEPING = 2;\nconst BODYSTATE_WANTS_DEACTIVATION = 3;\nconst BODYSTATE_DISABLE_DEACTIVATION = 4;\nconst BODYSTATE_DISABLE_SIMULATION = 5;\nconst BODYGROUP_NONE = 0;\nconst BODYGROUP_DEFAULT = 1;\nconst BODYGROUP_DYNAMIC = 1;\nconst BODYGROUP_STATIC = 2;\nconst BODYGROUP_KINEMATIC = 4;\nconst BODYGROUP_ENGINE_1 = 8;\nconst BODYGROUP_TRIGGER = 16;\nconst BODYGROUP_ENGINE_2 = 32;\nconst BODYGROUP_ENGINE_3 = 64;\nconst BODYGROUP_USER_1 = 128;\nconst BODYGROUP_USER_2 = 256;\nconst BODYGROUP_USER_3 = 512;\nconst BODYGROUP_USER_4 = 1024;\nconst BODYGROUP_USER_5 = 2048;\nconst BODYGROUP_USER_6 = 4096;\nconst BODYGROUP_USER_7 = 8192;\nconst BODYGROUP_USER_8 = 16384;\nconst BODYMASK_NONE = 0;\nconst BODYMASK_ALL = 65535;\nconst BODYMASK_STATIC = 2;\nconst BODYMASK_NOT_STATIC = 65535 ^ 2;\nconst BODYMASK_NOT_STATIC_KINEMATIC = 65535 ^ (2 | 4);\n\nvar ammoVec1$1, ammoQuat$1, ammoTransform$1;\n\nclass Trigger {\n\tconstructor(app, component, data) {\n\t\tthis.entity = component.entity;\n\t\tthis.component = component;\n\t\tthis.app = app;\n\n\t\tif (typeof Ammo !== 'undefined' && !ammoVec1$1) {\n\t\t\tammoVec1$1 = new Ammo.btVector3();\n\t\t\tammoQuat$1 = new Ammo.btQuaternion();\n\t\t\tammoTransform$1 = new Ammo.btTransform();\n\t\t}\n\n\t\tthis.initialize(data);\n\t}\n\n\tinitialize(data) {\n\t\tvar entity = this.entity;\n\t\tvar shape = data.shape;\n\n\t\tif (shape && typeof Ammo !== 'undefined') {\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t}\n\n\t\t\tvar mass = 1;\n\t\t\tvar pos = entity.getPosition();\n\t\t\tvar rot = entity.getRotation();\n\t\t\tammoVec1$1.setValue(pos.x, pos.y, pos.z);\n\t\t\tammoQuat$1.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\t\tammoTransform$1.setOrigin(ammoVec1$1);\n\t\t\tammoTransform$1.setRotation(ammoQuat$1);\n\t\t\tvar body = this.app.systems.rigidbody.createBody(mass, shape, ammoTransform$1);\n\t\t\tbody.setRestitution(0);\n\t\t\tbody.setFriction(0);\n\t\t\tbody.setDamping(0, 0);\n\t\t\tammoVec1$1.setValue(0, 0, 0);\n\t\t\tbody.setLinearFactor(ammoVec1$1);\n\t\t\tbody.setAngularFactor(ammoVec1$1);\n\t\t\tbody.setCollisionFlags(body.getCollisionFlags() | BODYFLAG_NORESPONSE_OBJECT);\n\t\t\tbody.entity = entity;\n\t\t\tthis.body = body;\n\n\t\t\tif (this.component.enabled && entity.enabled) {\n\t\t\t\tthis.enable();\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tthis.disable();\n\t\tthis.app.systems.rigidbody.destroyBody(body);\n\t}\n\n\t_getEntityTransform(transform) {\n\t\tvar pos = this.entity.getPosition();\n\t\tvar rot = this.entity.getRotation();\n\t\tammoVec1$1.setValue(pos.x, pos.y, pos.z);\n\t\tammoQuat$1.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setOrigin(ammoVec1$1);\n\t\ttransform.setRotation(ammoQuat$1);\n\t}\n\n\tupdateTransform() {\n\t\tthis._getEntityTransform(ammoTransform$1);\n\n\t\tvar body = this.body;\n\t\tbody.setWorldTransform(ammoTransform$1);\n\t\tbody.activate();\n\t}\n\n\tenable() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tvar systems = this.app.systems;\n\t\tsystems.rigidbody.addBody(body, BODYGROUP_TRIGGER, BODYMASK_NOT_STATIC ^ BODYGROUP_TRIGGER);\n\n\t\tsystems.rigidbody._triggers.push(this);\n\n\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\tthis.updateTransform();\n\t}\n\n\tdisable() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tvar systems = this.app.systems;\n\n\t\tvar idx = systems.rigidbody._triggers.indexOf(this);\n\n\t\tif (idx > -1) {\n\t\t\tsystems.rigidbody._triggers.splice(idx, 1);\n\t\t}\n\n\t\tsystems.rigidbody.removeBody(body);\n\t\tbody.forceActivationState(BODYSTATE_DISABLE_SIMULATION);\n\t}\n\n}\n\nvar mat4 = new Mat4();\nvar vec3 = new Vec3();\nvar quat = new Quat();\nvar tempGraphNode = new GraphNode();\nconst _schema$f = ['enabled', 'type', 'halfExtents', 'radius', 'axis', 'height', 'asset', 'renderAsset', 'shape', 'model', 'render'];\n\nclass CollisionSystemImpl {\n\tconstructor(system) {\n\t\tthis.system = system;\n\t}\n\n\tbeforeInitialize(component, data) {\n\t\tdata.shape = null;\n\t\tdata.model = new Model();\n\t\tdata.model.graph = new GraphNode();\n\t}\n\n\tafterInitialize(component, data) {\n\t\tthis.recreatePhysicalShapes(component);\n\t\tcomponent.data.initialized = true;\n\t}\n\n\treset(component, data) {\n\t\tthis.beforeInitialize(component, data);\n\t\tthis.afterInitialize(component, data);\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tvar entity = component.entity;\n\t\tvar data = component.data;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t\tdelete entity.trigger;\n\t\t\t}\n\n\t\t\tif (data.shape) {\n\t\t\t\tif (component._compoundParent) {\n\t\t\t\t\tthis.system._removeCompoundChild(component._compoundParent, data.shape);\n\n\t\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t\t}\n\n\t\t\t\tAmmo.destroy(data.shape);\n\t\t\t\tdata.shape = null;\n\t\t\t}\n\n\t\t\tdata.shape = this.createPhysicalShape(component.entity, data);\n\t\t\tvar firstCompoundChild = !component._compoundParent;\n\n\t\t\tif (data.type === 'compound' && (!component._compoundParent || component === component._compoundParent)) {\n\t\t\t\tcomponent._compoundParent = component;\n\t\t\t\tentity.forEach(this._addEachDescendant, component);\n\t\t\t} else if (data.type !== 'compound') {\n\t\t\t\tif (component._compoundParent && component === component._compoundParent) {\n\t\t\t\t\tentity.forEach(this.system.implementations.compound._updateEachDescendant, component);\n\t\t\t\t}\n\n\t\t\t\tif (!component.rigidbody) {\n\t\t\t\t\tcomponent._compoundParent = null;\n\t\t\t\t\tvar parent = entity.parent;\n\n\t\t\t\t\twhile (parent) {\n\t\t\t\t\t\tif (parent.collision && parent.collision.type === 'compound') {\n\t\t\t\t\t\t\tcomponent._compoundParent = parent.collision;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparent = parent.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (component._compoundParent) {\n\t\t\t\tif (component !== component._compoundParent) {\n\t\t\t\t\tif (firstCompoundChild && component._compoundParent.shape.getNumChildShapes() === 0) {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(component._compoundParent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.system.updateCompoundChildTransform(entity);\n\t\t\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (entity.rigidbody) {\n\t\t\t\tentity.rigidbody.disableSimulation();\n\t\t\t\tentity.rigidbody.createBody();\n\n\t\t\t\tif (entity.enabled && entity.rigidbody.enabled) {\n\t\t\t\t\tentity.rigidbody.enableSimulation();\n\t\t\t\t}\n\t\t\t} else if (!component._compoundParent) {\n\t\t\t\tif (!entity.trigger) {\n\t\t\t\t\tentity.trigger = new Trigger(this.system.app, component, data);\n\t\t\t\t} else {\n\t\t\t\t\tentity.trigger.initialize(data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreatePhysicalShape(entity, data) {\n\t\treturn undefined;\n\t}\n\n\tupdateTransform(component, position, rotation, scale) {\n\t\tif (component.entity.trigger) {\n\t\t\tcomponent.entity.trigger.updateTransform();\n\t\t}\n\t}\n\n\tbeforeRemove(entity, component) {\n\t\tif (component.data.shape) {\n\t\t\tif (component._compoundParent && !component._compoundParent.entity._destroying) {\n\t\t\t\tthis.system._removeCompoundChild(component._compoundParent, component.data.shape);\n\n\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\n\t\t\tcomponent._compoundParent = null;\n\t\t\tAmmo.destroy(component.data.shape);\n\t\t\tcomponent.data.shape = null;\n\t\t}\n\t}\n\n\tremove(entity, data) {\n\t\tvar app = this.system.app;\n\n\t\tif (entity.rigidbody && entity.rigidbody.body) {\n\t\t\tentity.rigidbody.disableSimulation();\n\t\t}\n\n\t\tif (entity.trigger) {\n\t\t\tentity.trigger.destroy();\n\t\t\tdelete entity.trigger;\n\t\t}\n\n\t\tif (app.scene.containsModel(data.model)) {\n\t\t\tapp.root.removeChild(data.model.graph);\n\t\t\tapp.scene.removeModel(data.model);\n\t\t}\n\t}\n\n\tclone(entity, clone) {\n\t\tvar src = this.system.store[entity.getGuid()];\n\t\tvar data = {\n\t\t\tenabled: src.data.enabled,\n\t\t\ttype: src.data.type,\n\t\t\thalfExtents: [src.data.halfExtents.x, src.data.halfExtents.y, src.data.halfExtents.z],\n\t\t\tradius: src.data.radius,\n\t\t\taxis: src.data.axis,\n\t\t\theight: src.data.height,\n\t\t\tasset: src.data.asset,\n\t\t\trenderAsset: src.data.renderAsset,\n\t\t\tmodel: src.data.model,\n\t\t\trender: src.data.render\n\t\t};\n\t\treturn this.system.addComponent(clone, data);\n\t}\n\n}\n\nclass CollisionBoxSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tvar he = data.halfExtents;\n\t\t\tvar ammoHe = new Ammo.btVector3(he ? he.x : 0.5, he ? he.y : 0.5, he ? he.z : 0.5);\n\t\t\tvar shape = new Ammo.btBoxShape(ammoHe);\n\t\t\tAmmo.destroy(ammoHe);\n\t\t\treturn shape;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nclass CollisionSphereSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\treturn new Ammo.btSphereShape(data.radius);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nclass CollisionCapsuleSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius || 0.5;\n\t\tvar height = Math.max((data.height || 2) - 2 * radius, 0);\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\tshape = new Ammo.btCapsuleShapeX(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\tshape = new Ammo.btCapsuleShape(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\tshape = new Ammo.btCapsuleShapeZ(radius, height);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionCylinderSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar halfExtents = null;\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius !== undefined ? data.radius : 0.5;\n\t\tvar height = data.height !== undefined ? data.height : 1;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(height * 0.5, radius, radius);\n\t\t\t\t\tshape = new Ammo.btCylinderShapeX(halfExtents);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(radius, height * 0.5, radius);\n\t\t\t\t\tshape = new Ammo.btCylinderShape(halfExtents);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(radius, radius, height * 0.5);\n\t\t\t\t\tshape = new Ammo.btCylinderShapeZ(halfExtents);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (halfExtents) Ammo.destroy(halfExtents);\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionConeSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius !== undefined ? data.radius : 0.5;\n\t\tvar height = data.height !== undefined ? data.height : 1;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\tshape = new Ammo.btConeShapeX(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\tshape = new Ammo.btConeShape(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\tshape = new Ammo.btConeShapeZ(radius, height);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionMeshSystemImpl extends CollisionSystemImpl {\n\tbeforeInitialize(component, data) {}\n\n\tcreateAmmoMesh(mesh, node, shape) {\n\t\tvar triMesh;\n\t\tvar i;\n\n\t\tif (this.system._triMeshCache[mesh.id]) {\n\t\t\ttriMesh = this.system._triMeshCache[mesh.id];\n\t\t} else {\n\t\t\tvar vb = mesh.vertexBuffer;\n\t\t\tvar format = vb.getFormat();\n\t\t\tvar stride;\n\t\t\tvar positions;\n\n\t\t\tfor (i = 0; i < format.elements.length; i++) {\n\t\t\t\tvar element = format.elements[i];\n\n\t\t\t\tif (element.name === SEMANTIC_POSITION) {\n\t\t\t\t\tpositions = new Float32Array(vb.lock(), element.offset);\n\t\t\t\t\tstride = element.stride / 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar indices = [];\n\t\t\tmesh.getIndices(indices);\n\t\t\tvar numTriangles = mesh.primitive[0].count / 3;\n\t\t\tvar v1 = new Ammo.btVector3();\n\t\t\tvar v2 = new Ammo.btVector3();\n\t\t\tvar v3 = new Ammo.btVector3();\n\t\t\tvar i1, i2, i3;\n\t\t\tvar base = mesh.primitive[0].base;\n\t\t\ttriMesh = new Ammo.btTriangleMesh();\n\t\t\tthis.system._triMeshCache[mesh.id] = triMesh;\n\n\t\t\tfor (i = 0; i < numTriangles; i++) {\n\t\t\t\ti1 = indices[base + i * 3] * stride;\n\t\t\t\ti2 = indices[base + i * 3 + 1] * stride;\n\t\t\t\ti3 = indices[base + i * 3 + 2] * stride;\n\t\t\t\tv1.setValue(positions[i1], positions[i1 + 1], positions[i1 + 2]);\n\t\t\t\tv2.setValue(positions[i2], positions[i2 + 1], positions[i2 + 2]);\n\t\t\t\tv3.setValue(positions[i3], positions[i3 + 1], positions[i3 + 2]);\n\t\t\t\ttriMesh.addTriangle(v1, v2, v3, true);\n\t\t\t}\n\n\t\t\tAmmo.destroy(v1);\n\t\t\tAmmo.destroy(v2);\n\t\t\tAmmo.destroy(v3);\n\t\t}\n\n\t\tvar useQuantizedAabbCompression = true;\n\t\tvar triMeshShape = new Ammo.btBvhTriangleMeshShape(triMesh, useQuantizedAabbCompression);\n\n\t\tvar scaling = this.system._getNodeScaling(node);\n\n\t\ttriMeshShape.setLocalScaling(scaling);\n\t\tAmmo.destroy(scaling);\n\n\t\tvar transform = this.system._getNodeTransform(node);\n\n\t\tshape.addChildShape(transform, triMeshShape);\n\t\tAmmo.destroy(transform);\n\t}\n\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo === 'undefined') return;\n\n\t\tif (data.model || data.render) {\n\t\t\tvar shape = new Ammo.btCompoundShape();\n\n\t\t\tif (data.model) {\n\t\t\t\tvar meshInstances = data.model.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\t\tthis.createAmmoMesh(meshInstances[i].mesh, meshInstances[i].node, shape);\n\t\t\t\t}\n\t\t\t} else if (data.render) {\n\t\t\t\tvar meshes = data.render.meshes;\n\n\t\t\t\tfor (let i = 0; i < meshes.length; i++) {\n\t\t\t\t\tthis.createAmmoMesh(meshes[i], tempGraphNode, shape);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar entityTransform = entity.getWorldTransform();\n\t\t\tvar scale = entityTransform.getScale();\n\t\t\tvar vec = new Ammo.btVector3(scale.x, scale.y, scale.z);\n\t\t\tshape.setLocalScaling(vec);\n\t\t\tAmmo.destroy(vec);\n\t\t\treturn shape;\n\t\t}\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tvar data = component.data;\n\n\t\tif (data.renderAsset || data.asset) {\n\t\t\tif (component.enabled && component.entity.enabled) {\n\t\t\t\tthis.loadAsset(component, data.renderAsset || data.asset, data.renderAsset ? 'render' : 'model');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.doRecreatePhysicalShape(component);\n\t}\n\n\tloadAsset(component, id, property) {\n\t\tvar self = this;\n\t\tvar data = component.data;\n\t\tvar assets = this.system.app.assets;\n\t\tvar asset = assets.get(id);\n\n\t\tif (asset) {\n\t\t\tasset.ready(function (asset) {\n\t\t\t\tdata[property] = asset.resource;\n\t\t\t\tself.doRecreatePhysicalShape(component);\n\t\t\t});\n\t\t\tassets.load(asset);\n\t\t} else {\n\t\t\tassets.once(\"add:\" + id, function (asset) {\n\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\tdata[property] = asset.resource;\n\t\t\t\t\tself.doRecreatePhysicalShape(component);\n\t\t\t\t});\n\t\t\t\tassets.load(asset);\n\t\t\t});\n\t\t}\n\t}\n\n\tdoRecreatePhysicalShape(component) {\n\t\tvar entity = component.entity;\n\t\tvar data = component.data;\n\n\t\tif (data.model || data.render) {\n\t\t\tthis.destroyShape(data);\n\t\t\tdata.shape = this.createPhysicalShape(entity, data);\n\n\t\t\tif (entity.rigidbody) {\n\t\t\t\tentity.rigidbody.disableSimulation();\n\t\t\t\tentity.rigidbody.createBody();\n\n\t\t\t\tif (entity.enabled && entity.rigidbody.enabled) {\n\t\t\t\t\tentity.rigidbody.enableSimulation();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!entity.trigger) {\n\t\t\t\t\tentity.trigger = new Trigger(this.system.app, component, data);\n\t\t\t\t} else {\n\t\t\t\t\tentity.trigger.initialize(data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.beforeRemove(entity, component);\n\t\t\tthis.remove(entity, data);\n\t\t}\n\t}\n\n\tupdateTransform(component, position, rotation, scale) {\n\t\tif (component.shape) {\n\t\t\tvar entityTransform = component.entity.getWorldTransform();\n\t\t\tvar worldScale = entityTransform.getScale();\n\t\t\tvar previousScale = component.shape.getLocalScaling();\n\n\t\t\tif (worldScale.x !== previousScale.x() || worldScale.y !== previousScale.y() || worldScale.z !== previousScale.z()) {\n\t\t\t\tthis.doRecreatePhysicalShape(component);\n\t\t\t}\n\t\t}\n\n\t\tsuper.updateTransform(component, position, rotation, scale);\n\t}\n\n\tdestroyShape(data) {\n\t\tif (!data.shape) return;\n\t\tvar numShapes = data.shape.getNumChildShapes();\n\n\t\tfor (var i = 0; i < numShapes; i++) {\n\t\t\tvar shape = data.shape.getChildShape(i);\n\t\t\tAmmo.destroy(shape);\n\t\t}\n\n\t\tAmmo.destroy(data.shape);\n\t\tdata.shape = null;\n\t}\n\n\tremove(entity, data) {\n\t\tthis.destroyShape(data);\n\t\tsuper.remove(entity, data);\n\t}\n\n}\n\nclass CollisionCompoundSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\treturn new Ammo.btCompoundShape();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t_addEachDescendant(entity) {\n\t\tif (!entity.collision || entity.rigidbody) return;\n\t\tentity.collision._compoundParent = this;\n\n\t\tif (entity !== this.entity) {\n\t\t\tentity.collision.system.recreatePhysicalShapes(entity.collision);\n\t\t}\n\t}\n\n\t_updateEachDescendant(entity) {\n\t\tif (!entity.collision) return;\n\t\tif (entity.collision._compoundParent !== this) return;\n\t\tentity.collision._compoundParent = null;\n\n\t\tif (entity !== this.entity && !entity.rigidbody) {\n\t\t\tentity.collision.system.recreatePhysicalShapes(entity.collision);\n\t\t}\n\t}\n\n\t_updateEachDescendantTransform(entity) {\n\t\tif (!entity.collision || entity.collision._compoundParent !== this.collision._compoundParent) return;\n\t\tthis.collision.system.updateCompoundChildTransform(entity);\n\t}\n\n}\n\nclass CollisionComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = \"collision\";\n\t\tthis.ComponentType = CollisionComponent;\n\t\tthis.DataType = CollisionComponentData;\n\t\tthis.schema = _schema$f;\n\t\tthis.implementations = {};\n\t\tthis._triMeshCache = {};\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tproperties = ['type', 'halfExtents', 'radius', 'axis', 'height', 'shape', 'model', 'asset', 'render', 'renderAsset', 'enabled'];\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tvar property = properties[i];\n\t\t\tdata[property] = _data[property];\n\t\t}\n\n\t\tvar idx;\n\n\t\tif (_data.hasOwnProperty('asset')) {\n\t\t\tidx = properties.indexOf('model');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = properties.indexOf('render');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\t\t} else if (_data.hasOwnProperty('model')) {\n\t\t\tidx = properties.indexOf('asset');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (!data.type) {\n\t\t\tdata.type = component.data.type;\n\t\t}\n\n\t\tcomponent.data.type = data.type;\n\n\t\tif (data.halfExtents && Array.isArray(data.halfExtents)) {\n\t\t\tdata.halfExtents = new Vec3(data.halfExtents[0], data.halfExtents[1], data.halfExtents[2]);\n\t\t}\n\n\t\tvar impl = this._createImplementation(data.type);\n\n\t\timpl.beforeInitialize(component, data);\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\timpl.afterInitialize(component, data);\n\t}\n\n\t_createImplementation(type) {\n\t\tif (this.implementations[type] === undefined) {\n\t\t\tvar impl;\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'box':\n\t\t\t\t\timpl = new CollisionBoxSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sphere':\n\t\t\t\t\timpl = new CollisionSphereSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'capsule':\n\t\t\t\t\timpl = new CollisionCapsuleSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'cylinder':\n\t\t\t\t\timpl = new CollisionCylinderSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'cone':\n\t\t\t\t\timpl = new CollisionConeSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\timpl = new CollisionMeshSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'compound':\n\t\t\t\t\timpl = new CollisionCompoundSystemImpl(this);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.implementations[type] = impl;\n\t\t}\n\n\t\treturn this.implementations[type];\n\t}\n\n\t_getImplementation(entity) {\n\t\treturn this.implementations[entity.collision.data.type];\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\treturn this._getImplementation(entity).clone(entity, clone);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tthis.implementations[component.data.type].beforeRemove(entity, component);\n\t\tcomponent.onBeforeRemove();\n\t}\n\n\tonRemove(entity, data) {\n\t\tthis.implementations[data.type].remove(entity, data);\n\t}\n\n\tupdateCompoundChildTransform(entity) {\n\t\tthis._removeCompoundChild(entity.collision._compoundParent, entity.collision.data.shape);\n\n\t\tif (entity.enabled && entity.collision.enabled) {\n\t\t\tvar transform = this._getNodeTransform(entity, entity.collision._compoundParent.entity);\n\n\t\t\tentity.collision._compoundParent.shape.addChildShape(transform, entity.collision.data.shape);\n\n\t\t\tAmmo.destroy(transform);\n\t\t}\n\t}\n\n\t_removeCompoundChild(collision, shape) {\n\t\tif (collision.shape.removeChildShape) {\n\t\t\tcollision.shape.removeChildShape(shape);\n\t\t} else {\n\t\t\tvar ind = collision._getCompoundChildShapeIndex(shape);\n\n\t\t\tif (ind !== null) {\n\t\t\t\tcollision.shape.removeChildShapeByIndex(ind);\n\t\t\t}\n\t\t}\n\t}\n\n\tonTransformChanged(component, position, rotation, scale) {\n\t\tthis.implementations[component.data.type].updateTransform(component, position, rotation, scale);\n\t}\n\n\tchangeType(component, previousType, newType) {\n\t\tthis.implementations[previousType].beforeRemove(component.entity, component);\n\t\tthis.implementations[previousType].remove(component.entity, component.data);\n\n\t\tthis._createImplementation(newType).reset(component, component.data);\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tthis.implementations[component.data.type].recreatePhysicalShapes(component);\n\t}\n\n\t_calculateNodeRelativeTransform(node, relative) {\n\t\tif (node === relative) {\n\t\t\tvar scale = node.getWorldTransform().getScale();\n\t\t\tmat4.setScale(scale.x, scale.y, scale.z);\n\t\t} else {\n\t\t\tthis._calculateNodeRelativeTransform(node.parent, relative);\n\n\t\t\tmat4.mul(node.getLocalTransform());\n\t\t}\n\t}\n\n\t_getNodeScaling(node) {\n\t\tvar wtm = node.getWorldTransform();\n\t\tvar scl = wtm.getScale();\n\t\treturn new Ammo.btVector3(scl.x, scl.y, scl.z);\n\t}\n\n\t_getNodeTransform(node, relative) {\n\t\tvar pos, rot;\n\n\t\tif (relative) {\n\t\t\tthis._calculateNodeRelativeTransform(node, relative);\n\n\t\t\tpos = vec3;\n\t\t\trot = quat;\n\t\t\tmat4.getTranslation(pos);\n\t\t\trot.setFromMat4(mat4);\n\t\t} else {\n\t\t\tpos = node.getPosition();\n\t\t\trot = node.getRotation();\n\t\t}\n\n\t\tvar transform = new Ammo.btTransform();\n\t\ttransform.setIdentity();\n\t\tvar origin = transform.getOrigin();\n\t\torigin.setValue(pos.x, pos.y, pos.z);\n\t\tvar ammoQuat = new Ammo.btQuaternion();\n\t\tammoQuat.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setRotation(ammoQuat);\n\t\tAmmo.destroy(ammoQuat);\n\t\tAmmo.destroy(origin);\n\t\treturn transform;\n\t}\n\n\tdestroy() {\n\t\tfor (var key in this._triMeshCache) {\n\t\t\tAmmo.destroy(this._triMeshCache[key]);\n\t\t}\n\n\t\tthis._triMeshCache = null;\n\t\tsuper.destroy();\n\t}\n\n}\n\nComponent._buildAccessors(CollisionComponent.prototype, _schema$f);\n\nclass ComponentSystemRegistry {\n\tconstructor() {\n\t\tthis.list = [];\n\t}\n\n\tadd(system) {\n\t\tvar id = system.id;\n\n\t\tif (this[id]) {\n\t\t\tthrow new Error(\"ComponentSystem name '\" + id + \"' already registered or not allowed\");\n\t\t}\n\n\t\tthis[id] = system;\n\t\tthis.list.push(system);\n\t}\n\n\tremove(system) {\n\t\tvar id = system.id;\n\n\t\tif (!this[id]) {\n\t\t\tthrow new Error(\"No ComponentSystem named '\" + id + \"' registered\");\n\t\t}\n\n\t\tdelete this[id];\n\t\tvar index = this.list.indexOf(this[id]);\n\n\t\tif (index !== -1) {\n\t\t\tthis.list.splice(index, 1);\n\t\t}\n\t}\n\n}\n\nconst ELEMENTTYPE_GROUP = 'group';\nconst ELEMENTTYPE_IMAGE = 'image';\nconst ELEMENTTYPE_TEXT = 'text';\n\nclass StencilParameters {\n\tconstructor(options) {\n\t\tthis.func = options.func === undefined ? FUNC_ALWAYS : options.func;\n\t\tthis.ref = options.ref || 0;\n\t\tthis.readMask = options.readMask === undefined ? 0xFF : options.readMask;\n\t\tthis.writeMask = options.writeMask === undefined ? 0xFF : options.writeMask;\n\t\tthis.fail = options.fail || STENCILOP_KEEP;\n\t\tthis.zfail = options.zfail || STENCILOP_KEEP;\n\t\tthis.zpass = options.zpass || STENCILOP_KEEP;\n\t}\n\n\tclone() {\n\t\treturn new StencilParameters({\n\t\t\tfunc: this.func,\n\t\t\tref: this.ref,\n\t\t\treadMask: this.readMask,\n\t\t\twriteMask: this.writeMask,\n\t\t\tfail: this.fail,\n\t\t\tzfail: this.zfail,\n\t\t\tzpass: this.zpass\n\t\t});\n\t}\n\n}\n\nclass ImageRenderable {\n\tconstructor(entity, mesh, material) {\n\t\tthis._entity = entity;\n\t\tthis._element = entity.element;\n\t\tthis.model = new Model();\n\t\tthis.node = new GraphNode();\n\t\tthis.model.graph = this.node;\n\t\tthis.mesh = mesh;\n\t\tthis.meshInstance = new MeshInstance(this.mesh, material, this.node);\n\t\tthis.meshInstance.name = 'ImageElement: ' + entity.name;\n\t\tthis.meshInstance.castShadow = false;\n\t\tthis.meshInstance.receiveShadow = false;\n\t\tthis._meshDirty = false;\n\t\tthis.model.meshInstances.push(this.meshInstance);\n\n\t\tthis._entity.addChild(this.model.graph);\n\n\t\tthis.model._entity = this._entity;\n\t\tthis.unmaskMeshInstance = null;\n\t}\n\n\tdestroy() {\n\t\tthis.setMaterial(null);\n\n\t\tthis._element.removeModelFromLayers(this.model);\n\n\t\tthis.model.destroy();\n\t\tthis.model = null;\n\t\tthis.node = null;\n\t\tthis.mesh = null;\n\t\tthis.meshInstance = null;\n\t\tthis._entity = null;\n\t\tthis._element = null;\n\t}\n\n\tsetMesh(mesh) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.mesh = mesh;\n\t\tthis.meshInstance.mesh = mesh;\n\t\tthis.meshInstance.visible = !!mesh;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.mesh = mesh;\n\t\t}\n\n\t\tthis.forceUpdateAabb();\n\t}\n\n\tsetMask(mask) {\n\t\tif (!this.meshInstance) return;\n\n\t\tif (mask) {\n\t\t\tthis.unmaskMeshInstance = new MeshInstance(this.mesh, this.meshInstance.material, this.node);\n\t\t\tthis.unmaskMeshInstance.name = 'Unmask: ' + this._entity.name;\n\t\t\tthis.unmaskMeshInstance.castShadow = false;\n\t\t\tthis.unmaskMeshInstance.receiveShadow = false;\n\t\t\tthis.unmaskMeshInstance.pick = false;\n\t\t\tthis.model.meshInstances.push(this.unmaskMeshInstance);\n\n\t\t\tfor (var name in this.meshInstance.parameters) {\n\t\t\t\tthis.unmaskMeshInstance.setParameter(name, this.meshInstance.parameters[name].data);\n\t\t\t}\n\t\t} else {\n\t\t\tvar idx = this.model.meshInstances.indexOf(this.unmaskMeshInstance);\n\n\t\t\tif (idx >= 0) {\n\t\t\t\tthis.model.meshInstances.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.unmaskMeshInstance = null;\n\t\t}\n\n\t\tif (this._entity.enabled && this._element.enabled) {\n\t\t\tthis._element.removeModelFromLayers(this.model);\n\n\t\t\tthis._element.addModelToLayers(this.model);\n\t\t}\n\t}\n\n\tsetMaterial(material) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.material = material;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.material = material;\n\t\t}\n\t}\n\n\tsetParameter(name, value) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.setParameter(name, value);\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.setParameter(name, value);\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.deleteParameter(name);\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.deleteParameter(name);\n\t\t}\n\t}\n\n\tsetUnmaskDrawOrder() {\n\t\tif (!this.meshInstance) return;\n\n\t\tvar getLastChild = function getLastChild(e) {\n\t\t\tvar last;\n\t\t\tvar c = e.children;\n\t\t\tvar l = c.length;\n\n\t\t\tif (l) {\n\t\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\t\tif (c[i].element) {\n\t\t\t\t\t\tlast = c[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!last) return null;\n\t\t\t\tvar child = getLastChild(last);\n\n\t\t\t\tif (child) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\n\t\t\t\treturn last;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tvar lastChild = getLastChild(this._entity);\n\n\t\t\tif (lastChild && lastChild.element) {\n\t\t\t\tthis.unmaskMeshInstance.drawOrder = lastChild.element.drawOrder + lastChild.element.getMaskOffset();\n\t\t\t} else {\n\t\t\t\tthis.unmaskMeshInstance.drawOrder = this.meshInstance.drawOrder + this._element.getMaskOffset();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDrawOrder(drawOrder) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.drawOrder = drawOrder;\n\t}\n\n\tsetCull(cull) {\n\t\tif (!this.meshInstance) return;\n\t\tvar element = this._element;\n\t\tvar visibleFn = null;\n\n\t\tif (cull && element._isScreenCulled()) {\n\t\t\tvisibleFn = function (camera) {\n\t\t\t\treturn element.isVisibleForCamera(camera);\n\t\t\t};\n\t\t}\n\n\t\tthis.meshInstance.cull = cull;\n\t\tthis.meshInstance.isVisibleFunc = visibleFn;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.cull = cull;\n\t\t\tthis.unmaskMeshInstance.isVisibleFunc = visibleFn;\n\t\t}\n\t}\n\n\tsetScreenSpace(screenSpace) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.screenSpace = screenSpace;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.screenSpace = screenSpace;\n\t\t}\n\t}\n\n\tsetLayer(layer) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.layer = layer;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.layer = layer;\n\t\t}\n\t}\n\n\tforceUpdateAabb(mask) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance._aabbVer = -1;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance._aabbVer = -1;\n\t\t}\n\t}\n\n\tsetAabbFunc(fn) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance._updateAabbFunc = fn;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance._updateAabbFunc = fn;\n\t\t}\n\t}\n\n}\n\nclass ImageElement {\n\tconstructor(element) {\n\t\tthis._element = element;\n\t\tthis._entity = element.entity;\n\t\tthis._system = element.system;\n\t\tthis._textureAsset = null;\n\t\tthis._texture = null;\n\t\tthis._materialAsset = null;\n\t\tthis._material = null;\n\t\tthis._spriteAsset = null;\n\t\tthis._sprite = null;\n\t\tthis._spriteFrame = 0;\n\t\tthis._pixelsPerUnit = null;\n\t\tthis._rect = new Vec4(0, 0, 1, 1);\n\t\tthis._mask = false;\n\t\tthis._maskRef = 0;\n\t\tthis._outerScale = new Vec2();\n\t\tthis._outerScaleUniform = new Float32Array(2);\n\t\tthis._innerOffset = new Vec4();\n\t\tthis._innerOffsetUniform = new Float32Array(4);\n\t\tthis._atlasRect = new Vec4();\n\t\tthis._atlasRectUniform = new Float32Array(4);\n\t\tthis._defaultMesh = this._createMesh();\n\t\tthis._renderable = new ImageRenderable(this._entity, this._defaultMesh, this._material);\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array([1, 1, 1]);\n\n\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\tthis._renderable.setParameter('material_opacity', 1);\n\n\t\tthis._updateAabbFunc = this._updateAabb.bind(this);\n\n\t\tthis._onScreenChange(this._element.screen);\n\n\t\tthis._element.on('resize', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.on('set:pivot', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.on('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.on('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.on('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.on('screen:set:resolution', this._onResolutionChange, this);\n\t}\n\n\tdestroy() {\n\t\tthis.textureAsset = null;\n\t\tthis.spriteAsset = null;\n\t\tthis.materialAsset = null;\n\n\t\tthis._renderable.setMesh(this._defaultMesh);\n\n\t\tthis._renderable.destroy();\n\n\t\tthis._defaultMesh = null;\n\n\t\tthis._element.off('resize', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.off('set:pivot', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.off('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.off('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.off('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.off('screen:set:resolution', this._onResolutionChange, this);\n\t}\n\n\t_onResolutionChange(res) {}\n\n\t_onParentResizeOrPivotChange() {\n\t\tif (this._renderable.mesh) {\n\t\t\tthis._updateMesh(this._renderable.mesh);\n\t\t}\n\t}\n\n\t_onScreenSpaceChange(value) {\n\t\tthis._updateMaterial(value);\n\t}\n\n\t_onScreenChange(screen, previous) {\n\t\tif (screen) {\n\t\t\tthis._updateMaterial(screen.screen.screenSpace);\n\t\t} else {\n\t\t\tthis._updateMaterial(false);\n\t\t}\n\t}\n\n\t_onDrawOrderChange(order) {\n\t\tthis._renderable.setDrawOrder(order);\n\n\t\tif (this.mask && this._element.screen) {\n\t\t\tthis._element.screen.screen.once('syncdraworder', function () {\n\t\t\t\tthis._renderable.setUnmaskDrawOrder();\n\t\t\t}, this);\n\t\t}\n\t}\n\n\t_hasUserMaterial() {\n\t\treturn !!this._materialAsset || !!this._material && this._system.defaultImageMaterials.indexOf(this._material) === -1;\n\t}\n\n\t_use9Slicing() {\n\t\treturn this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED);\n\t}\n\n\t_updateMaterial(screenSpace) {\n\t\tvar mask = !!this._mask;\n\t\tvar nineSliced = !!(this.sprite && this.sprite.renderMode === SPRITE_RENDERMODE_SLICED);\n\t\tvar nineTiled = !!(this.sprite && this.sprite.renderMode === SPRITE_RENDERMODE_TILED);\n\n\t\tif (!this._hasUserMaterial()) {\n\t\t\tthis._material = this._system.getImageElementMaterial(screenSpace, mask, nineSliced, nineTiled);\n\t\t}\n\n\t\tif (this._renderable) {\n\t\t\tthis._renderable.setCull(true);\n\n\t\t\tthis._renderable.setMaterial(this._material);\n\n\t\t\tthis._renderable.setScreenSpace(screenSpace);\n\n\t\t\tthis._renderable.setLayer(screenSpace ? LAYER_HUD : LAYER_WORLD);\n\t\t}\n\t}\n\n\t_createMesh() {\n\t\tvar element = this._element;\n\t\tvar w = element.calculatedWidth;\n\t\tvar h = element.calculatedHeight;\n\t\tvar r = this._rect;\n\t\tvar vertexData = new ArrayBuffer(4 * 8 * 4);\n\t\tvar vertexDataF32 = new Float32Array(vertexData);\n\t\tvertexDataF32[5] = 1;\n\t\tvertexDataF32[6] = r.x;\n\t\tvertexDataF32[7] = 1.0 - r.y;\n\t\tvertexDataF32[8] = w;\n\t\tvertexDataF32[13] = 1;\n\t\tvertexDataF32[14] = r.x + r.z;\n\t\tvertexDataF32[15] = 1.0 - r.y;\n\t\tvertexDataF32[16] = w;\n\t\tvertexDataF32[17] = h;\n\t\tvertexDataF32[21] = 1;\n\t\tvertexDataF32[22] = r.x + r.z;\n\t\tvertexDataF32[23] = 1.0 - (r.y + r.w);\n\t\tvertexDataF32[25] = h;\n\t\tvertexDataF32[29] = 1;\n\t\tvertexDataF32[30] = r.x;\n\t\tvertexDataF32[31] = 1.0 - (r.y + r.w);\n\t\tvar vertexDesc = [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_NORMAL,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD0,\n\t\t\tcomponents: 2,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tvar device = this._system.app.graphicsDevice;\n\t\tvar vertexFormat = new VertexFormat(device, vertexDesc);\n\t\tvar vertexBuffer = new VertexBuffer(device, vertexFormat, 4, BUFFER_STATIC, vertexData);\n\t\tvar mesh = new Mesh(device);\n\t\tmesh.vertexBuffer = vertexBuffer;\n\t\tmesh.primitive[0].type = PRIMITIVE_TRIFAN;\n\t\tmesh.primitive[0].base = 0;\n\t\tmesh.primitive[0].count = 4;\n\t\tmesh.primitive[0].indexed = false;\n\t\tmesh.aabb.setMinMax(Vec3.ZERO, new Vec3(w, h, 0));\n\n\t\tthis._updateMesh(mesh);\n\n\t\treturn mesh;\n\t}\n\n\t_updateMesh(mesh) {\n\t\tvar element = this._element;\n\t\tvar w = element.calculatedWidth;\n\t\tvar h = element.calculatedHeight;\n\n\t\tvar screenSpace = element._isScreenSpace();\n\n\t\tthis._updateMaterial(screenSpace);\n\n\t\tif (this._renderable) this._renderable.forceUpdateAabb();\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tvar frameData = this._sprite.atlas.frames[this._sprite.frameKeys[this._spriteFrame]];\n\t\t\tvar borderWidthScale = 2 / frameData.rect.z;\n\t\t\tvar borderHeightScale = 2 / frameData.rect.w;\n\n\t\t\tthis._innerOffset.set(frameData.border.x * borderWidthScale, frameData.border.y * borderHeightScale, frameData.border.z * borderWidthScale, frameData.border.w * borderHeightScale);\n\n\t\t\tvar tex = this.sprite.atlas.texture;\n\n\t\t\tthis._atlasRect.set(frameData.rect.x / tex.width, frameData.rect.y / tex.height, frameData.rect.z / tex.width, frameData.rect.w / tex.height);\n\n\t\t\tvar ppu = this._pixelsPerUnit !== null ? this._pixelsPerUnit : this.sprite.pixelsPerUnit;\n\t\t\tvar scaleMulX = frameData.rect.z / ppu;\n\t\t\tvar scaleMulY = frameData.rect.w / ppu;\n\n\t\t\tthis._outerScale.set(Math.max(w, this._innerOffset.x * scaleMulX), Math.max(h, this._innerOffset.y * scaleMulY));\n\n\t\t\tvar scaleX = scaleMulX;\n\t\t\tvar scaleY = scaleMulY;\n\t\t\tthis._outerScale.x /= scaleMulX;\n\t\t\tthis._outerScale.y /= scaleMulY;\n\t\t\tscaleX *= math.clamp(w / (this._innerOffset.x * scaleMulX), 0.0001, 1);\n\t\t\tscaleY *= math.clamp(h / (this._innerOffset.y * scaleMulY), 0.0001, 1);\n\n\t\t\tif (this._renderable) {\n\t\t\t\tthis._innerOffsetUniform[0] = this._innerOffset.x;\n\t\t\t\tthis._innerOffsetUniform[1] = this._innerOffset.y;\n\t\t\t\tthis._innerOffsetUniform[2] = this._innerOffset.z;\n\t\t\t\tthis._innerOffsetUniform[3] = this._innerOffset.w;\n\n\t\t\t\tthis._renderable.setParameter('innerOffset', this._innerOffsetUniform);\n\n\t\t\t\tthis._atlasRectUniform[0] = this._atlasRect.x;\n\t\t\t\tthis._atlasRectUniform[1] = this._atlasRect.y;\n\t\t\t\tthis._atlasRectUniform[2] = this._atlasRect.z;\n\t\t\t\tthis._atlasRectUniform[3] = this._atlasRect.w;\n\n\t\t\t\tthis._renderable.setParameter('atlasRect', this._atlasRectUniform);\n\n\t\t\t\tthis._outerScaleUniform[0] = this._outerScale.x;\n\t\t\t\tthis._outerScaleUniform[1] = this._outerScale.y;\n\n\t\t\t\tthis._renderable.setParameter('outerScale', this._outerScaleUniform);\n\n\t\t\t\tthis._renderable.setAabbFunc(this._updateAabbFunc);\n\n\t\t\t\tthis._renderable.node.setLocalScale(scaleX, scaleY, 1);\n\n\t\t\t\tthis._renderable.node.setLocalPosition((0.5 - element.pivot.x) * w, (0.5 - element.pivot.y) * h, 0);\n\t\t\t}\n\t\t} else {\n\t\t\tvar vb = mesh.vertexBuffer;\n\t\t\tvar vertexDataF32 = new Float32Array(vb.lock());\n\t\t\tvar hp = element.pivot.x;\n\t\t\tvar vp = element.pivot.y;\n\t\t\tvertexDataF32[0] = 0 - hp * w;\n\t\t\tvertexDataF32[1] = 0 - vp * h;\n\t\t\tvertexDataF32[8] = w - hp * w;\n\t\t\tvertexDataF32[9] = 0 - vp * h;\n\t\t\tvertexDataF32[16] = w - hp * w;\n\t\t\tvertexDataF32[17] = h - vp * h;\n\t\t\tvertexDataF32[24] = 0 - hp * w;\n\t\t\tvertexDataF32[25] = h - vp * h;\n\t\t\tvar atlasTextureWidth = 1;\n\t\t\tvar atlasTextureHeight = 1;\n\t\t\tvar rect = this._rect;\n\n\t\t\tif (this._sprite && this._sprite.frameKeys[this._spriteFrame] && this._sprite.atlas) {\n\t\t\t\tvar frame = this._sprite.atlas.frames[this._sprite.frameKeys[this._spriteFrame]];\n\n\t\t\t\tif (frame) {\n\t\t\t\t\trect = frame.rect;\n\t\t\t\t\tatlasTextureWidth = this._sprite.atlas.texture.width;\n\t\t\t\t\tatlasTextureHeight = this._sprite.atlas.texture.height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvertexDataF32[6] = rect.x / atlasTextureWidth;\n\t\t\tvertexDataF32[7] = 1.0 - rect.y / atlasTextureHeight;\n\t\t\tvertexDataF32[14] = (rect.x + rect.z) / atlasTextureWidth;\n\t\t\tvertexDataF32[15] = 1.0 - rect.y / atlasTextureHeight;\n\t\t\tvertexDataF32[22] = (rect.x + rect.z) / atlasTextureWidth;\n\t\t\tvertexDataF32[23] = 1.0 - (rect.y + rect.w) / atlasTextureHeight;\n\t\t\tvertexDataF32[30] = rect.x / atlasTextureWidth;\n\t\t\tvertexDataF32[31] = 1.0 - (rect.y + rect.w) / atlasTextureHeight;\n\t\t\tvb.unlock();\n\t\t\tvar min = new Vec3(0 - hp * w, 0 - vp * h, 0);\n\t\t\tvar max = new Vec3(w - hp * w, h - vp * h, 0);\n\t\t\tmesh.aabb.setMinMax(min, max);\n\n\t\t\tif (this._renderable) {\n\t\t\t\tthis._renderable.node.setLocalScale(1, 1, 1);\n\n\t\t\t\tthis._renderable.node.setLocalPosition(0, 0, 0);\n\n\t\t\t\tthis._renderable.setAabbFunc(null);\n\t\t\t}\n\t\t}\n\n\t\tthis._meshDirty = false;\n\t}\n\n\t_updateSprite() {\n\t\tvar nineSlice = false;\n\t\tvar mesh = null;\n\n\t\tif (this._sprite && this._sprite.atlas) {\n\t\t\tmesh = this._sprite.meshes[this.spriteFrame];\n\t\t\tnineSlice = this._sprite.renderMode === SPRITE_RENDERMODE_SLICED || this._sprite.renderMode === SPRITE_RENDERMODE_TILED;\n\t\t}\n\n\t\tthis.mesh = nineSlice ? mesh : this._defaultMesh;\n\n\t\tif (this.mesh) {\n\t\t\tif (!this._element._beingInitialized) {\n\t\t\t\tthis._updateMesh(this.mesh);\n\t\t\t} else {\n\t\t\t\tthis._meshDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateAabb(aabb) {\n\t\taabb.center.set(0, 0, 0);\n\t\taabb.halfExtents.set(this._outerScale.x * 0.5, this._outerScale.y * 0.5, 0.001);\n\t\taabb.setFromTransformedAabb(aabb, this._renderable.node.getWorldTransform());\n\t\treturn aabb;\n\t}\n\n\t_toggleMask() {\n\t\tthis._element._dirtifyMask();\n\n\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\tthis._updateMaterial(screenSpace);\n\n\t\tthis._renderable.setMask(!!this._mask);\n\t}\n\n\t_onMaterialLoad(asset) {\n\t\tthis.material = asset.resource;\n\t}\n\n\t_onMaterialAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onMaterialAdded, this);\n\n\t\tif (this._materialAsset === asset.id) {\n\t\t\tthis._bindMaterialAsset(asset);\n\t\t}\n\t}\n\n\t_bindMaterialAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onMaterialLoad, this);\n\t\tasset.on(\"change\", this._onMaterialChange, this);\n\t\tasset.on(\"remove\", this._onMaterialRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMaterialAsset(asset) {\n\t\tasset.off(\"load\", this._onMaterialLoad, this);\n\t\tasset.off(\"change\", this._onMaterialChange, this);\n\t\tasset.off(\"remove\", this._onMaterialRemove, this);\n\t}\n\n\t_onMaterialChange() {}\n\n\t_onMaterialRemove() {}\n\n\t_onTextureAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onTextureAdded, this);\n\n\t\tif (this._textureAsset === asset.id) {\n\t\t\tthis._bindTextureAsset(asset);\n\t\t}\n\t}\n\n\t_bindTextureAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onTextureLoad, this);\n\t\tasset.on(\"change\", this._onTextureChange, this);\n\t\tasset.on(\"remove\", this._onTextureRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onTextureLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindTextureAsset(asset) {\n\t\tasset.off(\"load\", this._onTextureLoad, this);\n\t\tasset.off(\"change\", this._onTextureChange, this);\n\t\tasset.off(\"remove\", this._onTextureRemove, this);\n\t}\n\n\t_onTextureLoad(asset) {\n\t\tthis.texture = asset.resource;\n\t}\n\n\t_onTextureChange(asset) {}\n\n\t_onTextureRemove(asset) {}\n\n\t_onSpriteAssetAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onSpriteAssetAdded, this);\n\n\t\tif (this._spriteAsset === asset.id) {\n\t\t\tthis._bindSpriteAsset(asset);\n\t\t}\n\t}\n\n\t_bindSpriteAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.on(\"change\", this._onSpriteAssetChange, this);\n\t\tasset.on(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onSpriteAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindSpriteAsset(asset) {\n\t\tasset.off(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.off(\"change\", this._onSpriteAssetChange, this);\n\t\tasset.off(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.data.textureAtlasAsset) {\n\t\t\tthis._system.app.assets.off(\"load:\" + asset.data.textureAtlasAsset, this._onTextureAtlasLoad, this);\n\t\t}\n\t}\n\n\t_onSpriteAssetLoad(asset) {\n\t\tif (!asset || !asset.resource) {\n\t\t\tthis.sprite = null;\n\t\t} else {\n\t\t\tif (!asset.resource.atlas) {\n\t\t\t\tvar atlasAssetId = asset.data.textureAtlasAsset;\n\n\t\t\t\tif (atlasAssetId) {\n\t\t\t\t\tvar assets = this._system.app.assets;\n\t\t\t\t\tassets.off('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\t\tassets.once('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = asset.resource;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSpriteAssetChange(asset) {\n\t\tthis._onSpriteAssetLoad(asset);\n\t}\n\n\t_onSpriteAssetRemove(asset) {}\n\n\t_bindSprite(sprite) {\n\t\tsprite.on('set:meshes', this._onSpriteMeshesChange, this);\n\t\tsprite.on('set:pixelsPerUnit', this._onSpritePpuChange, this);\n\t\tsprite.on('set:atlas', this._onAtlasTextureChange, this);\n\n\t\tif (sprite.atlas) {\n\t\t\tsprite.atlas.on('set:texture', this._onAtlasTextureChange, this);\n\t\t}\n\t}\n\n\t_unbindSprite(sprite) {\n\t\tsprite.off('set:meshes', this._onSpriteMeshesChange, this);\n\t\tsprite.off('set:pixelsPerUnit', this._onSpritePpuChange, this);\n\t\tsprite.off('set:atlas', this._onAtlasTextureChange, this);\n\n\t\tif (sprite.atlas) {\n\t\t\tsprite.atlas.off('set:texture', this._onAtlasTextureChange, this);\n\t\t}\n\t}\n\n\t_onSpriteMeshesChange() {\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(this._spriteFrame, 0, this._sprite.frameKeys.length - 1);\n\t\t}\n\n\t\tthis._updateSprite();\n\t}\n\n\t_onSpritePpuChange() {\n\t\tif (this.sprite.renderMode !== SPRITE_RENDERMODE_SIMPLE && this._pixelsPerUnit === null) {\n\t\t\tthis._updateSprite();\n\t\t}\n\t}\n\n\t_onAtlasTextureChange() {\n\t\tif (this.sprite && this.sprite.atlas && this.sprite.atlas.texture) {\n\t\t\tthis._renderable.setParameter('texture_emissiveMap', this._sprite.atlas.texture);\n\n\t\t\tthis._renderable.setParameter('texture_opacityMap', this._sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter('texture_emissiveMap');\n\n\t\t\tthis._renderable.deleteParameter('texture_opacityMap');\n\t\t}\n\t}\n\n\t_onTextureAtlasLoad(atlasAsset) {\n\t\tvar spriteAsset = this._spriteAsset;\n\n\t\tif (spriteAsset instanceof Asset) {\n\t\t\tthis._onSpriteAssetLoad(spriteAsset);\n\t\t} else {\n\t\t\tthis._onSpriteAssetLoad(this._system.app.assets.get(spriteAsset));\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar asset;\n\n\t\tif (this._materialAsset) {\n\t\t\tasset = this._system.app.assets.get(this._materialAsset);\n\n\t\t\tif (asset && asset.resource !== this._material) {\n\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._textureAsset) {\n\t\t\tasset = this._system.app.assets.get(this._textureAsset);\n\n\t\t\tif (asset && asset.resource !== this._texture) {\n\t\t\t\tthis._bindTextureAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tasset = this._system.app.assets.get(this._spriteAsset);\n\n\t\t\tif (asset && asset.resource !== this._sprite) {\n\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tthis._element.addModelToLayers(this._renderable.model);\n\t}\n\n\tonDisable() {\n\t\tthis._element.removeModelFromLayers(this._renderable.model);\n\t}\n\n\t_setStencil(stencilParams) {\n\t\tthis._renderable.meshInstance.stencilFront = stencilParams;\n\t\tthis._renderable.meshInstance.stencilBack = stencilParams;\n\t\tvar ref = 0;\n\n\t\tif (this._element.maskedBy) {\n\t\t\tref = this._element.maskedBy.element._image._maskRef;\n\t\t}\n\n\t\tif (this._renderable.unmaskMeshInstance) {\n\t\t\tvar sp = new StencilParameters({\n\t\t\t\tref: ref + 1,\n\t\t\t\tfunc: FUNC_EQUAL,\n\t\t\t\tzpass: STENCILOP_DECREMENT\n\t\t\t});\n\t\t\tthis._renderable.unmaskMeshInstance.stencilFront = sp;\n\t\t\tthis._renderable.unmaskMeshInstance.stencilBack = sp;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tvar r = value.r;\n\t\tvar g = value.g;\n\t\tvar b = value.b;\n\n\t\tif (this._color.r === r && this._color.g === g && this._color.b === b) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._color.r = r;\n\t\tthis._color.g = g;\n\t\tthis._color.b = b;\n\t\tthis._colorUniform[0] = r;\n\t\tthis._colorUniform[1] = g;\n\t\tthis._colorUniform[2] = b;\n\n\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:color', this._color);\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tif (value === this._color.a) return;\n\t\tthis._color.a = value;\n\n\t\tthis._renderable.setParameter('material_opacity', value);\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:opacity', value);\n\t\t}\n\t}\n\n\tget rect() {\n\t\treturn this._rect;\n\t}\n\n\tset rect(value) {\n\t\tvar x, y, z, w;\n\n\t\tif (value instanceof Vec4) {\n\t\t\tx = value.x;\n\t\t\ty = value.y;\n\t\t\tz = value.z;\n\t\t\tw = value.w;\n\t\t} else {\n\t\t\tx = value[0];\n\t\t\ty = value[1];\n\t\t\tz = value[2];\n\t\t\tw = value[3];\n\t\t}\n\n\t\tif (x === this._rect.x && y === this._rect.y && z === this._rect.z && w === this._rect.w) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._rect.set(x, y, z, w);\n\n\t\tif (this._renderable.mesh) {\n\t\t\tif (!this._element._beingInitialized) {\n\t\t\t\tthis._updateMesh(this._renderable.mesh);\n\t\t\t} else {\n\t\t\t\tthis._meshDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material === value) return;\n\n\t\tif (!value) {\n\t\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\t\tif (this.mask) {\n\t\t\t\tvalue = screenSpace ? this._system.defaultScreenSpaceImageMaskMaterial : this._system.defaultImageMaskMaterial;\n\t\t\t} else {\n\t\t\t\tvalue = screenSpace ? this._system.defaultScreenSpaceImageMaterial : this._system.defaultImageMaterial;\n\t\t\t}\n\t\t}\n\n\t\tthis._material = value;\n\n\t\tif (value) {\n\t\t\tthis._renderable.setMaterial(value);\n\n\t\t\tif (this._hasUserMaterial()) {\n\t\t\t\tthis._renderable.deleteParameter('material_opacity');\n\n\t\t\t\tthis._renderable.deleteParameter('material_emissive');\n\t\t\t} else {\n\t\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\t\t\tthis._renderable.setParameter('material_opacity', this._color.a);\n\t\t\t}\n\t\t}\n\t}\n\n\tget materialAsset() {\n\t\treturn this._materialAsset;\n\t}\n\n\tset materialAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._materialAsset !== _id) {\n\t\t\tif (this._materialAsset) {\n\t\t\t\tassets.off('add:' + this._materialAsset, this._onMaterialAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._materialAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\t_prev.off(\"load\", this._onMaterialLoad, this);\n\n\t\t\t\t\t_prev.off(\"change\", this._onMaterialChange, this);\n\n\t\t\t\t\t_prev.off(\"remove\", this._onMaterialRemove, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._materialAsset = _id;\n\n\t\t\tif (this._materialAsset) {\n\t\t\t\tvar asset = assets.get(this._materialAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.material = null;\n\t\t\t\t\tassets.on('add:' + this._materialAsset, this._onMaterialAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.material = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tset texture(value) {\n\t\tif (this._texture === value) return;\n\n\t\tif (this._textureAsset) {\n\t\t\tvar textureAsset = this._system.app.assets.get(this._textureAsset);\n\n\t\t\tif (textureAsset && textureAsset.resource !== value) {\n\t\t\t\tthis.textureAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._texture = value;\n\n\t\tif (value) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tthis.spriteAsset = null;\n\t\t\t}\n\n\t\t\tthis._renderable.setParameter(\"texture_emissiveMap\", this._texture);\n\n\t\t\tthis._renderable.setParameter(\"texture_opacityMap\", this._texture);\n\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._renderable.setParameter(\"material_emissive\", this._colorUniform);\n\n\t\t\tthis._renderable.setParameter(\"material_opacity\", this._color.a);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter(\"texture_emissiveMap\");\n\n\t\t\tthis._renderable.deleteParameter(\"texture_opacityMap\");\n\t\t}\n\t}\n\n\tget textureAsset() {\n\t\treturn this._textureAsset;\n\t}\n\n\tset textureAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._textureAsset !== _id) {\n\t\t\tif (this._textureAsset) {\n\t\t\t\tassets.off('add:' + this._textureAsset, this._onTextureAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._textureAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\t_prev.off(\"load\", this._onTextureLoad, this);\n\n\t\t\t\t\t_prev.off(\"change\", this._onTextureChange, this);\n\n\t\t\t\t\t_prev.off(\"remove\", this._onTextureRemove, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._textureAsset = _id;\n\n\t\t\tif (this._textureAsset) {\n\t\t\t\tvar asset = assets.get(this._textureAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.texture = null;\n\t\t\t\t\tassets.on('add:' + this._textureAsset, this._onTextureAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindTextureAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.texture = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._spriteAsset !== _id) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tassets.off('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._spriteAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindSpriteAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._spriteAsset = _id;\n\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar asset = assets.get(this._spriteAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.sprite = null;\n\t\t\t\t\tassets.on('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = null;\n\t\t\t}\n\n\t\t\tif (this._element) {\n\t\t\t\tthis._element.fire('set:spriteAsset', _id);\n\t\t\t}\n\t\t}\n\t}\n\n\tget sprite() {\n\t\treturn this._sprite;\n\t}\n\n\tset sprite(value) {\n\t\tif (this._sprite === value) return;\n\n\t\tif (this._sprite) {\n\t\t\tthis._unbindSprite(this._sprite);\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tvar spriteAsset = this._system.app.assets.get(this._spriteAsset);\n\n\t\t\tif (spriteAsset && spriteAsset.resource !== value) {\n\t\t\t\tthis.spriteAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._sprite = value;\n\n\t\tif (this._sprite) {\n\t\t\tthis._bindSprite(this._sprite);\n\n\t\t\tif (this._textureAsset) {\n\t\t\t\tthis.textureAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tif (this._sprite && this._sprite.atlas && this._sprite.atlas.texture) {\n\t\t\tthis._renderable.setParameter(\"texture_emissiveMap\", this._sprite.atlas.texture);\n\n\t\t\tthis._renderable.setParameter(\"texture_opacityMap\", this._sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter(\"texture_emissiveMap\");\n\n\t\t\tthis._renderable.deleteParameter(\"texture_opacityMap\");\n\t\t}\n\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(this._spriteFrame, 0, this._sprite.frameKeys.length - 1);\n\t\t}\n\n\t\tthis._updateSprite();\n\t}\n\n\tget spriteFrame() {\n\t\treturn this._spriteFrame;\n\t}\n\n\tset spriteFrame(value) {\n\t\tvar oldValue = this._spriteFrame;\n\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(value, 0, this._sprite.frameKeys.length - 1);\n\t\t} else {\n\t\t\tthis._spriteFrame = value;\n\t\t}\n\n\t\tif (this._spriteFrame === oldValue) return;\n\n\t\tthis._updateSprite();\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:spriteFrame', value);\n\t\t}\n\t}\n\n\tget mesh() {\n\t\treturn this._renderable.mesh;\n\t}\n\n\tset mesh(value) {\n\t\tthis._renderable.setMesh(value);\n\n\t\tif (this._defaultMesh === value) {\n\t\t\tthis._renderable.setAabbFunc(null);\n\t\t} else {\n\t\t\tthis._renderable.setAabbFunc(this._updateAabbFunc);\n\t\t}\n\t}\n\n\tget mask() {\n\t\treturn this._mask;\n\t}\n\n\tset mask(value) {\n\t\tif (this._mask !== value) {\n\t\t\tthis._mask = value;\n\n\t\t\tthis._toggleMask();\n\t\t}\n\t}\n\n\tget pixelsPerUnit() {\n\t\treturn this._pixelsPerUnit;\n\t}\n\n\tset pixelsPerUnit(value) {\n\t\tif (this._pixelsPerUnit === value) return;\n\t\tthis._pixelsPerUnit = value;\n\n\t\tif (this._sprite && (this._sprite.renderMode === SPRITE_RENDERMODE_SLICED || this._sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tthis._updateSprite();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._renderable.meshInstance) {\n\t\t\treturn this._renderable.meshInstance.aabb;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass LocalizedAsset extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis._app = app;\n\t\tapp.i18n.on('set:locale', this._onSetLocale, this);\n\t\tthis._autoLoad = false;\n\t\tthis._disableLocalization = false;\n\t\tthis._defaultAsset = null;\n\t\tthis._localizedAsset = null;\n\t}\n\n\t_bindDefaultAsset() {\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset) {\n\t\t\tthis._app.assets.once('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\t\t} else {\n\t\t\tthis._onDefaultAssetAdd(asset);\n\t\t}\n\t}\n\n\t_unbindDefaultAsset() {\n\t\tif (!this._defaultAsset) return;\n\n\t\tthis._app.assets.off('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset) return;\n\t\tasset.off('add:localized', this._onLocaleAdd, this);\n\t\tasset.off('remove:localized', this._onLocaleRemove, this);\n\t\tasset.off('remove', this._onDefaultAssetRemove, this);\n\t}\n\n\t_onDefaultAssetAdd(asset) {\n\t\tif (this._defaultAsset !== asset.id) return;\n\t\tasset.on('add:localized', this._onLocaleAdd, this);\n\t\tasset.on('remove:localized', this._onLocaleRemove, this);\n\t\tasset.once('remove', this._onDefaultAssetRemove, this);\n\t}\n\n\t_onDefaultAssetRemove(asset) {\n\t\tif (this._defaultAsset !== asset.id) return;\n\t\tasset.off('add:localized', this._onLocaleAdd, this);\n\t\tasset.off('remove:localized', this._onLocaleAdd, this);\n\n\t\tthis._app.assets.once('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\t}\n\n\t_bindLocalizedAsset() {\n\t\tif (!this._autoLoad) return;\n\n\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\tif (!asset) return;\n\t\tasset.on(\"load\", this._onLocalizedAssetLoad, this);\n\t\tasset.on(\"change\", this._onLocalizedAssetChange, this);\n\t\tasset.on(\"remove\", this._onLocalizedAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onLocalizedAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindLocalizedAsset() {\n\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\tif (!asset) return;\n\t\tasset.off(\"load\", this._onLocalizedAssetLoad, this);\n\t\tasset.off(\"change\", this._onLocalizedAssetChange, this);\n\t\tasset.off(\"remove\", this._onLocalizedAssetRemove, this);\n\t}\n\n\t_onLocalizedAssetAdd(asset) {\n\t\tif (this._localizedAsset !== asset.id) return;\n\n\t\tthis._bindLocalizedAsset();\n\t}\n\n\t_onLocalizedAssetLoad(asset) {\n\t\tthis.fire('load', asset);\n\t}\n\n\t_onLocalizedAssetChange(asset, name, newValue, oldValue) {\n\t\tthis.fire('change', asset, name, newValue, oldValue);\n\t}\n\n\t_onLocalizedAssetRemove(asset) {\n\t\tif (this._localizedAsset === asset.id) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t}\n\n\t\tthis.fire('remove', asset);\n\t}\n\n\t_onLocaleAdd(locale, assetId) {\n\t\tif (this._app.i18n.locale !== locale) return;\n\n\t\tthis._onSetLocale(locale);\n\t}\n\n\t_onLocaleRemove(locale, assetId) {\n\t\tif (this._app.i18n.locale !== locale) return;\n\n\t\tthis._onSetLocale(locale);\n\t}\n\n\t_onSetLocale(locale) {\n\t\tif (!this._defaultAsset) {\n\t\t\tthis.localizedAsset = null;\n\t\t\treturn;\n\t\t}\n\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset || this._disableLocalization) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t\treturn;\n\t\t}\n\n\t\tvar localizedAssetId = asset.getLocalizedAssetId(locale);\n\n\t\tif (!localizedAssetId) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.localizedAsset = localizedAssetId;\n\t}\n\n\tdestroy() {\n\t\tthis.defaultAsset = null;\n\n\t\tthis._app.i18n.off('set:locale', this._onSetLocale, this);\n\n\t\tthis.off();\n\t}\n\n\tget defaultAsset() {\n\t\treturn this._defaultAsset;\n\t}\n\n\tset defaultAsset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\t\tif (this._defaultAsset === id) return;\n\n\t\tif (this._defaultAsset) {\n\t\t\tthis._unbindDefaultAsset();\n\t\t}\n\n\t\tthis._defaultAsset = id;\n\n\t\tif (this._defaultAsset) {\n\t\t\tthis._bindDefaultAsset();\n\t\t}\n\n\t\tthis._onSetLocale(this._app.i18n.locale);\n\t}\n\n\tget localizedAsset() {\n\t\treturn this._localizedAsset;\n\t}\n\n\tset localizedAsset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\n\t\tif (this._localizedAsset === id) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._localizedAsset) {\n\t\t\tthis._app.assets.off('add:' + this._localizedAsset, this._onLocalizedAssetAdd, this);\n\n\t\t\tthis._unbindLocalizedAsset();\n\n\t\t\tthis._localizedAsset = null;\n\t\t}\n\n\t\tthis._localizedAsset = id;\n\n\t\tif (this._localizedAsset) {\n\t\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\t\tif (!asset) {\n\t\t\t\tthis._app.assets.once('add:' + this._localizedAsset, this._onLocalizedAssetAdd, this);\n\t\t\t} else {\n\t\t\t\tthis._bindLocalizedAsset();\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoLoad() {\n\t\treturn this._autoLoad;\n\t}\n\n\tset autoLoad(value) {\n\t\tif (this._autoLoad === value) return;\n\t\tthis._autoLoad = value;\n\n\t\tif (this._autoLoad && this._localizedAsset) {\n\t\t\tthis._unbindLocalizedAsset();\n\n\t\t\tthis._bindLocalizedAsset();\n\t\t}\n\t}\n\n\tget disableLocalization() {\n\t\treturn this._disableLocalization;\n\t}\n\n\tset disableLocalization(value) {\n\t\tif (this._disableLocalization === value) return;\n\t\tthis._disableLocalization = value;\n\n\t\tthis._onSetLocale(this._app.i18n.locale);\n\t}\n\n}\n\nconst EOF_TOKEN = 0;\nconst ERROR_TOKEN = 1;\nconst TEXT_TOKEN = 2;\nconst OPEN_BRACKET_TOKEN = 3;\nconst CLOSE_BRACKET_TOKEN = 4;\nconst EQUALS_TOKEN = 5;\nconst STRING_TOKEN = 6;\nconst IDENTIFIER_TOKEN = 7;\nconst WHITESPACE_TOKEN = 8;\nconst WHITESPACE_CHARS = \" \\t\\n\\r\\v\\f\";\nconst IDENTIFIER_REGEX = /[A-Z|a-z|0-9|_|-|/]/;\n\nclass Scanner {\n\tconstructor(symbols) {\n\t\tthis._symbols = symbols;\n\t\tthis._index = 0;\n\t\tthis._last = 0;\n\t\tthis._cur = this._symbols.length > 0 ? this._symbols[0] : null;\n\t\tthis._buf = [];\n\t\tthis._mode = \"text\";\n\t\tthis._error = null;\n\t}\n\n\tread() {\n\t\tvar token = this._read();\n\n\t\twhile (token === WHITESPACE_TOKEN) {\n\t\t\ttoken = this._read();\n\t\t}\n\n\t\tif (token !== EOF_TOKEN && token !== ERROR_TOKEN) {\n\t\t\tthis._last = this._index;\n\t\t}\n\n\t\treturn token;\n\t}\n\n\tbuf() {\n\t\treturn this._buf;\n\t}\n\n\tlast() {\n\t\treturn this._last;\n\t}\n\n\terror() {\n\t\treturn this._error;\n\t}\n\n\tdebugPrint() {\n\t\tvar tokenStrings = [\"EOF\", \"ERROR\", \"TEXT\", \"OPEN_BRACKET\", \"CLOSE_BRACKET\", \"EQUALS\", \"STRING\", \"IDENTIFIER\", \"WHITESPACE\"];\n\t\tvar token = this.read();\n\t\tvar result = \"\";\n\n\t\twhile (true) {\n\t\t\tresult += (result.length > 0 ? \"\\n\" : \"\") + tokenStrings[token] + \" '\" + this.buf().join(\"\") + \"'\";\n\n\t\t\tif (token === EOF_TOKEN || token === ERROR_TOKEN) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttoken = this.read();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_read() {\n\t\tthis._buf = [];\n\n\t\tif (this._eof()) {\n\t\t\treturn EOF_TOKEN;\n\t\t}\n\n\t\treturn this._mode === \"text\" ? this._text() : this._tag();\n\t}\n\n\t_text() {\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\treturn this._buf.length > 0 ? TEXT_TOKEN : EOF_TOKEN;\n\n\t\t\t\tcase \"[\":\n\t\t\t\t\tthis._mode = \"tag\";\n\t\t\t\t\treturn this._buf.length > 0 ? TEXT_TOKEN : this._tag();\n\n\t\t\t\tcase \"\\\\\":\n\t\t\t\t\tthis._next();\n\n\t\t\t\t\tswitch (this._cur) {\n\t\t\t\t\t\tcase \"[\":\n\t\t\t\t\t\t\tthis._store();\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis._output(\"\\\\\");\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_tag() {\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\tthis._error = \"unexpected end of input reading tag\";\n\t\t\t\t\treturn ERROR_TOKEN;\n\n\t\t\t\tcase \"[\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\treturn OPEN_BRACKET_TOKEN;\n\n\t\t\t\tcase \"]\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tthis._mode = \"text\";\n\t\t\t\t\treturn CLOSE_BRACKET_TOKEN;\n\n\t\t\t\tcase \"=\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\treturn EQUALS_TOKEN;\n\n\t\t\t\tcase \" \":\n\t\t\t\tcase \"\\t\":\n\t\t\t\tcase \"\\n\":\n\t\t\t\tcase \"\\r\":\n\t\t\t\tcase \"\\v\":\n\t\t\t\tcase \"\\f\":\n\t\t\t\t\treturn this._whitespace();\n\n\t\t\t\tcase \"\\\"\":\n\t\t\t\t\treturn this._string();\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!this._isIdentifierSymbol(this._cur)) {\n\t\t\t\t\t\tthis._error = \"unrecognized character\";\n\t\t\t\t\t\treturn ERROR_TOKEN;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._identifier();\n\t\t\t}\n\t\t}\n\t}\n\n\t_whitespace() {\n\t\tthis._store();\n\n\t\twhile (WHITESPACE_CHARS.indexOf(this._cur) !== -1) {\n\t\t\tthis._store();\n\t\t}\n\n\t\treturn WHITESPACE_TOKEN;\n\t}\n\n\t_string() {\n\t\tthis._next();\n\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\tthis._error = \"unexpected end of input reading string\";\n\t\t\t\t\treturn ERROR_TOKEN;\n\n\t\t\t\tcase \"\\\"\":\n\t\t\t\t\tthis._next();\n\n\t\t\t\t\treturn STRING_TOKEN;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_identifier() {\n\t\tthis._store();\n\n\t\twhile (this._cur !== null && this._isIdentifierSymbol(this._cur)) {\n\t\t\tthis._store();\n\t\t}\n\n\t\treturn IDENTIFIER_TOKEN;\n\t}\n\n\t_isIdentifierSymbol(s) {\n\t\treturn s.length === 1 && s.match(IDENTIFIER_REGEX) !== null;\n\t}\n\n\t_eof() {\n\t\treturn this._cur === null;\n\t}\n\n\t_next() {\n\t\tif (!this._eof()) {\n\t\t\tthis._index++;\n\t\t\tthis._cur = this._index < this._symbols.length ? this._symbols[this._index] : null;\n\t\t}\n\n\t\treturn this._cur;\n\t}\n\n\t_store() {\n\t\tthis._buf.push(this._cur);\n\n\t\treturn this._next();\n\t}\n\n\t_output(c) {\n\t\tthis._buf.push(c);\n\t}\n\n}\n\nclass Parser {\n\tconstructor(symbols) {\n\t\tthis._scanner = new Scanner(symbols);\n\t\tthis._error = null;\n\t}\n\n\tparse(symbols, tags) {\n\t\twhile (true) {\n\t\t\tvar token = this._scanner.read();\n\n\t\t\tswitch (token) {\n\t\t\t\tcase EOF_TOKEN:\n\t\t\t\t\treturn true;\n\n\t\t\t\tcase ERROR_TOKEN:\n\t\t\t\t\treturn false;\n\n\t\t\t\tcase TEXT_TOKEN:\n\t\t\t\t\tArray.prototype.push.apply(symbols, this._scanner.buf());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase OPEN_BRACKET_TOKEN:\n\t\t\t\t\tif (!this._parseTag(symbols, tags)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\terror() {\n\t\treturn \"Error evaluating markup at #\" + this._scanner.last().toString() + \" (\" + (this._scanner.error() || this._error) + \")\";\n\t}\n\n\t_parseTag(symbols, tags) {\n\t\tvar token = this._scanner.read();\n\n\t\tif (token !== IDENTIFIER_TOKEN) {\n\t\t\tthis._error = \"expected identifier\";\n\t\t\treturn false;\n\t\t}\n\n\t\tvar name = this._scanner.buf().join(\"\");\n\n\t\tif (name[0] === \"/\") {\n\t\t\tfor (var index = tags.length - 1; index >= 0; --index) {\n\t\t\t\tif (name === \"/\" + tags[index].name && tags[index].end === null) {\n\t\t\t\t\ttags[index].end = symbols.length;\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== CLOSE_BRACKET_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected close bracket\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._error = \"failed to find matching tag\";\n\t\t\treturn false;\n\t\t}\n\n\t\tvar tag = {\n\t\t\tname: name,\n\t\t\tvalue: null,\n\t\t\tattributes: {},\n\t\t\tstart: symbols.length,\n\t\t\tend: null\n\t\t};\n\t\ttoken = this._scanner.read();\n\n\t\tif (token === EQUALS_TOKEN) {\n\t\t\ttoken = this._scanner.read();\n\n\t\t\tif (token !== STRING_TOKEN) {\n\t\t\t\tthis._error = \"expected string\";\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttag.value = this._scanner.buf().join(\"\");\n\t\t\ttoken = this._scanner.read();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tswitch (token) {\n\t\t\t\tcase CLOSE_BRACKET_TOKEN:\n\t\t\t\t\ttags.push(tag);\n\t\t\t\t\treturn true;\n\n\t\t\t\tcase IDENTIFIER_TOKEN:\n\t\t\t\t\tvar identifier = this._scanner.buf().join(\"\");\n\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== EQUALS_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected equals\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== STRING_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected string\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar value = this._scanner.buf().join(\"\");\n\n\t\t\t\t\ttag.attributes[identifier] = value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._error = \"expected close bracket or identifier\";\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttoken = this._scanner.read();\n\t\t}\n\t}\n\n}\n\nfunction merge(target, source) {\n\tfor (var key in source) {\n\t\tif (!source.hasOwnProperty(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar value = source[key];\n\n\t\tif (value instanceof Object) {\n\t\t\tif (!target.hasOwnProperty(key)) {\n\t\t\t\ttarget[key] = {};\n\t\t\t}\n\n\t\t\tmerge(target[key], source[key]);\n\t\t} else {\n\t\t\ttarget[key] = value;\n\t\t}\n\t}\n}\n\nfunction combineTags(tags) {\n\tif (tags.length === 0) {\n\t\treturn null;\n\t}\n\n\tvar result = {};\n\n\tfor (var index = 0; index < tags.length; ++index) {\n\t\tvar tag = tags[index];\n\t\tvar tmp = {};\n\t\ttmp[tag.name] = {\n\t\t\tvalue: tag.value,\n\t\t\tattributes: tag.attributes\n\t\t};\n\t\tmerge(result, tmp);\n\t}\n\n\treturn result;\n}\n\nfunction resolveMarkupTags(tags, numSymbols) {\n\tvar index;\n\n\tif (tags.length === 0) {\n\t\treturn null;\n\t}\n\n\tvar edges = {};\n\n\tfor (index = 0; index < tags.length; ++index) {\n\t\tvar tag = tags[index];\n\n\t\tif (!edges.hasOwnProperty(tag.start)) {\n\t\t\tedges[tag.start] = {\n\t\t\t\topen: [tag],\n\t\t\t\tclose: null\n\t\t\t};\n\t\t} else {\n\t\t\tif (edges[tag.start].open === null) {\n\t\t\t\tedges[tag.start].open = [tag];\n\t\t\t} else {\n\t\t\t\tedges[tag.start].open.push(tag);\n\t\t\t}\n\t\t}\n\n\t\tif (!edges.hasOwnProperty(tag.end)) {\n\t\t\tedges[tag.end] = {\n\t\t\t\topen: null,\n\t\t\t\tclose: [tag]\n\t\t\t};\n\t\t} else {\n\t\t\tif (edges[tag.end].close === null) {\n\t\t\t\tedges[tag.end].close = [tag];\n\t\t\t} else {\n\t\t\t\tedges[tag.end].close.push(tag);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar tagStack = [];\n\n\tfunction removeTags(tags) {\n\t\ttagStack = tagStack.filter(function (tag) {\n\t\t\treturn tags.find(function (t) {\n\t\t\t\treturn t === tag;\n\t\t\t}) === undefined;\n\t\t});\n\t}\n\n\tfunction addTags(tags) {\n\t\tfor (var index = 0; index < tags.length; ++index) {\n\t\t\ttagStack.push(tags[index]);\n\t\t}\n\t}\n\n\tvar edgeKeys = Object.keys(edges).sort(function (a, b) {\n\t\treturn a - b;\n\t});\n\tvar resolvedTags = [];\n\n\tfor (index = 0; index < edgeKeys.length; ++index) {\n\t\tvar edge = edges[edgeKeys[index]];\n\n\t\tif (edge.close !== null) {\n\t\t\tremoveTags(edge.close);\n\t\t}\n\n\t\tif (edge.open !== null) {\n\t\t\taddTags(edge.open);\n\t\t}\n\n\t\tresolvedTags.push({\n\t\t\tstart: edgeKeys[index],\n\t\t\ttags: combineTags(tagStack)\n\t\t});\n\t}\n\n\tvar result = [];\n\tvar prevTag = null;\n\n\tfor (index = 0; index < resolvedTags.length; ++index) {\n\t\tvar resolvedTag = resolvedTags[index];\n\n\t\twhile (result.length < resolvedTag.start) {\n\t\t\tresult.push(prevTag ? prevTag.tags : null);\n\t\t}\n\n\t\tprevTag = resolvedTag;\n\t}\n\n\twhile (result.length < numSymbols) {\n\t\tresult.push(null);\n\t}\n\n\treturn result;\n}\n\nfunction evaluateMarkup(symbols) {\n\tvar parser = new Parser(symbols);\n\tvar stripped_symbols = [];\n\tvar tags = [];\n\n\tif (!parser.parse(stripped_symbols, tags)) {\n\t\tconsole.warn(parser.error());\n\t\treturn {\n\t\t\tsymbols: symbols,\n\t\t\ttags: null\n\t\t};\n\t}\n\n\tvar invalidTag = tags.find(function (t) {\n\t\treturn t.end === null;\n\t});\n\n\tif (invalidTag) {\n\t\tconsole.warn(\"Markup error: found unclosed tag='\" + invalidTag.name + \"'\");\n\t\treturn {\n\t\t\tsymbols: symbols,\n\t\t\ttags: null\n\t\t};\n\t}\n\n\tvar resolved_tags = resolveMarkupTags(tags, stripped_symbols.length);\n\treturn {\n\t\tsymbols: stripped_symbols,\n\t\ttags: resolved_tags\n\t};\n}\n\nclass Markup {\n\tstatic evaluate(symbols) {\n\t\treturn evaluateMarkup(symbols);\n\t}\n\n}\n\nclass MeshInfo {\n\tconstructor() {\n\t\tthis.count = 0;\n\t\tthis.quad = 0;\n\t\tthis.lines = {};\n\t\tthis.positions = [];\n\t\tthis.normals = [];\n\t\tthis.uvs = [];\n\t\tthis.colors = [];\n\t\tthis.indices = [];\n\t\tthis.meshInstance = null;\n\t}\n\n}\n\nconst LINE_BREAK_CHAR = /^[\\r\\n]$/;\nconst WHITESPACE_CHAR = /^[ \\t]$/;\nconst WORD_BOUNDARY_CHAR = /^[ \\t\\-]|[\\u200b]$/;\nconst ALPHANUMERIC_CHAR = /^[a-z0-9]$/i;\nconst CJK_CHAR = /^[\\u1100-\\u11ff]|[\\u3000-\\u9fff]|[\\ua960-\\ua97f]|[\\uac00-\\ud7ff]$/;\nconst NO_LINE_BREAK_CJK_CHAR = /^[]$/;\nconst CONTROL_CHARS = ['\\u200B', '\\u061C', '\\u200E', '\\u200F', '\\u202A', '\\u202B', '\\u202C', '\\u202D', '\\u202E', '\\u2066', '\\u2067', '\\u2068', '\\u2069'];\nconst CONTROL_GLYPH_DATA = {\n\twidth: 0,\n\theight: 0,\n\txadvance: 0,\n\txoffset: 0,\n\tyoffset: 0\n};\n\nclass TextElement {\n\tconstructor(element) {\n\t\tthis._element = element;\n\t\tthis._system = element.system;\n\t\tthis._entity = element.entity;\n\t\tthis._text = \"\";\n\t\tthis._symbols = [];\n\t\tthis._colorPalette = [];\n\t\tthis._symbolColors = null;\n\t\tthis._i18nKey = null;\n\t\tthis._fontAsset = new LocalizedAsset(this._system.app);\n\t\tthis._fontAsset.disableLocalization = true;\n\n\t\tthis._fontAsset.on('load', this._onFontLoad, this);\n\n\t\tthis._fontAsset.on('change', this._onFontChange, this);\n\n\t\tthis._fontAsset.on('remove', this._onFontRemove, this);\n\n\t\tthis._font = null;\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array(3);\n\t\tthis._spacing = 1;\n\t\tthis._fontSize = 32;\n\t\tthis._fontMinY = 0;\n\t\tthis._fontMaxY = 0;\n\t\tthis._originalFontSize = 32;\n\t\tthis._maxFontSize = 32;\n\t\tthis._minFontSize = 8;\n\t\tthis._autoFitWidth = false;\n\t\tthis._autoFitHeight = false;\n\t\tthis._maxLines = -1;\n\t\tthis._lineHeight = 32;\n\t\tthis._scaledLineHeight = 32;\n\t\tthis._wrapLines = false;\n\t\tthis._drawOrder = 0;\n\t\tthis._alignment = new Vec2(0.5, 0.5);\n\t\tthis._autoWidth = true;\n\t\tthis._autoHeight = true;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis._node = new GraphNode();\n\t\tthis._model = new Model();\n\t\tthis._model.graph = this._node;\n\n\t\tthis._entity.addChild(this._node);\n\n\t\tthis._meshInfo = [];\n\t\tthis._material = null;\n\t\tthis._aabbDirty = true;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis._noResize = false;\n\t\tthis._currentMaterialType = null;\n\t\tthis._maskedMaterialSrc = null;\n\t\tthis._rtlReorder = false;\n\t\tthis._unicodeConverter = false;\n\t\tthis._rtl = false;\n\t\tthis._outlineColor = new Color(0, 0, 0, 1);\n\t\tthis._outlineColorUniform = new Float32Array(4);\n\t\tthis._outlineThicknessScale = 0.2;\n\t\tthis._outlineThickness = 0.0;\n\t\tthis._shadowColor = new Color(0, 0, 0, 1);\n\t\tthis._shadowColorUniform = new Float32Array(4);\n\t\tthis._shadowOffsetScale = 0.005;\n\t\tthis._shadowOffset = new Vec2(0, 0);\n\t\tthis._shadowOffsetUniform = new Float32Array(2);\n\t\tthis._enableMarkup = false;\n\n\t\tthis._onScreenChange(this._element.screen);\n\n\t\telement.on('resize', this._onParentResize, this);\n\t\telement.on('set:screen', this._onScreenChange, this);\n\t\telement.on('screen:set:screenspace', this._onScreenSpaceChange, this);\n\t\telement.on('set:draworder', this._onDrawOrderChange, this);\n\t\telement.on('set:pivot', this._onPivotChange, this);\n\n\t\tthis._system.app.i18n.on('set:locale', this._onLocaleSet, this);\n\n\t\tthis._system.app.i18n.on('data:add', this._onLocalizationData, this);\n\n\t\tthis._system.app.i18n.on('data:remove', this._onLocalizationData, this);\n\n\t\tthis._rangeStart = 0;\n\t\tthis._rangeEnd = 0;\n\t}\n\n\tdestroy() {\n\t\tthis._setMaterial(null);\n\n\t\tif (this._model) {\n\t\t\tthis._element.removeModelFromLayers(this._model);\n\n\t\t\tthis._model.destroy();\n\n\t\t\tthis._model = null;\n\t\t}\n\n\t\tthis._fontAsset.destroy();\n\n\t\tthis.font = null;\n\n\t\tthis._element.off('resize', this._onParentResize, this);\n\n\t\tthis._element.off('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.off('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.off('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.off('set:pivot', this._onPivotChange, this);\n\n\t\tthis._system.app.i18n.off('set:locale', this._onLocaleSet, this);\n\n\t\tthis._system.app.i18n.off('data:add', this._onLocalizationData, this);\n\n\t\tthis._system.app.i18n.off('data:remove', this._onLocalizationData, this);\n\t}\n\n\t_onParentResize(width, height) {\n\t\tif (this._noResize) return;\n\t\tif (this._font) this._updateText();\n\t}\n\n\t_onScreenChange(screen) {\n\t\tif (screen) {\n\t\t\tthis._updateMaterial(screen.screen.screenSpace);\n\t\t} else {\n\t\t\tthis._updateMaterial(false);\n\t\t}\n\t}\n\n\t_onScreenSpaceChange(value) {\n\t\tthis._updateMaterial(value);\n\t}\n\n\t_onDrawOrderChange(order) {\n\t\tthis._drawOrder = order;\n\n\t\tif (this._model) {\n\t\t\tvar i;\n\t\t\tvar len;\n\n\t\t\tfor (i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tthis._model.meshInstances[i].drawOrder = order;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onPivotChange(pivot) {\n\t\tif (this._font) this._updateText();\n\t}\n\n\t_onLocaleSet(locale) {\n\t\tif (!this._i18nKey) return;\n\n\t\tif (this.fontAsset) {\n\t\t\tvar asset = this._system.app.assets.get(this.fontAsset);\n\n\t\t\tif (!asset || !asset.resource || asset.resource !== this._font) {\n\t\t\t\tthis.font = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._resetLocalizedText();\n\t}\n\n\t_onLocalizationData(locale, messages) {\n\t\tif (this._i18nKey && messages[this._i18nKey]) {\n\t\t\tthis._resetLocalizedText();\n\t\t}\n\t}\n\n\t_resetLocalizedText() {\n\t\tthis._setText(this._system.app.i18n.getText(this._i18nKey));\n\t}\n\n\t_setText(text) {\n\t\tif (this.unicodeConverter) {\n\t\t\tvar unicodeConverterFunc = this._system.getUnicodeConverter();\n\n\t\t\tif (unicodeConverterFunc) {\n\t\t\t\ttext = unicodeConverterFunc(text);\n\t\t\t} else {\n\t\t\t\tconsole.warn('Element created with unicodeConverter option but no unicodeConverter function registered');\n\t\t\t}\n\t\t}\n\n\t\tif (this._text !== text) {\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText(text);\n\t\t\t}\n\n\t\t\tthis._text = text;\n\t\t}\n\t}\n\n\t_updateText(text) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar results;\n\t\tvar tags;\n\t\tif (text === undefined) text = this._text;\n\t\tthis._symbols = string.getSymbols(text.normalize ? text.normalize('NFC') : text);\n\n\t\tif (this._symbols.length === 0) {\n\t\t\tthis._symbols = [\" \"];\n\t\t}\n\n\t\tif (this._enableMarkup) {\n\t\t\tresults = Markup.evaluate(this._symbols);\n\t\t\tthis._symbols = results.symbols;\n\t\t\ttags = results.tags;\n\t\t}\n\n\t\tif (this._rtlReorder) {\n\t\t\tvar rtlReorderFunc = this._system.app.systems.element.getRtlReorder();\n\n\t\t\tif (rtlReorderFunc) {\n\t\t\t\tresults = rtlReorderFunc(this._symbols);\n\t\t\t\tthis._rtl = results.rtl;\n\t\t\t\tthis._symbols = results.mapping.map(function (v) {\n\t\t\t\t\treturn this._symbols[v];\n\t\t\t\t}, this);\n\n\t\t\t\tif (tags) {\n\t\t\t\t\ttags = results.mapping.map(function (v) {\n\t\t\t\t\t\treturn tags[v];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('Element created with rtlReorder option but no rtlReorder function registered');\n\t\t\t}\n\t\t} else {\n\t\t\tthis._rtl = false;\n\t\t}\n\n\t\tif (tags) {\n\t\t\tvar paletteMap = {};\n\t\t\tthis._colorPalette = [Math.round(this._color.r * 255), Math.round(this._color.g * 255), Math.round(this._color.b * 255)];\n\t\t\tthis._symbolColors = [];\n\t\t\tpaletteMap[this._color.toString(false).toLowerCase()] = 0;\n\n\t\t\tfor (i = 0, len = this._symbols.length; i < len; ++i) {\n\t\t\t\tvar tag = tags[i];\n\t\t\t\tvar color = 0;\n\n\t\t\t\tif (tag && tag.color && tag.color.value) {\n\t\t\t\t\tvar c = tag.color.value;\n\n\t\t\t\t\tif (c.length === 7 && c[0] === \"#\") {\n\t\t\t\t\t\tvar hex = c.substring(1).toLowerCase();\n\n\t\t\t\t\t\tif (paletteMap.hasOwnProperty(hex)) {\n\t\t\t\t\t\t\tcolor = paletteMap[hex];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (/^([0-9a-f]{2}){3}$/.test(hex)) {\n\t\t\t\t\t\t\t\tcolor = this._colorPalette.length / 3;\n\t\t\t\t\t\t\t\tpaletteMap[hex] = color;\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(0, 2), 16));\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(2, 4), 16));\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(4, 6), 16));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._symbolColors.push(color);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._colorPalette = [];\n\t\t\tthis._symbolColors = null;\n\t\t}\n\n\t\tvar charactersPerTexture = this._calculateCharsPerTexture();\n\n\t\tvar removedModel = false;\n\t\tvar element = this._element;\n\n\t\tvar screenSpace = element._isScreenSpace();\n\n\t\tvar screenCulled = element._isScreenCulled();\n\n\t\tvar visibleFn = function visibleFn(camera) {\n\t\t\treturn element.isVisibleForCamera(camera);\n\t\t};\n\n\t\tfor (i = 0, len = this._meshInfo.length; i < len; i++) {\n\t\t\tvar l = charactersPerTexture[i] || 0;\n\t\t\tvar meshInfo = this._meshInfo[i];\n\n\t\t\tif (meshInfo.count !== l) {\n\t\t\t\tif (!removedModel) {\n\t\t\t\t\telement.removeModelFromLayers(this._model);\n\t\t\t\t\tremovedModel = true;\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.count = l;\n\t\t\t\tmeshInfo.positions.length = meshInfo.normals.length = l * 3 * 4;\n\t\t\t\tmeshInfo.indices.length = l * 3 * 2;\n\t\t\t\tmeshInfo.uvs.length = l * 2 * 4;\n\t\t\t\tmeshInfo.colors.length = l * 4 * 4;\n\n\t\t\t\tif (meshInfo.meshInstance) {\n\t\t\t\t\tthis._removeMeshInstance(meshInfo.meshInstance);\n\t\t\t\t}\n\n\t\t\t\tif (l === 0) {\n\t\t\t\t\tmeshInfo.meshInstance = null;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var v = 0; v < l; v++) {\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 0] = v * 4;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 1] = v * 4 + 1;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 2] = v * 4 + 3;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 3] = v * 4 + 2;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 4] = v * 4 + 3;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 5] = v * 4 + 1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 0] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 1] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 2] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 3] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 4] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 5] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 6] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 7] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 8] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 9] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 10] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 11] = -1;\n\t\t\t\t}\n\n\t\t\t\tvar mesh = createMesh$1(this._system.app.graphicsDevice, meshInfo.positions, {\n\t\t\t\t\tuvs: meshInfo.uvs,\n\t\t\t\t\tnormals: meshInfo.normals,\n\t\t\t\t\tcolors: meshInfo.colors,\n\t\t\t\t\tindices: meshInfo.indices\n\t\t\t\t});\n\t\t\t\tvar mi = new MeshInstance(mesh, this._material, this._node);\n\t\t\t\tmi.name = \"Text Element: \" + this._entity.name;\n\t\t\t\tmi.castShadow = false;\n\t\t\t\tmi.receiveShadow = false;\n\t\t\t\tmi.cull = !screenSpace;\n\t\t\t\tmi.screenSpace = screenSpace;\n\t\t\t\tmi.drawOrder = this._drawOrder;\n\n\t\t\t\tif (screenCulled) {\n\t\t\t\t\tmi.cull = true;\n\t\t\t\t\tmi.isVisibleFunc = visibleFn;\n\t\t\t\t}\n\n\t\t\t\tthis._setTextureParams(mi, this._font.textures[i]);\n\n\t\t\t\tif (this._symbolColors) {\n\t\t\t\t\tthis._colorUniform[0] = 1;\n\t\t\t\t\tthis._colorUniform[1] = 1;\n\t\t\t\t\tthis._colorUniform[2] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\t\t\tthis._colorUniform[2] = this._color.b;\n\t\t\t\t}\n\n\t\t\t\tmi.setParameter(\"material_emissive\", this._colorUniform);\n\t\t\t\tmi.setParameter(\"material_opacity\", this._color.a);\n\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\t\t\t\tthis._outlineColorUniform[0] = this._outlineColor.r;\n\t\t\t\tthis._outlineColorUniform[1] = this._outlineColor.g;\n\t\t\t\tthis._outlineColorUniform[2] = this._outlineColor.b;\n\t\t\t\tthis._outlineColorUniform[3] = this._outlineColor.a;\n\t\t\t\tmi.setParameter(\"outline_color\", this._outlineColorUniform);\n\t\t\t\tmi.setParameter(\"outline_thickness\", this._outlineThicknessScale * this._outlineThickness);\n\t\t\t\tthis._shadowColorUniform[0] = this._shadowColor.r;\n\t\t\t\tthis._shadowColorUniform[1] = this._shadowColor.g;\n\t\t\t\tthis._shadowColorUniform[2] = this._shadowColor.b;\n\t\t\t\tthis._shadowColorUniform[3] = this._shadowColor.a;\n\t\t\t\tmi.setParameter(\"shadow_color\", this._shadowColorUniform);\n\t\t\t\tvar ratio = -this._font.data.info.maps[i].width / this._font.data.info.maps[i].height;\n\t\t\t\tthis._shadowOffsetUniform[0] = this._shadowOffsetScale * this._shadowOffset.x;\n\t\t\t\tthis._shadowOffsetUniform[1] = ratio * this._shadowOffsetScale * this._shadowOffset.y;\n\t\t\t\tmi.setParameter(\"shadow_offset\", this._shadowOffsetUniform);\n\t\t\t\tmeshInfo.meshInstance = mi;\n\n\t\t\t\tthis._model.meshInstances.push(mi);\n\t\t\t}\n\t\t}\n\n\t\tif (this._element.maskedBy) {\n\t\t\tthis._element._setMaskedBy(this._element.maskedBy);\n\t\t}\n\n\t\tif (removedModel && this._element.enabled && this._entity.enabled) {\n\t\t\tthis._element.addModelToLayers(this._model);\n\t\t}\n\n\t\tthis._updateMeshes();\n\n\t\tthis._rangeStart = 0;\n\t\tthis._rangeEnd = this._symbols.length;\n\n\t\tthis._updateRenderRange();\n\t}\n\n\t_removeMeshInstance(meshInstance) {\n\t\tmeshInstance.material = null;\n\t\tvar oldMesh = meshInstance.mesh;\n\n\t\tif (oldMesh) {\n\t\t\toldMesh.destroy();\n\t\t}\n\n\t\tvar idx = this._model.meshInstances.indexOf(meshInstance);\n\n\t\tif (idx !== -1) this._model.meshInstances.splice(idx, 1);\n\t}\n\n\t_setMaterial(material) {\n\t\tvar i;\n\t\tvar len;\n\t\tthis._material = material;\n\n\t\tif (this._model) {\n\t\t\tfor (i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.material = material;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateMaterial(screenSpace) {\n\t\tvar element = this._element;\n\n\t\tvar screenCulled = element._isScreenCulled();\n\n\t\tvar visibleFn = function visibleFn(camera) {\n\t\t\treturn element.isVisibleForCamera(camera);\n\t\t};\n\n\t\tvar msdf = this._font && this._font.type === FONT_MSDF;\n\t\tthis._material = this._system.getTextElementMaterial(screenSpace, msdf);\n\n\t\tif (this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.cull = !screenSpace;\n\t\t\t\tmi.material = this._material;\n\t\t\t\tmi.screenSpace = screenSpace;\n\n\t\t\t\tif (screenCulled) {\n\t\t\t\t\tmi.cull = true;\n\t\t\t\t\tmi.isVisibleFunc = visibleFn;\n\t\t\t\t} else {\n\t\t\t\t\tmi.isVisibleFunc = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_isWordBoundary(char) {\n\t\treturn WORD_BOUNDARY_CHAR.test(char);\n\t}\n\n\t_isValidNextChar(nextchar) {\n\t\treturn nextchar !== null && !NO_LINE_BREAK_CJK_CHAR.test(nextchar);\n\t}\n\n\t_isNextCJKBoundary(char, nextchar) {\n\t\treturn CJK_CHAR.test(char) && (WORD_BOUNDARY_CHAR.test(nextchar) || ALPHANUMERIC_CHAR.test(nextchar));\n\t}\n\n\t_isNextCJKWholeWord(nextchar) {\n\t\treturn CJK_CHAR.test(nextchar);\n\t}\n\n\t_updateMeshes() {\n\t\tvar json = this._font.data;\n\t\tvar self = this;\n\t\tvar minFont = Math.min(this._minFontSize, this._maxFontSize);\n\t\tvar maxFont = this._maxFontSize;\n\n\t\tvar autoFit = this._shouldAutoFit();\n\n\t\tif (autoFit) {\n\t\t\tthis._fontSize = this._maxFontSize;\n\t\t}\n\n\t\tvar MAGIC = 32;\n\t\tvar l = this._symbols.length;\n\t\tvar _x = 0;\n\t\tvar _y = 0;\n\t\tvar _z = 0;\n\t\tvar _xMinusTrailingWhitespace = 0;\n\t\tvar lines = 1;\n\t\tvar wordStartX = 0;\n\t\tvar wordStartIndex = 0;\n\t\tvar lineStartIndex = 0;\n\t\tvar numWordsThisLine = 0;\n\t\tvar numCharsThisLine = 0;\n\t\tvar numBreaksThisLine = 0;\n\t\tvar splitHorizontalAnchors = Math.abs(this._element.anchor.x - this._element.anchor.z) >= 0.0001;\n\t\tvar maxLineWidth = this._element.calculatedWidth;\n\n\t\tif (this.autoWidth && !splitHorizontalAnchors || !this._wrapLines) {\n\t\t\tmaxLineWidth = Number.POSITIVE_INFINITY;\n\t\t}\n\n\t\tvar fontMinY = 0;\n\t\tvar fontMaxY = 0;\n\t\tvar scale = 1;\n\t\tvar char, data, i, j, quad, nextchar;\n\n\t\tfunction breakLine(symbols, lineBreakIndex, lineBreakX) {\n\t\t\tself._lineWidths.push(Math.abs(lineBreakX));\n\n\t\t\tvar sliceStart = lineStartIndex > lineBreakIndex ? lineBreakIndex + 1 : lineStartIndex;\n\t\t\tvar sliceEnd = lineStartIndex > lineBreakIndex ? lineStartIndex + 1 : lineBreakIndex;\n\t\t\tvar chars = symbols.slice(sliceStart, sliceEnd);\n\n\t\t\tif (numBreaksThisLine) {\n\t\t\t\tvar i = chars.length;\n\n\t\t\t\twhile (i-- && numBreaksThisLine > 0) {\n\t\t\t\t\tif (LINE_BREAK_CHAR.test(chars[i])) {\n\t\t\t\t\t\tchars.splice(i, 1);\n\t\t\t\t\t\tnumBreaksThisLine--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself._lineContents.push(chars.join(''));\n\n\t\t\t_x = 0;\n\t\t\t_y -= self._scaledLineHeight;\n\t\t\tlines++;\n\t\t\tnumWordsThisLine = 0;\n\t\t\tnumCharsThisLine = 0;\n\t\t\tnumBreaksThisLine = 0;\n\t\t\twordStartX = 0;\n\t\t\tlineStartIndex = lineBreakIndex;\n\t\t}\n\n\t\tvar retryUpdateMeshes = true;\n\n\t\twhile (retryUpdateMeshes) {\n\t\t\tretryUpdateMeshes = false;\n\n\t\t\tif (autoFit) {\n\t\t\t\tthis._scaledLineHeight = this._lineHeight * this._fontSize / (this._maxFontSize || 0.0001);\n\t\t\t} else {\n\t\t\t\tthis._scaledLineHeight = this._lineHeight;\n\t\t\t}\n\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t\tthis._lineWidths = [];\n\t\t\tthis._lineContents = [];\n\t\t\t_x = 0;\n\t\t\t_y = 0;\n\t\t\t_z = 0;\n\t\t\t_xMinusTrailingWhitespace = 0;\n\t\t\tlines = 1;\n\t\t\twordStartX = 0;\n\t\t\twordStartIndex = 0;\n\t\t\tlineStartIndex = 0;\n\t\t\tnumWordsThisLine = 0;\n\t\t\tnumCharsThisLine = 0;\n\t\t\tnumBreaksThisLine = 0;\n\t\t\tscale = this._fontSize / MAGIC;\n\t\t\tfontMinY = this._fontMinY * scale;\n\t\t\tfontMaxY = this._fontMaxY * scale;\n\n\t\t\tfor (i = 0; i < this._meshInfo.length; i++) {\n\t\t\t\tthis._meshInfo[i].quad = 0;\n\t\t\t\tthis._meshInfo[i].lines = {};\n\t\t\t}\n\n\t\t\tvar color_r = 255;\n\t\t\tvar color_g = 255;\n\t\t\tvar color_b = 255;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tchar = this._symbols[i];\n\t\t\t\tnextchar = i + 1 >= l ? null : this._symbols[i + 1];\n\t\t\t\tconst isLineBreak = LINE_BREAK_CHAR.test(char);\n\n\t\t\t\tif (isLineBreak) {\n\t\t\t\t\tnumBreaksThisLine++;\n\n\t\t\t\t\tif (!this._wrapLines || this._maxLines < 0 || lines < this._maxLines) {\n\t\t\t\t\t\tbreakLine(this._symbols, i, _xMinusTrailingWhitespace);\n\t\t\t\t\t\twordStartIndex = i + 1;\n\t\t\t\t\t\tlineStartIndex = i + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar x = 0;\n\t\t\t\tvar y = 0;\n\t\t\t\tvar advance = 0;\n\t\t\t\tvar quadsize = 1;\n\t\t\t\tvar dataScale, size;\n\t\t\t\tdata = json.chars[char];\n\n\t\t\t\tif (!data) {\n\t\t\t\t\tif (CONTROL_CHARS.indexOf(char) !== -1) {\n\t\t\t\t\t\tdata = CONTROL_GLYPH_DATA;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (json.chars[' ']) {\n\t\t\t\t\t\t\tdata = json.chars[' '];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (var key in json.chars) {\n\t\t\t\t\t\t\t\tdata = json.chars[key];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (data) {\n\t\t\t\t\tvar kerning = 0;\n\n\t\t\t\t\tif (numCharsThisLine > 0) {\n\t\t\t\t\t\tvar kernTable = this._font.data.kerning;\n\n\t\t\t\t\t\tif (kernTable) {\n\t\t\t\t\t\t\tvar kernLeft = kernTable[string.getCodePoint(this._symbols[i - 1]) || 0];\n\n\t\t\t\t\t\t\tif (kernLeft) {\n\t\t\t\t\t\t\t\tkerning = kernLeft[string.getCodePoint(this._symbols[i]) || 0] || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdataScale = data.scale || 1;\n\t\t\t\t\tsize = (data.width + data.height) / 2;\n\t\t\t\t\tquadsize = scale * size / dataScale;\n\t\t\t\t\tadvance = (data.xadvance + kerning) * scale;\n\t\t\t\t\tx = (data.xoffset - kerning) * scale;\n\t\t\t\t\ty = data.yoffset * scale;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"Couldn't substitute missing character: '\" + char + \"'\");\n\t\t\t\t}\n\n\t\t\t\tvar isWhitespace = WHITESPACE_CHAR.test(char);\n\t\t\t\tvar meshInfo = this._meshInfo[data && data.map || 0];\n\t\t\t\tvar candidateLineWidth = _x + this._spacing * advance;\n\n\t\t\t\tif (candidateLineWidth > maxLineWidth && numCharsThisLine > 0 && !isWhitespace) {\n\t\t\t\t\tif (this._maxLines < 0 || lines < this._maxLines) {\n\t\t\t\t\t\tif (numWordsThisLine === 0) {\n\t\t\t\t\t\t\twordStartIndex = i;\n\t\t\t\t\t\t\tbreakLine(this._symbols, i, _xMinusTrailingWhitespace);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar backtrack = Math.max(i - wordStartIndex, 0);\n\n\t\t\t\t\t\t\tif (this._meshInfo.length <= 1) {\n\t\t\t\t\t\t\t\tmeshInfo.lines[lines - 1] -= backtrack;\n\t\t\t\t\t\t\t\tmeshInfo.quad -= backtrack;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar backtrackStart = wordStartIndex;\n\t\t\t\t\t\t\t\tvar backtrackEnd = i;\n\n\t\t\t\t\t\t\t\tfor (j = backtrackStart; j < backtrackEnd; j++) {\n\t\t\t\t\t\t\t\t\tvar backChar = this._symbols[j];\n\t\t\t\t\t\t\t\t\tvar backCharData = json.chars[backChar];\n\t\t\t\t\t\t\t\t\tvar backMeshInfo = this._meshInfo[backCharData && backCharData.map || 0];\n\t\t\t\t\t\t\t\t\tbackMeshInfo.lines[lines - 1] -= 1;\n\t\t\t\t\t\t\t\t\tbackMeshInfo.quad -= 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ti -= backtrack + 1;\n\t\t\t\t\t\t\tbreakLine(this._symbols, wordStartIndex, wordStartX);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tquad = meshInfo.quad;\n\t\t\t\tmeshInfo.lines[lines - 1] = quad;\n\t\t\t\tvar left = _x - x;\n\t\t\t\tvar right = left + quadsize;\n\t\t\t\tvar bottom = _y - y;\n\t\t\t\tvar top = bottom + quadsize;\n\n\t\t\t\tif (this._rtl) {\n\t\t\t\t\tvar shift = quadsize - x - this._spacing * advance - x;\n\t\t\t\t\tleft -= shift;\n\t\t\t\t\tright -= shift;\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 0] = left;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 1] = bottom;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 2] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 3] = right;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 4] = bottom;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 5] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 6] = right;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 7] = top;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 8] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 9] = left;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 10] = top;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 11] = _z;\n\t\t\t\tthis.width = Math.max(this.width, candidateLineWidth);\n\t\t\t\tvar fontSize;\n\n\t\t\t\tif (this._shouldAutoFitWidth() && this.width > this._element.calculatedWidth) {\n\t\t\t\t\tfontSize = Math.floor(this._element.fontSize * this._element.calculatedWidth / (this.width || 0.0001));\n\t\t\t\t\tfontSize = math.clamp(fontSize, minFont, maxFont);\n\n\t\t\t\t\tif (fontSize !== this._element.fontSize) {\n\t\t\t\t\t\tthis._fontSize = fontSize;\n\t\t\t\t\t\tretryUpdateMeshes = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.height = Math.max(this.height, fontMaxY - (_y + fontMinY));\n\n\t\t\t\tif (this._shouldAutoFitHeight() && this.height > this._element.calculatedHeight) {\n\t\t\t\t\tfontSize = math.clamp(this._fontSize - 1, minFont, maxFont);\n\n\t\t\t\t\tif (fontSize !== this._element.fontSize) {\n\t\t\t\t\t\tthis._fontSize = fontSize;\n\t\t\t\t\t\tretryUpdateMeshes = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_x += this._spacing * advance;\n\n\t\t\t\tif (!isWhitespace) {\n\t\t\t\t\t_xMinusTrailingWhitespace = _x;\n\t\t\t\t}\n\n\t\t\t\tif (this._isWordBoundary(char) || this._isValidNextChar(nextchar) && (this._isNextCJKBoundary(char, nextchar) || this._isNextCJKWholeWord(nextchar))) {\n\t\t\t\t\tnumWordsThisLine++;\n\t\t\t\t\twordStartX = _xMinusTrailingWhitespace;\n\t\t\t\t\twordStartIndex = i + 1;\n\t\t\t\t}\n\n\t\t\t\tnumCharsThisLine++;\n\n\t\t\t\tvar uv = this._getUv(char);\n\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 0] = uv[0];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 1] = 1.0 - uv[1];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 2] = uv[2];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 3] = 1.0 - uv[1];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 4] = uv[2];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 5] = 1.0 - uv[3];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 6] = uv[0];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 7] = 1.0 - uv[3];\n\n\t\t\t\tif (this._symbolColors) {\n\t\t\t\t\tvar colorIdx = this._symbolColors[i] * 3;\n\t\t\t\t\tcolor_r = this._colorPalette[colorIdx];\n\t\t\t\t\tcolor_g = this._colorPalette[colorIdx + 1];\n\t\t\t\t\tcolor_b = this._colorPalette[colorIdx + 2];\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 0] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 1] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 2] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 3] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 4] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 5] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 6] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 7] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 8] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 9] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 10] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 11] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 12] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 13] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 14] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 15] = 255;\n\t\t\t\tmeshInfo.quad++;\n\t\t\t}\n\n\t\t\tif (retryUpdateMeshes) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (lineStartIndex < l) {\n\t\t\t\tbreakLine(this._symbols, l, _x);\n\t\t\t}\n\t\t}\n\n\t\tthis._noResize = true;\n\t\tthis.autoWidth = this._autoWidth;\n\t\tthis.autoHeight = this._autoHeight;\n\t\tthis._noResize = false;\n\t\tvar hp = this._element.pivot.x;\n\t\tvar vp = this._element.pivot.y;\n\t\tvar ha = this._alignment.x;\n\t\tvar va = this._alignment.y;\n\n\t\tfor (i = 0; i < this._meshInfo.length; i++) {\n\t\t\tif (this._meshInfo[i].count === 0) continue;\n\t\t\tvar prevQuad = 0;\n\n\t\t\tfor (var line in this._meshInfo[i].lines) {\n\t\t\t\tvar index = this._meshInfo[i].lines[line];\n\n\t\t\t\tvar lw = this._lineWidths[parseInt(line, 10)];\n\n\t\t\t\tvar hoffset = -hp * this._element.calculatedWidth + ha * (this._element.calculatedWidth - lw) * (this._rtl ? -1 : 1);\n\t\t\t\tvar voffset = (1 - vp) * this._element.calculatedHeight - fontMaxY - (1 - va) * (this._element.calculatedHeight - this.height);\n\n\t\t\t\tfor (quad = prevQuad; quad <= index; quad++) {\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 3] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 6] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 9] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 1] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 4] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 7] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 10] += voffset;\n\t\t\t\t}\n\n\t\t\t\tif (this._rtl) {\n\t\t\t\t\tfor (quad = prevQuad; quad <= index; quad++) {\n\t\t\t\t\t\tvar idx = quad * 4 * 3;\n\n\t\t\t\t\t\tfor (var vert = 0; vert < 4; ++vert) {\n\t\t\t\t\t\t\tthis._meshInfo[i].positions[idx + vert * 3] = this._element.calculatedWidth - this._meshInfo[i].positions[idx + vert * 3] + hoffset * 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar tmp0 = this._meshInfo[i].positions[idx + 3];\n\t\t\t\t\t\tvar tmp1 = this._meshInfo[i].positions[idx + 6];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 3] = this._meshInfo[i].positions[idx + 0];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 6] = this._meshInfo[i].positions[idx + 9];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 0] = tmp0;\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 9] = tmp1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprevQuad = index + 1;\n\t\t\t}\n\n\t\t\tvar numVertices = this._meshInfo[i].count * 4;\n\t\t\tvar vertMax = this._meshInfo[i].quad * 4;\n\t\t\tvar it = new VertexIterator(this._meshInfo[i].meshInstance.mesh.vertexBuffer);\n\n\t\t\tfor (var v = 0; v < numVertices; v++) {\n\t\t\t\tif (v >= vertMax) {\n\t\t\t\t\tit.element[SEMANTIC_POSITION].set(0, 0, 0);\n\t\t\t\t\tit.element[SEMANTIC_TEXCOORD0].set(0, 0);\n\t\t\t\t\tit.element[SEMANTIC_COLOR].set(0, 0, 0, 0);\n\t\t\t\t} else {\n\t\t\t\t\tit.element[SEMANTIC_POSITION].set(this._meshInfo[i].positions[v * 3 + 0], this._meshInfo[i].positions[v * 3 + 1], this._meshInfo[i].positions[v * 3 + 2]);\n\t\t\t\t\tit.element[SEMANTIC_TEXCOORD0].set(this._meshInfo[i].uvs[v * 2 + 0], this._meshInfo[i].uvs[v * 2 + 1]);\n\t\t\t\t\tit.element[SEMANTIC_COLOR].set(this._meshInfo[i].colors[v * 4 + 0], this._meshInfo[i].colors[v * 4 + 1], this._meshInfo[i].colors[v * 4 + 2], this._meshInfo[i].colors[v * 4 + 3]);\n\t\t\t\t}\n\n\t\t\t\tit.next();\n\t\t\t}\n\n\t\t\tit.end();\n\n\t\t\tthis._meshInfo[i].meshInstance.mesh.aabb.compute(this._meshInfo[i].positions);\n\n\t\t\tthis._meshInfo[i].meshInstance._aabbVer = -1;\n\t\t}\n\n\t\tthis._aabbDirty = true;\n\t}\n\n\t_onFontRender() {\n\t\tthis.font = this._font;\n\t}\n\n\t_onFontLoad(asset) {\n\t\tif (this.font !== asset.resource) {\n\t\t\tthis.font = asset.resource;\n\t\t}\n\t}\n\n\t_onFontChange(asset, name, _new, _old) {\n\t\tif (name === 'data') {\n\t\t\tthis._font.data = _new;\n\t\t\tvar maps = this._font.data.info.maps.length;\n\n\t\t\tfor (var i = 0; i < maps; i++) {\n\t\t\t\tif (!this._meshInfo[i]) continue;\n\t\t\t\tvar mi = this._meshInfo[i].meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onFontRemove(asset) {}\n\n\t_setTextureParams(mi, texture) {\n\t\tif (this._font) {\n\t\t\tif (this._font.type === FONT_MSDF) {\n\t\t\t\tmi.deleteParameter(\"texture_emissiveMap\");\n\t\t\t\tmi.deleteParameter(\"texture_opacityMap\");\n\t\t\t\tmi.setParameter(\"texture_msdfMap\", texture);\n\t\t\t} else if (this._font.type === FONT_BITMAP) {\n\t\t\t\tmi.deleteParameter(\"texture_msdfMap\");\n\t\t\t\tmi.setParameter(\"texture_emissiveMap\", texture);\n\t\t\t\tmi.setParameter(\"texture_opacityMap\", texture);\n\t\t\t}\n\t\t}\n\t}\n\n\t_getPxRange(font) {\n\t\tvar keys = Object.keys(this._font.data.chars);\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tvar char = this._font.data.chars[keys[i]];\n\n\t\t\tif (char.range) {\n\t\t\t\treturn (char.scale || 1) * char.range;\n\t\t\t}\n\t\t}\n\n\t\treturn 2;\n\t}\n\n\t_getUv(char) {\n\t\tvar data = this._font.data;\n\n\t\tif (!data.chars[char]) {\n\t\t\tvar space = ' ';\n\n\t\t\tif (data.chars[space]) {\n\t\t\t\treturn this._getUv(space);\n\t\t\t}\n\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tvar map = data.chars[char].map;\n\t\tvar width = data.info.maps[map].width;\n\t\tvar height = data.info.maps[map].height;\n\t\tvar x = data.chars[char].x;\n\t\tvar y = data.chars[char].y;\n\t\tvar x1 = x;\n\t\tvar y1 = y;\n\t\tvar x2 = x + data.chars[char].width;\n\t\tvar y2 = y - data.chars[char].height;\n\t\tvar edge = 1 - data.chars[char].height / height;\n\t\treturn [x1 / width, edge - y1 / height, x2 / width, edge - y2 / height];\n\t}\n\n\tonEnable() {\n\t\tthis._fontAsset.autoLoad = true;\n\n\t\tif (this._model) {\n\t\t\tthis._element.addModelToLayers(this._model);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis._fontAsset.autoLoad = false;\n\n\t\tif (this._model) {\n\t\t\tthis._element.removeModelFromLayers(this._model);\n\t\t}\n\t}\n\n\t_setStencil(stencilParams) {\n\t\tif (this._model) {\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (var i = 0; i < instances.length; i++) {\n\t\t\t\tinstances[i].stencilFront = stencilParams;\n\t\t\t\tinstances[i].stencilBack = stencilParams;\n\t\t\t}\n\t\t}\n\t}\n\n\t_shouldAutoFitWidth() {\n\t\treturn this._autoFitWidth && !this._autoWidth;\n\t}\n\n\t_shouldAutoFitHeight() {\n\t\treturn this._autoFitHeight && !this._autoHeight;\n\t}\n\n\t_shouldAutoFit() {\n\t\treturn this._autoFitWidth && !this._autoWidth || this._autoFitHeight && !this._autoHeight;\n\t}\n\n\t_calculateCharsPerTexture(symbolIndex) {\n\t\tvar charactersPerTexture = {};\n\n\t\tif (symbolIndex === undefined) {\n\t\t\tsymbolIndex = this._symbols.length;\n\t\t}\n\n\t\tvar i, len, char, info, map;\n\n\t\tfor (i = 0, len = symbolIndex; i < len; i++) {\n\t\t\tchar = this._symbols[i];\n\t\t\tinfo = this._font.data.chars[char];\n\n\t\t\tif (!info) {\n\t\t\t\tinfo = this._font.data.chars[' '];\n\n\t\t\t\tif (!info) {\n\t\t\t\t\tinfo = this._font.data.chars[Object.keys(this._font.data.chars)[0]];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmap = info.map;\n\n\t\t\tif (!charactersPerTexture[map]) {\n\t\t\t\tcharactersPerTexture[map] = 1;\n\t\t\t} else {\n\t\t\t\tcharactersPerTexture[map]++;\n\t\t\t}\n\t\t}\n\n\t\treturn charactersPerTexture;\n\t}\n\n\t_updateRenderRange() {\n\t\tvar startChars = this._rangeStart === 0 ? 0 : this._calculateCharsPerTexture(this._rangeStart);\n\t\tvar endChars = this._rangeEnd === 0 ? 0 : this._calculateCharsPerTexture(this._rangeEnd);\n\t\tvar i, len;\n\n\t\tfor (i = 0, len = this._meshInfo.length; i < len; i++) {\n\t\t\tvar start = startChars[i] || 0;\n\t\t\tvar end = endChars[i] || 0;\n\t\t\tvar instance = this._meshInfo[i].meshInstance;\n\n\t\t\tif (instance) {\n\t\t\t\tvar mesh = instance.mesh;\n\n\t\t\t\tif (mesh) {\n\t\t\t\t\tmesh.primitive[0].base = start * 3 * 2;\n\t\t\t\t\tmesh.primitive[0].count = (end - start) * 3 * 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget text() {\n\t\treturn this._text;\n\t}\n\n\tset text(value) {\n\t\tthis._i18nKey = null;\n\t\tvar str = value != null && value.toString() || \"\";\n\n\t\tthis._setText(str);\n\t}\n\n\tget key() {\n\t\treturn this._i18nKey;\n\t}\n\n\tset key(value) {\n\t\tvar str = value !== null ? value.toString() : null;\n\n\t\tif (this._i18nKey === str) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._i18nKey = str;\n\n\t\tif (str) {\n\t\t\tthis._fontAsset.disableLocalization = false;\n\n\t\t\tthis._resetLocalizedText();\n\t\t} else {\n\t\t\tthis._fontAsset.disableLocalization = true;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tvar r = value.r;\n\t\tvar g = value.g;\n\t\tvar b = value.b;\n\n\t\tif (this._color.r === r && this._color.g === g && this._color.b === b) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._color.r = r;\n\t\tthis._color.g = g;\n\t\tthis._color.b = b;\n\n\t\tif (this._symbolColors) {\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter('material_emissive', this._colorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tif (this._color.a === value) return;\n\t\tthis._color.a = value;\n\n\t\tif (this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter('material_opacity', value);\n\t\t\t}\n\t\t}\n\t}\n\n\tget lineHeight() {\n\t\treturn this._lineHeight;\n\t}\n\n\tset lineHeight(value) {\n\t\tvar _prev = this._lineHeight;\n\t\tthis._lineHeight = value;\n\t\tthis._scaledLineHeight = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget wrapLines() {\n\t\treturn this._wrapLines;\n\t}\n\n\tset wrapLines(value) {\n\t\tvar _prev = this._wrapLines;\n\t\tthis._wrapLines = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget lines() {\n\t\treturn this._lineContents;\n\t}\n\n\tget spacing() {\n\t\treturn this._spacing;\n\t}\n\n\tset spacing(value) {\n\t\tvar _prev = this._spacing;\n\t\tthis._spacing = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget fontSize() {\n\t\treturn this._fontSize;\n\t}\n\n\tset fontSize(value) {\n\t\tvar _prev = this._fontSize;\n\t\tthis._fontSize = value;\n\t\tthis._originalFontSize = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget fontAsset() {\n\t\treturn this._fontAsset.localizedAsset;\n\t}\n\n\tset fontAsset(value) {\n\t\tthis._fontAsset.defaultAsset = value;\n\t}\n\n\tget font() {\n\t\treturn this._font;\n\t}\n\n\tset font(value) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar previousFontType;\n\n\t\tif (this._font) {\n\t\t\tpreviousFontType = this._font.type;\n\t\t\tif (this._font.off) this._font.off('render', this._onFontRender, this);\n\t\t}\n\n\t\tthis._font = value;\n\t\tthis._fontMinY = 0;\n\t\tthis._fontMaxY = 0;\n\t\tif (!value) return;\n\t\tvar json = this._font.data;\n\n\t\tfor (var charId in json.chars) {\n\t\t\tvar data = json.chars[charId];\n\n\t\t\tif (data.bounds) {\n\t\t\t\tthis._fontMinY = Math.min(this._fontMinY, data.bounds[1]);\n\t\t\t\tthis._fontMaxY = Math.max(this._fontMaxY, data.bounds[3]);\n\t\t\t}\n\t\t}\n\n\t\tif (this._font.on) this._font.on('render', this._onFontRender, this);\n\n\t\tif (this._fontAsset.localizedAsset) {\n\t\t\tvar asset = this._system.app.assets.get(this._fontAsset.localizedAsset);\n\n\t\t\tif (asset.resource !== this._font) {\n\t\t\t\tthis._fontAsset.defaultAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tif (value.type !== previousFontType) {\n\t\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\t\tthis._updateMaterial(screenSpace);\n\t\t}\n\n\t\tfor (i = 0, len = this._font.textures.length; i < len; i++) {\n\t\t\tif (!this._meshInfo[i]) {\n\t\t\t\tthis._meshInfo[i] = new MeshInfo();\n\t\t\t} else {\n\t\t\t\tvar mi = this._meshInfo[i].meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\n\t\t\t\t\tthis._setTextureParams(mi, this._font.textures[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar removedModel = false;\n\n\t\tfor (i = this._font.textures.length; i < this._meshInfo.length; i++) {\n\t\t\tif (this._meshInfo[i].meshInstance) {\n\t\t\t\tif (!removedModel) {\n\t\t\t\t\tthis._element.removeModelFromLayers(this._model);\n\n\t\t\t\t\tremovedModel = true;\n\t\t\t\t}\n\n\t\t\t\tthis._removeMeshInstance(this._meshInfo[i].meshInstance);\n\t\t\t}\n\t\t}\n\n\t\tif (this._meshInfo.length > this._font.textures.length) this._meshInfo.length = this._font.textures.length;\n\n\t\tthis._updateText();\n\t}\n\n\tget alignment() {\n\t\treturn this._alignment;\n\t}\n\n\tset alignment(value) {\n\t\tif (value instanceof Vec2) {\n\t\t\tthis._alignment.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._alignment.set(value[0], value[1]);\n\t\t}\n\n\t\tif (this._font) this._updateText();\n\t}\n\n\tget autoWidth() {\n\t\treturn this._autoWidth;\n\t}\n\n\tset autoWidth(value) {\n\t\tvar old = this._autoWidth;\n\t\tthis._autoWidth = value;\n\n\t\tif (value && Math.abs(this._element.anchor.x - this._element.anchor.z) < 0.0001) {\n\t\t\tthis._element.width = this.width;\n\t\t}\n\n\t\tif (old !== value) {\n\t\t\tvar newFontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\t\tif (newFontSize !== this._fontSize) {\n\t\t\t\tthis._fontSize = newFontSize;\n\n\t\t\t\tif (this._font) {\n\t\t\t\t\tthis._updateText();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoHeight() {\n\t\treturn this._autoHeight;\n\t}\n\n\tset autoHeight(value) {\n\t\tvar old = this._autoHeight;\n\t\tthis._autoHeight = value;\n\n\t\tif (value && Math.abs(this._element.anchor.y - this._element.anchor.w) < 0.0001) {\n\t\t\tthis._element.height = this.height;\n\t\t}\n\n\t\tif (old !== value) {\n\t\t\tvar newFontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\t\tif (newFontSize !== this._fontSize) {\n\t\t\t\tthis._fontSize = newFontSize;\n\n\t\t\t\tif (this._font) {\n\t\t\t\t\tthis._updateText();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget rtlReorder() {\n\t\treturn this._rtlReorder;\n\t}\n\n\tset rtlReorder(value) {\n\t\tif (this._rtlReorder !== value) {\n\t\t\tthis._rtlReorder = value;\n\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tget unicodeConverter() {\n\t\treturn this._unicodeConverter;\n\t}\n\n\tset unicodeConverter(value) {\n\t\tif (this._unicodeConverter !== value) {\n\t\t\tthis._unicodeConverter = value;\n\n\t\t\tthis._setText(this._text);\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._aabbDirty) {\n\t\t\tvar initialized = false;\n\n\t\t\tfor (var i = 0; i < this._meshInfo.length; i++) {\n\t\t\t\tif (!this._meshInfo[i].meshInstance) continue;\n\n\t\t\t\tif (!initialized) {\n\t\t\t\t\tthis._aabb.copy(this._meshInfo[i].meshInstance.aabb);\n\n\t\t\t\t\tinitialized = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._aabb.add(this._meshInfo[i].meshInstance.aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._aabbDirty = false;\n\t\t}\n\n\t\treturn this._aabb;\n\t}\n\n\tget outlineColor() {\n\t\treturn this._outlineColor;\n\t}\n\n\tset outlineColor(value) {\n\t\tvar r = value instanceof Color ? value.r : value[0];\n\t\tvar g = value instanceof Color ? value.g : value[1];\n\t\tvar b = value instanceof Color ? value.b : value[2];\n\t\tvar a = value instanceof Color ? value.a : value[3];\n\n\t\tif (this._outlineColor.r === r && this._outlineColor.g === g && this._outlineColor.b === b && this._outlineColor.a === a) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._outlineColor.r = r;\n\t\tthis._outlineColor.g = g;\n\t\tthis._outlineColor.b = b;\n\t\tthis._outlineColor.a = a;\n\n\t\tif (this._model) {\n\t\t\tthis._outlineColorUniform[0] = this._outlineColor.r;\n\t\t\tthis._outlineColorUniform[1] = this._outlineColor.g;\n\t\t\tthis._outlineColorUniform[2] = this._outlineColor.b;\n\t\t\tthis._outlineColorUniform[3] = this._outlineColor.a;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"outline_color\", this._outlineColorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget outlineThickness() {\n\t\treturn this._outlineThickness;\n\t}\n\n\tset outlineThickness(value) {\n\t\tvar _prev = this._outlineThickness;\n\t\tthis._outlineThickness = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tif (this._model) {\n\t\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\t\tmi.setParameter(\"outline_thickness\", this._outlineThicknessScale * this._outlineThickness);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget shadowColor() {\n\t\treturn this._shadowColor;\n\t}\n\n\tset shadowColor(value) {\n\t\tvar r = value instanceof Color ? value.r : value[0];\n\t\tvar g = value instanceof Color ? value.g : value[1];\n\t\tvar b = value instanceof Color ? value.b : value[2];\n\t\tvar a = value instanceof Color ? value.a : value[3];\n\n\t\tif (this._shadowColor.r === r && this._shadowColor.g === g && this._shadowColor.b === b && this._shadowColor.a === a) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._shadowColor.r = r;\n\t\tthis._shadowColor.g = g;\n\t\tthis._shadowColor.b = b;\n\t\tthis._shadowColor.a = a;\n\n\t\tif (this._model) {\n\t\t\tthis._shadowColorUniform[0] = this._shadowColor.r;\n\t\t\tthis._shadowColorUniform[1] = this._shadowColor.g;\n\t\t\tthis._shadowColorUniform[2] = this._shadowColor.b;\n\t\t\tthis._shadowColorUniform[3] = this._shadowColor.a;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"shadow_color\", this._shadowColorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget shadowOffset() {\n\t\treturn this._shadowOffset;\n\t}\n\n\tset shadowOffset(value) {\n\t\tvar x = value instanceof Vec2 ? value.x : value[0],\n\t\t\t\ty = value instanceof Vec2 ? value.y : value[1];\n\n\t\tif (this._shadowOffset.x === x && this._shadowOffset.y === y) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._shadowOffset.set(x, y);\n\n\t\tif (this._font && this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar ratio = -this._font.data.info.maps[i].width / this._font.data.info.maps[i].height;\n\t\t\t\tthis._shadowOffsetUniform[0] = this._shadowOffsetScale * this._shadowOffset.x;\n\t\t\t\tthis._shadowOffsetUniform[1] = ratio * this._shadowOffsetScale * this._shadowOffset.y;\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"shadow_offset\", this._shadowOffsetUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget minFontSize() {\n\t\treturn this._minFontSize;\n\t}\n\n\tset minFontSize(value) {\n\t\tif (this._minFontSize === value) return;\n\t\tthis._minFontSize = value;\n\n\t\tif (this.font && this._shouldAutoFit()) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget maxFontSize() {\n\t\treturn this._maxFontSize;\n\t}\n\n\tset maxFontSize(value) {\n\t\tif (this._maxFontSize === value) return;\n\t\tthis._maxFontSize = value;\n\n\t\tif (this.font && this._shouldAutoFit()) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget autoFitWidth() {\n\t\treturn this._autoFitWidth;\n\t}\n\n\tset autoFitWidth(value) {\n\t\tif (this._autoFitWidth === value) return;\n\t\tthis._autoFitWidth = value;\n\t\tthis._fontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget autoFitHeight() {\n\t\treturn this._autoFitHeight;\n\t}\n\n\tset autoFitHeight(value) {\n\t\tif (this._autoFitHeight === value) return;\n\t\tthis._autoFitHeight = value;\n\t\tthis._fontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget maxLines() {\n\t\treturn this._maxLines;\n\t}\n\n\tset maxLines(value) {\n\t\tif (this._maxLines === value) return;\n\t\tif (value === null && this._maxLines === -1) return;\n\t\tthis._maxLines = value === null ? -1 : value;\n\n\t\tif (this.font && this._wrapLines) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget enableMarkup() {\n\t\treturn this._enableMarkup;\n\t}\n\n\tset enableMarkup(value) {\n\t\tvalue = !!value;\n\t\tif (this._enableMarkup === value) return;\n\t\tthis._enableMarkup = value;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget symbols() {\n\t\treturn this._symbols;\n\t}\n\n\tget symbolColors() {\n\t\tif (this._symbolColors === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._symbolColors.map(function (c) {\n\t\t\treturn this._colorPalette.slice(c * 3, c * 3 + 3);\n\t\t}, this);\n\t}\n\n\tget rtl() {\n\t\treturn this._rtl;\n\t}\n\n\tget rangeStart() {\n\t\treturn this._rangeStart;\n\t}\n\n\tset rangeStart(rangeStart) {\n\t\trangeStart = Math.max(0, Math.min(rangeStart, this._symbols.length));\n\n\t\tif (rangeStart !== this._rangeStart) {\n\t\t\tthis._rangeStart = rangeStart;\n\n\t\t\tthis._updateRenderRange();\n\t\t}\n\t}\n\n\tget rangeEnd() {\n\t\treturn this._rangeEnd;\n\t}\n\n\tset rangeEnd(rangeEnd) {\n\t\trangeEnd = Math.max(this._rangeStart, Math.min(rangeEnd, this._symbols.length));\n\n\t\tif (rangeEnd !== this._rangeEnd) {\n\t\t\tthis._rangeEnd = rangeEnd;\n\n\t\t\tthis._updateRenderRange();\n\t\t}\n\t}\n\n}\n\nvar position = new Vec3();\nvar invParentWtm = new Mat4();\nvar vecA$1 = new Vec3();\nvar vecB$1 = new Vec3();\nvar matA = new Mat4();\nvar matB = new Mat4();\nvar matC = new Mat4();\nvar matD = new Mat4();\n\nclass ElementComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._beingInitialized = false;\n\t\tthis._anchor = new Vec4();\n\t\tthis._localAnchor = new Vec4();\n\t\tthis._pivot = new Vec2();\n\t\tthis._width = this._calculatedWidth = 32;\n\t\tthis._height = this._calculatedHeight = 32;\n\t\tthis._margin = new Vec4(0, 0, -32, -32);\n\t\tthis._modelTransform = new Mat4();\n\t\tthis._screenToWorld = new Mat4();\n\t\tthis._anchorTransform = new Mat4();\n\t\tthis._anchorDirty = true;\n\t\tthis._parentWorldTransform = new Mat4();\n\t\tthis._screenTransform = new Mat4();\n\t\tthis._screenCorners = [new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\tthis._canvasCorners = [new Vec2(), new Vec2(), new Vec2(), new Vec2()];\n\t\tthis._worldCorners = [new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\tthis._cornersDirty = true;\n\t\tthis._canvasCornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\t\tthis.entity.on('insert', this._onInsert, this);\n\n\t\tthis._patch();\n\n\t\tthis.screen = null;\n\t\tthis._type = ELEMENTTYPE_GROUP;\n\t\tthis._image = null;\n\t\tthis._text = null;\n\t\tthis._group = null;\n\t\tthis._drawOrder = 0;\n\t\tthis._useInput = false;\n\t\tthis._layers = [LAYERID_UI];\n\t\tthis._addedModels = [];\n\t\tthis._batchGroupId = -1;\n\t\tthis._offsetReadAt = 0;\n\t\tthis._maskOffset = 0.5;\n\t\tthis._maskedBy = null;\n\t}\n\n\t_patch() {\n\t\tthis.entity._sync = this._sync;\n\t\tthis.entity.setPosition = this._setPosition;\n\t\tthis.entity.setLocalPosition = this._setLocalPosition;\n\t}\n\n\t_unpatch() {\n\t\tthis.entity._sync = Entity.prototype._sync;\n\t\tthis.entity.setPosition = Entity.prototype.setPosition;\n\t\tthis.entity.setLocalPosition = Entity.prototype.setLocalPosition;\n\t}\n\n\t_setPosition(x, y, z) {\n\t\tif (!this.element.screen) return Entity.prototype.setPosition.call(this, x, y, z);\n\n\t\tif (x instanceof Vec3) {\n\t\t\tposition.copy(x);\n\t\t} else {\n\t\t\tposition.set(x, y, z);\n\t\t}\n\n\t\tthis.getWorldTransform();\n\t\tinvParentWtm.copy(this.element._screenToWorld).invert();\n\t\tinvParentWtm.transformPoint(position, this.localPosition);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_setLocalPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localPosition.copy(x);\n\t\t} else {\n\t\t\tthis.localPosition.set(x, y, z);\n\t\t}\n\n\t\tvar element = this.element;\n\t\tvar p = this.localPosition;\n\t\tvar pvt = element._pivot;\n\t\telement._margin.x = p.x - element._calculatedWidth * pvt.x;\n\t\telement._margin.z = element._localAnchor.z - element._localAnchor.x - element._calculatedWidth - element._margin.x;\n\t\telement._margin.y = p.y - element._calculatedHeight * pvt.y;\n\t\telement._margin.w = element._localAnchor.w - element._localAnchor.y - element._calculatedHeight - element._margin.y;\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_sync() {\n\t\tvar element = this.element;\n\t\tvar screen = element.screen;\n\n\t\tif (screen) {\n\t\t\tif (element._anchorDirty) {\n\t\t\t\tvar resx = 0;\n\t\t\t\tvar resy = 0;\n\t\t\t\tvar px = 0;\n\t\t\t\tvar py = 1;\n\n\t\t\t\tif (this._parent && this._parent.element) {\n\t\t\t\t\tresx = this._parent.element.calculatedWidth;\n\t\t\t\t\tresy = this._parent.element.calculatedHeight;\n\t\t\t\t\tpx = this._parent.element.pivot.x;\n\t\t\t\t\tpy = this._parent.element.pivot.y;\n\t\t\t\t} else {\n\t\t\t\t\tvar resolution = screen.screen.resolution;\n\t\t\t\t\tresx = resolution.x / screen.screen.scale;\n\t\t\t\t\tresy = resolution.y / screen.screen.scale;\n\t\t\t\t}\n\n\t\t\t\telement._anchorTransform.setTranslate(resx * (element.anchor.x - px), -(resy * (py - element.anchor.y)), 0);\n\n\t\t\t\telement._anchorDirty = false;\n\n\t\t\t\telement._calculateLocalAnchors();\n\t\t\t}\n\n\t\t\tif (element._sizeDirty) {\n\t\t\t\telement._calculateSize(false, false);\n\t\t\t}\n\t\t}\n\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tvar p = this.localPosition;\n\t\t\tvar pvt = element._pivot;\n\t\t\telement._margin.x = p.x - element._calculatedWidth * pvt.x;\n\t\t\telement._margin.z = element._localAnchor.z - element._localAnchor.x - element._calculatedWidth - element._margin.x;\n\t\t\telement._margin.y = p.y - element._calculatedHeight * pvt.y;\n\t\t\telement._margin.w = element._localAnchor.w - element._localAnchor.y - element._calculatedHeight - element._margin.y;\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\tif (!screen) {\n\t\t\tif (this._dirtyWorld) {\n\t\t\t\telement._cornersDirty = true;\n\t\t\t\telement._canvasCornersDirty = true;\n\t\t\t\telement._worldCornersDirty = true;\n\t\t\t}\n\n\t\t\treturn Entity.prototype._sync.call(this);\n\t\t}\n\n\t\tif (this._dirtyWorld) {\n\t\t\tif (this._parent === null) {\n\t\t\t\tthis.worldTransform.copy(this.localTransform);\n\t\t\t} else {\n\t\t\t\tif (this._parent.element) {\n\t\t\t\t\telement._screenToWorld.mul2(this._parent.element._modelTransform, element._anchorTransform);\n\t\t\t\t} else {\n\t\t\t\t\telement._screenToWorld.copy(element._anchorTransform);\n\t\t\t\t}\n\n\t\t\t\telement._modelTransform.mul2(element._screenToWorld, this.localTransform);\n\n\t\t\t\tif (screen) {\n\t\t\t\t\telement._screenToWorld.mul2(screen.screen._screenMatrix, element._screenToWorld);\n\n\t\t\t\t\tif (!screen.screen.screenSpace) {\n\t\t\t\t\t\telement._screenToWorld.mul2(screen.worldTransform, element._screenToWorld);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.worldTransform.mul2(element._screenToWorld, this.localTransform);\n\t\t\t\t\tvar parentWorldTransform = element._parentWorldTransform;\n\t\t\t\t\tparentWorldTransform.setIdentity();\n\t\t\t\t\tvar parent = this._parent;\n\n\t\t\t\t\tif (parent && parent.element && parent !== screen) {\n\t\t\t\t\t\tmatA.setTRS(Vec3.ZERO, parent.getLocalRotation(), parent.getLocalScale());\n\t\t\t\t\t\tparentWorldTransform.mul2(parent.element._parentWorldTransform, matA);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar depthOffset = vecA$1;\n\t\t\t\t\tdepthOffset.set(0, 0, this.localPosition.z);\n\t\t\t\t\tvar pivotOffset = vecB$1;\n\t\t\t\t\tpivotOffset.set(element._absLeft + element._pivot.x * element.calculatedWidth, element._absBottom + element._pivot.y * element.calculatedHeight, 0);\n\t\t\t\t\tmatA.setTranslate(-pivotOffset.x, -pivotOffset.y, -pivotOffset.z);\n\t\t\t\t\tmatB.setTRS(depthOffset, this.getLocalRotation(), this.getLocalScale());\n\t\t\t\t\tmatC.setTranslate(pivotOffset.x, pivotOffset.y, pivotOffset.z);\n\n\t\t\t\t\telement._screenTransform.mul2(element._parentWorldTransform, matC).mul(matB).mul(matA);\n\n\t\t\t\t\telement._cornersDirty = true;\n\t\t\t\t\telement._canvasCornersDirty = true;\n\t\t\t\t\telement._worldCornersDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.worldTransform.copy(element._modelTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyWorld = false;\n\t\t}\n\t}\n\n\t_onInsert(parent) {\n\t\tvar result = this._parseUpToScreen();\n\n\t\tthis.entity._dirtifyWorld();\n\n\t\tthis._updateScreen(result.screen);\n\n\t\tthis._dirtifyMask();\n\t}\n\n\t_dirtifyMask() {\n\t\tvar current = this.entity;\n\n\t\twhile (current) {\n\t\t\tvar next = current.parent;\n\n\t\t\tif ((next === null || next.screen) && current.element) {\n\t\t\t\tif (!this.system._prerender || !this.system._prerender.length) {\n\t\t\t\t\tthis.system._prerender = [];\n\t\t\t\t\tthis.system.app.once('prerender', this._onPrerender, this);\n\t\t\t\t}\n\n\t\t\t\tvar i = this.system._prerender.indexOf(this.entity);\n\n\t\t\t\tif (i >= 0) {\n\t\t\t\t\tthis.system._prerender.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t\tvar j = this.system._prerender.indexOf(current);\n\n\t\t\t\tif (j < 0) {\n\t\t\t\t\tthis.system._prerender.push(current);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = next;\n\t\t}\n\t}\n\n\t_onPrerender() {\n\t\tfor (var i = 0; i < this.system._prerender.length; i++) {\n\t\t\tvar mask = this.system._prerender[i];\n\n\t\t\tif (mask.element) {\n\t\t\t\tvar depth = 1;\n\t\t\t\tmask.element.syncMask(depth);\n\t\t\t}\n\t\t}\n\n\t\tthis.system._prerender.length = 0;\n\t}\n\n\t_bindScreen(screen) {\n\t\tscreen._bindElement(this);\n\t}\n\n\t_unbindScreen(screen) {\n\t\tscreen._unbindElement(this);\n\t}\n\n\t_updateScreen(screen) {\n\t\tif (this.screen && this.screen !== screen) {\n\t\t\tthis._unbindScreen(this.screen.screen);\n\t\t}\n\n\t\tvar previousScreen = this.screen;\n\t\tthis.screen = screen;\n\n\t\tif (this.screen) {\n\t\t\tthis._bindScreen(this.screen.screen);\n\t\t}\n\n\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\n\t\tthis.fire('set:screen', this.screen, previousScreen);\n\t\tthis._anchorDirty = true;\n\t\tvar children = this.entity.children;\n\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tif (children[i].element) children[i].element._updateScreen(screen);\n\t\t}\n\n\t\tif (this.screen) this.screen.screen.syncDrawOrder();\n\t}\n\n\tsyncMask(depth) {\n\t\tvar result = this._parseUpToScreen();\n\n\t\tthis._updateMask(result.mask, depth);\n\t}\n\n\t_setMaskedBy(mask) {\n\t\tvar renderableElement = this._image || this._text;\n\n\t\tif (mask) {\n\t\t\tvar ref = mask.element._image._maskRef;\n\t\t\tvar sp = new StencilParameters({\n\t\t\t\tref: ref,\n\t\t\t\tfunc: FUNC_EQUAL\n\t\t\t});\n\n\t\t\tif (renderableElement && renderableElement._setStencil) {\n\t\t\t\trenderableElement._setStencil(sp);\n\t\t\t}\n\n\t\t\tthis._maskedBy = mask;\n\t\t} else {\n\t\t\tif (renderableElement && renderableElement._setStencil) {\n\t\t\t\trenderableElement._setStencil(null);\n\t\t\t}\n\n\t\t\tthis._maskedBy = null;\n\t\t}\n\t}\n\n\t_updateMask(currentMask, depth) {\n\t\tvar i, l, sp, children;\n\n\t\tif (currentMask) {\n\t\t\tthis._setMaskedBy(currentMask);\n\n\t\t\tif (this.mask) {\n\t\t\t\tvar ref = currentMask.element._image._maskRef;\n\t\t\t\tsp = new StencilParameters({\n\t\t\t\t\tref: ref,\n\t\t\t\t\tfunc: FUNC_EQUAL,\n\t\t\t\t\tzpass: STENCILOP_INCREMENT\n\t\t\t\t});\n\n\t\t\t\tthis._image._setStencil(sp);\n\n\t\t\t\tthis._image._maskRef = depth;\n\t\t\t\tdepth++;\n\t\t\t\tcurrentMask = this.entity;\n\t\t\t}\n\n\t\t\tchildren = this.entity.children;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i].element) {\n\t\t\t\t\tchildren[i].element._updateMask(currentMask, depth);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.mask) depth--;\n\t\t} else {\n\t\t\tthis._setMaskedBy(null);\n\n\t\t\tif (this.mask) {\n\t\t\t\tsp = new StencilParameters({\n\t\t\t\t\tref: depth,\n\t\t\t\t\tfunc: FUNC_ALWAYS,\n\t\t\t\t\tzpass: STENCILOP_REPLACE\n\t\t\t\t});\n\n\t\t\t\tthis._image._setStencil(sp);\n\n\t\t\t\tthis._image._maskRef = depth;\n\t\t\t\tdepth++;\n\t\t\t\tcurrentMask = this.entity;\n\t\t\t}\n\n\t\t\tchildren = this.entity.children;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i].element) {\n\t\t\t\t\tchildren[i].element._updateMask(currentMask, depth);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.mask) depth--;\n\t\t}\n\t}\n\n\t_parseUpToScreen() {\n\t\tvar result = {\n\t\t\tscreen: null,\n\t\t\tmask: null\n\t\t};\n\t\tvar parent = this.entity._parent;\n\n\t\twhile (parent && !parent.screen) {\n\t\t\tif (parent.element && parent.element.mask) {\n\t\t\t\tif (!result.mask) result.mask = parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\tif (parent && parent.screen) result.screen = parent;\n\t\treturn result;\n\t}\n\n\t_onScreenResize(res) {\n\t\tthis._anchorDirty = true;\n\t\tthis._cornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\n\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\n\t\tthis.fire('screen:set:resolution', res);\n\t}\n\n\t_onScreenSpaceChange() {\n\t\tthis.fire('screen:set:screenspace', this.screen.screen.screenSpace);\n\t}\n\n\t_onScreenRemove() {\n\t\tif (this.screen) {\n\t\t\tif (this.screen._destroying) {\n\t\t\t\tthis.screen = null;\n\t\t\t} else {\n\t\t\t\tthis._updateScreen(null);\n\t\t\t}\n\t\t}\n\t}\n\n\t_calculateLocalAnchors() {\n\t\tvar resx = 1000;\n\t\tvar resy = 1000;\n\t\tvar parent = this.entity._parent;\n\n\t\tif (parent && parent.element) {\n\t\t\tresx = parent.element.calculatedWidth;\n\t\t\tresy = parent.element.calculatedHeight;\n\t\t} else if (this.screen) {\n\t\t\tvar res = this.screen.screen.resolution;\n\t\t\tvar scale = this.screen.screen.scale;\n\t\t\tresx = res.x / scale;\n\t\t\tresy = res.y / scale;\n\t\t}\n\n\t\tthis._localAnchor.set(this._anchor.x * resx, this._anchor.y * resy, this._anchor.z * resx, this._anchor.w * resy);\n\t}\n\n\tgetOffsetPosition(x, y) {\n\t\tvar p = this.entity.getLocalPosition().clone();\n\t\tp.x += x;\n\t\tp.y += y;\n\n\t\tthis._screenToWorld.transformPoint(p, p);\n\n\t\treturn p;\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers(this._image ? this._image._renderable.model : this._text._model);\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._image) {\n\t\t\tlayer.addMeshInstances(this._image._renderable.model.meshInstances);\n\t\t} else if (this._text) {\n\t\t\tlayer.addMeshInstances(this._text._model.meshInstances);\n\t\t}\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._image) {\n\t\t\tlayer.removeMeshInstances(this._image._renderable.model.meshInstances);\n\t\t} else if (this._text) {\n\t\t\tlayer.removeMeshInstances(this._text._model.meshInstances);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this._image) this._image.onEnable();\n\t\tif (this._text) this._text.onEnable();\n\t\tif (this._group) this._group.onEnable();\n\n\t\tif (this.useInput && this.system.app.elementInput) {\n\t\t\tthis.system.app.elementInput.addElement(this);\n\t\t}\n\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.fire(\"enableelement\");\n\t}\n\n\tonDisable() {\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._image) this._image.onDisable();\n\t\tif (this._text) this._text.onDisable();\n\t\tif (this._group) this._group.onDisable();\n\n\t\tif (this.system.app.elementInput && this.useInput) {\n\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.fire(\"disableelement\");\n\t}\n\n\tonRemove() {\n\t\tthis.entity.off('insert', this._onInsert, this);\n\n\t\tthis._unpatch();\n\n\t\tif (this._image) this._image.destroy();\n\t\tif (this._text) this._text.destroy();\n\n\t\tif (this.system.app.elementInput && this.useInput) {\n\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t}\n\n\t\tif (this.screen && this.screen.screen) {\n\t\t\tthis._unbindScreen(this.screen.screen);\n\n\t\t\tthis.screen.screen.syncDrawOrder();\n\t\t}\n\n\t\tthis.off();\n\t}\n\n\t_calculateSize(propagateCalculatedWidth, propagateCalculatedHeight) {\n\t\tif (!this.entity._parent && !this.screen) return;\n\n\t\tthis._calculateLocalAnchors();\n\n\t\tvar newWidth = this._absRight - this._absLeft;\n\t\tvar newHeight = this._absTop - this._absBottom;\n\n\t\tif (propagateCalculatedWidth) {\n\t\t\tthis._setWidth(newWidth);\n\t\t} else {\n\t\t\tthis._setCalculatedWidth(newWidth, false);\n\t\t}\n\n\t\tif (propagateCalculatedHeight) {\n\t\t\tthis._setHeight(newHeight);\n\t\t} else {\n\t\t\tthis._setCalculatedHeight(newHeight, false);\n\t\t}\n\n\t\tvar p = this.entity.getLocalPosition();\n\t\tp.x = this._margin.x + this._calculatedWidth * this._pivot.x;\n\t\tp.y = this._margin.y + this._calculatedHeight * this._pivot.y;\n\t\tthis.entity.setLocalPosition(p);\n\t\tthis._sizeDirty = false;\n\t}\n\n\t_setWidth(w) {\n\t\tthis._width = w;\n\n\t\tthis._setCalculatedWidth(w, false);\n\n\t\tthis.fire('set:width', this._width);\n\t}\n\n\t_setHeight(h) {\n\t\tthis._height = h;\n\n\t\tthis._setCalculatedHeight(h, false);\n\n\t\tthis.fire('set:height', this._height);\n\t}\n\n\t_setCalculatedWidth(value, updateMargins) {\n\t\tif (Math.abs(value - this._calculatedWidth) <= 1e-4) return;\n\t\tthis._calculatedWidth = value;\n\n\t\tthis.entity._dirtifyLocal();\n\n\t\tif (updateMargins) {\n\t\t\tvar p = this.entity.getLocalPosition();\n\t\t\tvar pvt = this._pivot;\n\t\t\tthis._margin.x = p.x - this._calculatedWidth * pvt.x;\n\t\t\tthis._margin.z = this._localAnchor.z - this._localAnchor.x - this._calculatedWidth - this._margin.x;\n\t\t}\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:calculatedWidth', this._calculatedWidth);\n\t\tthis.fire('resize', this._calculatedWidth, this._calculatedHeight);\n\t}\n\n\t_setCalculatedHeight(value, updateMargins) {\n\t\tif (Math.abs(value - this._calculatedHeight) <= 1e-4) return;\n\t\tthis._calculatedHeight = value;\n\n\t\tthis.entity._dirtifyLocal();\n\n\t\tif (updateMargins) {\n\t\t\tvar p = this.entity.getLocalPosition();\n\t\t\tvar pvt = this._pivot;\n\t\t\tthis._margin.y = p.y - this._calculatedHeight * pvt.y;\n\t\t\tthis._margin.w = this._localAnchor.w - this._localAnchor.y - this._calculatedHeight - this._margin.y;\n\t\t}\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:calculatedHeight', this._calculatedHeight);\n\t\tthis.fire('resize', this._calculatedWidth, this._calculatedHeight);\n\t}\n\n\t_flagChildrenAsDirty() {\n\t\tvar i, l;\n\t\tvar c = this.entity._children;\n\n\t\tfor (i = 0, l = c.length; i < l; i++) {\n\t\t\tif (c[i].element) {\n\t\t\t\tc[i].element._anchorDirty = true;\n\t\t\t\tc[i].element._sizeDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\taddModelToLayers(model) {\n\t\tvar layer;\n\n\t\tthis._addedModels.push(model);\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(model.meshInstances);\n\t\t}\n\t}\n\n\tremoveModelFromLayers(model) {\n\t\tvar layer;\n\n\t\tvar idx = this._addedModels.indexOf(model);\n\n\t\tif (idx >= 0) {\n\t\t\tthis._addedModels.splice(idx, 1);\n\t\t}\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(model.meshInstances);\n\t\t}\n\t}\n\n\tgetMaskOffset() {\n\t\tvar frame = this.system.app.frame;\n\n\t\tif (this._offsetReadAt !== frame) {\n\t\t\tthis._maskOffset = 0.5;\n\t\t\tthis._offsetReadAt = frame;\n\t\t}\n\n\t\tvar mo = this._maskOffset;\n\t\tthis._maskOffset -= 0.001;\n\t\treturn mo;\n\t}\n\n\tisVisibleForCamera(camera) {\n\t\tvar clipL, clipR, clipT, clipB;\n\n\t\tif (this.maskedBy) {\n\t\t\tvar corners = this.maskedBy.element.screenCorners;\n\t\t\tclipL = Math.min(Math.min(corners[0].x, corners[1].x), Math.min(corners[2].x, corners[3].x));\n\t\t\tclipR = Math.max(Math.max(corners[0].x, corners[1].x), Math.max(corners[2].x, corners[3].x));\n\t\t\tclipB = Math.min(Math.min(corners[0].y, corners[1].y), Math.min(corners[2].y, corners[3].y));\n\t\t\tclipT = Math.max(Math.max(corners[0].y, corners[1].y), Math.max(corners[2].y, corners[3].y));\n\t\t} else {\n\t\t\tvar sw = this.system.app.graphicsDevice.width;\n\t\t\tvar sh = this.system.app.graphicsDevice.height;\n\t\t\tvar cameraWidth = camera._rect.z * sw;\n\t\t\tvar cameraHeight = camera._rect.w * sh;\n\t\t\tclipL = camera._rect.x * sw;\n\t\t\tclipR = clipL + cameraWidth;\n\t\t\tclipT = (1 - camera._rect.y) * sh;\n\t\t\tclipB = clipT - cameraHeight;\n\t\t}\n\n\t\tvar hitCorners = this.screenCorners;\n\t\tvar left = Math.min(Math.min(hitCorners[0].x, hitCorners[1].x), Math.min(hitCorners[2].x, hitCorners[3].x));\n\t\tvar right = Math.max(Math.max(hitCorners[0].x, hitCorners[1].x), Math.max(hitCorners[2].x, hitCorners[3].x));\n\t\tvar bottom = Math.min(Math.min(hitCorners[0].y, hitCorners[1].y), Math.min(hitCorners[2].y, hitCorners[3].y));\n\t\tvar top = Math.max(Math.max(hitCorners[0].y, hitCorners[1].y), Math.max(hitCorners[2].y, hitCorners[3].y));\n\n\t\tif (right < clipL || left > clipR || bottom > clipT || top < clipB) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t_isScreenSpace() {\n\t\tif (this.screen && this.screen.screen) {\n\t\t\treturn this.screen.screen.screenSpace;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_isScreenCulled() {\n\t\tif (this.screen && this.screen.screen) {\n\t\t\treturn this.screen.screen.cull;\n\t\t}\n\n\t\treturn false;\n\t}\n\n}\n\nObject.defineProperty(ElementComponent.prototype, \"type\", {\n\tget: function () {\n\t\treturn this._type;\n\t},\n\tset: function (value) {\n\t\tif (value !== this._type) {\n\t\t\tthis._type = value;\n\n\t\t\tif (this._image) {\n\t\t\t\tthis._image.destroy();\n\n\t\t\t\tthis._image = null;\n\t\t\t}\n\n\t\t\tif (this._text) {\n\t\t\t\tthis._text.destroy();\n\n\t\t\t\tthis._text = null;\n\t\t\t}\n\n\t\t\tif (value === ELEMENTTYPE_IMAGE) {\n\t\t\t\tthis._image = new ImageElement(this);\n\t\t\t} else if (value === ELEMENTTYPE_TEXT) {\n\t\t\t\tthis._text = new TextElement(this);\n\t\t\t}\n\t\t}\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"layers\", {\n\tget: function () {\n\t\treturn this._layers;\n\t},\n\tset: function (value) {\n\t\tvar i, j, layer;\n\n\t\tif (this._addedModels.length) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tfor (j = 0; j < this._addedModels.length; j++) {\n\t\t\t\t\t\tlayer.removeMeshInstances(this._addedModels[j].meshInstances);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._layers = value;\n\t\tif (!this.enabled || !this.entity.enabled || !this._addedModels.length) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tfor (j = 0; j < this._addedModels.length; j++) {\n\t\t\t\t\tlayer.addMeshInstances(this._addedModels[j].meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"drawOrder\", {\n\tget: function () {\n\t\treturn this._drawOrder;\n\t},\n\tset: function (value) {\n\t\tvar priority = 0;\n\n\t\tif (this.screen) {\n\t\t\tpriority = this.screen.screen.priority;\n\t\t}\n\n\t\tif (value > 0xFFFFFF) {\n\t\t\tvalue = 0xFFFFFF;\n\t\t}\n\n\t\tthis._drawOrder = (priority << 24) + value;\n\t\tthis.fire('set:draworder', this._drawOrder);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absLeft\", {\n\tget: function () {\n\t\treturn this._localAnchor.x + this._margin.x;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absRight\", {\n\tget: function () {\n\t\treturn this._localAnchor.z - this._margin.z;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absTop\", {\n\tget: function () {\n\t\treturn this._localAnchor.w - this._margin.w;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absBottom\", {\n\tget: function () {\n\t\treturn this._localAnchor.y + this._margin.y;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"margin\", {\n\tget: function () {\n\t\treturn this._margin;\n\t},\n\tset: function (value) {\n\t\tthis._margin.copy(value);\n\n\t\tthis._calculateSize(true, true);\n\n\t\tthis.fire('set:margin', this._margin);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"left\", {\n\tget: function () {\n\t\treturn this._margin.x;\n\t},\n\tset: function (value) {\n\t\tthis._margin.x = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wr = this._absRight;\n\t\tvar wl = this._localAnchor.x + value;\n\n\t\tthis._setWidth(wr - wl);\n\n\t\tp.x = value + this._calculatedWidth * this._pivot.x;\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"right\", {\n\tget: function () {\n\t\treturn this._margin.z;\n\t},\n\tset: function (value) {\n\t\tthis._margin.z = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wl = this._absLeft;\n\t\tvar wr = this._localAnchor.z - value;\n\n\t\tthis._setWidth(wr - wl);\n\n\t\tp.x = this._localAnchor.z - this._localAnchor.x - value - this._calculatedWidth * (1 - this._pivot.x);\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"top\", {\n\tget: function () {\n\t\treturn this._margin.w;\n\t},\n\tset: function (value) {\n\t\tthis._margin.w = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wb = this._absBottom;\n\t\tvar wt = this._localAnchor.w - value;\n\n\t\tthis._setHeight(wt - wb);\n\n\t\tp.y = this._localAnchor.w - this._localAnchor.y - value - this._calculatedHeight * (1 - this._pivot.y);\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"bottom\", {\n\tget: function () {\n\t\treturn this._margin.y;\n\t},\n\tset: function (value) {\n\t\tthis._margin.y = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wt = this._absTop;\n\t\tvar wb = this._localAnchor.y + value;\n\n\t\tthis._setHeight(wt - wb);\n\n\t\tp.y = value + this._calculatedHeight * this._pivot.y;\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"width\", {\n\tget: function () {\n\t\treturn this._width;\n\t},\n\tset: function (value) {\n\t\tthis._width = value;\n\n\t\tif (!this._hasSplitAnchorsX) {\n\t\t\tthis._setCalculatedWidth(value, true);\n\t\t}\n\n\t\tthis.fire('set:width', this._width);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"height\", {\n\tget: function () {\n\t\treturn this._height;\n\t},\n\tset: function (value) {\n\t\tthis._height = value;\n\n\t\tif (!this._hasSplitAnchorsY) {\n\t\t\tthis._setCalculatedHeight(value, true);\n\t\t}\n\n\t\tthis.fire('set:height', this._height);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"calculatedWidth\", {\n\tget: function () {\n\t\treturn this._calculatedWidth;\n\t},\n\tset: function (value) {\n\t\tthis._setCalculatedWidth(value, true);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"calculatedHeight\", {\n\tget: function () {\n\t\treturn this._calculatedHeight;\n\t},\n\tset: function (value) {\n\t\tthis._setCalculatedHeight(value, true);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"pivot\", {\n\tget: function () {\n\t\treturn this._pivot;\n\t},\n\tset: function (value) {\n\t\tvar prevX = this._pivot.x;\n\t\tvar prevY = this._pivot.y;\n\n\t\tif (value instanceof Vec2) {\n\t\t\tthis._pivot.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._pivot.set(value[0], value[1]);\n\t\t}\n\n\t\tvar mx = this._margin.x + this._margin.z;\n\t\tvar dx = this._pivot.x - prevX;\n\t\tthis._margin.x += mx * dx;\n\t\tthis._margin.z -= mx * dx;\n\t\tvar my = this._margin.y + this._margin.w;\n\t\tvar dy = this._pivot.y - prevY;\n\t\tthis._margin.y += my * dy;\n\t\tthis._margin.w -= my * dy;\n\t\tthis._anchorDirty = true;\n\t\tthis._cornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\n\t\tthis._calculateSize(false, false);\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:pivot', this._pivot);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"anchor\", {\n\tget: function () {\n\t\treturn this._anchor;\n\t},\n\tset: function (value) {\n\t\tif (value instanceof Vec4) {\n\t\t\tthis._anchor.set(value.x, value.y, value.z, value.w);\n\t\t} else {\n\t\t\tthis._anchor.set(value[0], value[1], value[2], value[3]);\n\t\t}\n\n\t\tif (!this.entity._parent && !this.screen) {\n\t\t\tthis._calculateLocalAnchors();\n\t\t} else {\n\t\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\t\t}\n\n\t\tthis._anchorDirty = true;\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire('set:anchor', this._anchor);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_hasSplitAnchorsX\", {\n\tget: function () {\n\t\treturn Math.abs(this._anchor.x - this._anchor.z) > 0.001;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_hasSplitAnchorsY\", {\n\tget: function () {\n\t\treturn Math.abs(this._anchor.y - this._anchor.w) > 0.001;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\tif (this._image) return this._image.aabb;\n\t\tif (this._text) return this._text.aabb;\n\t\treturn null;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'screenCorners', {\n\tget: function () {\n\t\tif (!this._cornersDirty || !this.screen) return this._screenCorners;\n\t\tvar parentBottomLeft = this.entity.parent && this.entity.parent.element && this.entity.parent.element.screenCorners[0];\n\n\t\tthis._screenCorners[0].set(this._absLeft, this._absBottom, 0);\n\n\t\tthis._screenCorners[1].set(this._absRight, this._absBottom, 0);\n\n\t\tthis._screenCorners[2].set(this._absRight, this._absTop, 0);\n\n\t\tthis._screenCorners[3].set(this._absLeft, this._absTop, 0);\n\n\t\tvar screenSpace = this.screen.screen.screenSpace;\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis._screenTransform.transformPoint(this._screenCorners[i], this._screenCorners[i]);\n\n\t\t\tif (screenSpace) this._screenCorners[i].mulScalar(this.screen.screen.scale);\n\n\t\t\tif (parentBottomLeft) {\n\t\t\t\tthis._screenCorners[i].add(parentBottomLeft);\n\t\t\t}\n\t\t}\n\n\t\tthis._cornersDirty = false;\n\t\tthis._canvasCornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\t\treturn this._screenCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'canvasCorners', {\n\tget: function () {\n\t\tif (!this._canvasCornersDirty || !this.screen || !this.screen.screen.screenSpace) return this._canvasCorners;\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar screenCorners = this.screenCorners;\n\t\tvar sx = device.canvas.clientWidth / device.width;\n\t\tvar sy = device.canvas.clientHeight / device.height;\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis._canvasCorners[i].set(screenCorners[i].x * sx, (device.height - screenCorners[i].y) * sy);\n\t\t}\n\n\t\tthis._canvasCornersDirty = false;\n\t\treturn this._canvasCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'worldCorners', {\n\tget: function () {\n\t\tif (!this._worldCornersDirty) {\n\t\t\treturn this._worldCorners;\n\t\t}\n\n\t\tif (this.screen) {\n\t\t\tvar screenCorners = this.screenCorners;\n\n\t\t\tif (!this.screen.screen.screenSpace) {\n\t\t\t\tmatA.copy(this.screen.screen._screenMatrix);\n\t\t\t\tmatA.data[13] = -matA.data[13];\n\t\t\t\tmatA.mul2(this.screen.getWorldTransform(), matA);\n\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tmatA.transformPoint(screenCorners[i], this._worldCorners[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar localPos = this.entity.getLocalPosition();\n\t\t\tmatA.setTranslate(-localPos.x, -localPos.y, -localPos.z);\n\t\t\tmatB.setTRS(Vec3.ZERO, this.entity.getLocalRotation(), this.entity.getLocalScale());\n\t\t\tmatC.setTranslate(localPos.x, localPos.y, localPos.z);\n\t\t\tvar entity = this.entity.parent ? this.entity.parent : this.entity;\n\t\t\tmatD.copy(entity.getWorldTransform());\n\t\t\tmatD.mul(matC).mul(matB).mul(matA);\n\t\t\tvecA$1.set(localPos.x - this.pivot.x * this.calculatedWidth, localPos.y - this.pivot.y * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[0]);\n\t\t\tvecA$1.set(localPos.x + (1 - this.pivot.x) * this.calculatedWidth, localPos.y - this.pivot.y * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[1]);\n\t\t\tvecA$1.set(localPos.x + (1 - this.pivot.x) * this.calculatedWidth, localPos.y + (1 - this.pivot.y) * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[2]);\n\t\t\tvecA$1.set(localPos.x - this.pivot.x * this.calculatedWidth, localPos.y + (1 - this.pivot.y) * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[3]);\n\t\t}\n\n\t\tthis._worldCornersDirty = false;\n\t\treturn this._worldCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"textWidth\", {\n\tget: function () {\n\t\treturn this._text ? this._text.width : 0;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"textHeight\", {\n\tget: function () {\n\t\treturn this._text ? this._text.height : 0;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"useInput\", {\n\tget: function () {\n\t\treturn this._useInput;\n\t},\n\tset: function (value) {\n\t\tif (this._useInput === value) return;\n\t\tthis._useInput = value;\n\n\t\tif (this.system.app.elementInput) {\n\t\t\tif (value) {\n\t\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\t\tthis.system.app.elementInput.addElement(this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._useInput === true) {\n\t\t\t\tconsole.warn(\"Elements will not get any input events because this.system.app.elementInput is not created\");\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:useInput', value);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"batchGroupId\", {\n\tget: function () {\n\t\treturn this._batchGroupId;\n\t},\n\tset: function (value) {\n\t\tif (this._batchGroupId === value) return;\n\n\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.ELEMENT, value, this.entity);\n\t\t}\n\n\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tif (this._image && this._image._renderable.model) {\n\t\t\t\tthis.addModelToLayers(this._image._renderable.model);\n\t\t\t} else if (this._text && this._text._model) {\n\t\t\t\tthis.addModelToLayers(this._text._model);\n\t\t\t}\n\t\t}\n\n\t\tthis._batchGroupId = value;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"maskedBy\", {\n\tget: function () {\n\t\treturn this._maskedBy;\n\t}\n});\n\nvar _define = function _define(name) {\n\tObject.defineProperty(ElementComponent.prototype, name, {\n\t\tget: function () {\n\t\t\tif (this._text) {\n\t\t\t\treturn this._text[name];\n\t\t\t} else if (this._image) {\n\t\t\t\treturn this._image[name];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this._text) {\n\t\t\t\tthis._text[name] = value;\n\t\t\t} else if (this._image) {\n\t\t\t\tthis._image[name] = value;\n\t\t\t}\n\t\t}\n\t});\n};\n\n_define(\"fontSize\");\n\n_define(\"minFontSize\");\n\n_define(\"maxFontSize\");\n\n_define(\"maxLines\");\n\n_define(\"autoFitWidth\");\n\n_define(\"autoFitHeight\");\n\n_define(\"color\");\n\n_define(\"font\");\n\n_define(\"fontAsset\");\n\n_define(\"spacing\");\n\n_define(\"lineHeight\");\n\n_define(\"wrapLines\");\n\n_define(\"lines\");\n\n_define(\"alignment\");\n\n_define(\"autoWidth\");\n\n_define(\"autoHeight\");\n\n_define(\"rtlReorder\");\n\n_define(\"unicodeConverter\");\n\n_define(\"text\");\n\n_define(\"key\");\n\n_define(\"texture\");\n\n_define(\"textureAsset\");\n\n_define(\"material\");\n\n_define(\"materialAsset\");\n\n_define(\"sprite\");\n\n_define(\"spriteAsset\");\n\n_define(\"spriteFrame\");\n\n_define(\"pixelsPerUnit\");\n\n_define(\"opacity\");\n\n_define(\"rect\");\n\n_define(\"mask\");\n\n_define(\"outlineColor\");\n\n_define(\"outlineThickness\");\n\n_define(\"shadowColor\");\n\n_define(\"shadowOffset\");\n\n_define(\"enableMarkup\");\n\n_define(\"rangeStart\");\n\n_define(\"rangeEnd\");\n\nclass ElementComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$e = ['enabled'];\n\nclass ElementComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'element';\n\t\tthis.ComponentType = ElementComponent;\n\t\tthis.DataType = ElementComponentData;\n\t\tthis.schema = _schema$e;\n\t\tthis._unicodeConverter = null;\n\t\tthis._rtlReorder = null;\n\t\tthis._defaultTexture = new Texture(app.graphicsDevice, {\n\t\t\twidth: 1,\n\t\t\theight: 1,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t});\n\t\tthis._defaultTexture.name = 'element-system';\n\n\t\tvar pixels = this._defaultTexture.lock();\n\n\t\tvar pixelData = new Uint8Array(4);\n\t\tpixelData[0] = 255.0;\n\t\tpixelData[1] = 255.0;\n\t\tpixelData[2] = 255.0;\n\t\tpixelData[3] = 255.0;\n\t\tpixels.set(pixelData);\n\n\t\tthis._defaultTexture.unlock();\n\n\t\tthis.defaultImageMaterial = null;\n\t\tthis.defaultImage9SlicedMaterial = null;\n\t\tthis.defaultImage9TiledMaterial = null;\n\t\tthis.defaultImageMaskMaterial = null;\n\t\tthis.defaultImage9SlicedMaskMaterial = null;\n\t\tthis.defaultImage9TiledMaskMaterial = null;\n\t\tthis.defaultScreenSpaceImageMaterial = null;\n\t\tthis.defaultScreenSpaceImage9SlicedMaterial = null;\n\t\tthis.defaultScreenSpaceImage9TiledMaterial = null;\n\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial = null;\n\t\tthis.defaultScreenSpaceImageMask9TiledMaterial = null;\n\t\tthis.defaultScreenSpaceImageMaskMaterial = null;\n\t\tthis.defaultTextMaterial = null;\n\t\tthis.defaultBitmapTextMaterial = null;\n\t\tthis.defaultScreenSpaceTextMaterial = null;\n\t\tthis.defaultScreenSpaceBitmapTextMaterial = null;\n\t\tthis.defaultImageMaterials = [];\n\t\tthis.on('beforeremove', this.onRemoveComponent, this);\n\t}\n\n\tdestroy() {\n\t\tthis._defaultTexture.destroy();\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent._beingInitialized = true;\n\n\t\tif (data.anchor !== undefined) {\n\t\t\tif (data.anchor instanceof Vec4) {\n\t\t\t\tcomponent.anchor.copy(data.anchor);\n\t\t\t} else {\n\t\t\t\tcomponent.anchor.set(data.anchor[0], data.anchor[1], data.anchor[2], data.anchor[3]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.pivot !== undefined) {\n\t\t\tif (data.pivot instanceof Vec2) {\n\t\t\t\tcomponent.pivot.copy(data.pivot);\n\t\t\t} else {\n\t\t\t\tcomponent.pivot.set(data.pivot[0], data.pivot[1]);\n\t\t\t}\n\t\t}\n\n\t\tvar splitHorAnchors = Math.abs(component.anchor.x - component.anchor.z) > 0.001;\n\t\tvar splitVerAnchors = Math.abs(component.anchor.y - component.anchor.w) > 0.001;\n\t\tvar _marginChange = false;\n\t\tvar color;\n\n\t\tif (data.margin !== undefined) {\n\t\t\tif (data.margin instanceof Vec4) {\n\t\t\t\tcomponent.margin.copy(data.margin);\n\t\t\t} else {\n\t\t\t\tcomponent._margin.set(data.margin[0], data.margin[1], data.margin[2], data.margin[3]);\n\t\t\t}\n\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.left !== undefined) {\n\t\t\tcomponent._margin.x = data.left;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.bottom !== undefined) {\n\t\t\tcomponent._margin.y = data.bottom;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.right !== undefined) {\n\t\t\tcomponent._margin.z = data.right;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.top !== undefined) {\n\t\t\tcomponent._margin.w = data.top;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (_marginChange) {\n\t\t\tcomponent.margin = component._margin;\n\t\t}\n\n\t\tvar shouldForceSetAnchor = false;\n\n\t\tif (data.width !== undefined && !splitHorAnchors) {\n\t\t\tcomponent.width = data.width;\n\t\t} else if (splitHorAnchors) {\n\t\t\tshouldForceSetAnchor = true;\n\t\t}\n\n\t\tif (data.height !== undefined && !splitVerAnchors) {\n\t\t\tcomponent.height = data.height;\n\t\t} else if (splitVerAnchors) {\n\t\t\tshouldForceSetAnchor = true;\n\t\t}\n\n\t\tif (shouldForceSetAnchor) {\n\t\t\tcomponent.anchor = component.anchor;\n\t\t}\n\n\t\tif (data.enabled !== undefined) {\n\t\t\tcomponent.enabled = data.enabled;\n\t\t}\n\n\t\tif (data.useInput !== undefined) {\n\t\t\tcomponent.useInput = data.useInput;\n\t\t}\n\n\t\tcomponent.batchGroupId = data.batchGroupId === undefined || data.batchGroupId === null ? -1 : data.batchGroupId;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tcomponent.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.type !== undefined) {\n\t\t\tcomponent.type = data.type;\n\t\t}\n\n\t\tif (component.type === ELEMENTTYPE_IMAGE) {\n\t\t\tif (data.rect !== undefined) {\n\t\t\t\tcomponent.rect = data.rect;\n\t\t\t}\n\n\t\t\tif (data.color !== undefined) {\n\t\t\t\tcolor = data.color;\n\n\t\t\t\tif (!(color instanceof Color)) {\n\t\t\t\t\tcolor = new Color(data.color[0], data.color[1], data.color[2]);\n\t\t\t\t}\n\n\t\t\t\tcomponent.color = color;\n\t\t\t}\n\n\t\t\tif (data.opacity !== undefined) component.opacity = data.opacity;\n\t\t\tif (data.textureAsset !== undefined) component.textureAsset = data.textureAsset;\n\t\t\tif (data.texture) component.texture = data.texture;\n\t\t\tif (data.spriteAsset !== undefined) component.spriteAsset = data.spriteAsset;\n\t\t\tif (data.sprite) component.sprite = data.sprite;\n\t\t\tif (data.spriteFrame !== undefined) component.spriteFrame = data.spriteFrame;\n\t\t\tif (data.pixelsPerUnit !== undefined && data.pixelsPerUnit !== null) component.pixelsPerUnit = data.pixelsPerUnit;\n\t\t\tif (data.materialAsset !== undefined) component.materialAsset = data.materialAsset;\n\t\t\tif (data.material) component.material = data.material;\n\n\t\t\tif (data.mask !== undefined) {\n\t\t\t\tcomponent.mask = data.mask;\n\t\t\t}\n\t\t} else if (component.type === ELEMENTTYPE_TEXT) {\n\t\t\tif (data.autoWidth !== undefined) component.autoWidth = data.autoWidth;\n\t\t\tif (data.autoHeight !== undefined) component.autoHeight = data.autoHeight;\n\t\t\tif (data.rtlReorder !== undefined) component.rtlReorder = data.rtlReorder;\n\t\t\tif (data.unicodeConverter !== undefined) component.unicodeConverter = data.unicodeConverter;\n\n\t\t\tif (data.text !== null && data.text !== undefined) {\n\t\t\t\tcomponent.text = data.text;\n\t\t\t} else if (data.key !== null && data.key !== undefined) {\n\t\t\t\tcomponent.key = data.key;\n\t\t\t}\n\n\t\t\tif (data.color !== undefined) {\n\t\t\t\tcolor = data.color;\n\n\t\t\t\tif (!(color instanceof Color)) {\n\t\t\t\t\tcolor = new Color(color[0], color[1], color[2]);\n\t\t\t\t}\n\n\t\t\t\tcomponent.color = color;\n\t\t\t}\n\n\t\t\tif (data.opacity !== undefined) {\n\t\t\t\tcomponent.opacity = data.opacity;\n\t\t\t}\n\n\t\t\tif (data.spacing !== undefined) component.spacing = data.spacing;\n\n\t\t\tif (data.fontSize !== undefined) {\n\t\t\t\tcomponent.fontSize = data.fontSize;\n\t\t\t\tif (!data.lineHeight) component.lineHeight = data.fontSize;\n\t\t\t}\n\n\t\t\tif (data.lineHeight !== undefined) component.lineHeight = data.lineHeight;\n\t\t\tif (data.maxLines !== undefined) component.maxLines = data.maxLines;\n\t\t\tif (data.wrapLines !== undefined) component.wrapLines = data.wrapLines;\n\t\t\tif (data.minFontSize !== undefined) component.minFontSize = data.minFontSize;\n\t\t\tif (data.maxFontSize !== undefined) component.maxFontSize = data.maxFontSize;\n\t\t\tif (data.autoFitWidth) component.autoFitWidth = data.autoFitWidth;\n\t\t\tif (data.autoFitHeight) component.autoFitHeight = data.autoFitHeight;\n\t\t\tif (data.fontAsset !== undefined) component.fontAsset = data.fontAsset;\n\t\t\tif (data.font !== undefined) component.font = data.font;\n\t\t\tif (data.alignment !== undefined) component.alignment = data.alignment;\n\t\t\tif (data.outlineColor !== undefined) component.outlineColor = data.outlineColor;\n\t\t\tif (data.outlineThickness !== undefined) component.outlineThickness = data.outlineThickness;\n\t\t\tif (data.shadowColor !== undefined) component.shadowColor = data.shadowColor;\n\t\t\tif (data.shadowOffset !== undefined) component.shadowOffset = data.shadowOffset;\n\t\t\tif (data.enableMarkup !== undefined) component.enableMarkup = data.enableMarkup;\n\t\t}\n\n\t\tvar result = component._parseUpToScreen();\n\n\t\tif (result.screen) {\n\t\t\tcomponent._updateScreen(result.screen);\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\tcomponent._beingInitialized = false;\n\n\t\tif (component.type === ELEMENTTYPE_IMAGE && component._image._meshDirty) {\n\t\t\tcomponent._image._updateMesh(component._image.mesh);\n\t\t}\n\t}\n\n\tonRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.element;\n\t\tvar data = {\n\t\t\tenabled: source.enabled,\n\t\t\twidth: source.width,\n\t\t\theight: source.height,\n\t\t\tanchor: source.anchor.clone(),\n\t\t\tpivot: source.pivot.clone(),\n\t\t\tmargin: source.margin.clone(),\n\t\t\talignment: source.alignment && source.alignment.clone() || source.alignment,\n\t\t\tautoWidth: source.autoWidth,\n\t\t\tautoHeight: source.autoHeight,\n\t\t\ttype: source.type,\n\t\t\trect: source.rect && source.rect.clone() || source.rect,\n\t\t\trtlReorder: source.rtlReorder,\n\t\t\tunicodeConverter: source.unicodeConverter,\n\t\t\tmaterialAsset: source.materialAsset,\n\t\t\tmaterial: source.material,\n\t\t\tcolor: source.color && source.color.clone() || source.color,\n\t\t\topacity: source.opacity,\n\t\t\ttextureAsset: source.textureAsset,\n\t\t\ttexture: source.texture,\n\t\t\tspriteAsset: source.spriteAsset,\n\t\t\tsprite: source.sprite,\n\t\t\tspriteFrame: source.spriteFrame,\n\t\t\tpixelsPerUnit: source.pixelsPerUnit,\n\t\t\tspacing: source.spacing,\n\t\t\tlineHeight: source.lineHeight,\n\t\t\twrapLines: source.wrapLines,\n\t\t\tlayers: source.layers,\n\t\t\tfontSize: source.fontSize,\n\t\t\tminFontSize: source.minFontSize,\n\t\t\tmaxFontSize: source.maxFontSize,\n\t\t\tautoFitWidth: source.autoFitWidth,\n\t\t\tautoFitHeight: source.autoFitHeight,\n\t\t\tmaxLines: source.maxLines,\n\t\t\tfontAsset: source.fontAsset,\n\t\t\tfont: source.font,\n\t\t\tuseInput: source.useInput,\n\t\t\tbatchGroupId: source.batchGroupId,\n\t\t\tmask: source.mask,\n\t\t\toutlineColor: source.outlineColor && source.outlineColor.clone() || source.outlineColor,\n\t\t\toutlineThickness: source.outlineThickness,\n\t\t\tshadowColor: source.shadowColor && source.shadowColor.clone() || source.shadowColor,\n\t\t\tshadowOffset: source.shadowOffset && source.shadowOffset.clone() || source.shadowOffset,\n\t\t\tenableMarkup: source.enableMarkup\n\t\t};\n\n\t\tif (source.key !== undefined && source.key !== null) {\n\t\t\tdata.key = source.key;\n\t\t} else {\n\t\t\tdata.text = source.text;\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tgetTextElementMaterial(screenSpace, msdf) {\n\t\tif (screenSpace) {\n\t\t\tif (msdf) {\n\t\t\t\tif (!this.defaultScreenSpaceTextMaterial) {\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial = new StandardMaterial();\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.name = \"defaultScreenSpaceTextMaterial\";\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.msdfMap = this._defaultTexture;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useLighting = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useGammaTonemap = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useFog = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useSkybox = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.emissive.set(1, 1, 1);\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.opacity = 0.5;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.depthWrite = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.depthTest = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.emissiveVertexColor = true;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.update();\n\t\t\t\t}\n\n\t\t\t\treturn this.defaultScreenSpaceTextMaterial;\n\t\t\t}\n\n\t\t\tif (!this.defaultScreenSpaceBitmapTextMaterial) {\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial = new StandardMaterial();\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.name = \"defaultScreenSpaceBitmapTextMaterial\";\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveMap = this._defaultTexture;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveTint = true;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacity = 0.5;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacityMap = this._defaultTexture;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacityMapChannel = 'a';\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useLighting = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useGammaTonemap = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useFog = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useSkybox = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.depthWrite = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.depthTest = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveVertexColor = true;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.update();\n\t\t\t}\n\n\t\t\treturn this.defaultScreenSpaceBitmapTextMaterial;\n\t\t}\n\n\t\tif (msdf) {\n\t\t\tif (!this.defaultTextMaterial) {\n\t\t\t\tthis.defaultTextMaterial = new StandardMaterial();\n\t\t\t\tthis.defaultTextMaterial.name = \"defaultTextMaterial\";\n\t\t\t\tthis.defaultTextMaterial.msdfMap = this._defaultTexture;\n\t\t\t\tthis.defaultTextMaterial.useLighting = false;\n\t\t\t\tthis.defaultTextMaterial.useGammaTonemap = false;\n\t\t\t\tthis.defaultTextMaterial.useFog = false;\n\t\t\t\tthis.defaultTextMaterial.useSkybox = false;\n\t\t\t\tthis.defaultTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\tthis.defaultTextMaterial.emissive.set(1, 1, 1);\n\t\t\t\tthis.defaultTextMaterial.opacity = 0.5;\n\t\t\t\tthis.defaultTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\tthis.defaultTextMaterial.depthWrite = false;\n\t\t\t\tthis.defaultTextMaterial.emissiveVertexColor = true;\n\t\t\t\tthis.defaultTextMaterial.update();\n\t\t\t}\n\n\t\t\treturn this.defaultTextMaterial;\n\t\t}\n\n\t\tif (!this.defaultBitmapTextMaterial) {\n\t\t\tthis.defaultBitmapTextMaterial = new StandardMaterial();\n\t\t\tthis.defaultBitmapTextMaterial.name = \"defaultBitmapTextMaterial\";\n\t\t\tthis.defaultBitmapTextMaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\tthis.defaultBitmapTextMaterial.emissiveTint = true;\n\t\t\tthis.defaultBitmapTextMaterial.emissiveMap = this._defaultTexture;\n\t\t\tthis.defaultBitmapTextMaterial.opacity = 0.5;\n\t\t\tthis.defaultBitmapTextMaterial.opacityMap = this._defaultTexture;\n\t\t\tthis.defaultBitmapTextMaterial.opacityMapChannel = 'a';\n\t\t\tthis.defaultBitmapTextMaterial.useLighting = false;\n\t\t\tthis.defaultBitmapTextMaterial.useGammaTonemap = false;\n\t\t\tthis.defaultBitmapTextMaterial.useFog = false;\n\t\t\tthis.defaultBitmapTextMaterial.useSkybox = false;\n\t\t\tthis.defaultBitmapTextMaterial.diffuse.set(0, 0, 0);\n\t\t\tthis.defaultBitmapTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\tthis.defaultBitmapTextMaterial.depthWrite = false;\n\t\t\tthis.defaultBitmapTextMaterial.emissiveVertexColor = true;\n\t\t\tthis.defaultBitmapTextMaterial.update();\n\t\t}\n\n\t\treturn this.defaultBitmapTextMaterial;\n\t}\n\n\t_createBaseImageMaterial() {\n\t\tvar material = new StandardMaterial();\n\t\tmaterial.diffuse.set(0, 0, 0);\n\t\tmaterial.emissive.set(0.5, 0.5, 0.5);\n\t\tmaterial.emissiveMap = this._defaultTexture;\n\t\tmaterial.emissiveTint = true;\n\t\tmaterial.opacityMap = this._defaultTexture;\n\t\tmaterial.opacityMapChannel = \"a\";\n\t\tmaterial.opacityTint = true;\n\t\tmaterial.opacity = 0;\n\t\tmaterial.useLighting = false;\n\t\tmaterial.useGammaTonemap = false;\n\t\tmaterial.useFog = false;\n\t\tmaterial.useSkybox = false;\n\t\tmaterial.blendType = BLEND_PREMULTIPLIED;\n\t\tmaterial.depthWrite = false;\n\t\treturn material;\n\t}\n\n\tgetImageElementMaterial(screenSpace, mask, nineSliced, nineSliceTiled) {\n\t\tif (screenSpace) {\n\t\t\tif (mask) {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMask9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.name = \"defaultScreenSpaceImageMask9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMask9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMask9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMask9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial = this.defaultScreenSpaceImage9TiledMaterial.clone();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.name = \"defaultScreenSpaceImageMask9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMask9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMask9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMaskMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.name = \"defaultScreenSpaceImageMaskMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMaskMaterial;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImage9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.name = \"defaultScreenSpaceImage9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImage9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImage9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImage9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.name = \"defaultScreenSpaceImage9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImage9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImage9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.name = \"defaultScreenSpaceImageMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (mask) {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultImage9SlicedMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.name = \"defaultImage9SlicedMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9SlicedMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9SlicedMaskMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultImage9TiledMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.name = \"defaultImage9TiledMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9TiledMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9TiledMaskMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultImageMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImageMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.name = \"defaultImageMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImageMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImageMaskMaterial;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultImage9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.name = \"defaultImage9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultImage9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.name = \"defaultImage9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultImageMaterial) {\n\t\t\t\t\t\tthis.defaultImageMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImageMaterial.name = \"defaultImageMaterial\";\n\t\t\t\t\t\tthis.defaultImageMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImageMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImageMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterUnicodeConverter(func) {\n\t\tthis._unicodeConverter = func;\n\t}\n\n\tregisterRtlReorder(func) {\n\t\tthis._rtlReorder = func;\n\t}\n\n\tgetUnicodeConverter() {\n\t\treturn this._unicodeConverter;\n\t}\n\n\tgetRtlReorder() {\n\t\treturn this._rtlReorder;\n\t}\n\n}\n\nComponent._buildAccessors(ElementComponent.prototype, _schema$e);\n\nconst MOTION_FREE = 'free';\nconst MOTION_LIMITED = 'limited';\nconst MOTION_LOCKED = 'locked';\n\nconst properties = ['angularDampingX', 'angularDampingY', 'angularDampingZ', 'angularEquilibriumX', 'angularEquilibriumY', 'angularEquilibriumZ', 'angularLimitsX', 'angularLimitsY', 'angularLimitsZ', 'angularMotionX', 'angularMotionY', 'angularMotionZ', 'angularSpringX', 'angularSpringY', 'angularSpringZ', 'angularStiffnessX', 'angularStiffnessY', 'angularStiffnessZ', 'breakForce', 'enableCollision', 'enabled', 'entityA', 'entityB', 'linearDampingX', 'linearDampingY', 'linearDampingZ', 'linearEquilibriumX', 'linearEquilibriumY', 'linearEquilibriumZ', 'linearLimitsX', 'linearLimitsY', 'linearLimitsZ', 'linearMotionX', 'linearMotionY', 'linearMotionZ', 'linearSpringX', 'linearSpringY', 'linearSpringZ', 'linearStiffnessX', 'linearStiffnessY', 'linearStiffnessZ'];\n\nclass JointComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._constraint = null;\n\t\tthis._entityA = null;\n\t\tthis._entityB = null;\n\t\tthis._breakForce = 3.4e+38;\n\t\tthis._enableCollision = true;\n\t\tthis._linearMotionX = MOTION_LOCKED;\n\t\tthis._linearLimitsX = new Vec2(0, 0);\n\t\tthis._linearSpringX = false;\n\t\tthis._linearStiffnessX = 0;\n\t\tthis._linearDampingX = 1;\n\t\tthis._linearEquilibriumX = 0;\n\t\tthis._linearMotionY = MOTION_LOCKED;\n\t\tthis._linearLimitsY = new Vec2(0, 0);\n\t\tthis._linearSpringY = false;\n\t\tthis._linearStiffnessY = 0;\n\t\tthis._linearDampingY = 1;\n\t\tthis._linearEquilibriumY = 0;\n\t\tthis._linearMotionZ = MOTION_LOCKED;\n\t\tthis._linearLimitsZ = new Vec2(0, 0);\n\t\tthis._linearSpringZ = false;\n\t\tthis._linearStiffnessZ = 0;\n\t\tthis._linearDampingZ = 1;\n\t\tthis._linearEquilibriumZ = 0;\n\t\tthis._angularMotionX = MOTION_LOCKED;\n\t\tthis._angularLimitsX = new Vec2(0, 0);\n\t\tthis._angularSpringX = false;\n\t\tthis._angularStiffnessX = 0;\n\t\tthis._angularDampingX = 1;\n\t\tthis._angularEquilibriumX = 0;\n\t\tthis._angularMotionY = MOTION_LOCKED;\n\t\tthis._angularLimitsY = new Vec2(0, 0);\n\t\tthis._angularSpringY = false;\n\t\tthis._angularStiffnessY = 0;\n\t\tthis._angularDampingY = 1;\n\t\tthis._angularEquilibriumY = 0;\n\t\tthis._angularMotionZ = MOTION_LOCKED;\n\t\tthis._angularLimitsZ = new Vec2(0, 0);\n\t\tthis._angularSpringZ = false;\n\t\tthis._angularEquilibriumZ = 0;\n\t\tthis._angularDampingZ = 1;\n\t\tthis._angularStiffnessZ = 0;\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tset entityA(body) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._entityA = body;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget entityA() {\n\t\treturn this._entityA;\n\t}\n\n\tset entityB(body) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._entityB = body;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget entityB() {\n\t\treturn this._entityB;\n\t}\n\n\tset breakForce(force) {\n\t\tif (this._constraint && this._breakForce !== force) {\n\t\t\tthis._constraint.setBreakingImpulseThreshold(force);\n\n\t\t\tthis._breakForce = force;\n\t\t}\n\t}\n\n\tget breakForce() {\n\t\treturn this._breakForce;\n\t}\n\n\tset enableCollision(enableCollision) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._enableCollision = enableCollision;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget enableCollision() {\n\t\treturn this._enableCollision;\n\t}\n\n\tset angularLimitsX(limits) {\n\t\tif (!this._angularLimitsX.equals(limits)) {\n\t\t\tthis._angularLimitsX.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsX() {\n\t\treturn this._angularLimitsX;\n\t}\n\n\tset angularMotionX(value) {\n\t\tif (this._angularMotionX !== value) {\n\t\t\tthis._angularMotionX = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionX() {\n\t\treturn this._angularMotionX;\n\t}\n\n\tset angularLimitsY(limits) {\n\t\tif (!this._angularLimitsY.equals(limits)) {\n\t\t\tthis._angularLimitsY.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsY() {\n\t\treturn this._angularLimitsY;\n\t}\n\n\tset angularMotionY(value) {\n\t\tif (this._angularMotionY !== value) {\n\t\t\tthis._angularMotionY = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionY() {\n\t\treturn this._angularMotionY;\n\t}\n\n\tset angularLimitsZ(limits) {\n\t\tif (!this._angularLimitsZ.equals(limits)) {\n\t\t\tthis._angularLimitsZ.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsZ() {\n\t\treturn this._angularLimitsZ;\n\t}\n\n\tset angularMotionZ(value) {\n\t\tif (this._angularMotionZ !== value) {\n\t\t\tthis._angularMotionZ = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionZ() {\n\t\treturn this._angularMotionZ;\n\t}\n\n\tset linearLimitsX(limits) {\n\t\tif (!this._linearLimitsX.equals(limits)) {\n\t\t\tthis._linearLimitsX.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsX() {\n\t\treturn this._linearLimitsX;\n\t}\n\n\tset linearMotionX(value) {\n\t\tif (this._linearMotionX !== value) {\n\t\t\tthis._linearMotionX = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionX() {\n\t\treturn this._linearMotionX;\n\t}\n\n\tset linearLimitsY(limits) {\n\t\tif (!this._linearLimitsY.equals(limits)) {\n\t\t\tthis._linearLimitsY.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsY() {\n\t\treturn this._linearLimitsY;\n\t}\n\n\tset linearMotionY(value) {\n\t\tif (this._linearMotionY !== value) {\n\t\t\tthis._linearMotionY = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionY() {\n\t\treturn this._linearMotionY;\n\t}\n\n\tset linearLimitsZ(limits) {\n\t\tif (!this._linearLimitsZ.equals(limits)) {\n\t\t\tthis._linearLimitsZ.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsZ() {\n\t\treturn this._linearLimitsZ;\n\t}\n\n\tset linearMotionZ(value) {\n\t\tif (this._linearMotionZ !== value) {\n\t\t\tthis._linearMotionZ = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionZ() {\n\t\treturn this._linearMotionZ;\n\t}\n\n\t_convertTransform(pcTransform, ammoTransform) {\n\t\tconst pos = pcTransform.getTranslation();\n\t\tconst rot = new Quat();\n\t\trot.setFromMat4(pcTransform);\n\t\tconst ammoVec = new Ammo.btVector3(pos.x, pos.y, pos.z);\n\t\tconst ammoQuat = new Ammo.btQuaternion(rot.x, rot.y, rot.z, rot.w);\n\t\tammoTransform.setOrigin(ammoVec);\n\t\tammoTransform.setRotation(ammoQuat);\n\t\tAmmo.destroy(ammoVec);\n\t\tAmmo.destroy(ammoQuat);\n\t}\n\n\t_updateAngularLimits() {\n\t\tconst constraint = this._constraint;\n\n\t\tif (constraint) {\n\t\t\tlet lx, ly, lz, ux, uy, uz;\n\n\t\t\tif (this._angularMotionX === MOTION_LIMITED) {\n\t\t\t\tlx = this._angularLimitsX.x * math.DEG_TO_RAD;\n\t\t\t\tux = this._angularLimitsX.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionX === MOTION_FREE) {\n\t\t\t\tlx = 1;\n\t\t\t\tux = 0;\n\t\t\t} else {\n\t\t\t\tlx = ux = 0;\n\t\t\t}\n\n\t\t\tif (this._angularMotionY === MOTION_LIMITED) {\n\t\t\t\tly = this._angularLimitsY.x * math.DEG_TO_RAD;\n\t\t\t\tuy = this._angularLimitsY.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionY === MOTION_FREE) {\n\t\t\t\tly = 1;\n\t\t\t\tuy = 0;\n\t\t\t} else {\n\t\t\t\tly = uy = 0;\n\t\t\t}\n\n\t\t\tif (this._angularMotionZ === MOTION_LIMITED) {\n\t\t\t\tlz = this._angularLimitsZ.x * math.DEG_TO_RAD;\n\t\t\t\tuz = this._angularLimitsZ.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionZ === MOTION_FREE) {\n\t\t\t\tlz = 1;\n\t\t\t\tuz = 0;\n\t\t\t} else {\n\t\t\t\tlz = uz = 0;\n\t\t\t}\n\n\t\t\tconst limits = new Ammo.btVector3(lx, ly, lz);\n\t\t\tconstraint.setAngularLowerLimit(limits);\n\t\t\tlimits.setValue(ux, uy, uz);\n\t\t\tconstraint.setAngularUpperLimit(limits);\n\t\t\tAmmo.destroy(limits);\n\t\t}\n\t}\n\n\t_updateLinearLimits() {\n\t\tconst constraint = this._constraint;\n\n\t\tif (constraint) {\n\t\t\tlet lx, ly, lz, ux, uy, uz;\n\n\t\t\tif (this._linearMotionX === MOTION_LIMITED) {\n\t\t\t\tlx = this._linearLimitsX.x;\n\t\t\t\tux = this._linearLimitsX.y;\n\t\t\t} else if (this._linearMotionX === MOTION_FREE) {\n\t\t\t\tlx = 1;\n\t\t\t\tux = 0;\n\t\t\t} else {\n\t\t\t\tlx = ux = 0;\n\t\t\t}\n\n\t\t\tif (this._linearMotionY === MOTION_LIMITED) {\n\t\t\t\tly = this._linearLimitsY.x;\n\t\t\t\tuy = this._linearLimitsY.y;\n\t\t\t} else if (this._linearMotionY === MOTION_FREE) {\n\t\t\t\tly = 1;\n\t\t\t\tuy = 0;\n\t\t\t} else {\n\t\t\t\tly = uy = 0;\n\t\t\t}\n\n\t\t\tif (this._linearMotionZ === MOTION_LIMITED) {\n\t\t\t\tlz = this._linearLimitsZ.x;\n\t\t\t\tuz = this._linearLimitsZ.y;\n\t\t\t} else if (this._linearMotionZ === MOTION_FREE) {\n\t\t\t\tlz = 1;\n\t\t\t\tuz = 0;\n\t\t\t} else {\n\t\t\t\tlz = uz = 0;\n\t\t\t}\n\n\t\t\tconst limits = new Ammo.btVector3(lx, ly, lz);\n\t\t\tconstraint.setLinearLowerLimit(limits);\n\t\t\tlimits.setValue(ux, uy, uz);\n\t\t\tconstraint.setLinearUpperLimit(limits);\n\t\t\tAmmo.destroy(limits);\n\t\t}\n\t}\n\n\t_createConstraint() {\n\t\tif (this._entityA && this._entityA.rigidbody) {\n\t\t\tthis._destroyConstraint();\n\n\t\t\tconst mat = new Mat4();\n\t\t\tconst bodyA = this._entityA.rigidbody.body;\n\t\t\tbodyA.activate();\n\t\t\tconst jointWtm = this.entity.getWorldTransform();\n\n\t\t\tconst entityAWtm = this._entityA.getWorldTransform();\n\n\t\t\tconst invEntityAWtm = entityAWtm.clone().invert();\n\t\t\tmat.mul2(invEntityAWtm, jointWtm);\n\t\t\tconst frameA = new Ammo.btTransform();\n\n\t\t\tthis._convertTransform(mat, frameA);\n\n\t\t\tif (this._entityB && this._entityB.rigidbody) {\n\t\t\t\tconst bodyB = this._entityB.rigidbody.body;\n\t\t\t\tbodyB.activate();\n\n\t\t\t\tconst entityBWtm = this._entityB.getWorldTransform();\n\n\t\t\t\tconst invEntityBWtm = entityBWtm.clone().invert();\n\t\t\t\tmat.mul2(invEntityBWtm, jointWtm);\n\t\t\t\tconst frameB = new Ammo.btTransform();\n\n\t\t\t\tthis._convertTransform(mat, frameB);\n\n\t\t\t\tthis._constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA, bodyB, frameA, frameB, !this._enableCollision);\n\t\t\t\tAmmo.destroy(frameB);\n\t\t\t} else {\n\t\t\t\tthis._constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA, frameA, !this._enableCollision);\n\t\t\t}\n\n\t\t\tAmmo.destroy(frameA);\n\t\t\tconst axis = ['X', 'Y', 'Z', 'X', 'Y', 'Z'];\n\n\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\tconst type = i < 3 ? '_linear' : '_angular';\n\n\t\t\t\tthis._constraint.enableSpring(i, this[type + 'Spring' + axis[i]]);\n\n\t\t\t\tthis._constraint.setDamping(i, this[type + 'Damping' + axis[i]]);\n\n\t\t\t\tthis._constraint.setEquilibriumPoint(i, this[type + 'Equilibrium' + axis[i]]);\n\n\t\t\t\tthis._constraint.setStiffness(i, this[type + 'Stiffness' + axis[i]]);\n\t\t\t}\n\n\t\t\tthis._constraint.setBreakingImpulseThreshold(this._breakForce);\n\n\t\t\tthis._updateLinearLimits();\n\n\t\t\tthis._updateAngularLimits();\n\n\t\t\tconst app = this.system.app;\n\t\t\tconst dynamicsWorld = app.systems.rigidbody.dynamicsWorld;\n\t\t\tdynamicsWorld.addConstraint(this._constraint, !this._enableCollision);\n\t\t}\n\t}\n\n\t_destroyConstraint() {\n\t\tif (this._constraint) {\n\t\t\tconst app = this.system.app;\n\t\t\tconst dynamicsWorld = app.systems.rigidbody.dynamicsWorld;\n\t\t\tdynamicsWorld.removeConstraint(this._constraint);\n\t\t\tAmmo.destroy(this._constraint);\n\t\t\tthis._constraint = null;\n\t\t}\n\t}\n\n\tinitFromData(data) {\n\t\tfor (const prop of properties) {\n\t\t\tif (data.hasOwnProperty(prop)) {\n\t\t\t\tif (data[prop] instanceof Vec2) {\n\t\t\t\t\tthis['_' + prop].copy(data[prop]);\n\t\t\t\t} else {\n\t\t\t\t\tthis['_' + prop] = data[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._createConstraint();\n\t}\n\n\tonEnable() {\n\t\tthis._createConstraint();\n\t}\n\n\tonDisable() {\n\t\tthis._destroyConstraint();\n\t}\n\n\t_onSetEnabled(prop, old, value) {}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\t}\n\n}\n\nconst functionMap = {\n\tDamping: 'setDamping',\n\tEquilibrium: 'setEquilibriumPoint',\n\tSpring: 'enableSpring',\n\tStiffness: 'setStiffness'\n};\n['linear', 'angular'].forEach(type => {\n\t['Damping', 'Equilibrium', 'Spring', 'Stiffness'].forEach(name => {\n\t\t['X', 'Y', 'Z'].forEach(axis => {\n\t\t\tconst prop = type + name + axis;\n\t\t\tconst propInternal = '_' + prop;\n\t\t\tlet index = type === 'linear' ? 0 : 3;\n\t\t\tif (axis === 'Y') index += 1;\n\t\t\tif (axis === 'Z') index += 2;\n\t\t\tObject.defineProperty(JointComponent.prototype, prop, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this[propInternal];\n\t\t\t\t},\n\t\t\t\tset: function (value) {\n\t\t\t\t\tif (this[propInternal] !== value) {\n\t\t\t\t\t\tthis[propInternal] = value;\n\n\t\t\t\t\t\tthis._constraint[functionMap[name]](index, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n\nclass JointComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nvar _schema$d = ['enabled'];\n\nclass JointComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'joint';\n\t\tthis.app = app;\n\t\tthis.ComponentType = JointComponent;\n\t\tthis.DataType = JointComponentData;\n\t\tthis.schema = _schema$d;\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent.initFromData(data);\n\t}\n\n}\n\nComponent._buildAccessors(JointComponent.prototype, _schema$d);\n\nclass LayoutChildComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._minWidth = 0;\n\t\tthis._minHeight = 0;\n\t\tthis._maxWidth = null;\n\t\tthis._maxHeight = null;\n\t\tthis._fitWidthProportion = 0;\n\t\tthis._fitHeightProportion = 0;\n\t\tthis._excludeFromLayout = false;\n\t}\n\n}\n\nfunction defineResizeProperty(name) {\n\tvar _name = '_' + name;\n\n\tObject.defineProperty(LayoutChildComponent.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[_name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[_name] !== value) {\n\t\t\t\tthis[_name] = value;\n\t\t\t\tthis.fire('resize');\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineResizeProperty('minWidth');\ndefineResizeProperty('minHeight');\ndefineResizeProperty('maxWidth');\ndefineResizeProperty('maxHeight');\ndefineResizeProperty('fitWidthProportion');\ndefineResizeProperty('fitHeightProportion');\ndefineResizeProperty('excludeFromLayout');\n\nclass LayoutChildComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$c = ['enabled'];\n\nclass LayoutChildComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'layoutchild';\n\t\tthis.ComponentType = LayoutChildComponent;\n\t\tthis.DataType = LayoutChildComponentData;\n\t\tthis.schema = _schema$c;\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) component.enabled = data.enabled;\n\t\tif (data.minWidth !== undefined) component.minWidth = data.minWidth;\n\t\tif (data.minHeight !== undefined) component.minHeight = data.minHeight;\n\t\tif (data.maxWidth !== undefined) component.maxWidth = data.maxWidth;\n\t\tif (data.maxHeight !== undefined) component.maxHeight = data.maxHeight;\n\t\tif (data.fitWidthProportion !== undefined) component.fitWidthProportion = data.fitWidthProportion;\n\t\tif (data.fitHeightProportion !== undefined) component.fitHeightProportion = data.fitHeightProportion;\n\t\tif (data.excludeFromLayout !== undefined) component.excludeFromLayout = data.excludeFromLayout;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar layoutChild = entity.layoutchild;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: layoutChild.enabled,\n\t\t\tminWidth: layoutChild.minWidth,\n\t\t\tminHeight: layoutChild.minHeight,\n\t\t\tmaxWidth: layoutChild.maxWidth,\n\t\t\tmaxHeight: layoutChild.maxHeight,\n\t\t\tfitWidthProportion: layoutChild.fitWidthProportion,\n\t\t\tfitHeightProportion: layoutChild.fitHeightProportion,\n\t\t\texcludeFromLayout: layoutChild.excludeFromLayout\n\t\t});\n\t}\n\n}\n\nComponent._buildAccessors(LayoutChildComponent.prototype, _schema$c);\n\nconst FITTING_NONE = 0;\nconst FITTING_STRETCH = 1;\nconst FITTING_SHRINK = 2;\nconst FITTING_BOTH = 3;\n\nvar AXIS_MAPPINGS = {};\nAXIS_MAPPINGS[ORIENTATION_HORIZONTAL] = {\n\taxis: 'x',\n\tsize: 'width',\n\tcalculatedSize: 'calculatedWidth',\n\tminSize: 'minWidth',\n\tmaxSize: 'maxWidth',\n\tfitting: 'widthFitting',\n\tfittingProportion: 'fitWidthProportion'\n};\nAXIS_MAPPINGS[ORIENTATION_VERTICAL] = {\n\taxis: 'y',\n\tsize: 'height',\n\tcalculatedSize: 'calculatedHeight',\n\tminSize: 'minHeight',\n\tmaxSize: 'maxHeight',\n\tfitting: 'heightFitting',\n\tfittingProportion: 'fitHeightProportion'\n};\nvar OPPOSITE_ORIENTATION = {};\nOPPOSITE_ORIENTATION[ORIENTATION_HORIZONTAL] = ORIENTATION_VERTICAL;\nOPPOSITE_ORIENTATION[ORIENTATION_VERTICAL] = ORIENTATION_HORIZONTAL;\nvar PROPERTY_DEFAULTS = {\n\tminWidth: 0,\n\tminHeight: 0,\n\tmaxWidth: Number.POSITIVE_INFINITY,\n\tmaxHeight: Number.POSITIVE_INFINITY,\n\twidth: null,\n\theight: null,\n\tfitWidthProportion: 0,\n\tfitHeightProportion: 0\n};\nvar FITTING_ACTION = {\n\tNONE: 'NONE',\n\tAPPLY_STRETCHING: 'APPLY_STRETCHING',\n\tAPPLY_SHRINKING: 'APPLY_SHRINKING'\n};\nvar availableSpace = new Vec2();\n\nfunction createCalculator(orientation) {\n\tvar options;\n\tvar a = AXIS_MAPPINGS[orientation];\n\tvar b = AXIS_MAPPINGS[OPPOSITE_ORIENTATION[orientation]];\n\n\tfunction minExtentA(element, size) {\n\t\treturn -size[a.size] * element.pivot[a.axis];\n\t}\n\n\tfunction minExtentB(element, size) {\n\t\treturn -size[b.size] * element.pivot[b.axis];\n\t}\n\n\tfunction maxExtentA(element, size) {\n\t\treturn size[a.size] * (1 - element.pivot[a.axis]);\n\t}\n\n\tfunction calculateAll(allElements, layoutOptions) {\n\t\tallElements = allElements.filter(shouldIncludeInLayout);\n\t\toptions = layoutOptions;\n\t\tavailableSpace.x = options.containerSize.x - options.padding.x - options.padding.z;\n\t\tavailableSpace.y = options.containerSize.y - options.padding.y - options.padding.w;\n\t\tresetAnchors(allElements);\n\t\tvar lines = reverseLinesIfRequired(splitLines(allElements));\n\t\tvar sizes = calculateSizesOnAxisB(lines, calculateSizesOnAxisA(lines));\n\t\tvar positions = calculateBasePositions(lines, sizes);\n\t\tapplyAlignmentAndPadding(lines, sizes, positions);\n\t\tapplySizesAndPositions(lines, sizes, positions);\n\t\treturn createLayoutInfo(lines);\n\t}\n\n\tfunction shouldIncludeInLayout(element) {\n\t\tvar layoutChildComponent = element.entity.layoutchild;\n\t\treturn !layoutChildComponent || !layoutChildComponent.enabled || !layoutChildComponent.excludeFromLayout;\n\t}\n\n\tfunction resetAnchors(allElements) {\n\t\tfor (var i = 0; i < allElements.length; ++i) {\n\t\t\tvar element = allElements[i];\n\t\t\tvar anchor = element.anchor;\n\n\t\t\tif (anchor.x !== 0 || anchor.y !== 0 || anchor.z !== 0 || anchor.w !== 0) {\n\t\t\t\telement.anchor = Vec4.ZERO;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction splitLines(allElements) {\n\t\tif (!options.wrap) {\n\t\t\treturn [allElements];\n\t\t}\n\n\t\tvar lines = [[]];\n\t\tvar sizes = getElementSizeProperties(allElements);\n\t\tvar runningSize = 0;\n\t\tvar allowOverrun = options[a.fitting] === FITTING_SHRINK;\n\n\t\tfor (var i = 0; i < allElements.length; ++i) {\n\t\t\tif (lines[lines.length - 1].length > 0) {\n\t\t\t\trunningSize += options.spacing[a.axis];\n\t\t\t}\n\n\t\t\tvar idealElementSize = sizes[i][a.size];\n\t\t\trunningSize += idealElementSize;\n\n\t\t\tif (!allowOverrun && runningSize > availableSpace[a.axis] && lines[lines.length - 1].length !== 0) {\n\t\t\t\trunningSize = idealElementSize;\n\t\t\t\tlines.push([]);\n\t\t\t}\n\n\t\t\tlines[lines.length - 1].push(allElements[i]);\n\n\t\t\tif (allowOverrun && runningSize > availableSpace[a.axis] && i !== allElements.length - 1) {\n\t\t\t\trunningSize = 0;\n\t\t\t\tlines.push([]);\n\t\t\t}\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\tfunction reverseLinesIfRequired(lines) {\n\t\tvar reverseAxisA = options.orientation === ORIENTATION_HORIZONTAL && options.reverseX || options.orientation === ORIENTATION_VERTICAL && options.reverseY;\n\t\tvar reverseAxisB = options.orientation === ORIENTATION_HORIZONTAL && options.reverseY || options.orientation === ORIENTATION_VERTICAL && options.reverseX;\n\n\t\tif (reverseAxisA) {\n\t\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\t\tif (reverseAxisA) {\n\t\t\t\t\tlines[lineIndex].reverse();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (reverseAxisB) {\n\t\t\tlines.reverse();\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\tfunction calculateSizesOnAxisA(lines) {\n\t\tvar sizesAllLines = [];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = getElementSizeProperties(line);\n\t\t\tvar idealRequiredSpace = calculateTotalSpace(sizesThisLine, a);\n\t\t\tvar fittingAction = determineFittingAction(options[a.fitting], idealRequiredSpace, availableSpace[a.axis]);\n\n\t\t\tif (fittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\t\tstretchSizesToFitContainer(sizesThisLine, idealRequiredSpace, a);\n\t\t\t} else if (fittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\t\tshrinkSizesToFitContainer(sizesThisLine, idealRequiredSpace, a);\n\t\t\t}\n\n\t\t\tsizesAllLines.push(sizesThisLine);\n\t\t}\n\n\t\treturn sizesAllLines;\n\t}\n\n\tfunction calculateSizesOnAxisB(lines, sizesAllLines) {\n\t\tvar largestElementsForEachLine = [];\n\t\tvar largestSizesForEachLine = [];\n\t\tvar elementIndex;\n\t\tvar lineIndex;\n\t\tvar line;\n\n\t\tfor (lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tline = lines[lineIndex];\n\t\t\tline.largestElement = null;\n\t\t\tline.largestSize = {\n\t\t\t\twidth: Number.NEGATIVE_INFINITY,\n\t\t\t\theight: Number.NEGATIVE_INFINITY\n\t\t\t};\n\n\t\t\tfor (elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar sizesThisElement = sizesAllLines[lineIndex][elementIndex];\n\n\t\t\t\tif (sizesThisElement[b.size] > line.largestSize[b.size]) {\n\t\t\t\t\tline.largestElement = line[elementIndex];\n\t\t\t\t\tline.largestSize = sizesThisElement;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlargestElementsForEachLine.push(line.largestElement);\n\t\t\tlargestSizesForEachLine.push(line.largestSize);\n\t\t}\n\n\t\tvar idealRequiredSpace = calculateTotalSpace(largestSizesForEachLine, b);\n\t\tvar fittingAction = determineFittingAction(options[b.fitting], idealRequiredSpace, availableSpace[b.axis]);\n\n\t\tif (fittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\tstretchSizesToFitContainer(largestSizesForEachLine, idealRequiredSpace, b);\n\t\t} else if (fittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\tshrinkSizesToFitContainer(largestSizesForEachLine, idealRequiredSpace, b);\n\t\t}\n\n\t\tfor (lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tline = lines[lineIndex];\n\n\t\t\tfor (elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar sizesForThisElement = sizesAllLines[lineIndex][elementIndex];\n\t\t\t\tvar currentSize = sizesForThisElement[b.size];\n\t\t\t\tvar availableSize = lines.length === 1 ? availableSpace[b.axis] : line.largestSize[b.size];\n\t\t\t\tvar elementFittingAction = determineFittingAction(options[b.fitting], currentSize, availableSize);\n\n\t\t\t\tif (elementFittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\t\t\tsizesForThisElement[b.size] = Math.min(availableSize, sizesForThisElement[b.maxSize]);\n\t\t\t\t} else if (elementFittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\t\t\tsizesForThisElement[b.size] = Math.max(availableSize, sizesForThisElement[b.minSize]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sizesAllLines;\n\t}\n\n\tfunction determineFittingAction(fittingMode, currentSize, availableSize) {\n\t\tswitch (fittingMode) {\n\t\t\tcase FITTING_NONE:\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_STRETCH:\n\t\t\t\tif (currentSize < availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_STRETCHING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_SHRINK:\n\t\t\t\tif (currentSize >= availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_SHRINKING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_BOTH:\n\t\t\t\tif (currentSize < availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_STRETCHING;\n\t\t\t\t} else if (currentSize >= availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_SHRINKING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unrecognized fitting mode: ' + fittingMode);\n\t\t}\n\t}\n\n\tfunction calculateTotalSpace(sizes, axis) {\n\t\tvar totalSizes = sumValues(sizes, axis.size);\n\t\tvar totalSpacing = (sizes.length - 1) * options.spacing[axis.axis];\n\t\treturn totalSizes + totalSpacing;\n\t}\n\n\tfunction stretchSizesToFitContainer(sizesThisLine, idealRequiredSpace, axis) {\n\t\tvar ascendingMaxSizeOrder = getTraversalOrder(sizesThisLine, axis.maxSize);\n\t\tvar fittingProportions = getNormalizedValues(sizesThisLine, axis.fittingProportion);\n\t\tvar fittingProportionSums = createSumArray(fittingProportions, ascendingMaxSizeOrder);\n\t\tvar remainingUndershoot = availableSpace[axis.axis] - idealRequiredSpace;\n\n\t\tfor (var i = 0; i < sizesThisLine.length; ++i) {\n\t\t\tvar index = ascendingMaxSizeOrder[i];\n\t\t\tvar targetIncrease = calculateAdjustment(index, remainingUndershoot, fittingProportions, fittingProportionSums);\n\t\t\tvar targetSize = sizesThisLine[index][axis.size] + targetIncrease;\n\t\t\tvar maxSize = sizesThisLine[index][axis.maxSize];\n\t\t\tvar actualSize = Math.min(targetSize, maxSize);\n\t\t\tsizesThisLine[index][axis.size] = actualSize;\n\t\t\tvar actualIncrease = Math.max(targetSize - actualSize, 0);\n\t\t\tvar appliedIncrease = targetIncrease - actualIncrease;\n\t\t\tremainingUndershoot -= appliedIncrease;\n\t\t}\n\t}\n\n\tfunction shrinkSizesToFitContainer(sizesThisLine, idealRequiredSpace, axis) {\n\t\tvar descendingMinSizeOrder = getTraversalOrder(sizesThisLine, axis.minSize, true);\n\t\tvar fittingProportions = getNormalizedValues(sizesThisLine, axis.fittingProportion);\n\t\tvar inverseFittingProportions = invertNormalizedValues(fittingProportions);\n\t\tvar inverseFittingProportionSums = createSumArray(inverseFittingProportions, descendingMinSizeOrder);\n\t\tvar remainingOvershoot = idealRequiredSpace - availableSpace[axis.axis];\n\n\t\tfor (var i = 0; i < sizesThisLine.length; ++i) {\n\t\t\tvar index = descendingMinSizeOrder[i];\n\t\t\tvar targetReduction = calculateAdjustment(index, remainingOvershoot, inverseFittingProportions, inverseFittingProportionSums);\n\t\t\tvar targetSize = sizesThisLine[index][axis.size] - targetReduction;\n\t\t\tvar minSize = sizesThisLine[index][axis.minSize];\n\t\t\tvar actualSize = Math.max(targetSize, minSize);\n\t\t\tsizesThisLine[index][axis.size] = actualSize;\n\t\t\tvar actualReduction = Math.max(actualSize - targetSize, 0);\n\t\t\tvar appliedReduction = targetReduction - actualReduction;\n\t\t\tremainingOvershoot -= appliedReduction;\n\t\t}\n\t}\n\n\tfunction calculateAdjustment(index, remainingAdjustment, fittingProportions, fittingProportionSums) {\n\t\tvar proportion = fittingProportions[index];\n\t\tvar sumOfRemainingProportions = fittingProportionSums[index];\n\n\t\tif (Math.abs(proportion) < 1e-5 && Math.abs(sumOfRemainingProportions) < 1e-5) {\n\t\t\treturn remainingAdjustment;\n\t\t}\n\n\t\treturn remainingAdjustment * proportion / sumOfRemainingProportions;\n\t}\n\n\tfunction calculateBasePositions(lines, sizes) {\n\t\tvar cursor = {};\n\t\tcursor[a.axis] = 0;\n\t\tcursor[b.axis] = 0;\n\t\tlines[a.size] = Number.NEGATIVE_INFINITY;\n\t\tvar positionsAllLines = [];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\n\t\t\tif (line.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar positionsThisLine = [];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar element = line[elementIndex];\n\t\t\t\tvar sizesThisElement = sizesThisLine[elementIndex];\n\t\t\t\tcursor[b.axis] -= minExtentB(element, sizesThisElement);\n\t\t\t\tcursor[a.axis] -= minExtentA(element, sizesThisElement);\n\t\t\t\tpositionsThisLine[elementIndex] = {};\n\t\t\t\tpositionsThisLine[elementIndex][a.axis] = cursor[a.axis];\n\t\t\t\tpositionsThisLine[elementIndex][b.axis] = cursor[b.axis];\n\t\t\t\tcursor[b.axis] += minExtentB(element, sizesThisElement);\n\t\t\t\tcursor[a.axis] += maxExtentA(element, sizesThisElement) + options.spacing[a.axis];\n\t\t\t}\n\n\t\t\tline[a.size] = cursor[a.axis] - options.spacing[a.axis];\n\t\t\tline[b.size] = line.largestSize[b.size];\n\t\t\tlines[a.size] = Math.max(lines[a.size], line[a.size]);\n\t\t\tcursor[a.axis] = 0;\n\t\t\tcursor[b.axis] += line[b.size] + options.spacing[b.axis];\n\t\t\tpositionsAllLines.push(positionsThisLine);\n\t\t}\n\n\t\tlines[b.size] = cursor[b.axis] - options.spacing[b.axis];\n\t\treturn positionsAllLines;\n\t}\n\n\tfunction applyAlignmentAndPadding(lines, sizes, positions) {\n\t\tvar alignmentA = options.alignment[a.axis];\n\t\tvar alignmentB = options.alignment[b.axis];\n\t\tvar paddingA = options.padding[a.axis];\n\t\tvar paddingB = options.padding[b.axis];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\t\t\tvar positionsThisLine = positions[lineIndex];\n\t\t\tvar axisAOffset = (availableSpace[a.axis] - line[a.size]) * alignmentA + paddingA;\n\t\t\tvar axisBOffset = (availableSpace[b.axis] - lines[b.size]) * alignmentB + paddingB;\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar withinLineAxisBOffset = (line[b.size] - sizesThisLine[elementIndex][b.size]) * options.alignment[b.axis];\n\t\t\t\tpositionsThisLine[elementIndex][a.axis] += axisAOffset;\n\t\t\t\tpositionsThisLine[elementIndex][b.axis] += axisBOffset + withinLineAxisBOffset;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction applySizesAndPositions(lines, sizes, positions) {\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\t\t\tvar positionsThisLine = positions[lineIndex];\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar element = line[elementIndex];\n\t\t\t\telement[a.calculatedSize] = sizesThisLine[elementIndex][a.size];\n\t\t\t\telement[b.calculatedSize] = sizesThisLine[elementIndex][b.size];\n\n\t\t\t\tif (options.orientation === ORIENTATION_HORIZONTAL) {\n\t\t\t\t\telement.entity.setLocalPosition(positionsThisLine[elementIndex][a.axis], positionsThisLine[elementIndex][b.axis], element.entity.getLocalPosition().z);\n\t\t\t\t} else {\n\t\t\t\t\telement.entity.setLocalPosition(positionsThisLine[elementIndex][b.axis], positionsThisLine[elementIndex][a.axis], element.entity.getLocalPosition().z);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction createLayoutInfo(lines) {\n\t\tvar layoutWidth = lines.width;\n\t\tvar layoutHeight = lines.height;\n\t\tvar xOffset = (availableSpace.x - layoutWidth) * options.alignment.x + options.padding.x;\n\t\tvar yOffset = (availableSpace.y - layoutHeight) * options.alignment.y + options.padding.y;\n\t\treturn {\n\t\t\tbounds: new Vec4(xOffset, yOffset, layoutWidth, layoutHeight)\n\t\t};\n\t}\n\n\tfunction getElementSizeProperties(elements) {\n\t\tvar sizeProperties = [];\n\n\t\tfor (var i = 0; i < elements.length; ++i) {\n\t\t\tvar element = elements[i];\n\t\t\tvar minWidth = Math.max(getProperty(element, 'minWidth'), 0);\n\t\t\tvar minHeight = Math.max(getProperty(element, 'minHeight'), 0);\n\t\t\tvar maxWidth = Math.max(getProperty(element, 'maxWidth'), minWidth);\n\t\t\tvar maxHeight = Math.max(getProperty(element, 'maxHeight'), minHeight);\n\t\t\tvar width = clamp(getProperty(element, 'width'), minWidth, maxWidth);\n\t\t\tvar height = clamp(getProperty(element, 'height'), minHeight, maxHeight);\n\t\t\tvar fitWidthProportion = getProperty(element, 'fitWidthProportion');\n\t\t\tvar fitHeightProportion = getProperty(element, 'fitHeightProportion');\n\t\t\tsizeProperties.push({\n\t\t\t\tminWidth: minWidth,\n\t\t\t\tminHeight: minHeight,\n\t\t\t\tmaxWidth: maxWidth,\n\t\t\t\tmaxHeight: maxHeight,\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tfitWidthProportion: fitWidthProportion,\n\t\t\t\tfitHeightProportion: fitHeightProportion\n\t\t\t});\n\t\t}\n\n\t\treturn sizeProperties;\n\t}\n\n\tfunction getProperty(element, propertyName) {\n\t\tvar layoutChildComponent = element.entity.layoutchild;\n\n\t\tif (layoutChildComponent && layoutChildComponent.enabled && layoutChildComponent[propertyName] !== undefined && layoutChildComponent[propertyName] !== null) {\n\t\t\treturn layoutChildComponent[propertyName];\n\t\t} else if (element[propertyName] !== undefined) {\n\t\t\treturn element[propertyName];\n\t\t}\n\n\t\treturn PROPERTY_DEFAULTS[propertyName];\n\t}\n\n\tfunction clamp(value, min, max) {\n\t\treturn Math.min(Math.max(value, min), max);\n\t}\n\n\tfunction sumValues(items, propertyName) {\n\t\treturn items.reduce(function (accumulator, current) {\n\t\t\treturn accumulator + current[propertyName];\n\t\t}, 0);\n\t}\n\n\tfunction getNormalizedValues(items, propertyName) {\n\t\tvar sum = sumValues(items, propertyName);\n\t\tvar normalizedValues = [];\n\t\tvar numItems = items.length;\n\t\tvar i;\n\n\t\tif (sum === 0) {\n\t\t\tfor (i = 0; i < numItems; ++i) {\n\t\t\t\tnormalizedValues.push(1 / numItems);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < numItems; ++i) {\n\t\t\t\tnormalizedValues.push(items[i][propertyName] / sum);\n\t\t\t}\n\t\t}\n\n\t\treturn normalizedValues;\n\t}\n\n\tfunction invertNormalizedValues(values) {\n\t\tif (values.length === 1) {\n\t\t\treturn [1];\n\t\t}\n\n\t\tvar invertedValues = [];\n\t\tvar numValues = values.length;\n\n\t\tfor (var i = 0; i < numValues; ++i) {\n\t\t\tinvertedValues.push((1 - values[i]) / (numValues - 1));\n\t\t}\n\n\t\treturn invertedValues;\n\t}\n\n\tfunction getTraversalOrder(items, orderBy, descending) {\n\t\titems.forEach(assignIndex);\n\t\treturn items.slice().sort(function (itemA, itemB) {\n\t\t\treturn descending ? itemB[orderBy] - itemA[orderBy] : itemA[orderBy] - itemB[orderBy];\n\t\t}).map(getIndex);\n\t}\n\n\tfunction assignIndex(item, index) {\n\t\titem.index = index;\n\t}\n\n\tfunction getIndex(item) {\n\t\treturn item.index;\n\t}\n\n\tfunction createSumArray(values, order) {\n\t\tvar sumArray = [];\n\t\tsumArray[order[values.length - 1]] = values[order[values.length - 1]];\n\n\t\tfor (var i = values.length - 2; i >= 0; --i) {\n\t\t\tsumArray[order[i]] = sumArray[order[i + 1]] + values[order[i]];\n\t\t}\n\n\t\treturn sumArray;\n\t}\n\n\treturn calculateAll;\n}\n\nvar CALCULATE_FNS = {};\nCALCULATE_FNS[ORIENTATION_HORIZONTAL] = createCalculator(ORIENTATION_HORIZONTAL);\nCALCULATE_FNS[ORIENTATION_VERTICAL] = createCalculator(ORIENTATION_VERTICAL);\n\nclass LayoutCalculator {\n\tcalculateLayout(elements, options) {\n\t\tvar calculateFn = CALCULATE_FNS[options.orientation];\n\n\t\tif (!calculateFn) {\n\t\t\tthrow new Error('Unrecognized orientation value: ' + options.orientation);\n\t\t} else {\n\t\t\treturn calculateFn(elements, options);\n\t\t}\n\t}\n\n}\n\nfunction getElement(entity) {\n\treturn entity.element;\n}\n\nfunction isEnabledAndHasEnabledElement(entity) {\n\treturn entity.enabled && entity.element && entity.element.enabled;\n}\n\nclass LayoutGroupComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._orientation = ORIENTATION_HORIZONTAL;\n\t\tthis._reverseX = false;\n\t\tthis._reverseY = true;\n\t\tthis._alignment = new Vec2(0, 1);\n\t\tthis._padding = new Vec4();\n\t\tthis._spacing = new Vec2();\n\t\tthis._widthFitting = FITTING_NONE;\n\t\tthis._heightFitting = FITTING_NONE;\n\t\tthis._wrap = false;\n\t\tthis._layoutCalculator = new LayoutCalculator();\n\n\t\tthis._listenForReflowEvents(this.entity, 'on');\n\n\t\tthis.entity.children.forEach(function (child) {\n\t\t\tthis._listenForReflowEvents(child, 'on');\n\t\t}.bind(this));\n\t\tthis.entity.on('childinsert', this._onChildInsert, this);\n\t\tthis.entity.on('childremove', this._onChildRemove, this);\n\t\tsystem.app.systems.element.on('add', this._onElementOrLayoutComponentAdd, this);\n\t\tsystem.app.systems.element.on('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t\tsystem.app.systems.layoutchild.on('add', this._onElementOrLayoutComponentAdd, this);\n\t\tsystem.app.systems.layoutchild.on('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t}\n\n\t_isSelfOrChild(entity) {\n\t\treturn entity === this.entity || this.entity.children.indexOf(entity) !== -1;\n\t}\n\n\t_listenForReflowEvents(target, onOff) {\n\t\tif (target.element) {\n\t\t\ttarget.element[onOff]('enableelement', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('disableelement', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('resize', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('set:pivot', this._scheduleReflow, this);\n\t\t}\n\n\t\tif (target.layoutchild) {\n\t\t\ttarget.layoutchild[onOff]('set_enabled', this._scheduleReflow, this);\n\t\t\ttarget.layoutchild[onOff]('resize', this._scheduleReflow, this);\n\t\t}\n\t}\n\n\t_onElementOrLayoutComponentAdd(entity) {\n\t\tif (this._isSelfOrChild(entity)) {\n\t\t\tthis._listenForReflowEvents(entity, 'on');\n\n\t\t\tthis._scheduleReflow();\n\t\t}\n\t}\n\n\t_onElementOrLayoutComponentRemove(entity) {\n\t\tif (this._isSelfOrChild(entity)) {\n\t\t\tthis._listenForReflowEvents(entity, 'off');\n\n\t\t\tthis._scheduleReflow();\n\t\t}\n\t}\n\n\t_onChildInsert(child) {\n\t\tthis._listenForReflowEvents(child, 'on');\n\n\t\tthis._scheduleReflow();\n\t}\n\n\t_onChildRemove(child) {\n\t\tthis._listenForReflowEvents(child, 'off');\n\n\t\tthis._scheduleReflow();\n\t}\n\n\t_scheduleReflow() {\n\t\tif (this.enabled && this.entity && this.entity.enabled && !this._isPerformingReflow) {\n\t\t\tthis.system.scheduleReflow(this);\n\t\t}\n\t}\n\n\treflow() {\n\t\tvar container = getElement(this.entity);\n\t\tvar elements = this.entity.children.filter(isEnabledAndHasEnabledElement).map(getElement);\n\n\t\tif (!container || elements.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar containerWidth = Math.max(container.calculatedWidth, 0);\n\t\tvar containerHeight = Math.max(container.calculatedHeight, 0);\n\t\tvar options = {\n\t\t\torientation: this._orientation,\n\t\t\treverseX: this._reverseX,\n\t\t\treverseY: this._reverseY,\n\t\t\talignment: this._alignment,\n\t\t\tpadding: this._padding,\n\t\t\tspacing: this._spacing,\n\t\t\twidthFitting: this._widthFitting,\n\t\t\theightFitting: this._heightFitting,\n\t\t\twrap: this._wrap,\n\t\t\tcontainerSize: new Vec2(containerWidth, containerHeight)\n\t\t};\n\t\tthis._isPerformingReflow = true;\n\n\t\tvar layoutInfo = this._layoutCalculator.calculateLayout(elements, options);\n\n\t\tthis._isPerformingReflow = false;\n\t\tthis.fire('reflow', layoutInfo);\n\t}\n\n\tonEnable() {\n\t\tthis._scheduleReflow();\n\t}\n\n\tonRemove() {\n\t\tthis.entity.off('childinsert', this._onChildInsert, this);\n\t\tthis.entity.off('childremove', this._onChildRemove, this);\n\n\t\tthis._listenForReflowEvents(this.entity, 'off');\n\n\t\tthis.entity.children.forEach(function (child) {\n\t\t\tthis._listenForReflowEvents(child, 'off');\n\t\t}.bind(this));\n\t\tthis.system.app.systems.element.off('add', this._onElementOrLayoutComponentAdd, this);\n\t\tthis.system.app.systems.element.off('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t\tthis.system.app.systems.layoutchild.off('add', this._onElementOrLayoutComponentAdd, this);\n\t\tthis.system.app.systems.layoutchild.off('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t}\n\n}\n\nfunction defineReflowSchedulingProperty(name) {\n\tvar _name = '_' + name;\n\n\tObject.defineProperty(LayoutGroupComponent.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[_name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[_name] !== value) {\n\t\t\t\tthis[_name] = value;\n\n\t\t\t\tthis._scheduleReflow();\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineReflowSchedulingProperty('orientation');\ndefineReflowSchedulingProperty('reverseX');\ndefineReflowSchedulingProperty('reverseY');\ndefineReflowSchedulingProperty('alignment');\ndefineReflowSchedulingProperty('padding');\ndefineReflowSchedulingProperty('spacing');\ndefineReflowSchedulingProperty('widthFitting');\ndefineReflowSchedulingProperty('heightFitting');\ndefineReflowSchedulingProperty('wrap');\n\nclass LayoutGroupComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$b = ['enabled'];\nvar MAX_ITERATIONS = 100;\n\nclass LayoutGroupComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'layoutgroup';\n\t\tthis.ComponentType = LayoutGroupComponent;\n\t\tthis.DataType = LayoutGroupComponentData;\n\t\tthis.schema = _schema$b;\n\t\tthis._reflowQueue = [];\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('postUpdate', this._onPostUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) component.enabled = data.enabled;\n\t\tif (data.orientation !== undefined) component.orientation = data.orientation;\n\t\tif (data.reverseX !== undefined) component.reverseX = data.reverseX;\n\t\tif (data.reverseY !== undefined) component.reverseY = data.reverseY;\n\n\t\tif (data.alignment !== undefined) {\n\t\t\tif (data.alignment instanceof Vec2) {\n\t\t\t\tcomponent.alignment.copy(data.alignment);\n\t\t\t} else {\n\t\t\t\tcomponent.alignment.set(data.alignment[0], data.alignment[1]);\n\t\t\t}\n\n\t\t\tcomponent.alignment = component.alignment;\n\t\t}\n\n\t\tif (data.padding !== undefined) {\n\t\t\tif (data.padding instanceof Vec4) {\n\t\t\t\tcomponent.padding.copy(data.padding);\n\t\t\t} else {\n\t\t\t\tcomponent.padding.set(data.padding[0], data.padding[1], data.padding[2], data.padding[3]);\n\t\t\t}\n\n\t\t\tcomponent.padding = component.padding;\n\t\t}\n\n\t\tif (data.spacing !== undefined) {\n\t\t\tif (data.spacing instanceof Vec2) {\n\t\t\t\tcomponent.spacing.copy(data.spacing);\n\t\t\t} else {\n\t\t\t\tcomponent.spacing.set(data.spacing[0], data.spacing[1]);\n\t\t\t}\n\n\t\t\tcomponent.spacing = component.spacing;\n\t\t}\n\n\t\tif (data.widthFitting !== undefined) component.widthFitting = data.widthFitting;\n\t\tif (data.heightFitting !== undefined) component.heightFitting = data.heightFitting;\n\t\tif (data.wrap !== undefined) component.wrap = data.wrap;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar layoutGroup = entity.layoutgroup;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: layoutGroup.enabled,\n\t\t\torientation: layoutGroup.orientation,\n\t\t\treverseX: layoutGroup.reverseX,\n\t\t\treverseY: layoutGroup.reverseY,\n\t\t\talignment: layoutGroup.alignment,\n\t\t\tpadding: layoutGroup.padding,\n\t\t\tspacing: layoutGroup.spacing,\n\t\t\twidthFitting: layoutGroup.widthFitting,\n\t\t\theightFitting: layoutGroup.heightFitting,\n\t\t\twrap: layoutGroup.wrap\n\t\t});\n\t}\n\n\tscheduleReflow(component) {\n\t\tif (this._reflowQueue.indexOf(component) === -1) {\n\t\t\tthis._reflowQueue.push(component);\n\t\t}\n\t}\n\n\t_onPostUpdate() {\n\t\tthis._processReflowQueue();\n\t}\n\n\t_processReflowQueue() {\n\t\tif (this._reflowQueue.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar iterationCount = 0;\n\n\t\twhile (this._reflowQueue.length > 0) {\n\t\t\tvar queue = this._reflowQueue.slice();\n\n\t\t\tthis._reflowQueue.length = 0;\n\t\t\tqueue.sort(function (componentA, componentB) {\n\t\t\t\treturn componentA.entity.graphDepth - componentB.entity.graphDepth;\n\t\t\t});\n\n\t\t\tfor (var i = 0; i < queue.length; ++i) {\n\t\t\t\tqueue[i].reflow();\n\t\t\t}\n\n\t\t\tif (++iterationCount >= MAX_ITERATIONS) {\n\t\t\t\tconsole.warn('Max reflow iterations limit reached, bailing.');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(LayoutGroupComponent.prototype, _schema$b);\n\nvar _lightProps = [];\nvar _lightPropsDefault = [];\n\nclass LightComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._cookieAsset = null;\n\t\tthis._cookieAssetId = null;\n\t\tthis._cookieAssetAdd = false;\n\t\tthis._cookieMatrix = null;\n\t}\n\n\taddLightToLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addLight(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveLightFromLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeLight(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addLightToLayers();\n\t\t}\n\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\n\t\tif (index >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tlayer.addLight(this);\n\t\t}\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\n\t\tif (index >= 0) {\n\t\t\tlayer.removeLight(this);\n\t\t}\n\t}\n\n\trefreshProperties() {\n\t\tvar name;\n\n\t\tfor (var i = 0; i < _lightProps.length; i++) {\n\t\t\tname = _lightProps[i];\n\t\t\tthis[name] = this[name];\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) this.onEnable();\n\t}\n\n\tupdateShadow() {\n\t\tthis.light.updateShadow();\n\t}\n\n\tonCookieAssetSet() {\n\t\tvar forceLoad = false;\n\n\t\tif (this._cookieAsset.type === 'cubemap' && !this._cookieAsset.loadFaces) {\n\t\t\tthis._cookieAsset.loadFaces = true;\n\t\t\tforceLoad = true;\n\t\t}\n\n\t\tif (!this._cookieAsset.resource || forceLoad) this.system.app.assets.load(this._cookieAsset);\n\t\tif (this._cookieAsset.resource) this.onCookieAssetLoad();\n\t}\n\n\tonCookieAssetAdd(asset) {\n\t\tif (this._cookieAssetId !== asset.id) return;\n\t\tthis._cookieAsset = asset;\n\t\tif (this.light.enabled) this.onCookieAssetSet();\n\n\t\tthis._cookieAsset.on('load', this.onCookieAssetLoad, this);\n\n\t\tthis._cookieAsset.on('remove', this.onCookieAssetRemove, this);\n\t}\n\n\tonCookieAssetLoad() {\n\t\tif (!this._cookieAsset || !this._cookieAsset.resource) return;\n\t\tthis.cookie = this._cookieAsset.resource;\n\t}\n\n\tonCookieAssetRemove() {\n\t\tif (!this._cookieAssetId) return;\n\n\t\tif (this._cookieAssetAdd) {\n\t\t\tthis.system.app.assets.off('add:' + this._cookieAssetId, this.onCookieAssetAdd, this);\n\t\t\tthis._cookieAssetAdd = false;\n\t\t}\n\n\t\tif (this._cookieAsset) {\n\t\t\tthis._cookieAsset.off('load', this.onCookieAssetLoad, this);\n\n\t\t\tthis._cookieAsset.off('remove', this.onCookieAssetRemove, this);\n\n\t\t\tthis._cookieAsset = null;\n\t\t}\n\n\t\tthis.cookie = null;\n\t}\n\n\tonEnable() {\n\t\tthis.light.enabled = true;\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addLightToLayers();\n\t\t}\n\n\t\tif (this._cookieAsset && !this.cookie) this.onCookieAssetSet();\n\t}\n\n\tonDisable() {\n\t\tthis.light.enabled = false;\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tthis.removeLightFromLayers();\n\t}\n\n\tonRemove() {\n\t\tthis.onDisable();\n\t\tthis.light.destroy();\n\t\tthis.cookieAsset = null;\n\t}\n\n}\n\nfunction _defineProperty(name, defaultValue, setFunc, skipEqualsCheck) {\n\tvar c = LightComponent.prototype;\n\n\t_lightProps.push(name);\n\n\t_lightPropsDefault.push(defaultValue);\n\n\tObject.defineProperty(c, name, {\n\t\tget: function () {\n\t\t\treturn this.data[name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar data = this.data;\n\t\t\tvar oldValue = data[name];\n\t\t\tif (!skipEqualsCheck && oldValue === value) return;\n\t\t\tdata[name] = value;\n\t\t\tif (setFunc) setFunc.call(this, value, oldValue);\n\t\t},\n\t\tconfigurable: true\n\t});\n}\n\nfunction _defineProps() {\n\t_defineProperty(\"enabled\", true, function (newValue, oldValue) {\n\t\tthis.onSetEnabled(null, oldValue, newValue);\n\t});\n\n\t_defineProperty(\"light\", null);\n\n\t_defineProperty(\"type\", 'directional', function (newValue, oldValue) {\n\t\tthis.system.changeType(this, oldValue, newValue);\n\t\tthis.refreshProperties();\n\t});\n\n\t_defineProperty(\"color\", new Color(1, 1, 1), function (newValue, oldValue) {\n\t\tthis.light.setColor(newValue);\n\t}, true);\n\n\t_defineProperty(\"intensity\", 1, function (newValue, oldValue) {\n\t\tthis.light.intensity = newValue;\n\t});\n\n\t_defineProperty(\"shape\", LIGHTSHAPE_PUNCTUAL, function (newValue, oldValue) {\n\t\tthis.light.shape = newValue;\n\t});\n\n\t_defineProperty(\"castShadows\", false, function (newValue, oldValue) {\n\t\tthis.light.castShadows = newValue;\n\t});\n\n\t_defineProperty(\"shadowDistance\", 40, function (newValue, oldValue) {\n\t\tthis.light.shadowDistance = newValue;\n\t});\n\n\t_defineProperty(\"shadowResolution\", 1024, function (newValue, oldValue) {\n\t\tthis.light.shadowResolution = newValue;\n\t});\n\n\t_defineProperty(\"shadowBias\", 0.05, function (newValue, oldValue) {\n\t\tthis.light.shadowBias = -0.01 * newValue;\n\t});\n\n\t_defineProperty(\"numCascades\", 1, function (newValue, oldValue) {\n\t\tthis.light.numCascades = math.clamp(Math.floor(newValue), 1, 4);\n\t});\n\n\t_defineProperty(\"cascadeDistribution\", 0.5, function (newValue, oldValue) {\n\t\tthis.light.cascadeDistribution = math.clamp(newValue, 0, 1);\n\t});\n\n\t_defineProperty(\"normalOffsetBias\", 0, function (newValue, oldValue) {\n\t\tthis.light.normalOffsetBias = newValue;\n\t});\n\n\t_defineProperty(\"range\", 10, function (newValue, oldValue) {\n\t\tthis.light.attenuationEnd = newValue;\n\t});\n\n\t_defineProperty(\"innerConeAngle\", 40, function (newValue, oldValue) {\n\t\tthis.light.innerConeAngle = newValue;\n\t});\n\n\t_defineProperty(\"outerConeAngle\", 45, function (newValue, oldValue) {\n\t\tthis.light.outerConeAngle = newValue;\n\t});\n\n\t_defineProperty(\"falloffMode\", LIGHTFALLOFF_LINEAR, function (newValue, oldValue) {\n\t\tthis.light.falloffMode = newValue;\n\t});\n\n\t_defineProperty(\"shadowType\", SHADOW_PCF3, function (newValue, oldValue) {\n\t\tthis.light.shadowType = newValue;\n\t});\n\n\t_defineProperty(\"vsmBlurSize\", 11, function (newValue, oldValue) {\n\t\tthis.light.vsmBlurSize = newValue;\n\t});\n\n\t_defineProperty(\"vsmBlurMode\", BLUR_GAUSSIAN, function (newValue, oldValue) {\n\t\tthis.light.vsmBlurMode = newValue;\n\t});\n\n\t_defineProperty(\"vsmBias\", 0.01 * 0.25, function (newValue, oldValue) {\n\t\tthis.light.vsmBias = newValue;\n\t});\n\n\t_defineProperty(\"cookieAsset\", null, function (newValue, oldValue) {\n\t\tif (this._cookieAssetId && (newValue instanceof Asset && newValue.id === this._cookieAssetId || newValue === this._cookieAssetId)) return;\n\t\tthis.onCookieAssetRemove();\n\t\tthis._cookieAssetId = null;\n\n\t\tif (newValue instanceof Asset) {\n\t\t\tthis.data.cookieAsset = newValue.id;\n\t\t\tthis._cookieAssetId = newValue.id;\n\t\t\tthis.onCookieAssetAdd(newValue);\n\t\t} else if (typeof newValue === 'number') {\n\t\t\tthis._cookieAssetId = newValue;\n\t\t\tvar asset = this.system.app.assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis.onCookieAssetAdd(asset);\n\t\t\t} else {\n\t\t\t\tthis._cookieAssetAdd = true;\n\t\t\t\tthis.system.app.assets.on('add:' + this._cookieAssetId, this.onCookieAssetAdd, this);\n\t\t\t}\n\t\t}\n\t});\n\n\t_defineProperty(\"cookie\", null, function (newValue, oldValue) {\n\t\tthis.light.cookie = newValue;\n\t});\n\n\t_defineProperty(\"cookieIntensity\", 1, function (newValue, oldValue) {\n\t\tthis.light.cookieIntensity = newValue;\n\t});\n\n\t_defineProperty(\"cookieFalloff\", true, function (newValue, oldValue) {\n\t\tthis.light.cookieFalloff = newValue;\n\t});\n\n\t_defineProperty(\"cookieChannel\", \"rgb\", function (newValue, oldValue) {\n\t\tthis.light.cookieChannel = newValue;\n\t});\n\n\t_defineProperty(\"cookieAngle\", 0, function (newValue, oldValue) {\n\t\tif (newValue !== 0 || this.cookieScale !== null) {\n\t\t\tif (!this._cookieMatrix) this._cookieMatrix = new Vec4();\n\t\t\tvar scx = 1;\n\t\t\tvar scy = 1;\n\n\t\t\tif (this.cookieScale) {\n\t\t\t\tscx = this.cookieScale.x;\n\t\t\t\tscy = this.cookieScale.y;\n\t\t\t}\n\n\t\t\tvar c = Math.cos(newValue * math.DEG_TO_RAD);\n\t\t\tvar s = Math.sin(newValue * math.DEG_TO_RAD);\n\n\t\t\tthis._cookieMatrix.set(c / scx, -s / scx, s / scy, c / scy);\n\n\t\t\tthis.light.cookieTransform = this._cookieMatrix;\n\t\t} else {\n\t\t\tthis.light.cookieTransform = null;\n\t\t}\n\t});\n\n\t_defineProperty(\"cookieScale\", null, function (newValue, oldValue) {\n\t\tif (newValue !== null || this.cookieAngle !== 0) {\n\t\t\tif (!this._cookieMatrix) this._cookieMatrix = new Vec4();\n\t\t\tvar scx = newValue.x;\n\t\t\tvar scy = newValue.y;\n\t\t\tvar c = Math.cos(this.cookieAngle * math.DEG_TO_RAD);\n\t\t\tvar s = Math.sin(this.cookieAngle * math.DEG_TO_RAD);\n\n\t\t\tthis._cookieMatrix.set(c / scx, -s / scx, s / scy, c / scy);\n\n\t\t\tthis.light.cookieTransform = this._cookieMatrix;\n\t\t} else {\n\t\t\tthis.light.cookieTransform = null;\n\t\t}\n\t}, true);\n\n\t_defineProperty(\"cookieOffset\", null, function (newValue, oldValue) {\n\t\tthis.light.cookieOffset = newValue;\n\t}, true);\n\n\t_defineProperty(\"shadowUpdateMode\", SHADOWUPDATE_REALTIME, function (newValue, oldValue) {\n\t\tthis.light.shadowUpdateMode = newValue;\n\t});\n\n\t_defineProperty(\"mask\", 1, function (newValue, oldValue) {\n\t\tthis.light.mask = newValue;\n\t});\n\n\t_defineProperty(\"affectDynamic\", true, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_DYNAMIC;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_DYNAMIC;\n\t\t}\n\n\t\tthis.light.layersDirty();\n\t});\n\n\t_defineProperty(\"affectLightmapped\", false, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_BAKED;\n\t\t\tif (this.bake) this.light.mask &= ~MASK_LIGHTMAP;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_BAKED;\n\t\t\tif (this.bake) this.light.mask |= MASK_LIGHTMAP;\n\t\t}\n\t});\n\n\t_defineProperty(\"bake\", false, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_LIGHTMAP;\n\t\t\tif (this.affectLightmapped) this.light.mask &= ~MASK_BAKED;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_LIGHTMAP;\n\t\t\tif (this.affectLightmapped) this.light.mask |= MASK_BAKED;\n\t\t}\n\t});\n\n\t_defineProperty(\"bakeDir\", true, function (newValue, oldValue) {\n\t\tthis.light.bakeDir = newValue;\n\t});\n\n\t_defineProperty(\"isStatic\", false, function (newValue, oldValue) {\n\t\tthis.light.isStatic = newValue;\n\t});\n\n\t_defineProperty(\"layers\", [LAYERID_WORLD], function (newValue, oldValue) {\n\t\tvar i, layer;\n\n\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(oldValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeLight(this);\n\t\t}\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tlayer.addLight(this);\n\t\t\t}\n\t\t}\n\t});\n}\n\n_defineProps();\n\nclass LightComponentData {\n\tconstructor() {\n\t\tvar _props = _lightProps;\n\t\tvar _propsDefault = _lightPropsDefault;\n\t\tvar value;\n\n\t\tfor (var i = 0; i < _props.length; i++) {\n\t\t\tvalue = _propsDefault[i];\n\n\t\t\tif (value && value.clone) {\n\t\t\t\tthis[_props[i]] = value.clone();\n\t\t\t} else {\n\t\t\t\tthis[_props[i]] = value;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nconst lightTypes = {\n\t'directional': LIGHTTYPE_DIRECTIONAL,\n\t'omni': LIGHTTYPE_OMNI,\n\t'point': LIGHTTYPE_OMNI,\n\t'spot': LIGHTTYPE_SPOT\n};\n\nclass LightComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'light';\n\t\tthis.ComponentType = LightComponent;\n\t\tthis.DataType = LightComponentData;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, _data) {\n\t\tvar properties = _lightProps;\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tvar property = properties[i];\n\t\t\tdata[property] = _data[property];\n\t\t}\n\n\t\tif (!data.type) data.type = component.data.type;\n\t\tcomponent.data.type = data.type;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tdata.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.color && Array.isArray(data.color)) data.color = new Color(data.color[0], data.color[1], data.color[2]);\n\t\tif (data.cookieOffset && data.cookieOffset instanceof Array) data.cookieOffset = new Vec2(data.cookieOffset[0], data.cookieOffset[1]);\n\t\tif (data.cookieScale && data.cookieScale instanceof Array) data.cookieScale = new Vec2(data.cookieScale[0], data.cookieScale[1]);\n\n\t\tif (data.enable) {\n\t\t\tconsole.warn(\"WARNING: enable: Property is deprecated. Set enabled property instead.\");\n\t\t\tdata.enabled = data.enable;\n\t\t}\n\n\t\tif (!data.shape) {\n\t\t\tdata.shape = LIGHTSHAPE_PUNCTUAL;\n\t\t}\n\n\t\tvar light = new Light(this.app.graphicsDevice);\n\t\tlight.type = lightTypes[data.type];\n\t\tlight._node = component.entity;\n\t\tlight._scene = this.app.scene;\n\t\tcomponent.data.light = light;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar light = entity.light;\n\t\tvar data = [];\n\t\tvar name;\n\t\tvar _props = _lightProps;\n\n\t\tfor (var i = 0; i < _props.length; i++) {\n\t\t\tname = _props[i];\n\t\t\tif (name === \"light\") continue;\n\n\t\t\tif (light[name] && light[name].clone) {\n\t\t\t\tdata[name] = light[name].clone();\n\t\t\t} else {\n\t\t\t\tdata[name] = light[name];\n\t\t\t}\n\t\t}\n\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tchangeType(component, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tcomponent.light.type = lightTypes[newValue];\n\t\t}\n\t}\n\n}\n\nclass ModelComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = 'asset';\n\t\tthis._asset = null;\n\t\tthis._model = null;\n\t\tthis._mapping = {};\n\t\tthis._castShadows = true;\n\t\tthis._receiveShadows = true;\n\t\tthis._materialAsset = null;\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._castShadowsLightmap = true;\n\t\tthis._lightmapped = false;\n\t\tthis._lightmapSizeMultiplier = 1;\n\t\tthis._isStatic = false;\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._batchGroupId = -1;\n\t\tthis._customAabb = null;\n\t\tthis._area = null;\n\t\tthis._assetOld = 0;\n\t\tthis._materialEvents = null;\n\t\tthis._dirtyModelAsset = false;\n\t\tthis._dirtyMaterialAsset = false;\n\t\tthis._clonedModel = false;\n\t\tentity.on('remove', this.onRemoveChild, this);\n\t\tentity.on('insert', this.onInsertChild, this);\n\t}\n\n\taddModelToLayers() {\n\t\tconst layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this.meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveModelFromLayers() {\n\t\tvar layer;\n\t\tvar layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.meshInstances);\n\t\t}\n\t}\n\n\tonRemoveChild() {\n\t\tif (this._model) this.removeModelFromLayers();\n\t}\n\n\tonInsertChild() {\n\t\tif (this._model && this.enabled && this.entity.enabled) this.addModelToLayers();\n\t}\n\n\tonRemove() {\n\t\tif (this.type === 'asset') {\n\t\t\tthis.asset = null;\n\t\t} else {\n\t\t\tthis.model = null;\n\t\t}\n\n\t\tthis.materialAsset = null;\n\n\t\tthis._unsetMaterialEvents();\n\n\t\tthis.entity.off('remove', this.onRemoveChild, this);\n\t\tthis.entity.off('insert', this.onInsertChild, this);\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this.meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this.meshInstances);\n\t}\n\n\t_setMaterialEvent(index, event, id, handler) {\n\t\tvar evt = event + ':' + id;\n\t\tthis.system.app.assets.on(evt, handler, this);\n\t\tif (!this._materialEvents) this._materialEvents = [];\n\t\tif (!this._materialEvents[index]) this._materialEvents[index] = {};\n\t\tthis._materialEvents[index][evt] = {\n\t\t\tid: id,\n\t\t\thandler: handler\n\t\t};\n\t}\n\n\t_unsetMaterialEvents() {\n\t\tvar assets = this.system.app.assets;\n\t\tvar events = this._materialEvents;\n\t\tif (!events) return;\n\n\t\tfor (var i = 0, len = events.length; i < len; i++) {\n\t\t\tif (!events[i]) continue;\n\t\t\tvar evt = events[i];\n\n\t\t\tfor (var key in evt) {\n\t\t\t\tassets.off(key, evt[key].handler, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._materialEvents = null;\n\t}\n\n\t_getAssetByIdOrPath(idOrPath) {\n\t\tvar asset = null;\n\t\tvar isPath = isNaN(parseInt(idOrPath, 10));\n\n\t\tif (!isPath) {\n\t\t\tasset = this.system.app.assets.get(idOrPath);\n\t\t} else if (this.asset) {\n\t\t\tvar url = this._getMaterialAssetUrl(idOrPath);\n\n\t\t\tif (url) asset = this.system.app.assets.getByUrl(url);\n\t\t}\n\n\t\treturn asset;\n\t}\n\n\t_getMaterialAssetUrl(path) {\n\t\tif (!this.asset) return null;\n\t\tvar modelAsset = this.system.app.assets.get(this.asset);\n\t\treturn modelAsset ? modelAsset.getAbsoluteUrl(path) : null;\n\t}\n\n\t_loadAndSetMeshInstanceMaterial(materialAsset, meshInstance, index) {\n\t\tvar assets = this.system.app.assets;\n\t\tif (!materialAsset) return;\n\n\t\tif (materialAsset.resource) {\n\t\t\tmeshInstance.material = materialAsset.resource;\n\n\t\t\tthis._setMaterialEvent(index, 'remove', materialAsset.id, function () {\n\t\t\t\tmeshInstance.material = this.system.defaultMaterial;\n\t\t\t});\n\t\t} else {\n\t\t\tthis._setMaterialEvent(index, 'load', materialAsset.id, function (asset) {\n\t\t\t\tmeshInstance.material = asset.resource;\n\n\t\t\t\tthis._setMaterialEvent(index, 'remove', materialAsset.id, function () {\n\t\t\t\t\tmeshInstance.material = this.system.defaultMaterial;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (this.enabled && this.entity.enabled) assets.load(materialAsset);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tvar isAsset = this._type === 'asset';\n\t\tvar asset;\n\n\t\tif (this._model) {\n\t\t\tthis.addModelToLayers();\n\t\t} else if (isAsset && this._asset) {\n\t\t\tasset = app.assets.get(this._asset);\n\n\t\t\tif (asset && asset.resource !== this._model) {\n\t\t\t\tthis._bindModelAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._materialAsset) {\n\t\t\tasset = app.assets.get(this._materialAsset);\n\n\t\t\tif (asset && asset.resource !== this._material) {\n\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (isAsset) {\n\t\t\tif (this._mapping) {\n\t\t\t\tfor (var index in this._mapping) {\n\t\t\t\t\tif (this._mapping[index]) {\n\t\t\t\t\t\tasset = this._getAssetByIdOrPath(this._mapping[index]);\n\n\t\t\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\t\t\tapp.assets.load(asset);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tthis.removeModelFromLayers();\n\t\t}\n\t}\n\n\thide() {\n\t\tif (this._model) {\n\t\t\tvar i, l;\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tshow() {\n\t\tif (this._model) {\n\t\t\tvar i, l;\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].visible = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_bindMaterialAsset(asset) {\n\t\tasset.on('load', this._onMaterialAssetLoad, this);\n\t\tasset.on('unload', this._onMaterialAssetUnload, this);\n\t\tasset.on('remove', this._onMaterialAssetRemove, this);\n\t\tasset.on('change', this._onMaterialAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMaterialAsset(asset) {\n\t\tasset.off('load', this._onMaterialAssetLoad, this);\n\t\tasset.off('unload', this._onMaterialAssetUnload, this);\n\t\tasset.off('remove', this._onMaterialAssetRemove, this);\n\t\tasset.off('change', this._onMaterialAssetChange, this);\n\t}\n\n\t_onMaterialAssetAdd(asset) {\n\t\tthis.system.app.assets.off('add:' + asset.id, this._onMaterialAssetAdd, this);\n\n\t\tif (this._materialAsset === asset.id) {\n\t\t\tthis._bindMaterialAsset(asset);\n\t\t}\n\t}\n\n\t_onMaterialAssetLoad(asset) {\n\t\tthis._setMaterial(asset.resource);\n\t}\n\n\t_onMaterialAssetUnload(asset) {\n\t\tthis._setMaterial(this.system.defaultMaterial);\n\t}\n\n\t_onMaterialAssetRemove(asset) {\n\t\tthis._onMaterialAssetUnload(asset);\n\t}\n\n\t_onMaterialAssetChange(asset) {}\n\n\t_bindModelAsset(asset) {\n\t\tthis._unbindModelAsset(asset);\n\n\t\tasset.on('load', this._onModelAssetLoad, this);\n\t\tasset.on('unload', this._onModelAssetUnload, this);\n\t\tasset.on('change', this._onModelAssetChange, this);\n\t\tasset.on('remove', this._onModelAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onModelAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindModelAsset(asset) {\n\t\tasset.off('load', this._onModelAssetLoad, this);\n\t\tasset.off('unload', this._onModelAssetUnload, this);\n\t\tasset.off('change', this._onModelAssetChange, this);\n\t\tasset.off('remove', this._onModelAssetRemove, this);\n\t}\n\n\t_onModelAssetAdded(asset) {\n\t\tthis.system.app.assets.off('add:' + asset.id, this._onModelAssetAdded, this);\n\n\t\tif (asset.id === this._asset) {\n\t\t\tthis._bindModelAsset(asset);\n\t\t}\n\t}\n\n\t_onModelAssetLoad(asset) {\n\t\tthis.model = asset.resource.clone();\n\t\tthis._clonedModel = true;\n\t}\n\n\t_onModelAssetUnload(asset) {\n\t\tthis.model = null;\n\t}\n\n\t_onModelAssetChange(asset, attr, _new, _old) {\n\t\tif (attr === 'data') {\n\t\t\tthis.mapping = this._mapping;\n\t\t}\n\t}\n\n\t_onModelAssetRemove(asset) {\n\t\tthis.model = null;\n\t}\n\n\t_setMaterial(material) {\n\t\tif (this._material === material) return;\n\t\tthis._material = material;\n\t\tvar model = this._model;\n\n\t\tif (model && this._type !== 'asset') {\n\t\t\tvar meshInstances = model.meshInstances;\n\n\t\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\t\tmeshInstances[i].material = material;\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshInstances() {\n\t\tif (!this._model) return null;\n\t\treturn this._model.meshInstances;\n\t}\n\n\tset meshInstances(value) {\n\t\tif (!this._model) return;\n\t\tthis._model.meshInstances = value;\n\t}\n\n\tget customAabb() {\n\t\treturn this._customAabb;\n\t}\n\n\tset customAabb(value) {\n\t\tthis._customAabb = value;\n\n\t\tif (this._model) {\n\t\t\tvar mi = this._model.meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._area = null;\n\t\tthis._type = value;\n\n\t\tif (value === 'asset') {\n\t\t\tif (this._asset !== null) {\n\t\t\t\tthis._bindModelAsset(this._asset);\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t}\n\t\t} else {\n\t\t\tvar primData = getShapePrimitive(this.system.app.graphicsDevice, value);\n\t\t\tthis._area = primData.area;\n\t\t\tvar mesh = primData.mesh;\n\t\t\tvar node = new GraphNode();\n\t\t\tvar model = new Model();\n\t\t\tmodel.graph = node;\n\t\t\tmodel.meshInstances = [new MeshInstance(mesh, this._material, node)];\n\t\t\tthis.model = model;\n\t\t\tthis._asset = null;\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._asset;\n\t}\n\n\tset asset(value) {\n\t\tvar assets = this.system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._asset !== _id) {\n\t\t\tif (this._asset) {\n\t\t\t\tassets.off('add:' + this._asset, this._onModelAssetAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._asset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindModelAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._asset = _id;\n\n\t\t\tif (this._asset) {\n\t\t\t\tvar asset = assets.get(this._asset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.model = null;\n\t\t\t\t\tassets.on('add:' + this._asset, this._onModelAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindModelAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget model() {\n\t\treturn this._model;\n\t}\n\n\tset model(value) {\n\t\tvar i;\n\t\tif (this._model === value) return;\n\n\t\tif (value && value._immutable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tthis._model._immutable = false;\n\t\t\tthis.removeModelFromLayers();\n\t\t\tthis.entity.removeChild(this._model.getGraph());\n\t\t\tdelete this._model._entity;\n\n\t\t\tif (this._clonedModel) {\n\t\t\t\tthis._model.destroy();\n\n\t\t\t\tthis._clonedModel = false;\n\t\t\t}\n\t\t}\n\n\t\tthis._model = value;\n\n\t\tif (this._model) {\n\t\t\tthis._model._immutable = true;\n\t\t\tvar meshInstances = this._model.meshInstances;\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].castShadow = this._castShadows;\n\t\t\t\tmeshInstances[i].receiveShadow = this._receiveShadows;\n\t\t\t\tmeshInstances[i].isStatic = this._isStatic;\n\t\t\t\tmeshInstances[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\n\t\t\tthis.lightmapped = this._lightmapped;\n\t\t\tthis.entity.addChild(this._model.graph);\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addModelToLayers();\n\t\t\t}\n\n\t\t\tthis._model._entity = this.entity;\n\t\t\tif (this.entity.animation) this.entity.animation.setModel(this._model);\n\n\t\t\tif (this.entity.anim) {\n\t\t\t\tif (this.entity.anim.playing) {\n\t\t\t\t\tthis.entity.anim.rebind();\n\t\t\t\t} else {\n\t\t\t\t\tthis.entity.anim.resetStateGraph();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.type === 'asset') {\n\t\t\t\tthis.mapping = this._mapping;\n\t\t\t} else {\n\t\t\t\tthis._unsetMaterialEvents();\n\t\t\t}\n\t\t}\n\t}\n\n\tget lightmapped() {\n\t\treturn this._lightmapped;\n\t}\n\n\tset lightmapped(value) {\n\t\tif (value !== this._lightmapped) {\n\t\t\tthis._lightmapped = value;\n\n\t\t\tif (this._model) {\n\t\t\t\tvar mi = this._model.meshInstances;\n\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setLightmapped(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows === value) return;\n\t\tvar layer;\n\t\tvar i;\n\t\tvar model = this._model;\n\n\t\tif (model) {\n\t\t\tvar layers = this.layers;\n\t\t\tvar scene = this.system.app.scene;\n\n\t\t\tif (this._castShadows && !value) {\n\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\t\t\tif (!layer) continue;\n\t\t\t\t\tlayer.removeShadowCasters(model.meshInstances);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar meshInstances = model.meshInstances;\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].castShadow = value;\n\t\t\t}\n\n\t\t\tif (!this._castShadows && value) {\n\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\tlayer = scene.layers.getLayerById(layers[i]);\n\t\t\t\t\tif (!layer) continue;\n\t\t\t\t\tlayer.addShadowCasters(model.meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._castShadows = value;\n\t}\n\n\tget receiveShadows() {\n\t\treturn this._receiveShadows;\n\t}\n\n\tset receiveShadows(value) {\n\t\tif (this._receiveShadows === value) return;\n\t\tthis._receiveShadows = value;\n\n\t\tif (this._model) {\n\t\t\tvar meshInstances = this._model.meshInstances;\n\n\t\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\t\tmeshInstances[i].receiveShadow = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadowsLightmap() {\n\t\treturn this._castShadowsLightmap;\n\t}\n\n\tset castShadowsLightmap(value) {\n\t\tthis._castShadowsLightmap = value;\n\t}\n\n\tget lightmapSizeMultiplier() {\n\t\treturn this._lightmapSizeMultiplier;\n\t}\n\n\tset lightmapSizeMultiplier(value) {\n\t\tthis._lightmapSizeMultiplier = value;\n\t}\n\n\tget isStatic() {\n\t\treturn this._isStatic;\n\t}\n\n\tset isStatic(value) {\n\t\tif (this._isStatic === value) return;\n\t\tthis._isStatic = value;\n\t\tvar i, m;\n\n\t\tif (this._model) {\n\t\t\tvar rcv = this._model.meshInstances;\n\n\t\t\tfor (i = 0; i < rcv.length; i++) {\n\t\t\t\tm = rcv[i];\n\t\t\t\tm.isStatic = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tvar i, layer;\n\t\tvar layers = this.system.app.scene.layers;\n\n\t\tif (this.meshInstances) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\t\tif (!layer) continue;\n\t\t\t\tlayer.removeMeshInstances(this.meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._layers.length = 0;\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tthis._layers[i] = value[i];\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled || !this.meshInstances) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.meshInstances);\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId === value) return;\n\t\tvar batcher = this.system.app.batcher;\n\n\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\tbatcher.remove(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tbatcher.insert(BatchGroup.MODEL, value, this.entity);\n\t\t}\n\n\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tthis.addModelToLayers();\n\t\t}\n\n\t\tthis._batchGroupId = value;\n\t}\n\n\tget materialAsset() {\n\t\treturn this._materialAsset;\n\t}\n\n\tset materialAsset(value) {\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (_id !== this._materialAsset) {\n\t\t\tif (this._materialAsset) {\n\t\t\t\tassets.off('add:' + this._materialAsset, this._onMaterialAssetAdd, this);\n\n\t\t\t\tvar _prev = assets.get(this._materialAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindMaterialAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._materialAsset = _id;\n\n\t\t\tif (this._materialAsset) {\n\t\t\t\tvar asset = assets.get(this._materialAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis._setMaterial(this.system.defaultMaterial);\n\n\t\t\t\t\tassets.on('add:' + this._materialAsset, this._onMaterialAssetAdd, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._setMaterial(this.system.defaultMaterial);\n\t\t\t}\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material === value) return;\n\t\tthis.materialAsset = null;\n\n\t\tthis._setMaterial(value);\n\t}\n\n\tget mapping() {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping(value) {\n\t\tif (this._type !== 'asset') return;\n\n\t\tthis._unsetMaterialEvents();\n\n\t\tif (!value) value = {};\n\t\tthis._mapping = value;\n\t\tif (!this._model) return;\n\t\tvar meshInstances = this._model.meshInstances;\n\t\tvar modelAsset = this.asset ? this.system.app.assets.get(this.asset) : null;\n\t\tvar assetMapping = modelAsset ? modelAsset.data.mapping : null;\n\t\tvar asset = null;\n\n\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\tif (value[i] !== undefined) {\n\t\t\t\tif (value[i]) {\n\t\t\t\t\tasset = this.system.app.assets.get(value[i]);\n\n\t\t\t\t\tthis._loadAndSetMeshInstanceMaterial(asset, meshInstances[i], i);\n\t\t\t\t} else {\n\t\t\t\t\tmeshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t} else if (assetMapping) {\n\t\t\t\tif (assetMapping[i] && (assetMapping[i].material || assetMapping[i].path)) {\n\t\t\t\t\tif (assetMapping[i].material !== undefined) {\n\t\t\t\t\t\tasset = this.system.app.assets.get(assetMapping[i].material);\n\t\t\t\t\t} else if (assetMapping[i].path !== undefined) {\n\t\t\t\t\t\tvar url = this._getMaterialAssetUrl(assetMapping[i].path);\n\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\tasset = this.system.app.assets.getByUrl(url);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loadAndSetMeshInstanceMaterial(asset, meshInstances[i], i);\n\t\t\t\t} else {\n\t\t\t\t\tmeshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ModelComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$a = ['enabled'];\n\nclass ModelComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'model';\n\t\tthis.ComponentType = ModelComponent;\n\t\tthis.DataType = ModelComponentData;\n\t\tthis.schema = _schema$a;\n\t\tthis.defaultMaterial = app.scene.defaultMaterial;\n\t\tthis.on('beforeremove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tproperties = ['material', 'materialAsset', 'asset', 'castShadows', 'receiveShadows', 'castShadowsLightmap', 'lightmapped', 'lightmapSizeMultiplier', 'type', 'mapping', 'layers', 'isStatic', 'batchGroupId'];\n\n\t\tif (_data.batchGroupId === null || _data.batchGroupId === undefined) {\n\t\t\t_data.batchGroupId = -1;\n\t\t}\n\n\t\tif (_data.layers && _data.layers.length) {\n\t\t\t_data.layers = _data.layers.slice(0);\n\t\t}\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tif (_data.hasOwnProperty(properties[i])) {\n\t\t\t\tcomponent[properties[i]] = _data[properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tif (_data.aabbCenter && _data.aabbHalfExtents) {\n\t\t\tcomponent.customAabb = new BoundingBox(new Vec3(_data.aabbCenter), new Vec3(_data.aabbHalfExtents));\n\t\t}\n\n\t\tsuper.initializeComponentData(component, _data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\ttype: entity.model.type,\n\t\t\tasset: entity.model.asset,\n\t\t\tcastShadows: entity.model.castShadows,\n\t\t\treceiveShadows: entity.model.receiveShadows,\n\t\t\tcastShadowsLightmap: entity.model.castShadowsLightmap,\n\t\t\tlightmapped: entity.model.lightmapped,\n\t\t\tlightmapSizeMultiplier: entity.model.lightmapSizeMultiplier,\n\t\t\tisStatic: entity.model.isStatic,\n\t\t\tenabled: entity.model.enabled,\n\t\t\tlayers: entity.model.layers,\n\t\t\tbatchGroupId: entity.model.batchGroupId,\n\t\t\tmapping: extend({}, entity.model.mapping)\n\t\t};\n\t\tvar materialAsset = entity.model.materialAsset;\n\n\t\tif (!(materialAsset instanceof Asset) && materialAsset != null) {\n\t\t\tmaterialAsset = this.app.assets.get(materialAsset);\n\t\t}\n\n\t\tvar material = entity.model.material;\n\n\t\tif (!material || material === this.defaultMaterial || !materialAsset || material === materialAsset.resource) {\n\t\t\tdata.materialAsset = materialAsset;\n\t\t}\n\n\t\tvar component = this.addComponent(clone, data);\n\n\t\tif (entity.model.model && entity.model.type === 'asset' && !entity.model.asset) {\n\t\t\tcomponent.model = entity.model.model.clone();\n\t\t\tcomponent._clonedModel = true;\n\t\t}\n\n\t\tif (!data.materialAsset) component.material = material;\n\n\t\tif (entity.model.model) {\n\t\t\tvar meshInstances = entity.model.model.meshInstances;\n\t\t\tvar meshInstancesClone = component.model.meshInstances;\n\n\t\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstancesClone[i].mask = meshInstances[i].mask;\n\t\t\t\tmeshInstancesClone[i].material = meshInstances[i].material;\n\t\t\t\tmeshInstancesClone[i].layer = meshInstances[i].layer;\n\t\t\t\tmeshInstancesClone[i].receiveShadow = meshInstances[i].receiveShadow;\n\t\t\t}\n\t\t}\n\n\t\tif (entity.model.customAabb) {\n\t\t\tcomponent.customAabb = entity.model.aabb.clone();\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ModelComponent.prototype, _schema$a);\n\nclass RenderComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = 'asset';\n\t\tthis._castShadows = true;\n\t\tthis._receiveShadows = true;\n\t\tthis._castShadowsLightmap = true;\n\t\tthis._lightmapped = false;\n\t\tthis._lightmapSizeMultiplier = 1;\n\t\tthis._isStatic = false;\n\t\tthis._batchGroupId = -1;\n\t\tthis._meshInstances = [];\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._renderStyle = RENDERSTYLE_SOLID;\n\t\tthis._customAabb = null;\n\t\tthis._area = null;\n\t\tthis._rootBone = new EntityReference(this, 'rootBone');\n\n\t\tthis._rootBone.on('set:entity', this._onSetRootBone, this);\n\n\t\tthis._assetReference = new AssetReference('asset', this, system.app.assets, {\n\t\t\tadd: this._onRenderAssetAdded,\n\t\t\tload: this._onRenderAssetLoad,\n\t\t\tremove: this._onRenderAssetRemove,\n\t\t\tunload: this._onRenderAssetUnload\n\t\t}, this);\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._materialReferences = [];\n\t\tentity.on('remove', this.onRemoveChild, this);\n\t\tentity.on('insert', this.onInsertChild, this);\n\t}\n\n\t_onSetRootBone(entity) {\n\t\tif (entity) {\n\t\t\tthis._onRootBoneChanged();\n\t\t}\n\t}\n\n\t_onRootBoneChanged() {\n\t\tthis._clearSkinInstances();\n\n\t\tthis._cloneSkinInstances();\n\t}\n\n\tdestroyMeshInstances() {\n\t\tvar meshInstances = this._meshInstances;\n\n\t\tif (meshInstances) {\n\t\t\tthis.removeFromLayers();\n\n\t\t\tthis._clearSkinInstances();\n\n\t\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].destroy();\n\t\t\t}\n\n\t\t\tthis._meshInstances.length = 0;\n\t\t}\n\t}\n\n\taddToLayers() {\n\t\tconst layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this._meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFromLayers() {\n\t\tif (this._meshInstances && this._meshInstances.length) {\n\t\t\tvar layer,\n\t\t\t\t\tlayers = this.system.app.scene.layers;\n\n\t\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.removeMeshInstances(this._meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonRemoveChild() {\n\t\tthis.removeFromLayers();\n\t}\n\n\tonInsertChild() {\n\t\tif (this._meshInstances && this.enabled && this.entity.enabled) {\n\t\t\tthis.addToLayers();\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tthis.destroyMeshInstances();\n\t\tthis.asset = null;\n\t\tthis.materialAsset = null;\n\t\tthis.entity.off('remove', this.onRemoveChild, this);\n\t\tthis.entity.off('insert', this.onInsertChild, this);\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this._meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this._meshInstances);\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\n\t\tthis._rootBone.onParentComponentEnable();\n\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tvar isAsset = this._type === 'asset';\n\n\t\tif (this._meshInstances && this._meshInstances.length) {\n\t\t\tthis.addToLayers();\n\t\t} else if (isAsset && this.asset) {\n\t\t\tthis._onRenderAssetAdded();\n\t\t}\n\n\t\tfor (var i = 0; i < this._materialReferences.length; i++) {\n\t\t\tif (this._materialReferences[i].asset) {\n\t\t\t\tthis.system.app.assets.load(this._materialReferences[i].asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.removeFromLayers();\n\t}\n\n\thide() {\n\t\tif (this._meshInstances) {\n\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tthis._meshInstances[i].visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tshow() {\n\t\tif (this._meshInstances) {\n\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tthis._meshInstances[i].visible = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRenderAssetAdded() {\n\t\tif (!this._assetReference.asset) return;\n\n\t\tif (this._assetReference.asset.resource) {\n\t\t\tthis._onRenderAssetLoad();\n\t\t} else if (this.enabled && this.entity.enabled) {\n\t\t\tthis.system.app.assets.load(this._assetReference.asset);\n\t\t}\n\t}\n\n\t_onRenderAssetLoad() {\n\t\tthis.destroyMeshInstances();\n\n\t\tif (this._assetReference.asset) {\n\t\t\tvar render = this._assetReference.asset.resource;\n\t\t\trender.off('set:meshes', this._onSetMeshes, this);\n\t\t\trender.on('set:meshes', this._onSetMeshes, this);\n\n\t\t\tif (render.meshes) {\n\t\t\t\tthis._onSetMeshes(render.meshes);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSetMeshes(meshes) {\n\t\tthis._cloneMeshes(meshes);\n\t}\n\n\t_clearSkinInstances() {\n\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\tconst meshInstance = this._meshInstances[i];\n\t\t\tSkinInstanceCache.removeCachedSkinInstance(meshInstance.skinInstance);\n\t\t\tmeshInstance.skinInstance = null;\n\t\t}\n\t}\n\n\t_cloneSkinInstances() {\n\t\tif (this._meshInstances.length && this._rootBone.entity instanceof GraphNode) {\n\t\t\tfor (let i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tconst meshInstance = this._meshInstances[i];\n\t\t\t\tconst mesh = meshInstance.mesh;\n\n\t\t\t\tif (mesh.skin && !mesh.skinInstance) {\n\t\t\t\t\tmeshInstance.skinInstance = SkinInstanceCache.createCachedSkinedInstance(mesh.skin, this._rootBone.entity, this.entity);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_cloneMeshes(meshes) {\n\t\tif (meshes && meshes.length) {\n\t\t\tvar meshInstances = [];\n\n\t\t\tfor (var i = 0; i < meshes.length; i++) {\n\t\t\t\tvar mesh = meshes[i];\n\t\t\t\tvar material = this._materialReferences[i] && this._materialReferences[i].asset && this._materialReferences[i].asset.resource;\n\t\t\t\tvar meshInst = new MeshInstance(mesh, material || this.system.defaultMaterial, this.entity);\n\t\t\t\tmeshInstances.push(meshInst);\n\n\t\t\t\tif (mesh.morph) {\n\t\t\t\t\tmeshInst.morphInstance = new MorphInstance(mesh.morph);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.meshInstances = meshInstances;\n\n\t\t\tthis._cloneSkinInstances();\n\t\t}\n\t}\n\n\t_onRenderAssetUnload() {\n\t\tif (this._type === 'asset') {\n\t\t\tthis.destroyMeshInstances();\n\t\t}\n\t}\n\n\t_onRenderAssetRemove() {\n\t\tif (this._assetReference.asset && this._assetReference.asset.resource) {\n\t\t\tthis._assetReference.asset.resource.off('set:meshes', this._onSetMeshes, this);\n\t\t}\n\n\t\tthis._onRenderAssetUnload();\n\t}\n\n\t_onMaterialAdded(index, component, asset) {\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialLoad(index, component, asset);\n\t\t} else {\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onMaterialLoad(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = asset.resource;\n\t\t}\n\t}\n\n\t_onMaterialRemove(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = this.system.defaultMaterial;\n\t\t}\n\t}\n\n\t_onMaterialUnload(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = this.system.defaultMaterial;\n\t\t}\n\t}\n\n\tget renderStyle() {\n\t\treturn this._renderStyle;\n\t}\n\n\tset renderStyle(renderStyle) {\n\t\tif (this._renderStyle !== renderStyle) {\n\t\t\tthis._renderStyle = renderStyle;\n\n\t\t\tMeshInstance._prepareRenderStyleForArray(this._meshInstances, renderStyle);\n\t\t}\n\t}\n\n\tget customAabb() {\n\t\treturn this._customAabb;\n\t}\n\n\tset customAabb(value) {\n\t\tthis._customAabb = value;\n\t\tvar mi = this._meshInstances;\n\n\t\tif (mi) {\n\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type !== value) {\n\t\t\tthis._area = null;\n\t\t\tthis._type = value;\n\t\t\tthis.destroyMeshInstances();\n\n\t\t\tif (value !== 'asset') {\n\t\t\t\tvar material = this._material;\n\n\t\t\t\tif (!material || material === this.system.defaultMaterial) {\n\t\t\t\t\tmaterial = this._materialReferences[0] && this._materialReferences[0].asset && this._materialReferences[0].asset.resource;\n\t\t\t\t}\n\n\t\t\t\tvar primData = getShapePrimitive(this.system.app.graphicsDevice, value);\n\t\t\t\tthis._area = primData.area;\n\t\t\t\tthis.meshInstances = [new MeshInstance(primData.mesh, material || this.system.defaultMaterial, this.entity)];\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshInstances() {\n\t\treturn this._meshInstances;\n\t}\n\n\tset meshInstances(value) {\n\t\tthis.destroyMeshInstances();\n\t\tthis._meshInstances = value;\n\n\t\tif (this._meshInstances) {\n\t\t\tconst mi = this._meshInstances;\n\n\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\tif (!mi[i].node) {\n\t\t\t\t\tmi[i].node = this.entity;\n\t\t\t\t}\n\n\t\t\t\tmi[i].castShadow = this._castShadows;\n\t\t\t\tmi[i].receiveShadow = this._receiveShadows;\n\t\t\t\tmi[i].isStatic = this._isStatic;\n\t\t\t\tmi[i].renderStyle = this._renderStyle;\n\t\t\t\tmi[i].setLightmapped(this._lightmapped);\n\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addToLayers();\n\t\t\t}\n\t\t}\n\t}\n\n\tget lightmapped() {\n\t\treturn this._lightmapped;\n\t}\n\n\tset lightmapped(value) {\n\t\tif (value !== this._lightmapped) {\n\t\t\tthis._lightmapped = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setLightmapped(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows !== value) {\n\t\t\tvar i,\n\t\t\t\t\tlayer,\n\t\t\t\t\tmi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tvar layers = this.layers;\n\t\t\t\tvar scene = this.system.app.scene;\n\n\t\t\t\tif (this._castShadows && !value) {\n\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\tlayer = scene.layers.getLayerById(this.layers[i]);\n\n\t\t\t\t\t\tif (layer) {\n\t\t\t\t\t\t\tlayer.removeShadowCasters(mi);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].castShadow = value;\n\t\t\t\t}\n\n\t\t\t\tif (!this._castShadows && value) {\n\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\tlayer = scene.layers.getLayerById(layers[i]);\n\n\t\t\t\t\t\tif (layer) {\n\t\t\t\t\t\t\tlayer.addShadowCasters(mi);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._castShadows = value;\n\t\t}\n\t}\n\n\tget receiveShadows() {\n\t\treturn this._receiveShadows;\n\t}\n\n\tset receiveShadows(value) {\n\t\tif (this._receiveShadows !== value) {\n\t\t\tthis._receiveShadows = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].receiveShadow = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadowsLightmap() {\n\t\treturn this._castShadowsLightmap;\n\t}\n\n\tset castShadowsLightmap(value) {\n\t\tthis._castShadowsLightmap = value;\n\t}\n\n\tget lightmapSizeMultiplier() {\n\t\treturn this._lightmapSizeMultiplier;\n\t}\n\n\tset lightmapSizeMultiplier(value) {\n\t\tthis._lightmapSizeMultiplier = value;\n\t}\n\n\tget isStatic() {\n\t\treturn this._isStatic;\n\t}\n\n\tset isStatic(value) {\n\t\tif (this._isStatic !== value) {\n\t\t\tthis._isStatic = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].isStatic = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tvar i,\n\t\t\t\tlayer,\n\t\t\t\tlayers = this.system.app.scene.layers;\n\n\t\tif (this._meshInstances) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.removeMeshInstances(this._meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._layers.length = 0;\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tthis._layers[i] = value[i];\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled || !this._meshInstances) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this._meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId !== value) {\n\t\t\tvar batcher = this.system.app.batcher;\n\n\t\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\t\tbatcher.remove(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t\t}\n\n\t\t\tif (this.entity.enabled && value >= 0) {\n\t\t\t\tbatcher.insert(BatchGroup.RENDER, value, this.entity);\n\t\t\t}\n\n\t\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addToLayers();\n\t\t\t}\n\n\t\t\tthis._batchGroupId = value;\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material !== value) {\n\t\t\tthis._material = value;\n\n\t\t\tif (this._meshInstances && this._type !== 'asset') {\n\t\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\t\tthis._meshInstances[i].material = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget materialAssets() {\n\t\treturn this._materialReferences.map(function (ref) {\n\t\t\treturn ref.id;\n\t\t});\n\t}\n\n\tset materialAssets(value) {\n\t\tvar i;\n\t\tvalue = value || [];\n\n\t\tif (this._materialReferences.length > value.length) {\n\t\t\tfor (i = value.length; i < this._materialReferences.length; i++) {\n\t\t\t\tthis._materialReferences[i].id = null;\n\t\t\t}\n\n\t\t\tthis._materialReferences.length = value.length;\n\t\t}\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tif (!this._materialReferences[i]) {\n\t\t\t\tthis._materialReferences.push(new AssetReference(i, this, this.system.app.assets, {\n\t\t\t\t\tadd: this._onMaterialAdded,\n\t\t\t\t\tload: this._onMaterialLoad,\n\t\t\t\t\tremove: this._onMaterialRemove,\n\t\t\t\t\tunload: this._onMaterialUnload\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tif (value[i]) {\n\t\t\t\tvar id = value[i] instanceof Asset ? value[i].id : value[i];\n\n\t\t\t\tif (this._materialReferences[i].id !== id) {\n\t\t\t\t\tthis._materialReferences[i].id = id;\n\t\t\t\t}\n\n\t\t\t\tif (this._materialReferences[i].asset) {\n\t\t\t\t\tthis._onMaterialAdded(i, this, this._materialReferences[i].asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._materialReferences[i].id = null;\n\n\t\t\t\tif (this._meshInstances[i]) {\n\t\t\t\t\tthis._meshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._assetReference.id;\n\t}\n\n\tset asset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\t\tif (this._assetReference.id === id) return;\n\n\t\tif (this._assetReference.asset && this._assetReference.asset.resource) {\n\t\t\tthis._onRenderAssetRemove();\n\t\t}\n\n\t\tthis._assetReference.id = id;\n\n\t\tif (this._assetReference.asset) {\n\t\t\tthis._onRenderAssetAdded();\n\t\t}\n\t}\n\n}\n\nclass RenderComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.rootBone = null;\n\t}\n\n}\n\nconst _schema$9 = [{\n\tname: 'rootBone',\n\ttype: 'entity'\n}, 'enabled'];\nconst _properties = ['material', 'meshInstances', 'asset', 'materialAssets', 'castShadows', 'receiveShadows', 'castShadowsLightmap', 'lightmapped', 'lightmapSizeMultiplier', 'renderStyle', 'type', 'layers', 'isStatic', 'batchGroupId'];\n\nclass RenderComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'render';\n\t\tthis.ComponentType = RenderComponent;\n\t\tthis.DataType = RenderComponentData;\n\t\tthis.schema = _schema$9;\n\t\tthis.defaultMaterial = app.scene.defaultMaterial;\n\t\tthis.on('beforeremove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tif (_data.batchGroupId === null || _data.batchGroupId === undefined) {\n\t\t\t_data.batchGroupId = -1;\n\t\t}\n\n\t\tif (_data.layers && _data.layers.length) {\n\t\t\t_data.layers = _data.layers.slice(0);\n\t\t}\n\n\t\tfor (var i = 0; i < _properties.length; i++) {\n\t\t\tif (_data.hasOwnProperty(_properties[i])) {\n\t\t\t\tcomponent[_properties[i]] = _data[_properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tif (_data.aabbCenter && _data.aabbHalfExtents) {\n\t\t\tcomponent.customAabb = new BoundingBox(new Vec3(_data.aabbCenter), new Vec3(_data.aabbHalfExtents));\n\t\t}\n\n\t\tsuper.initializeComponentData(component, _data, _schema$9);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tconst data = {};\n\n\t\tfor (let i = 0; i < _properties.length; i++) {\n\t\t\tdata[_properties[i]] = entity.render[_properties[i]];\n\t\t}\n\n\t\tdelete data.meshInstances;\n\t\tconst component = this.addComponent(clone, data);\n\t\tconst srcMeshInstances = entity.render.meshInstances;\n\t\tconst meshes = srcMeshInstances.map(mi => mi.mesh);\n\n\t\tcomponent._onSetMeshes(meshes);\n\n\t\tfor (let m = 0; m < srcMeshInstances.length; m++) {\n\t\t\tcomponent.meshInstances[m].material = srcMeshInstances[m].material;\n\t\t}\n\n\t\tif (entity.render.customAabb) {\n\t\t\tcomponent.customAabb = entity.render.customAabb.clone();\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(RenderComponent.prototype, _schema$9);\n\nconst SIMPLE_PROPERTIES = ['emitterExtents', 'emitterRadius', 'emitterExtentsInner', 'emitterRadiusInner', 'loop', 'initialVelocity', 'animSpeed', 'normalMap', 'particleNormal'];\nconst COMPLEX_PROPERTIES = ['numParticles', 'lifetime', 'rate', 'rate2', 'startAngle', 'startAngle2', 'lighting', 'halfLambert', 'intensity', 'wrap', 'wrapBounds', 'depthWrite', 'noFog', 'sort', 'stretch', 'alignToMotion', 'preWarm', 'emitterShape', 'animTilesX', 'animTilesY', 'animStartFrame', 'animNumFrames', 'animNumAnimations', 'animIndex', 'randomizeAnimIndex', 'animLoop', 'colorMap', 'localSpace', 'screenSpace', 'orientation'];\nconst GRAPH_PROPERTIES = ['scaleGraph', 'scaleGraph2', 'colorGraph', 'colorGraph2', 'alphaGraph', 'alphaGraph2', 'velocityGraph', 'velocityGraph2', 'localVelocityGraph', 'localVelocityGraph2', 'rotationSpeedGraph', 'rotationSpeedGraph2', 'radialSpeedGraph', 'radialSpeedGraph2'];\nconst ASSET_PROPERTIES = ['colorMapAsset', 'normalMapAsset', 'meshAsset', 'renderAsset'];\nvar depthLayer;\n\nclass ParticleSystemComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_colorMapAsset\", this.onSetColorMapAsset, this);\n\t\tthis.on(\"set_normalMapAsset\", this.onSetNormalMapAsset, this);\n\t\tthis.on(\"set_meshAsset\", this.onSetMeshAsset, this);\n\t\tthis.on(\"set_mesh\", this.onSetMesh, this);\n\t\tthis.on(\"set_renderAsset\", this.onSetRenderAsset, this);\n\t\tthis.on(\"set_loop\", this.onSetLoop, this);\n\t\tthis.on(\"set_blendType\", this.onSetBlendType, this);\n\t\tthis.on(\"set_depthSoftening\", this.onSetDepthSoftening, this);\n\t\tthis.on(\"set_layers\", this.onSetLayers, this);\n\t\tSIMPLE_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetSimpleProperty, this);\n\t\t}.bind(this));\n\t\tCOMPLEX_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetComplexProperty, this);\n\t\t}.bind(this));\n\t\tGRAPH_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetGraphProperty, this);\n\t\t}.bind(this));\n\t\tthis._requestedDepth = false;\n\t\tthis._drawOrder = 0;\n\t}\n\n\tget drawOrder() {\n\t\treturn this._drawOrder;\n\t}\n\n\tset drawOrder(drawOrder) {\n\t\tthis._drawOrder = drawOrder;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.drawOrder = drawOrder;\n\t\t}\n\t}\n\n\taddModelToLayers() {\n\t\tif (!this.data.model) return;\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t\t\tthis.emitter._layer = layer;\n\t\t}\n\t}\n\n\tremoveModelFromLayers(model) {\n\t\tif (!this.data.model) return;\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t\t}\n\t}\n\n\tonSetLayers(name, oldValue, newValue) {\n\t\tif (!this.data.model) return;\n\t\tvar i, layer;\n\n\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(oldValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled) return;\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tif (!this.data.model) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tif (!this.data.model) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t}\n\n\t_bindColorMapAsset(asset) {\n\t\tasset.on('load', this._onColorMapAssetLoad, this);\n\t\tasset.on('unload', this._onColorMapAssetUnload, this);\n\t\tasset.on('remove', this._onColorMapAssetRemove, this);\n\t\tasset.on('change', this._onColorMapAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onColorMapAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindColorMapAsset(asset) {\n\t\tasset.off('load', this._onColorMapAssetLoad, this);\n\t\tasset.off('unload', this._onColorMapAssetUnload, this);\n\t\tasset.off('remove', this._onColorMapAssetRemove, this);\n\t\tasset.off('change', this._onColorMapAssetChange, this);\n\t}\n\n\t_onColorMapAssetLoad(asset) {\n\t\tthis.colorMap = asset.resource;\n\t}\n\n\t_onColorMapAssetUnload(asset) {\n\t\tthis.colorMap = null;\n\t}\n\n\t_onColorMapAssetRemove(asset) {\n\t\tthis._onColorMapAssetUnload(asset);\n\t}\n\n\t_onColorMapAssetChange(asset) {}\n\n\tonSetColorMapAsset(name, oldValue, newValue) {\n\t\tvar self = this;\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindColorMapAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.colorMapAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tself._bindColorMapAsset(asset);\n\t\t\t} else {\n\t\t\t\tassets.once(\"add:\" + newValue, function (asset) {\n\t\t\t\t\tself._bindColorMapAsset(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.colorMap = null;\n\t\t}\n\t}\n\n\t_bindNormalMapAsset(asset) {\n\t\tasset.on('load', this._onNormalMapAssetLoad, this);\n\t\tasset.on('unload', this._onNormalMapAssetUnload, this);\n\t\tasset.on('remove', this._onNormalMapAssetRemove, this);\n\t\tasset.on('change', this._onNormalMapAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onNormalMapAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindNormalMapAsset(asset) {\n\t\tasset.off('load', this._onNormalMapAssetLoad, this);\n\t\tasset.off('unload', this._onNormalMapAssetUnload, this);\n\t\tasset.off('remove', this._onNormalMapAssetRemove, this);\n\t\tasset.off('change', this._onNormalMapAssetChange, this);\n\t}\n\n\t_onNormalMapAssetLoad(asset) {\n\t\tthis.normalMap = asset.resource;\n\t}\n\n\t_onNormalMapAssetUnload(asset) {\n\t\tthis.normalMap = null;\n\t}\n\n\t_onNormalMapAssetRemove(asset) {\n\t\tthis._onNormalMapAssetUnload(asset);\n\t}\n\n\t_onNormalMapAssetChange(asset) {}\n\n\tonSetNormalMapAsset(name, oldValue, newValue) {\n\t\tvar self = this;\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindNormalMapAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.normalMapAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tself._bindNormalMapAsset(asset);\n\t\t\t} else {\n\t\t\t\tassets.once(\"add:\" + newValue, function (asset) {\n\t\t\t\t\tself._bindNormalMapAsset(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.normalMap = null;\n\t\t}\n\t}\n\n\t_bindMeshAsset(asset) {\n\t\tasset.on('load', this._onMeshAssetLoad, this);\n\t\tasset.on('unload', this._onMeshAssetUnload, this);\n\t\tasset.on('remove', this._onMeshAssetRemove, this);\n\t\tasset.on('change', this._onMeshAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMeshAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMeshAsset(asset) {\n\t\tasset.off('load', this._onMeshAssetLoad, this);\n\t\tasset.off('unload', this._onMeshAssetUnload, this);\n\t\tasset.off('remove', this._onMeshAssetRemove, this);\n\t\tasset.off('change', this._onMeshAssetChange, this);\n\t}\n\n\t_onMeshAssetLoad(asset) {\n\t\tthis._onMeshChanged(asset.resource);\n\t}\n\n\t_onMeshAssetUnload(asset) {\n\t\tthis.mesh = null;\n\t}\n\n\t_onMeshAssetRemove(asset) {\n\t\tthis._onMeshAssetUnload(asset);\n\t}\n\n\t_onMeshAssetChange(asset) {}\n\n\tonSetMeshAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindMeshAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.meshAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._bindMeshAsset(asset);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._onMeshChanged(null);\n\t\t}\n\t}\n\n\tonSetMesh(name, oldValue, newValue) {\n\t\tif (!newValue || newValue instanceof Asset || typeof newValue === 'number') {\n\t\t\tthis.meshAsset = newValue;\n\t\t} else {\n\t\t\tthis._onMeshChanged(newValue);\n\t\t}\n\t}\n\n\t_onMeshChanged(mesh) {\n\t\tif (mesh && !(mesh instanceof Mesh)) {\n\t\t\tif (mesh.meshInstances[0]) {\n\t\t\t\tmesh = mesh.meshInstances[0].mesh;\n\t\t\t} else {\n\t\t\t\tmesh = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.data.mesh = mesh;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.mesh = mesh;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tonSetRenderAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindRenderAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.renderAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._bindRenderAsset(asset);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._onRenderChanged(null);\n\t\t}\n\t}\n\n\t_bindRenderAsset(asset) {\n\t\tasset.on('load', this._onRenderAssetLoad, this);\n\t\tasset.on('unload', this._onRenderAssetUnload, this);\n\t\tasset.on('remove', this._onRenderAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onRenderAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindRenderAsset(asset) {\n\t\tasset.off('load', this._onRenderAssetLoad, this);\n\t\tasset.off('unload', this._onRenderAssetUnload, this);\n\t\tasset.off('remove', this._onRenderAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tasset.resource.off('set:meshes', this._onRenderSetMeshes, this);\n\t\t}\n\t}\n\n\t_onRenderAssetLoad(asset) {\n\t\tthis._onRenderChanged(asset.resource);\n\t}\n\n\t_onRenderAssetUnload(asset) {\n\t\tthis._onRenderChanged(null);\n\t}\n\n\t_onRenderAssetRemove(asset) {\n\t\tthis._onRenderAssetUnload(asset);\n\t}\n\n\t_onRenderChanged(render) {\n\t\tif (!render) {\n\t\t\tthis._onMeshChanged(null);\n\n\t\t\treturn;\n\t\t}\n\n\t\trender.off('set:meshes', this._onRenderSetMeshes, this);\n\t\trender.on('set:meshes', this._onRenderSetMeshes, this);\n\n\t\tif (render.meshes) {\n\t\t\tthis._onRenderSetMeshes(render.meshes);\n\t\t}\n\t}\n\n\t_onRenderSetMeshes(meshes) {\n\t\tthis._onMeshChanged(meshes && meshes[0]);\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetTime();\n\t\t}\n\t}\n\n\tonSetBlendType(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.material.blendType = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\t_requestDepth() {\n\t\tif (this._requestedDepth) return;\n\t\tif (!depthLayer) depthLayer = this.system.app.scene.layers.getLayerById(LAYERID_DEPTH);\n\n\t\tif (depthLayer) {\n\t\t\tdepthLayer.incrementCounter();\n\t\t\tthis._requestedDepth = true;\n\t\t}\n\t}\n\n\t_releaseDepth() {\n\t\tif (!this._requestedDepth) return;\n\n\t\tif (depthLayer) {\n\t\t\tdepthLayer.decrementCounter();\n\t\t\tthis._requestedDepth = false;\n\t\t}\n\t}\n\n\tonSetDepthSoftening(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (newValue) {\n\t\t\t\tif (this.enabled && this.entity.enabled) this._requestDepth();\n\t\t\t\tif (this.emitter) this.emitter[name] = newValue;\n\t\t\t} else {\n\t\t\t\tif (this.enabled && this.entity.enabled) this._releaseDepth();\n\t\t\t\tif (this.emitter) this.emitter[name] = newValue;\n\t\t\t}\n\n\t\t\tif (this.emitter) {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.emitter.resetMaterial();\n\t\t\t\tthis.rebuild();\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetSimpleProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t}\n\t}\n\n\tonSetComplexProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\tonSetGraphProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.rebuildGraphs();\n\t\t\tthis.emitter.resetMaterial();\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar data = this.data;\n\n\t\tfor (var i = 0, len = ASSET_PROPERTIES.length; i < len; i++) {\n\t\t\tvar asset = data[ASSET_PROPERTIES[i]];\n\n\t\t\tif (asset) {\n\t\t\t\tif (!(asset instanceof Asset)) {\n\t\t\t\t\tvar id = parseInt(asset, 10);\n\n\t\t\t\t\tif (id >= 0) {\n\t\t\t\t\t\tasset = this.system.app.assets.get(asset);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.emitter) {\n\t\t\tvar mesh = data.mesh;\n\t\t\tif (!(mesh instanceof Mesh)) mesh = null;\n\t\t\tthis.emitter = new ParticleEmitter(this.system.app.graphicsDevice, {\n\t\t\t\tnumParticles: data.numParticles,\n\t\t\t\temitterExtents: data.emitterExtents,\n\t\t\t\temitterExtentsInner: data.emitterExtentsInner,\n\t\t\t\temitterRadius: data.emitterRadius,\n\t\t\t\temitterRadiusInner: data.emitterRadiusInner,\n\t\t\t\temitterShape: data.emitterShape,\n\t\t\t\tinitialVelocity: data.initialVelocity,\n\t\t\t\twrap: data.wrap,\n\t\t\t\tlocalSpace: data.localSpace,\n\t\t\t\tscreenSpace: data.screenSpace,\n\t\t\t\twrapBounds: data.wrapBounds,\n\t\t\t\tlifetime: data.lifetime,\n\t\t\t\trate: data.rate,\n\t\t\t\trate2: data.rate2,\n\t\t\t\torientation: data.orientation,\n\t\t\t\tparticleNormal: data.particleNormal,\n\t\t\t\tanimTilesX: data.animTilesX,\n\t\t\t\tanimTilesY: data.animTilesY,\n\t\t\t\tanimStartFrame: data.animStartFrame,\n\t\t\t\tanimNumFrames: data.animNumFrames,\n\t\t\t\tanimNumAnimations: data.animNumAnimations,\n\t\t\t\tanimIndex: data.animIndex,\n\t\t\t\trandomizeAnimIndex: data.randomizeAnimIndex,\n\t\t\t\tanimSpeed: data.animSpeed,\n\t\t\t\tanimLoop: data.animLoop,\n\t\t\t\tstartAngle: data.startAngle,\n\t\t\t\tstartAngle2: data.startAngle2,\n\t\t\t\tscaleGraph: data.scaleGraph,\n\t\t\t\tscaleGraph2: data.scaleGraph2,\n\t\t\t\tcolorGraph: data.colorGraph,\n\t\t\t\tcolorGraph2: data.colorGraph2,\n\t\t\t\talphaGraph: data.alphaGraph,\n\t\t\t\talphaGraph2: data.alphaGraph2,\n\t\t\t\tlocalVelocityGraph: data.localVelocityGraph,\n\t\t\t\tlocalVelocityGraph2: data.localVelocityGraph2,\n\t\t\t\tvelocityGraph: data.velocityGraph,\n\t\t\t\tvelocityGraph2: data.velocityGraph2,\n\t\t\t\trotationSpeedGraph: data.rotationSpeedGraph,\n\t\t\t\trotationSpeedGraph2: data.rotationSpeedGraph2,\n\t\t\t\tradialSpeedGraph: data.radialSpeedGraph,\n\t\t\t\tradialSpeedGraph2: data.radialSpeedGraph2,\n\t\t\t\tcolorMap: data.colorMap,\n\t\t\t\tnormalMap: data.normalMap,\n\t\t\t\tloop: data.loop,\n\t\t\t\tpreWarm: data.preWarm,\n\t\t\t\tsort: data.sort,\n\t\t\t\tstretch: data.stretch,\n\t\t\t\talignToMotion: data.alignToMotion,\n\t\t\t\tlighting: data.lighting,\n\t\t\t\thalfLambert: data.halfLambert,\n\t\t\t\tintensity: data.intensity,\n\t\t\t\tdepthSoftening: data.depthSoftening,\n\t\t\t\tscene: this.system.app.scene,\n\t\t\t\tmesh: mesh,\n\t\t\t\tdepthWrite: data.depthWrite,\n\t\t\t\tnoFog: data.noFog,\n\t\t\t\tnode: this.entity,\n\t\t\t\tblendType: data.blendType\n\t\t\t});\n\t\t\tthis.emitter.meshInstance.node = this.entity;\n\t\t\tthis.emitter.drawOrder = this.drawOrder;\n\t\t\tthis.psys = new Model();\n\t\t\tthis.psys.graph = this.entity;\n\t\t\tthis.psys.emitter = this.emitter;\n\t\t\tthis.psys.meshInstances = [this.emitter.meshInstance];\n\t\t\tdata.model = this.psys;\n\t\t\tthis.emitter.psys = this.psys;\n\n\t\t\tif (!data.autoPlay) {\n\t\t\t\tthis.pause();\n\t\t\t\tthis.emitter.meshInstance.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tif (data.model && this.emitter.colorMap) {\n\t\t\tthis.addModelToLayers();\n\t\t}\n\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled && data.depthSoftening) {\n\t\t\tthis._requestDepth();\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.data.model) {\n\t\t\tthis.removeModelFromLayers();\n\t\t\tif (this.data.depthSoftening) this._releaseDepth();\n\t\t}\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.camera = null;\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tif (this.enabled) {\n\t\t\tthis.enabled = false;\n\t\t}\n\n\t\tvar data = this.data;\n\n\t\tif (data.model) {\n\t\t\tthis.entity.removeChild(data.model.getGraph());\n\t\t\tdata.model.destroy();\n\t\t\tdata.model = null;\n\t\t}\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.destroy();\n\t\t\tthis.emitter = null;\n\t\t}\n\n\t\tfor (var i = 0; i < ASSET_PROPERTIES.length; i++) {\n\t\t\tvar prop = ASSET_PROPERTIES[i];\n\n\t\t\tif (data[prop]) {\n\t\t\t\tthis[prop] = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.off();\n\t}\n\n\treset() {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.reset();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.loop = false;\n\t\t\tthis.emitter.resetTime();\n\t\t\tthis.emitter.addTime(0, true);\n\t\t}\n\t}\n\n\tpause() {\n\t\tthis.data.paused = true;\n\t}\n\n\tunpause() {\n\t\tthis.data.paused = false;\n\t}\n\n\tplay() {\n\t\tthis.data.paused = false;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.meshInstance.visible = true;\n\t\t\tthis.emitter.loop = this.data.loop;\n\t\t\tthis.emitter.resetTime();\n\t\t}\n\t}\n\n\tisPlaying() {\n\t\tif (this.data.paused) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.emitter && this.emitter.loop) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn Date.now() <= this.emitter.endTime;\n\t}\n\n\trebuild() {\n\t\tvar enabled = this.enabled;\n\t\tthis.enabled = false;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.rebuild();\n\t\t\tthis.emitter.meshInstance.node = this.entity;\n\t\t\tthis.data.model.meshInstances = [this.emitter.meshInstance];\n\t\t}\n\n\t\tthis.enabled = enabled;\n\t}\n\n}\n\nclass ParticleSystemComponentData {\n\tconstructor() {\n\t\tthis.numParticles = 1;\n\t\tthis.rate = 1;\n\t\tthis.rate2 = null;\n\t\tthis.startAngle = 0;\n\t\tthis.startAngle2 = null;\n\t\tthis.lifetime = 50;\n\t\tthis.emitterExtents = new Vec3();\n\t\tthis.emitterExtentsInner = new Vec3();\n\t\tthis.emitterRadius = 0;\n\t\tthis.emitterRadiusInner = 0;\n\t\tthis.emitterShape = EMITTERSHAPE_BOX;\n\t\tthis.initialVelocity = 0;\n\t\tthis.wrapBounds = new Vec3();\n\t\tthis.localSpace = false;\n\t\tthis.screenSpace = false;\n\t\tthis.colorMap = null;\n\t\tthis.colorMapAsset = null;\n\t\tthis.normalMap = null;\n\t\tthis.normalMapAsset = null;\n\t\tthis.loop = true;\n\t\tthis.preWarm = false;\n\t\tthis.sort = 0;\n\t\tthis.mode = PARTICLEMODE_GPU;\n\t\tthis.scene = null;\n\t\tthis.lighting = false;\n\t\tthis.halfLambert = false;\n\t\tthis.intensity = 1;\n\t\tthis.stretch = 0.0;\n\t\tthis.alignToMotion = false;\n\t\tthis.depthSoftening = 0;\n\t\tthis.meshAsset = null;\n\t\tthis.mesh = null;\n\t\tthis.depthWrite = false;\n\t\tthis.noFog = false;\n\t\tthis.orientation = PARTICLEORIENTATION_SCREEN;\n\t\tthis.particleNormal = new Vec3(0, 1, 0);\n\t\tthis.animTilesX = 1;\n\t\tthis.animTilesY = 1;\n\t\tthis.animStartFrame = 0;\n\t\tthis.animNumFrames = 1;\n\t\tthis.animNumAnimations = 1;\n\t\tthis.animIndex = 0;\n\t\tthis.randomizeAnimIndex = false;\n\t\tthis.animSpeed = 1;\n\t\tthis.animLoop = true;\n\t\tthis.scaleGraph = null;\n\t\tthis.scaleGraph2 = null;\n\t\tthis.colorGraph = null;\n\t\tthis.colorGraph2 = null;\n\t\tthis.alphaGraph = null;\n\t\tthis.alphaGraph2 = null;\n\t\tthis.localVelocityGraph = null;\n\t\tthis.localVelocityGraph2 = null;\n\t\tthis.velocityGraph = null;\n\t\tthis.velocityGraph2 = null;\n\t\tthis.rotationSpeedGraph = null;\n\t\tthis.rotationSpeedGraph2 = null;\n\t\tthis.radialSpeedGraph = null;\n\t\tthis.radialSpeedGraph2 = null;\n\t\tthis.blendType = BLEND_NORMAL;\n\t\tthis.model = null;\n\t\tthis.enabled = true;\n\t\tthis.paused = false;\n\t\tthis.autoPlay = true;\n\t\tthis.layers = [LAYERID_WORLD];\n\t}\n\n}\n\nconst _schema$8 = ['enabled', 'autoPlay', 'numParticles', 'lifetime', 'rate', 'rate2', 'startAngle', 'startAngle2', 'loop', 'preWarm', 'lighting', 'halfLambert', 'intensity', 'depthWrite', 'noFog', 'depthSoftening', 'sort', 'blendType', 'stretch', 'alignToMotion', 'emitterShape', 'emitterExtents', 'emitterExtentsInner', 'emitterRadius', 'emitterRadiusInner', 'initialVelocity', 'wrap', 'wrapBounds', 'localSpace', 'screenSpace', 'colorMapAsset', 'normalMapAsset', 'mesh', 'meshAsset', 'renderAsset', 'orientation', 'particleNormal', 'localVelocityGraph', 'localVelocityGraph2', 'velocityGraph', 'velocityGraph2', 'rotationSpeedGraph', 'rotationSpeedGraph2', 'radialSpeedGraph', 'radialSpeedGraph2', 'scaleGraph', 'scaleGraph2', 'colorGraph', 'colorGraph2', 'alphaGraph', 'alphaGraph2', 'colorMap', 'normalMap', 'animTilesX', 'animTilesY', 'animStartFrame', 'animNumFrames', 'animNumAnimations', 'animIndex', 'randomizeAnimIndex', 'animSpeed', 'animLoop', 'layers'];\n\nclass ParticleSystemComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'particlesystem';\n\t\tthis.ComponentType = ParticleSystemComponent;\n\t\tthis.DataType = ParticleSystemComponentData;\n\t\tthis.schema = _schema$8;\n\t\tthis.propertyTypes = {\n\t\t\temitterExtents: 'vec3',\n\t\t\temitterExtentsInner: 'vec3',\n\t\t\tparticleNormal: 'vec3',\n\t\t\twrapBounds: 'vec3',\n\t\t\tlocalVelocityGraph: 'curveset',\n\t\t\tlocalVelocityGraph2: 'curveset',\n\t\t\tvelocityGraph: 'curveset',\n\t\t\tvelocityGraph2: 'curveset',\n\t\t\tcolorGraph: 'curveset',\n\t\t\tcolorGraph2: 'curveset',\n\t\t\talphaGraph: 'curve',\n\t\t\talphaGraph2: 'curve',\n\t\t\trotationSpeedGraph: 'curve',\n\t\t\trotationSpeedGraph2: 'curve',\n\t\t\tradialSpeedGraph: 'curve',\n\t\t\tradialSpeedGraph2: 'curve',\n\t\t\tscaleGraph: 'curve',\n\t\t\tscaleGraph2: 'curve'\n\t\t};\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tvar data = {};\n\t\tproperties = [];\n\t\tvar types = this.propertyTypes;\n\t\tvar t;\n\n\t\tif (_data.mesh instanceof Asset || typeof _data.mesh === 'number') {\n\t\t\t_data.meshAsset = _data.mesh;\n\t\t\tdelete _data.mesh;\n\t\t}\n\n\t\tfor (var prop in _data) {\n\t\t\tif (_data.hasOwnProperty(prop)) {\n\t\t\t\tproperties.push(prop);\n\t\t\t\tdata[prop] = _data[prop];\n\t\t\t}\n\n\t\t\tif (types[prop] === 'vec3') {\n\t\t\t\tif (Array.isArray(data[prop])) {\n\t\t\t\t\tdata[prop] = new Vec3(data[prop][0], data[prop][1], data[prop][2]);\n\t\t\t\t}\n\t\t\t} else if (types[prop] === 'curve') {\n\t\t\t\tif (!(data[prop] instanceof Curve)) {\n\t\t\t\t\tt = data[prop].type;\n\t\t\t\t\tdata[prop] = new Curve(data[prop].keys);\n\t\t\t\t\tdata[prop].type = t;\n\t\t\t\t}\n\t\t\t} else if (types[prop] === 'curveset') {\n\t\t\t\tif (!(data[prop] instanceof CurveSet)) {\n\t\t\t\t\tt = data[prop].type;\n\t\t\t\t\tdata[prop] = new CurveSet(data[prop].keys);\n\t\t\t\t\tdata[prop].type = t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\t\tdata.layers = data.layers.slice(0);\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.particlesystem.data;\n\t\tvar schema = this.schema;\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = schema.length; i < len; i++) {\n\t\t\tvar prop = schema[i];\n\t\t\tvar sourceProp = source[prop];\n\n\t\t\tif (sourceProp instanceof Vec3 || sourceProp instanceof Curve || sourceProp instanceof CurveSet) {\n\t\t\t\tsourceProp = sourceProp.clone();\n\t\t\t\tdata[prop] = sourceProp;\n\t\t\t} else if (prop === \"layers\") {\n\t\t\t\tdata.layers = source.layers.slice(0);\n\t\t\t} else {\n\t\t\t\tif (sourceProp !== null && sourceProp !== undefined) {\n\t\t\t\t\tdata[prop] = sourceProp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\t\tvar numSteps, i, j, c;\n\t\tvar stats = this.app.stats.particles;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tc = components[id];\n\t\t\t\tvar entity = c.entity;\n\t\t\t\tvar data = c.data;\n\n\t\t\t\tif (data.enabled && entity.enabled) {\n\t\t\t\t\tvar emitter = data.model.emitter;\n\t\t\t\t\tif (!emitter.meshInstance.visible) continue;\n\n\t\t\t\t\tif (emitter.lighting) {\n\t\t\t\t\t\tvar layer, lightCube;\n\t\t\t\t\t\tvar layers = data.layers;\n\n\t\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\t\tlayer = this.app.scene.layers.getLayerById(layers[i]);\n\t\t\t\t\t\t\tif (!layer) continue;\n\n\t\t\t\t\t\t\tif (!layer._lightCube) {\n\t\t\t\t\t\t\t\tlayer._lightCube = new Float32Array(6 * 3);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlightCube = layer._lightCube;\n\n\t\t\t\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\t\t\t\tlightCube[i * 3] = this.app.scene.ambientLight.r;\n\t\t\t\t\t\t\t\tlightCube[i * 3 + 1] = this.app.scene.ambientLight.g;\n\t\t\t\t\t\t\t\tlightCube[i * 3 + 2] = this.app.scene.ambientLight.b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar dirs = layer._splitLights[LIGHTTYPE_DIRECTIONAL];\n\n\t\t\t\t\t\t\tfor (j = 0; j < dirs.length; j++) {\n\t\t\t\t\t\t\t\tfor (c = 0; c < 6; c++) {\n\t\t\t\t\t\t\t\t\tvar weight = Math.max(emitter.lightCubeDir[c].dot(dirs[j]._direction), 0) * dirs[j]._intensity;\n\n\t\t\t\t\t\t\t\t\tlightCube[c * 3] += dirs[j]._color.r * weight;\n\t\t\t\t\t\t\t\t\tlightCube[c * 3 + 1] += dirs[j]._color.g * weight;\n\t\t\t\t\t\t\t\t\tlightCube[c * 3 + 2] += dirs[j]._color.b * weight;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temitter.constantLightCube.setValue(lightCube);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!data.paused) {\n\t\t\t\t\t\temitter.simTime += dt;\n\n\t\t\t\t\t\tif (emitter.simTime > emitter.fixedTimeStep) {\n\t\t\t\t\t\t\tnumSteps = Math.floor(emitter.simTime / emitter.fixedTimeStep);\n\t\t\t\t\t\t\temitter.simTime -= numSteps * emitter.fixedTimeStep;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (numSteps) {\n\t\t\t\t\t\t\tnumSteps = Math.min(numSteps, emitter.maxSubSteps);\n\n\t\t\t\t\t\t\tfor (i = 0; i < numSteps; i++) {\n\t\t\t\t\t\t\t\temitter.addTime(emitter.fixedTimeStep, false);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstats._updatesPerFrame += numSteps;\n\t\t\t\t\t\t\tstats._frameTime += emitter._addTimeTime;\n\t\t\t\t\t\t\temitter._addTimeTime = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temitter.finishFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ParticleSystemComponent.prototype, _schema$8);\n\nclass ObjectPool {\n\tconstructor(constructorFunc, size) {\n\t\tthis._constructor = constructorFunc;\n\t\tthis._pool = [];\n\t\tthis._count = 0;\n\n\t\tthis._resize(size);\n\t}\n\n\t_resize(size) {\n\t\tif (size > this._pool.length) {\n\t\t\tfor (let i = this._pool.length; i < size; i++) {\n\t\t\t\tthis._pool[i] = new this._constructor();\n\t\t\t}\n\t\t}\n\t}\n\n\tallocate() {\n\t\tif (this._count >= this._pool.length) {\n\t\t\tthis._resize(this._pool.length * 2);\n\t\t}\n\n\t\treturn this._pool[this._count++];\n\t}\n\n\tfreeAll() {\n\t\tthis._count = 0;\n\t}\n\n}\n\nvar ammoTransform;\nvar ammoVec1, ammoVec2, ammoQuat, ammoOrigin;\n\nclass RigidBodyComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\n\t\tif (typeof Ammo !== 'undefined' && !ammoTransform) {\n\t\t\tammoTransform = new Ammo.btTransform();\n\t\t\tammoVec1 = new Ammo.btVector3();\n\t\t\tammoVec2 = new Ammo.btVector3();\n\t\t\tammoQuat = new Ammo.btQuaternion();\n\t\t\tammoOrigin = new Ammo.btVector3(0, 0, 0);\n\t\t}\n\n\t\tthis._angularDamping = 0;\n\t\tthis._angularFactor = new Vec3(1, 1, 1);\n\t\tthis._angularVelocity = new Vec3();\n\t\tthis._body = null;\n\t\tthis._friction = 0.5;\n\t\tthis._group = BODYGROUP_STATIC;\n\t\tthis._linearDamping = 0;\n\t\tthis._linearFactor = new Vec3(1, 1, 1);\n\t\tthis._linearVelocity = new Vec3();\n\t\tthis._mask = BODYMASK_NOT_STATIC;\n\t\tthis._mass = 1;\n\t\tthis._restitution = 0;\n\t\tthis._rollingFriction = 0;\n\t\tthis._simulationEnabled = false;\n\t\tthis._type = BODYTYPE_STATIC;\n\t}\n\n\tget angularDamping() {\n\t\treturn this._angularDamping;\n\t}\n\n\tset angularDamping(damping) {\n\t\tif (this._angularDamping !== damping) {\n\t\t\tthis._angularDamping = damping;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setDamping(this._linearDamping, damping);\n\t\t\t}\n\t\t}\n\t}\n\n\tget angularFactor() {\n\t\treturn this._angularFactor;\n\t}\n\n\tset angularFactor(factor) {\n\t\tif (!this._angularFactor.equals(factor)) {\n\t\t\tthis._angularFactor.copy(factor);\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tammoVec1.setValue(factor.x, factor.y, factor.z);\n\n\t\t\t\tthis._body.setAngularFactor(ammoVec1);\n\t\t\t}\n\t\t}\n\t}\n\n\tget angularVelocity() {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tconst velocity = this._body.getAngularVelocity();\n\n\t\t\tthis._angularVelocity.set(velocity.x(), velocity.y(), velocity.z());\n\t\t}\n\n\t\treturn this._angularVelocity;\n\t}\n\n\tset angularVelocity(velocity) {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tthis._body.activate();\n\n\t\t\tammoVec1.setValue(velocity.x, velocity.y, velocity.z);\n\n\t\t\tthis._body.setAngularVelocity(ammoVec1);\n\n\t\t\tthis._angularVelocity.copy(velocity);\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this._body;\n\t}\n\n\tset body(body) {\n\t\tif (this._body !== body) {\n\t\t\tthis._body = body;\n\n\t\t\tif (body && this._simulationEnabled) {\n\t\t\t\tbody.activate();\n\t\t\t}\n\t\t}\n\t}\n\n\tget friction() {\n\t\treturn this._friction;\n\t}\n\n\tset friction(friction) {\n\t\tif (this._friction !== friction) {\n\t\t\tthis._friction = friction;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setFriction(friction);\n\t\t\t}\n\t\t}\n\t}\n\n\tget group() {\n\t\treturn this._group;\n\t}\n\n\tset group(group) {\n\t\tif (this._group !== group) {\n\t\t\tthis._group = group;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.disableSimulation();\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearDamping() {\n\t\treturn this._linearDamping;\n\t}\n\n\tset linearDamping(damping) {\n\t\tif (this._linearDamping !== damping) {\n\t\t\tthis._linearDamping = damping;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setDamping(damping, this._angularDamping);\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearFactor() {\n\t\treturn this._linearFactor;\n\t}\n\n\tset linearFactor(factor) {\n\t\tif (!this._linearFactor.equals(factor)) {\n\t\t\tthis._linearFactor.copy(factor);\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tammoVec1.setValue(factor.x, factor.y, factor.z);\n\n\t\t\t\tthis._body.setLinearFactor(ammoVec1);\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearVelocity() {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tconst velocity = this._body.getLinearVelocity();\n\n\t\t\tthis._linearVelocity.set(velocity.x(), velocity.y(), velocity.z());\n\t\t}\n\n\t\treturn this._linearVelocity;\n\t}\n\n\tset linearVelocity(velocity) {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tthis._body.activate();\n\n\t\t\tammoVec1.setValue(velocity.x, velocity.y, velocity.z);\n\n\t\t\tthis._body.setLinearVelocity(ammoVec1);\n\n\t\t\tthis._linearVelocity.copy(velocity);\n\t\t}\n\t}\n\n\tget mask() {\n\t\treturn this._mask;\n\t}\n\n\tset mask(mask) {\n\t\tif (this._mask !== mask) {\n\t\t\tthis._mask = mask;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.disableSimulation();\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tget mass() {\n\t\treturn this._mass;\n\t}\n\n\tset mass(mass) {\n\t\tif (this._mass !== mass) {\n\t\t\tthis._mass = mass;\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tconst enabled = this.enabled && this.entity.enabled;\n\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.disableSimulation();\n\t\t\t\t}\n\n\t\t\t\tthis._body.getCollisionShape().calculateLocalInertia(mass, ammoVec1);\n\n\t\t\t\tthis._body.setMassProps(mass, ammoVec1);\n\n\t\t\t\tthis._body.updateInertiaTensor();\n\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enableSimulation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget restitution() {\n\t\treturn this._restitution;\n\t}\n\n\tset restitution(restitution) {\n\t\tif (this._restitution !== restitution) {\n\t\t\tthis._restitution = restitution;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setRestitution(restitution);\n\t\t\t}\n\t\t}\n\t}\n\n\tget rollingFriction() {\n\t\treturn this._rollingFriction;\n\t}\n\n\tset rollingFriction(friction) {\n\t\tif (this._rollingFriction !== friction) {\n\t\t\tthis._rollingFriction = friction;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setRollingFriction(friction);\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(type) {\n\t\tif (this._type !== type) {\n\t\t\tthis._type = type;\n\t\t\tthis.disableSimulation();\n\n\t\t\tswitch (type) {\n\t\t\t\tcase BODYTYPE_DYNAMIC:\n\t\t\t\t\tthis._group = BODYGROUP_DYNAMIC;\n\t\t\t\t\tthis._mask = BODYMASK_ALL;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BODYTYPE_KINEMATIC:\n\t\t\t\t\tthis._group = BODYGROUP_KINEMATIC;\n\t\t\t\t\tthis._mask = BODYMASK_ALL;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BODYTYPE_STATIC:\n\t\t\t\tdefault:\n\t\t\t\t\tthis._group = BODYGROUP_STATIC;\n\t\t\t\t\tthis._mask = BODYMASK_NOT_STATIC;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.createBody();\n\t\t}\n\t}\n\n\tcreateBody() {\n\t\tconst entity = this.entity;\n\t\tlet shape;\n\n\t\tif (entity.collision) {\n\t\t\tshape = entity.collision.shape;\n\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t\tdelete entity.trigger;\n\t\t\t}\n\t\t}\n\n\t\tif (shape) {\n\t\t\tif (this._body) this.system.onRemove(entity, this);\n\t\t\tconst mass = this._type === BODYTYPE_DYNAMIC ? this._mass : 0;\n\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tconst body = this.system.createBody(mass, shape, ammoTransform);\n\t\t\tbody.setRestitution(this._restitution);\n\t\t\tbody.setFriction(this._friction);\n\t\t\tbody.setRollingFriction(this._rollingFriction);\n\t\t\tbody.setDamping(this._linearDamping, this._angularDamping);\n\n\t\t\tif (this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tconst linearFactor = this._linearFactor;\n\t\t\t\tammoVec1.setValue(linearFactor.x, linearFactor.y, linearFactor.z);\n\t\t\t\tbody.setLinearFactor(ammoVec1);\n\t\t\t\tconst angularFactor = this._angularFactor;\n\t\t\t\tammoVec1.setValue(angularFactor.x, angularFactor.y, angularFactor.z);\n\t\t\t\tbody.setAngularFactor(ammoVec1);\n\t\t\t} else if (this._type === BODYTYPE_KINEMATIC) {\n\t\t\t\tbody.setCollisionFlags(body.getCollisionFlags() | BODYFLAG_KINEMATIC_OBJECT);\n\t\t\t\tbody.setActivationState(BODYSTATE_DISABLE_DEACTIVATION);\n\t\t\t}\n\n\t\t\tbody.entity = entity;\n\t\t\tthis.body = body;\n\n\t\t\tif (this.enabled && entity.enabled) {\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tisActive() {\n\t\treturn this._body ? this._body.isActive() : false;\n\t}\n\n\tactivate() {\n\t\tif (this._body) {\n\t\t\tthis._body.activate();\n\t\t}\n\t}\n\n\tenableSimulation() {\n\t\tconst entity = this.entity;\n\n\t\tif (entity.collision && entity.collision.enabled && !this._simulationEnabled) {\n\t\t\tconst body = this._body;\n\n\t\t\tif (body) {\n\t\t\t\tthis.system.addBody(body, this._group, this._mask);\n\n\t\t\t\tswitch (this._type) {\n\t\t\t\t\tcase BODYTYPE_DYNAMIC:\n\t\t\t\t\t\tthis.system._dynamic.push(this);\n\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\t\t\t\t\tthis.syncEntityToBody();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase BODYTYPE_KINEMATIC:\n\t\t\t\t\t\tthis.system._kinematic.push(this);\n\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_DISABLE_DEACTIVATION);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase BODYTYPE_STATIC:\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\t\t\t\t\tthis.syncEntityToBody();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (entity.collision.type === 'compound') {\n\t\t\t\t\tthis.system._compounds.push(entity.collision);\n\t\t\t\t}\n\n\t\t\t\tbody.activate();\n\t\t\t\tthis._simulationEnabled = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableSimulation() {\n\t\tconst body = this._body;\n\n\t\tif (body && this._simulationEnabled) {\n\t\t\tconst system = this.system;\n\n\t\t\tlet idx = system._compounds.indexOf(this.entity.collision);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._compounds.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = system._dynamic.indexOf(this);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._dynamic.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = system._kinematic.indexOf(this);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._kinematic.splice(idx, 1);\n\t\t\t}\n\n\t\t\tsystem.removeBody(body);\n\t\t\tbody.forceActivationState(BODYSTATE_DISABLE_SIMULATION);\n\t\t\tthis._simulationEnabled = false;\n\t\t}\n\t}\n\n\tapplyForce() {\n\t\tlet x, y, z;\n\t\tlet px, py, pz;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tpx = arguments[1].x;\n\t\t\t\tpy = arguments[1].y;\n\t\t\t\tpz = arguments[1].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tcase 6:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tpx = arguments[3];\n\t\t\t\tpy = arguments[4];\n\t\t\t\tpz = arguments[5];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\n\t\t\tif (px !== undefined) {\n\t\t\t\tammoVec2.setValue(px, py, pz);\n\t\t\t\tbody.applyForce(ammoVec1, ammoVec2);\n\t\t\t} else {\n\t\t\t\tbody.applyForce(ammoVec1, ammoOrigin);\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyTorque() {\n\t\tlet x, y, z;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\t\t\tbody.applyTorque(ammoVec1);\n\t\t}\n\t}\n\n\tapplyImpulse() {\n\t\tlet x, y, z;\n\t\tlet px, py, pz;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tpx = arguments[1].x;\n\t\t\t\tpy = arguments[1].y;\n\t\t\t\tpz = arguments[1].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tcase 6:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tpx = arguments[3];\n\t\t\t\tpy = arguments[4];\n\t\t\t\tpz = arguments[5];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\n\t\t\tif (px !== undefined) {\n\t\t\t\tammoVec2.setValue(px, py, pz);\n\t\t\t\tbody.applyImpulse(ammoVec1, ammoVec2);\n\t\t\t} else {\n\t\t\t\tbody.applyImpulse(ammoVec1, ammoOrigin);\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyTorqueImpulse() {\n\t\tlet x, y, z;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\t\t\tbody.applyTorqueImpulse(ammoVec1);\n\t\t}\n\t}\n\n\tisStatic() {\n\t\treturn this._type === BODYTYPE_STATIC;\n\t}\n\n\tisStaticOrKinematic() {\n\t\treturn this._type === BODYTYPE_STATIC || this._type === BODYTYPE_KINEMATIC;\n\t}\n\n\tisKinematic() {\n\t\treturn this._type === BODYTYPE_KINEMATIC;\n\t}\n\n\t_getEntityTransform(transform) {\n\t\tconst entity = this.entity;\n\t\tconst pos = entity.getPosition();\n\t\tconst rot = entity.getRotation();\n\t\tammoVec1.setValue(pos.x, pos.y, pos.z);\n\t\tammoQuat.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setOrigin(ammoVec1);\n\t\ttransform.setRotation(ammoQuat);\n\t}\n\n\tsyncEntityToBody() {\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tbody.setWorldTransform(ammoTransform);\n\n\t\t\tif (this._type === BODYTYPE_KINEMATIC) {\n\t\t\t\tconst motionState = body.getMotionState();\n\n\t\t\t\tif (motionState) {\n\t\t\t\t\tmotionState.setWorldTransform(ammoTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbody.activate();\n\t\t}\n\t}\n\n\t_updateDynamic() {\n\t\tconst body = this._body;\n\n\t\tif (body.isActive()) {\n\t\t\tconst motionState = body.getMotionState();\n\n\t\t\tif (motionState) {\n\t\t\t\tmotionState.getWorldTransform(ammoTransform);\n\t\t\t\tconst p = ammoTransform.getOrigin();\n\t\t\t\tconst q = ammoTransform.getRotation();\n\t\t\t\tthis.entity.setPosition(p.x(), p.y(), p.z());\n\t\t\t\tthis.entity.setRotation(q.x(), q.y(), q.z(), q.w());\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateKinematic() {\n\t\tconst motionState = this._body.getMotionState();\n\n\t\tif (motionState) {\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tmotionState.setWorldTransform(ammoTransform);\n\t\t}\n\t}\n\n\tteleport() {\n\t\tif (arguments.length < 3) {\n\t\t\tif (arguments[0]) {\n\t\t\t\tthis.entity.setPosition(arguments[0]);\n\t\t\t}\n\n\t\t\tif (arguments[1]) {\n\t\t\t\tif (arguments[1] instanceof Quat) {\n\t\t\t\t\tthis.entity.setRotation(arguments[1]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.entity.setEulerAngles(arguments[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (arguments.length === 6) {\n\t\t\t\tthis.entity.setEulerAngles(arguments[3], arguments[4], arguments[5]);\n\t\t\t}\n\n\t\t\tthis.entity.setPosition(arguments[0], arguments[1], arguments[2]);\n\t\t}\n\n\t\tthis.syncEntityToBody();\n\t}\n\n\tonEnable() {\n\t\tif (!this._body) {\n\t\t\tthis.createBody();\n\t\t}\n\n\t\tthis.enableSimulation();\n\t}\n\n\tonDisable() {\n\t\tthis.disableSimulation();\n\t}\n\n}\n\nclass RigidBodyComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nvar ammoRayStart, ammoRayEnd;\nvar collisions = {};\nvar frameCollisions = {};\n\nclass RaycastResult {\n\tconstructor(entity, point, normal) {\n\t\tthis.entity = entity;\n\t\tthis.point = point;\n\t\tthis.normal = normal;\n\t}\n\n}\n\nclass SingleContactResult {\n\tconstructor(a, b, contactPoint) {\n\t\tif (arguments.length === 0) {\n\t\t\tthis.a = null;\n\t\t\tthis.b = null;\n\t\t\tthis.localPointA = new Vec3();\n\t\t\tthis.localPointB = new Vec3();\n\t\t\tthis.pointA = new Vec3();\n\t\t\tthis.pointB = new Vec3();\n\t\t\tthis.normal = new Vec3();\n\t\t} else {\n\t\t\tthis.a = a;\n\t\t\tthis.b = b;\n\t\t\tthis.localPointA = contactPoint.localPoint;\n\t\t\tthis.localPointB = contactPoint.localPointOther;\n\t\t\tthis.pointA = contactPoint.point;\n\t\t\tthis.pointB = contactPoint.pointOther;\n\t\t\tthis.normal = contactPoint.normal;\n\t\t}\n\t}\n\n}\n\nclass ContactPoint {\n\tconstructor(localPoint = new Vec3(), localPointOther = new Vec3(), point = new Vec3(), pointOther = new Vec3(), normal = new Vec3()) {\n\t\tthis.localPoint = localPoint;\n\t\tthis.localPointOther = localPointOther;\n\t\tthis.point = point;\n\t\tthis.pointOther = pointOther;\n\t\tthis.normal = normal;\n\t}\n\n}\n\nclass ContactResult {\n\tconstructor(other, contacts) {\n\t\tthis.other = other;\n\t\tthis.contacts = contacts;\n\t}\n\n}\n\nconst _schema$7 = ['enabled'];\n\nclass RigidBodyComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'rigidbody';\n\t\tthis._stats = app.stats.frame;\n\t\tthis.ComponentType = RigidBodyComponent;\n\t\tthis.DataType = RigidBodyComponentData;\n\t\tthis.contactPointPool = null;\n\t\tthis.contactResultPool = null;\n\t\tthis.singleContactResultPool = null;\n\t\tthis.schema = _schema$7;\n\t\tthis.maxSubSteps = 10;\n\t\tthis.fixedTimeStep = 1 / 60;\n\t\tthis.gravity = new Vec3(0, -9.81, 0);\n\t\tthis._dynamic = [];\n\t\tthis._kinematic = [];\n\t\tthis._triggers = [];\n\t\tthis._compounds = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tonLibraryLoaded() {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tthis.collisionConfiguration = new Ammo.btDefaultCollisionConfiguration();\n\t\t\tthis.dispatcher = new Ammo.btCollisionDispatcher(this.collisionConfiguration);\n\t\t\tthis.overlappingPairCache = new Ammo.btDbvtBroadphase();\n\t\t\tthis.solver = new Ammo.btSequentialImpulseConstraintSolver();\n\t\t\tthis.dynamicsWorld = new Ammo.btDiscreteDynamicsWorld(this.dispatcher, this.overlappingPairCache, this.solver, this.collisionConfiguration);\n\n\t\t\tif (this.dynamicsWorld.setInternalTickCallback) {\n\t\t\t\tconst checkForCollisionsPointer = Ammo.addFunction(this._checkForCollisions.bind(this), 'vif');\n\t\t\t\tthis.dynamicsWorld.setInternalTickCallback(checkForCollisionsPointer);\n\t\t\t}\n\n\t\t\tammoRayStart = new Ammo.btVector3();\n\t\t\tammoRayEnd = new Ammo.btVector3();\n\t\t\tthis.contactPointPool = new ObjectPool(ContactPoint, 1);\n\t\t\tthis.contactResultPool = new ObjectPool(ContactResult, 1);\n\t\t\tthis.singleContactResultPool = new ObjectPool(SingleContactResult, 1);\n\t\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\t} else {\n\t\t\tComponentSystem.unbind('update', this.onUpdate, this);\n\t\t}\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tconst props = ['mass', 'linearDamping', 'angularDamping', 'linearFactor', 'angularFactor', 'friction', 'rollingFriction', 'restitution', 'type', 'group', 'mask'];\n\n\t\tfor (const property of props) {\n\t\t\tif (data.hasOwnProperty(property)) {\n\t\t\t\tconst value = data[property];\n\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tcomponent[property] = new Vec3(value[0], value[1], value[2]);\n\t\t\t\t} else {\n\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tconst rigidbody = entity.rigidbody;\n\t\tconst data = {\n\t\t\tenabled: rigidbody.enabled,\n\t\t\tmass: rigidbody.mass,\n\t\t\tlinearDamping: rigidbody.linearDamping,\n\t\t\tangularDamping: rigidbody.angularDamping,\n\t\t\tlinearFactor: [rigidbody.linearFactor.x, rigidbody.linearFactor.y, rigidbody.linearFactor.z],\n\t\t\tangularFactor: [rigidbody.angularFactor.x, rigidbody.angularFactor.y, rigidbody.angularFactor.z],\n\t\t\tfriction: rigidbody.friction,\n\t\t\trollingFriction: rigidbody.rollingFriction,\n\t\t\trestitution: rigidbody.restitution,\n\t\t\ttype: rigidbody.type,\n\t\t\tgroup: rigidbody.group,\n\t\t\tmask: rigidbody.mask\n\t\t};\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tif (component.enabled) {\n\t\t\tcomponent.enabled = false;\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tconst body = component.body;\n\n\t\tif (body) {\n\t\t\tthis.removeBody(body);\n\t\t\tthis.destroyBody(body);\n\t\t\tcomponent.body = null;\n\t\t}\n\t}\n\n\taddBody(body, group, mask) {\n\t\tif (group !== undefined && mask !== undefined) {\n\t\t\tthis.dynamicsWorld.addRigidBody(body, group, mask);\n\t\t} else {\n\t\t\tthis.dynamicsWorld.addRigidBody(body);\n\t\t}\n\t}\n\n\tremoveBody(body) {\n\t\tthis.dynamicsWorld.removeRigidBody(body);\n\t}\n\n\tcreateBody(mass, shape, transform) {\n\t\tconst localInertia = new Ammo.btVector3(0, 0, 0);\n\n\t\tif (mass !== 0) {\n\t\t\tshape.calculateLocalInertia(mass, localInertia);\n\t\t}\n\n\t\tconst motionState = new Ammo.btDefaultMotionState(transform);\n\t\tconst bodyInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, shape, localInertia);\n\t\tconst body = new Ammo.btRigidBody(bodyInfo);\n\t\tAmmo.destroy(bodyInfo);\n\t\tAmmo.destroy(localInertia);\n\t\treturn body;\n\t}\n\n\tdestroyBody(body) {\n\t\tconst motionState = body.getMotionState();\n\n\t\tif (motionState) {\n\t\t\tAmmo.destroy(motionState);\n\t\t}\n\n\t\tAmmo.destroy(body);\n\t}\n\n\traycastFirst(start, end) {\n\t\tlet result = null;\n\t\tammoRayStart.setValue(start.x, start.y, start.z);\n\t\tammoRayEnd.setValue(end.x, end.y, end.z);\n\t\tconst rayCallback = new Ammo.ClosestRayResultCallback(ammoRayStart, ammoRayEnd);\n\t\tthis.dynamicsWorld.rayTest(ammoRayStart, ammoRayEnd, rayCallback);\n\n\t\tif (rayCallback.hasHit()) {\n\t\t\tconst collisionObj = rayCallback.get_m_collisionObject();\n\t\t\tconst body = Ammo.castObject(collisionObj, Ammo.btRigidBody);\n\n\t\t\tif (body) {\n\t\t\t\tconst point = rayCallback.get_m_hitPointWorld();\n\t\t\t\tconst normal = rayCallback.get_m_hitNormalWorld();\n\t\t\t\tresult = new RaycastResult(body.entity, new Vec3(point.x(), point.y(), point.z()), new Vec3(normal.x(), normal.y(), normal.z()));\n\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconst callback = arguments[2];\n\t\t\t\t\tcallback(result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tAmmo.destroy(rayCallback);\n\t\treturn result;\n\t}\n\n\traycastAll(start, end) {\n\t\tconst results = [];\n\t\tammoRayStart.setValue(start.x, start.y, start.z);\n\t\tammoRayEnd.setValue(end.x, end.y, end.z);\n\t\tconst rayCallback = new Ammo.AllHitsRayResultCallback(ammoRayStart, ammoRayEnd);\n\t\tthis.dynamicsWorld.rayTest(ammoRayStart, ammoRayEnd, rayCallback);\n\n\t\tif (rayCallback.hasHit()) {\n\t\t\tconst collisionObjs = rayCallback.get_m_collisionObjects();\n\t\t\tconst points = rayCallback.get_m_hitPointWorld();\n\t\t\tconst normals = rayCallback.get_m_hitNormalWorld();\n\t\t\tconst numHits = collisionObjs.size();\n\n\t\t\tfor (let i = 0; i < numHits; i++) {\n\t\t\t\tconst body = Ammo.castObject(collisionObjs.at(i), Ammo.btRigidBody);\n\n\t\t\t\tif (body) {\n\t\t\t\t\tconst point = points.at(i);\n\t\t\t\t\tconst normal = normals.at(i);\n\t\t\t\t\tconst result = new RaycastResult(body.entity, new Vec3(point.x(), point.y(), point.z()), new Vec3(normal.x(), normal.y(), normal.z()));\n\t\t\t\t\tresults.push(result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tAmmo.destroy(rayCallback);\n\t\treturn results;\n\t}\n\n\t_storeCollision(entity, other) {\n\t\tlet isNewCollision = false;\n\t\tconst guid = entity.getGuid();\n\t\tcollisions[guid] = collisions[guid] || {\n\t\t\tothers: [],\n\t\t\tentity: entity\n\t\t};\n\n\t\tif (collisions[guid].others.indexOf(other) < 0) {\n\t\t\tcollisions[guid].others.push(other);\n\t\t\tisNewCollision = true;\n\t\t}\n\n\t\tframeCollisions[guid] = frameCollisions[guid] || {\n\t\t\tothers: [],\n\t\t\tentity: entity\n\t\t};\n\t\tframeCollisions[guid].others.push(other);\n\t\treturn isNewCollision;\n\t}\n\n\t_createContactPointFromAmmo(contactPoint) {\n\t\tconst localPointA = contactPoint.get_m_localPointA();\n\t\tconst localPointB = contactPoint.get_m_localPointB();\n\t\tconst positionWorldOnA = contactPoint.getPositionWorldOnA();\n\t\tconst positionWorldOnB = contactPoint.getPositionWorldOnB();\n\t\tconst normalWorldOnB = contactPoint.get_m_normalWorldOnB();\n\t\tconst contact = this.contactPointPool.allocate();\n\t\tcontact.localPoint.set(localPointA.x(), localPointA.y(), localPointA.z());\n\t\tcontact.localPointOther.set(localPointB.x(), localPointB.y(), localPointB.z());\n\t\tcontact.point.set(positionWorldOnA.x(), positionWorldOnA.y(), positionWorldOnA.z());\n\t\tcontact.pointOther.set(positionWorldOnB.x(), positionWorldOnB.y(), positionWorldOnB.z());\n\t\tcontact.normal.set(normalWorldOnB.x(), normalWorldOnB.y(), normalWorldOnB.z());\n\t\treturn contact;\n\t}\n\n\t_createReverseContactPointFromAmmo(contactPoint) {\n\t\tconst localPointA = contactPoint.get_m_localPointA();\n\t\tconst localPointB = contactPoint.get_m_localPointB();\n\t\tconst positionWorldOnA = contactPoint.getPositionWorldOnA();\n\t\tconst positionWorldOnB = contactPoint.getPositionWorldOnB();\n\t\tconst normalWorldOnB = contactPoint.get_m_normalWorldOnB();\n\t\tconst contact = this.contactPointPool.allocate();\n\t\tcontact.localPointOther.set(localPointA.x(), localPointA.y(), localPointA.z());\n\t\tcontact.localPoint.set(localPointB.x(), localPointB.y(), localPointB.z());\n\t\tcontact.pointOther.set(positionWorldOnA.x(), positionWorldOnA.y(), positionWorldOnA.z());\n\t\tcontact.point.set(positionWorldOnB.x(), positionWorldOnB.y(), positionWorldOnB.z());\n\t\tcontact.normal.set(normalWorldOnB.x(), normalWorldOnB.y(), normalWorldOnB.z());\n\t\treturn contact;\n\t}\n\n\t_createSingleContactResult(a, b, contactPoint) {\n\t\tconst result = this.singleContactResultPool.allocate();\n\t\tresult.a = a;\n\t\tresult.b = b;\n\t\tresult.localPointA = contactPoint.localPoint;\n\t\tresult.localPointB = contactPoint.localPointOther;\n\t\tresult.pointA = contactPoint.point;\n\t\tresult.pointB = contactPoint.pointOther;\n\t\tresult.normal = contactPoint.normal;\n\t\treturn result;\n\t}\n\n\t_createContactResult(other, contacts) {\n\t\tconst result = this.contactResultPool.allocate();\n\t\tresult.other = other;\n\t\tresult.contacts = contacts;\n\t\treturn result;\n\t}\n\n\t_cleanOldCollisions() {\n\t\tfor (const guid in collisions) {\n\t\t\tif (collisions.hasOwnProperty(guid)) {\n\t\t\t\tconst frameCollision = frameCollisions[guid];\n\t\t\t\tconst collision = collisions[guid];\n\t\t\t\tconst entity = collision.entity;\n\t\t\t\tconst entityCollision = entity.collision;\n\t\t\t\tconst entityRigidbody = entity.rigidbody;\n\t\t\t\tconst others = collision.others;\n\t\t\t\tconst length = others.length;\n\t\t\t\tlet i = length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tconst other = others[i];\n\n\t\t\t\t\tif (!frameCollision || frameCollision.others.indexOf(other) < 0) {\n\t\t\t\t\t\tothers.splice(i, 1);\n\n\t\t\t\t\t\tif (entity.trigger) {\n\t\t\t\t\t\t\tif (entityCollision) {\n\t\t\t\t\t\t\t\tentityCollision.fire(\"triggerleave\", other);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (other.rigidbody) {\n\t\t\t\t\t\t\t\tother.rigidbody.fire('triggerleave', entity);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!other.trigger) {\n\t\t\t\t\t\t\tif (entityRigidbody) {\n\t\t\t\t\t\t\t\tentityRigidbody.fire(\"collisionend\", other);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (entityCollision) {\n\t\t\t\t\t\t\t\tentityCollision.fire(\"collisionend\", other);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (others.length === 0) {\n\t\t\t\t\tdelete collisions[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_hasContactEvent(entity) {\n\t\tconst c = entity.collision;\n\n\t\tif (c && (c.hasEvent(\"collisionstart\") || c.hasEvent(\"collisionend\") || c.hasEvent(\"contact\"))) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst r = entity.rigidbody;\n\t\treturn r && (r.hasEvent(\"collisionstart\") || r.hasEvent(\"collisionend\") || r.hasEvent(\"contact\"));\n\t}\n\n\t_checkForCollisions(world, timeStep) {\n\t\tconst dynamicsWorld = Ammo.wrapPointer(world, Ammo.btDynamicsWorld);\n\t\tconst dispatcher = dynamicsWorld.getDispatcher();\n\t\tconst numManifolds = dispatcher.getNumManifolds();\n\t\tframeCollisions = {};\n\n\t\tfor (let i = 0; i < numManifolds; i++) {\n\t\t\tconst manifold = dispatcher.getManifoldByIndexInternal(i);\n\t\t\tconst body0 = manifold.getBody0();\n\t\t\tconst body1 = manifold.getBody1();\n\t\t\tconst wb0 = Ammo.castObject(body0, Ammo.btRigidBody);\n\t\t\tconst wb1 = Ammo.castObject(body1, Ammo.btRigidBody);\n\t\t\tconst e0 = wb0.entity;\n\t\t\tconst e1 = wb1.entity;\n\n\t\t\tif (!e0 || !e1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst flags0 = wb0.getCollisionFlags();\n\t\t\tconst flags1 = wb1.getCollisionFlags();\n\t\t\tconst numContacts = manifold.getNumContacts();\n\t\t\tconst forwardContacts = [];\n\t\t\tconst reverseContacts = [];\n\t\t\tlet newCollision;\n\n\t\t\tif (numContacts > 0) {\n\t\t\t\tif (flags0 & BODYFLAG_NORESPONSE_OBJECT || flags1 & BODYFLAG_NORESPONSE_OBJECT) {\n\t\t\t\t\tconst e0Events = e0.collision && (e0.collision.hasEvent(\"triggerenter\") || e0.collision.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e1Events = e1.collision && (e1.collision.hasEvent(\"triggerenter\") || e1.collision.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e0BodyEvents = e0.rigidbody && (e0.rigidbody.hasEvent(\"triggerenter\") || e0.rigidbody.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e1BodyEvents = e1.rigidbody && (e1.rigidbody.hasEvent(\"triggerenter\") || e1.rigidbody.hasEvent(\"triggerleave\"));\n\n\t\t\t\t\tif (e0Events) {\n\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\n\t\t\t\t\t\tif (newCollision && !(flags1 & BODYFLAG_NORESPONSE_OBJECT)) {\n\t\t\t\t\t\t\te0.collision.fire(\"triggerenter\", e1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e1Events) {\n\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\n\t\t\t\t\t\tif (newCollision && !(flags0 & BODYFLAG_NORESPONSE_OBJECT)) {\n\t\t\t\t\t\t\te1.collision.fire(\"triggerenter\", e0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e0BodyEvents) {\n\t\t\t\t\t\tif (!newCollision) {\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\te0.rigidbody.fire(\"triggerenter\", e1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e1BodyEvents) {\n\t\t\t\t\t\tif (!newCollision) {\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\te1.rigidbody.fire(\"triggerenter\", e0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst e0Events = this._hasContactEvent(e0);\n\n\t\t\t\t\tconst e1Events = this._hasContactEvent(e1);\n\n\t\t\t\t\tconst globalEvents = this.hasEvent(\"contact\");\n\n\t\t\t\t\tif (globalEvents || e0Events || e1Events) {\n\t\t\t\t\t\tfor (let j = 0; j < numContacts; j++) {\n\t\t\t\t\t\t\tconst btContactPoint = manifold.getContactPoint(j);\n\n\t\t\t\t\t\t\tconst contactPoint = this._createContactPointFromAmmo(btContactPoint);\n\n\t\t\t\t\t\t\tif (e0Events || e1Events) {\n\t\t\t\t\t\t\t\tforwardContacts.push(contactPoint);\n\n\t\t\t\t\t\t\t\tconst reverseContactPoint = this._createReverseContactPointFromAmmo(btContactPoint);\n\n\t\t\t\t\t\t\t\treverseContacts.push(reverseContactPoint);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (globalEvents) {\n\t\t\t\t\t\t\t\tconst result = this._createSingleContactResult(e0, e1, contactPoint);\n\n\t\t\t\t\t\t\t\tthis.fire(\"contact\", result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e0Events) {\n\t\t\t\t\t\t\tconst forwardResult = this._createContactResult(e1, forwardContacts);\n\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\n\t\t\t\t\t\t\tif (e0.collision) {\n\t\t\t\t\t\t\t\te0.collision.fire(\"contact\", forwardResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te0.collision.fire(\"collisionstart\", forwardResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e0.rigidbody) {\n\t\t\t\t\t\t\t\te0.rigidbody.fire(\"contact\", forwardResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te0.rigidbody.fire(\"collisionstart\", forwardResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e1Events) {\n\t\t\t\t\t\t\tconst reverseResult = this._createContactResult(e0, reverseContacts);\n\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\n\t\t\t\t\t\t\tif (e1.collision) {\n\t\t\t\t\t\t\t\te1.collision.fire(\"contact\", reverseResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te1.collision.fire(\"collisionstart\", reverseResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e1.rigidbody) {\n\t\t\t\t\t\t\t\te1.rigidbody.fire(\"contact\", reverseResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te1.rigidbody.fire(\"collisionstart\", reverseResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._cleanOldCollisions();\n\n\t\tthis.contactPointPool.freeAll();\n\t\tthis.contactResultPool.freeAll();\n\t\tthis.singleContactResultPool.freeAll();\n\t}\n\n\tonUpdate(dt) {\n\t\tlet i, len;\n\t\tconst gravity = this.dynamicsWorld.getGravity();\n\n\t\tif (gravity.x() !== this.gravity.x || gravity.y() !== this.gravity.y || gravity.z() !== this.gravity.z) {\n\t\t\tgravity.setValue(this.gravity.x, this.gravity.y, this.gravity.z);\n\t\t\tthis.dynamicsWorld.setGravity(gravity);\n\t\t}\n\n\t\tconst triggers = this._triggers;\n\n\t\tfor (i = 0, len = triggers.length; i < len; i++) {\n\t\t\ttriggers[i].updateTransform();\n\t\t}\n\n\t\tconst compounds = this._compounds;\n\n\t\tfor (i = 0, len = compounds.length; i < len; i++) {\n\t\t\tcompounds[i]._updateCompound();\n\t\t}\n\n\t\tconst kinematic = this._kinematic;\n\n\t\tfor (i = 0, len = kinematic.length; i < len; i++) {\n\t\t\tkinematic[i]._updateKinematic();\n\t\t}\n\n\t\tthis.dynamicsWorld.stepSimulation(dt, this.maxSubSteps, this.fixedTimeStep);\n\t\tconst dynamic = this._dynamic;\n\n\t\tfor (i = 0, len = dynamic.length; i < len; i++) {\n\t\t\tdynamic[i]._updateDynamic();\n\t\t}\n\n\t\tif (!this.dynamicsWorld.setInternalTickCallback) this._checkForCollisions(Ammo.getPointer(this.dynamicsWorld), dt);\n\t}\n\n\tdestroy() {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tAmmo.destroy(this.dynamicsWorld);\n\t\t\tAmmo.destroy(this.solver);\n\t\t\tAmmo.destroy(this.overlappingPairCache);\n\t\t\tAmmo.destroy(this.dispatcher);\n\t\t\tAmmo.destroy(this.collisionConfiguration);\n\t\t\tthis.dynamicsWorld = null;\n\t\t\tthis.solver = null;\n\t\t\tthis.overlappingPairCache = null;\n\t\t\tthis.dispatcher = null;\n\t\t\tthis.collisionConfiguration = null;\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(RigidBodyComponent.prototype, _schema$7);\n\nconst SCALEMODE_NONE = \"none\";\nconst SCALEMODE_BLEND = \"blend\";\n\nvar _transform = new Mat4();\n\nclass ScreenComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._resolution = new Vec2(640, 320);\n\t\tthis._referenceResolution = new Vec2(640, 320);\n\t\tthis._scaleMode = SCALEMODE_NONE;\n\t\tthis.scale = 1;\n\t\tthis._scaleBlend = 0.5;\n\t\tthis._priority = 0;\n\t\tthis._screenSpace = false;\n\t\tthis.cull = this._screenSpace;\n\t\tthis._screenMatrix = new Mat4();\n\t\tthis._elements = new Set();\n\t\tsystem.app.graphicsDevice.on(\"resizecanvas\", this._onResize, this);\n\t}\n\n\tsyncDrawOrder() {\n\t\tthis.system.queueDrawOrderSync(this.entity.getGuid(), this._processDrawOrderSync, this);\n\t}\n\n\t_recurseDrawOrderSync(e, i) {\n\t\tif (!(e instanceof Entity)) {\n\t\t\treturn i;\n\t\t}\n\n\t\tif (e.element) {\n\t\t\tvar prevDrawOrder = e.element.drawOrder;\n\t\t\te.element.drawOrder = i++;\n\n\t\t\tif (e.element._batchGroupId >= 0 && prevDrawOrder !== e.element.drawOrder) {\n\t\t\t\tthis.system.app.batcher.markGroupDirty(e.element._batchGroupId);\n\t\t\t}\n\t\t}\n\n\t\tif (e.particlesystem) {\n\t\t\te.particlesystem.drawOrder = i++;\n\t\t}\n\n\t\tvar children = e.children;\n\n\t\tfor (var j = 0; j < children.length; j++) {\n\t\t\ti = this._recurseDrawOrderSync(children[j], i);\n\t\t}\n\n\t\treturn i;\n\t}\n\n\t_processDrawOrderSync() {\n\t\tvar i = 1;\n\n\t\tthis._recurseDrawOrderSync(this.entity, i);\n\n\t\tthis.fire('syncdraworder');\n\t}\n\n\t_calcProjectionMatrix() {\n\t\tvar left;\n\t\tvar right;\n\t\tvar bottom;\n\t\tvar top;\n\t\tvar near = 1;\n\t\tvar far = -1;\n\t\tvar w = this._resolution.x / this.scale;\n\t\tvar h = this._resolution.y / this.scale;\n\t\tleft = 0;\n\t\tright = w;\n\t\tbottom = -h;\n\t\ttop = 0;\n\n\t\tthis._screenMatrix.setOrtho(left, right, bottom, top, near, far);\n\n\t\tif (!this._screenSpace) {\n\t\t\t_transform.setScale(0.5 * w, 0.5 * h, 1);\n\n\t\t\tthis._screenMatrix.mul2(_transform, this._screenMatrix);\n\t\t}\n\t}\n\n\t_updateScale() {\n\t\tthis.scale = this._calcScale(this._resolution, this.referenceResolution);\n\t}\n\n\t_calcScale(resolution, referenceResolution) {\n\t\tvar lx = Math.log2(resolution.x / referenceResolution.x);\n\t\tvar ly = Math.log2(resolution.y / referenceResolution.y);\n\t\treturn Math.pow(2, lx * (1 - this._scaleBlend) + ly * this._scaleBlend);\n\t}\n\n\t_onResize(width, height) {\n\t\tif (this._screenSpace) {\n\t\t\tthis._resolution.set(width, height);\n\n\t\t\tthis.resolution = this._resolution;\n\t\t}\n\t}\n\n\t_bindElement(element) {\n\t\tthis._elements.add(element);\n\t}\n\n\t_unbindElement(element) {\n\t\tthis._elements.delete(element);\n\t}\n\n\tonRemove() {\n\t\tthis.system.app.graphicsDevice.off(\"resizecanvas\", this._onResize, this);\n\t\tthis.fire('remove');\n\n\t\tthis._elements.forEach(element => element._onScreenRemove());\n\n\t\tthis._elements.clear();\n\n\t\tthis.off();\n\t}\n\n\tset resolution(value) {\n\t\tif (!this._screenSpace) {\n\t\t\tthis._resolution.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._resolution.set(this.system.app.graphicsDevice.width, this.system.app.graphicsDevice.height);\n\t\t}\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:resolution\", this._resolution);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget resolution() {\n\t\treturn this._resolution;\n\t}\n\n\tset referenceResolution(value) {\n\t\tthis._referenceResolution.set(value.x, value.y);\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:referenceresolution\", this._resolution);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget referenceResolution() {\n\t\tif (this._scaleMode === SCALEMODE_NONE) {\n\t\t\treturn this._resolution;\n\t\t}\n\n\t\treturn this._referenceResolution;\n\t}\n\n\tset screenSpace(value) {\n\t\tthis._screenSpace = value;\n\n\t\tif (this._screenSpace) {\n\t\t\tthis._resolution.set(this.system.app.graphicsDevice.width, this.system.app.graphicsDevice.height);\n\t\t}\n\n\t\tthis.resolution = this._resolution;\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire('set:screenspace', this._screenSpace);\n\n\t\tthis._elements.forEach(element => element._onScreenSpaceChange());\n\t}\n\n\tget screenSpace() {\n\t\treturn this._screenSpace;\n\t}\n\n\tset scaleMode(value) {\n\t\tif (value !== SCALEMODE_NONE && value !== SCALEMODE_BLEND) {\n\t\t\tvalue = SCALEMODE_NONE;\n\t\t}\n\n\t\tif (!this._screenSpace && value !== SCALEMODE_NONE) {\n\t\t\tvalue = SCALEMODE_NONE;\n\t\t}\n\n\t\tthis._scaleMode = value;\n\t\tthis.resolution = this._resolution;\n\t\tthis.fire(\"set:scalemode\", this._scaleMode);\n\t}\n\n\tget scaleMode() {\n\t\treturn this._scaleMode;\n\t}\n\n\tset scaleBlend(value) {\n\t\tthis._scaleBlend = value;\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:scaleblend\", this._scaleBlend);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget scaleBlend() {\n\t\treturn this._scaleBlend;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tset priority(value) {\n\t\tif (value > 0xFF) {\n\t\t\tvalue = 0xFF;\n\t\t}\n\n\t\tthis._priority = value;\n\t}\n\n}\n\nclass ScreenComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$6 = ['enabled'];\n\nclass ScreenComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'screen';\n\t\tthis.ComponentType = ScreenComponent;\n\t\tthis.DataType = ScreenComponentData;\n\t\tthis.schema = _schema$6;\n\t\tthis.windowResolution = new Vec2();\n\t\tthis._drawOrderSyncQueue = new IndexedList();\n\t\tthis.app.graphicsDevice.on(\"resizecanvas\", this._onResize, this);\n\t\tComponentSystem.bind('update', this._onUpdate, this);\n\t\tthis.on('beforeremove', this.onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.priority !== undefined) component.priority = data.priority;\n\t\tif (data.screenSpace !== undefined) component.screenSpace = data.screenSpace;\n\t\tcomponent.cull = component.screenSpace;\n\t\tif (data.scaleMode !== undefined) component.scaleMode = data.scaleMode;\n\t\tif (data.scaleBlend !== undefined) component.scaleBlend = data.scaleBlend;\n\n\t\tif (data.resolution !== undefined) {\n\t\t\tif (data.resolution instanceof Vec2) {\n\t\t\t\tcomponent._resolution.copy(data.resolution);\n\t\t\t} else {\n\t\t\t\tcomponent._resolution.set(data.resolution[0], data.resolution[1]);\n\t\t\t}\n\n\t\t\tcomponent.resolution = component._resolution;\n\t\t}\n\n\t\tif (data.referenceResolution !== undefined) {\n\t\t\tif (data.referenceResolution instanceof Vec2) {\n\t\t\t\tcomponent._referenceResolution.copy(data.referenceResolution);\n\t\t\t} else {\n\t\t\t\tcomponent._referenceResolution.set(data.referenceResolution[0], data.referenceResolution[1]);\n\t\t\t}\n\n\t\t\tcomponent.referenceResolution = component._referenceResolution;\n\t\t}\n\n\t\tcomponent.syncDrawOrder();\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tdestroy() {\n\t\tthis.off();\n\t\tthis.app.graphicsDevice.off(\"resizecanvas\", this._onResize, this);\n\t}\n\n\t_onUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components[id].entity.screen.update) components[id].entity.screen.update(dt);\n\t\t}\n\t}\n\n\t_onResize(width, height) {\n\t\tthis.windowResolution.x = width;\n\t\tthis.windowResolution.y = height;\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar screen = entity.screen;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: screen.enabled,\n\t\t\tscreenSpace: screen.screenSpace,\n\t\t\tscaleMode: screen.scaleMode,\n\t\t\tresolution: screen.resolution.clone(),\n\t\t\treferenceResolution: screen.referenceResolution.clone()\n\t\t});\n\t}\n\n\tonRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tprocessDrawOrderSyncQueue() {\n\t\tvar list = this._drawOrderSyncQueue.list();\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i];\n\t\t\titem.callback.call(item.scope);\n\t\t}\n\n\t\tthis._drawOrderSyncQueue.clear();\n\t}\n\n\tqueueDrawOrderSync(id, fn, scope) {\n\t\tif (!this._drawOrderSyncQueue.list().length) {\n\t\t\tthis.app.once('prerender', this.processDrawOrderSyncQueue, this);\n\t\t}\n\n\t\tif (!this._drawOrderSyncQueue.has(id)) {\n\t\t\tthis._drawOrderSyncQueue.push(id, {\n\t\t\t\tcallback: fn,\n\t\t\t\tscope: scope\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(ScreenComponent.prototype, _schema$6);\n\nconst components = ['x', 'y', 'z', 'w'];\nconst vecLookup = [undefined, undefined, Vec2, Vec3, Vec4];\n\nfunction rawToValue(app, args, value, old) {\n\tvar i;\n\tvar j;\n\n\tswitch (args.type) {\n\t\tcase 'boolean':\n\t\t\treturn !!value;\n\n\t\tcase 'number':\n\t\t\tif (typeof value === 'number') {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvar v = parseInt(value, 10);\n\t\t\t\tif (isNaN(v)) return null;\n\t\t\t\treturn v;\n\t\t\t} else if (typeof value === 'boolean') {\n\t\t\t\treturn 0 + value;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'json':\n\t\t\tvar result = {};\n\n\t\t\tif (Array.isArray(args.schema)) {\n\t\t\t\tif (!value || typeof value !== 'object') {\n\t\t\t\t\tvalue = {};\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < args.schema.length; i++) {\n\t\t\t\t\tvar field = args.schema[i];\n\t\t\t\t\tif (!field.name) continue;\n\n\t\t\t\t\tif (field.array) {\n\t\t\t\t\t\tresult[field.name] = [];\n\t\t\t\t\t\tvar arr = Array.isArray(value[field.name]) ? value[field.name] : [];\n\n\t\t\t\t\t\tfor (j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t\tresult[field.name].push(rawToValue(app, field, arr[j]));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar val = value.hasOwnProperty(field.name) ? value[field.name] : field.default;\n\t\t\t\t\t\tresult[field.name] = rawToValue(app, field, val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\tcase 'asset':\n\t\t\tif (value instanceof Asset) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'number') {\n\t\t\t\treturn app.assets.get(value) || null;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\treturn app.assets.get(parseInt(value, 10)) || null;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'entity':\n\t\t\tif (value instanceof GraphNode) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\treturn app.getEntityFromIndex(value);\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'rgb':\n\t\tcase 'rgba':\n\t\t\tif (value instanceof Color) {\n\t\t\t\tif (old instanceof Color) {\n\t\t\t\t\told.copy(value);\n\t\t\t\t\treturn old;\n\t\t\t\t}\n\n\t\t\t\treturn value.clone();\n\t\t\t} else if (value instanceof Array && value.length >= 3 && value.length <= 4) {\n\t\t\t\tfor (i = 0; i < value.length; i++) {\n\t\t\t\t\tif (typeof value[i] !== 'number') return null;\n\t\t\t\t}\n\n\t\t\t\tif (!old) old = new Color();\n\t\t\t\told.r = value[0];\n\t\t\t\told.g = value[1];\n\t\t\t\told.b = value[2];\n\t\t\t\told.a = value.length === 3 ? 1 : value[3];\n\t\t\t\treturn old;\n\t\t\t} else if (typeof value === 'string' && /#([0-9abcdef]{2}){3,4}/i.test(value)) {\n\t\t\t\tif (!old) old = new Color();\n\t\t\t\told.fromString(value);\n\t\t\t\treturn old;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'vec2':\n\t\tcase 'vec3':\n\t\tcase 'vec4':\n\t\t\tvar len = parseInt(args.type.slice(3), 10);\n\t\t\tvar vecType = vecLookup[len];\n\n\t\t\tif (value instanceof vecType) {\n\t\t\t\tif (old instanceof vecType) {\n\t\t\t\t\told.copy(value);\n\t\t\t\t\treturn old;\n\t\t\t\t}\n\n\t\t\t\treturn value.clone();\n\t\t\t} else if (value instanceof Array && value.length === len) {\n\t\t\t\tfor (i = 0; i < value.length; i++) {\n\t\t\t\t\tif (typeof value[i] !== 'number') return null;\n\t\t\t\t}\n\n\t\t\t\tif (!old) old = new vecType();\n\n\t\t\t\tfor (i = 0; i < len; i++) old[components[i]] = value[i];\n\n\t\t\t\treturn old;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'curve':\n\t\t\tif (value) {\n\t\t\t\tvar curve;\n\n\t\t\t\tif (value instanceof Curve || value instanceof CurveSet) {\n\t\t\t\t\tcurve = value.clone();\n\t\t\t\t} else {\n\t\t\t\t\tvar CurveType = value.keys[0] instanceof Array ? CurveSet : Curve;\n\t\t\t\t\tcurve = new CurveType(value.keys);\n\t\t\t\t\tcurve.type = value.type;\n\t\t\t\t}\n\n\t\t\t\treturn curve;\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\treturn value;\n}\n\nclass ScriptAttributes {\n\tconstructor(scriptType) {\n\t\tthis.scriptType = scriptType;\n\t\tthis.index = {};\n\t}\n\n\tadd(name, args) {\n\t\tif (this.index[name]) {\n\t\t\treturn;\n\t\t} else if (ScriptAttributes.reservedNames.has(name)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.index[name] = args;\n\t\tObject.defineProperty(this.scriptType.prototype, name, {\n\t\t\tget: function () {\n\t\t\t\treturn this.__attributes[name];\n\t\t\t},\n\t\t\tset: function (raw) {\n\t\t\t\tvar evt = 'attr';\n\t\t\t\tvar evtName = 'attr:' + name;\n\t\t\t\tvar old = this.__attributes[name];\n\t\t\t\tvar oldCopy = old;\n\n\t\t\t\tif (old && args.type !== 'json' && old.clone) {\n\t\t\t\t\tif (this._callbacks[evt] || this._callbacks[evtName]) {\n\t\t\t\t\t\toldCopy = old.clone();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (args.array) {\n\t\t\t\t\tthis.__attributes[name] = [];\n\n\t\t\t\t\tif (raw) {\n\t\t\t\t\t\tvar i;\n\t\t\t\t\t\tvar len;\n\n\t\t\t\t\t\tfor (i = 0, len = raw.length; i < len; i++) {\n\t\t\t\t\t\t\tthis.__attributes[name].push(rawToValue(this.app, args, raw[i], old ? old[i] : null));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.__attributes[name] = rawToValue(this.app, args, raw, old);\n\t\t\t\t}\n\n\t\t\t\tthis.fire(evt, name, this.__attributes[name], oldCopy);\n\t\t\t\tthis.fire(evtName, this.__attributes[name], oldCopy);\n\t\t\t}\n\t\t});\n\t}\n\n\tremove(name) {\n\t\tif (!this.index[name]) return false;\n\t\tdelete this.index[name];\n\t\tdelete this.scriptType.prototype[name];\n\t\treturn true;\n\t}\n\n\thas(name) {\n\t\treturn !!this.index[name];\n\t}\n\n\tget(name) {\n\t\treturn this.index[name] || null;\n\t}\n\n}\n\nScriptAttributes.reservedNames = new Set(['app', 'entity', 'enabled', '_enabled', '_enabledOld', '_destroyed', '__attributes', '__attributesRaw', '__scriptType', '__executionOrder', '_callbacks', 'has', 'get', 'on', 'off', 'fire', 'once', 'hasEvent']);\n\nclass ScriptComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._scripts = [];\n\t\tthis._updateList = new SortedLoopArray({\n\t\t\tsortBy: '__executionOrder'\n\t\t});\n\t\tthis._postUpdateList = new SortedLoopArray({\n\t\t\tsortBy: '__executionOrder'\n\t\t});\n\t\tthis._scriptsIndex = {};\n\t\tthis._destroyedScripts = [];\n\t\tthis._destroyed = false;\n\t\tthis._scriptsData = null;\n\t\tthis._oldState = true;\n\t\tthis._enabled = true;\n\t\tthis._beingEnabled = false;\n\t\tthis._isLoopingThroughScripts = false;\n\t\tthis._executionOrder = -1;\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tonEnable() {\n\t\tthis._beingEnabled = true;\n\n\t\tthis._checkState();\n\n\t\tif (!this.entity._beingEnabled) {\n\t\t\tthis.onPostStateChange();\n\t\t}\n\n\t\tthis._beingEnabled = false;\n\t}\n\n\tonDisable() {\n\t\tthis._checkState();\n\t}\n\n\tonPostStateChange() {\n\t\tvar script;\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) {\n\t\t\tscript = this.scripts[i];\n\n\t\t\tif (script._initialized && !script._postInitialized && script.enabled) {\n\t\t\t\tscript._postInitialized = true;\n\t\t\t\tif (script.postInitialize) this._scriptMethod(script, ScriptComponent.scriptMethods.postInitialize);\n\t\t\t}\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_beginLooping() {\n\t\tvar looping = this._isLoopingThroughScripts;\n\t\tthis._isLoopingThroughScripts = true;\n\t\treturn looping;\n\t}\n\n\t_endLooping(wasLoopingBefore) {\n\t\tthis._isLoopingThroughScripts = wasLoopingBefore;\n\n\t\tif (!this._isLoopingThroughScripts) {\n\t\t\tthis._removeDestroyedScripts();\n\t\t}\n\t}\n\n\t_onSetEnabled(prop, old, value) {\n\t\tthis._beingEnabled = true;\n\n\t\tthis._checkState();\n\n\t\tthis._beingEnabled = false;\n\t}\n\n\t_checkState() {\n\t\tvar state = this.enabled && this.entity.enabled;\n\t\tif (state === this._oldState) return;\n\t\tthis._oldState = state;\n\t\tthis.fire(state ? 'enable' : 'disable');\n\t\tthis.fire('state', state);\n\n\t\tif (state) {\n\t\t\tthis.system._addComponentToEnabled(this);\n\t\t} else {\n\t\t\tthis.system._removeComponentFromEnabled(this);\n\t\t}\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tvar script;\n\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) {\n\t\t\tscript = this.scripts[i];\n\t\t\tscript.enabled = script._enabled;\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0; i < this.scripts.length; i++) {\n\t\t\tvar script = this.scripts[i];\n\t\t\tif (!script) continue;\n\t\t\tthis.destroy(script.__scriptType.__name);\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_removeDestroyedScripts() {\n\t\tvar len = this._destroyedScripts.length;\n\t\tif (!len) return;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tvar script = this._destroyedScripts[i];\n\n\t\t\tthis._removeScriptInstance(script);\n\t\t}\n\n\t\tthis._destroyedScripts.length = 0;\n\n\t\tthis._resetExecutionOrder(0, this._scripts.length);\n\t}\n\n\t_onInitializeAttributes() {\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) this.scripts[i].__initializeAttributes();\n\t}\n\n\t_scriptMethod(script, method, arg) {\n\t\tscript[method](arg);\n\t}\n\n\t_onInitialize() {\n\t\tvar script,\n\t\t\t\tscripts = this._scripts;\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0, len = scripts.length; i < len; i++) {\n\t\t\tscript = scripts[i];\n\n\t\t\tif (!script._initialized && script.enabled) {\n\t\t\t\tscript._initialized = true;\n\t\t\t\tif (script.initialize) this._scriptMethod(script, ScriptComponent.scriptMethods.initialize);\n\t\t\t}\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_onPostInitialize() {\n\t\tthis.onPostStateChange();\n\t}\n\n\t_onUpdate(dt) {\n\t\tvar self = this;\n\t\tvar list = self._updateList;\n\t\tif (!list.length) return;\n\t\tvar script;\n\n\t\tvar wasLooping = self._beginLooping();\n\n\t\tfor (list.loopIndex = 0; list.loopIndex < list.length; list.loopIndex++) {\n\t\t\tscript = list.items[list.loopIndex];\n\n\t\t\tif (script.enabled) {\n\t\t\t\tself._scriptMethod(script, ScriptComponent.scriptMethods.update, dt);\n\t\t\t}\n\t\t}\n\n\t\tself._endLooping(wasLooping);\n\t}\n\n\t_onPostUpdate(dt) {\n\t\tvar self = this;\n\t\tvar list = self._postUpdateList;\n\t\tif (!list.length) return;\n\n\t\tvar wasLooping = self._beginLooping();\n\n\t\tvar script;\n\n\t\tfor (list.loopIndex = 0; list.loopIndex < list.length; list.loopIndex++) {\n\t\t\tscript = list.items[list.loopIndex];\n\n\t\t\tif (script.enabled) {\n\t\t\t\tself._scriptMethod(script, ScriptComponent.scriptMethods.postUpdate, dt);\n\t\t\t}\n\t\t}\n\n\t\tself._endLooping(wasLooping);\n\t}\n\n\t_insertScriptInstance(scriptInstance, index, scriptsLength) {\n\t\tif (index === -1) {\n\t\t\tthis._scripts.push(scriptInstance);\n\n\t\t\tscriptInstance.__executionOrder = scriptsLength;\n\n\t\t\tif (scriptInstance.update) {\n\t\t\t\tthis._updateList.append(scriptInstance);\n\t\t\t}\n\n\t\t\tif (scriptInstance.postUpdate) {\n\t\t\t\tthis._postUpdateList.append(scriptInstance);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._scripts.splice(index, 0, scriptInstance);\n\n\t\t\tscriptInstance.__executionOrder = index;\n\n\t\t\tthis._resetExecutionOrder(index + 1, scriptsLength + 1);\n\n\t\t\tif (scriptInstance.update) {\n\t\t\t\tthis._updateList.insert(scriptInstance);\n\t\t\t}\n\n\t\t\tif (scriptInstance.postUpdate) {\n\t\t\t\tthis._postUpdateList.insert(scriptInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\t_removeScriptInstance(scriptInstance) {\n\t\tvar idx = this._scripts.indexOf(scriptInstance);\n\n\t\tif (idx === -1) return idx;\n\n\t\tthis._scripts.splice(idx, 1);\n\n\t\tif (scriptInstance.update) {\n\t\t\tthis._updateList.remove(scriptInstance);\n\t\t}\n\n\t\tif (scriptInstance.postUpdate) {\n\t\t\tthis._postUpdateList.remove(scriptInstance);\n\t\t}\n\n\t\treturn idx;\n\t}\n\n\t_resetExecutionOrder(startIndex, scriptsLength) {\n\t\tfor (var i = startIndex; i < scriptsLength; i++) {\n\t\t\tthis._scripts[i].__executionOrder = i;\n\t\t}\n\t}\n\n\t_resolveEntityScriptAttribute(attribute, attributeName, oldValue, useGuid, newAttributes, duplicatedIdsMap) {\n\t\tif (attribute.array) {\n\t\t\tvar len = oldValue.length;\n\n\t\t\tif (!len) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newGuidArray = oldValue.slice();\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar guid = newGuidArray[i] instanceof Entity ? newGuidArray[i].getGuid() : newGuidArray[i];\n\n\t\t\t\tif (duplicatedIdsMap[guid]) {\n\t\t\t\t\tnewGuidArray[i] = useGuid ? duplicatedIdsMap[guid].getGuid() : duplicatedIdsMap[guid];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewAttributes[attributeName] = newGuidArray;\n\t\t} else {\n\t\t\tif (oldValue instanceof Entity) {\n\t\t\t\toldValue = oldValue.getGuid();\n\t\t\t} else if (typeof oldValue !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (duplicatedIdsMap[oldValue]) {\n\t\t\t\tnewAttributes[attributeName] = duplicatedIdsMap[oldValue];\n\t\t\t}\n\t\t}\n\t}\n\n\thas(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\treturn !!this._scriptsIndex[nameOrType];\n\t\t}\n\n\t\tif (!nameOrType) return false;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = scriptType.__name;\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tvar scriptInstance = scriptData && scriptData.instance;\n\t\treturn scriptInstance instanceof scriptType;\n\t}\n\n\tget(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\tvar data = this._scriptsIndex[nameOrType];\n\t\t\treturn data ? data.instance : null;\n\t\t}\n\n\t\tif (!nameOrType) return null;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = scriptType.__name;\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tvar scriptInstance = scriptData && scriptData.instance;\n\t\treturn scriptInstance instanceof scriptType ? scriptInstance : null;\n\t}\n\n\tcreate(nameOrType, args = {}) {\n\t\tvar self = this;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tif (scriptType) {\n\t\t\tif (!this._scriptsIndex[scriptName] || !this._scriptsIndex[scriptName].instance) {\n\t\t\t\tvar scriptInstance = new scriptType({\n\t\t\t\t\tapp: this.system.app,\n\t\t\t\t\tentity: this.entity,\n\t\t\t\t\tenabled: args.hasOwnProperty('enabled') ? args.enabled : true,\n\t\t\t\t\tattributes: args.attributes\n\t\t\t\t});\n\t\t\t\tvar len = this._scripts.length;\n\t\t\t\tvar ind = -1;\n\t\t\t\tif (typeof args.ind === 'number' && args.ind !== -1 && len > args.ind) ind = args.ind;\n\n\t\t\t\tthis._insertScriptInstance(scriptInstance, ind, len);\n\n\t\t\t\tthis._scriptsIndex[scriptName] = {\n\t\t\t\t\tinstance: scriptInstance,\n\t\t\t\t\tonSwap: function () {\n\t\t\t\t\t\tself.swap(scriptName);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis[scriptName] = scriptInstance;\n\t\t\t\tif (!args.preloading) scriptInstance.__initializeAttributes();\n\t\t\t\tthis.fire('create', scriptName, scriptInstance);\n\t\t\t\tthis.fire('create:' + scriptName, scriptInstance);\n\t\t\t\tthis.system.app.scripts.on('swap:' + scriptName, this._scriptsIndex[scriptName].onSwap);\n\n\t\t\t\tif (!args.preloading) {\n\t\t\t\t\tif (scriptInstance.enabled && !scriptInstance._initialized) {\n\t\t\t\t\t\tscriptInstance._initialized = true;\n\t\t\t\t\t\tif (scriptInstance.initialize) this._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.initialize);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scriptInstance.enabled && !scriptInstance._postInitialized) {\n\t\t\t\t\t\tscriptInstance._postInitialized = true;\n\t\t\t\t\t\tif (scriptInstance.postInitialize) this._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.postInitialize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn scriptInstance;\n\t\t\t}\n\n\t\t\tconsole.warn('script \\'' + scriptName + '\\' is already added to entity \\'' + this.entity.name + '\\'');\n\t\t} else {\n\t\t\tthis._scriptsIndex[scriptName] = {\n\t\t\t\tawaiting: true,\n\t\t\t\tind: this._scripts.length\n\t\t\t};\n\t\t\tconsole.warn('script \\'' + scriptName + '\\' is not found, awaiting it to be added to registry');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy(nameOrType) {\n\t\tvar scriptName = nameOrType;\n\t\tvar scriptType = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tdelete this._scriptsIndex[scriptName];\n\t\tif (!scriptData) return false;\n\t\tvar scriptInstance = scriptData.instance;\n\n\t\tif (scriptInstance && !scriptInstance._destroyed) {\n\t\t\tscriptInstance.enabled = false;\n\t\t\tscriptInstance._destroyed = true;\n\n\t\t\tif (!this._isLoopingThroughScripts) {\n\t\t\t\tvar ind = this._removeScriptInstance(scriptInstance);\n\n\t\t\t\tif (ind >= 0) {\n\t\t\t\t\tthis._resetExecutionOrder(ind, this._scripts.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._destroyedScripts.push(scriptInstance);\n\t\t\t}\n\t\t}\n\n\t\tthis.system.app.scripts.off('swap:' + scriptName, scriptData.onSwap);\n\t\tdelete this[scriptName];\n\t\tthis.fire('destroy', scriptName, scriptInstance || null);\n\t\tthis.fire('destroy:' + scriptName, scriptInstance || null);\n\t\tif (scriptInstance) scriptInstance.fire('destroy');\n\t\treturn true;\n\t}\n\n\tswap(nameOrType) {\n\t\tvar scriptName = nameOrType;\n\t\tvar scriptType = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tvar old = this._scriptsIndex[scriptName];\n\t\tif (!old || !old.instance) return false;\n\t\tvar scriptInstanceOld = old.instance;\n\n\t\tvar ind = this._scripts.indexOf(scriptInstanceOld);\n\n\t\tvar scriptInstance = new scriptType({\n\t\t\tapp: this.system.app,\n\t\t\tentity: this.entity,\n\t\t\tenabled: scriptInstanceOld.enabled,\n\t\t\tattributes: scriptInstanceOld.__attributes\n\t\t});\n\t\tif (!scriptInstance.swap) return false;\n\n\t\tscriptInstance.__initializeAttributes();\n\n\t\tthis._scripts[ind] = scriptInstance;\n\t\tthis._scriptsIndex[scriptName].instance = scriptInstance;\n\t\tthis[scriptName] = scriptInstance;\n\t\tscriptInstance.__executionOrder = ind;\n\n\t\tif (scriptInstanceOld.update) {\n\t\t\tthis._updateList.remove(scriptInstanceOld);\n\t\t}\n\n\t\tif (scriptInstanceOld.postUpdate) {\n\t\t\tthis._postUpdateList.remove(scriptInstanceOld);\n\t\t}\n\n\t\tif (scriptInstance.update) {\n\t\t\tthis._updateList.insert(scriptInstance);\n\t\t}\n\n\t\tif (scriptInstance.postUpdate) {\n\t\t\tthis._postUpdateList.insert(scriptInstance);\n\t\t}\n\n\t\tthis._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.swap, scriptInstanceOld);\n\n\t\tthis.fire('swap', scriptName, scriptInstance);\n\t\tthis.fire('swap:' + scriptName, scriptInstance);\n\t\treturn true;\n\t}\n\n\tresolveDuplicatedEntityReferenceProperties(oldScriptComponent, duplicatedIdsMap) {\n\t\tvar newScriptComponent = this.entity.script;\n\t\tvar i, j;\n\n\t\tfor (var scriptName in oldScriptComponent._scriptsIndex) {\n\t\t\tvar scriptType = this.system.app.scripts.get(scriptName);\n\n\t\t\tif (!scriptType) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar script = oldScriptComponent._scriptsIndex[scriptName];\n\n\t\t\tif (!script || !script.instance) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar newAttributesRaw = newScriptComponent[scriptName].__attributesRaw;\n\t\t\tvar newAttributes = newScriptComponent[scriptName].__attributes;\n\n\t\t\tif (!newAttributesRaw && !newAttributes) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar useGuid = !!newAttributesRaw;\n\t\t\tvar oldAttributes = script.instance.__attributes;\n\n\t\t\tfor (var attributeName in oldAttributes) {\n\t\t\t\tif (!oldAttributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar attribute = scriptType.attributes.get(attributeName);\n\n\t\t\t\tif (!attribute) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (attribute.type === 'entity') {\n\t\t\t\t\tthis._resolveEntityScriptAttribute(attribute, attributeName, oldAttributes[attributeName], useGuid, newAttributesRaw || newAttributes, duplicatedIdsMap);\n\t\t\t\t} else if (attribute.type === 'json' && Array.isArray(attribute.schema)) {\n\t\t\t\t\tvar oldValue = oldAttributes[attributeName];\n\t\t\t\t\tvar newJsonValue = newAttributesRaw ? newAttributesRaw[attributeName] : newAttributes[attributeName];\n\n\t\t\t\t\tfor (i = 0; i < attribute.schema.length; i++) {\n\t\t\t\t\t\tvar field = attribute.schema[i];\n\n\t\t\t\t\t\tif (field.type !== 'entity') {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (attribute.array) {\n\t\t\t\t\t\t\tfor (j = 0; j < oldValue.length; j++) {\n\t\t\t\t\t\t\t\tthis._resolveEntityScriptAttribute(field, field.name, oldValue[j][field.name], useGuid, newJsonValue[j], duplicatedIdsMap);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._resolveEntityScriptAttribute(field, field.name, oldValue[field.name], useGuid, newJsonValue, duplicatedIdsMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmove(nameOrType, ind) {\n\t\tvar len = this._scripts.length;\n\t\tif (ind >= len || ind < 0) return false;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptName !== 'string') {\n\t\t\tscriptName = nameOrType.__name;\n\t\t} else {\n\t\t\tscriptType = null;\n\t\t}\n\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tif (!scriptData || !scriptData.instance) return false;\n\t\tvar scriptInstance = scriptData.instance;\n\t\tif (scriptType && !(scriptInstance instanceof scriptType)) return false;\n\n\t\tvar indOld = this._scripts.indexOf(scriptInstance);\n\n\t\tif (indOld === -1 || indOld === ind) return false;\n\n\t\tthis._scripts.splice(ind, 0, this._scripts.splice(indOld, 1)[0]);\n\n\t\tthis._resetExecutionOrder(0, len);\n\n\t\tthis._updateList.sort();\n\n\t\tthis._postUpdateList.sort();\n\n\t\tthis.fire('move', scriptName, scriptInstance, ind, indOld);\n\t\tthis.fire('move:' + scriptName, scriptInstance, ind, indOld);\n\t\treturn true;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tvar oldValue = this._enabled;\n\t\tthis._enabled = value;\n\t\tthis.fire('set', 'enabled', oldValue, value);\n\t}\n\n\tget scripts() {\n\t\treturn this._scripts;\n\t}\n\n\tset scripts(value) {\n\t\tthis._scriptsData = value;\n\n\t\tfor (var key in value) {\n\t\t\tif (!value.hasOwnProperty(key)) continue;\n\t\t\tvar script = this._scriptsIndex[key];\n\n\t\t\tif (script) {\n\t\t\t\tif (typeof value[key].enabled === 'boolean') script.enabled = !!value[key].enabled;\n\n\t\t\t\tif (typeof value[key].attributes === 'object') {\n\t\t\t\t\tfor (var attr in value[key].attributes) {\n\t\t\t\t\t\tif (ScriptAttributes.reservedNames.has(attr)) continue;\n\n\t\t\t\t\t\tif (!script.__attributes.hasOwnProperty(attr)) {\n\t\t\t\t\t\t\tvar scriptType = this.system.app.scripts.get(key);\n\t\t\t\t\t\t\tif (scriptType) scriptType.attributes.add(attr, {});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscript[attr] = value[key].attributes[attr];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log(this.order);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nScriptComponent.scriptMethods = {\n\tinitialize: 'initialize',\n\tpostInitialize: 'postInitialize',\n\tupdate: 'update',\n\tpostUpdate: 'postUpdate',\n\tswap: 'swap'\n};\n\nclass ScriptComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst METHOD_INITIALIZE_ATTRIBUTES = '_onInitializeAttributes';\nconst METHOD_INITIALIZE = '_onInitialize';\nconst METHOD_POST_INITIALIZE = '_onPostInitialize';\nconst METHOD_UPDATE = '_onUpdate';\nconst METHOD_POST_UPDATE = '_onPostUpdate';\nvar executionOrderCounter = 0;\n\nclass ScriptComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'script';\n\t\tthis.ComponentType = ScriptComponent;\n\t\tthis.DataType = ScriptComponentData;\n\t\tthis._components = new SortedLoopArray({\n\t\t\tsortBy: '_executionOrder'\n\t\t});\n\t\tthis._enabledComponents = new SortedLoopArray({\n\t\t\tsortBy: '_executionOrder'\n\t\t});\n\t\tthis.preloading = true;\n\t\tthis.on('beforeremove', this._onBeforeRemove, this);\n\t\tComponentSystem.bind('initialize', this._onInitialize, this);\n\t\tComponentSystem.bind('postInitialize', this._onPostInitialize, this);\n\t\tComponentSystem.bind('update', this._onUpdate, this);\n\t\tComponentSystem.bind('postUpdate', this._onPostUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data) {\n\t\tcomponent._executionOrder = executionOrderCounter++;\n\n\t\tthis._components.append(component);\n\n\t\tif (executionOrderCounter > Number.MAX_SAFE_INTEGER) {\n\t\t\tthis._resetExecutionOrder();\n\t\t}\n\n\t\tcomponent.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;\n\n\t\tif (component.enabled && component.entity.enabled) {\n\t\t\tthis._enabledComponents.append(component);\n\t\t}\n\n\t\tif (data.hasOwnProperty('order') && data.hasOwnProperty('scripts')) {\n\t\t\tcomponent._scriptsData = data.scripts;\n\n\t\t\tfor (var i = 0; i < data.order.length; i++) {\n\t\t\t\tcomponent.create(data.order[i], {\n\t\t\t\t\tenabled: data.scripts[data.order[i]].enabled,\n\t\t\t\t\tattributes: data.scripts[data.order[i]].attributes,\n\t\t\t\t\tpreloading: this.preloading\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar i, key;\n\t\tvar order = [];\n\t\tvar scripts = {};\n\n\t\tfor (i = 0; i < entity.script._scripts.length; i++) {\n\t\t\tvar scriptInstance = entity.script._scripts[i];\n\t\t\tvar scriptName = scriptInstance.__scriptType.__name;\n\t\t\torder.push(scriptName);\n\t\t\tvar attributes = {};\n\n\t\t\tfor (key in scriptInstance.__attributes) attributes[key] = scriptInstance.__attributes[key];\n\n\t\t\tscripts[scriptName] = {\n\t\t\t\tenabled: scriptInstance._enabled,\n\t\t\t\tattributes: attributes\n\t\t\t};\n\t\t}\n\n\t\tfor (key in entity.script._scriptsIndex) {\n\t\t\tif (key.awaiting) {\n\t\t\t\torder.splice(key.ind, 0, key);\n\t\t\t}\n\t\t}\n\n\t\tvar data = {\n\t\t\tenabled: entity.script.enabled,\n\t\t\torder: order,\n\t\t\tscripts: scripts\n\t\t};\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\t_resetExecutionOrder() {\n\t\texecutionOrderCounter = 0;\n\n\t\tfor (var i = 0, len = this._components.length; i < len; i++) {\n\t\t\tthis._components.items[i]._executionOrder = executionOrderCounter++;\n\t\t}\n\t}\n\n\t_callComponentMethod(components, name, dt) {\n\t\tfor (components.loopIndex = 0; components.loopIndex < components.length; components.loopIndex++) {\n\t\t\tcomponents.items[components.loopIndex][name](dt);\n\t\t}\n\t}\n\n\t_onInitialize() {\n\t\tthis.preloading = false;\n\n\t\tthis._callComponentMethod(this._components, METHOD_INITIALIZE_ATTRIBUTES);\n\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_INITIALIZE);\n\t}\n\n\t_onPostInitialize() {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_POST_INITIALIZE);\n\t}\n\n\t_onUpdate(dt) {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_UPDATE, dt);\n\t}\n\n\t_onPostUpdate(dt) {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_POST_UPDATE, dt);\n\t}\n\n\t_addComponentToEnabled(component) {\n\t\tthis._enabledComponents.insert(component);\n\t}\n\n\t_removeComponentFromEnabled(component) {\n\t\tthis._enabledComponents.remove(component);\n\t}\n\n\t_onBeforeRemove(entity, component) {\n\t\tvar ind = this._components.items.indexOf(component);\n\n\t\tif (ind >= 0) {\n\t\t\tcomponent._onBeforeRemove();\n\t\t}\n\n\t\tthis._removeComponentFromEnabled(component);\n\n\t\tthis._components.remove(component);\n\t}\n\n}\n\nclass ScriptLegacyComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_scripts\", this.onSetScripts, this);\n\t}\n\n\tsend(name, functionName) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\t\tvar instances = this.entity.script.instances;\n\t\tvar fn;\n\n\t\tif (instances && instances[name]) {\n\t\t\tfn = instances[name].instance[functionName];\n\n\t\t\tif (fn) {\n\t\t\t\treturn fn.apply(instances[name].instance, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this.data.areScriptsLoaded && !this.system.preloading) {\n\t\t\tif (!this.data.initialized) {\n\t\t\t\tthis.system._initializeScriptComponent(this);\n\t\t\t} else {\n\t\t\t\tthis.system._enableScriptComponent(this);\n\t\t\t}\n\n\t\t\tif (!this.data.postInitialized) {\n\t\t\t\tthis.system._postInitializeScriptComponent(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.system._disableScriptComponent(this);\n\t}\n\n\tonSetScripts(name, oldValue, newValue) {\n\t\tif (!this.system._inTools || this.runInTools) {\n\t\t\tif (this._updateScriptAttributes(oldValue, newValue)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.enabled) {\n\t\t\t\tthis.system._disableScriptComponent(this);\n\t\t\t}\n\n\t\t\tthis.system._destroyScriptComponent(this);\n\n\t\t\tthis.data.areScriptsLoaded = false;\n\t\t\tvar scripts = newValue;\n\t\t\tvar urls = scripts.map(function (s) {\n\t\t\t\treturn s.url;\n\t\t\t});\n\n\t\t\tif (this._loadFromCache(urls)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._loadScripts(urls);\n\t\t}\n\t}\n\n\t_updateScriptAttributes(oldValue, newValue) {\n\t\tvar onlyUpdateAttributes = true;\n\n\t\tif (oldValue.length !== newValue.length) {\n\t\t\tonlyUpdateAttributes = false;\n\t\t} else {\n\t\t\tvar i,\n\t\t\t\t\tlen = newValue.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (oldValue[i].url !== newValue[i].url) {\n\t\t\t\t\tonlyUpdateAttributes = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (onlyUpdateAttributes) {\n\t\t\tfor (var key in this.instances) {\n\t\t\t\tif (this.instances.hasOwnProperty(key)) {\n\t\t\t\t\tthis.system._updateAccessors(this.entity, this.instances[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn onlyUpdateAttributes;\n\t}\n\n\t_loadFromCache(urls) {\n\t\tvar i, len;\n\t\tvar cached = [];\n\t\tvar prefix = this.system.app._scriptPrefix || \"\";\n\t\tvar regex = /^http(s)?:\\/\\//i;\n\n\t\tfor (i = 0, len = urls.length; i < len; i++) {\n\t\t\tvar url = urls[i];\n\n\t\t\tif (!regex.test(url)) {\n\t\t\t\turl = path.join(prefix, url);\n\t\t\t}\n\n\t\t\tvar type = this.system.app.loader.getFromCache(url, 'script');\n\n\t\t\tif (!type) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tcached.push(type);\n\t\t}\n\n\t\tfor (i = 0, len = cached.length; i < len; i++) {\n\t\t\tvar ScriptType = cached[i];\n\n\t\t\tif (ScriptType === true) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (ScriptType && this.entity.script) {\n\t\t\t\tif (!this.entity.script.instances[ScriptType._pcScriptName]) {\n\t\t\t\t\tvar instance = new ScriptType(this.entity);\n\n\t\t\t\t\tthis.system._preRegisterInstance(this.entity, urls[i], ScriptType._pcScriptName, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.data) {\n\t\t\tthis.data.areScriptsLoaded = true;\n\t\t}\n\n\t\tif (!this.system.preloading) {\n\t\t\tthis.system.onInitialize(this.entity);\n\t\t\tthis.system.onPostInitialize(this.entity);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t_loadScripts(urls) {\n\t\tvar count = urls.length;\n\t\tvar prefix = this.system.app._scriptPrefix || \"\";\n\t\turls.forEach(function (url) {\n\t\t\tvar _url = null;\n\t\t\tvar _unprefixed = null;\n\n\t\t\tif (url.toLowerCase().startsWith(\"http://\") || url.toLowerCase().startsWith(\"https://\")) {\n\t\t\t\t_unprefixed = url;\n\t\t\t\t_url = url;\n\t\t\t} else {\n\t\t\t\t_unprefixed = url;\n\t\t\t\t_url = path.join(prefix, url);\n\t\t\t}\n\n\t\t\tthis.system.app.loader.load(_url, \"script\", function (err, ScriptType) {\n\t\t\t\tcount--;\n\n\t\t\t\tif (!err) {\n\t\t\t\t\tif (ScriptType && this.entity.script) {\n\t\t\t\t\t\tif (!this.entity.script.instances[ScriptType._pcScriptName]) {\n\t\t\t\t\t\t\tvar instance = new ScriptType(this.entity);\n\n\t\t\t\t\t\t\tthis.system._preRegisterInstance(this.entity, _unprefixed, ScriptType._pcScriptName, instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tthis.data.areScriptsLoaded = true;\n\n\t\t\t\t\tif (!this.system.preloading) {\n\t\t\t\t\t\tthis.system.onInitialize(this.entity);\n\t\t\t\t\t\tthis.system.onPostInitialize(this.entity);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n}\n\nclass ScriptLegacyComponentData {\n\tconstructor() {\n\t\tthis.scripts = [];\n\t\tthis.enabled = true;\n\t\tthis.instances = {};\n\t\tthis._instances = {};\n\t\tthis.runInTools = false;\n\t\tthis.attributes = {};\n\t\tthis.initialized = false;\n\t\tthis.postInitialized = false;\n\t\tthis.areScriptsLoaded = false;\n\t}\n\n}\n\nconst _schema$5 = ['enabled', 'scripts', 'instances', 'runInTools'];\nconst INITIALIZE = \"initialize\";\nconst POST_INITIALIZE = \"postInitialize\";\nconst UPDATE = \"update\";\nconst POST_UPDATE = \"postUpdate\";\nconst FIXED_UPDATE = \"fixedUpdate\";\nconst TOOLS_UPDATE = \"toolsUpdate\";\nconst ON_ENABLE = 'onEnable';\nconst ON_DISABLE = 'onDisable';\n\nclass ScriptLegacyComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'script';\n\t\tthis.ComponentType = ScriptLegacyComponent;\n\t\tthis.DataType = ScriptLegacyComponentData;\n\t\tthis.schema = _schema$5;\n\t\tthis.preloading = false;\n\t\tthis.instancesWithUpdate = [];\n\t\tthis.instancesWithFixedUpdate = [];\n\t\tthis.instancesWithPostUpdate = [];\n\t\tthis.instancesWithToolsUpdate = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind(INITIALIZE, this.onInitialize, this);\n\t\tComponentSystem.bind(POST_INITIALIZE, this.onPostInitialize, this);\n\t\tComponentSystem.bind(UPDATE, this.onUpdate, this);\n\t\tComponentSystem.bind(FIXED_UPDATE, this.onFixedUpdate, this);\n\t\tComponentSystem.bind(POST_UPDATE, this.onPostUpdate, this);\n\t\tComponentSystem.bind(TOOLS_UPDATE, this.onToolsUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['runInTools', 'enabled', 'scripts'];\n\n\t\tif (data.scripts && data.scripts.length) {\n\t\t\tdata.scripts.forEach(function (script) {\n\t\t\t\tif (script.attributes && Array.isArray(script.attributes)) {\n\t\t\t\t\tvar dict = {};\n\n\t\t\t\t\tfor (var i = 0; i < script.attributes.length; i++) {\n\t\t\t\t\t\tdict[script.attributes[i].name] = script.attributes[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tscript.attributes = dict;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar src = this.store[entity.getGuid()];\n\t\tvar data = {\n\t\t\trunInTools: src.data.runInTools,\n\t\t\tscripts: [],\n\t\t\tenabled: src.data.enabled\n\t\t};\n\t\tvar scripts = src.data.scripts;\n\n\t\tfor (var i = 0, len = scripts.length; i < len; i++) {\n\t\t\tvar attributes = scripts[i].attributes;\n\n\t\t\tif (attributes) {\n\t\t\t\tdelete scripts[i].attributes;\n\t\t\t}\n\n\t\t\tdata.scripts.push(extend({}, scripts[i]));\n\n\t\t\tif (attributes) {\n\t\t\t\tdata.scripts[i].attributes = this._cloneAttributes(attributes);\n\t\t\t\tscripts[i].attributes = attributes;\n\t\t\t}\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tif (component.enabled) {\n\t\t\tthis._disableScriptComponent(component);\n\t\t}\n\n\t\tthis._destroyScriptComponent(component);\n\t}\n\n\tonInitialize(root) {\n\t\tthis._registerInstances(root);\n\n\t\tif (root.enabled) {\n\t\t\tif (root.script && root.script.enabled) {\n\t\t\t\tthis._initializeScriptComponent(root.script);\n\t\t\t}\n\n\t\t\tvar children = root._children;\n\t\t\tvar i,\n\t\t\t\t\tlen = children.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\t\tthis.onInitialize(children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonPostInitialize(root) {\n\t\tif (root.enabled) {\n\t\t\tif (root.script && root.script.enabled) {\n\t\t\t\tthis._postInitializeScriptComponent(root.script);\n\t\t\t}\n\n\t\t\tvar children = root._children;\n\t\t\tvar i,\n\t\t\t\t\tlen = children.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\t\tthis.onPostInitialize(children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_callInstancesMethod(script, method) {\n\t\tvar instances = script.data.instances;\n\n\t\tfor (var name in instances) {\n\t\t\tif (instances.hasOwnProperty(name)) {\n\t\t\t\tvar instance = instances[name].instance;\n\n\t\t\t\tif (instance[method]) {\n\t\t\t\t\tinstance[method]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_initializeScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, INITIALIZE);\n\n\t\tscript.data.initialized = true;\n\n\t\tif (script.enabled && script.entity.enabled) {\n\t\t\tthis._enableScriptComponent(script);\n\t\t}\n\t}\n\n\t_enableScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, ON_ENABLE);\n\t}\n\n\t_disableScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, ON_DISABLE);\n\t}\n\n\t_destroyScriptComponent(script) {\n\t\tvar index;\n\t\tvar instances = script.data.instances;\n\n\t\tfor (var name in instances) {\n\t\t\tif (instances.hasOwnProperty(name)) {\n\t\t\t\tvar instance = instances[name].instance;\n\n\t\t\t\tif (instance.destroy) {\n\t\t\t\t\tinstance.destroy();\n\t\t\t\t}\n\n\t\t\t\tif (instance.update) {\n\t\t\t\t\tindex = this.instancesWithUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.fixedUpdate) {\n\t\t\t\t\tindex = this.instancesWithFixedUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithFixedUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.postUpdate) {\n\t\t\t\t\tindex = this.instancesWithPostUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithPostUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.toolsUpdate) {\n\t\t\t\t\tindex = this.instancesWithToolsUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithToolsUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (script.instances[name].instance === script[name]) {\n\t\t\t\t\tdelete script[name];\n\t\t\t\t}\n\n\t\t\t\tdelete script.instances[name];\n\t\t\t}\n\t\t}\n\t}\n\n\t_postInitializeScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, POST_INITIALIZE);\n\n\t\tscript.data.postInitialized = true;\n\t}\n\n\t_updateInstances(method, updateList, dt) {\n\t\tvar item;\n\n\t\tfor (var i = 0, len = updateList.length; i < len; i++) {\n\t\t\titem = updateList[i];\n\n\t\t\tif (item && item.entity && item.entity.enabled && item.entity.script.enabled) {\n\t\t\t\titem[method](dt);\n\t\t\t}\n\t\t}\n\t}\n\n\tonUpdate(dt) {\n\t\tthis._updateInstances(UPDATE, this.instancesWithUpdate, dt);\n\t}\n\n\tonFixedUpdate(dt) {\n\t\tthis._updateInstances(FIXED_UPDATE, this.instancesWithFixedUpdate, dt);\n\t}\n\n\tonPostUpdate(dt) {\n\t\tthis._updateInstances(POST_UPDATE, this.instancesWithPostUpdate, dt);\n\t}\n\n\tonToolsUpdate(dt) {\n\t\tthis._updateInstances(TOOLS_UPDATE, this.instancesWithToolsUpdate, dt);\n\t}\n\n\tbroadcast(name, functionName) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\t\tvar id, data, fn;\n\t\tvar dataStore = this.store;\n\n\t\tfor (id in dataStore) {\n\t\t\tif (dataStore.hasOwnProperty(id)) {\n\t\t\t\tdata = dataStore[id].data;\n\n\t\t\t\tif (data.instances[name]) {\n\t\t\t\t\tfn = data.instances[name].instance[functionName];\n\n\t\t\t\t\tif (fn) {\n\t\t\t\t\t\tfn.apply(data.instances[name].instance, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_preRegisterInstance(entity, url, name, instance) {\n\t\tif (entity.script) {\n\t\t\tentity.script.data._instances = entity.script.data._instances || {};\n\n\t\t\tif (entity.script.data._instances[name]) {\n\t\t\t\tthrow Error(\"Script name collision '\" + name + \"'. Scripts from '\" + url + \"' and '\" + entity.script.data._instances[name].url + \"' {\" + entity.getGuid() + \"}\");\n\t\t\t}\n\n\t\t\tentity.script.data._instances[name] = {\n\t\t\t\turl: url,\n\t\t\t\tname: name,\n\t\t\t\tinstance: instance\n\t\t\t};\n\t\t}\n\t}\n\n\t_registerInstances(entity) {\n\t\tvar preRegistered, instance, instanceName;\n\n\t\tif (entity.script) {\n\t\t\tif (entity.script.data._instances) {\n\t\t\t\tentity.script.instances = entity.script.data._instances;\n\n\t\t\t\tfor (instanceName in entity.script.instances) {\n\t\t\t\t\tpreRegistered = entity.script.instances[instanceName];\n\t\t\t\t\tinstance = preRegistered.instance;\n\t\t\t\t\tevents.attach(instance);\n\n\t\t\t\t\tif (instance.update) {\n\t\t\t\t\t\tthis.instancesWithUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.fixedUpdate) {\n\t\t\t\t\t\tthis.instancesWithFixedUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.postUpdate) {\n\t\t\t\t\t\tthis.instancesWithPostUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.toolsUpdate) {\n\t\t\t\t\t\tthis.instancesWithToolsUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (entity.script.scripts) {\n\t\t\t\t\t\tthis._createAccessors(entity, preRegistered);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (entity.script[instanceName]) {\n\t\t\t\t\t\tthrow Error(\"Script with name '\" + instanceName + \"' is already attached to Script Component\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tentity.script[instanceName] = instance;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete entity.script.data._instances;\n\t\t\t}\n\t\t}\n\n\t\tvar children = entity._children;\n\t\tvar i,\n\t\t\t\tlen = children.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\tthis._registerInstances(children[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t_cloneAttributes(attributes) {\n\t\tvar result = {};\n\n\t\tfor (var key in attributes) {\n\t\t\tif (!attributes.hasOwnProperty(key)) continue;\n\n\t\t\tif (attributes[key].type !== 'entity') {\n\t\t\t\tresult[key] = extend({}, attributes[key]);\n\t\t\t} else {\n\t\t\t\tvar val = attributes[key].value;\n\t\t\t\tdelete attributes[key].value;\n\t\t\t\tresult[key] = extend({}, attributes[key]);\n\t\t\t\tresult[key].value = val;\n\t\t\t\tattributes[key].value = val;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_createAccessors(entity, instance) {\n\t\tvar self = this;\n\t\tvar i;\n\t\tvar len = entity.script.scripts.length;\n\t\tvar url = instance.url;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tvar script = entity.script.scripts[i];\n\n\t\t\tif (script.url === url) {\n\t\t\t\tvar attributes = script.attributes;\n\n\t\t\t\tif (script.name && attributes) {\n\t\t\t\t\tfor (var key in attributes) {\n\t\t\t\t\t\tif (attributes.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tself._createAccessor(attributes[key], instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tentity.script.data.attributes[script.name] = self._cloneAttributes(attributes);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_createAccessor(attribute, instance) {\n\t\tvar self = this;\n\t\tattribute = {\n\t\t\tname: attribute.name,\n\t\t\tvalue: attribute.value,\n\t\t\ttype: attribute.type\n\t\t};\n\n\t\tself._convertAttributeValue(attribute);\n\n\t\tObject.defineProperty(instance.instance, attribute.name, {\n\t\t\tget: function () {\n\t\t\t\treturn attribute.value;\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tvar oldValue = attribute.value;\n\t\t\t\tattribute.value = value;\n\n\t\t\t\tself._convertAttributeValue(attribute);\n\n\t\t\t\tinstance.instance.fire(\"set\", attribute.name, oldValue, attribute.value);\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\n\t_updateAccessors(entity, instance) {\n\t\tvar self = this;\n\t\tvar i;\n\t\tvar len = entity.script.scripts.length;\n\t\tvar key;\n\t\tvar url = instance.url;\n\t\tvar scriptComponent, script, name, attributes;\n\t\tvar previousAttributes;\n\t\tvar oldAttribute;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tscriptComponent = entity.script;\n\t\t\tscript = scriptComponent.scripts[i];\n\n\t\t\tif (script.url === url) {\n\t\t\t\tname = script.name;\n\t\t\t\tattributes = script.attributes;\n\n\t\t\t\tif (name) {\n\t\t\t\t\tif (attributes) {\n\t\t\t\t\t\tfor (key in attributes) {\n\t\t\t\t\t\t\tif (attributes.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tself._createAccessor(attributes[key], instance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tpreviousAttributes = scriptComponent.data.attributes[name];\n\n\t\t\t\t\tif (previousAttributes) {\n\t\t\t\t\t\tfor (key in previousAttributes) {\n\t\t\t\t\t\t\toldAttribute = previousAttributes[key];\n\n\t\t\t\t\t\t\tif (!(key in attributes)) {\n\t\t\t\t\t\t\t\tdelete instance.instance[oldAttribute.name];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (attributes[key].value !== oldAttribute.value) {\n\t\t\t\t\t\t\t\t\tif (instance.instance.onAttributeChanged) {\n\t\t\t\t\t\t\t\t\t\tinstance.instance.onAttributeChanged(oldAttribute.name, oldAttribute.value, attributes[key].value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attributes) {\n\t\t\t\t\t\tscriptComponent.data.attributes[name] = self._cloneAttributes(attributes);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete scriptComponent.data.attributes[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_convertAttributeValue(attribute) {\n\t\tif (attribute.type === 'rgb' || attribute.type === 'rgba') {\n\t\t\tif (Array.isArray(attribute.value)) {\n\t\t\t\tattribute.value = attribute.value.length === 3 ? new Color(attribute.value[0], attribute.value[1], attribute.value[2]) : new Color(attribute.value[0], attribute.value[1], attribute.value[2], attribute.value[3]);\n\t\t\t}\n\t\t} else if (attribute.type === 'vec2') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec2(attribute.value[0], attribute.value[1]);\n\t\t} else if (attribute.type === 'vec3' || attribute.type === 'vector') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec3(attribute.value[0], attribute.value[1], attribute.value[2]);\n\t\t} else if (attribute.type === 'vec4') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec4(attribute.value[0], attribute.value[1], attribute.value[2], attribute.value[3]);\n\t\t} else if (attribute.type === 'entity') {\n\t\t\tif (attribute.value !== null && typeof attribute.value === 'string') attribute.value = this.app.root.findByGuid(attribute.value);\n\t\t} else if (attribute.type === 'curve' || attribute.type === 'colorcurve') {\n\t\t\tvar curveType = attribute.value.keys[0] instanceof Array ? CurveSet : Curve;\n\t\t\tattribute.value = new curveType(attribute.value.keys);\n\t\t\tattribute.value.type = attribute.value.type;\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(ScriptLegacyComponent.prototype, _schema$5);\n\nvar _inputScreenPosition = new Vec2();\n\nvar _inputWorldPosition = new Vec3();\n\nvar _rayOrigin = new Vec3();\n\nvar _rayDirection = new Vec3();\n\nvar _planeOrigin = new Vec3();\n\nvar _planeNormal = new Vec3();\n\nvar _entityRotation = new Quat();\n\nconst OPPOSITE_AXIS = {\n\tx: 'y',\n\ty: 'x'\n};\n\nclass ElementDragHelper extends EventHandler {\n\tconstructor(element, axis) {\n\t\tsuper();\n\n\t\tif (!element || !(element instanceof ElementComponent)) {\n\t\t\tthrow new Error('Element was null or not an ElementComponent');\n\t\t}\n\n\t\tif (axis && axis !== 'x' && axis !== 'y') {\n\t\t\tthrow new Error('Unrecognized axis: ' + axis);\n\t\t}\n\n\t\tthis._element = element;\n\t\tthis._app = element.system.app;\n\t\tthis._axis = axis || null;\n\t\tthis._enabled = true;\n\t\tthis._dragScale = new Vec3();\n\t\tthis._dragStartMousePosition = new Vec3();\n\t\tthis._dragStartHandlePosition = new Vec3();\n\t\tthis._deltaMousePosition = new Vec3();\n\t\tthis._deltaHandlePosition = new Vec3();\n\t\tthis._isDragging = false;\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis._element[onOrOff]('mousedown', this._onMouseDownOrTouchStart, this);\n\n\t\tthis._element[onOrOff]('touchstart', this._onMouseDownOrTouchStart, this);\n\t}\n\n\t_toggleDragListeners(onOrOff) {\n\t\tvar isOn = onOrOff === 'on';\n\t\tvar addOrRemoveEventListener = isOn ? 'addEventListener' : 'removeEventListener';\n\n\t\tif (this._hasDragListeners && isOn) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._handleMouseUpOrTouchEnd) {\n\t\t\tthis._handleMouseUpOrTouchEnd = this._onMouseUpOrTouchEnd.bind(this);\n\t\t}\n\n\t\tif (this._app.mouse) {\n\t\t\tthis._app.mouse[onOrOff]('mousemove', this._onMove, this);\n\n\t\t\twindow[addOrRemoveEventListener]('mouseup', this._handleMouseUpOrTouchEnd, false);\n\t\t}\n\n\t\tif (platform.touch) {\n\t\t\tthis._app.touch[onOrOff]('touchmove', this._onMove, this);\n\n\t\t\twindow[addOrRemoveEventListener]('touchend', this._handleMouseUpOrTouchEnd, false);\n\t\t\twindow[addOrRemoveEventListener]('touchcancel', this._handleMouseUpOrTouchEnd, false);\n\t\t}\n\n\t\tthis._hasDragListeners = isOn;\n\t}\n\n\t_onMouseDownOrTouchStart(event) {\n\t\tif (this._element && !this._isDragging && this.enabled) {\n\t\t\tthis._dragCamera = event.camera;\n\n\t\t\tthis._calculateDragScale();\n\n\t\t\tvar currentMousePosition = this._screenToLocal(event);\n\n\t\t\tif (currentMousePosition) {\n\t\t\t\tthis._toggleDragListeners('on');\n\n\t\t\t\tthis._isDragging = true;\n\n\t\t\t\tthis._dragStartMousePosition.copy(currentMousePosition);\n\n\t\t\t\tthis._dragStartHandlePosition.copy(this._element.entity.getLocalPosition());\n\n\t\t\t\tthis.fire('drag:start');\n\t\t\t}\n\t\t}\n\t}\n\n\t_onMouseUpOrTouchEnd() {\n\t\tif (this._isDragging) {\n\t\t\tthis._isDragging = false;\n\n\t\t\tthis._toggleDragListeners('off');\n\n\t\t\tthis.fire('drag:end');\n\t\t}\n\t}\n\n\t_screenToLocal(event) {\n\t\tthis._determineInputPosition(event);\n\n\t\tthis._chooseRayOriginAndDirection();\n\n\t\t_planeOrigin.copy(this._element.entity.getPosition());\n\n\t\t_planeNormal.copy(this._element.entity.forward).mulScalar(-1);\n\n\t\tvar denominator = _planeNormal.dot(_rayDirection);\n\n\t\tif (Math.abs(denominator) > 0) {\n\t\t\tvar rayOriginToPlaneOrigin = _planeOrigin.sub(_rayOrigin);\n\n\t\t\tvar collisionDistance = rayOriginToPlaneOrigin.dot(_planeNormal) / denominator;\n\n\t\t\tvar position = _rayOrigin.add(_rayDirection.mulScalar(collisionDistance));\n\n\t\t\t_entityRotation.copy(this._element.entity.getRotation()).invert().transformVector(position, position);\n\n\t\t\tposition.mul(this._dragScale);\n\t\t\treturn position;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_determineInputPosition(event) {\n\t\tvar devicePixelRatio = this._app.graphicsDevice.maxPixelRatio;\n\n\t\tif (typeof event.x !== 'undefined' && typeof event.y !== 'undefined') {\n\t\t\t_inputScreenPosition.x = event.x * devicePixelRatio;\n\t\t\t_inputScreenPosition.y = event.y * devicePixelRatio;\n\t\t} else if (event.changedTouches) {\n\t\t\t_inputScreenPosition.x = event.changedTouches[0].x * devicePixelRatio;\n\t\t\t_inputScreenPosition.y = event.changedTouches[0].y * devicePixelRatio;\n\t\t} else {\n\t\t\tconsole.warn('Could not determine position from input event');\n\t\t}\n\t}\n\n\t_chooseRayOriginAndDirection() {\n\t\tif (this._element.screen && this._element.screen.screen.screenSpace) {\n\t\t\t_rayOrigin.set(_inputScreenPosition.x, -_inputScreenPosition.y, 0);\n\n\t\t\t_rayDirection.set(0, 0, -1);\n\t\t} else {\n\t\t\t_inputWorldPosition.copy(this._dragCamera.screenToWorld(_inputScreenPosition.x, _inputScreenPosition.y, 1));\n\n\t\t\t_rayOrigin.copy(this._dragCamera.entity.getPosition());\n\n\t\t\t_rayDirection.copy(_inputWorldPosition).sub(_rayOrigin).normalize();\n\t\t}\n\t}\n\n\t_calculateDragScale() {\n\t\tvar current = this._element.entity.parent;\n\t\tvar screen = this._element.screen && this._element.screen.screen;\n\t\tvar isWithin2DScreen = screen && screen.screenSpace;\n\t\tvar screenScale = isWithin2DScreen ? screen.scale : 1;\n\t\tvar dragScale = this._dragScale;\n\t\tdragScale.set(screenScale, screenScale, screenScale);\n\n\t\twhile (current) {\n\t\t\tdragScale.mul(current.getLocalScale());\n\t\t\tcurrent = current.parent;\n\n\t\t\tif (isWithin2DScreen && current.screen) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tdragScale.x = 1 / dragScale.x;\n\t\tdragScale.y = 1 / dragScale.y;\n\t\tdragScale.z = 1 / dragScale.z;\n\t}\n\n\t_onMove(event) {\n\t\tif (this._element && this._isDragging && this.enabled && this._element.enabled && this._element.entity.enabled) {\n\t\t\tvar currentMousePosition = this._screenToLocal(event);\n\n\t\t\tif (this._dragStartMousePosition && currentMousePosition) {\n\t\t\t\tthis._deltaMousePosition.copy(currentMousePosition).sub(this._dragStartMousePosition);\n\n\t\t\t\tthis._deltaHandlePosition.copy(this._dragStartHandlePosition).add(this._deltaMousePosition);\n\n\t\t\t\tif (this._axis) {\n\t\t\t\t\tvar currentPosition = this._element.entity.getLocalPosition();\n\n\t\t\t\t\tvar constrainedAxis = OPPOSITE_AXIS[this._axis];\n\t\t\t\t\tthis._deltaHandlePosition[constrainedAxis] = currentPosition[constrainedAxis];\n\t\t\t\t}\n\n\t\t\t\tthis._element.entity.setLocalPosition(this._deltaHandlePosition);\n\n\t\t\t\tthis.fire('drag:move', this._deltaHandlePosition);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._toggleLifecycleListeners('off');\n\n\t\tthis._toggleDragListeners('off');\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = value;\n\t}\n\n\tget isDragging() {\n\t\treturn this._isDragging;\n\t}\n\n}\n\nconst SCROLL_MODE_CLAMP = 0;\nconst SCROLL_MODE_BOUNCE = 1;\nconst SCROLL_MODE_INFINITE = 2;\nconst SCROLLBAR_VISIBILITY_SHOW_ALWAYS = 0;\nconst SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED = 1;\n\nvar _tempScrollValue = new Vec2();\n\nclass ScrollViewComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._viewportReference = new EntityReference(this, 'viewportEntity', {\n\t\t\t'element#gain': this._onViewportElementGain,\n\t\t\t'element#resize': this._onSetContentOrViewportSize\n\t\t});\n\t\tthis._contentReference = new EntityReference(this, 'contentEntity', {\n\t\t\t'element#gain': this._onContentElementGain,\n\t\t\t'element#lose': this._onContentElementLose,\n\t\t\t'element#resize': this._onSetContentOrViewportSize\n\t\t});\n\t\tthis._scrollbarUpdateFlags = {};\n\t\tthis._scrollbarReferences = {};\n\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL] = new EntityReference(this, 'horizontalScrollbarEntity', {\n\t\t\t'scrollbar#set:value': this._onSetHorizontalScrollbarValue,\n\t\t\t'scrollbar#gain': this._onHorizontalScrollbarGain\n\t\t});\n\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL] = new EntityReference(this, 'verticalScrollbarEntity', {\n\t\t\t'scrollbar#set:value': this._onSetVerticalScrollbarValue,\n\t\t\t'scrollbar#gain': this._onVerticalScrollbarGain\n\t\t});\n\t\tthis._prevContentSizes = {};\n\t\tthis._prevContentSizes[ORIENTATION_HORIZONTAL] = null;\n\t\tthis._prevContentSizes[ORIENTATION_VERTICAL] = null;\n\t\tthis._scroll = new Vec2();\n\t\tthis._velocity = new Vec3();\n\t\tthis._dragStartPosition = new Vec3();\n\t\tthis._disabledContentInput = false;\n\t\tthis._disabledContentInputEntities = [];\n\n\t\tthis._toggleLifecycleListeners('on', system);\n\n\t\tthis._toggleElementListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff, system) {\n\t\tthis[onOrOff]('set_horizontal', this._onSetHorizontalScrollingEnabled, this);\n\t\tthis[onOrOff]('set_vertical', this._onSetVerticalScrollingEnabled, this);\n\t\tsystem.app.systems.element[onOrOff]('add', this._onElementComponentAdd, this);\n\t\tsystem.app.systems.element[onOrOff]('beforeremove', this._onElementComponentRemove, this);\n\t}\n\n\t_toggleElementListeners(onOrOff) {\n\t\tif (this.entity.element) {\n\t\t\tif (onOrOff === 'on' && this._hasElementListeners) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.entity.element[onOrOff]('resize', this._onSetContentOrViewportSize, this);\n\t\t\tthis._hasElementListeners = onOrOff === 'on';\n\t\t}\n\t}\n\n\t_onElementComponentAdd(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleElementListeners('on');\n\t\t}\n\t}\n\n\t_onElementComponentRemove(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleElementListeners('off');\n\t\t}\n\t}\n\n\t_onViewportElementGain() {\n\t\tthis._syncAll();\n\t}\n\n\t_onContentElementGain() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._contentDragHelper = new ElementDragHelper(this._contentReference.entity.element);\n\n\t\tthis._contentDragHelper.on('drag:start', this._onContentDragStart, this);\n\n\t\tthis._contentDragHelper.on('drag:end', this._onContentDragEnd, this);\n\n\t\tthis._contentDragHelper.on('drag:move', this._onContentDragMove, this);\n\n\t\tthis._prevContentSizes[ORIENTATION_HORIZONTAL] = null;\n\t\tthis._prevContentSizes[ORIENTATION_VERTICAL] = null;\n\n\t\tthis._syncAll();\n\t}\n\n\t_onContentElementLose() {\n\t\tthis._destroyDragHelper();\n\t}\n\n\t_onContentDragStart() {\n\t\tif (this._contentReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis._dragStartPosition.copy(this._contentReference.entity.getLocalPosition());\n\t\t}\n\t}\n\n\t_onContentDragEnd() {\n\t\tthis._prevContentDragPosition = null;\n\n\t\tthis._enableContentInput();\n\t}\n\n\t_onContentDragMove(position) {\n\t\tif (this._contentReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis._wasDragged = true;\n\n\t\t\tthis._setScrollFromContentPosition(position);\n\n\t\t\tthis._setVelocityFromContentPositionDelta(position);\n\n\t\t\tif (!this._disabledContentInput) {\n\t\t\t\tvar dx = position.x - this._dragStartPosition.x;\n\t\t\t\tvar dy = position.y - this._dragStartPosition.y;\n\n\t\t\t\tif (Math.abs(dx) > this.dragThreshold || Math.abs(dy) > this.dragThreshold) {\n\t\t\t\t\tthis._disableContentInput();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSetContentOrViewportSize() {\n\t\tthis._syncAll();\n\t}\n\n\t_onSetHorizontalScrollbarValue(scrollValueX) {\n\t\tif (!this._scrollbarUpdateFlags[ORIENTATION_HORIZONTAL] && this.enabled && this.entity.enabled) {\n\t\t\tthis._onSetScroll(scrollValueX, null);\n\t\t}\n\t}\n\n\t_onSetVerticalScrollbarValue(scrollValueY) {\n\t\tif (!this._scrollbarUpdateFlags[ORIENTATION_VERTICAL] && this.enabled && this.entity.enabled) {\n\t\t\tthis._onSetScroll(null, scrollValueY);\n\t\t}\n\t}\n\n\t_onSetHorizontalScrollingEnabled() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\t}\n\n\t_onSetVerticalScrollingEnabled() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t}\n\n\t_onHorizontalScrollbarGain() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_HORIZONTAL);\n\t}\n\n\t_onVerticalScrollbarGain() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_VERTICAL);\n\t}\n\n\t_onSetScroll(x, y, resetVelocity) {\n\t\tif (resetVelocity !== false) {\n\t\t\tthis._velocity.set(0, 0, 0);\n\t\t}\n\n\t\tvar hasChanged = false;\n\t\thasChanged |= this._updateAxis(x, 'x', ORIENTATION_HORIZONTAL);\n\t\thasChanged |= this._updateAxis(y, 'y', ORIENTATION_VERTICAL);\n\n\t\tif (hasChanged) {\n\t\t\tthis.fire('set:scroll', this._scroll);\n\t\t}\n\t}\n\n\t_updateAxis(scrollValue, axis, orientation) {\n\t\tvar hasChanged = scrollValue !== null && Math.abs(scrollValue - this._scroll[axis]) > 1e-5;\n\n\t\tif (hasChanged || this._isDragging() || scrollValue === 0) {\n\t\t\tthis._scroll[axis] = this._determineNewScrollValue(scrollValue, axis, orientation);\n\n\t\t\tthis._syncContentPosition(orientation);\n\n\t\t\tthis._syncScrollbarPosition(orientation);\n\t\t}\n\n\t\treturn hasChanged;\n\t}\n\n\t_determineNewScrollValue(scrollValue, axis, orientation) {\n\t\tif (!this._getScrollingEnabled(orientation)) {\n\t\t\treturn this._scroll[axis];\n\t\t}\n\n\t\tswitch (this.scrollMode) {\n\t\t\tcase SCROLL_MODE_CLAMP:\n\t\t\t\treturn math.clamp(scrollValue, 0, this._getMaxScrollValue(orientation));\n\n\t\t\tcase SCROLL_MODE_BOUNCE:\n\t\t\t\tthis._setVelocityFromOvershoot(scrollValue, axis, orientation);\n\n\t\t\t\treturn scrollValue;\n\n\t\t\tcase SCROLL_MODE_INFINITE:\n\t\t\t\treturn scrollValue;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn('Unhandled scroll mode:' + this.scrollMode);\n\t\t\t\treturn scrollValue;\n\t\t}\n\t}\n\n\t_syncAll() {\n\t\tthis._syncContentPosition(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncContentPosition(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t}\n\n\t_syncContentPosition(orientation) {\n\t\tvar axis = this._getAxis(orientation);\n\n\t\tvar sign = this._getSign(orientation);\n\n\t\tvar contentEntity = this._contentReference.entity;\n\n\t\tif (contentEntity) {\n\t\t\tvar prevContentSize = this._prevContentSizes[orientation];\n\n\t\t\tvar currContentSize = this._getContentSize(orientation);\n\n\t\t\tif (prevContentSize !== null && Math.abs(prevContentSize - currContentSize) > 1e-4) {\n\t\t\t\tvar prevMaxOffset = this._getMaxOffset(orientation, prevContentSize);\n\n\t\t\t\tvar currMaxOffset = this._getMaxOffset(orientation, currContentSize);\n\n\t\t\t\tif (currMaxOffset === 0) {\n\t\t\t\t\tthis._scroll[axis] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis._scroll[axis] = math.clamp(this._scroll[axis] * prevMaxOffset / currMaxOffset, 0, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar offset = this._scroll[axis] * this._getMaxOffset(orientation);\n\n\t\t\tvar contentPosition = contentEntity.getLocalPosition();\n\t\t\tcontentPosition[axis] = offset * sign;\n\t\t\tcontentEntity.setLocalPosition(contentPosition);\n\t\t\tthis._prevContentSizes[orientation] = currContentSize;\n\t\t}\n\t}\n\n\t_syncScrollbarPosition(orientation) {\n\t\tvar axis = this._getAxis(orientation);\n\n\t\tvar scrollbarEntity = this._scrollbarReferences[orientation].entity;\n\n\t\tif (scrollbarEntity && scrollbarEntity.scrollbar) {\n\t\t\tthis._scrollbarUpdateFlags[orientation] = true;\n\t\t\tscrollbarEntity.scrollbar.value = this._scroll[axis];\n\t\t\tscrollbarEntity.scrollbar.handleSize = this._getScrollbarHandleSize(axis, orientation);\n\t\t\tthis._scrollbarUpdateFlags[orientation] = false;\n\t\t}\n\t}\n\n\t_syncScrollbarEnabledState(orientation) {\n\t\tvar entity = this._scrollbarReferences[orientation].entity;\n\n\t\tif (entity) {\n\t\t\tvar isScrollingEnabled = this._getScrollingEnabled(orientation);\n\n\t\t\tvar requestedVisibility = this._getScrollbarVisibility(orientation);\n\n\t\t\tswitch (requestedVisibility) {\n\t\t\t\tcase SCROLLBAR_VISIBILITY_SHOW_ALWAYS:\n\t\t\t\t\tentity.enabled = isScrollingEnabled;\n\t\t\t\t\treturn;\n\n\t\t\t\tcase SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED:\n\t\t\t\t\tentity.enabled = isScrollingEnabled && this._contentIsLargerThanViewport(orientation);\n\t\t\t\t\treturn;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn('Unhandled scrollbar visibility:' + requestedVisibility);\n\t\t\t\t\tentity.enabled = isScrollingEnabled;\n\t\t\t}\n\t\t}\n\t}\n\n\t_contentIsLargerThanViewport(orientation) {\n\t\treturn this._getContentSize(orientation) > this._getViewportSize(orientation);\n\t}\n\n\t_contentPositionToScrollValue(contentPosition) {\n\t\tvar maxOffsetH = this._getMaxOffset(ORIENTATION_HORIZONTAL);\n\n\t\tvar maxOffsetV = this._getMaxOffset(ORIENTATION_VERTICAL);\n\n\t\tif (maxOffsetH === 0) {\n\t\t\t_tempScrollValue.x = 0;\n\t\t} else {\n\t\t\t_tempScrollValue.x = contentPosition.x / maxOffsetH;\n\t\t}\n\n\t\tif (maxOffsetV === 0) {\n\t\t\t_tempScrollValue.y = 0;\n\t\t} else {\n\t\t\t_tempScrollValue.y = contentPosition.y / -maxOffsetV;\n\t\t}\n\n\t\treturn _tempScrollValue;\n\t}\n\n\t_getMaxOffset(orientation, contentSize) {\n\t\tcontentSize = contentSize === undefined ? this._getContentSize(orientation) : contentSize;\n\n\t\tvar viewportSize = this._getViewportSize(orientation);\n\n\t\tif (contentSize < viewportSize) {\n\t\t\treturn -this._getViewportSize(orientation);\n\t\t}\n\n\t\treturn viewportSize - contentSize;\n\t}\n\n\t_getMaxScrollValue(orientation) {\n\t\treturn this._contentIsLargerThanViewport(orientation) ? 1 : 0;\n\t}\n\n\t_getScrollbarHandleSize(axis, orientation) {\n\t\tvar viewportSize = this._getViewportSize(orientation);\n\n\t\tvar contentSize = this._getContentSize(orientation);\n\n\t\tif (Math.abs(contentSize) < 0.001) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tvar handleSize = Math.min(viewportSize / contentSize, 1);\n\n\t\tvar overshoot = this._toOvershoot(this._scroll[axis], orientation);\n\n\t\tif (overshoot === 0) {\n\t\t\treturn handleSize;\n\t\t}\n\n\t\treturn handleSize / (1 + Math.abs(overshoot));\n\t}\n\n\t_getViewportSize(orientation) {\n\t\treturn this._getSize(orientation, this._viewportReference);\n\t}\n\n\t_getContentSize(orientation) {\n\t\treturn this._getSize(orientation, this._contentReference);\n\t}\n\n\t_getSize(orientation, entityReference) {\n\t\tif (entityReference.entity && entityReference.entity.element) {\n\t\t\treturn entityReference.entity.element[this._getCalculatedDimension(orientation)];\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_getScrollingEnabled(orientation) {\n\t\tif (orientation === ORIENTATION_HORIZONTAL) {\n\t\t\treturn this.horizontal;\n\t\t} else if (orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.vertical;\n\t\t}\n\n\t\tconsole.warn('Unrecognized orientation: ' + orientation);\n\t}\n\n\t_getScrollbarVisibility(orientation) {\n\t\tif (orientation === ORIENTATION_HORIZONTAL) {\n\t\t\treturn this.horizontalScrollbarVisibility;\n\t\t} else if (orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.verticalScrollbarVisibility;\n\t\t}\n\n\t\tconsole.warn('Unrecognized orientation: ' + orientation);\n\t}\n\n\t_getSign(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 1 : -1;\n\t}\n\n\t_getAxis(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 'x' : 'y';\n\t}\n\n\t_getCalculatedDimension(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 'calculatedWidth' : 'calculatedHeight';\n\t}\n\n\t_destroyDragHelper() {\n\t\tif (this._contentDragHelper) {\n\t\t\tthis._contentDragHelper.destroy();\n\t\t}\n\t}\n\n\tonUpdate() {\n\t\tif (this._contentReference.entity) {\n\t\t\tthis._updateVelocity();\n\n\t\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t\t}\n\t}\n\n\t_updateVelocity() {\n\t\tif (!this._isDragging()) {\n\t\t\tif (this.scrollMode === SCROLL_MODE_BOUNCE) {\n\t\t\t\tif (this._hasOvershoot('x', ORIENTATION_HORIZONTAL)) {\n\t\t\t\t\tthis._setVelocityFromOvershoot(this.scroll.x, 'x', ORIENTATION_HORIZONTAL);\n\t\t\t\t}\n\n\t\t\t\tif (this._hasOvershoot('y', ORIENTATION_VERTICAL)) {\n\t\t\t\t\tthis._setVelocityFromOvershoot(this.scroll.y, 'y', ORIENTATION_VERTICAL);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._velocity.x *= 1 - this.friction;\n\t\t\tthis._velocity.y *= 1 - this.friction;\n\n\t\t\tif (Math.abs(this._velocity.x) > 1e-4 || Math.abs(this._velocity.y) > 1e-4) {\n\t\t\t\tvar position = this._contentReference.entity.getLocalPosition();\n\n\t\t\t\tposition.x += this._velocity.x;\n\t\t\t\tposition.y += this._velocity.y;\n\n\t\t\t\tthis._contentReference.entity.setLocalPosition(position);\n\n\t\t\t\tthis._setScrollFromContentPosition(position);\n\t\t\t}\n\t\t}\n\t}\n\n\t_hasOvershoot(axis, orientation) {\n\t\treturn Math.abs(this._toOvershoot(this.scroll[axis], orientation)) > 0.001;\n\t}\n\n\t_toOvershoot(scrollValue, orientation) {\n\t\tvar maxScrollValue = this._getMaxScrollValue(orientation);\n\n\t\tif (scrollValue < 0) {\n\t\t\treturn scrollValue;\n\t\t} else if (scrollValue > maxScrollValue) {\n\t\t\treturn scrollValue - maxScrollValue;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_setVelocityFromOvershoot(scrollValue, axis, orientation) {\n\t\tvar overshootValue = this._toOvershoot(scrollValue, orientation);\n\n\t\tvar overshootPixels = overshootValue * this._getMaxOffset(orientation) * this._getSign(orientation);\n\n\t\tif (Math.abs(overshootPixels) > 0) {\n\t\t\tthis._velocity[axis] = -overshootPixels / (this.bounceAmount * 50 + 1);\n\t\t}\n\t}\n\n\t_setVelocityFromContentPositionDelta(position) {\n\t\tif (this._prevContentDragPosition) {\n\t\t\tthis._velocity.sub2(position, this._prevContentDragPosition);\n\n\t\t\tthis._prevContentDragPosition.copy(position);\n\t\t} else {\n\t\t\tthis._velocity.set(0, 0, 0);\n\n\t\t\tthis._prevContentDragPosition = position.clone();\n\t\t}\n\t}\n\n\t_setScrollFromContentPosition(position) {\n\t\tvar scrollValue = this._contentPositionToScrollValue(position);\n\n\t\tif (this._isDragging()) {\n\t\t\tscrollValue = this._applyScrollValueTension(scrollValue);\n\t\t}\n\n\t\tthis._onSetScroll(scrollValue.x, scrollValue.y, false);\n\t}\n\n\t_applyScrollValueTension(scrollValue) {\n\t\tvar max;\n\t\tvar overshoot;\n\t\tvar factor = 1;\n\t\tmax = this._getMaxScrollValue(ORIENTATION_HORIZONTAL);\n\t\tovershoot = this._toOvershoot(scrollValue.x, ORIENTATION_HORIZONTAL);\n\n\t\tif (overshoot > 0) {\n\t\t\tscrollValue.x = max + factor * Math.log10(1 + overshoot);\n\t\t} else if (overshoot < 0) {\n\t\t\tscrollValue.x = -factor * Math.log10(1 - overshoot);\n\t\t}\n\n\t\tmax = this._getMaxScrollValue(ORIENTATION_VERTICAL);\n\t\tovershoot = this._toOvershoot(scrollValue.y, ORIENTATION_VERTICAL);\n\n\t\tif (overshoot > 0) {\n\t\t\tscrollValue.y = max + factor * Math.log10(1 + overshoot);\n\t\t} else if (overshoot < 0) {\n\t\t\tscrollValue.y = -factor * Math.log10(1 - overshoot);\n\t\t}\n\n\t\treturn scrollValue;\n\t}\n\n\t_isDragging() {\n\t\treturn this._contentDragHelper && this._contentDragHelper.isDragging;\n\t}\n\n\t_setScrollbarComponentsEnabled(enabled) {\n\t\tif (this._scrollbarReferences[ORIENTATION_HORIZONTAL].hasComponent('scrollbar')) {\n\t\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL].entity.scrollbar.enabled = enabled;\n\t\t}\n\n\t\tif (this._scrollbarReferences[ORIENTATION_VERTICAL].hasComponent('scrollbar')) {\n\t\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL].entity.scrollbar.enabled = enabled;\n\t\t}\n\t}\n\n\t_setContentDraggingEnabled(enabled) {\n\t\tif (this._contentDragHelper) {\n\t\t\tthis._contentDragHelper.enabled = enabled;\n\t\t}\n\t}\n\n\t_enableContentInput() {\n\t\twhile (this._disabledContentInputEntities.length) {\n\t\t\tvar e = this._disabledContentInputEntities.pop();\n\n\t\t\tif (e.element) {\n\t\t\t\te.element.useInput = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._disabledContentInput = false;\n\t}\n\n\t_disableContentInput() {\n\t\tvar self = this;\n\n\t\tvar _disableInput = function _disableInput(e) {\n\t\t\tif (e.element && e.element.useInput) {\n\t\t\t\tself._disabledContentInputEntities.push(e);\n\n\t\t\t\te.element.useInput = false;\n\t\t\t}\n\n\t\t\tvar children = e.children;\n\t\t\tvar i, l;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\t_disableInput(children[i]);\n\t\t\t}\n\t\t};\n\n\t\tvar contentEntity = this._contentReference.entity;\n\n\t\tif (contentEntity) {\n\t\t\tvar children = contentEntity.children;\n\t\t\tvar i,\n\t\t\t\t\tl = children.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t_disableInput(children[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis._disabledContentInput = true;\n\t}\n\n\tonEnable() {\n\t\tthis._viewportReference.onParentComponentEnable();\n\n\t\tthis._contentReference.onParentComponentEnable();\n\n\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL].onParentComponentEnable();\n\n\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL].onParentComponentEnable();\n\n\t\tthis._setScrollbarComponentsEnabled(true);\n\n\t\tthis._setContentDraggingEnabled(true);\n\n\t\tthis._syncAll();\n\t}\n\n\tonDisable() {\n\t\tthis._setScrollbarComponentsEnabled(false);\n\n\t\tthis._setContentDraggingEnabled(false);\n\t}\n\n\tonRemove() {\n\t\tthis._toggleLifecycleListeners('off', this.system);\n\n\t\tthis._toggleElementListeners('off');\n\n\t\tthis._destroyDragHelper();\n\t}\n\n\tget scroll() {\n\t\treturn this._scroll;\n\t}\n\n\tset scroll(value) {\n\t\tthis._onSetScroll(value.x, value.y);\n\t}\n\n}\n\nclass ScrollViewComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$4 = [{\n\tname: 'enabled',\n\ttype: 'boolean'\n}, {\n\tname: 'horizontal',\n\ttype: 'boolean'\n}, {\n\tname: 'vertical',\n\ttype: 'boolean'\n}, {\n\tname: 'scrollMode',\n\ttype: 'number'\n}, {\n\tname: 'bounceAmount',\n\ttype: 'number'\n}, {\n\tname: 'friction',\n\ttype: 'number'\n}, {\n\tname: 'dragThreshold',\n\ttype: 'number'\n}, {\n\tname: 'horizontalScrollbarVisibility',\n\ttype: 'number'\n}, {\n\tname: 'verticalScrollbarVisibility',\n\ttype: 'number'\n}, {\n\tname: 'viewportEntity',\n\ttype: 'entity'\n}, {\n\tname: 'contentEntity',\n\ttype: 'entity'\n}, {\n\tname: 'horizontalScrollbarEntity',\n\ttype: 'entity'\n}, {\n\tname: 'verticalScrollbarEntity',\n\ttype: 'entity'\n}];\nconst DEFAULT_DRAG_THRESHOLD = 10;\n\nclass ScrollViewComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'scrollview';\n\t\tthis.ComponentType = ScrollViewComponent;\n\t\tthis.DataType = ScrollViewComponentData;\n\t\tthis.schema = _schema$4;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.dragThreshold === undefined) {\n\t\t\tdata.dragThreshold = DEFAULT_DRAG_THRESHOLD;\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, _schema$4);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tvar entity = components[id].entity;\n\t\t\tvar component = entity.scrollview;\n\n\t\t\tif (component.enabled && entity.enabled) {\n\t\t\t\tcomponent.onUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ScrollViewComponent.prototype, _schema$4);\n\nclass ScrollbarComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._app = system.app;\n\t\tthis._handleReference = new EntityReference(this, 'handleEntity', {\n\t\t\t'element#gain': this._onHandleElementGain,\n\t\t\t'element#lose': this._onHandleElementLose,\n\t\t\t'element#set:anchor': this._onSetHandleAlignment,\n\t\t\t'element#set:margin': this._onSetHandleAlignment,\n\t\t\t'element#set:pivot': this._onSetHandleAlignment\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis[onOrOff]('set_value', this._onSetValue, this);\n\t\tthis[onOrOff]('set_handleSize', this._onSetHandleSize, this);\n\t\tthis[onOrOff]('set_orientation', this._onSetOrientation, this);\n\t}\n\n\t_onHandleElementGain() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._handleDragHelper = new ElementDragHelper(this._handleReference.entity.element, this._getAxis());\n\n\t\tthis._handleDragHelper.on('drag:move', this._onHandleDrag, this);\n\n\t\tthis._updateHandlePositionAndSize();\n\t}\n\n\t_onHandleElementLose() {\n\t\tthis._destroyDragHelper();\n\t}\n\n\t_onHandleDrag(position) {\n\t\tif (this._handleReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis.value = this._handlePositionToScrollValue(position[this._getAxis()]);\n\t\t}\n\t}\n\n\t_onSetValue(name, oldValue, newValue) {\n\t\tif (Math.abs(newValue - oldValue) > 1e-5) {\n\t\t\tthis.data.value = math.clamp(newValue, 0, 1);\n\n\t\t\tthis._updateHandlePositionAndSize();\n\n\t\t\tthis.fire('set:value', this.data.value);\n\t\t}\n\t}\n\n\t_onSetHandleSize(name, oldValue, newValue) {\n\t\tif (Math.abs(newValue - oldValue) > 1e-5) {\n\t\t\tthis.data.handleSize = math.clamp(newValue, 0, 1);\n\n\t\t\tthis._updateHandlePositionAndSize();\n\t\t}\n\t}\n\n\t_onSetHandleAlignment() {\n\t\tthis._updateHandlePositionAndSize();\n\t}\n\n\t_onSetOrientation(name, oldValue, newValue) {\n\t\tif (newValue !== oldValue && this._handleReference.hasComponent('element')) {\n\t\t\tthis._handleReference.entity.element[this._getOppositeDimension()] = 0;\n\t\t}\n\t}\n\n\t_updateHandlePositionAndSize() {\n\t\tvar handleEntity = this._handleReference.entity;\n\t\tvar handleElement = handleEntity && handleEntity.element;\n\n\t\tif (handleEntity) {\n\t\t\tvar position = handleEntity.getLocalPosition();\n\t\t\tposition[this._getAxis()] = this._getHandlePosition();\n\n\t\t\tthis._handleReference.entity.setLocalPosition(position);\n\t\t}\n\n\t\tif (handleElement) {\n\t\t\thandleElement[this._getDimension()] = this._getHandleLength();\n\t\t}\n\t}\n\n\t_handlePositionToScrollValue(handlePosition) {\n\t\treturn handlePosition * this._getSign() / this._getUsableTrackLength();\n\t}\n\n\t_scrollValueToHandlePosition(value) {\n\t\treturn value * this._getSign() * this._getUsableTrackLength();\n\t}\n\n\t_getUsableTrackLength() {\n\t\treturn Math.max(this._getTrackLength() - this._getHandleLength(), 0.001);\n\t}\n\n\t_getTrackLength() {\n\t\tif (this.entity.element) {\n\t\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? this.entity.element.calculatedWidth : this.entity.element.calculatedHeight;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_getHandleLength() {\n\t\treturn this._getTrackLength() * this.handleSize;\n\t}\n\n\t_getHandlePosition() {\n\t\treturn this._scrollValueToHandlePosition(this.value);\n\t}\n\n\t_getSign() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 1 : -1;\n\t}\n\n\t_getAxis() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'x' : 'y';\n\t}\n\n\t_getDimension() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'width' : 'height';\n\t}\n\n\t_getOppositeDimension() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'height' : 'width';\n\t}\n\n\t_destroyDragHelper() {\n\t\tif (this._handleDragHelper) {\n\t\t\tthis._handleDragHelper.destroy();\n\t\t}\n\t}\n\n\t_setHandleDraggingEnabled(enabled) {\n\t\tif (this._handleDragHelper) {\n\t\t\tthis._handleDragHelper.enabled = enabled;\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis._handleReference.onParentComponentEnable();\n\n\t\tthis._setHandleDraggingEnabled(true);\n\t}\n\n\tonDisable() {\n\t\tthis._setHandleDraggingEnabled(false);\n\t}\n\n\tonRemove() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._toggleLifecycleListeners('off');\n\t}\n\n}\n\nclass ScrollbarComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$3 = [{\n\tname: 'enabled',\n\ttype: 'boolean'\n}, {\n\tname: 'orientation',\n\ttype: 'number'\n}, {\n\tname: 'value',\n\ttype: 'number'\n}, {\n\tname: 'handleSize',\n\ttype: 'number'\n}, {\n\tname: 'handleEntity',\n\ttype: 'entity'\n}];\n\nclass ScrollbarComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'scrollbar';\n\t\tthis.ComponentType = ScrollbarComponent;\n\t\tthis.DataType = ScrollbarComponentData;\n\t\tthis.schema = _schema$3;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$3);\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ScrollbarComponent.prototype, _schema$3);\n\nconst STATE_PLAYING = 0;\nconst STATE_PAUSED = 1;\nconst STATE_STOPPED = 2;\n\nfunction capTime(time, duration) {\n\treturn time % duration || 0;\n}\n\nclass SoundInstance extends EventHandler {\n\tconstructor(manager, sound, options) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._volume = options.volume !== undefined ? math.clamp(Number(options.volume) || 0, 0, 1) : 1;\n\t\tthis._pitch = options.pitch !== undefined ? Math.max(0.01, Number(options.pitch) || 0) : 1;\n\t\tthis._loop = !!(options.loop !== undefined ? options.loop : false);\n\t\tthis._sound = sound;\n\t\tthis._state = STATE_STOPPED;\n\t\tthis._suspended = false;\n\t\tthis._suspendEndEvent = false;\n\t\tthis._suspendInstanceEvents = false;\n\t\tthis._playWhenLoaded = true;\n\t\tthis._startTime = Math.max(0, Number(options.startTime) || 0);\n\t\tthis._duration = Math.max(0, Number(options.duration) || 0);\n\t\tthis._startOffset = null;\n\t\tthis.source = null;\n\t\tthis._onPlayCallback = options.onPlay;\n\t\tthis._onPauseCallback = options.onPause;\n\t\tthis._onResumeCallback = options.onResume;\n\t\tthis._onStopCallback = options.onStop;\n\t\tthis._onEndCallback = options.onEnd;\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis._startedAt = 0;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = 0;\n\t\t\tthis._inputNode = null;\n\t\t\tthis._connectorNode = null;\n\t\t\tthis._firstNode = null;\n\t\t\tthis._lastNode = null;\n\n\t\t\tthis._initializeNodes();\n\n\t\t\tthis._endedHandler = this._onEnded.bind(this);\n\t\t} else {\n\t\t\tthis._isReady = false;\n\t\t\tthis._loadedMetadataHandler = this._onLoadedMetadata.bind(this);\n\t\t\tthis._timeUpdateHandler = this._onTimeUpdate.bind(this);\n\t\t\tthis._endedHandler = this._onEnded.bind(this);\n\n\t\t\tthis._createSource();\n\t\t}\n\t}\n\n\t_onPlay() {\n\t\tthis.fire('play');\n\t\tif (this._onPlayCallback) this._onPlayCallback(this);\n\t}\n\n\t_onPause() {\n\t\tthis.fire('pause');\n\t\tif (this._onPauseCallback) this._onPauseCallback(this);\n\t}\n\n\t_onResume() {\n\t\tthis.fire('resume');\n\t\tif (this._onResumeCallback) this._onResumeCallback(this);\n\t}\n\n\t_onStop() {\n\t\tthis.fire('stop');\n\t\tif (this._onStopCallback) this._onStopCallback(this);\n\t}\n\n\t_onEnded() {\n\t\tif (this._suspendEndEvent) {\n\t\t\tthis._suspendEndEvent = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire('end');\n\t\tif (this._onEndCallback) this._onEndCallback(this);\n\t\tthis.stop();\n\t}\n\n\t_onManagerVolumeChange() {\n\t\tthis.volume = this._volume;\n\t}\n\n\t_onManagerSuspend() {\n\t\tif (this._state === STATE_PLAYING && !this._suspended) {\n\t\t\tthis._suspended = true;\n\t\t\tthis.pause();\n\t\t}\n\t}\n\n\t_onManagerResume() {\n\t\tif (this._suspended) {\n\t\t\tthis._suspended = false;\n\t\t\tthis.resume();\n\t\t}\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = !!value;\n\n\t\tif (this.source) {\n\t\t\tthis.source.loop = this._loop;\n\t\t}\n\t}\n\n\tget startTime() {\n\t\treturn this._startTime;\n\t}\n\n\tset startTime(value) {\n\t\tthis._startTime = Math.max(0, Number(value) || 0);\n\t\tconst isPlaying = this._state === STATE_PLAYING;\n\t\tthis.stop();\n\n\t\tif (isPlaying) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tget duration() {\n\t\tif (!this._sound) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (this._duration) {\n\t\t\treturn capTime(this._duration, this._sound.duration);\n\t\t}\n\n\t\treturn this._sound.duration;\n\t}\n\n\tset duration(value) {\n\t\tthis._duration = Math.max(0, Number(value) || 0);\n\t\tconst isPlaying = this._state === STATE_PLAYING;\n\t\tthis.stop();\n\n\t\tif (isPlaying) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tget isPlaying() {\n\t\treturn this._state === STATE_PLAYING;\n\t}\n\n\tget isPaused() {\n\t\treturn this._state === STATE_PAUSED;\n\t}\n\n\tget isStopped() {\n\t\treturn this._state === STATE_STOPPED;\n\t}\n\n\tget isSuspended() {\n\t\treturn this._suspended;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(SoundInstance.prototype, {\n\t\t_initializeNodes: function () {\n\t\t\tthis.gain = this._manager.context.createGain();\n\t\t\tthis._inputNode = this.gain;\n\t\t\tthis._connectorNode = this.gain;\n\n\t\t\tthis._connectorNode.connect(this._manager.context.destination);\n\t\t},\n\t\tplay: function () {\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\n\t\t\tlet offset = capTime(this._startOffset, this.duration);\n\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\tthis._startOffset = null;\n\n\t\t\tif (this._duration) {\n\t\t\t\tthis.source.start(0, offset, this._duration);\n\t\t\t} else {\n\t\t\t\tthis.source.start(0, offset);\n\t\t\t}\n\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = offset;\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.pitch = this._pitch;\n\n\t\t\tthis._manager.on('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.on('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.on('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.on('destroy', this._onManagerDestroy, this);\n\n\t\t\tif (this._manager.suspended) {\n\t\t\t\tthis._onManagerSuspend();\n\t\t\t}\n\n\t\t\tif (!this._suspendInstanceEvents) this._onPlay();\n\t\t\treturn true;\n\t\t},\n\t\tpause: function () {\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (this._state !== STATE_PLAYING || !this.source) return false;\n\n\t\t\tthis._updateCurrentTime();\n\n\t\t\tthis._state = STATE_PAUSED;\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.stop(0);\n\t\t\tthis.source = null;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onPause();\n\t\t\treturn true;\n\t\t},\n\t\tresume: function () {\n\t\t\tif (this._state !== STATE_PAUSED) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\n\t\t\tlet offset = this.currentTime;\n\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\toffset = capTime(this._startOffset, this.duration);\n\t\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\t\tthis._startOffset = null;\n\t\t\t}\n\n\t\t\tif (this._duration) {\n\t\t\t\tthis.source.start(0, offset, this._duration);\n\t\t\t} else {\n\t\t\t\tthis.source.start(0, offset);\n\t\t\t}\n\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._currentOffset = offset;\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.pitch = this._pitch;\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (!this._suspendInstanceEvents) this._onResume();\n\t\t\treturn true;\n\t\t},\n\t\tstop: function () {\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (this._state === STATE_STOPPED || !this.source) return false;\n\n\t\t\tthis._manager.off('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.off('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.off('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.off('destroy', this._onManagerDestroy, this);\n\n\t\t\tthis._startedAt = 0;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = 0;\n\t\t\tthis._startOffset = null;\n\t\t\tthis._suspendEndEvent = true;\n\n\t\t\tif (this._state === STATE_PLAYING) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t}\n\n\t\t\tthis.source = null;\n\t\t\tthis._state = STATE_STOPPED;\n\t\t\tif (!this._suspendInstanceEvents) this._onStop();\n\t\t\treturn true;\n\t\t},\n\t\tsetExternalNodes: function (firstNode, lastNode) {\n\t\t\tif (!firstNode) {\n\t\t\t\tconsole.error('The firstNode must be a valid Audio Node');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!lastNode) {\n\t\t\t\tlastNode = firstNode;\n\t\t\t}\n\n\t\t\tconst speakers = this._manager.context.destination;\n\n\t\t\tif (this._firstNode !== firstNode) {\n\t\t\t\tif (this._firstNode) {\n\t\t\t\t\tthis._connectorNode.disconnect(this._firstNode);\n\t\t\t\t} else {\n\t\t\t\t\tthis._connectorNode.disconnect(speakers);\n\t\t\t\t}\n\n\t\t\t\tthis._firstNode = firstNode;\n\n\t\t\t\tthis._connectorNode.connect(firstNode);\n\t\t\t}\n\n\t\t\tif (this._lastNode !== lastNode) {\n\t\t\t\tif (this._lastNode) {\n\t\t\t\t\tthis._lastNode.disconnect(speakers);\n\t\t\t\t}\n\n\t\t\t\tthis._lastNode = lastNode;\n\n\t\t\t\tthis._lastNode.connect(speakers);\n\t\t\t}\n\t\t},\n\t\tclearExternalNodes: function () {\n\t\t\tconst speakers = this._manager.context.destination;\n\n\t\t\tif (this._firstNode) {\n\t\t\t\tthis._connectorNode.disconnect(this._firstNode);\n\n\t\t\t\tthis._firstNode = null;\n\t\t\t}\n\n\t\t\tif (this._lastNode) {\n\t\t\t\tthis._lastNode.disconnect(speakers);\n\n\t\t\t\tthis._lastNode = null;\n\t\t\t}\n\n\t\t\tthis._connectorNode.connect(speakers);\n\t\t},\n\t\tgetExternalNodes: function () {\n\t\t\treturn [this._firstNode, this._lastNode];\n\t\t},\n\t\t_createSource: function () {\n\t\t\tif (!this._sound) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst context = this._manager.context;\n\n\t\t\tif (this._sound.buffer) {\n\t\t\t\tthis.source = context.createBufferSource();\n\t\t\t\tthis.source.buffer = this._sound.buffer;\n\t\t\t\tthis.source.connect(this._inputNode);\n\t\t\t\tthis.source.onended = this._endedHandler;\n\t\t\t\tthis.source.loopStart = capTime(this._startTime, this.source.buffer.duration);\n\n\t\t\t\tif (this._duration) {\n\t\t\t\t\tthis.source.loopEnd = Math.max(this.source.loopStart, capTime(this._startTime + this._duration, this.source.buffer.duration));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.source;\n\t\t},\n\t\t_updateCurrentTime: function () {\n\t\t\tthis._currentTime = capTime((this._manager.context.currentTime - this._startedAt) * this._pitch + this._currentOffset, this.duration);\n\t\t},\n\t\t_onManagerDestroy: function () {\n\t\t\tif (this.source && this._state === STATE_PLAYING) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'volume', {\n\t\tget: function () {\n\t\t\treturn this._volume;\n\t\t},\n\t\tset: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis._volume = volume;\n\n\t\t\tif (this.gain) {\n\t\t\t\tthis.gain.gain.value = volume * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'pitch', {\n\t\tget: function () {\n\t\t\treturn this._pitch;\n\t\t},\n\t\tset: function (pitch) {\n\t\t\tthis._currentOffset = this.currentTime;\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._pitch = Math.max(Number(pitch) || 0, 0.01);\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate.value = this._pitch;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'sound', {\n\t\tget: function () {\n\t\t\treturn this._sound;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._sound = value;\n\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t} else {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'currentTime', {\n\t\tget: function () {\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\treturn this._startOffset;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_PAUSED) {\n\t\t\t\treturn this._currentTime;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_STOPPED || !this.source) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tthis._updateCurrentTime();\n\n\t\t\treturn this._currentTime;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (value < 0) return;\n\n\t\t\tif (this._state === STATE_PLAYING) {\n\t\t\t\tconst suspend = this._suspendInstanceEvents;\n\t\t\t\tthis._suspendInstanceEvents = true;\n\t\t\t\tthis.stop();\n\t\t\t\tthis._startOffset = value;\n\t\t\t\tthis.play();\n\t\t\t\tthis._suspendInstanceEvents = suspend;\n\t\t\t} else {\n\t\t\t\tthis._startOffset = value;\n\t\t\t\tthis._currentTime = value;\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tObject.assign(SoundInstance.prototype, {\n\t\tplay: function () {\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tif (!this._createSource()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.pitch = this._pitch;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.source.play();\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\n\t\t\tthis._manager.on('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.on('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.on('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.on('destroy', this._onManagerDestroy, this);\n\n\t\t\tif (this._manager.suspended) this._onManagerSuspend();\n\t\t\tif (!this._suspendInstanceEvents) this._onPlay();\n\t\t\treturn true;\n\t\t},\n\t\tpause: function () {\n\t\t\tif (!this.source || this._state !== STATE_PLAYING) return false;\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.pause();\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis._state = STATE_PAUSED;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onPause();\n\t\t\treturn true;\n\t\t},\n\t\tresume: function () {\n\t\t\tif (!this.source || this._state !== STATE_PAUSED) return false;\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\n\t\t\tif (this.source.paused) {\n\t\t\t\tthis.source.play();\n\t\t\t\tif (!this._suspendInstanceEvents) this._onResume();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tstop: function () {\n\t\t\tif (!this.source || this._state === STATE_STOPPED) return false;\n\n\t\t\tthis._manager.off('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.off('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.off('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.off('destroy', this._onManagerDestroy, this);\n\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.pause();\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis._state = STATE_STOPPED;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onStop();\n\t\t\treturn true;\n\t\t},\n\t\tsetExternalNodes: function () {},\n\t\tclearExternalNodes: function () {},\n\t\tgetExternalNodes: function () {\n\t\t\treturn [null, null];\n\t\t},\n\t\t_onLoadedMetadata: function () {\n\t\t\tthis.source.removeEventListener('loadedmetadata', this._loadedMetadataHandler);\n\t\t\tthis._isReady = true;\n\t\t\tlet offset = capTime(this._startOffset, this.duration);\n\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\tthis._startOffset = null;\n\t\t\tthis.source.currentTime = offset;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tif (this._sound && this._sound.audio) {\n\t\t\t\tthis._isReady = false;\n\t\t\t\tthis.source = this._sound.audio.cloneNode(true);\n\t\t\t\tthis.source.addEventListener('loadedmetadata', this._loadedMetadataHandler);\n\t\t\t\tthis.source.addEventListener('timeupdate', this._timeUpdateHandler);\n\t\t\t\tthis.source.onended = this._endedHandler;\n\t\t\t}\n\n\t\t\treturn this.source;\n\t\t},\n\t\t_onTimeUpdate: function () {\n\t\t\tif (!this._duration) return;\n\n\t\t\tif (this.source.currentTime > capTime(this._startTime + this._duration, this.source.duration)) {\n\t\t\t\tif (this.loop) {\n\t\t\t\t\tthis.source.currentTime = capTime(this._startTime, this.source.duration);\n\t\t\t\t} else {\n\t\t\t\t\tthis.source.removeEventListener('timeupdate', this._timeUpdateHandler);\n\t\t\t\t\tthis.source.pause();\n\n\t\t\t\t\tthis._onEnded();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onManagerDestroy: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'volume', {\n\t\tget: function () {\n\t\t\treturn this._volume;\n\t\t},\n\t\tset: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis._volume = volume;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.volume = volume * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'pitch', {\n\t\tget: function () {\n\t\t\treturn this._pitch;\n\t\t},\n\t\tset: function (pitch) {\n\t\t\tthis._pitch = Math.max(Number(pitch) || 0, 0.01);\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate = this._pitch;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'sound', {\n\t\tget: function () {\n\t\t\treturn this._sound;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.stop();\n\t\t\tthis._sound = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'currentTime', {\n\t\tget: function () {\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\treturn this._startOffset;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_STOPPED || !this.source) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.source.currentTime - this._startTime;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (value < 0) return;\n\t\t\tthis._startOffset = value;\n\n\t\t\tif (this.source && this._isReady) {\n\t\t\t\tthis.source.currentTime = capTime(this._startTime + capTime(value, this.duration), this._sound.duration);\n\t\t\t\tthis._startOffset = null;\n\t\t\t}\n\t\t}\n\t});\n}\n\nconst MAX_DISTANCE = 10000;\n\nclass SoundInstance3d extends SoundInstance {\n\tconstructor(manager, sound, options) {\n\t\tsuper(manager, sound, options);\n\t\toptions = options || {};\n\t\tthis._position = new Vec3();\n\t\tif (options.position) this.position = options.position;\n\t\tthis._velocity = new Vec3();\n\t\tif (options.velocity) this.velocity = options.velocity;\n\t\tthis.maxDistance = options.maxDistance !== undefined ? Number(options.maxDistance) : MAX_DISTANCE;\n\t\tthis.refDistance = options.refDistance !== undefined ? Number(options.refDistance) : 1;\n\t\tthis.rollOffFactor = options.rollOffFactor !== undefined ? Number(options.rollOffFactor) : 1;\n\t\tthis.distanceModel = options.distanceModel !== undefined ? options.distanceModel : DISTANCE_LINEAR;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(SoundInstance3d.prototype, {\n\t\t_initializeNodes: function () {\n\t\t\tthis.gain = this._manager.context.createGain();\n\t\t\tthis.panner = this._manager.context.createPanner();\n\t\t\tthis.panner.connect(this.gain);\n\t\t\tthis._inputNode = this.panner;\n\t\t\tthis._connectorNode = this.gain;\n\n\t\t\tthis._connectorNode.connect(this._manager.context.destination);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'position', {\n\t\tget: function () {\n\t\t\treturn this._position;\n\t\t},\n\t\tset: function (position) {\n\t\t\tthis._position.copy(position);\n\n\t\t\tthis.panner.setPosition(position.x, position.y, position.z);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'velocity', {\n\t\tget: function () {\n\t\t\treturn this._velocity;\n\t\t},\n\t\tset: function (velocity) {\n\t\t\tthis._velocity.copy(velocity);\n\n\t\t\tthis.panner.setVelocity(velocity.x, velocity.y, velocity.z);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'maxDistance', {\n\t\tget: function () {\n\t\t\treturn this.panner.maxDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.maxDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'refDistance', {\n\t\tget: function () {\n\t\t\treturn this.panner.refDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.refDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {\n\t\tget: function () {\n\t\t\treturn this.panner.rolloffFactor;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.rolloffFactor = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'distanceModel', {\n\t\tget: function () {\n\t\t\treturn this.panner.distanceModel;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.distanceModel = value;\n\t\t}\n\t});\n} else {\n\tlet offset = new Vec3();\n\n\tconst fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rollOffFactor, distanceModel) {\n\t\toffset = offset.sub2(posOne, posTwo);\n\t\tconst distance = offset.length();\n\n\t\tif (distance < refDistance) {\n\t\t\treturn 1;\n\t\t} else if (distance > maxDistance) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet result = 0;\n\n\t\tif (distanceModel === DISTANCE_LINEAR) {\n\t\t\tresult = 1 - rollOffFactor * (distance - refDistance) / (maxDistance - refDistance);\n\t\t} else if (distanceModel === DISTANCE_INVERSE) {\n\t\t\tresult = refDistance / (refDistance + rollOffFactor * (distance - refDistance));\n\t\t} else if (distanceModel === DISTANCE_EXPONENTIAL) {\n\t\t\tresult = Math.pow(distance / refDistance, -rollOffFactor);\n\t\t}\n\n\t\treturn math.clamp(result, 0, 1);\n\t};\n\n\tObject.defineProperty(SoundInstance3d.prototype, 'position', {\n\t\tget: function () {\n\t\t\treturn this._position;\n\t\t},\n\t\tset: function (position) {\n\t\t\tthis._position.copy(position);\n\n\t\t\tif (this.source) {\n\t\t\t\tconst listener = this._manager.listener;\n\t\t\t\tconst lpos = listener.getPosition();\n\t\t\t\tconst factor = fallOff(lpos, this._position, this.refDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);\n\t\t\t\tconst v = this.volume;\n\t\t\t\tthis.source.volume = v * factor * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'velocity', {\n\t\tget: function () {\n\t\t\treturn this._velocity;\n\t\t},\n\t\tset: function (velocity) {\n\t\t\tthis._velocity.copy(velocity);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'maxDistance', {\n\t\tget: function () {\n\t\t\treturn this._maxDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._maxDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'refDistance', {\n\t\tget: function () {\n\t\t\treturn this._refDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._refDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {\n\t\tget: function () {\n\t\t\treturn this._rollOffFactor;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._rollOffFactor = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'distanceModel', {\n\t\tget: function () {\n\t\t\treturn this._distanceModel;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._distanceModel = value;\n\t\t}\n\t});\n}\n\nvar instanceOptions = {\n\tvolume: 0,\n\tpitch: 0,\n\tloop: false,\n\tstartTime: 0,\n\tduration: 0,\n\tposition: new Vec3(),\n\tmaxDistance: 0,\n\trefDistance: 0,\n\trollOffFactor: 0,\n\tdistanceModel: 0,\n\tonPlay: null,\n\tonPause: null,\n\tonResume: null,\n\tonStop: null,\n\tonEnd: null\n};\n\nclass SoundSlot extends EventHandler {\n\tconstructor(component, name, options) {\n\t\tsuper();\n\t\tthis._component = component;\n\t\tthis._assets = component.system.app.assets;\n\t\tthis._manager = component.system.manager;\n\t\tthis.name = name || 'Untitled';\n\t\toptions = options || {};\n\t\tthis._volume = options.volume !== undefined ? math.clamp(Number(options.volume) || 0, 0, 1) : 1;\n\t\tthis._pitch = options.pitch !== undefined ? Math.max(0.01, Number(options.pitch) || 0) : 1;\n\t\tthis._loop = !!(options.loop !== undefined ? options.loop : false);\n\t\tthis._duration = options.duration > 0 ? options.duration : null;\n\t\tthis._startTime = Math.max(0, Number(options.startTime) || 0);\n\t\tthis._overlap = !!options.overlap;\n\t\tthis._autoPlay = !!options.autoPlay;\n\t\tthis._firstNode = null;\n\t\tthis._lastNode = null;\n\t\tthis._asset = options.asset;\n\n\t\tif (this._asset instanceof Asset) {\n\t\t\tthis._asset = this._asset.id;\n\t\t}\n\n\t\tthis._onInstancePlayHandler = this._onInstancePlay.bind(this);\n\t\tthis._onInstancePauseHandler = this._onInstancePause.bind(this);\n\t\tthis._onInstanceResumeHandler = this._onInstanceResume.bind(this);\n\t\tthis._onInstanceStopHandler = this._onInstanceStop.bind(this);\n\t\tthis._onInstanceEndHandler = this._onInstanceEnd.bind(this);\n\t\tthis.instances = [];\n\t}\n\n\tplay() {\n\t\tif (!this.overlap) {\n\t\t\tthis.stop();\n\t\t}\n\n\t\tif (!this.isLoaded && !this._hasAsset()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instance = this._createInstance();\n\n\t\tthis.instances.push(instance);\n\n\t\tif (!this.isLoaded) {\n\t\t\tvar onLoad = function onLoad(sound) {\n\t\t\t\tvar playWhenLoaded = instance._playWhenLoaded;\n\t\t\t\tinstance.sound = sound;\n\n\t\t\t\tif (playWhenLoaded) {\n\t\t\t\t\tinstance.play();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.off('load', onLoad);\n\t\t\tthis.once('load', onLoad);\n\t\t\tthis.load();\n\t\t} else {\n\t\t\tinstance.play();\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tpause() {\n\t\tvar paused = false;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].pause()) {\n\t\t\t\tpaused = true;\n\t\t\t}\n\t\t}\n\n\t\treturn paused;\n\t}\n\n\tresume() {\n\t\tvar resumed = false;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].resume()) resumed = true;\n\t\t}\n\n\t\treturn resumed;\n\t}\n\n\tstop() {\n\t\tvar stopped = false;\n\t\tvar instances = this.instances;\n\t\tvar i = instances.length;\n\n\t\twhile (i--) {\n\t\t\tinstances[i].stop();\n\t\t\tstopped = true;\n\t\t}\n\n\t\tinstances.length = 0;\n\t\treturn stopped;\n\t}\n\n\tload() {\n\t\tif (!this._hasAsset()) return;\n\n\t\tvar asset = this._assets.get(this._asset);\n\n\t\tif (!asset) {\n\t\t\tthis._assets.off('add:' + this._asset, this._onAssetAdd, this);\n\n\t\t\tthis._assets.once('add:' + this._asset, this._onAssetAdd, this);\n\n\t\t\treturn;\n\t\t}\n\n\t\tasset.off('remove', this._onAssetRemoved, this);\n\t\tasset.on('remove', this._onAssetRemoved, this);\n\n\t\tif (!asset.resource) {\n\t\t\tasset.off('load', this._onAssetLoad, this);\n\t\t\tasset.once('load', this._onAssetLoad, this);\n\n\t\t\tthis._assets.load(asset);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire('load', asset.resource);\n\t}\n\n\tsetExternalNodes(firstNode, lastNode) {\n\t\tif (!firstNode) {\n\t\t\tconsole.error('The firstNode must have a valid AudioNode');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!lastNode) {\n\t\t\tlastNode = firstNode;\n\t\t}\n\n\t\tthis._firstNode = firstNode;\n\t\tthis._lastNode = lastNode;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].setExternalNodes(firstNode, lastNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearExternalNodes() {\n\t\tthis._firstNode = null;\n\t\tthis._lastNode = null;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].clearExternalNodes();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetExternalNodes() {\n\t\treturn [this._firstNode, this._lastNode];\n\t}\n\n\t_hasAsset() {\n\t\treturn this._asset != null;\n\t}\n\n\t_createInstance() {\n\t\tvar instance = null;\n\t\tvar component = this._component;\n\t\tvar sound = null;\n\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tif (asset) {\n\t\t\t\tsound = asset.resource;\n\t\t\t}\n\t\t}\n\n\t\tvar data = instanceOptions;\n\t\tdata.volume = this._volume * component.volume;\n\t\tdata.pitch = this._pitch * component.pitch;\n\t\tdata.loop = this._loop;\n\t\tdata.startTime = this._startTime;\n\t\tdata.duration = this._duration;\n\t\tdata.onPlay = this._onInstancePlayHandler;\n\t\tdata.onPause = this._onInstancePauseHandler;\n\t\tdata.onResume = this._onInstanceResumeHandler;\n\t\tdata.onStop = this._onInstanceStopHandler;\n\t\tdata.onEnd = this._onInstanceEndHandler;\n\n\t\tif (component.positional) {\n\t\t\tdata.position.copy(component.entity.getPosition());\n\t\t\tdata.maxDistance = component.maxDistance;\n\t\t\tdata.refDistance = component.refDistance;\n\t\t\tdata.rollOffFactor = component.rollOffFactor;\n\t\t\tdata.distanceModel = component.distanceModel;\n\t\t\tinstance = new SoundInstance3d(this._manager, sound, data);\n\t\t} else {\n\t\t\tinstance = new SoundInstance(this._manager, sound, data);\n\t\t}\n\n\t\tif (this._firstNode) {\n\t\t\tinstance.setExternalNodes(this._firstNode, this._lastNode);\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\t_onInstancePlay(instance) {\n\t\tthis.fire('play', instance);\n\n\t\tthis._component.fire('play', this, instance);\n\t}\n\n\t_onInstancePause(instance) {\n\t\tthis.fire('pause', instance);\n\n\t\tthis._component.fire('pause', this, instance);\n\t}\n\n\t_onInstanceResume(instance) {\n\t\tthis.fire('resume', instance);\n\n\t\tthis._component.fire('resume', this, instance);\n\t}\n\n\t_onInstanceStop(instance) {\n\t\tvar idx = this.instances.indexOf(instance);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.instances.splice(idx, 1);\n\t\t}\n\n\t\tthis.fire('stop', instance);\n\n\t\tthis._component.fire('stop', this, instance);\n\t}\n\n\t_onInstanceEnd(instance) {\n\t\tvar idx = this.instances.indexOf(instance);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.instances.splice(idx, 1);\n\t\t}\n\n\t\tthis.fire('end', instance);\n\n\t\tthis._component.fire('end', this, instance);\n\t}\n\n\t_onAssetAdd(asset) {\n\t\tthis.load();\n\t}\n\n\t_onAssetLoad(asset) {\n\t\tthis.load();\n\t}\n\n\t_onAssetRemoved(asset) {\n\t\tasset.off('remove', this._onAssetRemoved, this);\n\n\t\tthis._assets.off('add:' + asset.id, this._onAssetAdd, this);\n\n\t\tthis.stop();\n\t}\n\n\tupdatePosition(position) {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tinstances[i].position = position;\n\t\t}\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tset volume(value) {\n\t\tthis._volume = math.clamp(Number(value) || 0, 0, 1);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].volume = this._volume * this._component.volume;\n\t\t\t}\n\t\t}\n\t}\n\n\tget pitch() {\n\t\treturn this._pitch;\n\t}\n\n\tset pitch(value) {\n\t\tthis._pitch = Math.max(Number(value) || 0, 0.01);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].pitch = this.pitch * this._component.pitch;\n\t\t\t}\n\t\t}\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = !!value;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tinstances[i].loop = this._loop;\n\t\t}\n\t}\n\n\tget autoPlay() {\n\t\treturn this._autoPlay;\n\t}\n\n\tset autoPlay(value) {\n\t\tthis._autoPlay = !!value;\n\t}\n\n\tget overlap() {\n\t\treturn this._overlap;\n\t}\n\n\tset overlap(value) {\n\t\tthis._overlap = !!value;\n\t}\n\n\tget startTime() {\n\t\treturn this._startTime;\n\t}\n\n\tset startTime(value) {\n\t\tthis._startTime = Math.max(0, Number(value) || 0);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].startTime = this._startTime;\n\t\t\t}\n\t\t}\n\t}\n\n\tget duration() {\n\t\tvar assetDuration = 0;\n\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tassetDuration = asset.resource ? asset.resource.duration : 0;\n\t\t}\n\n\t\tif (this._duration != null) {\n\t\t\treturn this._duration % (assetDuration || 1);\n\t\t}\n\n\t\treturn assetDuration;\n\t}\n\n\tset duration(value) {\n\t\tthis._duration = Math.max(0, Number(value) || 0) || null;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].duration = this._duration;\n\t\t\t}\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._asset;\n\t}\n\n\tset asset(value) {\n\t\tvar old = this._asset;\n\n\t\tif (old) {\n\t\t\tthis._assets.off('add:' + old, this._onAssetAdd, this);\n\n\t\t\tvar oldAsset = this._assets.get(old);\n\n\t\t\tif (oldAsset) {\n\t\t\t\toldAsset.off('remove', this._onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._asset = value;\n\n\t\tif (this._asset instanceof Asset) {\n\t\t\tthis._asset = this._asset.id;\n\t\t}\n\n\t\tif (this._hasAsset() && this._component.enabled && this._component.entity.enabled) {\n\t\t\tthis.load();\n\t\t}\n\t}\n\n\tget isLoaded() {\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tif (asset) {\n\t\t\t\treturn !!asset.resource;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget isPlaying() {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].isPlaying) return true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget isPaused() {\n\t\tvar instances = this.instances;\n\t\tvar len = instances.length;\n\t\tif (len === 0) return false;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (!instances[i].isPaused) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget isStopped() {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (!instances[i].isStopped) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n}\n\nclass SoundComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._volume = 1;\n\t\tthis._pitch = 1;\n\t\tthis._positional = true;\n\t\tthis._refDistance = 1;\n\t\tthis._maxDistance = 10000;\n\t\tthis._rollOffFactor = 1;\n\t\tthis._distanceModel = DISTANCE_LINEAR;\n\t\tthis._slots = {};\n\t\tthis._playingBeforeDisable = {};\n\t}\n\n\tget positional() {\n\t\treturn this._positional;\n\t}\n\n\tset positional(newValue) {\n\t\tthis._positional = newValue;\n\t\tvar slots = this._slots;\n\n\t\tfor (var key in slots) {\n\t\t\tvar slot = slots[key];\n\n\t\t\tif (!slot.overlap) {\n\t\t\t\tvar instances = slot.instances;\n\t\t\t\tvar oldLength = instances.length;\n\n\t\t\t\tfor (var i = oldLength - 1; i >= 0; i--) {\n\t\t\t\t\tvar isPlaying = instances[i].isPlaying || instances[i].isSuspended;\n\t\t\t\t\tvar currentTime = instances[i].currentTime;\n\t\t\t\t\tif (isPlaying) instances[i].stop();\n\n\t\t\t\t\tvar instance = slot._createInstance();\n\n\t\t\t\t\tif (isPlaying) {\n\t\t\t\t\t\tinstance.play();\n\t\t\t\t\t\tinstance.currentTime = currentTime;\n\t\t\t\t\t}\n\n\t\t\t\t\tinstances.push(instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget slots() {\n\t\treturn this._slots;\n\t}\n\n\tset slots(newValue) {\n\t\tvar key;\n\t\tvar oldValue = this._slots;\n\n\t\tif (oldValue) {\n\t\t\tfor (key in oldValue) {\n\t\t\t\toldValue[key].stop();\n\t\t\t}\n\t\t}\n\n\t\tvar slots = {};\n\n\t\tfor (key in newValue) {\n\t\t\tif (!(newValue[key] instanceof SoundSlot)) {\n\t\t\t\tif (newValue[key].name) {\n\t\t\t\t\tslots[newValue[key].name] = new SoundSlot(this, newValue[key].name, newValue[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tslots[newValue[key].name] = newValue[key];\n\t\t\t}\n\t\t}\n\n\t\tthis._slots = slots;\n\t\tif (this.enabled && this.entity.enabled) this.onEnable();\n\t}\n\n\tonEnable() {\n\t\tif (this.system._inTools) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar slots = this._slots;\n\t\tvar playingBeforeDisable = this._playingBeforeDisable;\n\n\t\tfor (var key in slots) {\n\t\t\tvar slot = slots[key];\n\n\t\t\tif (slot.autoPlay && slot.isStopped) {\n\t\t\t\tslot.play();\n\t\t\t} else if (playingBeforeDisable[key]) {\n\t\t\t\tslot.resume();\n\t\t\t} else if (!slot.isLoaded) {\n\t\t\t\tslot.load();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar slots = this._slots;\n\t\tvar playingBeforeDisable = {};\n\n\t\tfor (var key in slots) {\n\t\t\tif (!slots[key].overlap) {\n\t\t\t\tif (slots[key].isPlaying) {\n\t\t\t\t\tslots[key].pause();\n\t\t\t\t\tplayingBeforeDisable[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._playingBeforeDisable = playingBeforeDisable;\n\t}\n\n\tonRemove() {\n\t\tthis.off();\n\t}\n\n\taddSlot(name, options) {\n\t\tvar slots = this._slots;\n\n\t\tif (slots[name]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar slot = new SoundSlot(this, name, options);\n\t\tslots[name] = slot;\n\n\t\tif (slot.autoPlay && this.enabled && this.entity.enabled) {\n\t\t\tslot.play();\n\t\t}\n\n\t\treturn slot;\n\t}\n\n\tremoveSlot(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (slots[name]) {\n\t\t\tslots[name].stop();\n\t\t\tdelete slots[name];\n\t\t}\n\t}\n\n\tslot(name) {\n\t\treturn this._slots[name];\n\t}\n\n\tplay(name) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar slot = this._slots[name];\n\n\t\tif (!slot) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn slot.play();\n\t}\n\n\tpause(name) {\n\t\tvar slot;\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tslot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tslot.pause();\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].pause();\n\t\t\t}\n\t\t}\n\t}\n\n\tresume(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tvar slot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (slot.isPaused) {\n\t\t\t\tslot.resume();\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].resume();\n\t\t\t}\n\t\t}\n\t}\n\n\tstop(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tvar slot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tslot.stop();\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].stop();\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction defineSoundPropertyBasic(publicName, privateName) {\n\tObject.defineProperty(SoundComponent.prototype, publicName, {\n\t\tget: function () {\n\t\t\treturn this[privateName];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tthis[privateName] = newValue;\n\t\t\tvar slots = this._slots;\n\n\t\t\tfor (var key in slots) {\n\t\t\t\tvar slot = slots[key];\n\n\t\t\t\tif (!slot.overlap) {\n\t\t\t\t\tvar instances = slot.instances;\n\n\t\t\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\t\t\tinstances[i][publicName] = newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction defineSoundPropertyFactor(publicName, privateName) {\n\tObject.defineProperty(SoundComponent.prototype, publicName, {\n\t\tget: function () {\n\t\t\treturn this[privateName];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tthis[privateName] = newValue;\n\t\t\tvar slots = this._slots;\n\n\t\t\tfor (var key in slots) {\n\t\t\t\tvar slot = slots[key];\n\n\t\t\t\tif (!slot.overlap) {\n\t\t\t\t\tvar instances = slot.instances;\n\n\t\t\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\t\t\tinstances[i][publicName] = slot[publicName] * newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineSoundPropertyFactor('pitch', '_pitch');\ndefineSoundPropertyFactor('volume', '_volume');\ndefineSoundPropertyBasic('refDistance', '_refDistance');\ndefineSoundPropertyBasic('maxDistance', '_maxDistance');\ndefineSoundPropertyBasic('rollOffFactor', '_rollOffFactor');\ndefineSoundPropertyBasic('distanceModel', '_distanceModel');\n\nclass SoundComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$2 = ['enabled'];\n\nclass SoundComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"sound\";\n\t\tthis.ComponentType = SoundComponent;\n\t\tthis.DataType = SoundComponentData;\n\t\tthis.schema = _schema$2;\n\t\tthis.manager = manager;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['volume', 'pitch', 'positional', 'refDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'slots'];\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tif (data.hasOwnProperty(properties[i])) {\n\t\t\t\tcomponent[properties[i]] = data[properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar srcComponent = entity.sound;\n\t\tvar srcSlots = srcComponent.slots;\n\t\tvar slots = {};\n\n\t\tfor (var key in srcSlots) {\n\t\t\tvar srcSlot = srcSlots[key];\n\t\t\tslots[key] = {\n\t\t\t\tname: srcSlot.name,\n\t\t\t\tvolume: srcSlot.volume,\n\t\t\t\tpitch: srcSlot.pitch,\n\t\t\t\tloop: srcSlot.loop,\n\t\t\t\tduration: srcSlot.duration,\n\t\t\t\tstartTime: srcSlot.startTime,\n\t\t\t\toverlap: srcSlot.overlap,\n\t\t\t\tautoPlay: srcSlot.autoPlay,\n\t\t\t\tasset: srcSlot.asset\n\t\t\t};\n\t\t}\n\n\t\tvar cloneData = {\n\t\t\tdistanceModel: srcComponent.distanceModel,\n\t\t\tenabled: srcComponent.enabled,\n\t\t\tmaxDistance: srcComponent.maxDistance,\n\t\t\tpitch: srcComponent.pitch,\n\t\t\tpositional: srcComponent.positional,\n\t\t\trefDistance: srcComponent.refDistance,\n\t\t\trollOffFactor: srcComponent.rollOffFactor,\n\t\t\tslots: slots,\n\t\t\tvolume: srcComponent.volume\n\t\t};\n\t\treturn this.addComponent(clone, cloneData);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar store = this.store;\n\n\t\tfor (var id in store) {\n\t\t\tif (store.hasOwnProperty(id)) {\n\t\t\t\tvar item = store[id];\n\t\t\t\tvar entity = item.entity;\n\n\t\t\t\tif (entity.enabled) {\n\t\t\t\t\tvar component = entity.sound;\n\n\t\t\t\t\tif (component.enabled && component.positional) {\n\t\t\t\t\t\tvar position = entity.getPosition();\n\t\t\t\t\t\tvar slots = component.slots;\n\n\t\t\t\t\t\tfor (var key in slots) {\n\t\t\t\t\t\t\tslots[key].updatePosition(position);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tvar slots = component.slots;\n\n\t\tfor (var key in slots) {\n\t\t\tif (!slots[key].overlap) {\n\t\t\t\tslots[key].stop();\n\t\t\t}\n\t\t}\n\n\t\tcomponent.onRemove();\n\t}\n\n\tget volume() {\n\t\treturn this.manager.volume;\n\t}\n\n\tset volume(volume) {\n\t\tthis.manager.volume = volume;\n\t}\n\n\tget context() {\n\t\tif (!hasAudioContext()) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.manager.context;\n\t}\n\n}\n\nComponent._buildAccessors(SoundComponent.prototype, _schema$2);\n\nconst SPRITETYPE_SIMPLE = 'simple';\nconst SPRITETYPE_ANIMATED = 'animated';\n\nclass SpriteAnimationClip extends EventHandler {\n\tconstructor(component, data) {\n\t\tsuper();\n\t\tthis._component = component;\n\t\tthis._frame = 0;\n\t\tthis._sprite = null;\n\t\tthis._spriteAsset = null;\n\t\tthis.spriteAsset = data.spriteAsset;\n\t\tthis.name = data.name;\n\t\tthis.fps = data.fps || 0;\n\t\tthis.loop = data.loop || false;\n\t\tthis._playing = false;\n\t\tthis._paused = false;\n\t\tthis._time = 0;\n\t}\n\n\t_onSpriteAssetAdded(asset) {\n\t\tthis._component.system.app.assets.off('add:' + asset.id, this._onSpriteAssetAdded, this);\n\n\t\tif (this._spriteAsset === asset.id) {\n\t\t\tthis._bindSpriteAsset(asset);\n\t\t}\n\t}\n\n\t_bindSpriteAsset(asset) {\n\t\tasset.on(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.on(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onSpriteAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._component.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindSpriteAsset(asset) {\n\t\tasset.off(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.off(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource && asset.resource.atlas) {\n\t\t\tthis._component.system.app.assets.off('load:' + asset.data.textureAtlasAsset, this._onTextureAtlasLoad, this);\n\t\t}\n\t}\n\n\t_onSpriteAssetLoad(asset) {\n\t\tif (!asset.resource) {\n\t\t\tthis.sprite = null;\n\t\t} else {\n\t\t\tif (!asset.resource.atlas) {\n\t\t\t\tvar atlasAssetId = asset.data.textureAtlasAsset;\n\t\t\t\tvar assets = this._component.system.app.assets;\n\t\t\t\tassets.off('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\tassets.once('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t} else {\n\t\t\t\tthis.sprite = asset.resource;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onTextureAtlasLoad(atlasAsset) {\n\t\tvar spriteAsset = this._spriteAsset;\n\n\t\tif (spriteAsset instanceof Asset) {\n\t\t\tthis._onSpriteAssetLoad(spriteAsset);\n\t\t} else {\n\t\t\tthis._onSpriteAssetLoad(this._component.system.app.assets.get(spriteAsset));\n\t\t}\n\t}\n\n\t_onSpriteAssetRemove(asset) {\n\t\tthis.sprite = null;\n\t}\n\n\t_onSpriteMeshesChange() {\n\t\tif (this._component.currentClip === this) {\n\t\t\tthis._component._showFrame(this.frame);\n\t\t}\n\t}\n\n\t_onSpritePpuChanged() {\n\t\tif (this._component.currentClip === this) {\n\t\t\tif (this.sprite.renderMode !== SPRITE_RENDERMODE_SIMPLE) {\n\t\t\t\tthis._component._showFrame(this.frame);\n\t\t\t}\n\t\t}\n\t}\n\n\t_update(dt) {\n\t\tif (this.fps === 0) return;\n\t\tif (!this._playing || this._paused || !this._sprite) return;\n\t\tvar dir = this.fps < 0 ? -1 : 1;\n\t\tvar time = this._time + dt * this._component.speed * dir;\n\t\tvar duration = this.duration;\n\t\tvar end = time > duration || time < 0;\n\n\t\tthis._setTime(time);\n\n\t\tvar frame = this.frame;\n\n\t\tif (this._sprite) {\n\t\t\tframe = Math.floor(this._sprite.frameKeys.length * this._time / duration);\n\t\t} else {\n\t\t\tframe = 0;\n\t\t}\n\n\t\tif (frame !== this._frame) {\n\t\t\tthis._setFrame(frame);\n\t\t}\n\n\t\tif (end) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis.fire('loop');\n\n\t\t\t\tthis._component.fire('loop', this);\n\t\t\t} else {\n\t\t\t\tthis._playing = false;\n\t\t\t\tthis._paused = false;\n\t\t\t\tthis.fire('end');\n\n\t\t\t\tthis._component.fire('end', this);\n\t\t\t}\n\t\t}\n\t}\n\n\t_setTime(value) {\n\t\tthis._time = value;\n\t\tvar duration = this.duration;\n\n\t\tif (this._time < 0) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis._time = this._time % duration + duration;\n\t\t\t} else {\n\t\t\t\tthis._time = 0;\n\t\t\t}\n\t\t} else if (this._time > duration) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis._time %= duration;\n\t\t\t} else {\n\t\t\t\tthis._time = duration;\n\t\t\t}\n\t\t}\n\t}\n\n\t_setFrame(value) {\n\t\tif (this._sprite) {\n\t\t\tthis._frame = math.clamp(value, 0, this._sprite.frameKeys.length - 1);\n\t\t} else {\n\t\t\tthis._frame = value;\n\t\t}\n\n\t\tif (this._component.currentClip === this) {\n\t\t\tthis._component._showFrame(this._frame);\n\t\t}\n\t}\n\n\t_destroy() {\n\t\tif (this._sprite) {\n\t\t\tthis.sprite = null;\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tthis.spriteAsset = null;\n\t\t}\n\t}\n\n\tplay() {\n\t\tif (this._playing) return;\n\t\tthis._playing = true;\n\t\tthis._paused = false;\n\t\tthis.frame = 0;\n\t\tthis.fire('play');\n\n\t\tthis._component.fire('play', this);\n\t}\n\n\tpause() {\n\t\tif (!this._playing || this._paused) return;\n\t\tthis._paused = true;\n\t\tthis.fire('pause');\n\n\t\tthis._component.fire('pause', this);\n\t}\n\n\tresume() {\n\t\tif (!this._paused) return;\n\t\tthis._paused = false;\n\t\tthis.fire('resume');\n\n\t\tthis._component.fire('resume', this);\n\t}\n\n\tstop() {\n\t\tif (!this._playing) return;\n\t\tthis._playing = false;\n\t\tthis._paused = false;\n\t\tthis._time = 0;\n\t\tthis.frame = 0;\n\t\tthis.fire('stop');\n\n\t\tthis._component.fire('stop', this);\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tvar assets = this._component.system.app.assets;\n\t\tvar id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\tid = value.id;\n\t\t}\n\n\t\tif (this._spriteAsset !== id) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar prev = assets.get(this._spriteAsset);\n\n\t\t\t\tif (prev) {\n\t\t\t\t\tthis._unbindSpriteAsset(prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._spriteAsset = id;\n\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar asset = assets.get(this._spriteAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.sprite = null;\n\t\t\t\t\tassets.on('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget sprite() {\n\t\treturn this._sprite;\n\t}\n\n\tset sprite(value) {\n\t\tif (this._sprite) {\n\t\t\tthis._sprite.off('set:meshes', this._onSpriteMeshesChange, this);\n\n\t\t\tthis._sprite.off('set:pixelsPerUnit', this._onSpritePpuChanged, this);\n\n\t\t\tthis._sprite.off('set:atlas', this._onSpriteMeshesChange, this);\n\n\t\t\tif (this._sprite.atlas) {\n\t\t\t\tthis._sprite.atlas.off('set:texture', this._onSpriteMeshesChange, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._sprite = value;\n\n\t\tif (this._sprite) {\n\t\t\tthis._sprite.on('set:meshes', this._onSpriteMeshesChange, this);\n\n\t\t\tthis._sprite.on('set:pixelsPerUnit', this._onSpritePpuChanged, this);\n\n\t\t\tthis._sprite.on('set:atlas', this._onSpriteMeshesChange, this);\n\n\t\t\tif (this._sprite.atlas) {\n\t\t\t\tthis._sprite.atlas.on('set:texture', this._onSpriteMeshesChange, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this._component.currentClip === this) {\n\t\t\tvar mi;\n\n\t\t\tif (!value || !value.atlas) {\n\t\t\t\tmi = this._component._meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.deleteParameter('texture_emissiveMap');\n\t\t\t\t\tmi.deleteParameter('texture_opacityMap');\n\t\t\t\t}\n\n\t\t\t\tthis._component._hideModel();\n\t\t\t} else {\n\t\t\t\tif (value.atlas.texture) {\n\t\t\t\t\tmi = this._component._meshInstance;\n\n\t\t\t\t\tif (mi) {\n\t\t\t\t\t\tmi.setParameter('texture_emissiveMap', value.atlas.texture);\n\t\t\t\t\t\tmi.setParameter('texture_opacityMap', value.atlas.texture);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._component.enabled && this._component.entity.enabled) {\n\t\t\t\t\t\tthis._component._showModel();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.time && this.fps) {\n\t\t\t\t\tthis.time = this.time;\n\t\t\t\t} else {\n\t\t\t\t\tthis.frame = this.frame;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget frame() {\n\t\treturn this._frame;\n\t}\n\n\tset frame(value) {\n\t\tthis._setFrame(value);\n\n\t\tvar fps = this.fps || Number.MIN_VALUE;\n\n\t\tthis._setTime(this._frame / fps);\n\t}\n\n\tget isPlaying() {\n\t\treturn this._playing;\n\t}\n\n\tget isPaused() {\n\t\treturn this._paused;\n\t}\n\n\tget duration() {\n\t\tif (this._sprite) {\n\t\t\tvar fps = this.fps || Number.MIN_VALUE;\n\t\t\treturn this._sprite.frameKeys.length / Math.abs(fps);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tset time(value) {\n\t\tthis._setTime(value);\n\n\t\tif (this._sprite) {\n\t\t\tthis.frame = Math.min(this._sprite.frameKeys.length - 1, Math.floor(this._time * Math.abs(this.fps)));\n\t\t} else {\n\t\t\tthis.frame = 0;\n\t\t}\n\t}\n\n}\n\nconst PARAM_EMISSIVE_MAP = 'texture_emissiveMap';\nconst PARAM_OPACITY_MAP = 'texture_opacityMap';\nconst PARAM_EMISSIVE = 'material_emissive';\nconst PARAM_OPACITY = 'material_opacity';\nconst PARAM_INNER_OFFSET = 'innerOffset';\nconst PARAM_OUTER_SCALE = 'outerScale';\nconst PARAM_ATLAS_RECT = 'atlasRect';\n\nclass SpriteComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = SPRITETYPE_SIMPLE;\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array(3);\n\t\tthis._speed = 1;\n\t\tthis._flipX = false;\n\t\tthis._flipY = false;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._drawOrder = 0;\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._outerScale = new Vec2(1, 1);\n\t\tthis._outerScaleUniform = new Float32Array(2);\n\t\tthis._innerOffset = new Vec4();\n\t\tthis._innerOffsetUniform = new Float32Array(4);\n\t\tthis._atlasRect = new Vec4();\n\t\tthis._atlasRectUniform = new Float32Array(4);\n\t\tthis._batchGroupId = -1;\n\t\tthis._batchGroup = null;\n\t\tthis._node = new GraphNode();\n\t\tthis._model = new Model();\n\t\tthis._model.graph = this._node;\n\t\tthis._meshInstance = null;\n\t\tentity.addChild(this._model.graph);\n\t\tthis._model._entity = entity;\n\t\tthis._updateAabbFunc = this._updateAabb.bind(this);\n\t\tthis._addedModel = false;\n\t\tthis._autoPlayClip = null;\n\t\tthis._clips = {};\n\t\tthis._defaultClip = new SpriteAnimationClip(this, {\n\t\t\tname: this.entity.name,\n\t\t\tfps: 0,\n\t\t\tloop: false,\n\t\t\tspriteAsset: null\n\t\t});\n\t\tthis._currentClip = this._defaultClip;\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.on(\"set:layers\", this._onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this._onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this._onLayerRemoved, this);\n\t\t}\n\n\t\tthis._showModel();\n\n\t\tif (this._autoPlayClip) this._tryAutoPlay();\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.SPRITE, this._batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this._onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this._onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this._onLayerRemoved, this);\n\t\t}\n\n\t\tthis.stop();\n\n\t\tthis._hideModel();\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.SPRITE, this._batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDestroy() {\n\t\tthis._currentClip = null;\n\n\t\tif (this._defaultClip) {\n\t\t\tthis._defaultClip._destroy();\n\n\t\t\tthis._defaultClip = null;\n\t\t}\n\n\t\tfor (var key in this._clips) {\n\t\t\tthis._clips[key]._destroy();\n\t\t}\n\n\t\tthis._clips = null;\n\n\t\tthis._hideModel();\n\n\t\tthis._model = null;\n\n\t\tif (this._node) {\n\t\t\tif (this._node.parent) this._node.parent.removeChild(this._node);\n\t\t\tthis._node = null;\n\t\t}\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.material = null;\n\t\t\tthis._meshInstance.mesh = null;\n\t\t\tthis._meshInstance = null;\n\t\t}\n\t}\n\n\t_showModel() {\n\t\tif (this._addedModel) return;\n\t\tif (!this._meshInstance) return;\n\t\tvar i;\n\t\tvar len;\n\t\tvar meshInstances = [this._meshInstance];\n\n\t\tfor (i = 0, len = this._layers.length; i < len; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._addedModel = true;\n\t}\n\n\t_hideModel() {\n\t\tif (!this._addedModel || !this._meshInstance) return;\n\t\tvar i;\n\t\tvar len;\n\t\tvar meshInstances = [this._meshInstance];\n\n\t\tfor (i = 0, len = this._layers.length; i < len; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeMeshInstances(meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._addedModel = false;\n\t}\n\n\t_showFrame(frame) {\n\t\tif (!this.sprite) return;\n\t\tvar mesh = this.sprite.meshes[frame];\n\n\t\tif (!mesh) {\n\t\t\tif (this._meshInstance) {\n\t\t\t\tthis._meshInstance.mesh = null;\n\t\t\t\tthis._meshInstance.visible = false;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar material;\n\n\t\tif (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tmaterial = this.system.default9SlicedMaterialSlicedMode;\n\t\t} else if (this.sprite.renderMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tmaterial = this.system.default9SlicedMaterialTiledMode;\n\t\t} else {\n\t\t\tmaterial = this.system.defaultMaterial;\n\t\t}\n\n\t\tif (!this._meshInstance) {\n\t\t\tthis._meshInstance = new MeshInstance(mesh, this._material, this._node);\n\t\t\tthis._meshInstance.castShadow = false;\n\t\t\tthis._meshInstance.receiveShadow = false;\n\t\t\tthis._meshInstance.drawOrder = this._drawOrder;\n\n\t\t\tthis._model.meshInstances.push(this._meshInstance);\n\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE, this._colorUniform);\n\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY, this._color.a);\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis._showModel();\n\t\t\t}\n\t\t}\n\n\t\tif (this._meshInstance.material !== material) {\n\t\t\tthis._meshInstance.material = material;\n\t\t}\n\n\t\tif (this._meshInstance.mesh !== mesh) {\n\t\t\tthis._meshInstance.mesh = mesh;\n\t\t\tthis._meshInstance.visible = true;\n\t\t\tthis._meshInstance._aabbVer = -1;\n\t\t}\n\n\t\tif (this.sprite.atlas && this.sprite.atlas.texture) {\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE_MAP, this.sprite.atlas.texture);\n\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY_MAP, this.sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._meshInstance.deleteParameter(PARAM_EMISSIVE_MAP);\n\n\t\t\tthis._meshInstance.deleteParameter(PARAM_OPACITY_MAP);\n\t\t}\n\n\t\tif (this.sprite.atlas && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tthis._meshInstance._updateAabbFunc = this._updateAabbFunc;\n\t\t\tvar frameData = this.sprite.atlas.frames[this.sprite.frameKeys[frame]];\n\n\t\t\tif (frameData) {\n\t\t\t\tvar borderWidthScale = 2 / frameData.rect.z;\n\t\t\t\tvar borderHeightScale = 2 / frameData.rect.w;\n\n\t\t\t\tthis._innerOffset.set(frameData.border.x * borderWidthScale, frameData.border.y * borderHeightScale, frameData.border.z * borderWidthScale, frameData.border.w * borderHeightScale);\n\n\t\t\t\tvar tex = this.sprite.atlas.texture;\n\n\t\t\t\tthis._atlasRect.set(frameData.rect.x / tex.width, frameData.rect.y / tex.height, frameData.rect.z / tex.width, frameData.rect.w / tex.height);\n\t\t\t} else {\n\t\t\t\tthis._innerOffset.set(0, 0, 0, 0);\n\t\t\t}\n\n\t\t\tthis._innerOffsetUniform[0] = this._innerOffset.x;\n\t\t\tthis._innerOffsetUniform[1] = this._innerOffset.y;\n\t\t\tthis._innerOffsetUniform[2] = this._innerOffset.z;\n\t\t\tthis._innerOffsetUniform[3] = this._innerOffset.w;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_INNER_OFFSET, this._innerOffsetUniform);\n\n\t\t\tthis._atlasRectUniform[0] = this._atlasRect.x;\n\t\t\tthis._atlasRectUniform[1] = this._atlasRect.y;\n\t\t\tthis._atlasRectUniform[2] = this._atlasRect.z;\n\t\t\tthis._atlasRectUniform[3] = this._atlasRect.w;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_ATLAS_RECT, this._atlasRectUniform);\n\t\t} else {\n\t\t\tthis._meshInstance._updateAabbFunc = null;\n\t\t}\n\n\t\tthis._updateTransform();\n\t}\n\n\t_updateTransform() {\n\t\tvar scaleX = this.flipX ? -1 : 1;\n\t\tvar scaleY = this.flipY ? -1 : 1;\n\t\tvar posX = 0;\n\t\tvar posY = 0;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tvar w = 1;\n\t\t\tvar h = 1;\n\n\t\t\tif (this.sprite.atlas) {\n\t\t\t\tvar frameData = this.sprite.atlas.frames[this.sprite.frameKeys[this.frame]];\n\n\t\t\t\tif (frameData) {\n\t\t\t\t\tw = frameData.rect.z;\n\t\t\t\t\th = frameData.rect.w;\n\t\t\t\t\tposX = (0.5 - frameData.pivot.x) * this._width;\n\t\t\t\t\tposY = (0.5 - frameData.pivot.y) * this._height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar scaleMulX = w / this.sprite.pixelsPerUnit;\n\t\t\tvar scaleMulY = h / this.sprite.pixelsPerUnit;\n\n\t\t\tthis._outerScale.set(Math.max(this._width, this._innerOffset.x * scaleMulX), Math.max(this._height, this._innerOffset.y * scaleMulY));\n\n\t\t\tscaleX *= scaleMulX;\n\t\t\tscaleY *= scaleMulY;\n\t\t\tthis._outerScale.x /= scaleMulX;\n\t\t\tthis._outerScale.y /= scaleMulY;\n\t\t\tscaleX *= math.clamp(this._width / (this._innerOffset.x * scaleMulX), 0.0001, 1);\n\t\t\tscaleY *= math.clamp(this._height / (this._innerOffset.y * scaleMulY), 0.0001, 1);\n\n\t\t\tif (this._meshInstance) {\n\t\t\t\tthis._outerScaleUniform[0] = this._outerScale.x;\n\t\t\t\tthis._outerScaleUniform[1] = this._outerScale.y;\n\n\t\t\t\tthis._meshInstance.setParameter(PARAM_OUTER_SCALE, this._outerScaleUniform);\n\t\t\t}\n\t\t}\n\n\t\tthis._node.setLocalScale(scaleX, scaleY, 1);\n\n\t\tthis._node.setLocalPosition(posX, posY, 0);\n\t}\n\n\t_updateAabb(aabb) {\n\t\taabb.center.set(0, 0, 0);\n\t\taabb.halfExtents.set(this._outerScale.x * 0.5, this._outerScale.y * 0.5, 0.001);\n\t\taabb.setFromTransformedAabb(aabb, this._node.getWorldTransform());\n\t\treturn aabb;\n\t}\n\n\t_tryAutoPlay() {\n\t\tif (!this._autoPlayClip) return;\n\t\tif (this.type !== SPRITETYPE_ANIMATED) return;\n\t\tvar clip = this._clips[this._autoPlayClip];\n\n\t\tif (clip && !clip.isPlaying && (!this._currentClip || !this._currentClip.isPlaying)) {\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.play(clip.name);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onLayersChanged(oldComp, newComp) {\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis._showModel();\n\t\t}\n\t}\n\n\t_onLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._addedModel && this.enabled && this.entity.enabled && this._meshInstance) {\n\t\t\tlayer.addMeshInstances([this._meshInstance]);\n\t\t}\n\t}\n\n\t_onLayerRemoved(layer) {\n\t\tif (!this._meshInstance) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances([this._meshInstance]);\n\t}\n\n\tremoveModelFromLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances([this._meshInstance]);\n\t\t}\n\t}\n\n\taddClip(data) {\n\t\tvar clip = new SpriteAnimationClip(this, {\n\t\t\tname: data.name,\n\t\t\tfps: data.fps,\n\t\t\tloop: data.loop,\n\t\t\tspriteAsset: data.spriteAsset\n\t\t});\n\t\tthis._clips[data.name] = clip;\n\t\tif (clip.name && clip.name === this._autoPlayClip) this._tryAutoPlay();\n\t\treturn clip;\n\t}\n\n\tremoveClip(name) {\n\t\tdelete this._clips[name];\n\t}\n\n\tclip(name) {\n\t\treturn this._clips[name];\n\t}\n\n\tplay(name) {\n\t\tvar clip = this._clips[name];\n\t\tvar current = this._currentClip;\n\n\t\tif (current && current !== clip) {\n\t\t\tcurrent._playing = false;\n\t\t}\n\n\t\tthis._currentClip = clip;\n\n\t\tif (this._currentClip) {\n\t\t\tthis._currentClip = clip;\n\n\t\t\tthis._currentClip.play();\n\t\t}\n\n\t\treturn clip;\n\t}\n\n\tpause() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tif (this._currentClip.isPlaying) {\n\t\t\tthis._currentClip.pause();\n\t\t}\n\t}\n\n\tresume() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tif (this._currentClip.isPaused) {\n\t\t\tthis._currentClip.resume();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tthis._currentClip.stop();\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._type = value;\n\n\t\tif (this._type === SPRITETYPE_SIMPLE) {\n\t\t\tthis.stop();\n\t\t\tthis._currentClip = this._defaultClip;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis._currentClip.frame = this.frame;\n\n\t\t\t\tif (this._currentClip.sprite) {\n\t\t\t\t\tthis._showModel();\n\t\t\t\t} else {\n\t\t\t\t\tthis._hideModel();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._type === SPRITETYPE_ANIMATED) {\n\t\t\tthis.stop();\n\n\t\t\tif (this._autoPlayClip) {\n\t\t\t\tthis._tryAutoPlay();\n\t\t\t}\n\n\t\t\tif (this._currentClip && this._currentClip.isPlaying && this.enabled && this.entity.enabled) {\n\t\t\t\tthis._showModel();\n\t\t\t} else {\n\t\t\t\tthis._hideModel();\n\t\t\t}\n\t\t}\n\t}\n\n\tget frame() {\n\t\treturn this._currentClip.frame;\n\t}\n\n\tset frame(value) {\n\t\tthis._currentClip.frame = value;\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._defaultClip._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tthis._defaultClip.spriteAsset = value;\n\t}\n\n\tget sprite() {\n\t\treturn this._currentClip.sprite;\n\t}\n\n\tset sprite(value) {\n\t\tthis._currentClip.sprite = value;\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tthis._material = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.material = value;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color.r = value.r;\n\t\tthis._color.g = value.g;\n\t\tthis._color.b = value.b;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE, this._colorUniform);\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tthis._color.a = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY, value);\n\t\t}\n\t}\n\n\tget clips() {\n\t\treturn this._clips;\n\t}\n\n\tset clips(value) {\n\t\tvar name, key;\n\n\t\tif (!value) {\n\t\t\tfor (name in this._clips) {\n\t\t\t\tthis.removeClip(name);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (name in this._clips) {\n\t\t\tvar found = false;\n\n\t\t\tfor (key in value) {\n\t\t\t\tif (value[key].name === name) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tthis._clips[name].fps = value[key].fps;\n\t\t\t\t\tthis._clips[name].loop = value[key].loop;\n\n\t\t\t\t\tif (value[key].hasOwnProperty('sprite')) {\n\t\t\t\t\t\tthis._clips[name].sprite = value[key].sprite;\n\t\t\t\t\t} else if (value[key].hasOwnProperty('spriteAsset')) {\n\t\t\t\t\t\tthis._clips[name].spriteAsset = value[key].spriteAsset;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!found) {\n\t\t\t\tthis.removeClip(name);\n\t\t\t}\n\t\t}\n\n\t\tfor (key in value) {\n\t\t\tif (this._clips[value[key].name]) continue;\n\t\t\tthis.addClip(value[key]);\n\t\t}\n\n\t\tif (this._autoPlayClip) {\n\t\t\tthis._tryAutoPlay();\n\t\t}\n\n\t\tif (!this._currentClip || !this._currentClip.sprite) {\n\t\t\tthis._hideModel();\n\t\t}\n\t}\n\n\tget currentClip() {\n\t\treturn this._currentClip;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget flipX() {\n\t\treturn this._flipX;\n\t}\n\n\tset flipX(value) {\n\t\tif (this._flipX === value) return;\n\t\tthis._flipX = value;\n\n\t\tthis._updateTransform();\n\t}\n\n\tget flipY() {\n\t\treturn this._flipY;\n\t}\n\n\tset flipY(value) {\n\t\tif (this._flipY === value) return;\n\t\tthis._flipY = value;\n\n\t\tthis._updateTransform();\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tset width(value) {\n\t\tif (value === this._width) return;\n\t\tthis._width = value;\n\t\tthis._outerScale.x = this._width;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_TILED || this.sprite.renderMode === SPRITE_RENDERMODE_SLICED)) {\n\t\t\tthis._updateTransform();\n\t\t}\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tset height(value) {\n\t\tif (value === this._height) return;\n\t\tthis._height = value;\n\t\tthis._outerScale.y = this.height;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_TILED || this.sprite.renderMode === SPRITE_RENDERMODE_SLICED)) {\n\t\t\tthis._updateTransform();\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId === value) return;\n\t\tvar prev = this._batchGroupId;\n\t\tthis._batchGroupId = value;\n\n\t\tif (this.entity.enabled && prev >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.SPRITE, prev, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.SPRITE, value, this.entity);\n\t\t} else {\n\t\t\tif (prev >= 0) {\n\t\t\t\tif (this._currentClip && this._currentClip.sprite && this.enabled && this.entity.enabled) {\n\t\t\t\t\tthis._showModel();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoPlayClip() {\n\t\treturn this._autoPlayClip;\n\t}\n\n\tset autoPlayClip(value) {\n\t\tthis._autoPlayClip = value instanceof SpriteAnimationClip ? value.name : value;\n\n\t\tthis._tryAutoPlay();\n\t}\n\n\tget drawOrder() {\n\t\treturn this._drawOrder;\n\t}\n\n\tset drawOrder(value) {\n\t\tthis._drawOrder = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.drawOrder = value;\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tif (this._addedModel) {\n\t\t\tthis._hideModel();\n\t\t}\n\n\t\tthis._layers = value;\n\n\t\tif (!this._meshInstance) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis._showModel();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._meshInstance) {\n\t\t\treturn this._meshInstance.aabb;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass SpriteComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$1 = ['enabled'];\n\nclass SpriteComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'sprite';\n\t\tthis.ComponentType = SpriteComponent;\n\t\tthis.DataType = SpriteComponentData;\n\t\tthis.schema = _schema$1;\n\t\tthis._defaultTexture = null;\n\t\tthis._defaultMaterial = null;\n\t\tthis._default9SlicedMaterialSlicedMode = null;\n\t\tthis._default9SlicedMaterialTiledMode = null;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t}\n\n\tget defaultMaterial() {\n\t\tif (!this._defaultMaterial) {\n\t\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t\t});\n\t\t\tvar pixels = new Uint8Array(texture.lock());\n\t\t\tpixels[0] = pixels[1] = pixels[2] = pixels[3] = 255;\n\t\t\ttexture.name = 'sprite';\n\t\t\ttexture.unlock();\n\t\t\tvar material = new StandardMaterial();\n\t\t\tmaterial.diffuse.set(0, 0, 0);\n\t\t\tmaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\tmaterial.emissiveMap = texture;\n\t\t\tmaterial.emissiveMapTint = true;\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = \"a\";\n\t\t\tmaterial.opacityTint = true;\n\t\t\tmaterial.opacity = 0;\n\t\t\tmaterial.useLighting = false;\n\t\t\tmaterial.useGammaTonemap = false;\n\t\t\tmaterial.useFog = false;\n\t\t\tmaterial.useSkybox = false;\n\t\t\tmaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\tmaterial.depthWrite = false;\n\t\t\tmaterial.pixelSnap = false;\n\t\t\tmaterial.cull = CULLFACE_NONE;\n\t\t\tmaterial.update();\n\t\t\tthis._defaultTexture = texture;\n\t\t\tthis._defaultMaterial = material;\n\t\t}\n\n\t\treturn this._defaultMaterial;\n\t}\n\n\tset defaultMaterial(material) {\n\t\tthis._defaultMaterial = material;\n\t}\n\n\tget default9SlicedMaterialSlicedMode() {\n\t\tif (!this._default9SlicedMaterialSlicedMode) {\n\t\t\tvar material = this.defaultMaterial.clone();\n\t\t\tmaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\tmaterial.update();\n\t\t\tthis._default9SlicedMaterialSlicedMode = material;\n\t\t}\n\n\t\treturn this._default9SlicedMaterialSlicedMode;\n\t}\n\n\tset default9SlicedMaterialSlicedMode(material) {\n\t\tthis._default9SlicedMaterialSlicedMode = material;\n\t}\n\n\tget default9SlicedMaterialTiledMode() {\n\t\tif (!this._default9SlicedMaterialTiledMode) {\n\t\t\tvar material = this.defaultMaterial.clone();\n\t\t\tmaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\tmaterial.update();\n\t\t\tthis._default9SlicedMaterialTiledMode = material;\n\t\t}\n\n\t\treturn this._default9SlicedMaterialTiledMode;\n\t}\n\n\tset default9SlicedMaterialTiledMode(material) {\n\t\tthis._default9SlicedMaterialTiledMode = material;\n\t}\n\n\tdestroy() {\n\t\tif (this._defaultTexture) {\n\t\t\tthis._defaultTexture.destroy();\n\n\t\t\tthis._defaultTexture = null;\n\t\t}\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) {\n\t\t\tcomponent.enabled = data.enabled;\n\t\t}\n\n\t\tcomponent.type = data.type;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tcomponent.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.drawOrder !== undefined) {\n\t\t\tcomponent.drawOrder = data.drawOrder;\n\t\t}\n\n\t\tif (data.color !== undefined) {\n\t\t\tif (data.color instanceof Color) {\n\t\t\t\tcomponent.color.set(data.color.r, data.color.g, data.color.b, data.opacity !== undefined ? data.opacity : 1);\n\t\t\t} else {\n\t\t\t\tcomponent.color.set(data.color[0], data.color[1], data.color[2], data.opacity !== undefined ? data.opacity : 1);\n\t\t\t}\n\n\t\t\tcomponent.color = component.color;\n\t\t}\n\n\t\tif (data.opacity !== undefined) {\n\t\t\tcomponent.opacity = data.opacity;\n\t\t}\n\n\t\tif (data.flipX !== undefined) {\n\t\t\tcomponent.flipX = data.flipX;\n\t\t}\n\n\t\tif (data.flipY !== undefined) {\n\t\t\tcomponent.flipY = data.flipY;\n\t\t}\n\n\t\tif (data.width !== undefined) {\n\t\t\tcomponent.width = data.width;\n\t\t}\n\n\t\tif (data.height !== undefined) {\n\t\t\tcomponent.height = data.height;\n\t\t}\n\n\t\tif (data.spriteAsset !== undefined) {\n\t\t\tcomponent.spriteAsset = data.spriteAsset;\n\t\t}\n\n\t\tif (data.sprite) {\n\t\t\tcomponent.sprite = data.sprite;\n\t\t}\n\n\t\tif (data.frame !== undefined) {\n\t\t\tcomponent.frame = data.frame;\n\t\t}\n\n\t\tif (data.clips) {\n\t\t\tfor (var name in data.clips) {\n\t\t\t\tcomponent.addClip(data.clips[name]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.speed !== undefined) {\n\t\t\tcomponent.speed = data.speed;\n\t\t}\n\n\t\tif (data.autoPlayClip) {\n\t\t\tcomponent.autoPlayClip = data.autoPlayClip;\n\t\t}\n\n\t\tcomponent.batchGroupId = data.batchGroupId === undefined || data.batchGroupId === null ? -1 : data.batchGroupId;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.sprite;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: source.enabled,\n\t\t\ttype: source.type,\n\t\t\tspriteAsset: source.spriteAsset,\n\t\t\tsprite: source.sprite,\n\t\t\tframe: source.frame,\n\t\t\tcolor: source.color.clone(),\n\t\t\topacity: source.opacity,\n\t\t\tflipX: source.flipX,\n\t\t\tflipY: source.flipY,\n\t\t\tspeed: source.speed,\n\t\t\tclips: source.clips,\n\t\t\tautoPlayClip: source.autoPlayClip,\n\t\t\tbatchGroupId: source.batchGroupId,\n\t\t\tdrawOrder: source.drawOrder,\n\t\t\tlayers: source.layers.slice(0)\n\t\t});\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\n\t\t\t\tif (component.data.enabled && component.entity.enabled) {\n\t\t\t\t\tvar sprite = component.entity.sprite;\n\n\t\t\t\t\tif (sprite._currentClip) {\n\t\t\t\t\t\tsprite._currentClip._update(dt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onDestroy();\n\t}\n\n}\n\nComponent._buildAccessors(SpriteComponent.prototype, _schema$1);\n\nclass ZoneComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._oldState = true;\n\t\tthis._size = new Vec3();\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tonEnable() {\n\t\tthis._checkState();\n\t}\n\n\tonDisable() {\n\t\tthis._checkState();\n\t}\n\n\t_onSetEnabled(prop, old, value) {\n\t\tthis._checkState();\n\t}\n\n\t_checkState() {\n\t\tvar state = this.enabled && this.entity.enabled;\n\t\tif (state === this._oldState) return;\n\t\tthis._oldState = state;\n\t\tthis.fire('enable');\n\t\tthis.fire('state', this.enabled);\n\t}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\t}\n\n\tset size(data) {\n\t\tif (data instanceof Vec3) {\n\t\t\tthis._size.copy(data);\n\t\t} else if (data instanceof Array && data.length >= 3) {\n\t\t\tthis.size.set(data[0], data[1], data[2]);\n\t\t}\n\t}\n\n\tget size() {\n\t\treturn this._size;\n\t}\n\n}\n\nclass ZoneComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema = ['enabled'];\n\nclass ZoneComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'zone';\n\t\tthis.ComponentType = ZoneComponent;\n\t\tthis.DataType = ZoneComponentData;\n\t\tthis.schema = _schema;\n\t\tthis.on('beforeremove', this._onBeforeRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;\n\n\t\tif (data.size) {\n\t\t\tif (data.size instanceof Vec3) {\n\t\t\t\tcomponent.size.copy(data.size);\n\t\t\t} else if (data.size instanceof Array && data.size.length >= 3) {\n\t\t\t\tcomponent.size.set(data.size[0], data.size[1], data.size[2]);\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\tsize: entity.zone.size\n\t\t};\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\t_onBeforeRemove(entity, component) {\n\t\tcomponent._onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ZoneComponent.prototype, _schema);\n\nclass ApplicationStats {\n\tconstructor(device) {\n\t\tthis.frame = {\n\t\t\tfps: 0,\n\t\t\tms: 0,\n\t\t\tdt: 0,\n\t\t\tupdateStart: 0,\n\t\t\tupdateTime: 0,\n\t\t\trenderStart: 0,\n\t\t\trenderTime: 0,\n\t\t\tphysicsStart: 0,\n\t\t\tphysicsTime: 0,\n\t\t\tcullTime: 0,\n\t\t\tsortTime: 0,\n\t\t\tskinTime: 0,\n\t\t\tmorphTime: 0,\n\t\t\tinstancingTime: 0,\n\t\t\ttriangles: 0,\n\t\t\totherPrimitives: 0,\n\t\t\tshaders: 0,\n\t\t\tmaterials: 0,\n\t\t\tcameras: 0,\n\t\t\tshadowMapUpdates: 0,\n\t\t\tshadowMapTime: 0,\n\t\t\tdepthMapTime: 0,\n\t\t\tforwardTime: 0,\n\t\t\tlightClustersTime: 0,\n\t\t\tlightClusters: 0,\n\t\t\t_timeToCountFrames: 0,\n\t\t\t_fpsAccum: 0\n\t\t};\n\t\tthis.drawCalls = {\n\t\t\tforward: 0,\n\t\t\tdepth: 0,\n\t\t\tshadow: 0,\n\t\t\timmediate: 0,\n\t\t\tmisc: 0,\n\t\t\ttotal: 0,\n\t\t\tskinned: 0,\n\t\t\tinstanced: 0,\n\t\t\tremovedByInstancing: 0\n\t\t};\n\t\tthis.misc = {\n\t\t\trenderTargetCreationTime: 0\n\t\t};\n\t\tthis.particles = {\n\t\t\tupdatesPerFrame: 0,\n\t\t\t_updatesPerFrame: 0,\n\t\t\tframeTime: 0,\n\t\t\t_frameTime: 0\n\t\t};\n\t\tthis.shaders = device._shaderStats;\n\t\tthis.vram = device._vram;\n\t\tObject.defineProperty(this.vram, 'totalUsed', {\n\t\t\tget: function () {\n\t\t\t\treturn this.tex + this.vb + this.ib;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.vram, 'geom', {\n\t\t\tget: function () {\n\t\t\t\treturn this.vb + this.ib;\n\t\t\t}\n\t\t});\n\t}\n\n\tget scene() {\n\t\treturn getApplication().scene._stats;\n\t}\n\n\tget lightmapper() {\n\t\treturn getApplication().lightmapper._stats;\n\t}\n\n\tget batcher() {\n\t\treturn getApplication().batcher._stats;\n\t}\n\n}\n\nclass SceneRegistryItem {\n\tconstructor(name, url) {\n\t\tthis.name = name;\n\t\tthis.url = url;\n\t\tthis.data = null;\n\t\tthis._loading = false;\n\t\tthis._onLoadedCallbacks = [];\n\t}\n\n\tget loaded() {\n\t\treturn !!this.data;\n\t}\n\n\tget loading() {\n\t\treturn this._loading;\n\t}\n\n}\n\nclass SceneRegistry {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis._list = [];\n\t\tthis._index = {};\n\t\tthis._urlIndex = {};\n\t}\n\n\tdestroy() {\n\t\tthis._app = null;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n\tadd(name, url) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar item = new SceneRegistryItem(name, url);\n\n\t\tvar i = this._list.push(item);\n\n\t\tthis._index[item.name] = i - 1;\n\t\tthis._urlIndex[item.url] = i - 1;\n\t\treturn true;\n\t}\n\n\tfind(name) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\treturn this._list[this._index[name]];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByUrl(url) {\n\t\tif (this._urlIndex.hasOwnProperty(url)) {\n\t\t\treturn this._list[this._urlIndex[url]];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(name) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\tvar i = this._index[name];\n\t\t\tvar item = this._list[i];\n\t\t\tdelete this._urlIndex[item.url];\n\t\t\tdelete this._index[name];\n\n\t\t\tthis._list.splice(i, 1);\n\n\t\t\tfor (i = 0; i < this._list.length; i++) {\n\t\t\t\titem = this._list[i];\n\t\t\t\tthis._index[item.name] = i;\n\t\t\t\tthis._urlIndex[item.url] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_loadSceneData(sceneItem, storeInCache, callback) {\n\t\tvar url = sceneItem;\n\n\t\tif (sceneItem instanceof SceneRegistryItem) {\n\t\t\turl = sceneItem.url;\n\t\t} else {\n\t\t\tsceneItem = this.findByUrl(url);\n\n\t\t\tif (!sceneItem) {\n\t\t\t\tsceneItem = new SceneRegistryItem('Untitled', url);\n\t\t\t}\n\t\t}\n\n\t\tif (!sceneItem.url) {\n\t\t\tcallback(\"URL or SceneRegistryItem is null when loading a scene\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (sceneItem.loaded) {\n\t\t\tcallback(null, sceneItem);\n\t\t\treturn;\n\t\t}\n\n\t\tvar handler = this._app.loader.getHandler(\"hierarchy\");\n\n\t\tif (this._app.assets && this._app.assets.prefix && !ABSOLUTE_URL.test(url)) {\n\t\t\turl = path.join(this._app.assets.prefix, url);\n\t\t}\n\n\t\tsceneItem._onLoadedCallbacks.push(callback);\n\n\t\tif (!sceneItem._loading) {\n\t\t\thandler.load(url, function (err, data) {\n\t\t\t\tsceneItem.data = data;\n\t\t\t\tsceneItem._loading = false;\n\n\t\t\t\tfor (var i = 0; i < sceneItem._onLoadedCallbacks.length; i++) {\n\t\t\t\t\tsceneItem._onLoadedCallbacks[i](err, sceneItem);\n\t\t\t\t}\n\n\t\t\t\tif (!storeInCache) {\n\t\t\t\t\tsceneItem.data = null;\n\t\t\t\t}\n\n\t\t\t\tsceneItem._onLoadedCallbacks.length = 0;\n\t\t\t});\n\t\t}\n\n\t\tsceneItem._loading = true;\n\t}\n\n\tloadSceneData(sceneItem, callback) {\n\t\tthis._loadSceneData(sceneItem, true, callback);\n\t}\n\n\tunloadSceneData(sceneItem) {\n\t\tif (typeof sceneItem === 'string') {\n\t\t\tsceneItem = this.findByUrl(sceneItem);\n\t\t}\n\n\t\tif (sceneItem) {\n\t\t\tsceneItem.data = null;\n\t\t}\n\t}\n\n\tloadSceneHierarchy(sceneItem, callback) {\n\t\tvar self = this;\n\n\t\tvar handler = this._app.loader.getHandler(\"hierarchy\");\n\n\t\tthis._loadSceneData(sceneItem, false, function (err, sceneItem) {\n\t\t\tif (err) {\n\t\t\t\tif (callback) callback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = sceneItem.url;\n\t\t\tvar data = sceneItem.data;\n\n\t\t\tvar _loaded = function _loaded() {\n\t\t\t\tself._app.systems.script.preloading = true;\n\t\t\t\tvar entity = handler.open(url, data);\n\t\t\t\tself._app.systems.script.preloading = false;\n\n\t\t\t\tself._app.loader.clearCache(url, \"hierarchy\");\n\n\t\t\t\tself._app.root.addChild(entity);\n\n\t\t\t\tComponentSystem.initialize(entity);\n\t\t\t\tComponentSystem.postInitialize(entity);\n\t\t\t\tif (callback) callback(err, entity);\n\t\t\t};\n\n\t\t\tself._app._preloadScripts(data, _loaded);\n\t\t});\n\t}\n\n\tloadSceneSettings(sceneItem, callback) {\n\t\tvar self = this;\n\n\t\tthis._loadSceneData(sceneItem, false, function (err, sceneItem) {\n\t\t\tif (!err) {\n\t\t\t\tself._app.applySceneSettings(sceneItem.data.settings);\n\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tloadScene(url, callback) {\n\t\tvar self = this;\n\n\t\tvar handler = this._app.loader.getHandler(\"scene\");\n\n\t\tif (this._app.assets && this._app.assets.prefix && !ABSOLUTE_URL.test(url)) {\n\t\t\turl = path.join(this._app.assets.prefix, url);\n\t\t}\n\n\t\thandler.load(url, function (err, data) {\n\t\t\tif (!err) {\n\t\t\t\tvar _loaded = function _loaded() {\n\t\t\t\t\tself._app.systems.script.preloading = true;\n\t\t\t\t\tvar scene = handler.open(url, data);\n\t\t\t\t\tvar sceneItem = self.findByUrl(url);\n\n\t\t\t\t\tif (sceneItem && !sceneItem.loaded) {\n\t\t\t\t\t\tsceneItem.data = data;\n\t\t\t\t\t}\n\n\t\t\t\t\tself._app.systems.script.preloading = false;\n\n\t\t\t\t\tself._app.loader.clearCache(url, \"scene\");\n\n\t\t\t\t\tself._app.loader.patch({\n\t\t\t\t\t\tresource: scene,\n\t\t\t\t\t\ttype: \"scene\"\n\t\t\t\t\t}, self._app.assets);\n\n\t\t\t\t\tself._app.root.addChild(scene.root);\n\n\t\t\t\t\tif (self._app.systems.rigidbody && typeof Ammo !== 'undefined') {\n\t\t\t\t\t\tself._app.systems.rigidbody.gravity.set(scene._gravity.x, scene._gravity.y, scene._gravity.z);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(null, scene);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself._app._preloadScripts(data, _loaded);\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nclass SceneDepth {\n\tconstructor(application) {\n\t\tthis.application = application;\n\t\tthis.device = application.graphicsDevice;\n\t\tthis.clearOptions = null;\n\t\tthis.layer = null;\n\t\tthis.init();\n\t}\n\n\tallocateTexture(device, name, format) {\n\t\tconst texture = new Texture(device, {\n\t\t\tformat: format,\n\t\t\twidth: device.width,\n\t\t\theight: device.height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = name;\n\t\tdevice.scope.resolve(\"uDepthMap\").setValue(texture);\n\t\treturn texture;\n\t}\n\n\tallocateRenderTarget(renderTarget, device, name, format, isDepth) {\n\t\tconst buffer = this.allocateTexture(device, name, format);\n\n\t\tif (renderTarget) {\n\t\t\trenderTarget.destroyFrameBuffers();\n\n\t\t\tif (isDepth) {\n\t\t\t\trenderTarget._depthBuffer = buffer;\n\t\t\t} else {\n\t\t\t\trenderTarget._colorBuffer = buffer;\n\t\t\t}\n\t\t} else {\n\t\t\trenderTarget = new RenderTarget({\n\t\t\t\tcolorBuffer: isDepth ? null : buffer,\n\t\t\t\tdepthBuffer: isDepth ? buffer : null,\n\t\t\t\tdepth: !isDepth,\n\t\t\t\tstencil: device.supportsStencil,\n\t\t\t\tautoResolve: false\n\t\t\t});\n\t\t}\n\n\t\treturn renderTarget;\n\t}\n\n\treleaseRenderTarget(rt) {\n\t\tif (rt) {\n\t\t\trt.destroyTextureBuffers();\n\t\t\trt.destroy();\n\t\t}\n\t}\n\n\tinitWebGl2() {\n\t\tconst app = this.application;\n\t\tconst self = this;\n\t\tthis.clearOptions = {\n\t\t\tflags: 0\n\t\t};\n\t\tthis.layer = new Layer({\n\t\t\tenabled: false,\n\t\t\tname: \"Depth\",\n\t\t\tid: LAYERID_DEPTH,\n\t\t\tonEnable: function () {\n\t\t\t\tthis.renderTarget = self.allocateRenderTarget(this.renderTarget, app.graphicsDevice, \"rt-depth2\", PIXELFORMAT_DEPTHSTENCIL, true);\n\t\t\t},\n\t\t\tonDisable: function () {\n\t\t\t\tself.releaseRenderTarget(this.renderTarget);\n\t\t\t\tthis.renderTarget = null;\n\t\t\t},\n\t\t\tonPreRenderOpaque: function (cameraPass) {\n\t\t\t\tconst gl = app.graphicsDevice.gl;\n\t\t\t\tthis.srcFbo = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n\t\t\t\tif (this.renderTarget.width !== app.graphicsDevice.width || this.renderTarget.height !== app.graphicsDevice.height) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t}\n\n\t\t\t\tthis.oldClear = this.cameras[cameraPass].camera._clearOptions;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = self.clearOptions;\n\t\t\t},\n\t\t\tonPostRenderOpaque: function (cameraPass) {\n\t\t\t\tif (this.renderTarget) {\n\t\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = this.oldClear;\n\t\t\t\t\tapp.graphicsDevice.setRenderTarget(this.renderTarget);\n\t\t\t\t\tapp.graphicsDevice.updateBegin();\n\t\t\t\t\tconst gl = app.graphicsDevice.gl;\n\t\t\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.srcFbo);\n\t\t\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.renderTarget._glFrameBuffer);\n\t\t\t\t\tgl.blitFramebuffer(0, 0, this.renderTarget.width, this.renderTarget.height, 0, 0, this.renderTarget.width, this.renderTarget.height, gl.DEPTH_BUFFER_BIT, gl.NEAREST);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitWebGl1() {\n\t\tconst app = this.application;\n\t\tconst self = this;\n\t\tthis.clearOptions = {\n\t\t\tcolor: [254.0 / 255, 254.0 / 255, 254.0 / 255, 254.0 / 255],\n\t\t\tdepth: 1.0,\n\t\t\tflags: CLEARFLAG_COLOR | CLEARFLAG_DEPTH\n\t\t};\n\t\tthis.layer = new Layer({\n\t\t\tenabled: false,\n\t\t\tname: \"Depth\",\n\t\t\tid: LAYERID_DEPTH,\n\t\t\tshaderPass: SHADER_DEPTH,\n\t\t\tonEnable: function () {\n\t\t\t\tthis.renderTarget = self.allocateRenderTarget(this.renderTarget, app.graphicsDevice, \"rt-depth1\", PIXELFORMAT_R8_G8_B8_A8, false);\n\t\t\t},\n\t\t\tonDisable: function () {\n\t\t\t\tself.releaseRenderTarget(this.renderTarget);\n\t\t\t\tthis.renderTarget = null;\n\t\t\t},\n\t\t\tonPostCull: function (cameraPass) {\n\t\t\t\tconst visibleObjects = this.instances.visibleOpaque[cameraPass];\n\t\t\t\tconst visibleList = visibleObjects.list;\n\t\t\t\tconst layerComposition = app.scene.layers;\n\t\t\t\tvar subLayerEnabled = layerComposition.subLayerEnabled;\n\t\t\t\tvar isTransparent = layerComposition.subLayerList;\n\t\t\t\tconst rt = app.scene.layers.getLayerById(LAYERID_WORLD).renderTarget;\n\t\t\t\tconst cam = this.cameras[cameraPass];\n\t\t\t\tlet visibleLength = 0;\n\t\t\t\tconst layers = layerComposition.layerList;\n\n\t\t\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\t\t\tconst layer = layers[i];\n\t\t\t\t\tif (layer === this) break;\n\t\t\t\t\tif (layer.renderTarget !== rt || !layer.enabled || !subLayerEnabled[i]) continue;\n\t\t\t\t\tconst layerCamId = layer.cameras.indexOf(cam);\n\t\t\t\t\tif (layerCamId < 0) continue;\n\t\t\t\t\tconst transparent = isTransparent[i];\n\t\t\t\t\tlet layerVisibleList = transparent ? layer.instances.visibleTransparent[layerCamId] : layer.instances.visibleOpaque[layerCamId];\n\t\t\t\t\tconst layerVisibleListLength = layerVisibleList.length;\n\t\t\t\t\tlayerVisibleList = layerVisibleList.list;\n\n\t\t\t\t\tfor (let j = 0; j < layerVisibleListLength; j++) {\n\t\t\t\t\t\tconst drawCall = layerVisibleList[j];\n\n\t\t\t\t\t\tif (drawCall.material && drawCall.material.depthWrite && !drawCall._noDepthDrawGl1) {\n\t\t\t\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\t\t\t\tvisibleLength++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisibleObjects.length = visibleLength;\n\t\t\t},\n\t\t\tonPreRenderOpaque: function (cameraPass) {\n\t\t\t\tif (this.renderTarget.width !== app.graphicsDevice.width || this.renderTarget.height !== app.graphicsDevice.height) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t}\n\n\t\t\t\tthis.oldClear = this.cameras[cameraPass].camera._clearOptions;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = self.clearOptions;\n\t\t\t},\n\t\t\tonDrawCall: function () {\n\t\t\t\tapp.graphicsDevice.setColorWrite(true, true, true, true);\n\t\t\t},\n\t\t\tonPostRenderOpaque: function (cameraPass) {\n\t\t\t\tif (!this.renderTarget) return;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = this.oldClear;\n\t\t\t}\n\t\t});\n\t}\n\n\tinit() {\n\t\tif (this.device.webgl2) {\n\t\t\tthis.initWebGl2();\n\t\t} else {\n\t\t\tthis.initWebGl1();\n\t\t}\n\t}\n\n\tpatch(layer) {\n\t\tlayer.onEnable = this.layer.onEnable;\n\t\tlayer.onDisable = this.layer.onDisable;\n\t\tlayer.onPreRenderOpaque = this.layer.onPreRenderOpaque;\n\t\tlayer.onPostRenderOpaque = this.layer.onPostRenderOpaque;\n\t\tlayer.shaderPass = this.layer.shaderPass;\n\t\tlayer.onPostCull = this.layer.onPostCull;\n\t\tlayer.onDrawCall = this.layer.onDrawCall;\n\t}\n\n}\n\nclass Progress {\n\tconstructor(length) {\n\t\tthis.length = length;\n\t\tthis.count = 0;\n\t}\n\n\tinc() {\n\t\tthis.count++;\n\t}\n\n\tdone() {\n\t\treturn this.count === this.length;\n\t}\n\n}\n\nvar _deprecationWarning = false;\nvar app = null;\n\nclass Application extends EventHandler {\n\tconstructor(canvas, options = {}) {\n\t\tsuper();\n\t\tconsole.log(\"Powered by PlayCanvas \" + version + \" \" + revision);\n\t\tApplication._applications[canvas.id] = this;\n\t\tsetApplication(this);\n\t\tapp = this;\n\t\tthis._destroyRequested = false;\n\t\tthis._inFrameUpdate = false;\n\t\tthis._time = 0;\n\t\tthis.timeScale = 1;\n\t\tthis.maxDeltaTime = 0.1;\n\t\tthis.frame = 0;\n\t\tthis.autoRender = true;\n\t\tthis.renderNextFrame = false;\n\t\tthis.useLegacyScriptAttributeCloning = script.legacy;\n\t\tthis._librariesLoaded = false;\n\t\tthis._fillMode = FILLMODE_KEEP_ASPECT;\n\t\tthis._resolutionMode = RESOLUTION_FIXED;\n\t\tthis._allowResize = true;\n\t\tthis.context = this;\n\t\tif (!options.graphicsDeviceOptions) options.graphicsDeviceOptions = {};\n\t\toptions.graphicsDeviceOptions.xrCompatible = true;\n\t\toptions.graphicsDeviceOptions.alpha = options.graphicsDeviceOptions.alpha || false;\n\t\tthis.graphicsDevice = new GraphicsDevice(canvas, options.graphicsDeviceOptions);\n\t\tthis.stats = new ApplicationStats(this.graphicsDevice);\n\t\tthis._soundManager = new SoundManager(options);\n\t\tthis.loader = new ResourceLoader(this);\n\t\tWorldClusters.init(this.graphicsDevice);\n\t\tthis._entityIndex = {};\n\t\tthis.scene = new Scene();\n\t\tthis.root = new Entity(this);\n\t\tthis.root._enabledInHierarchy = true;\n\t\tthis._enableList = [];\n\t\tthis._enableList.size = 0;\n\t\tthis.assets = new AssetRegistry(this.loader);\n\t\tif (options.assetPrefix) this.assets.prefix = options.assetPrefix;\n\t\tthis.bundles = new BundleRegistry(this.assets);\n\t\tthis.enableBundles = typeof TextDecoder !== 'undefined';\n\t\tthis.scriptsOrder = options.scriptsOrder || [];\n\t\tthis.scripts = new ScriptRegistry(this);\n\t\tthis.i18n = new I18n(this);\n\t\tthis.scenes = new SceneRegistry(this);\n\t\tvar self = this;\n\t\tthis.defaultLayerWorld = new Layer({\n\t\t\tname: \"World\",\n\t\t\tid: LAYERID_WORLD\n\t\t});\n\t\tthis.sceneDepth = new SceneDepth(this);\n\t\tthis.defaultLayerDepth = this.sceneDepth.layer;\n\t\tthis.defaultLayerSkybox = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"Skybox\",\n\t\t\tid: LAYERID_SKYBOX,\n\t\t\topaqueSortMode: SORTMODE_NONE\n\t\t});\n\t\tthis.defaultLayerUi = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"UI\",\n\t\t\tid: LAYERID_UI,\n\t\t\ttransparentSortMode: SORTMODE_MANUAL,\n\t\t\tpassThrough: false\n\t\t});\n\t\tthis.defaultLayerImmediate = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"Immediate\",\n\t\t\tid: LAYERID_IMMEDIATE,\n\t\t\topaqueSortMode: SORTMODE_NONE,\n\t\t\tpassThrough: true\n\t\t});\n\t\tconst defaultLayerComposition = new LayerComposition(this.graphicsDevice, \"default\");\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerWorld);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerDepth);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerSkybox);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerWorld);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerImmediate);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerImmediate);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerUi);\n\t\tthis.scene.layers = defaultLayerComposition;\n\t\tthis._immediateLayer = this.defaultLayerImmediate;\n\t\tthis.scene.on('set:layers', function (oldComp, newComp) {\n\t\t\tvar list = newComp.layerList;\n\t\t\tvar layer;\n\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\tlayer = list[i];\n\n\t\t\t\tswitch (layer.id) {\n\t\t\t\t\tcase LAYERID_DEPTH:\n\t\t\t\t\t\tself.sceneDepth.patch(layer);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LAYERID_UI:\n\t\t\t\t\t\tlayer.passThrough = self.defaultLayerUi.passThrough;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LAYERID_IMMEDIATE:\n\t\t\t\t\t\tlayer.passThrough = self.defaultLayerImmediate.passThrough;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tAreaLightLuts.createPlaceholder(this.graphicsDevice);\n\t\tthis.renderer = new ForwardRenderer(this.graphicsDevice);\n\t\tthis.renderer.scene = this.scene;\n\t\tthis.lightmapper = new Lightmapper(this.graphicsDevice, this.root, this.scene, this.renderer, this.assets);\n\t\tthis.once('prerender', this._firstBake, this);\n\t\tthis.batcher = new BatchManager(this.graphicsDevice, this.root, this.scene);\n\t\tthis.once('prerender', this._firstBatch, this);\n\t\tthis.keyboard = options.keyboard || null;\n\t\tthis.mouse = options.mouse || null;\n\t\tthis.touch = options.touch || null;\n\t\tthis.gamepads = options.gamepads || null;\n\t\tthis.elementInput = options.elementInput || null;\n\t\tif (this.elementInput) this.elementInput.app = this;\n\t\tthis.vr = null;\n\t\tthis.xr = new XrManager(this);\n\t\tif (this.elementInput) this.elementInput.attachSelectEvents();\n\t\tthis._inTools = false;\n\t\tthis._skyboxLast = 0;\n\t\tthis._scriptPrefix = options.scriptPrefix || '';\n\n\t\tif (this.enableBundles) {\n\t\t\tthis.loader.addHandler(\"bundle\", new BundleHandler(this.assets));\n\t\t}\n\n\t\tthis.loader.addHandler(\"animation\", new AnimationHandler());\n\t\tthis.loader.addHandler(\"animclip\", new AnimClipHandler());\n\t\tthis.loader.addHandler(\"animstategraph\", new AnimStateGraphHandler());\n\t\tthis.loader.addHandler(\"model\", new ModelHandler(this.graphicsDevice, this.scene.defaultMaterial));\n\t\tthis.loader.addHandler(\"render\", new RenderHandler(this.assets));\n\t\tthis.loader.addHandler(\"material\", new MaterialHandler(this));\n\t\tthis.loader.addHandler(\"texture\", new TextureHandler(this.graphicsDevice, this.assets, this.loader));\n\t\tthis.loader.addHandler(\"text\", new TextHandler());\n\t\tthis.loader.addHandler(\"json\", new JsonHandler());\n\t\tthis.loader.addHandler(\"audio\", new AudioHandler(this._soundManager));\n\t\tthis.loader.addHandler(\"script\", new ScriptHandler(this));\n\t\tthis.loader.addHandler(\"scene\", new SceneHandler(this));\n\t\tthis.loader.addHandler(\"cubemap\", new CubemapHandler(this.graphicsDevice, this.assets, this.loader));\n\t\tthis.loader.addHandler(\"html\", new HtmlHandler());\n\t\tthis.loader.addHandler(\"css\", new CssHandler());\n\t\tthis.loader.addHandler(\"shader\", new ShaderHandler());\n\t\tthis.loader.addHandler(\"hierarchy\", new HierarchyHandler(this));\n\t\tthis.loader.addHandler(\"folder\", new FolderHandler());\n\t\tthis.loader.addHandler(\"font\", new FontHandler(this.loader));\n\t\tthis.loader.addHandler(\"binary\", new BinaryHandler());\n\t\tthis.loader.addHandler(\"textureatlas\", new TextureAtlasHandler(this.loader));\n\t\tthis.loader.addHandler(\"sprite\", new SpriteHandler(this.assets, this.graphicsDevice));\n\t\tthis.loader.addHandler(\"template\", new TemplateHandler(this));\n\t\tthis.loader.addHandler(\"container\", new ContainerHandler(this.graphicsDevice, this.scene.defaultMaterial));\n\t\tthis.systems = new ComponentSystemRegistry();\n\t\tthis.systems.add(new RigidBodyComponentSystem(this));\n\t\tthis.systems.add(new CollisionComponentSystem(this));\n\t\tthis.systems.add(new JointComponentSystem(this));\n\t\tthis.systems.add(new AnimationComponentSystem(this));\n\t\tthis.systems.add(new AnimComponentSystem(this));\n\t\tthis.systems.add(new ModelComponentSystem(this));\n\t\tthis.systems.add(new RenderComponentSystem(this));\n\t\tthis.systems.add(new CameraComponentSystem(this));\n\t\tthis.systems.add(new LightComponentSystem(this));\n\n\t\tif (script.legacy) {\n\t\t\tthis.systems.add(new ScriptLegacyComponentSystem(this));\n\t\t} else {\n\t\t\tthis.systems.add(new ScriptComponentSystem(this));\n\t\t}\n\n\t\tthis.systems.add(new AudioSourceComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new SoundComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new AudioListenerComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new ParticleSystemComponentSystem(this));\n\t\tthis.systems.add(new ScreenComponentSystem(this));\n\t\tthis.systems.add(new ElementComponentSystem(this));\n\t\tthis.systems.add(new ButtonComponentSystem(this));\n\t\tthis.systems.add(new ScrollViewComponentSystem(this));\n\t\tthis.systems.add(new ScrollbarComponentSystem(this));\n\t\tthis.systems.add(new SpriteComponentSystem(this));\n\t\tthis.systems.add(new LayoutGroupComponentSystem(this));\n\t\tthis.systems.add(new LayoutChildComponentSystem(this));\n\t\tthis.systems.add(new ZoneComponentSystem(this));\n\t\tthis._visibilityChangeHandler = this.onVisibilityChange.bind(this);\n\n\t\tif (typeof document !== 'undefined') {\n\t\t\tif (document.hidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'hidden';\n\t\t\t\tdocument.addEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.mozHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'mozHidden';\n\t\t\t\tdocument.addEventListener('mozvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.msHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'msHidden';\n\t\t\t\tdocument.addEventListener('msvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.webkitHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'webkitHidden';\n\t\t\t\tdocument.addEventListener('webkitvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t}\n\t\t}\n\n\t\tthis.tick = makeTick(this);\n\t}\n\n\tstatic getApplication(id) {\n\t\treturn id ? Application._applications[id] : getApplication();\n\t}\n\n\tget fillMode() {\n\t\treturn this._fillMode;\n\t}\n\n\tget resolutionMode() {\n\t\treturn this._resolutionMode;\n\t}\n\n\tconfigure(url, callback) {\n\t\tvar self = this;\n\t\thttp.get(url, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar props = response.application_properties;\n\t\t\tvar scenes = response.scenes;\n\t\t\tvar assets = response.assets;\n\n\t\t\tself._parseApplicationProperties(props, function (err) {\n\t\t\t\tself._parseScenes(scenes);\n\n\t\t\t\tself._parseAssets(assets);\n\n\t\t\t\tif (!err) {\n\t\t\t\t\tcallback(null);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpreload(callback) {\n\t\tvar self = this;\n\t\tvar i, total;\n\t\tself.fire(\"preload:start\");\n\t\tvar assets = this.assets.list({\n\t\t\tpreload: true\n\t\t});\n\n\t\tvar _assets = new Progress(assets.length);\n\n\t\tvar _done = false;\n\n\t\tvar done = function done() {\n\t\t\tif (!self.graphicsDevice) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!_done && _assets.done()) {\n\t\t\t\t_done = true;\n\t\t\t\tself.fire(\"preload:end\");\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\n\t\ttotal = assets.length;\n\n\t\tvar count = function count() {\n\t\t\treturn _assets.count;\n\t\t};\n\n\t\tif (_assets.length) {\n\t\t\tvar onAssetLoad = function onAssetLoad(asset) {\n\t\t\t\t_assets.inc();\n\n\t\t\t\tself.fire('preload:progress', count() / total);\n\t\t\t\tif (_assets.done()) done();\n\t\t\t};\n\n\t\t\tvar onAssetError = function onAssetError(err, asset) {\n\t\t\t\t_assets.inc();\n\n\t\t\t\tself.fire('preload:progress', count() / total);\n\t\t\t\tif (_assets.done()) done();\n\t\t\t};\n\n\t\t\tfor (i = 0; i < assets.length; i++) {\n\t\t\t\tif (!assets[i].loaded) {\n\t\t\t\t\tassets[i].once('load', onAssetLoad);\n\t\t\t\t\tassets[i].once('error', onAssetError);\n\t\t\t\t\tthis.assets.load(assets[i]);\n\t\t\t\t} else {\n\t\t\t\t\t_assets.inc();\n\n\t\t\t\t\tself.fire(\"preload:progress\", count() / total);\n\t\t\t\t\tif (_assets.done()) done();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdone();\n\t\t}\n\t}\n\n\t_preloadScripts(sceneData, callback) {\n\t\tif (!script.legacy) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\t\tself.systems.script.preloading = true;\n\n\t\tvar scripts = this._getScriptReferences(sceneData);\n\n\t\tvar i = 0,\n\t\t\t\tl = scripts.length;\n\t\tvar progress = new Progress(l);\n\t\tvar scriptUrl;\n\t\tvar regex = /^http(s)?:\\/\\//;\n\n\t\tif (l) {\n\t\t\tvar onLoad = function onLoad(err, ScriptType) {\n\t\t\t\tif (err) console.error(err);\n\t\t\t\tprogress.inc();\n\n\t\t\t\tif (progress.done()) {\n\t\t\t\t\tself.systems.script.preloading = false;\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tscriptUrl = scripts[i];\n\t\t\t\tif (!regex.test(scriptUrl.toLowerCase()) && self._scriptPrefix) scriptUrl = path.join(self._scriptPrefix, scripts[i]);\n\t\t\t\tthis.loader.load(scriptUrl, 'script', onLoad);\n\t\t\t}\n\t\t} else {\n\t\t\tself.systems.script.preloading = false;\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t_handleAreaLightDataProperty(prop) {\n\t\tvar asset = this.assets.get(prop);\n\n\t\tif (asset) {\n\t\t\tthis.setAreaLightLuts(asset);\n\t\t} else {\n\t\t\tthis.assets.once('add:' + prop, this.setAreaLightLuts, this);\n\t\t}\n\t}\n\n\t_parseApplicationProperties(props, callback) {\n\t\tvar i;\n\t\tvar len;\n\n\t\tif (typeof props.maxAssetRetries === 'number' && props.maxAssetRetries > 0) {\n\t\t\tthis.loader.enableRetry(props.maxAssetRetries);\n\t\t}\n\n\t\tif (!props.useDevicePixelRatio) props.useDevicePixelRatio = props.use_device_pixel_ratio;\n\t\tif (!props.resolutionMode) props.resolutionMode = props.resolution_mode;\n\t\tif (!props.fillMode) props.fillMode = props.fill_mode;\n\t\tthis._width = props.width;\n\t\tthis._height = props.height;\n\n\t\tif (props.useDevicePixelRatio) {\n\t\t\tthis.graphicsDevice.maxPixelRatio = window.devicePixelRatio;\n\t\t}\n\n\t\tthis.setCanvasResolution(props.resolutionMode, this._width, this._height);\n\t\tthis.setCanvasFillMode(props.fillMode, this._width, this._height);\n\n\t\tif (props.layers && props.layerOrder) {\n\t\t\tvar composition = new LayerComposition(this.graphicsDevice, \"application\");\n\t\t\tvar layers = {};\n\n\t\t\tfor (var key in props.layers) {\n\t\t\t\tvar data = props.layers[key];\n\t\t\t\tdata.id = parseInt(key, 10);\n\t\t\t\tdata.enabled = data.id !== LAYERID_DEPTH;\n\t\t\t\tlayers[key] = new Layer(data);\n\t\t\t}\n\n\t\t\tfor (i = 0, len = props.layerOrder.length; i < len; i++) {\n\t\t\t\tvar sublayer = props.layerOrder[i];\n\t\t\t\tvar layer = layers[sublayer.layer];\n\t\t\t\tif (!layer) continue;\n\n\t\t\t\tif (sublayer.transparent) {\n\t\t\t\t\tcomposition.pushTransparent(layer);\n\t\t\t\t} else {\n\t\t\t\t\tcomposition.pushOpaque(layer);\n\t\t\t\t}\n\n\t\t\t\tcomposition.subLayerEnabled[i] = sublayer.enabled;\n\t\t\t}\n\n\t\t\tthis.scene.layers = composition;\n\t\t}\n\n\t\tif (props.batchGroups) {\n\t\t\tfor (i = 0, len = props.batchGroups.length; i < len; i++) {\n\t\t\t\tvar grp = props.batchGroups[i];\n\t\t\t\tthis.batcher.addGroup(grp.name, grp.dynamic, grp.maxAabbSize, grp.id, grp.layers);\n\t\t\t}\n\t\t}\n\n\t\tif (props.i18nAssets) {\n\t\t\tthis.i18n.assets = props.i18nAssets;\n\t\t}\n\n\t\tif (props.areaLightDataAsset) {\n\t\t\tthis._handleAreaLightDataProperty(props.areaLightDataAsset);\n\t\t}\n\n\t\tthis._loadLibraries(props.libraries, callback);\n\t}\n\n\t_loadLibraries(urls, callback) {\n\t\tvar len = urls.length;\n\t\tvar count = len;\n\t\tvar self = this;\n\t\tvar regex = /^http(s)?:\\/\\//;\n\n\t\tif (len) {\n\t\t\tvar onLoad = function onLoad(err, script) {\n\t\t\t\tcount--;\n\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t} else if (count === 0) {\n\t\t\t\t\tself.onLibrariesLoaded();\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (var i = 0; i < len; ++i) {\n\t\t\t\tvar url = urls[i];\n\t\t\t\tif (!regex.test(url.toLowerCase()) && self._scriptPrefix) url = path.join(self._scriptPrefix, url);\n\t\t\t\tthis.loader.load(url, 'script', onLoad);\n\t\t\t}\n\t\t} else {\n\t\t\tself.onLibrariesLoaded();\n\t\t\tcallback(null);\n\t\t}\n\t}\n\n\t_parseScenes(scenes) {\n\t\tif (!scenes) return;\n\n\t\tfor (var i = 0; i < scenes.length; i++) {\n\t\t\tthis.scenes.add(scenes[i].name, scenes[i].url);\n\t\t}\n\t}\n\n\t_parseAssets(assets) {\n\t\tvar i, id;\n\t\tvar list = [];\n\t\tvar scriptsIndex = {};\n\t\tvar bundlesIndex = {};\n\n\t\tif (!script.legacy) {\n\t\t\tfor (i = 0; i < this.scriptsOrder.length; i++) {\n\t\t\t\tid = this.scriptsOrder[i];\n\t\t\t\tif (!assets[id]) continue;\n\t\t\t\tscriptsIndex[id] = true;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\n\t\t\tif (this.enableBundles) {\n\t\t\t\tfor (id in assets) {\n\t\t\t\t\tif (assets[id].type === 'bundle') {\n\t\t\t\t\t\tbundlesIndex[id] = true;\n\t\t\t\t\t\tlist.push(assets[id]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (id in assets) {\n\t\t\t\tif (scriptsIndex[id] || bundlesIndex[id]) continue;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.enableBundles) {\n\t\t\t\tfor (id in assets) {\n\t\t\t\t\tif (assets[id].type === 'bundle') {\n\t\t\t\t\t\tbundlesIndex[id] = true;\n\t\t\t\t\t\tlist.push(assets[id]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (id in assets) {\n\t\t\t\tif (bundlesIndex[id]) continue;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < list.length; i++) {\n\t\t\tvar data = list[i];\n\t\t\tvar asset = new Asset(data.name, data.type, data.file, data.data);\n\t\t\tasset.id = parseInt(data.id, 10);\n\t\t\tasset.preload = data.preload ? data.preload : false;\n\t\t\tasset.loaded = data.type === 'script' && data.data && data.data.loadingType > 0;\n\t\t\tasset.tags.add(data.tags);\n\n\t\t\tif (data.i18n) {\n\t\t\t\tfor (var locale in data.i18n) {\n\t\t\t\t\tasset.addLocalizedAssetId(locale, data.i18n[locale]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.assets.add(asset);\n\t\t}\n\t}\n\n\t_getScriptReferences(scene) {\n\t\tvar i, key;\n\t\tvar priorityScripts = [];\n\n\t\tif (scene.settings.priority_scripts) {\n\t\t\tpriorityScripts = scene.settings.priority_scripts;\n\t\t}\n\n\t\tvar _scripts = [];\n\t\tvar _index = {};\n\n\t\tfor (i = 0; i < priorityScripts.length; i++) {\n\t\t\t_scripts.push(priorityScripts[i]);\n\n\t\t\t_index[priorityScripts[i]] = true;\n\t\t}\n\n\t\tvar entities = scene.entities;\n\n\t\tfor (key in entities) {\n\t\t\tif (!entities[key].components.script) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar scripts = entities[key].components.script.scripts;\n\n\t\t\tfor (i = 0; i < scripts.length; i++) {\n\t\t\t\tif (_index[scripts[i].url]) continue;\n\n\t\t\t\t_scripts.push(scripts[i].url);\n\n\t\t\t\t_index[scripts[i].url] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn _scripts;\n\t}\n\n\tstart() {\n\t\tthis.frame = 0;\n\t\tthis.fire(\"start\", {\n\t\t\ttimestamp: now(),\n\t\t\ttarget: this\n\t\t});\n\n\t\tif (!this._librariesLoaded) {\n\t\t\tthis.onLibrariesLoaded();\n\t\t}\n\n\t\tComponentSystem.initialize(this.root);\n\t\tthis.fire(\"initialize\");\n\t\tComponentSystem.postInitialize(this.root);\n\t\tthis.fire(\"postinitialize\");\n\t\tthis.tick();\n\t}\n\n\tinputUpdate(dt) {\n\t\tif (this.controller) {\n\t\t\tthis.controller.update(dt);\n\t\t}\n\n\t\tif (this.mouse) {\n\t\t\tthis.mouse.update(dt);\n\t\t}\n\n\t\tif (this.keyboard) {\n\t\t\tthis.keyboard.update(dt);\n\t\t}\n\n\t\tif (this.gamepads) {\n\t\t\tthis.gamepads.update(dt);\n\t\t}\n\t}\n\n\tupdate(dt) {\n\t\tthis.frame++;\n\t\tthis.graphicsDevice.updateClientRect();\n\t\tif (this.vr) this.vr.poll();\n\t\tif (script.legacy) ComponentSystem.fixedUpdate(1.0 / 60.0, this._inTools);\n\t\tComponentSystem.update(dt, this._inTools);\n\t\tComponentSystem.animationUpdate(dt, this._inTools);\n\t\tComponentSystem.postUpdate(dt, this._inTools);\n\t\tthis.fire(\"update\", dt);\n\t\tthis.inputUpdate(dt);\n\t}\n\n\trender() {\n\t\tthis.fire(\"prerender\");\n\t\tthis.root.syncHierarchy();\n\t\tthis.batcher.updateAll();\n\t\tthis.renderer.renderComposition(this.scene.layers);\n\t\tthis.fire(\"postrender\");\n\t}\n\n\t_fillFrameStatsBasic(now, dt, ms) {\n\t\tvar stats = this.stats.frame;\n\t\tstats.dt = dt;\n\t\tstats.ms = ms;\n\n\t\tif (now > stats._timeToCountFrames) {\n\t\t\tstats.fps = stats._fpsAccum;\n\t\t\tstats._fpsAccum = 0;\n\t\t\tstats._timeToCountFrames = now + 1000;\n\t\t} else {\n\t\t\tstats._fpsAccum++;\n\t\t}\n\n\t\tthis.stats.drawCalls.total = this.graphicsDevice._drawCallsPerFrame;\n\t\tthis.graphicsDevice._drawCallsPerFrame = 0;\n\t}\n\n\t_fillFrameStats() {\n\t\tvar stats = this.stats.frame;\n\t\tstats.cameras = this.renderer._camerasRendered;\n\t\tstats.materials = this.renderer._materialSwitches;\n\t\tstats.shaders = this.graphicsDevice._shaderSwitchesPerFrame;\n\t\tstats.shadowMapUpdates = this.renderer._shadowMapUpdates;\n\t\tstats.shadowMapTime = this.renderer._shadowMapTime;\n\t\tstats.depthMapTime = this.renderer._depthMapTime;\n\t\tstats.forwardTime = this.renderer._forwardTime;\n\t\tvar prims = this.graphicsDevice._primsPerFrame;\n\t\tstats.triangles = prims[PRIMITIVE_TRIANGLES] / 3 + Math.max(prims[PRIMITIVE_TRISTRIP] - 2, 0) + Math.max(prims[PRIMITIVE_TRIFAN] - 2, 0);\n\t\tstats.cullTime = this.renderer._cullTime;\n\t\tstats.sortTime = this.renderer._sortTime;\n\t\tstats.skinTime = this.renderer._skinTime;\n\t\tstats.morphTime = this.renderer._morphTime;\n\t\tstats.instancingTime = this.renderer._instancingTime;\n\t\tstats.lightClusters = this.renderer._lightClusters;\n\t\tstats.lightClustersTime = this.renderer._lightClustersTime;\n\t\tstats.otherPrimitives = 0;\n\n\t\tfor (var i = 0; i < prims.length; i++) {\n\t\t\tif (i < PRIMITIVE_TRIANGLES) {\n\t\t\t\tstats.otherPrimitives += prims[i];\n\t\t\t}\n\n\t\t\tprims[i] = 0;\n\t\t}\n\n\t\tthis.renderer._camerasRendered = 0;\n\t\tthis.renderer._materialSwitches = 0;\n\t\tthis.renderer._shadowMapUpdates = 0;\n\t\tthis.graphicsDevice._shaderSwitchesPerFrame = 0;\n\t\tthis.renderer._cullTime = 0;\n\t\tthis.renderer._layerCompositionUpdateTime = 0;\n\t\tthis.renderer._lightClustersTime = 0;\n\t\tthis.renderer._sortTime = 0;\n\t\tthis.renderer._skinTime = 0;\n\t\tthis.renderer._morphTime = 0;\n\t\tthis.renderer._instancingTime = 0;\n\t\tthis.renderer._shadowMapTime = 0;\n\t\tthis.renderer._depthMapTime = 0;\n\t\tthis.renderer._forwardTime = 0;\n\t\tstats = this.stats.drawCalls;\n\t\tstats.forward = this.renderer._forwardDrawCalls;\n\t\tstats.culled = this.renderer._numDrawCallsCulled;\n\t\tstats.depth = 0;\n\t\tstats.shadow = this.renderer._shadowDrawCalls;\n\t\tstats.skinned = this.renderer._skinDrawCalls;\n\t\tstats.immediate = 0;\n\t\tstats.instanced = 0;\n\t\tstats.removedByInstancing = 0;\n\t\tstats.misc = stats.total - (stats.forward + stats.shadow);\n\t\tthis.renderer._depthDrawCalls = 0;\n\t\tthis.renderer._shadowDrawCalls = 0;\n\t\tthis.renderer._forwardDrawCalls = 0;\n\t\tthis.renderer._numDrawCallsCulled = 0;\n\t\tthis.renderer._skinDrawCalls = 0;\n\t\tthis.renderer._immediateRendered = 0;\n\t\tthis.renderer._instancedDrawCalls = 0;\n\t\tthis.renderer._removedByInstancing = 0;\n\t\tthis.stats.misc.renderTargetCreationTime = this.graphicsDevice.renderTargetCreationTime;\n\t\tstats = this.stats.particles;\n\t\tstats.updatesPerFrame = stats._updatesPerFrame;\n\t\tstats.frameTime = stats._frameTime;\n\t\tstats._updatesPerFrame = 0;\n\t\tstats._frameTime = 0;\n\t}\n\n\tsetCanvasFillMode(mode, width, height) {\n\t\tthis._fillMode = mode;\n\t\tthis.resizeCanvas(width, height);\n\t}\n\n\tsetCanvasResolution(mode, width, height) {\n\t\tthis._resolutionMode = mode;\n\n\t\tif (mode === RESOLUTION_AUTO && width === undefined) {\n\t\t\twidth = this.graphicsDevice.canvas.clientWidth;\n\t\t\theight = this.graphicsDevice.canvas.clientHeight;\n\t\t}\n\n\t\tthis.graphicsDevice.resizeCanvas(width, height);\n\t}\n\n\tisHidden() {\n\t\treturn document[this._hiddenAttr];\n\t}\n\n\tonVisibilityChange() {\n\t\tif (this.isHidden()) {\n\t\t\tthis._soundManager.suspend();\n\t\t} else {\n\t\t\tthis._soundManager.resume();\n\t\t}\n\t}\n\n\tresizeCanvas(width, height) {\n\t\tif (!this._allowResize) return;\n\t\tif (this.xr && this.xr.session) return;\n\t\tvar windowWidth = window.innerWidth;\n\t\tvar windowHeight = window.innerHeight;\n\n\t\tif (this._fillMode === FILLMODE_KEEP_ASPECT) {\n\t\t\tvar r = this.graphicsDevice.canvas.width / this.graphicsDevice.canvas.height;\n\t\t\tvar winR = windowWidth / windowHeight;\n\n\t\t\tif (r > winR) {\n\t\t\t\twidth = windowWidth;\n\t\t\t\theight = width / r;\n\t\t\t} else {\n\t\t\t\theight = windowHeight;\n\t\t\t\twidth = height * r;\n\t\t\t}\n\t\t} else if (this._fillMode === FILLMODE_FILL_WINDOW) {\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t}\n\n\t\tthis.graphicsDevice.canvas.style.width = width + 'px';\n\t\tthis.graphicsDevice.canvas.style.height = height + 'px';\n\t\tthis.updateCanvasSize();\n\t\treturn {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\tupdateCanvasSize() {\n\t\tif (!this._allowResize || this.xr.active) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._resolutionMode === RESOLUTION_AUTO) {\n\t\t\tconst canvas = this.graphicsDevice.canvas;\n\t\t\tthis.graphicsDevice.resizeCanvas(canvas.clientWidth, canvas.clientHeight);\n\t\t}\n\t}\n\n\tonLibrariesLoaded() {\n\t\tthis._librariesLoaded = true;\n\t\tthis.systems.rigidbody.onLibraryLoaded();\n\t}\n\n\tapplySceneSettings(settings) {\n\t\tvar asset;\n\n\t\tif (this.systems.rigidbody && typeof Ammo !== 'undefined') {\n\t\t\tvar gravity = settings.physics.gravity;\n\t\t\tthis.systems.rigidbody.gravity.set(gravity[0], gravity[1], gravity[2]);\n\t\t}\n\n\t\tthis.scene.applySettings(settings);\n\n\t\tif (settings.render.hasOwnProperty('skybox')) {\n\t\t\tif (settings.render.skybox) {\n\t\t\t\tasset = this.assets.get(settings.render.skybox);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis.setSkybox(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis.assets.once('add:' + settings.render.skybox, this.setSkybox, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setSkybox(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetAreaLightLuts(asset) {\n\t\tif (asset) {\n\t\t\tconst device = this.graphicsDevice;\n\t\t\tasset.ready(function (asset) {\n\t\t\t\tAreaLightLuts.set(device, asset.resource);\n\t\t\t});\n\t\t\tthis.assets.load(asset);\n\t\t}\n\t}\n\n\tsetSkybox(asset) {\n\t\tif (asset) {\n\t\t\tif (this._skyboxLast === asset.id) {\n\t\t\t\tif (this.scene.skyboxMip === 0 && !asset.loadFaces) {\n\t\t\t\t\tthis._skyboxLoad(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._onSkyboxChange(asset);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._skyboxLast) {\n\t\t\t\tthis.assets.off('add:' + this._skyboxLast, this.setSkybox, this);\n\t\t\t\tthis.assets.off('load:' + this._skyboxLast, this._onSkyboxChange, this);\n\t\t\t\tthis.assets.off('remove:' + this._skyboxLast, this._skyboxRemove, this);\n\t\t\t}\n\n\t\t\tthis._skyboxLast = asset.id;\n\t\t\tthis.assets.on('load:' + asset.id, this._onSkyboxChange, this);\n\t\t\tthis.assets.once('remove:' + asset.id, this._skyboxRemove, this);\n\t\t\tif (asset.resource) this.scene.setSkybox(asset.resources);\n\n\t\t\tthis._skyboxLoad(asset);\n\t\t} else {\n\t\t\tif (!this._skyboxLast) return;\n\n\t\t\tthis._skyboxRemove({\n\t\t\t\tid: this._skyboxLast\n\t\t\t});\n\t\t}\n\t}\n\n\tenableVr() {\n\t\tif (!this.vr) {\n\t\t\tthis.vr = new VrManager(this);\n\t\t}\n\t}\n\n\tdisableVr() {\n\t\tif (this.vr) {\n\t\t\tthis.vr.destroy();\n\t\t\tthis.vr = null;\n\t\t}\n\t}\n\n\t_onSkyboxChange(asset) {\n\t\tthis.scene.setSkybox(asset.resources);\n\t}\n\n\t_skyboxLoad(asset) {\n\t\tif (this.scene.skyboxMip === 0) asset.loadFaces = true;\n\t\tthis.assets.load(asset);\n\n\t\tthis._onSkyboxChange(asset);\n\t}\n\n\t_skyboxRemove(asset) {\n\t\tif (!this._skyboxLast) return;\n\t\tthis.assets.off('add:' + asset.id, this.setSkybox, this);\n\t\tthis.assets.off('load:' + asset.id, this._onSkyboxChange, this);\n\t\tthis.assets.off('remove:' + asset.id, this._skyboxRemove, this);\n\t\tthis.scene.setSkybox(null);\n\t\tthis._skyboxLast = null;\n\t}\n\n\t_firstBake() {\n\t\tthis.lightmapper.bake(null, this.scene.lightmapMode);\n\t}\n\n\t_firstBatch() {\n\t\tif (this.scene._needsStaticPrepare) {\n\t\t\tthis.renderer.prepareStaticMeshes(this.graphicsDevice, this.scene);\n\t\t\tthis.scene._needsStaticPrepare = false;\n\t\t}\n\n\t\tthis.batcher.generate();\n\t}\n\n\t_processTimestamp(timestamp) {\n\t\treturn timestamp;\n\t}\n\n\t_preRenderImmediate() {\n\t\tthis._immediateData.finalize();\n\t}\n\n\t_postRenderImmediate() {\n\t\tthis._immediateData.clear();\n\t}\n\n\t_initImmediate() {\n\t\tif (!this._immediateData) {\n\t\t\tthis._immediateData = new ImmediateData(this.graphicsDevice);\n\t\t\tthis.on('prerender', this._preRenderImmediate, this);\n\t\t\tthis.on('postrender', this._postRenderImmediate, this);\n\t\t}\n\t}\n\n\t_addLines(position, color, options) {\n\t\tvar layer = options && options.layer ? options.layer : this.scene.layers.getLayerById(LAYERID_IMMEDIATE);\n\t\tvar depthTest = options && options.depthTest !== undefined ? options.depthTest : true;\n\t\tvar mask = options && options.mask ? options.mask : undefined;\n\n\t\tthis._initImmediate();\n\n\t\tconst lineBatch = this._immediateData.prepareLineBatch(layer, depthTest, mask, position.length / 2);\n\n\t\tlineBatch.addLines(position, color);\n\t}\n\n\trenderLine(start, end, color) {\n\t\tvar endColor = color;\n\t\tvar options;\n\t\tvar arg3 = arguments[3];\n\t\tvar arg4 = arguments[4];\n\n\t\tif (arg3 instanceof Color) {\n\t\t\tendColor = arg3;\n\n\t\t\tif (typeof arg4 === 'number') {\n\t\t\t\tif (!_deprecationWarning) {\n\t\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t\t_deprecationWarning = true;\n\t\t\t\t}\n\n\t\t\t\tif (arg4 === LINEBATCH_OVERLAY) {\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\t\tdepthTest: false\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\t\tdepthTest: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toptions = arg4;\n\t\t\t}\n\t\t} else if (typeof arg3 === 'number') {\n\t\t\tif (!_deprecationWarning) {\n\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t_deprecationWarning = true;\n\t\t\t}\n\n\t\t\tendColor = color;\n\n\t\t\tif (arg3 === LINEBATCH_OVERLAY) {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: false\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: true\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (arg3) {\n\t\t\toptions = arg3;\n\t\t}\n\n\t\tthis._addLines([start, end], [color, endColor], options);\n\t}\n\n\trenderLines(position, color, options) {\n\t\tif (!options) {\n\t\t\toptions = {\n\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\tdepthTest: true\n\t\t\t};\n\t\t} else if (typeof options === 'number') {\n\t\t\tif (!_deprecationWarning) {\n\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t_deprecationWarning = true;\n\t\t\t}\n\n\t\t\tif (options === LINEBATCH_OVERLAY) {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: false\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tvar multiColor = !!color.length;\n\n\t\tif (multiColor) {\n\t\t\tif (position.length !== color.length) {\n\t\t\t\tconsole.error(\"renderLines: position/color arrays have different lengths\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (position.length % 2 !== 0) {\n\t\t\tconsole.error(\"renderLines: array length is not divisible by 2\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._addLines(position, color, options);\n\t}\n\n\t_getDefaultImmediateOptions(depthTest = false) {\n\t\treturn {\n\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\tdepthTest: depthTest\n\t\t};\n\t}\n\n\trenderWireCube(matrix, color, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderWireCube(matrix, color, options);\n\t}\n\n\trenderWireSphere(center, radius, color, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderWireSphere(center, radius, color, options);\n\t}\n\n\trenderMeshInstance(meshInstance, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(null, null, null, meshInstance, options);\n\t}\n\n\trenderMesh(mesh, material, matrix, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(material, matrix, mesh, null, options);\n\t}\n\n\trenderQuad(matrix, material, options = this._getDefaultImmediateOptions()) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(material, matrix, this._immediateData.getQuadMesh(), null, options);\n\t}\n\n\trenderTexture(x, y, width, height, texture, material, options) {\n\t\tthis._initImmediate();\n\n\t\tconst matrix = new Mat4();\n\t\tmatrix.setTRS(new Vec3(x, y, 0.0), Quat.IDENTITY, new Vec3(width, height, 0.0));\n\n\t\tif (!material) {\n\t\t\tmaterial = new Material();\n\t\t\tmaterial.setParameter(\"colorMap\", texture);\n\t\t\tmaterial.shader = this._immediateData.getTextureShader();\n\t\t\tmaterial.update();\n\t\t}\n\n\t\tthis.renderQuad(matrix, material, options);\n\t}\n\n\trenderDepthTexture(x, y, width, height, options) {\n\t\tthis._initImmediate();\n\n\t\tconst material = new Material();\n\t\tmaterial.shader = this._immediateData.getDepthTextureShader();\n\t\tmaterial.update();\n\t\tthis.renderTexture(x, y, width, height, null, material, options);\n\t}\n\n\tdestroy() {\n\t\tif (this._inFrameUpdate) {\n\t\t\tthis._destroyRequested = true;\n\t\t\treturn;\n\t\t}\n\n\t\tvar i, l;\n\t\tvar canvasId = this.graphicsDevice.canvas.id;\n\t\tthis.off('librariesloaded');\n\t\tdocument.removeEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('mozvisibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('msvisibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('webkitvisibilitychange', this._visibilityChangeHandler, false);\n\t\tthis._visibilityChangeHandler = null;\n\t\tthis.onVisibilityChange = null;\n\t\tthis.root.destroy();\n\t\tthis.root = null;\n\n\t\tif (this.mouse) {\n\t\t\tthis.mouse.off();\n\t\t\tthis.mouse.detach();\n\t\t\tthis.mouse = null;\n\t\t}\n\n\t\tif (this.keyboard) {\n\t\t\tthis.keyboard.off();\n\t\t\tthis.keyboard.detach();\n\t\t\tthis.keyboard = null;\n\t\t}\n\n\t\tif (this.touch) {\n\t\t\tthis.touch.off();\n\t\t\tthis.touch.detach();\n\t\t\tthis.touch = null;\n\t\t}\n\n\t\tif (this.elementInput) {\n\t\t\tthis.elementInput.detach();\n\t\t\tthis.elementInput = null;\n\t\t}\n\n\t\tif (this.controller) {\n\t\t\tthis.controller = null;\n\t\t}\n\n\t\tvar systems = this.systems.list;\n\n\t\tfor (i = 0, l = systems.length; i < l; i++) {\n\t\t\tsystems[i].destroy();\n\t\t}\n\n\t\tComponentSystem.destroy();\n\n\t\tif (this.scene.layers) {\n\t\t\tthis.scene.layers.destroy();\n\t\t}\n\n\t\tvar assets = this.assets.list();\n\n\t\tfor (i = 0; i < assets.length; i++) {\n\t\t\tassets[i].unload();\n\t\t\tassets[i].off();\n\t\t}\n\n\t\tthis.assets.off();\n\t\tthis.bundles.destroy();\n\t\tthis.bundles = null;\n\t\tthis.i18n.destroy();\n\t\tthis.i18n = null;\n\n\t\tfor (var key in this.loader.getHandler('script')._cache) {\n\t\t\tvar element = this.loader.getHandler('script')._cache[key];\n\n\t\t\tvar parent = element.parentNode;\n\t\t\tif (parent) parent.removeChild(element);\n\t\t}\n\n\t\tthis.loader.getHandler('script')._cache = {};\n\t\tthis.loader.destroy();\n\t\tthis.loader = null;\n\t\tthis.scene.destroy();\n\t\tthis.scene = null;\n\t\tthis.systems = [];\n\t\tthis.context = null;\n\t\tthis.scripts.destroy();\n\t\tthis.scripts = null;\n\t\tthis.scenes.destroy();\n\t\tthis.scenes = null;\n\t\tthis.lightmapper.destroy();\n\t\tthis.lightmapper = null;\n\t\tthis.batcher.destroy();\n\t\tthis.batcher = null;\n\t\tthis._entityIndex = {};\n\t\tthis.defaultLayerDepth.onPreRenderOpaque = null;\n\t\tthis.defaultLayerDepth.onPostRenderOpaque = null;\n\t\tthis.defaultLayerDepth.onDisable = null;\n\t\tthis.defaultLayerDepth.onEnable = null;\n\t\tthis.defaultLayerDepth = null;\n\t\tthis.defaultLayerWorld = null;\n\t\tdestroyPostEffectQuad();\n\n\t\tif (this.vr) {\n\t\t\tthis.vr.destroy();\n\t\t\tthis.vr = null;\n\t\t}\n\n\t\tthis.xr.end();\n\t\tthis.graphicsDevice.destroy();\n\t\tthis.graphicsDevice = null;\n\t\tthis.renderer.destroy();\n\t\tthis.renderer = null;\n\t\tthis.tick = null;\n\t\tthis.off();\n\n\t\tif (this._soundManager) {\n\t\t\tthis._soundManager.destroy();\n\n\t\t\tthis._soundManager = null;\n\t\t}\n\n\t\tscript.app = null;\n\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE = null;\n\t\tApplication._applications[canvasId] = null;\n\n\t\tif (getApplication() === this) {\n\t\t\tsetApplication(null);\n\t\t}\n\t}\n\n\tgetEntityFromIndex(guid) {\n\t\treturn this._entityIndex[guid];\n\t}\n\n}\n\nApplication._applications = {};\nvar _frameEndData = {};\n\nvar makeTick = function makeTick(_app) {\n\tvar application = _app;\n\tvar frameRequest;\n\treturn function (timestamp, frame) {\n\t\tif (!application.graphicsDevice) return;\n\t\tsetApplication(application);\n\n\t\tif (frameRequest) {\n\t\t\twindow.cancelAnimationFrame(frameRequest);\n\t\t\tframeRequest = null;\n\t\t}\n\n\t\tapp = application;\n\t\tvar currentTime = application._processTimestamp(timestamp) || now();\n\t\tvar ms = currentTime - (application._time || currentTime);\n\t\tvar dt = ms / 1000.0;\n\t\tdt = math.clamp(dt, 0, application.maxDeltaTime);\n\t\tdt *= application.timeScale;\n\t\tapplication._time = currentTime;\n\n\t\tif (application.vr && application.vr.display) {\n\t\t\tframeRequest = application.vr.display.requestAnimationFrame(application.tick);\n\t\t} else if (application.xr.session) {\n\t\t\tframeRequest = application.xr.session.requestAnimationFrame(application.tick);\n\t\t} else {\n\t\t\tframeRequest = window.requestAnimationFrame(application.tick);\n\t\t}\n\n\t\tif (application.graphicsDevice.contextLost) return;\n\n\t\tapplication._fillFrameStatsBasic(currentTime, dt, ms);\n\n\t\tapplication._inFrameUpdate = true;\n\t\tapplication.fire(\"frameupdate\", ms);\n\n\t\tif (frame) {\n\t\t\tapplication.xr.update(frame);\n\t\t\tapplication.graphicsDevice.defaultFramebuffer = frame.session.renderState.baseLayer.framebuffer;\n\t\t} else {\n\t\t\tapplication.graphicsDevice.defaultFramebuffer = null;\n\t\t}\n\n\t\tapplication.update(dt);\n\t\tapplication.fire(\"framerender\");\n\n\t\tif (application.autoRender || application.renderNextFrame) {\n\t\t\tapplication.updateCanvasSize();\n\t\t\tapplication.render();\n\t\t\tapplication.renderNextFrame = false;\n\t\t}\n\n\t\t_frameEndData.timestamp = now();\n\t\t_frameEndData.target = application;\n\t\tapplication.fire(\"frameend\", _frameEndData);\n\t\tapplication.fire(\"frameEnd\", _frameEndData);\n\n\t\tif (application.vr && application.vr.display && application.vr.display.presenting) {\n\t\t\tapplication.vr.display.submitFrame();\n\t\t}\n\n\t\tapplication._inFrameUpdate = false;\n\n\t\tif (application._destroyRequested) {\n\t\t\tapplication.destroy();\n\t\t}\n\t};\n};\n\nclass Entity extends GraphNode {\n\tconstructor(name, app) {\n\t\tsuper(name);\n\t\tif (name instanceof Application) app = name;\n\t\tthis._batchHandle = null;\n\t\tthis.c = {};\n\t\tthis._app = app;\n\n\t\tif (!app) {\n\t\t\tthis._app = Application.getApplication();\n\n\t\t\tif (!this._app) {\n\t\t\t\tthrow new Error(\"Couldn't find current application\");\n\t\t\t}\n\t\t}\n\n\t\tthis._guid = null;\n\t\tthis._destroying = false;\n\t\tthis._template = false;\n\t}\n\n\taddComponent(type, data) {\n\t\tvar system = this._app.systems[type];\n\n\t\tif (!system) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.c[type]) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn system.addComponent(this, data);\n\t}\n\n\tremoveComponent(type) {\n\t\tvar system = this._app.systems[type];\n\n\t\tif (!system) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.c[type]) {\n\t\t\treturn;\n\t\t}\n\n\t\tsystem.removeComponent(this);\n\t}\n\n\tfindComponent(type) {\n\t\tvar entity = this.findOne(function (node) {\n\t\t\treturn node.c && node.c[type];\n\t\t});\n\t\treturn entity && entity.c[type];\n\t}\n\n\tfindComponents(type) {\n\t\tvar entities = this.find(function (node) {\n\t\t\treturn node.c && node.c[type];\n\t\t});\n\t\treturn entities.map(function (entity) {\n\t\t\treturn entity.c[type];\n\t\t});\n\t}\n\n\tgetGuid() {\n\t\tif (!this._guid) {\n\t\t\tthis.setGuid(guid.create());\n\t\t}\n\n\t\treturn this._guid;\n\t}\n\n\tsetGuid(guid) {\n\t\tvar index = this._app._entityIndex;\n\n\t\tif (this._guid) {\n\t\t\tdelete index[this._guid];\n\t\t}\n\n\t\tthis._guid = guid;\n\t\tindex[this._guid] = this;\n\t}\n\n\t_notifyHierarchyStateChanged(node, enabled) {\n\t\tvar enableFirst = false;\n\t\tif (node === this && this._app._enableList.length === 0) enableFirst = true;\n\t\tnode._beingEnabled = true;\n\n\t\tnode._onHierarchyStateChanged(enabled);\n\n\t\tif (node._onHierarchyStatePostChanged) this._app._enableList.push(node);\n\t\tvar i, len;\n\t\tvar c = node._children;\n\n\t\tfor (i = 0, len = c.length; i < len; i++) {\n\t\t\tif (c[i]._enabled) this._notifyHierarchyStateChanged(c[i], enabled);\n\t\t}\n\n\t\tnode._beingEnabled = false;\n\n\t\tif (enableFirst) {\n\t\t\tfor (i = 0; i < this._app._enableList.length; i++) {\n\t\t\t\tthis._app._enableList[i]._onHierarchyStatePostChanged();\n\t\t\t}\n\n\t\t\tthis._app._enableList.length = 0;\n\t\t}\n\t}\n\n\t_onHierarchyStateChanged(enabled) {\n\t\tsuper._onHierarchyStateChanged(enabled);\n\n\t\tvar component;\n\t\tvar components = this.c;\n\n\t\tfor (var type in components) {\n\t\t\tif (components.hasOwnProperty(type)) {\n\t\t\t\tcomponent = components[type];\n\n\t\t\t\tif (component.enabled) {\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tcomponent.onEnable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcomponent.onDisable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onHierarchyStatePostChanged() {\n\t\tvar components = this.c;\n\n\t\tfor (var type in components) {\n\t\t\tif (components.hasOwnProperty(type)) components[type].onPostStateChange();\n\t\t}\n\t}\n\n\tfindByGuid(guid) {\n\t\tif (this._guid === guid) return this;\n\t\tvar e = this._app._entityIndex[guid];\n\n\t\tif (e && (e === this || e.isDescendantOf(this))) {\n\t\t\treturn e;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy() {\n\t\tvar name;\n\t\tthis._destroying = true;\n\n\t\tfor (name in this.c) {\n\t\t\tthis.c[name].enabled = false;\n\t\t}\n\n\t\tfor (name in this.c) {\n\t\t\tthis.c[name].system.removeComponent(this);\n\t\t}\n\n\t\tif (this._parent) this._parent.removeChild(this);\n\t\tvar children = this._children;\n\t\tvar child = children.shift();\n\n\t\twhile (child) {\n\t\t\tif (child instanceof Entity) {\n\t\t\t\tchild.destroy();\n\t\t\t}\n\n\t\t\tchild._parent = null;\n\t\t\tchild = children.shift();\n\t\t}\n\n\t\tthis.fire('destroy', this);\n\t\tthis.off();\n\n\t\tif (this._guid) {\n\t\t\tdelete this._app._entityIndex[this._guid];\n\t\t}\n\n\t\tthis._destroying = false;\n\t}\n\n\tclone() {\n\t\tvar duplicatedIdsMap = {};\n\n\t\tvar clone = this._cloneRecursively(duplicatedIdsMap);\n\n\t\tduplicatedIdsMap[this.getGuid()] = clone;\n\t\tresolveDuplicatedEntityReferenceProperties(this, this, clone, duplicatedIdsMap);\n\t\treturn clone;\n\t}\n\n\t_cloneRecursively(duplicatedIdsMap) {\n\t\tvar clone = new Entity(this._app);\n\n\t\tsuper._cloneInternal(clone);\n\n\t\tfor (var type in this.c) {\n\t\t\tvar component = this.c[type];\n\t\t\tcomponent.system.cloneComponent(this, clone);\n\t\t}\n\n\t\tvar i;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tvar oldChild = this._children[i];\n\n\t\t\tif (oldChild instanceof Entity) {\n\t\t\t\tvar newChild = oldChild._cloneRecursively(duplicatedIdsMap);\n\n\t\t\t\tclone.addChild(newChild);\n\t\t\t\tduplicatedIdsMap[oldChild.getGuid()] = newChild;\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n}\n\nfunction resolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, oldEntity, newEntity, duplicatedIdsMap) {\n\tvar i, len;\n\n\tif (oldEntity instanceof Entity) {\n\t\tvar components = oldEntity.c;\n\n\t\tfor (var componentName in components) {\n\t\t\tvar component = components[componentName];\n\t\t\tvar entityProperties = component.system.getPropertiesOfType('entity');\n\n\t\t\tfor (i = 0, len = entityProperties.length; i < len; i++) {\n\t\t\t\tvar propertyDescriptor = entityProperties[i];\n\t\t\t\tvar propertyName = propertyDescriptor.name;\n\t\t\t\tvar oldEntityReferenceId = component[propertyName];\n\t\t\t\tvar entityIsWithinOldSubtree = !!oldSubtreeRoot.findByGuid(oldEntityReferenceId);\n\n\t\t\t\tif (entityIsWithinOldSubtree) {\n\t\t\t\t\tvar newEntityReferenceId = duplicatedIdsMap[oldEntityReferenceId].getGuid();\n\n\t\t\t\t\tif (newEntityReferenceId) {\n\t\t\t\t\t\tnewEntity.c[componentName][propertyName] = newEntityReferenceId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('Could not find corresponding entity id when resolving duplicated entity references');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (components.script && !newEntity._app.useLegacyScriptAttributeCloning) {\n\t\t\tnewEntity.script.resolveDuplicatedEntityReferenceProperties(components.script, duplicatedIdsMap);\n\t\t}\n\n\t\tvar _old = oldEntity.children.filter(function (e) {\n\t\t\treturn e instanceof Entity;\n\t\t});\n\n\t\tvar _new = newEntity.children.filter(function (e) {\n\t\t\treturn e instanceof Entity;\n\t\t});\n\n\t\tfor (i = 0, len = _old.length; i < len; i++) {\n\t\t\tresolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, _old[i], _new[i], duplicatedIdsMap);\n\t\t}\n\t}\n}\n\nconst tempSet = new Set();\nconst clearDepthOptions = {\n\tdepth: 1.0,\n\tflags: CLEARFLAG_DEPTH\n};\n\nclass Picker {\n\tconstructor(app, width, height) {\n\t\tif (app instanceof GraphicsDevice) {\n\t\t\tapp = getApplication();\n\t\t}\n\n\t\tthis.app = app;\n\t\tthis.device = app.graphicsDevice;\n\t\tthis.pickColor = new Float32Array(4);\n\t\tthis.pickColor[3] = 1;\n\t\tthis.mapping = [];\n\t\tthis.cameraEntity = null;\n\t\tthis.layer = null;\n\t\tthis.layerComp = null;\n\t\tthis.initLayerComposition();\n\t\tthis._renderTarget = null;\n\t\tconst device = this.device;\n\t\tthis.clearDepthCommand = new Command(0, 0, function () {\n\t\t\tdevice.clear(clearDepthOptions);\n\t\t});\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.resize(width, height);\n\t}\n\n\tgetSelection(x, y, width, height) {\n\t\tconst device = this.device;\n\n\t\tif (typeof x === 'object') {\n\t\t\tconst rect = x;\n\t\t\tx = rect.x;\n\t\t\ty = rect.y;\n\t\t\twidth = rect.width;\n\t\t\theight = rect.height;\n\t\t} else {\n\t\t\ty = this.renderTarget.height - (y + (height || 1));\n\t\t}\n\n\t\tx = Math.floor(x);\n\t\ty = Math.floor(y);\n\t\twidth = Math.floor(Math.max(width || 1, 1));\n\t\theight = Math.floor(Math.max(height || 1, 1));\n\t\tconst origRenderTarget = device.renderTarget;\n\t\tdevice.setRenderTarget(this.renderTarget);\n\t\tdevice.updateBegin();\n\t\tconst pixels = new Uint8Array(4 * width * height);\n\t\tdevice.readPixels(x, y, width, height, pixels);\n\t\tdevice.updateEnd();\n\t\tdevice.setRenderTarget(origRenderTarget);\n\t\tconst mapping = this.mapping;\n\n\t\tfor (let i = 0; i < width * height; i++) {\n\t\t\tconst r = pixels[4 * i + 0];\n\t\t\tconst g = pixels[4 * i + 1];\n\t\t\tconst b = pixels[4 * i + 2];\n\t\t\tconst index = r << 16 | g << 8 | b;\n\n\t\t\tif (index !== 0xffffff) {\n\t\t\t\ttempSet.add(mapping[index]);\n\t\t\t}\n\t\t}\n\n\t\tconst selection = [];\n\t\ttempSet.forEach(meshInstance => selection.push(meshInstance));\n\t\ttempSet.clear();\n\t\treturn selection;\n\t}\n\n\tallocateRenderTarget() {\n\t\tconst colorBuffer = new Texture(this.device, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcolorBuffer.name = 'pick';\n\t\tthis.renderTarget = new RenderTarget({\n\t\t\tcolorBuffer: colorBuffer,\n\t\t\tdepth: true\n\t\t});\n\t}\n\n\treleaseRenderTarget() {\n\t\tthis.cameraEntity.camera.renderTarget = null;\n\n\t\tif (this._renderTarget) {\n\t\t\tthis._renderTarget._colorBuffer.destroy();\n\n\t\t\tthis._renderTarget.destroy();\n\n\t\t\tthis._renderTarget = null;\n\t\t}\n\t}\n\n\tinitLayerComposition() {\n\t\tconst device = this.device;\n\t\tconst self = this;\n\t\tconst pickColorId = device.scope.resolve('uColor');\n\t\tthis.cameraEntity = new Entity();\n\t\tthis.cameraEntity.addComponent(\"camera\");\n\t\tthis.layer = new Layer({\n\t\t\tname: \"Picker\",\n\t\t\tshaderPass: SHADER_PICK,\n\t\t\topaqueSortMode: SORTMODE_NONE,\n\t\t\tonDrawCall: function (meshInstance, index) {\n\t\t\t\tself.pickColor[0] = (index >> 16 & 0xff) / 255;\n\t\t\t\tself.pickColor[1] = (index >> 8 & 0xff) / 255;\n\t\t\t\tself.pickColor[2] = (index & 0xff) / 255;\n\t\t\t\tpickColorId.setValue(self.pickColor);\n\t\t\t\tdevice.setBlending(false);\n\t\t\t\tself.mapping[index] = meshInstance;\n\t\t\t}\n\t\t});\n\t\tthis.layer.addCamera(this.cameraEntity.camera);\n\t\tthis.layerComp = new LayerComposition(\"picker\");\n\t\tthis.layerComp.pushOpaque(this.layer);\n\t}\n\n\tprepare(camera, scene, layers) {\n\t\tif (camera instanceof Camera) {\n\t\t\tcamera = camera.node.camera;\n\t\t}\n\n\t\tif (layers instanceof Layer) {\n\t\t\tlayers = [layers];\n\t\t}\n\n\t\tthis.layer.clearMeshInstances();\n\t\tconst destMeshInstances = this.layer.opaqueMeshInstances;\n\t\tconst srcLayers = scene.layers.layerList;\n\t\tconst subLayerEnabled = scene.layers.subLayerEnabled;\n\t\tconst isTransparent = scene.layers.subLayerList;\n\n\t\tfor (let i = 0; i < srcLayers.length; i++) {\n\t\t\tconst srcLayer = srcLayers[i];\n\n\t\t\tif (layers && layers.indexOf(srcLayer) < 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (srcLayer.enabled && subLayerEnabled[i]) {\n\t\t\t\tconst layerCamId = srcLayer.cameras.indexOf(camera);\n\n\t\t\t\tif (layerCamId >= 0) {\n\t\t\t\t\tif (srcLayer._clearDepthBuffer) {\n\t\t\t\t\t\tdestMeshInstances.push(this.clearDepthCommand);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst meshInstances = isTransparent[i] ? srcLayer.instances.transparentMeshInstances : srcLayer.instances.opaqueMeshInstances;\n\n\t\t\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\t\t\tconst meshInstance = meshInstances[j];\n\n\t\t\t\t\t\tif (meshInstance.pick) {\n\t\t\t\t\t\t\tdestMeshInstances.push(meshInstance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.renderTarget || this.width !== this.renderTarget.width || this.height !== this.renderTarget.height) {\n\t\t\tthis.releaseRenderTarget();\n\t\t\tthis.allocateRenderTarget();\n\t\t}\n\n\t\tthis.updateCamera(camera);\n\t\tthis.mapping.length = 0;\n\t\tthis.app.renderer.renderComposition(this.layerComp);\n\t}\n\n\tupdateCamera(srcCamera) {\n\t\tthis.cameraEntity.copy(srcCamera.entity);\n\t\tthis.cameraEntity.name = \"PickerCamera\";\n\t\tconst destCamera = this.cameraEntity.camera;\n\t\tdestCamera.copy(srcCamera);\n\t\tdestCamera.clearColorBuffer = true;\n\t\tdestCamera.clearDepthBuffer = true;\n\t\tdestCamera.clearStencilBuffer = true;\n\t\tdestCamera.clearColor = Color.WHITE;\n\t\tdestCamera.renderTarget = this.renderTarget;\n\t\tthis.layer.clearCameras();\n\t\tthis.layer.addCamera(destCamera);\n\t\tdestCamera.layers = [this.layer.id];\n\t}\n\n\tresize(width, height) {\n\t\tthis.width = Math.floor(width);\n\t\tthis.height = Math.floor(height);\n\t}\n\n}\n\nconst MAX_TEXTURE_SIZE = 4096;\nconst DEFAULT_TEXTURE_SIZE = 512;\n\nclass CanvasFont extends EventHandler {\n\tconstructor(app, options = {}) {\n\t\tsuper();\n\t\tthis.type = \"bitmap\";\n\t\tthis.app = app;\n\t\tthis.intensity = 0;\n\t\tthis.fontWeight = options.fontWeight || 'normal';\n\t\tthis.fontSize = parseInt(options.fontSize, 10);\n\t\tthis.glyphSize = this.fontSize;\n\t\tthis.fontName = options.fontName || 'Arial';\n\t\tthis.color = options.color || new Color(1, 1, 1);\n\t\tthis.padding = options.padding || 0;\n\t\tvar w = options.width > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.width || DEFAULT_TEXTURE_SIZE;\n\t\tvar h = options.height > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.height || DEFAULT_TEXTURE_SIZE;\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.height = h;\n\t\tcanvas.width = w;\n\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tmipmaps: true\n\t\t});\n\t\ttexture.name = 'font';\n\t\ttexture.setSource(canvas);\n\t\ttexture.minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\ttexture.magFilter = FILTER_LINEAR;\n\t\ttexture.addressU = ADDRESS_CLAMP_TO_EDGE;\n\t\ttexture.addressV = ADDRESS_CLAMP_TO_EDGE;\n\t\tthis.textures = [texture];\n\t\tthis.chars = \"\";\n\t\tthis.data = {};\n\t}\n\n\tcreateTextures(text) {\n\t\tvar _chars = this._normalizeCharsSet(text);\n\n\t\tif (_chars.length !== this.chars.length) {\n\t\t\tthis._renderAtlas(_chars);\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < _chars.length; i++) {\n\t\t\tif (_chars[i] !== this.chars[i]) {\n\t\t\t\tthis._renderAtlas(_chars);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTextures(text) {\n\t\tvar _chars = this._normalizeCharsSet(text);\n\n\t\tvar newCharsSet = [];\n\n\t\tfor (var i = 0; i < _chars.length; i++) {\n\t\t\tvar char = _chars[i];\n\n\t\t\tif (!this.data.chars[char]) {\n\t\t\t\tnewCharsSet.push(char);\n\t\t\t}\n\t\t}\n\n\t\tif (newCharsSet.length > 0) {\n\t\t\tthis._renderAtlas(this.chars.concat(newCharsSet));\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tfor (var i = 0; i < this.textures.length; i++) {\n\t\t\tthis.textures[i].destroy();\n\t\t}\n\n\t\tthis.chars = null;\n\t\tthis.color = null;\n\t\tthis.data = null;\n\t\tthis.fontName = null;\n\t\tthis.fontSize = null;\n\t\tthis.glyphSize = null;\n\t\tthis.intensity = null;\n\t\tthis.textures = null;\n\t\tthis.type = null;\n\t\tthis.fontWeight = null;\n\t}\n\n\t_getAndClearContext(canvas, clearColor) {\n\t\tvar w = canvas.width;\n\t\tvar h = canvas.height;\n\t\tvar ctx = canvas.getContext('2d', {\n\t\t\talpha: true\n\t\t});\n\t\tctx.clearRect(0, 0, w, h);\n\t\tctx.fillStyle = clearColor;\n\t\tctx.fillRect(0, 0, w, h);\n\t\treturn ctx;\n\t}\n\n\t_colorToRgbString(color, alpha) {\n\t\tvar str;\n\t\tvar r = Math.round(255 * color.r);\n\t\tvar g = Math.round(255 * color.g);\n\t\tvar b = Math.round(255 * color.b);\n\n\t\tif (alpha) {\n\t\t\tstr = \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + color.a + \")\";\n\t\t} else {\n\t\t\tstr = \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n\t\t}\n\n\t\treturn str;\n\t}\n\n\trenderCharacter(context, char, x, y, color) {\n\t\tcontext.fillStyle = color;\n\t\tcontext.fillText(char, x, y);\n\t}\n\n\t_renderAtlas(charsArray) {\n\t\tthis.chars = charsArray;\n\t\tvar numTextures = 1;\n\t\tvar canvas = this.textures[numTextures - 1].getSource();\n\t\tvar w = canvas.width;\n\t\tvar h = canvas.height;\n\n\t\tvar color = this._colorToRgbString(this.color, false);\n\n\t\tvar a = this.color.a;\n\t\tthis.color.a = 1 / 255;\n\n\t\tvar transparent = this._colorToRgbString(this.color, true);\n\n\t\tthis.color.a = a;\n\t\tvar TEXT_ALIGN = 'center';\n\t\tvar TEXT_BASELINE = 'alphabetic';\n\n\t\tvar ctx = this._getAndClearContext(canvas, transparent);\n\n\t\tctx.font = this.fontWeight + ' ' + this.fontSize.toString() + 'px ' + this.fontName;\n\t\tctx.textAlign = TEXT_ALIGN;\n\t\tctx.textBaseline = TEXT_BASELINE;\n\t\tthis.data = this._createJson(this.chars, this.fontName, w, h);\n\t\tvar symbols = string.getSymbols(this.chars.join(''));\n\t\tvar prevNumTextures = this.textures.length;\n\t\tvar maxHeight = 0;\n\t\tvar maxDescent = 0;\n\t\tvar metrics = {};\n\t\tvar i, ch;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tch = symbols[i];\n\t\t\tmetrics[ch] = this._getTextMetrics(ch);\n\t\t\tmaxHeight = Math.max(maxHeight, metrics[ch].height);\n\t\t\tmaxDescent = Math.max(maxDescent, metrics[ch].descent);\n\t\t}\n\n\t\tthis.glyphSize = Math.max(this.glyphSize, maxHeight);\n\t\tvar sx = this.glyphSize + this.padding * 2;\n\t\tvar sy = this.glyphSize + this.padding * 2;\n\n\t\tvar _xOffset = this.glyphSize / 2 + this.padding;\n\n\t\tvar _yOffset = sy - maxDescent - this.padding;\n\n\t\tvar _x = 0;\n\t\tvar _y = 0;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tch = symbols[i];\n\t\t\tvar code = string.getCodePoint(symbols[i]);\n\t\t\tvar fs = this.fontSize;\n\t\t\tctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;\n\t\t\tctx.textAlign = TEXT_ALIGN;\n\t\t\tctx.textBaseline = TEXT_BASELINE;\n\t\t\tvar width = ctx.measureText(ch).width;\n\n\t\t\tif (width > fs) {\n\t\t\t\tfs = this.fontSize * this.fontSize / width;\n\t\t\t\tctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;\n\t\t\t\twidth = this.fontSize;\n\t\t\t}\n\n\t\t\tthis.renderCharacter(ctx, ch, _x + _xOffset, _y + _yOffset, color);\n\t\t\tvar xoffset = this.padding + (this.glyphSize - width) / 2;\n\t\t\tvar yoffset = -this.padding + metrics[ch].descent - maxDescent;\n\t\t\tvar xadvance = width;\n\n\t\t\tthis._addChar(this.data, ch, code, _x, _y, sx, sy, xoffset, yoffset, xadvance, numTextures - 1, w, h);\n\n\t\t\t_x += sx;\n\n\t\t\tif (_x + sx > w) {\n\t\t\t\t_x = 0;\n\t\t\t\t_y += sy;\n\n\t\t\t\tif (_y + sy > h) {\n\t\t\t\t\tthis.textures[numTextures - 1].upload();\n\t\t\t\t\tnumTextures++;\n\t\t\t\t\t_y = 0;\n\n\t\t\t\t\tif (numTextures > prevNumTextures) {\n\t\t\t\t\t\tcanvas = document.createElement('canvas');\n\t\t\t\t\t\tcanvas.height = h;\n\t\t\t\t\t\tcanvas.width = w;\n\t\t\t\t\t\tctx = this._getAndClearContext(canvas, transparent);\n\t\t\t\t\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\t\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\t\t\t\tmipmaps: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttexture.name = 'font-atlas';\n\t\t\t\t\t\ttexture.setSource(canvas);\n\t\t\t\t\t\ttexture.minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\t\t\t\t\ttexture.magFilter = FILTER_LINEAR;\n\t\t\t\t\t\ttexture.addressU = ADDRESS_CLAMP_TO_EDGE;\n\t\t\t\t\t\ttexture.addressV = ADDRESS_CLAMP_TO_EDGE;\n\t\t\t\t\t\tthis.textures.push(texture);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanvas = this.textures[numTextures - 1].getSource();\n\t\t\t\t\t\tctx = this._getAndClearContext(canvas, transparent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.textures[numTextures - 1].upload();\n\n\t\tif (numTextures < prevNumTextures) {\n\t\t\tfor (i = numTextures; i < prevNumTextures; i++) {\n\t\t\t\tthis.textures[i].destroy();\n\t\t\t}\n\n\t\t\tthis.textures.splice(numTextures);\n\t\t}\n\n\t\tthis.fire(\"render\");\n\t}\n\n\t_createJson(chars, fontName, width, height) {\n\t\tvar base = {\n\t\t\t\"version\": 3,\n\t\t\t\"intensity\": this.intensity,\n\t\t\t\"info\": {\n\t\t\t\t\"face\": fontName,\n\t\t\t\t\"width\": width,\n\t\t\t\t\"height\": height,\n\t\t\t\t\"maps\": [{\n\t\t\t\t\t\"width\": width,\n\t\t\t\t\t\"height\": height\n\t\t\t\t}]\n\t\t\t},\n\t\t\t\"chars\": {}\n\t\t};\n\t\treturn base;\n\t}\n\n\t_addChar(json, char, charCode, x, y, w, h, xoffset, yoffset, xadvance, mapNum, mapW, mapH) {\n\t\tif (json.info.maps.length < mapNum + 1) {\n\t\t\tjson.info.maps.push({\n\t\t\t\t\"width\": mapW,\n\t\t\t\t\"height\": mapH\n\t\t\t});\n\t\t}\n\n\t\tvar scale = this.fontSize / 32;\n\t\tjson.chars[char] = {\n\t\t\t\"id\": charCode,\n\t\t\t\"letter\": char,\n\t\t\t\"x\": x,\n\t\t\t\"y\": y,\n\t\t\t\"width\": w,\n\t\t\t\"height\": h,\n\t\t\t\"xadvance\": xadvance / scale,\n\t\t\t\"xoffset\": xoffset / scale,\n\t\t\t\"yoffset\": (yoffset + this.padding) / scale,\n\t\t\t\"scale\": scale,\n\t\t\t\"range\": 1,\n\t\t\t\"map\": mapNum,\n\t\t\t\"bounds\": [0, 0, w / scale, h / scale]\n\t\t};\n\t}\n\n\t_normalizeCharsSet(text) {\n\t\tvar unicodeConverterFunc = this.app.systems.element.getUnicodeConverter();\n\n\t\tif (unicodeConverterFunc) {\n\t\t\ttext = unicodeConverterFunc(text);\n\t\t}\n\n\t\tvar set = {};\n\t\tvar symbols = string.getSymbols(text);\n\t\tvar i;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tvar ch = symbols[i];\n\t\t\tif (set[ch]) continue;\n\t\t\tset[ch] = ch;\n\t\t}\n\n\t\tvar chars = Object.keys(set);\n\t\treturn chars.sort();\n\t}\n\n\t_getTextMetrics(text) {\n\t\tvar textSpan = document.createElement('span');\n\t\ttextSpan.id = 'content-span';\n\t\ttextSpan.innerHTML = text;\n\t\tvar block = document.createElement(\"div\");\n\t\tblock.id = 'content-block';\n\t\tblock.style.display = 'inline-block';\n\t\tblock.style.width = '1px';\n\t\tblock.style.height = '0px';\n\t\tvar div = document.createElement('div');\n\t\tdiv.appendChild(textSpan);\n\t\tdiv.appendChild(block);\n\t\tdiv.style.font = this.fontSize + 'px ' + this.fontName;\n\t\tvar body = document.body;\n\t\tbody.appendChild(div);\n\t\tvar ascent = -1;\n\t\tvar descent = -1;\n\t\tvar height = -1;\n\n\t\ttry {\n\t\t\tblock.style['vertical-align'] = 'baseline';\n\t\t\tascent = block.offsetTop - textSpan.offsetTop;\n\t\t\tblock.style['vertical-align'] = 'bottom';\n\t\t\theight = block.offsetTop - textSpan.offsetTop;\n\t\t\tdescent = height - ascent;\n\t\t} finally {\n\t\t\tdocument.body.removeChild(div);\n\t\t}\n\n\t\treturn {\n\t\t\tascent: ascent,\n\t\t\tdescent: descent,\n\t\t\theight: height\n\t\t};\n\t}\n\n}\n\nclass ResourceHandler {\n\tload(url, callback, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\topen(url, data, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass SceneSettingsHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\treturn data.settings;\n\t}\n\n}\n\nclass AssetListLoader extends EventHandler {\n\tconstructor(assetList, assetRegistry) {\n\t\tsuper();\n\t\tthis._assets = [];\n\t\tthis._registry = assetRegistry;\n\t\tthis._loaded = false;\n\t\tthis._count = 0;\n\t\tthis._total = 0;\n\t\tthis._failed = [];\n\t\tthis._waitingAssets = [];\n\n\t\tif (assetList.length && assetList[0] instanceof Asset) {\n\t\t\tthis._assets = assetList;\n\t\t} else {\n\t\t\tfor (var i = 0; i < assetList.length; i++) {\n\t\t\t\tvar asset = assetRegistry.get(assetList[i]);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis._assets.push(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._waitForAsset(assetList[i]);\n\n\t\t\t\t\tthis._total++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar self = this;\n\n\t\tthis._registry.off(\"load\", this._onLoad);\n\n\t\tthis._registry.off(\"error\", this._onError);\n\n\t\tthis._waitingAssets.forEach(function (id) {\n\t\t\tself._registry.off(\"add:\" + id, this._onAddAsset);\n\t\t});\n\n\t\tthis.off(\"progress\");\n\t\tthis.off(\"load\");\n\t}\n\n\tload(done, scope) {\n\t\tvar i = 0;\n\t\tvar l = this._assets.length;\n\t\tvar asset;\n\t\tthis._count = 0;\n\t\tthis._failed = [];\n\t\tthis._callback = done;\n\t\tthis._scope = scope;\n\n\t\tthis._registry.on(\"load\", this._onLoad, this);\n\n\t\tthis._registry.on(\"error\", this._onError, this);\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tasset = this._assets[i];\n\n\t\t\tif (!asset.loading && !asset.loaded) {\n\t\t\t\tthis._registry.load(asset);\n\n\t\t\t\tthis._total++;\n\t\t\t}\n\t\t}\n\t}\n\n\tready(done, scope) {\n\t\tscope = scope || this;\n\n\t\tif (this._loaded) {\n\t\t\tdone.call(scope, this._assets);\n\t\t} else {\n\t\t\tthis.once(\"load\", function (assets) {\n\t\t\t\tdone.call(scope, assets);\n\t\t\t});\n\t\t}\n\t}\n\n\t_loadingComplete() {\n\t\tthis._loaded = true;\n\n\t\tthis._registry.off(\"load\", this._onLoad, this);\n\n\t\tthis._registry.off(\"error\", this._onError, this);\n\n\t\tif (this._failed && this._failed.length) {\n\t\t\tif (this._callback) {\n\t\t\t\tthis._callback.call(this._scope, \"Failed to load some assets\", this._failed);\n\t\t\t}\n\n\t\t\tthis.fire(\"error\", this._failed);\n\t\t} else {\n\t\t\tif (this._callback) {\n\t\t\t\tthis._callback.call(this._scope);\n\t\t\t}\n\n\t\t\tthis.fire(\"load\", this._assets);\n\t\t}\n\t}\n\n\t_onLoad(asset) {\n\t\tvar self = this;\n\n\t\tif (this._assets.indexOf(asset) >= 0) {\n\t\t\tthis._count++;\n\t\t\tthis.fire(\"progress\", asset);\n\t\t}\n\n\t\tif (this._count === this._total) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tself._loadingComplete(self._failed);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onError(err, asset) {\n\t\tvar self = this;\n\n\t\tif (this._assets.indexOf(asset) >= 0) {\n\t\t\tthis._count++;\n\n\t\t\tthis._failed.push(asset);\n\t\t}\n\n\t\tif (this._count === this._total) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tself._loadingComplete(self._failed);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onAddAsset(asset) {\n\t\tvar index = this._waitingAssets.indexOf(asset);\n\n\t\tif (index >= 0) {\n\t\t\tthis._waitingAssets.splice(index, 1);\n\t\t}\n\n\t\tthis._assets.push(asset);\n\n\t\tvar i;\n\t\tvar l = this._assets.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tasset = this._assets[i];\n\n\t\t\tif (!asset.loading && !asset.loaded) {\n\t\t\t\tthis._registry.load(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_waitForAsset(assetId) {\n\t\tthis._waitingAssets.push(assetId);\n\n\t\tthis._registry.once('add:' + assetId, this._onAddAsset, this);\n\t}\n\n}\n\nvar funcNameRegex = new RegExp('^\\\\s*function(?:\\\\s|\\\\s*\\\\/\\\\*.*\\\\*\\\\/\\\\s*)+([^\\\\(\\\\s\\\\/]*)\\\\s*');\n\nclass ScriptType extends EventHandler {\n\tconstructor(args) {\n\t\tsuper();\n\t\tthis.initScriptType(args);\n\t}\n\n\tinitScriptType(args) {\n\t\tvar script = this.constructor;\n\t\tthis.app = args.app;\n\t\tthis.entity = args.entity;\n\t\tthis._enabled = typeof args.enabled === 'boolean' ? args.enabled : true;\n\t\tthis._enabledOld = this.enabled;\n\t\tthis.__destroyed = false;\n\t\tthis.__attributes = {};\n\t\tthis.__attributesRaw = args.attributes || {};\n\t\tthis.__scriptType = script;\n\t\tthis.__executionOrder = -1;\n\t}\n\n\tstatic __getScriptName(constructorFn) {\n\t\tif (typeof constructorFn !== 'function') return undefined;\n\t\tif ('name' in Function.prototype) return constructorFn.name;\n\t\tif (constructorFn === Function || constructorFn === Function.prototype.constructor) return 'Function';\n\t\tvar match = (\"\" + constructorFn).match(funcNameRegex);\n\t\treturn match ? match[1] : undefined;\n\t}\n\n\tstatic get scriptName() {\n\t\treturn this.__name;\n\t}\n\n\tstatic get attributes() {\n\t\tif (!this.hasOwnProperty('__attributes')) this.__attributes = new ScriptAttributes(this);\n\t\treturn this.__attributes;\n\t}\n\n\t__initializeAttributes(force) {\n\t\tif (!force && !this.__attributesRaw) return;\n\n\t\tfor (var key in this.__scriptType.attributes.index) {\n\t\t\tif (this.__attributesRaw && this.__attributesRaw.hasOwnProperty(key)) {\n\t\t\t\tthis[key] = this.__attributesRaw[key];\n\t\t\t} else if (!this.__attributes.hasOwnProperty(key)) {\n\t\t\t\tif (this.__scriptType.attributes.index[key].hasOwnProperty('default')) {\n\t\t\t\t\tthis[key] = this.__scriptType.attributes.index[key].default;\n\t\t\t\t} else {\n\t\t\t\t\tthis[key] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.__attributesRaw = null;\n\t}\n\n\tstatic extend(methods) {\n\t\tfor (var key in methods) {\n\t\t\tif (!methods.hasOwnProperty(key)) continue;\n\t\t\tthis.prototype[key] = methods[key];\n\t\t}\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled && !this._destroyed && this.entity.script.enabled && this.entity.enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = !!value;\n\t\tif (this.enabled === this._enabledOld) return;\n\t\tthis._enabledOld = this.enabled;\n\t\tthis.fire(this.enabled ? 'enable' : 'disable');\n\t\tthis.fire('state', this.enabled);\n\n\t\tif (!this._initialized && this.enabled) {\n\t\t\tthis._initialized = true;\n\n\t\t\tthis.__initializeAttributes(true);\n\n\t\t\tif (this.initialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.initialize);\n\t\t}\n\n\t\tif (this._initialized && !this._postInitialized && this.enabled && !this.entity.script._beingEnabled) {\n\t\t\tthis._postInitialized = true;\n\t\t\tif (this.postInitialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.postInitialize);\n\t\t}\n\t}\n\n}\n\nScriptType.__name = null;\n\nconst reservedScriptNames = new Set(['system', 'entity', 'create', 'destroy', 'swap', 'move', 'scripts', '_scripts', '_scriptsIndex', '_scriptsData', 'enabled', '_oldState', 'onEnable', 'onDisable', 'onPostStateChange', '_onSetEnabled', '_checkState', '_onBeforeRemove', '_onInitializeAttributes', '_onInitialize', '_onPostInitialize', '_onUpdate', '_onPostUpdate', '_callbacks', 'has', 'get', 'on', 'off', 'fire', 'once', 'hasEvent']);\n\nfunction createScript(name, app) {\n\tif (script.legacy) {\n\t\treturn null;\n\t}\n\n\tif (reservedScriptNames.has(name)) throw new Error('script name: \\'' + name + '\\' is reserved, please change script name');\n\n\tvar scriptType = function scriptType(args) {\n\t\tEventHandler.prototype.initEventHandler.call(this);\n\t\tScriptType.prototype.initScriptType.call(this, args);\n\t};\n\n\tscriptType.prototype = Object.create(ScriptType.prototype);\n\tscriptType.prototype.constructor = scriptType;\n\tscriptType.extend = ScriptType.extend;\n\tscriptType.attributes = new ScriptAttributes(scriptType);\n\tregisterScript(scriptType, name, app);\n\treturn scriptType;\n}\n\nvar reservedAttributes = {};\nScriptAttributes.reservedNames.forEach((value, value2, set) => {\n\treservedAttributes[value] = 1;\n});\ncreateScript.reservedAttributes = reservedAttributes;\n\nfunction registerScript(script, name, app) {\n\tif (script.legacy) {\n\t\treturn;\n\t}\n\n\tif (typeof script !== 'function') throw new Error('script class: \\'' + script + '\\' must be a constructor function (i.e. class).');\n\tif (!(script.prototype instanceof ScriptType)) throw new Error('script class: \\'' + ScriptType.__getScriptName(script) + '\\' does not extend pc.ScriptType.');\n\tname = name || script.__name || ScriptType.__getScriptName(script);\n\tif (reservedScriptNames.has(name)) throw new Error('script name: \\'' + name + '\\' is reserved, please change script name');\n\tscript.__name = name;\n\tvar registry = app ? app.scripts : Application.getApplication().scripts;\n\tregistry.add(script);\n\n\tScriptHandler._push(script);\n}\n\nconst ACTION_MOUSE = 'mouse';\nconst ACTION_KEYBOARD = 'keyboard';\nconst ACTION_GAMEPAD = 'gamepad';\nconst AXIS_MOUSE_X = 'mousex';\nconst AXIS_MOUSE_Y = 'mousey';\nconst AXIS_PAD_L_X = 'padlx';\nconst AXIS_PAD_L_Y = 'padly';\nconst AXIS_PAD_R_X = 'padrx';\nconst AXIS_PAD_R_Y = 'padry';\nconst AXIS_KEY = 'key';\nconst EVENT_KEYDOWN = 'keydown';\nconst EVENT_KEYUP = 'keyup';\nconst EVENT_MOUSEDOWN = \"mousedown\";\nconst EVENT_MOUSEMOVE = \"mousemove\";\nconst EVENT_MOUSEUP = \"mouseup\";\nconst EVENT_MOUSEWHEEL = \"mousewheel\";\nconst EVENT_TOUCHSTART = 'touchstart';\nconst EVENT_TOUCHEND = 'touchend';\nconst EVENT_TOUCHMOVE = 'touchmove';\nconst EVENT_TOUCHCANCEL = 'touchcancel';\nconst EVENT_SELECT = 'select';\nconst EVENT_SELECTSTART = 'selectstart';\nconst EVENT_SELECTEND = 'selectend';\nconst KEY_BACKSPACE = 8;\nconst KEY_TAB = 9;\nconst KEY_RETURN = 13;\nconst KEY_ENTER = 13;\nconst KEY_SHIFT = 16;\nconst KEY_CONTROL = 17;\nconst KEY_ALT = 18;\nconst KEY_PAUSE = 19;\nconst KEY_CAPS_LOCK = 20;\nconst KEY_ESCAPE = 27;\nconst KEY_SPACE = 32;\nconst KEY_PAGE_UP = 33;\nconst KEY_PAGE_DOWN = 34;\nconst KEY_END = 35;\nconst KEY_HOME = 36;\nconst KEY_LEFT = 37;\nconst KEY_UP = 38;\nconst KEY_RIGHT = 39;\nconst KEY_DOWN = 40;\nconst KEY_PRINT_SCREEN = 44;\nconst KEY_INSERT = 45;\nconst KEY_DELETE = 46;\nconst KEY_0 = 48;\nconst KEY_1 = 49;\nconst KEY_2 = 50;\nconst KEY_3 = 51;\nconst KEY_4 = 52;\nconst KEY_5 = 53;\nconst KEY_6 = 54;\nconst KEY_7 = 55;\nconst KEY_8 = 56;\nconst KEY_9 = 57;\nconst KEY_SEMICOLON = 59;\nconst KEY_EQUAL = 61;\nconst KEY_A = 65;\nconst KEY_B = 66;\nconst KEY_C = 67;\nconst KEY_D = 68;\nconst KEY_E = 69;\nconst KEY_F = 70;\nconst KEY_G = 71;\nconst KEY_H = 72;\nconst KEY_I = 73;\nconst KEY_J = 74;\nconst KEY_K = 75;\nconst KEY_L = 76;\nconst KEY_M = 77;\nconst KEY_N = 78;\nconst KEY_O = 79;\nconst KEY_P = 80;\nconst KEY_Q = 81;\nconst KEY_R = 82;\nconst KEY_S = 83;\nconst KEY_T = 84;\nconst KEY_U = 85;\nconst KEY_V = 86;\nconst KEY_W = 87;\nconst KEY_X = 88;\nconst KEY_Y = 89;\nconst KEY_Z = 90;\nconst KEY_WINDOWS = 91;\nconst KEY_CONTEXT_MENU = 93;\nconst KEY_NUMPAD_0 = 96;\nconst KEY_NUMPAD_1 = 97;\nconst KEY_NUMPAD_2 = 98;\nconst KEY_NUMPAD_3 = 99;\nconst KEY_NUMPAD_4 = 100;\nconst KEY_NUMPAD_5 = 101;\nconst KEY_NUMPAD_6 = 102;\nconst KEY_NUMPAD_7 = 103;\nconst KEY_NUMPAD_8 = 104;\nconst KEY_NUMPAD_9 = 105;\nconst KEY_MULTIPLY = 106;\nconst KEY_ADD = 107;\nconst KEY_SEPARATOR = 108;\nconst KEY_SUBTRACT = 109;\nconst KEY_DECIMAL = 110;\nconst KEY_DIVIDE = 111;\nconst KEY_F1 = 112;\nconst KEY_F2 = 113;\nconst KEY_F3 = 114;\nconst KEY_F4 = 115;\nconst KEY_F5 = 116;\nconst KEY_F6 = 117;\nconst KEY_F7 = 118;\nconst KEY_F8 = 119;\nconst KEY_F9 = 120;\nconst KEY_F10 = 121;\nconst KEY_F11 = 122;\nconst KEY_F12 = 123;\nconst KEY_COMMA = 188;\nconst KEY_PERIOD = 190;\nconst KEY_SLASH = 191;\nconst KEY_OPEN_BRACKET = 219;\nconst KEY_BACK_SLASH = 220;\nconst KEY_CLOSE_BRACKET = 221;\nconst KEY_META = 224;\nconst MOUSEBUTTON_NONE = -1;\nconst MOUSEBUTTON_LEFT = 0;\nconst MOUSEBUTTON_MIDDLE = 1;\nconst MOUSEBUTTON_RIGHT = 2;\nconst PAD_1 = 0;\nconst PAD_2 = 1;\nconst PAD_3 = 2;\nconst PAD_4 = 3;\nconst PAD_FACE_1 = 0;\nconst PAD_FACE_2 = 1;\nconst PAD_FACE_3 = 2;\nconst PAD_FACE_4 = 3;\nconst PAD_L_SHOULDER_1 = 4;\nconst PAD_R_SHOULDER_1 = 5;\nconst PAD_L_SHOULDER_2 = 6;\nconst PAD_R_SHOULDER_2 = 7;\nconst PAD_SELECT = 8;\nconst PAD_START = 9;\nconst PAD_L_STICK_BUTTON = 10;\nconst PAD_R_STICK_BUTTON = 11;\nconst PAD_UP = 12;\nconst PAD_DOWN = 13;\nconst PAD_LEFT = 14;\nconst PAD_RIGHT = 15;\nconst PAD_VENDOR = 16;\nconst PAD_L_STICK_X = 0;\nconst PAD_L_STICK_Y = 1;\nconst PAD_R_STICK_X = 2;\nconst PAD_R_STICK_Y = 3;\n\nclass KeyboardEvent {\n\tconstructor(keyboard, event) {\n\t\tif (event) {\n\t\t\tthis.key = event.keyCode;\n\t\t\tthis.element = event.target;\n\t\t\tthis.event = event;\n\t\t} else {\n\t\t\tthis.key = null;\n\t\t\tthis.element = null;\n\t\t\tthis.event = null;\n\t\t}\n\t}\n\n}\n\nconst _keyboardEvent = new KeyboardEvent();\n\nfunction makeKeyboardEvent(event) {\n\t_keyboardEvent.key = event.keyCode;\n\t_keyboardEvent.element = event.target;\n\t_keyboardEvent.event = event;\n\treturn _keyboardEvent;\n}\n\nfunction toKeyCode(s) {\n\tif (typeof s === \"string\") {\n\t\treturn s.toUpperCase().charCodeAt(0);\n\t}\n\n\treturn s;\n}\n\nconst _keyCodeToKeyIdentifier = {\n\t'9': 'Tab',\n\t'13': 'Enter',\n\t'16': 'Shift',\n\t'17': 'Control',\n\t'18': 'Alt',\n\t'27': 'Escape',\n\t'37': 'Left',\n\t'38': 'Up',\n\t'39': 'Right',\n\t'40': 'Down',\n\t'46': 'Delete',\n\t'91': 'Win'\n};\n\nclass Keyboard extends EventHandler {\n\tconstructor(element, options = {}) {\n\t\tsuper();\n\t\tthis._element = null;\n\t\tthis._keyDownHandler = this._handleKeyDown.bind(this);\n\t\tthis._keyUpHandler = this._handleKeyUp.bind(this);\n\t\tthis._keyPressHandler = this._handleKeyPress.bind(this);\n\t\tthis._visibilityChangeHandler = this._handleVisibilityChange.bind(this);\n\t\tthis._windowBlurHandler = this._handleWindowBlur.bind(this);\n\t\tthis._keymap = {};\n\t\tthis._lastmap = {};\n\n\t\tif (element) {\n\t\t\tthis.attach(element);\n\t\t}\n\n\t\tthis.preventDefault = options.preventDefault || false;\n\t\tthis.stopPropagation = options.stopPropagation || false;\n\t}\n\n\tattach(element) {\n\t\tif (this._element) {\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._element = element;\n\n\t\tthis._element.addEventListener(\"keydown\", this._keyDownHandler, false);\n\n\t\tthis._element.addEventListener(\"keypress\", this._keyPressHandler, false);\n\n\t\tthis._element.addEventListener(\"keyup\", this._keyUpHandler, false);\n\n\t\tdocument.addEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\twindow.addEventListener('blur', this._windowBlurHandler, false);\n\t}\n\n\tdetach() {\n\t\tthis._element.removeEventListener(\"keydown\", this._keyDownHandler);\n\n\t\tthis._element.removeEventListener(\"keypress\", this._keyPressHandler);\n\n\t\tthis._element.removeEventListener(\"keyup\", this._keyUpHandler);\n\n\t\tthis._element = null;\n\t\tdocument.removeEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\twindow.removeEventListener('blur', this._windowBlurHandler, false);\n\t}\n\n\ttoKeyIdentifier(keyCode) {\n\t\tkeyCode = toKeyCode(keyCode);\n\t\tvar count;\n\t\tvar hex;\n\t\tvar length;\n\n\t\tvar id = _keyCodeToKeyIdentifier[keyCode.toString()];\n\n\t\tif (id) {\n\t\t\treturn id;\n\t\t}\n\n\t\thex = keyCode.toString(16).toUpperCase();\n\t\tlength = hex.length;\n\n\t\tfor (count = 0; count < 4 - length; count++) {\n\t\t\thex = '0' + hex;\n\t\t}\n\n\t\treturn 'U+' + hex;\n\t}\n\n\t_handleKeyDown(event) {\n\t\tvar code = event.keyCode || event.charCode;\n\t\tif (code === undefined) return;\n\t\tvar id = this.toKeyIdentifier(code);\n\t\tthis._keymap[id] = true;\n\t\tthis.fire(\"keydown\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleKeyUp(event) {\n\t\tvar code = event.keyCode || event.charCode;\n\t\tif (code === undefined) return;\n\t\tvar id = this.toKeyIdentifier(code);\n\t\tdelete this._keymap[id];\n\t\tthis.fire(\"keyup\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleKeyPress(event) {\n\t\tthis.fire(\"keypress\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleVisibilityChange() {\n\t\tif (document.visibilityState === 'hidden') {\n\t\t\tthis._handleWindowBlur();\n\t\t}\n\t}\n\n\t_handleWindowBlur() {\n\t\tthis._keymap = {};\n\t\tthis._lastmap = {};\n\t}\n\n\tupdate() {\n\t\tvar prop;\n\n\t\tfor (prop in this._lastmap) {\n\t\t\tdelete this._lastmap[prop];\n\t\t}\n\n\t\tfor (prop in this._keymap) {\n\t\t\tif (this._keymap.hasOwnProperty(prop)) {\n\t\t\t\tthis._lastmap[prop] = this._keymap[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\tisPressed(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!this._keymap[id];\n\t}\n\n\twasPressed(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!this._keymap[id] && !!!this._lastmap[id];\n\t}\n\n\twasReleased(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!!this._keymap[id] && !!this._lastmap[id];\n\t}\n\n}\n\nfunction isMousePointerLocked() {\n\treturn !!(document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement);\n}\n\nclass MouseEvent {\n\tconstructor(mouse, event) {\n\t\tvar coords = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tif (event) {\n\t\t\tif (event instanceof MouseEvent) {\n\t\t\t\tthrow Error(\"Expected MouseEvent\");\n\t\t\t}\n\n\t\t\tcoords = mouse._getTargetCoords(event);\n\t\t} else {\n\t\t\tevent = {};\n\t\t}\n\n\t\tif (coords) {\n\t\t\tthis.x = coords.x;\n\t\t\tthis.y = coords.y;\n\t\t} else if (isMousePointerLocked()) {\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.wheelDelta = 0;\n\n\t\tif (event.type === 'wheel') {\n\t\t\tif (event.deltaY > 0) {\n\t\t\t\tthis.wheelDelta = 1;\n\t\t\t} else if (event.deltaY < 0) {\n\t\t\t\tthis.wheelDelta = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (isMousePointerLocked()) {\n\t\t\tthis.dx = event.movementX || event.webkitMovementX || event.mozMovementX || 0;\n\t\t\tthis.dy = event.movementY || event.webkitMovementY || event.mozMovementY || 0;\n\t\t} else {\n\t\t\tthis.dx = this.x - mouse._lastX;\n\t\t\tthis.dy = this.y - mouse._lastY;\n\t\t}\n\n\t\tif (event.type === 'mousedown' || event.type === 'mouseup') {\n\t\t\tthis.button = event.button;\n\t\t} else {\n\t\t\tthis.button = MOUSEBUTTON_NONE;\n\t\t}\n\n\t\tthis.buttons = mouse._buttons.slice(0);\n\t\tthis.element = event.target;\n\t\tthis.ctrlKey = event.ctrlKey || false;\n\t\tthis.altKey = event.altKey || false;\n\t\tthis.shiftKey = event.shiftKey || false;\n\t\tthis.metaKey = event.metaKey || false;\n\t\tthis.event = event;\n\t}\n\n}\n\nclass Mouse extends EventHandler {\n\tconstructor(element) {\n\t\tsuper();\n\t\tthis._lastX = 0;\n\t\tthis._lastY = 0;\n\t\tthis._buttons = [false, false, false];\n\t\tthis._lastbuttons = [false, false, false];\n\t\tthis._upHandler = this._handleUp.bind(this);\n\t\tthis._downHandler = this._handleDown.bind(this);\n\t\tthis._moveHandler = this._handleMove.bind(this);\n\t\tthis._wheelHandler = this._handleWheel.bind(this);\n\n\t\tthis._contextMenuHandler = function (event) {\n\t\t\tevent.preventDefault();\n\t\t};\n\n\t\tthis._target = null;\n\t\tthis._attached = false;\n\t\tthis.attach(element);\n\t}\n\n\tstatic isPointerLocked() {\n\t\treturn isMousePointerLocked();\n\t}\n\n\tattach(element) {\n\t\tthis._target = element;\n\t\tif (this._attached) return;\n\t\tthis._attached = true;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: false\n\t\t} : false;\n\t\twindow.addEventListener(\"mouseup\", this._upHandler, opts);\n\t\twindow.addEventListener(\"mousedown\", this._downHandler, opts);\n\t\twindow.addEventListener(\"mousemove\", this._moveHandler, opts);\n\t\twindow.addEventListener(\"wheel\", this._wheelHandler, opts);\n\t}\n\n\tdetach() {\n\t\tif (!this._attached) return;\n\t\tthis._attached = false;\n\t\tthis._target = null;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: false\n\t\t} : false;\n\t\twindow.removeEventListener(\"mouseup\", this._upHandler, opts);\n\t\twindow.removeEventListener(\"mousedown\", this._downHandler, opts);\n\t\twindow.removeEventListener(\"mousemove\", this._moveHandler, opts);\n\t\twindow.removeEventListener(\"wheel\", this._wheelHandler, opts);\n\t}\n\n\tdisableContextMenu() {\n\t\tif (!this._target) return;\n\n\t\tthis._target.addEventListener(\"contextmenu\", this._contextMenuHandler);\n\t}\n\n\tenableContextMenu() {\n\t\tif (!this._target) return;\n\n\t\tthis._target.removeEventListener(\"contextmenu\", this._contextMenuHandler);\n\t}\n\n\tenablePointerLock(success, error) {\n\t\tif (!document.body.requestPointerLock) {\n\t\t\tif (error) error();\n\t\t\treturn;\n\t\t}\n\n\t\tvar s = function s() {\n\t\t\tsuccess();\n\t\t\tdocument.removeEventListener('pointerlockchange', s);\n\t\t};\n\n\t\tvar e = function e() {\n\t\t\terror();\n\t\t\tdocument.removeEventListener('pointerlockerror', e);\n\t\t};\n\n\t\tif (success) {\n\t\t\tdocument.addEventListener('pointerlockchange', s, false);\n\t\t}\n\n\t\tif (error) {\n\t\t\tdocument.addEventListener('pointerlockerror', e, false);\n\t\t}\n\n\t\tdocument.body.requestPointerLock();\n\t}\n\n\tdisablePointerLock(success) {\n\t\tif (!document.exitPointerLock) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar s = function s() {\n\t\t\tsuccess();\n\t\t\tdocument.removeEventListener('pointerlockchange', s);\n\t\t};\n\n\t\tif (success) {\n\t\t\tdocument.addEventListener('pointerlockchange', s, false);\n\t\t}\n\n\t\tdocument.exitPointerLock();\n\t}\n\n\tupdate() {\n\t\tthis._lastbuttons[0] = this._buttons[0];\n\t\tthis._lastbuttons[1] = this._buttons[1];\n\t\tthis._lastbuttons[2] = this._buttons[2];\n\t}\n\n\tisPressed(button) {\n\t\treturn this._buttons[button];\n\t}\n\n\twasPressed(button) {\n\t\treturn this._buttons[button] && !this._lastbuttons[button];\n\t}\n\n\twasReleased(button) {\n\t\treturn !this._buttons[button] && this._lastbuttons[button];\n\t}\n\n\t_handleUp(event) {\n\t\tthis._buttons[event.button] = false;\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEUP, e);\n\t}\n\n\t_handleDown(event) {\n\t\tthis._buttons[event.button] = true;\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEDOWN, e);\n\t}\n\n\t_handleMove(event) {\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEMOVE, e);\n\t\tthis._lastX = e.x;\n\t\tthis._lastY = e.y;\n\t}\n\n\t_handleWheel(event) {\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEWHEEL, e);\n\t}\n\n\t_getTargetCoords(event) {\n\t\tvar rect = this._target.getBoundingClientRect();\n\n\t\tvar left = Math.floor(rect.left);\n\t\tvar top = Math.floor(rect.top);\n\n\t\tif (event.clientX < left || event.clientX >= left + this._target.clientWidth || event.clientY < top || event.clientY >= top + this._target.clientHeight) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tx: event.clientX - left,\n\t\t\ty: event.clientY - top\n\t\t};\n\t}\n\n}\n\nclass Controller {\n\tconstructor(element, options = {}) {\n\t\tthis._keyboard = options.keyboard || null;\n\t\tthis._mouse = options.mouse || null;\n\t\tthis._gamepads = options.gamepads || null;\n\t\tthis._element = null;\n\t\tthis._actions = {};\n\t\tthis._axes = {};\n\t\tthis._axesValues = {};\n\n\t\tif (element) {\n\t\t\tthis.attach(element);\n\t\t}\n\t}\n\n\tattach(element) {\n\t\tthis._element = element;\n\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.attach(element);\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.attach(element);\n\t\t}\n\t}\n\n\tdetach() {\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.detach();\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.detach();\n\t\t}\n\n\t\tthis._element = null;\n\t}\n\n\tdisableContextMenu() {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tthis._mouse.disableContextMenu();\n\t}\n\n\tenableContextMenu() {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tthis._mouse.enableContextMenu();\n\t}\n\n\tupdate(dt) {\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.update(dt);\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.update(dt);\n\t\t}\n\n\t\tif (this._gamepads) {\n\t\t\tthis._gamepads.update(dt);\n\t\t}\n\n\t\tthis._axesValues = {};\n\n\t\tfor (var key in this._axes) {\n\t\t\tthis._axesValues[key] = [];\n\t\t}\n\t}\n\n\tregisterKeys(action, keys) {\n\t\tif (!this._keyboard) {\n\t\t\tthis._enableKeyboard();\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthrow new Error(\"Action: \" + action + \" already registered\");\n\t\t}\n\n\t\tif (keys === undefined) {\n\t\t\tthrow new Error(\"Invalid button\");\n\t\t}\n\n\t\tif (!keys.length) {\n\t\t\tkeys = [keys];\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_KEYBOARD,\n\t\t\t\tkeys: keys\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_KEYBOARD,\n\t\t\t\tkeys: keys\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterMouse(action, button) {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tif (button === undefined) {\n\t\t\tthrow new Error('Invalid button');\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_MOUSE,\n\t\t\t\tbutton: button\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_MOUSE,\n\t\t\t\tbutton: -button\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterPadButton(action, pad, button) {\n\t\tif (button === undefined) {\n\t\t\tthrow new Error('Invalid button');\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_GAMEPAD,\n\t\t\t\tbutton: button,\n\t\t\t\tpad: pad\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_GAMEPAD,\n\t\t\t\tbutton: button,\n\t\t\t\tpad: pad\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterAxis(options) {\n\t\tvar name = options.name;\n\n\t\tif (!this._axes[name]) {\n\t\t\tthis._axes[name] = [];\n\t\t}\n\n\t\tvar i = this._axes[name].push(name);\n\n\t\toptions = options || {};\n\t\toptions.pad = options.pad || PAD_1;\n\n\t\tvar bind = function bind(controller, source, value, key) {\n\t\t\tswitch (source) {\n\t\t\t\tcase 'mousex':\n\t\t\t\t\tcontroller._mouse.on(EVENT_MOUSEMOVE, function (e) {\n\t\t\t\t\t\tcontroller._axesValues[name][i] = e.dx / 10;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mousey':\n\t\t\t\t\tcontroller._mouse.on(EVENT_MOUSEMOVE, function (e) {\n\t\t\t\t\t\tcontroller._axesValues[name][i] = e.dy / 10;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'key':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._keyboard.isPressed(key) ? value : 0;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padrx':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_R_STICK_X);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padry':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_R_STICK_Y);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padlx':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_L_STICK_X);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padly':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_L_STICK_Y);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unknown axis');\n\t\t\t}\n\t\t};\n\n\t\tbind(this, options.positive, 1, options.positiveKey);\n\n\t\tif (options.negativeKey || options.negative !== options.positive) {\n\t\t\tbind(this, options.negative, -1, options.negativeKey);\n\t\t}\n\t}\n\n\tisPressed(actionName) {\n\t\tif (!this._actions[actionName]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar action;\n\t\tvar index = 0;\n\t\tvar length = this._actions[actionName].length;\n\n\t\tfor (index = 0; index < length; ++index) {\n\t\t\taction = this._actions[actionName][index];\n\n\t\t\tswitch (action.type) {\n\t\t\t\tcase ACTION_KEYBOARD:\n\t\t\t\t\tif (this._keyboard) {\n\t\t\t\t\t\tvar i,\n\t\t\t\t\t\t\t\tlen = action.keys.length;\n\n\t\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\t\tif (this._keyboard.isPressed(action.keys[i])) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_MOUSE:\n\t\t\t\t\tif (this._mouse && this._mouse.isPressed(action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_GAMEPAD:\n\t\t\t\t\tif (this._gamepads && this._gamepads.isPressed(action.pad, action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\twasPressed(actionName) {\n\t\tif (!this._actions[actionName]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = 0;\n\t\tvar length = this._actions[actionName].length;\n\n\t\tfor (index = 0; index < length; ++index) {\n\t\t\tvar action = this._actions[actionName][index];\n\n\t\t\tswitch (action.type) {\n\t\t\t\tcase ACTION_KEYBOARD:\n\t\t\t\t\tif (this._keyboard) {\n\t\t\t\t\t\tvar i,\n\t\t\t\t\t\t\t\tlen = action.keys.length;\n\n\t\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\t\tif (this._keyboard.wasPressed(action.keys[i])) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_MOUSE:\n\t\t\t\t\tif (this._mouse && this._mouse.wasPressed(action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_GAMEPAD:\n\t\t\t\t\tif (this._gamepads && this._gamepads.wasPressed(action.pad, action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetAxis(name) {\n\t\tvar value = 0;\n\n\t\tif (this._axes[name]) {\n\t\t\tvar i,\n\t\t\t\t\tlen = this._axes[name].length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (type$1(this._axes[name][i]) === 'function') {\n\t\t\t\t\tvar v = this._axes[name][i]();\n\n\t\t\t\t\tif (Math.abs(v) > Math.abs(value)) {\n\t\t\t\t\t\tvalue = v;\n\t\t\t\t\t}\n\t\t\t\t} else if (this._axesValues[name]) {\n\t\t\t\t\tif (Math.abs(this._axesValues[name][i]) > Math.abs(value)) {\n\t\t\t\t\t\tvalue = this._axesValues[name][i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t_enableMouse() {\n\t\tthis._mouse = new Mouse();\n\n\t\tif (!this._element) {\n\t\t\tthrow new Error(\"Controller must be attached to an Element\");\n\t\t}\n\n\t\tthis._mouse.attach(this._element);\n\t}\n\n\t_enableKeyboard() {\n\t\tthis._keyboard = new Keyboard();\n\n\t\tif (!this._element) {\n\t\t\tthrow new Error(\"Controller must be attached to an Element\");\n\t\t}\n\n\t\tthis._keyboard.attach(this._element);\n\t}\n\n}\n\nvar targetX, targetY;\nvar vecA = new Vec3();\nvar vecB = new Vec3();\nvar rayA = new Ray();\nvar rayB = new Ray();\nvar rayC = new Ray();\nrayA.end = new Vec3();\nrayB.end = new Vec3();\nrayC.end = new Vec3();\n\nvar _pq = new Vec3();\n\nvar _pa = new Vec3();\n\nvar _pb = new Vec3();\n\nvar _pc = new Vec3();\n\nvar _pd = new Vec3();\n\nvar _m = new Vec3();\n\nvar _sct = new Vec3();\n\nvar _accumulatedScale = new Vec2();\n\nvar _paddingTop = new Vec3();\n\nvar _paddingBottom = new Vec3();\n\nvar _paddingLeft = new Vec3();\n\nvar _paddingRight = new Vec3();\n\nvar _cornerBottomLeft = new Vec3();\n\nvar _cornerBottomRight = new Vec3();\n\nvar _cornerTopRight = new Vec3();\n\nvar _cornerTopLeft = new Vec3();\n\nvar ZERO_VEC4 = new Vec4();\n\nfunction scalarTriple(p1, p2, p3) {\n\treturn _sct.cross(p1, p2).dot(p3);\n}\n\nfunction intersectLineQuad(p, q, corners) {\n\t_pq.sub2(q, p);\n\n\t_pa.sub2(corners[0], p);\n\n\t_pb.sub2(corners[1], p);\n\n\t_pc.sub2(corners[2], p);\n\n\t_m.cross(_pc, _pq);\n\n\tvar v = _pa.dot(_m);\n\n\tif (v >= 0) {\n\t\tif (-_pb.dot(_m) < 0) return false;\n\t\tif (scalarTriple(_pq, _pb, _pa) < 0) return false;\n\t} else {\n\t\t_pd.sub2(corners[3], p);\n\n\t\tif (_pd.dot(_m) < 0) return false;\n\t\tif (scalarTriple(_pq, _pa, _pd) < 0) return false;\n\t}\n\n\tif (_pq.sub2(corners[0], corners[2]).lengthSq() < 0.0001 * 0.0001) return false;\n\tif (_pq.sub2(corners[1], corners[3]).lengthSq() < 0.0001 * 0.0001) return false;\n\treturn true;\n}\n\nclass ElementInputEvent {\n\tconstructor(event, element, camera) {\n\t\tthis.event = event;\n\t\tthis.element = element;\n\t\tthis.camera = camera;\n\t\tthis._stopPropagation = false;\n\t}\n\n\tstopPropagation() {\n\t\tthis._stopPropagation = true;\n\n\t\tif (this.event) {\n\t\t\tthis.event.stopImmediatePropagation();\n\t\t\tthis.event.stopPropagation();\n\t\t}\n\t}\n\n}\n\nclass ElementMouseEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, x, y, lastX, lastY) {\n\t\tsuper(event, element, camera);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.ctrlKey = event.ctrlKey || false;\n\t\tthis.altKey = event.altKey || false;\n\t\tthis.shiftKey = event.shiftKey || false;\n\t\tthis.metaKey = event.metaKey || false;\n\t\tthis.button = event.button;\n\n\t\tif (Mouse.isPointerLocked()) {\n\t\t\tthis.dx = event.movementX || event.webkitMovementX || event.mozMovementX || 0;\n\t\t\tthis.dy = event.movementY || event.webkitMovementY || event.mozMovementY || 0;\n\t\t} else {\n\t\t\tthis.dx = x - lastX;\n\t\t\tthis.dy = y - lastY;\n\t\t}\n\n\t\tthis.wheelDelta = 0;\n\n\t\tif (event.type === 'wheel') {\n\t\t\tif (event.deltaY > 0) {\n\t\t\t\tthis.wheelDelta = 1;\n\t\t\t} else if (event.deltaY < 0) {\n\t\t\t\tthis.wheelDelta = -1;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ElementTouchEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, x, y, touch) {\n\t\tsuper(event, element, camera);\n\t\tthis.touches = event.touches;\n\t\tthis.changedTouches = event.changedTouches;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.touch = touch;\n\t}\n\n}\n\nclass ElementSelectEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, inputSource) {\n\t\tsuper(event, element, camera);\n\t\tthis.inputSource = inputSource;\n\t}\n\n}\n\nclass ElementInput {\n\tconstructor(domElement, options) {\n\t\tthis._app = null;\n\t\tthis._attached = false;\n\t\tthis._target = null;\n\t\tthis._enabled = true;\n\t\tthis._lastX = 0;\n\t\tthis._lastY = 0;\n\t\tthis._upHandler = this._handleUp.bind(this);\n\t\tthis._downHandler = this._handleDown.bind(this);\n\t\tthis._moveHandler = this._handleMove.bind(this);\n\t\tthis._wheelHandler = this._handleWheel.bind(this);\n\t\tthis._touchstartHandler = this._handleTouchStart.bind(this);\n\t\tthis._touchendHandler = this._handleTouchEnd.bind(this);\n\t\tthis._touchcancelHandler = this._touchendHandler;\n\t\tthis._touchmoveHandler = this._handleTouchMove.bind(this);\n\t\tthis._sortHandler = this._sortElements.bind(this);\n\t\tthis._elements = [];\n\t\tthis._hoveredElement = null;\n\t\tthis._pressedElement = null;\n\t\tthis._touchedElements = {};\n\t\tthis._touchesForWhichTouchLeaveHasFired = {};\n\t\tthis._selectedElements = {};\n\t\tthis._selectedPressedElements = {};\n\t\tthis._useMouse = !options || options.useMouse !== false;\n\t\tthis._useTouch = !options || options.useTouch !== false;\n\t\tthis._useXr = !options || options.useXr !== false;\n\t\tthis._selectEventsAttached = false;\n\t\tif (platform.touch) this._clickedEntities = {};\n\t\tthis.attach(domElement);\n\t}\n\n\tattach(domElement) {\n\t\tif (this._attached) {\n\t\t\tthis._attached = false;\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._target = domElement;\n\t\tthis._attached = true;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: true\n\t\t} : false;\n\n\t\tif (this._useMouse) {\n\t\t\twindow.addEventListener('mouseup', this._upHandler, opts);\n\t\t\twindow.addEventListener('mousedown', this._downHandler, opts);\n\t\t\twindow.addEventListener('mousemove', this._moveHandler, opts);\n\t\t\twindow.addEventListener('wheel', this._wheelHandler, opts);\n\t\t}\n\n\t\tif (this._useTouch && platform.touch) {\n\t\t\tthis._target.addEventListener('touchstart', this._touchstartHandler, opts);\n\n\t\t\tthis._target.addEventListener('touchend', this._touchendHandler, false);\n\n\t\t\tthis._target.addEventListener('touchmove', this._touchmoveHandler, false);\n\n\t\t\tthis._target.addEventListener('touchcancel', this._touchcancelHandler, false);\n\t\t}\n\n\t\tthis.attachSelectEvents();\n\t}\n\n\tattachSelectEvents() {\n\t\tif (!this._selectEventsAttached && this._useXr && this.app && this.app.xr && this.app.xr.supported) {\n\t\t\tif (!this._clickedEntities) this._clickedEntities = {};\n\t\t\tthis._selectEventsAttached = true;\n\t\t\tthis.app.xr.on('start', this._onXrStart, this);\n\t\t}\n\t}\n\n\tdetach() {\n\t\tif (!this._attached) return;\n\t\tthis._attached = false;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: true\n\t\t} : false;\n\n\t\tif (this._useMouse) {\n\t\t\twindow.removeEventListener('mouseup', this._upHandler, opts);\n\t\t\twindow.removeEventListener('mousedown', this._downHandler, opts);\n\t\t\twindow.removeEventListener('mousemove', this._moveHandler, opts);\n\t\t\twindow.removeEventListener('wheel', this._wheelHandler, opts);\n\t\t}\n\n\t\tif (this._useTouch) {\n\t\t\tthis._target.removeEventListener('touchstart', this._touchstartHandler, opts);\n\n\t\t\tthis._target.removeEventListener('touchend', this._touchendHandler, false);\n\n\t\t\tthis._target.removeEventListener('touchmove', this._touchmoveHandler, false);\n\n\t\t\tthis._target.removeEventListener('touchcancel', this._touchcancelHandler, false);\n\t\t}\n\n\t\tif (this._selectEventsAttached) {\n\t\t\tthis._selectEventsAttached = false;\n\t\t\tthis.app.xr.off('start', this._onXrStart, this);\n\t\t\tthis.app.xr.off('end', this._onXrEnd, this);\n\t\t\tthis.app.xr.off('update', this._onXrUpdate, this);\n\t\t\tthis.app.xr.input.off('selectstart', this._onSelectStart, this);\n\t\t\tthis.app.xr.input.off('selectend', this._onSelectEnd, this);\n\t\t\tthis.app.xr.input.off('remove', this._onXrInputRemove, this);\n\t\t}\n\n\t\tthis._target = null;\n\t}\n\n\taddElement(element) {\n\t\tif (this._elements.indexOf(element) === -1) this._elements.push(element);\n\t}\n\n\tremoveElement(element) {\n\t\tvar idx = this._elements.indexOf(element);\n\n\t\tif (idx !== -1) this._elements.splice(idx, 1);\n\t}\n\n\t_handleUp(event) {\n\t\tif (!this._enabled) return;\n\t\tif (Mouse.isPointerLocked()) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mouseup', event);\n\t}\n\n\t_handleDown(event) {\n\t\tif (!this._enabled) return;\n\t\tif (Mouse.isPointerLocked()) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousedown', event);\n\t}\n\n\t_handleMove(event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousemove', event);\n\n\t\tthis._lastX = targetX;\n\t\tthis._lastY = targetY;\n\t}\n\n\t_handleWheel(event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousewheel', event);\n\t}\n\n\t_determineTouchedElements(event) {\n\t\tvar touchedElements = {};\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar i, j, len;\n\n\t\tfor (i = cameras.length - 1; i >= 0; i--) {\n\t\t\tvar camera = cameras[i];\n\t\t\tvar done = 0;\n\n\t\t\tfor (j = 0, len = event.changedTouches.length; j < len; j++) {\n\t\t\t\tif (touchedElements[event.changedTouches[j].identifier]) {\n\t\t\t\t\tdone++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar coords = this._calcTouchCoords(event.changedTouches[j]);\n\n\t\t\t\tvar element = this._getTargetElement(camera, coords.x, coords.y);\n\n\t\t\t\tif (element) {\n\t\t\t\t\tdone++;\n\t\t\t\t\ttouchedElements[event.changedTouches[j].identifier] = {\n\t\t\t\t\t\telement: element,\n\t\t\t\t\t\tcamera: camera,\n\t\t\t\t\t\tx: coords.x,\n\t\t\t\t\t\ty: coords.y\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (done === len) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn touchedElements;\n\t}\n\n\t_handleTouchStart(event) {\n\t\tif (!this._enabled) return;\n\n\t\tvar newTouchedElements = this._determineTouchedElements(event);\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar newTouchInfo = newTouchedElements[touch.identifier];\n\t\t\tvar oldTouchInfo = this._touchedElements[touch.identifier];\n\n\t\t\tif (newTouchInfo && (!oldTouchInfo || newTouchInfo.element !== oldTouchInfo.element)) {\n\t\t\t\tthis._fireEvent(event.type, new ElementTouchEvent(event, newTouchInfo.element, newTouchInfo.camera, newTouchInfo.x, newTouchInfo.y, touch));\n\n\t\t\t\tthis._touchesForWhichTouchLeaveHasFired[touch.identifier] = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (var touchId in newTouchedElements) {\n\t\t\tthis._touchedElements[touchId] = newTouchedElements[touchId];\n\t\t}\n\t}\n\n\t_handleTouchEnd(event) {\n\t\tif (!this._enabled) return;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\n\t\tfor (var key in this._clickedEntities) {\n\t\t\tdelete this._clickedEntities[key];\n\t\t}\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar touchInfo = this._touchedElements[touch.identifier];\n\t\t\tif (!touchInfo) continue;\n\t\t\tvar element = touchInfo.element;\n\t\t\tvar camera = touchInfo.camera;\n\t\t\tvar x = touchInfo.x;\n\t\t\tvar y = touchInfo.y;\n\t\t\tdelete this._touchedElements[touch.identifier];\n\t\t\tdelete this._touchesForWhichTouchLeaveHasFired[touch.identifier];\n\n\t\t\tthis._fireEvent(event.type, new ElementTouchEvent(event, element, camera, x, y, touch));\n\n\t\t\tif (event.touches.length === 0) {\n\t\t\t\tvar coords = this._calcTouchCoords(touch);\n\n\t\t\t\tfor (var c = cameras.length - 1; c >= 0; c--) {\n\t\t\t\t\tvar hovered = this._getTargetElement(cameras[c], coords.x, coords.y);\n\n\t\t\t\t\tif (hovered === element) {\n\t\t\t\t\t\tif (!this._clickedEntities[element.entity.getGuid()]) {\n\t\t\t\t\t\t\tthis._fireEvent('click', new ElementTouchEvent(event, element, camera, x, y, touch));\n\n\t\t\t\t\t\t\tthis._clickedEntities[element.entity.getGuid()] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleTouchMove(event) {\n\t\tevent.preventDefault();\n\t\tif (!this._enabled) return;\n\n\t\tvar newTouchedElements = this._determineTouchedElements(event);\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar newTouchInfo = newTouchedElements[touch.identifier];\n\t\t\tvar oldTouchInfo = this._touchedElements[touch.identifier];\n\n\t\t\tif (oldTouchInfo) {\n\t\t\t\tvar coords = this._calcTouchCoords(touch);\n\n\t\t\t\tif ((!newTouchInfo || newTouchInfo.element !== oldTouchInfo.element) && !this._touchesForWhichTouchLeaveHasFired[touch.identifier]) {\n\t\t\t\t\tthis._fireEvent('touchleave', new ElementTouchEvent(event, oldTouchInfo.element, oldTouchInfo.camera, coords.x, coords.y, touch));\n\n\t\t\t\t\tthis._touchesForWhichTouchLeaveHasFired[touch.identifier] = true;\n\t\t\t\t}\n\n\t\t\t\tthis._fireEvent('touchmove', new ElementTouchEvent(event, oldTouchInfo.element, oldTouchInfo.camera, coords.x, coords.y, touch));\n\t\t\t}\n\t\t}\n\t}\n\n\t_onElementMouseEvent(eventType, event) {\n\t\tvar element;\n\t\tvar hovered = this._hoveredElement;\n\t\tthis._hoveredElement = null;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar camera;\n\n\t\tfor (var i = cameras.length - 1; i >= 0; i--) {\n\t\t\tcamera = cameras[i];\n\t\t\telement = this._getTargetElement(camera, targetX, targetY);\n\t\t\tif (element) break;\n\t\t}\n\n\t\tif (element) {\n\t\t\tthis._fireEvent(eventType, new ElementMouseEvent(event, element, camera, targetX, targetY, this._lastX, this._lastY));\n\n\t\t\tthis._hoveredElement = element;\n\n\t\t\tif (eventType === 'mousedown') {\n\t\t\t\tthis._pressedElement = element;\n\t\t\t}\n\t\t}\n\n\t\tif (hovered !== this._hoveredElement) {\n\t\t\tif (hovered) {\n\t\t\t\tthis._fireEvent('mouseleave', new ElementMouseEvent(event, hovered, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t}\n\n\t\t\tif (this._hoveredElement) {\n\t\t\t\tthis._fireEvent('mouseenter', new ElementMouseEvent(event, this._hoveredElement, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t}\n\t\t}\n\n\t\tif (eventType === 'mouseup' && this._pressedElement) {\n\t\t\tif (this._pressedElement === this._hoveredElement) {\n\t\t\t\tthis._pressedElement = null;\n\n\t\t\t\tif (!this._clickedEntities || !this._clickedEntities[this._hoveredElement.entity.getGuid()]) {\n\t\t\t\t\tthis._fireEvent('click', new ElementMouseEvent(event, this._hoveredElement, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._pressedElement = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onXrStart() {\n\t\tthis.app.xr.on('end', this._onXrEnd, this);\n\t\tthis.app.xr.on('update', this._onXrUpdate, this);\n\t\tthis.app.xr.input.on('selectstart', this._onSelectStart, this);\n\t\tthis.app.xr.input.on('selectend', this._onSelectEnd, this);\n\t\tthis.app.xr.input.on('remove', this._onXrInputRemove, this);\n\t}\n\n\t_onXrEnd() {\n\t\tthis.app.xr.off('update', this._onXrUpdate, this);\n\t\tthis.app.xr.input.off('selectstart', this._onSelectStart, this);\n\t\tthis.app.xr.input.off('selectend', this._onSelectEnd, this);\n\t\tthis.app.xr.input.off('remove', this._onXrInputRemove, this);\n\t}\n\n\t_onXrUpdate() {\n\t\tif (!this._enabled) return;\n\t\tvar inputSources = this.app.xr.input.inputSources;\n\n\t\tfor (var i = 0; i < inputSources.length; i++) {\n\t\t\tthis._onElementSelectEvent('selectmove', inputSources[i], null);\n\t\t}\n\t}\n\n\t_onXrInputRemove(inputSource) {\n\t\tvar hovered = this._selectedElements[inputSource.id];\n\n\t\tif (hovered) {\n\t\t\tinputSource._elementEntity = null;\n\n\t\t\tthis._fireEvent('selectleave', new ElementSelectEvent(null, hovered, null, inputSource));\n\t\t}\n\n\t\tdelete this._selectedElements[inputSource.id];\n\t\tdelete this._selectedPressedElements[inputSource.id];\n\t}\n\n\t_onSelectStart(inputSource, event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._onElementSelectEvent('selectstart', inputSource, event);\n\t}\n\n\t_onSelectEnd(inputSource, event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._onElementSelectEvent('selectend', inputSource, event);\n\t}\n\n\t_onElementSelectEvent(eventType, inputSource, event) {\n\t\tvar element;\n\t\tvar hoveredBefore = this._selectedElements[inputSource.id];\n\t\tvar hoveredNow;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar camera;\n\n\t\tif (inputSource.elementInput) {\n\t\t\trayC.set(inputSource.getOrigin(), inputSource.getDirection());\n\n\t\t\tfor (var i = cameras.length - 1; i >= 0; i--) {\n\t\t\t\tcamera = cameras[i];\n\t\t\t\telement = this._getTargetElementByRay(rayC, camera);\n\t\t\t\tif (element) break;\n\t\t\t}\n\t\t}\n\n\t\tinputSource._elementEntity = element || null;\n\n\t\tif (element) {\n\t\t\tthis._selectedElements[inputSource.id] = element;\n\t\t\thoveredNow = element;\n\t\t} else {\n\t\t\tdelete this._selectedElements[inputSource.id];\n\t\t}\n\n\t\tif (hoveredBefore !== hoveredNow) {\n\t\t\tif (hoveredBefore) this._fireEvent('selectleave', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\t\t\tif (hoveredNow) this._fireEvent('selectenter', new ElementSelectEvent(event, hoveredNow, camera, inputSource));\n\t\t}\n\n\t\tif (eventType === 'selectstart') {\n\t\t\tthis._selectedPressedElements[inputSource.id] = hoveredNow;\n\t\t\tif (hoveredNow) this._fireEvent('selectstart', new ElementSelectEvent(event, hoveredNow, camera, inputSource));\n\t\t}\n\n\t\tvar pressed = this._selectedPressedElements[inputSource.id];\n\n\t\tif (!inputSource.elementInput && pressed) {\n\t\t\tdelete this._selectedPressedElements[inputSource.id];\n\t\t\tif (hoveredBefore) this._fireEvent('selectend', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\t\t}\n\n\t\tif (eventType === 'selectend' && inputSource.elementInput) {\n\t\t\tdelete this._selectedPressedElements[inputSource.id];\n\t\t\tif (hoveredBefore) this._fireEvent('selectend', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\n\t\t\tif (pressed && pressed === hoveredBefore) {\n\t\t\t\tthis._fireEvent('click', new ElementSelectEvent(event, pressed, camera, inputSource));\n\t\t\t}\n\t\t}\n\t}\n\n\t_fireEvent(name, evt) {\n\t\tvar element = evt.element;\n\n\t\twhile (true) {\n\t\t\telement.fire(name, evt);\n\t\t\tif (evt._stopPropagation) break;\n\t\t\tif (!element.entity.parent) break;\n\t\t\telement = element.entity.parent.element;\n\t\t\tif (!element) break;\n\t\t}\n\t}\n\n\t_calcMouseCoords(event) {\n\t\tvar rect = this._target.getBoundingClientRect();\n\n\t\tvar left = Math.floor(rect.left);\n\t\tvar top = Math.floor(rect.top);\n\n\t\tif (event.clientX < left || event.clientX >= left + this._target.clientWidth || event.clientY < top || event.clientY >= top + this._target.clientHeight) {\n\t\t\ttargetX = null;\n\t\t\ttargetY = null;\n\t\t} else {\n\t\t\ttargetX = event.clientX - left;\n\t\t\ttargetY = event.clientY - top;\n\t\t}\n\t}\n\n\t_calcTouchCoords(touch) {\n\t\tvar totalOffsetX = 0;\n\t\tvar totalOffsetY = 0;\n\t\tvar target = touch.target;\n\n\t\twhile (!(target instanceof HTMLElement)) {\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\tvar currentElement = target;\n\n\t\tdo {\n\t\t\ttotalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n\t\t\ttotalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n\t\t\tcurrentElement = currentElement.offsetParent;\n\t\t} while (currentElement);\n\n\t\treturn {\n\t\t\tx: touch.pageX - totalOffsetX,\n\t\t\ty: touch.pageY - totalOffsetY\n\t\t};\n\t}\n\n\t_sortElements(a, b) {\n\t\tvar layerOrder = this.app.scene.layers.sortTransparentLayers(a.layers, b.layers);\n\t\tif (layerOrder !== 0) return layerOrder;\n\t\tif (a.screen && !b.screen) return -1;\n\t\tif (!a.screen && b.screen) return 1;\n\t\tif (!a.screen && !b.screen) return 0;\n\t\tif (a.screen.screen.screenSpace && !b.screen.screen.screenSpace) return -1;\n\t\tif (b.screen.screen.screenSpace && !a.screen.screen.screenSpace) return 1;\n\t\treturn b.drawOrder - a.drawOrder;\n\t}\n\n\t_getTargetElement(camera, x, y) {\n\t\tvar result = null;\n\n\t\tthis._elements.sort(this._sortHandler);\n\n\t\tvar rayScreen, ray3d;\n\n\t\tfor (var i = 0, len = this._elements.length; i < len; i++) {\n\t\t\tvar element = this._elements[i];\n\t\t\tvar screen = false;\n\t\t\tvar ray;\n\n\t\t\tif (element.screen && element.screen.screen.screenSpace) {\n\t\t\t\tif (rayScreen === undefined) {\n\t\t\t\t\trayScreen = rayA;\n\n\t\t\t\t\tif (this._calculateRayScreen(x, y, camera, rayScreen) === false) {\n\t\t\t\t\t\trayScreen = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tray = rayScreen;\n\t\t\t\tscreen = true;\n\t\t\t} else {\n\t\t\t\tif (ray3d === undefined) {\n\t\t\t\t\tray3d = rayB;\n\n\t\t\t\t\tif (this._calculateRay3d(x, y, camera, ray3d) === false) {\n\t\t\t\t\t\tray3d = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tray = ray3d;\n\t\t\t}\n\n\t\t\tif (ray && this._checkElement(ray, element, screen)) {\n\t\t\t\tresult = element;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_getTargetElementByRay(ray, camera) {\n\t\tvar result = null;\n\t\trayA.origin.copy(ray.origin);\n\t\trayA.direction.copy(ray.direction);\n\t\trayA.end.copy(rayA.direction).mulScalar(camera.farClip * 2).add(rayA.origin);\n\n\t\tthis._elements.sort(this._sortHandler);\n\n\t\tfor (var i = 0, len = this._elements.length; i < len; i++) {\n\t\t\tvar element = this._elements[i];\n\n\t\t\tif (!element.screen || !element.screen.screen.screenSpace) {\n\t\t\t\tif (this._checkElement(rayA, element, false)) {\n\t\t\t\t\tresult = element;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_buildHitCorners(element, screenOrWorldCorners, scaleX, scaleY) {\n\t\tvar hitCorners = screenOrWorldCorners;\n\t\tvar button = element.entity && element.entity.button;\n\n\t\tif (button) {\n\t\t\tvar hitPadding = element.entity.button.hitPadding || ZERO_VEC4;\n\n\t\t\t_paddingTop.copy(element.entity.up);\n\n\t\t\t_paddingBottom.copy(_paddingTop).mulScalar(-1);\n\n\t\t\t_paddingRight.copy(element.entity.right);\n\n\t\t\t_paddingLeft.copy(_paddingRight).mulScalar(-1);\n\n\t\t\t_paddingTop.mulScalar(hitPadding.w * scaleY);\n\n\t\t\t_paddingBottom.mulScalar(hitPadding.y * scaleY);\n\n\t\t\t_paddingRight.mulScalar(hitPadding.z * scaleX);\n\n\t\t\t_paddingLeft.mulScalar(hitPadding.x * scaleX);\n\n\t\t\t_cornerBottomLeft.copy(hitCorners[0]).add(_paddingBottom).add(_paddingLeft);\n\n\t\t\t_cornerBottomRight.copy(hitCorners[1]).add(_paddingBottom).add(_paddingRight);\n\n\t\t\t_cornerTopRight.copy(hitCorners[2]).add(_paddingTop).add(_paddingRight);\n\n\t\t\t_cornerTopLeft.copy(hitCorners[3]).add(_paddingTop).add(_paddingLeft);\n\n\t\t\thitCorners = [_cornerBottomLeft, _cornerBottomRight, _cornerTopRight, _cornerTopLeft];\n\t\t}\n\n\t\treturn hitCorners;\n\t}\n\n\t_calculateScaleToScreen(element) {\n\t\tvar current = element.entity;\n\t\tvar screenScale = element.screen.screen.scale;\n\n\t\t_accumulatedScale.set(screenScale, screenScale);\n\n\t\twhile (current && !current.screen) {\n\t\t\t_accumulatedScale.mul(current.getLocalScale());\n\n\t\t\tcurrent = current.parent;\n\t\t}\n\n\t\treturn _accumulatedScale;\n\t}\n\n\t_calculateRayScreen(x, y, camera, ray) {\n\t\tvar sw = this.app.graphicsDevice.width;\n\t\tvar sh = this.app.graphicsDevice.height;\n\t\tvar cameraWidth = camera.rect.z * sw;\n\t\tvar cameraHeight = camera.rect.w * sh;\n\t\tvar cameraLeft = camera.rect.x * sw;\n\t\tvar cameraRight = cameraLeft + cameraWidth;\n\t\tvar cameraBottom = (1 - camera.rect.y) * sh;\n\t\tvar cameraTop = cameraBottom - cameraHeight;\n\n\t\tvar _x = x * sw / this._target.clientWidth;\n\n\t\tvar _y = y * sh / this._target.clientHeight;\n\n\t\tif (_x >= cameraLeft && _x <= cameraRight && _y <= cameraBottom && _y >= cameraTop) {\n\t\t\t_x = sw * (_x - cameraLeft) / cameraWidth;\n\t\t\t_y = sh * (_y - cameraTop) / cameraHeight;\n\t\t\t_y = sh - _y;\n\t\t\tray.origin.set(_x, _y, 1);\n\t\t\tray.direction.set(0, 0, -1);\n\t\t\tray.end.copy(ray.direction).mulScalar(2).add(ray.origin);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_calculateRay3d(x, y, camera, ray) {\n\t\tvar sw = this._target.clientWidth;\n\t\tvar sh = this._target.clientHeight;\n\t\tvar cameraWidth = camera.rect.z * sw;\n\t\tvar cameraHeight = camera.rect.w * sh;\n\t\tvar cameraLeft = camera.rect.x * sw;\n\t\tvar cameraRight = cameraLeft + cameraWidth;\n\t\tvar cameraBottom = (1 - camera.rect.y) * sh;\n\t\tvar cameraTop = cameraBottom - cameraHeight;\n\t\tvar _x = x;\n\t\tvar _y = y;\n\n\t\tif (x >= cameraLeft && x <= cameraRight && y <= cameraBottom && _y >= cameraTop) {\n\t\t\t_x = sw * (_x - cameraLeft) / cameraWidth;\n\t\t\t_y = sh * (_y - cameraTop) / cameraHeight;\n\t\t\tcamera.screenToWorld(_x, _y, camera.nearClip, vecA);\n\t\t\tcamera.screenToWorld(_x, _y, camera.farClip, vecB);\n\t\t\tray.origin.copy(vecA);\n\t\t\tray.direction.set(0, 0, -1);\n\t\t\tray.end.copy(vecB);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_checkElement(ray, element, screen) {\n\t\tif (element.maskedBy) {\n\t\t\tvar result = this._checkElement(ray, element.maskedBy.element, screen);\n\n\t\t\tif (!result) return false;\n\t\t}\n\n\t\tvar scale;\n\n\t\tif (screen) {\n\t\t\tscale = this._calculateScaleToScreen(element);\n\t\t} else {\n\t\t\tscale = element.entity.getWorldTransform().getScale();\n\t\t}\n\n\t\tvar corners = this._buildHitCorners(element, screen ? element.screenCorners : element.worldCorners, scale.x, scale.y);\n\n\t\tif (intersectLineQuad(ray.origin, ray.end, corners)) return true;\n\t\treturn false;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = value;\n\t}\n\n\tget app() {\n\t\treturn this._app || getApplication();\n\t}\n\n\tset app(value) {\n\t\tthis._app = value;\n\t}\n\n}\n\nconst MAPS = {\n\tDEFAULT: {\n\t\tbuttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_3', 'PAD_FACE_4', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],\n\t\taxes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']\n\t},\n\tPS3: {\n\t\tbuttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_4', 'PAD_FACE_3', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],\n\t\taxes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']\n\t}\n};\nconst PRODUCT_CODES = {\n\t'Product: 0268': 'PS3'\n};\n\nclass GamePads {\n\tconstructor() {\n\t\tthis.gamepadsSupported = !!navigator.getGamepads || !!navigator.webkitGetGamepads;\n\t\tthis.current = [];\n\t\tthis.previous = [];\n\t\tthis.deadZone = 0.25;\n\t}\n\n\tupdate() {\n\t\tvar i, j, l;\n\t\tvar buttons, buttonsLen;\n\n\t\tfor (i = 0, l = this.current.length; i < l; i++) {\n\t\t\tbuttons = this.current[i].pad.buttons;\n\t\t\tbuttonsLen = buttons.length;\n\n\t\t\tfor (j = 0; j < buttonsLen; j++) {\n\t\t\t\tif (this.previous[i] === undefined) {\n\t\t\t\t\tthis.previous[i] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.previous[i][j] = buttons[j].pressed;\n\t\t\t}\n\t\t}\n\n\t\tthis.poll(this.current);\n\t}\n\n\tpoll(pads = []) {\n\t\tif (pads.length > 0) {\n\t\t\tpads.length = 0;\n\t\t}\n\n\t\tif (this.gamepadsSupported) {\n\t\t\tvar padDevices = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads();\n\t\t\tvar i,\n\t\t\t\t\tlen = padDevices.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (padDevices[i]) {\n\t\t\t\t\tpads.push({\n\t\t\t\t\t\tmap: this.getMap(padDevices[i]),\n\t\t\t\t\t\tpad: padDevices[i]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn pads;\n\t}\n\n\tgetMap(pad) {\n\t\tfor (var code in PRODUCT_CODES) {\n\t\t\tif (pad.id.indexOf(code) >= 0) {\n\t\t\t\treturn MAPS[PRODUCT_CODES[code]];\n\t\t\t}\n\t\t}\n\n\t\treturn MAPS.DEFAULT;\n\t}\n\n\tisPressed(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\treturn this.current[index].pad.buttons[pc[key]].pressed;\n\t}\n\n\twasPressed(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\tvar i = pc[key];\n\t\treturn this.current[index].pad.buttons[i].pressed && !(this.previous[index] && this.previous[index][i]);\n\t}\n\n\twasReleased(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\tvar i = pc[key];\n\t\treturn !this.current[index].pad.buttons[i].pressed && this.previous[index] && this.previous[index][i];\n\t}\n\n\tgetAxis(index, axes) {\n\t\tif (!this.current[index]) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar key = this.current[index].map.axes[axes];\n\t\tvar value = this.current[index].pad.axes[pc[key]];\n\n\t\tif (Math.abs(value) < this.deadZone) {\n\t\t\tvalue = 0;\n\t\t}\n\n\t\treturn value;\n\t}\n\n}\n\nfunction getTouchTargetCoords(touch) {\n\tvar totalOffsetX = 0;\n\tvar totalOffsetY = 0;\n\tvar target = touch.target;\n\n\twhile (!(target instanceof HTMLElement)) {\n\t\ttarget = target.parentNode;\n\t}\n\n\tvar currentElement = target;\n\n\tdo {\n\t\ttotalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n\t\ttotalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n\t\tcurrentElement = currentElement.offsetParent;\n\t} while (currentElement);\n\n\treturn {\n\t\tx: touch.pageX - totalOffsetX,\n\t\ty: touch.pageY - totalOffsetY\n\t};\n}\n\nclass Touch {\n\tconstructor(touch) {\n\t\tvar coords = getTouchTargetCoords(touch);\n\t\tthis.id = touch.identifier;\n\t\tthis.x = coords.x;\n\t\tthis.y = coords.y;\n\t\tthis.target = touch.target;\n\t\tthis.touch = touch;\n\t}\n\n}\n\nclass TouchEvent {\n\tconstructor(device, event) {\n\t\tthis.element = event.target;\n\t\tthis.event = event;\n\t\tthis.touches = [];\n\t\tthis.changedTouches = [];\n\n\t\tif (event) {\n\t\t\tvar i,\n\t\t\t\t\tl = event.touches.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tthis.touches.push(new Touch(event.touches[i]));\n\t\t\t}\n\n\t\t\tl = event.changedTouches.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tthis.changedTouches.push(new Touch(event.changedTouches[i]));\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTouchById(id, list) {\n\t\tvar i,\n\t\t\t\tl = list.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tif (list[i].id === id) {\n\t\t\t\treturn list[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass TouchDevice extends EventHandler {\n\tconstructor(element) {\n\t\tsuper();\n\t\tthis._element = null;\n\t\tthis._startHandler = this._handleTouchStart.bind(this);\n\t\tthis._endHandler = this._handleTouchEnd.bind(this);\n\t\tthis._moveHandler = this._handleTouchMove.bind(this);\n\t\tthis._cancelHandler = this._handleTouchCancel.bind(this);\n\t\tthis.attach(element);\n\t}\n\n\tattach(element) {\n\t\tif (this._element) {\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._element = element;\n\n\t\tthis._element.addEventListener('touchstart', this._startHandler, false);\n\n\t\tthis._element.addEventListener('touchend', this._endHandler, false);\n\n\t\tthis._element.addEventListener('touchmove', this._moveHandler, false);\n\n\t\tthis._element.addEventListener('touchcancel', this._cancelHandler, false);\n\t}\n\n\tdetach() {\n\t\tif (this._element) {\n\t\t\tthis._element.removeEventListener('touchstart', this._startHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchend', this._endHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchmove', this._moveHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchcancel', this._cancelHandler, false);\n\t\t}\n\n\t\tthis._element = null;\n\t}\n\n\t_handleTouchStart(e) {\n\t\tthis.fire('touchstart', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchEnd(e) {\n\t\tthis.fire('touchend', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchMove(e) {\n\t\te.preventDefault();\n\t\tthis.fire('touchmove', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchCancel(e) {\n\t\tthis.fire('touchcancel', new TouchEvent(this, e));\n\t}\n\n}\n\nvar log = {\n\twrite: function (text) {\n\t\tconsole.log(text);\n\t},\n\topen: function () {\n\t\tlog.write(\"Powered by PlayCanvas \" + version + \" \" + revision);\n\t},\n\tinfo: function (text) {\n\t\tconsole.info(\"INFO:\t\t\" + text);\n\t},\n\tdebug: function (text) {\n\t\tconsole.debug(\"DEBUG:\t \" + text);\n\t},\n\terror: function (text) {\n\t\tconsole.error(\"ERROR:\t \" + text);\n\t},\n\twarning: function (text) {\n\t\tconsole.warn(\"WARNING: \" + text);\n\t},\n\talert: function (text) {\n\t\tlog.write(\"ALERT:\t \" + text);\n\t\talert(text);\n\t},\n\tassert: function (condition, text) {\n\t\tif (condition === false) {\n\t\t\tlog.write(\"ASSERT:\t\" + text);\n\t\t}\n\t}\n};\n\nstring.endsWith = function (s, subs) {\n\treturn s.endsWith(subs);\n};\n\nstring.startsWith = function (s, subs) {\n\treturn s.startsWith(subs);\n};\n\nvar time = {\n\tnow: now,\n\tTimer: Timer\n};\nObject.defineProperty(Color.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(4);\n\t\t}\n\n\t\tthis._data[0] = this.r;\n\t\tthis._data[1] = this.g;\n\t\tthis._data[2] = this.b;\n\t\tthis._data[3] = this.a;\n\t\treturn this._data;\n\t}\n});\nObject.defineProperty(Color.prototype, \"data3\", {\n\tget: function () {\n\t\tif (!this._data3) {\n\t\t\tthis._data3 = new Float32Array(3);\n\t\t}\n\n\t\tthis._data3[0] = this.r;\n\t\tthis._data3[1] = this.g;\n\t\tthis._data3[2] = this.b;\n\t\treturn this._data3;\n\t}\n});\nfunction inherits(Self, Super) {\n\tvar Temp = function Temp() {};\n\n\tvar Func = function Func(arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n\t\tSuper.call(this, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\t\tSelf.call(this, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\t};\n\n\tFunc._super = Super.prototype;\n\tTemp.prototype = Super.prototype;\n\tFunc.prototype = new Temp();\n\treturn Func;\n}\nfunction makeArray(arr) {\n\treturn Array.prototype.slice.call(arr);\n}\nmath.INV_LOG2 = Math.LOG2E;\nmath.intToBytes = math.intToBytes32;\nmath.bytesToInt = math.bytesToInt32;\nObject.defineProperty(Vec2.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(2);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\treturn this._data;\n\t}\n});\nVec2.prototype.scale = Vec2.prototype.mulScalar;\nObject.defineProperty(Vec3.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(3);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\tthis._data[2] = this.z;\n\t\treturn this._data;\n\t}\n});\nVec3.prototype.scale = Vec3.prototype.mulScalar;\nObject.defineProperty(Vec4.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(4);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\tthis._data[2] = this.z;\n\t\tthis._data[3] = this.w;\n\t\treturn this._data;\n\t}\n});\nVec4.prototype.scale = Vec4.prototype.mulScalar;\nvar shape = {\n\tAabb: BoundingBox,\n\tSphere: BoundingSphere,\n\tPlane: Plane\n};\nBoundingSphere.prototype.intersectRay = BoundingSphere.prototype.intersectsRay;\n\nFrustum.prototype.update = function (projectionMatrix, viewMatrix) {\n\tvar viewProj = new Mat4();\n\tviewProj.mul2(projectionMatrix, viewMatrix);\n\tthis.setFromMat4(viewProj);\n};\n\nvar ELEMENTTYPE_INT8 = TYPE_INT8;\nvar ELEMENTTYPE_UINT8 = TYPE_UINT8;\nvar ELEMENTTYPE_INT16 = TYPE_INT16;\nvar ELEMENTTYPE_UINT16 = TYPE_UINT16;\nvar ELEMENTTYPE_INT32 = TYPE_INT32;\nvar ELEMENTTYPE_UINT32 = TYPE_UINT32;\nvar ELEMENTTYPE_FLOAT32 = TYPE_FLOAT32;\nfunction UnsupportedBrowserError(message) {\n\tthis.name = \"UnsupportedBrowserError\";\n\tthis.message = message || \"\";\n}\nUnsupportedBrowserError.prototype = Error.prototype;\nfunction ContextCreationError(message) {\n\tthis.name = \"ContextCreationError\";\n\tthis.message = message || \"\";\n}\nContextCreationError.prototype = Error.prototype;\nvar gfx = {\n\tADDRESS_CLAMP_TO_EDGE: ADDRESS_CLAMP_TO_EDGE,\n\tADDRESS_MIRRORED_REPEAT: ADDRESS_MIRRORED_REPEAT,\n\tADDRESS_REPEAT: ADDRESS_REPEAT,\n\tBLENDMODE_ZERO: BLENDMODE_ZERO,\n\tBLENDMODE_ONE: BLENDMODE_ONE,\n\tBLENDMODE_SRC_COLOR: BLENDMODE_SRC_COLOR,\n\tBLENDMODE_ONE_MINUS_SRC_COLOR: BLENDMODE_ONE_MINUS_SRC_COLOR,\n\tBLENDMODE_DST_COLOR: BLENDMODE_DST_COLOR,\n\tBLENDMODE_ONE_MINUS_DST_COLOR: BLENDMODE_ONE_MINUS_DST_COLOR,\n\tBLENDMODE_SRC_ALPHA: BLENDMODE_SRC_ALPHA,\n\tBLENDMODE_SRC_ALPHA_SATURATE: BLENDMODE_SRC_ALPHA_SATURATE,\n\tBLENDMODE_ONE_MINUS_SRC_ALPHA: BLENDMODE_ONE_MINUS_SRC_ALPHA,\n\tBLENDMODE_DST_ALPHA: BLENDMODE_DST_ALPHA,\n\tBLENDMODE_ONE_MINUS_DST_ALPHA: BLENDMODE_ONE_MINUS_DST_ALPHA,\n\tBUFFER_STATIC: BUFFER_STATIC,\n\tBUFFER_DYNAMIC: BUFFER_DYNAMIC,\n\tBUFFER_STREAM: BUFFER_STREAM,\n\tCULLFACE_NONE: CULLFACE_NONE,\n\tCULLFACE_BACK: CULLFACE_BACK,\n\tCULLFACE_FRONT: CULLFACE_FRONT,\n\tCULLFACE_FRONTANDBACK: CULLFACE_FRONTANDBACK,\n\tELEMENTTYPE_INT8: TYPE_INT8,\n\tELEMENTTYPE_UINT8: TYPE_UINT8,\n\tELEMENTTYPE_INT16: TYPE_INT16,\n\tELEMENTTYPE_UINT16: TYPE_UINT16,\n\tELEMENTTYPE_INT32: TYPE_INT32,\n\tELEMENTTYPE_UINT32: TYPE_UINT32,\n\tELEMENTTYPE_FLOAT32: TYPE_FLOAT32,\n\tFILTER_NEAREST: FILTER_NEAREST,\n\tFILTER_LINEAR: FILTER_LINEAR,\n\tFILTER_NEAREST_MIPMAP_NEAREST: FILTER_NEAREST_MIPMAP_NEAREST,\n\tFILTER_NEAREST_MIPMAP_LINEAR: FILTER_NEAREST_MIPMAP_LINEAR,\n\tFILTER_LINEAR_MIPMAP_NEAREST: FILTER_LINEAR_MIPMAP_NEAREST,\n\tFILTER_LINEAR_MIPMAP_LINEAR: FILTER_LINEAR_MIPMAP_LINEAR,\n\tINDEXFORMAT_UINT8: INDEXFORMAT_UINT8,\n\tINDEXFORMAT_UINT16: INDEXFORMAT_UINT16,\n\tINDEXFORMAT_UINT32: INDEXFORMAT_UINT32,\n\tPIXELFORMAT_R5_G6_B5: PIXELFORMAT_R5_G6_B5,\n\tPIXELFORMAT_R8_G8_B8: PIXELFORMAT_R8_G8_B8,\n\tPIXELFORMAT_R8_G8_B8_A8: PIXELFORMAT_R8_G8_B8_A8,\n\tPRIMITIVE_POINTS: PRIMITIVE_POINTS,\n\tPRIMITIVE_LINES: PRIMITIVE_LINES,\n\tPRIMITIVE_LINELOOP: PRIMITIVE_LINELOOP,\n\tPRIMITIVE_LINESTRIP: PRIMITIVE_LINESTRIP,\n\tPRIMITIVE_TRIANGLES: PRIMITIVE_TRIANGLES,\n\tPRIMITIVE_TRISTRIP: PRIMITIVE_TRISTRIP,\n\tPRIMITIVE_TRIFAN: PRIMITIVE_TRIFAN,\n\tSEMANTIC_POSITION: SEMANTIC_POSITION,\n\tSEMANTIC_NORMAL: SEMANTIC_NORMAL,\n\tSEMANTIC_COLOR: SEMANTIC_COLOR,\n\tSEMANTIC_TEXCOORD: SEMANTIC_TEXCOORD,\n\tSEMANTIC_TEXCOORD0: SEMANTIC_TEXCOORD0,\n\tSEMANTIC_TEXCOORD1: SEMANTIC_TEXCOORD1,\n\tSEMANTIC_ATTR0: SEMANTIC_ATTR0,\n\tSEMANTIC_ATTR1: SEMANTIC_ATTR1,\n\tSEMANTIC_ATTR2: SEMANTIC_ATTR2,\n\tSEMANTIC_ATTR3: SEMANTIC_ATTR3,\n\tTEXTURELOCK_READ: TEXTURELOCK_READ,\n\tTEXTURELOCK_WRITE: TEXTURELOCK_WRITE,\n\tdrawQuadWithShader: drawQuadWithShader,\n\tprogramlib: programlib,\n\tshaderChunks: shaderChunks,\n\tContextCreationError: ContextCreationError,\n\tDevice: GraphicsDevice,\n\tIndexBuffer: IndexBuffer,\n\tProgramLibrary: ProgramLibrary,\n\tRenderTarget: RenderTarget,\n\tScopeId: ScopeId,\n\tShader: Shader,\n\tShaderInput: ShaderInput,\n\tTexture: Texture,\n\tUnsupportedBrowserError: UnsupportedBrowserError,\n\tVertexBuffer: VertexBuffer,\n\tVertexFormat: VertexFormat,\n\tVertexIterator: VertexIterator\n};\nvar posteffect = {\n\tcreateFullscreenQuad: createFullscreenQuad,\n\tdrawFullscreenQuad: drawFullscreenQuad,\n\tPostEffect: PostEffect$1,\n\tPostEffectQueue: PostEffectQueue\n};\nObject.defineProperty(shaderChunks, \"transformSkinnedVS\", {\n\tget: function () {\n\t\treturn \"#define SKIN\\n\" + shaderChunks.transformVS;\n\t}\n});\nObject.defineProperties(Texture.prototype, {\n\trgbm: {\n\t\tget: function () {\n\t\t\treturn this.type === TEXTURETYPE_RGBM;\n\t\t},\n\t\tset: function (rgbm) {\n\t\t\tthis.type = rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t}\n\t},\n\tswizzleGGGR: {\n\t\tget: function () {\n\t\t\treturn this.type === TEXTURETYPE_SWIZZLEGGGR;\n\t\t},\n\t\tset: function (swizzleGGGR) {\n\t\t\tthis.type = swizzleGGGR ? TEXTURETYPE_SWIZZLEGGGR : TEXTURETYPE_DEFAULT;\n\t\t}\n\t}\n});\nvar PhongMaterial = StandardMaterial;\nvar scene = {\n\tpartitionSkin: partitionSkin,\n\tprocedural: {\n\t\tcalculateTangents: calculateTangents,\n\t\tcreateMesh: createMesh$1,\n\t\tcreateTorus: createTorus,\n\t\tcreateCylinder: createCylinder,\n\t\tcreateCapsule: createCapsule,\n\t\tcreateCone: createCone,\n\t\tcreateSphere: createSphere,\n\t\tcreatePlane: createPlane,\n\t\tcreateBox: createBox\n\t},\n\tBasicMaterial: BasicMaterial,\n\tCommand: Command,\n\tDepthMaterial: DepthMaterial,\n\tForwardRenderer: ForwardRenderer,\n\tGraphNode: GraphNode,\n\tMaterial: Material,\n\tMesh: Mesh,\n\tMeshInstance: MeshInstance,\n\tModel: Model,\n\tParticleEmitter: ParticleEmitter,\n\tPhongMaterial: StandardMaterial,\n\tPicker: Picker,\n\tProjection: {\n\t\tORTHOGRAPHIC: PROJECTION_ORTHOGRAPHIC,\n\t\tPERSPECTIVE: PROJECTION_PERSPECTIVE\n\t},\n\tScene: Scene,\n\tSkin: Skin,\n\tSkinInstance: SkinInstance\n};\nObject.defineProperty(Batch.prototype, 'model', {\n\tget: function () {\n\t\treturn null;\n\t}\n});\n\nMorph.prototype.getTarget = function (index) {\n\treturn this.targets[index];\n};\n\nGraphNode.prototype._dirtify = function (local) {\n\tif (local) this._dirtifyLocal();else this._dirtifyWorld();\n};\n\nGraphNode.prototype.addLabel = function (label) {\n\tthis._labels[label] = true;\n};\n\nGraphNode.prototype.getLabels = function () {\n\treturn Object.keys(this._labels);\n};\n\nGraphNode.prototype.hasLabel = function (label) {\n\treturn !!this._labels[label];\n};\n\nGraphNode.prototype.removeLabel = function (label) {\n\tdelete this._labels[label];\n};\n\nGraphNode.prototype.findByLabel = function (label, results) {\n\tvar i,\n\t\t\tlength = this._children.length;\n\tresults = results || [];\n\n\tif (this.hasLabel(label)) {\n\t\tresults.push(this);\n\t}\n\n\tfor (i = 0; i < length; ++i) {\n\t\tresults = this._children[i].findByLabel(label, results);\n\t}\n\n\treturn results;\n};\n\nGraphNode.prototype.getChildren = function () {\n\treturn this.children;\n};\n\nGraphNode.prototype.getName = function () {\n\treturn this.name;\n};\n\nGraphNode.prototype.getPath = function () {\n\treturn this.path;\n};\n\nGraphNode.prototype.getRoot = function () {\n\treturn this.root;\n};\n\nGraphNode.prototype.getParent = function () {\n\treturn this.parent;\n};\n\nGraphNode.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nMaterial.prototype.getName = function () {\n\treturn this.name;\n};\n\nMaterial.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nMaterial.prototype.getShader = function () {\n\treturn this.shader;\n};\n\nMaterial.prototype.setShader = function (shader) {\n\tthis.shader = shader;\n};\n\nvar anim = {\n\tAnimation: Animation,\n\tKey: Key,\n\tNode: Node,\n\tSkeleton: Skeleton\n};\n\nAnimation.prototype.getDuration = function () {\n\treturn this.duration;\n};\n\nAnimation.prototype.getName = function () {\n\treturn this.name;\n};\n\nAnimation.prototype.getNodes = function () {\n\treturn this.nodes;\n};\n\nAnimation.prototype.setDuration = function (duration) {\n\tthis.duration = duration;\n};\n\nAnimation.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nSkeleton.prototype.getAnimation = function () {\n\treturn this.animation;\n};\n\nSkeleton.prototype.getCurrentTime = function () {\n\treturn this.currentTime;\n};\n\nSkeleton.prototype.getLooping = function () {\n\treturn this.looping;\n};\n\nSkeleton.prototype.getNumNodes = function () {\n\treturn this.numNodes;\n};\n\nSkeleton.prototype.setAnimation = function (animation) {\n\tthis.animation = animation;\n};\n\nSkeleton.prototype.setCurrentTime = function (time) {\n\tthis.currentTime = time;\n};\n\nSkeleton.prototype.setLooping = function (looping) {\n\tthis.looping = looping;\n};\n\nvar audio = {\n\tAudioManager: SoundManager,\n\tChannel: Channel,\n\tChannel3d: Channel3d,\n\tListener: Listener,\n\tSound: Sound\n};\n\nSoundManager.prototype.getListener = function () {\n\treturn this.listener;\n};\n\nSoundManager.prototype.getVolume = function () {\n\treturn this.volume;\n};\n\nSoundManager.prototype.setVolume = function (volume) {\n\tthis.volume = volume;\n};\n\nvar asset = {\n\tASSET_ANIMATION: 'animation',\n\tASSET_AUDIO: 'audio',\n\tASSET_IMAGE: 'image',\n\tASSET_JSON: 'json',\n\tASSET_MODEL: 'model',\n\tASSET_MATERIAL: 'material',\n\tASSET_TEXT: 'text',\n\tASSET_TEXTURE: 'texture',\n\tASSET_CUBEMAP: 'cubemap',\n\tASSET_SCRIPT: 'script'\n};\n\nAssetRegistry.prototype.getAssetById = function (id) {\n\treturn this.get(id);\n};\n\nObject.defineProperty(XrInputSource.prototype, 'ray', {\n\tget: function () {\n\t\treturn this._rayLocal;\n\t}\n});\nObject.defineProperty(XrInputSource.prototype, 'position', {\n\tget: function () {\n\t\treturn this._localPosition;\n\t}\n});\nObject.defineProperty(XrInputSource.prototype, 'rotation', {\n\tget: function () {\n\t\treturn this._localRotation;\n\t}\n});\nvar input = {\n\tgetTouchTargetCoords: getTouchTargetCoords,\n\tController: Controller,\n\tGamePads: GamePads,\n\tKeyboard: Keyboard,\n\tKeyboardEvent: KeyboardEvent,\n\tMouse: Mouse,\n\tMouseEvent: MouseEvent,\n\tTouch: Touch,\n\tTouchDevice: TouchDevice,\n\tTouchEvent: TouchEvent\n};\nObject.defineProperty(ElementInput.prototype, 'wheel', {\n\tget: function () {\n\t\treturn this.wheelDelta * -2;\n\t}\n});\nObject.defineProperty(MouseEvent.prototype, 'wheel', {\n\tget: function () {\n\t\treturn this.wheelDelta * -2;\n\t}\n});\nvar RIGIDBODY_TYPE_STATIC = BODYTYPE_STATIC;\nvar RIGIDBODY_TYPE_DYNAMIC = BODYTYPE_DYNAMIC;\nvar RIGIDBODY_TYPE_KINEMATIC = BODYTYPE_KINEMATIC;\nvar RIGIDBODY_CF_STATIC_OBJECT = BODYFLAG_STATIC_OBJECT;\nvar RIGIDBODY_CF_KINEMATIC_OBJECT = BODYFLAG_KINEMATIC_OBJECT;\nvar RIGIDBODY_CF_NORESPONSE_OBJECT = BODYFLAG_NORESPONSE_OBJECT;\nvar RIGIDBODY_ACTIVE_TAG = BODYSTATE_ACTIVE_TAG;\nvar RIGIDBODY_ISLAND_SLEEPING = BODYSTATE_ISLAND_SLEEPING;\nvar RIGIDBODY_WANTS_DEACTIVATION = BODYSTATE_WANTS_DEACTIVATION;\nvar RIGIDBODY_DISABLE_DEACTIVATION = BODYSTATE_DISABLE_DEACTIVATION;\nvar RIGIDBODY_DISABLE_SIMULATION = BODYSTATE_DISABLE_SIMULATION;\nvar fw = {\n\tApplication: Application,\n\tComponent: Component,\n\tComponentSystem: ComponentSystem,\n\tEntity: Entity,\n\tFillMode: {\n\t\tNONE: FILLMODE_NONE,\n\t\tFILL_WINDOW: FILLMODE_FILL_WINDOW,\n\t\tKEEP_ASPECT: FILLMODE_KEEP_ASPECT\n\t},\n\tResolutionMode: {\n\t\tAUTO: RESOLUTION_AUTO,\n\t\tFIXED: RESOLUTION_FIXED\n\t}\n};\n\nApplication.prototype.isFullscreen = function () {\n\treturn !!document.fullscreenElement;\n};\n\nApplication.prototype.enableFullscreen = function (element, success, error) {\n\telement = element || this.graphicsDevice.canvas;\n\n\tvar s = function s() {\n\t\tsuccess();\n\t\tdocument.removeEventListener('fullscreenchange', s);\n\t};\n\n\tvar e = function e() {\n\t\terror();\n\t\tdocument.removeEventListener('fullscreenerror', e);\n\t};\n\n\tif (success) {\n\t\tdocument.addEventListener('fullscreenchange', s, false);\n\t}\n\n\tif (error) {\n\t\tdocument.addEventListener('fullscreenerror', e, false);\n\t}\n\n\tif (element.requestFullscreen) {\n\t\telement.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t} else {\n\t\terror();\n\t}\n};\n\nApplication.prototype.disableFullscreen = function (success) {\n\tvar s = function s() {\n\t\tsuccess();\n\t\tdocument.removeEventListener('fullscreenchange', s);\n\t};\n\n\tif (success) {\n\t\tdocument.addEventListener('fullscreenchange', s, false);\n\t}\n\n\tdocument.exitFullscreen();\n};\n\nApplication.prototype.getSceneUrl = function (name) {\n\tvar entry = this.scenes.find(name);\n\n\tif (entry) {\n\t\treturn entry.url;\n\t}\n\n\treturn null;\n};\n\nApplication.prototype.loadScene = function (url, callback) {\n\tthis.scenes.loadScene(url, callback);\n};\n\nApplication.prototype.loadSceneHierarchy = function (url, callback) {\n\tthis.scenes.loadSceneHierarchy(url, callback);\n};\n\nApplication.prototype.loadSceneSettings = function (url, callback) {\n\tthis.scenes.loadSceneSettings(url, callback);\n};\n\nObject.defineProperty(CameraComponent.prototype, \"node\", {\n\tget: function () {\n\t\treturn this.entity;\n\t}\n});\nObject.defineProperty(LightComponent.prototype, \"enable\", {\n\tget: function () {\n\t\treturn this.enabled;\n\t},\n\tset: function (value) {\n\t\tthis.enabled = value;\n\t}\n});\n\nModelComponent.prototype.setVisible = function (visible) {\n\tthis.enabled = visible;\n};\n\nObject.defineProperty(ModelComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\treturn null;\n\t},\n\tset: function (type) {}\n});\nObject.defineProperty(RenderComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\treturn null;\n\t},\n\tset: function (type) {}\n});\nObject.defineProperty(RigidBodyComponent.prototype, \"bodyType\", {\n\tget: function () {\n\t\treturn this.type;\n\t},\n\tset: function (type) {\n\t\tthis.type = type;\n\t}\n});\n\nRigidBodyComponent.prototype.syncBodyToEntity = function () {\n\tthis._updateDynamic();\n};\n\nRigidBodyComponentSystem.prototype.setGravity = function () {\n\tif (arguments.length === 1) {\n\t\tthis.gravity.copy(arguments[0]);\n\t} else {\n\t\tthis.gravity.set(arguments[0], arguments[1], arguments[2]);\n\t}\n};\n\nfunction basisSetDownloadConfig(glueUrl, wasmUrl, fallbackUrl) {\n\tbasisInitialize({\n\t\tglueUrl: glueUrl,\n\t\twasmUrl: wasmUrl,\n\t\tfallbackUrl: fallbackUrl,\n\t\tlazyInit: true\n\t});\n}\n\nexport { ABSOLUTE_URL, ACTION_GAMEPAD, ACTION_KEYBOARD, ACTION_MOUSE, ADDRESS_CLAMP_TO_EDGE, ADDRESS_MIRRORED_REPEAT, ADDRESS_REPEAT, ANIM_BLEND_1D, ANIM_BLEND_2D_CARTESIAN, ANIM_BLEND_2D_DIRECTIONAL, ANIM_BLEND_DIRECT, ANIM_CONTROL_STATES, ANIM_EQUAL_TO, ANIM_GREATER_THAN, ANIM_GREATER_THAN_EQUAL_TO, ANIM_INTERRUPTION_NEXT, ANIM_INTERRUPTION_NEXT_PREV, ANIM_INTERRUPTION_NONE, ANIM_INTERRUPTION_PREV, ANIM_INTERRUPTION_PREV_NEXT, ANIM_LESS_THAN, ANIM_LESS_THAN_EQUAL_TO, ANIM_NOT_EQUAL_TO, ANIM_PARAMETER_BOOLEAN, ANIM_PARAMETER_FLOAT, ANIM_PARAMETER_INTEGER, ANIM_PARAMETER_TRIGGER, ANIM_STATE_ANY, ANIM_STATE_END, ANIM_STATE_START, ASPECT_AUTO, ASPECT_MANUAL, ASSET_ANIMATION, ASSET_AUDIO, ASSET_CONTAINER, ASSET_CSS, ASSET_CUBEMAP, ASSET_HTML, ASSET_IMAGE, ASSET_JSON, ASSET_MATERIAL, ASSET_MODEL, ASSET_SCRIPT, ASSET_SHADER, ASSET_TEXT, ASSET_TEXTURE, AXIS_KEY, AXIS_MOUSE_X, AXIS_MOUSE_Y, AXIS_PAD_L_X, AXIS_PAD_L_Y, AXIS_PAD_R_X, AXIS_PAD_R_Y, AnimBinder, AnimClip, AnimClipHandler, AnimComponent, AnimComponentLayer, AnimComponentSystem, AnimController, AnimCurve, AnimData, AnimEvaluator, AnimEvents, AnimSnapshot, AnimStateGraph, AnimStateGraphHandler, AnimTarget, AnimTrack, Animation, AnimationComponent, AnimationComponentSystem, AnimationHandler, Application, Asset, AssetListLoader, AssetReference, AssetRegistry, AudioHandler, AudioListenerComponent, AudioListenerComponentSystem, AudioSourceComponent, AudioSourceComponentSystem, BAKE_COLOR, BAKE_COLORDIR, BLENDEQUATION_ADD, BLENDEQUATION_MAX, BLENDEQUATION_MIN, BLENDEQUATION_REVERSE_SUBTRACT, BLENDEQUATION_SUBTRACT, BLENDMODE_DST_ALPHA, BLENDMODE_DST_COLOR, BLENDMODE_ONE, BLENDMODE_ONE_MINUS_DST_ALPHA, BLENDMODE_ONE_MINUS_DST_COLOR, BLENDMODE_ONE_MINUS_SRC_ALPHA, BLENDMODE_ONE_MINUS_SRC_COLOR, BLENDMODE_SRC_ALPHA, BLENDMODE_SRC_ALPHA_SATURATE, BLENDMODE_SRC_COLOR, BLENDMODE_ZERO, BLEND_ADDITIVE, BLEND_ADDITIVEALPHA, BLEND_MAX, BLEND_MIN, BLEND_MULTIPLICATIVE, BLEND_MULTIPLICATIVE2X, BLEND_NONE, BLEND_NORMAL, BLEND_PREMULTIPLIED, BLEND_SCREEN, BLEND_SUBTRACTIVE, BLUR_BOX, BLUR_GAUSSIAN, BODYFLAG_KINEMATIC_OBJECT, BODYFLAG_NORESPONSE_OBJECT, BODYFLAG_STATIC_OBJECT, BODYGROUP_DEFAULT, BODYGROUP_DYNAMIC, BODYGROUP_ENGINE_1, BODYGROUP_ENGINE_2, BODYGROUP_ENGINE_3, BODYGROUP_KINEMATIC, BODYGROUP_NONE, BODYGROUP_STATIC, BODYGROUP_TRIGGER, BODYGROUP_USER_1, BODYGROUP_USER_2, BODYGROUP_USER_3, BODYGROUP_USER_4, BODYGROUP_USER_5, BODYGROUP_USER_6, BODYGROUP_USER_7, BODYGROUP_USER_8, BODYMASK_ALL, BODYMASK_NONE, BODYMASK_NOT_STATIC, BODYMASK_NOT_STATIC_KINEMATIC, BODYMASK_STATIC, BODYSTATE_ACTIVE_TAG, BODYSTATE_DISABLE_DEACTIVATION, BODYSTATE_DISABLE_SIMULATION, BODYSTATE_ISLAND_SLEEPING, BODYSTATE_WANTS_DEACTIVATION, BODYTYPE_DYNAMIC, BODYTYPE_KINEMATIC, BODYTYPE_STATIC, BUFFER_DYNAMIC, BUFFER_GPUDYNAMIC, BUFFER_STATIC, BUFFER_STREAM, BUTTON_TRANSITION_MODE_SPRITE_CHANGE, BUTTON_TRANSITION_MODE_TINT, BasicMaterial, Batch, BatchGroup, BatchManager, BinaryHandler, BoundingBox, BoundingSphere, Bundle, BundleHandler, BundleRegistry, ButtonComponent, ButtonComponentSystem, CLEARFLAG_COLOR, CLEARFLAG_DEPTH, CLEARFLAG_STENCIL, COMPUPDATED_BLEND, COMPUPDATED_CAMERAS, COMPUPDATED_INSTANCES, COMPUPDATED_LIGHTS, CUBEFACE_NEGX, CUBEFACE_NEGY, CUBEFACE_NEGZ, CUBEFACE_POSX, CUBEFACE_POSY, CUBEFACE_POSZ, CUBEPROJ_BOX, CUBEPROJ_NONE, CULLFACE_BACK, CULLFACE_FRONT, CULLFACE_FRONTANDBACK, CULLFACE_NONE, CURVE_CARDINAL, CURVE_CATMULL, CURVE_LINEAR, CURVE_SMOOTHSTEP, CURVE_SPLINE, CURVE_STEP, Camera, CameraComponent, CameraComponentSystem, CanvasFont, CollisionComponent, CollisionComponentSystem, Color, Command, Component, ComponentSystem, ComponentSystemRegistry, ContactPoint, ContactResult, ContainerHandler, ContainerResource, ContextCreationError, Controller, CssHandler, CubemapHandler, Curve, CurveSet, DETAILMODE_ADD, DETAILMODE_MAX, DETAILMODE_MIN, DETAILMODE_MUL, DETAILMODE_OVERLAY, DETAILMODE_SCREEN, DISTANCE_EXPONENTIAL, DISTANCE_INVERSE, DISTANCE_LINEAR, DefaultAnimBinder, DepthMaterial, ELEMENTTYPE_FLOAT32, ELEMENTTYPE_GROUP, ELEMENTTYPE_IMAGE, ELEMENTTYPE_INT16, ELEMENTTYPE_INT32, ELEMENTTYPE_INT8, ELEMENTTYPE_TEXT, ELEMENTTYPE_UINT16, ELEMENTTYPE_UINT32, ELEMENTTYPE_UINT8, EMITTERSHAPE_BOX, EMITTERSHAPE_SPHERE, EVENT_KEYDOWN, EVENT_KEYUP, EVENT_MOUSEDOWN, EVENT_MOUSEMOVE, EVENT_MOUSEUP, EVENT_MOUSEWHEEL, EVENT_SELECT, EVENT_SELECTEND, EVENT_SELECTSTART, EVENT_TOUCHCANCEL, EVENT_TOUCHEND, EVENT_TOUCHMOVE, EVENT_TOUCHSTART, ElementComponent, ElementComponentSystem, ElementDragHelper, ElementInput, ElementInputEvent, ElementMouseEvent, ElementSelectEvent, ElementTouchEvent, Entity, EntityReference, EventHandler, FILLMODE_FILL_WINDOW, FILLMODE_KEEP_ASPECT, FILLMODE_NONE, FILTER_LINEAR, FILTER_LINEAR_MIPMAP_LINEAR, FILTER_LINEAR_MIPMAP_NEAREST, FILTER_NEAREST, FILTER_NEAREST_MIPMAP_LINEAR, FILTER_NEAREST_MIPMAP_NEAREST, FITTING_BOTH, FITTING_NONE, FITTING_SHRINK, FITTING_STRETCH, FOG_EXP, FOG_EXP2, FOG_LINEAR, FOG_NONE, FONT_BITMAP, FONT_MSDF, FRESNEL_NONE, FRESNEL_SCHLICK, FUNC_ALWAYS, FUNC_EQUAL, FUNC_GREATER, FUNC_GREATEREQUAL, FUNC_LESS, FUNC_LESSEQUAL, FUNC_NEVER, FUNC_NOTEQUAL, FolderHandler, Font, FontHandler, ForwardRenderer, Frustum, GAMMA_NONE, GAMMA_SRGB, GAMMA_SRGBFAST, GAMMA_SRGBHDR, GamePads, GraphNode, GraphicsDevice, HierarchyHandler, HtmlHandler, Http, I18n, INDEXFORMAT_UINT16, INDEXFORMAT_UINT32, INDEXFORMAT_UINT8, INTERPOLATION_CUBIC, INTERPOLATION_LINEAR, INTERPOLATION_STEP, ImageElement, IndexBuffer, IndexedList, JointComponent, JointComponentSystem, JsonHandler, JsonStandardMaterialParser, KEY_0, KEY_1, KEY_2, KEY_3, KEY_4, KEY_5, KEY_6, KEY_7, KEY_8, KEY_9, KEY_A, KEY_ADD, KEY_ALT, KEY_B, KEY_BACKSPACE, KEY_BACK_SLASH, KEY_C, KEY_CAPS_LOCK, KEY_CLOSE_BRACKET, KEY_COMMA, KEY_CONTEXT_MENU, KEY_CONTROL, KEY_D, KEY_DECIMAL, KEY_DELETE, KEY_DIVIDE, KEY_DOWN, KEY_E, KEY_END, KEY_ENTER, KEY_EQUAL, KEY_ESCAPE, KEY_F, KEY_F1, KEY_F10, KEY_F11, KEY_F12, KEY_F2, KEY_F3, KEY_F4, KEY_F5, KEY_F6, KEY_F7, KEY_F8, KEY_F9, KEY_G, KEY_H, KEY_HOME, KEY_I, KEY_INSERT, KEY_J, KEY_K, KEY_L, KEY_LEFT, KEY_M, KEY_META, KEY_MULTIPLY, KEY_N, KEY_NUMPAD_0, KEY_NUMPAD_1, KEY_NUMPAD_2, KEY_NUMPAD_3, KEY_NUMPAD_4, KEY_NUMPAD_5, KEY_NUMPAD_6, KEY_NUMPAD_7, KEY_NUMPAD_8, KEY_NUMPAD_9, KEY_O, KEY_OPEN_BRACKET, KEY_P, KEY_PAGE_DOWN, KEY_PAGE_UP, KEY_PAUSE, KEY_PERIOD, KEY_PRINT_SCREEN, KEY_Q, KEY_R, KEY_RETURN, KEY_RIGHT, KEY_S, KEY_SEMICOLON, KEY_SEPARATOR, KEY_SHIFT, KEY_SLASH, KEY_SPACE, KEY_SUBTRACT, KEY_T, KEY_TAB, KEY_U, KEY_UP, KEY_V, KEY_W, KEY_WINDOWS, KEY_X, KEY_Y, KEY_Z, Key, Keyboard, KeyboardEvent, LAYERID_DEPTH, LAYERID_IMMEDIATE, LAYERID_SKYBOX, LAYERID_UI, LAYERID_WORLD, LAYER_FX, LAYER_GIZMO, LAYER_HUD, LAYER_WORLD, LIGHTFALLOFF_INVERSESQUARED, LIGHTFALLOFF_LINEAR, LIGHTSHAPE_DISK, LIGHTSHAPE_PUNCTUAL, LIGHTSHAPE_RECT, LIGHTSHAPE_SPHERE, LIGHTTYPE_DIRECTIONAL, LIGHTTYPE_OMNI, LIGHTTYPE_POINT, LIGHTTYPE_SPOT, LINEBATCH_GIZMO, LINEBATCH_OVERLAY, LINEBATCH_WORLD, Layer, LayerComposition, LayoutCalculator, LayoutChildComponent, LayoutChildComponentSystem, LayoutGroupComponent, LayoutGroupComponentSystem, Light, LightComponent, LightComponentSystem, Lightmapper, LocalizedAsset, MASK_BAKED, MASK_DYNAMIC, MASK_LIGHTMAP, MOTION_FREE, MOTION_LIMITED, MOTION_LOCKED, MOUSEBUTTON_LEFT, MOUSEBUTTON_MIDDLE, MOUSEBUTTON_NONE, MOUSEBUTTON_RIGHT, Mat3, Mat4, Material, MaterialHandler, Mesh, MeshInstance, Model, ModelComponent, ModelComponentSystem, ModelHandler, Morph, MorphInstance, MorphTarget, Mouse, MouseEvent, Node, ORIENTATION_HORIZONTAL, ORIENTATION_VERTICAL, OrientedBox, PAD_1, PAD_2, PAD_3, PAD_4, PAD_DOWN, PAD_FACE_1, PAD_FACE_2, PAD_FACE_3, PAD_FACE_4, PAD_LEFT, PAD_L_SHOULDER_1, PAD_L_SHOULDER_2, PAD_L_STICK_BUTTON, PAD_L_STICK_X, PAD_L_STICK_Y, PAD_RIGHT, PAD_R_SHOULDER_1, PAD_R_SHOULDER_2, PAD_R_STICK_BUTTON, PAD_R_STICK_X, PAD_R_STICK_Y, PAD_SELECT, PAD_START, PAD_UP, PAD_VENDOR, PARTICLEMODE_CPU, PARTICLEMODE_GPU, PARTICLEORIENTATION_EMITTER, PARTICLEORIENTATION_SCREEN, PARTICLEORIENTATION_WORLD, PARTICLESORT_DISTANCE, PARTICLESORT_NEWER_FIRST, PARTICLESORT_NONE, PARTICLESORT_OLDER_FIRST, PIXELFORMAT_111110F, PIXELFORMAT_A8, PIXELFORMAT_ASTC_4x4, PIXELFORMAT_ATC_RGB, PIXELFORMAT_ATC_RGBA, PIXELFORMAT_DEPTH, PIXELFORMAT_DEPTHSTENCIL, PIXELFORMAT_DXT1, PIXELFORMAT_DXT3, PIXELFORMAT_DXT5, PIXELFORMAT_ETC1, PIXELFORMAT_ETC2_RGB, PIXELFORMAT_ETC2_RGBA, PIXELFORMAT_L8, PIXELFORMAT_L8_A8, PIXELFORMAT_PVRTC_2BPP_RGBA_1, PIXELFORMAT_PVRTC_2BPP_RGB_1, PIXELFORMAT_PVRTC_4BPP_RGBA_1, PIXELFORMAT_PVRTC_4BPP_RGB_1, PIXELFORMAT_R32F, PIXELFORMAT_R4_G4_B4_A4, PIXELFORMAT_R5_G5_B5_A1, PIXELFORMAT_R5_G6_B5, PIXELFORMAT_R8_G8_B8, PIXELFORMAT_R8_G8_B8_A8, PIXELFORMAT_RGB16F, PIXELFORMAT_RGB32F, PIXELFORMAT_RGBA16F, PIXELFORMAT_RGBA32F, PIXELFORMAT_SRGB, PIXELFORMAT_SRGBA, PRIMITIVE_LINELOOP, PRIMITIVE_LINES, PRIMITIVE_LINESTRIP, PRIMITIVE_POINTS, PRIMITIVE_TRIANGLES, PRIMITIVE_TRIFAN, PRIMITIVE_TRISTRIP, PROJECTION_ORTHOGRAPHIC, PROJECTION_PERSPECTIVE, ParticleEmitter, ParticleSystemComponent, ParticleSystemComponentSystem, PhongMaterial, Picker, Plane, PostEffect$1 as PostEffect, PostEffectQueue, ProgramLibrary, Quat, RENDERSTYLE_POINTS, RENDERSTYLE_SOLID, RENDERSTYLE_WIREFRAME, RESOLUTION_AUTO, RESOLUTION_FIXED, RIGIDBODY_ACTIVE_TAG, RIGIDBODY_CF_KINEMATIC_OBJECT, RIGIDBODY_CF_NORESPONSE_OBJECT, RIGIDBODY_CF_STATIC_OBJECT, RIGIDBODY_DISABLE_DEACTIVATION, RIGIDBODY_DISABLE_SIMULATION, RIGIDBODY_ISLAND_SLEEPING, RIGIDBODY_TYPE_DYNAMIC, RIGIDBODY_TYPE_KINEMATIC, RIGIDBODY_TYPE_STATIC, RIGIDBODY_WANTS_DEACTIVATION, Ray, RaycastResult, RenderComponent, RenderComponentSystem, RenderHandler, RenderTarget, ResourceHandler, ResourceLoader, RigidBodyComponent, RigidBodyComponentSystem, SCALEMODE_BLEND, SCALEMODE_NONE, SCROLLBAR_VISIBILITY_SHOW_ALWAYS, SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED, SCROLL_MODE_BOUNCE, SCROLL_MODE_CLAMP, SCROLL_MODE_INFINITE, SEMANTIC_ATTR, SEMANTIC_ATTR0, SEMANTIC_ATTR1, SEMANTIC_ATTR10, SEMANTIC_ATTR11, SEMANTIC_ATTR12, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15, SEMANTIC_ATTR2, SEMANTIC_ATTR3, SEMANTIC_ATTR4, SEMANTIC_ATTR5, SEMANTIC_ATTR6, SEMANTIC_ATTR7, SEMANTIC_ATTR8, SEMANTIC_ATTR9, SEMANTIC_BLENDINDICES, SEMANTIC_BLENDWEIGHT, SEMANTIC_COLOR, SEMANTIC_NORMAL, SEMANTIC_POSITION, SEMANTIC_TANGENT, SEMANTIC_TEXCOORD, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1, SEMANTIC_TEXCOORD2, SEMANTIC_TEXCOORD3, SEMANTIC_TEXCOORD4, SEMANTIC_TEXCOORD5, SEMANTIC_TEXCOORD6, SEMANTIC_TEXCOORD7, SHADERDEF_DIRLM, SHADERDEF_INSTANCING, SHADERDEF_LM, SHADERDEF_MORPH_NORMAL, SHADERDEF_MORPH_POSITION, SHADERDEF_MORPH_TEXTURE_BASED, SHADERDEF_NOSHADOW, SHADERDEF_SCREENSPACE, SHADERDEF_SKIN, SHADERDEF_TANGENTS, SHADERDEF_UV0, SHADERDEF_UV1, SHADERDEF_VCOLOR, SHADERTAG_MATERIAL, SHADER_DEPTH, SHADER_FORWARD, SHADER_FORWARDHDR, SHADER_PICK, SHADER_SHADOW, SHADOWUPDATE_NONE, SHADOWUPDATE_REALTIME, SHADOWUPDATE_THISFRAME, SHADOW_COUNT, SHADOW_DEPTH, SHADOW_PCF3, SHADOW_PCF5, SHADOW_VSM16, SHADOW_VSM32, SHADOW_VSM8, SORTKEY_DEPTH, SORTKEY_FORWARD, SORTMODE_BACK2FRONT, SORTMODE_CUSTOM, SORTMODE_FRONT2BACK, SORTMODE_MANUAL, SORTMODE_MATERIALMESH, SORTMODE_NONE, SPECOCC_AO, SPECOCC_GLOSSDEPENDENT, SPECOCC_NONE, SPECULAR_BLINN, SPECULAR_PHONG, SPRITETYPE_ANIMATED, SPRITETYPE_SIMPLE, SPRITE_RENDERMODE_SIMPLE, SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED, STENCILOP_DECREMENT, STENCILOP_DECREMENTWRAP, STENCILOP_INCREMENT, STENCILOP_INCREMENTWRAP, STENCILOP_INVERT, STENCILOP_KEEP, STENCILOP_REPLACE, STENCILOP_ZERO, Scene, SceneHandler, SceneRegistry, SceneRegistryItem, SceneSettingsHandler, ScopeId, ScopeSpace, ScreenComponent, ScreenComponentSystem, ScriptAttributes, ScriptComponent, ScriptComponentSystem, ScriptHandler, ScriptLegacyComponent, ScriptLegacyComponentSystem, ScriptRegistry, ScriptType, ScrollViewComponent, ScrollViewComponentSystem, ScrollbarComponent, ScrollbarComponentSystem, Shader, ShaderHandler, SingleContactResult, Skeleton, Skin, SkinBatchInstance, SkinInstance, SortedLoopArray, Sound, SoundComponent, SoundComponentSystem, SoundInstance, SoundInstance3d, SoundManager, SoundSlot, Sprite, SpriteAnimationClip, SpriteComponent, SpriteComponentSystem, SpriteHandler, StandardMaterial, StencilParameters, TEXHINT_ASSET, TEXHINT_LIGHTMAP, TEXHINT_NONE, TEXHINT_SHADOWMAP, TEXTURELOCK_READ, TEXTURELOCK_WRITE, TEXTUREPROJECTION_CUBE, TEXTUREPROJECTION_EQUIRECT, TEXTUREPROJECTION_NONE, TEXTUREPROJECTION_OCTAHEDRAL, TEXTURETYPE_DEFAULT, TEXTURETYPE_RGBE, TEXTURETYPE_RGBM, TEXTURETYPE_SWIZZLEGGGR, TONEMAP_ACES, TONEMAP_ACES2, TONEMAP_FILMIC, TONEMAP_HEJL, TONEMAP_LINEAR, TYPE_FLOAT32, TYPE_INT16, TYPE_INT32, TYPE_INT8, TYPE_UINT16, TYPE_UINT32, TYPE_UINT8, Tags, Template, TemplateHandler, TextElement, TextHandler, Texture, TextureAtlas, TextureAtlasHandler, TextureHandler, TextureParser, Timer, Touch, TouchDevice, TouchEvent, TransformFeedback, UNIFORMTYPE_BOOL, UNIFORMTYPE_BVEC2, UNIFORMTYPE_BVEC3, UNIFORMTYPE_BVEC4, UNIFORMTYPE_FLOAT, UNIFORMTYPE_FLOATARRAY, UNIFORMTYPE_INT, UNIFORMTYPE_IVEC2, UNIFORMTYPE_IVEC3, UNIFORMTYPE_IVEC4, UNIFORMTYPE_MAT2, UNIFORMTYPE_MAT3, UNIFORMTYPE_MAT4, UNIFORMTYPE_TEXTURE2D, UNIFORMTYPE_TEXTURE2D_SHADOW, UNIFORMTYPE_TEXTURE3D, UNIFORMTYPE_TEXTURECUBE, UNIFORMTYPE_TEXTURECUBE_SHADOW, UNIFORMTYPE_VEC2, UNIFORMTYPE_VEC2ARRAY, UNIFORMTYPE_VEC3, UNIFORMTYPE_VEC3ARRAY, UNIFORMTYPE_VEC4, UNIFORMTYPE_VEC4ARRAY, URI, UnsupportedBrowserError, VIEW_CENTER, VIEW_LEFT, VIEW_RIGHT, Vec2, Vec3, Vec4, VertexBuffer, VertexFormat, VertexIterator, VrDisplay, VrManager, WorldClusters, XRDEPTHSENSINGFORMAT_F32, XRDEPTHSENSINGFORMAT_L8A8, XRDEPTHSENSINGUSAGE_CPU, XRDEPTHSENSINGUSAGE_GPU, XRHAND_LEFT, XRHAND_NONE, XRHAND_RIGHT, XRSPACE_BOUNDEDFLOOR, XRSPACE_LOCAL, XRSPACE_LOCALFLOOR, XRSPACE_UNBOUNDED, XRSPACE_VIEWER, XRTARGETRAY_GAZE, XRTARGETRAY_POINTER, XRTARGETRAY_SCREEN, XRTRACKABLE_MESH, XRTRACKABLE_PLANE, XRTRACKABLE_POINT, XRTYPE_AR, XRTYPE_INLINE, XRTYPE_VR, XrDepthSensing, XrDomOverlay, XrHitTest, XrHitTestSource, XrImageTracking, XrInput, XrInputSource, XrLightEstimation, XrManager, XrPlane, XrPlaneDetection, XrTrackedImage, ZoneComponent, ZoneComponentSystem, anim, app, apps, asset, audio, basisInitialize, basisSetDownloadConfig, basisTranscode, calculateNormals, calculateTangents, common, config, createBox, createCapsule, createCone, createCylinder, createMesh$1 as createMesh, createPlane, createScript, createSphere, createStyle, createTorus, createURI, data, debug, drawFullscreenQuad, drawQuadWithShader, drawTexture, events, extend, fw, getTouchTargetCoords, gfx, guid, http, inherits, input, isDefined, log, makeArray, math, now, path, platform, posteffect, prefilterCubemap, programlib, registerScript, reprojectTexture, revision, scene, script, semanticToLocation, shFromCubemap, shaderChunks, shape, string, time, type$1 as type, typedArrayIndexFormats, typedArrayIndexFormatsByteSize, typedArrayToType, typedArrayTypes, typedArrayTypesByteSize, version };\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n"],"sourceRoot":""}
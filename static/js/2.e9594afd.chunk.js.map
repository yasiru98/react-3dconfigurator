{"version":3,"sources":["../node_modules/react/jsx-runtime.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/playcanvas/build/playcanvas.mjs","../node_modules/react/index.js","../node_modules/object-assign/index.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js"],"names":["module","exports","require","_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","from","test","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","TypeError","_assertThisInitialized","self","ReferenceError","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","target","property","receiver","Reflect","get","base","object","hasOwnProperty","desc","getOwnPropertyDescriptor","_toConsumableArray","iter","_createForOfIteratorHelper","allowArrayLike","it","F","s","e","f","normalCompletion","didErr","step","_e2","_setPrototypeOf","p","_inherits","subClass","superClass","create","writable","configurable","_typeof","obj","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","Proxy","Date","result","Super","NewTarget","this","arguments","apply","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","enumerable","defineProperty","key","_createClass","protoProps","staticProps","fill","O","start","relativeStart","k","Math","max","min","end","relativeEnd","finalValue","find","predicate","thisArg","kValue","findIndex","log2","x","log","LOG2E","sign","Number","isFinite","assign","varArgs","to","index","nextSource","nextKey","navigator","document","pointer","webkitPointer","mozPointer","pointerlockchange","createEvent","initCustomEvent","dispatchEvent","pointerlockerror","addEventListener","Element","mozRequestPointerLock","requestPointerLock","webkitRequestPointerLock","pointerLockElement","lock","exitPointerLock","webkitExitPointerLock","mozExitPointerLock","unlock","window","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","String","endsWith","search","this_len","substring","includes","indexOf","startsWith","pos","substr","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","glErrorShadow","synthesizeGLError","opt_msg","msg","console","error","WebGLVertexArrayObjectOES","ext","gl","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","buffer","size","type","FLOAT","normalized","stride","offset","cached","recache","join","OESVertexArrayObject","getError","NO_ERROR","parseInt","wrapGLError","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","ARRAY_BUFFER","currentArrayBuffer","ELEMENT_ARRAY_BUFFER","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","indx","instrumentExtension","canvas","reset_","vertexArrayObjects","ii","MAX_VERTEX_ATTRIBS","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","splice","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","INVALID_OPERATION","setupVertexArrayObject","getSupportedExtensions","getExtension","original_getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","_typeLookup","names","toLowerCase","type$1","extend","ex","prop","copy","isDefined","a","EventHandler","initEventHandler","_callbacks","_callbackActive","scope","once","_addCallback","events","count","arg1","arg2","arg3","arg4","arg5","arg6","arg7","arg8","callbacks","evt","existingCallback","ind","attach","ev","on","off","fire","hasEvent","guid","replace","c","r","random","path","delimiter","num","one","two","Error","normalize","pathname","lead","trail","parts","split","cleaned","tail","getBasename","getDirectory","pop","isRelativePath","charAt","match","extractPath","ios","touch","workers","passiveEvents","ua","userAgent","maxTouchPoints","Worker","opts","removeEventListener","platform","ASCII_LOWERCASE","ASCII_UPPERCASE","HIGH_SURROGATE_BEGIN","HIGH_SURROGATE_END","LOW_SURROGATE_BEGIN","REGIONAL_INDICATOR_BEGIN","REGIONAL_INDICATOR_END","VARIATION_MODIFIER_BEGIN","VARIATION_MODIFIER_END","getCodePointData","string","first","charCodeAt","second","code","long","isCodeBetween","begin","codeData","numCharsToTakeForNextSymbol","ASCII_LETTERS","format","toBool","strict","getCodePoint","codePointData","getCodePoints","codePoint","getSymbols","ch","output","take","char","fromCodePoint","current","units","chars","fromCharCode","IndexedList","_list","_index","item","location","idx","SortedLoopArray","args","_sortBy","sortBy","items","loopIndex","_sortHandler","_doSort","bind","middle","left","right","floor","b","_binarySearch","sort","Tags","parent","_parent","changed","tags","_processArguments","_has","multiple","t","flat","tmp","now","performance","timing","re","URI","uri","scheme","authority","query","fragment","decodeURIComponent","pair","params","q","encodeURIComponent","math","DEG_TO_RAD","PI","RAD_TO_DEG","clamp","intToBytes24","intToBytes32","bytesToInt24","g","bytesToInt32","lerp","alpha","lerpAngle","powerOfTwo","nextPowerOfTwo","val","diff","smoothstep","smootherstep","roundUp","numToRound","ceil","float2Half","floatView","int32View","bits","m","between","inclusive","Http","ContentType","ResponseType","binaryExtensions","url","options","request","data","postdata","method","timestamp","xhr","errored","retry","retries","maxRetries","async","headers","Document","FormData","contentType","FORM_URLENCODED","bFirstItem","escape","JSON","stringify","header","cache","getQuery","setQuery","XMLHttpRequest","open","withCredentials","responseType","_guessResponseType","setRequestHeader","onreadystatechange","_onReadyStateChange","onerror","_onError","send","status","DOCUMENT","TEXT","MP4","WAV","OGG","MP3","BIN","DDS","BASIS","GLB","readyState","responseURL","_onSuccess","response","getResponseHeader","trim","parse","responseText","_isBinaryContentType","BLOB","XML","responseXML","retrying","retryDelay","pow","maxRetryDelay","GIF","JPEG","PNG","AAC","http","Color","rhs","lhs","hex","bytes","set","round","BLACK","freeze","BLUE","CYAN","GRAY","GREEN","MAGENTA","RED","WHITE","YELLOW","CurveEvaluator","curve","time","_curve","_left","Infinity","_right","_recip","_p0","_p1","_m0","_m1","_reset","forceReset","_evaluateHermite","keys","_isHermite","_calcTangents","d","s1_","s2_","tension","s1","s2","a_","d_","p0","p1","m0","m1","t2","twot","omt","omt2","Curve","_eval","evaluate","abs","precision","values","quantize","CurveSet","curves","_type","arg","clone","numCurves","Vec3","y","z","scalar","lx","ly","lz","rx","ry","rz","sqrt","lengthSq","invLength","ZERO","ONE","UP","DOWN","RIGHT","LEFT","FORWARD","BACK","Mat3","src","dst","l","vec","res","IDENTITY","Vec2","atan2","Vec4","w","_halfSize$1","scale","Mat4","add2","b0","b1","b2","b3","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","mul2","position","up","sub2","cross","bottom","top","znear","zfar","temp1","temp2","temp3","temp4","fov","aspect","fovIsHorizontal","_getPerspectiveHalfSize","setFrustum","near","far","axis","angle","cos","sin","tx","ty","width","height","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","setIdentity","invDet","qx","qy","qz","qw","sx","sy","sz","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","m2","m4","m5","m6","m8","m9","m10","idet","getX","getY","getZ","ey","ez","c1","c2","s3","c3","eulers","getScale","asin","halfPi","mulScalar","halfSize","tan","Quat","rad","acos","a2","conjugate","q1x","q1y","q1z","q1w","q2x","q2y","q2z","q2w","sa","ca","halfToRad","cx","cy","cz","m00","m01","m02","m11","m12","m20","m21","m22","rs","tr","lw","rw","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","ix","iy","iz","iw","tmpVecA$2","tmpVecB$1","tmpVecC","tmpVecD","tmpVecE","BoundingBox","center","halfExtents","_min","_max","other","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","aMax","getMax","aMin","getMin","bMax","bMin","ray","point","tMin","sub","origin","tMax","dir","direction","MAX_VALUE","realMin","realMax","minMax","maxMin","intersects","add","prod","absDiff","absDir","rayDir","_intersectsRay","_fastIntersectsRay","aabb","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","vertices","numVerts","setMinMax","sphere","_distanceToBoundingSphereSq","radius","boxMin","boxMax","sq","out","pn","expandMin","expandMax","tmpVecA$1","tmpVecB","BoundingSphere","lenSq","dot","discr","totalRadius","FOG_NONE","SHADERDEF_LM","SHADERDEF_DIRLM","SHADERDEF_SCREENSPACE","SHADERDEF_MORPH_POSITION","SHADERDEF_MORPH_NORMAL","SHADERDEF_MORPH_TEXTURE_BASED","_frustumPoints","Frustum","planes","matrix","plane","vpm","sr","sc","scx","scy","scz","camera","_nearClip","_farClip","_fov","_projection","_orthoHeight","_aspectRatio","points","Ray","PIXELFORMAT_DXT5","PIXELFORMAT_RGB16F","PIXELFORMAT_RGBA16F","PIXELFORMAT_RGB32F","PIXELFORMAT_RGBA32F","PIXELFORMAT_DEPTH","SEMANTIC_POSITION","SEMANTIC_NORMAL","SEMANTIC_TANGENT","SEMANTIC_BLENDWEIGHT","SEMANTIC_BLENDINDICES","SEMANTIC_COLOR","SEMANTIC_TEXCOORD","SEMANTIC_TEXCOORD0","SEMANTIC_TEXCOORD1","SEMANTIC_TEXCOORD2","SEMANTIC_TEXCOORD3","SEMANTIC_TEXCOORD4","SEMANTIC_TEXCOORD5","SEMANTIC_TEXCOORD6","SEMANTIC_TEXCOORD7","SEMANTIC_ATTR0","SEMANTIC_ATTR1","SEMANTIC_ATTR2","SEMANTIC_ATTR3","SEMANTIC_ATTR4","SEMANTIC_ATTR8","SEMANTIC_ATTR9","SEMANTIC_ATTR10","SEMANTIC_ATTR11","SEMANTIC_ATTR12","SEMANTIC_ATTR13","SEMANTIC_ATTR14","SEMANTIC_ATTR15","TEXTURETYPE_DEFAULT","TEXTURETYPE_RGBM","TEXTURETYPE_RGBE","TEXTURETYPE_SWIZZLEGGGR","TEXTUREPROJECTION_NONE","TEXTUREPROJECTION_CUBE","typedArrayTypes","typedArrayTypesByteSize","typedArrayIndexFormats","semanticToLocation","id$2","VertexBuffer","graphicsDevice","numVertices","usage","initialData","device","_vao","instancing","numBytes","verticesByteSize","_vram","vb","setData","storage","ArrayBuffer","buffers","bufferId","boundVao","bindVertexArray","deleteBuffer","byteLength","glUsage","createBuffer","STATIC_DRAW","DYNAMIC_DRAW","STREAM_DRAW","webgl2","DYNAMIC_COPY","bufferData","hashCode","str","hash","VertexFormat","description","vertexCount","elements","hasUv0","hasUv1","hasColor","hasTangents","interleaved","reduce","total","components","elementSize","elementDesc","semantic","dataType","numComponents","update","_evaluateHash","stringElementBatch","stringElementRender","stringElementsBatch","stringElementsRender","batchingHash","renderingingHash","formatDesc","_defaultInstancingFormat","set1","array","set2","set3","set4","arraySet1","inputArray","inputIndex","arraySet2","arraySet3","arraySet4","arrayGet1","outputArray","outputIndex","arrayGet2","arrayGet3","arrayGet4","VertexIteratorAccessor","vertexElement","vertexFormat","BYTES_PER_ELEMENT","getToArray","setFromArray","VertexIterator","vertexBuffer","vertexFormatSize","getFormat","accessors","numAccessors","accessor","copyCount","isView","subarray","_postEffectQuadVB","_postEffectQuadDraw","indexed","drawQuadWithShader","shader","rect","scissorRect","useBlend","h","sw","sh","oldRt","renderTarget","setRenderTarget","updateBegin","oldVx","vx","oldVy","vy","oldVw","vw","oldVh","vh","setViewport","oldSx","oldSy","oldSw","oldSh","setScissor","oldDepthTest","getDepthTest","oldDepthWrite","getDepthWrite","oldCullMode","getCullMode","oldWR","writeRed","oldWG","writeGreen","oldWB","writeBlue","oldWA","writeAlpha","setDepthTest","setDepthWrite","setCullMode","setColorWrite","setBlending","setVertexBuffer","setShader","draw","updateEnd","Shader","definition","init","createShader","attributes","uniforms","samplers","ready","failed","destroyShader","shaderChunks","alphaTestPS","ambientConstantPS","ambientPrefilteredCubePS","ambientPrefilteredCubeLodPS","ambientSHPS","aoPS","aoSpecOccPS","aoSpecOccConstPS","aoSpecOccConstSimplePS","aoSpecOccSimplePS","bakeDirLmEndPS","bakeLmEndPS","basePS","baseVS","baseNineSlicedPS","baseNineSlicedVS","baseNineSlicedTiledPS","biasConstPS","blurVSMPS","clearCoatPS","clearCoatGlossPS","clearCoatNormalPS","clusteredLightLoopPS","clusteredLightPS","combineClearCoatPS","combineDiffusePS","combineDiffuseSpecularPS","combineDiffuseSpecularNoConservePS","combineDiffuseSpecularNoReflPS","combineDiffuseSpecularNoReflSeparateAmbientPS","combineDiffuseSpecularOldPS","cookiePS","cubeMapProjectBoxPS","cubeMapProjectNonePS","cubeMapRotatePS","detailModesPS","diffusePS","diffuseDetailMapPS","dilatePS","dpAtlasQuadPS","emissivePS","endPS","endVS","envConstPS","envMultiplyPS","extensionPS","extensionVS","falloffInvSquaredPS","falloffLinearPS","fixCubemapSeamsNonePS","fixCubemapSeamsStretchPS","fogExpPS","fogExp2PS","fogLinearPS","fogNonePS","fresnelSchlickPS","fullscreenQuadPS","fullscreenQuadVS","gamma1_0PS","gamma2_2PS","genParaboloidPS","gles3PS","gles3VS","glossPS","instancingVS","lightDiffuseLambertPS","lightDirPointPS","lightmapDirPS","lightmapSinglePS","lightmapSingleVertPS","lightSpecularAnisoGGXPS","lightSpecularBlinnPS","lightSpecularPhongPS","ltc","metalnessPS","msdfPS","normalVS","normalDetailMapPS","normalInstancedVS","normalMapPS","normalMapFastPS","normalSkinnedVS","normalVertexPS","normalXYPS","normalXYZPS","opacityPS","outputAlphaPS","outputAlphaOpaquePS","outputAlphaPremulPS","outputCubemapPS","outputTex2DPS","packDepthPS","packDepthMaskPS","parallaxPS","particlePS","particleVS","particleAnimFrameClampVS","particleAnimFrameLoopVS","particleAnimTexVS","particleInputFloatPS","particleInputRgba8PS","particleOutputFloatPS","particleOutputRgba8PS","particleUpdaterAABBPS","particleUpdaterEndPS","particleUpdaterInitPS","particleUpdaterNoRespawnPS","particleUpdaterOnStopPS","particleUpdaterRespawnPS","particleUpdaterSpherePS","particleUpdaterStartPS","particle_billboardVS","particle_blendAddPS","particle_blendMultiplyPS","particle_blendNormalPS","particle_cpuVS","particle_cpu_endVS","particle_customFaceVS","particle_endPS","particle_endVS","particle_halflambertPS","particle_initVS","particle_lambertPS","particle_lightingPS","particle_localShiftVS","particle_meshVS","particle_normalVS","particle_normalMapPS","particle_pointAlongVS","particle_softPS","particle_softVS","particle_stretchVS","particle_TBNVS","particle_wrapVS","precisionTestPS","precisionTest2PS","prefilterCubemapPS","reflDirPS","reflDirAnisoPS","reflectionCCPS","reflectionCubePS","reflectionDpAtlasPS","reflectionPrefilteredCubePS","reflectionPrefilteredCubeLodPS","reflectionSpherePS","reflectionSphereLowPS","refractionPS","reprojectPS","rgbmPS","screenDepthPS","shadowCascadesPS","shadowCommonPS","shadowCoordPS","shadowCoordPerspZbufferPS","shadowEVSMPS","shadowEVSMnPS","shadowStandardPS","shadowStandardGL2PS","shadowVSM8PS","shadowVSM_commonPS","skinBatchConstVS","skinBatchTexVS","skinConstVS","skinTexVS","skyboxPS","skyboxVS","skyboxHDRPS","skyboxPrefilteredCubePS","specularPS","specularAaNonePS","specularAaToksvigPS","specularAaToksvigFastPS","spotPS","startPS","startVS","startNineSlicedPS","startNineSlicedTiledPS","storeEVSMPS","tangentBinormalVS","TBNPS","TBNderivativePS","TBNfastPS","TBNObjectSpacePS","tonemappingAcesPS","tonemappingAces2PS","tonemappingFilmicPS","tonemappingHejlPS","tonemappingLinearPS","tonemappingNonePS","transformVS","transformDeclVS","uv0VS","uv1VS","viewDirPS","viewNormalVS","gammaCode","chunks","tonemapCode","tonemapingNonePS","fogCode","skinCode","supportsBoneTextures","getBoneLimit","precisionCode","pcode","versionCode","dummyFragmentCode","attrib2Semantic","vertex_position","vertex_normal","vertex_tangent","vertex_texCoord0","vertex_texCoord1","vertex_texCoord2","vertex_texCoord3","vertex_texCoord4","vertex_texCoord5","vertex_texCoord6","vertex_texCoord7","vertex_color","vertex_boneIndices","vertex_boneWeights","collectAttribs","vsCode","attrs","found","endOfLine","startOfAttribName","lastIndexOf","attribName","createShaderFromCode","psCode","uName","useTransformFeedback","psPreamble","shaderCache","programLib","_cache","vshader","fshader","vsName","psName","basic","generateKey","fog","alphaTest","vertexColors","diffuseMap","skin","screenSpace","useInstancing","useMorphPosition","useMorphNormal","useMorphTextureBased","pass","createShaderDefinition","transformSkinnedVS","alphatest","particle","_animTex","animTexLoop","mesh","localSpace","animTex","normal","soft","faceVS","customFace","useCpu","alignToMotion","stretch","pack8","wrap","srgb","gamma","toneMap","halflambert","blend","skybox","rgbm","hdr","fixSeams","toneMapping","useIntensity","useCubeMapRotation","useRightHandedCubeMap","mip","aPosition","_pixelSizeTable","_blockSizeTable","Texture","_width","_height","_depth","_format","projection","_cubemap","_volume","fixCubemapSeams","_flipY","_premultiplyAlpha","_isRenderTarget","_mipmaps","_minFilter","_magFilter","_anisotropy","_addressU","_addressV","_addressW","_compareOnRead","_compareFunc","swizzleGGGR","mipmaps","autoMipmap","_levels","levels","cubemap","minFilter","magFilter","anisotropy","addressU","addressV","compareOnRead","flipY","premultiplyAlpha","depth","volume","addressW","_compressed","_invalid","_lockedLevel","dirtyAll","_gpuSize","v","_parameterFlags","_minFilterDirty","_needsMipmapsUpload","mips","pot","calcGpuSize","_needsUpload","destroyTexture","_levelsUpdated","_mipmapsUploaded","level","face","mode","source","mipLevel","invalid","_isBrowserInterface","upload","j","fsize","mipSize","buff","flags","caps","caps2","pixelSize","blockSize","blockWidth","blockHeight","blockDepth","tempVec3","tempMin3","tempMax3","tempBox","epsilon","oneDiv255","packFloatToBytes","enc1","enc2","enc3","ClusterLight","light","WorldClusters","cells","maxCellLightCount","reportCount","_bounds","boundsMin","boundsMax","boundsDelta","_cells","_cellsLimit","_maxCellLightCount","_pixelsPerCellCount","_maxAttenuation","_maxColorValue","_usedLights","registerUniforms","initLightsTexture","lightsTexture8","destroy","lightsTextureFloat","releaseClusterTexture","clusterTexture","_clusterWorldTextureId","resolve","_clusterPixelsPerCellId","_clusterTextureSizeId","_clusterTextureSizeData","_clusterBoundsMinId","_clusterBoundsMinData","_clusterBoundsDeltaId","_clusterBoundsDeltaData","_clusterCellsCountByBoundsSizeId","_clusterCellsCountByBoundsSizeData","_clusterCellsDotId","_clusterCellsDotData","_clusterCellsMaxId","_clusterCellsMaxData","_clusterCompressionLimit0Id","_clusterCompressionLimit0Data","_cellsDirty","equals","maxLights","pixelsPerLight8","pixelsPerLightFloat","lightTextureFormat","FORMAT_FLOAT","lights8","createTexture","_lightsTexture8Id","lightsFloat","_lightsTextureFloatId","_lightsTextureInvSizeId","_lightsTextureInvSizeData","spot","_node","getWorldTransform","lightIndex","gammaCorrection","isSpot","getPosition","data8","data8Index","_shape","_falloffMode","invMaxColorValue","color","_linearFinalColor","_finalColor","_innerConeAngleCos","_outerConeAngleCos","dataFloat","dataFloatIndex","attenuationEnd","getSpotDirection","normPos","div","numCells","totalPixels","clusters","counts","pixels","setValue","clusteredLight","lights","usedLights","visibleThisFrame","intensity","warn","getBoundingBox","maxAttenuation","maxColorValue","divX","divZ","limit","pixelsPerCellCount","addLightData","evalLightCellMinMax","xStart","xEnd","yStart","yEnd","zStart","zEnd","clusterIndex","updateCells","collectLights","evaluateBounds","evaluateCompressionLimits","updateClusters","uploadTextures","updateUniforms","extTextureFloat","FORMAT_8BIT","currentApplication","has","RenderAction","layerIndex","cameraIndex","lightClusters","clearColor","clearDepth","clearStencil","triggerPostprocess","firstCameraUse","directionalLightsSet","Set","directionalLights","directionalLightsIndices","clear","cameraLayers","dirLights","allLights","castShadows","_splitLights","LightCompositionData","shadowCastersSet","shadowCastersList","casters","getApplication","setApplication","app","tempSet$1","tempClusterArray","LayerComposition","_getApplication","logRenderActions","layerList","subLayerList","subLayerEnabled","_opaqueOrder","_transparentOrder","_dirty","_dirtyBlend","_dirtyLights","_dirtyCameras","_meshInstances","_meshInstancesSet","_lights","_lightsMap","Map","_lightCompositionData","cameras","_renderActions","_worldClusters","_emptyWorldClusters","_clusteredLightingCells","_clusteredLightingMaxLights","forEach","cluster","updateWorldClusters","layer","addUniqueMeshInstance","destArray","destSet","srcArray","meshInst","material","dirtyBlend","srcLen","passThrough","opaqueMeshInstances","transparentMeshInstances","moveByBlendType","dest","moveTransparent","blendType","updateLights","updateShadowCasters","priority","renderActionCount","cameraFirstRenderAction","cameraFirstRenderActionIndex","lastRenderAction","postProcessMarked","layers","disablePostEffectsLayer","addRenderAction","collectDirectionalLights","postEffectsEnabled","propagateRenderTarget","clusteredLightingEnabled","allocateLightClusters","_logRenderActions","lightCount","clearShadowCasters","addShadowCasters","shadowCasters","lightCompData","_splitLightsArray","ra","raLayer","_clusteredLightsSet","findCompatibleCluster","emptyWorldClusters","renderActions","renderActionIndex","renderAction","rt","used","needsClear","clearColorBuffer","clearDepthBuffer","clearStencilBuffer","reset","startIndex","fromCamera","thisCamera","transparent","_isLayerAdded","_updateOpaqueOrder","_updateTransparentOrder","_isSublayerAdded","_getSublayerIndex","endIndex","layersA","layersB","order","topLayerA","topLayerB","_sortLayersDescending","_oldChunkFloat","_oldChunkColor","_oldChunkTex","_oldChunkTexColor","_oldChunkTexFloat","_oldChunkVert","_oldChunkVertColor","_oldChunkVertFloat","_matTex2D","standard","_oldChunkToNew","aoTexPS","aoVertPS","diffuseConstPS","diffuseTexPS","diffuseTexConstPS","diffuseVertPS","diffuseVertConstPS","emissiveConstPS","emissiveTexPS","emissiveTexConstPS","emissiveTexConstFloatPS","emissiveVertPS","emissiveVertConstPS","emissiveVertConstFloatPS","glossConstPS","glossTexPS","glossTexConstPS","glossVertPS","glossVertConstPS","metalnessConstPS","metalnessTexPS","metalnessTexConstPS","metalnessVertPS","metalnessVertConstPS","opacityConstPS","opacityTexPS","opacityTexConstPS","opacityVertPS","opacityVertConstPS","specularConstPS","specularTexPS","specularTexConstPS","specularVertPS","specularVertConstPS","transformBatchSkinnedVS","transformInstancedVS","transformPixelSnapVS","transformScreenSpaceVS","transformScreenSpaceBatchSkinned","transformSkinned","transformUv1","optionsContext","optionsContextMin","buildPropertiesList","propsMin","_correctChannel","chan","chr","addLen","_setMapTransform","codes","uv","checkId","_getUvSourceExpression","transformPropName","uVPropName","expression","transformId","uvChannel","isMainPass","nineSlicedMode","heightMap","_addMapDef","_addMapDefs","float","vertex","map","_addMap","propName","chunkName","samplerFormat","mapPropName","channelPropName","vertexColorChannelPropName","vertexColorPropName","detailModePropName","tintOption","vertexColorOption","textureOption","detailModeOption","subCode","fmt","isFloatTint","isVecTint","_directionalShadowMapProjection","shadowCoordArgs","shadowParamArg","coordsFunctioName","numCascades","_nonPointShadowMapProjection","shadowMatArg","_normalOffsetBias","_isVsm","_isPcf","extStandardDerivatives","_addVaryingIfNeeded","_getLightSourceShapeString","shape","_vsAddTransformCode","_vsAddBaseCode","_fsAddBaseCode","_fsAddStartCode","lighting","dirLightMap","shadingModel","fresnelModel","specularAntialias","prefilteredCubemap","dpAtlas","ambientSH","cubemapReflection","cubeMap","useSpecular","sphereMap","reflections","useTexCubeLod","specularMap","glossMap","needsNormal","enableGGXSpecular","shadowPass","lightType","chunk","codeBody","varyings","newP","customChunks","instance_line1","instance_line2","instance_line3","instance_line4","fragmentUniformsCount","normalMap","cname","mname","tname","uname","useUv","useUnmodifiedUv","maxUvSets","uvSet","forceUv1","morph_vertex_id","morph_pos0","morph_pos1","morph_pos2","morph_pos3","morph_nrm0","morph_nrm1","morph_nrm2","morph_nrm3","morph_nrm4","morph_nrm5","morph_nrm6","morph_nrm7","morph_pos4","morph_pos5","morph_pos6","morph_pos7","pixelSnap","oldVars","startCode","forceFragmentPrecision","maxPrecision","smode","shadowType","textureFloatHighPrecision","customFragmentShader","tag","detailModes","codeBegin","clearCoat","opacityFadesSpecular","numShadowLights","shadowTypeUsed","shadowedDirectionalLightUsed","useVsm","usePerspZbufferShadow","hasAreaLights","some","areaLightLutFormat","tbn","lightShape","noShadow","_shadowType","_cookie","_cookieTransform","fastTbn","clearCoatNormalMap","packedNormal","normalMapUv","normalDetail","transformedNormalMapUv","normalizeNormalMap","useRgbm","cubeMapProjection","skyboxIntensity","diffuseDetail","alphaToCoverage","emissiveFormat","specularPropName","useMetalness","transformedHeightMapUv","useAo","aoMap","aoVertexColor","occludeSpecular","occludeSpecularFloat","reflectionDecode","rgbmReflection","hdrReflection","scode","refraction","extTextureHalfFloatLinear","extTextureFloatLinear","useOldAmbient","conserveEnergy","addAmbient","lightMap","lightVertexColor","lightmapChunkPropName","lightMapFormat","lightMapWithoutAmbient","ambientDecode","rgbmAmbient","hdrAmbient","ambientTint","msdf","usesCookieNow","hasPointLights","usesLinearFalloff","usesInvSquaredFalloff","usesSpot","usesCookie","clusterTextureFormat","twoSidedLighting","opacityParallax","opacityMap","getGlossinessCalled","occludeDirect","shapeString","_cookieFalloff","_cookieChannel","evsmExp","shadowReadMode","structCode","programlib","paraboloidFromCubemap","sourceCubemap","fixSeamsAmount","dontFlipX","seamsCode","constantTexSource","constantParams","tex","targ","RenderTarget","colorBuffer","getDpAtlasRect","id$1","Material","_shader","variants","parameters","blendSrc","blendDst","blendEquation","separateAlphaBlend","blendSrcAlpha","blendDstAlpha","blendAlphaEquation","cull","depthTest","depthWrite","stencilFront","stencilBack","depthBias","slopeDepthBias","redWrite","greenWrite","blueWrite","alphaWrite","meshInstances","_shaderVersion","_scene","dirty","prevBlend","_updateMeshInstanceKeys","_cloneInternal","updateKey","scene","objDefs","meshInstance","uniformObject","setParameter","param","scopeId","parameter","paramName","_material","defaultMaterial","StandardMaterialOptionsBuilder","_mapXForms","updateMinRef","stdMat","staticLightList","sortedLights","prefilteredCubeMap128","_updateSharedOptions","_updateMinOptions","_updateUVOptions","updateRef","_updateEnvOptions","_updateMaterialOptions","_updateLightOptions","minimalOptions","hasVcolor","_updateTexOptions","opacityTint","opacity","diffuseTint","diffuse","diffuseVertexColor","specularTint","specular","specularVertexColor","emissiveTint","emissiveMap","emissive","emissiveIntensity","isPackedNormalMap","blendMapsWithColors","metalnessTint","metalness","glossTint","alphaFade","occludeSpecularIntensity","msdfMap","aoMapUv","aoUvSet","diffuseDetailMode","clearCoatTint","clearCoatGlossiness","clearCoatGlossTint","globalSky128","useSkybox","_skyboxPrefiltered","useFog","useGammaTonemap","skyboxRotation","_skyboxIsRenderTarget","lightMapChannel","lightMapUv","lightMapTransform","useLighting","lightsFiltered","mask","_collectLights","vname","vcname","isOpacity","allow","_getMapTransformID","lType","isStatic","xform","same","newID","standardMaterialParameterTypes","mappingFormat","_engine","ambient","aoVertexColorChannel","aoMapChannel","aoMapTiling","aoMapOffset","diffuseVertexColorChannel","diffuseMapChannel","diffuseMapUv","diffuseMapTiling","diffuseMapOffset","diffuseDetailMap","diffuseDetailMapChannel","diffuseDetailMapUv","diffuseDetailMapTiling","diffuseDetailMapOffset","specularVertexColorChannel","specularMapChannel","specularMapUv","specularMapTiling","specularMapOffset","metalnessVertexColor","metalnessVertexColorChannel","metalnessMap","metalnessMapChannel","metalnessMapUv","metalnessMapTiling","metalnessMapOffset","shininess","glossVertexColor","glossVertexColorChannel","glossMapChannel","glossMapUv","glossMapTiling","glossMapOffset","clearCoatVertexColor","clearCoatVertexColorChannel","clearCoatMap","clearCoatMapChannel","clearCoatMapUv","clearCoatMapTiling","clearCoatMapOffset","clearCoatGlossVertexColor","clearCoatGlossVertexColorChannel","clearCoatGlossMap","clearCoatGlossMapChannel","clearCoatGlossMapUv","clearCoatGlossMapTiling","clearCoatGlossMapOffset","clearCoatBumpiness","clearCoatNormalMapUv","clearCoatNormalMapTiling","clearCoatNormalMapOffset","emissiveVertexColor","emissiveVertexColorChannel","emissiveMapChannel","emissiveMapUv","emissiveMapTiling","emissiveMapOffset","normalMapTiling","normalMapOffset","bumpiness","normalDetailMap","normalDetailMapTiling","normalDetailMapOffset","normalDetailMapUv","normalDetailMapBumpiness","heightMapChannel","heightMapUv","heightMapTiling","heightMapOffset","heightMapFactor","opacityVertexColor","opacityVertexColorChannel","opacityMapChannel","opacityMapUv","opacityMapTiling","opacityMapOffset","reflectivity","refractionIndex","cubeMapProjectionBox","lightVertexColorChannel","lightMapTiling","lightMapOffset","prefilteredCubeMap64","prefilteredCubeMap32","prefilteredCubeMap16","prefilteredCubeMap8","prefilteredCubeMap4","standardMaterialTextureParameters","standardMaterialCubemapParameters","_propsSerial","_propsSerialDefaultVal","_propsInternalNull","_propsInternalVec3","_prop2Uniform","_propsColor","Chunks","StandardMaterial","_assetReferences","_validator","shaderOptBuilder","defVal","_chunks","cubeMapMinUniform","cubeMapMaxUniform","transform","tiling","_propsSet","_setParameter","_updateMapTransform","uniform","varName","changeMat","func","_clearParameters","ambientUniform","diffuseUniform","specularUniform","getUniform","emissiveUniform","_updateMap","dirtyShader","clearVariants","_processColor","dirtyColor","clr","_colorProcessed","globalSky64","globalSky32","globalSky16","globalSky8","globalSky4","useDp","extTextureLod","allMips","atlas","sixCubemaps","dp","scaleAmount","scaleFactor","generateDpAtlas","cubeSize","HTMLImageElement","img","tex2","bindFramebuffer","FRAMEBUFFER","_glFrameBuffer","readPixels","RGBA","UNSIGNED_BYTE","dirs","u","addr","weight","dx","dy","dz","weight1","weight2","weight3","weight4","weight5","coef1","coef2","coef3","coef4","coef5","coef6","coef7","coef8","coef9","nx","px","ny","py","nz","pz","accum","texelCoordSolidAngle","shFromCubemap","_skyboxRotationMat3","onUpdateShader","library","getProgramLibrary","getProgram","asset","_unbind","_defineTex2D","channels","defChannel","vertexColor","detailMode","privMap","privMapTiling","privMapOffset","mapTransform","mapTransformUniform","privMapUv","privMapChannel","privMapVertexColor","privMapVertexColorChannel","privMapDetailMode","channel","oldVal","mapTiling","mapOffset","mat","tform","_defineColor","defaultValue","hasMultiplier","priv","uform","mult","pmult","newValue","oldValue","_defineFloat","_defineObject","_defineAlias","newName","oldName","_defineFlag","TEXTURE_PARAMETERS","CUBEMAP_PARAMETERS","bmin","bmax","_defineMaterialProps","ProgramLibrary","_device","_generators","_isClearingCache","_precached","_programsCollection","_defaultStdMatOption","_defaultStdMatOptionMin","generator","isRegistered","gd","lcopy","storeNewProgram","shaderDefinition","opt","defaultMat","_getDefaultStdMatOptions","text","createElement","setAttribute","style","display","body","appendChild","click","removeChild","shaders","Version","globalId","revision","idCounter","VersionedObject","version","ScopeId","versionObject","increment","ScopeSpace","variables","uniformName","ShaderInput","locationId","EVENT_RESIZE","downsampleImage","image","srcW","srcH","dstW","dstH","getContext","drawImage","testRenderable","pixelFormat","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","framebuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","deleteTexture","deleteFramebuffer","GraphicsDevice","_enableAutoInstancing","autoInstancingMaxObjects","defaultFramebuffer","_maxPixelRatio","updateClientRect","textures","targets","contextLost","_contextLostHandler","event","preventDefault","loseContext","_contextRestoredHandler","restoreContext","preferWebGl2","stencil","_tempEnableSafariTextureUnitWorkaround","safari","scopeX","scopeY","scopeZ","scopeW","uniformValue","isChrome","chrome","isMac","appVersion","_tempMacChromeBlitFramebufferWorkaround","initializeExtensions","initializeCapabilities","initializeRenderState","initializeContextCaches","defaultClearOptions","CLEARFLAG_COLOR","glAddress","REPEAT","MIRRORED_REPEAT","glBlendEquation","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","extBlendMinmax","MIN_EXT","MAX","MAX_EXT","glBlendFunction","SRC_COLOR","ONE_MINUS_SRC_COLOR","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","glComparison","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","glStencilOp","KEEP","REPLACE","INCR","INCR_WRAP","DECR","DECR_WRAP","INVERT","glClearFlag","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","glCull","FRONT","FRONT_AND_BACK","glFilter","LINEAR","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","glPrimitive","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","glType","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","pcUniformType","BOOL","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","SAMPLER_2D_SHADOW","SAMPLER_CUBE_SHADOW","SAMPLER_3D","targetToSlot","TEXTURE_CUBE_MAP","TEXTURE_3D","commitFunction","uniform1i","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniform2iv","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1fv","register","maxVertexTextures","maxTextures","numUniforms","vertexUniformsCount","boneLimit","unmaskedRenderer","_drawCallsPerFrame","_shaderSwitchesPerFrame","_primsPerFrame","_renderTargetCreationTime","ib","_shaderStats","vsCompiled","fsCompiled","linked","materialShaders","compileTime","textureFloatRenderable","extColorBufferFloat","extColorBufferHalfFloat","textureHalfFloatRenderable","extTextureHalfFloat","HALF_FLOAT_OES","supportsMorphTargetTexturesCore","_textureFloatHighPrecision","_textureHalfFloatUpdatable","grabPassAvailable","grabPassAlpha","createGrabPass","textureHalfFloatUpdatable","getShaderPrecisionFormat","vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","fragmentShaderPrecisionHighpFloat","FRAGMENT_SHADER","fragmentShaderPrecisionMediumpFloat","highpAvailable","mediumpAvailable","supportedExtensions","extDrawBuffers","extInstancing","extUintElement","extVertexArrayObject","extDisjointTimerQuery","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","createVertexArray","deleteVertexArray","isVertexArray","extDebugRendererInfo","extFloatBlend","extTextureFilterAnisotropic","extCompressedTextureETC1","extCompressedTextureETC","extCompressedTexturePVRTC","extCompressedTextureS3TC","extCompressedTextureATC","extCompressedTextureASTC","extParallelShaderCompile","supportsInstancing","getPrecision","contextAttribs","getContextAttributes","supportsMsaa","antialias","supportsStencil","maxTextureSize","MAX_TEXTURE_SIZE","maxCubeMapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderBufferSize","MAX_RENDERBUFFER_SIZE","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTextures","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_FRAGMENT_UNIFORM_VECTORS","maxDrawBuffers","MAX_DRAW_BUFFERS","maxColorAttachments","MAX_COLOR_ATTACHMENTS","maxVolumeSize","MAX_3D_TEXTURE_SIZE","MAX_DRAW_BUFFERS_EXT","MAX_COLOR_ATTACHMENTS_EXT","UNMASKED_RENDERER_WEBGL","unmaskedVendor","UNMASKED_VENDOR_WEBGL","maxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","samples","SAMPLES","maxSamples","MAX_SAMPLES","blending","disable","BLEND","separateAlphaEquation","blendFunc","colorMask","cullMode","enable","CULL_FACE","cullFace","DEPTH_TEST","depthFunc","depthMask","STENCIL_TEST","stencilFuncFront","stencilFuncBack","stencilRefFront","stencilRefBack","stencilMaskFront","stencilMaskBack","stencilFunc","stencilFailFront","stencilFailBack","stencilZfailFront","stencilZfailBack","stencilZpassFront","stencilZpassBack","stencilWriteMaskFront","stencilWriteMaskBack","stencilOp","stencilMask","raster","SAMPLE_ALPHA_TO_COVERAGE","RASTERIZER_DISCARD","depthBiasEnabled","POLYGON_OFFSET_FILL","clearRed","clearBlue","clearGreen","clearAlpha","hint","FRAGMENT_SHADER_DERIVATIVE_HINT","NICEST","FRAGMENT_SHADER_DERIVATIVE_HINT_OES","SCISSOR_TEST","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","unpackFlipY","UNPACK_FLIP_Y_WEBGL","unpackPremultiplyAlpha","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","vertexShaderCache","fragmentShaderCache","_vaoMap","indexBuffer","vertexBuffers","activeFramebuffer","feedback","transformFeedbackBuffer","textureUnit","textureUnits","destroyGrabPass","compileAndLinkShader","grabPassTexture","grabPassTextureId","grabPassRenderTarget","resolveRenderTarget","_glResolveFrameBuffer","currentFrameBuffer","resolvedFrameBuffer","initRenderTarget","grabPassFrameBuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","blitFramebuffer","_glFormat","copyTexImage2D","clientRect","getBoundingClientRect","viewport","scissor","fb","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","_colorBuffer","_depthBuffer","prevRt","getCopyShader","setFramebuffer","_glTexture","setTexture","TEXTURE_CUBE_MAP_POSITIVE_X","_face","depthBuffer","_stencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","_samples","_glDepthBuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_COMPONENT16","_glMsaaColorBuffer","renderbufferStorageMultisample","_glInternalFormat","_glMsaaDepthBuffer","DEPTH24_STENCIL8","DEPTH_COMPONENT32F","_copyShader","unit","slot","activeTexture","generateMipmap","_glTarget","autoResolve","ALPHA","_glPixelType","LUMINANCE","LUMINANCE_ALPHA","RGB","UNSIGNED_SHORT_5_6_5","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_4_4_4_4","RGB8","RGBA8","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_RGB_ATC_WEBGL","COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL","RGB16F","HALF_FLOAT","RGBA16F","RGB32F","RGBA32F","R32F","DEPTH_COMPONENT","UNSIGNED_INT_24_8","R11F_G11F_B10F","UNSIGNED_INT_10F_11F_11F_REV","SRGB8","SRGB8_ALPHA8","removeValue","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","mipObject","resMult","requiredMipLevels","setUnpackFlipY","setUnpackPremultiplyAlpha","texData","compressedTexImage2D","compressedTexImage3D","texImage3D","gpuSize","TEXTURE0","textureTarget","textureObject","filter","TEXTURE_WRAP_R","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","TEXTURE_COMPARE_FUNC","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initializeTexture","setTextureParameters","updateGrabPass","uploadTexture","bindTextureOnUnit","useCache","loc","primitive","numInstances","keepBuffers","sampler","samplerValue","numTextures","uniformVersion","programVersion","setBuffers","uniform1iv","bindBufferBase","TRANSFORM_FEEDBACK_BUFFER","beginTransformFeedback","glFormat","bytesPerIndex","drawElements","drawArrays","endTransformFeedback","defaultOptions","setClearColor","setClearDepth","setClearStencil","writeDepth","state","tf","createTransformFeedback","bindTransformFeedback","TRANSFORM_FEEDBACK","constBias","slopeBias","polygonOffset","ref","stencilFuncSeparate","fail","zfail","zpass","writeMask","stencilOpSeparate","stencilMaskSeparate","blendFuncSeparate","blendEquationSeparate","isVertexShader","glShader","shaderSource","compileShader","glVertexShader","compileShaderSource","glFragmentShader","glProgram","createProgram","attachShader","outNames","attr","transformFeedbackVaryings","INTERLEAVED_ATTRIBS","locations","bindAttribLocation","linkProgram","_glVertexShader","_glFragmentShader","_glProgram","deleteProgram","removeShaderFromCache","lines","info","shaderInput","getShaderParameter","COMPILE_STATUS","_addLineNumbers","getShaderInfoLog","getProgramParameter","LINK_STATUS","getProgramInfoLog","numAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","postLink","useProgram","attributesInvalidated","maxBones","ratio","devicePixelRatio","shaderSrc","deleteShader","clearCache","mapObj","removeFromCache","deleteTransformFeedback","clearShaderCache","clearVertexArrayObjectCache","drawingBufferWidth","drawingBufferHeight","fullscreenElement","fullscreen","requestFullscreen","exitFullscreen","resizeCanvas","test1","test2","textureOptions","tex1","targ1","targ2","prevFramebuffer","testTextureFloatHighPrecision","testTextureHalfFloatUpdatable","_this$_colorBuffer","_this$_depthBuffer","_arg2","_arg3","destroyFrameBuffers","deleteRenderbuffer","copyRenderTarget","areaElement","_u","_v","invResolution","x0","y0","x1","y1","solidAngle","IndexBuffer","numIndices","indices","_lockTypedArray","RefCountedObject","_refCount","GeometryData","initDefaults","recreate","verticesUsage","indicesUsage","maxVertices","maxIndices","indexCount","vertexStreamsUpdated","indexStreamUpdated","vertexStreamDictionary","_validateVertexCount","DEFAULT_COMPONENTS_POSITION","DEFAULT_COMPONENTS_NORMAL","DEFAULT_COMPONENTS_UV","DEFAULT_COMPONENTS_COLORS","GeometryVertexStream","componentCount","dataTypeNormalize","Mesh","morph","_geometryData","_aabb","boneAabb","_destroyIndexBuffer","morphTargets","boneUsed","boneIndex","minMorphX","minMorphY","minMorphZ","maxMorphX","maxMorphY","maxMorphZ","boneMin","boneMax","numBones","boneNames","posElement","weightsElement","indicesElement","deltaPositions","verticesDynamic","indicesDynamic","_initGeometryData","_changeVertexCount","stream","readData","positions","setVertexStream","normals","uvs","colors","getVertexStream","streamIndices","primitiveType","updateBoundingBox","compute","destroyVB","destroyIB","_updateVertexBuffer","_updateIndexBuffer","updateRenderStates","vertexDesc","allocateVertexCount","_buildVertexFormat","writeData","createFormat","srcIndices","renderStyle","generateWireframe","prepareRenderState","offsets","uniqueLineIndices","i1","i2","line","wireBuffer","primitiveUv1Padding","primitiveUv1PaddingScale","shapePrimitives","createMesh$1","setPositions","setNormals","tangents","setColors32","setUvs","uvs1","blendIndices","blendWeights","setIndices","_createConeData","baseRadius","peakRadius","heightSegments","capSegments","roundedCaps","tangent","theta","cosTheta","sinTheta","phi","sinPhi","third","fourth","bottomToTop","norm","lat","lon","latitudeBands","longitudeBands","capOffset","createCylinder","calculateTangents","createCapsule","sides","createCone","createSphere","createPlane","he","ws","widthSegments","ls","lengthSegments","vcounter","createBox","hs","corners","faceAxes","faceNormals","generateFace","side","uSegments","vSegments","getShapePrimitive","primData","area","incRefCount","BasicMaterial","colorUniform","colorMap","clearParameters","Batch","dynamic","batchGroupId","origMeshInstances","removeFromLayers","getLayerById","addMeshInstances","removeMeshInstances","_aabbVer","BatchGroup","maxAabbSize","_ui","_sprite","_obj","model","sprite","render","MODEL","ELEMENT","SPRITE","RENDER","_invMatrix","SkinInstance","_rootBone","_skinUpdateIndex","_updateBeforeCull","initSkin","numPixels","boneTexture","matrixPalette","rootBone","entity","bones","boneName","bone","findByName","inverseBindPose","matrices","rootNode","skinUpdateIndex","invert","mulAffine2","_updateMatrices","pe","mp","uploadBones","SkinBatchInstance","nodes","RefCountedCache","refCount","delete","scaleCompensatePosTransform","scaleCompensatePos","scaleCompensateRot","scaleCompensateRot2","scaleCompensateScale","scaleCompensateScaleForParent","tmpMat4","tmpQuat","position$1","invParentWtm$1","rotation","invParentRot","GraphNode","_labels","localPosition","localRotation","localScale","localEulerAngles","eulerAngles","_scale","localTransform","_dirtyLocal","_frozen","worldTransform","_dirtyWorld","normalMatrix","_dirtyNormal","_up","_forward","_children","_graphDepth","_enabled","_enabledInHierarchy","scaleCompensation","_notifyHierarchyStateChanged","node","_onHierarchyStateChanged","_unfreezeParentToRoot","descendants","results","Function","fn","concat","findOne","_findByTag","currentParent","imax","part","children","jmax","isDescendantOf","getEulerAngles","setTRS","getTranslation","setFromMat4","_sync","insertChild","addChild","setFromEulerAngles","_dirtifyLocal","_dirtifyWorld","_dirtifyWorldInternal","transformPoint","parentRot","getRotation","mul","_onInsertChild","wPos","wRot","setPosition","setRotation","enabledInHierarchy","_updateGraphDepth","child","parentWorldScale","parentToUseScaleFrom","tmatrix","getLocalScale","syncHierarchy","ux","uy","uz","setLookAt","transformVector","rot","_tmpAabb","_tempBoneAabb","_tempSphere","_meshSet","InstancingData","numObjects","MeshInstance","temp","_key","_staticLightList","_staticSource","_mesh","_shaderDefs","MASK_DYNAMIC","_lightHash","visible","_renderStyle","castShadow","_receiveShadow","_screenSpace","_noDepthDrawGl1","pick","_updateAabb","_updateAabbFunc","_calculateSortDistance","_skinInstance","_morphInstance","instancingData","_customAabb","drawOrder","isVisibleFunc","flipFaces","decRefCount","localAabb","toWorldSpace","skinInstance","_targets","_initBoneAabbs","setFromTransformedAabb","_expand","prevMat","removeMeshInstanceRef","addMeshInstanceRef","_layer","calculateSortDistance","_setupSkinUpdate","useTextureMorph","morphPositions","morphNormals","toggles","getRefCount","setRealtimeLightmap","lightmapParamNames","morphInstance","frustum","containsSphere","getKey","passFlags","old","decRefLightmap","incRefLightmap","deleteParameter","passFlag","_lightmapCache","incRef","decRef","isCommand","materialId","paramsIdentical","equalParamSets","params1","params2","equalLightLists","lightList1","lightList2","mat3","worldMatX$1","worldMatY$1","worldMatZ$1","getScaleSign","mi","wt","BatchManager","root","_init","_batchGroups","_batchGroupCounter","_batchList","_dirtyGroups","group","newBatchList","destroyBatch","_removeModelsFromBatchGroup","groups","batch","groupId","markGroupDirty","groupMeshInstances","drawCalls","nodeMeshInstances","removeModelFromLayers","valid","_text","_model","_image","_renderable","unmaskMeshInstance","_dirtifyMask","_onPrerender","groupIds","_extractModel","_extractRender","_extractElement","_meshInstance","_renderMode","_batchGroup","lists","groupData","_collectAndRemoveMeshInstances","newDirtyGroups","prepare","addToLayers","POSITIVE_INFINITY","translucent","vertCount","lightList","defs","staticLights","scaleSign","vertexFormatBatchingHash","sf","halfMaxAabbSize","maxInstanceCount","maxNumVertices","testAabb","skipTranslucentAabb","meshInstancesLeftB","meshInstancesLeftA","skipMesh","getNumVertices","vertexFormats","elems","streams","batchNumVerts","batchNumIndices","indexBase","indexData","verticesOffset","indexOffset","typeArrayType","elementByteSize","totalComponents","invertTo3x3","transpose","srcFormat","batchGroup","generate","clonedMeshInstances","batch2","_deviceCoord","_halfSize","_point","_invViewProjMat","Camera","_aspectRatioMode","_calculateProjection","_calculateTransform","_clearColor","_clearColorBuffer","_clearDepth","_clearDepthBuffer","_clearStencil","_clearStencilBuffer","_cullingMask","_cullFaces","_flipFaces","_frustumCulling","_horizontalFov","_layers","_rect","_renderTarget","_scissorRect","_vrDisplay","_projMat","_projMatDirty","_projMatSkybox","_viewMat","_viewMatDirty","_viewProjMat","_viewProjMatDirty","_evaluateProjectionMatrix","wtm","_camera","aspectRatio","aspectRatioMode","calculateProjection","calculateTransform","cullFaces","cullingMask","farClip","frustumCulling","horizontalFov","nearClip","orthoHeight","vrDisplay","projMat","projectionMatrix","viewMat","viewMatrix","worldCoord","cw","screenCoord","_updateViewProjMat","range","invView","cameraPos","setPerspective","setOrtho","ShadowMap","renderTargets","createCubemap","_shadowResolution","create2dMap","getShadowFormat","getShadowFiltering","compareFunc","ShadowMapCache","shadowMapCache","shadowMaps","shadowMap","isCubeMap","resolution","pointLightRotations","aabbPoints","_depthRange","getDepthRange","cameraViewMatrix","aabbMin","aabbMax","minz","maxz","gauss","sigma","exp","visibleSceneAabb","shadowCamView$1","shadowCamViewProj$1","pixelOffset","blurScissorRect","opChanId","viewportMatrix","getDepthKey","opChan","ShadowRenderer","forwardRenderer","sourceId","pixelOffsetId","weightId","blurVsmShaderCode","packed","blurPackedVsmShaderCode","blurVsmShader","blurPackedVsmShader","blurVsmWeights","shadowMapLightRadiusId","_isVisible","depthSortCompare","_shadowMap","faceCount","lightRenderData","getRenderData","shadowCam","shadowCamera","shadowCamNode","lightNode","_outerConeAngle","rotateLocal","updateCameraFrustum","cullShadowCasters","visibleCasters","nearDist","farDist","_shadowCascadeDistances","fraction","linearDist","logDist","dist","cascadeDistribution","generateSplitDistances","shadowDistance","cascade","frustumNearDist","frustumFarDist","frustumPoints","getPoints","cameraWorldMat","lightDir","forward","sizeRatio","scaledUp","scaledRight","scaledDir","translateLocal","emptyAabb","depthRange","setDepthBias","setDepthBiasValues","shadowBias","polygonOffsetId","dispatchViewPos","cascades","shadowMatrix","_shadowMatrixPalette","scaleShiftMatrix","setBaseConstants","setSkinning","setParameters","shadowShader","updateShader","setVertexBuffers","setMorphing","setIndexBuffer","drawInstance","_shadowDrawCalls","shadowUpdateMode","_shadowMapUpdates","setupRenderState","dispatchUniforms","setCamera","submitCasters","_vsmBlurSize","applyVsmBlur","isVsm8","blurMode","filterSize","blurShader","kernelSize","halfWidth","sum","gaussWeights","blurVS","blurFS","blurShaderName","origShadowMap","tempShadowMap","tempRt","vsmBlurMode","getVsmBlurShader","hwPcf","projL","projR","modelMatrix","keyA$1","keyB$1","keyA","keyB","sortPos","sortDir","shadowCamView","shadowCamViewProj","viewInvMat","viewMat3","viewProjMat","flipYMat","setScale","flippedViewProjMat","flippedSkyboxProjMat","viewInvL","viewInvR","viewL","viewR","viewPosL","viewPosR","viewMat3L","viewMat3R","viewProjMatL","viewProjMatR","worldMatX","worldMatY","worldMatZ","tempSphere$1","boneTextureSize","_autoInstanceBuffer","_tempMaterialSet","ForwardRenderer","_forwardDrawCalls","_skinDrawCalls","_camerasRendered","_materialSwitches","_shadowMapTime","_depthMapTime","_forwardTime","_cullTime","_sortTime","_skinTime","_morphTime","_instancingTime","_layerCompositionUpdateTime","_lightClustersTime","_lightClusters","_shadowRenderer","projId","projSkyboxId","viewId","viewId3","viewInvId","viewProjId","viewPos","viewPosId","nearClipId","farClipId","cameraParamsId","fogColorId","fogStartId","fogEndId","fogDensityId","modelMatrixId","normalMatrixId","poseMatrixId","boneTextureId","boneTextureSizeId","morphWeightsA","morphWeightsB","morphPositionTex","morphNormalTex","morphTexParams","alphaTestId","opacityMapId","ambientId","exposureId","skyboxIntensityId","lightColorId","lightDirId","lightShadowMapId","lightShadowMatrixId","lightShadowParamsId","lightRadiusId","lightPos","lightPosId","lightWidth","lightWidthId","lightHeight","lightHeightId","lightInAngleId","lightOutAngleId","lightCookieId","lightCookieIntId","lightCookieMatrixId","lightCookieOffsetId","shadowMatrixPaletteId","shadowCascadeDistancesId","shadowCascadeCountId","depthMapId","screenSizeId","_screenSize","twoSidedLightingNegScaleFactorId","fogColor","ambientColor","cameraParams","drawCallA","drawCallB","zdist","zdist2","lightA","lightB","presenting","combinedProj","combinedViewInv","combinedView","xr","views","view","viewOffMat","cullBorder","leftProj","rightProj","leftViewInv","rightViewInv","leftView","rightView","session","viewInvOffMat","projViewOffMat","getProjectionMatrixSkybox","clearView","pixelWidth","pixelHeight","forceWrite","_clearOptions","ambientLight","exposure","skyboxModel","cnt","campos","hWidth","hHeight","directional","numDirs","_resolveLight","_direction","setLTCDirectionallLight","bias","normalBias","vsmBias","shadowBuffer","_shadowRenderParams","omni","_position","setLTCPositionalLight","cookieIntensity","cookieMatrix","cookieCam","getSpotCookieCamera","cookieNode","_cookieTransformUniform","_cookieOffsetUniform","_cookieOffset","usedDirLights","omnis","spts","numOmnis","numSpts","dispatchOmniLight","staticId","dispatchSpotLight","visibleList","drawCall","visibleLength","drawCallsCount","command","getBoundingSphere","si","updateMatrices","updateMatrixPalette","morphInst","_instancedDrawCalls","_removedByInstancing","flip","wt2","vertexBufferIds","texturePositions","textureNormals","_textureParams","_activeVertexBuffers","_shaderMorphWeightsA","_shaderMorphWeightsB","vp","drawCallback","variantKey","lightMask","prevObjDefs","prevLightMask","prevStatic","lightHash","prevMaterial","dispatchDirectLights","dispatchLocalLights","setBlendFunctionSeparate","setBlendEquationSeparate","setBlendFunction","setBlendEquation","setDepthFunc","setAlphaToCoverage","setStencilTest","setStencilFunc","readMask","setStencilOperation","setStencilFuncFront","setStencilOperationFront","setStencilFuncBack","setStencilOperationBack","drawInstance2","enableAutoInstancing","defaultInstancingFormat","prevStaticSource","newDrawCalls","verts","numTris","vertSize","offsetP","baseIndex","_x","_y","_z","minx","miny","maxx","maxy","minv","maxv","triLightCombUsed","combIndices","combIbName","combIb","lightTypePass","bit","lht","minVec","maxVec","localLightBounds","invMatrix","triLightComb","lightAabb","triBounds","chunkAabb","mesh2","lightCompare","emitter","comp","updateShaders","updateLitShaders","updateCpuSkinMatrices","shaderVersion","_postRenderCounter","_preRenderCalledForCameras","_postRenderCalledForCameras","_postRenderCounterMax","instances","_needsStaticPrepare","_staticLightHash","_staticPrepareDone","revertStaticMeshes","prepareStaticMeshes","updateGpuSkinMatrices","updateMorphing","dispatchGlobalLights","fogStart","fogEnd","fogDensity","compUpdatedFlags","cullLocal","cullDirectional","cameraPass","frameBegin","cullLights","objects","visibleTransparent","visibleOpaque","onPreCull","onPostCull","frameEnd","cullShadowmaps","updateSkybox","_updateSkybox","beginLayers","updated","_update","updateLightStats","beginFrame","setSceneConstants","cullComposition","gpuUpdate","renderShadows","onPreRenderOpaque","onPreRenderTransparent","onPreRender","_renderAction","_renderAction$renderT","backupColor","backupDepth","backupStencil","_sortVisible","_activeCamera","activate","draws","renderForward","shaderPass","onDrawCall","onPostprocessing","onPostRenderOpaque","onPostRenderTransparent","onPostRender","spotCookieCamera","sortCallbacks","sortLights","layerCounter","VisibleInstanceList","InstanceList","Layer","_refCounter","opaqueSortMode","transparentSortMode","onEnable","onDisable","layerReference","customSortCallback","customCalculateSortValues","_lightsSet","_lightCube","incrementCounter","decrementCounter","skipShadowCasters","sceneShaderVer","spliceOffset","spliceCount","opaque","removeMeshInstanceFromArray","_generateLightHash","strStatic","camPos","camFwd","meshPos","tempx","tempy","tempz","cameraNode","sortMode","_calculateSortDistances","spotCenter","spotEndPoint","tmpVec","chanId","directionalCascades","LightRenderData","createShadowCamera","Light","_color","_intensity","_castShadows","bakeDir","attenuationStart","_cookieTransformSet","_cookieOffsetSet","_innerConeAngle","_cookieMatrix","_renderData","_destroyShadowMap","rd","setColor","falloffMode","vsmBlurSize","innerConeAngle","outerConeAngle","normalOffsetBias","shadowResolution","box","scl","finalColor","linearFinalColor","_updateFinalColor","_this$_scene","layersDirty","stype","cookieOffset","cookieTransform","tempVec$1","tempSphere","MeshNode","component","bounds","LightInfo","store","lightBounds","Lightmapper","renderer","assets","_tempSet","_initCalled","passMaterials","stats","renderPasses","lightmapCount","totalRenderTime","forwardTime","fboTime","shadowMapTime","shadersLinked","blackTex","destroyLightmapCache","dilateShader","constantPixelOffset","constantBakeDir","materials","bakeNodes","destroyRT","lenght","passCount","xformUv1","bakeLmEnd","lmMaterial","allNodes","_node$model","_node$model2","_node$render","lightmapped","notInstancedMeshInstances","collectModels","castShadowsLightmap","meshes","srcArea","lightmapSizeMultiplier","sizeMult","_area","areaMult","totalArea","lightmapMaxResolution","shaderDefs","setLightmapped","startTime","startShaders","startFboTime","startCompileTime","setLightmaping","initBake","bakeInternal","finishBake","nowTime","bakeNode","calculateLightmapSize","layerComposition","bakeLights","sceneLights","lightInfo","restore","revertStatic","bakeLight","casterBounds","lightAffectsNode","setEulerAngles","frustumSize","nodeVisible","lightArray","shadowMapRendered","nodeRT","lightmap","tempRT","tempTex","createMaterials","setupScene","allocateTextures","prepareLightsToBake","updateTransforms","prepareShadowCasters","computeNodeBounds","rcv","computeBounds","shadersUpdatedOn1stPass","_bakeLight$light$shad","lightCameraPrepare","lightCameraPrepareAndCull","setupLightArray","renderShadowMap","backupMaterials","lightmapSize","restoreMaterials","dilateTextures","restoreLights","restoreScene","Morph","_renderTextureFormat","FORMAT_HALF_FLOAT","_textureFormat","_useTextureMorph","_updateMorphFlags","_calculateAabb","_morphPositions","_morphNormals","_initTextureBased","_initVertexBuffers","_postInit","deltaArrays","deltaInfos","deltaNormals","vertexUsed","ids","usedDataIndices","freeIndex","dataCount","morphTextureWidth","morphTextureHeight","halfFloat","arraySize","packedDeltas","_setTexture","_createTexture","pixelData","nonUniformScale","MorphInstance","_weights","setWeight","defaultWeight","_activeTargets","maxSubmitCount","_shaderMorphWeights","createRT","textureVar","rtPositions","rtNormals","morphFactor","zeroTextures","fragmentShader","fs","_getFragmentShader","srcTextureName","submitBatch","usedCount","_getShader","activeTarget","_updateTextureRenderTarget","posIndex","nrmIndex","_vertexBufferPositions","_vertexBufferNormals","absWeight","activeCount","getWeight","maxActiveTargets","_updateTextureMorph","_updateVertexMorph","Model","graph","skinInstances","morphInstances","_shadersVersion","_immutable","srcNodes","cloneNodes","cloneGraph","_duplicate","newNode","cloneMeshInstances","cloneSkinInstances","cloneMorphInstances","cloneSkinInstance","cloneMorphInstance","nodeIndex","cloneMeshInstance","skinInstanceIndex","morphInstanceIndex","getGraph","_prepareRenderStyleForArray","MorphTarget","_name","_defaultWeight","_createVertexBuffer","deltaPositionsType","deltaNormalsType","uniformScale","rotMat","rotMatInv","randomPosTformed","randomPos","rndFactor3Vec","particlePosPrev","velocityVec","localVelocityVec","velocityVec2","localVelocityVec2","radialVelocityVec","particlePos","particleFinalPos","moveDirVec","tmpVec3$1","frac","glMod","encodeFloatRG","encX","encY","ParticleCPUUpdater","_emitter","particleTex","spawnMatrix","extentsInnerRatioUniform","emitterPos","startSpawnTime","rX","rY","rZ","rW","numParticlesPot","emitterShape","edgeX","edgeY","edgeZ","spawnBoundsSphereInnerRatio","emitterRadius","emitterRadiusInner","rate","rate2","packX","worldBounds","worldBoundsSize","packY","packZ","packA","startAngle","startAngle2","rg0","ba0","rg1","ba1","maxNegLife","lifetime","numParticles","rgba3","encZ","encW","encodeFloatRGBA","vbToSort","delta","isOnStop","fullMat","cf","cc","rotSpeed","rotSpeed2","scale2","alpha2","radialSpeed","posCam","useMesh","precision1","vbCPU","numParticleVerts","rndFactor","particleRate","particleLifetime","life","nlife","alphaDiv","calcSpawnPosition","particleEnabled","qRotSpeed","qRotSpeed2","qScale","qScale2","qAlpha","qAlpha2","qRadialSpeed","qRadialSpeed2","qLocalVelocity","qLocalVelocity2","qVelocity","qVelocity2","initialVelocity","wrapBounds","particleDistance","loop","vbOffset","quadX","quadY","quadZ","vbStride","vbOld","p2","spawnMatrix3","emitterMatrix3","emitterMatrix3Inv","ParticleGPUUpdater","frameRandomUniform","emitterPosUniform","emitterScaleUniform","worldBoundsMulUniform","worldBoundsAddUniform","inBoundsSizeUniform","inBoundsCenterUniform","constantParticleTexIN","constantParticleTexOUT","constantEmitterPos","constantEmitterScale","constantSpawnBounds","constantSpawnPosInnerRatio","constantSpawnBoundsSphere","constantSpawnBoundsSphereInnerRatio","constantInitialVelocity","constantFrameRandom","constantDelta","constantRate","constantRateDiv","constantLifetime","constantGraphSampleSize","constantGraphNumSamples","constantInternalTex0","constantInternalTex1","constantInternalTex2","constantInternalTex3","constantEmitterMatrix","constantEmitterMatrixInv","constantNumParticles","constantNumParticlesPot","constantLocalVelocityDivMult","constantVelocityDivMult","constantRotSpeedDivMult","constantSeed","constantStartAngle","constantStartAngle2","constantOutBoundsMul","constantOutBoundsAdd","constantInBoundsSize","constantInBoundsCenter","constantMaxVel","constantFaceTangent","constantFaceBinorm","prevWorldBoundsSize","prevWorldBoundsCenter","randomize","internalTex0","internalTex1","internalTex2","internalTex3","emitterScale","worldBoundsMul","worldBoundsAdd","_setInputBounds","maxVel","emitterMatrix","seed","localVelocityUMax","velocityUMax","rotSpeedUMax","texIN","swapTex","particleTexOUT","particleTexIN","beenReset","particleTexStart","texOUT","rtParticleTexIN","rtParticleTexOUT","shaderParticleUpdateOnStop","shaderParticleUpdateRespawn","shaderParticleUpdateNoRespawn","particleVerts","mult8Bit","mipFilter","saturate","setPropertyTarget","setPropertyOptions","default0Curve","default1Curve","default0Curve3","default1Curve3","particleTexHeight","tmpVec3","setProperty","pName","defaultVal","pack3NFloats","packTextureXYZ_NXYZ","qXYZ","qXYZ2","maxUnsignedGraphValue","A","outUMax","chans","divGraphFrom2Curves","curve1","curve2","B","subGraph","uMax","normalizeGraph","ParticleEmitter","_addTimeTime","DEFAULT_PARAM_TEXTURE","xgrad","ygrad","dtex","_gpuUpdater","_cpuUpdater","constantLightCube","wrapBoundsUniform","colorGraph","scaleGraph","alphaGraph","localVelocityGraph","velocityGraph","rotationSpeedGraph","radialSpeedGraph","lightCube","lightCubeDir","animTilesParams","animParams","animIndexParams","colorParam","localBounds","worldBoundsNoTrail","worldBoundsTrail","prevEmitterExtents","emitterExtents","prevEmitterRadius","timeToSwitchBounds","numParticleIndices","fixedTimeStep","maxSubSteps","simTime","simTimeTotal","rebuild","regenShader","resetMaterial","calculateLocalBounds","nodeWT","calculateBoundsMad","maxR","maxScale","stepWeight","wVels","lVels","accumX","accumY","accumZ","accumR","accumW","spawnBounds","forceCpuParticles","_destroyResources","rebuildGraphs","resetWorldBounds","iSort","emitterExtentsInner","shaderCodeStart","shaderCodeRespawn","shaderCodeNoRespawn","shaderCodeOnStop","_allocate","wasVisible","_initializeTextures","resetTime","addTime","preWarm","prewarm","animNumFrames","animTilesX","animTilesY","qColor","quantizeClamped","localVelocityGraph2","velocityGraph2","qColor2","colorGraph2","rotationSpeedGraph2","scaleGraph2","alphaGraph2","radialSpeedGraph2","colorUMax","scaleUMax","alphaUMax","radialSpeedUMax","qLocalVelocityDiv","qVelocityDiv","qColorDiv","qRotSpeedDiv","qScaleDiv","qAlphaDiv","qRadialSpeedDiv","umax","umax2","lumax","lumax2","rumax","rumax2","lmaxVel","maxRad","qA","qB","qC","qD","qE","packTexture5Floats","packTexture2Floats","qRGB","packTextureRGBA","hasNormal","normalOption","onChangeCamera","inTools","halfLambert","depthSoftening","noFog","_isAnimated","animLoop","orientation","_compParticleFaceParams","binormal","particleNormal","particleFormat","psysVertCount","psysIndexCount","meshData","texCoordOffset","elem","vert","vertID","origLoop","lifetimeFraction","iterations","stepDelta","endTime","interval","calcEndTime","calculateWorldBounds","tilesParams","animStartFrame","animSpeed","animNumAnimations","animIndex","randomizeAnimIndex","onFinished","AreaLightLuts","texture1","texture2","setUniforms","resource","buildTexture","offsetScale","ret","convertToHalfFloat","convertToUint","versions","majorVersion","minorVersion","data1","data2","srcData1","srcData2","identityGraphNode","LineBatch","numLinesAllocated","vbRam","linesUsed","meshInstanceArray","linesToAdd","DataView","multiColor","setFloat32","setUint8","ImmediateData","lineVertexFormat","lineBatches","layerToBatch","quadMesh","textureShader","depthTextureShader","cubeLocalPos","cubeWorldPos","usedGraphNodes","freeGraphNodes","getTextureVS","gl2","quadVb","graphNode","getGraphNode","addLayer","_cubeWorldPos","cubePositions","prepareLineBatch","addLines","spherePoints","numSegments","sin0","cos0","sin1","cos1","finalize","clearMeshInstances","numLines","getLayerIdx","addLayerIdx","Scene","_gravity","_fog","_gammaCorrection","_toneMapping","_skyboxCubeMap","_skyboxIntensity","_skyboxMip","_skyboxRotation","_skyboxRotationMat4","lightmapMode","_stats","dynamicLights","bakedLights","lastStaticPrepareFullTime","lastStaticPrepareSearchTime","lastStaticPrepareWriteTime","lastStaticPrepareTriAabbTime","lastStaticPrepareCombineTime","updateShadersTime","_statsUpdated","_models","_resetSkyboxModel","prev","settings","physics","gravity","global_ambient","fog_color","fog_start","fog_end","fog_density","gamma_correction","tonemapping","skyboxMip","usedTex","dev","skyLayer","cubemaps","different","containsModel","removeShadowCasters","hasAudioContext","AudioContext","webkitAudioContext","Channel","manager","sound","pitch","paused","suspended","startOffset","context","gain","createGain","audio","cloneNode","pause","setVolume","getVolume","isPlaying","unpause","play","_createSource","currentTime","duration","setLoop","setPitch","onManagerVolumeChange","onManagerSuspend","onManagerResume","stop","playbackRate","playbackState","PLAYING_STATE","getDuration","createBufferSource","connect","destination","onended","isNaN","DISTANCE_LINEAR","DISTANCE_INVERSE","DISTANCE_EXPONENTIAL","Channel3d","velocity","panner","createPanner","maxDistance","minDistance","rollOffFactor","distanceModel","setVelocity","getMaxDistance","setMaxDistance","getMinDistance","refDistance","setMinDistance","getRollOffFactor","rolloffFactor","setRollOffFactor","factor","getDistanceModel","pannel","setDistanceModel","posOne","posTwo","distance","fallOff","listener","Listener","_manager","setOrientation","SoundManager","_context","_forceWebAudioApi","forceWebAudioApi","_resumeContext","_unlock","resume","disconnect","close","Key","Node","_keys","Animation","_nodes","_nodeDict","Skin","ibp","Render","_meshes","decRefMeshes","incRefMeshes","AnimCurve","paths","input","interpolation","_paths","_input","_output","_interpolation","AnimData","_components","_data","AnimEvents","_events","AnimTrack","inputs","outputs","animEvents","_duration","_inputs","_outputs","_curves","_animEvents","snapshot","_time","_results","eval","AnimBinder","deltaTime","pathSegments","character","RegExp","curr","entityPath","propertyPath","DEFAULT_LOCALE","DEFAULT_LOCALE_FALLBACKS","PLURALS","definePluralFn","locales","getLang","locale","findAvailableLocale","desiredLocale","availableLocales","fallback","lang","isInteger","mod10","mod100","DEFAULT_PLURAL_FN","getPluralFn","ABSOLUTE_URL","properties$2","AssetVariants","defineVariantProperty","field","filename","file","_file","reload","Untar","assetIdCounter","VARIANT_SUPPORT","pvr","dxt","etc2","etc1","basis","VARIANT_DEFAULT_PRIORITY","Asset","_id","_preload","_resources","_i18n","loaded","loading","registry","getPreferredFile","prefix","separator","_this$registry","_this$registry$_loade","_loader","_app","variant","enableBundles","bundles","listBundlesForAsset","len2","relativePath","assetId","load","resources","getFileUrl","contents","patch","_old","_loadFaces","GlbResources","gltf","scenes","animations","renders","skins","isDataURI","getNumComponents","accessorType","getComponentType","componentType","getComponentSizeInBytes","gltfToEngineSemanticMap","getAccessorData","gltfAccessor","bufferViews","getComponentDataType","sparse","indicesAccessor","valuesAccessor","bufferView","byteOffset","targetIndex","generateNormals","sourceDesc","srcStride","dummyIndices","generateIndices","normalsTemp","i3","triangleCount","p3","p1p2","p1p3","faceNormal","invLen","calculateNormals","cloneTextureAsset","shallowCopyLevels","cloneTexture","createVertexBufferInternal","disableFlipV","positionDesc","sourceOffset","elementOrder","lhsOrder","rhsOrder","isCorrectlyInterleaved","sourceArray","targetStride","sourceStride","vertexData","targetArray","kend","floatOffsets","shortOffsets","byteOffsets","typedArray","flipTexCoordVs","tempMat","tempVec","createMesh","gltfMesh","vertexBufferDict","primitives","canUseMorph","extensions","decoderModule","DracoDecoderModule","extDraco","KHR_draco_mesh_compression","uint8Buffer","DecoderBuffer","Init","outputGeometry","decoder","Decoder","geometryType","GetEncodedGeometryType","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","TRIANGULAR_MESH","DecodeBufferToMesh","INVALID_GEOMETRY_TYPE","ok","ptr","error_msg","numFaces","num_faces","bit32","num_points","dataSize","_malloc","GetTrianglesUInt32Array","HEAPU32","GetTrianglesUInt16Array","HEAPU16","_free","numPoints","extractDracoAttributeInfo","uniqueId","componentSizeInBytes","storageType","attribute","GetAttributeByUniqueId","numValues","num_components","data_type","DT_UINT8","GetAttributeDataArrayForAllPoints","HEAPU8","DT_UINT16","DT_FLOAT32","HEAPF32","attributeInfo","createVertexBufferDraco","useAttributes","attribIds","vbKey","accessorData","byteStride","createVertexBuffer","getPrimitiveType","indexFormat","materialIndex","POSITION","NORMAL","extras","targetNames","weights","createMaterial","gltfMaterial","glossChunk","specularChunk","clearCoatGlossChunk","uvONE","uvZERO","extractTextureTransform","maps","texCoord","textureTransformData","KHR_texture_transform","specData","KHR_materials_pbrSpecularGlossiness","diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture","pbrData","pbrMetallicRoughness","baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture","normalTexture","occlusionTexture","emissiveFactor","emissiveTexture","alphaMode","alphaCutoff","doubleSided","ccData","KHR_materials_clearcoat","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","createNode","gltfNode","setLocalPosition","setLocalEulerAngles","setLocalScale","setLocalRotation","translation","createLight","gltfLight","lightProps","Entity","addComponent","createSkins","glbSkins","gltfSkin","bindMatrix","joints","numJoints","inverseBindMatrices","ibmData","ibmValues","createSkin","createAnimations","preprocess","animation","postprocess","gltfAnimation","animationIndex","gltfAccessors","createAnimData","interpMap","inputMap","outputMap","quatArrays","transformSchema","splitPath","prevIndex","createAnimation","createResources","textureAssets","global","process","createNodes","sceneRoot","childNode","createScenes","KHR_lights_punctual","gltfLights","createLights","textureAsset","createMeshes","linkSkins","loadImageAsync","gltfImage","urlBase","processAsync","onLoad","loadTexture","mimeType","crossOrigin","isBlobUrl","extension","URL","revokeObjectURL","blob","Blob","createObjectURL","parseGltf","gltfChunk","TextDecoder","decode","decodeBinaryUtf8","parseFloat","parseChunk","glbData","magic","getUint32","chunkLength","chunkType","chunkData","binaryChunk","parseGlb","parseBufferViewsAsync","gltfBufferView","remaining","GlbParser","gltfBuffer","arrayBuffer","byteString","atob","binaryArray","loadBuffersAsync","images","gltfTexture","gltfImages","textureIndex","imageIndex","textureList","gltfSampler","getFilter","getWrap","wrapS","wrapT","applySampler","gltfImageIndex","loadTexturesAsync","result_","AnimationHandler","glbResources","animData","anim","addNode","defPos","defaults","defRot","defScl","AnimClipHandler","AnimStateGraph","_parameters","layerId","dataLayer","states","transitions","dataLayerTransition","conditions","conditionKeys","condition","parameterName","paramId","AnimStateGraphHandler","Sound","Audio","ie","msie","rv","toMIME","AudioHandler","message","_createSound","_isSupported","success","decodeAudioData","onReady","BinaryHandler","Bundle","files","_blobUrls","UntarScope","isWorker","utfDecoder","asciiDecoder","PaxHeader","fields","_fields","UntarInternal","_arrayBuffer","_bufferView","_globalPaxHeader","_paxHeader","_bytesRead","paxArray","bytesRead","spaceIndex","fieldLength","applyHeader","fieldName","fieldValue","_hasNext","_readNextFile","headersDataView","ustarFormat","normalFile","remainder","namePrefix","untar","filenamePrefix","onmessage","postMessage","workerUrl","UntarWorker","_requestId","_pendingRequests","_filenamePrefix","_worker","getWorkerUrl","_onMessage","terminate","BundleHandler","_assets","_untar","hasPendingRequests","SkinInstanceCachedObject","SkinInstanceCache","skinInst","getCachedSkinInstance","addCachedSkinInstance","cachedObjArray","_skinInstanceCache","cachedObj","cachedObjIndex","ContainerResource","_defaultMaterial","_assetName","createModel","modelAsset","createAsset","skinedMeshInstances","createMeshInstance","cloneHierarchy","glb","attachedMi","meshGroup","cloneMi","lightEntity","childClone","sceneClones","createCachedSkinedInstance","createSceneHierarchy","destroyAsset","remove","unload","destroyAssets","assetName","subAsset","sceneNodes","nodeType","skinIndex","ContainerHandler","parseData","parseAsync","_getUrlWithoutParams","container","CssHandler","CubemapHandler","loader","_registry","loadAssets","cubemapAsset","loadFaces","assetIdA","assetIdB","assetIds","assetData","oldAssets","_handlerState","oldResources","getType","prelitLevels","prelit","faceAssets","cmpArrays","faceTextures","faceLevels","faceTexture","faces","arr1","valueInt","texAsset","getAssetIds","loadedAssetIds","loadedAssets","awaiting","onError","processTexAsset","resolveId","compareAssetIds","assetId_","FolderHandler","FONT_MSDF","Font","em","upgradeDataSchema","newChars","existing","newKey","letter","FontHandler","_loadTextures","numLoaded","onLoaded","font","CompressUtils","compressed","singleVecs","___1","tripleVecs","___2","fieldFirstCode","fieldArray","fieldCodeBase","Decompress","_handleMap","_handleArray","_result","_handleKey","origKey","run","_handleArElt","elt","SceneParser","isTemplate","_isTemplate","entities","compressedFormat","entDecompressed","curData","curEnt","_createEntity","childEnt","_openComponentData","setGuid","resource_id","_setPosRotScale","_template","template","labels","label","addLabel","systemsList","systems","entityData","getGuid","system","componentData","SceneUtils","errMsg","stack","HierarchyHandler","script","preloading","HtmlHandler","JsonHandler","AssetReference","propertyName","_scope","_onAssetLoad","_onAssetAdd","_onAssetRemove","_onAssetUnload","_onLoad","_onAdd","_onRemove","_onUnload","_bind","_url","getByUrl","StandardMaterialValidator","removeInvalid","enumValidators","_createEnumValidator","setInvalid","validate","TYPES","pathMapping","enumType","chunkNames","validated","JsonStandardMaterialParser","migrated","migrate","_validate","initialize","mapping_format","RENAMED_PROPERTIES","_new","DEPRECATED_PROPERTIES","PLACEHOLDER_MAP","MaterialHandler","_placeholderTextures","_parser","white","gray","black","_bindAndAssignAssets","materialAsset","_createPlaceholders","placeholder","_getPlaceholderTexture","_assignTexture","_assignPlaceholderTexture","_assignCubemap","assetReference","TEXTURES","dataAssetId","materialTexture","isPlaceHolderTexture","dataValidated","_onTextureLoad","_onTextureAdd","_onTextureRemoveOrUnload","getAbsoluteUrl","CUBEMAPS","_onCubemapLoad","_onCubemapAdd","_onCubemapRemoveOrUnload","GlbModelParser","PartitionedVertex","boneIndices","SkinPartition","partition","vertexStart","indexStart","indexMap","originalMesh","vertexArray","remappedIndex","influence","blendWeight","originalBoneIndex","getBoneRemap","vertexIndices","bonesToAdd","bonesToAddCount","needToAdd","addVertex","partitionSkin","materialMappings","indicesToReferences","vertexArrays","getVertex","meshesToSplit","partitions","primitiveVertices","primitiveIndices","basePartition","iIndex","added","iBonePartition","addPrimitive","partitionedVertices","partitionedIndices","iSour","iDest","splitSkins","splitSkin","splitVertexArray","dstBoneIndices","srcBoneIndices","referencesToIndices","JSON_PRIMITIVE_TYPE","JSON_VERTEX_ELEMENT_TYPE","JsonModelParser","modelData","_parseNodes","_parseSkins","_parseVertexBuffers","_parseIndexBuffers","morphs","_parseMorphs","_parseMeshes","_parseMeshInstances","nodeData","parents","skinData","ibm","morphIndex","morphTarget","morphTargetArray","sparseToFull","totalCount","full","dstIndex","_getMorphVertexCount","targetAabb","attributeMap","texCoord0","texCoord1","texCoord2","texCoord3","texCoord4","texCoord5","texCoord6","texCoord7","attributeName","maxVerts","meshAabb","meshInstanceData","ModelHandler","_parsers","addParser","decider","parser","mapping","handleMaterial","onContainerAssetLoaded","containerAsset","renderAsset","containerResource","renderIndex","onContainerAssetAdded","onContainerAssetRemoved","RenderHandler","ResourceLoader","_handlers","_requests","handler","handleLoad","urlObj","_onFailure","extra","normalizedUrl","hasUrl","canLoadUrl","loadUrl","fileUrlFromBundle","_loadNull","SceneHandler","applySceneSettings","_legacy","_createdLoadingScreen","ScriptType","_pcScriptName","ScriptHandler","_push","createLoadingScreen","_scripts","_loadScript","legacy","Type","_types","head","onload","assert","ShaderHandler","spriteNormals","spriteIndices","Sprite","_pixelsPerUnit","pixelsPerUnit","renderMode","_atlas","_frameKeys","frameKeys","_updatingProperties","_meshesDirty","_createMeshes","createMeshFunc","_create9SliceMesh","_createSimpleMesh","frame","frames","texWidth","texHeight","hp","pivot","lu","bv","ru","tv","frameKey","_onSetFrames","_onFrameChanged","_onFrameRemoved","onTextureAtlasLoaded","atlasAsset","onTextureAtlasAdded","SpriteHandler","__data","textureAtlasAsset","startUpdate","_updateAtlas","endUpdate","_onAssetChange","Template","_templateRoot","_parseTemplate","TemplateHandler","TextHandler","TextureAtlas","_texture","_frames","border","JSON_ADDRESS_MODE$1","JSON_FILTER_MODE$1","regexFrame","TextureAtlasHandler","getHandler","textureUrl","minfilter","magfilter","addressu","addressv","BasisWorker","rgbPriority","rgbaPriority","BASIS_FORMAT","opaqueMapping","astc","atc","none","alphaMapping","PIXEL_FORMAT","basisToEngineMapping","basisFormat","deviceDetails","formats","unswizzleGGGR","genB","R","G","pack565","performanceNow","transcode","funcStart","basisFile","BasisFile","getImageWidth","getImageHeight","getNumImages","getNumLevels","hasAlpha","getHasAlpha","isUASTC","testInOrder","chooseTargetFormat","unswizzle","isGGGR","notPOT","startTranscoding","levelData","dstSize","getImageTranscodedSizeInBytes","transcodeImage","is16BitFormat","isCompressedFormat","transcodeTime","unswizzledGGGR","workerTranscode","queue","config","importScripts","basisUrl","instantiateWasm","imports","successCallback","WebAssembly","instantiate","then","catch","reason","initializeBasis","getCompressionFormats","BasisQueue","clients","job","shift","client","BasisClient","eager","worker","handleResponse","enqueueClient","defaultRgbPriority","defaultRgbaPriority","lazyConfig","initializing","basisInitialize","lazyInit","glueUrl","wasmUrl","fallbackUrl","wasmModule","wasmModules","PRELOAD_MODULES","moduleName","ASSET_PREFIX","numWorkers","eagerWorkers","getWorkerBlob","File","sendResponse","basisCode","Module","of","Instance","wasmSupported","fetchPromise","fetch","compileManual","compile","module_","compileStreaming","prepareWorkerModules","clientConfig","BasisParser","_asset$file","_asset$file$variants","_asset$file$variants$","enqueueJob","basisTranscode","ImgParser","useImageBitmap","_loadImageBitmap","_loadImage","setSource","originalUrl","Image","retryTimeout","createImageBitmap","imageBitmap","IDENTIFIER","KNOWN_FORMATS","KtxParser","textureData","dataU32","endianness","glTypeSize","glInternalFormat","glBaseInternalFormat","pixelDepth","numberOfArrayElements","numberOfFaces","numberOfMipmapLevels","bytesOfKeyValueData","byteSize","isCubemap","mipmapLevel","imageSizeInBytes","LegacyDdsParser","isFourCc","fcc","bpp","FCC_DXT1","FCC_PVRTC_2BPP_RGB_1","FCC_PVRTC_4BPP_RGB_1","floating","pvrtc2","pvrtc4","mipWidth","mipHeight","mipBuff","Reader","readUint8","getUint8","HdrParser","reader","readLine","_error","_readPixels","_readPixelsFlat","rgbe","peekUint8s","scanstart","readUint8s","JSON_ADDRESS_MODE","JSON_FILTER_MODE","JSON_TEXTURE_TYPE","TextureHandler","imgParser","parsers","dds","ktx","_getParser","downsample","sampledWidth","sampledHeight","sampledData","xs","ys","xsys","_completePartialMipmapChain","preferredFile","TagsCache","tagsRest","missingIndex","AssetRegistry","_names","_tags","_urls","filters","include","preload","addItem","_onTagAdd","_onTagRemove","removeItem","_opened","parentNode","loadFromUrlAndFilename","loadFromUrlError","startLoad","loadedAsset","_loadModel","continuation","basename","mappingUrl","_loadMaterials","onMaterialLoaded","loadFromUrl","onTextureLoaded","texParams","idxs","findAll","BundleRegistry","_bundleAssets","_assetsInBundles","_urlsInBundles","_fileRequests","_onAssetAdded","_onAssetRemoved","_registerBundleEventListeners","_indexAssetInBundle","_indexAssetFileUrls","bundleAssetId","_onBundleLoaded","_onBundleError","bundleAsset","urls","_getAssetFileUrls","_normalizeUrl","numFiles","_unregisterBundleEventListeners","decodedUrl","hasBlobUrl","requests","getBlobUrl","_findLoadedOrLoadingBundleForUrl","bundle","ScriptRegistry","scriptName","__name","swap","scriptInstance","scriptInstances","scriptInstancesInitialized","_scriptsIndex","_scriptsData","__initializeAttributes","_initialized","_postInitialized","postInitialize","nameOrType","scriptType","I18nParser","entry","messages","I18n","_translations","_availableLangs","_findFallbackLocale","_locale","_lang","translations","pluralFn","_pluralFn","parsed","hasAny","desiredLang","replaceLang","addData","removeData","FILLMODE_FILL_WINDOW","FILLMODE_KEEP_ASPECT","RESOLUTION_AUTO","RESOLUTION_FIXED","VrDisplay","displayId","_frameData","VRFrameData","sitToStandInv","leftPos","rightPos","combinedPos","combinedFov","combinedAspect","_presentChange","detail","vrdisplay","isPresenting","leftEye","getEyeParameters","rightEye","renderWidth","renderHeight","setResolution","_allowResize","setCanvasResolution","getFrameData","leftProjectionMatrix","rightProjectionMatrix","stage","stageParameters","sittingToStandingTransform","leftViewMatrix","rightViewMatrix","maxFov","deltaX","deltaY","deltaZ","fwdX","fwdY","fwdZ","depthNear","depthFar","requestPresent","exitPresent","submitFrame","resetPose","capabilities","VrManager","isSupported","displays","_onDisplayConnect","_onDisplayDisconnect","_attach","_getDisplays","_addDisplay","_detach","poll","getVRDisplays","XRTYPE_VR","XRTYPE_AR","XRDEPTHSENSINGUSAGE_CPU","poolVec3","poolQuat","XrHitTestSource","xrHitTestSource","transient","_xrHitTestSource","_transient","sources","hitTest","onStop","cancel","transientResults","getHitTestResultsForTransientInput","transientResult","inputSource","_getByInputSource","updateHitResults","getHitTestResults","pose","getPose","_referenceSpace","XrHitTest","_supported","XRSession","requestHitTestSource","_session","_onSessionStart","_onSessionEnd","fireError","isAvailable","xrRay","profile","spaceType","offsetRay","XRRay","DOMPoint","requestReferenceSpace","referenceSpace","space","entityTypes","_onHitTestSource","requestHitTestSourceForTransientInput","hitTestSource","XrFinger","hand","_hand","_fingers","_joints","_tip","tipJointIds","XRHand","tipJointIdsIndex","XrJoint","finger","_finger","_wrist","_radius","_localTransform","_worldTransform","_localPosition","_localRotation","_rotation","_updateTransforms","fingerJointIds","vecA$2","vecB$2","vecC","XrHand","xrHand","_xrInputSource","_inputSource","_tracking","_jointsById","_tips","joint","wrist","jointId","tip","xrInputSource","jointSpace","visibilityState","getJointPose","j1","j4","j6","j9","j16","j21","_dirtyRay","_rayLocal","jointL","jointR","handedness","_fingerIsClosed","_squeezing","quat$1","ids$1","XrInputSource","_ray","_grip","_selecting","_elementInput","_elementEntity","_hitTestSources","gripSpace","gripPose","targetRayPose","targetRaySpace","parentTransform","_updateRayTransforms","profiles","onHitTestSourceAdd","onHitTestSourceRemove","targetRayMode","gamepad","XrInput","_inputSources","_onInputSourcesChangeEvt","_onInputSourcesChange","inputSources","_addInputSource","removed","_removeInputSource","hitTestSources","vec3A","vec3B","mat4A","mat4B","XrLightEstimation","_available","_lightProbeRequested","_lightProbe","_sphericalHarmonics","requestLightProbe","lightProbe","wasRequested","active","lightEstimate","getLightEstimate","pli","primaryLightIntensity","primaryLightDirection","setFromAxisAngle","sphericalHarmonicsCoefficients","XrTrackedImage","_bitmap","_measuredWidth","_trackable","_emulated","_pose","widthInMeters","bitmap","XrImageTracking","XRImageTrackingResult","_images","trackedImage","getTrackedImageScores","Promise","all","bitmaps","getImageTrackingResults","trackingState","measuredWidthInMeters","_dirtyTransform","imageSpace","XrDomOverlay","XRDOMOverlayState","_root","domOverlayState","XrDepthSensing","_depthInfoCpu","_depthInfoGpu","_usage","_dataFormat","_matrixDirty","_matrix","_emptyBuffer","supported","depthUsage","depthDataFormat","depthInfo","resized","dataBuffer","depthInfoCpu","depthInfoGpu","getDepthInformation","_updateTexture","normDepthBufferFromNormView","getDepthInMeters","XRDepthInformation","rawValueToMeters","XrPlane","planeDetection","xrPlane","_planeDetection","_xrPlane","_lastChangedTime","lastChangedTime","_orientation","planeSpace","polygon","XrPlaneDetection","XRPlane","_planesIndex","_planes","detectedPlanes","XrManager","_spaceType","_baseLayer","depthSensing","domOverlay","imageTracking","lightEstimation","viewsPool","_depthNear","_depthFar","_deviceAvailabilityCheck","_setClipPlanes","requiredFeatures","optionalFeatures","usagePreference","dataFormatPreference","unshift","prepareImages","trackedImages","_onStartOptionsReady","requestSession","_sessionSupportCheck","isSessionSupported","available","onVisibilityChange","onClipPlanesChange","onEnd","tick","XRWebGLLayer","updateRenderState","baseLayer","renderState","framebufferWidth","framebufferHeight","getViewerPose","lengthNew","posePosition","poseOrientation","viewRaw","getViewport","inverse","Component","schema","_accessorsBuilt","buildAccessors","onSetEnabled","_buildAccessors","record","ComponentSystem","ComponentType","DataType","initializeComponentData","properties","convertValue","matchingProperties","_helper","dt","_toolsUpdate","_animationUpdate","_fixedUpdate","_postUpdate","_erase","_extends","AnimCache","_len","_t","_hermite","_findKey","idx0","idx1","hermite","AnimSnapshot","animTrack","AnimClip","track","speed","playing","eventHandler","_track","_snapshot","_playing","_speed","_loop","_blendWeight","_blendOrder","_eventHandler","_eventCursor","blendOrder","frameStartTime","frameEndTime","clippedFrameDuration","eventCursor","activeEventsForFrame","AnimEvaluator","binder","_binder","_clips","clip","resolved","targetPath","blendCounter","clips","unresolve","removeClip","rebind","removeClips","addClip","_stableSort","_set","_blend","_dot","_normalize","_blendQuat","_blendVec","lessFunc","AnimTarget","_func","_targetPath","DefaultAnimBinder","flatten","targetCache","findMeshInstances","nodeCounts","activeNodes","handlers","createAnimTarget","textureName","animComponent","findByPath","encodedPath","encode","findNode","valueCount","InterpolatedKey","_written","_keyFrames","_quat","_pos","_targetNode","Skeleton","_animation","looping","_interpolatedKeys","_interpolatedKeyDict","_currKeyIndices","addInterpolatedKeys","interpKey","numNodes","nodeName","updateGraph","k1","k2","foundKey","currKeyIndex","slerp","skel1","skel2","key1","key2","dstKey","setTarget","getTarget","AnimationComponent","animationsIndex","onSetAnimations","onSetAssets","onSetLoop","blendTime","prevAnim","currAnim","skeleton","animEvaluator","_createAnimationController","blendSpeed","fromSkel","toSkel","_resetAnimationController","hasJson","hasGlb","setGraph","onAssetReady","onAssetAdd","onAssetChanged","onAssetRemoved","restarted","_stopCurrentAnimation","modelComponent","setModel","animName","loadAnimationAssets","AnimationComponentData","_schema$l","AnimationComponentSystem","onBeforeRemove","onUpdate","clonedAnimations","clonedAnimationsIndex","AnimNode","_state","_pointLength","_weightedSpeed","_weight","_animTrack","totalWeight","weightedSpeed","AnimBlendTree","syncAnimations","createTree","findParameter","_parameterValues","_findParameter","_syncAnimations","_pointCache","calculateWeights","paramsEqual","updatedParameter","speedMultiplier","getNodeCount","AnimBlendTree1D","updateParameterValues","weightedDurationSum","child2Distance","absoluteSpeed","AnimBlendTreeCartesian2D","pointKey","pi","pipj","minj","weightSum","_p","_pip","pointDistanceCache","AnimBlendTreeDirectional2D","pointLength","angleRad","pLength","piLength","pjLength","pointCache","weightedChildDuration","AnimBlendTreeDirect","ANIM_INTERRUPTION_NONE","ANIM_PARAMETER_INTEGER","ANIM_PARAMETER_FLOAT","ANIM_PARAMETER_BOOLEAN","ANIM_PARAMETER_TRIGGER","ANIM_STATE_START","ANIM_STATE_END","ANIM_STATE_ANY","ANIM_CONTROL_STATES","AnimState","controller","blendTree","_controller","_animations","_animationList","_blendTree","_createTree","currNode","getChild","pathString","indexOfAnimation","_getNodeFromPath","nodeCount","trackClipName","trackClip","findClip","AnimTransition","exitTime","transitionOffset","interruptionSource","_from","_to","_priority","_conditions","_exitTime","_transitionOffset","_interruptionSource","AnimController","_animEvaluator","_states","_stateNames","_transitions","transition","_findTransitionsFromStateCache","_findTransitionsBetweenStatesCache","_previousStateName","_activeStateName","_activate","_currTransitionTime","_totalTransitionTime","_isTransitioning","_transitionInterruptionSource","_transitionPreviousStates","_timeInState","_timeInStateBefore","_findState","stateName","activeState","playable","_getActiveStateProgressForTime","activeStateName","maxDuration","activeStateAnimations","activeClip","sourceStateName","destinationStateName","conditionsMet","_findTransitionsBetweenStates","_findTransitionsFromState","hasExitTime","progressBefore","progress","_transitionHasConditionsMet","startTransition","previousState","interpolatedTime","hasTransitionOffset","timeInState","timeInStateBefore","offsetTime","timelineDuration","normalizedWeight","activeStateDuration","newStateName","_findTransition","updateStateFromTransition","addAnimation","_transitionToState","stateWeight","activeClips","totalClips","v2","v3","v4","AnimComponentBinder","propertyComponent","_getEntityFromHierarchy","findComponent","_createAnimTargetForProperty","entityHierarchy","currEntity","resolveLeaf","steps","packFunc","_resolvePath","setterFunc","toUpperCase","objKey","propertyHierarchy","materialPropertyName","setter","animDataType","animDataComponents","_setter","_packFloat","_packBoolean","_packVec2","_packVec3","_packVec4","_packColor","_packQuat","AnimComponentLayer","_component","assignAnimation","removeNodeAnimations","previousStateName","activeStateProgress","activeStateCurrentTime","transitioning","transitionProgress","AnimComponent","_onStateGraphAssetChangeEvent","_stateGraph","loadStateGraph","_stateGraphAsset","_animationAssets","_layerIndices","_asset","removeStateGraph","findByGuid","_layerIndicies","animBinder","layerName","findAnimationLayer","_addLayer","stateGraph","paramKeys","paramKey","setupAnimationAssets","stateKey","animationAsset","stateGraphAsset","layerPlaying","_this$addLayer","getParameterValue","setParameterValue","AnimComponentData","_schema$k","AnimComponentSystem","onAnimationUpdate","complexProperties","animationAssets","layerIndices","AudioListenerComponent","audiolistener","setCurrentListener","AudioListenerComponentData","_schema$j","AudioListenerComponentSystem","AudioSourceComponent","onSetVolume","onSetPitch","onSetMinDistance","onSetMaxDistance","onSetRollOffFactor","onSetDistanceModel","onSet3d","playSound3d","currentSource","playSound","newAssets","_inTools","loadAudioSourceAssets","initialized","_done","AudioSourceComponentData","_schema$i","AudioSourceComponentSystem","onInitialize","onRemove","audiosource","EntityReference","parentComponent","entityPropertyName","eventConfig","_parentComponent","_entityPropertyName","_entity","_configureEventListeners","_onEntityDestroy","_toggleLifecycleListeners","externalEventConfig","internalEventConfig","externalEventListenerConfigs","_parseEventListenerConfig","internalEventListenerConfigs","_eventListenerConfigs","_listenerStatusFlags","_gainListeners","_loseListeners","listenerDescription","listenerDescriptionParts","sourceName","eventName","onOrOff","_onSetEntity","_onParentComponentRemove","_onPostInitialize","_onSceneLoaded","allComponentSystems","componentSystem","_onComponentAdd","_onComponentRemove","_updateEntityReference","nextEntity","nextEntityGuid","_onBeforeEntityChange","_onAfterEntityChange","_toggleEntityListeners","_callAllGainOrLoseListeners","componentName","_callGainOrLoseListener","_toggleComponentListeners","listenerMap","isDestroying","_safeToggleListener","isAdding","_getEventSource","VisualState","STATES_TO_TINT_NAMES","STATES_TO_SPRITE_ASSET_NAMES","STATES_TO_SPRITE_FRAME_NAMES","ButtonComponent","_visualState","_isHovering","_hoveringCounter","_isPressed","_defaultTint","_defaultSpriteAsset","_defaultSpriteFrame","_imageReference","_onImageElementGain","_onImageElementLose","_onSetColor","_onSetOpacity","_onSetSpriteAsset","_onSetSpriteFrame","_onSetActive","_onSetTransitionMode","_onSetTransitionValue","_onElementComponentAdd","_onElementComponentRemove","_updateVisualState","_cancelTween","_resetToDefaultVisualState","_forceReapplyVisualState","_toggleHitElementListeners","transitionMode","_storeDefaultVisualState","_hasHitElementListeners","_onMouseEnter","_onMouseLeave","_onMouseDown","_onMouseUp","_onTouchStart","_onTouchEnd","_onTouchLeave","_onTouchCancel","_onSelectStart","_onSelectEnd","_onSelectEnter","_onSelectLeave","_onClick","hasComponent","_storeDefaultColor","_storeDefaultOpacity","_storeDefaultSpriteAsset","spriteAsset","_storeDefaultSpriteFrame","spriteFrame","_isApplyingTint","_isApplyingSprite","_fireIfActive","force","oldVisualState","newVisualState","_determineVisualState","tintColor","_applyTint","spriteAssetName","spriteFrameName","_applySprite","_applyTintImmediately","fadeDuration","_applyTintWithTween","color4","_tweenInfo","lerpColor","elapsedTime","elapsedProportion","_updateTintTween","onParentComponentEnable","depthLayer$1","ButtonComponentData","imageEntity","hitPadding","hoverTint","pressedTint","inactiveTint","hoverSpriteAsset","hoverSpriteFrame","pressedSpriteAsset","pressedSpriteFrame","inactiveSpriteAsset","inactiveSpriteFrame","_schema$h","ButtonComponentSystem","_onRemoveComponent","button","PostEffect","effect","inputTarget","outputTarget","PostEffectQueue","destinationRenderTarget","effects","depthTarget","renderTargetScale","resizeTimeout","resizeLast","_resizeTimeoutCallback","resizeRenderTargets","onCameraRectChanged","useDepth","getHdrFormat","_allocateColorBuffer","useStencil","destroyTextureBuffers","isFirstEffect","_createOffscreenTarget","newEntry","_sourceTarget","_newPostEffect","needsDepthBuffer","_requestDepthMap","_destroyOffscreenTarget","_releaseDepthMap","_requestDepthMaps","_onCanvasResized","fx","destTarget","_releaseDepthMaps","desiredWidth","desiredHeight","_resizeOffscreenTarget","properties$1","readonly","CameraComponent","_disablePostEffectsLayer","_postEffects","dirtyLayerCompositionCameras","removeCamera","addCamera","screenx","screeny","cameraz","screenToWorld","worldToScreen","oldComp","newComp","addCameraToLayers","onLayerAdded","onLayerRemoved","onLayersChanged","postEffects","removeCameraFromLayers","calculateAspectRatio","vr","canPresent","CameraComponentData","_schema$g","CameraComponentSystem","onAppPrerender","cameraComponent","setClipPlanes","sortCamerasByPriority","ammoVec1$1","ammoQuat$1","ammoTransform$1","CollisionComponent","_compoundParent","_onInsert","onSetType","onSetHalfExtents","onSetRadius","onSetHeight","onSetAxis","onSetAsset","onSetRenderAsset","onSetModel","onSetRender","changeType","recreatePhysicalShapes","onRenderAssetRemoved","implementations","doRecreatePhysicalShape","compound","shapes","getNumChildShapes","getChildShape","Ammo","rigidbody","ancestor","collision","_updateEachDescendantTransform","bodyComponent","enableSimulation","_getNodeTransform","addChildShape","trigger","disableSimulation","_destroying","_removeCompoundChild","CollisionComponentData","BODYTYPE_STATIC","BODYTYPE_DYNAMIC","BODYTYPE_KINEMATIC","BODYMASK_NOT_STATIC","Trigger","btVector3","btQuaternion","btTransform","setOrigin","createBody","setRestitution","setFriction","setDamping","setLinearFactor","setAngularFactor","setCollisionFlags","getCollisionFlags","destroyBody","_getEntityTransform","setWorldTransform","addBody","_triggers","forceActivationState","updateTransform","removeBody","mat4","vec3","quat","tempGraphNode","_schema$f","CollisionSystemImpl","beforeInitialize","afterInitialize","createPhysicalShape","firstCompoundChild","_updateEachDescendant","_addEachDescendant","updateCompoundChildTransform","removeModel","CollisionBoxSystemImpl","ammoHe","btBoxShape","CollisionSphereSystemImpl","btSphereShape","CollisionCapsuleSystemImpl","btCapsuleShapeX","btCapsuleShape","btCapsuleShapeZ","CollisionCylinderSystemImpl","btCylinderShapeX","btCylinderShape","btCylinderShapeZ","CollisionConeSystemImpl","btConeShapeX","btConeShape","btConeShapeZ","CollisionMeshSystemImpl","triMesh","_triMeshCache","getIndices","numTriangles","v1","btTriangleMesh","addTriangle","triMeshShape","btBvhTriangleMeshShape","scaling","_getNodeScaling","setLocalScaling","btCompoundShape","createAmmoMesh","loadAsset","destroyShape","beforeRemove","worldScale","previousScale","getLocalScaling","numShapes","CollisionCompoundSystemImpl","CollisionComponentSystem","impl","_createImplementation","_getImplementation","removeChildShape","_getCompoundChildShapeIndex","removeChildShapeByIndex","previousType","newType","relative","_calculateNodeRelativeTransform","getLocalTransform","getOrigin","ammoQuat","ComponentSystemRegistry","ELEMENTTYPE_IMAGE","ELEMENTTYPE_TEXT","StencilParameters","ImageRenderable","_element","receiveShadow","_meshDirty","setMaterial","forceUpdateAabb","addModelToLayers","lastChild","getLastChild","last","getMaskOffset","visibleFn","_isScreenCulled","isVisibleForCamera","ImageElement","_system","_textureAsset","_materialAsset","_spriteAsset","_spriteFrame","_mask","_maskRef","_outerScale","_outerScaleUniform","_innerOffset","_innerOffsetUniform","_atlasRect","_atlasRectUniform","_defaultMesh","_createMesh","_colorUniform","_onScreenChange","screen","_onParentResizeOrPivotChange","_onScreenSpaceChange","_onDrawOrderChange","_onResolutionChange","setMesh","_updateMesh","_updateMaterial","previous","setDrawOrder","setUnmaskDrawOrder","defaultImageMaterials","nineSliced","nineTiled","_hasUserMaterial","getImageElementMaterial","setCull","setScreenSpace","setLayer","calculatedWidth","calculatedHeight","vertexDataF32","_isScreenSpace","atlasTextureWidth","atlasTextureHeight","setAabbFunc","frameData","borderWidthScale","borderHeightScale","ppu","scaleMulX","scaleMulY","scaleX","scaleY","nineSlice","_beingInitialized","setMask","_onMaterialAdded","_bindMaterialAsset","_onMaterialLoad","_onMaterialChange","_onMaterialRemove","_onTextureAdded","_bindTextureAsset","_onTextureChange","_onTextureRemove","_onSpriteAssetAdded","_bindSpriteAsset","_onSpriteAssetLoad","_onSpriteAssetChange","_onSpriteAssetRemove","_onTextureAtlasLoad","atlasAssetId","_onSpriteMeshesChange","_onSpritePpuChange","_onAtlasTextureChange","_updateSprite","stencilParams","maskedBy","sp","defaultScreenSpaceImageMaskMaterial","defaultImageMaskMaterial","defaultScreenSpaceImageMaterial","defaultImageMaterial","_prev","_unbindSpriteAsset","_unbindSprite","_bindSprite","_toggleMask","LocalizedAsset","i18n","_onSetLocale","_autoLoad","_disableLocalization","_defaultAsset","_localizedAsset","_onDefaultAssetAdd","_onLocaleAdd","_onLocaleRemove","_onDefaultAssetRemove","_onLocalizedAssetLoad","_onLocalizedAssetChange","_onLocalizedAssetRemove","_bindLocalizedAsset","localizedAsset","localizedAssetId","getLocalizedAssetId","defaultAsset","_unbindDefaultAsset","_bindDefaultAsset","_onLocalizedAssetAdd","_unbindLocalizedAsset","IDENTIFIER_REGEX","Scanner","symbols","_symbols","_last","_cur","_buf","_mode","token","_read","tokenStrings","read","buf","_eof","_tag","_next","_store","_whitespace","_string","_isIdentifierSymbol","_identifier","Parser","_scanner","_parseTag","identifier","merge","combineTags","evaluateMarkup","stripped_symbols","invalidTag","numSymbols","edges","tagStack","removeTags","addTags","edgeKeys","resolvedTags","edge","prevTag","resolvedTag","resolveMarkupTags","Markup","MeshInfo","quad","LINE_BREAK_CHAR","WHITESPACE_CHAR","WORD_BOUNDARY_CHAR","ALPHANUMERIC_CHAR","CJK_CHAR","NO_LINE_BREAK_CJK_CHAR","CONTROL_CHARS","CONTROL_GLYPH_DATA","xadvance","xoffset","yoffset","TextElement","_colorPalette","_symbolColors","_i18nKey","_fontAsset","disableLocalization","_onFontLoad","_onFontChange","_onFontRemove","_font","_spacing","_fontSize","_fontMinY","_fontMaxY","_originalFontSize","_maxFontSize","_minFontSize","_autoFitWidth","_autoFitHeight","_maxLines","_lineHeight","_scaledLineHeight","_wrapLines","_drawOrder","_alignment","_autoWidth","_autoHeight","_meshInfo","_aabbDirty","_noResize","_currentMaterialType","_maskedMaterialSrc","_rtlReorder","_unicodeConverter","_rtl","_outlineColor","_outlineColorUniform","_outlineThicknessScale","_outlineThickness","_shadowColor","_shadowColorUniform","_shadowOffsetScale","_shadowOffset","_shadowOffsetUniform","_enableMarkup","_onParentResize","_onPivotChange","_onLocaleSet","_onLocalizationData","_rangeStart","_rangeEnd","_setMaterial","_updateText","fontAsset","_resetLocalizedText","_setText","getText","unicodeConverter","unicodeConverterFunc","getUnicodeConverter","rtlReorderFunc","getRtlReorder","rtl","paletteMap","charactersPerTexture","_calculateCharsPerTexture","removedModel","screenCulled","meshInfo","_removeMeshInstance","_setTextureParams","_getPxRange","_setMaskedBy","_updateMeshes","_updateRenderRange","oldMesh","getTextElementMaterial","nextchar","json","minFont","maxFont","autoFit","_shouldAutoFit","_xMinusTrailingWhitespace","wordStartX","wordStartIndex","lineStartIndex","numWordsThisLine","numCharsThisLine","numBreaksThisLine","splitHorizontalAnchors","anchor","maxLineWidth","autoWidth","fontMinY","fontMaxY","breakLine","lineBreakIndex","lineBreakX","_lineWidths","sliceStart","sliceEnd","_lineContents","retryUpdateMeshes","color_r","color_g","color_b","dataScale","advance","quadsize","kerning","kernTable","kernLeft","isWhitespace","candidateLineWidth","backtrack","backtrackEnd","backChar","backCharData","backMeshInfo","fontSize","_shouldAutoFitWidth","_shouldAutoFitHeight","_isWordBoundary","_isValidNextChar","_isNextCJKBoundary","_isNextCJKWholeWord","_getUv","colorIdx","autoHeight","ha","va","prevQuad","hoffset","voffset","tmp0","tmp1","vertMax","autoLoad","symbolIndex","startChars","endChars","previousFontType","_onFontRender","charId","newFontSize","rangeStart","rangeEnd","invParentWtm","vecA$1","vecB$1","matA","matB","matC","matD","ElementComponent","_anchor","_localAnchor","_pivot","_calculatedWidth","_calculatedHeight","_margin","_modelTransform","_screenToWorld","_anchorTransform","_anchorDirty","_parentWorldTransform","_screenTransform","_screenCorners","_canvasCorners","_worldCorners","_cornersDirty","_canvasCornersDirty","_worldCornersDirty","_patch","_group","_useInput","_addedModels","_batchGroupId","_offsetReadAt","_maskOffset","_maskedBy","_setPosition","_setLocalPosition","pvt","resx","resy","setTranslate","_calculateLocalAnchors","_sizeDirty","_calculateSize","_screenMatrix","parentWorldTransform","getLocalRotation","depthOffset","pivotOffset","_absLeft","_absBottom","_parseUpToScreen","_updateScreen","_prerender","syncMask","_bindElement","_unbindElement","_unbindScreen","previousScreen","_bindScreen","_hasSplitAnchorsX","_hasSplitAnchorsY","syncDrawOrder","_updateMask","renderableElement","_setStencil","currentMask","getLocalPosition","useInput","elementInput","addElement","batcher","insert","removeElement","_unpatch","propagateCalculatedWidth","propagateCalculatedHeight","newWidth","_absRight","newHeight","_absTop","_setWidth","_setCalculatedWidth","_setHeight","_setCalculatedHeight","updateMargins","_flagChildrenAsDirty","mo","clipL","clipR","clipT","clipB","screenCorners","cameraWidth","cameraHeight","hitCorners","wr","wl","wb","prevX","prevY","mx","my","parentBottomLeft","clientWidth","clientHeight","localPos","_define","ElementComponentData","_schema$e","ElementComponentSystem","_defaultTexture","defaultImage9SlicedMaterial","defaultImage9TiledMaterial","defaultImage9SlicedMaskMaterial","defaultImage9TiledMaskMaterial","defaultScreenSpaceImage9SlicedMaterial","defaultScreenSpaceImage9TiledMaterial","defaultScreenSpaceImageMask9SlicedMaterial","defaultScreenSpaceImageMask9TiledMaterial","defaultTextMaterial","defaultBitmapTextMaterial","defaultScreenSpaceTextMaterial","defaultScreenSpaceBitmapTextMaterial","onRemoveComponent","splitHorAnchors","splitVerAnchors","_marginChange","margin","shouldForceSetAnchor","rtlReorder","spacing","lineHeight","maxLines","wrapLines","minFontSize","maxFontSize","autoFitWidth","autoFitHeight","alignment","outlineColor","outlineThickness","shadowColor","shadowOffset","enableMarkup","nineSliceTiled","_createBaseImageMaterial","MOTION_FREE","MOTION_LIMITED","MOTION_LOCKED","JointComponent","_constraint","_entityA","_entityB","_breakForce","_enableCollision","_linearMotionX","_linearLimitsX","_linearSpringX","_linearStiffnessX","_linearDampingX","_linearEquilibriumX","_linearMotionY","_linearLimitsY","_linearSpringY","_linearStiffnessY","_linearDampingY","_linearEquilibriumY","_linearMotionZ","_linearLimitsZ","_linearSpringZ","_linearStiffnessZ","_linearDampingZ","_linearEquilibriumZ","_angularMotionX","_angularLimitsX","_angularSpringX","_angularStiffnessX","_angularDampingX","_angularEquilibriumX","_angularMotionY","_angularLimitsY","_angularSpringY","_angularStiffnessY","_angularDampingY","_angularEquilibriumY","_angularMotionZ","_angularLimitsZ","_angularSpringZ","_angularEquilibriumZ","_angularDampingZ","_angularStiffnessZ","_onSetEnabled","_destroyConstraint","_createConstraint","setBreakingImpulseThreshold","enableCollision","limits","_updateAngularLimits","_updateLinearLimits","pcTransform","ammoTransform","ammoVec","constraint","setAngularLowerLimit","setAngularUpperLimit","setLinearLowerLimit","setLinearUpperLimit","bodyA","jointWtm","invEntityAWtm","frameA","_convertTransform","bodyB","invEntityBWtm","frameB","btGeneric6DofSpringConstraint","enableSpring","setEquilibriumPoint","setStiffness","dynamicsWorld","addConstraint","removeConstraint","functionMap","Damping","Equilibrium","Spring","Stiffness","propInternal","JointComponentData","_schema$d","JointComponentSystem","initFromData","LayoutChildComponent","_minWidth","_minHeight","_maxWidth","_maxHeight","_fitWidthProportion","_fitHeightProportion","_excludeFromLayout","defineResizeProperty","LayoutChildComponentData","_schema$c","LayoutChildComponentSystem","minWidth","minHeight","maxWidth","maxHeight","fitWidthProportion","fitHeightProportion","excludeFromLayout","layoutChild","layoutchild","AXIS_MAPPINGS","calculatedSize","minSize","maxSize","fitting","fittingProportion","OPPOSITE_ORIENTATION","PROPERTY_DEFAULTS","FITTING_ACTION","availableSpace","createCalculator","minExtentA","minExtentB","maxExtentA","shouldIncludeInLayout","layoutChildComponent","determineFittingAction","fittingMode","currentSize","availableSize","calculateTotalSpace","sizes","sumValues","stretchSizesToFitContainer","sizesThisLine","idealRequiredSpace","ascendingMaxSizeOrder","getTraversalOrder","fittingProportions","getNormalizedValues","fittingProportionSums","createSumArray","remainingUndershoot","targetIncrease","calculateAdjustment","targetSize","actualSize","shrinkSizesToFitContainer","descendingMinSizeOrder","inverseFittingProportions","invertedValues","invertNormalizedValues","inverseFittingProportionSums","remainingOvershoot","targetReduction","remainingAdjustment","proportion","sumOfRemainingProportions","getElementSizeProperties","sizeProperties","getProperty","accumulator","normalizedValues","numItems","orderBy","descending","assignIndex","itemA","itemB","getIndex","sumArray","allElements","layoutOptions","containerSize","padding","resetAnchors","reverseAxisA","reverseX","reverseY","reverseAxisB","lineIndex","reverse","reverseLinesIfRequired","runningSize","allowOverrun","idealElementSize","splitLines","sizesAllLines","elementIndex","largestElementsForEachLine","largestSizesForEachLine","largestElement","largestSize","NEGATIVE_INFINITY","sizesThisElement","fittingAction","sizesForThisElement","elementFittingAction","calculateSizesOnAxisB","calculateSizesOnAxisA","cursor","positionsAllLines","positionsThisLine","calculateBasePositions","alignmentA","alignmentB","paddingA","paddingB","axisAOffset","axisBOffset","withinLineAxisBOffset","applyAlignmentAndPadding","applySizesAndPositions","layoutWidth","layoutHeight","xOffset","yOffset","createLayoutInfo","CALCULATE_FNS","LayoutCalculator","calculateFn","getElement","isEnabledAndHasEnabledElement","LayoutGroupComponent","_reverseX","_reverseY","_padding","_widthFitting","_heightFitting","_wrap","_layoutCalculator","_listenForReflowEvents","_onChildInsert","_onChildRemove","_onElementOrLayoutComponentAdd","_onElementOrLayoutComponentRemove","onOff","_scheduleReflow","_isSelfOrChild","_isPerformingReflow","scheduleReflow","containerWidth","containerHeight","widthFitting","heightFitting","layoutInfo","calculateLayout","defineReflowSchedulingProperty","LayoutGroupComponentData","_schema$b","LayoutGroupComponentSystem","_reflowQueue","_onPostUpdate","layoutGroup","layoutgroup","_processReflowQueue","iterationCount","componentA","componentB","graphDepth","reflow","_lightProps","_lightPropsDefault","LightComponent","_cookieAsset","_cookieAssetId","_cookieAssetAdd","addLight","removeLight","addLightToLayers","updateShadow","forceLoad","onCookieAssetLoad","onCookieAssetSet","onCookieAssetRemove","cookie","onCookieAssetAdd","removeLightFromLayers","cookieAsset","_defineProperty","setFunc","skipEqualsCheck","refreshProperties","cookieFalloff","cookieChannel","cookieScale","cookieAngle","bake","affectLightmapped","LightComponentData","_props","_propsDefault","lightTypes","LightComponentSystem","ModelComponent","_mapping","_receiveShadows","_castShadowsLightmap","_lightmapped","_lightmapSizeMultiplier","_isStatic","_assetOld","_materialEvents","_dirtyModelAsset","_dirtyMaterialAsset","_clonedModel","onRemoveChild","onInsertChild","_unsetMaterialEvents","idOrPath","_getMaterialAssetUrl","_setMaterialEvent","isAsset","_bindModelAsset","_getAssetByIdOrPath","_onMaterialAssetLoad","_onMaterialAssetUnload","_onMaterialAssetRemove","_onMaterialAssetChange","_onMaterialAssetAdd","_unbindModelAsset","_onModelAssetLoad","_onModelAssetUnload","_onModelAssetChange","_onModelAssetRemove","_onModelAssetAdded","setCustomAabb","resetStateGraph","_unbindMaterialAsset","assetMapping","_loadAndSetMeshInstanceMaterial","ModelComponentData","_schema$a","ModelComponentSystem","aabbCenter","aabbHalfExtents","customAabb","receiveShadows","meshInstancesClone","RenderComponent","_onSetRootBone","_assetReference","_onRenderAssetAdded","_onRenderAssetLoad","_onRenderAssetRemove","_onRenderAssetUnload","_materialReferences","_onRootBoneChanged","_clearSkinInstances","_cloneSkinInstances","destroyMeshInstances","_onSetMeshes","_cloneMeshes","removeCachedSkinInstance","_onMaterialUnload","RenderComponentData","_schema$9","_properties","RenderComponentSystem","srcMeshInstances","depthLayer","SIMPLE_PROPERTIES","COMPLEX_PROPERTIES","GRAPH_PROPERTIES","ASSET_PROPERTIES","ParticleSystemComponent","onSetColorMapAsset","onSetNormalMapAsset","onSetMeshAsset","onSetMesh","onSetBlendType","onSetDepthSoftening","onSetLayers","onSetSimpleProperty","onSetComplexProperty","onSetGraphProperty","_requestedDepth","_onColorMapAssetLoad","_onColorMapAssetUnload","_onColorMapAssetRemove","_onColorMapAssetChange","_unbindColorMapAsset","colorMapAsset","_bindColorMapAsset","_onNormalMapAssetLoad","_onNormalMapAssetUnload","_onNormalMapAssetRemove","_onNormalMapAssetChange","_unbindNormalMapAsset","normalMapAsset","_bindNormalMapAsset","_onMeshAssetLoad","_onMeshAssetUnload","_onMeshAssetRemove","_onMeshAssetChange","_onMeshChanged","_unbindMeshAsset","meshAsset","_bindMeshAsset","_unbindRenderAsset","_bindRenderAsset","_onRenderChanged","_onRenderSetMeshes","_requestDepth","_releaseDepth","psys","autoPlay","ParticleSystemComponentData","_schema$8","ParticleSystemComponentSystem","propertyTypes","types","particlesystem","sourceProp","numSteps","particles","_updatesPerFrame","_frameTime","finishFrame","ammoVec1","ammoVec2","ammoOrigin","ammoRayStart","ammoRayEnd","ObjectPool","constructorFunc","_constructor","_pool","_count","_resize","RigidBodyComponent","_angularDamping","_angularFactor","_angularVelocity","_body","_friction","_linearDamping","_linearFactor","_linearVelocity","_mass","_restitution","_rollingFriction","_simulationEnabled","damping","getAngularVelocity","setAngularVelocity","friction","getLinearVelocity","setLinearVelocity","mass","getCollisionShape","calculateLocalInertia","setMassProps","updateInertiaTensor","restitution","setRollingFriction","linearFactor","angularFactor","setActivationState","isActive","_dynamic","syncEntityToBody","_kinematic","_compounds","applyForce","applyTorque","applyImpulse","applyTorqueImpulse","motionState","getMotionState","RigidBodyComponentData","collisions","frameCollisions","RaycastResult","SingleContactResult","contactPoint","localPointA","localPointB","pointA","pointB","localPoint","localPointOther","pointOther","ContactPoint","ContactResult","contacts","_schema$7","RigidBodyComponentSystem","contactPointPool","contactResultPool","singleContactResultPool","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","overlappingPairCache","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","setInternalTickCallback","checkForCollisionsPointer","addFunction","_checkForCollisions","unbind","linearDamping","angularDamping","rollingFriction","addRigidBody","removeRigidBody","localInertia","btDefaultMotionState","bodyInfo","btRigidBodyConstructionInfo","btRigidBody","rayCallback","ClosestRayResultCallback","rayTest","hasHit","collisionObj","get_m_collisionObject","castObject","get_m_hitPointWorld","get_m_hitNormalWorld","AllHitsRayResultCallback","collisionObjs","get_m_collisionObjects","numHits","at","isNewCollision","others","get_m_localPointA","get_m_localPointB","positionWorldOnA","getPositionWorldOnA","positionWorldOnB","getPositionWorldOnB","normalWorldOnB","get_m_normalWorldOnB","contact","allocate","frameCollision","entityCollision","entityRigidbody","world","timeStep","wrapPointer","btDynamicsWorld","getDispatcher","numManifolds","getNumManifolds","manifold","getManifoldByIndexInternal","body0","getBody0","body1","getBody1","wb0","wb1","e0","e1","flags0","flags1","numContacts","getNumContacts","forwardContacts","reverseContacts","newCollision","e0Events","e1Events","e0BodyEvents","e1BodyEvents","_storeCollision","_hasContactEvent","globalEvents","btContactPoint","getContactPoint","_createContactPointFromAmmo","reverseContactPoint","_createReverseContactPointFromAmmo","_createSingleContactResult","forwardResult","_createContactResult","reverseResult","_cleanOldCollisions","freeAll","getGravity","setGravity","triggers","compounds","_updateCompound","kinematic","_updateKinematic","stepSimulation","_updateDynamic","getPointer","SCALEMODE_NONE","_transform","ScreenComponent","_resolution","_referenceResolution","_scaleMode","_scaleBlend","_elements","_onResize","queueDrawOrderSync","_processDrawOrderSync","prevDrawOrder","_recurseDrawOrderSync","_calcScale","referenceResolution","_onScreenRemove","_updateScale","_calcProjectionMatrix","_onScreenResize","ScreenComponentData","_schema$6","ScreenComponentSystem","windowResolution","_drawOrderSyncQueue","_onUpdate","scaleMode","scaleBlend","processDrawOrderSyncQueue","vecLookup","rawToValue","default","getEntityFromIndex","fromString","vecType","ScriptAttributes","reservedNames","__attributes","raw","evtName","oldCopy","ScriptComponent","_updateList","_postUpdateList","_destroyedScripts","_destroyed","_oldState","_beingEnabled","_isLoopingThroughScripts","_executionOrder","_checkState","onPostStateChange","wasLooping","_beginLooping","scripts","_scriptMethod","scriptMethods","_endLooping","wasLoopingBefore","_removeDestroyedScripts","_addComponentToEnabled","_removeComponentFromEnabled","__scriptType","_removeScriptInstance","_resetExecutionOrder","postUpdate","scriptsLength","__executionOrder","append","useGuid","newAttributes","duplicatedIdsMap","newGuidArray","scriptData","_insertScriptInstance","onSwap","scriptInstanceOld","oldScriptComponent","newScriptComponent","newAttributesRaw","__attributesRaw","oldAttributes","_resolveEntityScriptAttribute","newJsonValue","indOld","ScriptComponentData","executionOrderCounter","ScriptComponentSystem","_enabledComponents","_onBeforeRemove","_onInitialize","MAX_SAFE_INTEGER","_callComponentMethod","ScriptLegacyComponent","onSetScripts","functionName","areScriptsLoaded","_enableScriptComponent","_initializeScriptComponent","postInitialized","_postInitializeScriptComponent","_disableScriptComponent","runInTools","_updateScriptAttributes","_destroyScriptComponent","_loadFromCache","_loadScripts","onlyUpdateAttributes","_updateAccessors","_scriptPrefix","regex","getFromCache","_preRegisterInstance","onPostInitialize","_unprefixed","ScriptLegacyComponentData","_instances","_schema$5","INITIALIZE","POST_INITIALIZE","UPDATE","POST_UPDATE","FIXED_UPDATE","TOOLS_UPDATE","ScriptLegacyComponentSystem","instancesWithUpdate","instancesWithFixedUpdate","instancesWithPostUpdate","instancesWithToolsUpdate","onFixedUpdate","onPostUpdate","onToolsUpdate","dict","_cloneAttributes","_registerInstances","_callInstancesMethod","fixedUpdate","toolsUpdate","updateList","_updateInstances","dataStore","preRegistered","instanceName","_createAccessors","_createAccessor","_convertAttributeValue","scriptComponent","previousAttributes","oldAttribute","onAttributeChanged","curveType","_inputScreenPosition","_inputWorldPosition","_rayOrigin","_rayDirection","_planeOrigin","_planeNormal","_entityRotation","OPPOSITE_AXIS","ElementDragHelper","_axis","_dragScale","_dragStartMousePosition","_dragStartHandlePosition","_deltaMousePosition","_deltaHandlePosition","_isDragging","_onMouseDownOrTouchStart","isOn","addOrRemoveEventListener","_hasDragListeners","_handleMouseUpOrTouchEnd","_onMouseUpOrTouchEnd","mouse","_onMove","_dragCamera","_calculateDragScale","currentMousePosition","_screenToLocal","_toggleDragListeners","_determineInputPosition","_chooseRayOriginAndDirection","denominator","collisionDistance","maxPixelRatio","changedTouches","isWithin2DScreen","screenScale","dragScale","currentPosition","constrainedAxis","_tempScrollValue","ScrollViewComponent","_viewportReference","_onViewportElementGain","_onSetContentOrViewportSize","_contentReference","_onContentElementGain","_onContentElementLose","_scrollbarUpdateFlags","_scrollbarReferences","_onSetHorizontalScrollbarValue","_onHorizontalScrollbarGain","_onSetVerticalScrollbarValue","_onVerticalScrollbarGain","_prevContentSizes","_scroll","_velocity","_dragStartPosition","_disabledContentInput","_disabledContentInputEntities","_toggleElementListeners","_onSetHorizontalScrollingEnabled","_onSetVerticalScrollingEnabled","_hasElementListeners","_syncAll","_destroyDragHelper","_contentDragHelper","_onContentDragStart","_onContentDragEnd","_onContentDragMove","_prevContentDragPosition","_enableContentInput","_wasDragged","_setScrollFromContentPosition","_setVelocityFromContentPositionDelta","dragThreshold","_disableContentInput","scrollValueX","_onSetScroll","scrollValueY","_syncScrollbarEnabledState","_syncScrollbarPosition","resetVelocity","hasChanged","_updateAxis","scrollValue","_determineNewScrollValue","_syncContentPosition","_getScrollingEnabled","scrollMode","_getMaxScrollValue","_setVelocityFromOvershoot","_getAxis","_getSign","contentEntity","prevContentSize","currContentSize","_getContentSize","prevMaxOffset","_getMaxOffset","currMaxOffset","contentPosition","scrollbarEntity","scrollbar","handleSize","_getScrollbarHandleSize","isScrollingEnabled","requestedVisibility","_getScrollbarVisibility","_contentIsLargerThanViewport","_getViewportSize","maxOffsetH","maxOffsetV","contentSize","viewportSize","overshoot","_toOvershoot","_getSize","entityReference","_getCalculatedDimension","horizontal","vertical","horizontalScrollbarVisibility","verticalScrollbarVisibility","_updateVelocity","_hasOvershoot","scroll","maxScrollValue","overshootPixels","bounceAmount","_contentPositionToScrollValue","_applyScrollValueTension","log10","isDragging","_disableInput","_setScrollbarComponentsEnabled","_setContentDraggingEnabled","ScrollViewComponentData","_schema$4","ScrollViewComponentSystem","scrollview","ScrollbarComponent","_handleReference","_onHandleElementGain","_onHandleElementLose","_onSetHandleAlignment","_onSetValue","_onSetHandleSize","_onSetOrientation","_handleDragHelper","_onHandleDrag","_updateHandlePositionAndSize","_handlePositionToScrollValue","_getOppositeDimension","handleEntity","handleElement","_getHandlePosition","_getDimension","_getHandleLength","handlePosition","_getUsableTrackLength","_getTrackLength","_scrollValueToHandlePosition","_setHandleDraggingEnabled","ScrollbarComponentData","_schema$3","ScrollbarComponentSystem","capTime","SoundInstance","_pitch","_sound","_suspended","_suspendEndEvent","_suspendInstanceEvents","_playWhenLoaded","_startTime","_startOffset","_onPlayCallback","onPlay","_onPauseCallback","onPause","_onResumeCallback","onResume","_onStopCallback","_onEndCallback","_startedAt","_currentTime","_currentOffset","_inputNode","_connectorNode","_firstNode","_lastNode","_initializeNodes","_endedHandler","_onEnded","_isReady","_loadedMetadataHandler","_onLoadedMetadata","_timeUpdateHandler","_onTimeUpdate","_onManagerVolumeChange","_onManagerSuspend","_onManagerResume","_onManagerDestroy","_onPlay","_updateCurrentTime","_onPause","_onResume","_onStop","setExternalNodes","firstNode","lastNode","speakers","clearExternalNodes","getExternalNodes","loopStart","loopEnd","suspend","SoundInstance3d","_maxDistance","_refDistance","_rollOffFactor","_distanceModel","instanceOptions","SoundSlot","_overlap","overlap","_autoPlay","_onInstancePlayHandler","_onInstancePlay","_onInstancePauseHandler","_onInstancePause","_onInstanceResumeHandler","_onInstanceResume","_onInstanceStopHandler","_onInstanceStop","_onInstanceEndHandler","_onInstanceEnd","isLoaded","_hasAsset","_createInstance","playWhenLoaded","resumed","stopped","positional","assetDuration","oldAsset","isPaused","isStopped","SoundComponent","_positional","_slots","_playingBeforeDisable","slots","isSuspended","playingBeforeDisable","defineSoundPropertyBasic","publicName","privateName","defineSoundPropertyFactor","SoundComponentData","_schema$2","SoundComponentSystem","srcComponent","srcSlots","srcSlot","cloneData","updatePosition","SPRITETYPE_SIMPLE","SPRITETYPE_ANIMATED","SpriteAnimationClip","_frame","fps","_paused","currentClip","_showFrame","_setTime","_setFrame","_onSpritePpuChanged","_showModel","_hideModel","MIN_VALUE","PARAM_EMISSIVE_MAP","PARAM_OPACITY_MAP","PARAM_EMISSIVE","PARAM_OPACITY","SpriteComponent","_flipX","_addedModel","_autoPlayClip","_defaultClip","_currentClip","_onLayersChanged","_onLayerAdded","_onLayerRemoved","_tryAutoPlay","_destroy","default9SlicedMaterialSlicedMode","default9SlicedMaterialTiledMode","_updateTransform","flipX","posX","posY","SpriteComponentData","_schema$1","SpriteComponentSystem","_default9SlicedMaterialSlicedMode","_default9SlicedMaterialTiledMode","emissiveMapTint","autoPlayClip","onDestroy","ZoneComponent","_size","ZoneComponentData","_schema","ZoneComponentSystem","zone","ApplicationStats","ms","updateStart","updateTime","renderStart","renderTime","physicsStart","physicsTime","cullTime","sortTime","skinTime","morphTime","instancingTime","triangles","otherPrimitives","shadowMapUpdates","depthMapTime","lightClustersTime","_timeToCountFrames","_fpsAccum","shadow","immediate","misc","skinned","instanced","removedByInstancing","renderTargetCreationTime","updatesPerFrame","frameTime","vram","lightmapper","SceneRegistryItem","_loading","_onLoadedCallbacks","SceneRegistry","_urlIndex","sceneItem","storeInCache","findByUrl","_loadSceneData","_preloadScripts","SceneDepth","application","clearOptions","isDepth","allocateTexture","allocateRenderTarget","releaseRenderTarget","srcFbo","FRAMEBUFFER_BINDING","oldClear","visibleObjects","isTransparent","cam","layerCamId","layerVisibleList","layerVisibleListLength","initWebGl2","initWebGl1","Progress","_deprecationWarning","Application","_applications","_destroyRequested","_inFrameUpdate","timeScale","maxDeltaTime","autoRender","renderNextFrame","useLegacyScriptAttributeCloning","_librariesLoaded","_fillMode","_resolutionMode","graphicsDeviceOptions","xrCompatible","_soundManager","_entityIndex","_enableList","assetPrefix","scriptsOrder","defaultLayerWorld","sceneDepth","defaultLayerDepth","defaultLayerSkybox","defaultLayerUi","defaultLayerImmediate","defaultLayerComposition","pushOpaque","pushTransparent","_immediateLayer","createPlaceholder","_firstBake","_firstBatch","keyboard","gamepads","attachSelectEvents","_skyboxLast","scriptPrefix","addHandler","_visibilityChangeHandler","hidden","_hiddenAttr","mozHidden","msHidden","webkitHidden","makeTick","application_properties","_parseApplicationProperties","_parseScenes","_parseAssets","onAssetLoad","inc","onAssetError","sceneData","scriptUrl","_getScriptReferences","setAreaLightLuts","maxAssetRetries","enableRetry","useDevicePixelRatio","use_device_pixel_ratio","resolutionMode","resolution_mode","fillMode","fill_mode","setCanvasFillMode","layerOrder","composition","sublayer","batchGroups","grp","addGroup","i18nAssets","areaLightDataAsset","_handleAreaLightDataProperty","_loadLibraries","libraries","onLibrariesLoaded","scriptsIndex","bundlesIndex","loadingType","addLocalizedAssetId","priorityScripts","priority_scripts","animationUpdate","inputUpdate","updateAll","renderComposition","prims","culled","_numDrawCallsCulled","_depthDrawCalls","_immediateRendered","isHidden","windowWidth","innerWidth","windowHeight","innerHeight","updateCanvasSize","onLibraryLoaded","applySettings","setSkybox","_onSkyboxChange","_skyboxLoad","_skyboxRemove","_immediateData","_preRenderImmediate","_postRenderImmediate","_initImmediate","endColor","_addLines","_getDefaultImmediateOptions","renderWireCube","renderWireSphere","renderMesh","getQuadMesh","getTextureShader","renderQuad","getDepthTextureShader","renderTexture","canvasId","detach","_frameEndData","frameRequest","_processTimestamp","_fillFrameStatsBasic","_batchHandle","_guid","removeComponent","enableFirst","_onHierarchyStatePostChanged","_cloneRecursively","resolveDuplicatedEntityReferenceProperties","cloneComponent","oldChild","newChild","oldSubtreeRoot","oldEntity","newEntity","entityProperties","getPropertiesOfType","oldEntityReferenceId","newEntityReferenceId","funcNameRegex","initScriptType","_enabledOld","__destroyed","constructorFn","methods","reservedAttributes","value2","EVENT_MOUSEMOVE","KeyboardEvent","keyCode","isMousePointerLocked","mozPointerLockElement","webkitPointerLockElement","targetX","targetY","MouseEvent","coords","_getTargetCoords","wheelDelta","movementX","webkitMovementX","mozMovementX","movementY","webkitMovementY","mozMovementY","_lastX","_lastY","buttons","_buttons","ctrlKey","altKey","shiftKey","metaKey","Mouse","_lastbuttons","_upHandler","_handleUp","_downHandler","_handleDown","_moveHandler","_handleMove","_wheelHandler","_handleWheel","_contextMenuHandler","_target","_attached","passive","clientX","clientY","vecA","vecB","rayA","rayB","rayC","_pq","_pa","_pb","_pc","_pd","_m","_sct","_accumulatedScale","_paddingTop","_paddingBottom","_paddingLeft","_paddingRight","_cornerBottomLeft","_cornerBottomRight","_cornerTopRight","_cornerTopLeft","ZERO_VEC4","scalarTriple","ElementInputEvent","_stopPropagation","stopImmediatePropagation","stopPropagation","ElementMouseEvent","lastX","lastY","isPointerLocked","ElementTouchEvent","touches","ElementSelectEvent","ElementInput","domElement","_touchstartHandler","_handleTouchStart","_touchendHandler","_handleTouchEnd","_touchcancelHandler","_touchmoveHandler","_handleTouchMove","_sortElements","_hoveredElement","_pressedElement","_touchedElements","_touchesForWhichTouchLeaveHasFired","_selectedElements","_selectedPressedElements","_useMouse","useMouse","_useTouch","useTouch","_useXr","useXr","_selectEventsAttached","_clickedEntities","_onXrStart","_onXrEnd","_onXrUpdate","_onXrInputRemove","_calcMouseCoords","_onElementMouseEvent","touchedElements","_calcTouchCoords","_getTargetElement","newTouchedElements","_determineTouchedElements","newTouchInfo","oldTouchInfo","_fireEvent","touchId","touchInfo","eventType","hovered","_onElementSelectEvent","hoveredNow","hoveredBefore","getDirection","_getTargetElementByRay","pressed","totalOffsetX","totalOffsetY","HTMLElement","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","pageY","sortTransparentLayers","rayScreen","ray3d","_calculateRayScreen","_calculateRay3d","_checkElement","screenOrWorldCorners","cameraLeft","cameraRight","cameraBottom","cameraTop","_calculateScaleToScreen","_buildHitCorners","worldCorners","intersectLineQuad","write","debug","warning","alert","subs","_data3","INV_LOG2","intToBytes","bytesToInt","intersectRay","intersectsRay","viewProj","UnsupportedBrowserError","ContextCreationError","defineProperties","_dirtify","local","getLabels","hasLabel","removeLabel","findByLabel","getChildren","getName","getPath","getRoot","getParent","setName","getShader","getNodes","setDuration","getAnimation","getCurrentTime","getLooping","getNumNodes","setAnimation","setCurrentTime","setLooping","getListener","getAssetById","isFullscreen","enableFullscreen","ALLOW_KEYBOARD_INPUT","disableFullscreen","getSceneUrl","loadScene","loadSceneHierarchy","loadSceneSettings","setVisible","syncBodyToEntity","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","getOwnPropertyNames","test3","shouldUseNative","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","Fragment","StrictMode","Profiler","Suspense","for","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","C","refs","updater","D","E","isReactComponent","setState","forceUpdate","isPureReactComponent","H","I","__self","__source","J","defaultProps","$$typeof","_owner","L","M","N","K","P","Q","_status","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","ReactCurrentOwner","IsSomeRendererActing","Children","toArray","only","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","createFactory","createRef","forwardRef","isValidElement","lazy","_payload","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","aa","ba","da","ea","fa","ia","ja","ka","acceptsBooleans","attributeNamespace","mustUseProperty","sanitizeURL","removeEmptyString","oa","pa","qa","ma","na","la","removeAttribute","setAttributeNS","xlinkHref","ta","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ma","Ka","La","Na","Oa","Pa","prepareStackTrace","displayName","Qa","_render","Ra","Sa","Ta","Va","_valueTracker","getValue","stopTracking","Ua","Wa","checked","Xa","activeElement","Ya","defaultChecked","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","cb","ownerDocument","eb","db","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","hb","jb","textContent","kb","lb","mb","nb","ob","namespaceURI","innerHTML","valueOf","firstChild","MSApp","execUnsafeLocalFunction","pb","nodeValue","qb","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","rb","sb","tb","ub","menuitem","br","col","embed","hr","keygen","link","meta","wbr","is","xb","srcElement","correspondingUseElement","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Zb","alternate","return","$b","memoizedState","dehydrated","sibling","bc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","pc","qc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","pointerId","vc","wc","lanePriority","unstable_runWithPriority","hydrate","containerInfo","xc","yc","zc","Ac","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","Dc","Ec","animationend","animationiteration","animationstart","transitionend","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","unstable_now","Rc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","clz32","bd","cd","LN2","dd","unstable_UserBlockingPriority","ed","fd","hd","uc","jd","kd","ld","md","nd","od","charCode","pd","qd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","isTrusted","td","ud","vd","Ad","screenX","screenY","getModifierState","zd","relatedTarget","fromElement","toElement","Bd","Dd","dataTransfer","Fd","Hd","animationName","pseudoElement","Jd","clipboardData","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Rd","repeat","which","Td","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","targetTouches","Xd","Zd","wheelDeltaX","wheelDeltaY","deltaMode","$d","ae","be","documentMode","ce","de","ee","fe","ge","le","date","datetime","email","month","number","password","tel","week","me","ne","oe","listeners","qe","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","Le","nextSibling","Me","contains","compareDocumentPosition","Ne","HTMLIFrameElement","contentWindow","href","Oe","contentEditable","Pe","Qe","Re","Se","Te","Ue","selectionStart","selectionEnd","anchorNode","defaultView","getSelection","anchorOffset","focusNode","focusOffset","Ve","We","Xe","Ye","Ze","Yb","$e","af","bf","df","capture","Nb","ef","ff","parentWindow","gf","hf","je","ke","jf","kf","lf","mf","autoFocus","nf","__html","pf","qf","rf","previousSibling","vf","wf","xf","yf","zf","Af","Bf","Cf","Df","Ef","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","childContextTypes","Gf","Hf","If","getChildContext","Jf","__reactInternalMemoizedMergedChildContext","Kf","Lf","Mf","Nf","Of","Pf","unstable_cancelCallback","Qf","unstable_shouldYield","Rf","unstable_requestPaint","Sf","Tf","unstable_getCurrentPriorityLevel","Uf","unstable_ImmediatePriority","Vf","Wf","Xf","unstable_LowPriority","Yf","unstable_IdlePriority","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","observedBits","responders","wg","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","yg","zg","eventTime","lane","payload","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Kg","_reactInternals","Hg","Ig","Jg","Lg","shouldComponentUpdate","Mg","contextType","Ng","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Og","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Pg","Qg","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","Tg","Ug","elementType","Vg","implementation","Wg","Xg","Yg","Zg","$g","ah","bh","dh","eh","documentElement","tagName","fh","gh","hh","ih","memoizedProps","revealOrder","jh","kh","lh","mh","nh","pendingProps","ph","qh","rh","uh","_workInProgressVersionPrimary","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","baseQueue","Ih","Jh","Kh","lastRenderedReducer","action","eagerReducer","eagerState","lastRenderedState","dispatch","Lh","Mh","_getVersion","_source","mutableReadLanes","Nh","U","getSnapshot","subscribe","setSnapshot","Oh","Ph","Qh","Rh","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","readContext","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","uf","ei","fi","gi","hi","ji","ki","li","baseLanes","ni","oi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","qi","getDerivedStateFromError","ri","pendingContext","Bi","Di","Ei","retryLane","ti","unstable_avoidThisFallback","ui","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","tailMode","Ai","Fi","Gi","wasMultiple","onClick","onclick","createElementNS","createTextNode","V","Hi","Ii","W","Ji","Ki","Li","Mi","Ni","Oi","WeakMap","Pi","Qi","Ri","Si","componentDidCatch","Ti","componentStack","Ui","WeakSet","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","focus","aj","bj","onCommitFiberUnmount","componentWillUnmount","cj","dj","ej","fj","gj","hj","insertBefore","_reactRootContainer","ij","jj","kj","lj","mj","nj","oj","pj","X","Y","qj","rj","sj","tj","uj","vj","wj","ck","Z","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Sc","Kj","Lj","Mj","callbackNode","expirationTimes","callbackPriority","Tc","Nj","Oj","Pj","Qj","Rj","Sj","Tj","finishedWork","finishedLanes","Uj","timeoutHandle","Wj","Xj","pingCache","Yj","Zj","ak","bk","dk","rangeCount","focusedElem","selectionRange","ek","createRange","setStart","removeAllRanges","addRange","setEnd","onCommitFiberRoot","fk","gk","ik","pendingChildren","jk","mutableSourceEagerHydrationData","kk","lk","mk","nk","qk","hydrationOptions","mutableSources","_internalRoot","rk","tk","hasAttribute","sk","uk","hk","unstable_observedBits","unmount","querySelectorAll","form","Vj","vk","Events","wk","findFiberByHostInstance","bundleType","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","yk","isDisabled","supportsFiber","inject","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","MessageChannel","unstable_forceFrameRate","port2","port1","sortIndex","expirationTime","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback","jsx","jsxs"],"mappings":"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","file":"static/js/2.e9594afd.chunk.js","sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import superPropBase from \"@babel/runtime/helpers/esm/superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","/**\n * @license\n * PlayCanvas Engine v1.45.3 revision 895add4b6\n * Copyright 2011-2021 PlayCanvas Ltd. All rights reserved.\n */\nif (!Array.prototype.fill) {\n\tObject.defineProperty(Array.prototype, 'fill', {\n\t\tvalue: function (value) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow new TypeError('this is null or not defined');\n\t\t\t}\n\n\t\t\tvar O = Object(this);\n\t\t\tvar len = O.length >>> 0;\n\t\t\tvar start = arguments[1];\n\t\t\tvar relativeStart = start >> 0;\n\t\t\tvar k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);\n\t\t\tvar end = arguments[2];\n\t\t\tvar relativeEnd = end === undefined ? len : end >> 0;\n\t\t\tvar finalValue = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);\n\n\t\t\twhile (k < finalValue) {\n\t\t\t\tO[k] = value;\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn O;\n\t\t}\n\t});\n}\n\nif (!Array.prototype.find) {\n\tObject.defineProperty(Array.prototype, 'find', {\n\t\tvalue: function (predicate) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\tif (typeof predicate !== 'function') {\n\t\t\t\tthrow TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\tvar thisArg = arguments[1];\n\t\t\tvar k = 0;\n\n\t\t\twhile (k < len) {\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\t\t\t\t\treturn kValue;\n\t\t\t\t}\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t},\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n}\n\nif (!Array.prototype.findIndex) {\n\tObject.defineProperty(Array.prototype, 'findIndex', {\n\t\tvalue: function (predicate) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\tif (typeof predicate !== 'function') {\n\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\tvar thisArg = arguments[1];\n\t\t\tvar k = 0;\n\n\t\t\twhile (k < len) {\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\t\t\t\t\treturn k;\n\t\t\t\t}\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t},\n\t\tconfigurable: true,\n\t\twritable: true\n\t});\n}\n\nMath.log2 = Math.log2 || function (x) {\n\treturn Math.log(x) * Math.LOG2E;\n};\n\nif (!Math.sign) {\n\tMath.sign = function (x) {\n\t\treturn (x > 0) - (x < 0) || +x;\n\t};\n}\n\nif (Number.isFinite === undefined) Number.isFinite = function (value) {\n\treturn typeof value === 'number' && isFinite(value);\n};\n\nif (typeof Object.assign != 'function') {\n\tObject.defineProperty(Object, \"assign\", {\n\t\tvalue: function assign(target, varArgs) {\n\n\t\t\tif (target == null) {\n\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t\t}\n\n\t\t\tvar to = Object(target);\n\n\t\t\tfor (var index = 1; index < arguments.length; index++) {\n\t\t\t\tvar nextSource = arguments[index];\n\n\t\t\t\tif (nextSource != null) {\n\t\t\t\t\tfor (var nextKey in nextSource) {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn to;\n\t\t},\n\t\twritable: true,\n\t\tconfigurable: true\n\t});\n}\n\n(function () {\n\tif (typeof navigator === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\tnavigator.pointer = navigator.pointer || navigator.webkitPointer || navigator.mozPointer;\n\n\tvar pointerlockchange = function pointerlockchange() {\n\t\tvar e = document.createEvent('CustomEvent');\n\t\te.initCustomEvent('pointerlockchange', true, false, null);\n\t\tdocument.dispatchEvent(e);\n\t};\n\n\tvar pointerlockerror = function pointerlockerror() {\n\t\tvar e = document.createEvent('CustomEvent');\n\t\te.initCustomEvent('pointerlockerror', true, false, null);\n\t\tdocument.dispatchEvent(e);\n\t};\n\n\tdocument.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('webkitpointerlocklost', pointerlockchange, false);\n\tdocument.addEventListener('mozpointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('mozpointerlocklost', pointerlockchange, false);\n\tdocument.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\tdocument.addEventListener('mozpointerlockerror', pointerlockerror, false);\n\n\tif (Element.prototype.mozRequestPointerLock) {\n\t\tElement.prototype.requestPointerLock = function () {\n\t\t\tthis.mozRequestPointerLock();\n\t\t};\n\t} else {\n\t\tElement.prototype.requestPointerLock = Element.prototype.requestPointerLock || Element.prototype.webkitRequestPointerLock || Element.prototype.mozRequestPointerLock;\n\t}\n\n\tif (!Element.prototype.requestPointerLock && navigator.pointer) {\n\t\tElement.prototype.requestPointerLock = function () {\n\t\t\tvar el = this;\n\t\t\tdocument.pointerLockElement = el;\n\t\t\tnavigator.pointer.lock(el, pointerlockchange, pointerlockerror);\n\t\t};\n\t}\n\n\tdocument.exitPointerLock = document.exitPointerLock || document.webkitExitPointerLock || document.mozExitPointerLock;\n\n\tif (!document.exitPointerLock) {\n\t\tdocument.exitPointerLock = function () {\n\t\t\tif (navigator.pointer) {\n\t\t\t\tdocument.pointerLockElement = null;\n\t\t\t\tnavigator.pointer.unlock();\n\t\t\t}\n\t\t};\n\t}\n})();\n\n(function () {\n\tif (typeof window === 'undefined') return;\n\tvar lastTime = 0;\n\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\n\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\n\tif (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n\t\tvar currTime = new Date().getTime();\n\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\tvar id = window.setTimeout(function () {\n\t\t\tcallback(currTime + timeToCall);\n\t\t}, timeToCall);\n\t\tlastTime = currTime + timeToCall;\n\t\treturn id;\n\t};\n\tif (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n\t\tclearTimeout(id);\n\t};\n})();\n\nif (!String.prototype.endsWith) {\n\tString.prototype.endsWith = function (search, this_len) {\n\t\tif (this_len === undefined || this_len > this.length) {\n\t\t\tthis_len = this.length;\n\t\t}\n\n\t\treturn this.substring(this_len - search.length, this_len) === search;\n\t};\n}\n\nif (!String.prototype.includes) {\n\tString.prototype.includes = function (search, start) {\n\n\t\tif (typeof start !== 'number') {\n\t\t\tstart = 0;\n\t\t}\n\n\t\tif (start + search.length > this.length) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn this.indexOf(search, start) !== -1;\n\t\t}\n\t};\n}\n\nif (!String.prototype.startsWith) {\n\tString.prototype.startsWith = function (search, pos) {\n\t\treturn this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n\t};\n}\n\nif (!Int8Array.prototype.fill) {\n\tInt8Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint8Array.prototype.fill) {\n\tUint8Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint8ClampedArray.prototype.fill) {\n\tUint8ClampedArray.prototype.fill = Array.prototype.fill;\n}\n\nif (!Int16Array.prototype.fill) {\n\tInt16Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint16Array.prototype.fill) {\n\tUint16Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Int32Array.prototype.fill) {\n\tInt32Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Uint32Array.prototype.fill) {\n\tUint32Array.prototype.fill = Array.prototype.fill;\n}\n\nif (!Float32Array.prototype.fill) {\n\tFloat32Array.prototype.fill = Array.prototype.fill;\n}\n\n(function () {\n\n\tvar glErrorShadow = {};\n\n\tfunction error(msg) {\n\t\tif (window.console && window.console.error) {\n\t\t\twindow.console.error(msg);\n\t\t}\n\t}\n\n\tfunction log(msg) {\n\t\tif (window.console && window.console.log) {\n\t\t\twindow.console.log(msg);\n\t\t}\n\t}\n\n\tfunction synthesizeGLError(err, opt_msg) {\n\t\tglErrorShadow[err] = true;\n\n\t\tif (opt_msg !== undefined) {\n\t\t\terror(opt_msg);\n\t\t}\n\t}\n\n\tfunction wrapGLError(gl) {\n\t\tvar f = gl.getError;\n\n\t\tgl.getError = function () {\n\t\t\tvar err;\n\n\t\t\tdo {\n\t\t\t\terr = f.apply(gl);\n\n\t\t\t\tif (err != gl.NO_ERROR) {\n\t\t\t\t\tglErrorShadow[err] = true;\n\t\t\t\t}\n\t\t\t} while (err != gl.NO_ERROR);\n\n\t\t\tfor (var err in glErrorShadow) {\n\t\t\t\tif (glErrorShadow[err]) {\n\t\t\t\t\tdelete glErrorShadow[err];\n\t\t\t\t\treturn parseInt(err);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn gl.NO_ERROR;\n\t\t};\n\t}\n\n\tvar WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n\t\tvar gl = ext.gl;\n\t\tthis.ext = ext;\n\t\tthis.isAlive = true;\n\t\tthis.hasBeenBound = false;\n\t\tthis.elementArrayBuffer = null;\n\t\tthis.attribs = new Array(ext.maxVertexAttribs);\n\n\t\tfor (var n = 0; n < this.attribs.length; n++) {\n\t\t\tvar attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n\t\t\tthis.attribs[n] = attrib;\n\t\t}\n\n\t\tthis.maxAttrib = 0;\n\t};\n\n\tWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n\t\tthis.enabled = false;\n\t\tthis.buffer = null;\n\t\tthis.size = 4;\n\t\tthis.type = gl.FLOAT;\n\t\tthis.normalized = false;\n\t\tthis.stride = 16;\n\t\tthis.offset = 0;\n\t\tthis.cached = \"\";\n\t\tthis.recache();\n\t};\n\n\tWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n\t\tthis.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(\":\");\n\t};\n\n\tvar OESVertexArrayObject = function OESVertexArrayObject(gl) {\n\t\tvar self = this;\n\t\tthis.gl = gl;\n\t\twrapGLError(gl);\n\t\tvar original = this.original = {\n\t\t\tgetParameter: gl.getParameter,\n\t\t\tenableVertexAttribArray: gl.enableVertexAttribArray,\n\t\t\tdisableVertexAttribArray: gl.disableVertexAttribArray,\n\t\t\tbindBuffer: gl.bindBuffer,\n\t\t\tgetVertexAttrib: gl.getVertexAttrib,\n\t\t\tvertexAttribPointer: gl.vertexAttribPointer\n\t\t};\n\n\t\tgl.getParameter = function getParameter(pname) {\n\t\t\tif (pname == self.VERTEX_ARRAY_BINDING_OES) {\n\t\t\t\tif (self.currentVertexArrayObject == self.defaultVertexArrayObject) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\treturn self.currentVertexArrayObject;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn original.getParameter.apply(this, arguments);\n\t\t};\n\n\t\tgl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, index);\n\t\t\tvar attrib = vao.attribs[index];\n\t\t\tattrib.enabled = true;\n\t\t\treturn original.enableVertexAttribArray.apply(this, arguments);\n\t\t};\n\n\t\tgl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, index);\n\t\t\tvar attrib = vao.attribs[index];\n\t\t\tattrib.enabled = false;\n\t\t\treturn original.disableVertexAttribArray.apply(this, arguments);\n\t\t};\n\n\t\tgl.bindBuffer = function bindBuffer(target, buffer) {\n\t\t\tswitch (target) {\n\t\t\t\tcase gl.ARRAY_BUFFER:\n\t\t\t\t\tself.currentArrayBuffer = buffer;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase gl.ELEMENT_ARRAY_BUFFER:\n\t\t\t\t\tself.currentVertexArrayObject.elementArrayBuffer = buffer;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn original.bindBuffer.apply(this, arguments);\n\t\t};\n\n\t\tgl.getVertexAttrib = function getVertexAttrib(index, pname) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvar attrib = vao.attribs[index];\n\n\t\t\tswitch (pname) {\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:\n\t\t\t\t\treturn attrib.buffer;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_ENABLED:\n\t\t\t\t\treturn attrib.enabled;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_SIZE:\n\t\t\t\t\treturn attrib.size;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_STRIDE:\n\t\t\t\t\treturn attrib.stride;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_TYPE:\n\t\t\t\t\treturn attrib.type;\n\n\t\t\t\tcase gl.VERTEX_ATTRIB_ARRAY_NORMALIZED:\n\t\t\t\t\treturn attrib.normalized;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn original.getVertexAttrib.apply(this, arguments);\n\t\t\t}\n\t\t};\n\n\t\tgl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n\t\t\tvar vao = self.currentVertexArrayObject;\n\t\t\tvao.maxAttrib = Math.max(vao.maxAttrib, indx);\n\t\t\tvar attrib = vao.attribs[indx];\n\t\t\tattrib.buffer = self.currentArrayBuffer;\n\t\t\tattrib.size = size;\n\t\t\tattrib.type = type;\n\t\t\tattrib.normalized = normalized;\n\t\t\tattrib.stride = stride;\n\t\t\tattrib.offset = offset;\n\t\t\tattrib.recache();\n\t\t\treturn original.vertexAttribPointer.apply(this, arguments);\n\t\t};\n\n\t\tif (gl.instrumentExtension) {\n\t\t\tgl.instrumentExtension(this, \"OES_vertex_array_object\");\n\t\t}\n\n\t\tgl.canvas.addEventListener('webglcontextrestored', function () {\n\t\t\tlog(\"OESVertexArrayObject emulation library context restored\");\n\t\t\tself.reset_();\n\t\t}, true);\n\t\tthis.reset_();\n\t};\n\n\tOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85B5;\n\n\tOESVertexArrayObject.prototype.reset_ = function reset_() {\n\t\tvar contextWasLost = this.vertexArrayObjects !== undefined;\n\n\t\tif (contextWasLost) {\n\t\t\tfor (var ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n\t\t\t\tthis.vertexArrayObjects.isAlive = false;\n\t\t\t}\n\t\t}\n\n\t\tvar gl = this.gl;\n\t\tthis.maxVertexAttribs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n\t\tthis.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n\t\tthis.currentVertexArrayObject = null;\n\t\tthis.currentArrayBuffer = null;\n\t\tthis.vertexArrayObjects = [this.defaultVertexArrayObject];\n\t\tthis.bindVertexArrayOES(null);\n\t};\n\n\tOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n\t\tvar arrayObject = new WebGLVertexArrayObjectOES(this);\n\t\tthis.vertexArrayObjects.push(arrayObject);\n\t\treturn arrayObject;\n\t};\n\n\tOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n\t\tarrayObject.isAlive = false;\n\t\tthis.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n\t\tif (this.currentVertexArrayObject == arrayObject) {\n\t\t\tthis.bindVertexArrayOES(null);\n\t\t}\n\t};\n\n\tOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n\t\tif (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n\t\t\tif (arrayObject.hasBeenBound && arrayObject.ext == this) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n\t\tvar gl = this.gl;\n\n\t\tif (arrayObject && !arrayObject.isAlive) {\n\t\t\tsynthesizeGLError(gl.INVALID_OPERATION, \"bindVertexArrayOES: attempt to bind deleted arrayObject\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar original = this.original;\n\t\tvar oldVAO = this.currentVertexArrayObject;\n\t\tthis.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n\t\tthis.currentVertexArrayObject.hasBeenBound = true;\n\t\tvar newVAO = this.currentVertexArrayObject;\n\n\t\tif (oldVAO == newVAO) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!oldVAO || newVAO.elementArrayBuffer != oldVAO.elementArrayBuffer) {\n\t\t\toriginal.bindBuffer.call(gl, gl.ELEMENT_ARRAY_BUFFER, newVAO.elementArrayBuffer);\n\t\t}\n\n\t\tvar currentBinding = this.currentArrayBuffer;\n\t\tvar maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n\t\tfor (var n = 0; n <= maxAttrib; n++) {\n\t\t\tvar attrib = newVAO.attribs[n];\n\t\t\tvar oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n\t\t\tif (!oldVAO || attrib.enabled != oldAttrib.enabled) {\n\t\t\t\tif (attrib.enabled) {\n\t\t\t\t\toriginal.enableVertexAttribArray.call(gl, n);\n\t\t\t\t} else {\n\t\t\t\t\toriginal.disableVertexAttribArray.call(gl, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attrib.enabled) {\n\t\t\t\tvar bufferChanged = false;\n\n\t\t\t\tif (!oldVAO || attrib.buffer != oldAttrib.buffer) {\n\t\t\t\t\tif (currentBinding != attrib.buffer) {\n\t\t\t\t\t\toriginal.bindBuffer.call(gl, gl.ARRAY_BUFFER, attrib.buffer);\n\t\t\t\t\t\tcurrentBinding = attrib.buffer;\n\t\t\t\t\t}\n\n\t\t\t\t\tbufferChanged = true;\n\t\t\t\t}\n\n\t\t\t\tif (bufferChanged || attrib.cached != oldAttrib.cached) {\n\t\t\t\t\toriginal.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.currentArrayBuffer != currentBinding) {\n\t\t\toriginal.bindBuffer.call(gl, gl.ARRAY_BUFFER, this.currentArrayBuffer);\n\t\t}\n\t};\n\n\twindow.setupVertexArrayObject = function (gl) {\n\t\tif (gl.getSupportedExtensions) {\n\t\t\tvar exts = gl.getSupportedExtensions();\n\n\t\t\tif (exts.indexOf(\"OES_vertex_array_object\") != -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (gl.getExtension) {\n\t\t\tvar vao = gl.getExtension(\"OES_vertex_array_object\");\n\n\t\t\tif (vao) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (gl.getSupportedExtensions) {\n\t\t\tvar original_getSupportedExtensions = gl.getSupportedExtensions;\n\n\t\t\tgl.getSupportedExtensions = function getSupportedExtensions() {\n\t\t\t\tvar list = original_getSupportedExtensions.call(this) || [];\n\t\t\t\tlist.push(\"OES_vertex_array_object\");\n\t\t\t\treturn list;\n\t\t\t};\n\t\t}\n\n\t\tvar original_getExtension = gl.getExtension;\n\n\t\tgl.getExtension = function getExtension(name) {\n\t\t\tif (name == \"OES_vertex_array_object\") {\n\t\t\t\tif (!gl.__OESVertexArrayObject) {\n\t\t\t\t\tgl.__OESVertexArrayObject = new OESVertexArrayObject(gl);\n\t\t\t\t}\n\n\t\t\t\treturn gl.__OESVertexArrayObject;\n\t\t\t}\n\n\t\t\tif (original_getExtension) {\n\t\t\t\treturn original_getExtension.call(this, name);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t};\n})();\n\nconst _typeLookup = function () {\n\tconst result = {};\n\tconst names = [\"Array\", \"Object\", \"Function\", \"Date\", \"RegExp\", \"Float32Array\"];\n\n\tfor (let i = 0; i < names.length; i++) result[\"[object \" + names[i] + \"]\"] = names[i].toLowerCase();\n\n\treturn result;\n}();\n\nconst version = \"1.45.3\";\nconst revision = \"895add4b6\";\nconst config = {};\nconst common = {};\nconst apps = {};\nconst data = {};\n\nfunction type$1(obj) {\n\tif (obj === null) {\n\t\treturn \"null\";\n\t}\n\n\tconst type = typeof obj;\n\n\tif (type === \"undefined\" || type === \"number\" || type === \"string\" || type === \"boolean\") {\n\t\treturn type;\n\t}\n\n\treturn _typeLookup[Object.prototype.toString.call(obj)];\n}\n\nfunction extend(target, ex) {\n\tfor (const prop in ex) {\n\t\tconst copy = ex[prop];\n\n\t\tif (type$1(copy) === \"object\") {\n\t\t\ttarget[prop] = extend({}, copy);\n\t\t} else if (type$1(copy) === \"array\") {\n\t\t\ttarget[prop] = extend([], copy);\n\t\t} else {\n\t\t\ttarget[prop] = copy;\n\t\t}\n\t}\n\n\treturn target;\n}\n\nfunction isDefined(o) {\n\tlet a;\n\treturn o !== a;\n}\n\nlet table = null;\nlet row = null;\nlet title = null;\nlet field = null;\n\nfunction init() {\n\ttable = document.createElement('table');\n\trow = document.createElement('tr');\n\ttitle = document.createElement('td');\n\tfield = document.createElement('td');\n\ttable.style.cssText = 'position:absolute;font-family:sans-serif;font-size:12px;color:#cccccc';\n\ttable.style.top = '0px';\n\ttable.style.left = '0px';\n\ttable.style.border = 'thin solid #cccccc';\n\tdocument.body.appendChild(table);\n}\n\nconst debug = {\n\tdisplay: function (data) {\n\t\tif (!table) {\n\t\t\tinit();\n\t\t}\n\n\t\ttable.innerHTML = '';\n\n\t\tfor (const key in data) {\n\t\t\tconst r = row.cloneNode();\n\t\t\tconst t = title.cloneNode();\n\t\t\tconst f = field.cloneNode();\n\t\t\tt.textContent = key;\n\t\t\tf.textContent = data[key];\n\t\t\tr.appendChild(t);\n\t\t\tr.appendChild(f);\n\t\t\ttable.appendChild(r);\n\t\t}\n\t}\n};\n\nclass EventHandler {\n\tconstructor() {\n\t\tthis.initEventHandler();\n\t}\n\n\tinitEventHandler() {\n\t\tthis._callbacks = {};\n\t\tthis._callbackActive = {};\n\t}\n\n\t_addCallback(name, callback, scope, once = false) {\n\t\tif (!name || typeof name !== 'string' || !callback) return;\n\t\tif (!this._callbacks[name]) this._callbacks[name] = [];\n\t\tif (this._callbackActive[name] && this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\n\t\tthis._callbacks[name].push({\n\t\t\tcallback: callback,\n\t\t\tscope: scope || this,\n\t\t\tonce: once\n\t\t});\n\t}\n\n\ton(name, callback, scope) {\n\t\tthis._addCallback(name, callback, scope, false);\n\n\t\treturn this;\n\t}\n\n\toff(name, callback, scope) {\n\t\tif (name) {\n\t\t\tif (this._callbackActive[name] && this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\t\t} else {\n\t\t\tfor (const key in this._callbackActive) {\n\t\t\t\tif (!this._callbacks[key]) continue;\n\t\t\t\tif (this._callbacks[key] !== this._callbackActive[key]) continue;\n\t\t\t\tthis._callbackActive[key] = this._callbackActive[key].slice();\n\t\t\t}\n\t\t}\n\n\t\tif (!name) {\n\t\t\tthis._callbacks = {};\n\t\t} else if (!callback) {\n\t\t\tif (this._callbacks[name]) this._callbacks[name] = [];\n\t\t} else {\n\t\t\tconst events = this._callbacks[name];\n\t\t\tif (!events) return this;\n\t\t\tlet count = events.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tif (events[i].callback !== callback) continue;\n\t\t\t\tif (scope && events[i].scope !== scope) continue;\n\t\t\t\tevents[i--] = events[--count];\n\t\t\t}\n\n\t\t\tevents.length = count;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfire(name, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n\t\tif (!name || !this._callbacks[name]) return this;\n\t\tlet callbacks;\n\n\t\tif (!this._callbackActive[name]) {\n\t\t\tthis._callbackActive[name] = this._callbacks[name];\n\t\t} else {\n\t\t\tif (this._callbackActive[name] === this._callbacks[name]) this._callbackActive[name] = this._callbackActive[name].slice();\n\t\t\tcallbacks = this._callbacks[name].slice();\n\t\t}\n\n\t\tfor (let i = 0; (callbacks || this._callbackActive[name]) && i < (callbacks || this._callbackActive[name]).length; i++) {\n\t\t\tconst evt = (callbacks || this._callbackActive[name])[i];\n\t\t\tevt.callback.call(evt.scope, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\n\t\t\tif (evt.once) {\n\t\t\t\tconst existingCallback = this._callbacks[name];\n\t\t\t\tconst ind = existingCallback ? existingCallback.indexOf(evt) : -1;\n\n\t\t\t\tif (ind !== -1) {\n\t\t\t\t\tif (this._callbackActive[name] === existingCallback) this._callbackActive[name] = this._callbackActive[name].slice();\n\n\t\t\t\t\tthis._callbacks[name].splice(ind, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!callbacks) this._callbackActive[name] = null;\n\t\treturn this;\n\t}\n\n\tonce(name, callback, scope) {\n\t\tthis._addCallback(name, callback, scope, true);\n\n\t\treturn this;\n\t}\n\n\thasEvent(name) {\n\t\treturn this._callbacks[name] && this._callbacks[name].length !== 0 || false;\n\t}\n\n}\n\nconst events = {\n\tattach: function (target) {\n\t\tconst ev = events;\n\t\ttarget._addCallback = ev._addCallback;\n\t\ttarget.on = ev.on;\n\t\ttarget.off = ev.off;\n\t\ttarget.fire = ev.fire;\n\t\ttarget.once = ev.once;\n\t\ttarget.hasEvent = ev.hasEvent;\n\t\ttarget._callbacks = {};\n\t\ttarget._callbackActive = {};\n\t\treturn target;\n\t},\n\t_addCallback: EventHandler.prototype._addCallback,\n\ton: EventHandler.prototype.on,\n\toff: EventHandler.prototype.off,\n\tfire: EventHandler.prototype.fire,\n\tonce: EventHandler.prototype.once,\n\thasEvent: EventHandler.prototype.hasEvent\n};\n\nconst guid = {\n\tcreate: function () {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tconst r = Math.random() * 16 | 0;\n\t\t\tconst v = c === 'x' ? r : r & 0x3 | 0x8;\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n};\n\nconst path = {\n\tdelimiter: \"/\",\n\tjoin: function () {\n\t\tconst num = arguments.length;\n\t\tlet result = arguments[0];\n\n\t\tfor (let index = 0; index < num - 1; ++index) {\n\t\t\tconst one = arguments[index];\n\t\t\tconst two = arguments[index + 1];\n\n\t\t\tif (!isDefined(one) || !isDefined(two)) {\n\t\t\t\tthrow new Error(\"undefined argument to pc.path.join\");\n\t\t\t}\n\n\t\t\tif (two[0] === path.delimiter) {\n\t\t\t\tresult = two;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (one && two && one[one.length - 1] !== path.delimiter && two[0] !== path.delimiter) {\n\t\t\t\tresult += path.delimiter + two;\n\t\t\t} else {\n\t\t\t\tresult += two;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\tnormalize: function (pathname) {\n\t\tconst lead = pathname.startsWith(path.delimiter);\n\t\tconst trail = pathname.endsWith(path.delimiter);\n\t\tconst parts = pathname.split('/');\n\t\tlet result = '';\n\t\tlet cleaned = [];\n\n\t\tfor (let i = 0; i < parts.length; i++) {\n\t\t\tif (parts[i] === '') continue;\n\t\t\tif (parts[i] === '.') continue;\n\n\t\t\tif (parts[i] === '..' && cleaned.length > 0) {\n\t\t\t\tcleaned = cleaned.slice(0, cleaned.length - 2);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (i > 0) cleaned.push(path.delimiter);\n\t\t\tcleaned.push(parts[i]);\n\t\t}\n\n\t\tresult = cleaned.join('');\n\n\t\tif (!lead && result[0] === path.delimiter) {\n\t\t\tresult = result.slice(1);\n\t\t}\n\n\t\tif (trail && result[result.length - 1] !== path.delimiter) {\n\t\t\tresult += path.delimiter;\n\t\t}\n\n\t\treturn result;\n\t},\n\tsplit: function (pathname) {\n\t\tconst parts = pathname.split(path.delimiter);\n\t\tconst tail = parts.slice(parts.length - 1)[0];\n\t\tconst head = parts.slice(0, parts.length - 1).join(path.delimiter);\n\t\treturn [head, tail];\n\t},\n\tgetBasename: function (pathname) {\n\t\treturn path.split(pathname)[1];\n\t},\n\tgetDirectory: function (pathname) {\n\t\tconst parts = pathname.split(path.delimiter);\n\t\treturn parts.slice(0, parts.length - 1).join(path.delimiter);\n\t},\n\tgetExtension: function (pathname) {\n\t\tconst ext = pathname.split('?')[0].split('.').pop();\n\n\t\tif (ext !== pathname) {\n\t\t\treturn \".\" + ext;\n\t\t}\n\n\t\treturn \"\";\n\t},\n\tisRelativePath: function (pathname) {\n\t\treturn pathname.charAt(0) !== \"/\" && pathname.match(/:\\/\\//) === null;\n\t},\n\textractPath: function (pathname) {\n\t\tlet result = \"\";\n\t\tconst parts = pathname.split(\"/\");\n\t\tlet i = 0;\n\n\t\tif (parts.length > 1) {\n\t\t\tif (path.isRelativePath(pathname)) {\n\t\t\t\tif (parts[0] === \".\") {\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t} else if (parts[0] === \"..\") {\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = \".\";\n\n\t\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\t\tresult += \"/\" + parts[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < parts.length - 1; ++i) {\n\t\t\t\t\tresult += i === 0 ? parts[i] : \"/\" + parts[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nlet desktop = false;\nlet mobile = false;\nlet windows = false;\nlet xbox = false;\nlet android = false;\nlet ios = false;\nlet touch = false;\nlet gamepads = false;\nlet workers = false;\nlet passiveEvents = false;\n\nif (typeof navigator !== 'undefined') {\n\tconst ua = navigator.userAgent;\n\tif (/(windows|mac os|linux|cros)/i.test(ua)) desktop = true;\n\tif (/xbox/i.test(ua)) xbox = true;\n\n\tif (/(windows phone|iemobile|wpdesktop)/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\twindows = true;\n\t} else if (/android/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\tandroid = true;\n\t} else if (/ip([ao]d|hone)/i.test(ua)) {\n\t\tdesktop = false;\n\t\tmobile = true;\n\t\tios = true;\n\t}\n\n\tif (typeof window !== 'undefined') {\n\t\ttouch = 'ontouchstart' in window || 'maxTouchPoints' in navigator && navigator.maxTouchPoints > 0;\n\t}\n\n\tgamepads = 'getGamepads' in navigator;\n\tworkers = typeof Worker !== 'undefined';\n\n\ttry {\n\t\tconst opts = Object.defineProperty({}, 'passive', {\n\t\t\tget: function () {\n\t\t\t\tpassiveEvents = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\twindow.addEventListener(\"testpassive\", null, opts);\n\t\twindow.removeEventListener(\"testpassive\", null, opts);\n\t} catch (e) {}\n}\n\nconst platform = {\n\tdesktop: desktop,\n\tmobile: mobile,\n\tios: ios,\n\tandroid: android,\n\twindows: windows,\n\txbox: xbox,\n\tgamepads: gamepads,\n\ttouch: touch,\n\tworkers: workers,\n\tpassiveEvents: passiveEvents\n};\n\nconst ASCII_LOWERCASE = \"abcdefghijklmnopqrstuvwxyz\";\nconst ASCII_UPPERCASE = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nconst ASCII_LETTERS = ASCII_LOWERCASE + ASCII_UPPERCASE;\nconst HIGH_SURROGATE_BEGIN = 0xD800;\nconst HIGH_SURROGATE_END = 0xDBFF;\nconst LOW_SURROGATE_BEGIN = 0xDC00;\nconst LOW_SURROGATE_END = 0xDFFF;\nconst ZERO_WIDTH_JOINER = 0x200D;\nconst REGIONAL_INDICATOR_BEGIN = 0x1F1E6;\nconst REGIONAL_INDICATOR_END = 0x1F1FF;\nconst FITZPATRICK_MODIFIER_BEGIN = 0x1F3FB;\nconst FITZPATRICK_MODIFIER_END = 0x1F3FF;\nconst DIACRITICAL_MARKS_BEGIN = 0x20D0;\nconst DIACRITICAL_MARKS_END = 0x20FF;\nconst VARIATION_MODIFIER_BEGIN = 0xFE00;\nconst VARIATION_MODIFIER_END = 0xFE0F;\n\nfunction getCodePointData(string, i = 0) {\n\tconst size = string.length;\n\n\tif (i < 0 || i >= size) {\n\t\treturn null;\n\t}\n\n\tconst first = string.charCodeAt(i);\n\n\tif (size > 1 && first >= HIGH_SURROGATE_BEGIN && first <= HIGH_SURROGATE_END) {\n\t\tconst second = string.charCodeAt(i + 1);\n\n\t\tif (second >= LOW_SURROGATE_BEGIN && second <= LOW_SURROGATE_END) {\n\t\t\treturn {\n\t\t\t\tcode: (first - HIGH_SURROGATE_BEGIN) * 0x400 + second - LOW_SURROGATE_BEGIN + 0x10000,\n\t\t\t\tlong: true\n\t\t\t};\n\t\t}\n\t}\n\n\treturn {\n\t\tcode: first,\n\t\tlong: false\n\t};\n}\n\nfunction isCodeBetween(string, begin, end) {\n\tif (!string) return false;\n\tconst codeData = getCodePointData(string);\n\n\tif (codeData) {\n\t\tconst code = codeData.code;\n\t\treturn code >= begin && code <= end;\n\t}\n\n\treturn false;\n}\n\nfunction numCharsToTakeForNextSymbol(string, index) {\n\tif (index === string.length - 1) {\n\t\treturn 1;\n\t}\n\n\tif (isCodeBetween(string[index], HIGH_SURROGATE_BEGIN, HIGH_SURROGATE_END)) {\n\t\tconst first = string.substring(index, index + 2);\n\t\tconst second = string.substring(index + 2, index + 4);\n\n\t\tif (isCodeBetween(second, FITZPATRICK_MODIFIER_BEGIN, FITZPATRICK_MODIFIER_END) || isCodeBetween(first, REGIONAL_INDICATOR_BEGIN, REGIONAL_INDICATOR_END) && isCodeBetween(second, REGIONAL_INDICATOR_BEGIN, REGIONAL_INDICATOR_END)) {\n\t\t\treturn 4;\n\t\t}\n\n\t\tif (isCodeBetween(second, VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\t\treturn 3;\n\t\t}\n\n\t\treturn 2;\n\t}\n\n\tif (isCodeBetween(string[index + 1], VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\treturn 2;\n\t}\n\n\treturn 1;\n}\n\nconst string = {\n\tASCII_LOWERCASE: ASCII_LOWERCASE,\n\tASCII_UPPERCASE: ASCII_UPPERCASE,\n\tASCII_LETTERS: ASCII_LETTERS,\n\tformat: function (s) {\n\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\ts = s.replace('{' + (i - 1) + '}', arguments[i]);\n\t\t}\n\n\t\treturn s;\n\t},\n\ttoBool: function (s, strict = false) {\n\t\tif (s === 'true') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (strict) {\n\t\t\tif (s === 'false') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthrow new TypeError('Not a boolean string');\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetCodePoint: function (string, i) {\n\t\tconst codePointData = getCodePointData(string, i);\n\t\treturn codePointData && codePointData.code;\n\t},\n\tgetCodePoints: function (string) {\n\t\tif (typeof string !== 'string') {\n\t\t\tthrow new TypeError('Not a string');\n\t\t}\n\n\t\tlet i = 0;\n\t\tconst arr = [];\n\t\tlet codePoint;\n\n\t\twhile (!!(codePoint = getCodePointData(string, i))) {\n\t\t\tarr.push(codePoint.code);\n\t\t\ti += codePoint.long ? 2 : 1;\n\t\t}\n\n\t\treturn arr;\n\t},\n\tgetSymbols: function (string) {\n\t\tif (typeof string !== 'string') {\n\t\t\tthrow new TypeError('Not a string');\n\t\t}\n\n\t\tlet index = 0;\n\t\tconst length = string.length;\n\t\tconst output = [];\n\t\tlet take = 0;\n\t\tlet ch;\n\n\t\twhile (index < length) {\n\t\t\ttake += numCharsToTakeForNextSymbol(string, index + take);\n\t\t\tch = string[index + take];\n\n\t\t\tif (isCodeBetween(ch, DIACRITICAL_MARKS_BEGIN, DIACRITICAL_MARKS_END)) {\n\t\t\t\tch = string[index + take++];\n\t\t\t}\n\n\t\t\tif (isCodeBetween(ch, VARIATION_MODIFIER_BEGIN, VARIATION_MODIFIER_END)) {\n\t\t\t\tch = string[index + take++];\n\t\t\t}\n\n\t\t\tif (ch && ch.charCodeAt(0) === ZERO_WIDTH_JOINER) {\n\t\t\t\tch = string[index + take++];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst char = string.substring(index, index + take);\n\t\t\toutput.push(char);\n\t\t\tindex += take;\n\t\t\ttake = 0;\n\t\t}\n\n\t\treturn output;\n\t},\n\tfromCodePoint: function () {\n\t\tconst chars = [];\n\t\tlet current;\n\t\tlet codePoint;\n\t\tlet units;\n\n\t\tfor (let i = 0; i < arguments.length; ++i) {\n\t\t\tcurrent = Number(arguments[i]);\n\t\t\tcodePoint = current - 0x10000;\n\t\t\tunits = current > 0xFFFF ? [(codePoint >> 10) + 0xD800, codePoint % 0x400 + 0xDC00] : [current];\n\t\t\tchars.push(String.fromCharCode.apply(null, units));\n\t\t}\n\n\t\treturn chars.join('');\n\t}\n};\n\nclass IndexedList {\n\tconstructor() {\n\t\tthis._list = [];\n\t\tthis._index = {};\n\t}\n\n\tpush(key, item) {\n\t\tif (this._index[key]) {\n\t\t\tthrow Error(\"Key already in index \" + key);\n\t\t}\n\n\t\tconst location = this._list.push(item) - 1;\n\t\tthis._index[key] = location;\n\t}\n\n\thas(key) {\n\t\treturn this._index[key] !== undefined;\n\t}\n\n\tget(key) {\n\t\tconst location = this._index[key];\n\n\t\tif (location !== undefined) {\n\t\t\treturn this._list[location];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(key) {\n\t\tconst location = this._index[key];\n\n\t\tif (location !== undefined) {\n\t\t\tthis._list.splice(location, 1);\n\n\t\t\tdelete this._index[key];\n\n\t\t\tfor (key in this._index) {\n\t\t\t\tconst idx = this._index[key];\n\n\t\t\t\tif (idx > location) {\n\t\t\t\t\tthis._index[key] = idx - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n\tclear() {\n\t\tthis._list.length = 0;\n\n\t\tfor (const prop in this._index) {\n\t\t\tdelete this._index[prop];\n\t\t}\n\t}\n\n}\n\nclass SortedLoopArray {\n\tconstructor(args) {\n\t\tthis._sortBy = args.sortBy;\n\t\tthis.items = [];\n\t\tthis.length = 0;\n\t\tthis.loopIndex = -1;\n\t\tthis._sortHandler = this._doSort.bind(this);\n\t}\n\n\t_binarySearch(item) {\n\t\tlet left = 0;\n\t\tlet right = this.items.length - 1;\n\t\tconst search = item[this._sortBy];\n\t\tlet middle;\n\t\tlet current;\n\n\t\twhile (left <= right) {\n\t\t\tmiddle = Math.floor((left + right) / 2);\n\t\t\tcurrent = this.items[middle][this._sortBy];\n\n\t\t\tif (current <= search) {\n\t\t\t\tleft = middle + 1;\n\t\t\t} else if (current > search) {\n\t\t\t\tright = middle - 1;\n\t\t\t}\n\t\t}\n\n\t\treturn left;\n\t}\n\n\t_doSort(a, b) {\n\t\tconst sortBy = this._sortBy;\n\t\treturn a[sortBy] - b[sortBy];\n\t}\n\n\tinsert(item) {\n\t\tconst index = this._binarySearch(item);\n\n\t\tthis.items.splice(index, 0, item);\n\t\tthis.length++;\n\n\t\tif (this.loopIndex >= index) {\n\t\t\tthis.loopIndex++;\n\t\t}\n\t}\n\n\tappend(item) {\n\t\tthis.items.push(item);\n\t\tthis.length++;\n\t}\n\n\tremove(item) {\n\t\tconst idx = this.items.indexOf(item);\n\t\tif (idx < 0) return;\n\t\tthis.items.splice(idx, 1);\n\t\tthis.length--;\n\n\t\tif (this.loopIndex >= idx) {\n\t\t\tthis.loopIndex--;\n\t\t}\n\t}\n\n\tsort() {\n\t\tconst current = this.loopIndex >= 0 ? this.items[this.loopIndex] : null;\n\t\tthis.items.sort(this._sortHandler);\n\n\t\tif (current !== null) {\n\t\t\tthis.loopIndex = this.items.indexOf(current);\n\t\t}\n\t}\n\n}\n\nclass Tags extends EventHandler {\n\tconstructor(parent) {\n\t\tsuper();\n\t\tthis._index = {};\n\t\tthis._list = [];\n\t\tthis._parent = parent;\n\t}\n\n\tadd() {\n\t\tlet changed = false;\n\n\t\tconst tags = this._processArguments(arguments, true);\n\n\t\tif (!tags.length) return changed;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (this._index[tags[i]]) continue;\n\t\t\tchanged = true;\n\t\t\tthis._index[tags[i]] = true;\n\n\t\t\tthis._list.push(tags[i]);\n\n\t\t\tthis.fire('add', tags[i], this._parent);\n\t\t}\n\n\t\tif (changed) this.fire('change', this._parent);\n\t\treturn changed;\n\t}\n\n\tremove() {\n\t\tlet changed = false;\n\t\tif (!this._list.length) return changed;\n\n\t\tconst tags = this._processArguments(arguments, true);\n\n\t\tif (!tags.length) return changed;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (!this._index[tags[i]]) continue;\n\t\t\tchanged = true;\n\t\t\tdelete this._index[tags[i]];\n\n\t\t\tthis._list.splice(this._list.indexOf(tags[i]), 1);\n\n\t\t\tthis.fire('remove', tags[i], this._parent);\n\t\t}\n\n\t\tif (changed) this.fire('change', this._parent);\n\t\treturn changed;\n\t}\n\n\tclear() {\n\t\tif (!this._list.length) return;\n\n\t\tconst tags = this._list.slice(0);\n\n\t\tthis._list = [];\n\t\tthis._index = {};\n\n\t\tfor (let i = 0; i < tags.length; i++) this.fire('remove', tags[i], this._parent);\n\n\t\tthis.fire('change', this._parent);\n\t}\n\n\thas() {\n\t\tif (!this._list.length) return false;\n\t\treturn this._has(this._processArguments(arguments));\n\t}\n\n\t_has(tags) {\n\t\tif (!this._list.length || !tags.length) return false;\n\n\t\tfor (let i = 0; i < tags.length; i++) {\n\t\t\tif (tags[i].length === 1) {\n\t\t\t\tif (this._index[tags[i][0]]) return true;\n\t\t\t} else {\n\t\t\t\tlet multiple = true;\n\n\t\t\t\tfor (let t = 0; t < tags[i].length; t++) {\n\t\t\t\t\tif (this._index[tags[i][t]]) continue;\n\t\t\t\t\tmultiple = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (multiple) return true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tlist() {\n\t\treturn this._list.slice(0);\n\t}\n\n\t_processArguments(args, flat) {\n\t\tconst tags = [];\n\t\tlet tmp = [];\n\t\tif (!args || !args.length) return tags;\n\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tif (args[i] instanceof Array) {\n\t\t\t\tif (!flat) tmp = [];\n\n\t\t\t\tfor (let t = 0; t < args[i].length; t++) {\n\t\t\t\t\tif (typeof args[i][t] !== 'string') continue;\n\n\t\t\t\t\tif (flat) {\n\t\t\t\t\t\ttags.push(args[i][t]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttmp.push(args[i][t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!flat && tmp.length) tags.push(tmp);\n\t\t\t} else if (typeof args[i] === 'string') {\n\t\t\t\tif (flat) {\n\t\t\t\t\ttags.push(args[i]);\n\t\t\t\t} else {\n\t\t\t\t\ttags.push([args[i]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tags;\n\t}\n\n\tget size() {\n\t\treturn this._list.length;\n\t}\n\n}\n\nconst now = typeof window !== 'undefined' && window.performance && window.performance.now && window.performance.timing ? function () {\n\treturn window.performance.now();\n} : Date.now;\n\nclass Timer {\n\tconstructor() {\n\t\tthis._isRunning = false;\n\t\tthis._a = 0;\n\t\tthis._b = 0;\n\t}\n\n\tstart() {\n\t\tthis._isRunning = true;\n\t\tthis._a = now();\n\t}\n\n\tstop() {\n\t\tthis._isRunning = false;\n\t\tthis._b = now();\n\t}\n\n\tgetMilliseconds() {\n\t\treturn this._b - this._a;\n\t}\n\n}\n\nfunction createURI(options) {\n\tlet s = \"\";\n\n\tif ((options.authority || options.scheme) && (options.host || options.hostpath)) {\n\t\tthrow new Error(\"Can't have 'scheme' or 'authority' and 'host' or 'hostpath' option\");\n\t}\n\n\tif (options.host && options.hostpath) {\n\t\tthrow new Error(\"Can't have 'host' and 'hostpath' option\");\n\t}\n\n\tif (options.path && options.hostpath) {\n\t\tthrow new Error(\"Can't have 'path' and 'hostpath' option\");\n\t}\n\n\tif (options.scheme) {\n\t\ts += options.scheme + \":\";\n\t}\n\n\tif (options.authority) {\n\t\ts += \"//\" + options.authority;\n\t}\n\n\tif (options.host) {\n\t\ts += options.host;\n\t}\n\n\tif (options.path) {\n\t\ts += options.path;\n\t}\n\n\tif (options.hostpath) {\n\t\ts += options.hostpath;\n\t}\n\n\tif (options.query) {\n\t\ts += \"?\" + options.query;\n\t}\n\n\tif (options.fragment) {\n\t\ts += \"#\" + options.fragment;\n\t}\n\n\treturn s;\n}\n\nconst re = /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\nclass URI {\n\tconstructor(uri) {\n\t\tconst result = uri.match(re);\n\t\tthis.scheme = result[2];\n\t\tthis.authority = result[4];\n\t\tthis.path = result[5];\n\t\tthis.query = result[7];\n\t\tthis.fragment = result[9];\n\t}\n\n\ttoString() {\n\t\tlet s = \"\";\n\n\t\tif (this.scheme) {\n\t\t\ts += this.scheme + \":\";\n\t\t}\n\n\t\tif (this.authority) {\n\t\t\ts += \"//\" + this.authority;\n\t\t}\n\n\t\ts += this.path;\n\n\t\tif (this.query) {\n\t\t\ts += \"?\" + this.query;\n\t\t}\n\n\t\tif (this.fragment) {\n\t\t\ts += \"#\" + this.fragment;\n\t\t}\n\n\t\treturn s;\n\t}\n\n\tgetQuery() {\n\t\tconst result = {};\n\n\t\tif (this.query) {\n\t\t\tconst queryParams = decodeURIComponent(this.query).split(\"&\");\n\n\t\t\tfor (const queryParam of queryParams) {\n\t\t\t\tconst pair = queryParam.split(\"=\");\n\t\t\t\tresult[pair[0]] = pair[1];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsetQuery(params) {\n\t\tlet q = \"\";\n\n\t\tfor (const key in params) {\n\t\t\tif (params.hasOwnProperty(key)) {\n\t\t\t\tif (q !== \"\") {\n\t\t\t\t\tq += \"&\";\n\t\t\t\t}\n\n\t\t\t\tq += encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n\t\t\t}\n\t\t}\n\n\t\tthis.query = q;\n\t}\n\n}\n\nconst math = {\n\tDEG_TO_RAD: Math.PI / 180,\n\tRAD_TO_DEG: 180 / Math.PI,\n\tclamp: function (value, min, max) {\n\t\tif (value >= max) return max;\n\t\tif (value <= min) return min;\n\t\treturn value;\n\t},\n\tintToBytes24: function (i) {\n\t\tconst r = i >> 16 & 0xff;\n\t\tconst g = i >> 8 & 0xff;\n\t\tconst b = i & 0xff;\n\t\treturn [r, g, b];\n\t},\n\tintToBytes32: function (i) {\n\t\tconst r = i >> 24 & 0xff;\n\t\tconst g = i >> 16 & 0xff;\n\t\tconst b = i >> 8 & 0xff;\n\t\tconst a = i & 0xff;\n\t\treturn [r, g, b, a];\n\t},\n\tbytesToInt24: function (r, g, b) {\n\t\tif (r.length) {\n\t\t\tb = r[2];\n\t\t\tg = r[1];\n\t\t\tr = r[0];\n\t\t}\n\n\t\treturn r << 16 | g << 8 | b;\n\t},\n\tbytesToInt32: function (r, g, b, a) {\n\t\tif (r.length) {\n\t\t\ta = r[3];\n\t\t\tb = r[2];\n\t\t\tg = r[1];\n\t\t\tr = r[0];\n\t\t}\n\n\t\treturn (r << 24 | g << 16 | b << 8 | a) >>> 32;\n\t},\n\tlerp: function (a, b, alpha) {\n\t\treturn a + (b - a) * math.clamp(alpha, 0, 1);\n\t},\n\tlerpAngle: function (a, b, alpha) {\n\t\tif (b - a > 180) {\n\t\t\tb -= 360;\n\t\t}\n\n\t\tif (b - a < -180) {\n\t\t\tb += 360;\n\t\t}\n\n\t\treturn math.lerp(a, b, math.clamp(alpha, 0, 1));\n\t},\n\tpowerOfTwo: function (x) {\n\t\treturn x !== 0 && !(x & x - 1);\n\t},\n\tnextPowerOfTwo: function (val) {\n\t\tval--;\n\t\tval |= val >> 1;\n\t\tval |= val >> 2;\n\t\tval |= val >> 4;\n\t\tval |= val >> 8;\n\t\tval |= val >> 16;\n\t\tval++;\n\t\treturn val;\n\t},\n\trandom: function (min, max) {\n\t\tconst diff = max - min;\n\t\treturn Math.random() * diff + min;\n\t},\n\tsmoothstep: function (min, max, x) {\n\t\tif (x <= min) return 0;\n\t\tif (x >= max) return 1;\n\t\tx = (x - min) / (max - min);\n\t\treturn x * x * (3 - 2 * x);\n\t},\n\tsmootherstep: function (min, max, x) {\n\t\tif (x <= min) return 0;\n\t\tif (x >= max) return 1;\n\t\tx = (x - min) / (max - min);\n\t\treturn x * x * x * (x * (x * 6 - 15) + 10);\n\t},\n\troundUp: function (numToRound, multiple) {\n\t\tif (multiple === 0) return numToRound;\n\t\treturn Math.ceil(numToRound / multiple) * multiple;\n\t},\n\tfloat2Half: function () {\n\t\tconst floatView = new Float32Array(1);\n\t\tconst int32View = new Int32Array(floatView.buffer);\n\t\treturn function (val) {\n\t\t\tfloatView[0] = val;\n\t\t\tconst x = int32View[0];\n\t\t\tlet bits = x >> 16 & 0x8000;\n\t\t\tlet m = x >> 12 & 0x07ff;\n\t\t\tconst e = x >> 23 & 0xff;\n\n\t\t\tif (e < 103) {\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tif (e > 142) {\n\t\t\t\tbits |= 0x7c00;\n\t\t\t\tbits |= (e === 255 ? 0 : 1) && x & 0x007fffff;\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tif (e < 113) {\n\t\t\t\tm |= 0x0800;\n\t\t\t\tbits |= (m >> 114 - e) + (m >> 113 - e & 1);\n\t\t\t\treturn bits;\n\t\t\t}\n\n\t\t\tbits |= e - 112 << 10 | m >> 1;\n\t\t\tbits += m & 1;\n\t\t\treturn bits;\n\t\t};\n\t}(),\n\tbetween: function (num, a, b, inclusive) {\n\t\tconst min = Math.min(a, b);\n\t\tconst max = Math.max(a, b);\n\t\treturn inclusive ? num >= min && num <= max : num > min && num < max;\n\t}\n};\n\nclass Http {\n\tconstructor() {\n\t\tthis.ContentType = Http.ContentType;\n\t\tthis.ResponseType = Http.ResponseType;\n\t\tthis.binaryExtensions = Http.binaryExtensions;\n\t}\n\n\tget(url, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\treturn this.request(\"GET\", url, options, callback);\n\t}\n\n\tpost(url, data, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.postdata = data;\n\t\treturn this.request(\"POST\", url, options, callback);\n\t}\n\n\tput(url, data, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\toptions.postdata = data;\n\t\treturn this.request(\"PUT\", url, options, callback);\n\t}\n\n\tdel(url, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\treturn this.request(\"DELETE\", url, options, callback);\n\t}\n\n\trequest(method, url, options, callback) {\n\t\tvar uri, query, timestamp, postdata, xhr;\n\t\tvar errored = false;\n\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (options.retry) {\n\t\t\toptions = Object.assign({\n\t\t\t\tretries: 0,\n\t\t\t\tmaxRetries: 5\n\t\t\t}, options);\n\t\t}\n\n\t\toptions.callback = callback;\n\n\t\tif (options.async == null) {\n\t\t\toptions.async = true;\n\t\t}\n\n\t\tif (options.headers == null) {\n\t\t\toptions.headers = {};\n\t\t}\n\n\t\tif (options.postdata != null) {\n\t\t\tif (options.postdata instanceof Document) {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t} else if (options.postdata instanceof FormData) {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t} else if (options.postdata instanceof Object) {\n\t\t\t\tvar contentType = options.headers[\"Content-Type\"];\n\n\t\t\t\tif (contentType === undefined) {\n\t\t\t\t\toptions.headers[\"Content-Type\"] = Http.ContentType.FORM_URLENCODED;\n\t\t\t\t\tcontentType = options.headers[\"Content-Type\"];\n\t\t\t\t}\n\n\t\t\t\tswitch (contentType) {\n\t\t\t\t\tcase Http.ContentType.FORM_URLENCODED:\n\t\t\t\t\t\tpostdata = \"\";\n\t\t\t\t\t\tvar bFirstItem = true;\n\n\t\t\t\t\t\tfor (var key in options.postdata) {\n\t\t\t\t\t\t\tif (options.postdata.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tif (bFirstItem) {\n\t\t\t\t\t\t\t\t\tbFirstItem = false;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tpostdata += \"&\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tpostdata += escape(key) + \"=\" + escape(options.postdata[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase Http.ContentType.JSON:\n\t\t\t\t\t\tif (contentType == null) {\n\t\t\t\t\t\t\toptions.headers[\"Content-Type\"] = Http.ContentType.JSON;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpostdata = JSON.stringify(options.postdata);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpostdata = options.postdata;\n\t\t\t}\n\t\t}\n\n\t\tif (options.cache === false) {\n\t\t\ttimestamp = now();\n\t\t\turi = new URI(url);\n\n\t\t\tif (!uri.query) {\n\t\t\t\turi.query = \"ts=\" + timestamp;\n\t\t\t} else {\n\t\t\t\turi.query = uri.query + \"&ts=\" + timestamp;\n\t\t\t}\n\n\t\t\turl = uri.toString();\n\t\t}\n\n\t\tif (options.query) {\n\t\t\turi = new URI(url);\n\t\t\tquery = extend(uri.getQuery(), options.query);\n\t\t\turi.setQuery(query);\n\t\t\turl = uri.toString();\n\t\t}\n\n\t\txhr = new XMLHttpRequest();\n\t\txhr.open(method, url, options.async);\n\t\txhr.withCredentials = options.withCredentials !== undefined ? options.withCredentials : false;\n\t\txhr.responseType = options.responseType || this._guessResponseType(url);\n\n\t\tfor (var header in options.headers) {\n\t\t\tif (options.headers.hasOwnProperty(header)) {\n\t\t\t\txhr.setRequestHeader(header, options.headers[header]);\n\t\t\t}\n\t\t}\n\n\t\txhr.onreadystatechange = function () {\n\t\t\tthis._onReadyStateChange(method, url, options, xhr);\n\t\t}.bind(this);\n\n\t\txhr.onerror = function () {\n\t\t\tthis._onError(method, url, options, xhr);\n\n\t\t\terrored = true;\n\t\t}.bind(this);\n\n\t\ttry {\n\t\t\txhr.send(postdata);\n\t\t} catch (e) {\n\t\t\tif (!errored) {\n\t\t\t\toptions.error(xhr.status, xhr, e);\n\t\t\t}\n\t\t}\n\n\t\treturn xhr;\n\t}\n\n\t_guessResponseType(url) {\n\t\tvar uri = new URI(url);\n\t\tvar ext = path.getExtension(uri.path);\n\n\t\tif (Http.binaryExtensions.indexOf(ext) >= 0) {\n\t\t\treturn Http.ResponseType.ARRAY_BUFFER;\n\t\t}\n\n\t\tif (ext === \".xml\") {\n\t\t\treturn Http.ResponseType.DOCUMENT;\n\t\t}\n\n\t\treturn Http.ResponseType.TEXT;\n\t}\n\n\t_isBinaryContentType(contentType) {\n\t\tvar binTypes = [Http.ContentType.MP4, Http.ContentType.WAV, Http.ContentType.OGG, Http.ContentType.MP3, Http.ContentType.BIN, Http.ContentType.DDS, Http.ContentType.BASIS, Http.ContentType.GLB];\n\n\t\tif (binTypes.indexOf(contentType) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_onReadyStateChange(method, url, options, xhr) {\n\t\tif (xhr.readyState === 4) {\n\t\t\tswitch (xhr.status) {\n\t\t\t\tcase 0:\n\t\t\t\t\t{\n\t\t\t\t\t\tif (xhr.responseURL && xhr.responseURL.startsWith('file:///')) {\n\t\t\t\t\t\t\tthis._onSuccess(method, url, options, xhr);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._onError(method, url, options, xhr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 200:\n\t\t\t\tcase 201:\n\t\t\t\tcase 206:\n\t\t\t\tcase 304:\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._onSuccess(method, url, options, xhr);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._onError(method, url, options, xhr);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSuccess(method, url, options, xhr) {\n\t\tvar response;\n\t\tvar header;\n\t\tvar contentType;\n\t\tvar parts;\n\t\theader = xhr.getResponseHeader(\"Content-Type\");\n\n\t\tif (header) {\n\t\t\tparts = header.split(\";\");\n\t\t\tcontentType = parts[0].trim();\n\t\t}\n\n\t\ttry {\n\t\t\tif (contentType === this.ContentType.JSON || url.split('?')[0].endsWith(\".json\")) {\n\t\t\t\tresponse = JSON.parse(xhr.responseText);\n\t\t\t} else if (this._isBinaryContentType(contentType)) {\n\t\t\t\tresponse = xhr.response;\n\t\t\t} else {\n\t\t\t\tif (xhr.responseType === Http.ResponseType.ARRAY_BUFFER) {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t} else if (xhr.responseType === Http.ResponseType.BLOB || xhr.responseType === Http.ResponseType.JSON) {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.responseType === Http.ResponseType.DOCUMENT || contentType === this.ContentType.XML) {\n\t\t\t\t\t\tresponse = xhr.responseXML;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse = xhr.responseText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.callback(null, response);\n\t\t} catch (err) {\n\t\t\toptions.callback(err);\n\t\t}\n\t}\n\n\t_onError(method, url, options, xhr) {\n\t\tif (options.retrying) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (options.retry && options.retries < options.maxRetries) {\n\t\t\toptions.retries++;\n\t\t\toptions.retrying = true;\n\t\t\tvar retryDelay = math.clamp(Math.pow(2, options.retries) * Http.retryDelay, 0, options.maxRetryDelay || 5000);\n\t\t\tconsole.log(method + ': ' + url + ' - Error ' + xhr.status + '. Retrying in ' + retryDelay + ' ms');\n\t\t\tsetTimeout(function () {\n\t\t\t\toptions.retrying = false;\n\t\t\t\tthis.request(method, url, options, options.callback);\n\t\t\t}.bind(this), retryDelay);\n\t\t} else {\n\t\t\toptions.callback(xhr.status === 0 ? 'Network error' : xhr.status, null);\n\t\t}\n\t}\n\n}\n\nHttp.ContentType = {\n\tFORM_URLENCODED: \"application/x-www-form-urlencoded\",\n\tGIF: \"image/gif\",\n\tJPEG: \"image/jpeg\",\n\tDDS: \"image/dds\",\n\tJSON: \"application/json\",\n\tPNG: \"image/png\",\n\tTEXT: \"text/plain\",\n\tXML: \"application/xml\",\n\tWAV: \"audio/x-wav\",\n\tOGG: \"audio/ogg\",\n\tMP3: \"audio/mpeg\",\n\tMP4: \"audio/mp4\",\n\tAAC: \"audio/aac\",\n\tBIN: \"application/octet-stream\",\n\tBASIS: \"image/basis\",\n\tGLB: \"model/gltf-binary\"\n};\nHttp.ResponseType = {\n\tTEXT: 'text',\n\tARRAY_BUFFER: 'arraybuffer',\n\tBLOB: 'blob',\n\tDOCUMENT: 'document',\n\tJSON: 'json'\n};\nHttp.binaryExtensions = ['.model', '.wav', '.ogg', '.mp3', '.mp4', '.m4a', '.aac', '.dds', '.basis', '.glb'];\nHttp.retryDelay = 100;\nconst http = new Http();\n\nconst CURVE_LINEAR = 0;\nconst CURVE_SMOOTHSTEP = 1;\nconst CURVE_CATMULL = 2;\nconst CURVE_CARDINAL = 3;\nconst CURVE_SPLINE = 4;\nconst CURVE_STEP = 5;\n\nclass Color {\n\tconstructor(r = 0, g = 0, b = 0, a = 1) {\n\t\tconst length = r.length;\n\n\t\tif (length === 3 || length === 4) {\n\t\t\tthis.r = r[0];\n\t\t\tthis.g = r[1];\n\t\t\tthis.b = r[2];\n\t\t\tthis.a = r[3] !== undefined ? r[3] : 1;\n\t\t} else {\n\t\t\tthis.r = r;\n\t\t\tthis.g = g;\n\t\t\tthis.b = b;\n\t\t\tthis.a = a;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Color(this.r, this.g, this.b, this.a);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.r = rhs.r;\n\t\tthis.g = rhs.g;\n\t\tthis.b = rhs.b;\n\t\tthis.a = rhs.a;\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.r === rhs.r && this.g === rhs.g && this.b === rhs.b && this.a === rhs.a;\n\t}\n\n\tset(r, g, b, a = 1) {\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\t\tthis.a = a;\n\t\treturn this;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.r = lhs.r + alpha * (rhs.r - lhs.r);\n\t\tthis.g = lhs.g + alpha * (rhs.g - lhs.g);\n\t\tthis.b = lhs.b + alpha * (rhs.b - lhs.b);\n\t\tthis.a = lhs.a + alpha * (rhs.a - lhs.a);\n\t\treturn this;\n\t}\n\n\tfromString(hex) {\n\t\tconst i = parseInt(hex.replace('#', '0x'), 16);\n\t\tlet bytes;\n\n\t\tif (hex.length > 7) {\n\t\t\tbytes = math.intToBytes32(i);\n\t\t} else {\n\t\t\tbytes = math.intToBytes24(i);\n\t\t\tbytes[3] = 255;\n\t\t}\n\n\t\tthis.set(bytes[0] / 255, bytes[1] / 255, bytes[2] / 255, bytes[3] / 255);\n\t\treturn this;\n\t}\n\n\ttoString(alpha) {\n\t\tlet s = \"#\" + ((1 << 24) + (Math.round(this.r * 255) << 16) + (Math.round(this.g * 255) << 8) + Math.round(this.b * 255)).toString(16).slice(1);\n\n\t\tif (alpha === true) {\n\t\t\tconst a = Math.round(this.a * 255).toString(16);\n\n\t\t\tif (this.a < 16 / 255) {\n\t\t\t\ts += '0' + a;\n\t\t\t} else {\n\t\t\t\ts += a;\n\t\t\t}\n\t\t}\n\n\t\treturn s;\n\t}\n\n}\n\nColor.BLACK = Object.freeze(new Color(0, 0, 0, 1));\nColor.BLUE = Object.freeze(new Color(0, 0, 1, 1));\nColor.CYAN = Object.freeze(new Color(0, 1, 1, 1));\nColor.GRAY = Object.freeze(new Color(0.5, 0.5, 0.5, 1));\nColor.GREEN = Object.freeze(new Color(0, 1, 0, 1));\nColor.MAGENTA = Object.freeze(new Color(1, 0, 1, 1));\nColor.RED = Object.freeze(new Color(1, 0, 0, 1));\nColor.WHITE = Object.freeze(new Color(1, 1, 1, 1));\nColor.YELLOW = Object.freeze(new Color(1, 1, 0, 1));\n\nclass CurveEvaluator {\n\tconstructor(curve, time) {\n\t\tthis._curve = curve;\n\t\tthis._left = -Infinity;\n\t\tthis._right = Infinity;\n\t\tthis._recip = 0;\n\t\tthis._p0 = 0;\n\t\tthis._p1 = 0;\n\t\tthis._m0 = 0;\n\t\tthis._m1 = 0;\n\n\t\tthis._reset(time || 0);\n\t}\n\n\tevaluate(time, forceReset) {\n\t\tif (forceReset || time < this._left || time >= this._right) {\n\t\t\tthis._reset(time);\n\t\t}\n\n\t\tlet result;\n\t\tconst type = this._curve.type;\n\n\t\tif (type === CURVE_STEP) {\n\t\t\tresult = this._p0;\n\t\t} else {\n\t\t\tconst t = this._recip === 0 ? 0 : (time - this._left) * this._recip;\n\n\t\t\tif (type === CURVE_LINEAR) {\n\t\t\t\tresult = math.lerp(this._p0, this._p1, t);\n\t\t\t} else if (type === CURVE_SMOOTHSTEP) {\n\t\t\t\tresult = math.lerp(this._p0, this._p1, t * t * (3 - 2 * t));\n\t\t\t} else {\n\t\t\t\tresult = this._evaluateHermite(this._p0, this._p1, this._m0, this._m1, t);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_reset(time) {\n\t\tconst keys = this._curve.keys;\n\t\tconst len = keys.length;\n\n\t\tif (!len) {\n\t\t\tthis._left = -Infinity;\n\t\t\tthis._right = Infinity;\n\t\t\tthis._recip = 0;\n\t\t\tthis._p0 = this._p1 = this._m0 = this._m1 = 0;\n\t\t} else {\n\t\t\tif (time < keys[0][0]) {\n\t\t\t\tthis._left = -Infinity;\n\t\t\t\tthis._right = keys[0][0];\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = keys[0][1];\n\t\t\t\tthis._m0 = this._m1 = 0;\n\t\t\t} else if (time >= keys[len - 1][0]) {\n\t\t\t\tthis._left = keys[len - 1][0];\n\t\t\t\tthis._right = Infinity;\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = keys[len - 1][1];\n\t\t\t\tthis._m0 = this._m1 = 0;\n\t\t\t} else {\n\t\t\t\tlet index = 0;\n\n\t\t\t\twhile (time >= keys[index + 1][0]) {\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\tthis._left = keys[index][0];\n\t\t\t\tthis._right = keys[index + 1][0];\n\t\t\t\tconst diff = 1.0 / (this._right - this._left);\n\t\t\t\tthis._recip = isFinite(diff) ? diff : 0;\n\t\t\t\tthis._p0 = keys[index][1];\n\t\t\t\tthis._p1 = keys[index + 1][1];\n\n\t\t\t\tif (this._isHermite()) {\n\t\t\t\t\tthis._calcTangents(keys, index);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_isHermite() {\n\t\treturn this._curve.type === CURVE_CATMULL || this._curve.type === CURVE_CARDINAL || this._curve.type === CURVE_SPLINE;\n\t}\n\n\t_calcTangents(keys, index) {\n\t\tlet a;\n\t\tconst b = keys[index];\n\t\tconst c = keys[index + 1];\n\t\tlet d;\n\n\t\tif (index === 0) {\n\t\t\ta = [keys[0][0] + (keys[0][0] - keys[1][0]), keys[0][1] + (keys[0][1] - keys[1][1])];\n\t\t} else {\n\t\t\ta = keys[index - 1];\n\t\t}\n\n\t\tif (index === keys.length - 2) {\n\t\t\td = [keys[index + 1][0] + (keys[index + 1][0] - keys[index][0]), keys[index + 1][1] + (keys[index + 1][1] - keys[index][1])];\n\t\t} else {\n\t\t\td = keys[index + 2];\n\t\t}\n\n\t\tif (this._curve.type === CURVE_SPLINE) {\n\t\t\tconst s1_ = 2 * (c[0] - b[0]) / (c[0] - a[0]);\n\t\t\tconst s2_ = 2 * (c[0] - b[0]) / (d[0] - b[0]);\n\t\t\tthis._m0 = this._curve.tension * (isFinite(s1_) ? s1_ : 0) * (c[1] - a[1]);\n\t\t\tthis._m1 = this._curve.tension * (isFinite(s2_) ? s2_ : 0) * (d[1] - b[1]);\n\t\t} else {\n\t\t\tconst s1 = (c[0] - b[0]) / (b[0] - a[0]);\n\t\t\tconst s2 = (c[0] - b[0]) / (d[0] - c[0]);\n\t\t\tconst a_ = b[1] + (a[1] - b[1]) * (isFinite(s1) ? s1 : 0);\n\t\t\tconst d_ = c[1] + (d[1] - c[1]) * (isFinite(s2) ? s2 : 0);\n\t\t\tconst tension = this._curve.type === CURVE_CATMULL ? 0.5 : this._curve.tension;\n\t\t\tthis._m0 = tension * (c[1] - a_);\n\t\t\tthis._m1 = tension * (d_ - b[1]);\n\t\t}\n\t}\n\n\t_evaluateHermite(p0, p1, m0, m1, t) {\n\t\tconst t2 = t * t;\n\t\tconst twot = t + t;\n\t\tconst omt = 1 - t;\n\t\tconst omt2 = omt * omt;\n\t\treturn p0 * ((1 + twot) * omt2) + m0 * (t * omt2) + p1 * (t2 * (3 - twot)) + m1 * (t2 * (t - 1));\n\t}\n\n}\n\nclass Curve {\n\tconstructor(data) {\n\t\tthis.keys = [];\n\t\tthis.type = CURVE_SMOOTHSTEP;\n\t\tthis.tension = 0.5;\n\t\tthis._eval = new CurveEvaluator(this);\n\n\t\tif (data) {\n\t\t\tfor (let i = 0; i < data.length - 1; i += 2) {\n\t\t\t\tthis.keys.push([data[i], data[i + 1]]);\n\t\t\t}\n\t\t}\n\n\t\tthis.sort();\n\t}\n\n\tadd(time, value) {\n\t\tconst keys = this.keys;\n\t\tconst len = keys.length;\n\t\tlet i = 0;\n\n\t\tfor (; i < len; i++) {\n\t\t\tif (keys[i][0] > time) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst key = [time, value];\n\t\tthis.keys.splice(i, 0, key);\n\t\treturn key;\n\t}\n\n\tget(index) {\n\t\treturn this.keys[index];\n\t}\n\n\tsort() {\n\t\tthis.keys.sort(function (a, b) {\n\t\t\treturn a[0] - b[0];\n\t\t});\n\t}\n\n\tvalue(time) {\n\t\treturn this._eval.evaluate(time, true);\n\t}\n\n\tclosest(time) {\n\t\tconst keys = this.keys;\n\t\tconst length = keys.length;\n\t\tlet min = 2;\n\t\tlet result = null;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst diff = Math.abs(time - keys[i][0]);\n\n\t\t\tif (min >= diff) {\n\t\t\t\tmin = diff;\n\t\t\t\tresult = keys[i];\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tclone() {\n\t\tconst result = new Curve();\n\t\tresult.keys = extend(result.keys, this.keys);\n\t\tresult.type = this.type;\n\t\tresult.tension = this.tension;\n\t\treturn result;\n\t}\n\n\tquantize(precision) {\n\t\tprecision = Math.max(precision, 2);\n\t\tconst values = new Float32Array(precision);\n\t\tconst step = 1.0 / (precision - 1);\n\t\tvalues[0] = this._eval.evaluate(0, true);\n\n\t\tfor (let i = 1; i < precision; i++) {\n\t\t\tvalues[i] = this._eval.evaluate(step * i);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tquantizeClamped(precision, min, max) {\n\t\tconst result = this.quantize(precision);\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = Math.min(max, Math.max(min, result[i]));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget length() {\n\t\treturn this.keys.length;\n\t}\n\n}\n\nclass CurveSet {\n\tconstructor() {\n\t\tthis.curves = [];\n\t\tthis._type = CURVE_SMOOTHSTEP;\n\n\t\tif (arguments.length > 1) {\n\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\tthis.curves.push(new Curve(arguments[i]));\n\t\t\t}\n\t\t} else {\n\t\t\tif (arguments.length === 0) {\n\t\t\t\tthis.curves.push(new Curve());\n\t\t\t} else {\n\t\t\t\tconst arg = arguments[0];\n\n\t\t\t\tif (typeof arg === 'number') {\n\t\t\t\t\tfor (let i = 0; i < arg; i++) {\n\t\t\t\t\t\tthis.curves.push(new Curve());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < arg.length; i++) {\n\t\t\t\t\t\tthis.curves.push(new Curve(arg[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget(index) {\n\t\treturn this.curves[index];\n\t}\n\n\tvalue(time, result = []) {\n\t\tconst length = this.curves.length;\n\t\tresult.length = length;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tresult[i] = this.curves[i].value(time);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tclone() {\n\t\tconst result = new CurveSet();\n\t\tresult.curves = [];\n\n\t\tfor (let i = 0; i < this.curves.length; i++) {\n\t\t\tresult.curves.push(this.curves[i].clone());\n\t\t}\n\n\t\tresult._type = this._type;\n\t\treturn result;\n\t}\n\n\tquantize(precision) {\n\t\tprecision = Math.max(precision, 2);\n\t\tconst numCurves = this.curves.length;\n\t\tconst values = new Float32Array(precision * numCurves);\n\t\tconst step = 1.0 / (precision - 1);\n\n\t\tfor (let c = 0; c < numCurves; c++) {\n\t\t\tconst ev = new CurveEvaluator(this.curves[c]);\n\n\t\t\tfor (let i = 0; i < precision; i++) {\n\t\t\t\tvalues[i * numCurves + c] = ev.evaluate(step * i);\n\t\t\t}\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tquantizeClamped(precision, min, max) {\n\t\tconst result = this.quantize(precision);\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = Math.min(max, Math.max(min, result[i]));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget length() {\n\t\treturn this.curves.length;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tthis._type = value;\n\n\t\tfor (let i = 0; i < this.curves.length; i++) {\n\t\t\tthis.curves[i].type = value;\n\t\t}\n\t}\n\n}\n\nclass Vec3 {\n\tconstructor(x = 0, y = 0, z = 0) {\n\t\tif (x.length === 3) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\tthis.z += rhs.z;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\tthis.z = lhs.z + rhs.z;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\tthis.z += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec3(this.x, this.y, this.z);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tcross(lhs, rhs) {\n\t\tconst lx = lhs.x;\n\t\tconst ly = lhs.y;\n\t\tconst lz = lhs.z;\n\t\tconst rx = rhs.x;\n\t\tconst ry = rhs.y;\n\t\tconst rz = rhs.z;\n\t\tthis.x = ly * rz - ry * lz;\n\t\tthis.y = lz * rx - rz * lx;\n\t\tthis.z = lx * ry - rx * ly;\n\t\treturn this;\n\t}\n\n\tdistance(rhs) {\n\t\tconst x = this.x - rhs.x;\n\t\tconst y = this.y - rhs.y;\n\t\tconst z = this.z - rhs.z;\n\t\treturn Math.sqrt(x * x + y * y + z * z);\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\tthis.z /= rhs.z;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\tthis.z = lhs.z / rhs.z;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\tthis.z /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y + this.z * rhs.z;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\tthis.z = lhs.z + alpha * (rhs.z - lhs.z);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\tthis.z *= rhs.z;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\tthis.z = lhs.z * rhs.z;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t\tthis.z *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\tthis.z = Math.floor(this.z);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\tthis.z = Math.ceil(this.z);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\tthis.z = Math.round(this.z);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\tif (rhs.z < this.z) this.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\tif (rhs.z > this.z) this.z = rhs.z;\n\t\treturn this;\n\t}\n\n\tproject(rhs) {\n\t\tconst a_dot_b = this.x * rhs.x + this.y * rhs.y + this.z * rhs.z;\n\t\tconst b_dot_b = rhs.x * rhs.x + rhs.y * rhs.y + rhs.z * rhs.z;\n\t\tconst s = a_dot_b / b_dot_b;\n\t\tthis.x = rhs.x * s;\n\t\tthis.y = rhs.y * s;\n\t\tthis.z = rhs.z * s;\n\t\treturn this;\n\t}\n\n\tset(x, y, z) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\tthis.z -= rhs.z;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\tthis.z = lhs.z - rhs.z;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\tthis.z -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ']';\n\t}\n\n}\n\nVec3.ZERO = Object.freeze(new Vec3(0, 0, 0));\nVec3.ONE = Object.freeze(new Vec3(1, 1, 1));\nVec3.UP = Object.freeze(new Vec3(0, 1, 0));\nVec3.DOWN = Object.freeze(new Vec3(0, -1, 0));\nVec3.RIGHT = Object.freeze(new Vec3(1, 0, 0));\nVec3.LEFT = Object.freeze(new Vec3(-1, 0, 0));\nVec3.FORWARD = Object.freeze(new Vec3(0, 0, -1));\nVec3.BACK = Object.freeze(new Vec3(0, 0, 1));\n\nclass Mat3 {\n\tconstructor() {\n\t\tconst data = new Float32Array(9);\n\t\tdata[0] = data[4] = data[8] = 1;\n\t\tthis.data = data;\n\t}\n\n\tclone() {\n\t\treturn new Mat3().copy(this);\n\t}\n\n\tcopy(rhs) {\n\t\tconst src = rhs.data;\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\treturn this;\n\t}\n\n\tset(src) {\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\tconst l = this.data;\n\t\tconst r = rhs.data;\n\t\treturn l[0] === r[0] && l[1] === r[1] && l[2] === r[2] && l[3] === r[3] && l[4] === r[4] && l[5] === r[5] && l[6] === r[6] && l[7] === r[7] && l[8] === r[8];\n\t}\n\n\tisIdentity() {\n\t\tconst m = this.data;\n\t\treturn m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 0 && m[4] === 1 && m[5] === 0 && m[6] === 0 && m[7] === 0 && m[8] === 1;\n\t}\n\n\tsetIdentity() {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 1;\n\t\tm[5] = 0;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 1;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\tlet t = '[';\n\n\t\tfor (let i = 0; i < 9; i++) {\n\t\t\tt += this.data[i];\n\t\t\tt += i !== 8 ? ', ' : '';\n\t\t}\n\n\t\tt += ']';\n\t\treturn t;\n\t}\n\n\ttranspose() {\n\t\tconst m = this.data;\n\t\tlet tmp;\n\t\ttmp = m[1];\n\t\tm[1] = m[3];\n\t\tm[3] = tmp;\n\t\ttmp = m[2];\n\t\tm[2] = m[6];\n\t\tm[6] = tmp;\n\t\ttmp = m[5];\n\t\tm[5] = m[7];\n\t\tm[7] = tmp;\n\t\treturn this;\n\t}\n\n\tsetFromMat4(m) {\n\t\tconst src = m.data;\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[4];\n\t\tdst[4] = src[5];\n\t\tdst[5] = src[6];\n\t\tdst[6] = src[8];\n\t\tdst[7] = src[9];\n\t\tdst[8] = src[10];\n\t\treturn this;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[3] + z * m[6];\n\t\tres.y = x * m[1] + y * m[4] + z * m[7];\n\t\tres.z = x * m[2] + y * m[5] + z * m[8];\n\t\treturn res;\n\t}\n\n}\n\nMat3.IDENTITY = Object.freeze(new Mat3());\nMat3.ZERO = Object.freeze(new Mat3().set([0, 0, 0, 0, 0, 0, 0, 0, 0]));\n\nclass Vec2 {\n\tconstructor(x = 0, y = 0) {\n\t\tif (x.length === 2) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec2(this.x, this.y);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tcross(rhs) {\n\t\treturn this.x * rhs.y - this.y * rhs.x;\n\t}\n\n\tdistance(rhs) {\n\t\tconst x = this.x - rhs.x;\n\t\tconst y = this.y - rhs.y;\n\t\treturn Math.sqrt(x * x + y * y);\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\treturn this;\n\t}\n\n\tset(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ']';\n\t}\n\n\tstatic angleRad(lhs, rhs) {\n\t\treturn Math.atan2(lhs.x * rhs.y - lhs.y * rhs.x, lhs.x * rhs.x + lhs.y * rhs.y);\n\t}\n\n}\n\nVec2.ZERO = Object.freeze(new Vec2(0, 0));\nVec2.ONE = Object.freeze(new Vec2(1, 1));\nVec2.UP = Object.freeze(new Vec2(0, 1));\nVec2.DOWN = Object.freeze(new Vec2(0, -1));\nVec2.RIGHT = Object.freeze(new Vec2(1, 0));\nVec2.LEFT = Object.freeze(new Vec2(-1, 0));\n\nclass Vec4 {\n\tconstructor(x = 0, y = 0, z = 0, w = 0) {\n\t\tif (x.length === 4) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t\tthis.w = x[3];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t\tthis.w = w;\n\t\t}\n\t}\n\n\tadd(rhs) {\n\t\tthis.x += rhs.x;\n\t\tthis.y += rhs.y;\n\t\tthis.z += rhs.z;\n\t\tthis.w += rhs.w;\n\t\treturn this;\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tthis.x = lhs.x + rhs.x;\n\t\tthis.y = lhs.y + rhs.y;\n\t\tthis.z = lhs.z + rhs.z;\n\t\tthis.w = lhs.w + rhs.w;\n\t\treturn this;\n\t}\n\n\taddScalar(scalar) {\n\t\tthis.x += scalar;\n\t\tthis.y += scalar;\n\t\tthis.z += scalar;\n\t\tthis.w += scalar;\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\treturn new Vec4(this.x, this.y, this.z, this.w);\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\tthis.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tdiv(rhs) {\n\t\tthis.x /= rhs.x;\n\t\tthis.y /= rhs.y;\n\t\tthis.z /= rhs.z;\n\t\tthis.w /= rhs.w;\n\t\treturn this;\n\t}\n\n\tdiv2(lhs, rhs) {\n\t\tthis.x = lhs.x / rhs.x;\n\t\tthis.y = lhs.y / rhs.y;\n\t\tthis.z = lhs.z / rhs.z;\n\t\tthis.w = lhs.w / rhs.w;\n\t\treturn this;\n\t}\n\n\tdivScalar(scalar) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t\tthis.z /= scalar;\n\t\tthis.w /= scalar;\n\t\treturn this;\n\t}\n\n\tdot(rhs) {\n\t\treturn this.x * rhs.x + this.y * rhs.y + this.z * rhs.z + this.w * rhs.w;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z && this.w === rhs.w;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\t}\n\n\tlerp(lhs, rhs, alpha) {\n\t\tthis.x = lhs.x + alpha * (rhs.x - lhs.x);\n\t\tthis.y = lhs.y + alpha * (rhs.y - lhs.y);\n\t\tthis.z = lhs.z + alpha * (rhs.z - lhs.z);\n\t\tthis.w = lhs.w + alpha * (rhs.w - lhs.w);\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\tthis.x *= rhs.x;\n\t\tthis.y *= rhs.y;\n\t\tthis.z *= rhs.z;\n\t\tthis.w *= rhs.w;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tthis.x = lhs.x * rhs.x;\n\t\tthis.y = lhs.y * rhs.y;\n\t\tthis.z = lhs.z * rhs.z;\n\t\tthis.w = lhs.w * rhs.w;\n\t\treturn this;\n\t}\n\n\tmulScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tconst lengthSq = this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t\tif (lengthSq > 0) {\n\t\t\tconst invLength = 1 / Math.sqrt(lengthSq);\n\t\t\tthis.x *= invLength;\n\t\t\tthis.y *= invLength;\n\t\t\tthis.z *= invLength;\n\t\t\tthis.w *= invLength;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\tthis.z = Math.floor(this.z);\n\t\tthis.w = Math.floor(this.w);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\tthis.z = Math.ceil(this.z);\n\t\tthis.w = Math.ceil(this.w);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\tthis.z = Math.round(this.z);\n\t\tthis.w = Math.round(this.w);\n\t\treturn this;\n\t}\n\n\tmin(rhs) {\n\t\tif (rhs.x < this.x) this.x = rhs.x;\n\t\tif (rhs.y < this.y) this.y = rhs.y;\n\t\tif (rhs.z < this.z) this.z = rhs.z;\n\t\tif (rhs.w < this.w) this.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tmax(rhs) {\n\t\tif (rhs.x > this.x) this.x = rhs.x;\n\t\tif (rhs.y > this.y) this.y = rhs.y;\n\t\tif (rhs.z > this.z) this.z = rhs.z;\n\t\tif (rhs.w > this.w) this.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tset(x, y, z, w) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\t\treturn this;\n\t}\n\n\tsub(rhs) {\n\t\tthis.x -= rhs.x;\n\t\tthis.y -= rhs.y;\n\t\tthis.z -= rhs.z;\n\t\tthis.w -= rhs.w;\n\t\treturn this;\n\t}\n\n\tsub2(lhs, rhs) {\n\t\tthis.x = lhs.x - rhs.x;\n\t\tthis.y = lhs.y - rhs.y;\n\t\tthis.z = lhs.z - rhs.z;\n\t\tthis.w = lhs.w - rhs.w;\n\t\treturn this;\n\t}\n\n\tsubScalar(scalar) {\n\t\tthis.x -= scalar;\n\t\tthis.y -= scalar;\n\t\tthis.z -= scalar;\n\t\tthis.w -= scalar;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ']';\n\t}\n\n}\n\nVec4.ZERO = Object.freeze(new Vec4(0, 0, 0, 0));\nVec4.ONE = Object.freeze(new Vec4(1, 1, 1, 1));\n\nconst _halfSize$1 = new Vec2();\n\nconst x = new Vec3();\nconst y = new Vec3();\nconst z = new Vec3();\nconst scale = new Vec3();\n\nclass Mat4 {\n\tconstructor() {\n\t\tconst data = new Float32Array(16);\n\t\tdata[0] = data[5] = data[10] = data[15] = 1;\n\t\tthis.data = data;\n\t}\n\n\tstatic _getPerspectiveHalfSize(halfSize, fov, aspect, znear, fovIsHorizontal) {\n\t\tif (fovIsHorizontal) {\n\t\t\thalfSize.x = znear * Math.tan(fov * Math.PI / 360);\n\t\t\thalfSize.y = halfSize.x / aspect;\n\t\t} else {\n\t\t\thalfSize.y = znear * Math.tan(fov * Math.PI / 360);\n\t\t\thalfSize.x = halfSize.y * aspect;\n\t\t}\n\t}\n\n\tadd2(lhs, rhs) {\n\t\tconst a = lhs.data,\n\t\t\t\t\tb = rhs.data,\n\t\t\t\t\tr = this.data;\n\t\tr[0] = a[0] + b[0];\n\t\tr[1] = a[1] + b[1];\n\t\tr[2] = a[2] + b[2];\n\t\tr[3] = a[3] + b[3];\n\t\tr[4] = a[4] + b[4];\n\t\tr[5] = a[5] + b[5];\n\t\tr[6] = a[6] + b[6];\n\t\tr[7] = a[7] + b[7];\n\t\tr[8] = a[8] + b[8];\n\t\tr[9] = a[9] + b[9];\n\t\tr[10] = a[10] + b[10];\n\t\tr[11] = a[11] + b[11];\n\t\tr[12] = a[12] + b[12];\n\t\tr[13] = a[13] + b[13];\n\t\tr[14] = a[14] + b[14];\n\t\tr[15] = a[15] + b[15];\n\t\treturn this;\n\t}\n\n\tadd(rhs) {\n\t\treturn this.add2(this, rhs);\n\t}\n\n\tclone() {\n\t\treturn new Mat4().copy(this);\n\t}\n\n\tcopy(rhs) {\n\t\tconst src = rhs.data,\n\t\t\t\t\tdst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\tdst[9] = src[9];\n\t\tdst[10] = src[10];\n\t\tdst[11] = src[11];\n\t\tdst[12] = src[12];\n\t\tdst[13] = src[13];\n\t\tdst[14] = src[14];\n\t\tdst[15] = src[15];\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\tconst l = this.data,\n\t\t\t\t\tr = rhs.data;\n\t\treturn l[0] === r[0] && l[1] === r[1] && l[2] === r[2] && l[3] === r[3] && l[4] === r[4] && l[5] === r[5] && l[6] === r[6] && l[7] === r[7] && l[8] === r[8] && l[9] === r[9] && l[10] === r[10] && l[11] === r[11] && l[12] === r[12] && l[13] === r[13] && l[14] === r[14] && l[15] === r[15];\n\t}\n\n\tisIdentity() {\n\t\tconst m = this.data;\n\t\treturn m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 0 && m[4] === 0 && m[5] === 1 && m[6] === 0 && m[7] === 0 && m[8] === 0 && m[9] === 0 && m[10] === 1 && m[11] === 0 && m[12] === 0 && m[13] === 0 && m[14] === 0 && m[15] === 1;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tconst a = lhs.data;\n\t\tconst b = rhs.data;\n\t\tconst r = this.data;\n\t\tconst a00 = a[0];\n\t\tconst a01 = a[1];\n\t\tconst a02 = a[2];\n\t\tconst a03 = a[3];\n\t\tconst a10 = a[4];\n\t\tconst a11 = a[5];\n\t\tconst a12 = a[6];\n\t\tconst a13 = a[7];\n\t\tconst a20 = a[8];\n\t\tconst a21 = a[9];\n\t\tconst a22 = a[10];\n\t\tconst a23 = a[11];\n\t\tconst a30 = a[12];\n\t\tconst a31 = a[13];\n\t\tconst a32 = a[14];\n\t\tconst a33 = a[15];\n\t\tlet b0, b1, b2, b3;\n\t\tb0 = b[0];\n\t\tb1 = b[1];\n\t\tb2 = b[2];\n\t\tb3 = b[3];\n\t\tr[0] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[1] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[2] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[3] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tb3 = b[7];\n\t\tr[4] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[5] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[6] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[7] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tb3 = b[11];\n\t\tr[8] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[9] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[10] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[11] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tb3 = b[15];\n\t\tr[12] = a00 * b0 + a10 * b1 + a20 * b2 + a30 * b3;\n\t\tr[13] = a01 * b0 + a11 * b1 + a21 * b2 + a31 * b3;\n\t\tr[14] = a02 * b0 + a12 * b1 + a22 * b2 + a32 * b3;\n\t\tr[15] = a03 * b0 + a13 * b1 + a23 * b2 + a33 * b3;\n\t\treturn this;\n\t}\n\n\tmulAffine2(lhs, rhs) {\n\t\tconst a = lhs.data;\n\t\tconst b = rhs.data;\n\t\tconst r = this.data;\n\t\tconst a00 = a[0];\n\t\tconst a01 = a[1];\n\t\tconst a02 = a[2];\n\t\tconst a10 = a[4];\n\t\tconst a11 = a[5];\n\t\tconst a12 = a[6];\n\t\tconst a20 = a[8];\n\t\tconst a21 = a[9];\n\t\tconst a22 = a[10];\n\t\tconst a30 = a[12];\n\t\tconst a31 = a[13];\n\t\tconst a32 = a[14];\n\t\tlet b0, b1, b2;\n\t\tb0 = b[0];\n\t\tb1 = b[1];\n\t\tb2 = b[2];\n\t\tr[0] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[1] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[2] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[3] = 0;\n\t\tb0 = b[4];\n\t\tb1 = b[5];\n\t\tb2 = b[6];\n\t\tr[4] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[5] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[6] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[7] = 0;\n\t\tb0 = b[8];\n\t\tb1 = b[9];\n\t\tb2 = b[10];\n\t\tr[8] = a00 * b0 + a10 * b1 + a20 * b2;\n\t\tr[9] = a01 * b0 + a11 * b1 + a21 * b2;\n\t\tr[10] = a02 * b0 + a12 * b1 + a22 * b2;\n\t\tr[11] = 0;\n\t\tb0 = b[12];\n\t\tb1 = b[13];\n\t\tb2 = b[14];\n\t\tr[12] = a00 * b0 + a10 * b1 + a20 * b2 + a30;\n\t\tr[13] = a01 * b0 + a11 * b1 + a21 * b2 + a31;\n\t\tr[14] = a02 * b0 + a12 * b1 + a22 * b2 + a32;\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tmul(rhs) {\n\t\treturn this.mul2(this, rhs);\n\t}\n\n\ttransformPoint(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8] + m[12];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9] + m[13];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10] + m[14];\n\t\treturn res;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10];\n\t\treturn res;\n\t}\n\n\ttransformVec4(vec, res = new Vec4()) {\n\t\tconst m = this.data;\n\t\tconst x = vec.x;\n\t\tconst y = vec.y;\n\t\tconst z = vec.z;\n\t\tconst w = vec.w;\n\t\tres.x = x * m[0] + y * m[4] + z * m[8] + w * m[12];\n\t\tres.y = x * m[1] + y * m[5] + z * m[9] + w * m[13];\n\t\tres.z = x * m[2] + y * m[6] + z * m[10] + w * m[14];\n\t\tres.w = x * m[3] + y * m[7] + z * m[11] + w * m[15];\n\t\treturn res;\n\t}\n\n\tsetLookAt(position, target, up) {\n\t\tz.sub2(position, target).normalize();\n\t\ty.copy(up).normalize();\n\t\tx.cross(y, z).normalize();\n\t\ty.cross(z, x);\n\t\tconst r = this.data;\n\t\tr[0] = x.x;\n\t\tr[1] = x.y;\n\t\tr[2] = x.z;\n\t\tr[3] = 0;\n\t\tr[4] = y.x;\n\t\tr[5] = y.y;\n\t\tr[6] = y.z;\n\t\tr[7] = 0;\n\t\tr[8] = z.x;\n\t\tr[9] = z.y;\n\t\tr[10] = z.z;\n\t\tr[11] = 0;\n\t\tr[12] = position.x;\n\t\tr[13] = position.y;\n\t\tr[14] = position.z;\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetFrustum(left, right, bottom, top, znear, zfar) {\n\t\tconst temp1 = 2 * znear;\n\t\tconst temp2 = right - left;\n\t\tconst temp3 = top - bottom;\n\t\tconst temp4 = zfar - znear;\n\t\tconst r = this.data;\n\t\tr[0] = temp1 / temp2;\n\t\tr[1] = 0;\n\t\tr[2] = 0;\n\t\tr[3] = 0;\n\t\tr[4] = 0;\n\t\tr[5] = temp1 / temp3;\n\t\tr[6] = 0;\n\t\tr[7] = 0;\n\t\tr[8] = (right + left) / temp2;\n\t\tr[9] = (top + bottom) / temp3;\n\t\tr[10] = (-zfar - znear) / temp4;\n\t\tr[11] = -1;\n\t\tr[12] = 0;\n\t\tr[13] = 0;\n\t\tr[14] = -temp1 * zfar / temp4;\n\t\tr[15] = 0;\n\t\treturn this;\n\t}\n\n\tsetPerspective(fov, aspect, znear, zfar, fovIsHorizontal) {\n\t\tMat4._getPerspectiveHalfSize(_halfSize$1, fov, aspect, znear, fovIsHorizontal);\n\n\t\treturn this.setFrustum(-_halfSize$1.x, _halfSize$1.x, -_halfSize$1.y, _halfSize$1.y, znear, zfar);\n\t}\n\n\tsetOrtho(left, right, bottom, top, near, far) {\n\t\tconst r = this.data;\n\t\tr[0] = 2 / (right - left);\n\t\tr[1] = 0;\n\t\tr[2] = 0;\n\t\tr[3] = 0;\n\t\tr[4] = 0;\n\t\tr[5] = 2 / (top - bottom);\n\t\tr[6] = 0;\n\t\tr[7] = 0;\n\t\tr[8] = 0;\n\t\tr[9] = 0;\n\t\tr[10] = -2 / (far - near);\n\t\tr[11] = 0;\n\t\tr[12] = -(right + left) / (right - left);\n\t\tr[13] = -(top + bottom) / (top - bottom);\n\t\tr[14] = -(far + near) / (far - near);\n\t\tr[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetFromAxisAngle(axis, angle) {\n\t\tangle *= math.DEG_TO_RAD;\n\t\tconst x = axis.x;\n\t\tconst y = axis.y;\n\t\tconst z = axis.z;\n\t\tconst c = Math.cos(angle);\n\t\tconst s = Math.sin(angle);\n\t\tconst t = 1 - c;\n\t\tconst tx = t * x;\n\t\tconst ty = t * y;\n\t\tconst m = this.data;\n\t\tm[0] = tx * x + c;\n\t\tm[1] = tx * y + s * z;\n\t\tm[2] = tx * z - s * y;\n\t\tm[3] = 0;\n\t\tm[4] = tx * y - s * z;\n\t\tm[5] = ty * y + c;\n\t\tm[6] = ty * z + s * x;\n\t\tm[7] = 0;\n\t\tm[8] = tx * z + s * y;\n\t\tm[9] = ty * z - x * s;\n\t\tm[10] = t * z * z + c;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetTranslate(x, y, z) {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = 1;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 1;\n\t\tm[11] = 0;\n\t\tm[12] = x;\n\t\tm[13] = y;\n\t\tm[14] = z;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetScale(x, y, z) {\n\t\tconst m = this.data;\n\t\tm[0] = x;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = y;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = z;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetViewport(x, y, width, height) {\n\t\tconst m = this.data;\n\t\tm[0] = width * 0.5;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = height * 0.5;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 0.5;\n\t\tm[11] = 0;\n\t\tm[12] = x + width * 0.5;\n\t\tm[13] = y + height * 0.5;\n\t\tm[14] = 0.5;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tinvert() {\n\t\tconst m = this.data;\n\t\tconst a00 = m[0];\n\t\tconst a01 = m[1];\n\t\tconst a02 = m[2];\n\t\tconst a03 = m[3];\n\t\tconst a10 = m[4];\n\t\tconst a11 = m[5];\n\t\tconst a12 = m[6];\n\t\tconst a13 = m[7];\n\t\tconst a20 = m[8];\n\t\tconst a21 = m[9];\n\t\tconst a22 = m[10];\n\t\tconst a23 = m[11];\n\t\tconst a30 = m[12];\n\t\tconst a31 = m[13];\n\t\tconst a32 = m[14];\n\t\tconst a33 = m[15];\n\t\tconst b00 = a00 * a11 - a01 * a10;\n\t\tconst b01 = a00 * a12 - a02 * a10;\n\t\tconst b02 = a00 * a13 - a03 * a10;\n\t\tconst b03 = a01 * a12 - a02 * a11;\n\t\tconst b04 = a01 * a13 - a03 * a11;\n\t\tconst b05 = a02 * a13 - a03 * a12;\n\t\tconst b06 = a20 * a31 - a21 * a30;\n\t\tconst b07 = a20 * a32 - a22 * a30;\n\t\tconst b08 = a20 * a33 - a23 * a30;\n\t\tconst b09 = a21 * a32 - a22 * a31;\n\t\tconst b10 = a21 * a33 - a23 * a31;\n\t\tconst b11 = a22 * a33 - a23 * a32;\n\t\tconst det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n\t\tif (det === 0) {\n\t\t\tthis.setIdentity();\n\t\t} else {\n\t\t\tconst invDet = 1 / det;\n\t\t\tm[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\n\t\t\tm[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\n\t\t\tm[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\n\t\t\tm[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\n\t\t\tm[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\n\t\t\tm[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\n\t\t\tm[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\n\t\t\tm[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\n\t\t\tm[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\n\t\t\tm[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\n\t\t\tm[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\n\t\t\tm[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\n\t\t\tm[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\n\t\t\tm[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\n\t\t\tm[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\n\t\t\tm[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tset(src) {\n\t\tconst dst = this.data;\n\t\tdst[0] = src[0];\n\t\tdst[1] = src[1];\n\t\tdst[2] = src[2];\n\t\tdst[3] = src[3];\n\t\tdst[4] = src[4];\n\t\tdst[5] = src[5];\n\t\tdst[6] = src[6];\n\t\tdst[7] = src[7];\n\t\tdst[8] = src[8];\n\t\tdst[9] = src[9];\n\t\tdst[10] = src[10];\n\t\tdst[11] = src[11];\n\t\tdst[12] = src[12];\n\t\tdst[13] = src[13];\n\t\tdst[14] = src[14];\n\t\tdst[15] = src[15];\n\t\treturn this;\n\t}\n\n\tsetIdentity() {\n\t\tconst m = this.data;\n\t\tm[0] = 1;\n\t\tm[1] = 0;\n\t\tm[2] = 0;\n\t\tm[3] = 0;\n\t\tm[4] = 0;\n\t\tm[5] = 1;\n\t\tm[6] = 0;\n\t\tm[7] = 0;\n\t\tm[8] = 0;\n\t\tm[9] = 0;\n\t\tm[10] = 1;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tsetTRS(t, r, s) {\n\t\tconst qx = r.x;\n\t\tconst qy = r.y;\n\t\tconst qz = r.z;\n\t\tconst qw = r.w;\n\t\tconst sx = s.x;\n\t\tconst sy = s.y;\n\t\tconst sz = s.z;\n\t\tconst x2 = qx + qx;\n\t\tconst y2 = qy + qy;\n\t\tconst z2 = qz + qz;\n\t\tconst xx = qx * x2;\n\t\tconst xy = qx * y2;\n\t\tconst xz = qx * z2;\n\t\tconst yy = qy * y2;\n\t\tconst yz = qy * z2;\n\t\tconst zz = qz * z2;\n\t\tconst wx = qw * x2;\n\t\tconst wy = qw * y2;\n\t\tconst wz = qw * z2;\n\t\tconst m = this.data;\n\t\tm[0] = (1 - (yy + zz)) * sx;\n\t\tm[1] = (xy + wz) * sx;\n\t\tm[2] = (xz - wy) * sx;\n\t\tm[3] = 0;\n\t\tm[4] = (xy - wz) * sy;\n\t\tm[5] = (1 - (xx + zz)) * sy;\n\t\tm[6] = (yz + wx) * sy;\n\t\tm[7] = 0;\n\t\tm[8] = (xz + wy) * sz;\n\t\tm[9] = (yz - wx) * sz;\n\t\tm[10] = (1 - (xx + yy)) * sz;\n\t\tm[11] = 0;\n\t\tm[12] = t.x;\n\t\tm[13] = t.y;\n\t\tm[14] = t.z;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\ttranspose() {\n\t\tlet tmp;\n\t\tconst m = this.data;\n\t\ttmp = m[1];\n\t\tm[1] = m[4];\n\t\tm[4] = tmp;\n\t\ttmp = m[2];\n\t\tm[2] = m[8];\n\t\tm[8] = tmp;\n\t\ttmp = m[3];\n\t\tm[3] = m[12];\n\t\tm[12] = tmp;\n\t\ttmp = m[6];\n\t\tm[6] = m[9];\n\t\tm[9] = tmp;\n\t\ttmp = m[7];\n\t\tm[7] = m[13];\n\t\tm[13] = tmp;\n\t\ttmp = m[11];\n\t\tm[11] = m[14];\n\t\tm[14] = tmp;\n\t\treturn this;\n\t}\n\n\tinvertTo3x3(res) {\n\t\tconst m = this.data;\n\t\tconst r = res.data;\n\t\tconst m0 = m[0];\n\t\tconst m1 = m[1];\n\t\tconst m2 = m[2];\n\t\tconst m4 = m[4];\n\t\tconst m5 = m[5];\n\t\tconst m6 = m[6];\n\t\tconst m8 = m[8];\n\t\tconst m9 = m[9];\n\t\tconst m10 = m[10];\n\t\tconst a11 = m10 * m5 - m6 * m9;\n\t\tconst a21 = -m10 * m1 + m2 * m9;\n\t\tconst a31 = m6 * m1 - m2 * m5;\n\t\tconst a12 = -m10 * m4 + m6 * m8;\n\t\tconst a22 = m10 * m0 - m2 * m8;\n\t\tconst a32 = -m6 * m0 + m2 * m4;\n\t\tconst a13 = m9 * m4 - m5 * m8;\n\t\tconst a23 = -m9 * m0 + m1 * m8;\n\t\tconst a33 = m5 * m0 - m1 * m4;\n\t\tconst det = m0 * a11 + m1 * a12 + m2 * a13;\n\n\t\tif (det === 0) {\n\t\t\treturn this;\n\t\t}\n\n\t\tconst idet = 1 / det;\n\t\tr[0] = idet * a11;\n\t\tr[1] = idet * a21;\n\t\tr[2] = idet * a31;\n\t\tr[3] = idet * a12;\n\t\tr[4] = idet * a22;\n\t\tr[5] = idet * a32;\n\t\tr[6] = idet * a13;\n\t\tr[7] = idet * a23;\n\t\tr[8] = idet * a33;\n\t\treturn this;\n\t}\n\n\tgetTranslation(t = new Vec3()) {\n\t\treturn t.set(this.data[12], this.data[13], this.data[14]);\n\t}\n\n\tgetX(x = new Vec3()) {\n\t\treturn x.set(this.data[0], this.data[1], this.data[2]);\n\t}\n\n\tgetY(y = new Vec3()) {\n\t\treturn y.set(this.data[4], this.data[5], this.data[6]);\n\t}\n\n\tgetZ(z = new Vec3()) {\n\t\treturn z.set(this.data[8], this.data[9], this.data[10]);\n\t}\n\n\tgetScale(scale = new Vec3()) {\n\t\tthis.getX(x);\n\t\tthis.getY(y);\n\t\tthis.getZ(z);\n\t\tscale.set(x.length(), y.length(), z.length());\n\t\treturn scale;\n\t}\n\n\tsetFromEulerAngles(ex, ey, ez) {\n\t\tex *= math.DEG_TO_RAD;\n\t\tey *= math.DEG_TO_RAD;\n\t\tez *= math.DEG_TO_RAD;\n\t\tconst s1 = Math.sin(-ex);\n\t\tconst c1 = Math.cos(-ex);\n\t\tconst s2 = Math.sin(-ey);\n\t\tconst c2 = Math.cos(-ey);\n\t\tconst s3 = Math.sin(-ez);\n\t\tconst c3 = Math.cos(-ez);\n\t\tconst m = this.data;\n\t\tm[0] = c2 * c3;\n\t\tm[1] = -c2 * s3;\n\t\tm[2] = s2;\n\t\tm[3] = 0;\n\t\tm[4] = c1 * s3 + c3 * s1 * s2;\n\t\tm[5] = c1 * c3 - s1 * s2 * s3;\n\t\tm[6] = -c2 * s1;\n\t\tm[7] = 0;\n\t\tm[8] = s1 * s3 - c1 * c3 * s2;\n\t\tm[9] = c3 * s1 + c1 * s2 * s3;\n\t\tm[10] = c1 * c2;\n\t\tm[11] = 0;\n\t\tm[12] = 0;\n\t\tm[13] = 0;\n\t\tm[14] = 0;\n\t\tm[15] = 1;\n\t\treturn this;\n\t}\n\n\tgetEulerAngles(eulers = new Vec3()) {\n\t\tthis.getScale(scale);\n\t\tconst sx = scale.x;\n\t\tconst sy = scale.y;\n\t\tconst sz = scale.z;\n\t\tif (sx === 0 || sy === 0 || sz === 0) return eulers.set(0, 0, 0);\n\t\tconst m = this.data;\n\t\tconst y = Math.asin(-m[2] / sx);\n\t\tconst halfPi = Math.PI * 0.5;\n\t\tlet x, z;\n\n\t\tif (y < halfPi) {\n\t\t\tif (y > -halfPi) {\n\t\t\t\tx = Math.atan2(m[6] / sy, m[10] / sz);\n\t\t\t\tz = Math.atan2(m[1] / sx, m[0] / sx);\n\t\t\t} else {\n\t\t\t\tz = 0;\n\t\t\t\tx = -Math.atan2(m[4] / sy, m[5] / sy);\n\t\t\t}\n\t\t} else {\n\t\t\tz = 0;\n\t\t\tx = Math.atan2(m[4] / sy, m[5] / sy);\n\t\t}\n\n\t\treturn eulers.set(x, y, z).mulScalar(math.RAD_TO_DEG);\n\t}\n\n\ttoString() {\n\t\tlet t = '[';\n\n\t\tfor (let i = 0; i < 16; i += 1) {\n\t\t\tt += this.data[i];\n\t\t\tt += i !== 15 ? ', ' : '';\n\t\t}\n\n\t\tt += ']';\n\t\treturn t;\n\t}\n\n}\n\nMat4.IDENTITY = Object.freeze(new Mat4());\nMat4.ZERO = Object.freeze(new Mat4().set([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));\n\nclass Quat {\n\tconstructor(x = 0, y = 0, z = 0, w = 1) {\n\t\tif (x.length === 4) {\n\t\t\tthis.x = x[0];\n\t\t\tthis.y = x[1];\n\t\t\tthis.z = x[2];\n\t\t\tthis.w = x[3];\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t\tthis.w = w;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Quat(this.x, this.y, this.z, this.w);\n\t}\n\n\tconjugate() {\n\t\tthis.x *= -1;\n\t\tthis.y *= -1;\n\t\tthis.z *= -1;\n\t\treturn this;\n\t}\n\n\tcopy(rhs) {\n\t\tthis.x = rhs.x;\n\t\tthis.y = rhs.y;\n\t\tthis.z = rhs.z;\n\t\tthis.w = rhs.w;\n\t\treturn this;\n\t}\n\n\tequals(rhs) {\n\t\treturn this.x === rhs.x && this.y === rhs.y && this.z === rhs.z && this.w === rhs.w;\n\t}\n\n\tgetAxisAngle(axis) {\n\t\tlet rad = Math.acos(this.w) * 2;\n\t\tconst s = Math.sin(rad / 2);\n\n\t\tif (s !== 0) {\n\t\t\taxis.x = this.x / s;\n\t\t\taxis.y = this.y / s;\n\t\t\taxis.z = this.z / s;\n\n\t\t\tif (axis.x < 0 || axis.y < 0 || axis.z < 0) {\n\t\t\t\taxis.x *= -1;\n\t\t\t\taxis.y *= -1;\n\t\t\t\taxis.z *= -1;\n\t\t\t\trad *= -1;\n\t\t\t}\n\t\t} else {\n\t\t\taxis.x = 1;\n\t\t\taxis.y = 0;\n\t\t\taxis.z = 0;\n\t\t}\n\n\t\treturn rad * math.RAD_TO_DEG;\n\t}\n\n\tgetEulerAngles(eulers = new Vec3()) {\n\t\tlet x, y, z;\n\t\tconst qx = this.x;\n\t\tconst qy = this.y;\n\t\tconst qz = this.z;\n\t\tconst qw = this.w;\n\t\tconst a2 = 2 * (qw * qy - qx * qz);\n\n\t\tif (a2 <= -0.99999) {\n\t\t\tx = 2 * Math.atan2(qx, qw);\n\t\t\ty = -Math.PI / 2;\n\t\t\tz = 0;\n\t\t} else if (a2 >= 0.99999) {\n\t\t\tx = 2 * Math.atan2(qx, qw);\n\t\t\ty = Math.PI / 2;\n\t\t\tz = 0;\n\t\t} else {\n\t\t\tx = Math.atan2(2 * (qw * qx + qy * qz), 1 - 2 * (qx * qx + qy * qy));\n\t\t\ty = Math.asin(a2);\n\t\t\tz = Math.atan2(2 * (qw * qz + qx * qy), 1 - 2 * (qy * qy + qz * qz));\n\t\t}\n\n\t\treturn eulers.set(x, y, z).mulScalar(math.RAD_TO_DEG);\n\t}\n\n\tinvert() {\n\t\treturn this.conjugate().normalize();\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\t}\n\n\tmul(rhs) {\n\t\tconst q1x = this.x;\n\t\tconst q1y = this.y;\n\t\tconst q1z = this.z;\n\t\tconst q1w = this.w;\n\t\tconst q2x = rhs.x;\n\t\tconst q2y = rhs.y;\n\t\tconst q2z = rhs.z;\n\t\tconst q2w = rhs.w;\n\t\tthis.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\n\t\tthis.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\n\t\tthis.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\n\t\tthis.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\n\t\treturn this;\n\t}\n\n\tmul2(lhs, rhs) {\n\t\tconst q1x = lhs.x;\n\t\tconst q1y = lhs.y;\n\t\tconst q1z = lhs.z;\n\t\tconst q1w = lhs.w;\n\t\tconst q2x = rhs.x;\n\t\tconst q2y = rhs.y;\n\t\tconst q2z = rhs.z;\n\t\tconst q2w = rhs.w;\n\t\tthis.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\n\t\tthis.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\n\t\tthis.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\n\t\tthis.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\n\t\treturn this;\n\t}\n\n\tnormalize() {\n\t\tlet len = this.length();\n\n\t\tif (len === 0) {\n\t\t\tthis.x = this.y = this.z = 0;\n\t\t\tthis.w = 1;\n\t\t} else {\n\t\t\tlen = 1 / len;\n\t\t\tthis.x *= len;\n\t\t\tthis.y *= len;\n\t\t\tthis.z *= len;\n\t\t\tthis.w *= len;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tset(x, y, z, w) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\t\treturn this;\n\t}\n\n\tsetFromAxisAngle(axis, angle) {\n\t\tangle *= 0.5 * math.DEG_TO_RAD;\n\t\tconst sa = Math.sin(angle);\n\t\tconst ca = Math.cos(angle);\n\t\tthis.x = sa * axis.x;\n\t\tthis.y = sa * axis.y;\n\t\tthis.z = sa * axis.z;\n\t\tthis.w = ca;\n\t\treturn this;\n\t}\n\n\tsetFromEulerAngles(ex, ey, ez) {\n\t\tconst halfToRad = 0.5 * math.DEG_TO_RAD;\n\t\tex *= halfToRad;\n\t\tey *= halfToRad;\n\t\tez *= halfToRad;\n\t\tconst sx = Math.sin(ex);\n\t\tconst cx = Math.cos(ex);\n\t\tconst sy = Math.sin(ey);\n\t\tconst cy = Math.cos(ey);\n\t\tconst sz = Math.sin(ez);\n\t\tconst cz = Math.cos(ez);\n\t\tthis.x = sx * cy * cz - cx * sy * sz;\n\t\tthis.y = cx * sy * cz + sx * cy * sz;\n\t\tthis.z = cx * cy * sz - sx * sy * cz;\n\t\tthis.w = cx * cy * cz + sx * sy * sz;\n\t\treturn this;\n\t}\n\n\tsetFromMat4(m) {\n\t\tlet m00, m01, m02, m10, m11, m12, m20, m21, m22, s, rs, lx, ly, lz;\n\t\tm = m.data;\n\t\tm00 = m[0];\n\t\tm01 = m[1];\n\t\tm02 = m[2];\n\t\tm10 = m[4];\n\t\tm11 = m[5];\n\t\tm12 = m[6];\n\t\tm20 = m[8];\n\t\tm21 = m[9];\n\t\tm22 = m[10];\n\t\tlx = m00 * m00 + m01 * m01 + m02 * m02;\n\t\tif (lx === 0) return this;\n\t\tlx = 1 / Math.sqrt(lx);\n\t\tly = m10 * m10 + m11 * m11 + m12 * m12;\n\t\tif (ly === 0) return this;\n\t\tly = 1 / Math.sqrt(ly);\n\t\tlz = m20 * m20 + m21 * m21 + m22 * m22;\n\t\tif (lz === 0) return this;\n\t\tlz = 1 / Math.sqrt(lz);\n\t\tm00 *= lx;\n\t\tm01 *= lx;\n\t\tm02 *= lx;\n\t\tm10 *= ly;\n\t\tm11 *= ly;\n\t\tm12 *= ly;\n\t\tm20 *= lz;\n\t\tm21 *= lz;\n\t\tm22 *= lz;\n\t\tconst tr = m00 + m11 + m22;\n\n\t\tif (tr >= 0) {\n\t\t\ts = Math.sqrt(tr + 1);\n\t\t\tthis.w = s * 0.5;\n\t\t\ts = 0.5 / s;\n\t\t\tthis.x = (m12 - m21) * s;\n\t\t\tthis.y = (m20 - m02) * s;\n\t\t\tthis.z = (m01 - m10) * s;\n\t\t} else {\n\t\t\tif (m00 > m11) {\n\t\t\t\tif (m00 > m22) {\n\t\t\t\t\trs = m00 - (m11 + m22) + 1;\n\t\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\t\tthis.x = rs * 0.5;\n\t\t\t\t\trs = 0.5 / rs;\n\t\t\t\t\tthis.w = (m12 - m21) * rs;\n\t\t\t\t\tthis.y = (m01 + m10) * rs;\n\t\t\t\t\tthis.z = (m02 + m20) * rs;\n\t\t\t\t} else {\n\t\t\t\t\trs = m22 - (m00 + m11) + 1;\n\t\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\t\tthis.z = rs * 0.5;\n\t\t\t\t\trs = 0.5 / rs;\n\t\t\t\t\tthis.w = (m01 - m10) * rs;\n\t\t\t\t\tthis.x = (m20 + m02) * rs;\n\t\t\t\t\tthis.y = (m21 + m12) * rs;\n\t\t\t\t}\n\t\t\t} else if (m11 > m22) {\n\t\t\t\trs = m11 - (m22 + m00) + 1;\n\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\tthis.y = rs * 0.5;\n\t\t\t\trs = 0.5 / rs;\n\t\t\t\tthis.w = (m20 - m02) * rs;\n\t\t\t\tthis.z = (m12 + m21) * rs;\n\t\t\t\tthis.x = (m10 + m01) * rs;\n\t\t\t} else {\n\t\t\t\trs = m22 - (m00 + m11) + 1;\n\t\t\t\trs = Math.sqrt(rs);\n\t\t\t\tthis.z = rs * 0.5;\n\t\t\t\trs = 0.5 / rs;\n\t\t\t\tthis.w = (m01 - m10) * rs;\n\t\t\t\tthis.x = (m20 + m02) * rs;\n\t\t\t\tthis.y = (m21 + m12) * rs;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tslerp(lhs, rhs, alpha) {\n\t\tconst lx = lhs.x;\n\t\tconst ly = lhs.y;\n\t\tconst lz = lhs.z;\n\t\tconst lw = lhs.w;\n\t\tlet rx = rhs.x;\n\t\tlet ry = rhs.y;\n\t\tlet rz = rhs.z;\n\t\tlet rw = rhs.w;\n\t\tlet cosHalfTheta = lw * rw + lx * rx + ly * ry + lz * rz;\n\n\t\tif (cosHalfTheta < 0) {\n\t\t\trw = -rw;\n\t\t\trx = -rx;\n\t\t\try = -ry;\n\t\t\trz = -rz;\n\t\t\tcosHalfTheta = -cosHalfTheta;\n\t\t}\n\n\t\tif (Math.abs(cosHalfTheta) >= 1) {\n\t\t\tthis.w = lw;\n\t\t\tthis.x = lx;\n\t\t\tthis.y = ly;\n\t\t\tthis.z = lz;\n\t\t\treturn this;\n\t\t}\n\n\t\tconst halfTheta = Math.acos(cosHalfTheta);\n\t\tconst sinHalfTheta = Math.sqrt(1 - cosHalfTheta * cosHalfTheta);\n\n\t\tif (Math.abs(sinHalfTheta) < 0.001) {\n\t\t\tthis.w = lw * 0.5 + rw * 0.5;\n\t\t\tthis.x = lx * 0.5 + rx * 0.5;\n\t\t\tthis.y = ly * 0.5 + ry * 0.5;\n\t\t\tthis.z = lz * 0.5 + rz * 0.5;\n\t\t\treturn this;\n\t\t}\n\n\t\tconst ratioA = Math.sin((1 - alpha) * halfTheta) / sinHalfTheta;\n\t\tconst ratioB = Math.sin(alpha * halfTheta) / sinHalfTheta;\n\t\tthis.w = lw * ratioA + rw * ratioB;\n\t\tthis.x = lx * ratioA + rx * ratioB;\n\t\tthis.y = ly * ratioA + ry * ratioB;\n\t\tthis.z = lz * ratioA + rz * ratioB;\n\t\treturn this;\n\t}\n\n\ttransformVector(vec, res = new Vec3()) {\n\t\tconst x = vec.x,\n\t\t\t\t\ty = vec.y,\n\t\t\t\t\tz = vec.z;\n\t\tconst qx = this.x,\n\t\t\t\t\tqy = this.y,\n\t\t\t\t\tqz = this.z,\n\t\t\t\t\tqw = this.w;\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = -qx * x - qy * y - qz * z;\n\t\tres.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n\t\tres.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n\t\tres.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\t\treturn res;\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ']';\n\t}\n\n}\n\nQuat.IDENTITY = Object.freeze(new Quat(0, 0, 0, 1));\nQuat.ZERO = Object.freeze(new Quat(0, 0, 0, 0));\n\nconst tmpVecA$2 = new Vec3();\nconst tmpVecB$1 = new Vec3();\nconst tmpVecC = new Vec3();\nconst tmpVecD = new Vec3();\nconst tmpVecE = new Vec3();\n\nclass BoundingBox {\n\tconstructor(center = new Vec3(), halfExtents = new Vec3(0.5, 0.5, 0.5)) {\n\t\tthis.center = center;\n\t\tthis.halfExtents = halfExtents;\n\t\tthis._min = new Vec3();\n\t\tthis._max = new Vec3();\n\t}\n\n\tadd(other) {\n\t\tconst tc = this.center;\n\t\tconst tcx = tc.x;\n\t\tconst tcy = tc.y;\n\t\tconst tcz = tc.z;\n\t\tconst th = this.halfExtents;\n\t\tconst thx = th.x;\n\t\tconst thy = th.y;\n\t\tconst thz = th.z;\n\t\tlet tminx = tcx - thx;\n\t\tlet tmaxx = tcx + thx;\n\t\tlet tminy = tcy - thy;\n\t\tlet tmaxy = tcy + thy;\n\t\tlet tminz = tcz - thz;\n\t\tlet tmaxz = tcz + thz;\n\t\tconst oc = other.center;\n\t\tconst ocx = oc.x;\n\t\tconst ocy = oc.y;\n\t\tconst ocz = oc.z;\n\t\tconst oh = other.halfExtents;\n\t\tconst ohx = oh.x;\n\t\tconst ohy = oh.y;\n\t\tconst ohz = oh.z;\n\t\tconst ominx = ocx - ohx;\n\t\tconst omaxx = ocx + ohx;\n\t\tconst ominy = ocy - ohy;\n\t\tconst omaxy = ocy + ohy;\n\t\tconst ominz = ocz - ohz;\n\t\tconst omaxz = ocz + ohz;\n\t\tif (ominx < tminx) tminx = ominx;\n\t\tif (omaxx > tmaxx) tmaxx = omaxx;\n\t\tif (ominy < tminy) tminy = ominy;\n\t\tif (omaxy > tmaxy) tmaxy = omaxy;\n\t\tif (ominz < tminz) tminz = ominz;\n\t\tif (omaxz > tmaxz) tmaxz = omaxz;\n\t\ttc.x = (tminx + tmaxx) * 0.5;\n\t\ttc.y = (tminy + tmaxy) * 0.5;\n\t\ttc.z = (tminz + tmaxz) * 0.5;\n\t\tth.x = (tmaxx - tminx) * 0.5;\n\t\tth.y = (tmaxy - tminy) * 0.5;\n\t\tth.z = (tmaxz - tminz) * 0.5;\n\t}\n\n\tcopy(src) {\n\t\tthis.center.copy(src.center);\n\t\tthis.halfExtents.copy(src.halfExtents);\n\t}\n\n\tclone() {\n\t\treturn new BoundingBox(this.center.clone(), this.halfExtents.clone());\n\t}\n\n\tintersects(other) {\n\t\tconst aMax = this.getMax();\n\t\tconst aMin = this.getMin();\n\t\tconst bMax = other.getMax();\n\t\tconst bMin = other.getMin();\n\t\treturn aMin.x <= bMax.x && aMax.x >= bMin.x && aMin.y <= bMax.y && aMax.y >= bMin.y && aMin.z <= bMax.z && aMax.z >= bMin.z;\n\t}\n\n\t_intersectsRay(ray, point) {\n\t\tconst tMin = tmpVecA$2.copy(this.getMin()).sub(ray.origin);\n\t\tconst tMax = tmpVecB$1.copy(this.getMax()).sub(ray.origin);\n\t\tconst dir = ray.direction;\n\n\t\tif (dir.x === 0) {\n\t\t\ttMin.x = tMin.x < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.x = tMax.x < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.x /= dir.x;\n\t\t\ttMax.x /= dir.x;\n\t\t}\n\n\t\tif (dir.y === 0) {\n\t\t\ttMin.y = tMin.y < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.y = tMax.y < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.y /= dir.y;\n\t\t\ttMax.y /= dir.y;\n\t\t}\n\n\t\tif (dir.z === 0) {\n\t\t\ttMin.z = tMin.z < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t\ttMax.z = tMax.z < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;\n\t\t} else {\n\t\t\ttMin.z /= dir.z;\n\t\t\ttMax.z /= dir.z;\n\t\t}\n\n\t\tconst realMin = tmpVecC.set(Math.min(tMin.x, tMax.x), Math.min(tMin.y, tMax.y), Math.min(tMin.z, tMax.z));\n\t\tconst realMax = tmpVecD.set(Math.max(tMin.x, tMax.x), Math.max(tMin.y, tMax.y), Math.max(tMin.z, tMax.z));\n\t\tconst minMax = Math.min(Math.min(realMax.x, realMax.y), realMax.z);\n\t\tconst maxMin = Math.max(Math.max(realMin.x, realMin.y), realMin.z);\n\t\tconst intersects = minMax >= maxMin && maxMin >= 0;\n\t\tif (intersects) point.copy(ray.direction).mulScalar(maxMin).add(ray.origin);\n\t\treturn intersects;\n\t}\n\n\t_fastIntersectsRay(ray) {\n\t\tconst diff = tmpVecA$2;\n\t\tconst cross = tmpVecB$1;\n\t\tconst prod = tmpVecC;\n\t\tconst absDiff = tmpVecD;\n\t\tconst absDir = tmpVecE;\n\t\tconst rayDir = ray.direction;\n\t\tdiff.sub2(ray.origin, this.center);\n\t\tabsDiff.set(Math.abs(diff.x), Math.abs(diff.y), Math.abs(diff.z));\n\t\tprod.mul2(diff, rayDir);\n\t\tif (absDiff.x > this.halfExtents.x && prod.x >= 0) return false;\n\t\tif (absDiff.y > this.halfExtents.y && prod.y >= 0) return false;\n\t\tif (absDiff.z > this.halfExtents.z && prod.z >= 0) return false;\n\t\tabsDir.set(Math.abs(rayDir.x), Math.abs(rayDir.y), Math.abs(rayDir.z));\n\t\tcross.cross(rayDir, diff);\n\t\tcross.set(Math.abs(cross.x), Math.abs(cross.y), Math.abs(cross.z));\n\t\tif (cross.x > this.halfExtents.y * absDir.z + this.halfExtents.z * absDir.y) return false;\n\t\tif (cross.y > this.halfExtents.x * absDir.z + this.halfExtents.z * absDir.x) return false;\n\t\tif (cross.z > this.halfExtents.x * absDir.y + this.halfExtents.y * absDir.x) return false;\n\t\treturn true;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tif (point) {\n\t\t\treturn this._intersectsRay(ray, point);\n\t\t}\n\n\t\treturn this._fastIntersectsRay(ray);\n\t}\n\n\tsetMinMax(min, max) {\n\t\tthis.center.add2(max, min).mulScalar(0.5);\n\t\tthis.halfExtents.sub2(max, min).mulScalar(0.5);\n\t}\n\n\tgetMin() {\n\t\treturn this._min.copy(this.center).sub(this.halfExtents);\n\t}\n\n\tgetMax() {\n\t\treturn this._max.copy(this.center).add(this.halfExtents);\n\t}\n\n\tcontainsPoint(point) {\n\t\tconst min = this.getMin();\n\t\tconst max = this.getMax();\n\n\t\tif (point.x < min.x || point.x > max.x || point.y < min.y || point.y > max.y || point.z < min.z || point.z > max.z) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetFromTransformedAabb(aabb, m) {\n\t\tconst ac = aabb.center;\n\t\tconst ar = aabb.halfExtents;\n\t\tconst d = m.data;\n\t\tconst mx0 = d[0];\n\t\tconst mx1 = d[4];\n\t\tconst mx2 = d[8];\n\t\tconst my0 = d[1];\n\t\tconst my1 = d[5];\n\t\tconst my2 = d[9];\n\t\tconst mz0 = d[2];\n\t\tconst mz1 = d[6];\n\t\tconst mz2 = d[10];\n\t\tthis.center.set(d[12] + mx0 * ac.x + mx1 * ac.y + mx2 * ac.z, d[13] + my0 * ac.x + my1 * ac.y + my2 * ac.z, d[14] + mz0 * ac.x + mz1 * ac.y + mz2 * ac.z);\n\t\tthis.halfExtents.set(Math.abs(mx0) * ar.x + Math.abs(mx1) * ar.y + Math.abs(mx2) * ar.z, Math.abs(my0) * ar.x + Math.abs(my1) * ar.y + Math.abs(my2) * ar.z, Math.abs(mz0) * ar.x + Math.abs(mz1) * ar.y + Math.abs(mz2) * ar.z);\n\t}\n\n\tcompute(vertices, numVerts) {\n\t\tnumVerts = numVerts === undefined ? vertices.length / 3 : numVerts;\n\n\t\tif (numVerts > 0) {\n\t\t\tconst min = tmpVecA$2.set(vertices[0], vertices[1], vertices[2]);\n\t\t\tconst max = tmpVecB$1.set(vertices[0], vertices[1], vertices[2]);\n\n\t\t\tfor (let i = 1; i < numVerts; i++) {\n\t\t\t\tconst x = vertices[i * 3 + 0];\n\t\t\t\tconst y = vertices[i * 3 + 1];\n\t\t\t\tconst z = vertices[i * 3 + 2];\n\t\t\t\tif (x < min.x) min.x = x;\n\t\t\t\tif (y < min.y) min.y = y;\n\t\t\t\tif (z < min.z) min.z = z;\n\t\t\t\tif (x > max.x) max.x = x;\n\t\t\t\tif (y > max.y) max.y = y;\n\t\t\t\tif (z > max.z) max.z = z;\n\t\t\t}\n\n\t\t\tthis.setMinMax(min, max);\n\t\t}\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\tconst sq = this._distanceToBoundingSphereSq(sphere);\n\n\t\tif (sq <= sphere.radius * sphere.radius) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_distanceToBoundingSphereSq(sphere) {\n\t\tconst boxMin = this.getMin();\n\t\tconst boxMax = this.getMax();\n\t\tlet sq = 0;\n\t\tconst axis = ['x', 'y', 'z'];\n\n\t\tfor (let i = 0; i < 3; ++i) {\n\t\t\tlet out = 0;\n\t\t\tconst pn = sphere.center[axis[i]];\n\t\t\tconst bMin = boxMin[axis[i]];\n\t\t\tconst bMax = boxMax[axis[i]];\n\t\t\tlet val = 0;\n\n\t\t\tif (pn < bMin) {\n\t\t\t\tval = bMin - pn;\n\t\t\t\tout += val * val;\n\t\t\t}\n\n\t\t\tif (pn > bMax) {\n\t\t\t\tval = pn - bMax;\n\t\t\t\tout += val * val;\n\t\t\t}\n\n\t\t\tsq += out;\n\t\t}\n\n\t\treturn sq;\n\t}\n\n\t_expand(expandMin, expandMax) {\n\t\ttmpVecA$2.add2(this.getMin(), expandMin);\n\t\ttmpVecB$1.add2(this.getMax(), expandMax);\n\t\tthis.setMinMax(tmpVecA$2, tmpVecB$1);\n\t}\n\n}\n\nconst tmpVecA$1 = new Vec3();\nconst tmpVecB = new Vec3();\n\nclass BoundingSphere {\n\tconstructor(center = new Vec3(), radius = 0.5) {\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\t}\n\n\tcontainsPoint(point) {\n\t\tconst lenSq = tmpVecA$1.sub2(point, this.center).lengthSq();\n\t\tconst r = this.radius;\n\t\treturn lenSq < r * r;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tconst m = tmpVecA$1.copy(ray.origin).sub(this.center);\n\t\tconst b = m.dot(tmpVecB.copy(ray.direction).normalize());\n\t\tconst c = m.dot(m) - this.radius * this.radius;\n\t\tif (c > 0 && b > 0) return null;\n\t\tconst discr = b * b - c;\n\t\tif (discr < 0) return false;\n\t\tconst t = Math.abs(-b - Math.sqrt(discr));\n\t\tif (point) point.copy(ray.direction).mulScalar(t).add(ray.origin);\n\t\treturn true;\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\ttmpVecA$1.sub2(sphere.center, this.center);\n\t\tconst totalRadius = sphere.radius + this.radius;\n\n\t\tif (tmpVecA$1.lengthSq() <= totalRadius * totalRadius) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n}\n\nconst BLEND_SUBTRACTIVE = 0;\nconst BLEND_ADDITIVE = 1;\nconst BLEND_NORMAL = 2;\nconst BLEND_NONE = 3;\nconst BLEND_PREMULTIPLIED = 4;\nconst BLEND_MULTIPLICATIVE = 5;\nconst BLEND_ADDITIVEALPHA = 6;\nconst BLEND_MULTIPLICATIVE2X = 7;\nconst BLEND_SCREEN = 8;\nconst BLEND_MIN = 9;\nconst BLEND_MAX = 10;\nconst FOG_NONE = 'none';\nconst FOG_LINEAR = 'linear';\nconst FOG_EXP = 'exp';\nconst FOG_EXP2 = 'exp2';\nconst FRESNEL_NONE = 0;\nconst FRESNEL_SCHLICK = 2;\nconst LAYER_HUD = 0;\nconst LAYER_GIZMO = 1;\nconst LAYER_FX = 2;\nconst LAYER_WORLD = 15;\nconst LAYERID_WORLD = 0;\nconst LAYERID_DEPTH = 1;\nconst LAYERID_SKYBOX = 2;\nconst LAYERID_IMMEDIATE = 3;\nconst LAYERID_UI = 4;\nconst LIGHTTYPE_DIRECTIONAL = 0;\nconst LIGHTTYPE_OMNI = 1;\nconst LIGHTTYPE_POINT = LIGHTTYPE_OMNI;\nconst LIGHTTYPE_SPOT = 2;\nconst LIGHTSHAPE_PUNCTUAL = 0;\nconst LIGHTSHAPE_RECT = 1;\nconst LIGHTSHAPE_DISK = 2;\nconst LIGHTSHAPE_SPHERE = 3;\nconst LIGHTFALLOFF_LINEAR = 0;\nconst LIGHTFALLOFF_INVERSESQUARED = 1;\nconst SHADOW_PCF3 = 0;\nconst SHADOW_DEPTH = 0;\nconst SHADOW_VSM8 = 1;\nconst SHADOW_VSM16 = 2;\nconst SHADOW_VSM32 = 3;\nconst SHADOW_PCF5 = 4;\nconst SHADOW_COUNT = 5;\nconst BLUR_BOX = 0;\nconst BLUR_GAUSSIAN = 1;\nconst PARTICLESORT_NONE = 0;\nconst PARTICLESORT_DISTANCE = 1;\nconst PARTICLESORT_NEWER_FIRST = 2;\nconst PARTICLESORT_OLDER_FIRST = 3;\nconst PARTICLEMODE_GPU = 0;\nconst PARTICLEMODE_CPU = 1;\nconst EMITTERSHAPE_BOX = 0;\nconst EMITTERSHAPE_SPHERE = 1;\nconst PARTICLEORIENTATION_SCREEN = 0;\nconst PARTICLEORIENTATION_WORLD = 1;\nconst PARTICLEORIENTATION_EMITTER = 2;\nconst PROJECTION_PERSPECTIVE = 0;\nconst PROJECTION_ORTHOGRAPHIC = 1;\nconst RENDERSTYLE_SOLID = 0;\nconst RENDERSTYLE_WIREFRAME = 1;\nconst RENDERSTYLE_POINTS = 2;\nconst CUBEPROJ_NONE = 0;\nconst CUBEPROJ_BOX = 1;\nconst SPECULAR_PHONG = 0;\nconst SPECULAR_BLINN = 1;\nconst DETAILMODE_MUL = 'mul';\nconst DETAILMODE_ADD = 'add';\nconst DETAILMODE_SCREEN = 'screen';\nconst DETAILMODE_OVERLAY = 'overlay';\nconst DETAILMODE_MIN = 'min';\nconst DETAILMODE_MAX = 'max';\nconst GAMMA_NONE = 0;\nconst GAMMA_SRGB = 1;\nconst GAMMA_SRGBFAST = 2;\nconst GAMMA_SRGBHDR = 3;\nconst TONEMAP_LINEAR = 0;\nconst TONEMAP_FILMIC = 1;\nconst TONEMAP_HEJL = 2;\nconst TONEMAP_ACES = 3;\nconst TONEMAP_ACES2 = 4;\nconst SPECOCC_NONE = 0;\nconst SPECOCC_AO = 1;\nconst SPECOCC_GLOSSDEPENDENT = 2;\nconst SHADERDEF_NOSHADOW = 1;\nconst SHADERDEF_SKIN = 2;\nconst SHADERDEF_UV0 = 4;\nconst SHADERDEF_UV1 = 8;\nconst SHADERDEF_VCOLOR = 16;\nconst SHADERDEF_INSTANCING = 32;\nconst SHADERDEF_LM = 64;\nconst SHADERDEF_DIRLM = 128;\nconst SHADERDEF_SCREENSPACE = 256;\nconst SHADERDEF_TANGENTS = 512;\nconst SHADERDEF_MORPH_POSITION = 1024;\nconst SHADERDEF_MORPH_NORMAL = 2048;\nconst SHADERDEF_MORPH_TEXTURE_BASED = 4096;\nconst LINEBATCH_WORLD = 0;\nconst LINEBATCH_OVERLAY = 1;\nconst LINEBATCH_GIZMO = 2;\nconst SHADOWUPDATE_NONE = 0;\nconst SHADOWUPDATE_THISFRAME = 1;\nconst SHADOWUPDATE_REALTIME = 2;\nconst SORTKEY_FORWARD = 0;\nconst SORTKEY_DEPTH = 1;\nconst MASK_DYNAMIC = 1;\nconst MASK_BAKED = 2;\nconst MASK_LIGHTMAP = 4;\nconst SHADER_FORWARD = 0;\nconst SHADER_FORWARDHDR = 1;\nconst SHADER_DEPTH = 2;\nconst SHADER_SHADOW = 3;\nconst SHADER_PICK = 18;\nconst SPRITE_RENDERMODE_SIMPLE = 0;\nconst SPRITE_RENDERMODE_SLICED = 1;\nconst SPRITE_RENDERMODE_TILED = 2;\nconst BAKE_COLOR = 0;\nconst BAKE_COLORDIR = 1;\nconst VIEW_CENTER = 0;\nconst VIEW_LEFT = 1;\nconst VIEW_RIGHT = 2;\nconst SORTMODE_NONE = 0;\nconst SORTMODE_MANUAL = 1;\nconst SORTMODE_MATERIALMESH = 2;\nconst SORTMODE_BACK2FRONT = 3;\nconst SORTMODE_FRONT2BACK = 4;\nconst SORTMODE_CUSTOM = 5;\nconst COMPUPDATED_INSTANCES = 1;\nconst COMPUPDATED_LIGHTS = 2;\nconst COMPUPDATED_CAMERAS = 4;\nconst COMPUPDATED_BLEND = 8;\nconst ASPECT_AUTO = 0;\nconst ASPECT_MANUAL = 1;\nconst ORIENTATION_HORIZONTAL = 0;\nconst ORIENTATION_VERTICAL = 1;\n\nconst _frustumPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\nclass Frustum {\n\tconstructor() {\n\t\tthis.planes = [];\n\n\t\tfor (let i = 0; i < 6; i++) this.planes[i] = [];\n\t}\n\n\tsetFromMat4(matrix) {\n\t\tconst vpm = matrix.data;\n\t\tlet plane;\n\t\tconst planes = this.planes;\n\t\tplane = planes[0];\n\t\tplane[0] = vpm[3] - vpm[0];\n\t\tplane[1] = vpm[7] - vpm[4];\n\t\tplane[2] = vpm[11] - vpm[8];\n\t\tplane[3] = vpm[15] - vpm[12];\n\t\tlet t = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[1];\n\t\tplane[0] = vpm[3] + vpm[0];\n\t\tplane[1] = vpm[7] + vpm[4];\n\t\tplane[2] = vpm[11] + vpm[8];\n\t\tplane[3] = vpm[15] + vpm[12];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[2];\n\t\tplane[0] = vpm[3] + vpm[1];\n\t\tplane[1] = vpm[7] + vpm[5];\n\t\tplane[2] = vpm[11] + vpm[9];\n\t\tplane[3] = vpm[15] + vpm[13];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[3];\n\t\tplane[0] = vpm[3] - vpm[1];\n\t\tplane[1] = vpm[7] - vpm[5];\n\t\tplane[2] = vpm[11] - vpm[9];\n\t\tplane[3] = vpm[15] - vpm[13];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[4];\n\t\tplane[0] = vpm[3] - vpm[2];\n\t\tplane[1] = vpm[7] - vpm[6];\n\t\tplane[2] = vpm[11] - vpm[10];\n\t\tplane[3] = vpm[15] - vpm[14];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t\tplane = planes[5];\n\t\tplane[0] = vpm[3] + vpm[2];\n\t\tplane[1] = vpm[7] + vpm[6];\n\t\tplane[2] = vpm[11] + vpm[10];\n\t\tplane[3] = vpm[15] + vpm[14];\n\t\tt = Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n\t\tplane[0] /= t;\n\t\tplane[1] /= t;\n\t\tplane[2] /= t;\n\t\tplane[3] /= t;\n\t}\n\n\tcontainsPoint(point) {\n\t\tlet p, plane;\n\n\t\tfor (p = 0; p < 6; p++) {\n\t\t\tplane = this.planes[p];\n\n\t\t\tif (plane[0] * point.x + plane[1] * point.y + plane[2] * point.z + plane[3] <= 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tcontainsSphere(sphere) {\n\t\tlet c = 0;\n\t\tlet d;\n\t\tlet p;\n\t\tconst sr = sphere.radius;\n\t\tconst sc = sphere.center;\n\t\tconst scx = sc.x;\n\t\tconst scy = sc.y;\n\t\tconst scz = sc.z;\n\t\tconst planes = this.planes;\n\t\tlet plane;\n\n\t\tfor (p = 0; p < 6; p++) {\n\t\t\tplane = planes[p];\n\t\t\td = plane[0] * scx + plane[1] * scy + plane[2] * scz + plane[3];\n\t\t\tif (d <= -sr) return 0;\n\t\t\tif (d > sr) c++;\n\t\t}\n\n\t\treturn c === 6 ? 2 : 1;\n\t}\n\n\tstatic getPoints(camera, near, far) {\n\t\tnear = near || camera._nearClip;\n\t\tfar = far || camera._farClip;\n\t\tconst fov = camera._fov * Math.PI / 180.0;\n\t\tlet y = camera._projection === PROJECTION_PERSPECTIVE ? Math.tan(fov / 2.0) * near : camera._orthoHeight;\n\t\tlet x = y * camera._aspectRatio;\n\t\tconst points = _frustumPoints;\n\t\tpoints[0].x = x;\n\t\tpoints[0].y = -y;\n\t\tpoints[0].z = -near;\n\t\tpoints[1].x = x;\n\t\tpoints[1].y = y;\n\t\tpoints[1].z = -near;\n\t\tpoints[2].x = -x;\n\t\tpoints[2].y = y;\n\t\tpoints[2].z = -near;\n\t\tpoints[3].x = -x;\n\t\tpoints[3].y = -y;\n\t\tpoints[3].z = -near;\n\n\t\tif (camera._projection === PROJECTION_PERSPECTIVE) {\n\t\t\ty = Math.tan(fov / 2.0) * far;\n\t\t\tx = y * camera._aspectRatio;\n\t\t}\n\n\t\tpoints[4].x = x;\n\t\tpoints[4].y = -y;\n\t\tpoints[4].z = -far;\n\t\tpoints[5].x = x;\n\t\tpoints[5].y = y;\n\t\tpoints[5].z = -far;\n\t\tpoints[6].x = -x;\n\t\tpoints[6].y = y;\n\t\tpoints[6].z = -far;\n\t\tpoints[7].x = -x;\n\t\tpoints[7].y = -y;\n\t\tpoints[7].z = -far;\n\t\treturn points;\n\t}\n\n}\n\nclass Ray {\n\tconstructor(origin = new Vec3(), direction = new Vec3(0, 0, -1)) {\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\t}\n\n\tset(origin, direction) {\n\t\tthis.origin.copy(origin);\n\t\tthis.direction.copy(direction);\n\t\treturn this;\n\t}\n\n}\n\nconst tmpRay = new Ray();\nconst tmpVec3$2 = new Vec3();\nconst tmpSphere = new BoundingSphere();\nconst tmpMat4$1 = new Mat4();\n\nclass OrientedBox {\n\tconstructor(worldTransform = new Mat4(), halfExtents = new Vec3(0.5, 0.5, 0.5)) {\n\t\tthis.halfExtents = halfExtents;\n\t\tthis._modelTransform = worldTransform.clone().invert();\n\t\tthis._worldTransform = worldTransform.clone();\n\t\tthis._aabb = new BoundingBox(new Vec3(), this.halfExtents);\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tthis._modelTransform.transformPoint(ray.origin, tmpRay.origin);\n\n\t\tthis._modelTransform.transformVector(ray.direction, tmpRay.direction);\n\n\t\tif (point) {\n\t\t\tconst result = this._aabb._intersectsRay(tmpRay, point);\n\n\t\t\ttmpMat4$1.copy(this._modelTransform).invert().transformPoint(point, point);\n\t\t\treturn result;\n\t\t}\n\n\t\treturn this._aabb._fastIntersectsRay(tmpRay);\n\t}\n\n\tcontainsPoint(point) {\n\t\tthis._modelTransform.transformPoint(point, tmpVec3$2);\n\n\t\treturn this._aabb.containsPoint(tmpVec3$2);\n\t}\n\n\tintersectsBoundingSphere(sphere) {\n\t\tthis._modelTransform.transformPoint(sphere.center, tmpSphere.center);\n\n\t\ttmpSphere.radius = sphere.radius;\n\n\t\tif (this._aabb.intersectsBoundingSphere(tmpSphere)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget worldTransform() {\n\t\treturn this._worldTransform;\n\t}\n\n\tset worldTransform(value) {\n\t\tthis._worldTransform.copy(value);\n\n\t\tthis._modelTransform.copy(value).invert();\n\t}\n\n}\n\nconst tmpVecA = new Vec3();\n\nclass Plane {\n\tconstructor(point = new Vec3(), normal = new Vec3(0, 0, 1)) {\n\t\tthis.normal = normal;\n\t\tthis.point = point;\n\t}\n\n\tintersectsLine(start, end, point) {\n\t\tconst d = -this.normal.dot(this.point);\n\t\tconst d0 = this.normal.dot(start) + d;\n\t\tconst d1 = this.normal.dot(end) + d;\n\t\tconst t = d0 / (d0 - d1);\n\t\tconst intersects = t >= 0 && t <= 1;\n\t\tif (intersects && point) point.lerp(start, end, t);\n\t\treturn intersects;\n\t}\n\n\tintersectsRay(ray, point) {\n\t\tconst pointToOrigin = tmpVecA.sub2(this.point, ray.origin);\n\t\tconst t = this.normal.dot(pointToOrigin) / this.normal.dot(ray.direction);\n\t\tconst intersects = t >= 0;\n\t\tif (intersects && point) point.copy(ray.direction).mulScalar(t).add(ray.origin);\n\t\treturn intersects;\n\t}\n\n}\n\nconst ADDRESS_REPEAT = 0;\nconst ADDRESS_CLAMP_TO_EDGE = 1;\nconst ADDRESS_MIRRORED_REPEAT = 2;\nconst BLENDMODE_ZERO = 0;\nconst BLENDMODE_ONE = 1;\nconst BLENDMODE_SRC_COLOR = 2;\nconst BLENDMODE_ONE_MINUS_SRC_COLOR = 3;\nconst BLENDMODE_DST_COLOR = 4;\nconst BLENDMODE_ONE_MINUS_DST_COLOR = 5;\nconst BLENDMODE_SRC_ALPHA = 6;\nconst BLENDMODE_SRC_ALPHA_SATURATE = 7;\nconst BLENDMODE_ONE_MINUS_SRC_ALPHA = 8;\nconst BLENDMODE_DST_ALPHA = 9;\nconst BLENDMODE_ONE_MINUS_DST_ALPHA = 10;\nconst BLENDEQUATION_ADD = 0;\nconst BLENDEQUATION_SUBTRACT = 1;\nconst BLENDEQUATION_REVERSE_SUBTRACT = 2;\nconst BLENDEQUATION_MIN = 3;\nconst BLENDEQUATION_MAX = 4;\nconst BUFFER_STATIC = 0;\nconst BUFFER_DYNAMIC = 1;\nconst BUFFER_STREAM = 2;\nconst BUFFER_GPUDYNAMIC = 3;\nconst CLEARFLAG_COLOR = 1;\nconst CLEARFLAG_DEPTH = 2;\nconst CLEARFLAG_STENCIL = 4;\nconst CUBEFACE_POSX = 0;\nconst CUBEFACE_NEGX = 1;\nconst CUBEFACE_POSY = 2;\nconst CUBEFACE_NEGY = 3;\nconst CUBEFACE_POSZ = 4;\nconst CUBEFACE_NEGZ = 5;\nconst CULLFACE_NONE = 0;\nconst CULLFACE_BACK = 1;\nconst CULLFACE_FRONT = 2;\nconst CULLFACE_FRONTANDBACK = 3;\nconst FILTER_NEAREST = 0;\nconst FILTER_LINEAR = 1;\nconst FILTER_NEAREST_MIPMAP_NEAREST = 2;\nconst FILTER_NEAREST_MIPMAP_LINEAR = 3;\nconst FILTER_LINEAR_MIPMAP_NEAREST = 4;\nconst FILTER_LINEAR_MIPMAP_LINEAR = 5;\nconst FUNC_NEVER = 0;\nconst FUNC_LESS = 1;\nconst FUNC_EQUAL = 2;\nconst FUNC_LESSEQUAL = 3;\nconst FUNC_GREATER = 4;\nconst FUNC_NOTEQUAL = 5;\nconst FUNC_GREATEREQUAL = 6;\nconst FUNC_ALWAYS = 7;\nconst INDEXFORMAT_UINT8 = 0;\nconst INDEXFORMAT_UINT16 = 1;\nconst INDEXFORMAT_UINT32 = 2;\nconst PIXELFORMAT_A8 = 0;\nconst PIXELFORMAT_L8 = 1;\nconst PIXELFORMAT_L8_A8 = 2;\nconst PIXELFORMAT_R5_G6_B5 = 3;\nconst PIXELFORMAT_R5_G5_B5_A1 = 4;\nconst PIXELFORMAT_R4_G4_B4_A4 = 5;\nconst PIXELFORMAT_R8_G8_B8 = 6;\nconst PIXELFORMAT_R8_G8_B8_A8 = 7;\nconst PIXELFORMAT_DXT1 = 8;\nconst PIXELFORMAT_DXT3 = 9;\nconst PIXELFORMAT_DXT5 = 10;\nconst PIXELFORMAT_RGB16F = 11;\nconst PIXELFORMAT_RGBA16F = 12;\nconst PIXELFORMAT_RGB32F = 13;\nconst PIXELFORMAT_RGBA32F = 14;\nconst PIXELFORMAT_R32F = 15;\nconst PIXELFORMAT_DEPTH = 16;\nconst PIXELFORMAT_DEPTHSTENCIL = 17;\nconst PIXELFORMAT_111110F = 18;\nconst PIXELFORMAT_SRGB = 19;\nconst PIXELFORMAT_SRGBA = 20;\nconst PIXELFORMAT_ETC1 = 21;\nconst PIXELFORMAT_ETC2_RGB = 22;\nconst PIXELFORMAT_ETC2_RGBA = 23;\nconst PIXELFORMAT_PVRTC_2BPP_RGB_1 = 24;\nconst PIXELFORMAT_PVRTC_2BPP_RGBA_1 = 25;\nconst PIXELFORMAT_PVRTC_4BPP_RGB_1 = 26;\nconst PIXELFORMAT_PVRTC_4BPP_RGBA_1 = 27;\nconst PIXELFORMAT_ASTC_4x4 = 28;\nconst PIXELFORMAT_ATC_RGB = 29;\nconst PIXELFORMAT_ATC_RGBA = 30;\nconst PRIMITIVE_POINTS = 0;\nconst PRIMITIVE_LINES = 1;\nconst PRIMITIVE_LINELOOP = 2;\nconst PRIMITIVE_LINESTRIP = 3;\nconst PRIMITIVE_TRIANGLES = 4;\nconst PRIMITIVE_TRISTRIP = 5;\nconst PRIMITIVE_TRIFAN = 6;\nconst SEMANTIC_POSITION = \"POSITION\";\nconst SEMANTIC_NORMAL = \"NORMAL\";\nconst SEMANTIC_TANGENT = \"TANGENT\";\nconst SEMANTIC_BLENDWEIGHT = \"BLENDWEIGHT\";\nconst SEMANTIC_BLENDINDICES = \"BLENDINDICES\";\nconst SEMANTIC_COLOR = \"COLOR\";\nconst SEMANTIC_TEXCOORD = \"TEXCOORD\";\nconst SEMANTIC_TEXCOORD0 = \"TEXCOORD0\";\nconst SEMANTIC_TEXCOORD1 = \"TEXCOORD1\";\nconst SEMANTIC_TEXCOORD2 = \"TEXCOORD2\";\nconst SEMANTIC_TEXCOORD3 = \"TEXCOORD3\";\nconst SEMANTIC_TEXCOORD4 = \"TEXCOORD4\";\nconst SEMANTIC_TEXCOORD5 = \"TEXCOORD5\";\nconst SEMANTIC_TEXCOORD6 = \"TEXCOORD6\";\nconst SEMANTIC_TEXCOORD7 = \"TEXCOORD7\";\nconst SEMANTIC_ATTR = \"ATTR\";\nconst SEMANTIC_ATTR0 = \"ATTR0\";\nconst SEMANTIC_ATTR1 = \"ATTR1\";\nconst SEMANTIC_ATTR2 = \"ATTR2\";\nconst SEMANTIC_ATTR3 = \"ATTR3\";\nconst SEMANTIC_ATTR4 = \"ATTR4\";\nconst SEMANTIC_ATTR5 = \"ATTR5\";\nconst SEMANTIC_ATTR6 = \"ATTR6\";\nconst SEMANTIC_ATTR7 = \"ATTR7\";\nconst SEMANTIC_ATTR8 = \"ATTR8\";\nconst SEMANTIC_ATTR9 = \"ATTR9\";\nconst SEMANTIC_ATTR10 = \"ATTR10\";\nconst SEMANTIC_ATTR11 = \"ATTR11\";\nconst SEMANTIC_ATTR12 = \"ATTR12\";\nconst SEMANTIC_ATTR13 = \"ATTR13\";\nconst SEMANTIC_ATTR14 = \"ATTR14\";\nconst SEMANTIC_ATTR15 = \"ATTR15\";\nconst SHADERTAG_MATERIAL = 1;\nconst STENCILOP_KEEP = 0;\nconst STENCILOP_ZERO = 1;\nconst STENCILOP_REPLACE = 2;\nconst STENCILOP_INCREMENT = 3;\nconst STENCILOP_INCREMENTWRAP = 4;\nconst STENCILOP_DECREMENT = 5;\nconst STENCILOP_DECREMENTWRAP = 6;\nconst STENCILOP_INVERT = 7;\nconst TEXTURELOCK_READ = 1;\nconst TEXTURELOCK_WRITE = 2;\nconst TEXTURETYPE_DEFAULT = 'default';\nconst TEXTURETYPE_RGBM = 'rgbm';\nconst TEXTURETYPE_RGBE = 'rgbe';\nconst TEXTURETYPE_SWIZZLEGGGR = 'swizzleGGGR';\nconst TEXHINT_NONE = 0;\nconst TEXHINT_SHADOWMAP = 1;\nconst TEXHINT_ASSET = 2;\nconst TEXHINT_LIGHTMAP = 3;\nconst TEXTUREPROJECTION_NONE = \"none\";\nconst TEXTUREPROJECTION_CUBE = \"cube\";\nconst TEXTUREPROJECTION_EQUIRECT = \"equirect\";\nconst TEXTUREPROJECTION_OCTAHEDRAL = \"octahedral\";\nconst TYPE_INT8 = 0;\nconst TYPE_UINT8 = 1;\nconst TYPE_INT16 = 2;\nconst TYPE_UINT16 = 3;\nconst TYPE_INT32 = 4;\nconst TYPE_UINT32 = 5;\nconst TYPE_FLOAT32 = 6;\nconst UNIFORMTYPE_BOOL = 0;\nconst UNIFORMTYPE_INT = 1;\nconst UNIFORMTYPE_FLOAT = 2;\nconst UNIFORMTYPE_VEC2 = 3;\nconst UNIFORMTYPE_VEC3 = 4;\nconst UNIFORMTYPE_VEC4 = 5;\nconst UNIFORMTYPE_IVEC2 = 6;\nconst UNIFORMTYPE_IVEC3 = 7;\nconst UNIFORMTYPE_IVEC4 = 8;\nconst UNIFORMTYPE_BVEC2 = 9;\nconst UNIFORMTYPE_BVEC3 = 10;\nconst UNIFORMTYPE_BVEC4 = 11;\nconst UNIFORMTYPE_MAT2 = 12;\nconst UNIFORMTYPE_MAT3 = 13;\nconst UNIFORMTYPE_MAT4 = 14;\nconst UNIFORMTYPE_TEXTURE2D = 15;\nconst UNIFORMTYPE_TEXTURECUBE = 16;\nconst UNIFORMTYPE_FLOATARRAY = 17;\nconst UNIFORMTYPE_TEXTURE2D_SHADOW = 18;\nconst UNIFORMTYPE_TEXTURECUBE_SHADOW = 19;\nconst UNIFORMTYPE_TEXTURE3D = 20;\nconst UNIFORMTYPE_VEC2ARRAY = 21;\nconst UNIFORMTYPE_VEC3ARRAY = 22;\nconst UNIFORMTYPE_VEC4ARRAY = 23;\nconst typedArrayTypes = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array];\nconst typedArrayTypesByteSize = [1, 1, 2, 2, 4, 4, 4];\nconst typedArrayToType = {\n\t\"Int8Array\": TYPE_INT8,\n\t\"Uint8Array\": TYPE_UINT8,\n\t\"Int16Array\": TYPE_INT16,\n\t\"Uint16Array\": TYPE_UINT16,\n\t\"Int32Array\": TYPE_INT32,\n\t\"Uint32Array\": TYPE_UINT32,\n\t\"Float32Array\": TYPE_FLOAT32\n};\nconst typedArrayIndexFormats = [Uint8Array, Uint16Array, Uint32Array];\nconst typedArrayIndexFormatsByteSize = [1, 2, 4];\nconst semanticToLocation = {};\nsemanticToLocation[SEMANTIC_POSITION] = 0;\nsemanticToLocation[SEMANTIC_NORMAL] = 1;\nsemanticToLocation[SEMANTIC_BLENDWEIGHT] = 2;\nsemanticToLocation[SEMANTIC_BLENDINDICES] = 3;\nsemanticToLocation[SEMANTIC_COLOR] = 4;\nsemanticToLocation[SEMANTIC_TEXCOORD0] = 5;\nsemanticToLocation[SEMANTIC_TEXCOORD1] = 6;\nsemanticToLocation[SEMANTIC_TEXCOORD2] = 7;\nsemanticToLocation[SEMANTIC_TEXCOORD3] = 8;\nsemanticToLocation[SEMANTIC_TEXCOORD4] = 9;\nsemanticToLocation[SEMANTIC_TEXCOORD5] = 10;\nsemanticToLocation[SEMANTIC_TEXCOORD6] = 11;\nsemanticToLocation[SEMANTIC_TEXCOORD7] = 12;\nsemanticToLocation[SEMANTIC_TANGENT] = 13;\nsemanticToLocation[SEMANTIC_ATTR0] = 0;\nsemanticToLocation[SEMANTIC_ATTR1] = 1;\nsemanticToLocation[SEMANTIC_ATTR2] = 2;\nsemanticToLocation[SEMANTIC_ATTR3] = 3;\nsemanticToLocation[SEMANTIC_ATTR4] = 4;\nsemanticToLocation[SEMANTIC_ATTR5] = 5;\nsemanticToLocation[SEMANTIC_ATTR6] = 6;\nsemanticToLocation[SEMANTIC_ATTR7] = 7;\nsemanticToLocation[SEMANTIC_ATTR8] = 8;\nsemanticToLocation[SEMANTIC_ATTR9] = 9;\nsemanticToLocation[SEMANTIC_ATTR10] = 10;\nsemanticToLocation[SEMANTIC_ATTR11] = 11;\nsemanticToLocation[SEMANTIC_ATTR12] = 12;\nsemanticToLocation[SEMANTIC_ATTR13] = 13;\nsemanticToLocation[SEMANTIC_ATTR14] = 14;\nsemanticToLocation[SEMANTIC_ATTR15] = 15;\n\nlet id$2 = 0;\n\nclass VertexBuffer {\n\tconstructor(graphicsDevice, format, numVertices, usage = BUFFER_STATIC, initialData) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.format = format;\n\t\tthis.numVertices = numVertices;\n\t\tthis.usage = usage;\n\t\tthis.id = id$2++;\n\t\tthis._vao = null;\n\t\tthis.instancing = false;\n\t\tthis.numBytes = format.verticesByteSize ? format.verticesByteSize : format.size * numVertices;\n\t\tgraphicsDevice._vram.vb += this.numBytes;\n\n\t\tif (initialData) {\n\t\t\tthis.setData(initialData);\n\t\t} else {\n\t\t\tthis.storage = new ArrayBuffer(this.numBytes);\n\t\t}\n\n\t\tthis.device.buffers.push(this);\n\t}\n\n\tdestroy() {\n\t\tconst device = this.device;\n\t\tconst idx = device.buffers.indexOf(this);\n\n\t\tif (idx !== -1) {\n\t\t\tdevice.buffers.splice(idx, 1);\n\t\t}\n\n\t\tif (this.bufferId) {\n\t\t\tconst gl = device.gl;\n\t\t\tdevice.boundVao = null;\n\t\t\tgl.bindVertexArray(null);\n\t\t\tgl.deleteBuffer(this.bufferId);\n\t\t\tdevice._vram.vb -= this.storage.byteLength;\n\t\t\tthis.bufferId = null;\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis.bufferId = undefined;\n\t\tthis._vao = null;\n\t}\n\n\tgetFormat() {\n\t\treturn this.format;\n\t}\n\n\tgetUsage() {\n\t\treturn this.usage;\n\t}\n\n\tgetNumVertices() {\n\t\treturn this.numVertices;\n\t}\n\n\tlock() {\n\t\treturn this.storage;\n\t}\n\n\tunlock() {\n\t\tconst gl = this.device.gl;\n\n\t\tif (!this.bufferId) {\n\t\t\tthis.bufferId = gl.createBuffer();\n\t\t}\n\n\t\tlet glUsage;\n\n\t\tswitch (this.usage) {\n\t\t\tcase BUFFER_STATIC:\n\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_DYNAMIC:\n\t\t\t\tglUsage = gl.DYNAMIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_STREAM:\n\t\t\t\tglUsage = gl.STREAM_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_GPUDYNAMIC:\n\t\t\t\tif (this.device.webgl2) {\n\t\t\t\t\tglUsage = gl.DYNAMIC_COPY;\n\t\t\t\t} else {\n\t\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.bufferId);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.storage, glUsage);\n\t}\n\n\tsetData(data) {\n\t\tif (data.byteLength !== this.numBytes) {\n\t\t\tconsole.error(\"VertexBuffer: wrong initial data size: expected \" + this.numBytes + \", got \" + data.byteLength);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.storage = data;\n\t\tthis.unlock();\n\t\treturn true;\n\t}\n\n}\n\nfunction hashCode(str) {\n\tvar hash = 0;\n\n\tfor (var i = 0, len = str.length; i < len; i++) {\n\t\thash = (hash << 5) - hash + str.charCodeAt(i);\n\t\thash |= 0;\n\t}\n\n\treturn hash;\n}\n\nclass VertexFormat {\n\tconstructor(graphicsDevice, description, vertexCount) {\n\t\tthis.elements = [];\n\t\tthis.hasUv0 = false;\n\t\tthis.hasUv1 = false;\n\t\tthis.hasColor = false;\n\t\tthis.hasTangents = false;\n\t\tthis.verticesByteSize = 0;\n\t\tthis.vertexCount = vertexCount;\n\t\tthis.interleaved = vertexCount === undefined;\n\t\tthis.size = description.reduce((total, desc) => {\n\t\t\treturn total + Math.ceil(desc.components * typedArrayTypesByteSize[desc.type] / 4) * 4;\n\t\t}, 0);\n\t\tlet offset = 0,\n\t\t\t\telementSize;\n\n\t\tfor (var i = 0, len = description.length; i < len; i++) {\n\t\t\tconst elementDesc = description[i];\n\t\t\telementSize = elementDesc.components * typedArrayTypesByteSize[elementDesc.type];\n\n\t\t\tif (vertexCount) {\n\t\t\t\toffset = math.roundUp(offset, elementSize);\n\t\t\t}\n\n\t\t\tconst element = {\n\t\t\t\tname: elementDesc.semantic,\n\t\t\t\toffset: vertexCount ? offset : elementDesc.hasOwnProperty('offset') ? elementDesc.offset : offset,\n\t\t\t\tstride: vertexCount ? elementSize : elementDesc.hasOwnProperty('stride') ? elementDesc.stride : this.size,\n\t\t\t\tdataType: elementDesc.type,\n\t\t\t\tnumComponents: elementDesc.components,\n\t\t\t\tnormalize: elementDesc.normalize === undefined ? false : elementDesc.normalize,\n\t\t\t\tsize: elementSize\n\t\t\t};\n\t\t\tthis.elements.push(element);\n\n\t\t\tif (vertexCount) {\n\t\t\t\toffset += elementSize * vertexCount;\n\t\t\t} else {\n\t\t\t\toffset += Math.ceil(elementSize / 4) * 4;\n\t\t\t}\n\n\t\t\tif (elementDesc.semantic === SEMANTIC_TEXCOORD0) {\n\t\t\t\tthis.hasUv0 = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_TEXCOORD1) {\n\t\t\t\tthis.hasUv1 = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_COLOR) {\n\t\t\t\tthis.hasColor = true;\n\t\t\t} else if (elementDesc.semantic === SEMANTIC_TANGENT) {\n\t\t\t\tthis.hasTangents = true;\n\t\t\t}\n\t\t}\n\n\t\tif (vertexCount) {\n\t\t\tthis.verticesByteSize = offset;\n\t\t}\n\n\t\tthis.update();\n\t}\n\n\tstatic init(graphicsDevice) {\n\t\tconst formatDesc = [{\n\t\t\tsemantic: SEMANTIC_TEXCOORD2,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD3,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD4,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD5,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tVertexFormat._defaultInstancingFormat = new VertexFormat(graphicsDevice, formatDesc);\n\t}\n\n\tstatic get defaultInstancingFormat() {\n\t\treturn VertexFormat._defaultInstancingFormat;\n\t}\n\n\tupdate() {\n\t\tthis._evaluateHash();\n\t}\n\n\t_evaluateHash() {\n\t\tlet stringElementBatch;\n\t\tconst stringElementsBatch = [];\n\t\tlet stringElementRender;\n\t\tconst stringElementsRender = [];\n\t\tconst len = this.elements.length;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst element = this.elements[i];\n\t\t\tstringElementBatch = element.name;\n\t\t\tstringElementBatch += element.dataType;\n\t\t\tstringElementBatch += element.numComponents;\n\t\t\tstringElementBatch += element.normalize;\n\t\t\tstringElementsBatch.push(stringElementBatch);\n\t\t\tstringElementRender = stringElementBatch;\n\t\t\tstringElementRender += element.offset;\n\t\t\tstringElementRender += element.stride;\n\t\t\tstringElementRender += element.size;\n\t\t\tstringElementsRender.push(stringElementRender);\n\t\t}\n\n\t\tstringElementsBatch.sort();\n\t\tthis.batchingHash = hashCode(stringElementsBatch.join());\n\t\tthis.renderingingHash = hashCode(stringElementsRender.join());\n\t}\n\n}\n\nVertexFormat._defaultInstancingFormat = null;\n\nfunction set1(a) {\n\tthis.array[this.index] = a;\n}\n\nfunction set2(a, b) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n}\n\nfunction set3(a, b, c) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n\tthis.array[this.index + 2] = c;\n}\n\nfunction set4(a, b, c, d) {\n\tthis.array[this.index] = a;\n\tthis.array[this.index + 1] = b;\n\tthis.array[this.index + 2] = c;\n\tthis.array[this.index + 3] = d;\n}\n\nfunction arraySet1(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n}\n\nfunction arraySet2(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n}\n\nfunction arraySet3(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n\tthis.array[index + 2] = inputArray[inputIndex + 2];\n}\n\nfunction arraySet4(index, inputArray, inputIndex) {\n\tthis.array[index] = inputArray[inputIndex];\n\tthis.array[index + 1] = inputArray[inputIndex + 1];\n\tthis.array[index + 2] = inputArray[inputIndex + 2];\n\tthis.array[index + 3] = inputArray[inputIndex + 3];\n}\n\nfunction arrayGet1(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n}\n\nfunction arrayGet2(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n}\n\nfunction arrayGet3(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n\toutputArray[outputIndex + 2] = this.array[offset + 2];\n}\n\nfunction arrayGet4(offset, outputArray, outputIndex) {\n\toutputArray[outputIndex] = this.array[offset];\n\toutputArray[outputIndex + 1] = this.array[offset + 1];\n\toutputArray[outputIndex + 2] = this.array[offset + 2];\n\toutputArray[outputIndex + 3] = this.array[offset + 3];\n}\n\nclass VertexIteratorAccessor {\n\tconstructor(buffer, vertexElement, vertexFormat) {\n\t\tthis.index = 0;\n\t\tthis.numComponents = vertexElement.numComponents;\n\n\t\tif (vertexFormat.interleaved) {\n\t\t\tthis.array = new typedArrayTypes[vertexElement.dataType](buffer, vertexElement.offset);\n\t\t} else {\n\t\t\tthis.array = new typedArrayTypes[vertexElement.dataType](buffer, vertexElement.offset, vertexFormat.vertexCount * vertexElement.numComponents);\n\t\t}\n\n\t\tthis.stride = vertexElement.stride / this.array.constructor.BYTES_PER_ELEMENT;\n\n\t\tswitch (vertexElement.numComponents) {\n\t\t\tcase 1:\n\t\t\t\tthis.set = set1;\n\t\t\t\tthis.getToArray = arrayGet1;\n\t\t\t\tthis.setFromArray = arraySet1;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tthis.set = set2;\n\t\t\t\tthis.getToArray = arrayGet2;\n\t\t\t\tthis.setFromArray = arraySet2;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tthis.set = set3;\n\t\t\t\tthis.getToArray = arrayGet3;\n\t\t\t\tthis.setFromArray = arraySet3;\n\t\t\t\tbreak;\n\n\t\t\tcase 4:\n\t\t\t\tthis.set = set4;\n\t\t\t\tthis.getToArray = arrayGet4;\n\t\t\t\tthis.setFromArray = arraySet4;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tget(offset) {\n\t\treturn this.array[this.index + offset];\n\t}\n\n\tset(a, b, c, d) {}\n\n\tgetToArray(offset, outputArray, outputIndex) {}\n\n\tsetFromArray(index, inputArray, inputIndex) {}\n\n}\n\nclass VertexIterator {\n\tconstructor(vertexBuffer) {\n\t\tthis.vertexBuffer = vertexBuffer;\n\t\tthis.vertexFormatSize = vertexBuffer.getFormat().size;\n\t\tthis.buffer = this.vertexBuffer.lock();\n\t\tthis.accessors = [];\n\t\tthis.element = {};\n\t\tconst vertexFormat = this.vertexBuffer.getFormat();\n\n\t\tfor (let i = 0; i < vertexFormat.elements.length; i++) {\n\t\t\tconst vertexElement = vertexFormat.elements[i];\n\t\t\tthis.accessors[i] = new VertexIteratorAccessor(this.buffer, vertexElement, vertexFormat);\n\t\t\tthis.element[vertexElement.name] = this.accessors[i];\n\t\t}\n\t}\n\n\tnext(count = 1) {\n\t\tlet i = 0;\n\t\tconst accessors = this.accessors;\n\t\tconst numAccessors = this.accessors.length;\n\n\t\twhile (i < numAccessors) {\n\t\t\tconst accessor = accessors[i++];\n\t\t\taccessor.index += count * accessor.stride;\n\t\t}\n\t}\n\n\tend() {\n\t\tthis.vertexBuffer.unlock();\n\t}\n\n\twriteData(semantic, data, numVertices) {\n\t\tconst element = this.element[semantic];\n\n\t\tif (element) {\n\t\t\tif (numVertices > this.vertexBuffer.numVertices) {\n\t\t\t\tnumVertices = this.vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tconst numComponents = element.numComponents;\n\n\t\t\tif (this.vertexBuffer.getFormat().interleaved) {\n\t\t\t\tlet index = 0;\n\n\t\t\t\tfor (let i = 0; i < numVertices; i++) {\n\t\t\t\t\telement.setFromArray(index, data, i * numComponents);\n\t\t\t\t\tindex += element.stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (data.length > numVertices * numComponents) {\n\t\t\t\t\tconst copyCount = numVertices * numComponents;\n\n\t\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\t\tdata = data.subarray(0, copyCount);\n\t\t\t\t\t\telement.array.set(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0; i < copyCount; i++) element.array[i] = data[i];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.array.set(data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treadData(semantic, data) {\n\t\tconst element = this.element[semantic];\n\t\tlet count = 0;\n\n\t\tif (element) {\n\t\t\tcount = this.vertexBuffer.numVertices;\n\t\t\tlet i;\n\t\t\tconst numComponents = element.numComponents;\n\n\t\t\tif (this.vertexBuffer.getFormat().interleaved) {\n\t\t\t\tif (Array.isArray(data)) data.length = 0;\n\t\t\t\telement.index = 0;\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\t\telement.getToArray(offset, data, i * numComponents);\n\t\t\t\t\toffset += element.stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\tdata.set(element.array);\n\t\t\t\t} else {\n\t\t\t\t\tdata.length = 0;\n\t\t\t\t\tconst copyCount = count * numComponents;\n\n\t\t\t\t\tfor (i = 0; i < copyCount; i++) data[i] = element.array[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nlet _postEffectQuadVB = null;\nconst _postEffectQuadDraw = {\n\ttype: PRIMITIVE_TRISTRIP,\n\tbase: 0,\n\tcount: 4,\n\tindexed: false\n};\n\nfunction drawQuadWithShader(device, target, shader, rect, scissorRect, useBlend = false) {\n\tif (_postEffectQuadVB === null) {\n\t\tconst vertexFormat = new VertexFormat(device, [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 2,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}]);\n\t\t_postEffectQuadVB = new VertexBuffer(device, vertexFormat, 4);\n\t\tconst iterator = new VertexIterator(_postEffectQuadVB);\n\t\titerator.element[SEMANTIC_POSITION].set(-1.0, -1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(1.0, -1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(-1.0, 1.0);\n\t\titerator.next();\n\t\titerator.element[SEMANTIC_POSITION].set(1.0, 1.0);\n\t\titerator.end();\n\t}\n\n\tconst oldRt = device.renderTarget;\n\tdevice.setRenderTarget(target);\n\tdevice.updateBegin();\n\tlet x, y, w, h;\n\tlet sx, sy, sw, sh;\n\n\tif (!rect) {\n\t\tw = target ? target.width : device.width;\n\t\th = target ? target.height : device.height;\n\t\tx = 0;\n\t\ty = 0;\n\t} else {\n\t\tx = rect.x;\n\t\ty = rect.y;\n\t\tw = rect.z;\n\t\th = rect.w;\n\t}\n\n\tif (!scissorRect) {\n\t\tsx = x;\n\t\tsy = y;\n\t\tsw = w;\n\t\tsh = h;\n\t} else {\n\t\tsx = scissorRect.x;\n\t\tsy = scissorRect.y;\n\t\tsw = scissorRect.z;\n\t\tsh = scissorRect.w;\n\t}\n\n\tconst oldVx = device.vx;\n\tconst oldVy = device.vy;\n\tconst oldVw = device.vw;\n\tconst oldVh = device.vh;\n\tdevice.setViewport(x, y, w, h);\n\tconst oldSx = device.sx;\n\tconst oldSy = device.sy;\n\tconst oldSw = device.sw;\n\tconst oldSh = device.sh;\n\tdevice.setScissor(sx, sy, sw, sh);\n\tconst oldDepthTest = device.getDepthTest();\n\tconst oldDepthWrite = device.getDepthWrite();\n\tconst oldCullMode = device.getCullMode();\n\tconst oldWR = device.writeRed;\n\tconst oldWG = device.writeGreen;\n\tconst oldWB = device.writeBlue;\n\tconst oldWA = device.writeAlpha;\n\tdevice.setDepthTest(false);\n\tdevice.setDepthWrite(false);\n\tdevice.setCullMode(CULLFACE_NONE);\n\tdevice.setColorWrite(true, true, true, true);\n\tif (!useBlend) device.setBlending(false);\n\tdevice.setVertexBuffer(_postEffectQuadVB, 0);\n\tdevice.setShader(shader);\n\tdevice.draw(_postEffectQuadDraw);\n\tdevice.setDepthTest(oldDepthTest);\n\tdevice.setDepthWrite(oldDepthWrite);\n\tdevice.setCullMode(oldCullMode);\n\tdevice.setColorWrite(oldWR, oldWG, oldWB, oldWA);\n\tdevice.updateEnd();\n\tdevice.setRenderTarget(oldRt);\n\tdevice.updateBegin();\n\tdevice.setViewport(oldVx, oldVy, oldVw, oldVh);\n\tdevice.setScissor(oldSx, oldSy, oldSw, oldSh);\n}\n\nfunction destroyPostEffectQuad() {\n\tif (_postEffectQuadVB) {\n\t\t_postEffectQuadVB.destroy();\n\n\t\t_postEffectQuadVB = null;\n\t}\n}\n\nfunction drawTexture(device, texture, target, shader, rect, scissorRect, useBlend = false) {\n\tshader = shader || device.getCopyShader();\n\tdevice.constantTexSource.setValue(texture);\n\tdrawQuadWithShader(device, target, shader, rect, scissorRect, useBlend);\n}\n\nclass Shader {\n\tconstructor(graphicsDevice, definition) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.definition = definition;\n\t\tthis.init();\n\t\tthis.device.createShader(this);\n\t}\n\n\tinit() {\n\t\tthis.attributes = [];\n\t\tthis.uniforms = [];\n\t\tthis.samplers = [];\n\t\tthis.ready = false;\n\t\tthis.failed = false;\n\t}\n\n\tdestroy() {\n\t\tthis.device.destroyShader(this);\n\t}\n\n\tloseContext() {\n\t\tthis.init();\n\t}\n\n}\n\nvar alphaTestPS = \"uniform float alpha_ref;\\nvoid alphaTest(float a) {\\n\\tif (a < alpha_ref) discard;\\n}\\n\";\n\nvar ambientConstantPS = \"void addAmbient() {\\n\\tdDiffuseLight += light_globalAmbient;\\n}\\n\";\n\nvar ambientPrefilteredCubePS = \"#ifndef PMREM4\\n#define PMREM4\\nuniform samplerCube texture_prefilteredCubeMap4;\\n#endif\\nvoid addAmbient() {\\n\\tvec3 fixedReflDir = fixSeamsStatic(cubeMapRotate(dNormalW), 1.0 - 1.0 / 4.0);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tdDiffuseLight += processEnvironment($DECODE(textureCube(texture_prefilteredCubeMap4, fixedReflDir)).rgb);\\n}\\n\";\n\nvar ambientPrefilteredCubeLodPS = \"#ifndef PMREM4\\n#define PMREM4\\n#extension GL_EXT_shader_texture_lod : enable\\nuniform samplerCube texture_prefilteredCubeMap128;\\n#endif\\nvoid addAmbient() {\\n\\tvec3 fixedReflDir = fixSeamsStatic(cubeMapRotate(dNormalW), 1.0 - 1.0 / 4.0);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tdDiffuseLight += processEnvironment($DECODE( textureCubeLodEXT(texture_prefilteredCubeMap128, fixedReflDir, 5.0) ).rgb);\\n}\\n\";\n\nvar ambientSHPS = \"uniform vec3 ambientSH[9];\\nvoid addAmbient() {\\n\\tvec3 n = cubeMapRotate(dNormalW);\\n\\tvec3 color =\\n\\t\\tambientSH[0] +\\n\\t\\tambientSH[1] * n.x +\\n\\t\\tambientSH[2] * n.y +\\n\\t\\tambientSH[3] * n.z +\\n\\t\\tambientSH[4] * n.x * n.z +\\n\\t\\tambientSH[5] * n.z * n.y +\\n\\t\\tambientSH[6] * n.y * n.x +\\n\\t\\tambientSH[7] * (3.0 * n.z * n.z - 1.0) +\\n\\t\\tambientSH[8] * (n.x * n.x - n.y * n.y);\\n\\tdDiffuseLight += processEnvironment(max(color, vec3(0.0)));\\n}\\n\";\n\nvar aoPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_aoMap;\\n#endif\\nvoid applyAO() {\\n\\tdAo = 1.0;\\n\\t#ifdef MAPTEXTURE\\n\\tdAo *= texture2D(texture_aoMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAo *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdDiffuseLight *= dAo;\\n}\\n\";\n\nvar aoSpecOccPS = \"uniform float material_occludeSpecularIntensity;\\nvoid occludeSpecular() {\\n\\tfloat specPow = exp2(dGlossiness * 11.0);\\n\\tfloat specOcc = saturate(pow(dot(dNormalW, dViewDirW) + dAo, 0.01*specPow) - 1.0 + dAo);\\n\\tspecOcc = mix(1.0, specOcc, material_occludeSpecularIntensity);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccConstPS = \"void occludeSpecular() {\\n\\tfloat specPow = exp2(dGlossiness * 11.0);\\n\\tfloat specOcc = saturate(pow(dot(dNormalW, dViewDirW) + dAo, 0.01*specPow) - 1.0 + dAo);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccConstSimplePS = \"void occludeSpecular() {\\n\\tfloat specOcc = dAo;\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar aoSpecOccSimplePS = \"uniform float material_occludeSpecularIntensity;\\nvoid occludeSpecular() {\\n\\tfloat specOcc = mix(1.0, dAo, material_occludeSpecularIntensity);\\n\\tdSpecularLight *= specOcc;\\n\\tdReflection *= specOcc;\\n}\\n\";\n\nvar bakeDirLmEndPS = \"\\tvec4 dirLm = texture2D(texture_dirLightMap, vUv1);\\n\\tif (bakeDir > 0.5) {\\n\\t\\tif (dAtten > 0.00001) {\\n\\t\\t\\tdirLm.xyz = dirLm.xyz * 2.0 - vec3(1.0);\\n\\t\\t\\tdAtten = saturate(dAtten);\\n\\t\\t\\tgl_FragColor.rgb = normalize(dLightDirNormW.xyz*dAtten + dirLm.xyz*dirLm.w) * 0.5 + vec3(0.5);\\n\\t\\t\\tgl_FragColor.a = dirLm.w + dAtten;\\n\\t\\t\\tgl_FragColor.a = max(gl_FragColor.a, 1.0 / 255.0);\\n\\t\\t} else {\\n\\t\\t\\tgl_FragColor = dirLm;\\n\\t\\t}\\n\\t} else {\\n\\t\\tgl_FragColor.rgb = dirLm.xyz;\\n\\t\\tgl_FragColor.a = max(dirLm.w, dAtten > 0.00001? (1.0/255.0) : 0.0);\\n\\t}\\n\";\n\nvar bakeLmEndPS = \"\\tgl_FragColor.rgb = dDiffuseLight;\\n\\tgl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(0.5));\\n\\tgl_FragColor.rgb /= 8.0;\\n\\tgl_FragColor.a = clamp( max( max( gl_FragColor.r, gl_FragColor.g ), max( gl_FragColor.b, 1.0 / 255.0 ) ), 0.0,1.0 );\\n\\tgl_FragColor.a = ceil(gl_FragColor.a * 255.0) / 255.0;\\n\\tgl_FragColor.rgb /= gl_FragColor.a;\\n\";\n\nvar basePS = \"uniform vec3 view_position;\\nuniform vec3 light_globalAmbient;\\nfloat square(float x) {\\n\\treturn x*x;\\n}\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 saturate(vec3 x) {\\n\\treturn clamp(x, vec3(0.0), vec3(1.0));\\n}\\n\";\n\nvar baseVS = \"attribute vec3 vertex_position;\\nattribute vec3 vertex_normal;\\nattribute vec4 vertex_tangent;\\nattribute vec2 vertex_texCoord0;\\nattribute vec2 vertex_texCoord1;\\nattribute vec4 vertex_color;\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\nuniform mat3 matrix_normal;\\nvec3 dPositionW;\\nmat4 dModelMatrix;\\nmat3 dNormalMatrix;\\n\";\n\nvar baseNineSlicedPS = \"#define NINESLICED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\nvec2 nineSlicedUv;\\n\";\n\nvar baseNineSlicedVS = \"#define NINESLICED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\n\";\n\nvar baseNineSlicedTiledPS = \"#define NINESLICED\\n#define NINESLICETILED\\nvarying vec2 vMask;\\nvarying vec2 vTiledUv;\\nuniform mediump vec4 innerOffset;\\nuniform mediump vec2 outerScale;\\nuniform mediump vec4 atlasRect;\\nvec2 nineSlicedUv;\\n\";\n\nvar biasConstPS = \"#define SHADOWBIAS\\nfloat getShadowBias(float resolution, float maxBias) {\\n\\treturn maxBias;\\n}\\n\";\n\nvar blurVSMPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec2 pixelOffset;\\n#ifdef GAUSS\\nuniform float weight[SAMPLES];\\n#endif\\n#ifdef PACKED\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nvec2 encodeFloatRG( float v ) {\\n\\tvec2 enc = vec2(1.0, 255.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\\treturn enc;\\n}\\n#endif\\nvoid main(void) {\\n\\tvec3 moments = vec3(0.0);\\n\\tvec2 uv = vUv0 - pixelOffset * (float(SAMPLES) * 0.5);\\n\\tfor (int i=0; i<SAMPLES; i++) {\\n\\t\\tvec4 c = texture2D(source, uv + pixelOffset * float(i));\\n\\t\\t#ifdef PACKED\\n\\t\\tc.xy = vec2(decodeFloatRG(c.xy), decodeFloatRG(c.zw));\\n\\t\\t#endif\\n\\t\\t#ifdef GAUSS\\n\\t\\tmoments += c.xyz * weight[i];\\n\\t\\t#else\\n\\t\\tmoments += c.xyz;\\n\\t\\t#endif\\n\\t}\\n\\t#ifndef GAUSS\\n\\tmoments /= float(SAMPLES);\\n\\t#endif\\n\\t#ifdef PACKED\\n\\tgl_FragColor = vec4(encodeFloatRG(moments.x), encodeFloatRG(moments.y));\\n\\t#else\\n\\tgl_FragColor = vec4(moments.x, moments.y, moments.z, 1.0);\\n\\t#endif\\n}\\n\";\n\nvar clearCoatPS = \"#ifdef MAPFLOAT\\nuniform float material_clearCoat;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatMap;\\n#endif\\nvoid getClearCoat() {\\n\\tccSpecularity = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tccSpecularity *= material_clearCoat;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tccSpecularity *= texture2D(texture_clearCoatMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tccSpecularity *= saturate(vVertexColor.$VC);\\n\\t#endif\\n}\\n\";\n\nvar clearCoatGlossPS = \"#ifdef MAPFLOAT\\nuniform float material_clearCoatGlossiness;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatGlossMap;\\n#endif\\nvoid getClearCoatGlossiness() {\\n\\tccGlossiness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tccGlossiness *= material_clearCoatGlossiness;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tccGlossiness *= texture2D(texture_clearCoatGlossMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tccGlossiness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tccGlossiness += 0.0000001;\\n}\\n\";\n\nvar clearCoatNormalPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_clearCoatNormalMap;\\nuniform float material_clearCoatBumpiness;\\n#endif\\nvoid getClearCoatNormal() {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_clearCoatNormalMap, $UV));\\n\\tnormalMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalMap, material_clearCoatBumpiness));\\n\\tccNormalW = dTBN * normalMap;\\n\\t#else\\n\\tccNormalW = normalize(dVertexNormalW);\\n\\t#endif\\n\\tccReflDirW = normalize(-reflect(dViewDirW, ccNormalW));\\n}\\n\";\n\nvar clusteredLightLoopPS = \"\\nvec3 cellCoords = floor((vPositionW - clusterBoundsMin) * clusterCellsCountByBoundsSize);\\nif (!(any(lessThan(cellCoords, vec3(0.0))) || any(greaterThanEqual(cellCoords, clusterCellsMax)))) {\\n\\tfloat cellIndex = dot(clusterCellsDot, cellCoords);\\n\\tfloat clusterV = floor(cellIndex * clusterTextureSize.y);\\n\\tfloat clusterU = cellIndex - (clusterV * clusterTextureSize.x);\\n\\tclusterV = (clusterV + 0.5) * clusterTextureSize.z;\\n\\tconst float maxLightCells = 256.0 / 4.0;\\n\\tfor (float lightCellIndex = 0.5; lightCellIndex < maxLightCells; lightCellIndex++) {\\n\\t\\tvec4 lightIndices = texture2D(clusterWorldTexture, vec2(clusterTextureSize.y * (clusterU + lightCellIndex), clusterV));\\n\\t\\tvec4 indices = lightIndices * 255.0;\\n\\t\\tif (indices.x <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.x);\\n\\t\\tif (indices.y <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.y);\\n\\t\\tif (indices.z <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.z);\\n\\t\\tif (indices.w <= 0.0)\\n\\t\\t\\tbreak;\\n\\t\\tEvaluateClusterLight(indices.w);\\n\\t\\tif (lightCellIndex > clusterPixelsPerCell) {\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n}\\n\";\n\nvar clusteredLightPS = \"uniform sampler2D clusterWorldTexture;\\nuniform sampler2D lightsTexture8;\\nuniform highp sampler2D lightsTextureFloat;\\nuniform float clusterPixelsPerCell;\\nuniform vec3 clusterCellsCountByBoundsSize;\\nuniform vec4 lightsTextureInvSize;\\nuniform vec3 clusterTextureSize;\\nuniform vec3 clusterBoundsMin;\\nuniform vec3 clusterBoundsDelta;\\nuniform vec3 clusterCellsDot;\\nuniform vec3 clusterCellsMax;\\nuniform vec2 clusterCompressionLimit0;\\nfloat DecodeClusterFloat4(vec4 data) {\\n\\treturn dot(data, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));\\n}\\nfloat DecodeClusterFloat2(vec2 data) {\\n\\treturn dot(data, vec2(1.0, 1.0 / 255.0));\\n}\\nvoid EvaluateClusterLight(float lightIndex) {\\n\\tfloat lightV = (lightIndex + 0.5) * lightsTextureInvSize.w;\\n\\tvec4 lightInfo = texture2D(lightsTexture8, vec2(0.5 * lightsTextureInvSize.z, lightV));\\n\\tfloat lightType = lightInfo.x;\\n\\tfloat lightShape = lightInfo.y;\\n\\tfloat falloffMode = lightInfo.z;\\n\\tvec4 colorA = texture2D(lightsTexture8, vec2(1.5 * lightsTextureInvSize.z, lightV));\\n\\tvec4 colorB = texture2D(lightsTexture8, vec2(2.5 * lightsTextureInvSize.z, lightV));\\n\\tvec3 lightColor = vec3(\\n\\t\\tDecodeClusterFloat2(colorA.xy),\\n\\t\\tDecodeClusterFloat2(colorA.zw),\\n\\t\\tDecodeClusterFloat2(colorB.xy)\\n\\t) * clusterCompressionLimit0.y;\\n\\tvec4 coneAngle = texture2D(lightsTexture8, vec2(3.5 * lightsTextureInvSize.z, lightV));\\n\\tfloat innerConeAngleCos = DecodeClusterFloat2(coneAngle.xy) * 2.0 - 1.0;\\n\\tfloat outerConeAngleCos = DecodeClusterFloat2(coneAngle.zw) * 2.0 - 1.0;\\n\\t#ifdef CLUSTER_TEXTURE_FLOAT\\n\\t\\tvec4 lightPosRange = texture2D(lightsTextureFloat, vec2(0.5 * lightsTextureInvSize.x, lightV));\\n\\t\\tvec3 lightPos = lightPosRange.xyz;\\n\\t\\tfloat range = lightPosRange.w;\\n\\t\\tvec4 lightDir_Unused = texture2D(lightsTextureFloat, vec2(1.5 * lightsTextureInvSize.x, lightV));\\n\\t\\tvec3 lightDir = lightDir_Unused.xyz;\\n\\t#else\\n\\t\\tvec4 encPosX = texture2D(lightsTexture8, vec2(4.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encPosY = texture2D(lightsTexture8, vec2(5.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encPosZ = texture2D(lightsTexture8, vec2(6.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec3 lightPos = vec3(\\n\\t\\t\\tDecodeClusterFloat4(encPosX),\\n\\t\\t\\tDecodeClusterFloat4(encPosY),\\n\\t\\t\\tDecodeClusterFloat4(encPosZ)\\n\\t\\t) * clusterBoundsDelta + clusterBoundsMin;\\n\\t\\tvec4 encRange = texture2D(lightsTexture8, vec2(7.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tfloat range = DecodeClusterFloat4(encRange) * clusterCompressionLimit0.x;\\n\\t\\tvec4 encDirX = texture2D(lightsTexture8, vec2(8.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encDirY = texture2D(lightsTexture8, vec2(9.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec4 encDirZ = texture2D(lightsTexture8, vec2(10.5 * lightsTextureInvSize.z, lightV));\\n\\t\\tvec3 lightDir = vec3(\\n\\t\\t\\tDecodeClusterFloat4(encDirX),\\n\\t\\t\\tDecodeClusterFloat4(encDirY),\\n\\t\\t\\tDecodeClusterFloat4(encDirZ)\\n\\t\\t) * 2.0 - 1.0;\\n\\t#endif\\n\\tgetLightDirPoint(lightPos);\\n\\tdAtten = getFalloffLinear(range);\\n\\tif (dAtten > 0.00001) {\\n\\t\\tif (lightType > 0.5) {\\n\\t\\t\\tdAtten *= getSpotEffect(lightDir, innerConeAngleCos, outerConeAngleCos);\\n\\t\\t}\\n\\t\\tdAtten *= getLightDiffuse();\\n\\t\\tdDiffuseLight += dAtten * lightColor;\\n\\t}\\n}\\n\";\n\nvar combineClearCoatPS = \"vec3 combineColorCC() {\\n\\treturn combineColor()+(ccSpecularLight*ccSpecularity+ccReflection.rgb*ccSpecularity*ccReflection.a);\\n}\\n\";\n\nvar combineDiffusePS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight;\\n}\\n\";\n\nvar combineDiffuseSpecularPS = \"vec3 combineColor() {\\n\\treturn mix(dAlbedo * dDiffuseLight, dSpecularLight + dReflection.rgb * dReflection.a, dSpecularity);\\n}\\n\";\n\nvar combineDiffuseSpecularNoConservePS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight + (dSpecularLight + dReflection.rgb * dReflection.a) * dSpecularity;\\n}\\n\";\n\nvar combineDiffuseSpecularNoReflPS = \"vec3 combineColor() {\\n\\treturn dAlbedo * dDiffuseLight + dSpecularLight * dSpecularity;\\n}\\n\";\n\nvar combineDiffuseSpecularNoReflSeparateAmbientPS = \"uniform vec3 material_ambient;\\nvec3 combineColor() {\\n\\treturn (dDiffuseLight - light_globalAmbient) * dAlbedo + dSpecularLight * dSpecularity + material_ambient * light_globalAmbient;\\n}\\n\";\n\nvar combineDiffuseSpecularOldPS = \"vec3 combineColor() {\\n\\treturn mix(dAlbedo * dDiffuseLight + dSpecularLight * dSpecularity, dReflection.rgb, dReflection.a);\\n}\\n\";\n\nvar cookiePS = \"vec4 getCookie2D(sampler2D tex, mat4 transform, float intensity) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\treturn mix(vec4(1.0), texture2D(tex, projPos.xy), intensity);\\n}\\nvec4 getCookie2DClip(sampler2D tex, mat4 transform, float intensity) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tif (projPos.x < 0.0 || projPos.x > 1.0 || projPos.y < 0.0 || projPos.y > 1.0 || projPos.z < 0.0) return vec4(0.0);\\n\\treturn mix(vec4(1.0), texture2D(tex, projPos.xy), intensity);\\n}\\nvec4 getCookie2DXform(sampler2D tex, mat4 transform, float intensity, vec4 cookieMatrix, vec2 cookieOffset) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tprojPos.xy += cookieOffset;\\n\\tvec2 uv = mat2(cookieMatrix) * (projPos.xy-vec2(0.5)) + vec2(0.5);\\n\\treturn mix(vec4(1.0), texture2D(tex, uv), intensity);\\n}\\nvec4 getCookie2DClipXform(sampler2D tex, mat4 transform, float intensity, vec4 cookieMatrix, vec2 cookieOffset) {\\n\\tvec4 projPos = transform * vec4(vPositionW, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tprojPos.xy += cookieOffset;\\n\\tif (projPos.x < 0.0 || projPos.x > 1.0 || projPos.y < 0.0 || projPos.y > 1.0 || projPos.z < 0.0) return vec4(0.0);\\n\\tvec2 uv = mat2(cookieMatrix) * (projPos.xy-vec2(0.5)) + vec2(0.5);\\n\\treturn mix(vec4(1.0), texture2D(tex, uv), intensity);\\n}\\nvec4 getCookieCube(samplerCube tex, mat4 transform, float intensity) {\\n\\treturn mix(vec4(1.0), textureCube(tex, dLightDirNormW * mat3(transform)), intensity);\\n}\\n\";\n\nvar cubeMapProjectBoxPS = \"uniform vec3 envBoxMin, envBoxMax;\\nvec3 cubeMapProject(vec3 nrdir) {\\n\\tnrdir = cubeMapRotate(nrdir);\\n\\tvec3 rbmax = (envBoxMax - vPositionW) / nrdir;\\n\\tvec3 rbmin = (envBoxMin - vPositionW) / nrdir;\\n\\tvec3 rbminmax;\\n\\trbminmax.x = nrdir.x>0.0? rbmax.x : rbmin.x;\\n\\trbminmax.y = nrdir.y>0.0? rbmax.y : rbmin.y;\\n\\trbminmax.z = nrdir.z>0.0? rbmax.z : rbmin.z;\\n\\tfloat fa = min(min(rbminmax.x, rbminmax.y), rbminmax.z);\\n\\tvec3 posonbox = vPositionW + nrdir * fa;\\n\\tvec3 envBoxPos = (envBoxMin + envBoxMax) * 0.5;\\n\\treturn posonbox - envBoxPos;\\n}\\n\";\n\nvar cubeMapProjectNonePS = \"vec3 cubeMapProject(vec3 dir) {\\n\\treturn cubeMapRotate(dir);\\n}\\n\";\n\nvar cubeMapRotatePS = \"#ifdef CUBEMAP_ROTATION\\nuniform mat3 cubeMapRotationMatrix;\\n#endif\\nvec3 cubeMapRotate(vec3 refDir) {\\n#ifdef CUBEMAP_ROTATION\\n\\treturn refDir * cubeMapRotationMatrix;\\n#else\\n\\treturn refDir;\\n#endif\\n}\\n\";\n\nvar detailModesPS = \"vec3 detailMode_mul(vec3 c1, vec3 c2) {\\n\\treturn c1 * c2;\\n}\\nvec3 detailMode_add(vec3 c1, vec3 c2) {\\n\\treturn c1 + c2;\\n}\\nvec3 detailMode_screen(vec3 c1, vec3 c2) {\\n\\treturn 1.0 - (1.0 - c1)*(1.0 - c2);\\n}\\nvec3 detailMode_overlay(vec3 c1, vec3 c2) {\\n\\treturn mix(1.0 - 2.0*(1.0 - c1)*(1.0 - c2), 2.0*c1*c2, step(c1, vec3(0.5)));\\n}\\nvec3 detailMode_min(vec3 c1, vec3 c2) {\\n\\treturn min(c1, c2);\\n}\\nvec3 detailMode_max(vec3 c1, vec3 c2) {\\n\\treturn max(c1, c2);\\n}\\n\";\n\nvar diffusePS = \"#ifdef MAPCOLOR\\nuniform vec3 material_diffuse;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_diffuseMap;\\n#endif\\nvoid getAlbedo() {\\n\\tdAlbedo = vec3(1.0);\\n\\t#ifdef MAPCOLOR\\n\\tdAlbedo *= material_diffuse.rgb;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdAlbedo *= gammaCorrectInput(addAlbedoDetail(texture2D(texture_diffuseMap, $UV).$CH));\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAlbedo *= gammaCorrectInput(saturate(vVertexColor.$VC));\\n\\t#endif\\n}\\n\";\n\nvar diffuseDetailMapPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_diffuseDetailMap;\\n#endif\\nvec3 addAlbedoDetail(vec3 albedo) {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 albedoDetail = vec3(texture2D(texture_diffuseDetailMap, $UV).$CH);\\n\\treturn detailMode_$DETAILMODE(albedo, albedoDetail);\\n\\t#else\\n\\treturn albedo;\\n\\t#endif\\n}\\n\";\n\nvar dilatePS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec2 pixelOffset;\\nvoid main(void) {\\n\\tvec4 c = texture2D(source, vUv0);\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 - pixelOffset);\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(0, -pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(pixelOffset.x, -pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(-pixelOffset.x, 0));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(pixelOffset.x, 0));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(-pixelOffset.x, pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + vec2(0, pixelOffset.y));\\n\\tc = c.a>0.0? c : texture2D(source, vUv0 + pixelOffset);\\n\\tgl_FragColor = c;\\n}\\n\";\n\nvar dpAtlasQuadPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nuniform vec4 params;\\nvoid main(void) {\\n\\tvec2 uv = vUv0;\\n\\tuv = uv * 2.0 - vec2(1.0);\\n\\tuv *= params.xy;\\n\\tuv = uv * 0.5 + 0.5;\\n\\tgl_FragColor = texture2D(source, uv);\\n}\\n\";\n\nvar emissivePS = \"#ifdef MAPCOLOR\\nuniform vec3 material_emissive;\\n#endif\\n#ifdef MAPFLOAT\\nuniform float material_emissiveIntensity;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_emissiveMap;\\n#endif\\nvec3 getEmission() {\\n\\tvec3 emission = vec3(1.0);\\n\\t#ifdef MAPFLOAT\\n\\temission *= material_emissiveIntensity;\\n\\t#endif\\n\\t#ifdef MAPCOLOR\\n\\temission *= material_emissive;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\temission *= $texture2DSAMPLE(texture_emissiveMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\temission *= gammaCorrectInput(saturate(vVertexColor.$VC));\\n\\t#endif\\n\\treturn emission;\\n}\\n\";\n\nvar endPS = \"\\t#ifdef CLEARCOAT\\n\\tgl_FragColor.rgb = combineColorCC();\\n\\t#else\\n\\tgl_FragColor.rgb = combineColor();\\n\\t#endif\\n\\tgl_FragColor.rgb += getEmission();\\n\\tgl_FragColor.rgb = addFog(gl_FragColor.rgb);\\n\\t#ifndef HDR\\n\\tgl_FragColor.rgb = toneMap(gl_FragColor.rgb);\\n\\tgl_FragColor.rgb = gammaCorrectOutput(gl_FragColor.rgb);\\n\\t#endif\\n\";\n\nvar endVS = \"\\n\";\n\nvar envConstPS = \"vec3 processEnvironment(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar envMultiplyPS = \"uniform float skyboxIntensity;\\nvec3 processEnvironment(vec3 color) {\\n\\treturn color * skyboxIntensity;\\n}\\n\";\n\nvar extensionPS = \"\\n\";\n\nvar extensionVS = \"\\n\";\n\nvar falloffInvSquaredPS = \"float getFalloffWindow(float lightRadius) {\\n\\tfloat sqrDist = dot(dLightDirW, dLightDirW);\\n\\tfloat invRadius = 1.0 / lightRadius;\\n\\treturn square( saturate( 1.0 - square( sqrDist * square(invRadius) ) ) );\\n}\\nfloat getFalloffInvSquared(float lightRadius) {\\n\\tfloat sqrDist = dot(dLightDirW, dLightDirW);\\n\\tfloat falloff = 1.0 / (sqrDist + 1.0);\\n\\tfloat invRadius = 1.0 / lightRadius;\\n\\tfalloff *= 16.0;\\n\\tfalloff *= square( saturate( 1.0 - square( sqrDist * square(invRadius) ) ) );\\n\\treturn falloff;\\n}\\n\";\n\nvar falloffLinearPS = \"float getFalloffLinear(float lightRadius) {\\n\\tfloat d = length(dLightDirW);\\n\\treturn max(((lightRadius - d) / lightRadius), 0.0);\\n}\\n\";\n\nvar fixCubemapSeamsNonePS = \"vec3 fixSeams(vec3 vec, float mipmapIndex) {\\n\\treturn vec;\\n}\\nvec3 fixSeams(vec3 vec) {\\n\\treturn vec;\\n}\\nvec3 fixSeamsStatic(vec3 vec, float invRecMipSize) {\\n\\treturn vec;\\n}\\nvec3 calcSeam(vec3 vec) {\\n\\treturn vec3(0);\\n}\\nvec3 applySeam(vec3 vec, vec3 seam, float scale) {\\n\\treturn vec;\\n}\\n\";\n\nvar fixCubemapSeamsStretchPS = \"vec3 fixSeams(vec3 vec, float mipmapIndex) {\\n\\tfloat scale = 1.0 - exp2(mipmapIndex) / 128.0;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 fixSeams(vec3 vec) {\\n\\tfloat scale = 1.0 - 1.0 / 128.0;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 fixSeamsStatic(vec3 vec, float invRecMipSize) {\\n\\tfloat scale = invRecMipSize;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvec3 calcSeam(vec3 vec) {\\n\\tvec3 avec = abs(vec);\\n\\tfloat M = max(avec.x, max(avec.y, avec.z));\\n\\treturn vec3(avec.x != M ? 1.0 : 0.0,\\n\\t\\t\\t\\tavec.y != M ? 1.0 : 0.0,\\n\\t\\t\\t\\tavec.z != M ? 1.0 : 0.0);\\n}\\nvec3 applySeam(vec3 vec, vec3 seam, float scale) {\\n\\treturn vec * (seam * -scale + vec3(1.0));\\n}\\n\";\n\nvar fogExpPS = \"uniform vec3 fog_color;\\nuniform float fog_density;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = exp(-depth * fog_density);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogExp2PS = \"uniform vec3 fog_color;\\nuniform float fog_density;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = exp(-depth * depth * fog_density * fog_density);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogLinearPS = \"uniform vec3 fog_color;\\nuniform float fog_start;\\nuniform float fog_end;\\nfloat dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\tfloat fogFactor = (fog_end - depth) / (fog_end - fog_start);\\n\\tfogFactor = clamp(fogFactor, 0.0, 1.0);\\n\\tfogFactor = gammaCorrectInput(fogFactor);\\n\\treturn mix(fog_color * dBlendModeFogFactor, color, fogFactor);\\n}\\n\";\n\nvar fogNonePS = \"float dBlendModeFogFactor = 1.0;\\nvec3 addFog(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar fresnelSchlickPS = \"\\nuniform float material_fresnelFactor;\\nvoid getFresnel() {\\n\\tfloat fresnel = 1.0 - max(dot(dNormalW, dViewDirW), 0.0);\\n\\tfloat fresnel2 = fresnel * fresnel;\\n\\tfresnel *= fresnel2 * fresnel2;\\n\\tfresnel *= dGlossiness * dGlossiness;\\n\\tdSpecularity = dSpecularity + (1.0 - dSpecularity) * fresnel;\\n\\t#ifdef CLEARCOAT\\n\\tfresnel = 1.0 - max(dot(ccNormalW, dViewDirW), 0.0);\\n\\tfresnel2 = fresnel * fresnel;\\n\\tfresnel *= fresnel2 * fresnel2;\\n\\tfresnel *= ccGlossiness * ccGlossiness;\\n\\tccSpecularity = ccSpecularity + (1.0 - ccSpecularity) * fresnel;\\n\\t#endif\\n}\\n\";\n\nvar fullscreenQuadPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nvoid main(void) {\\n\\tgl_FragColor = texture2D(source, vUv0);\\n}\\n\";\n\nvar fullscreenQuadVS = \"attribute vec2 vertex_position;\\nvarying vec2 vUv0;\\nvoid main(void)\\n{\\n\\tgl_Position = vec4(vertex_position, 0.5, 1.0);\\n\\tvUv0 = vertex_position.xy*0.5+0.5;\\n}\\n\";\n\nvar gamma1_0PS = \"vec4 texture2DSRGB(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv, float bias) {\\n\\treturn texture2D(tex, uv, bias);\\n}\\nvec4 textureCubeSRGB(samplerCube tex, vec3 uvw) {\\n\\treturn textureCube(tex, uvw);\\n}\\nvec3 gammaCorrectOutput(vec3 color) {\\n\\treturn color;\\n}\\nvec3 gammaCorrectInput(vec3 color) {\\n\\treturn color;\\n}\\nfloat gammaCorrectInput(float color) {\\n\\treturn color;\\n}\\nvec4 gammaCorrectInput(vec4 color) {\\n\\treturn color;\\n}\\n\";\n\nvar gamma2_2PS = \"vec3 gammaCorrectInput(vec3 color) {\\n\\treturn pow(color, vec3(2.2));\\n}\\nfloat gammaCorrectInput(float color) {\\n\\treturn pow(color, 2.2);\\n}\\nvec4 gammaCorrectInput(vec4 color) {\\n\\treturn vec4(pow(color.rgb, vec3(2.2)), color.a);\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv) {\\n\\tvec4 rgba = texture2D(tex, uv);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec4 texture2DSRGB(sampler2D tex, vec2 uv, float bias) {\\n\\tvec4 rgba = texture2D(tex, uv, bias);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec4 textureCubeSRGB(samplerCube tex, vec3 uvw) {\\n\\tvec4 rgba = textureCube(tex, uvw);\\n\\trgba.rgb = gammaCorrectInput(rgba.rgb);\\n\\treturn rgba;\\n}\\nvec3 gammaCorrectOutput(vec3 color) {\\n\\t#ifdef HDR\\n\\treturn color;\\n\\t#else\\n\\tcolor += vec3(0.0000001);\\n\\treturn pow(color, vec3(0.45));\\n\\t#endif\\n}\\n\";\n\nvar genParaboloidPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nvoid main(void) {\\n\\tvec2 uv = vUv0;\\n\\tfloat side = uv.x < 0.5? 1.0 : -1.0;\\n\\tvec2 tc;\\n\\ttc.x = fract(uv.x * 2.0) * 2.0 - 1.0;\\n\\ttc.y = uv.y * 2.0 - 1.0;\\n\\tconst float scale = 1.1;\\n\\ttc *= scale;\\n\\tvec3 dir;\\n\\tdir.y = (dot(tc, tc) - 1.0) * side;\\n\\tdir.xz = tc * -2.0;\\n\\tdir.x *= -side * params.y;\\n\\tdir = fixSeams(dir, params.x);\\n\\tvec4 color = textureCube(source, dir, -100.0);\\n\\tgl_FragColor = color;\\n}\\n\";\n\nvar gles3PS = \"#define varying in\\nout highp vec4 pc_fragColor;\\n#define gl_FragColor pc_fragColor\\n#define texture2D texture\\n#define textureCube texture\\n#define texture2DProj textureProj\\n#define texture2DLodEXT textureLod\\n#define texture2DProjLodEXT textureProjLod\\n#define textureCubeLodEXT textureLod\\n#define texture2DGradEXT textureGrad\\n#define texture2DProjGradEXT textureProjGrad\\n#define textureCubeGradEXT textureGrad\\n#define GL2\\n\";\n\nvar gles3VS = \"#define attribute in\\n#define varying out\\n#define texture2D texture\\n#define GL2\\n#define VERTEXSHADER\\n\";\n\nvar glossPS = \"#ifdef MAPFLOAT\\nuniform float material_shininess;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_glossMap;\\n#endif\\nvoid getGlossiness() {\\n\\tdGlossiness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tdGlossiness *= material_shininess;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdGlossiness *= texture2D(texture_glossMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdGlossiness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdGlossiness += 0.0000001;\\n}\\n\";\n\nvar instancingVS = \"attribute vec4 instance_line1;\\nattribute vec4 instance_line2;\\nattribute vec4 instance_line3;\\nattribute vec4 instance_line4;\\n\";\n\nvar lightDiffuseLambertPS = \"float getLightDiffuse() {\\n\\treturn max(dot(dNormalW, -dLightDirNormW), 0.0);\\n}\\n\";\n\nvar lightDirPointPS = \"void getLightDirPoint(vec3 lightPosW) {\\n\\tdLightDirW = vPositionW - lightPosW;\\n\\tdLightDirNormW = normalize(dLightDirW);\\n\\tdLightPosW = lightPosW;\\n}\\n\";\n\nvar lightmapDirPS = \"uniform sampler2D texture_lightMap;\\nuniform sampler2D texture_dirLightMap;\\nvoid addLightMap() {\\n\\tvec3 color = $texture2DSAMPLE(texture_lightMap, $UV).$CH;\\n\\tvec3 dir = texture2D(texture_dirLightMap, $UV).xyz;\\n\\tif (dot(dir, vec3(1.0)) < 0.00001) {\\n\\t\\tdDiffuseLight += color;\\n\\t} else {\\n\\t\\tdLightDirNormW = normalize(dir * 2.0 - vec3(1.0));\\n\\t\\tfloat vlight = saturate(dot(dLightDirNormW, -dVertexNormalW));\\n\\t\\tfloat flight = saturate(dot(dLightDirNormW, -dNormalW));\\n\\t\\tfloat nlight = (flight / max(vlight, 0.01)) * 0.5;\\n\\t\\tdDiffuseLight += color * nlight * 2.0;\\n\\t}\\n\\tdSpecularLight += color * getLightSpecular();\\n}\\n\";\n\nvar lightmapSinglePS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_lightMap;\\n#endif\\nvoid addLightMap() {\\n\\tvec3 lm = vec3(1.0);\\n\\t#ifdef MAPTEXTURE\\n\\tlm *= $texture2DSAMPLE(texture_lightMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tlm *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tdDiffuseLight += lm;\\n}\\n\";\n\nvar lightmapSingleVertPS = \"void addLightMap() {\\n\\tdDiffuseLight += saturate(vVertexColor.$CH);\\n}\\n\";\n\nvar lightSpecularAnisoGGXPS = \"\\nfloat calcLightSpecular(float tGlossiness, vec3 tNormalW) {\\n\\tfloat PI = 3.141592653589793;\\n\\tfloat roughness = max((1.0 - tGlossiness) * (1.0 - tGlossiness), 0.001);\\n\\tfloat anisotropy = material_anisotropy * roughness;\\n\\tfloat at = max((roughness + anisotropy), roughness / 4.0);\\n\\tfloat ab = max((roughness - anisotropy), roughness / 4.0);\\n\\tvec3 h = normalize(normalize(-dLightDirNormW) + normalize(dViewDirW));\\n\\tfloat NoH = dot(tNormalW, h);\\n\\tfloat ToH = dot(dTBN[0], h);\\n\\tfloat BoH = dot(dTBN[1], h);\\n\\tfloat a2 = at * ab;\\n\\tvec3 v = vec3(ab * ToH, at * BoH, a2 * NoH);\\n\\tfloat v2 = dot(v, v);\\n\\tfloat w2 = a2 / v2;\\n\\tfloat D = a2 * w2 * w2 * (1.0 / PI);\\n\\tfloat ToV = dot(dTBN[0], dViewDirW);\\n\\tfloat BoV = dot(dTBN[1], dViewDirW);\\n\\tfloat ToL = dot(dTBN[0], -dLightDirNormW);\\n\\tfloat BoL = dot(dTBN[1], -dLightDirNormW);\\n\\tfloat NoV = dot(tNormalW, dViewDirW);\\n\\tfloat NoL = dot(tNormalW, -dLightDirNormW);\\n\\tfloat lambdaV = NoL * length(vec3(at * ToV, ab * BoV, NoV));\\n\\tfloat lambdaL = NoV * length(vec3(at * ToL, ab * BoL, NoL));\\n\\tfloat G = 0.5 / (lambdaV + lambdaL);\\n\\treturn D * G;\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dNormalW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccNormalW);\\n}\\n\";\n\nvar lightSpecularBlinnPS = \"\\nfloat calcLightSpecular(float tGlossiness, vec3 tNormalW) {\\n\\tvec3 h = normalize( -dLightDirNormW + dViewDirW );\\n\\tfloat nh = max( dot( h, tNormalW ), 0.0 );\\n\\tfloat specPow = exp2(tGlossiness * 11.0);\\n\\tspecPow = antiAliasGlossiness(specPow);\\n\\tspecPow = max(specPow, 0.0001);\\n\\treturn pow(nh, specPow) * (specPow + 2.0) / 8.0;\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dNormalW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccNormalW);\\n}\\n\";\n\nvar lightSpecularPhongPS = \"float calcLightSpecular(float tGlossiness, vec3 tReflDirW) {\\n\\tfloat specPow = tGlossiness;\\n\\tspecPow = antiAliasGlossiness(specPow);\\n\\treturn pow(max(dot(tReflDirW, -dLightDirNormW), 0.0), specPow + 0.0001);\\n}\\nfloat getLightSpecular() {\\n\\treturn calcLightSpecular(dGlossiness, dReflDirW);\\n}\\nfloat getLightSpecularCC() {\\n\\treturn calcLightSpecular(ccGlossiness, ccReflDirW);\\n}\\n\";\n\nvar ltc = \"\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nstruct Coords {\\n\\tvec3 coord0;\\n\\tvec3 coord1;\\n\\tvec3 coord2;\\n\\tvec3 coord3;\\n};\\nfloat LTC_EvaluateRect( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in Coords rectCoords) {\\n\\tvec3 v1 = rectCoords.coord1 - rectCoords.coord0;\\n\\tvec3 v2 = rectCoords.coord3 - rectCoords.coord0;\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tfloat factor = sign(-dot( lightNormal, P - rectCoords.coord0 ));\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 =  factor * cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords.coord0 - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords.coord1 - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords.coord2 - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords.coord3 - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn result;\\n}\\nCoords dLTCCoords;\\nCoords getLTCLightCoords(vec3 lightPos, vec3 halfWidth, vec3 halfHeight){\\n\\tCoords coords;\\n\\tcoords.coord0 = lightPos + halfWidth - halfHeight;\\n\\tcoords.coord1 = lightPos - halfWidth - halfHeight;\\n\\tcoords.coord2 = lightPos - halfWidth + halfHeight;\\n\\tcoords.coord3 = lightPos + halfWidth + halfHeight;\\n\\treturn coords;\\n}\\nfloat dSphereRadius;\\nCoords getSphereLightCoords(vec3 lightPos, vec3 halfWidth, vec3 halfHeight){\\n\\tCoords coords;\\n\\tfloat radius = max(length(halfWidth), length(halfWidth));\\n\\tdSphereRadius = radius;\\n\\tvec3 f = normalize(lightPos-view_position);\\n\\tvec3 w = normalize(cross(f, halfHeight));\\n\\tvec3 h = normalize(cross(f, w));\\n\\tcoords.coord0 = lightPos + w * radius - h * radius;\\n\\tcoords.coord1 = lightPos - w * radius - h * radius;\\n\\tcoords.coord2 = lightPos - w * radius + h * radius;\\n\\tcoords.coord3 = lightPos + w * radius + h * radius;\\n\\treturn coords;\\n}\\nvec2 dLTCUV;\\n#ifdef CLEARCOAT\\nvec2 ccLTCUV;\\n#endif\\nvec2 getLTCLightUV(float tGlossiness, vec3 tNormalW)\\n{\\n\\tfloat roughness = max((1.0 - tGlossiness) * (1.0 - tGlossiness), 0.001);\\n\\treturn LTC_Uv( tNormalW, dViewDirW, roughness );\\n}\\nvec3 dLTCSpecFres;\\n#ifdef CLEARCOAT\\nvec3 ccLTCSpecFres;\\n#endif\\nvec3 getLTCLightSpecFres(vec2 uv, vec3 tSpecularity)\\n{\\n\\tvec4 t2 = texture2D( areaLightsLutTex2, uv );\\n\\t#ifdef AREA_R8_G8_B8_A8_LUTS\\n\\tt2 *= vec4(0.693103,1,1,1);\\n\\tt2 += vec4(0.306897,0,0,0);\\n\\t#endif\\n\\treturn tSpecularity * t2.x + ( vec3( 1.0 ) - tSpecularity) * t2.y;\\n}\\nvoid calcLTCLightValues()\\n{\\n\\tdLTCUV = getLTCLightUV(dGlossiness, dNormalW);\\n\\tdLTCSpecFres = getLTCLightSpecFres(dLTCUV, dSpecularityNoFres);\\n#ifdef CLEARCOAT\\n\\tccLTCUV = getLTCLightUV(ccGlossiness, ccNormalW);\\n\\tccLTCSpecFres = getLTCLightSpecFres(ccLTCUV, vec3(ccSpecularityNoFres));\\n#endif\\n}\\nvoid calcRectLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tdLTCCoords = getLTCLightCoords(lightPos, halfWidth, halfHeight);\\n\\tcalcLTCLightValues();\\n}\\nvoid calcDiskLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tcalcRectLightValues(lightPos, halfWidth, halfHeight);\\n}\\nvoid calcSphereLightValues(vec3 lightPos, vec3 halfWidth, vec3 halfHeight)\\n{\\n\\tdLTCCoords = getSphereLightCoords(lightPos, halfWidth, halfHeight);\\n\\tcalcLTCLightValues();\\n}\\nvec3 SolveCubic(vec4 Coefficient)\\n{\\n\\tfloat pi = 3.14159;\\n\\tCoefficient.xyz /= Coefficient.w;\\n\\tCoefficient.yz /= 3.0;\\n\\tfloat A = Coefficient.w;\\n\\tfloat B = Coefficient.z;\\n\\tfloat C = Coefficient.y;\\n\\tfloat D = Coefficient.x;\\n\\tvec3 Delta = vec3(\\n\\t\\t-Coefficient.z * Coefficient.z + Coefficient.y,\\n\\t\\t-Coefficient.y * Coefficient.z + Coefficient.x,\\n\\t\\tdot(vec2(Coefficient.z, -Coefficient.y), Coefficient.xy)\\n\\t);\\n\\tfloat Discriminant = dot(vec2(4.0 * Delta.x, -Delta.y), Delta.zy);\\n\\tvec3 RootsA, RootsD;\\n\\tvec2 xlc, xsc;\\n\\t{\\n\\t\\tfloat A_a = 1.0;\\n\\t\\tfloat C_a = Delta.x;\\n\\t\\tfloat D_a = -2.0 * B * Delta.x + Delta.y;\\n\\t\\tfloat Theta = atan(sqrt(Discriminant), -D_a) / 3.0;\\n\\t\\tfloat x_1a = 2.0 * sqrt(-C_a) * cos(Theta);\\n\\t\\tfloat x_3a = 2.0 * sqrt(-C_a) * cos(Theta + (2.0 / 3.0) * pi);\\n\\t\\tfloat xl;\\n\\t\\tif ((x_1a + x_3a) > 2.0 * B)\\n\\t\\t\\txl = x_1a;\\n\\t\\telse\\n\\t\\t\\txl = x_3a;\\n\\t\\txlc = vec2(xl - B, A);\\n\\t}\\n\\t{\\n\\t\\tfloat A_d = D;\\n\\t\\tfloat C_d = Delta.z;\\n\\t\\tfloat D_d = -D * Delta.y + 2.0 * C * Delta.z;\\n\\t\\tfloat Theta = atan(D * sqrt(Discriminant), -D_d) / 3.0;\\n\\t\\tfloat x_1d = 2.0 * sqrt(-C_d) * cos(Theta);\\n\\t\\tfloat x_3d = 2.0 * sqrt(-C_d) * cos(Theta + (2.0 / 3.0) * pi);\\n\\t\\tfloat xs;\\n\\t\\tif (x_1d + x_3d < 2.0 * C)\\n\\t\\t\\txs = x_1d;\\n\\t\\telse\\n\\t\\t\\txs = x_3d;\\n\\t\\txsc = vec2(-D, xs + C);\\n\\t}\\n\\tfloat E =  xlc.y * xsc.y;\\n\\tfloat F = -xlc.x * xsc.y - xlc.y * xsc.x;\\n\\tfloat G =  xlc.x * xsc.x;\\n\\tvec2 xmc = vec2(C * F - B * G, -B * F + C * E);\\n\\tvec3 Root = vec3(xsc.x / xsc.y, xmc.x / xmc.y, xlc.x / xlc.y);\\n\\tif (Root.x < Root.y && Root.x < Root.z)\\n\\t\\tRoot.xyz = Root.yxz;\\n\\telse if (Root.z < Root.x && Root.z < Root.y)\\n\\t\\tRoot.xyz = Root.xzy;\\n\\treturn Root;\\n}\\nfloat LTC_EvaluateDisk(vec3 N, vec3 V, vec3 P, mat3 Minv, Coords points)\\n{\\n\\tvec3 T1, T2;\\n\\tT1 = normalize(V - N * dot(V, N));\\n\\tT2 = cross(N, T1);\\n\\tmat3 R = transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 L_[ 3 ];\\n\\tL_[ 0 ] = R * ( points.coord0 - P );\\n\\tL_[ 1 ] = R * ( points.coord1 - P );\\n\\tL_[ 2 ] = R * ( points.coord2 - P );\\n\\tvec3 Lo_i = vec3(0);\\n\\tvec3 C  = 0.5 * (L_[0] + L_[2]);\\n\\tvec3 V1 = 0.5 * (L_[1] - L_[2]);\\n\\tvec3 V2 = 0.5 * (L_[1] - L_[0]);\\n\\tC  = Minv * C;\\n\\tV1 = Minv * V1;\\n\\tV2 = Minv * V2;\\n\\tfloat a, b;\\n\\tfloat d11 = dot(V1, V1);\\n\\tfloat d22 = dot(V2, V2);\\n\\tfloat d12 = dot(V1, V2);\\n\\tif (abs(d12) / sqrt(d11 * d22) > 0.0001)\\n\\t{\\n\\t\\tfloat tr = d11 + d22;\\n\\t\\tfloat det = -d12 * d12 + d11 * d22;\\n\\t\\tdet = sqrt(det);\\n\\t\\tfloat u = 0.5 * sqrt(tr - 2.0 * det);\\n\\t\\tfloat v = 0.5 * sqrt(tr + 2.0 * det);\\n\\t\\tfloat e_max = (u + v) * (u + v);\\n\\t\\tfloat e_min = (u - v) * (u - v);\\n\\t\\tvec3 V1_, V2_;\\n\\t\\tif (d11 > d22)\\n\\t\\t{\\n\\t\\t\\tV1_ = d12 * V1 + (e_max - d11) * V2;\\n\\t\\t\\tV2_ = d12 * V1 + (e_min - d11) * V2;\\n\\t\\t}\\n\\t\\telse\\n\\t\\t{\\n\\t\\t\\tV1_ = d12*V2 + (e_max - d22)*V1;\\n\\t\\t\\tV2_ = d12*V2 + (e_min - d22)*V1;\\n\\t\\t}\\n\\t\\ta = 1.0 / e_max;\\n\\t\\tb = 1.0 / e_min;\\n\\t\\tV1 = normalize(V1_);\\n\\t\\tV2 = normalize(V2_);\\n\\t}\\n\\telse\\n\\t{\\n\\t\\ta = 1.0 / dot(V1, V1);\\n\\t\\tb = 1.0 / dot(V2, V2);\\n\\t\\tV1 *= sqrt(a);\\n\\t\\tV2 *= sqrt(b);\\n\\t}\\n\\tvec3 V3 = cross(V1, V2);\\n\\tif (dot(C, V3) < 0.0)\\n\\t\\tV3 *= -1.0;\\n\\tfloat L  = dot(V3, C);\\n\\tfloat x0 = dot(V1, C) / L;\\n\\tfloat y0 = dot(V2, C) / L;\\n\\tfloat E1 = inversesqrt(a);\\n\\tfloat E2 = inversesqrt(b);\\n\\ta *= L * L;\\n\\tb *= L * L;\\n\\tfloat c0 = a * b;\\n\\tfloat c1 = a * b * (1.0 + x0 * x0 + y0 * y0) - a - b;\\n\\tfloat c2 = 1.0 - a * (1.0 + x0 * x0) - b * (1.0 + y0 * y0);\\n\\tfloat c3 = 1.0;\\n\\tvec3 roots = SolveCubic(vec4(c0, c1, c2, c3));\\n\\tfloat e1 = roots.x;\\n\\tfloat e2 = roots.y;\\n\\tfloat e3 = roots.z;\\n\\tvec3 avgDir = vec3(a * x0 / (a - e2), b * y0 / (b - e2), 1.0);\\n\\tmat3 rotate = mat3(V1, V2, V3);\\n\\tavgDir = rotate * avgDir;\\n\\tavgDir = normalize(avgDir);\\n\\tfloat L1 = sqrt(-e2 / e3);\\n\\tfloat L2 = sqrt(-e2 / e1);\\n\\tfloat formFactor = L1 * L2 * inversesqrt((1.0 + L1 * L1) * (1.0 + L2 * L2));\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tvec2 uv = vec2(avgDir.z * 0.5 + 0.5, formFactor);\\n\\tuv = uv*LUT_SCALE + LUT_BIAS;\\n\\tfloat scale = texture2D( areaLightsLutTex2, uv ).w;\\n\\treturn formFactor*scale;\\n}\\nfloat getRectLightDiffuse() {\\n\\treturn LTC_EvaluateRect( dNormalW, dViewDirW, vPositionW, mat3( 1.0 ), dLTCCoords );\\n}\\nfloat getDiskLightDiffuse() {\\n\\treturn LTC_EvaluateDisk( dNormalW, dViewDirW, vPositionW, mat3( 1.0 ), dLTCCoords );\\n}\\nfloat getSphereLightDiffuse() {\\n\\tfloat falloff = dSphereRadius / (dot(dLightDirW, dLightDirW) + dSphereRadius);\\n\\treturn getLightDiffuse()*falloff;\\n}\\nmat3 getLTCLightInvMat(vec2 uv)\\n{\\n\\tvec4 t1 = texture2D( areaLightsLutTex1, uv );\\n\\t#ifdef AREA_R8_G8_B8_A8_LUTS\\n\\tt1 *= vec4(1.001, 0.3239, 0.60437568, 1.0);\\n\\tt1 += vec4(0.0, -0.2976, -0.01381, 0.0);\\n\\t#endif\\n\\treturn mat3(\\n\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\tvec3(\\t0, 1,\\t0 ),\\n\\t\\tvec3( t1.z, 0, t1.w )\\n\\t);\\n}\\nfloat calcRectLightSpecular(vec3 tNormalW, vec2 uv) {\\n\\tmat3 mInv = getLTCLightInvMat(uv);\\n\\treturn LTC_EvaluateRect( tNormalW, dViewDirW, vPositionW, mInv, dLTCCoords );\\n}\\nfloat getRectLightSpecular() {\\n\\treturn calcRectLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getRectLightSpecularCC() {\\n\\treturn calcRectLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\nfloat calcDiskLightSpecular(vec3 tNormalW, vec2 uv) {\\n\\tmat3 mInv = getLTCLightInvMat(uv);\\n\\treturn LTC_EvaluateDisk( tNormalW, dViewDirW, vPositionW, mInv, dLTCCoords );\\n}\\nfloat getDiskLightSpecular() {\\n\\treturn calcDiskLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getDiskLightSpecularCC() {\\n\\treturn calcDiskLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\nfloat getSphereLightSpecular() {\\n\\treturn calcDiskLightSpecular(dNormalW, dLTCUV);\\n}\\n#ifdef CLEARCOAT\\nfloat getSphereLightSpecularCC() {\\n\\treturn calcDiskLightSpecular(ccNormalW, ccLTCUV);\\n}\\n#endif\\n\";\n\nvar metalnessPS = \"void processMetalness(float metalness) {\\n\\tconst float dielectricF0 = 0.04;\\n\\tdSpecularity = mix(vec3(dielectricF0), dAlbedo, metalness);\\n\\tdAlbedo *= 1.0 - metalness;\\n}\\n#ifdef MAPFLOAT\\nuniform float material_metalness;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_metalnessMap;\\n#endif\\nvoid getSpecularity() {\\n\\tfloat metalness = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tmetalness *= material_metalness;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tmetalness *= texture2D(texture_metalnessMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tmetalness *= saturate(vVertexColor.$VC);\\n\\t#endif\\n\\tprocessMetalness(metalness);\\n}\\n\";\n\nvar msdfPS = \"uniform sampler2D texture_msdfMap;\\n#ifdef GL_OES_standard_derivatives\\n#define USE_FWIDTH\\n#endif\\n#ifdef GL2\\n#define USE_FWIDTH\\n#endif\\nfloat median(float r, float g, float b) {\\n\\treturn max(min(r, g), min(max(r, g), b));\\n}\\nfloat map (float min, float max, float v) {\\n\\treturn (v - min) / (max - min);\\n}\\nuniform float font_sdfIntensity;\\nuniform float font_pxrange;\\nuniform float font_textureWidth;\\nuniform vec4 outline_color;\\nuniform float outline_thickness;\\nuniform vec4 shadow_color;\\nuniform vec2 shadow_offset;\\nvec4 applyMsdf(vec4 color) {\\n\\tvec3 tsample = texture2D(texture_msdfMap, vUv0).rgb;\\n\\tvec2 uvShdw = vUv0 - shadow_offset;\\n\\tvec3 ssample = texture2D(texture_msdfMap, uvShdw).rgb;\\n\\tfloat sigDist = median(tsample.r, tsample.g, tsample.b);\\n\\tfloat sigDistShdw = median(ssample.r, ssample.g, ssample.b);\\n\\t#ifdef USE_FWIDTH\\n\\tvec2 w = fwidth(vUv0);\\n\\tfloat smoothing = clamp(w.x * font_textureWidth / font_pxrange, 0.0, 0.5);\\n\\t#else\\n\\tfloat font_size = 16.0;\\n\\tfloat smoothing = clamp(font_pxrange / font_size, 0.0, 0.5);\\n\\t#endif\\n\\tfloat mapMin = 0.05;\\n\\tfloat mapMax = clamp(1.0 - font_sdfIntensity, mapMin, 1.0);\\n\\tfloat sigDistInner = map(mapMin, mapMax, sigDist);\\n\\tfloat sigDistOutline = map(mapMin, mapMax, sigDist + outline_thickness);\\n\\tsigDistShdw = map(mapMin, mapMax, sigDistShdw + outline_thickness);\\n\\tfloat center = 0.5;\\n\\tfloat inside = smoothstep(center-smoothing, center+smoothing, sigDistInner);\\n\\tfloat outline = smoothstep(center-smoothing, center+smoothing, sigDistOutline);\\n\\tfloat shadow = smoothstep(center-smoothing, center+smoothing, sigDistShdw);\\n\\tvec4 tcolor = (outline > inside) ? outline * vec4(outline_color.a * outline_color.rgb, outline_color.a) : vec4(0.0);\\n\\ttcolor = mix(tcolor, color, inside);\\n\\tvec4 scolor = (shadow > outline) ? shadow * vec4(shadow_color.a * shadow_color.rgb, shadow_color.a) : tcolor;\\n\\ttcolor = mix(scolor, tcolor, outline);\\n\\treturn tcolor;\\n}\\n\";\n\nvar normalVS = \"#ifdef MORPHING_TEXTURE_BASED_NORMAL\\nuniform highp sampler2D morphNormalTex;\\n#endif\\nvec3 getNormal() {\\n\\t#ifdef SKIN\\n\\tdNormalMatrix = mat3(dModelMatrix[0].xyz, dModelMatrix[1].xyz, dModelMatrix[2].xyz);\\n\\t#elif defined(INSTANCING)\\n\\tdNormalMatrix = mat3(instance_line1.xyz, instance_line2.xyz, instance_line3.xyz);\\n\\t#else\\n\\tdNormalMatrix = matrix_normal;\\n\\t#endif\\n\\tvec3 tempNormal = vertex_normal;\\n\\t#ifdef MORPHING\\n\\t#ifdef MORPHING_NRM03\\n\\ttempNormal += morph_weights_a[0] * morph_nrm0;\\n\\ttempNormal += morph_weights_a[1] * morph_nrm1;\\n\\ttempNormal += morph_weights_a[2] * morph_nrm2;\\n\\ttempNormal += morph_weights_a[3] * morph_nrm3;\\n\\t#endif\\n\\t#ifdef MORPHING_NRM47\\n\\ttempNormal += morph_weights_b[0] * morph_nrm4;\\n\\ttempNormal += morph_weights_b[1] * morph_nrm5;\\n\\ttempNormal += morph_weights_b[2] * morph_nrm6;\\n\\ttempNormal += morph_weights_b[3] * morph_nrm7;\\n\\t#endif\\n\\t#endif\\n\\t#ifdef MORPHING_TEXTURE_BASED_NORMAL\\n\\tvec2 morphUV = getTextureMorphCoords();\\n\\tvec3 morphNormal = texture2D(morphNormalTex, morphUV).xyz;\\n\\ttempNormal += morphNormal;\\n\\t#endif\\n\\treturn normalize(dNormalMatrix * tempNormal);\\n}\\n\";\n\nvar normalDetailMapPS = \"#ifdef MAPTEXTURE\\nuniform sampler2D texture_normalDetailMap;\\nuniform float material_normalDetailMapBumpiness;\\nvec3 blendNormals(vec3 n1, vec3 n2) {\\n\\tn1 += vec3(0, 0, 1);\\n\\tn2 *= vec3(-1, -1, 1);\\n\\treturn normalize(n1*dot(n1, n2)/n1.z - n2);\\n}\\n#endif\\nvec3 addNormalDetail(vec3 normalMap) {\\n\\t#ifdef MAPTEXTURE\\n\\tvec3 normalDetailMap = unpackNormal(texture2D(texture_normalDetailMap, $UV));\\n\\tnormalDetailMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalDetailMap, material_normalDetailMapBumpiness));\\n\\treturn blendNormals(normalMap, normalDetailMap);\\n\\t#else\\n\\treturn normalMap;\\n\\t#endif\\n}\\n\";\n\nvar normalInstancedVS = \"vec3 getNormal() {\\n\\tdNormalMatrix = mat3(instance_line1.xyz, instance_line2.xyz, instance_line3.xyz);\\n\\treturn normalize(dNormalMatrix * vertex_normal);\\n}\\n\";\n\nvar normalMapPS = \"uniform sampler2D texture_normalMap;\\nuniform float material_bumpiness;\\nvoid getNormal() {\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_normalMap, $UV));\\n\\tnormalMap = normalize(mix(vec3(0.0, 0.0, 1.0), normalMap, material_bumpiness));\\n\\tdNormalMap = addNormalDetail(normalMap);\\n\\tdNormalW = dTBN * dNormalMap;\\n}\\n\";\n\nvar normalMapFastPS = \"uniform sampler2D texture_normalMap;\\nvoid getNormal() {\\n\\tvec3 normalMap = unpackNormal(texture2D(texture_normalMap, $UV));\\n\\tdNormalMap = addNormalDetail(normalMap);\\n\\tdNormalW = dTBN * dNormalMap;\\n}\\n\";\n\nvar normalSkinnedVS = \"vec3 getNormal() {\\n\\tdNormalMatrix = mat3(dModelMatrix[0].xyz, dModelMatrix[1].xyz, dModelMatrix[2].xyz);\\n\\treturn normalize(dNormalMatrix * vertex_normal);\\n}\\n\";\n\nvar normalVertexPS = \"void getNormal() {\\n\\tdNormalW = normalize(dVertexNormalW);\\n}\\n\";\n\nvar normalXYPS = \"vec3 unpackNormal(vec4 nmap) {\\n\\tvec3 normal;\\n\\tnormal.xy = nmap.wy * 2.0 - 1.0;\\n\\tnormal.z = sqrt(1.0 - saturate(dot(normal.xy, normal.xy)));\\n\\treturn normal;\\n}\\n\";\n\nvar normalXYZPS = \"vec3 unpackNormal(vec4 nmap) {\\n\\treturn nmap.xyz * 2.0 - 1.0;\\n}\\n\";\n\nvar opacityPS = \"#ifdef MAPFLOAT\\nuniform float material_opacity;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_opacityMap;\\n#endif\\nvoid getOpacity() {\\n\\tdAlpha = 1.0;\\n\\t#ifdef MAPFLOAT\\n\\tdAlpha *= material_opacity;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdAlpha *= texture2D(texture_opacityMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdAlpha *= clamp(vVertexColor.$VC, 0.0, 1.0);\\n\\t#endif\\n}\\n\";\n\nvar outputAlphaPS = \"gl_FragColor.a = dAlpha;\\n\";\n\nvar outputAlphaOpaquePS = \"gl_FragColor.a = 1.0;\\n\";\n\nvar outputAlphaPremulPS = \"gl_FragColor.rgb *= dAlpha;\\ngl_FragColor.a = dAlpha;\\n\";\n\nvar outputCubemapPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec4 encodeRGBM(vec4 color) {\\n\\tcolor.rgb = pow(color.rgb, vec3(0.5));\\n\\tcolor.rgb *= 1.0 / 8.0;\\n\\tcolor.a = saturate( max( max( color.r, color.g ), max( color.b, 1.0 / 255.0 ) ) );\\n\\tcolor.a = ceil(color.a * 255.0) / 255.0;\\n\\tcolor.rgb /= color.a;\\n\\treturn color;\\n}\\nvoid main(void) {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tfloat face = params.x;\\n\\tvec3 vec;\\n\\tif (face==0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face==1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face==2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face==3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face==4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\tgl_FragColor = textureCube(source, vec);\\n\\tif (params.w >= 2.0) gl_FragColor = encodeRGBM(gl_FragColor);\\n}\\n\";\n\nvar outputTex2DPS = \"varying vec2 vUv0;\\nuniform sampler2D source;\\nvoid main(void) {\\n\\tgl_FragColor = texture2D(source, vUv0);\\n}\\n\";\n\nvar packDepthPS = \"\\nvec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\n\";\n\nvar packDepthMaskPS = \"vec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres.x = 0.0;\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\n\";\n\nvar parallaxPS = \"uniform sampler2D texture_heightMap;\\nuniform float material_heightMapFactor;\\nvoid getParallax() {\\n\\tfloat parallaxScale = material_heightMapFactor;\\n\\tfloat height = texture2D(texture_heightMap, $UV).$CH;\\n\\theight = height * parallaxScale - parallaxScale*0.5;\\n\\tvec3 viewDirT = dViewDirW * dTBN;\\n\\tviewDirT.z += 0.42;\\n\\tdUvOffset = height * (viewDirT.xy / viewDirT.z);\\n}\\n\";\n\nvar particlePS = \"varying vec4 texCoordsAlphaLife;\\nuniform sampler2D colorMap;\\nuniform sampler2D colorParam;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\nuniform float softening;\\nuniform float colorMult;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\tfloat depth = dot(rgbaDepth, bitShift);\\n\\treturn depth;\\n}\\n#endif\\nvoid main(void) {\\n\\tvec4 tex  = texture2DSRGB(colorMap, vec2(texCoordsAlphaLife.x, 1.0 - texCoordsAlphaLife.y));\\n\\tvec4 ramp = texture2DSRGB(colorParam, vec2(texCoordsAlphaLife.w, 0.0));\\n\\tramp.rgb *= colorMult;\\n\\tramp.a += texCoordsAlphaLife.z;\\n\\tvec3 rgb = tex.rgb * ramp.rgb;\\n\\tfloat a  = tex.a * ramp.a;\\n\";\n\nvar particleVS = \"vec3 unpack3NFloats(float src) {\\n\\tfloat r = fract(src);\\n\\tfloat g = fract(src * 256.0);\\n\\tfloat b = fract(src * 65536.0);\\n\\treturn vec3(r, g, b);\\n}\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec4 tex1Dlod_lerp(highp sampler2D tex, vec2 tc) {\\n\\treturn mix( texture2D(tex,tc), texture2D(tex,tc + graphSampleSize), fract(tc.x*graphNumSamples) );\\n}\\nvec4 tex1Dlod_lerp(highp sampler2D tex, vec2 tc, out vec3 w) {\\n\\tvec4 a = texture2D(tex,tc);\\n\\tvec4 b = texture2D(tex,tc + graphSampleSize);\\n\\tfloat c = fract(tc.x*graphNumSamples);\\n\\tvec3 unpackedA = unpack3NFloats(a.w);\\n\\tvec3 unpackedB = unpack3NFloats(b.w);\\n\\tw = mix(unpackedA, unpackedB, c);\\n\\treturn mix(a, b, c);\\n}\\nvec2 rotate(vec2 quadXY, float pRotation, out mat2 rotMatrix) {\\n\\tfloat c = cos(pRotation);\\n\\tfloat s = sin(pRotation);\\n\\tmat2 m = mat2(c, -s, s, c);\\n\\trotMatrix = m;\\n\\treturn m * quadXY;\\n}\\nvec3 billboard(vec3 InstanceCoords, vec2 quadXY) {\\n\\t#ifdef SCREEN_SPACE\\n\\t\\tvec3 pos = vec3(-1, 0, 0) * quadXY.x + vec3(0, -1, 0) * quadXY.y;\\n\\t#else\\n\\t\\tvec3 pos = -matrix_viewInverse[0].xyz * quadXY.x + -matrix_viewInverse[1].xyz * quadXY.y;\\n\\t#endif\\n\\treturn pos;\\n}\\nvec3 customFace(vec3 InstanceCoords, vec2 quadXY) {\\n\\tvec3 pos = faceTangent * quadXY.x + faceBinorm * quadXY.y;\\n\\treturn pos;\\n}\\nvec2 safeNormalize(vec2 v) {\\n\\tfloat l = length(v);\\n\\treturn (l > 1e-06) ? v / l : v;\\n}\\nvoid main(void) {\\n\\tvec3 meshLocalPos = particle_vertexData.xyz;\\n\\tfloat id = floor(particle_vertexData.w);\\n\\tfloat rndFactor = fract(sin(id + 1.0 + seed));\\n\\tvec3 rndFactor3 = vec3(rndFactor, fract(rndFactor*10.0), fract(rndFactor*100.0));\\n\\tfloat uv = id / numParticlesPot;\\n\\treadInput(uv);\\n#ifdef LOCAL_SPACE\\n\\tinVel = mat3(matrix_model) * inVel;\\n#endif\\n\\tvec2 velocityV = safeNormalize((mat3(matrix_view) * inVel).xy);\\n\\tfloat particleLifetime = lifetime;\\n\\tif (inLife <= 0.0 || inLife > particleLifetime || !inShow) meshLocalPos = vec3(0.0);\\n\\tvec2 quadXY = meshLocalPos.xy;\\n\\tfloat nlife = clamp(inLife / particleLifetime, 0.0, 1.0);\\n\\tvec3 paramDiv;\\n\\tvec4 params = tex1Dlod_lerp(internalTex2, vec2(nlife, 0), paramDiv);\\n\\tfloat scale = params.y;\\n\\tfloat scaleDiv = paramDiv.x;\\n\\tfloat alphaDiv = paramDiv.z;\\n\\tscale += (scaleDiv * 2.0 - 1.0) * scaleDivMult * fract(rndFactor*10000.0);\\n#ifndef USE_MESH\\n\\ttexCoordsAlphaLife = vec4(quadXY * -0.5 + 0.5, (alphaDiv * 2.0 - 1.0) * alphaDivMult * fract(rndFactor*1000.0), nlife);\\n#else\\n\\ttexCoordsAlphaLife = vec4(particle_uv, (alphaDiv * 2.0 - 1.0) * alphaDivMult * fract(rndFactor*1000.0), nlife);\\n#endif\\n\\tvec3 particlePos = inPos;\\n\\tvec3 particlePosMoved = vec3(0.0);\\n\\tmat2 rotMatrix;\\n\";\n\nvar particleAnimFrameClampVS = \"\\tfloat animFrame = min(floor(texCoordsAlphaLife.w * animTexParams.y) + animTexParams.x, animTexParams.z);\\n\";\n\nvar particleAnimFrameLoopVS = \"\\tfloat animFrame = floor(mod(texCoordsAlphaLife.w * animTexParams.y + animTexParams.x, animTexParams.z + 1.0));\\n\";\n\nvar particleAnimTexVS = \"\\tfloat animationIndex;\\n\\tif (animTexIndexParams.y == 1.0) {\\n\\t\\tanimationIndex = floor((animTexParams.w + 1.0) * rndFactor3.z) * (animTexParams.z + 1.0);\\n\\t} else {\\n\\t\\tanimationIndex = animTexIndexParams.x * (animTexParams.z + 1.0);\\n\\t}\\n\\tfloat atlasX = (animationIndex + animFrame) * animTexTilesParams.x;\\n\\tfloat atlasY = 1.0 - floor(atlasX + 1.0) * animTexTilesParams.y;\\n\\tatlasX = fract(atlasX);\\n\\ttexCoordsAlphaLife.xy *= animTexTilesParams.xy;\\n\\ttexCoordsAlphaLife.xy += vec2(atlasX, atlasY);\\n\";\n\nvar particleInputFloatPS = \"void readInput(float uv) {\\n\\tvec4 tex = texture2D(particleTexIN, vec2(uv, 0.25));\\n\\tvec4 tex2 = texture2D(particleTexIN, vec2(uv, 0.75));\\n\\tinPos = tex.xyz;\\n\\tinVel = tex2.xyz;\\n\\tinAngle = (tex.w < 0.0? -tex.w : tex.w) - 1000.0;\\n\\tinShow = tex.w >= 0.0;\\n\\tinLife = tex2.w;\\n}\\n\";\n\nvar particleInputRgba8PS = \"\\n#define PI2 6.283185307179586\\nuniform vec3 inBoundsSize;\\nuniform vec3 inBoundsCenter;\\nuniform float maxVel;\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nfloat decodeFloatRGBA( vec4 rgba ) {\\n  return dot( rgba, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\\n}\\nvoid readInput(float uv) {\\n\\tvec4 tex0 = texture2D(particleTexIN, vec2(uv, 0.125));\\n\\tvec4 tex1 = texture2D(particleTexIN, vec2(uv, 0.375));\\n\\tvec4 tex2 = texture2D(particleTexIN, vec2(uv, 0.625));\\n\\tvec4 tex3 = texture2D(particleTexIN, vec2(uv, 0.875));\\n\\tinPos = vec3(decodeFloatRG(tex0.rg), decodeFloatRG(tex0.ba), decodeFloatRG(tex1.rg));\\n\\tinPos = (inPos - vec3(0.5)) * inBoundsSize + inBoundsCenter;\\n\\tinVel = tex2.xyz;\\n\\tinVel = (inVel - vec3(0.5)) * maxVel;\\n\\tinAngle = decodeFloatRG(tex1.ba) * PI2;\\n\\tinShow = tex2.a > 0.5;\\n\\tinLife = decodeFloatRGBA(tex3);\\n\\tfloat maxNegLife = max(lifetime, (numParticles - 1.0) * (rate+rateDiv));\\n\\tfloat maxPosLife = lifetime+1.0;\\n\\tinLife = inLife * (maxNegLife + maxPosLife) - maxNegLife;\\n}\\n\";\n\nvar particleOutputFloatPS = \"void writeOutput() {\\n\\tif (gl_FragCoord.y<1.0) {\\n\\t\\tgl_FragColor = vec4(outPos, (outAngle + 1000.0) * visMode);\\n\\t} else {\\n\\t\\tgl_FragColor = vec4(outVel, outLife);\\n\\t}\\n}\\n\";\n\nvar particleOutputRgba8PS = \"uniform vec3 outBoundsMul;\\nuniform vec3 outBoundsAdd;\\nvec2 encodeFloatRG( float v ) {\\n\\tvec2 enc = vec2(1.0, 255.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\\treturn enc;\\n}\\nvec4 encodeFloatRGBA( float v ) {\\n\\tvec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * v;\\n\\tenc = fract(enc);\\n\\tenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\\n\\treturn enc;\\n}\\nvoid writeOutput() {\\n\\toutPos = outPos * outBoundsMul + outBoundsAdd;\\n\\toutAngle = fract(outAngle / PI2);\\n\\toutVel = (outVel / maxVel) + vec3(0.5);\\n\\tfloat maxNegLife = max(lifetime, (numParticles - 1.0) * (rate+rateDiv));\\n\\tfloat maxPosLife = lifetime+1.0;\\n\\toutLife = (outLife + maxNegLife) / (maxNegLife + maxPosLife);\\n\\tif (gl_FragCoord.y < 1.0) {\\n\\t\\tgl_FragColor = vec4(encodeFloatRG(outPos.x), encodeFloatRG(outPos.y));\\n\\t} else if (gl_FragCoord.y < 2.0) {\\n\\t\\tgl_FragColor = vec4(encodeFloatRG(outPos.z), encodeFloatRG(outAngle));\\n\\t} else if (gl_FragCoord.y < 3.0) {\\n\\t\\tgl_FragColor = vec4(outVel, visMode*0.5+0.5);\\n\\t} else {\\n\\t\\tgl_FragColor = encodeFloatRGBA(outLife);\\n\\t}\\n}\\n\";\n\nvar particleUpdaterAABBPS = \"uniform mat3 spawnBounds;\\nuniform vec3 spawnPosInnerRatio;\\nvec3 calcSpawnPosition(vec3 inBounds, float rndFactor) {\\n\\tvec3 pos = inBounds - vec3(0.5);\\n\\tvec3 posAbs = abs(pos);\\n\\tvec3 maxPos = vec3(max(posAbs.x, max(posAbs.y, posAbs.z)));\\n\\tvec3 edge = maxPos + (vec3(0.5) - maxPos) * spawnPosInnerRatio;\\n\\tpos.x = edge.x * (maxPos.x == posAbs.x ? sign(pos.x) : 2.0 * pos.x);\\n\\tpos.y = edge.y * (maxPos.y == posAbs.y ? sign(pos.y) : 2.0 * pos.y);\\n\\tpos.z = edge.z * (maxPos.z == posAbs.z ? sign(pos.z) : 2.0 * pos.z);\\n#ifndef LOCAL_SPACE\\n\\treturn emitterPos + spawnBounds * pos;\\n#else\\n\\treturn spawnBounds * pos;\\n#endif\\n}\\nvoid addInitialVelocity(inout vec3 localVelocity, vec3 inBounds) {\\n\\tlocalVelocity -= vec3(0, 0, initialVelocity);\\n}\\n\";\n\nvar particleUpdaterEndPS = \"\\twriteOutput();\\n}\\n\";\n\nvar particleUpdaterInitPS = \"varying vec2 vUv0;\\nuniform highp sampler2D particleTexIN;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\nuniform highp sampler2D internalTex3;\\nuniform mat3 emitterMatrix, emitterMatrixInv;\\nuniform vec3 emitterScale;\\nuniform vec3 emitterPos, frameRandom, localVelocityDivMult, velocityDivMult;\\nuniform float delta, rate, rateDiv, lifetime, numParticles, rotSpeedDivMult, radialSpeedDivMult, seed;\\nuniform float startAngle, startAngle2;\\nuniform float initialVelocity;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\nvec3 inPos;\\nvec3 inVel;\\nfloat inAngle;\\nbool inShow;\\nfloat inLife;\\nfloat visMode;\\nvec3 outPos;\\nvec3 outVel;\\nfloat outAngle;\\nbool outShow;\\nfloat outLife;\\n\";\n\nvar particleUpdaterNoRespawnPS = \"\\tif (outLife >= lifetime) {\\n\\t\\toutLife -= max(lifetime, (numParticles - 1.0) * particleRate);\\n\\t\\tvisMode = -1.0;\\n\\t}\\n\";\n\nvar particleUpdaterOnStopPS = \"\\tvisMode = outLife < 0.0? -1.0: visMode;\\n\";\n\nvar particleUpdaterRespawnPS = \"\\tif (outLife >= lifetime) {\\n\\t\\toutLife -= max(lifetime, (numParticles - 1.0) * particleRate);\\n\\t\\tvisMode = 1.0;\\n\\t}\\n\\tvisMode = outLife < 0.0? 1.0: visMode;\\n\";\n\nvar particleUpdaterSpherePS = \"uniform float spawnBoundsSphere;\\nuniform float spawnBoundsSphereInnerRatio;\\nvec3 calcSpawnPosition(vec3 inBounds, float rndFactor) {\\n\\tfloat rnd4 = fract(rndFactor * 1000.0);\\n\\tvec3 norm = normalize(inBounds.xyz - vec3(0.5));\\n\\tfloat r = rnd4 * (1.0 - spawnBoundsSphereInnerRatio) + spawnBoundsSphereInnerRatio;\\n#ifndef LOCAL_SPACE\\n\\treturn emitterPos + norm * r * spawnBoundsSphere;\\n#else\\n\\treturn norm * r * spawnBoundsSphere;\\n#endif\\n}\\nvoid addInitialVelocity(inout vec3 localVelocity, vec3 inBounds) {\\n\\tlocalVelocity += normalize(inBounds - vec3(0.5)) * initialVelocity;\\n}\\n\";\n\nvar particleUpdaterStartPS = \"float saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 unpack3NFloats(float src) {\\n\\tfloat r = fract(src);\\n\\tfloat g = fract(src * 256.0);\\n\\tfloat b = fract(src * 65536.0);\\n\\treturn vec3(r, g, b);\\n}\\nvec3 tex1Dlod_lerp(highp sampler2D tex, vec2 tc, out vec3 w) {\\n\\tvec4 a = texture2D(tex, tc);\\n\\tvec4 b = texture2D(tex, tc + graphSampleSize);\\n\\tfloat c = fract(tc.x * graphNumSamples);\\n\\tvec3 unpackedA = unpack3NFloats(a.w);\\n\\tvec3 unpackedB = unpack3NFloats(b.w);\\n\\tw = mix(unpackedA, unpackedB, c);\\n\\treturn mix(a.xyz, b.xyz, c);\\n}\\n#define HASHSCALE4 vec4(1031, .1030, .0973, .1099)\\nvec4 hash41(float p) {\\n\\tvec4 p4 = fract(vec4(p) * HASHSCALE4);\\n\\tp4 += dot(p4, p4.wzxy+19.19);\\n\\treturn fract(vec4((p4.x + p4.y)*p4.z, (p4.x + p4.z)*p4.y, (p4.y + p4.z)*p4.w, (p4.z + p4.w)*p4.x));\\n}\\nvoid main(void) {\\n\\tif (gl_FragCoord.x > numParticles) discard;\\n\\treadInput(vUv0.x);\\n\\tvisMode = inShow? 1.0 : -1.0;\\n\\tvec4 rndFactor = hash41(gl_FragCoord.x + seed);\\n\\tfloat particleRate = rate + rateDiv * rndFactor.x;\\n\\toutLife = inLife + delta;\\n\\tfloat nlife = clamp(outLife / lifetime, 0.0, 1.0);\\n\\tvec3 localVelocityDiv;\\n\\tvec3 velocityDiv;\\n\\tvec3 paramDiv;\\n\\tvec3 localVelocity = tex1Dlod_lerp(internalTex0, vec2(nlife, 0), localVelocityDiv);\\n\\tvec3 velocity =\\t  tex1Dlod_lerp(internalTex1, vec2(nlife, 0), velocityDiv);\\n\\tvec3 params =\\t\\ttex1Dlod_lerp(internalTex2, vec2(nlife, 0), paramDiv);\\n\\tfloat rotSpeed = params.x;\\n\\tfloat rotSpeedDiv = paramDiv.y;\\n\\tvec3 radialParams = tex1Dlod_lerp(internalTex3, vec2(nlife, 0), paramDiv);\\n\\tfloat radialSpeed = radialParams.x;\\n\\tfloat radialSpeedDiv = radialParams.y;\\n\\tbool respawn = inLife <= 0.0 || outLife >= lifetime;\\n\\tinPos = respawn ? calcSpawnPosition(rndFactor.xyz, rndFactor.x) : inPos;\\n\\tinAngle = respawn ? mix(startAngle, startAngle2, rndFactor.x) : inAngle;\\n#ifndef LOCAL_SPACE\\n\\tvec3 radialVel = inPos - emitterPos;\\n#else\\n\\tvec3 radialVel = inPos;\\n#endif\\n\\tradialVel = (dot(radialVel, radialVel) > 1.0E-8) ? radialSpeed * normalize(radialVel) : vec3(0.0);\\n\\tradialVel += (radialSpeedDiv * vec3(2.0) - vec3(1.0)) * radialSpeedDivMult * rndFactor.xyz;\\n\\tlocalVelocity +=\\t(localVelocityDiv * vec3(2.0) - vec3(1.0)) * localVelocityDivMult * rndFactor.xyz;\\n\\tvelocity +=\\t\\t (velocityDiv * vec3(2.0) - vec3(1.0)) * velocityDivMult * rndFactor.xyz;\\n\\trotSpeed +=\\t\\t (rotSpeedDiv * 2.0 - 1.0) * rotSpeedDivMult * rndFactor.y;\\n\\taddInitialVelocity(localVelocity, rndFactor.xyz);\\n#ifndef LOCAL_SPACE\\n\\toutVel = emitterMatrix * localVelocity + (radialVel + velocity) * emitterScale;\\n#else\\n\\toutVel = (localVelocity + radialVel) / emitterScale + emitterMatrixInv * velocity;\\n#endif\\n\\toutPos = inPos + outVel * delta;\\n\\toutAngle = inAngle + rotSpeed * delta;\\n\";\n\nvar particle_billboardVS = \"\\tquadXY = rotate(quadXY, inAngle, rotMatrix);\\n\\tvec3 localPos = billboard(particlePos, quadXY);\\n\";\n\nvar particle_blendAddPS = \"\\tdBlendModeFogFactor = 0.0;\\n\\trgb *= saturate(gammaCorrectInput(max(a, 0.0)));\\n\\tif ((rgb.r + rgb.g + rgb.b) < 0.000001) discard;\\n\";\n\nvar particle_blendMultiplyPS = \"\\trgb = mix(vec3(1.0), rgb, vec3(a));\\n\\tif (rgb.r + rgb.g + rgb.b > 2.99) discard;\\n\";\n\nvar particle_blendNormalPS = \"\\tif (a < 0.01) discard;\\n\";\n\nvar particle_cpuVS = \"attribute vec4 particle_vertexData;\\nattribute vec4 particle_vertexData2;\\nattribute vec4 particle_vertexData3;\\nattribute float particle_vertexData4;\\n#ifndef USE_MESH\\n#define VDATA5TYPE vec2\\n#else\\n#define VDATA5TYPE vec4\\n#endif\\nattribute VDATA5TYPE particle_vertexData5;\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform mat3 matrix_normal;\\nuniform mat4 matrix_viewInverse;\\nuniform float numParticles;\\nuniform float lifetime;\\nuniform float stretch;\\nuniform float seed;\\nuniform vec3 wrapBounds, emitterScale, faceTangent, faceBinorm;\\nuniform sampler2D texLifeAndSourcePosOUT;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\nuniform vec3 emitterPos;\\nvarying vec4 texCoordsAlphaLife;\\nvec2 rotate(vec2 quadXY, float pRotation, out mat2 rotMatrix)\\n{\\n\\tfloat c = cos(pRotation);\\n\\tfloat s = sin(pRotation);\\n\\tmat2 m = mat2(c, -s, s, c);\\n\\trotMatrix = m;\\n\\treturn m * quadXY;\\n}\\nvec3 billboard(vec3 InstanceCoords, vec2 quadXY)\\n{\\n\\tvec3 pos = -matrix_viewInverse[0].xyz * quadXY.x + -matrix_viewInverse[1].xyz * quadXY.y;\\n\\treturn pos;\\n}\\nvec3 customFace(vec3 InstanceCoords, vec2 quadXY)\\n{\\n\\tvec3 pos = faceTangent * quadXY.x + faceBinorm * quadXY.y;\\n\\treturn pos;\\n}\\nvoid main(void)\\n{\\n\\tvec3 particlePos = particle_vertexData.xyz;\\n\\tvec3 inPos = particlePos;\\n\\tvec3 vertPos = particle_vertexData3.xyz;\\n\\tvec3 inVel = vec3(particle_vertexData2.w, particle_vertexData3.w, particle_vertexData5.x);\\n\\tfloat id = floor(particle_vertexData4);\\n\\tfloat rndFactor = fract(sin(id + 1.0 + seed));\\n\\tvec3 rndFactor3 = vec3(rndFactor, fract(rndFactor*10.0), fract(rndFactor*100.0));\\n#ifdef LOCAL_SPACE\\n\\tinVel = mat3(matrix_model) * inVel;\\n#endif\\n\\tvec2 velocityV = normalize((mat3(matrix_view) * inVel).xy);\\n\\tvec2 quadXY = vertPos.xy;\\n#ifdef USE_MESH\\n\\ttexCoordsAlphaLife = vec4(particle_vertexData5.zw, particle_vertexData2.z, particle_vertexData.w);\\n#else\\n\\ttexCoordsAlphaLife = vec4(quadXY * -0.5 + 0.5, particle_vertexData2.z, particle_vertexData.w);\\n#endif\\n\\tmat2 rotMatrix;\\n\\tfloat inAngle = particle_vertexData2.x;\\n\\tvec3 particlePosMoved = vec3(0.0);\\n\\tvec3 meshLocalPos = particle_vertexData3.xyz;\\n\";\n\nvar particle_cpu_endVS = \"\\tlocalPos *= particle_vertexData2.y * emitterScale;\\n\\tlocalPos += particlePos;\\n\\tgl_Position = matrix_viewProjection * vec4(localPos, 1.0);\\n\";\n\nvar particle_customFaceVS = \"\\tquadXY = rotate(quadXY, inAngle, rotMatrix);\\n\\tvec3 localPos = customFace(particlePos, quadXY);\\n\";\n\nvar particle_endPS = \"\\trgb = addFog(rgb);\\n\\trgb = toneMap(rgb);\\n\\trgb = gammaCorrectOutput(rgb);\\n\\tgl_FragColor = vec4(rgb, a);\\n}\\n\";\n\nvar particle_endVS = \"\\tlocalPos *= scale * emitterScale;\\n\\tlocalPos += particlePos;\\n\\t#ifdef SCREEN_SPACE\\n\\tgl_Position = vec4(localPos.x, localPos.y, 0.0, 1.0);\\n\\t#else\\n\\tgl_Position = matrix_viewProjection * vec4(localPos.xyz, 1.0);\\n\\t#endif\\n\";\n\nvar particle_halflambertPS = \"\\tvec3 negNormal = normal*0.5+0.5;\\n\\tvec3 posNormal = -normal*0.5+0.5;\\n\\tnegNormal *= negNormal;\\n\\tposNormal *= posNormal;\\n\";\n\nvar particle_initVS = \"attribute vec4 particle_vertexData;\\n#ifdef USE_MESH\\nattribute vec2 particle_uv;\\n#endif\\nuniform mat4 matrix_viewProjection;\\nuniform mat4 matrix_model;\\nuniform mat3 matrix_normal;\\nuniform mat4 matrix_viewInverse;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform float numParticles, numParticlesPot;\\nuniform float graphSampleSize;\\nuniform float graphNumSamples;\\nuniform float stretch;\\nuniform vec3 wrapBounds;\\nuniform vec3 emitterScale, emitterPos, faceTangent, faceBinorm;\\nuniform float rate, rateDiv, lifetime, deltaRandomnessStatic, scaleDivMult, alphaDivMult, seed, delta;\\nuniform sampler2D particleTexOUT, particleTexIN;\\nuniform highp sampler2D internalTex0;\\nuniform highp sampler2D internalTex1;\\nuniform highp sampler2D internalTex2;\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\nvarying vec4 texCoordsAlphaLife;\\nvec3 inPos;\\nvec3 inVel;\\nfloat inAngle;\\nbool inShow;\\nfloat inLife;\\n\";\n\nvar particle_lambertPS = \"\\tvec3 negNormal = max(normal, vec3(0.0));\\n\\tvec3 posNormal = max(-normal, vec3(0.0));\\n\";\n\nvar particle_lightingPS = \"\\tvec3 light = negNormal.x*lightCube[0] + posNormal.x*lightCube[1] +\\n\\t\\t\\t\\t\\t\\tnegNormal.y*lightCube[2] + posNormal.y*lightCube[3] +\\n\\t\\t\\t\\t\\t\\tnegNormal.z*lightCube[4] + posNormal.z*lightCube[5];\\n\\trgb *= light;\\n\";\n\nvar particle_localShiftVS = \"\\tparticlePos = (matrix_model * vec4(particlePos, 1.0)).xyz;\\n\";\n\nvar particle_meshVS = \"\\tvec3 localPos = meshLocalPos;\\n\\tlocalPos.xy = rotate(localPos.xy, inAngle, rotMatrix);\\n\\tlocalPos.yz = rotate(localPos.yz, inAngle, rotMatrix);\\n\\tbillboard(particlePos, quadXY);\\n\";\n\nvar particle_normalVS = \"\\tNormal = normalize(localPos + matrix_viewInverse[2].xyz);\\n\";\n\nvar particle_normalMapPS = \"\\tvec3 normalMap = normalize(texture2D(normalMap, vec2(texCoordsAlphaLife.x, 1.0 - texCoordsAlphaLife.y)).xyz * 2.0 - 1.0);\\n\\tvec3 normal = ParticleMat * normalMap;\\n\";\n\nvar particle_pointAlongVS = \"\\tinAngle = atan(velocityV.x, velocityV.y);\\n\";\n\nvar particle_softPS = \"\\tfloat depth = getLinearScreenDepth();\\n\\tfloat particleDepth = vDepth;\\n\\tfloat depthDiff = saturate(abs(particleDepth - depth) * softening);\\n\\ta *= depthDiff;\\n\";\n\nvar particle_softVS = \"\\tvDepth = getLinearDepth(localPos);\\n\";\n\nvar particle_stretchVS = \"\\tvec3 moveDir = inVel * stretch;\\n\\tvec3 posPrev = particlePos - moveDir;\\n\\tposPrev += particlePosMoved;\\n\\tvec2 centerToVertexV = normalize((mat3(matrix_view) * localPos).xy);\\n\\tfloat interpolation = dot(-velocityV, centerToVertexV) * 0.5 + 0.5;\\n\\tparticlePos = mix(particlePos, posPrev, interpolation);\\n\";\n\nvar particle_TBNVS = \"\\tmat3 rot3 = mat3(rotMatrix[0][0], rotMatrix[0][1], 0.0, rotMatrix[1][0], rotMatrix[1][1], 0.0, 0.0, 0.0, 1.0);\\n\\tParticleMat = mat3(-matrix_viewInverse[0].xyz, -matrix_viewInverse[1].xyz, matrix_viewInverse[2].xyz) * rot3;\\n\";\n\nvar particle_wrapVS = \"\\tvec3 origParticlePos = particlePos;\\n\\tparticlePos -= matrix_model[3].xyz;\\n\\tparticlePos = mod(particlePos, wrapBounds) - wrapBounds * 0.5;\\n\\tparticlePos += matrix_model[3].xyz;\\n\\tparticlePosMoved = particlePos - origParticlePos;\\n\";\n\nvar precisionTestPS = \"void main(void) {\\n\\tgl_FragColor = vec4(2147483648.0);\\n}\\n\";\n\nvar precisionTest2PS = \"uniform sampler2D source;\\nvec4 packFloat(float depth) {\\n\\tconst vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\\n\\tconst vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\\n\\tvec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\\n\\tres -= res.xxyz * bit_mask;\\n\\treturn res;\\n}\\nvoid main(void) {\\n\\tfloat c = texture2D(source, vec2(0.0)).r;\\n\\tfloat diff = abs(c - 2147483648.0) / 2147483648.0;\\n\\tgl_FragColor = packFloat(diff);\\n}\\n\";\n\nvar prefilterCubemapPS = \"varying vec2 vUv0;\\nuniform samplerCube source;\\nuniform vec4 params;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nfloat rnd(vec2 uv) {\\n\\treturn fract(sin(dot(uv, vec2(12.9898, 78.233) * 2.0)) * 43758.5453);\\n}\\nconst float PI = 3.14159265358979;\\nvec3 hemisphereSample_cos(vec2 uv, mat3 vecSpace, vec3 cubeDir, float gloss) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = sqrt(1.0 - uv.x);\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n\\treturn normalize(mix(vecSpace * sampleDir, cubeDir, params.y));\\n}\\nvec3 hemisphereSample_phong(vec2 uv, mat3 vecSpace, vec3 cubeDir, float specPow) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n\\treturn vecSpace * sampleDir;\\n}\\nmat3 matrixFromVector(vec3 n) {\\n\\tfloat a = 1.0 / (1.0 + n.z);\\n\\tfloat b = -n.x * n.y * a;\\n\\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\\n\\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\\n\\treturn mat3(b1, b2, n);\\n}\\nvec4 encodeRGBM(vec3 color) {\\n\\tvec4 encoded;\\n\\tencoded.rgb = pow(color.rgb, vec3(0.5));\\n\\tencoded.rgb *= 1.0 / 8.0;\\n\\tencoded.a = saturate( max( max( encoded.r, encoded.g ), max( encoded.b, 1.0 / 255.0 ) ) );\\n\\tencoded.a = ceil(encoded.a * 255.0) / 255.0;\\n\\tencoded.rgb /= encoded.a;\\n\\treturn encoded;\\n}\\nvoid main(void) {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tif (params.w==1.0 || params.w==3.0) {\\n\\t\\tst = 2.0 * floor(gl_FragCoord.xy) / (params.z - 1.0) - 1.0;\\n\\t}\\n\\tfloat face = params.x;\\n\\tvec3 vec;\\n\\tif (face==0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face==1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face==2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face==3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face==4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\tmat3 vecSpace = matrixFromVector(normalize(vec));\\n\\tvec3 color = vec3(0.0);\\n\\tconst int samples = $NUMSAMPLES;\\n\\tvec3 vect;\\n\\tfor(int i=0; i<samples; i++) {\\n\\t\\tfloat sini = sin(float(i));\\n\\t\\tfloat cosi = cos(float(i));\\n\\t\\tfloat rand = rnd(vec2(sini, cosi));\\n\\t\\tvect = hemisphereSample_$METHOD(vec2(float(i) / float(samples), rand), vecSpace, vec, params.y);\\n\\t\\tcolor += $textureCube(source, vect).rgb;\\n\\t}\\n\\tcolor /= float(samples);\\n\\tgl_FragColor = params.w < 2.0? vec4(color, 1.0) : encodeRGBM(color);\\n}\\n\";\n\nvar reflDirPS = \"void getReflDir() {\\n\\tdReflDirW = normalize(-reflect(dViewDirW, dNormalW));\\n}\\n\";\n\nvar reflDirAnisoPS = \"void getReflDir() {\\n\\tfloat roughness = sqrt(1.0 - min(dGlossiness, 1.0));\\n\\tfloat anisotropy = material_anisotropy * roughness;\\n\\tvec3 anisotropicDirection = anisotropy >= 0.0 ? dTBN[1] : dTBN[0];\\n\\tvec3 anisotropicTangent = cross(anisotropicDirection, dViewDirW);\\n\\tvec3 anisotropicNormal = cross(anisotropicTangent, anisotropicDirection);\\n\\tvec3 bentNormal = normalize(mix(normalize(dNormalW), normalize(anisotropicNormal), anisotropy));\\n\\tdReflDirW = reflect(-dViewDirW, bentNormal);\\n}\\n\";\n\nvar reflectionCCPS = \"#ifdef CLEARCOAT\\nuniform float material_clearCoatReflectivity;\\nvoid addReflectionCC() {\\n\\tccReflection += vec4(calcReflection(ccReflDirW, ccGlossiness), material_clearCoatReflectivity);\\n}\\n#endif\\n\";\n\nvar reflectionCubePS = \"uniform samplerCube texture_cubeMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 lookupVec = fixSeams(cubeMapProject(tReflDirW));\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tlookupVec.x *= -1.0;\\n#endif\\n\\treturn $textureCubeSAMPLE(texture_cubeMap, lookupVec).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionDpAtlasPS = \"uniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec2 getDpAtlasUv(vec2 uv, float mip) {\\n\\tvec4 rect;\\n\\tfloat sx = saturate(mip - 2.0);\\n\\trect.x = sx * 0.5;\\n\\tfloat t = mip - rect.x * 6.0;\\n\\tfloat i = 1.0 - rect.x;\\n\\trect.y = min(t * 0.5, 0.75) * i + rect.x;\\n\\tfloat st = saturate(t);\\n\\trect.z = (1.0 - st * 0.5) * i;\\n\\trect.w = rect.z * 0.5;\\n\\tfloat rcRectZ = 1.0 / rect.z;\\n\\tfloat scaleFactor = 0.00390625 * rcRectZ;\\n\\tvec2 scale = vec2(scaleFactor, scaleFactor * 2.0);\\n\\tuv = uv * (vec2(1.0) - scale) + scale * 0.5;\\n\\tuv = uv * rect.zw + rect.xy;\\n\\treturn uv;\\n}\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDir = normalize(cubeMapProject(tReflDirW));\\n\\tbool up = reflDir.y > 0.0;\\n\\tfloat scale = 0.90909090909090909090909090909091;\\n\\tvec3 reflDirWarp = reflDir.xzx * vec3(-0.25, 0.5, 0.25);\\n\\tfloat reflDirVer = abs(reflDir.y) + 1.0;\\n\\treflDirWarp /= reflDirVer;\\n\\treflDirWarp *= scale;\\n\\treflDirWarp = vec3(0.75, 0.5, 0.25) - reflDirWarp;\\n\\tvec2 tc = up? reflDirWarp.xy : reflDirWarp.zy;\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tfloat mip = floor(bias);\\n\\tvec3 tex1 = $texture2DSAMPLE(texture_sphereMap, getDpAtlasUv(tc, mip)).rgb;\\n\\tmip = min(mip + 1.0, 5.0);\\n\\tvec3 tex2 = $texture2DSAMPLE(texture_sphereMap, getDpAtlasUv(tc, mip)).rgb;\\n\\ttex1 = mix(tex1, tex2, fract(bias));\\n\\ttex1 = processEnvironment(tex1);\\n\\treturn tex1;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionPrefilteredCubePS = \"uniform samplerCube texture_prefilteredCubeMap128;\\nuniform samplerCube texture_prefilteredCubeMap64;\\nuniform samplerCube texture_prefilteredCubeMap32;\\nuniform samplerCube texture_prefilteredCubeMap16;\\nuniform samplerCube texture_prefilteredCubeMap8;\\n#ifndef PMREM4\\n#define PMREM4\\nuniform samplerCube texture_prefilteredCubeMap4;\\n#endif\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 refl = cubeMapProject(tReflDirW);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\trefl.x *= -1.0;\\n#endif\\n\\tvec3 seam = calcSeam(refl);\\n\\tvec4 c0 = textureCube(texture_prefilteredCubeMap128, applySeam(refl, seam, 1.0 / 128.0));\\n\\tvec4 c1 = textureCube(texture_prefilteredCubeMap64, applySeam(refl, seam, 2.0 / 128.0));\\n\\tvec4 c2 = textureCube(texture_prefilteredCubeMap32, applySeam(refl, seam, 4.0 / 128.0));\\n\\tvec4 c3 = textureCube(texture_prefilteredCubeMap16, applySeam(refl, seam, 8.0 / 128.0));\\n\\tvec4 c4 = textureCube(texture_prefilteredCubeMap8, applySeam(refl, seam, 16.0 / 128.0));\\n\\tvec4 c5 = textureCube(texture_prefilteredCubeMap4, applySeam(refl, seam, 32.0 / 128.0));\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tvec4 cubes0;\\n\\tvec4 cubes1;\\n\\tif (bias < 1.0) {\\n\\t\\tcubes0 = c0;\\n\\t\\tcubes1 = c1;\\n\\t} else if (bias < 2.0) {\\n\\t\\tcubes0 = c1;\\n\\t\\tcubes1 = c2;\\n\\t} else if (bias < 3.0) {\\n\\t\\tcubes0 = c2;\\n\\t\\tcubes1 = c3;\\n\\t} else if (bias < 4.0) {\\n\\t\\tcubes0 = c3;\\n\\t\\tcubes1 = c4;\\n\\t} else {\\n\\t\\tcubes0 = c4;\\n\\t\\tcubes1 = c5;\\n\\t}\\n\\tvec4 cubeFinal = mix(cubes0, cubes1, fract(bias));\\n\\treturn processEnvironment($DECODE(cubeFinal).rgb);\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionPrefilteredCubeLodPS = \"#ifndef PMREM4\\n#define PMREM4\\n#ifndef GL2\\n#extension GL_EXT_shader_texture_lod : enable\\n#endif\\nuniform samplerCube texture_prefilteredCubeMap128;\\n#endif\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tfloat bias = saturate(1.0 - tGlossiness) * 5.0;\\n\\tvec3 fixedReflDir = fixSeams(cubeMapProject(tReflDirW), bias);\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tfixedReflDir.x *= -1.0;\\n#endif\\n\\tvec3 refl = processEnvironment($DECODE( textureCubeLodEXT(texture_prefilteredCubeMap128, fixedReflDir, bias) ).rgb);\\n\\treturn refl;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionSpherePS = \"#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDirV = (mat3(matrix_view) * tReflDirW).xyz;\\n\\tfloat m = 2.0 * sqrt( dot(reflDirV.xy, reflDirV.xy) + (reflDirV.z+1.0)*(reflDirV.z+1.0) );\\n\\tvec2 sphereMapUv = reflDirV.xy / m + 0.5;\\n\\treturn $texture2DSAMPLE(texture_sphereMap, sphereMapUv).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar reflectionSphereLowPS = \"uniform sampler2D texture_sphereMap;\\nuniform float material_reflectivity;\\nvec3 calcReflection(vec3 tReflDirW, float tGlossiness) {\\n\\tvec3 reflDirV = vNormalV;\\n\\tvec2 sphereMapUv = reflDirV.xy * 0.5 + 0.5;\\n\\treturn $texture2DSAMPLE(texture_sphereMap, sphereMapUv).rgb;\\n}\\nvoid addReflection() {\\n\\tdReflection += vec4(calcReflection(dReflDirW, dGlossiness), material_reflectivity);\\n}\\n\";\n\nvar refractionPS = \"uniform float material_refraction, material_refractionIndex;\\nvec3 refract2(vec3 viewVec, vec3 Normal, float IOR) {\\n\\tfloat vn = dot(viewVec, Normal);\\n\\tfloat k = 1.0 - IOR * IOR * (1.0 - vn * vn);\\n\\tvec3 refrVec = IOR * viewVec - (IOR * vn + sqrt(k)) * Normal;\\n\\treturn refrVec;\\n}\\nvoid addRefraction() {\\n\\tvec3 tmp = dReflDirW;\\n\\tvec4 tmp2 = dReflection;\\n\\tdReflection = vec4(0.0);\\n\\tdReflDirW = refract2(-dViewDirW, dNormalW, material_refractionIndex);\\n\\taddReflection();\\n\\tdDiffuseLight = mix(dDiffuseLight, dReflection.rgb * dAlbedo, material_refraction);\\n\\tdReflDirW = tmp;\\n\\tdReflection = tmp2;\\n}\\n\";\n\nvar reprojectPS = \"\\nvarying vec2 vUv0;\\nuniform sampler2D sourceTex;\\nuniform samplerCube sourceCube;\\nuniform vec4 params;\\nfloat targetFace() { return params.x; }\\nfloat specularPower() { return params.y; }\\nfloat sourceCubeSeamScale() { return params.z; }\\nfloat targetCubeSeamScale() { return params.w; }\\nfloat PI = 3.141592653589793;\\nfloat saturate(float x) {\\n\\treturn clamp(x, 0.0, 1.0);\\n}\\nvec3 decodeLinear(vec4 source) {\\n\\treturn source.rgb;\\n}\\nvec4 encodeLinear(vec3 source) {\\n\\treturn vec4(source, 1.0);\\n}\\nvec3 decodeGamma(vec4 source) {\\n\\treturn pow(source.xyz, vec3(2.2));\\n}\\nvec4 encodeGamma(vec3 source) {\\n\\treturn vec4(pow(source + 0.0000001, vec3(1.0 / 2.2)), 1.0);\\n}\\nvec3 decodeRGBM(vec4 rgbm) {\\n\\tvec3 color = (8.0 * rgbm.a) * rgbm.rgb;\\n\\treturn color * color;\\n}\\nvec4 encodeRGBM(vec3 source) {\\n\\tvec4 result;\\n\\tresult.rgb = pow(source.rgb, vec3(0.5));\\n\\tresult.rgb *= 1.0 / 8.0;\\n\\tresult.a = saturate( max( max( result.r, result.g ), max( result.b, 1.0 / 255.0 ) ) );\\n\\tresult.a = ceil(result.a * 255.0) / 255.0;\\n\\tresult.rgb /= result.a;\\n\\treturn result;\\n}\\nvec3 decodeRGBE(vec4 source) {\\n\\tif (source.a == 0.0) {\\n\\t\\treturn vec3(0.0, 0.0, 0.0);\\n\\t} else {\\n\\t\\treturn source.xyz * pow(2.0, source.w * 255.0 - 128.0);\\n\\t}\\n}\\nvec4 encodeRGBE(vec3 source) {\\n\\tfloat maxVal = max(source.x, max(source.y, source.z));\\n\\tif (maxVal < 1e-32) {\\n\\t\\treturn vec4(0, 0, 0, 0);\\n\\t} else {\\n\\t\\tfloat e = ceil(log2(maxVal));\\n\\t\\treturn vec4(source / pow(2.0, e), (e + 128.0) / 255.0);\\n\\t}\\n}\\nvec3 modifySeams(vec3 dir, float amount) {\\n\\tif (amount != 1.0) {\\n\\t\\tvec3 adir = abs(dir);\\n\\t\\tfloat M = max(max(adir.x, adir.y), adir.z);\\n\\t\\tif (adir.x == M) {\\n\\t\\t\\tdir.y *= amount;\\n\\t\\t\\tdir.z *= amount;\\n\\t\\t}\\n\\t\\telse if (adir.y == M) {\\n\\t\\t\\tdir.x *= amount;\\n\\t\\t\\tdir.z *= amount;\\n\\t\\t} else {\\n\\t\\t\\tdir.x *= amount;\\n\\t\\t\\tdir.y *= amount;\\n\\t\\t}\\n\\t}\\n\\treturn dir;\\n}\\nvec2 toSpherical(vec3 dir) {\\n\\treturn vec2(atan(dir.z, dir.x), asin(dir.y));\\n}\\nvec3 fromSpherical(vec2 uv) {\\n\\treturn vec3(cos(uv.y) * cos(uv.x),\\n\\t\\t\\t\\tsin(uv.y),\\n\\t\\t\\t\\tcos(uv.y) * sin(uv.x));\\n}\\nvec4 sampleEquirect(vec2 sph) {\\n\\tvec2 uv = sph / vec2(PI * 2.0, PI) + 0.5;\\n\\treturn texture2D(sourceTex, vec2(uv.x, 1.0 - uv.y));\\n}\\nvec4 sampleEquirect(vec3 dir) {\\n\\treturn sampleEquirect(toSpherical(dir));\\n}\\nvec4 sampleCubemap(vec3 dir) {\\n\\treturn textureCube(sourceCube, modifySeams(dir, sourceCubeSeamScale()));\\n}\\nvec4 sampleCubemap(vec2 sph) {\\n\\treturn sampleCubemap(fromSpherical(sph));\\n}\\nvec3 getDirectionEquirect() {\\n\\treturn fromSpherical((vec2(vUv0.x, 1.0 - vUv0.y) * 2.0 - 1.0) * vec2(PI, PI * 0.5));\\n}\\nfloat signNotZero(float k){\\n\\treturn(k >= 0.0) ? 1.0 : -1.0;\\n}\\nvec2 signNotZero(vec2 v) {\\n\\treturn vec2(signNotZero(v.x), signNotZero(v.y));\\n}\\nvec3 octDecode(vec2 o) {\\n\\tvec3 v = vec3(o.x, 1.0 - abs(o.x) - abs(o.y), o.y);\\n\\tif (v.y < 0.0) {\\n\\t\\tv.xz = (1.0 - abs(v.zx)) * signNotZero(v.xz);\\n\\t}\\n\\treturn normalize(v);\\n}\\nvec3 getDirectionOctahedral() {\\n\\treturn octDecode(vec2(vUv0.x, 1.0 - vUv0.y) * 2.0 - 1.0);\\n}\\nvec2 octEncode(in vec3 v) {\\n\\tfloat l1norm = abs(v.x) + abs(v.y) + abs(v.z);\\n\\tvec2 result = v.xz * (1.0 / l1norm);\\n\\tif (v.y < 0.0) {\\n\\t\\tresult = (1.0 - abs(result.yx)) * signNotZero(result.xy);\\n\\t}\\n\\treturn result;\\n}\\nvec4 sampleOctahedral(vec3 dir) {\\n\\tvec2 uv = octEncode(dir) * 0.5 + 0.5;\\n\\treturn texture2D(sourceTex, vec2(uv.x, 1.0 - uv.y));\\n}\\nvec4 sampleOctahedral(vec2 sph) {\\n\\treturn sampleOctahedral(fromSpherical(sph));\\n}\\nvec3 getDirectionCubemap() {\\n\\tvec2 st = vUv0 * 2.0 - 1.0;\\n\\tfloat face = targetFace();\\n\\tvec3 vec;\\n\\tif (face == 0.0) {\\n\\t\\tvec = vec3(1, -st.y, -st.x);\\n\\t} else if (face == 1.0) {\\n\\t\\tvec = vec3(-1, -st.y, st.x);\\n\\t} else if (face == 2.0) {\\n\\t\\tvec = vec3(st.x, 1, st.y);\\n\\t} else if (face == 3.0) {\\n\\t\\tvec = vec3(st.x, -1, -st.y);\\n\\t} else if (face == 4.0) {\\n\\t\\tvec = vec3(st.x, -st.y, 1);\\n\\t} else {\\n\\t\\tvec = vec3(-st.x, -st.y, -1);\\n\\t}\\n\\treturn normalize(modifySeams(vec, 1.0 / targetCubeSeamScale()));\\n}\\nmat3 matrixFromVector(vec3 n) {\\n\\tfloat a = 1.0 / (1.0 + n.z);\\n\\tfloat b = -n.x * n.y * a;\\n\\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\\n\\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\\n\\treturn mat3(b1, b2, n);\\n}\\nmat3 matrixFromVectorSlow(vec3 n) {\\n\\tvec3 a = normalize(cross(n, vec3(0, 1, 0)));\\n\\tvec3 b = cross(n, a);\\n\\treturn mat3(a, b, n);\\n}\\nfloat rnd(int i) {\\n\\tfloat sini = sin(float(i));\\n\\tfloat cosi = cos(float(i));\\n\\treturn fract(sin(dot(vec2(sini, cosi), vec2(12.9898, 78.233) * 2.0)) * 43758.5453);\\n}\\nvec3 hemisphereSamplePhong(vec2 uv, float specPow) {\\n\\tfloat phi = uv.y * 2.0 * PI;\\n\\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\\n\\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\treturn vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n}\\nvec4 reproject() {\\n\\tif (NUM_SAMPLES <= 1) {\\n\\t\\treturn ENCODE_FUNC(DECODE_FUNC(SOURCE_FUNC(TARGET_FUNC())));\\n\\t} else {\\n\\t\\tvec2 sph = toSpherical(TARGET_FUNC());\\n\\t\\tvec2 sphu = dFdx(sph);\\n\\t\\tvec2 sphv = dFdy(sph);\\n\\t\\tvec3 result = vec3(0.0);\\n\\t\\tfor (float u = 0.0; u < NUM_SAMPLES_SQRT; ++u) {\\n\\t\\t\\tfor (float v = 0.0; v < NUM_SAMPLES_SQRT; ++v) {\\n\\t\\t\\t\\tresult += DECODE_FUNC(SOURCE_FUNC(sph +\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  sphu * (u / NUM_SAMPLES_SQRT - 0.5) +\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t  sphv * (v / NUM_SAMPLES_SQRT - 0.5)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn ENCODE_FUNC(result / (NUM_SAMPLES_SQRT * NUM_SAMPLES_SQRT));\\n\\t}\\n}\\nvec4 prefilter() {\\n\\tvec3 vec = TARGET_FUNC();\\n\\tmat3 vecSpace = matrixFromVectorSlow(vec);\\n\\tvec3 result = vec3(0.0);\\n\\tfor (int i=0; i<NUM_SAMPLES; ++i) {\\n\\t\\tvec2 uv = vec2(float(i) / float(NUM_SAMPLES), rnd(i));\\n\\t\\tvec3 dir = vecSpace * hemisphereSamplePhong(uv, specularPower());\\n\\t\\tresult += DECODE_FUNC(SOURCE_FUNC(dir));\\n\\t}\\n\\treturn ENCODE_FUNC(result / float(NUM_SAMPLES));\\n}\\nvoid main(void) {\\n\\tgl_FragColor = PROCESS_FUNC();\\n}\\n\";\n\nvar rgbmPS = \"vec3 decodeRGBM(vec4 rgbm) {\\n\\tvec3 color = (8.0 * rgbm.a) * rgbm.rgb;\\n\\treturn color * color;\\n}\\nvec3 texture2DRGBM(sampler2D tex, vec2 uv) {\\n\\treturn decodeRGBM(texture2D(tex, uv));\\n}\\nvec3 textureCubeRGBM(samplerCube tex, vec3 uvw) {\\n\\treturn decodeRGBM(textureCube(tex, uvw));\\n}\\n\";\n\nvar screenDepthPS = \"uniform sampler2D uDepthMap;\\n#ifndef SCREENSIZE\\n#define SCREENSIZE\\nuniform vec4 uScreenSize;\\n#endif\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\n#ifndef CAMERAPLANES\\n#define CAMERAPLANES\\nuniform vec4 camera_params;\\n#endif\\n#ifdef GL2\\nfloat linearizeDepth(float z) {\\n\\tz = z * 2.0 - 1.0;\\n\\treturn 1.0 / (camera_params.z * z + camera_params.w);\\n}\\n#else\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\treturn dot(rgbaDepth, bitShift);\\n}\\n#endif\\n#endif\\nfloat getLinearScreenDepth(vec2 uv) {\\n\\t#ifdef GL2\\n\\treturn linearizeDepth(texture2D(uDepthMap, uv).r) * camera_params.y;\\n\\t#else\\n\\treturn unpackFloat(texture2D(uDepthMap, uv)) * camera_params.y;\\n\\t#endif\\n}\\n#ifndef VERTEXSHADER\\nfloat getLinearScreenDepth() {\\n\\tvec2 uv = gl_FragCoord.xy * uScreenSize.zw;\\n\\treturn getLinearScreenDepth(uv);\\n}\\n#endif\\nfloat getLinearDepth(vec3 pos) {\\n\\treturn -(matrix_view * vec4(pos, 1.0)).z;\\n}\\n\";\n\nvar shadowCascadesPS = \"const float maxCascades = 4.0;\\nmat4 cascadeShadowMat;\\nvoid getShadowCascadeMatrix(mat4 shadowMatrixPalette[4], float shadowCascadeDistances[4], float shadowCascadeCount) {\\n\\tfloat depth = 1.0 / gl_FragCoord.w;\\n\\tfloat cascadeIndex = 0.0;\\n\\tfor (float i = 0.0; i < maxCascades; i++) {\\n\\t\\tif (depth < shadowCascadeDistances[int(i)]) {\\n\\t\\t\\tcascadeIndex = i;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n\\tcascadeIndex = min(cascadeIndex, shadowCascadeCount - 1.0);\\n\\t#ifdef GL2\\n\\t\\tcascadeShadowMat = shadowMatrixPalette[int(cascadeIndex)];\\n\\t#else\\n\\t\\tif (cascadeIndex == 0.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[0];\\n\\t\\t}\\n\\t\\telse if (cascadeIndex == 1.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[1];\\n\\t\\t}\\n\\t\\telse if (cascadeIndex == 2.0) {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[2];\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tcascadeShadowMat = shadowMatrixPalette[3];\\n\\t\\t}\\n\\t#endif\\n}\\nvoid fadeShadow(float shadowCascadeDistances[4]) {\\n\\tfloat depth = 1.0 / gl_FragCoord.w;\\n\\tif (depth > shadowCascadeDistances[int(maxCascades - 1.0)]) {\\n\\t\\tdShadowCoord.z = -9999999.0;\\n\\t}\\n}\\n\";\n\nvar shadowCommonPS = \"void normalOffsetPointShadow(vec4 shadowParams) {\\n\\tfloat distScale = length(dLightDirW);\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\tvec3 dir = wPos - dLightPosW;\\n\\tdLightDirW = dir;\\n}\\n\";\n\nvar shadowCoordPS = \"void _getShadowCoordOrtho(mat4 shadowMatrix, vec3 shadowParams, vec3 wPos) {\\n\\tdShadowCoord = (shadowMatrix * vec4(wPos, 1.0)).xyz;\\n\\tdShadowCoord.z = saturate(dShadowCoord.z) - 0.0001;\\n\\t#ifdef SHADOWBIAS\\n\\tdShadowCoord.z += getShadowBias(shadowParams.x, shadowParams.z);\\n\\t#endif\\n}\\nvoid _getShadowCoordPersp(mat4 shadowMatrix, vec4 shadowParams, vec3 wPos) {\\n\\tvec4 projPos = shadowMatrix * vec4(wPos, 1.0);\\n\\tprojPos.xy /= projPos.w;\\n\\tdShadowCoord.xy = projPos.xy;\\n\\tdShadowCoord.z = length(dLightDirW) * shadowParams.w;\\n\\t#ifdef SHADOWBIAS\\n\\tdShadowCoord.z += getShadowBias(shadowParams.x, shadowParams.z);\\n\\t#endif\\n}\\nvoid getShadowCoordOrtho(mat4 shadowMatrix, vec3 shadowParams) {\\n\\t_getShadowCoordOrtho(shadowMatrix, shadowParams, vPositionW);\\n}\\nvoid getShadowCoordPersp(mat4 shadowMatrix, vec4 shadowParams) {\\n\\t_getShadowCoordPersp(shadowMatrix, shadowParams, vPositionW);\\n}\\nvoid getShadowCoordPerspNormalOffset(mat4 shadowMatrix, vec4 shadowParams) {\\n\\tfloat distScale = abs(dot(vPositionW - dLightPosW, dLightDirNormW));\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\t_getShadowCoordPersp(shadowMatrix, shadowParams, wPos);\\n}\\nvoid getShadowCoordOrthoNormalOffset(mat4 shadowMatrix, vec3 shadowParams) {\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0);\\n\\t_getShadowCoordOrtho(shadowMatrix, shadowParams, wPos);\\n}\\n\";\n\nvar shadowCoordPerspZbufferPS = \"void _getShadowCoordPerspZbuffer(mat4 shadowMatrix, vec4 shadowParams, vec3 wPos) {\\n\\tvec4 projPos = shadowMatrix * vec4(wPos, 1.0);\\n\\tprojPos.xyz /= projPos.w;\\n\\tdShadowCoord = projPos.xyz;\\n}\\nvoid getShadowCoordPerspZbufferNormalOffset(mat4 shadowMatrix, vec4 shadowParams) {\\n\\tfloat distScale = abs(dot(vPositionW - dLightPosW, dLightDirNormW));\\n\\tvec3 wPos = vPositionW + dVertexNormalW * shadowParams.y * clamp(1.0 - dot(dVertexNormalW, -dLightDirNormW), 0.0, 1.0) * distScale;\\n\\t_getShadowCoordPerspZbuffer(shadowMatrix, shadowParams, wPos);\\n}\\nvoid getShadowCoordPerspZbuffer(mat4 shadowMatrix, vec4 shadowParams) {\\n\\t_getShadowCoordPerspZbuffer(shadowMatrix, shadowParams, vPositionW);\\n}\\n\";\n\nvar shadowEVSMPS = \"float VSM$(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tvec3 moments = texture2D(tex, texCoords).xyz;\\n\\treturn calculateEVSM(moments, Z, vsmBias, exponent);\\n}\\nfloat getShadowVSM$(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, exponent);\\n}\\nfloat getShadowSpotVSM$(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, exponent);\\n}\\n\";\n\nvar shadowEVSMnPS = \"float VSM$(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tfloat pixelSize = 1.0 / resolution;\\n\\ttexCoords -= vec2(pixelSize);\\n\\tvec3 s00 = texture2D(tex, texCoords).xyz;\\n\\tvec3 s10 = texture2D(tex, texCoords + vec2(pixelSize, 0)).xyz;\\n\\tvec3 s01 = texture2D(tex, texCoords + vec2(0, pixelSize)).xyz;\\n\\tvec3 s11 = texture2D(tex, texCoords + vec2(pixelSize)).xyz;\\n\\tvec2 fr = fract(texCoords * resolution);\\n\\tvec3 h0 = mix(s00, s10, fr.x);\\n\\tvec3 h1 = mix(s01, s11, fr.x);\\n\\tvec3 moments = mix(h0, h1, fr.y);\\n\\treturn calculateEVSM(moments, Z, vsmBias, exponent);\\n}\\nfloat getShadowVSM$(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, exponent);\\n}\\nfloat getShadowSpotVSM$(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM$(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, exponent);\\n}\\n\";\n\nvar shadowStandardPS = \"vec3 lessThan2(vec3 a, vec3 b) {\\n\\treturn clamp((b - a)*1000.0, 0.0, 1.0);\\n}\\n#ifndef UNPACKFLOAT\\n#define UNPACKFLOAT\\nfloat unpackFloat(vec4 rgbaDepth) {\\n\\tconst vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\\n\\treturn dot(rgbaDepth, bitShift);\\n}\\n#endif\\n#ifdef GL2\\nfloat _getShadowPCF3x3(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\tfloat z = dShadowCoord.z;\\n\\tvec2 uv = dShadowCoord.xy * shadowParams.x;\\n\\tfloat shadowMapSizeInv = 1.0 / shadowParams.x;\\n\\tvec2 base_uv = floor(uv + 0.5);\\n\\tfloat s = (uv.x + 0.5 - base_uv.x);\\n\\tfloat t = (uv.y + 0.5 - base_uv.y);\\n\\tbase_uv -= vec2(0.5);\\n\\tbase_uv *= shadowMapSizeInv;\\n\\tfloat sum = 0.0;\\n\\tfloat uw0 = (3.0 - 2.0 * s);\\n\\tfloat uw1 = (1.0 + 2.0 * s);\\n\\tfloat u0 = (2.0 - s) / uw0 - 1.0;\\n\\tfloat u1 = s / uw1 + 1.0;\\n\\tfloat vw0 = (3.0 - 2.0 * t);\\n\\tfloat vw1 = (1.0 + 2.0 * t);\\n\\tfloat v0 = (2.0 - t) / vw0 - 1.0;\\n\\tfloat v1 = t / vw1 + 1.0;\\n\\tu0 = u0 * shadowMapSizeInv + base_uv.x;\\n\\tv0 = v0 * shadowMapSizeInv + base_uv.y;\\n\\tu1 = u1 * shadowMapSizeInv + base_uv.x;\\n\\tv1 = v1 * shadowMapSizeInv + base_uv.y;\\n\\tsum += uw0 * vw0 * texture(shadowMap, vec3(u0, v0, z));\\n\\tsum += uw1 * vw0 * texture(shadowMap, vec3(u1, v0, z));\\n\\tsum += uw0 * vw1 * texture(shadowMap, vec3(u0, v1, z));\\n\\tsum += uw1 * vw1 * texture(shadowMap, vec3(u1, v1, z));\\n\\tsum *= 1.0f / 16.0;\\n\\treturn sum;\\n}\\nfloat getShadowPCF3x3(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF3x3(sampler2DShadow shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams.xyz);\\n}\\n#else\\nfloat _xgetShadowPCF3x3(mat3 depthKernel, sampler2D shadowMap, vec3 shadowParams) {\\n\\tmat3 shadowKernel;\\n\\tvec3 shadowCoord = dShadowCoord;\\n\\tvec3 shadowZ = vec3(shadowCoord.z);\\n\\tshadowKernel[0] = vec3(greaterThan(depthKernel[0], shadowZ));\\n\\tshadowKernel[1] = vec3(greaterThan(depthKernel[1], shadowZ));\\n\\tshadowKernel[2] = vec3(greaterThan(depthKernel[2], shadowZ));\\n\\tvec2 fractionalCoord = fract( shadowCoord.xy * shadowParams.x );\\n\\tshadowKernel[0] = mix(shadowKernel[0], shadowKernel[1], fractionalCoord.x);\\n\\tshadowKernel[1] = mix(shadowKernel[1], shadowKernel[2], fractionalCoord.x);\\n\\tvec4 shadowValues;\\n\\tshadowValues.x = mix(shadowKernel[0][0], shadowKernel[0][1], fractionalCoord.y);\\n\\tshadowValues.y = mix(shadowKernel[0][1], shadowKernel[0][2], fractionalCoord.y);\\n\\tshadowValues.z = mix(shadowKernel[1][0], shadowKernel[1][1], fractionalCoord.y);\\n\\tshadowValues.w = mix(shadowKernel[1][1], shadowKernel[1][2], fractionalCoord.y);\\n\\treturn dot( shadowValues, vec4( 1.0 ) ) * 0.25;\\n}\\nfloat _getShadowPCF3x3(sampler2D shadowMap, vec3 shadowParams) {\\n\\tvec3 shadowCoord = dShadowCoord;\\n\\tfloat xoffset = 1.0 / shadowParams.x;\\n\\tfloat dx0 = -xoffset;\\n\\tfloat dx1 = xoffset;\\n\\tmat3 depthKernel;\\n\\tdepthKernel[0][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, dx0)));\\n\\tdepthKernel[0][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, 0.0)));\\n\\tdepthKernel[0][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx0, dx1)));\\n\\tdepthKernel[1][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(0.0, dx0)));\\n\\tdepthKernel[1][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy));\\n\\tdepthKernel[1][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(0.0, dx1)));\\n\\tdepthKernel[2][0] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, dx0)));\\n\\tdepthKernel[2][1] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, 0.0)));\\n\\tdepthKernel[2][2] = unpackFloat(texture2D(shadowMap, shadowCoord.xy + vec2(dx1, dx1)));\\n\\treturn _xgetShadowPCF3x3(depthKernel, shadowMap, shadowParams);\\n}\\nfloat getShadowPCF3x3(sampler2D shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF3x3(sampler2D shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF3x3(shadowMap, shadowParams.xyz);\\n}\\n#endif\\nfloat _getShadowPoint(samplerCube shadowMap, vec4 shadowParams, vec3 dir) {\\n\\tvec3 tc = normalize(dir);\\n\\tvec3 tcAbs = abs(tc);\\n\\tvec4 dirX = vec4(1,0,0, tc.x);\\n\\tvec4 dirY = vec4(0,1,0, tc.y);\\n\\tfloat majorAxisLength = tc.z;\\n\\tif ((tcAbs.x > tcAbs.y) && (tcAbs.x > tcAbs.z)) {\\n\\t\\tdirX = vec4(0,0,1, tc.z);\\n\\t\\tdirY = vec4(0,1,0, tc.y);\\n\\t\\tmajorAxisLength = tc.x;\\n\\t} else if ((tcAbs.y > tcAbs.x) && (tcAbs.y > tcAbs.z)) {\\n\\t\\tdirX = vec4(1,0,0, tc.x);\\n\\t\\tdirY = vec4(0,0,1, tc.z);\\n\\t\\tmajorAxisLength = tc.y;\\n\\t}\\n\\tfloat shadowParamsInFaceSpace = ((1.0/shadowParams.x) * 2.0) * abs(majorAxisLength);\\n\\tvec3 xoffset = (dirX.xyz * shadowParamsInFaceSpace);\\n\\tvec3 yoffset = (dirY.xyz * shadowParamsInFaceSpace);\\n\\tvec3 dx0 = -xoffset;\\n\\tvec3 dy0 = -yoffset;\\n\\tvec3 dx1 = xoffset;\\n\\tvec3 dy1 = yoffset;\\n\\tmat3 shadowKernel;\\n\\tmat3 depthKernel;\\n\\tdepthKernel[0][0] = unpackFloat(textureCube(shadowMap, tc + dx0 + dy0));\\n\\tdepthKernel[0][1] = unpackFloat(textureCube(shadowMap, tc + dx0));\\n\\tdepthKernel[0][2] = unpackFloat(textureCube(shadowMap, tc + dx0 + dy1));\\n\\tdepthKernel[1][0] = unpackFloat(textureCube(shadowMap, tc + dy0));\\n\\tdepthKernel[1][1] = unpackFloat(textureCube(shadowMap, tc));\\n\\tdepthKernel[1][2] = unpackFloat(textureCube(shadowMap, tc + dy1));\\n\\tdepthKernel[2][0] = unpackFloat(textureCube(shadowMap, tc + dx1 + dy0));\\n\\tdepthKernel[2][1] = unpackFloat(textureCube(shadowMap, tc + dx1));\\n\\tdepthKernel[2][2] = unpackFloat(textureCube(shadowMap, tc + dx1 + dy1));\\n\\tvec3 shadowZ = vec3(length(dir) * shadowParams.w + shadowParams.z);\\n\\tshadowKernel[0] = vec3(lessThan2(depthKernel[0], shadowZ));\\n\\tshadowKernel[1] = vec3(lessThan2(depthKernel[1], shadowZ));\\n\\tshadowKernel[2] = vec3(lessThan2(depthKernel[2], shadowZ));\\n\\tvec2 uv = (vec2(dirX.w, dirY.w) / abs(majorAxisLength)) * 0.5;\\n\\tvec2 fractionalCoord = fract( uv * shadowParams.x );\\n\\tshadowKernel[0] = mix(shadowKernel[0], shadowKernel[1], fractionalCoord.x);\\n\\tshadowKernel[1] = mix(shadowKernel[1], shadowKernel[2], fractionalCoord.x);\\n\\tvec4 shadowValues;\\n\\tshadowValues.x = mix(shadowKernel[0][0], shadowKernel[0][1], fractionalCoord.y);\\n\\tshadowValues.y = mix(shadowKernel[0][1], shadowKernel[0][2], fractionalCoord.y);\\n\\tshadowValues.z = mix(shadowKernel[1][0], shadowKernel[1][1], fractionalCoord.y);\\n\\tshadowValues.w = mix(shadowKernel[1][1], shadowKernel[1][2], fractionalCoord.y);\\n\\treturn 1.0 - dot( shadowValues, vec4( 1.0 ) ) * 0.25;\\n}\\nfloat getShadowPointPCF3x3(samplerCube shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPoint(shadowMap, shadowParams, dLightDirW);\\n}\\n\";\n\nvar shadowStandardGL2PS = \"float _getShadowPCF5x5(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\tfloat z = dShadowCoord.z;\\n\\tvec2 uv = dShadowCoord.xy * shadowParams.x;\\n\\tfloat shadowMapSizeInv = 1.0 / shadowParams.x;\\n\\tvec2 base_uv = floor(uv + 0.5);\\n\\tfloat s = (uv.x + 0.5 - base_uv.x);\\n\\tfloat t = (uv.y + 0.5 - base_uv.y);\\n\\tbase_uv -= vec2(0.5);\\n\\tbase_uv *= shadowMapSizeInv;\\n\\tfloat uw0 = (4.0 - 3.0 * s);\\n\\tfloat uw1 = 7.0;\\n\\tfloat uw2 = (1.0 + 3.0 * s);\\n\\tfloat u0 = (3.0 - 2.0 * s) / uw0 - 2.0;\\n\\tfloat u1 = (3.0 + s) / uw1;\\n\\tfloat u2 = s / uw2 + 2.0;\\n\\tfloat vw0 = (4.0 - 3.0 * t);\\n\\tfloat vw1 = 7.0;\\n\\tfloat vw2 = (1.0 + 3.0 * t);\\n\\tfloat v0 = (3.0 - 2.0 * t) / vw0 - 2.0;\\n\\tfloat v1 = (3.0 + t) / vw1;\\n\\tfloat v2 = t / vw2 + 2.0;\\n\\tfloat sum = 0.0;\\n\\tu0 = u0 * shadowMapSizeInv + base_uv.x;\\n\\tv0 = v0 * shadowMapSizeInv + base_uv.y;\\n\\tu1 = u1 * shadowMapSizeInv + base_uv.x;\\n\\tv1 = v1 * shadowMapSizeInv + base_uv.y;\\n\\tu2 = u2 * shadowMapSizeInv + base_uv.x;\\n\\tv2 = v2 * shadowMapSizeInv + base_uv.y;\\n\\tsum += uw0 * vw0 * texture(shadowMap, vec3(u0, v0, z));\\n\\tsum += uw1 * vw0 * texture(shadowMap, vec3(u1, v0, z));\\n\\tsum += uw2 * vw0 * texture(shadowMap, vec3(u2, v0, z));\\n\\tsum += uw0 * vw1 * texture(shadowMap, vec3(u0, v1, z));\\n\\tsum += uw1 * vw1 * texture(shadowMap, vec3(u1, v1, z));\\n\\tsum += uw2 * vw1 * texture(shadowMap, vec3(u2, v1, z));\\n\\tsum += uw0 * vw2 * texture(shadowMap, vec3(u0, v2, z));\\n\\tsum += uw1 * vw2 * texture(shadowMap, vec3(u1, v2, z));\\n\\tsum += uw2 * vw2 * texture(shadowMap, vec3(u2, v2, z));\\n\\tsum *= 1.0f / 144.0;\\n\\tsum = gammaCorrectInput(sum);\\n\\tsum = saturate(sum);\\n\\treturn sum;\\n}\\nfloat getShadowPCF5x5(sampler2DShadow shadowMap, vec3 shadowParams) {\\n\\treturn _getShadowPCF5x5(shadowMap, shadowParams);\\n}\\nfloat getShadowSpotPCF5x5(sampler2DShadow shadowMap, vec4 shadowParams) {\\n\\treturn _getShadowPCF5x5(shadowMap, shadowParams.xyz);\\n}\\n\";\n\nvar shadowVSM8PS = \"float calculateVSM8(vec3 moments, float Z, float vsmBias) {\\n\\tfloat VSMBias = vsmBias;\\n\\tfloat depthScale = VSMBias * Z;\\n\\tfloat minVariance1 = depthScale * depthScale;\\n\\treturn chebyshevUpperBound(moments.xy, Z, minVariance1, 0.1);\\n}\\nfloat decodeFloatRG(vec2 rg) {\\n\\treturn rg.y*(1.0/255.0) + rg.x;\\n}\\nfloat VSM8(sampler2D tex, vec2 texCoords, float resolution, float Z, float vsmBias, float exponent) {\\n\\tvec4 c = texture2D(tex, texCoords);\\n\\tvec3 moments = vec3(decodeFloatRG(c.xy), decodeFloatRG(c.zw), 0.0);\\n\\treturn calculateVSM8(moments, Z, vsmBias);\\n}\\nfloat getShadowVSM8(sampler2D shadowMap, vec3 shadowParams, float exponent) {\\n\\treturn VSM8(shadowMap, dShadowCoord.xy, shadowParams.x, dShadowCoord.z, shadowParams.y, 0.0);\\n}\\nfloat getShadowSpotVSM8(sampler2D shadowMap, vec4 shadowParams, float exponent) {\\n\\treturn VSM8(shadowMap, dShadowCoord.xy, shadowParams.x, length(dLightDirW) * shadowParams.w + shadowParams.z, shadowParams.y, 0.0);\\n}\\n\";\n\nvar shadowVSM_commonPS = \"float linstep(float a, float b, float v) {\\n\\treturn saturate((v - a) / (b - a));\\n}\\nfloat reduceLightBleeding(float pMax, float amount) {\\n   return linstep(amount, 1.0, pMax);\\n}\\nfloat chebyshevUpperBound(vec2 moments, float mean, float minVariance, float lightBleedingReduction) {\\n\\tfloat variance = moments.y - (moments.x * moments.x);\\n\\tvariance = max(variance, minVariance);\\n\\tfloat d = mean - moments.x;\\n\\tfloat pMax = variance / (variance + (d * d));\\n\\tpMax = reduceLightBleeding(pMax, lightBleedingReduction);\\n\\treturn (mean <= moments.x ? 1.0 : pMax);\\n}\\nfloat calculateEVSM(vec3 moments, float Z, float vsmBias, float exponent) {\\n\\tZ = 2.0 * Z - 1.0;\\n\\tfloat warpedDepth = exp(exponent * Z);\\n\\tmoments.xy += vec2(warpedDepth, warpedDepth*warpedDepth) * (1.0 - moments.z);\\n\\tfloat VSMBias = vsmBias;\\n\\tfloat depthScale = VSMBias * exponent * warpedDepth;\\n\\tfloat minVariance1 = depthScale * depthScale;\\n\\treturn chebyshevUpperBound(moments.xy, warpedDepth, minVariance1, 0.1);\\n}\\n\";\n\nvar skinBatchConstVS = \"attribute float vertex_boneIndices;\\nuniform vec4 matrix_pose[BONE_LIMIT * 3];\\nmat4 getBoneMatrix(const in float i) {\\n\\tvec4 v1 = matrix_pose[int(3.0 * i)];\\n\\tvec4 v2 = matrix_pose[int(3.0 * i + 1.0)];\\n\\tvec4 v3 = matrix_pose[int(3.0 * i + 2.0)];\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, 1\\n\\t);\\n}\\n\";\n\nvar skinBatchTexVS = \"attribute float vertex_boneIndices;\\nuniform highp sampler2D texture_poseMap;\\nuniform vec4 texture_poseMapSize;\\nmat4 getBoneMatrix(const in float i) {\\n\\tfloat j = i * 3.0;\\n\\tfloat dx = texture_poseMapSize.z;\\n\\tfloat dy = texture_poseMapSize.w;\\n\\tfloat y = floor(j * dx);\\n\\tfloat x = j - (y * texture_poseMapSize.x);\\n\\ty = dy * (y + 0.5);\\n\\tvec4 v1 = texture2D(texture_poseMap, vec2(dx * (x + 0.5), y));\\n\\tvec4 v2 = texture2D(texture_poseMap, vec2(dx * (x + 1.5), y));\\n\\tvec4 v3 = texture2D(texture_poseMap, vec2(dx * (x + 2.5), y));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, 1\\n\\t);\\n}\\n\";\n\nvar skinConstVS = \"attribute vec4 vertex_boneWeights;\\nattribute vec4 vertex_boneIndices;\\nuniform vec4 matrix_pose[BONE_LIMIT * 3];\\nvoid getBoneMatrix(const in float i, out vec4 v1, out vec4 v2, out vec4 v3) {\\n\\tv1 = matrix_pose[int(3.0 * i)];\\n\\tv2 = matrix_pose[int(3.0 * i + 1.0)];\\n\\tv3 = matrix_pose[int(3.0 * i + 2.0)];\\n}\\nmat4 getSkinMatrix(const in vec4 indices, const in vec4 weights) {\\n\\tvec4 a1, a2, a3;\\n\\tgetBoneMatrix(indices.x, a1, a2, a3);\\n\\tvec4 b1, b2, b3;\\n\\tgetBoneMatrix(indices.y, b1, b2, b3);\\n\\tvec4 c1, c2, c3;\\n\\tgetBoneMatrix(indices.z, c1, c2, c3);\\n\\tvec4 d1, d2, d3;\\n\\tgetBoneMatrix(indices.w, d1, d2, d3);\\n\\tvec4 v1 = a1 * weights.x + b1 * weights.y + c1 * weights.z + d1 * weights.w;\\n\\tvec4 v2 = a2 * weights.x + b2 * weights.y + c2 * weights.z + d2 * weights.w;\\n\\tvec4 v3 = a3 * weights.x + b3 * weights.y + c3 * weights.z + d3 * weights.w;\\n\\tfloat one = dot(weights, vec4(1.0));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, one\\n\\t);\\n}\\n\";\n\nvar skinTexVS = \"attribute vec4 vertex_boneWeights;\\nattribute vec4 vertex_boneIndices;\\nuniform highp sampler2D texture_poseMap;\\nuniform vec4 texture_poseMapSize;\\nvoid getBoneMatrix(const in float i, out vec4 v1, out vec4 v2, out vec4 v3) {\\n\\tfloat j = i * 3.0;\\n\\tfloat dx = texture_poseMapSize.z;\\n\\tfloat dy = texture_poseMapSize.w;\\n\\tfloat y = floor(j * dx);\\n\\tfloat x = j - (y * texture_poseMapSize.x);\\n\\ty = dy * (y + 0.5);\\n\\tv1 = texture2D(texture_poseMap, vec2(dx * (x + 0.5), y));\\n\\tv2 = texture2D(texture_poseMap, vec2(dx * (x + 1.5), y));\\n\\tv3 = texture2D(texture_poseMap, vec2(dx * (x + 2.5), y));\\n}\\nmat4 getSkinMatrix(const in vec4 indices, const in vec4 weights) {\\n\\tvec4 a1, a2, a3;\\n\\tgetBoneMatrix(indices.x, a1, a2, a3);\\n\\tvec4 b1, b2, b3;\\n\\tgetBoneMatrix(indices.y, b1, b2, b3);\\n\\tvec4 c1, c2, c3;\\n\\tgetBoneMatrix(indices.z, c1, c2, c3);\\n\\tvec4 d1, d2, d3;\\n\\tgetBoneMatrix(indices.w, d1, d2, d3);\\n\\tvec4 v1 = a1 * weights.x + b1 * weights.y + c1 * weights.z + d1 * weights.w;\\n\\tvec4 v2 = a2 * weights.x + b2 * weights.y + c2 * weights.z + d2 * weights.w;\\n\\tvec4 v3 = a3 * weights.x + b3 * weights.y + c3 * weights.z + d3 * weights.w;\\n\\tfloat one = dot(weights, vec4(1.0));\\n\\treturn mat4(\\n\\t\\tv1.x, v2.x, v3.x, 0,\\n\\t\\tv1.y, v2.y, v3.y, 0,\\n\\t\\tv1.z, v2.z, v3.z, 0,\\n\\t\\tv1.w, v2.w, v3.w, one\\n\\t);\\n}\\n\";\n\nvar skyboxPS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\nvoid main(void) {\\n\\tgl_FragColor = textureCube(texture_cubeMap, fixSeams(vViewDir));\\n}\\n\";\n\nvar skyboxVS = \"attribute vec3 aPosition;\\n#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nuniform mat4 matrix_projectionSkybox;\\nvarying vec3 vViewDir;\\nvoid main(void) {\\n\\tmat4 view = matrix_view;\\n\\tview[3][0] = view[3][1] = view[3][2] = 0.0;\\n\\tgl_Position = matrix_projectionSkybox * view * vec4(aPosition, 1.0);\\n\\tgl_Position.z = gl_Position.w - 0.00001;\\n\\tvViewDir = aPosition;\\n}\\n\";\n\nvar skyboxHDRPS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\n#ifdef CUBEMAP_ROTATION\\nuniform mat3 cubeMapRotationMatrix;\\n#endif\\nvoid main(void) {\\n#ifdef CUBEMAP_ROTATION\\n\\tvec3 dir=vViewDir * cubeMapRotationMatrix;\\n#else\\n\\tvec3 dir=vViewDir;\\n#endif\\n#ifndef RIGHT_HANDED_CUBEMAP\\n\\tdir.x *= -1.0;\\n#endif\\n\\tvec3 color = processEnvironment($textureCubeSAMPLE(texture_cubeMap, fixSeamsStatic(dir, $FIXCONST)).rgb);\\n\\tcolor = toneMap(color);\\n\\tcolor = gammaCorrectOutput(color);\\n\\tgl_FragColor = vec4(color, 1.0);\\n}\\n\";\n\nvar skyboxPrefilteredCubePS = \"varying vec3 vViewDir;\\nuniform samplerCube texture_cubeMap;\\nvec3 fixSeamsStretch(vec3 vec, float mipmapIndex, float cubemapSize) {\\n\\tfloat scale = 1.0 - exp2(mipmapIndex) / cubemapSize;\\n\\tfloat M = max(max(abs(vec.x), abs(vec.y)), abs(vec.z));\\n\\tif (abs(vec.x) != M) vec.x *= scale;\\n\\tif (abs(vec.y) != M) vec.y *= scale;\\n\\tif (abs(vec.z) != M) vec.z *= scale;\\n\\treturn vec;\\n}\\nvoid main(void) {\\n\\tvec3 color = textureCubeRGBM(texture_cubeMap, fixSeamsStretch(vViewDir, 0.0, 128.0));\\n\\tcolor = toneMap(color);\\n\\tcolor = gammaCorrectOutput(color);\\n\\tgl_FragColor = vec4(color, 1.0);\\n}\\n\";\n\nvar specularPS = \"#ifdef MAPCOLOR\\nuniform vec3 material_specular;\\n#endif\\n#ifdef MAPTEXTURE\\nuniform sampler2D texture_specularMap;\\n#endif\\nvoid getSpecularity() {\\n\\tdSpecularity = vec3(1.0);\\n\\t#ifdef MAPCOLOR\\n\\tdSpecularity *= material_specular;\\n\\t#endif\\n\\t#ifdef MAPTEXTURE\\n\\tdSpecularity *= texture2D(texture_specularMap, $UV).$CH;\\n\\t#endif\\n\\t#ifdef MAPVERTEX\\n\\tdSpecularity *= saturate(vVertexColor.$VC);\\n\\t#endif\\n}\\n\";\n\nvar specularAaNonePS = \"float antiAliasGlossiness(float power) {\\n\\treturn power;\\n}\\n\";\n\nvar specularAaToksvigPS = \"float antiAliasGlossiness(float power) {\\n\\tfloat rlen = 1.0 / saturate(length(dNormalMap));\\n\\tfloat toksvig = 1.0 / (1.0 + power * (rlen - 1.0));\\n\\treturn power * mix(1.0, toksvig, material_bumpiness);\\n}\\n\";\n\nvar specularAaToksvigFastPS = \"float antiAliasGlossiness(float power) {\\n\\tfloat rlen = 1.0 / saturate(length(dNormalMap));\\n\\tfloat toksvig = 1.0 / (1.0 + power * (rlen - 1.0));\\n\\treturn power * toksvig;\\n}\\n\";\n\nvar spotPS = \"float getSpotEffect(vec3 lightSpotDirW, float lightInnerConeAngle, float lightOuterConeAngle) {\\n\\tfloat cosAngle = dot(dLightDirNormW, lightSpotDirW);\\n\\treturn smoothstep(lightOuterConeAngle, lightInnerConeAngle, cosAngle);\\n}\\n\";\n\nvar startPS = \"void main(void) {\\n\\tdDiffuseLight = vec3(0);\\n\\tdSpecularLight = vec3(0);\\n\\tdReflection = vec4(0);\\n\\tdSpecularity = vec3(0);\\n\\t#ifdef CLEARCOAT\\n\\tccSpecularLight = vec3(0);\\n\\tccReflection = vec4(0);\\n\\t#endif\\n\";\n\nvar startVS = \"void main(void) {\\n\\tgl_Position = getPosition();\\n\";\n\nvar startNineSlicedPS = \"\\tnineSlicedUv = vUv0;\\n\\tnineSlicedUv.y = 1.0 - nineSlicedUv.y;\\n\";\n\nvar startNineSlicedTiledPS = \"\\tvec2 tileMask = step(vMask, vec2(0.99999));\\n\\tvec2 tileSize = 0.5 * (innerOffset.xy + innerOffset.zw);\\n\\tvec2 tileScale = vec2(1.0) / (vec2(1.0) - tileSize);\\n\\tvec2 clampedUv = mix(innerOffset.xy * 0.5, vec2(1.0) - innerOffset.zw * 0.5, fract((vTiledUv - tileSize) * tileScale));\\n\\tclampedUv = clampedUv * atlasRect.zw + atlasRect.xy;\\n\\tnineSlicedUv = vUv0 * tileMask + clampedUv * (vec2(1.0) - tileMask);\\n\\tnineSlicedUv.y = 1.0 - nineSlicedUv.y;\\n\";\n\nvar storeEVSMPS = \"float exponent = VSM_EXPONENT;\\ndepth = 2.0 * depth - 1.0;\\ndepth =  exp(exponent * depth);\\ngl_FragColor = vec4(depth, depth*depth, 1.0, 1.0);\\n\";\n\nvar tangentBinormalVS = \"vec3 getTangent() {\\n\\treturn normalize(dNormalMatrix * vertex_tangent.xyz);\\n}\\nvec3 getBinormal() {\\n\\treturn cross(vNormalW, vTangentW) * vertex_tangent.w;\\n}\\nvec3 getObjectSpaceUp() {\\n\\treturn normalize(dNormalMatrix * vec3(0, 1, 0));\\n}\\n\";\n\nvar TBNPS = \"void getTBN() {\\n\\tdTBN = mat3(normalize(dTangentW), normalize(dBinormalW), normalize(dVertexNormalW));\\n}\\n\";\n\nvar TBNderivativePS = \"\\nvoid getTBN() {\\n\\tvec2 uv = $UV;\\n\\tvec3 dp1 = dFdx( vPositionW );\\n\\tvec3 dp2 = dFdy( vPositionW );\\n\\tvec2 duv1 = dFdx( uv );\\n\\tvec2 duv2 = dFdy( uv );\\n\\tvec3 dp2perp = cross( dp2, dVertexNormalW );\\n\\tvec3 dp1perp = cross( dVertexNormalW, dp1 );\\n\\tvec3 T = dp2perp * duv1.x + dp1perp * duv2.x;\\n\\tvec3 B = dp2perp * duv1.y + dp1perp * duv2.y;\\n\\tfloat denom = max( dot(T,T), dot(B,B) );\\n\\tfloat invmax = (denom == 0.0) ? 0.0 : 1.0 / sqrt( denom );\\n\\tdTBN = mat3( T * invmax, -B * invmax, dVertexNormalW );\\n}\\n\";\n\nvar TBNfastPS = \"void getTBN() {\\n\\tdTBN = mat3(dTangentW, dBinormalW, dVertexNormalW);\\n}\\n\";\n\nvar TBNObjectSpacePS = \"void getTBN() {\\n\\tvec3 B = cross(dVertexNormalW, vObjectSpaceUpW);\\n\\tvec3 T = cross(dVertexNormalW, B);\\n\\tif (dot(B,B)==0.0)\\n\\t{\\n\\t\\tfloat major=max(max(dVertexNormalW.x, dVertexNormalW.y),dVertexNormalW.z);\\n\\t\\tif (dVertexNormalW.x==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(0,1,0));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t\\telse if (dVertexNormalW.y==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(0,0,1));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t\\telse if (dVertexNormalW.z==major)\\n\\t\\t{\\n\\t\\t\\tB=cross(dVertexNormalW, vec3(1,0,0));\\n\\t\\t\\tT=cross(dVertexNormalW, B);\\n\\t\\t}\\n\\t}\\n\\tdTBN = mat3(normalize(T), normalize(B), normalize(dVertexNormalW));\\n}\\n\";\n\nvar tonemappingAcesPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\tfloat tA = 2.51;\\n\\tfloat tB = 0.03;\\n\\tfloat tC = 2.43;\\n\\tfloat tD = 0.59;\\n\\tfloat tE = 0.14;\\n\\tvec3 x = color * exposure;\\n\\treturn (x*(tA*x+tB))/(x*(tC*x+tD)+tE);\\n}\\n\";\n\nvar tonemappingAces2PS = \"uniform float exposure;\\nconst mat3 ACESInputMat = mat3(\\n\\t0.59719, 0.35458, 0.04823,\\n\\t0.07600, 0.90834, 0.01566,\\n\\t0.02840, 0.13383, 0.83777\\n);\\nconst mat3 ACESOutputMat = mat3(\\n\\t 1.60475, -0.53108, -0.07367,\\n\\t-0.10208,  1.10813, -0.00605,\\n\\t-0.00327, -0.07276,  1.07602\\n);\\nvec3 RRTAndODTFit(vec3 v) {\\n\\tvec3 a = v * (v + 0.0245786) - 0.000090537;\\n\\tvec3 b = v * (0.983729 * v + 0.4329510) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 toneMap(vec3 color) {\\n\\tcolor *= exposure;\\n\\tcolor = color * ACESInputMat;\\n\\tcolor = RRTAndODTFit(color);\\n\\tcolor = color * ACESOutputMat;\\n\\tcolor = clamp(color, 0.0, 1.0);\\n\\treturn color;\\n}\\n\";\n\nvar tonemappingFilmicPS = \"const float A =  0.15;\\nconst float B =  0.50;\\nconst float C =  0.10;\\nconst float D =  0.20;\\nconst float E =  0.02;\\nconst float F =  0.30;\\nconst float W =  11.2;\\nuniform float exposure;\\nvec3 uncharted2Tonemap(vec3 x) {\\n   return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\\n}\\nvec3 toneMap(vec3 color) {\\n\\tcolor = uncharted2Tonemap(color * exposure);\\n\\tvec3 whiteScale = 1.0 / uncharted2Tonemap(vec3(W,W,W));\\n\\tcolor = color * whiteScale;\\n\\treturn color;\\n}\\n\";\n\nvar tonemappingHejlPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\tcolor *= exposure;\\n\\tconst float  A = 0.22, B = 0.3, C = .1, D = 0.2, E = .01, F = 0.3;\\n\\tconst float Scl = 1.25;\\n\\tvec3 h = max( vec3(0.0), color - vec3(0.004) );\\n\\treturn (h*((Scl*A)*h+Scl*vec3(C*B,C*B,C*B))+Scl*vec3(D*E,D*E,D*E)) / (h*(A*h+vec3(B,B,B))+vec3(D*F,D*F,D*F)) - Scl*vec3(E/F,E/F,E/F);\\n}\\n\";\n\nvar tonemappingLinearPS = \"uniform float exposure;\\nvec3 toneMap(vec3 color) {\\n\\treturn color * exposure;\\n}\\n\";\n\nvar tonemappingNonePS = \"vec3 toneMap(vec3 color) {\\n\\treturn color;\\n}\\n\";\n\nvar transformVS = \"#ifdef PIXELSNAP\\nuniform vec4 uScreenSize;\\n#endif\\n#ifdef MORPHING\\nuniform vec4 morph_weights_a;\\nuniform vec4 morph_weights_b;\\n#endif\\n#ifdef MORPHING_TEXTURE_BASED\\nuniform vec4 morph_tex_params;\\nvec2 getTextureMorphCoords() {\\n\\tfloat vertexId = morph_vertex_id;\\n\\tvec2 textureSize = morph_tex_params.xy;\\n\\tvec2 invTextureSize = morph_tex_params.zw;\\n\\tfloat morphGridV = floor(vertexId * invTextureSize.x);\\n\\tfloat morphGridU = vertexId - (morphGridV * textureSize.x);\\n\\treturn (vec2(morphGridU, morphGridV) * invTextureSize) + (0.5 * invTextureSize);\\n}\\n#endif\\n#ifdef MORPHING_TEXTURE_BASED_POSITION\\nuniform highp sampler2D morphPositionTex;\\n#endif\\nmat4 getModelMatrix() {\\n\\t#ifdef DYNAMICBATCH\\n\\treturn getBoneMatrix(vertex_boneIndices);\\n\\t#elif defined(SKIN)\\n\\treturn matrix_model * getSkinMatrix(vertex_boneIndices, vertex_boneWeights);\\n\\t#elif defined(INSTANCING)\\n\\treturn mat4(instance_line1, instance_line2, instance_line3, instance_line4);\\n\\t#else\\n\\treturn matrix_model;\\n\\t#endif\\n}\\nvec4 getPosition() {\\n\\tdModelMatrix = getModelMatrix();\\n\\tvec3 localPos = vertex_position;\\n\\t#ifdef NINESLICED\\n\\tlocalPos.xz *= outerScale;\\n\\tvec2 positiveUnitOffset = clamp(vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tvec2 negativeUnitOffset = clamp(-vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tlocalPos.xz += (-positiveUnitOffset * innerOffset.xy + negativeUnitOffset * innerOffset.zw) * vertex_texCoord0.xy;\\n\\tvTiledUv = (localPos.xz - outerScale + innerOffset.xy) * -0.5 + 1.0;\\n\\tlocalPos.xz *= -0.5;\\n\\tlocalPos = localPos.xzy;\\n\\t#endif\\n\\t#ifdef MORPHING\\n\\t#ifdef MORPHING_POS03\\n\\tlocalPos.xyz += morph_weights_a[0] * morph_pos0;\\n\\tlocalPos.xyz += morph_weights_a[1] * morph_pos1;\\n\\tlocalPos.xyz += morph_weights_a[2] * morph_pos2;\\n\\tlocalPos.xyz += morph_weights_a[3] * morph_pos3;\\n\\t#endif\\n\\t#ifdef MORPHING_POS47\\n\\tlocalPos.xyz += morph_weights_b[0] * morph_pos4;\\n\\tlocalPos.xyz += morph_weights_b[1] * morph_pos5;\\n\\tlocalPos.xyz += morph_weights_b[2] * morph_pos6;\\n\\tlocalPos.xyz += morph_weights_b[3] * morph_pos7;\\n\\t#endif\\n\\t#endif\\n\\t#ifdef MORPHING_TEXTURE_BASED_POSITION\\n\\tvec2 morphUV = getTextureMorphCoords();\\n\\tvec3 morphPos = texture2D(morphPositionTex, morphUV).xyz;\\n\\tlocalPos += morphPos;\\n\\t#endif\\n\\tvec4 posW = dModelMatrix * vec4(localPos, 1.0);\\n\\t#ifdef SCREENSPACE\\n\\tposW.zw = vec2(0.0, 1.0);\\n\\t#endif\\n\\tdPositionW = posW.xyz;\\n\\tvec4 screenPos;\\n\\t#ifdef UV1LAYOUT\\n\\tscreenPos = vec4(vertex_texCoord1.xy * 2.0 - 1.0, 0.5, 1);\\n\\t#else\\n\\t#ifdef SCREENSPACE\\n\\tscreenPos = posW;\\n\\t#else\\n\\tscreenPos = matrix_viewProjection * posW;\\n\\t#endif\\n\\t#ifdef PIXELSNAP\\n\\tscreenPos.xy = (screenPos.xy * 0.5) + 0.5;\\n\\tscreenPos.xy *= uScreenSize.xy;\\n\\tscreenPos.xy = floor(screenPos.xy);\\n\\tscreenPos.xy *= uScreenSize.zw;\\n\\tscreenPos.xy = (screenPos.xy * 2.0) - 1.0;\\n\\t#endif\\n\\t#endif\\n\\treturn screenPos;\\n}\\nvec3 getWorldPosition() {\\n\\treturn dPositionW;\\n}\\n\";\n\nvar transformDeclVS = \"attribute vec3 vertex_position;\\nuniform mat4 matrix_model;\\nuniform mat4 matrix_viewProjection;\\nvec3 dPositionW;\\nmat4 dModelMatrix;\\n\";\n\nvar uv0VS = \"#ifdef NINESLICED\\nvec2 getUv0() {\\n\\tvec2 uv = vertex_position.xz;\\n\\tvec2 positiveUnitOffset = clamp(vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tvec2 negativeUnitOffset = clamp(-vertex_position.xz, vec2(0.0), vec2(1.0));\\n\\tuv += (-positiveUnitOffset * innerOffset.xy + negativeUnitOffset * innerOffset.zw) * vertex_texCoord0.xy;\\n\\tuv = uv * -0.5 + 0.5;\\n\\tuv = uv * atlasRect.zw + atlasRect.xy;\\n\\tvMask = vertex_texCoord0.xy;\\n\\treturn uv;\\n}\\n#else\\nvec2 getUv0() {\\n\\treturn vertex_texCoord0;\\n}\\n#endif\\n\";\n\nvar uv1VS = \"vec2 getUv1() {\\n\\treturn vertex_texCoord1;\\n}\\n\";\n\nvar viewDirPS = \"void getViewDir() {\\n\\tdViewDirW = normalize(view_position - vPositionW);\\n}\\n\";\n\nvar viewNormalVS = \"#ifndef VIEWMATRIX\\n#define VIEWMATRIX\\nuniform mat4 matrix_view;\\n#endif\\nvec3 getViewNormal() {\\n\\treturn mat3(matrix_view) * vNormalW;\\n}\\n\";\n\nconst shaderChunks = {\n\talphaTestPS: alphaTestPS,\n\tambientConstantPS: ambientConstantPS,\n\tambientPrefilteredCubePS: ambientPrefilteredCubePS,\n\tambientPrefilteredCubeLodPS: ambientPrefilteredCubeLodPS,\n\tambientSHPS: ambientSHPS,\n\taoPS: aoPS,\n\taoSpecOccPS: aoSpecOccPS,\n\taoSpecOccConstPS: aoSpecOccConstPS,\n\taoSpecOccConstSimplePS: aoSpecOccConstSimplePS,\n\taoSpecOccSimplePS: aoSpecOccSimplePS,\n\tbakeDirLmEndPS: bakeDirLmEndPS,\n\tbakeLmEndPS: bakeLmEndPS,\n\tbasePS: basePS,\n\tbaseVS: baseVS,\n\tbaseNineSlicedPS: baseNineSlicedPS,\n\tbaseNineSlicedVS: baseNineSlicedVS,\n\tbaseNineSlicedTiledPS: baseNineSlicedTiledPS,\n\tbiasConstPS: biasConstPS,\n\tblurVSMPS: blurVSMPS,\n\tclearCoatPS: clearCoatPS,\n\tclearCoatGlossPS: clearCoatGlossPS,\n\tclearCoatNormalPS: clearCoatNormalPS,\n\tclusteredLightLoopPS: clusteredLightLoopPS,\n\tclusteredLightPS: clusteredLightPS,\n\tcombineClearCoatPS: combineClearCoatPS,\n\tcombineDiffusePS: combineDiffusePS,\n\tcombineDiffuseSpecularPS: combineDiffuseSpecularPS,\n\tcombineDiffuseSpecularNoConservePS: combineDiffuseSpecularNoConservePS,\n\tcombineDiffuseSpecularNoReflPS: combineDiffuseSpecularNoReflPS,\n\tcombineDiffuseSpecularNoReflSeparateAmbientPS: combineDiffuseSpecularNoReflSeparateAmbientPS,\n\tcombineDiffuseSpecularOldPS: combineDiffuseSpecularOldPS,\n\tcookiePS: cookiePS,\n\tcubeMapProjectBoxPS: cubeMapProjectBoxPS,\n\tcubeMapProjectNonePS: cubeMapProjectNonePS,\n\tcubeMapRotatePS: cubeMapRotatePS,\n\tdetailModesPS: detailModesPS,\n\tdiffusePS: diffusePS,\n\tdiffuseDetailMapPS: diffuseDetailMapPS,\n\tdilatePS: dilatePS,\n\tdpAtlasQuadPS: dpAtlasQuadPS,\n\temissivePS: emissivePS,\n\tendPS: endPS,\n\tendVS: endVS,\n\tenvConstPS: envConstPS,\n\tenvMultiplyPS: envMultiplyPS,\n\textensionPS: extensionPS,\n\textensionVS: extensionVS,\n\tfalloffInvSquaredPS: falloffInvSquaredPS,\n\tfalloffLinearPS: falloffLinearPS,\n\tfixCubemapSeamsNonePS: fixCubemapSeamsNonePS,\n\tfixCubemapSeamsStretchPS: fixCubemapSeamsStretchPS,\n\tfogExpPS: fogExpPS,\n\tfogExp2PS: fogExp2PS,\n\tfogLinearPS: fogLinearPS,\n\tfogNonePS: fogNonePS,\n\tfresnelSchlickPS: fresnelSchlickPS,\n\tfullscreenQuadPS: fullscreenQuadPS,\n\tfullscreenQuadVS: fullscreenQuadVS,\n\tgamma1_0PS: gamma1_0PS,\n\tgamma2_2PS: gamma2_2PS,\n\tgenParaboloidPS: genParaboloidPS,\n\tgles3PS: gles3PS,\n\tgles3VS: gles3VS,\n\tglossPS: glossPS,\n\tinstancingVS: instancingVS,\n\tlightDiffuseLambertPS: lightDiffuseLambertPS,\n\tlightDirPointPS: lightDirPointPS,\n\tlightmapDirPS: lightmapDirPS,\n\tlightmapSinglePS: lightmapSinglePS,\n\tlightmapSingleVertPS: lightmapSingleVertPS,\n\tlightSpecularAnisoGGXPS: lightSpecularAnisoGGXPS,\n\tlightSpecularBlinnPS: lightSpecularBlinnPS,\n\tlightSpecularPhongPS: lightSpecularPhongPS,\n\tltc: ltc,\n\tmetalnessPS: metalnessPS,\n\tmsdfPS: msdfPS,\n\tnormalVS: normalVS,\n\tnormalDetailMapPS: normalDetailMapPS,\n\tnormalInstancedVS: normalInstancedVS,\n\tnormalMapPS: normalMapPS,\n\tnormalMapFastPS: normalMapFastPS,\n\tnormalSkinnedVS: normalSkinnedVS,\n\tnormalVertexPS: normalVertexPS,\n\tnormalXYPS: normalXYPS,\n\tnormalXYZPS: normalXYZPS,\n\topacityPS: opacityPS,\n\toutputAlphaPS: outputAlphaPS,\n\toutputAlphaOpaquePS: outputAlphaOpaquePS,\n\toutputAlphaPremulPS: outputAlphaPremulPS,\n\toutputCubemapPS: outputCubemapPS,\n\toutputTex2DPS: outputTex2DPS,\n\tpackDepthPS: packDepthPS,\n\tpackDepthMaskPS: packDepthMaskPS,\n\tparallaxPS: parallaxPS,\n\tparticlePS: particlePS,\n\tparticleVS: particleVS,\n\tparticleAnimFrameClampVS: particleAnimFrameClampVS,\n\tparticleAnimFrameLoopVS: particleAnimFrameLoopVS,\n\tparticleAnimTexVS: particleAnimTexVS,\n\tparticleInputFloatPS: particleInputFloatPS,\n\tparticleInputRgba8PS: particleInputRgba8PS,\n\tparticleOutputFloatPS: particleOutputFloatPS,\n\tparticleOutputRgba8PS: particleOutputRgba8PS,\n\tparticleUpdaterAABBPS: particleUpdaterAABBPS,\n\tparticleUpdaterEndPS: particleUpdaterEndPS,\n\tparticleUpdaterInitPS: particleUpdaterInitPS,\n\tparticleUpdaterNoRespawnPS: particleUpdaterNoRespawnPS,\n\tparticleUpdaterOnStopPS: particleUpdaterOnStopPS,\n\tparticleUpdaterRespawnPS: particleUpdaterRespawnPS,\n\tparticleUpdaterSpherePS: particleUpdaterSpherePS,\n\tparticleUpdaterStartPS: particleUpdaterStartPS,\n\tparticle_billboardVS: particle_billboardVS,\n\tparticle_blendAddPS: particle_blendAddPS,\n\tparticle_blendMultiplyPS: particle_blendMultiplyPS,\n\tparticle_blendNormalPS: particle_blendNormalPS,\n\tparticle_cpuVS: particle_cpuVS,\n\tparticle_cpu_endVS: particle_cpu_endVS,\n\tparticle_customFaceVS: particle_customFaceVS,\n\tparticle_endPS: particle_endPS,\n\tparticle_endVS: particle_endVS,\n\tparticle_halflambertPS: particle_halflambertPS,\n\tparticle_initVS: particle_initVS,\n\tparticle_lambertPS: particle_lambertPS,\n\tparticle_lightingPS: particle_lightingPS,\n\tparticle_localShiftVS: particle_localShiftVS,\n\tparticle_meshVS: particle_meshVS,\n\tparticle_normalVS: particle_normalVS,\n\tparticle_normalMapPS: particle_normalMapPS,\n\tparticle_pointAlongVS: particle_pointAlongVS,\n\tparticle_softPS: particle_softPS,\n\tparticle_softVS: particle_softVS,\n\tparticle_stretchVS: particle_stretchVS,\n\tparticle_TBNVS: particle_TBNVS,\n\tparticle_wrapVS: particle_wrapVS,\n\tprecisionTestPS: precisionTestPS,\n\tprecisionTest2PS: precisionTest2PS,\n\tprefilterCubemapPS: prefilterCubemapPS,\n\treflDirPS: reflDirPS,\n\treflDirAnisoPS: reflDirAnisoPS,\n\treflectionCCPS: reflectionCCPS,\n\treflectionCubePS: reflectionCubePS,\n\treflectionDpAtlasPS: reflectionDpAtlasPS,\n\treflectionPrefilteredCubePS: reflectionPrefilteredCubePS,\n\treflectionPrefilteredCubeLodPS: reflectionPrefilteredCubeLodPS,\n\treflectionSpherePS: reflectionSpherePS,\n\treflectionSphereLowPS: reflectionSphereLowPS,\n\trefractionPS: refractionPS,\n\treprojectPS: reprojectPS,\n\trgbmPS: rgbmPS,\n\tscreenDepthPS: screenDepthPS,\n\tshadowCascadesPS: shadowCascadesPS,\n\tshadowCommonPS: shadowCommonPS,\n\tshadowCoordPS: shadowCoordPS,\n\tshadowCoordPerspZbufferPS: shadowCoordPerspZbufferPS,\n\tshadowEVSMPS: shadowEVSMPS,\n\tshadowEVSMnPS: shadowEVSMnPS,\n\tshadowStandardPS: shadowStandardPS,\n\tshadowStandardGL2PS: shadowStandardGL2PS,\n\tshadowVSM8PS: shadowVSM8PS,\n\tshadowVSM_commonPS: shadowVSM_commonPS,\n\tskinBatchConstVS: skinBatchConstVS,\n\tskinBatchTexVS: skinBatchTexVS,\n\tskinConstVS: skinConstVS,\n\tskinTexVS: skinTexVS,\n\tskyboxPS: skyboxPS,\n\tskyboxVS: skyboxVS,\n\tskyboxHDRPS: skyboxHDRPS,\n\tskyboxPrefilteredCubePS: skyboxPrefilteredCubePS,\n\tspecularPS: specularPS,\n\tspecularAaNonePS: specularAaNonePS,\n\tspecularAaToksvigPS: specularAaToksvigPS,\n\tspecularAaToksvigFastPS: specularAaToksvigFastPS,\n\tspotPS: spotPS,\n\tstartPS: startPS,\n\tstartVS: startVS,\n\tstartNineSlicedPS: startNineSlicedPS,\n\tstartNineSlicedTiledPS: startNineSlicedTiledPS,\n\tstoreEVSMPS: storeEVSMPS,\n\ttangentBinormalVS: tangentBinormalVS,\n\tTBNPS: TBNPS,\n\tTBNderivativePS: TBNderivativePS,\n\tTBNfastPS: TBNfastPS,\n\tTBNObjectSpacePS: TBNObjectSpacePS,\n\ttonemappingAcesPS: tonemappingAcesPS,\n\ttonemappingAces2PS: tonemappingAces2PS,\n\ttonemappingFilmicPS: tonemappingFilmicPS,\n\ttonemappingHejlPS: tonemappingHejlPS,\n\ttonemappingLinearPS: tonemappingLinearPS,\n\ttonemappingNonePS: tonemappingNonePS,\n\ttransformVS: transformVS,\n\ttransformDeclVS: transformDeclVS,\n\tuv0VS: uv0VS,\n\tuv1VS: uv1VS,\n\tviewDirPS: viewDirPS,\n\tviewNormalVS: viewNormalVS\n};\n\nfunction gammaCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === GAMMA_SRGB || value === GAMMA_SRGBFAST) {\n\t\treturn chunks.gamma2_2PS ? chunks.gamma2_2PS : shaderChunks.gamma2_2PS;\n\t} else if (value === GAMMA_SRGBHDR) {\n\t\treturn \"#define HDR\\n\" + (chunks.gamma2_2PS ? chunks.gamma2_2PS : shaderChunks.gamma2_2PS);\n\t}\n\n\treturn chunks.gamma1_0PS ? chunks.gamma1_0PS : shaderChunks.gamma1_0PS;\n}\n\nfunction tonemapCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === TONEMAP_FILMIC) {\n\t\treturn chunks.tonemappingFilmicPS ? chunks.tonemappingFilmicPS : shaderChunks.tonemappingFilmicPS;\n\t} else if (value === TONEMAP_LINEAR) {\n\t\treturn chunks.tonemappingLinearPS ? chunks.tonemappingLinearPS : shaderChunks.tonemappingLinearPS;\n\t} else if (value === TONEMAP_HEJL) {\n\t\treturn chunks.tonemappingHejlPS ? chunks.tonemappingHejlPS : shaderChunks.tonemappingHejlPS;\n\t} else if (value === TONEMAP_ACES) {\n\t\treturn chunks.tonemappingAcesPS ? chunks.tonemappingAcesPS : shaderChunks.tonemappingAcesPS;\n\t} else if (value === TONEMAP_ACES2) {\n\t\treturn chunks.tonemappingAces2PS ? chunks.tonemappingAces2PS : shaderChunks.tonemappingAces2PS;\n\t}\n\n\treturn chunks.tonemapingNonePS ? chunks.tonemapingNonePS : shaderChunks.tonemappingNonePS;\n}\n\nfunction fogCode(value, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (value === 'linear') {\n\t\treturn chunks.fogLinearPS ? chunks.fogLinearPS : shaderChunks.fogLinearPS;\n\t} else if (value === 'exp') {\n\t\treturn chunks.fogExpPS ? chunks.fogExpPS : shaderChunks.fogExpPS;\n\t} else if (value === 'exp2') {\n\t\treturn chunks.fogExp2PS ? chunks.fogExp2PS : shaderChunks.fogExp2PS;\n\t}\n\n\treturn chunks.fogNonePS ? chunks.fogNonePS : shaderChunks.fogNonePS;\n}\n\nfunction skinCode(device, chunks) {\n\tif (!chunks) chunks = shaderChunks;\n\n\tif (device.supportsBoneTextures) {\n\t\treturn chunks.skinTexVS;\n\t}\n\n\treturn \"#define BONE_LIMIT \" + device.getBoneLimit() + \"\\n\" + chunks.skinConstVS;\n}\n\nfunction precisionCode(device) {\n\tlet pcode = 'precision ' + device.precision + ' float;\\n';\n\n\tif (device.webgl2) {\n\t\tpcode += '#ifdef GL2\\nprecision ' + device.precision + ' sampler2DShadow;\\n#endif\\n';\n\t}\n\n\treturn pcode;\n}\n\nfunction versionCode(device) {\n\treturn device.webgl2 ? \"#version 300 es\\n\" : \"\";\n}\n\nfunction dummyFragmentCode() {\n\treturn \"void main(void) {gl_FragColor = vec4(0.0);}\";\n}\n\nfunction begin() {\n\treturn 'void main(void)\\n{\\n';\n}\n\nfunction end() {\n\treturn '}\\n';\n}\n\nconst attrib2Semantic = {\n\tvertex_position: SEMANTIC_POSITION,\n\tvertex_normal: SEMANTIC_NORMAL,\n\tvertex_tangent: SEMANTIC_TANGENT,\n\tvertex_texCoord0: SEMANTIC_TEXCOORD0,\n\tvertex_texCoord1: SEMANTIC_TEXCOORD1,\n\tvertex_texCoord2: SEMANTIC_TEXCOORD2,\n\tvertex_texCoord3: SEMANTIC_TEXCOORD3,\n\tvertex_texCoord4: SEMANTIC_TEXCOORD4,\n\tvertex_texCoord5: SEMANTIC_TEXCOORD5,\n\tvertex_texCoord6: SEMANTIC_TEXCOORD6,\n\tvertex_texCoord7: SEMANTIC_TEXCOORD7,\n\tvertex_color: SEMANTIC_COLOR,\n\tvertex_boneIndices: SEMANTIC_BLENDINDICES,\n\tvertex_boneWeights: SEMANTIC_BLENDWEIGHT\n};\n\nfunction collectAttribs(vsCode) {\n\tconst attribs = {};\n\tlet attrs = 0;\n\tlet found = vsCode.indexOf(\"attribute\");\n\n\twhile (found >= 0) {\n\t\tif (found > 0 && vsCode[found - 1] === \"/\") break;\n\t\tconst endOfLine = vsCode.indexOf(';', found);\n\t\tconst startOfAttribName = vsCode.lastIndexOf(' ', endOfLine);\n\t\tconst attribName = vsCode.substr(startOfAttribName + 1, endOfLine - (startOfAttribName + 1));\n\t\tconst semantic = attrib2Semantic[attribName];\n\n\t\tif (semantic !== undefined) {\n\t\t\tattribs[attribName] = semantic;\n\t\t} else {\n\t\t\tattribs[attribName] = \"ATTR\" + attrs;\n\t\t\tattrs++;\n\t\t}\n\n\t\tfound = vsCode.indexOf(\"attribute\", found + 1);\n\t}\n\n\treturn attribs;\n}\n\nfunction createShader(device, vsName, psName, useTransformFeedback) {\n\tlet vsCode = shaderChunks[vsName];\n\tlet psCode = precisionCode(device) + \"\\n\" + shaderChunks[psName];\n\tconst attribs = collectAttribs(vsCode);\n\n\tif (device.webgl2) {\n\t\tvsCode = versionCode(device) + shaderChunks.gles3VS + vsCode;\n\t\tpsCode = versionCode(device) + shaderChunks.gles3PS + psCode;\n\t}\n\n\treturn new Shader(device, {\n\t\tattributes: attribs,\n\t\tvshader: vsCode,\n\t\tfshader: psCode,\n\t\tuseTransformFeedback: useTransformFeedback\n\t});\n}\n\nfunction createShaderFromCode(device, vsCode, psCode, uName, useTransformFeedback, psPreamble) {\n\tconst shaderCache = device.programLib._cache;\n\tconst cached = shaderCache[uName];\n\tif (cached !== undefined) return cached;\n\tpsCode = precisionCode(device) + \"\\n\" + (psCode || dummyFragmentCode());\n\tconst attribs = collectAttribs(vsCode);\n\n\tif (device.webgl2) {\n\t\tvsCode = versionCode(device) + shaderChunks.gles3VS + vsCode;\n\t\tpsCode = versionCode(device) + shaderChunks.gles3PS + psCode;\n\t}\n\n\tshaderCache[uName] = new Shader(device, {\n\t\tattributes: attribs,\n\t\tvshader: vsCode,\n\t\tfshader: (psPreamble ? psPreamble : \"\") + psCode,\n\t\tuseTransformFeedback: useTransformFeedback\n\t});\n\treturn shaderCache[uName];\n}\n\nshaderChunks.collectAttribs = collectAttribs;\nshaderChunks.createShader = createShader;\nshaderChunks.createShaderFromCode = createShaderFromCode;\n\nconst basic = {\n\tgenerateKey: function (options) {\n\t\tlet key = 'basic';\n\t\tif (options.fog) key += '_fog';\n\t\tif (options.alphaTest) key += '_atst';\n\t\tif (options.vertexColors) key += '_vcol';\n\t\tif (options.diffuseMap) key += '_diff';\n\t\tif (options.skin) key += '_skin';\n\t\tif (options.screenSpace) key += '_ss';\n\t\tif (options.useInstancing) key += '_inst';\n\t\tif (options.useMorphPosition) key += '_morphp';\n\t\tif (options.useMorphNormal) key += '_morphn';\n\t\tif (options.useMorphTextureBased) key += '_morpht';\n\t\tkey += '_' + options.pass;\n\t\treturn key;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tconst attributes = {\n\t\t\tvertex_position: SEMANTIC_POSITION\n\t\t};\n\n\t\tif (options.skin) {\n\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tattributes.vertex_texCoord0 = SEMANTIC_TEXCOORD0;\n\t\t}\n\n\t\tlet code = '';\n\t\tcode += shaderChunks.transformDeclVS;\n\n\t\tif (options.skin) {\n\t\t\tcode += skinCode(device);\n\t\t\tcode += shaderChunks.transformSkinnedVS;\n\t\t} else {\n\t\t\tcode += shaderChunks.transformVS;\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += 'attribute vec4 vertex_color;\\n';\n\t\t\tcode += 'varying vec4 vColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += 'attribute vec2 vertex_texCoord0;\\n';\n\t\t\tcode += 'varying vec2 vUv0;\\n';\n\t\t}\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += '#ifndef VIEWMATRIX\\n';\n\t\t\tcode += '#define VIEWMATRIX\\n';\n\t\t\tcode += 'uniform mat4 matrix_view;\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcode += '#ifndef CAMERAPLANES\\n';\n\t\t\tcode += '#define CAMERAPLANES\\n';\n\t\t\tcode += 'uniform vec4 camera_params;\\n\\n';\n\t\t\tcode += '#endif\\n';\n\t\t}\n\n\t\tcode += begin();\n\t\tcode += \"\t gl_Position = getPosition();\\n\";\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += \"\t\tvDepth = -(matrix_view * vec4(getWorldPosition(),1.0)).z * camera_params.x;\\n\";\n\t\t}\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += '\t\tvColor = vertex_color;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += '\t\tvUv0 = vertex_texCoord0;\\n';\n\t\t}\n\n\t\tcode += end();\n\t\tconst vshader = code;\n\t\tcode = precisionCode(device);\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += 'varying vec4 vColor;\\n';\n\t\t} else {\n\t\t\tcode += 'uniform vec4 uColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += 'varying vec2 vUv0;\\n';\n\t\t\tcode += 'uniform sampler2D texture_diffuseMap;\\n';\n\t\t}\n\n\t\tif (options.fog) {\n\t\t\tcode += fogCode(options.fog);\n\t\t}\n\n\t\tif (options.alphatest) {\n\t\t\tcode += shaderChunks.alphaTestPS;\n\t\t}\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += shaderChunks.packDepthPS;\n\t\t}\n\n\t\tcode += begin();\n\n\t\tif (options.vertexColors) {\n\t\t\tcode += '\t\tgl_FragColor = vColor;\\n';\n\t\t} else {\n\t\t\tcode += '\t\tgl_FragColor = uColor;\\n';\n\t\t}\n\n\t\tif (options.diffuseMap) {\n\t\t\tcode += '\t\tgl_FragColor *= texture2D(texture_diffuseMap, vUv0);\\n';\n\t\t}\n\n\t\tif (options.alphatest) {\n\t\t\tcode += \"\t alphaTest(gl_FragColor.a);\\n\";\n\t\t}\n\n\t\tif (options.pass !== SHADER_PICK) {\n\t\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\t\tcode += \"\t\tgl_FragColor = packFloat(vDepth);\\n\";\n\t\t\t} else {\n\t\t\t\tif (options.fog) {\n\t\t\t\t\tcode += \"\t glFragColor.rgb = addFog(gl_FragColor.rgb);\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode += end();\n\t\tconst fshader = code;\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nconst particle = {\n\tgenerateKey: function (options) {\n\t\tlet key = \"particle\";\n\n\t\tfor (const prop in options) {\n\t\t\tif (options.hasOwnProperty(prop)) {\n\t\t\t\tkey += options[prop];\n\t\t\t}\n\t\t}\n\n\t\treturn key;\n\t},\n\t_animTex: function (options) {\n\t\tlet vshader = \"\";\n\t\tvshader += options.animTexLoop ? shaderChunks.particleAnimFrameLoopVS : shaderChunks.particleAnimFrameClampVS;\n\t\tvshader += shaderChunks.particleAnimTexVS;\n\t\treturn vshader;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tlet vshader = \"\";\n\t\tlet fshader = precisionCode(device) + \"\\n\";\n\t\tfshader += '#define PARTICLE\\n';\n\n\t\tif (device.webgl2) {\n\t\t\tvshader += \"#define GL2\\n\";\n\t\t\tfshader += \"#define GL2\\n\";\n\t\t}\n\n\t\tvshader += \"#define VERTEXSHADER\\n\";\n\t\tif (options.mesh) vshader += \"#define USE_MESH\\n\";\n\t\tif (options.localSpace) vshader += \"#define LOCAL_SPACE\\n\";\n\t\tif (options.screenSpace) vshader += \"#define SCREEN_SPACE\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec2 animTexTilesParams;\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec4 animTexParams;\\n\";\n\t\tif (options.animTex) vshader += \"\\nuniform vec2 animTexIndexParams;\\n\";\n\t\tif (options.normal === 2) vshader += \"\\nvarying mat3 ParticleMat;\\n\";\n\t\tif (options.normal === 1) vshader += \"\\nvarying vec3 Normal;\\n\";\n\t\tif (options.soft) vshader += \"\\nvarying float vDepth;\\n\";\n\t\tconst faceVS = options.customFace ? shaderChunks.particle_customFaceVS : shaderChunks.particle_billboardVS;\n\n\t\tif (!options.useCpu) {\n\t\t\tvshader += shaderChunks.particle_initVS;\n\t\t\tvshader += options.pack8 ? shaderChunks.particleInputRgba8PS : shaderChunks.particleInputFloatPS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.screenDepthPS;\n\t\t\tvshader += shaderChunks.particleVS;\n\t\t\tif (options.localSpace) vshader += shaderChunks.particle_localShiftVS;\n\t\t\tif (options.animTex) vshader += this._animTex(options);\n\t\t\tif (options.wrap) vshader += shaderChunks.particle_wrapVS;\n\t\t\tif (options.alignToMotion) vshader += shaderChunks.particle_pointAlongVS;\n\t\t\tvshader += options.mesh ? shaderChunks.particle_meshVS : faceVS;\n\t\t\tif (options.normal === 1) vshader += shaderChunks.particle_normalVS;\n\t\t\tif (options.normal === 2) vshader += shaderChunks.particle_TBNVS;\n\t\t\tif (options.stretch > 0.0) vshader += shaderChunks.particle_stretchVS;\n\t\t\tvshader += shaderChunks.particle_endVS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.particle_softVS;\n\t\t} else {\n\t\t\tif (options.soft > 0) vshader += shaderChunks.screenDepthPS;\n\t\t\tvshader += shaderChunks.particle_cpuVS;\n\t\t\tif (options.localSpace) vshader += shaderChunks.particle_localShiftVS;\n\t\t\tif (options.animTex) vshader += this._animTex(options);\n\t\t\tif (options.alignToMotion) vshader += shaderChunks.particle_pointAlongVS;\n\t\t\tvshader += options.mesh ? shaderChunks.particle_meshVS : faceVS;\n\t\t\tif (options.normal === 1) vshader += shaderChunks.particle_normalVS;\n\t\t\tif (options.normal === 2) vshader += shaderChunks.particle_TBNVS;\n\t\t\tif (options.stretch > 0.0) vshader += shaderChunks.particle_stretchVS;\n\t\t\tvshader += shaderChunks.particle_cpu_endVS;\n\t\t\tif (options.soft > 0) vshader += shaderChunks.particle_softVS;\n\t\t}\n\n\t\tvshader += \"}\\n\";\n\n\t\tif (options.normal > 0) {\n\t\t\tif (options.normal === 1) {\n\t\t\t\tfshader += \"\\nvarying vec3 Normal;\\n\";\n\t\t\t} else if (options.normal === 2) {\n\t\t\t\tfshader += \"\\nvarying mat3 ParticleMat;\\n\";\n\t\t\t}\n\n\t\t\tfshader += \"\\nuniform vec3 lightCube[6];\\n\";\n\t\t}\n\n\t\tif (options.soft) fshader += \"\\nvarying float vDepth;\\n\";\n\t\tif (options.normal === 0 && options.fog === \"none\") options.srgb = false;\n\t\tfshader += gammaCode(options.gamma);\n\t\tfshader += tonemapCode(options.toneMap);\n\n\t\tif (options.fog === 'linear') {\n\t\t\tfshader += shaderChunks.fogLinearPS;\n\t\t} else if (options.fog === 'exp') {\n\t\t\tfshader += shaderChunks.fogExpPS;\n\t\t} else if (options.fog === 'exp2') {\n\t\t\tfshader += shaderChunks.fogExp2PS;\n\t\t} else {\n\t\t\tfshader += shaderChunks.fogNonePS;\n\t\t}\n\n\t\tif (options.normal === 2) fshader += \"\\nuniform sampler2D normalMap;\\n\";\n\t\tif (options.soft > 0) fshader += shaderChunks.screenDepthPS;\n\t\tfshader += shaderChunks.particlePS;\n\t\tif (options.soft > 0) fshader += shaderChunks.particle_softPS;\n\t\tif (options.normal === 1) fshader += \"\\nvec3 normal = Normal;\\n\";\n\t\tif (options.normal === 2) fshader += shaderChunks.particle_normalMapPS;\n\t\tif (options.normal > 0) fshader += options.halflambert ? shaderChunks.particle_halflambertPS : shaderChunks.particle_lambertPS;\n\t\tif (options.normal > 0) fshader += shaderChunks.particle_lightingPS;\n\n\t\tif (options.blend === BLEND_NORMAL) {\n\t\t\tfshader += shaderChunks.particle_blendNormalPS;\n\t\t} else if (options.blend === BLEND_ADDITIVE) {\n\t\t\tfshader += shaderChunks.particle_blendAddPS;\n\t\t} else if (options.blend === BLEND_MULTIPLICATIVE) {\n\t\t\tfshader += shaderChunks.particle_blendMultiplyPS;\n\t\t}\n\n\t\tfshader += shaderChunks.particle_endPS;\n\t\tconst attributes = collectAttribs(vshader);\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nconst skybox = {\n\tgenerateKey: function (options) {\n\t\tconst key = \"skybox\" + options.rgbm + \" \" + options.hdr + \" \" + options.fixSeams + \"\" + options.toneMapping + \"\" + options.gamma + \"\" + options.useIntensity + \"\" + options.useCubeMapRotation + \"\" + options.useRightHandedCubeMap + \"\" + options.mip;\n\t\treturn key;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tconst mip2size = [128, 64, 32, 16, 8, 4, 2];\n\t\tlet fshader = precisionCode(device);\n\t\tfshader += options.useCubeMapRotation ? '#define CUBEMAP_ROTATION\\n' : '';\n\t\tfshader += options.useRightHandedCubeMap ? '#define RIGHT_HANDED_CUBEMAP\\n' : '';\n\t\tfshader += options.mip ? shaderChunks.fixCubemapSeamsStretchPS : shaderChunks.fixCubemapSeamsNonePS;\n\t\tfshader += options.useIntensity ? shaderChunks.envMultiplyPS : shaderChunks.envConstPS;\n\t\tfshader += gammaCode(options.gamma);\n\t\tfshader += tonemapCode(options.toneMapping);\n\t\tfshader += shaderChunks.rgbmPS;\n\t\tfshader += shaderChunks.skyboxHDRPS.replace(/\\$textureCubeSAMPLE/g, options.rgbm ? \"textureCubeRGBM\" : options.hdr ? \"textureCube\" : \"textureCubeSRGB\").replace(/\\$FIXCONST/g, 1 - 1 / mip2size[options.mip] + \"\");\n\t\treturn {\n\t\t\tattributes: {\n\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t},\n\t\t\tvshader: shaderChunks.skyboxVS,\n\t\t\tfshader: fshader\n\t\t};\n\t}\n};\n\nvar _pixelSizeTable = null;\nvar _blockSizeTable = null;\n\nclass Texture {\n\tconstructor(graphicsDevice, options) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.name = null;\n\t\tthis._width = 4;\n\t\tthis._height = 4;\n\t\tthis._depth = 1;\n\t\tthis._format = PIXELFORMAT_R8_G8_B8_A8;\n\t\tthis.type = TEXTURETYPE_DEFAULT;\n\t\tthis.projection = TEXTUREPROJECTION_NONE;\n\t\tthis._cubemap = false;\n\t\tthis._volume = false;\n\t\tthis.fixCubemapSeams = false;\n\t\tthis._flipY = false;\n\t\tthis._premultiplyAlpha = false;\n\t\tthis._isRenderTarget = false;\n\t\tthis._mipmaps = true;\n\t\tthis._minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\tthis._magFilter = FILTER_LINEAR;\n\t\tthis._anisotropy = 1;\n\t\tthis._addressU = ADDRESS_REPEAT;\n\t\tthis._addressV = ADDRESS_REPEAT;\n\t\tthis._addressW = ADDRESS_REPEAT;\n\t\tthis._compareOnRead = false;\n\t\tthis._compareFunc = FUNC_LESS;\n\n\t\tif (options !== undefined) {\n\t\t\tif (options.name !== undefined) {\n\t\t\t\tthis.name = options.name;\n\t\t\t}\n\n\t\t\tthis._width = options.width !== undefined ? options.width : this._width;\n\t\t\tthis._height = options.height !== undefined ? options.height : this._height;\n\t\t\tthis._format = options.format !== undefined ? options.format : this._format;\n\n\t\t\tif (options.hasOwnProperty('type')) {\n\t\t\t\tthis.type = options.type;\n\t\t\t} else if (options.hasOwnProperty('rgbm')) {\n\t\t\t\tthis.type = options.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t\t} else if (options.hasOwnProperty('swizzleGGGR')) {\n\t\t\t\tthis.type = options.swizzleGGGR ? TEXTURETYPE_SWIZZLEGGGR : TEXTURETYPE_DEFAULT;\n\t\t\t}\n\n\t\t\tif (options.mipmaps !== undefined) {\n\t\t\t\tthis._mipmaps = options.mipmaps;\n\t\t\t} else {\n\t\t\t\tthis._mipmaps = options.autoMipmap !== undefined ? options.autoMipmap : this._mipmaps;\n\t\t\t}\n\n\t\t\tthis._levels = options.levels;\n\t\t\tthis._cubemap = options.cubemap !== undefined ? options.cubemap : this._cubemap;\n\t\t\tthis.fixCubemapSeams = options.fixCubemapSeams !== undefined ? options.fixCubemapSeams : this.fixCubemapSeams;\n\n\t\t\tif (this._cubemap) {\n\t\t\t\tthis.projection = TEXTUREPROJECTION_CUBE;\n\t\t\t} else if (options.projection && options.projection !== TEXTUREPROJECTION_CUBE) {\n\t\t\t\tthis.projection = options.projection;\n\t\t\t}\n\n\t\t\tthis._minFilter = options.minFilter !== undefined ? options.minFilter : this._minFilter;\n\t\t\tthis._magFilter = options.magFilter !== undefined ? options.magFilter : this._magFilter;\n\t\t\tthis._anisotropy = options.anisotropy !== undefined ? options.anisotropy : this._anisotropy;\n\t\t\tthis._addressU = options.addressU !== undefined ? options.addressU : this._addressU;\n\t\t\tthis._addressV = options.addressV !== undefined ? options.addressV : this._addressV;\n\t\t\tthis._compareOnRead = options.compareOnRead !== undefined ? options.compareOnRead : this._compareOnRead;\n\t\t\tthis._compareFunc = options._compareFunc !== undefined ? options._compareFunc : this._compareFunc;\n\t\t\tthis._flipY = options.flipY !== undefined ? options.flipY : this._flipY;\n\t\t\tthis._premultiplyAlpha = options.premultiplyAlpha !== undefined ? options.premultiplyAlpha : this._premultiplyAlpha;\n\n\t\t\tif (graphicsDevice.webgl2) {\n\t\t\t\tthis._depth = options.depth !== undefined ? options.depth : this._depth;\n\t\t\t\tthis._volume = options.volume !== undefined ? options.volume : this._volume;\n\t\t\t\tthis._addressW = options.addressW !== undefined ? options.addressW : this._addressW;\n\t\t\t}\n\t\t}\n\n\t\tthis._compressed = this._format === PIXELFORMAT_DXT1 || this._format === PIXELFORMAT_DXT3 || this._format === PIXELFORMAT_DXT5 || this._format >= PIXELFORMAT_ETC1;\n\t\tthis._invalid = false;\n\t\tthis._lockedLevel = -1;\n\n\t\tif (!this._levels) {\n\t\t\tthis._levels = this._cubemap ? [[null, null, null, null, null, null]] : [null];\n\t\t}\n\n\t\tthis.dirtyAll();\n\t\tthis._gpuSize = 0;\n\t}\n\n\tget minFilter() {\n\t\treturn this._minFilter;\n\t}\n\n\tset minFilter(v) {\n\t\tif (this._minFilter !== v) {\n\t\t\tthis._minFilter = v;\n\t\t\tthis._parameterFlags |= 1;\n\t\t}\n\t}\n\n\tget magFilter() {\n\t\treturn this._magFilter;\n\t}\n\n\tset magFilter(v) {\n\t\tif (this._magFilter !== v) {\n\t\t\tthis._magFilter = v;\n\t\t\tthis._parameterFlags |= 2;\n\t\t}\n\t}\n\n\tget addressU() {\n\t\treturn this._addressU;\n\t}\n\n\tset addressU(v) {\n\t\tif (this._addressU !== v) {\n\t\t\tthis._addressU = v;\n\t\t\tthis._parameterFlags |= 4;\n\t\t}\n\t}\n\n\tget addressV() {\n\t\treturn this._addressV;\n\t}\n\n\tset addressV(v) {\n\t\tif (this._addressV !== v) {\n\t\t\tthis._addressV = v;\n\t\t\tthis._parameterFlags |= 8;\n\t\t}\n\t}\n\n\tget addressW() {\n\t\treturn this._addressW;\n\t}\n\n\tset addressW(addressW) {\n\t\tif (!this.device.webgl2) return;\n\n\t\tif (!this._volume) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (addressW !== this._addressW) {\n\t\t\tthis._addressW = addressW;\n\t\t\tthis._parameterFlags |= 16;\n\t\t}\n\t}\n\n\tget compareOnRead() {\n\t\treturn this._compareOnRead;\n\t}\n\n\tset compareOnRead(v) {\n\t\tif (this._compareOnRead !== v) {\n\t\t\tthis._compareOnRead = v;\n\t\t\tthis._parameterFlags |= 32;\n\t\t}\n\t}\n\n\tget compareFunc() {\n\t\treturn this._compareFunc;\n\t}\n\n\tset compareFunc(v) {\n\t\tif (this._compareFunc !== v) {\n\t\t\tthis._compareFunc = v;\n\t\t\tthis._parameterFlags |= 64;\n\t\t}\n\t}\n\n\tget anisotropy() {\n\t\treturn this._anisotropy;\n\t}\n\n\tset anisotropy(v) {\n\t\tif (this._anisotropy !== v) {\n\t\t\tthis._anisotropy = v;\n\t\t\tthis._parameterFlags |= 128;\n\t\t}\n\t}\n\n\tget autoMipmap() {\n\t\treturn this._mipmaps;\n\t}\n\n\tset autoMipmap(v) {\n\t\tthis._mipmaps = v;\n\t}\n\n\tget mipmaps() {\n\t\treturn this._mipmaps;\n\t}\n\n\tset mipmaps(v) {\n\t\tif (this._mipmaps !== v) {\n\t\t\tthis._mipmaps = v;\n\t\t\tthis._minFilterDirty = true;\n\t\t\tif (v) this._needsMipmapsUpload = true;\n\t\t}\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tget depth() {\n\t\treturn this._depth;\n\t}\n\n\tget format() {\n\t\treturn this._format;\n\t}\n\n\tget cubemap() {\n\t\treturn this._cubemap;\n\t}\n\n\tget gpuSize() {\n\t\tvar mips = this.pot && this._mipmaps && !(this._compressed && this._levels.length === 1);\n\t\treturn Texture.calcGpuSize(this._width, this._height, this._depth, this._format, mips, this._cubemap);\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tget flipY() {\n\t\treturn this._flipY;\n\t}\n\n\tset flipY(flipY) {\n\t\tif (this._flipY !== flipY) {\n\t\t\tthis._flipY = flipY;\n\t\t\tthis._needsUpload = true;\n\t\t}\n\t}\n\n\tget premultiplyAlpha() {\n\t\treturn this._premultiplyAlpha;\n\t}\n\n\tset premultiplyAlpha(premultiplyAlpha) {\n\t\tif (this._premultiplyAlpha !== premultiplyAlpha) {\n\t\t\tthis._premultiplyAlpha = premultiplyAlpha;\n\t\t\tthis._needsUpload = true;\n\t\t}\n\t}\n\n\tget pot() {\n\t\treturn math.powerOfTwo(this._width) && math.powerOfTwo(this._height);\n\t}\n\n\tstatic calcGpuSize(width, height, depth, format, mipmaps, cubemap) {\n\t\tif (!_pixelSizeTable) {\n\t\t\t_pixelSizeTable = [];\n\t\t\t_pixelSizeTable[PIXELFORMAT_A8] = 1;\n\t\t\t_pixelSizeTable[PIXELFORMAT_L8] = 1;\n\t\t\t_pixelSizeTable[PIXELFORMAT_L8_A8] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R5_G6_B5] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R5_G5_B5_A1] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R4_G4_B4_A4] = 2;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R8_G8_B8] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R8_G8_B8_A8] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGB16F] = 8;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGBA16F] = 8;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGB32F] = 16;\n\t\t\t_pixelSizeTable[PIXELFORMAT_RGBA32F] = 16;\n\t\t\t_pixelSizeTable[PIXELFORMAT_R32F] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_DEPTH] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_DEPTHSTENCIL] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_111110F] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_SRGB] = 4;\n\t\t\t_pixelSizeTable[PIXELFORMAT_SRGBA] = 4;\n\t\t}\n\n\t\tif (!_blockSizeTable) {\n\t\t\t_blockSizeTable = [];\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC2_RGB] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_2BPP_RGB_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_2BPP_RGBA_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_4BPP_RGB_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_PVRTC_4BPP_RGBA_1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT1] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ATC_RGB] = 8;\n\t\t\t_blockSizeTable[PIXELFORMAT_ETC2_RGBA] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT3] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_DXT5] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_ASTC_4x4] = 16;\n\t\t\t_blockSizeTable[PIXELFORMAT_ATC_RGBA] = 16;\n\t\t}\n\n\t\tvar pixelSize = _pixelSizeTable.hasOwnProperty(format) ? _pixelSizeTable[format] : 0;\n\t\tvar blockSize = _blockSizeTable.hasOwnProperty(format) ? _blockSizeTable[format] : 0;\n\t\tvar result = 0;\n\n\t\twhile (1) {\n\t\t\tif (pixelSize > 0) {\n\t\t\t\tresult += width * height * depth * pixelSize;\n\t\t\t} else {\n\t\t\t\tvar blockWidth = Math.floor((width + 3) / 4);\n\t\t\t\tvar blockHeight = Math.floor((height + 3) / 4);\n\t\t\t\tvar blockDepth = Math.floor((depth + 3) / 4);\n\n\t\t\t\tif (format === PIXELFORMAT_PVRTC_2BPP_RGB_1 || format === PIXELFORMAT_PVRTC_2BPP_RGBA_1) {\n\t\t\t\t\tblockWidth = Math.max(Math.floor(blockWidth / 2), 1);\n\t\t\t\t}\n\n\t\t\t\tresult += blockWidth * blockHeight * blockDepth * blockSize;\n\t\t\t}\n\n\t\t\tif (!mipmaps || width === 1 && height === 1 && depth === 1) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\twidth = Math.max(Math.floor(width / 2), 1);\n\t\t\theight = Math.max(Math.floor(height / 2), 1);\n\t\t\tdepth = Math.max(Math.floor(depth / 2), 1);\n\t\t}\n\n\t\treturn result * (cubemap ? 6 : 1);\n\t}\n\n\tdestroy() {\n\t\tif (this.device) {\n\t\t\tthis.device.destroyTexture(this);\n\t\t}\n\n\t\tthis.device = null;\n\t\tthis._levels = this._cubemap ? [[null, null, null, null, null, null]] : [null];\n\t}\n\n\tdirtyAll() {\n\t\tthis._levelsUpdated = this._cubemap ? [[true, true, true, true, true, true]] : [true];\n\t\tthis._needsUpload = true;\n\t\tthis._needsMipmapsUpload = this._mipmaps;\n\t\tthis._mipmapsUploaded = false;\n\t\tthis._parameterFlags = 255;\n\t}\n\n\tlock(options = {}) {\n\t\tif (options.level === undefined) {\n\t\t\toptions.level = 0;\n\t\t}\n\n\t\tif (options.face === undefined) {\n\t\t\toptions.face = 0;\n\t\t}\n\n\t\tif (options.mode === undefined) {\n\t\t\toptions.mode = TEXTURELOCK_WRITE;\n\t\t}\n\n\t\tthis._lockedLevel = options.level;\n\n\t\tif (this._levels[options.level] === null) {\n\t\t\tswitch (this._format) {\n\t\t\t\tcase PIXELFORMAT_A8:\n\t\t\t\tcase PIXELFORMAT_L8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_L8_A8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 2);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R5_G6_B5:\n\t\t\t\tcase PIXELFORMAT_R5_G5_B5_A1:\n\t\t\t\tcase PIXELFORMAT_R4_G4_B4_A4:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R8_G8_B8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_R8_G8_B8_A8:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_DXT1:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(Math.floor((this._width + 3) / 4) * Math.floor((this._height + 3) / 4) * 8 * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_DXT3:\n\t\t\t\tcase PIXELFORMAT_DXT5:\n\t\t\t\t\tthis._levels[options.level] = new Uint8Array(Math.floor((this._width + 3) / 4) * Math.floor((this._height + 3) / 4) * 16 * this._depth);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\t\tthis._levels[options.level] = new Float32Array(this._width * this._height * this._depth * 3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\t\tthis._levels[options.level] = new Uint16Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\t\tthis._levels[options.level] = new Float32Array(this._width * this._height * this._depth * 4);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this._levels[options.level];\n\t}\n\n\tsetSource(source, mipLevel = 0) {\n\t\tvar i;\n\t\tvar invalid = false;\n\t\tvar width, height;\n\n\t\tif (this._cubemap) {\n\t\t\tif (source[0]) {\n\t\t\t\twidth = source[0].width || 0;\n\t\t\t\theight = source[0].height || 0;\n\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tvar face = source[i];\n\n\t\t\t\t\tif (!face || face.width !== width || face.height !== height || !this.device._isBrowserInterface(face)) {\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinvalid = true;\n\t\t\t}\n\n\t\t\tif (!invalid) {\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tif (this._levels[mipLevel][i] !== source[i]) this._levelsUpdated[mipLevel][i] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.device._isBrowserInterface(source)) invalid = true;\n\n\t\t\tif (!invalid) {\n\t\t\t\tif (source !== this._levels[mipLevel]) this._levelsUpdated[mipLevel] = true;\n\t\t\t\twidth = source.width;\n\t\t\t\theight = source.height;\n\t\t\t}\n\t\t}\n\n\t\tif (invalid) {\n\t\t\tthis._width = 4;\n\t\t\tthis._height = 4;\n\n\t\t\tif (this._cubemap) {\n\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\tthis._levels[mipLevel][i] = null;\n\t\t\t\t\tthis._levelsUpdated[mipLevel][i] = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._levels[mipLevel] = null;\n\t\t\t\tthis._levelsUpdated[mipLevel] = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (mipLevel === 0) {\n\t\t\t\tthis._width = width;\n\t\t\t\tthis._height = height;\n\t\t\t}\n\n\t\t\tthis._levels[mipLevel] = source;\n\t\t}\n\n\t\tif (this._invalid !== invalid || !invalid) {\n\t\t\tthis._invalid = invalid;\n\t\t\tthis.upload();\n\t\t}\n\t}\n\n\tgetSource(mipLevel = 0) {\n\t\treturn this._levels[mipLevel];\n\t}\n\n\tunlock() {\n\t\tthis.upload();\n\t\tthis._lockedLevel = -1;\n\t}\n\n\tupload() {\n\t\tthis._needsUpload = true;\n\t\tthis._needsMipmapsUpload = this._mipmaps;\n\t}\n\n\tgetDds() {\n\t\tvar fsize = 128;\n\t\tvar i = 0;\n\t\tvar j;\n\t\tvar face;\n\n\t\twhile (this._levels[i]) {\n\t\t\tvar mipSize;\n\n\t\t\tif (!this.cubemap) {\n\t\t\t\tmipSize = this._levels[i].length;\n\n\t\t\t\tif (!mipSize) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfsize += mipSize;\n\t\t\t} else {\n\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\tif (!this._levels[i][face]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tmipSize = this._levels[i][face].length;\n\n\t\t\t\t\tif (!mipSize) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfsize += mipSize;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfsize += this._levels[i].length;\n\t\t\ti++;\n\t\t}\n\n\t\tvar buff = new ArrayBuffer(fsize);\n\t\tvar header = new Uint32Array(buff, 0, 128 / 4);\n\t\tvar DDS_MAGIC = 542327876;\n\t\tvar DDS_HEADER_SIZE = 124;\n\t\tvar DDS_FLAGS_REQUIRED = 0x01 | 0x02 | 0x04 | 0x1000 | 0x80000;\n\t\tvar DDS_FLAGS_MIPMAP = 0x20000;\n\t\tvar DDS_PIXELFORMAT_SIZE = 32;\n\t\tvar DDS_PIXELFLAGS_RGBA8 = 0x01 | 0x40;\n\t\tvar DDS_CAPS_REQUIRED = 0x1000;\n\t\tvar DDS_CAPS_MIPMAP = 0x400000;\n\t\tvar DDS_CAPS_COMPLEX = 0x8;\n\t\tvar DDS_CAPS2_CUBEMAP = 0x200 | 0x400 | 0x800 | 0x1000 | 0x2000 | 0x4000 | 0x8000;\n\t\tvar flags = DDS_FLAGS_REQUIRED;\n\t\tif (this._levels.length > 1) flags |= DDS_FLAGS_MIPMAP;\n\t\tvar caps = DDS_CAPS_REQUIRED;\n\t\tif (this._levels.length > 1) caps |= DDS_CAPS_MIPMAP;\n\t\tif (this._levels.length > 1 || this.cubemap) caps |= DDS_CAPS_COMPLEX;\n\t\tvar caps2 = this.cubemap ? DDS_CAPS2_CUBEMAP : 0;\n\t\theader[0] = DDS_MAGIC;\n\t\theader[1] = DDS_HEADER_SIZE;\n\t\theader[2] = flags;\n\t\theader[3] = this.height;\n\t\theader[4] = this.width;\n\t\theader[5] = this.width * this.height * 4;\n\t\theader[6] = 0;\n\t\theader[7] = this._levels.length;\n\n\t\tfor (i = 0; i < 11; i++) header[8 + i] = 0;\n\n\t\theader[19] = DDS_PIXELFORMAT_SIZE;\n\t\theader[20] = DDS_PIXELFLAGS_RGBA8;\n\t\theader[21] = 0;\n\t\theader[22] = 32;\n\t\theader[23] = 0x00FF0000;\n\t\theader[24] = 0x0000FF00;\n\t\theader[25] = 0x000000FF;\n\t\theader[26] = 0xFF000000;\n\t\theader[27] = caps;\n\t\theader[28] = caps2;\n\t\theader[29] = 0;\n\t\theader[30] = 0;\n\t\theader[31] = 0;\n\t\tvar offset = 128;\n\t\tvar level, mip;\n\n\t\tif (!this.cubemap) {\n\t\t\tfor (i = 0; i < this._levels.length; i++) {\n\t\t\t\tlevel = this._levels[i];\n\t\t\t\tmip = new Uint8Array(buff, offset, level.length);\n\n\t\t\t\tfor (j = 0; j < level.length; j++) mip[j] = level[j];\n\n\t\t\t\toffset += level.length;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\tfor (i = 0; i < this._levels.length; i++) {\n\t\t\t\t\tlevel = this._levels[i][face];\n\t\t\t\t\tmip = new Uint8Array(buff, offset, level.length);\n\n\t\t\t\t\tfor (j = 0; j < level.length; j++) mip[j] = level[j];\n\n\t\t\t\t\toffset += level.length;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn buff;\n\t}\n\n}\n\nconst tempVec3 = new Vec3();\nconst tempMin3 = new Vec3();\nconst tempMax3 = new Vec3();\nconst tempBox = new BoundingBox();\nconst epsilon = 0.000001;\nconst oneDiv255 = 1 / 255;\n\nfunction packFloatToBytes(value, array, offset, numBytes) {\n\tconst enc1 = 255.0 * value % 1;\n\tarray[offset + 0] = Math.round((value % 1 - oneDiv255 * enc1) * 255);\n\n\tif (numBytes > 1) {\n\t\tconst enc2 = 65025.0 * value % 1;\n\t\tarray[offset + 1] = Math.round((enc1 - oneDiv255 * enc2) * 255);\n\n\t\tif (numBytes > 2) {\n\t\t\tconst enc3 = 16581375.0 * value % 1;\n\t\t\tarray[offset + 2] = Math.round((enc2 - oneDiv255 * enc3) * 255);\n\n\t\t\tif (numBytes > 3) {\n\t\t\t\tarray[offset + 3] = Math.round(enc3 * 255);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ClusterLight {\n\tconstructor() {\n\t\tthis.light = null;\n\t\tthis.min = new Vec3();\n\t\tthis.max = new Vec3();\n\t}\n\n}\n\nclass WorldClusters {\n\tstatic init(device) {\n\t\tif (device.extTextureFloat) {\n\t\t\tWorldClusters.lightTextureFormat = WorldClusters.FORMAT_FLOAT;\n\t\t} else {\n\t\t\tWorldClusters.lightTextureFormat = WorldClusters.FORMAT_8BIT;\n\t\t}\n\t}\n\n\tconstructor(device, cells, maxCellLightCount) {\n\t\tthis.device = device;\n\t\tthis.name = \"Untitled\";\n\t\tthis.reportCount = 0;\n\t\tthis._bounds = new BoundingBox();\n\t\tthis.boundsMin = new Vec3();\n\t\tthis.boundsMax = new Vec3();\n\t\tthis.boundsDelta = new Vec3();\n\t\tthis._cells = new Vec3();\n\t\tthis._cellsLimit = new Vec3();\n\t\tthis.cells = cells;\n\t\tthis._maxCellLightCount = 0;\n\t\tthis._pixelsPerCellCount = 0;\n\t\tthis.maxCellLightCount = maxCellLightCount;\n\t\tthis._maxAttenuation = 0;\n\t\tthis._maxColorValue = 0;\n\t\tthis._usedLights = [];\n\n\t\tthis._usedLights.push(new ClusterLight());\n\n\t\tthis.registerUniforms(device);\n\t\tthis.initLightsTexture();\n\t}\n\n\tdestroy() {\n\t\tif (this.lightsTexture8) {\n\t\t\tthis.lightsTexture8.destroy();\n\t\t\tthis.lightsTexture8 = null;\n\t\t}\n\n\t\tif (this.lightsTextureFloat) {\n\t\t\tthis.lightsTextureFloat.destroy();\n\t\t\tthis.lightsTextureFloat = null;\n\t\t}\n\n\t\tthis.releaseClusterTexture();\n\t}\n\n\treleaseClusterTexture() {\n\t\tif (this.clusterTexture) {\n\t\t\tthis.clusterTexture.destroy();\n\t\t\tthis.clusterTexture = null;\n\t\t}\n\t}\n\n\tregisterUniforms(device) {\n\t\tthis._clusterWorldTextureId = device.scope.resolve(\"clusterWorldTexture\");\n\t\tthis._clusterPixelsPerCellId = device.scope.resolve(\"clusterPixelsPerCell\");\n\t\tthis._clusterTextureSizeId = device.scope.resolve(\"clusterTextureSize\");\n\t\tthis._clusterTextureSizeData = new Float32Array(3);\n\t\tthis._clusterBoundsMinId = device.scope.resolve(\"clusterBoundsMin\");\n\t\tthis._clusterBoundsMinData = new Float32Array(3);\n\t\tthis._clusterBoundsDeltaId = device.scope.resolve(\"clusterBoundsDelta\");\n\t\tthis._clusterBoundsDeltaData = new Float32Array(3);\n\t\tthis._clusterCellsCountByBoundsSizeId = device.scope.resolve(\"clusterCellsCountByBoundsSize\");\n\t\tthis._clusterCellsCountByBoundsSizeData = new Float32Array(3);\n\t\tthis._clusterCellsDotId = device.scope.resolve(\"clusterCellsDot\");\n\t\tthis._clusterCellsDotData = new Float32Array(3);\n\t\tthis._clusterCellsMaxId = device.scope.resolve(\"clusterCellsMax\");\n\t\tthis._clusterCellsMaxData = new Float32Array(3);\n\t\tthis._clusterCompressionLimit0Id = device.scope.resolve(\"clusterCompressionLimit0\");\n\t\tthis._clusterCompressionLimit0Data = new Float32Array(2);\n\t}\n\n\tget maxCellLightCount() {\n\t\treturn this._maxCellLightCount;\n\t}\n\n\tset maxCellLightCount(count) {\n\t\tconst maxCellLightCount = math.roundUp(count, 4);\n\n\t\tif (maxCellLightCount !== this._maxCellLightCount) {\n\t\t\tthis._maxCellLightCount = maxCellLightCount;\n\t\t\tthis._pixelsPerCellCount = this._maxCellLightCount / 4;\n\t\t\tthis._cellsDirty = true;\n\t\t}\n\t}\n\n\tget cells() {\n\t\treturn this._cells;\n\t}\n\n\tset cells(value) {\n\t\ttempVec3.copy(value).floor();\n\n\t\tif (!this._cells.equals(tempVec3)) {\n\t\t\tthis._cells.copy(tempVec3);\n\n\t\t\tthis._cellsLimit.copy(tempVec3).sub(Vec3.ONE);\n\n\t\t\tthis._cellsDirty = true;\n\t\t}\n\t}\n\n\tcreateTexture(width, height, format) {\n\t\tconst tex = new Texture(this.device, {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tmipmaps: false,\n\t\t\tformat: format,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tanisotropy: 1\n\t\t});\n\t\treturn tex;\n\t}\n\n\tinitLightsTexture() {\n\t\tthis.maxLights = 255;\n\t\tlet pixelsPerLight8 = 4;\n\t\tlet pixelsPerLightFloat = 0;\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tpixelsPerLightFloat = 2;\n\t\t} else {\n\t\t\tpixelsPerLight8 = 11;\n\t\t}\n\n\t\tthis.lights8 = new Uint8ClampedArray(4 * pixelsPerLight8 * this.maxLights);\n\t\tthis.lightsTexture8 = this.createTexture(pixelsPerLight8, this.maxLights, PIXELFORMAT_R8_G8_B8_A8);\n\t\tthis._lightsTexture8Id = this.device.scope.resolve(\"lightsTexture8\");\n\n\t\tif (pixelsPerLightFloat) {\n\t\t\tthis.lightsFloat = new Float32Array(4 * pixelsPerLightFloat * this.maxLights);\n\t\t\tthis.lightsTextureFloat = this.createTexture(pixelsPerLightFloat, this.maxLights, PIXELFORMAT_RGBA32F);\n\t\t\tthis._lightsTextureFloatId = this.device.scope.resolve(\"lightsTextureFloat\");\n\t\t} else {\n\t\t\tthis.lightsFloat = null;\n\t\t\tthis.lightsTextureFloat = null;\n\t\t\tthis._lightsTextureFloatId = undefined;\n\t\t}\n\n\t\tthis._lightsTextureInvSizeId = this.device.scope.resolve(\"lightsTextureInvSize\");\n\t\tthis._lightsTextureInvSizeData = new Float32Array(4);\n\t\tthis._lightsTextureInvSizeData[0] = pixelsPerLightFloat ? 1.0 / this.lightsTextureFloat.width : 0;\n\t\tthis._lightsTextureInvSizeData[1] = pixelsPerLightFloat ? 1.0 / this.lightsTextureFloat.height : 0;\n\t\tthis._lightsTextureInvSizeData[2] = 1.0 / this.lightsTexture8.width;\n\t\tthis._lightsTextureInvSizeData[3] = 1.0 / this.lightsTexture8.height;\n\t}\n\n\tgetSpotDirection(direction, spot) {\n\t\tconst mat = spot._node.getWorldTransform();\n\n\t\tmat.getY(direction).mulScalar(-1);\n\t\tdirection.normalize();\n\t}\n\n\taddLightData(light, lightIndex, gammaCorrection) {\n\t\tconst isSpot = light._type === LIGHTTYPE_SPOT;\n\n\t\tconst pos = light._node.getPosition();\n\n\t\tconst data8 = this.lights8;\n\t\tlet data8Index = lightIndex * this.lightsTexture8.width * 4;\n\t\tdata8[data8Index + 0] = isSpot ? 255 : 0;\n\t\tdata8[data8Index + 1] = light._shape * 255;\n\t\tdata8[data8Index + 2] = light._falloffMode * 255;\n\t\tdata8Index += 4;\n\t\tconst invMaxColorValue = 1.0 / this._maxColorValue;\n\t\tconst color = gammaCorrection ? light._linearFinalColor : light._finalColor;\n\t\tpackFloatToBytes(color[0] * invMaxColorValue, data8, data8Index + 0, 2);\n\t\tpackFloatToBytes(color[1] * invMaxColorValue, data8, data8Index + 2, 2);\n\t\tpackFloatToBytes(color[2] * invMaxColorValue, data8, data8Index + 4, 2);\n\t\tdata8Index += 8;\n\n\t\tif (isSpot) {\n\t\t\tpackFloatToBytes(light._innerConeAngleCos * (0.5 - epsilon) + 0.5, data8, data8Index + 0, 2);\n\t\t\tpackFloatToBytes(light._outerConeAngleCos * (0.5 - epsilon) + 0.5, data8, data8Index + 2, 2);\n\t\t}\n\n\t\tdata8Index += 4;\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tconst dataFloat = this.lightsFloat;\n\t\t\tconst dataFloatIndex = lightIndex * this.lightsTextureFloat.width * 4;\n\t\t\tdataFloat[dataFloatIndex + 0] = pos.x;\n\t\t\tdataFloat[dataFloatIndex + 1] = pos.y;\n\t\t\tdataFloat[dataFloatIndex + 2] = pos.z;\n\t\t\tdataFloat[dataFloatIndex + 3] = light.attenuationEnd;\n\n\t\t\tif (isSpot) {\n\t\t\t\tthis.getSpotDirection(tempVec3, light);\n\t\t\t\tdataFloat[dataFloatIndex + 4] = tempVec3.x;\n\t\t\t\tdataFloat[dataFloatIndex + 5] = tempVec3.y;\n\t\t\t\tdataFloat[dataFloatIndex + 6] = tempVec3.z;\n\t\t\t}\n\t\t} else {\n\t\t\tconst normPos = tempVec3.sub2(pos, this.boundsMin).div(this.boundsDelta);\n\t\t\tpackFloatToBytes(normPos.x, data8, data8Index + 0, 4);\n\t\t\tpackFloatToBytes(normPos.y, data8, data8Index + 4, 4);\n\t\t\tpackFloatToBytes(normPos.z, data8, data8Index + 8, 4);\n\t\t\tpackFloatToBytes(light.attenuationEnd / this._maxAttenuation, data8, data8Index + 12, 4);\n\t\t\tdata8Index += 16;\n\n\t\t\tif (isSpot) {\n\t\t\t\tthis.getSpotDirection(tempVec3, light);\n\t\t\t\tpackFloatToBytes(tempVec3.x * (0.5 - epsilon) + 0.5, data8, data8Index + 0, 4);\n\t\t\t\tpackFloatToBytes(tempVec3.y * (0.5 - epsilon) + 0.5, data8, data8Index + 4, 4);\n\t\t\t\tpackFloatToBytes(tempVec3.z * (0.5 - epsilon) + 0.5, data8, data8Index + 8, 4);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateCells() {\n\t\tif (this._cellsDirty) {\n\t\t\tthis._cellsDirty = false;\n\t\t\tconst cx = this._cells.x;\n\t\t\tconst cy = this._cells.y;\n\t\t\tconst cz = this._cells.z;\n\t\t\tconst numCells = cx * cy * cz;\n\t\t\tconst totalPixels = this._pixelsPerCellCount * numCells;\n\t\t\tlet width = Math.ceil(Math.sqrt(totalPixels));\n\t\t\twidth = math.roundUp(width, this._pixelsPerCellCount);\n\t\t\tconst height = Math.ceil(totalPixels / width);\n\n\t\t\tthis._clusterCellsMaxData[0] = cx;\n\t\t\tthis._clusterCellsMaxData[1] = cy;\n\t\t\tthis._clusterCellsMaxData[2] = cz;\n\t\t\tthis._clusterCellsDotData[0] = this._pixelsPerCellCount;\n\t\t\tthis._clusterCellsDotData[1] = cx * cz * this._pixelsPerCellCount;\n\t\t\tthis._clusterCellsDotData[2] = cx * this._pixelsPerCellCount;\n\t\t\tthis.clusters = new Uint8ClampedArray(4 * totalPixels);\n\t\t\tthis.counts = new Int32Array(numCells);\n\t\t\tthis._clusterTextureSizeData[0] = width;\n\t\t\tthis._clusterTextureSizeData[1] = 1.0 / width;\n\t\t\tthis._clusterTextureSizeData[2] = 1.0 / height;\n\t\t\tthis.releaseClusterTexture();\n\t\t\tthis.clusterTexture = this.createTexture(width, height, PIXELFORMAT_R8_G8_B8_A8);\n\t\t}\n\t}\n\n\tuploadTextures() {\n\t\tlet pixels = this.clusterTexture.lock();\n\t\tpixels.set(this.clusters);\n\t\tthis.clusterTexture.unlock();\n\n\t\tif (this.lightsTextureFloat) {\n\t\t\tpixels = this.lightsTextureFloat.lock();\n\t\t\tpixels.set(this.lightsFloat);\n\t\t\tthis.lightsTextureFloat.unlock();\n\t\t}\n\n\t\tpixels = this.lightsTexture8.lock();\n\t\tpixels.set(this.lights8);\n\t\tthis.lightsTexture8.unlock();\n\t}\n\n\tupdateUniforms() {\n\t\tthis._clusterWorldTextureId.setValue(this.clusterTexture);\n\n\t\tthis._lightsTexture8Id.setValue(this.lightsTexture8);\n\n\t\tif (WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT) {\n\t\t\tthis._lightsTextureFloatId.setValue(this.lightsTextureFloat);\n\t\t}\n\n\t\tconst boundsDelta = this.boundsDelta;\n\t\tthis._clusterCellsCountByBoundsSizeData[0] = this._cells.x / boundsDelta.x;\n\t\tthis._clusterCellsCountByBoundsSizeData[1] = this._cells.y / boundsDelta.y;\n\t\tthis._clusterCellsCountByBoundsSizeData[2] = this._cells.z / boundsDelta.z;\n\n\t\tthis._clusterCellsCountByBoundsSizeId.setValue(this._clusterCellsCountByBoundsSizeData);\n\n\t\tthis._clusterBoundsMinData[0] = this.boundsMin.x;\n\t\tthis._clusterBoundsMinData[1] = this.boundsMin.y;\n\t\tthis._clusterBoundsMinData[2] = this.boundsMin.z;\n\t\tthis._clusterBoundsDeltaData[0] = boundsDelta.x;\n\t\tthis._clusterBoundsDeltaData[1] = boundsDelta.y;\n\t\tthis._clusterBoundsDeltaData[2] = boundsDelta.z;\n\t\tthis._clusterCompressionLimit0Data[0] = this._maxAttenuation;\n\t\tthis._clusterCompressionLimit0Data[1] = this._maxColorValue;\n\n\t\tthis._clusterPixelsPerCellId.setValue(this._pixelsPerCellCount);\n\n\t\tthis._lightsTextureInvSizeId.setValue(this._lightsTextureInvSizeData);\n\n\t\tthis._clusterTextureSizeId.setValue(this._clusterTextureSizeData);\n\n\t\tthis._clusterBoundsMinId.setValue(this._clusterBoundsMinData);\n\n\t\tthis._clusterBoundsDeltaId.setValue(this._clusterBoundsDeltaData);\n\n\t\tthis._clusterCellsDotId.setValue(this._clusterCellsDotData);\n\n\t\tthis._clusterCellsMaxId.setValue(this._clusterCellsMaxData);\n\n\t\tthis._clusterCompressionLimit0Id.setValue(this._clusterCompressionLimit0Data);\n\t}\n\n\tevalLightCellMinMax(clusteredLight, min, max) {\n\t\tmin.copy(clusteredLight.min);\n\t\tmin.sub(this.boundsMin);\n\t\tmin.div(this.boundsDelta);\n\t\tmin.mul2(min, this.cells);\n\t\tmin.floor();\n\t\tmax.copy(clusteredLight.max);\n\t\tmax.sub(this.boundsMin);\n\t\tmax.div(this.boundsDelta);\n\t\tmax.mul2(max, this.cells);\n\t\tmax.ceil();\n\t\tmin.max(Vec3.ZERO);\n\t\tmax.min(this._cellsLimit);\n\t}\n\n\tcollectLights(lights) {\n\t\tconst usedLights = this._usedLights;\n\t\tlet lightIndex = 1;\n\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tconst light = lights[i];\n\n\t\t\tif (light.enabled && light.type !== LIGHTTYPE_DIRECTIONAL && light.visibleThisFrame && light.intensity > 0) {\n\t\t\t\tif (lightIndex < this.maxLights) {\n\t\t\t\t\tlet clusteredLight;\n\n\t\t\t\t\tif (lightIndex < usedLights.length) {\n\t\t\t\t\t\tclusteredLight = usedLights[lightIndex];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclusteredLight = new ClusterLight();\n\t\t\t\t\t\tusedLights.push(clusteredLight);\n\t\t\t\t\t}\n\n\t\t\t\t\tclusteredLight.light = light;\n\t\t\t\t\tlight.getBoundingBox(tempBox);\n\t\t\t\t\tclusteredLight.min.copy(tempBox.getMin());\n\t\t\t\t\tclusteredLight.max.copy(tempBox.getMax());\n\t\t\t\t\tlightIndex++;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Clustered lighting: more than \" + (this.maxLights - 1) + \" lights in the frame, ignoring some.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tusedLights.length = lightIndex;\n\t}\n\n\tevaluateBounds() {\n\t\tconst usedLights = this._usedLights;\n\t\tconst min = this.boundsMin;\n\t\tconst max = this.boundsMax;\n\n\t\tif (usedLights.length > 1) {\n\t\t\tmin.copy(usedLights[1].min);\n\t\t\tmax.copy(usedLights[1].max);\n\n\t\t\tfor (let i = 2; i < usedLights.length; i++) {\n\t\t\t\tmin.min(usedLights[i].min);\n\t\t\t\tmax.max(usedLights[i].max);\n\t\t\t}\n\t\t} else {\n\t\t\tmin.set(0, 0, 0);\n\t\t\tmax.set(1, 1, 1);\n\t\t}\n\n\t\tthis.boundsDelta.sub2(max, min);\n\t}\n\n\tevaluateCompressionLimits(gammaCorrection) {\n\t\tlet maxAttenuation = 0;\n\t\tlet maxColorValue = 0;\n\t\tconst usedLights = this._usedLights;\n\n\t\tfor (let i = 1; i < usedLights.length; i++) {\n\t\t\tconst light = usedLights[i].light;\n\t\t\tmaxAttenuation = Math.max(light.attenuationEnd, maxAttenuation);\n\t\t\tconst color = gammaCorrection ? light._linearFinalColor : light._finalColor;\n\t\t\tmaxColorValue = Math.max(color[0], maxColorValue);\n\t\t\tmaxColorValue = Math.max(color[1], maxColorValue);\n\t\t\tmaxColorValue = Math.max(color[2], maxColorValue);\n\t\t}\n\n\t\tthis._maxAttenuation = maxAttenuation + epsilon;\n\t\tthis._maxColorValue = maxColorValue + epsilon;\n\t}\n\n\tupdateClusters(gammaCorrection) {\n\t\tthis.counts.fill(0);\n\t\tthis.clusters.fill(0);\n\t\tconst divX = this._cells.x;\n\t\tconst divZ = this._cells.z;\n\t\tconst counts = this.counts;\n\t\tconst limit = this._maxCellLightCount;\n\t\tconst clusters = this.clusters;\n\t\tconst pixelsPerCellCount = this._pixelsPerCellCount;\n\t\tconst usedLights = this._usedLights;\n\n\t\tfor (let i = 1; i < usedLights.length; i++) {\n\t\t\tconst clusteredLight = usedLights[i];\n\t\t\tconst light = clusteredLight.light;\n\t\t\tthis.addLightData(light, i, gammaCorrection);\n\t\t\tthis.evalLightCellMinMax(clusteredLight, tempMin3, tempMax3);\n\t\t\tconst xStart = tempMin3.x;\n\t\t\tconst xEnd = tempMax3.x;\n\t\t\tconst yStart = tempMin3.y;\n\t\t\tconst yEnd = tempMax3.y;\n\t\t\tconst zStart = tempMin3.z;\n\t\t\tconst zEnd = tempMax3.z;\n\n\t\t\tfor (let x = xStart; x <= xEnd; x++) {\n\t\t\t\tfor (let z = zStart; z <= zEnd; z++) {\n\t\t\t\t\tfor (let y = yStart; y <= yEnd; y++) {\n\t\t\t\t\t\tconst clusterIndex = x + divX * (z + y * divZ);\n\t\t\t\t\t\tconst count = counts[clusterIndex];\n\n\t\t\t\t\t\tif (count < limit) {\n\t\t\t\t\t\t\tclusters[pixelsPerCellCount * clusterIndex * 4 + count] = i;\n\t\t\t\t\t\t\tcounts[clusterIndex] = count + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate(lights, gammaCorrection) {\n\t\tthis.updateCells();\n\t\tthis.collectLights(lights);\n\t\tthis.evaluateBounds();\n\t\tthis.evaluateCompressionLimits(gammaCorrection);\n\t\tthis.updateClusters(gammaCorrection);\n\t\tthis.uploadTextures();\n\t}\n\n\tactivate() {\n\t\tthis.updateUniforms();\n\t}\n\n}\n\nWorldClusters.FORMAT_FLOAT = 0;\nWorldClusters.FORMAT_8BIT = 1;\nWorldClusters.lightTextureFormat = WorldClusters.FORMAT_8BIT;\n\nconst set = {\n\tequals: function (set1, set2) {\n\t\tif (set1.size !== set2.size) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (const item of set1) {\n\t\t\tif (!set2.has(item)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n};\n\nclass RenderAction {\n\tconstructor() {\n\t\tthis.layerIndex = 0;\n\t\tthis.cameraIndex = 0;\n\t\tthis.camera = null;\n\t\tthis.renderTarget = null;\n\t\tthis.lightClusters = null;\n\t\tthis.clearColor = false;\n\t\tthis.clearDepth = false;\n\t\tthis.clearStencil = false;\n\t\tthis.triggerPostprocess = false;\n\t\tthis.firstCameraUse = false;\n\t\tthis.directionalLightsSet = new Set();\n\t\tthis.directionalLights = [];\n\t\tthis.directionalLightsIndices = [];\n\t}\n\n\treset() {\n\t\tthis.lightClusters = null;\n\t\tthis.directionalLightsSet.clear();\n\t\tthis.directionalLights.length = 0;\n\t\tthis.directionalLightsIndices.length = 0;\n\t}\n\n\tcollectDirectionalLights(cameraLayers, dirLights, allLights) {\n\t\tthis.directionalLightsSet.clear();\n\t\tthis.directionalLights.length = 0;\n\t\tthis.directionalLightsIndices.length = 0;\n\n\t\tfor (let i = 0; i < dirLights.length; i++) {\n\t\t\tconst light = dirLights[i];\n\n\t\t\tif (light.castShadows) {\n\t\t\t\tfor (let l = 0; l < cameraLayers.length; l++) {\n\t\t\t\t\tif (cameraLayers[l]._splitLights[LIGHTTYPE_DIRECTIONAL].indexOf(light) >= 0) {\n\t\t\t\t\t\tif (!this.directionalLightsSet.has(light)) {\n\t\t\t\t\t\t\tthis.directionalLightsSet.add(light);\n\t\t\t\t\t\t\tthis.directionalLights.push(light);\n\t\t\t\t\t\t\tconst lightIndex = allLights.indexOf(light);\n\t\t\t\t\t\t\tthis.directionalLightsIndices.push(lightIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass LightCompositionData {\n\tconstructor() {\n\t\tthis.shadowCastersSet = new Set();\n\t\tthis.shadowCastersList = [];\n\t}\n\n\tclearShadowCasters() {\n\t\tthis.shadowCastersSet.clear();\n\t\tthis.shadowCastersList.length = 0;\n\t}\n\n\taddShadowCasters(casters) {\n\t\tfor (let i = 0; i < casters.length; i++) {\n\t\t\tconst item = casters[i];\n\n\t\t\tif (!this.shadowCastersSet.has(item)) {\n\t\t\t\tthis.shadowCastersSet.add(item);\n\t\t\t\tthis.shadowCastersList.push(item);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nlet currentApplication;\n\nfunction getApplication() {\n\treturn currentApplication;\n}\n\nfunction setApplication(app) {\n\tcurrentApplication = app;\n}\n\nconst tempSet$1 = new Set();\nconst tempClusterArray = [];\n\nclass LayerComposition extends EventHandler {\n\tconstructor(graphicsDevice, name = \"Untitled\") {\n\t\tvar _getApplication;\n\n\t\tsuper();\n\n\t\tif (typeof graphicsDevice === 'string') {\n\t\t\tgraphicsDevice = null;\n\t\t\tname = graphicsDevice;\n\t\t}\n\n\t\tthis.device = graphicsDevice || ((_getApplication = getApplication()) == null ? void 0 : _getApplication.graphicsDevice);\n\t\tthis.name = name;\n\t\tthis.logRenderActions = false;\n\t\tthis.layerList = [];\n\t\tthis.subLayerList = [];\n\t\tthis.subLayerEnabled = [];\n\t\tthis._opaqueOrder = {};\n\t\tthis._transparentOrder = {};\n\t\tthis._dirty = false;\n\t\tthis._dirtyBlend = false;\n\t\tthis._dirtyLights = false;\n\t\tthis._dirtyCameras = false;\n\t\tthis._meshInstances = [];\n\t\tthis._meshInstancesSet = new Set();\n\t\tthis._lights = [];\n\t\tthis._lightsMap = new Map();\n\t\tthis._lightCompositionData = [];\n\t\tthis._splitLights = [[], [], []];\n\t\tthis.cameras = [];\n\t\tthis._renderActions = [];\n\t\tthis._worldClusters = [];\n\t\tthis._emptyWorldClusters = null;\n\t\tthis._clusteredLightingCells = new Vec3(10, 3, 10);\n\t\tthis._clusteredLightingMaxLights = 64;\n\t}\n\n\tdestroy() {\n\t\tif (this._emptyWorldClusters) {\n\t\t\tthis._emptyWorldClusters.destroy();\n\n\t\t\tthis._emptyWorldClusters = null;\n\t\t}\n\n\t\tthis._worldClusters.forEach(cluster => cluster.destroy());\n\n\t\tthis._worldClusters = null;\n\t}\n\n\tget clusteredLightingCells() {\n\t\treturn this._clusteredLightingCells;\n\t}\n\n\tset clusteredLightingCells(value) {\n\t\tif (!this._clusteredLightingCells.equals(value)) {\n\t\t\tthis._clusteredLightingCells.copy(value);\n\n\t\t\tthis.updateWorldClusters();\n\t\t}\n\t}\n\n\tget clusteredLightingMaxLights() {\n\t\treturn this._clusteredLightingMaxLights;\n\t}\n\n\tset clusteredLightingMaxLights(value) {\n\t\tif (this._clusteredLightingMaxLights !== value) {\n\t\t\tthis._clusteredLightingMaxLights = value;\n\t\t\tthis.updateWorldClusters();\n\t\t}\n\t}\n\n\tupdateWorldClusters() {\n\t\tthis._worldClusters.forEach(cluster => {\n\t\t\tcluster.cells = this._clusteredLightingCells;\n\t\t\tcluster.maxCellLightCount = this._clusteredLightingMaxLights;\n\t\t});\n\t}\n\n\tget emptyWorldClusters() {\n\t\tif (!this._emptyWorldClusters) {\n\t\t\tthis._emptyWorldClusters = new WorldClusters(this.device, new Vec3(1, 1, 1), 4);\n\t\t\tthis._emptyWorldClusters.name = \"ClusterEmpty\";\n\n\t\t\tthis._emptyWorldClusters.update([], false);\n\t\t}\n\n\t\treturn this._emptyWorldClusters;\n\t}\n\n\t_splitLightsArray(target) {\n\t\tvar light;\n\t\tvar lights = target._lights;\n\t\ttarget._splitLights[LIGHTTYPE_DIRECTIONAL].length = 0;\n\t\ttarget._splitLights[LIGHTTYPE_OMNI].length = 0;\n\t\ttarget._splitLights[LIGHTTYPE_SPOT].length = 0;\n\n\t\tfor (var i = 0; i < lights.length; i++) {\n\t\t\tlight = lights[i];\n\n\t\t\tif (light.enabled) {\n\t\t\t\ttarget._splitLights[light._type].push(light);\n\t\t\t}\n\t\t}\n\t}\n\n\t_update() {\n\t\tvar i, j;\n\t\tvar layer;\n\t\tvar len = this.layerList.length;\n\t\tvar result = 0;\n\n\t\tif (!this._dirty || !this._dirtyLights || !this._dirtyCameras) {\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (layer._dirty) {\n\t\t\t\t\tthis._dirty = true;\n\t\t\t\t}\n\n\t\t\t\tif (layer._dirtyLights) {\n\t\t\t\t\tthis._dirtyLights = true;\n\t\t\t\t}\n\n\t\t\t\tif (layer._dirtyCameras) {\n\t\t\t\t\tthis._dirtyCameras = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction addUniqueMeshInstance(destArray, destSet, srcArray) {\n\t\t\tvar meshInst,\n\t\t\t\t\tmaterial,\n\t\t\t\t\tdirtyBlend = false;\n\t\t\tvar srcLen = srcArray.length;\n\n\t\t\tfor (var s = 0; s < srcLen; s++) {\n\t\t\t\tmeshInst = srcArray[s];\n\n\t\t\t\tif (!destSet.has(meshInst)) {\n\t\t\t\t\tdestSet.add(meshInst);\n\t\t\t\t\tdestArray.push(meshInst);\n\t\t\t\t\tmaterial = meshInst.material;\n\n\t\t\t\t\tif (material && material._dirtyBlend) {\n\t\t\t\t\t\tdirtyBlend = true;\n\t\t\t\t\t\tmaterial._dirtyBlend = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dirtyBlend;\n\t\t}\n\n\t\tif (this._dirty) {\n\t\t\tresult |= COMPUPDATED_INSTANCES;\n\t\t\tthis._meshInstances.length = 0;\n\n\t\t\tthis._meshInstancesSet.clear();\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (!layer.passThrough) {\n\t\t\t\t\tthis._dirtyBlend = addUniqueMeshInstance(this._meshInstances, this._meshInstancesSet, layer.opaqueMeshInstances) || this._dirtyBlend;\n\t\t\t\t\tthis._dirtyBlend = addUniqueMeshInstance(this._meshInstances, this._meshInstancesSet, layer.transparentMeshInstances) || this._dirtyBlend;\n\t\t\t\t}\n\n\t\t\t\tlayer._dirty = false;\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tfunction moveByBlendType(dest, src, moveTransparent) {\n\t\t\tvar material, isTransparent;\n\n\t\t\tfor (var s = 0; s < src.length;) {\n\t\t\t\tmaterial = src[s].material;\n\t\t\t\tisTransparent = material && material.blendType !== BLEND_NONE;\n\n\t\t\t\tif (isTransparent === moveTransparent) {\n\t\t\t\t\tdest.push(src[s]);\n\t\t\t\t\tsrc[s] = src[src.length - 1];\n\t\t\t\t\tsrc.length--;\n\t\t\t\t} else {\n\t\t\t\t\ts++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._dirtyBlend) {\n\t\t\tresult |= COMPUPDATED_BLEND;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\n\t\t\t\tif (!layer.passThrough) {\n\t\t\t\t\tmoveByBlendType(layer.opaqueMeshInstances, layer.transparentMeshInstances, false);\n\t\t\t\t\tmoveByBlendType(layer.transparentMeshInstances, layer.opaqueMeshInstances, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyBlend = false;\n\t\t}\n\n\t\tif (this._dirtyLights) {\n\t\t\tresult |= COMPUPDATED_LIGHTS;\n\t\t\tthis._dirtyLights = false;\n\t\t\tthis.updateLights();\n\t\t}\n\n\t\tif (result) {\n\t\t\tthis.updateShadowCasters();\n\t\t}\n\n\t\tvar camera, index, cameraIndex;\n\n\t\tif (this._dirtyCameras || result & COMPUPDATED_LIGHTS) {\n\t\t\tthis._dirtyCameras = false;\n\t\t\tresult |= COMPUPDATED_CAMERAS;\n\t\t\tthis.cameras.length = 0;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tlayer = this.layerList[i];\n\t\t\t\tlayer._dirtyCameras = false;\n\n\t\t\t\tfor (j = 0; j < layer.cameras.length; j++) {\n\t\t\t\t\tcamera = layer.cameras[j];\n\t\t\t\t\tindex = this.cameras.indexOf(camera);\n\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tthis.cameras.push(camera);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.cameras.length > 1) {\n\t\t\t\tthis.cameras.sort((a, b) => a.priority - b.priority);\n\t\t\t}\n\n\t\t\tconst cameraLayers = [];\n\t\t\tvar renderActionCount = 0;\n\n\t\t\tfor (i = 0; i < this.cameras.length; i++) {\n\t\t\t\tcamera = this.cameras[i];\n\t\t\t\tcameraLayers.length = 0;\n\t\t\t\tlet cameraFirstRenderAction = true;\n\t\t\t\tconst cameraFirstRenderActionIndex = renderActionCount;\n\t\t\t\tlet lastRenderAction = null;\n\t\t\t\tlet postProcessMarked = false;\n\n\t\t\t\tfor (j = 0; j < len; j++) {\n\t\t\t\t\tlayer = this.layerList[j];\n\n\t\t\t\t\tif (layer) {\n\t\t\t\t\t\tif (layer.cameras.length > 0) {\n\t\t\t\t\t\t\tif (camera.layers.indexOf(layer.id) >= 0) {\n\t\t\t\t\t\t\t\tcameraLayers.push(layer);\n\n\t\t\t\t\t\t\t\tif (!postProcessMarked && layer.id === camera.disablePostEffectsLayer) {\n\t\t\t\t\t\t\t\t\tpostProcessMarked = true;\n\n\t\t\t\t\t\t\t\t\tif (lastRenderAction) {\n\t\t\t\t\t\t\t\t\t\tlastRenderAction.triggerPostprocess = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcameraIndex = layer.cameras.indexOf(camera);\n\n\t\t\t\t\t\t\t\tif (cameraIndex >= 0) {\n\t\t\t\t\t\t\t\t\tlastRenderAction = this.addRenderAction(this._renderActions, renderActionCount, layer, j, cameraIndex, cameraFirstRenderAction, postProcessMarked);\n\t\t\t\t\t\t\t\t\trenderActionCount++;\n\t\t\t\t\t\t\t\t\tcameraFirstRenderAction = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cameraFirstRenderActionIndex < renderActionCount) {\n\t\t\t\t\tthis._renderActions[cameraFirstRenderActionIndex].collectDirectionalLights(cameraLayers, this._splitLights[LIGHTTYPE_DIRECTIONAL], this._lights);\n\t\t\t\t}\n\n\t\t\t\tif (!postProcessMarked && lastRenderAction) {\n\t\t\t\t\tlastRenderAction.triggerPostprocess = true;\n\t\t\t\t}\n\n\t\t\t\tif (camera.renderTarget && camera.postEffectsEnabled) {\n\t\t\t\t\tthis.propagateRenderTarget(cameraFirstRenderActionIndex - 1, camera);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._renderActions.length = renderActionCount;\n\n\t\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\t\tthis.allocateLightClusters();\n\t\t\t}\n\t\t}\n\n\t\tif (result & COMPUPDATED_LIGHTS || result & COMPUPDATED_CAMERAS) {\n\t\t\tthis._logRenderActions();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateShadowCasters() {\n\t\tconst lightCount = this._lights.length;\n\n\t\tfor (let i = 0; i < lightCount; i++) {\n\t\t\tthis._lightCompositionData[i].clearShadowCasters();\n\t\t}\n\n\t\tconst len = this.layerList.length;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst layer = this.layerList[i];\n\n\t\t\tif (!tempSet$1.has(layer)) {\n\t\t\t\ttempSet$1.add(layer);\n\t\t\t\tconst lights = layer._lights;\n\n\t\t\t\tfor (let j = 0; j < lights.length; j++) {\n\t\t\t\t\tif (lights[j].castShadows) {\n\t\t\t\t\t\tconst lightIndex = this._lightsMap.get(lights[j]);\n\n\t\t\t\t\t\tconst lightCompData = this._lightCompositionData[lightIndex];\n\t\t\t\t\t\tlightCompData.addShadowCasters(layer.shadowCasters);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttempSet$1.clear();\n\t}\n\n\tupdateLights() {\n\t\tthis._lights.length = 0;\n\n\t\tthis._lightsMap.clear();\n\n\t\tconst count = this.layerList.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst layer = this.layerList[i];\n\n\t\t\tif (!tempSet$1.has(layer)) {\n\t\t\t\ttempSet$1.add(layer);\n\t\t\t\tconst lights = layer._lights;\n\n\t\t\t\tfor (let j = 0; j < lights.length; j++) {\n\t\t\t\t\tconst light = lights[j];\n\n\t\t\t\t\tlet lightIndex = this._lightsMap.get(light);\n\n\t\t\t\t\tif (lightIndex === undefined) {\n\t\t\t\t\t\tlightIndex = this._lights.length;\n\n\t\t\t\t\t\tthis._lightsMap.set(light, lightIndex);\n\n\t\t\t\t\t\tthis._lights.push(light);\n\n\t\t\t\t\t\tlet lightCompData = this._lightCompositionData[lightIndex];\n\n\t\t\t\t\t\tif (!lightCompData) {\n\t\t\t\t\t\t\tlightCompData = new LightCompositionData();\n\t\t\t\t\t\t\tthis._lightCompositionData[lightIndex] = lightCompData;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._splitLightsArray(layer);\n\n\t\t\tlayer._dirtyLights = false;\n\t\t}\n\n\t\ttempSet$1.clear();\n\n\t\tthis._splitLightsArray(this);\n\n\t\tconst lightCount = this._lights.length;\n\t\tthis._lightCompositionData.length = lightCount;\n\t}\n\n\tfindCompatibleCluster(layer, renderActionCount) {\n\t\tfor (let i = 0; i < renderActionCount; i++) {\n\t\t\tconst ra = this._renderActions[i];\n\t\t\tconst raLayer = this.layerList[ra.layerIndex];\n\n\t\t\tif (layer === raLayer) {\n\t\t\t\treturn ra.lightClusters;\n\t\t\t}\n\n\t\t\tif (ra.lightClusters) {\n\t\t\t\tif (set.equals(layer._clusteredLightsSet, raLayer._clusteredLightsSet)) {\n\t\t\t\t\treturn ra.lightClusters;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tallocateLightClusters() {\n\t\ttempClusterArray.push(...this._worldClusters);\n\t\tthis._worldClusters.length = 0;\n\t\tconst count = this._renderActions.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst ra = this._renderActions[i];\n\t\t\tconst layer = this.layerList[ra.layerIndex];\n\n\t\t\tif (layer._clusteredLightsSet.size) {\n\t\t\t\tconst transparent = this.subLayerList[ra.layerIndex];\n\t\t\t\tconst meshInstances = transparent ? layer.transparentMeshInstances : layer.opaqueMeshInstances;\n\n\t\t\t\tif (meshInstances.length) {\n\t\t\t\t\tlet clusters = this.findCompatibleCluster(layer, i);\n\n\t\t\t\t\tif (!clusters) {\n\t\t\t\t\t\tif (tempClusterArray.length) {\n\t\t\t\t\t\t\tclusters = tempClusterArray.pop();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!clusters) {\n\t\t\t\t\t\t\tclusters = new WorldClusters(this.device, this._clusteredLightingCells, this._clusteredLightingMaxLights);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tclusters.name = \"Cluster-\" + this._worldClusters.length;\n\n\t\t\t\t\t\tthis._worldClusters.push(clusters);\n\t\t\t\t\t}\n\n\t\t\t\t\tra.lightClusters = clusters;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!ra.lightClusters) {\n\t\t\t\tra.lightClusters = this.emptyWorldClusters;\n\t\t\t}\n\t\t}\n\n\t\ttempClusterArray.forEach(item => item.destroy());\n\t\ttempClusterArray.length = 0;\n\t}\n\n\taddRenderAction(renderActions, renderActionIndex, layer, layerIndex, cameraIndex, cameraFirstRenderAction, postProcessMarked) {\n\t\tlet renderAction = renderActions[renderActionIndex];\n\n\t\tif (!renderAction) {\n\t\t\trenderAction = renderActions[renderActionIndex] = new RenderAction();\n\t\t}\n\n\t\tlet rt = layer.renderTarget;\n\t\tconst camera = layer.cameras[cameraIndex];\n\n\t\tif (camera && camera.renderTarget) {\n\t\t\tif (layer.id !== LAYERID_DEPTH) {\n\t\t\t\trt = camera.renderTarget;\n\t\t\t}\n\t\t}\n\n\t\tlet used = false;\n\n\t\tfor (let i = renderActionIndex - 1; i >= 0; i--) {\n\t\t\tif (renderActions[i].camera === camera && renderActions[i].renderTarget === rt) {\n\t\t\t\tused = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst needsClear = cameraFirstRenderAction || !used;\n\t\tlet clearColor = needsClear ? camera.clearColorBuffer : false;\n\t\tlet clearDepth = needsClear ? camera.clearDepthBuffer : false;\n\t\tlet clearStencil = needsClear ? camera.clearStencilBuffer : false;\n\t\tclearColor |= layer.clearColorBuffer;\n\t\tclearDepth |= layer.clearDepthBuffer;\n\t\tclearStencil |= layer.clearStencilBuffer;\n\n\t\tif (postProcessMarked && camera.postEffectsEnabled) {\n\t\t\trt = null;\n\t\t}\n\n\t\trenderAction.reset();\n\t\trenderAction.triggerPostprocess = false;\n\t\trenderAction.layerIndex = layerIndex;\n\t\trenderAction.cameraIndex = cameraIndex;\n\t\trenderAction.camera = camera;\n\t\trenderAction.renderTarget = rt;\n\t\trenderAction.clearColor = clearColor;\n\t\trenderAction.clearDepth = clearDepth;\n\t\trenderAction.clearStencil = clearStencil;\n\t\trenderAction.firstCameraUse = cameraFirstRenderAction;\n\t\treturn renderAction;\n\t}\n\n\tpropagateRenderTarget(startIndex, fromCamera) {\n\t\tfor (let a = startIndex; a >= 0; a--) {\n\t\t\tconst ra = this._renderActions[a];\n\t\t\tconst layer = this.layerList[ra.layerIndex];\n\n\t\t\tif (ra.renderTarget && layer.id !== LAYERID_DEPTH) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (layer.id === LAYERID_DEPTH) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst thisCamera = ra == null ? void 0 : ra.camera.camera;\n\n\t\t\tif (thisCamera) {\n\t\t\t\tif (!fromCamera.camera.rect.equals(thisCamera.rect) || !fromCamera.camera.scissorRect.equals(thisCamera.scissorRect)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tra.renderTarget = fromCamera.renderTarget;\n\t\t}\n\t}\n\n\t_logRenderActions() {}\n\n\t_isLayerAdded(layer) {\n\t\tif (this.layerList.indexOf(layer) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_isSublayerAdded(layer, transparent) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i] === layer && this.subLayerList[i] === transparent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpush(layer) {\n\t\tif (this._isLayerAdded(layer)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis.layerList.push(layer);\n\t\tthis._opaqueOrder[layer.id] = this.subLayerList.push(false) - 1;\n\t\tthis._transparentOrder[layer.id] = this.subLayerList.push(true) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsert(layer, index) {\n\t\tif (this._isLayerAdded(layer)) return;\n\t\tthis.layerList.splice(index, 0, layer, layer);\n\t\tthis.subLayerList.splice(index, 0, false, true);\n\t\tvar count = this.layerList.length;\n\n\t\tthis._updateOpaqueOrder(index, count - 1);\n\n\t\tthis._updateTransparentOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremove(layer) {\n\t\tvar id = this.layerList.indexOf(layer);\n\t\tdelete this._opaqueOrder[id];\n\t\tdelete this._transparentOrder[id];\n\n\t\twhile (id >= 0) {\n\t\t\tthis.layerList.splice(id, 1);\n\t\t\tthis.subLayerList.splice(id, 1);\n\t\t\tthis.subLayerEnabled.splice(id, 1);\n\t\t\tid = this.layerList.indexOf(layer);\n\t\t\tthis._dirty = true;\n\t\t\tthis._dirtyLights = true;\n\t\t\tthis._dirtyCameras = true;\n\t\t\tthis.fire(\"remove\", layer);\n\t\t}\n\n\t\tvar count = this.layerList.length;\n\n\t\tthis._updateOpaqueOrder(0, count - 1);\n\n\t\tthis._updateTransparentOrder(0, count - 1);\n\t}\n\n\tpushOpaque(layer) {\n\t\tif (this._isSublayerAdded(layer, false)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis._opaqueOrder[layer.id] = this.subLayerList.push(false) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsertOpaque(layer, index) {\n\t\tif (this._isSublayerAdded(layer, false)) return;\n\t\tthis.layerList.splice(index, 0, layer);\n\t\tthis.subLayerList.splice(index, 0, false);\n\t\tvar count = this.subLayerList.length;\n\n\t\tthis._updateOpaqueOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremoveOpaque(layer) {\n\t\tfor (var i = 0, len = this.layerList.length; i < len; i++) {\n\t\t\tif (this.layerList[i] === layer && !this.subLayerList[i]) {\n\t\t\t\tthis.layerList.splice(i, 1);\n\t\t\t\tthis.subLayerList.splice(i, 1);\n\t\t\t\tlen--;\n\n\t\t\t\tthis._updateOpaqueOrder(i, len - 1);\n\n\t\t\t\tthis.subLayerEnabled.splice(i, 1);\n\t\t\t\tthis._dirty = true;\n\t\t\t\tthis._dirtyLights = true;\n\t\t\t\tthis._dirtyCameras = true;\n\n\t\t\t\tif (this.layerList.indexOf(layer) < 0) {\n\t\t\t\t\tthis.fire(\"remove\", layer);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpushTransparent(layer) {\n\t\tif (this._isSublayerAdded(layer, true)) return;\n\t\tthis.layerList.push(layer);\n\t\tthis._transparentOrder[layer.id] = this.subLayerList.push(true) - 1;\n\t\tthis.subLayerEnabled.push(true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tinsertTransparent(layer, index) {\n\t\tif (this._isSublayerAdded(layer, true)) return;\n\t\tthis.layerList.splice(index, 0, layer);\n\t\tthis.subLayerList.splice(index, 0, true);\n\t\tvar count = this.subLayerList.length;\n\n\t\tthis._updateTransparentOrder(index, count - 1);\n\n\t\tthis.subLayerEnabled.splice(index, 0, true);\n\t\tthis._dirty = true;\n\t\tthis._dirtyLights = true;\n\t\tthis._dirtyCameras = true;\n\t\tthis.fire(\"add\", layer);\n\t}\n\n\tremoveTransparent(layer) {\n\t\tfor (var i = 0, len = this.layerList.length; i < len; i++) {\n\t\t\tif (this.layerList[i] === layer && this.subLayerList[i]) {\n\t\t\t\tthis.layerList.splice(i, 1);\n\t\t\t\tthis.subLayerList.splice(i, 1);\n\t\t\t\tlen--;\n\n\t\t\t\tthis._updateTransparentOrder(i, len - 1);\n\n\t\t\t\tthis.subLayerEnabled.splice(i, 1);\n\t\t\t\tthis._dirty = true;\n\t\t\t\tthis._dirtyLights = true;\n\t\t\t\tthis._dirtyCameras = true;\n\n\t\t\t\tif (this.layerList.indexOf(layer) < 0) {\n\t\t\t\t\tthis.fire(\"remove\", layer);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t_getSublayerIndex(layer, transparent) {\n\t\tvar id = this.layerList.indexOf(layer);\n\t\tif (id < 0) return -1;\n\n\t\tif (this.subLayerList[id] !== transparent) {\n\t\t\tid = this.layerList.indexOf(layer, id + 1);\n\t\t\tif (id < 0) return -1;\n\n\t\t\tif (this.subLayerList[id] !== transparent) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tgetOpaqueIndex(layer) {\n\t\treturn this._getSublayerIndex(layer, false);\n\t}\n\n\tgetTransparentIndex(layer) {\n\t\treturn this._getSublayerIndex(layer, true);\n\t}\n\n\tgetLayerById(id) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i].id === id) return this.layerList[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetLayerByName(name) {\n\t\tfor (var i = 0; i < this.layerList.length; i++) {\n\t\t\tif (this.layerList[i].name === name) return this.layerList[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_updateOpaqueOrder(startIndex, endIndex) {\n\t\tfor (var i = startIndex; i <= endIndex; i++) {\n\t\t\tif (this.subLayerList[i] === false) {\n\t\t\t\tthis._opaqueOrder[this.layerList[i].id] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateTransparentOrder(startIndex, endIndex) {\n\t\tfor (var i = startIndex; i <= endIndex; i++) {\n\t\t\tif (this.subLayerList[i] === true) {\n\t\t\t\tthis._transparentOrder[this.layerList[i].id] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_sortLayersDescending(layersA, layersB, order) {\n\t\tvar i = 0;\n\t\tvar len = 0;\n\t\tvar id = 0;\n\t\tvar topLayerA = -1;\n\t\tvar topLayerB = -1;\n\n\t\tfor (i = 0, len = layersA.length; i < len; i++) {\n\t\t\tid = layersA[i];\n\n\t\t\tif (order.hasOwnProperty(id)) {\n\t\t\t\ttopLayerA = Math.max(topLayerA, order[id]);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = layersB.length; i < len; i++) {\n\t\t\tid = layersB[i];\n\n\t\t\tif (order.hasOwnProperty(id)) {\n\t\t\t\ttopLayerB = Math.max(topLayerB, order[id]);\n\t\t\t}\n\t\t}\n\n\t\tif (topLayerA === -1 && topLayerB !== -1) {\n\t\t\treturn 1;\n\t\t} else if (topLayerB === -1 && topLayerA !== -1) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn topLayerB - topLayerA;\n\t}\n\n\tsortTransparentLayers(layersA, layersB) {\n\t\treturn this._sortLayersDescending(layersA, layersB, this._transparentOrder);\n\t}\n\n\tsortOpaqueLayers(layersA, layersB) {\n\t\treturn this._sortLayersDescending(layersA, layersB, this._opaqueOrder);\n\t}\n\n}\n\nLayerComposition.clusteredLightingEnabled = false;\n\nvar _oldChunkFloat = function _oldChunkFloat(s, o, p) {\n\n\treturn \"\\n#ifdef MAPFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkColor = function _oldChunkColor(s, o, p) {\n\n\treturn \"\\n#ifdef MAPCOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTex = function _oldChunkTex(s, o, p) {\n\n\treturn \"\\n#ifdef MAPTEXTURE\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTexColor = function _oldChunkTexColor(s, o, p) {\n\n\treturn \"#undef MAPTEXTURECOLOR\\n#ifdef MAPTEXTURE\\n#ifdef MAPCOLOR\\n#define MAPTEXTURECOLOR\\n#endif\\n#endif\\n\" + \"#ifdef MAPTEXTURECOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTexFloat = function _oldChunkTexFloat(s, o, p) {\n\n\treturn \"#undef MAPTEXTUREFLOAT\\n#ifdef MAPTEXTURE\\n#ifdef MAPFLOAT\\n#define MAPTEXTUREFLOAT\\n#endif\\n#endif\\n\" + \"#ifdef MAPTEXTUREFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVert = function _oldChunkVert(s, o, p) {\n\n\treturn \"\\n#ifdef MAPVERTEX\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVertColor = function _oldChunkVertColor(s, o, p) {\n\n\treturn \"#undef MAPVERTEXCOLOR\\n#ifdef MAPVERTEX\\n#ifdef MAPCOLOR\\n#define MAPVERTEXCOLOR\\n#endif\\n#endif\\n\" + \"#ifdef MAPVERTEXCOLOR\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkVertFloat = function _oldChunkVertFloat(s, o, p) {\n\n\treturn \"#undef MAPVERTEXFLOAT\\n#ifdef MAPVERTEX\\n#ifdef MAPFLOAT\\n#define MAPVERTEXFLOAT\\n#endif\\n#endif\\n\" + \"#ifdef MAPVERTEXFLOAT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformSkin = function _oldChunkTransformSkin(s, o, p) {\n\n\treturn \"\\n#ifdef SKIN\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformDynbatch = function _oldChunkTransformDynbatch(s, o, p) {\n\n\treturn \"\\n#ifdef DYNAMICBATCH\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformInstanced = function _oldChunkTransformInstanced(s, o, p) {\n\n\treturn \"\\n#ifdef INSTANCING\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformPixelSnap = function _oldChunkTransformPixelSnap(s, o, p) {\n\n\treturn \"\\n#ifdef PIXELSNAP\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformScreenSpace = function _oldChunkTransformScreenSpace(s, o, p) {\n\n\treturn \"\\n#ifdef SCREENSPACE\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformScreenSpaceBatch = function _oldChunkTransformScreenSpaceBatch(s, o, p) {\n\n\treturn \"#undef SCREENSPACEBATCH\\n#ifdef SCREENSPACE\\n#ifdef BATCH\\n#define SCREENSPACEBATCH\\n#endif\\n#endif\\n\" + \"#ifdef SCREENSPACEBATCH\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _oldChunkTransformUv1 = function _oldChunkTransformUv1(s, o, p) {\n\n\treturn \"\\n#ifdef UV1LAYOUT\\n\" + s + \"\\n#else\\n\" + shaderChunks[o] + \"\\n#endif\\n\";\n};\n\nvar _matTex2D = [];\nvar standard = {\n\t_oldChunkToNew: {\n\t\taoTexPS: {\n\t\t\tn: \"aoPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\taoVertPS: {\n\t\t\tn: \"aoPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tdiffuseConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\tdiffuseTexPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tdiffuseTexConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\tdiffuseVertPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tdiffuseVertConstPS: {\n\t\t\tn: \"diffusePS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\temissiveConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\temissiveTexPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\temissiveTexConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\temissiveTexConstFloatPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\temissiveVertPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\temissiveVertConstPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\temissiveVertConstFloatPS: {\n\t\t\tn: \"emissivePS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tglossConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\tglossTexPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tglossTexConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\tglossVertPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tglossVertConstPS: {\n\t\t\tn: \"glossPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tmetalnessConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\tmetalnessTexPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tmetalnessTexConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\tmetalnessVertPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tmetalnessVertConstPS: {\n\t\t\tn: \"metalnessPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\topacityConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkFloat\n\t\t},\n\t\topacityTexPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\topacityTexConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkTexFloat\n\t\t},\n\t\topacityVertPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\topacityVertConstPS: {\n\t\t\tn: \"opacityPS\",\n\t\t\tf: _oldChunkVertFloat\n\t\t},\n\t\tspecularConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkColor\n\t\t},\n\t\tspecularTexPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkTex\n\t\t},\n\t\tspecularTexConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkTexColor\n\t\t},\n\t\tspecularVertPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkVert\n\t\t},\n\t\tspecularVertConstPS: {\n\t\t\tn: \"specularPS\",\n\t\t\tf: _oldChunkVertColor\n\t\t},\n\t\ttransformBatchSkinnedVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformDynbatch\n\t\t},\n\t\ttransformInstancedVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformInstanced\n\t\t},\n\t\ttransformPixelSnapVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformPixelSnap\n\t\t},\n\t\ttransformScreenSpaceVS: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformScreenSpace\n\t\t},\n\t\ttransformScreenSpaceBatchSkinned: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformScreenSpaceBatch\n\t\t},\n\t\ttransformSkinned: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformSkin\n\t\t},\n\t\ttransformUv1: {\n\t\t\tn: \"transformVS\",\n\t\t\tf: _oldChunkTransformUv1\n\t\t}\n\t},\n\toptionsContext: {},\n\toptionsContextMin: {},\n\tgenerateKey: function (options) {\n\t\tvar buildPropertiesList = function buildPropertiesList(options) {\n\t\t\tvar props = [];\n\n\t\t\tfor (var prop in options) {\n\t\t\t\tif (options.hasOwnProperty(prop) && prop !== \"chunks\" && prop !== \"lights\") props.push(prop);\n\t\t\t}\n\n\t\t\treturn props.sort();\n\t\t};\n\n\t\tvar props;\n\n\t\tif (options === this.optionsContextMin) {\n\t\t\tif (!this.propsMin) this.propsMin = buildPropertiesList(options);\n\t\t\tprops = this.propsMin;\n\t\t} else if (options === this.optionsContext) {\n\t\t\tif (!this.props) this.props = buildPropertiesList(options);\n\t\t\tprops = this.props;\n\t\t} else {\n\t\t\tprops = buildPropertiesList(options);\n\t\t}\n\n\t\tvar key = \"standard\";\n\t\tvar i;\n\n\t\tfor (i = 0; i < props.length; i++) {\n\t\t\tif (options[props[i]]) key += props[i] + options[props[i]];\n\t\t}\n\n\t\tif (options.chunks) {\n\t\t\tvar chunks = [];\n\n\t\t\tfor (var p in options.chunks) {\n\t\t\t\tif (options.chunks.hasOwnProperty(p)) {\n\t\t\t\t\tchunks.push(p + options.chunks[p]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchunks.sort();\n\t\t\tkey += chunks;\n\t\t}\n\n\t\tif (options.lights) {\n\t\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\t\tkey += options.lights[i].key;\n\t\t\t}\n\t\t}\n\n\t\treturn hashCode(key);\n\t},\n\t_correctChannel: function (p, chan) {\n\t\tif (_matTex2D[p] > 0) {\n\t\t\tif (_matTex2D[p] < chan.length) {\n\t\t\t\treturn chan.substring(0, _matTex2D[p]);\n\t\t\t} else if (_matTex2D[p] > chan.length) {\n\t\t\t\tvar str = chan;\n\t\t\t\tvar chr = str.charAt(str.length - 1);\n\t\t\t\tvar addLen = _matTex2D[p] - str.length;\n\n\t\t\t\tfor (var i = 0; i < addLen; i++) str += chr;\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\treturn chan;\n\t\t}\n\t},\n\t_setMapTransform: function (codes, name, id, uv) {\n\t\tcodes[0] += \"uniform vec4 texture_\" + name + \"MapTransform;\\n\";\n\t\tvar checkId = id + uv * 100;\n\n\t\tif (!codes[3][checkId]) {\n\t\t\tcodes[1] += \"varying vec2 vUV\" + uv + \"_\" + id + \";\\n\";\n\t\t\tcodes[2] += \"\t vUV\" + uv + \"_\" + id + \" = uv\" + uv + \" * texture_\" + name + \"MapTransform.xy + texture_\" + name + \"MapTransform.zw;\\n\";\n\t\t\tcodes[3][checkId] = true;\n\t\t}\n\n\t\treturn codes;\n\t},\n\t_getUvSourceExpression: function (transformPropName, uVPropName, options) {\n\t\tvar transformId = options[transformPropName];\n\t\tvar uvChannel = options[uVPropName];\n\t\tvar expression;\n\t\tvar isMainPass = options.pass === SHADER_FORWARD || options.pass === SHADER_FORWARDHDR;\n\n\t\tif (isMainPass && options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\texpression = \"nineSlicedUv\";\n\t\t} else if (isMainPass && options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\texpression = \"nineSlicedUv, -1000.0\";\n\t\t} else {\n\t\t\tif (transformId === 0) {\n\t\t\t\texpression = \"vUv\" + uvChannel;\n\t\t\t} else {\n\t\t\t\texpression = \"vUV\" + uvChannel + \"_\" + transformId;\n\t\t\t}\n\n\t\t\tif (options.heightMap && transformPropName !== \"heightMapTransform\") {\n\t\t\t\texpression += \" + dUvOffset\";\n\t\t\t}\n\t\t}\n\n\t\treturn expression;\n\t},\n\t_addMapDef: function (name, enabled) {\n\t\tvar s = \"\\n#undef \" + name + \"\\n\";\n\t\tif (enabled) s += \" #define \" + name + \"\\n\";\n\t\treturn s;\n\t},\n\t_addMapDefs: function (float, color, vertex, map) {\n\t\tvar s = \"\";\n\t\ts += this._addMapDef(\"MAPFLOAT\", float);\n\t\ts += this._addMapDef(\"MAPCOLOR\", color);\n\t\ts += this._addMapDef(\"MAPVERTEX\", vertex);\n\t\ts += this._addMapDef(\"MAPTEXTURE\", map);\n\t\treturn s;\n\t},\n\t_addMap: function (propName, chunkName, options, chunks, samplerFormat) {\n\t\tvar mapPropName = propName + \"Map\";\n\t\tvar uVPropName = mapPropName + \"Uv\";\n\t\tvar transformPropName = mapPropName + \"Transform\";\n\t\tvar channelPropName = mapPropName + \"Channel\";\n\t\tvar vertexColorChannelPropName = propName + \"VertexColorChannel\";\n\t\tvar tintPropName = propName + \"Tint\";\n\t\tvar vertexColorPropName = propName + \"VertexColor\";\n\t\tvar detailModePropName = propName + \"Mode\";\n\t\tvar tintOption = options[tintPropName];\n\t\tvar vertexColorOption = options[vertexColorPropName];\n\t\tvar textureOption = options[mapPropName];\n\t\tvar detailModeOption = options[detailModePropName];\n\t\tvar subCode = chunks[chunkName];\n\n\t\tif (textureOption) {\n\t\t\tvar uv = this._getUvSourceExpression(transformPropName, uVPropName, options);\n\n\t\t\tsubCode = subCode.replace(/\\$UV/g, uv).replace(/\\$CH/g, options[channelPropName]);\n\n\t\t\tif (samplerFormat !== undefined) {\n\t\t\t\tvar fmt = samplerFormat === 0 ? \"texture2DSRGB\" : samplerFormat === 1 ? \"texture2DRGBM\" : \"texture2D\";\n\t\t\t\tsubCode = subCode.replace(/\\$texture2DSAMPLE/g, fmt);\n\t\t\t}\n\t\t}\n\n\t\tif (vertexColorOption) {\n\t\t\tsubCode = subCode.replace(/\\$VC/g, options[vertexColorChannelPropName]);\n\t\t}\n\n\t\tif (detailModeOption) {\n\t\t\tsubCode = subCode.replace(/\\$DETAILMODE/g, detailModeOption);\n\t\t}\n\n\t\tvar isFloatTint = tintOption === 1;\n\t\tvar isVecTint = tintOption === 3;\n\t\tsubCode = this._addMapDefs(isFloatTint, isVecTint, vertexColorOption, textureOption) + subCode;\n\t\treturn subCode.replace(/\\$/g, \"\");\n\t},\n\t_directionalShadowMapProjection: function (light, shadowCoordArgs, shadowParamArg, lightIndex, coordsFunctioName) {\n\t\tlet code = \"\";\n\n\t\tif (light.numCascades > 1) {\n\t\t\tcode += `getShadowCascadeMatrix(light${lightIndex}_shadowMatrixPalette, light${lightIndex}_shadowCascadeDistances, light${lightIndex}_shadowCascadeCount);\\n`;\n\t\t\tshadowCoordArgs = `(cascadeShadowMat, ${shadowParamArg});\\n`;\n\t\t}\n\n\t\tcode += coordsFunctioName + shadowCoordArgs;\n\t\tcode += `fadeShadow(light${lightIndex}_shadowCascadeDistances);\\n`;\n\t\treturn code;\n\t},\n\t_nonPointShadowMapProjection: function (device, light, shadowMatArg, shadowParamArg, lightIndex) {\n\t\tconst shadowCoordArgs = `(${shadowMatArg}, ${shadowParamArg});\\n`;\n\n\t\tif (!light._normalOffsetBias || light._isVsm) {\n\t\t\tif (light._type === LIGHTTYPE_SPOT) {\n\t\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\t\treturn \"\t\t\t getShadowCoordPerspZbuffer\" + shadowCoordArgs;\n\t\t\t\t}\n\n\t\t\t\treturn \"\t\t\t getShadowCoordPersp\" + shadowCoordArgs;\n\t\t\t}\n\n\t\t\treturn this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, \"getShadowCoordOrtho\");\n\t\t}\n\n\t\tif (light._type === LIGHTTYPE_SPOT) {\n\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\treturn \"\t\t\t getShadowCoordPerspZbufferNormalOffset\" + shadowCoordArgs;\n\t\t\t}\n\n\t\t\treturn \"\t\t\t getShadowCoordPerspNormalOffset\" + shadowCoordArgs;\n\t\t}\n\n\t\treturn this._directionalShadowMapProjection(light, shadowCoordArgs, shadowParamArg, lightIndex, \"getShadowCoordOrthoNormalOffset\");\n\t},\n\t_addVaryingIfNeeded: function (code, type, name) {\n\t\treturn code.indexOf(name) >= 0 ? \"varying \" + type + \" \" + name + \";\\n\" : \"\";\n\t},\n\t_getLightSourceShapeString: function (shape) {\n\t\tswitch (shape) {\n\t\t\tcase LIGHTSHAPE_RECT:\n\t\t\t\treturn 'Rect';\n\n\t\t\tcase LIGHTSHAPE_DISK:\n\t\t\t\treturn 'Disk';\n\n\t\t\tcase LIGHTSHAPE_SPHERE:\n\t\t\t\treturn 'Sphere';\n\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t},\n\t_vsAddTransformCode: function (code, device, chunks, options) {\n\t\tcode += chunks.transformVS;\n\t\treturn code;\n\t},\n\t_vsAddBaseCode: function (code, device, chunks, options) {\n\t\tcode += chunks.baseVS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED || options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.baseNineSlicedVS;\n\t\t}\n\n\t\treturn code;\n\t},\n\t_fsAddBaseCode: function (code, device, chunks, options) {\n\t\tcode += chunks.basePS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tcode += chunks.baseNineSlicedPS;\n\t\t} else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.baseNineSlicedTiledPS;\n\t\t}\n\n\t\treturn code;\n\t},\n\t_fsAddStartCode: function (code, device, chunks, options) {\n\t\tcode += chunks.startPS;\n\n\t\tif (options.nineSlicedMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tcode += chunks.startNineSlicedPS;\n\t\t} else if (options.nineSlicedMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tcode += chunks.startNineSlicedTiledPS;\n\t\t}\n\n\t\treturn code;\n\t},\n\tcreateShaderDefinition: function (device, options) {\n\t\tvar i, p;\n\t\tvar lighting = options.lights.length > 0;\n\n\t\tif (options.dirLightMap) {\n\t\t\tlighting = true;\n\t\t}\n\n\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\tlighting = true;\n\t\t}\n\n\t\tif (options.shadingModel === SPECULAR_PHONG) {\n\t\t\toptions.fresnelModel = 0;\n\t\t\toptions.specularAntialias = false;\n\t\t\toptions.prefilteredCubemap = false;\n\t\t\toptions.dpAtlas = false;\n\t\t\toptions.ambientSH = false;\n\t\t} else {\n\t\t\toptions.fresnelModel = options.fresnelModel === 0 ? FRESNEL_SCHLICK : options.fresnelModel;\n\t\t}\n\n\t\tvar cubemapReflection = (options.cubeMap || options.prefilteredCubemap && options.useSpecular) && !options.sphereMap && !options.dpAtlas;\n\t\tvar reflections = options.sphereMap || cubemapReflection || options.dpAtlas;\n\t\tvar useTexCubeLod = options.useTexCubeLod;\n\t\tif (options.cubeMap) options.sphereMap = null;\n\t\tif (options.dpAtlas) options.prefilteredCubemap = null;\n\t\tif (!options.useSpecular) options.specularMap = options.glossMap = null;\n\t\tvar needsNormal = lighting || reflections || options.ambientSH || options.prefilteredCubemap || options.heightMap || options.enableGGXSpecular;\n\t\tvar shadowPass = options.pass >= SHADER_SHADOW && options.pass <= 17;\n\t\tthis.options = options;\n\t\tvar code = '';\n\t\tvar codeBody = '';\n\t\tvar varyings = \"\";\n\t\tvar chunks = shaderChunks;\n\t\tvar lightType;\n\t\tvar shadowCoordArgs;\n\t\tvar chunk;\n\t\tvar attributes = {\n\t\t\tvertex_position: SEMANTIC_POSITION\n\t\t};\n\n\t\tif (options.chunks) {\n\t\t\tvar customChunks = {};\n\t\t\tvar newP;\n\n\t\t\tfor (p in chunks) {\n\t\t\t\tif (chunks.hasOwnProperty(p)) {\n\t\t\t\t\tif (!options.chunks[p]) {\n\t\t\t\t\t\tcustomChunks[p] = chunks[p];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchunk = options.chunks[p];\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_normal\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_normal = SEMANTIC_NORMAL;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_tangent\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_tangent = SEMANTIC_TANGENT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_texCoord0\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_texCoord0 = SEMANTIC_TEXCOORD0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_texCoord1\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_texCoord1 = SEMANTIC_TEXCOORD1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_color\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_boneWeights\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (chunk.indexOf(\"vertex_boneIndices\") >= 0) {\n\t\t\t\t\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcustomChunks[p] = chunk;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (p in options.chunks) {\n\t\t\t\tnewP = this._oldChunkToNew[p];\n\n\t\t\t\tif (newP) {\n\t\t\t\t\tcustomChunks[newP.n] = newP.f(options.chunks[p], newP.n, p);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchunks = customChunks;\n\t\t}\n\n\t\tcode = this._vsAddBaseCode(code, device, chunks, options);\n\t\tcodeBody += \"\t vPositionW\t\t= getWorldPosition();\\n\";\n\n\t\tif (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += '#ifndef VIEWMATRIX\\n';\n\t\t\tcode += '#define VIEWMATRIX\\n';\n\t\t\tcode += 'uniform mat4 matrix_view;\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcode += '#ifndef CAMERAPLANES\\n';\n\t\t\tcode += '#define CAMERAPLANES\\n';\n\t\t\tcode += 'uniform vec4 camera_params;\\n\\n';\n\t\t\tcode += '#endif\\n';\n\t\t\tcodeBody += \"\t\tvDepth = -(matrix_view * vec4(vPositionW,1.0)).z * camera_params.x;\\n\";\n\t\t}\n\n\t\tif (options.useInstancing) {\n\t\t\tattributes.instance_line1 = SEMANTIC_TEXCOORD2;\n\t\t\tattributes.instance_line2 = SEMANTIC_TEXCOORD3;\n\t\t\tattributes.instance_line3 = SEMANTIC_TEXCOORD4;\n\t\t\tattributes.instance_line4 = SEMANTIC_TEXCOORD5;\n\t\t\tcode += chunks.instancingVS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tattributes.vertex_normal = SEMANTIC_NORMAL;\n\t\t\tcodeBody += \"\t vNormalW = getNormal();\\n\";\n\n\t\t\tif (options.sphereMap && device.fragmentUniformsCount <= 16) {\n\t\t\t\tcode += chunks.viewNormalVS;\n\t\t\t\tcodeBody += \"\t vNormalV\t\t= getViewNormal();\\n\";\n\t\t\t}\n\n\t\t\tif ((options.heightMap || options.normalMap || options.enableGGXSpecular) && options.hasTangents) {\n\t\t\t\tattributes.vertex_tangent = SEMANTIC_TANGENT;\n\t\t\t\tcode += chunks.tangentBinormalVS;\n\t\t\t\tcodeBody += \"\t vTangentW\t = getTangent();\\n\";\n\t\t\t\tcodeBody += \"\t vBinormalW\t= getBinormal();\\n\";\n\t\t\t} else if (options.enableGGXSpecular) {\n\t\t\t\tcode += chunks.tangentBinormalVS;\n\t\t\t\tcodeBody += \"\t vObjectSpaceUpW\t= getObjectSpaceUp();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tvar useUv = [];\n\t\tvar useUnmodifiedUv = [];\n\t\tvar maxUvSets = 2;\n\t\tvar cname, mname, tname, uname;\n\n\t\tfor (p in _matTex2D) {\n\t\t\tmname = p + \"Map\";\n\n\t\t\tif (options[p + \"VertexColor\"]) {\n\t\t\t\tcname = p + \"VertexColorChannel\";\n\t\t\t\toptions[cname] = this._correctChannel(p, options[cname]);\n\t\t\t}\n\n\t\t\tif (options[mname]) {\n\t\t\t\tcname = mname + \"Channel\";\n\t\t\t\ttname = mname + \"Transform\";\n\t\t\t\tuname = mname + \"Uv\";\n\t\t\t\toptions[uname] = Math.min(options[uname], maxUvSets - 1);\n\t\t\t\toptions[cname] = this._correctChannel(p, options[cname]);\n\t\t\t\tvar uvSet = options[uname];\n\t\t\t\tuseUv[uvSet] = true;\n\t\t\t\tuseUnmodifiedUv[uvSet] = useUnmodifiedUv[uvSet] || options[mname] && !options[tname];\n\t\t\t}\n\t\t}\n\n\t\tif (options.forceUv1) {\n\t\t\tuseUv[1] = true;\n\t\t\tuseUnmodifiedUv[1] = useUnmodifiedUv[1] !== undefined ? useUnmodifiedUv[1] : true;\n\t\t}\n\n\t\tfor (i = 0; i < maxUvSets; i++) {\n\t\t\tif (useUv[i]) {\n\t\t\t\tattributes[\"vertex_texCoord\" + i] = \"TEXCOORD\" + i;\n\t\t\t\tcode += chunks[\"uv\" + i + \"VS\"];\n\t\t\t\tcodeBody += \"\t vec2 uv\" + i + \" = getUv\" + i + \"();\\n\";\n\t\t\t}\n\n\t\t\tif (useUnmodifiedUv[i]) {\n\t\t\t\tcodeBody += \"\t vUv\" + i + \" = uv\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\tvar codes = [code, varyings, codeBody, []];\n\n\t\tfor (p in _matTex2D) {\n\t\t\tmname = p + \"Map\";\n\n\t\t\tif (options[mname]) {\n\t\t\t\ttname = mname + \"Transform\";\n\n\t\t\t\tif (options[tname]) {\n\t\t\t\t\tuname = mname + \"Uv\";\n\n\t\t\t\t\tthis._setMapTransform(codes, p, options[tname], options[uname]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode = codes[0];\n\t\tvaryings = codes[1];\n\t\tcodeBody = codes[2];\n\n\t\tif (options.vertexColors) {\n\t\t\tattributes.vertex_color = SEMANTIC_COLOR;\n\t\t\tcodeBody += \"\t vVertexColor = vertex_color;\\n\";\n\t\t}\n\n\t\tif (options.useMorphPosition || options.useMorphNormal) {\n\t\t\tif (options.useMorphTextureBased) {\n\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED\\n\";\n\n\t\t\t\tif (options.useMorphPosition) {\n\t\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED_POSITION\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (options.useMorphNormal) {\n\t\t\t\t\tcode += \"#define MORPHING_TEXTURE_BASED_NORMAL\\n\";\n\t\t\t\t}\n\n\t\t\t\tattributes.morph_vertex_id = SEMANTIC_ATTR15;\n\t\t\t\tcode += \"attribute float morph_vertex_id;\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"#define MORPHING\\n\";\n\n\t\t\t\tif (options.useMorphPosition) {\n\t\t\t\t\tattributes.morph_pos0 = SEMANTIC_ATTR8;\n\t\t\t\t\tattributes.morph_pos1 = SEMANTIC_ATTR9;\n\t\t\t\t\tattributes.morph_pos2 = SEMANTIC_ATTR10;\n\t\t\t\t\tattributes.morph_pos3 = SEMANTIC_ATTR11;\n\t\t\t\t\tcode += \"#define MORPHING_POS03\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos0;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos1;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos2;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos3;\\n\";\n\t\t\t\t} else if (options.useMorphNormal) {\n\t\t\t\t\tattributes.morph_nrm0 = SEMANTIC_ATTR8;\n\t\t\t\t\tattributes.morph_nrm1 = SEMANTIC_ATTR9;\n\t\t\t\t\tattributes.morph_nrm2 = SEMANTIC_ATTR10;\n\t\t\t\t\tattributes.morph_nrm3 = SEMANTIC_ATTR11;\n\t\t\t\t\tcode += \"#define MORPHING_NRM03\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm0;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm1;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm2;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm3;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (!options.useMorphNormal) {\n\t\t\t\t\tattributes.morph_pos4 = SEMANTIC_ATTR12;\n\t\t\t\t\tattributes.morph_pos5 = SEMANTIC_ATTR13;\n\t\t\t\t\tattributes.morph_pos6 = SEMANTIC_ATTR14;\n\t\t\t\t\tattributes.morph_pos7 = SEMANTIC_ATTR15;\n\t\t\t\t\tcode += \"#define MORPHING_POS47\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos4;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos5;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos6;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_pos7;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tattributes.morph_nrm4 = SEMANTIC_ATTR12;\n\t\t\t\t\tattributes.morph_nrm5 = SEMANTIC_ATTR13;\n\t\t\t\t\tattributes.morph_nrm6 = SEMANTIC_ATTR14;\n\t\t\t\t\tattributes.morph_nrm7 = SEMANTIC_ATTR15;\n\t\t\t\t\tcode += \"#define MORPHING_NRM47\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm4;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm5;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm6;\\n\";\n\t\t\t\t\tcode += \"attribute vec3 morph_nrm7;\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.skin) {\n\t\t\tattributes.vertex_boneWeights = SEMANTIC_BLENDWEIGHT;\n\t\t\tattributes.vertex_boneIndices = SEMANTIC_BLENDINDICES;\n\t\t\tcode += skinCode(device, chunks);\n\t\t\tcode += \"#define SKIN\\n\";\n\t\t} else if (options.useInstancing) {\n\t\t\tcode += \"#define INSTANCING\\n\";\n\t\t}\n\n\t\tif (options.screenSpace) {\n\t\t\tcode += \"#define SCREENSPACE\\n\";\n\t\t}\n\n\t\tif (options.pixelSnap) {\n\t\t\tcode += \"#define PIXELSNAP\\n\";\n\t\t}\n\n\t\tcode = this._vsAddTransformCode(code, device, chunks, options);\n\t\tif (needsNormal) code += chunks.normalVS;\n\t\tcode += \"\\n\";\n\t\tcode += chunks.startVS;\n\t\tcode += codeBody;\n\t\tcode += chunks.endVS;\n\t\tcode += \"}\";\n\t\tvar vshader = code;\n\t\tvar oldVars = varyings;\n\t\tvaryings = \"\";\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec4\", \"vVertexColor\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vPositionW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vNormalV\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vNormalW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vTangentW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vBinormalW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec3\", \"vObjectSpaceUpW\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec2\", \"vUv0\");\n\t\tvaryings += this._addVaryingIfNeeded(code, \"vec2\", \"vUv1\");\n\t\tvaryings += oldVars;\n\t\tvshader = varyings + vshader;\n\t\tvar startCode = \"\";\n\n\t\tif (device.webgl2) {\n\t\t\tstartCode = versionCode(device);\n\n\t\t\tif (chunks.extensionVS) {\n\t\t\t\tstartCode += chunks.extensionVS + \"\\n\";\n\t\t\t}\n\n\t\t\tvshader = startCode + chunks.gles3VS + vshader;\n\t\t} else {\n\t\t\tif (chunks.extensionVS) {\n\t\t\t\tstartCode = chunks.extensionVS + \"\\n\";\n\t\t\t}\n\n\t\t\tvshader = startCode + vshader;\n\t\t}\n\n\t\tif (options.forceFragmentPrecision && options.forceFragmentPrecision !== \"highp\" && options.forceFragmentPrecision !== \"mediump\" && options.forceFragmentPrecision !== \"lowp\") options.forceFragmentPrecision = null;\n\n\t\tif (options.forceFragmentPrecision) {\n\t\t\tif (options.forceFragmentPrecision === \"highp\" && device.maxPrecision !== \"highp\") options.forceFragmentPrecision = \"mediump\";\n\t\t\tif (options.forceFragmentPrecision === \"mediump\" && device.maxPrecision === \"lowp\") options.forceFragmentPrecision = \"lowp\";\n\t\t}\n\n\t\tvar fshader;\n\t\tcode = '';\n\n\t\tif (device.webgl2) {\n\t\t\tcode += versionCode(device);\n\t\t}\n\n\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\tcode += \"#extension GL_OES_standard_derivatives : enable\\n\\n\";\n\t\t}\n\n\t\tif (chunks.extensionPS) {\n\t\t\tcode += chunks.extensionPS + \"\\n\";\n\t\t}\n\n\t\tif (device.webgl2) {\n\t\t\tcode += chunks.gles3PS;\n\t\t}\n\n\t\tcode += options.forceFragmentPrecision ? \"precision \" + options.forceFragmentPrecision + \" float;\\n\\n\" : precisionCode(device);\n\n\t\tif (options.pass === SHADER_PICK) {\n\t\t\tcode += \"uniform vec4 uColor;\\n\";\n\t\t\tcode += varyings;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"\t\tgl_FragColor = uColor;\\n\";\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t} else if (options.pass === SHADER_DEPTH) {\n\t\t\tcode += 'varying float vDepth;\\n';\n\t\t\tcode += varyings;\n\t\t\tcode += chunks.packDepthPS;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"\t\tgl_FragColor = packFloat(vDepth);\\n\";\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t} else if (shadowPass) {\n\t\t\tconst smode = options.pass - SHADER_SHADOW;\n\t\t\tconst numShadowModes = SHADOW_COUNT;\n\t\t\tlightType = Math.floor(smode / numShadowModes);\n\t\t\tvar shadowType = smode - lightType * numShadowModes;\n\n\t\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\t\tcode += 'uniform vec2 polygonOffset;\\n';\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_VSM32) {\n\t\t\t\tif (device.textureFloatHighPrecision) {\n\t\t\t\t\tcode += '#define VSM_EXPONENT 15.0\\n\\n';\n\t\t\t\t} else {\n\t\t\t\t\tcode += '#define VSM_EXPONENT 5.54\\n\\n';\n\t\t\t\t}\n\t\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\t\tcode += '#define VSM_EXPONENT 5.54\\n\\n';\n\t\t\t}\n\n\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += 'uniform vec3 view_position;\\n';\n\t\t\t\tcode += 'uniform float light_radius;\\n';\n\t\t\t}\n\n\t\t\tcode += varyings;\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"float dAlpha;\\n\";\n\t\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t\t\tcode += chunks.alphaTestPS;\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_PCF3 && (!device.webgl2 || lightType === LIGHTTYPE_OMNI)) {\n\t\t\t\tcode += chunks.packDepthPS;\n\t\t\t} else if (shadowType === SHADOW_VSM8) {\n\t\t\t\tcode += \"vec2 encodeFloatRG( float v ) {\\n\";\n\t\t\t\tcode += \"\t\tvec2 enc = vec2(1.0, 255.0) * v;\\n\";\n\t\t\t\tcode += \"\t\tenc = fract(enc);\\n\";\n\t\t\t\tcode += \"\t\tenc -= enc.yy * vec2(1.0/255.0, 1.0/255.0);\\n\";\n\t\t\t\tcode += \"\t\treturn enc;\\n\";\n\t\t\t\tcode += \"}\\n\\n\";\n\t\t\t}\n\n\t\t\tcode += begin();\n\n\t\t\tif (options.alphaTest) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t}\n\n\t\t\tvar isVsm = shadowType === SHADOW_VSM8 || shadowType === SHADOW_VSM16 || shadowType === SHADOW_VSM32;\n\n\t\t\tif (lightType === LIGHTTYPE_OMNI || isVsm && lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += \"\t float depth = min(distance(view_position, vPositionW) / light_radius, 0.99999);\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"\t float depth = gl_FragCoord.z;\\n\";\n\t\t\t}\n\n\t\t\tif (shadowType === SHADOW_PCF3 && (!device.webgl2 || lightType === LIGHTTYPE_OMNI)) {\n\t\t\t\tif (device.extStandardDerivatives && !device.webgl2) {\n\t\t\t\t\tcode += \"\t float minValue = 2.3374370500153186e-10; //(1.0 / 255.0) / (256.0 * 256.0 * 256.0);\\n\";\n\t\t\t\t\tcode += \"\t depth += polygonOffset.x * max(abs(dFdx(depth)), abs(dFdy(depth))) + minValue * polygonOffset.y;\\n\";\n\t\t\t\t\tcode += \"\t gl_FragColor = packFloat(depth);\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t gl_FragColor = packFloat(depth);\\n\";\n\t\t\t\t}\n\t\t\t} else if (shadowType === SHADOW_PCF3 || shadowType === SHADOW_PCF5) {\n\t\t\t\tcode += \"\t gl_FragColor = vec4(1.0);\\n\";\n\t\t\t} else if (shadowType === SHADOW_VSM8) {\n\t\t\t\tcode += \"\t gl_FragColor = vec4(encodeFloatRG(depth), encodeFloatRG(depth*depth));\\n\";\n\t\t\t} else {\n\t\t\t\tcode += chunks.storeEVSMPS;\n\t\t\t}\n\n\t\t\tcode += end();\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: code\n\t\t\t};\n\t\t}\n\n\t\tif (options.customFragmentShader) {\n\t\t\tfshader = code + options.customFragmentShader;\n\t\t\treturn {\n\t\t\t\tattributes: attributes,\n\t\t\t\tvshader: vshader,\n\t\t\t\tfshader: fshader,\n\t\t\t\ttag: SHADERTAG_MATERIAL\n\t\t\t};\n\t\t}\n\n\t\tcode += varyings;\n\t\tcode = this._fsAddBaseCode(code, device, chunks, options);\n\n\t\tif (options.detailModes) {\n\t\t\tcode += chunks.detailModesPS;\n\t\t}\n\n\t\tvar codeBegin = code;\n\t\tcode = \"\";\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += '#define CLEARCOAT\\n';\n\t\t}\n\n\t\tif (options.opacityFadesSpecular === false) {\n\t\t\tcode += 'uniform float material_alphaFade;\\n';\n\t\t}\n\n\t\tvar numShadowLights = 0;\n\t\tvar shadowTypeUsed = [];\n\t\tvar shadowedDirectionalLightUsed = false;\n\t\tvar useVsm = false;\n\t\tvar usePerspZbufferShadow = false;\n\t\tvar light;\n\t\tvar hasAreaLights = options.lights.some(function (light) {\n\t\t\treturn light._shape && light._shape !== LIGHTSHAPE_PUNCTUAL;\n\t\t});\n\n\t\tif (device.areaLightLutFormat === PIXELFORMAT_R8_G8_B8_A8) {\n\t\t\tcode += \"#define AREA_R8_G8_B8_A8_LUTS\\n\";\n\t\t\tcode += \"#define AREA_LUTS_PRECISION lowp\\n\";\n\t\t} else {\n\t\t\tcode += \"#define AREA_LUTS_PRECISION highp\\n\";\n\t\t}\n\n\t\tif (hasAreaLights) {\n\t\t\tcode += \"#define AREA_LIGHTS\\n\";\n\t\t\tcode += \"uniform AREA_LUTS_PRECISION sampler2D areaLightsLutTex1;\\n\";\n\t\t\tcode += \"uniform AREA_LUTS_PRECISION sampler2D areaLightsLutTex2;\\n\";\n\t\t}\n\n\t\tvar lightShape = LIGHTSHAPE_PUNCTUAL;\n\n\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\tlight = options.lights[i];\n\t\t\tlightType = light._type;\n\n\t\t\tif (hasAreaLights && light._shape) {\n\t\t\t\tlightShape = light._shape;\n\t\t\t} else {\n\t\t\t\tlightShape = LIGHTSHAPE_PUNCTUAL;\n\t\t\t}\n\n\t\t\tcode += \"uniform vec3 light\" + i + \"_color;\\n\";\n\n\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_direction;\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_position;\\n\";\n\t\t\t\tcode += \"uniform float light\" + i + \"_radius;\\n\";\n\n\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_direction;\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_innerConeAngle;\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_outerConeAngle;\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_position;\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_halfWidth;\\n\";\n\t\t\t\tcode += \"uniform vec3 light\" + i + \"_halfHeight;\\n\";\n\t\t\t}\n\n\t\t\tif (light.castShadows && !options.noShadow) {\n\t\t\t\tcode += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform mat4 light\" + i + \"_shadowMatrixPalette[4];\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_shadowCascadeDistances[4];\\n\";\n\t\t\t\t\tcode += \"uniform float light\" + i + \"_shadowCascadeCount;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"uniform vec4 light\" + i + \"_shadowParams;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tshadowedDirectionalLightUsed = true;\n\t\t\t\t\tcode += \"uniform vec3 light\" + i + \"_shadowParams;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\tcode += \"uniform samplerCube light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (light._isPcf && device.webgl2) {\n\t\t\t\t\t\tcode += \"uniform sampler2DShadow light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"uniform sampler2D light\" + i + \"_shadowMap;\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnumShadowLights++;\n\t\t\t\tshadowTypeUsed[light._shadowType] = true;\n\t\t\t\tif (light._isVsm) useVsm = true;\n\t\t\t\tif (light._isPcf && (device.webgl2 || device.extStandardDerivatives) && lightType === LIGHTTYPE_SPOT) usePerspZbufferShadow = true;\n\t\t\t}\n\n\t\t\tif (light._cookie) {\n\t\t\t\tif (light._cookie._cubemap) {\n\t\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\t\tcode += \"uniform samplerCube light\" + i + \"_cookie;\\n\";\n\t\t\t\t\t\tcode += \"uniform float light\" + i + \"_cookieIntensity;\\n\";\n\t\t\t\t\t\tif (!light.castShadows || options.noShadow) code += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\tcode += \"uniform sampler2D light\" + i + \"_cookie;\\n\";\n\t\t\t\t\t\tcode += \"uniform float light\" + i + \"_cookieIntensity;\\n\";\n\t\t\t\t\t\tif (!light.castShadows || options.noShadow) code += \"uniform mat4 light\" + i + \"_shadowMatrix;\\n\";\n\n\t\t\t\t\t\tif (light._cookieTransform) {\n\t\t\t\t\t\t\tcode += \"uniform vec4 light\" + i + \"_cookieMatrix;\\n\";\n\t\t\t\t\t\t\tcode += \"uniform vec2 light\" + i + \"_cookieOffset;\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\\n\";\n\t\tvar tbn;\n\n\t\tif (!options.hasTangents && device.extStandardDerivatives) {\n\t\t\ttbn = chunks.TBNderivativePS;\n\t\t} else if (options.fastTbn) {\n\t\t\ttbn = chunks.TBNfastPS;\n\t\t} else {\n\t\t\ttbn = chunks.TBNPS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tif (options.normalMap || options.clearCoatNormalMap) {\n\t\t\t\tcode += options.packedNormal ? chunks.normalXYPS : chunks.normalXYZPS;\n\n\t\t\t\tif (!options.hasTangents) {\n\t\t\t\t\tvar normalMapUv = this._getUvSourceExpression(\"normalMapTransform\", \"normalMapUv\", options);\n\n\t\t\t\t\ttbn = tbn.replace(/\\$UV/g, normalMapUv);\n\t\t\t\t}\n\n\t\t\t\tcode += tbn;\n\t\t\t} else if (options.enableGGXSpecular && !options.heightMap) {\n\t\t\t\tcode += chunks.normalVertexPS;\n\t\t\t\tcode += chunks.TBNObjectSpacePS;\n\t\t\t}\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tif (options.normalMap) {\n\t\t\t\tif (options.normalDetail) {\n\t\t\t\t\tcode += this._addMap(\"normalDetail\", \"normalDetailMapPS\", options, chunks);\n\t\t\t\t}\n\n\t\t\t\tvar transformedNormalMapUv = this._getUvSourceExpression(\"normalMapTransform\", \"normalMapUv\", options);\n\n\t\t\t\tif (options.normalizeNormalMap) {\n\t\t\t\t\tcode += chunks.normalMapPS.replace(/\\$UV/g, transformedNormalMapUv);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.normalMapFastPS.replace(/\\$UV/g, transformedNormalMapUv);\n\t\t\t\t}\n\t\t\t} else if (!(options.enableGGXSpecular && !options.heightMap)) {\n\t\t\t\tcode += chunks.normalVertexPS;\n\t\t\t}\n\t\t}\n\n\t\tcode += gammaCode(options.gamma, chunks);\n\t\tcode += tonemapCode(options.toneMap, chunks);\n\t\tcode += fogCode(options.fog, chunks);\n\t\tif (options.useRgbm) code += chunks.rgbmPS;\n\n\t\tif (cubemapReflection || options.prefilteredCubemap) {\n\t\t\tcode += options.fixSeams ? chunks.fixCubemapSeamsStretchPS : chunks.fixCubemapSeamsNonePS;\n\t\t}\n\n\t\tif (options.useCubeMapRotation) {\n\t\t\tcode += \"#define CUBEMAP_ROTATION\\n\";\n\t\t}\n\n\t\tif (options.useRightHandedCubeMap) {\n\t\t\tcode += \"#define RIGHT_HANDED_CUBEMAP\\n\";\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tcode += chunks.cubeMapRotatePS;\n\t\t\tcode += options.cubeMapProjection > 0 ? chunks.cubeMapProjectBoxPS : chunks.cubeMapProjectNonePS;\n\t\t\tcode += options.skyboxIntensity ? chunks.envMultiplyPS : chunks.envConstPS;\n\t\t}\n\n\t\tif (options.diffuseDetail) {\n\t\t\tcode += this._addMap(\"diffuseDetail\", \"diffuseDetailMapPS\", options, chunks);\n\t\t}\n\n\t\tcode += this._addMap(\"diffuse\", \"diffusePS\", options, chunks);\n\n\t\tif (options.blendType !== BLEND_NONE || options.alphaTest || options.alphaToCoverage) {\n\t\t\tcode += this._addMap(\"opacity\", \"opacityPS\", options, chunks);\n\t\t}\n\n\t\tcode += this._addMap(\"emissive\", \"emissivePS\", options, chunks, options.emissiveFormat);\n\n\t\tif (lighting && options.useSpecular || reflections) {\n\t\t\tif (options.specularAntialias && options.normalMap) {\n\t\t\t\tif (options.normalizeNormalMap && needsNormal) {\n\t\t\t\t\tcode += chunks.specularAaToksvigPS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.specularAaToksvigFastPS;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.specularAaNonePS;\n\t\t\t}\n\n\t\t\tvar specularPropName = options.useMetalness ? \"metalness\" : \"specular\";\n\t\t\tcode += this._addMap(specularPropName, specularPropName + \"PS\", options, chunks);\n\t\t\tcode += this._addMap(\"gloss\", \"glossPS\", options, chunks);\n\n\t\t\tif (options.fresnelModel === FRESNEL_SCHLICK) {\n\t\t\t\tcode += chunks.fresnelSchlickPS;\n\t\t\t}\n\t\t}\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += this._addMap(\"clearCoat\", \"clearCoatPS\", options, chunks);\n\t\t\tcode += this._addMap(\"clearCoatGloss\", \"clearCoatGlossPS\", options, chunks);\n\t\t\tcode += this._addMap(\"clearCoatNormal\", \"clearCoatNormalPS\", options, chunks);\n\t\t}\n\n\t\tif (options.heightMap) {\n\t\t\tif (!options.normalMap) {\n\t\t\t\tvar transformedHeightMapUv = this._getUvSourceExpression(\"heightMapTransform\", \"heightMapUv\", options);\n\n\t\t\t\tif (!options.hasTangents) tbn = tbn.replace(/\\$UV/g, transformedHeightMapUv);\n\t\t\t\tcode += tbn;\n\t\t\t}\n\n\t\t\tcode += this._addMap(\"height\", \"parallaxPS\", options, chunks);\n\t\t}\n\n\t\tvar useAo = options.aoMap || options.aoVertexColor;\n\n\t\tif (useAo) {\n\t\t\tcode += this._addMap(\"ao\", \"aoPS\", options, chunks);\n\n\t\t\tif (options.occludeSpecular) {\n\t\t\t\tif (options.occludeSpecular === SPECOCC_AO) {\n\t\t\t\t\tcode += options.occludeSpecularFloat ? chunks.aoSpecOccSimplePS : chunks.aoSpecOccConstSimplePS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += options.occludeSpecularFloat ? chunks.aoSpecOccPS : chunks.aoSpecOccConstPS;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar reflectionDecode = options.rgbmReflection ? \"decodeRGBM\" : options.hdrReflection ? \"\" : \"gammaCorrectInput\";\n\n\t\tif (options.sphereMap) {\n\t\t\tvar scode = device.fragmentUniformsCount > 16 ? chunks.reflectionSpherePS : chunks.reflectionSphereLowPS;\n\t\t\tscode = scode.replace(/\\$texture2DSAMPLE/g, options.rgbmReflection ? \"texture2DRGBM\" : options.hdrReflection ? \"texture2D\" : \"texture2DSRGB\");\n\t\t\tcode += scode;\n\t\t} else if (cubemapReflection) {\n\t\t\tif (options.prefilteredCubemap) {\n\t\t\t\tif (useTexCubeLod) {\n\t\t\t\t\tcode += chunks.reflectionPrefilteredCubeLodPS.replace(/\\$DECODE/g, reflectionDecode);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.reflectionPrefilteredCubePS.replace(/\\$DECODE/g, reflectionDecode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.reflectionCubePS.replace(/\\$textureCubeSAMPLE/g, options.rgbmReflection ? \"textureCubeRGBM\" : options.hdrReflection ? \"textureCube\" : \"textureCubeSRGB\");\n\t\t\t}\n\t\t} else if (options.dpAtlas) {\n\t\t\tcode += chunks.reflectionDpAtlasPS.replace(/\\$texture2DSAMPLE/g, options.rgbmReflection ? \"texture2DRGBM\" : options.hdrReflection ? \"texture2D\" : \"texture2DSRGB\");\n\t\t}\n\n\t\tif (cubemapReflection || options.sphereMap || options.dpAtlas) {\n\t\t\tif (options.clearCoat > 0) {\n\t\t\t\tcode += chunks.reflectionCCPS;\n\t\t\t}\n\n\t\t\tif (options.refraction) {\n\t\t\t\tcode += chunks.refractionPS;\n\t\t\t}\n\t\t}\n\n\t\tif (numShadowLights > 0) {\n\t\t\tif (shadowedDirectionalLightUsed) {\n\t\t\t\tcode += shaderChunks.shadowCascadesPS;\n\t\t\t}\n\n\t\t\tif (shadowTypeUsed[SHADOW_PCF3]) {\n\t\t\t\tcode += chunks.shadowStandardPS;\n\t\t\t}\n\n\t\t\tif (shadowTypeUsed[SHADOW_PCF5]) {\n\t\t\t\tcode += chunks.shadowStandardGL2PS;\n\t\t\t}\n\n\t\t\tif (useVsm) {\n\t\t\t\tcode += chunks.shadowVSM_commonPS;\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM8]) {\n\t\t\t\t\tcode += chunks.shadowVSM8PS;\n\t\t\t\t}\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM16]) {\n\t\t\t\t\tcode += device.extTextureHalfFloatLinear ? chunks.shadowEVSMPS.replace(/\\$/g, \"16\") : chunks.shadowEVSMnPS.replace(/\\$/g, \"16\");\n\t\t\t\t}\n\n\t\t\t\tif (shadowTypeUsed[SHADOW_VSM32]) {\n\t\t\t\t\tcode += device.extTextureFloatLinear ? chunks.shadowEVSMPS.replace(/\\$/g, \"32\") : chunks.shadowEVSMnPS.replace(/\\$/g, \"32\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!(device.webgl2 || device.extStandardDerivatives)) {\n\t\t\t\tcode += chunks.biasConstPS;\n\t\t\t}\n\n\t\t\tcode += chunks.shadowCoordPS + chunks.shadowCommonPS;\n\t\t\tif (usePerspZbufferShadow) code += chunks.shadowCoordPerspZbufferPS;\n\t\t}\n\n\t\tif (options.enableGGXSpecular) code += \"uniform float material_anisotropy;\\n\";\n\n\t\tif (lighting) {\n\t\t\tcode += chunks.lightDiffuseLambertPS;\n\t\t\tif (hasAreaLights) code += chunks.ltc;\n\t\t}\n\n\t\tvar useOldAmbient = false;\n\n\t\tif (options.useSpecular) {\n\t\t\tif (lighting) code += options.shadingModel === SPECULAR_PHONG ? chunks.lightSpecularPhongPS : options.enableGGXSpecular ? chunks.lightSpecularAnisoGGXPS : chunks.lightSpecularBlinnPS;\n\n\t\t\tif (options.sphereMap || cubemapReflection || options.dpAtlas || options.fresnelModel > 0) {\n\t\t\t\tif (options.fresnelModel > 0) {\n\t\t\t\t\tif (options.conserveEnergy && !hasAreaLights) {\n\t\t\t\t\t\tcode += chunks.combineDiffuseSpecularPS;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoConservePS;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularOldPS;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (options.diffuseMap) {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoReflPS;\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.combineDiffuseSpecularNoReflSeparateAmbientPS;\n\t\t\t\t\tuseOldAmbient = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcode += chunks.combineDiffusePS;\n\t\t}\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += chunks.combineClearCoatPS;\n\t\t}\n\n\t\tvar addAmbient = true;\n\n\t\tif (options.lightMap || options.lightVertexColor) {\n\t\t\tvar lightmapChunkPropName = options.dirLightMap && options.useSpecular ? 'lightmapDirPS' : 'lightmapSinglePS';\n\t\t\tcode += this._addMap(\"light\", lightmapChunkPropName, options, chunks, options.lightMapFormat);\n\t\t\taddAmbient = options.lightMapWithoutAmbient;\n\t\t}\n\n\t\tif (addAmbient) {\n\t\t\tvar ambientDecode = options.rgbmAmbient ? \"decodeRGBM\" : options.hdrAmbient ? \"\" : \"gammaCorrectInput\";\n\n\t\t\tif (options.ambientSH) {\n\t\t\t\tcode += chunks.ambientSHPS;\n\t\t\t} else if (options.prefilteredCubemap) {\n\t\t\t\tif (useTexCubeLod) {\n\t\t\t\t\tcode += chunks.ambientPrefilteredCubeLodPS.replace(/\\$DECODE/g, ambientDecode);\n\t\t\t\t} else {\n\t\t\t\t\tcode += chunks.ambientPrefilteredCubePS.replace(/\\$DECODE/g, ambientDecode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcode += chunks.ambientConstantPS;\n\t\t\t}\n\t\t}\n\n\t\tif (options.ambientTint && !useOldAmbient) {\n\t\t\tcode += \"uniform vec3 material_ambient;\\n\";\n\t\t}\n\n\t\tif (options.alphaTest) {\n\t\t\tcode += chunks.alphaTestPS;\n\t\t}\n\n\t\tif (options.msdf) {\n\t\t\tcode += chunks.msdfPS;\n\t\t}\n\n\t\tif (needsNormal) {\n\t\t\tcode += chunks.viewDirPS;\n\n\t\t\tif (options.useSpecular) {\n\t\t\t\tcode += options.enableGGXSpecular ? chunks.reflDirAnisoPS : chunks.reflDirPS;\n\t\t\t}\n\t\t}\n\n\t\tvar hasPointLights = false;\n\t\tvar usesLinearFalloff = false;\n\t\tvar usesInvSquaredFalloff = false;\n\t\tvar usesSpot = false;\n\t\tvar usesCookie = false;\n\t\tvar usesCookieNow;\n\n\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\tusesSpot = true;\n\t\t\thasPointLights = true;\n\t\t\tusesLinearFalloff = true;\n\t\t\tconst clusterTextureFormat = WorldClusters.lightTextureFormat === WorldClusters.FORMAT_FLOAT ? \"FLOAT\" : \"8BIT\";\n\t\t\tcode += `\\n#define CLUSTER_TEXTURE_${clusterTextureFormat}\\n`;\n\t\t\tcode += chunks.clusteredLightPS;\n\t\t}\n\n\t\tif (options.twoSidedLighting) code += \"uniform float twoSidedLightingNegScaleFactor;\\n\";\n\t\tcode = this._fsAddStartCode(code, device, chunks, options);\n\n\t\tif (needsNormal) {\n\t\t\tif (!options.hasTangents && device.extStandardDerivatives && !options.fastTbn) {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dVertexNormalW = normalize(gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor);\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dVertexNormalW = normalize(vNormalW);\\n\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dVertexNormalW = gl_FrontFacing ? vNormalW * twoSidedLightingNegScaleFactor : -vNormalW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dVertexNormalW = vNormalW;\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((options.heightMap || options.normalMap) && options.hasTangents) {\n\t\t\t\tif (options.twoSidedLighting) {\n\t\t\t\t\tcode += \"\t dTangentW = gl_FrontFacing ? vTangentW * twoSidedLightingNegScaleFactor : -vTangentW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t\tcode += \"\t dBinormalW = gl_FrontFacing ? vBinormalW * twoSidedLightingNegScaleFactor : -vBinormalW * twoSidedLightingNegScaleFactor;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t dTangentW = vTangentW;\\n\";\n\t\t\t\t\tcode += \"\t dBinormalW = vBinormalW;\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar opacityParallax = false;\n\n\t\tif (options.blendType === BLEND_NONE && !options.alphaTest && !options.alphaToCoverage) {\n\t\t\tcode += \"\t dAlpha = 1.0;\\n\";\n\t\t} else {\n\t\t\tif (options.heightMap && options.opacityMap) {\n\t\t\t\topacityParallax = true;\n\t\t\t} else {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\n\t\t\t\tif (options.alphaTest) {\n\t\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar getGlossinessCalled = false;\n\n\t\tif (needsNormal) {\n\t\t\tcode += \"\t getViewDir();\\n\";\n\n\t\t\tif (options.heightMap || options.normalMap || options.clearCoatNormalMap || options.enableGGXSpecular) {\n\t\t\t\tcode += \"\t getTBN();\\n\";\n\t\t\t}\n\n\t\t\tif (options.heightMap) {\n\t\t\t\tcode += \"\t getParallax();\\n\";\n\t\t\t}\n\n\t\t\tif (opacityParallax) {\n\t\t\t\tcode += \"\t getOpacity();\\n\";\n\n\t\t\t\tif (options.alphaTest) {\n\t\t\t\t\tcode += \"\t alphaTest(dAlpha);\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcode += \"\t getNormal();\\n\";\n\n\t\t\tif (options.useSpecular) {\n\t\t\t\tif (options.enableGGXSpecular) {\n\t\t\t\t\tcode += \"\t getGlossiness();\\n\";\n\t\t\t\t\tgetGlossinessCalled = true;\n\t\t\t\t}\n\n\t\t\t\tcode += \"\t getReflDir();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\t getAlbedo();\\n\";\n\n\t\tif (options.clearCoat > 0) {\n\t\t\tcode += \"\t getClearCoat();\\n\";\n\t\t\tcode += \"\t getClearCoatGlossiness();\\n\";\n\t\t\tcode += \"\t getClearCoatNormal();\\n\";\n\t\t}\n\n\t\tif (lighting && options.useSpecular || reflections) {\n\t\t\tcode += \"\t getSpecularity();\\n\";\n\t\t\tif (!getGlossinessCalled) code += \"\t getGlossiness();\\n\";\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tcode += \"\t #ifdef AREA_LIGHTS\\n\";\n\t\t\t\tcode += \"\t dSpecularityNoFres = dSpecularity;\\n\";\n\t\t\t\tcode += \"\t #ifdef CLEARCOAT\\n\";\n\t\t\t\tcode += \"\t ccSpecularityNoFres = ccSpecularity;\\n\";\n\t\t\t\tcode += \"\t #endif\\n\";\n\t\t\t\tcode += \"\t #endif\\n\";\n\t\t\t}\n\n\t\t\tif (options.fresnelModel > 0) code += \"\t getFresnel();\\n\";\n\t\t}\n\n\t\tif (addAmbient) {\n\t\t\tcode += \"\t addAmbient();\\n\";\n\t\t}\n\n\t\tif (options.ambientTint && !useOldAmbient) {\n\t\t\tcode += \"\t dDiffuseLight *= material_ambient;\\n\";\n\t\t}\n\n\t\tif (useAo && !options.occludeDirect) {\n\t\t\tcode += \"\t\tapplyAO();\\n\";\n\t\t}\n\n\t\tif (options.lightMap || options.lightVertexColor) {\n\t\t\tcode += \"\t addLightMap();\\n\";\n\t\t}\n\n\t\tif (lighting || reflections) {\n\t\t\tif (cubemapReflection || options.sphereMap || options.dpAtlas) {\n\t\t\t\tif (options.clearCoat > 0) {\n\t\t\t\t\tcode += \"\t addReflectionCC();\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"\t addReflection();\\n\";\n\t\t\t}\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tcode += \"\t ccReflection.rgb *= ccSpecularity;\\n\";\n\t\t\t\tcode += \"\t dReflection.rgb *= dSpecularity;\\n\";\n\t\t\t\tcode += \"\t dSpecularLight *= dSpecularity;\\n\";\n\t\t\t\tcode += \"\t float roughness = max((1.0 - dGlossiness) * (1.0 - dGlossiness), 0.001);\\n\";\n\t\t\t}\n\n\t\t\tvar shapeString = '';\n\n\t\t\tif (LayerComposition.clusteredLightingEnabled) {\n\t\t\t\tusesLinearFalloff = true;\n\t\t\t\thasPointLights = true;\n\t\t\t\tcode += chunks.clusteredLightLoopPS;\n\t\t\t}\n\n\t\t\tfor (i = 0; i < options.lights.length; i++) {\n\t\t\t\tlight = options.lights[i];\n\t\t\t\tlightType = light._type;\n\n\t\t\t\tif (LayerComposition.clusteredLightingEnabled && lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tusesCookieNow = false;\n\n\t\t\t\tif (hasAreaLights && light._shape) {\n\t\t\t\t\tlightShape = light._shape;\n\t\t\t\t\tshapeString = this._getLightSourceShapeString(lightShape);\n\t\t\t\t} else {\n\t\t\t\t\tlightShape = LIGHTSHAPE_PUNCTUAL;\n\t\t\t\t\tshapeString = '';\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tcode += \"\t calc\" + shapeString + \"LightValues(light\" + i + \"_position, light\" + i + \"_halfWidth, light\" + i + \"_halfHeight);\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"\t dLightDirNormW = light\" + i + \"_direction;\\n\";\n\t\t\t\t\tcode += \"\t dAtten = 1.0;\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (light._cookie) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT && !light._cookie._cubemap) {\n\t\t\t\t\t\t\tusesCookie = true;\n\t\t\t\t\t\t\tusesCookieNow = true;\n\t\t\t\t\t\t} else if (lightType === LIGHTTYPE_OMNI && light._cookie._cubemap) {\n\t\t\t\t\t\t\tusesCookie = true;\n\t\t\t\t\t\t\tusesCookieNow = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcode += \"\t getLightDirPoint(light\" + i + \"_position);\\n\";\n\t\t\t\t\thasPointLights = true;\n\n\t\t\t\t\tif (usesCookieNow) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\t\tcode += \"\t dAtten3 = getCookie2D\" + (light._cookieFalloff ? \"\" : \"Clip\") + (light._cookieTransform ? \"Xform\" : \"\") + \"(light\" + i + \"_cookie, light\" + i + \"_shadowMatrix, light\" + i + \"_cookieIntensity\" + (light._cookieTransform ? \", light\" + i + \"_cookieMatrix, light\" + i + \"_cookieOffset\" : \"\") + \").\" + light._cookieChannel + \";\\n\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcode += \"\t dAtten3 = getCookieCube(light\" + i + \"_cookie, light\" + i + \"_shadowMatrix, light\" + i + \"_cookieIntensity).\" + light._cookieChannel + \";\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lightShape === LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\t\tif (light._falloffMode === LIGHTFALLOFF_LINEAR) {\n\t\t\t\t\t\t\tcode += \"\t dAtten = getFalloffLinear(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\t\tusesLinearFalloff = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcode += \"\t dAtten = getFalloffInvSquared(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\t\tusesInvSquaredFalloff = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t dAtten = getFalloffWindow(light\" + i + \"_radius);\\n\";\n\t\t\t\t\t\tusesInvSquaredFalloff = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcode += \"\t if (dAtten > 0.00001) {\\n\";\n\n\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) {\n\t\t\t\t\t\tif (!(usesCookieNow && !light._cookieFalloff)) {\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getSpotEffect(light\" + i + \"_direction, light\" + i + \"_innerConeAngle, light\" + i + \"_outerConeAngle);\\n\";\n\t\t\t\t\t\t\tusesSpot = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (lightType === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\t\tcode += \"\t\t\t dAttenD = getLightDiffuse();\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dAttenD = get\" + shapeString + \"LightDiffuse() * 16.0;\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"\t\t\t dAtten *= getLightDiffuse();\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (light.castShadows && !options.noShadow) {\n\t\t\t\t\tvar shadowReadMode = null;\n\t\t\t\t\tvar evsmExp;\n\n\t\t\t\t\tif (light._shadowType === SHADOW_VSM8) {\n\t\t\t\t\t\tshadowReadMode = \"VSM8\";\n\t\t\t\t\t\tevsmExp = \"0.0\";\n\t\t\t\t\t} else if (light._shadowType === SHADOW_VSM16) {\n\t\t\t\t\t\tshadowReadMode = \"VSM16\";\n\t\t\t\t\t\tevsmExp = \"5.54\";\n\t\t\t\t\t} else if (light._shadowType === SHADOW_VSM32) {\n\t\t\t\t\t\tshadowReadMode = \"VSM32\";\n\n\t\t\t\t\t\tif (device.textureFloatHighPrecision) {\n\t\t\t\t\t\t\tevsmExp = \"15.0\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tevsmExp = \"5.54\";\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (light._shadowType === SHADOW_PCF5) {\n\t\t\t\t\t\tshadowReadMode = \"PCF5x5\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshadowReadMode = \"PCF3x3\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shadowReadMode !== null) {\n\t\t\t\t\t\tif (lightType === LIGHTTYPE_OMNI) {\n\t\t\t\t\t\t\tshadowCoordArgs = \"(light\" + i + \"_shadowMap, light\" + i + \"_shadowParams);\\n\";\n\n\t\t\t\t\t\t\tif (light._normalOffsetBias) {\n\t\t\t\t\t\t\t\tcode += \"\t\t\t normalOffsetPointShadow(light\" + i + \"_shadowParams);\\n\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getShadowPoint\" + shadowReadMode + shadowCoordArgs;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst shadowMatArg = `light${i}_shadowMatrix`;\n\t\t\t\t\t\t\tconst shadowParamArg = `light${i}_shadowParams`;\n\t\t\t\t\t\t\tcode += this._nonPointShadowMapProjection(device, options.lights[i], shadowMatArg, shadowParamArg, i);\n\t\t\t\t\t\t\tif (lightType === LIGHTTYPE_SPOT) shadowReadMode = \"Spot\" + shadowReadMode;\n\t\t\t\t\t\t\tcode += \"\t\t\t dAtten *= getShadow\" + shadowReadMode + \"(light\" + i + \"_shadowMap, light\" + i + \"_shadowParams\" + (light._isVsm ? \", \" + evsmExp : \"\") + \");\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (options.conserveEnergy && options.useSpecular) {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += mix((dAttenD * dAtten) * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \", vec3(0), dLTCSpecFres);\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += (dAttenD * dAtten) * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (hasAreaLights && options.conserveEnergy && options.useSpecular) {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += mix(dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \", vec3(0), dSpecularity);\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode += \"\t\t\t dDiffuseLight += dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightShape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += ccLTCSpecFres * get\" + shapeString + \"LightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += dLTCSpecFres * get\" + shapeString + \"LightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tif (hasAreaLights) {\n\t\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += ccSpecularity * getLightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += dSpecularity * getLightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (options.clearCoat > 0) code += \"\t\t\t ccSpecularLight += getLightSpecularCC() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t\tif (options.useSpecular) code += \"\t\t\t dSpecularLight += getLightSpecular() * dAtten * light\" + i + \"_color\" + (usesCookieNow ? \" * dAtten3\" : \"\") + \";\\n\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lightType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tcode += \"\t }\\n\";\n\t\t\t\t}\n\n\t\t\t\tcode += \"\\n\";\n\t\t\t}\n\n\t\t\tif (hasAreaLights) {\n\t\t\t\tif (options.clearCoat > 0) {\n\t\t\t\t\tcode += \"\t ccSpecularity = 1.0;\\n\";\n\t\t\t\t}\n\n\t\t\t\tif (options.useSpecular) {\n\t\t\t\t\tcode += \"\t dSpecularity = vec3(1);\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((cubemapReflection || options.sphereMap || options.dpAtlas) && options.refraction) {\n\t\t\t\tcode += \"\t addRefraction();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tcode += \"\\n\";\n\n\t\tif (useAo) {\n\t\t\tif (options.occludeDirect) {\n\t\t\t\tcode += \"\t\tapplyAO();\\n\";\n\t\t\t}\n\n\t\t\tif (options.occludeSpecular) {\n\t\t\t\tcode += \"\t\toccludeSpecular();\\n\";\n\t\t\t}\n\t\t}\n\n\t\tif (options.opacityFadesSpecular === false) {\n\t\t\tif (options.blendType === BLEND_NORMAL || options.blendType === BLEND_PREMULTIPLIED) {\n\t\t\t\tcode += \"float specLum = dot((dSpecularLight + dReflection.rgb * dReflection.a) * dSpecularity, vec3( 0.2126, 0.7152, 0.0722 ));\\n\";\n\t\t\t\tcode += \"#ifdef CLEARCOAT\\n specLum += dot(ccSpecularLight * ccSpecularity + ccReflection.rgb * ccReflection.a * ccSpecularity, vec3( 0.2126, 0.7152, 0.0722 ));\\n#endif\\n\";\n\t\t\t\tcode += \"dAlpha = clamp(dAlpha + gammaCorrectInput(specLum), 0.0, 1.0);\\n\";\n\t\t\t}\n\n\t\t\tcode += \"dAlpha *= material_alphaFade;\\n\";\n\t\t}\n\n\t\tcode += chunks.endPS;\n\n\t\tif (options.blendType === BLEND_NORMAL || options.blendType === BLEND_ADDITIVEALPHA || options.alphaToCoverage) {\n\t\t\tcode += chunks.outputAlphaPS;\n\t\t} else if (options.blendType === BLEND_PREMULTIPLIED) {\n\t\t\tcode += chunks.outputAlphaPremulPS;\n\t\t} else {\n\t\t\tcode += chunks.outputAlphaOpaquePS;\n\t\t}\n\n\t\tif (options.msdf) {\n\t\t\tcode += \"\t gl_FragColor = applyMsdf(gl_FragColor);\\n\";\n\t\t}\n\n\t\tcode += \"\\n\";\n\t\tcode += end();\n\n\t\tif (hasPointLights) {\n\t\t\tcode = chunks.lightDirPointPS + code;\n\t\t}\n\n\t\tif (usesLinearFalloff) {\n\t\t\tcode = chunks.falloffLinearPS + code;\n\t\t}\n\n\t\tif (usesInvSquaredFalloff) {\n\t\t\tcode = chunks.falloffInvSquaredPS + code;\n\t\t}\n\n\t\tif (usesSpot) {\n\t\t\tcode = chunks.spotPS + code;\n\t\t}\n\n\t\tif (usesCookie) {\n\t\t\tcode = chunks.cookiePS + code;\n\t\t}\n\n\t\tvar structCode = \"\";\n\t\tif (code.includes(\"dReflection\")) structCode += \"vec4 dReflection;\\n\";\n\t\tif (code.includes(\"dTBN\")) structCode += \"mat3 dTBN;\\n\";\n\t\tif (code.includes(\"dAlbedo\")) structCode += \"vec3 dAlbedo;\\n\";\n\t\tif (code.includes(\"dEmission\")) structCode += \"vec3 dEmission;\\n\";\n\t\tif (code.includes(\"dNormalW\")) structCode += \"vec3 dNormalW;\\n\";\n\t\tif (code.includes(\"dVertexNormalW\")) structCode += \"vec3 dVertexNormalW;\\n\";\n\t\tif (code.includes(\"dTangentW\")) structCode += \"vec3 dTangentW;\\n\";\n\t\tif (code.includes(\"dBinormalW\")) structCode += \"vec3 dBinormalW;\\n\";\n\t\tif (code.includes(\"dViewDirW\")) structCode += \"vec3 dViewDirW;\\n\";\n\t\tif (code.includes(\"dReflDirW\")) structCode += \"vec3 dReflDirW;\\n\";\n\t\tif (code.includes(\"dDiffuseLight\")) structCode += \"vec3 dDiffuseLight;\\n\";\n\t\tif (code.includes(\"dSpecularLight\")) structCode += \"vec3 dSpecularLight;\\n\";\n\t\tif (code.includes(\"dLightDirNormW\")) structCode += \"vec3 dLightDirNormW;\\n\";\n\t\tif (code.includes(\"dLightDirW\")) structCode += \"vec3 dLightDirW;\\n\";\n\t\tif (code.includes(\"dLightPosW\")) structCode += \"vec3 dLightPosW;\\n\";\n\t\tif (code.includes(\"dShadowCoord\")) structCode += \"vec3 dShadowCoord;\\n\";\n\t\tif (code.includes(\"dNormalMap\")) structCode += \"vec3 dNormalMap;\\n\";\n\t\tif (code.includes(\"dSpecularity\")) structCode += \"vec3 dSpecularity;\\n\";\n\t\tif (code.includes(\"dSpecularityNoFres\")) structCode += \"vec3 dSpecularityNoFres;\\n\";\n\t\tif (code.includes(\"dUvOffset\")) structCode += \"vec2 dUvOffset;\\n\";\n\t\tif (code.includes(\"dGlossiness\")) structCode += \"float dGlossiness;\\n\";\n\t\tif (code.includes(\"dAlpha\")) structCode += \"float dAlpha;\\n\";\n\t\tif (code.includes(\"dAtten\")) structCode += \"float dAtten;\\n\";\n\t\tif (code.includes(\"dAttenD\")) structCode += \"float dAttenD;\\n\";\n\t\tif (code.includes(\"dAtten3\")) structCode += \"vec3 dAtten3;\\n\";\n\t\tif (code.includes(\"dAo\")) structCode += \"float dAo;\\n\";\n\t\tif (code.includes(\"dMsdf\")) structCode += \"vec4 dMsdf;\\n\";\n\t\tif (code.includes(\"ccReflection\")) structCode += \"vec4 ccReflection;\\n\";\n\t\tif (code.includes(\"ccNormalW\")) structCode += \"vec3 ccNormalW;\\n\";\n\t\tif (code.includes(\"ccReflDirW\")) structCode += \"vec3 ccReflDirW;\\n\";\n\t\tif (code.includes(\"ccSpecularLight\")) structCode += \"vec3 ccSpecularLight;\\n\";\n\t\tif (code.includes(\"ccSpecularity\")) structCode += \"float ccSpecularity;\\n\";\n\t\tif (code.includes(\"ccSpecularityNoFres\")) structCode += \"float ccSpecularityNoFres;\\n\";\n\t\tif (code.includes(\"ccGlossiness\")) structCode += \"float ccGlossiness;\\n\";\n\t\tcode = codeBegin + structCode + code;\n\t\tfshader = code;\n\t\treturn {\n\t\t\tattributes: attributes,\n\t\t\tvshader: vshader,\n\t\t\tfshader: fshader,\n\t\t\ttag: SHADERTAG_MATERIAL\n\t\t};\n\t}\n};\n\nconst programlib = {\n\tbegin: begin,\n\tdummyFragmentCode: dummyFragmentCode,\n\tend: end,\n\tfogCode: fogCode,\n\tgammaCode: gammaCode,\n\tprecisionCode: precisionCode,\n\tskinCode: skinCode,\n\ttonemapCode: tonemapCode,\n\tversionCode: versionCode,\n\tbasic: basic,\n\tparticle: particle,\n\tskybox: skybox,\n\tstandard: standard\n};\n\nconst dpMult = 2.0;\n\nfunction paraboloidFromCubemap(device, sourceCubemap, fixSeamsAmount, dontFlipX) {\n\tconst seamsCode = sourceCubemap.fixCubemapSeams ? shaderChunks.fixCubemapSeamsStretchPS : shaderChunks.fixCubemapSeamsNonePS;\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, seamsCode + shaderChunks.genParaboloidPS, \"genParaboloid\");\n\tconst constantTexSource = device.scope.resolve(\"source\");\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst params = new Float32Array(4);\n\tlet size = sourceCubemap.width;\n\tconst format = sourceCubemap.format;\n\tsize = Math.max(size, 8) * dpMult;\n\tconst tex = new Texture(device, {\n\t\ttype: sourceCubemap.type,\n\t\tformat: format,\n\t\twidth: size * 2,\n\t\theight: size,\n\t\tmipmaps: false\n\t});\n\ttex.name = 'paraboloid';\n\tconst targ = new RenderTarget({\n\t\tcolorBuffer: tex,\n\t\tdepth: false\n\t});\n\tparams[0] = fixSeamsAmount;\n\tparams[1] = dontFlipX ? -1.0 : 1.0;\n\tconstantTexSource.setValue(sourceCubemap);\n\tconstantParams.setValue(params);\n\tdrawQuadWithShader(device, targ, shader);\n\treturn tex;\n}\n\nfunction getDpAtlasRect(rect, mip) {\n\trect.x = math.clamp(mip - 2.0, 0, 1) * 0.5;\n\tconst t = mip - rect.x * 6.0;\n\tconst i = 1.0 - rect.x;\n\trect.y = Math.min(t * 0.5, 0.75) * i + rect.x;\n\trect.z = (1.0 - math.clamp(t, 0, 1) * 0.5) * i;\n\trect.w = rect.z * 0.5;\n\treturn 1.0 / rect.z;\n}\n\nfunction generateDpAtlas(device, sixCubemaps, dontFlipX) {\n\tlet dp;\n\tconst rect = new Vec4();\n\tconst params = new Float32Array(4);\n\tconst size = sixCubemaps[0].width * 2 * dpMult;\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.dpAtlasQuadPS, \"dpAtlasQuad\");\n\tconst constantTexSource = device.scope.resolve(\"source\");\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst tex = new Texture(device, {\n\t\ttype: sixCubemaps[0].type,\n\t\tformat: sixCubemaps[0].format,\n\t\twidth: size,\n\t\theight: size,\n\t\tmipmaps: false\n\t});\n\ttex.name = 'paraboloid';\n\tconst targ = new RenderTarget({\n\t\tcolorBuffer: tex,\n\t\tdepth: false\n\t});\n\tconst borderSize = 2;\n\tconst mip0Width = size;\n\tconst scaleFactor = (mip0Width + borderSize) / mip0Width - 1;\n\tlet scaleAmount;\n\n\tfor (let i = 0; i < 6; i++) {\n\t\tdp = paraboloidFromCubemap(device, sixCubemaps[i], i, dontFlipX);\n\t\tconstantTexSource.setValue(dp);\n\t\tscaleAmount = getDpAtlasRect(rect, i);\n\t\tparams[0] = scaleAmount * scaleFactor;\n\t\tparams[1] = params[0] * 2;\n\t\tparams[0] += 1;\n\t\tparams[1] += 1;\n\t\tconstantParams.setValue(params);\n\t\trect.x *= size;\n\t\trect.y *= size;\n\t\trect.z *= size;\n\t\trect.w *= size;\n\t\tdrawQuadWithShader(device, targ, shader, rect);\n\t}\n\n\treturn tex;\n}\n\nvar id$1 = 0;\n\nclass Material {\n\tconstructor() {\n\t\tthis.name = \"Untitled\";\n\t\tthis.id = id$1++;\n\t\tthis._shader = null;\n\t\tthis.variants = {};\n\t\tthis.parameters = {};\n\t\tthis.alphaTest = 0;\n\t\tthis.alphaToCoverage = false;\n\t\tthis.blend = false;\n\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\tthis.separateAlphaBlend = false;\n\t\tthis.blendSrcAlpha = BLENDMODE_ONE;\n\t\tthis.blendDstAlpha = BLENDMODE_ZERO;\n\t\tthis.blendAlphaEquation = BLENDEQUATION_ADD;\n\t\tthis.cull = CULLFACE_BACK;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\t\tthis.stencilFront = null;\n\t\tthis.stencilBack = null;\n\t\tthis.depthBias = 0;\n\t\tthis.slopeDepthBias = 0;\n\t\tthis.redWrite = true;\n\t\tthis.greenWrite = true;\n\t\tthis.blueWrite = true;\n\t\tthis.alphaWrite = true;\n\t\tthis.meshInstances = [];\n\t\tthis._shaderVersion = 0;\n\t\tthis._scene = null;\n\t\tthis._dirtyBlend = false;\n\t\tthis.dirty = true;\n\t}\n\n\tget shader() {\n\t\treturn this._shader;\n\t}\n\n\tset shader(shader) {\n\t\tthis._shader = shader;\n\t}\n\n\tget blendType() {\n\t\tif (!this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ZERO && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_NONE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_SRC_ALPHA && this.blendDst === BLENDMODE_ONE_MINUS_SRC_ALPHA && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_NORMAL;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_ADDITIVE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_SRC_ALPHA && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_ADDITIVEALPHA;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_DST_COLOR && this.blendDst === BLENDMODE_SRC_COLOR && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_MULTIPLICATIVE2X;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE_MINUS_DST_COLOR && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_SCREEN;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_MIN) {\n\t\t\treturn BLEND_MIN;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE && this.blendEquation === BLENDEQUATION_MAX) {\n\t\t\treturn BLEND_MAX;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_DST_COLOR && this.blendDst === BLENDMODE_ZERO && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_MULTIPLICATIVE;\n\t\t} else if (this.blend && this.blendSrc === BLENDMODE_ONE && this.blendDst === BLENDMODE_ONE_MINUS_SRC_ALPHA && this.blendEquation === BLENDEQUATION_ADD) {\n\t\t\treturn BLEND_PREMULTIPLIED;\n\t\t}\n\n\t\treturn BLEND_NORMAL;\n\t}\n\n\tset blendType(type) {\n\t\tvar prevBlend = this.blend;\n\n\t\tswitch (type) {\n\t\t\tcase BLEND_NONE:\n\t\t\t\tthis.blend = false;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_NORMAL:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_SRC_ALPHA;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE_MINUS_SRC_ALPHA;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_PREMULTIPLIED:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE_MINUS_SRC_ALPHA;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_ADDITIVE:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_ADDITIVEALPHA:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_SRC_ALPHA;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MULTIPLICATIVE2X:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_SRC_COLOR;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_SCREEN:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE_MINUS_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MULTIPLICATIVE:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_DST_COLOR;\n\t\t\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MIN:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_MIN;\n\t\t\t\tbreak;\n\n\t\t\tcase BLEND_MAX:\n\t\t\t\tthis.blend = true;\n\t\t\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\t\t\tthis.blendDst = BLENDMODE_ONE;\n\t\t\t\tthis.blendEquation = BLENDEQUATION_MAX;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (prevBlend !== this.blend) {\n\t\t\tif (this._scene) {\n\t\t\t\tthis._scene.layers._dirtyBlend = true;\n\t\t\t} else {\n\t\t\t\tthis._dirtyBlend = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._updateMeshInstanceKeys();\n\t}\n\n\t_cloneInternal(clone) {\n\t\tclone.name = this.name;\n\t\tclone.shader = this.shader;\n\t\tclone.alphaTest = this.alphaTest;\n\t\tclone.alphaToCoverage = this.alphaToCoverage;\n\t\tclone.blend = this.blend;\n\t\tclone.blendSrc = this.blendSrc;\n\t\tclone.blendDst = this.blendDst;\n\t\tclone.blendEquation = this.blendEquation;\n\t\tclone.separateAlphaBlend = this.separateAlphaBlend;\n\t\tclone.blendSrcAlpha = this.blendSrcAlpha;\n\t\tclone.blendDstAlpha = this.blendDstAlpha;\n\t\tclone.blendAlphaEquation = this.blendAlphaEquation;\n\t\tclone.cull = this.cull;\n\t\tclone.depthTest = this.depthTest;\n\t\tclone.depthWrite = this.depthWrite;\n\t\tclone.depthBias = this.depthBias;\n\t\tclone.slopeDepthBias = this.slopeDepthBias;\n\t\tif (this.stencilFront) clone.stencilFront = this.stencilFront.clone();\n\n\t\tif (this.stencilBack) {\n\t\t\tif (this.stencilFront === this.stencilBack) {\n\t\t\t\tclone.stencilBack = clone.stencilFront;\n\t\t\t} else {\n\t\t\t\tclone.stencilBack = this.stencilBack.clone();\n\t\t\t}\n\t\t}\n\n\t\tclone.redWrite = this.redWrite;\n\t\tclone.greenWrite = this.greenWrite;\n\t\tclone.blueWrite = this.blueWrite;\n\t\tclone.alphaWrite = this.alphaWrite;\n\t}\n\n\tclone() {\n\t\tvar clone = new Material();\n\n\t\tthis._cloneInternal(clone);\n\n\t\treturn clone;\n\t}\n\n\t_updateMeshInstanceKeys() {\n\t\tvar i,\n\t\t\t\tmeshInstances = this.meshInstances;\n\n\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].updateKey();\n\t\t}\n\t}\n\n\tupdateUniforms() {}\n\n\tupdateShader(device, scene, objDefs) {}\n\n\tupdate() {\n\t\tthis.dirty = true;\n\t\tif (this._shader) this._shader.failed = false;\n\t}\n\n\tclearParameters() {\n\t\tthis.parameters = {};\n\t}\n\n\tgetParameters() {\n\t\treturn this.parameters;\n\t}\n\n\tclearVariants() {\n\t\tvar meshInstance;\n\t\tthis.variants = {};\n\t\tvar j;\n\n\t\tfor (var i = 0; i < this.meshInstances.length; i++) {\n\t\t\tmeshInstance = this.meshInstances[i];\n\n\t\t\tfor (j = 0; j < meshInstance._shader.length; j++) {\n\t\t\t\tmeshInstance._shader[j] = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetParameter(name) {\n\t\treturn this.parameters[name];\n\t}\n\n\tsetParameter(name, data) {\n\t\tif (data === undefined && typeof name === 'object') {\n\t\t\tvar uniformObject = name;\n\n\t\t\tif (uniformObject.length) {\n\t\t\t\tfor (var i = 0; i < uniformObject.length; i++) {\n\t\t\t\t\tthis.setParameter(uniformObject[i]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tname = uniformObject.name;\n\t\t\tdata = uniformObject.value;\n\t\t}\n\n\t\tvar param = this.parameters[name];\n\n\t\tif (param) {\n\t\t\tparam.data = data;\n\t\t} else {\n\t\t\tthis.parameters[name] = {\n\t\t\t\tscopeId: null,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (this.parameters[name]) {\n\t\t\tdelete this.parameters[name];\n\t\t}\n\t}\n\n\tsetParameters(device, names) {\n\t\tvar parameter,\n\t\t\t\tparameters = this.parameters;\n\t\tif (names === undefined) names = parameters;\n\n\t\tfor (var paramName in names) {\n\t\t\tparameter = parameters[paramName];\n\n\t\t\tif (parameter) {\n\t\t\t\tif (!parameter.scopeId) {\n\t\t\t\t\tparameter.scopeId = device.scope.resolve(paramName);\n\t\t\t\t}\n\n\t\t\t\tparameter.scopeId.setValue(parameter.data);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.variants = {};\n\t\tthis.shader = null;\n\n\t\tfor (let i = 0; i < this.meshInstances.length; i++) {\n\t\t\tconst meshInstance = this.meshInstances[i];\n\n\t\t\tfor (let j = 0; j < meshInstance._shader.length; j++) {\n\t\t\t\tmeshInstance._shader[j] = null;\n\t\t\t}\n\n\t\t\tmeshInstance._material = null;\n\t\t\tconst defaultMaterial = Material.defaultMaterial;\n\n\t\t\tif (this !== defaultMaterial) {\n\t\t\t\tmeshInstance.material = defaultMaterial;\n\t\t\t}\n\t\t}\n\t}\n\n\taddMeshInstanceRef(meshInstance) {\n\t\tthis.meshInstances.push(meshInstance);\n\t}\n\n\tremoveMeshInstanceRef(meshInstance) {\n\t\tconst meshInstances = this.meshInstances;\n\t\tconst i = meshInstances.indexOf(meshInstance);\n\n\t\tif (i !== -1) {\n\t\t\tmeshInstances.splice(i, 1);\n\t\t}\n\t}\n\n}\n\nMaterial.defaultMaterial = null;\n\nfunction StandardMaterialOptionsBuilder() {\n\tthis._mapXForms = null;\n}\n\nStandardMaterialOptionsBuilder.prototype.updateMinRef = function (options, device, scene, stdMat, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128) {\n\tthis._updateSharedOptions(options, stdMat, objDefs, pass);\n\n\tthis._updateMinOptions(options, stdMat);\n\n\tthis._updateUVOptions(options, stdMat, objDefs, true);\n};\n\nStandardMaterialOptionsBuilder.prototype.updateRef = function (options, device, scene, stdMat, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128) {\n\tthis._updateSharedOptions(options, stdMat, objDefs, pass);\n\n\toptions.useTexCubeLod = device.useTexCubeLod;\n\n\tthis._updateEnvOptions(options, stdMat, scene, prefilteredCubeMap128);\n\n\tthis._updateMaterialOptions(options, stdMat);\n\n\tif (pass === SHADER_FORWARDHDR) {\n\t\tif (options.gamma) options.gamma = GAMMA_SRGBHDR;\n\t\toptions.toneMap = TONEMAP_LINEAR;\n\t}\n\n\toptions.hasTangents = objDefs && stdMat.normalMap && (objDefs & SHADERDEF_TANGENTS) !== 0;\n\n\tthis._updateLightOptions(options, stdMat, objDefs, sortedLights, staticLightList);\n\n\tthis._updateUVOptions(options, stdMat, objDefs, false);\n};\n\nStandardMaterialOptionsBuilder.prototype._updateSharedOptions = function (options, stdMat, objDefs, pass) {\n\toptions.pass = pass;\n\toptions.alphaTest = stdMat.alphaTest > 0;\n\toptions.forceFragmentPrecision = stdMat.forceFragmentPrecision || \"\";\n\toptions.chunks = stdMat.chunks || \"\";\n\toptions.blendType = stdMat.blendType;\n\toptions.forceUv1 = stdMat.forceUv1;\n\toptions.screenSpace = objDefs && (objDefs & SHADERDEF_SCREENSPACE) !== 0;\n\toptions.skin = objDefs && (objDefs & SHADERDEF_SKIN) !== 0;\n\toptions.useInstancing = objDefs && (objDefs & SHADERDEF_INSTANCING) !== 0;\n\toptions.useMorphPosition = objDefs && (objDefs & SHADERDEF_MORPH_POSITION) !== 0;\n\toptions.useMorphNormal = objDefs && (objDefs & SHADERDEF_MORPH_NORMAL) !== 0;\n\toptions.useMorphTextureBased = objDefs && (objDefs & SHADERDEF_MORPH_TEXTURE_BASED) !== 0;\n\toptions.nineSlicedMode = stdMat.nineSlicedMode || 0;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateUVOptions = function (options, stdMat, objDefs, minimalOptions) {\n\tvar hasUv0 = false;\n\tvar hasUv1 = false;\n\tvar hasVcolor = false;\n\n\tif (objDefs) {\n\t\thasUv0 = (objDefs & SHADERDEF_UV0) !== 0;\n\t\thasUv1 = (objDefs & SHADERDEF_UV1) !== 0;\n\t\thasVcolor = (objDefs & SHADERDEF_VCOLOR) !== 0;\n\t}\n\n\toptions.vertexColors = false;\n\tthis._mapXForms = [];\n\n\tfor (var p in _matTex2D) {\n\t\tthis._updateTexOptions(options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions);\n\t}\n\n\tthis._mapXForms = null;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateMinOptions = function (options, stdMat) {\n\toptions.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE;\n\toptions.lights = [];\n};\n\nStandardMaterialOptionsBuilder.prototype._updateMaterialOptions = function (options, stdMat) {\n\tvar diffuseTint = (stdMat.diffuse.r !== 1 || stdMat.diffuse.g !== 1 || stdMat.diffuse.b !== 1) && (stdMat.diffuseTint || !stdMat.diffuseMap && !stdMat.diffuseVertexColor) ? 3 : 0;\n\tvar specularTint = false;\n\tvar useSpecular = (stdMat.useMetalness ? true : !!stdMat.specularMap) || !!stdMat.sphereMap || !!stdMat.cubeMap || !!stdMat.dpAtlas;\n\tuseSpecular = useSpecular || (stdMat.useMetalness ? true : !(stdMat.specular.r === 0 && stdMat.specular.g === 0 && stdMat.specular.b === 0));\n\tuseSpecular = useSpecular || stdMat.enableGGXSpecular;\n\tuseSpecular = useSpecular || stdMat.clearCoat > 0;\n\n\tif (useSpecular) {\n\t\tif ((stdMat.specularTint || !stdMat.specularMap && !stdMat.specularVertexColor) && !stdMat.useMetalness) {\n\t\t\tspecularTint = stdMat.specular.r !== 1 || stdMat.specular.g !== 1 || stdMat.specular.b !== 1;\n\t\t}\n\t}\n\n\tvar emissiveTint = stdMat.emissiveMap ? 0 : 3;\n\n\tif (!emissiveTint) {\n\t\temissiveTint = (stdMat.emissive.r !== 1 || stdMat.emissive.g !== 1 || stdMat.emissive.b !== 1 || stdMat.emissiveIntensity !== 1) && stdMat.emissiveTint;\n\t\temissiveTint = emissiveTint ? 3 : stdMat.emissiveIntensity !== 1 ? 1 : 0;\n\t}\n\n\tvar isPackedNormalMap = stdMat.normalMap ? stdMat.normalMap.format === PIXELFORMAT_DXT5 || stdMat.normalMap.type === TEXTURETYPE_SWIZZLEGGGR : false;\n\toptions.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE ? 1 : 0;\n\toptions.blendMapsWithColors = true;\n\toptions.ambientTint = stdMat.ambientTint;\n\toptions.diffuseTint = diffuseTint;\n\toptions.specularTint = specularTint ? 3 : 0;\n\toptions.metalnessTint = stdMat.useMetalness && stdMat.metalness < 1 ? 1 : 0;\n\toptions.glossTint = 1;\n\toptions.emissiveTint = emissiveTint;\n\toptions.alphaToCoverage = stdMat.alphaToCoverage;\n\toptions.normalizeNormalMap = stdMat.normalizeNormalMap;\n\toptions.sphereMap = !!stdMat.sphereMap;\n\toptions.cubeMap = !!stdMat.cubeMap;\n\toptions.dpAtlas = !!stdMat.dpAtlas;\n\toptions.ambientSH = !!stdMat.ambientSH;\n\toptions.useSpecular = useSpecular;\n\toptions.emissiveFormat = stdMat.emissiveMap ? stdMat.emissiveMap.type === TEXTURETYPE_RGBM ? 1 : stdMat.emissiveMap.format === PIXELFORMAT_RGBA32F ? 2 : 0 : null;\n\toptions.lightMapFormat = stdMat.lightMap ? stdMat.lightMap.type === TEXTURETYPE_RGBM ? 1 : stdMat.lightMap.format === PIXELFORMAT_RGBA32F ? 2 : 0 : null;\n\toptions.specularAntialias = stdMat.specularAntialias && !!stdMat.normalMap && !!stdMat.normalMap.mipmaps && !isPackedNormalMap;\n\toptions.conserveEnergy = stdMat.conserveEnergy;\n\toptions.opacityFadesSpecular = stdMat.opacityFadesSpecular;\n\toptions.alphaFade = stdMat.alphaFade;\n\toptions.occludeSpecular = stdMat.occludeSpecular;\n\toptions.occludeSpecularFloat = stdMat.occludeSpecularIntensity !== 1.0;\n\toptions.occludeDirect = stdMat.occludeDirect;\n\toptions.shadingModel = stdMat.shadingModel;\n\toptions.fresnelModel = stdMat.fresnelModel;\n\toptions.packedNormal = isPackedNormalMap;\n\toptions.fastTbn = stdMat.fastTbn;\n\toptions.cubeMapProjection = stdMat.cubeMapProjection;\n\toptions.customFragmentShader = stdMat.customFragmentShader;\n\toptions.refraction = !!stdMat.refraction;\n\toptions.useMetalness = stdMat.useMetalness;\n\toptions.enableGGXSpecular = stdMat.enableGGXSpecular;\n\toptions.msdf = !!stdMat.msdfMap;\n\toptions.twoSidedLighting = stdMat.twoSidedLighting;\n\toptions.pixelSnap = stdMat.pixelSnap;\n\toptions.aoMapUv = stdMat.aoUvSet;\n\toptions.diffuseDetail = !!stdMat.diffuseMap;\n\toptions.normalDetail = !!stdMat.normalMap;\n\toptions.diffuseDetailMode = stdMat.diffuseDetailMode;\n\toptions.detailModes = !!options.diffuseDetail;\n\toptions.clearCoat = !!stdMat.clearCoat;\n\toptions.clearCoatTint = stdMat.clearCoat !== 1.0 ? 1 : 0;\n\toptions.clearCoatGlossiness = !!stdMat.clearCoatGlossiness;\n\toptions.clearCoatGlossTint = stdMat.clearCoatGlossiness !== 1.0 ? 1 : 0;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateEnvOptions = function (options, stdMat, scene, prefilteredCubeMap128) {\n\tvar rgbmAmbient = prefilteredCubeMap128 && prefilteredCubeMap128.type === TEXTURETYPE_RGBM || stdMat.cubeMap && stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.dpAtlas && stdMat.dpAtlas.type === TEXTURETYPE_RGBM;\n\tvar hdrAmbient = prefilteredCubeMap128 && (prefilteredCubeMap128.type === TEXTURETYPE_RGBM || prefilteredCubeMap128.format === PIXELFORMAT_RGBA32F) || stdMat.cubeMap && (stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.cubeMap.format === PIXELFORMAT_RGBA32F) || stdMat.dpAtlas && (stdMat.dpAtlas.type === TEXTURETYPE_RGBM || stdMat.dpAtlas.format === PIXELFORMAT_RGBA32F);\n\tvar rgbmReflection = prefilteredCubeMap128 && !stdMat.cubeMap && !stdMat.sphereMap && !stdMat.dpAtlas && prefilteredCubeMap128.type === TEXTURETYPE_RGBM || stdMat.cubeMap && stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.sphereMap && stdMat.sphereMap.type === TEXTURETYPE_RGBM || stdMat.dpAtlas && stdMat.dpAtlas.type === TEXTURETYPE_RGBM;\n\tvar hdrReflection = (prefilteredCubeMap128 && !stdMat.cubeMap && !stdMat.sphereMap && !stdMat.dpAtlas ? prefilteredCubeMap128.type === TEXTURETYPE_RGBM || prefilteredCubeMap128.format === PIXELFORMAT_RGBA32F : false) || stdMat.cubeMap && (stdMat.cubeMap.type === TEXTURETYPE_RGBM || stdMat.cubeMap.format === PIXELFORMAT_RGBA32F) || stdMat.sphereMap && (stdMat.sphereMap.type === TEXTURETYPE_RGBM || stdMat.sphereMap.format === PIXELFORMAT_RGBA32F) || stdMat.dpAtlas && (stdMat.dpAtlas.type === TEXTURETYPE_RGBM || stdMat.dpAtlas.format === PIXELFORMAT_RGBA32F);\n\tvar globalSky128;\n\tif (stdMat.useSkybox && scene._skyboxPrefiltered) globalSky128 = scene._skyboxPrefiltered[0];\n\toptions.fog = stdMat.useFog ? scene.fog : \"none\";\n\toptions.gamma = stdMat.useGammaTonemap ? scene.gammaCorrection : GAMMA_NONE;\n\toptions.toneMap = stdMat.useGammaTonemap ? scene.toneMapping : -1;\n\toptions.rgbmAmbient = rgbmAmbient;\n\toptions.hdrAmbient = hdrAmbient;\n\toptions.rgbmReflection = rgbmReflection;\n\toptions.hdrReflection = hdrReflection;\n\toptions.useRgbm = rgbmReflection || rgbmAmbient || stdMat.emissiveMap && stdMat.emissiveMap.type === TEXTURETYPE_RGBM || stdMat.lightMap && stdMat.lightMap.type === TEXTURETYPE_RGBM;\n\toptions.fixSeams = prefilteredCubeMap128 ? prefilteredCubeMap128.fixCubemapSeams : stdMat.cubeMap ? stdMat.cubeMap.fixCubemapSeams : false;\n\toptions.prefilteredCubemap = !!prefilteredCubeMap128;\n\toptions.skyboxIntensity = prefilteredCubeMap128 && globalSky128 && prefilteredCubeMap128 === globalSky128 && scene.skyboxIntensity !== 1;\n\toptions.useCubeMapRotation = !stdMat.cubeMap && !stdMat.prefilteredCubeMap128 && stdMat.useSkybox && scene && scene.skyboxRotation && !scene.skyboxRotation.equals(Quat.IDENTITY);\n\toptions.useRightHandedCubeMap = stdMat.cubeMap ? stdMat.cubeMap._isRenderTarget : !stdMat.prefilteredCubeMap128 && stdMat.useSkybox && scene && scene._skyboxIsRenderTarget;\n};\n\nStandardMaterialOptionsBuilder.prototype._updateLightOptions = function (options, stdMat, objDefs, sortedLights, staticLightList) {\n\toptions.lightMap = false;\n\toptions.lightMapChannel = \"\";\n\toptions.lightMapUv = 0;\n\toptions.lightMapTransform = 0;\n\toptions.lightMapWithoutAmbient = false;\n\toptions.dirLightMap = false;\n\n\tif (objDefs) {\n\t\toptions.noShadow = (objDefs & SHADERDEF_NOSHADOW) !== 0;\n\n\t\tif ((objDefs & SHADERDEF_LM) !== 0) {\n\t\t\toptions.lightMapFormat = 1;\n\t\t\toptions.lightMap = true;\n\t\t\toptions.lightMapChannel = \"rgb\";\n\t\t\toptions.lightMapUv = 1;\n\t\t\toptions.lightMapTransform = 0;\n\t\t\toptions.lightMapWithoutAmbient = !stdMat.lightMap;\n\t\t\toptions.useRgbm = true;\n\n\t\t\tif ((objDefs & SHADERDEF_DIRLM) !== 0) {\n\t\t\t\toptions.dirLightMap = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (stdMat.useLighting) {\n\t\tvar lightsFiltered = [];\n\t\tvar mask = objDefs ? objDefs >> 16 : 1;\n\n\t\tif (sortedLights) {\n\t\t\tthis._collectLights(LIGHTTYPE_DIRECTIONAL, sortedLights[LIGHTTYPE_DIRECTIONAL], lightsFiltered, mask);\n\n\t\t\tthis._collectLights(LIGHTTYPE_OMNI, sortedLights[LIGHTTYPE_OMNI], lightsFiltered, mask, staticLightList);\n\n\t\t\tthis._collectLights(LIGHTTYPE_SPOT, sortedLights[LIGHTTYPE_SPOT], lightsFiltered, mask, staticLightList);\n\t\t}\n\n\t\toptions.lights = lightsFiltered;\n\t} else {\n\t\toptions.lights = [];\n\t}\n\n\tif (options.lights.length === 0) {\n\t\toptions.noShadow = true;\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._updateTexOptions = function (options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions) {\n\tvar mname = p + \"Map\";\n\tvar vname = p + \"VertexColor\";\n\tvar vcname = p + \"VertexColorChannel\";\n\tvar cname = mname + \"Channel\";\n\tvar tname = mname + \"Transform\";\n\tvar uname = mname + \"Uv\";\n\n\tif (p !== \"light\") {\n\t\toptions[mname] = false;\n\t\toptions[cname] = \"\";\n\t\toptions[tname] = 0;\n\t\toptions[uname] = 0;\n\t}\n\n\toptions[vname] = false;\n\toptions[vcname] = \"\";\n\tvar isOpacity = p === \"opacity\";\n\tif (isOpacity && stdMat.blendType === BLEND_NONE && stdMat.alphaTest === 0.0 && !stdMat.alphaToCoverage) return options;\n\n\tif (!minimalOptions || isOpacity) {\n\t\tif (p !== \"height\" && stdMat[vname]) {\n\t\t\tif (hasVcolor) {\n\t\t\t\toptions[vname] = stdMat[vname];\n\t\t\t\toptions[vcname] = stdMat[vcname];\n\t\t\t\toptions.vertexColors = true;\n\t\t\t}\n\t\t}\n\n\t\tif (stdMat[mname]) {\n\t\t\tvar allow = true;\n\t\t\tif (stdMat[uname] === 0 && !hasUv0) allow = false;\n\t\t\tif (stdMat[uname] === 1 && !hasUv1) allow = false;\n\n\t\t\tif (allow) {\n\t\t\t\toptions[mname] = !!stdMat[mname];\n\t\t\t\toptions[tname] = this._getMapTransformID(stdMat[tname], stdMat[uname]);\n\t\t\t\toptions[cname] = stdMat[cname];\n\t\t\t\toptions[uname] = stdMat[uname];\n\t\t\t}\n\t\t}\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._collectLights = function (lType, lights, lightsFiltered, mask, staticLightList) {\n\tvar light;\n\tvar i;\n\n\tfor (i = 0; i < lights.length; i++) {\n\t\tlight = lights[i];\n\n\t\tif (light.enabled) {\n\t\t\tif (light.mask & mask) {\n\t\t\t\tif (lType !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tif (light.isStatic) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlightsFiltered.push(light);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (staticLightList) {\n\t\tfor (i = 0; i < staticLightList.length; i++) {\n\t\t\tlight = staticLightList[i];\n\n\t\t\tif (light._type === lType) {\n\t\t\t\tlightsFiltered.push(light);\n\t\t\t}\n\t\t}\n\t}\n};\n\nStandardMaterialOptionsBuilder.prototype._getMapTransformID = function (xform, uv) {\n\tif (!xform) return 0;\n\tif (!this._mapXForms[uv]) this._mapXForms[uv] = [];\n\tvar i, same;\n\n\tfor (i = 0; i < this._mapXForms[uv].length; i++) {\n\t\tsame = true;\n\n\t\tif (this._mapXForms[uv][i][0] !== xform.x) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][1] !== xform.y) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][2] !== xform.z) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this._mapXForms[uv][i][3] !== xform.w) {\n\t\t\tsame = false;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (same) {\n\t\t\treturn i + 1;\n\t\t}\n\t}\n\n\tvar newID = this._mapXForms[uv].length;\n\tthis._mapXForms[uv][newID] = [];\n\tthis._mapXForms[uv][newID][0] = xform.x;\n\tthis._mapXForms[uv][newID][1] = xform.y;\n\tthis._mapXForms[uv][newID][2] = xform.z;\n\tthis._mapXForms[uv][newID][3] = xform.w;\n\treturn newID + 1;\n};\n\nvar standardMaterialParameterTypes = {\n\tname: 'string',\n\tchunks: 'chunks',\n\tmappingFormat: 'string',\n\t_engine: 'boolean',\n\tambient: 'rgb',\n\tambientTint: 'boolean',\n\taoVertexColor: 'boolean',\n\taoVertexColorChannel: 'string',\n\taoMap: 'texture',\n\taoMapChannel: 'string',\n\taoMapUv: 'number',\n\taoMapTiling: 'vec2',\n\taoMapOffset: 'vec2',\n\tdiffuse: 'rgb',\n\tdiffuseTint: 'boolean',\n\tdiffuseVertexColor: 'boolean',\n\tdiffuseVertexColorChannel: 'string',\n\tdiffuseMap: 'texture',\n\tdiffuseMapChannel: 'string',\n\tdiffuseMapUv: 'number',\n\tdiffuseMapTiling: 'vec2',\n\tdiffuseMapOffset: 'vec2',\n\tdiffuseDetailMap: 'texture',\n\tdiffuseDetailMapChannel: 'string',\n\tdiffuseDetailMapUv: 'number',\n\tdiffuseDetailMapTiling: 'vec2',\n\tdiffuseDetailMapOffset: 'vec2',\n\tdiffuseDetailMode: 'string',\n\tspecular: 'rgb',\n\tspecularTint: 'boolean',\n\tspecularVertexColor: 'boolean',\n\tspecularVertexColorChannel: 'string',\n\tspecularMap: 'texture',\n\tspecularMapChannel: 'string',\n\tspecularMapUv: 'number',\n\tspecularMapTiling: 'vec2',\n\tspecularMapOffset: 'vec2',\n\tspecularAntialias: 'boolean',\n\toccludeSpecular: 'enum:occludeSpecular',\n\tuseMetalness: 'boolean',\n\tmetalness: 'number',\n\tenableGGXSpecular: 'boolean',\n\tanisotropy: 'number',\n\tmetalnessTint: 'boolean',\n\tmetalnessVertexColor: 'boolean',\n\tmetalnessVertexColorChannel: 'string',\n\tmetalnessMap: 'texture',\n\tmetalnessMapChannel: 'string',\n\tmetalnessMapUv: 'number',\n\tmetalnessMapTiling: 'vec2',\n\tmetalnessMapOffset: 'vec2',\n\tconserveEnergy: 'boolean',\n\tshininess: 'number',\n\tglossVertexColor: 'boolean',\n\tglossVertexColorChannel: 'string',\n\tglossMap: 'texture',\n\tglossMapChannel: 'string',\n\tglossMapUv: 'number',\n\tglossMapTiling: 'vec2',\n\tglossMapOffset: 'vec2',\n\tclearCoat: 'number',\n\tclearCoatVertexColor: 'boolean',\n\tclearCoatVertexColorChannel: 'string',\n\tclearCoatMap: 'texture',\n\tclearCoatMapChannel: 'string',\n\tclearCoatMapUv: 'number',\n\tclearCoatMapTiling: 'vec2',\n\tclearCoatMapOffset: 'vec2',\n\tclearCoatGlossiness: 'number',\n\tclearCoatGlossVertexColor: 'boolean',\n\tclearCoatGlossVertexColorChannel: 'string',\n\tclearCoatGlossMap: 'texture',\n\tclearCoatGlossMapChannel: 'string',\n\tclearCoatGlossMapUv: 'number',\n\tclearCoatGlossMapTiling: 'vec2',\n\tclearCoatGlossMapOffset: 'vec2',\n\tclearCoatBumpiness: 'number',\n\tclearCoatNormalMap: 'texture',\n\tclearCoatNormalMapUv: 'number',\n\tclearCoatNormalMapTiling: 'vec2',\n\tclearCoatNormalMapOffset: 'vec2',\n\tfresnelModel: 'number',\n\temissive: 'rgb',\n\temissiveTint: 'boolean',\n\temissiveVertexColor: 'boolean',\n\temissiveVertexColorChannel: 'string',\n\temissiveMap: 'texture',\n\temissiveMapChannel: 'string',\n\temissiveMapUv: 'number',\n\temissiveMapTiling: 'vec2',\n\temissiveMapOffset: 'vec2',\n\temissiveIntensity: 'number',\n\tnormalMap: 'texture',\n\tnormalMapTiling: 'vec2',\n\tnormalMapOffset: 'vec2',\n\tnormalMapUv: 'number',\n\tbumpiness: 'number',\n\tnormalDetailMap: 'texture',\n\tnormalDetailMapTiling: 'vec2',\n\tnormalDetailMapOffset: 'vec2',\n\tnormalDetailMapUv: 'number',\n\tnormalDetailMapBumpiness: 'number',\n\theightMap: 'texture',\n\theightMapChannel: 'string',\n\theightMapUv: 'number',\n\theightMapTiling: 'vec2',\n\theightMapOffset: 'vec2',\n\theightMapFactor: 'number',\n\talphaToCoverage: 'boolean',\n\talphaTest: 'number',\n\talphaFade: 'number',\n\topacity: 'number',\n\topacityVertexColor: 'boolean',\n\topacityVertexColorChannel: 'string',\n\topacityMap: 'texture',\n\topacityMapChannel: 'string',\n\topacityMapUv: 'number',\n\topacityMapTiling: 'vec2',\n\topacityMapOffset: 'vec2',\n\topacityFadesSpecular: 'boolean',\n\treflectivity: 'number',\n\trefraction: 'number',\n\trefractionIndex: 'number',\n\tsphereMap: 'texture',\n\tcubeMap: 'cubemap',\n\tcubeMapProjection: 'number',\n\tcubeMapProjectionBox: 'boundingbox',\n\tlightVertexColor: 'boolean',\n\tlightVertexColorChannel: 'string',\n\tlightMap: 'texture',\n\tlightMapChannel: 'string',\n\tlightMapUv: 'number',\n\tlightMapTiling: 'vec2',\n\tlightMapOffset: 'vec2',\n\tdepthTest: 'boolean',\n\tdepthWrite: 'boolean',\n\tdepthBias: 'number',\n\tslopeDepthBias: 'number',\n\tcull: 'enum:cull',\n\tblendType: 'enum:blendType',\n\tshadingModel: 'enum:shadingModel',\n\tuseFog: 'boolean',\n\tuseLighting: 'boolean',\n\tuseSkybox: 'boolean',\n\tuseGammaTonemap: 'boolean',\n\tprefilteredCubeMap128: 'texture',\n\tprefilteredCubeMap64: 'texture',\n\tprefilteredCubeMap32: 'texture',\n\tprefilteredCubeMap16: 'texture',\n\tprefilteredCubeMap8: 'texture',\n\tprefilteredCubeMap4: 'texture'\n};\nvar key, type;\nvar standardMaterialTextureParameters = [];\n\nfor (key in standardMaterialParameterTypes) {\n\ttype = standardMaterialParameterTypes[key];\n\n\tif (type === 'texture') {\n\t\tstandardMaterialTextureParameters.push(key);\n\t}\n}\n\nvar standardMaterialCubemapParameters = [];\n\nfor (key in standardMaterialParameterTypes) {\n\ttype = standardMaterialParameterTypes[key];\n\n\tif (type === 'cubemap') {\n\t\tstandardMaterialCubemapParameters.push(key);\n\t}\n}\n\nconst _propsSerial = [];\nconst _propsSerialDefaultVal = [];\nconst _propsInternalNull = [];\nconst _propsInternalVec3 = [];\nconst _prop2Uniform = {};\nconst _propsColor = [];\n\nclass Chunks {\n\tcopy(from) {\n\t\tfor (const p in from) {\n\t\t\tif (from.hasOwnProperty(p) && p !== 'copy') this[p] = from[p];\n\t\t}\n\t}\n\n}\n\nclass StandardMaterial extends Material {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._assetReferences = {};\n\t\tthis._validator = null;\n\t\tthis.shaderOptBuilder = new StandardMaterialOptionsBuilder();\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t\tconst defVal = _propsSerialDefaultVal[i];\n\t\t\tthis[_propsSerial[i]] = defVal ? defVal.clone ? defVal.clone() : defVal : defVal;\n\t\t}\n\n\t\tfor (let i = 0; i < _propsInternalNull.length; i++) {\n\t\t\tthis[_propsInternalNull[i]] = null;\n\t\t}\n\n\t\tfor (let i = 0; i < _propsInternalVec3.length; i++) {\n\t\t\tthis[_propsInternalVec3[i]] = new Float32Array(3);\n\t\t}\n\n\t\tthis._chunks = new Chunks();\n\t\tthis.cubeMapMinUniform = new Float32Array(3);\n\t\tthis.cubeMapMaxUniform = new Float32Array(3);\n\t}\n\n\tclone() {\n\t\tconst clone = new StandardMaterial();\n\n\t\tthis._cloneInternal(clone);\n\n\t\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t\tconst pname = _propsSerial[i];\n\n\t\t\tif (this[pname] !== undefined) {\n\t\t\t\tif (this[pname] && this[pname].copy) {\n\t\t\t\t\tif (clone[pname]) {\n\t\t\t\t\t\tclone[pname].copy(this[pname]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone[pname] = this[pname].clone();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclone[pname] = this[pname];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n\t_updateMapTransform(transform, tiling, offset) {\n\t\tif (tiling.x === 1 && tiling.y === 1 && offset.x === 0 && offset.y === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttransform = transform || new Vec4();\n\t\ttransform.set(tiling.x, tiling.y, offset.x, 1.0 - tiling.y - offset.y);\n\t\treturn transform;\n\t}\n\n\t_setParameter(name, value) {\n\t\tif (!this.parameters[name]) this._propsSet.push(name);\n\t\tthis.setParameter(name, value);\n\t}\n\n\t_clearParameters() {\n\t\tconst props = this._propsSet;\n\n\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\tdelete this.parameters[props[i]];\n\t\t}\n\n\t\tthis._propsSet = [];\n\t}\n\n\t_updateMap(p) {\n\t\tconst mname = p + \"Map\";\n\t\tconst map = this[mname];\n\n\t\tif (map) {\n\t\t\tthis._setParameter(\"texture_\" + mname, map);\n\n\t\t\tconst tname = mname + \"Transform\";\n\t\t\tthis[tname] = this._updateMapTransform(this[tname], this[mname + \"Tiling\"], this[mname + \"Offset\"]);\n\t\t\tconst transform = this[tname];\n\n\t\t\tif (transform) {\n\t\t\t\tconst uname = mname + \"TransformUniform\";\n\t\t\t\tlet uniform = this[uname];\n\n\t\t\t\tif (!uniform) {\n\t\t\t\t\tuniform = new Float32Array(4);\n\t\t\t\t\tthis[uname] = uniform;\n\t\t\t\t}\n\n\t\t\t\tuniform[0] = transform.x;\n\t\t\t\tuniform[1] = transform.y;\n\t\t\t\tuniform[2] = transform.z;\n\t\t\t\tuniform[3] = transform.w;\n\n\t\t\t\tthis._setParameter('texture_' + tname, uniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUniform(varName, value, changeMat) {\n\t\tconst func = _prop2Uniform[varName];\n\n\t\tif (func) {\n\t\t\treturn func(this, value, changeMat);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateUniforms() {\n\t\tthis._clearParameters();\n\n\t\tthis._setParameter('material_ambient', this.ambientUniform);\n\n\t\tif (!this.diffuseMap || this.diffuseTint) {\n\t\t\tthis._setParameter('material_diffuse', this.diffuseUniform);\n\t\t}\n\n\t\tif (!this.useMetalness) {\n\t\t\tif (!this.specularMap || this.specularTint) {\n\t\t\t\tthis._setParameter('material_specular', this.specularUniform);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.metalnessMap || this.metalness < 1) {\n\t\t\t\tthis._setParameter('material_metalness', this.metalness);\n\t\t\t}\n\t\t}\n\n\t\tif (this.enableGGXSpecular) {\n\t\t\tthis._setParameter('material_anisotropy', this.anisotropy);\n\t\t}\n\n\t\tif (this.clearCoat > 0) {\n\t\t\tthis._setParameter('material_clearCoat', this.clearCoat);\n\n\t\t\tthis._setParameter('material_clearCoatGlossiness', this.clearCoatGlossiness);\n\n\t\t\tthis._setParameter('material_clearCoatReflectivity', this.clearCoat);\n\n\t\t\tthis._setParameter('material_clearCoatBumpiness', this.clearCoatBumpiness);\n\t\t}\n\n\t\tlet uniform = this.getUniform(\"shininess\", this.shininess, true);\n\n\t\tthis._setParameter(uniform.name, uniform.value);\n\n\t\tif (!this.emissiveMap || this.emissiveTint) {\n\t\t\tthis._setParameter('material_emissive', this.emissiveUniform);\n\t\t}\n\n\t\tif (this.emissiveMap) {\n\t\t\tthis._setParameter('material_emissiveIntensity', this.emissiveIntensity);\n\t\t}\n\n\t\tif (this.refraction > 0) {\n\t\t\tthis._setParameter('material_refraction', this.refraction);\n\n\t\t\tthis._setParameter('material_refractionIndex', this.refractionIndex);\n\t\t}\n\n\t\tthis._setParameter('material_opacity', this.opacity);\n\n\t\tif (this.opacityFadesSpecular === false) {\n\t\t\tthis._setParameter('material_alphaFade', this.alphaFade);\n\t\t}\n\n\t\tif (this.occludeSpecular) {\n\t\t\tthis._setParameter('material_occludeSpecularIntensity', this.occludeSpecularIntensity);\n\t\t}\n\n\t\tif (this.cubeMapProjection === CUBEPROJ_BOX) {\n\t\t\tthis._setParameter(this.getUniform(\"cubeMapProjectionBox\", this.cubeMapProjectionBox, true));\n\t\t}\n\n\t\tfor (const p in _matTex2D) {\n\t\t\tthis._updateMap(p);\n\t\t}\n\n\t\tif (this.ambientSH) {\n\t\t\tthis._setParameter('ambientSH[0]', this.ambientSH);\n\t\t}\n\n\t\tif (this.normalMap) {\n\t\t\tthis._setParameter('material_bumpiness', this.bumpiness);\n\t\t}\n\n\t\tif (this.normalMap && this.normalDetailMap) {\n\t\t\tthis._setParameter('material_normalDetailMapBumpiness', this.normalDetailMapBumpiness);\n\t\t}\n\n\t\tif (this.heightMap) {\n\t\t\tuniform = this.getUniform('heightMapFactor', this.heightMapFactor, true);\n\n\t\t\tthis._setParameter(uniform.name, uniform.value);\n\t\t}\n\n\t\tif (this.cubeMap) {\n\t\t\tthis._setParameter('texture_cubeMap', this.cubeMap);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap128) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap128', this.prefilteredCubeMap128);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[0]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap128', this._scene._skyboxPrefiltered[0]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap64) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap64', this.prefilteredCubeMap64);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[1]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap64', this._scene._skyboxPrefiltered[1]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap32) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap32', this.prefilteredCubeMap32);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[2]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap32', this._scene._skyboxPrefiltered[2]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap16) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap16', this.prefilteredCubeMap16);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[3]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap16', this._scene._skyboxPrefiltered[3]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap8) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap8', this.prefilteredCubeMap8);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[4]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap8', this._scene._skyboxPrefiltered[4]);\n\t\t}\n\n\t\tif (this.prefilteredCubeMap4) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap4', this.prefilteredCubeMap4);\n\t\t} else if (this._scene && this._scene._skyboxPrefiltered[5]) {\n\t\t\tthis._setParameter('texture_prefilteredCubeMap4', this._scene._skyboxPrefiltered[5]);\n\t\t}\n\n\t\tif (this.sphereMap) {\n\t\t\tthis._setParameter('texture_sphereMap', this.sphereMap);\n\t\t}\n\n\t\tif (this.dpAtlas) {\n\t\t\tthis._setParameter('texture_sphereMap', this.dpAtlas);\n\t\t}\n\n\t\tthis._setParameter('material_reflectivity', this.reflectivity);\n\n\t\tif (this.dirtyShader || !this._scene) {\n\t\t\tthis.shader = null;\n\t\t\tthis.clearVariants();\n\t\t}\n\n\t\tthis._processColor();\n\t}\n\n\t_processColor() {\n\t\tif (!this.dirtyColor) return;\n\t\tif (!this._scene && this.useGammaTonemap) return;\n\t\tlet gammaCorrection = false;\n\t\tif (this.useGammaTonemap) gammaCorrection = this._scene.gammaCorrection;\n\n\t\tfor (let i = 0; i < _propsColor.length; i++) {\n\t\t\tconst clr = this[\"_\" + _propsColor[i]];\n\t\t\tconst arr = this[_propsColor[i] + \"Uniform\"];\n\n\t\t\tif (gammaCorrection) {\n\t\t\t\tarr[0] = Math.pow(clr.r, 2.2);\n\t\t\t\tarr[1] = Math.pow(clr.g, 2.2);\n\t\t\t\tarr[2] = Math.pow(clr.b, 2.2);\n\t\t\t} else {\n\t\t\t\tarr[0] = clr.r;\n\t\t\t\tarr[1] = clr.g;\n\t\t\t\tarr[2] = clr.b;\n\t\t\t}\n\t\t}\n\n\t\tfor (let c = 0; c < 3; c++) {\n\t\t\tthis.emissiveUniform[c] *= this.emissiveIntensity;\n\t\t}\n\n\t\tthis.dirtyColor = false;\n\t}\n\n\tupdateShader(device, scene, objDefs, staticLightList, pass, sortedLights) {\n\t\tif (!this._colorProcessed && this._scene) {\n\t\t\tthis._colorProcessed = true;\n\n\t\t\tthis._processColor();\n\t\t}\n\n\t\tconst useTexCubeLod = device.useTexCubeLod;\n\t\tconst useDp = !device.extTextureLod;\n\t\tlet globalSky128, globalSky64, globalSky32, globalSky16, globalSky8, globalSky4;\n\n\t\tif (this.useSkybox) {\n\t\t\tglobalSky128 = scene._skyboxPrefiltered[0];\n\t\t\tglobalSky64 = scene._skyboxPrefiltered[1];\n\t\t\tglobalSky32 = scene._skyboxPrefiltered[2];\n\t\t\tglobalSky16 = scene._skyboxPrefiltered[3];\n\t\t\tglobalSky8 = scene._skyboxPrefiltered[4];\n\t\t\tglobalSky4 = scene._skyboxPrefiltered[5];\n\t\t}\n\n\t\tconst prefilteredCubeMap128 = this.prefilteredCubeMap128 || globalSky128;\n\t\tconst prefilteredCubeMap64 = this.prefilteredCubeMap64 || globalSky64;\n\t\tconst prefilteredCubeMap32 = this.prefilteredCubeMap32 || globalSky32;\n\t\tconst prefilteredCubeMap16 = this.prefilteredCubeMap16 || globalSky16;\n\t\tconst prefilteredCubeMap8 = this.prefilteredCubeMap8 || globalSky8;\n\t\tconst prefilteredCubeMap4 = this.prefilteredCubeMap4 || globalSky4;\n\n\t\tif (prefilteredCubeMap128) {\n\t\t\tconst allMips = prefilteredCubeMap128 && prefilteredCubeMap64 && prefilteredCubeMap32 && prefilteredCubeMap16 && prefilteredCubeMap8 && prefilteredCubeMap4;\n\n\t\t\tif (useDp && allMips) {\n\t\t\t\tif (!prefilteredCubeMap128.dpAtlas) {\n\t\t\t\t\tconst atlas = [prefilteredCubeMap128, prefilteredCubeMap64, prefilteredCubeMap32, prefilteredCubeMap16, prefilteredCubeMap8, prefilteredCubeMap4];\n\t\t\t\t\tprefilteredCubeMap128.dpAtlas = generateDpAtlas(device, atlas);\n\t\t\t\t\tprefilteredCubeMap128.sh = shFromCubemap(device, prefilteredCubeMap16);\n\t\t\t\t}\n\n\t\t\t\tthis.dpAtlas = prefilteredCubeMap128.dpAtlas;\n\t\t\t\tthis.ambientSH = prefilteredCubeMap128.sh;\n\n\t\t\t\tthis._setParameter('ambientSH[0]', this.ambientSH);\n\n\t\t\t\tthis._setParameter('texture_sphereMap', this.dpAtlas);\n\t\t\t} else if (useTexCubeLod) {\n\t\t\t\tif (prefilteredCubeMap128._levels.length < 6) {\n\t\t\t\t\tif (allMips) {\n\t\t\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"Can't use prefiltered cubemap: \" + allMips + \", \" + useTexCubeLod + \", \" + prefilteredCubeMap128._levels);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\t\t\t\t}\n\t\t\t} else if (allMips) {\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap128', prefilteredCubeMap128);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap64', prefilteredCubeMap64);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap32', prefilteredCubeMap32);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap16', prefilteredCubeMap16);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap8', prefilteredCubeMap8);\n\n\t\t\t\tthis._setParameter('texture_prefilteredCubeMap4', prefilteredCubeMap4);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Can't use prefiltered cubemap: \" + allMips + \", \" + useTexCubeLod + \", \" + prefilteredCubeMap128._levels);\n\t\t\t}\n\n\t\t\tif (this.useSkybox && !scene.skyboxRotation.equals(Quat.IDENTITY) && scene._skyboxRotationMat3) {\n\t\t\t\tthis._setParameter('cubeMapRotationMatrix', scene._skyboxRotationMat3.data);\n\t\t\t}\n\t\t}\n\n\t\tconst minimalOptions = pass > SHADER_FORWARDHDR && pass <= SHADER_PICK;\n\t\tlet options = minimalOptions ? standard.optionsContextMin : standard.optionsContext;\n\t\tif (minimalOptions) this.shaderOptBuilder.updateMinRef(options, device, scene, this, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128);else this.shaderOptBuilder.updateRef(options, device, scene, this, objDefs, staticLightList, pass, sortedLights, prefilteredCubeMap128);\n\n\t\tif (this.onUpdateShader) {\n\t\t\toptions = this.onUpdateShader(options);\n\t\t}\n\n\t\tconst library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('standard', options);\n\n\t\tif (!objDefs) {\n\t\t\tthis.clearVariants();\n\t\t\tthis.variants[0] = this.shader;\n\t\t}\n\n\t\tthis.dirtyShader = false;\n\t}\n\n\tdestroy() {\n\t\tfor (const asset in this._assetReferences) {\n\t\t\tthis._assetReferences[asset]._unbind();\n\t\t}\n\n\t\tthis._assetReferences = null;\n\t\tthis._validator = null;\n\t\tsuper.destroy();\n\t}\n\n}\n\nStandardMaterial.TEXTURE_PARAMETERS = standardMaterialTextureParameters;\nStandardMaterial.CUBEMAP_PARAMETERS = standardMaterialCubemapParameters;\n\nfunction _defineTex2D(obj, name, uv, channels, defChannel, vertexColor, detailMode) {\n\tvar privMap = \"_\" + name + \"Map\";\n\tvar privMapTiling = privMap + \"Tiling\";\n\tvar privMapOffset = privMap + \"Offset\";\n\tvar mapTransform = privMap.substring(1) + \"Transform\";\n\tvar mapTransformUniform = mapTransform + \"Uniform\";\n\tvar privMapUv = privMap + \"Uv\";\n\tvar privMapChannel = privMap + \"Channel\";\n\tvar privMapVertexColor = \"_\" + name + \"VertexColor\";\n\tvar privMapVertexColorChannel = \"_\" + name + \"VertexColorChannel\";\n\tvar privMapDetailMode = \"_\" + name + \"Mode\";\n\tobj[privMap] = null;\n\tobj[privMapTiling] = new Vec2(1, 1);\n\tobj[privMapOffset] = new Vec2(0, 0);\n\tobj[mapTransform] = null;\n\tobj[mapTransformUniform] = null;\n\tobj[privMapUv] = uv;\n\n\tif (channels > 0) {\n\t\tvar channel = defChannel ? defChannel : channels > 1 ? \"rgb\" : \"g\";\n\t\tobj[privMapChannel] = channel;\n\t\tif (vertexColor) obj[privMapVertexColorChannel] = channel;\n\t}\n\n\tif (vertexColor) obj[privMapVertexColor] = false;\n\tif (detailMode) obj[privMapDetailMode] = DETAILMODE_MUL;\n\t_matTex2D[name] = channels;\n\tObject.defineProperty(StandardMaterial.prototype, privMap.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMap];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar oldVal = this[privMap];\n\t\t\tif (!!oldVal ^ !!value) this.dirtyShader = true;\n\n\t\t\tif (oldVal && value) {\n\t\t\t\tif (oldVal.type !== value.type || oldVal.fixCubemapSeams !== value.fixCubemapSeams || oldVal.format !== value.format) {\n\t\t\t\t\tthis.dirtyShader = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis[privMap] = value;\n\t\t}\n\t});\n\tvar mapTiling = privMapTiling.substring(1);\n\tvar mapOffset = privMapOffset.substring(1);\n\tObject.defineProperty(StandardMaterial.prototype, mapTiling, {\n\t\tget: function () {\n\t\t\treturn this[privMapTiling];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis[privMapTiling] = value;\n\t\t}\n\t});\n\n\t_prop2Uniform[mapTiling] = function (mat, val, changeMat) {\n\t\tvar tform = mat._updateMapTransform(changeMat ? mat[mapTransform] : null, val, mat[privMapOffset]);\n\n\t\treturn {\n\t\t\tname: \"texture_\" + mapTransform,\n\t\t\tvalue: tform.data\n\t\t};\n\t};\n\n\tObject.defineProperty(StandardMaterial.prototype, mapOffset, {\n\t\tget: function () {\n\t\t\treturn this[privMapOffset];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis[privMapOffset] = value;\n\t\t}\n\t});\n\n\t_prop2Uniform[mapOffset] = function (mat, val, changeMat) {\n\t\tvar tform = mat._updateMapTransform(changeMat ? mat[mapTransform] : null, mat[privMapTiling], val);\n\n\t\treturn {\n\t\t\tname: \"texture_\" + mapTransform,\n\t\t\tvalue: tform.data\n\t\t};\n\t};\n\n\tObject.defineProperty(StandardMaterial.prototype, privMapUv.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMapUv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[privMapUv] !== value) this.dirtyShader = true;\n\t\t\tthis[privMapUv] = value;\n\t\t}\n\t});\n\tObject.defineProperty(StandardMaterial.prototype, privMapChannel.substring(1), {\n\t\tget: function () {\n\t\t\treturn this[privMapChannel];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[privMapChannel] !== value) this.dirtyShader = true;\n\t\t\tthis[privMapChannel] = value;\n\t\t}\n\t});\n\n\tif (vertexColor) {\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapVertexColor.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapVertexColor];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tthis.dirtyShader = true;\n\t\t\t\tthis[privMapVertexColor] = value;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapVertexColorChannel.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapVertexColorChannel];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tif (this[privMapVertexColorChannel] !== value) this.dirtyShader = true;\n\t\t\t\tthis[privMapVertexColorChannel] = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (detailMode) {\n\t\tObject.defineProperty(StandardMaterial.prototype, privMapDetailMode.substring(1), {\n\t\t\tget: function () {\n\t\t\t\treturn this[privMapDetailMode];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tthis.dirtyShader = true;\n\t\t\t\tthis[privMapDetailMode] = value;\n\t\t\t}\n\t\t});\n\t}\n\n\t_propsSerial.push(privMap.substring(1));\n\n\t_propsSerial.push(privMapTiling.substring(1));\n\n\t_propsSerial.push(privMapOffset.substring(1));\n\n\t_propsSerial.push(privMapUv.substring(1));\n\n\t_propsSerial.push(privMapChannel.substring(1));\n\n\tif (vertexColor) {\n\t\t_propsSerial.push(privMapVertexColor.substring(1));\n\n\t\t_propsSerial.push(privMapVertexColorChannel.substring(1));\n\t}\n\n\tif (detailMode) {\n\t\t_propsSerial.push(privMapDetailMode.substring(1));\n\t}\n\n\t_propsInternalNull.push(mapTransform);\n}\n\nfunction _defineColor(obj, name, defaultValue, hasMultiplier) {\n\tvar priv = \"_\" + name;\n\tvar uform = name + \"Uniform\";\n\tvar mult = name + \"Intensity\";\n\tvar pmult = \"_\" + mult;\n\tobj[priv] = defaultValue;\n\tobj[uform] = new Float32Array(3);\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\tthis.dirtyColor = true;\n\t\t\tthis.dirtyShader = true;\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tvar oldValue = this[priv];\n\t\t\tvar wasRound = oldValue.r === 0 && oldValue.g === 0 && oldValue.b === 0 || oldValue.r === 1 && oldValue.g === 1 && oldValue.b === 1;\n\t\t\tvar isRound = newValue.r === 0 && newValue.g === 0 && newValue.b === 0 || newValue.r === 1 && newValue.g === 1 && newValue.b === 1;\n\t\t\tif (wasRound ^ isRound) this.dirtyShader = true;\n\t\t\tthis.dirtyColor = true;\n\t\t\tthis[priv] = newValue;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_propsInternalVec3.push(uform);\n\n\t_propsColor.push(name);\n\n\t_prop2Uniform[name] = function (mat, val, changeMat) {\n\t\tvar arr = changeMat ? mat[uform] : new Float32Array(3);\n\t\tvar gammaCorrection = false;\n\n\t\tif (mat.useGammaTonemap) {\n\t\t\tvar scene = mat._scene || getApplication().scene;\n\t\t\tgammaCorrection = scene.gammaCorrection;\n\t\t}\n\n\t\tfor (var c = 0; c < 3; c++) {\n\t\t\tif (gammaCorrection) {\n\t\t\t\tarr[c] = Math.pow(val.data[c], 2.2);\n\t\t\t} else {\n\t\t\t\tarr[c] = val.data[c];\n\t\t\t}\n\n\t\t\tif (hasMultiplier) arr[c] *= mat[pmult];\n\t\t}\n\n\t\treturn {\n\t\t\tname: \"material_\" + name,\n\t\t\tvalue: arr\n\t\t};\n\t};\n\n\tif (hasMultiplier) {\n\t\tobj[pmult] = 1;\n\t\tObject.defineProperty(StandardMaterial.prototype, mult, {\n\t\t\tget: function () {\n\t\t\t\treturn this[pmult];\n\t\t\t},\n\t\t\tset: function (newValue) {\n\t\t\t\tvar oldValue = this[pmult];\n\t\t\t\tvar wasRound = oldValue === 0 || oldValue === 1;\n\t\t\t\tvar isRound = newValue === 0 || newValue === 1;\n\t\t\t\tif (wasRound ^ isRound) this.dirtyShader = true;\n\t\t\t\tthis.dirtyColor = true;\n\t\t\t\tthis[pmult] = newValue;\n\t\t\t}\n\t\t});\n\n\t\t_propsSerial.push(mult);\n\n\t\t_prop2Uniform[mult] = function (mat, val, changeMat) {\n\t\t\tvar arr = changeMat ? mat[uform] : new Float32Array(3);\n\t\t\tvar gammaCorrection = false;\n\n\t\t\tif (mat.useGammaTonemap) {\n\t\t\t\tvar scene = mat._scene || getApplication().scene;\n\t\t\t\tgammaCorrection = scene.gammaCorrection;\n\t\t\t}\n\n\t\t\tfor (var c = 0; c < 3; c++) {\n\t\t\t\tif (gammaCorrection) {\n\t\t\t\t\tarr[c] = Math.pow(mat[priv].data[c], 2.2);\n\t\t\t\t} else {\n\t\t\t\t\tarr[c] = mat[priv].data[c];\n\t\t\t\t}\n\n\t\t\t\tarr[c] *= mat[pmult];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tname: \"material_\" + name,\n\t\t\t\tvalue: arr\n\t\t\t};\n\t\t};\n\t}\n}\n\nfunction _defineFloat(obj, name, defaultValue, func) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = defaultValue;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tvar oldValue = this[priv];\n\t\t\tif (oldValue === newValue) return;\n\t\t\tthis[priv] = newValue;\n\t\t\tvar wasRound = oldValue === 0 || oldValue === 1;\n\t\t\tvar isRound = newValue === 0 || newValue === 1;\n\t\t\tif (wasRound || isRound) this.dirtyShader = true;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_prop2Uniform[name] = func !== undefined ? func : function (mat, val, changeMat) {\n\t\treturn {\n\t\t\tname: \"material_\" + name,\n\t\t\tvalue: val\n\t\t};\n\t};\n}\n\nfunction _defineObject(obj, name, func) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = null;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar oldVal = this[priv];\n\t\t\tif (!!oldVal ^ !!value) this.dirtyShader = true;\n\t\t\tthis[priv] = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n\n\t_prop2Uniform[name] = func;\n}\n\nfunction _defineAlias(obj, newName, oldName) {\n\tObject.defineProperty(StandardMaterial.prototype, oldName, {\n\t\tget: function () {\n\t\t\treturn this[newName];\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis[newName] = value;\n\t\t}\n\t});\n}\n\nfunction _defineChunks(obj) {\n\tObject.defineProperty(StandardMaterial.prototype, \"chunks\", {\n\t\tget: function () {\n\t\t\tthis.dirtyShader = true;\n\t\t\treturn this._chunks;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.dirtyShader = true;\n\t\t\tthis._chunks = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(\"chunks\");\n}\n\nfunction _defineFlag(obj, name, defaultValue) {\n\tvar priv = \"_\" + name;\n\tobj[priv] = defaultValue;\n\tObject.defineProperty(StandardMaterial.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[priv];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[priv] !== value) this.dirtyShader = true;\n\t\t\tthis[priv] = value;\n\t\t}\n\t});\n\n\t_propsSerial.push(name);\n}\n\nfunction _defineMaterialProps(obj) {\n\tobj.dirtyShader = true;\n\tobj.dirtyColor = true;\n\tobj._scene = null;\n\tobj._colorProcessed = false;\n\n\t_defineColor(obj, \"ambient\", new Color(0.7, 0.7, 0.7));\n\n\t_defineColor(obj, \"diffuse\", new Color(1, 1, 1));\n\n\t_defineColor(obj, \"specular\", new Color(0, 0, 0));\n\n\t_defineColor(obj, \"emissive\", new Color(0, 0, 0), true);\n\n\t_defineFloat(obj, \"shininess\", 25, function (mat, shininess) {\n\t\tlet value;\n\n\t\tif (mat.shadingModel === SPECULAR_PHONG) {\n\t\t\tvalue = Math.pow(2, shininess * 0.01 * 11);\n\t\t} else {\n\t\t\tvalue = shininess * 0.01;\n\t\t}\n\n\t\treturn {\n\t\t\tname: \"material_shininess\",\n\t\t\tvalue: value\n\t\t};\n\t});\n\n\t_defineFloat(obj, \"heightMapFactor\", 1, function (mat, height) {\n\t\treturn {\n\t\t\tname: 'material_heightMapFactor',\n\t\t\tvalue: height * 0.025\n\t\t};\n\t});\n\n\t_defineFloat(obj, \"opacity\", 1);\n\n\t_defineFloat(obj, \"alphaFade\", 1);\n\n\t_defineFloat(obj, \"alphaTest\", 0);\n\n\t_defineFloat(obj, \"bumpiness\", 1);\n\n\t_defineFloat(obj, \"normalDetailMapBumpiness\", 1);\n\n\t_defineFloat(obj, \"reflectivity\", 1);\n\n\t_defineFloat(obj, \"occludeSpecularIntensity\", 1);\n\n\t_defineFloat(obj, \"refraction\", 0);\n\n\t_defineFloat(obj, \"refractionIndex\", 1.0 / 1.5);\n\n\t_defineFloat(obj, \"metalness\", 1);\n\n\t_defineFloat(obj, \"anisotropy\", 0);\n\n\t_defineFloat(obj, \"clearCoat\", 0);\n\n\t_defineFloat(obj, \"clearCoatGlossiness\", 1);\n\n\t_defineFloat(obj, \"clearCoatBumpiness\", 1);\n\n\t_defineFloat(obj, \"aoUvSet\", 0, null);\n\n\t_defineObject(obj, \"ambientSH\", function (mat, val, changeMat) {\n\t\treturn {\n\t\t\tname: \"ambientSH[0]\",\n\t\t\tvalue: val\n\t\t};\n\t});\n\n\t_defineObject(obj, \"cubeMapProjectionBox\", function (mat, val, changeMat) {\n\t\tconst bmin = changeMat ? mat.cubeMapMinUniform : new Float32Array(3);\n\t\tconst bmax = changeMat ? mat.cubeMapMaxUniform : new Float32Array(3);\n\t\tbmin[0] = val.center.x - val.halfExtents.x;\n\t\tbmin[1] = val.center.y - val.halfExtents.y;\n\t\tbmin[2] = val.center.z - val.halfExtents.z;\n\t\tbmax[0] = val.center.x + val.halfExtents.x;\n\t\tbmax[1] = val.center.y + val.halfExtents.y;\n\t\tbmax[2] = val.center.z + val.halfExtents.z;\n\t\treturn [{\n\t\t\tname: \"envBoxMin\",\n\t\t\tvalue: bmin\n\t\t}, {\n\t\t\tname: \"envBoxMax\",\n\t\t\tvalue: bmax\n\t\t}];\n\t});\n\n\t_defineChunks();\n\n\t_defineFlag(obj, \"ambientTint\", false);\n\n\t_defineFlag(obj, \"diffuseTint\", false);\n\n\t_defineFlag(obj, \"specularTint\", false);\n\n\t_defineFlag(obj, \"emissiveTint\", false);\n\n\t_defineFlag(obj, \"fastTbn\", false);\n\n\t_defineFlag(obj, \"specularAntialias\", false);\n\n\t_defineFlag(obj, \"useMetalness\", false);\n\n\t_defineFlag(obj, \"enableGGXSpecular\", false);\n\n\t_defineFlag(obj, \"occludeDirect\", false);\n\n\t_defineFlag(obj, \"normalizeNormalMap\", true);\n\n\t_defineFlag(obj, \"conserveEnergy\", true);\n\n\t_defineFlag(obj, \"opacityFadesSpecular\", true);\n\n\t_defineFlag(obj, \"occludeSpecular\", SPECOCC_AO);\n\n\t_defineFlag(obj, \"shadingModel\", SPECULAR_BLINN);\n\n\t_defineFlag(obj, \"fresnelModel\", FRESNEL_SCHLICK);\n\n\t_defineFlag(obj, \"cubeMapProjection\", CUBEPROJ_NONE);\n\n\t_defineFlag(obj, \"customFragmentShader\", null);\n\n\t_defineFlag(obj, \"forceFragmentPrecision\", null);\n\n\t_defineFlag(obj, \"useFog\", true);\n\n\t_defineFlag(obj, \"useLighting\", true);\n\n\t_defineFlag(obj, \"useGammaTonemap\", true);\n\n\t_defineFlag(obj, \"useSkybox\", true);\n\n\t_defineFlag(obj, \"forceUv1\", false);\n\n\t_defineFlag(obj, \"pixelSnap\", false);\n\n\t_defineFlag(obj, \"twoSidedLighting\", false);\n\n\t_defineFlag(obj, \"nineSlicedMode\", undefined);\n\n\t_defineTex2D(obj, \"diffuse\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"specular\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"emissive\", 0, 3, \"\", true);\n\n\t_defineTex2D(obj, \"normal\", 0, -1, \"\", false);\n\n\t_defineTex2D(obj, \"metalness\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"gloss\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"opacity\", 0, 1, \"a\", true);\n\n\t_defineTex2D(obj, \"height\", 0, 1, \"\", false);\n\n\t_defineTex2D(obj, \"ao\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"light\", 1, 3, \"\", true);\n\n\t_defineTex2D(obj, \"msdf\", 0, 3, \"\", false);\n\n\t_defineTex2D(obj, \"diffuseDetail\", 0, 3, \"\", false, true);\n\n\t_defineTex2D(obj, \"normalDetail\", 0, -1, \"\", false);\n\n\t_defineTex2D(obj, \"clearCoat\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"clearCoatGloss\", 0, 1, \"\", true);\n\n\t_defineTex2D(obj, \"clearCoatNormal\", 0, -1, \"\", false);\n\n\t_defineObject(obj, \"cubeMap\");\n\n\t_defineObject(obj, \"sphereMap\");\n\n\t_defineObject(obj, \"dpAtlas\");\n\n\t_defineObject(obj, \"prefilteredCubeMap128\");\n\n\t_defineObject(obj, \"prefilteredCubeMap64\");\n\n\t_defineObject(obj, \"prefilteredCubeMap32\");\n\n\t_defineObject(obj, \"prefilteredCubeMap16\");\n\n\t_defineObject(obj, \"prefilteredCubeMap8\");\n\n\t_defineObject(obj, \"prefilteredCubeMap4\");\n\n\t_defineAlias(obj, \"diffuseTint\", \"diffuseMapTint\");\n\n\t_defineAlias(obj, \"specularTint\", \"specularMapTint\");\n\n\t_defineAlias(obj, \"emissiveTint\", \"emissiveMapTint\");\n\n\t_defineAlias(obj, \"aoVertexColor\", \"aoMapVertexColor\");\n\n\t_defineAlias(obj, \"diffuseVertexColor\", \"diffuseMapVertexColor\");\n\n\t_defineAlias(obj, \"specularVertexColor\", \"specularMapVertexColor\");\n\n\t_defineAlias(obj, \"emissiveVertexColor\", \"emissiveMapVertexColor\");\n\n\t_defineAlias(obj, \"metalnessVertexColor\", \"metalnessMapVertexColor\");\n\n\t_defineAlias(obj, \"glossVertexColor\", \"glossMapVertexColor\");\n\n\t_defineAlias(obj, \"opacityVertexColor\", \"opacityMapVertexColor\");\n\n\t_defineAlias(obj, \"lightVertexColor\", \"lightMapVertexColor\");\n\n\tfor (let i = 0; i < _propsSerial.length; i++) {\n\t\t_propsSerialDefaultVal[i] = obj[_propsSerial[i]];\n\t}\n\n\tobj._propsSet = [];\n}\n\n_defineMaterialProps(StandardMaterial.prototype);\n\nclass ProgramLibrary {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t\tthis._cache = {};\n\t\tthis._generators = {};\n\t\tthis._isClearingCache = false;\n\t\tthis._precached = false;\n\t\tthis._programsCollection = [];\n\t\tthis._defaultStdMatOption = {};\n\t\tthis._defaultStdMatOptionMin = {};\n\t\tconst m = new StandardMaterial();\n\t\tm.shaderOptBuilder.updateRef(this._defaultStdMatOption, device, {}, m, null, [], SHADER_FORWARD, null, null);\n\t\tm.shaderOptBuilder.updateMinRef(this._defaultStdMatOptionMin, device, {}, m, null, [], SHADER_SHADOW, null, null);\n\t}\n\n\tregister(name, generator) {\n\t\tif (!this.isRegistered(name)) {\n\t\t\tthis._generators[name] = generator;\n\t\t}\n\t}\n\n\tunregister(name) {\n\t\tif (this.isRegistered(name)) {\n\t\t\tdelete this._generators[name];\n\t\t}\n\t}\n\n\tisRegistered(name) {\n\t\tconst generator = this._generators[name];\n\t\treturn generator !== undefined;\n\t}\n\n\tgetProgram(name, options) {\n\t\tconst generator = this._generators[name];\n\n\t\tif (generator === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst gd = this._device;\n\t\tconst key = generator.generateKey(options);\n\t\tlet shader = this._cache[key];\n\n\t\tif (!shader) {\n\t\t\tlet lights;\n\n\t\t\tif (options.lights) {\n\t\t\t\tlights = options.lights;\n\t\t\t\toptions.lights = lights.map(function (l) {\n\t\t\t\t\tconst lcopy = l.clone ? l.clone() : l;\n\t\t\t\t\tlcopy.key = l.key;\n\t\t\t\t\treturn lcopy;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.storeNewProgram(name, options);\n\t\t\tif (options.lights) options.lights = lights;\n\t\t\tif (this._precached) console.warn(\"ProgramLibrary#getProgram: Cache miss for shader\", name, \"key\", key, \"after shaders precaching\");\n\t\t\tconst shaderDefinition = generator.createShaderDefinition(gd, options);\n\t\t\tshader = this._cache[key] = new Shader(gd, shaderDefinition);\n\t\t}\n\n\t\treturn shader;\n\t}\n\n\tstoreNewProgram(name, options) {\n\t\tlet opt = {};\n\n\t\tif (name === \"standard\") {\n\t\t\tconst defaultMat = this._getDefaultStdMatOptions(options.pass);\n\n\t\t\tfor (const p in options) {\n\t\t\t\tif (options.hasOwnProperty(p) && defaultMat[p] !== options[p] || p === \"pass\") opt[p] = options[p];\n\t\t\t}\n\t\t} else {\n\t\t\topt = options;\n\t\t}\n\n\t\tthis._programsCollection.push(JSON.stringify({\n\t\t\tname: name,\n\t\t\toptions: opt\n\t\t}));\n\t}\n\n\tdumpPrograms() {\n\t\tlet text = 'let device = pc.app ? pc.app.graphicsDevice : pc.Application.getApplication().graphicsDevice;\\n';\n\t\ttext += 'let shaders = [';\n\t\tif (this._programsCollection[0]) text += '\\n\\t' + this._programsCollection[0];\n\n\t\tfor (let i = 1; i < this._programsCollection.length; ++i) {\n\t\t\ttext += ',\\n\\t' + this._programsCollection[i];\n\t\t}\n\n\t\ttext += '\\n];\\n';\n\t\ttext += 'device.programLib.precompile(shaders);\\n';\n\t\ttext += 'if (pc.version != \\\"' + version + '\\\" || pc.revision != \\\"' + revision + '\\\")\\n';\n\t\ttext += '\\tconsole.warn(\\\"precompile-shaders.js: engine version mismatch, rebuild shaders lib with current engine\\\");';\n\t\tconst element = document.createElement('a');\n\t\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n\t\telement.setAttribute('download', 'precompile-shaders.js');\n\t\telement.style.display = 'none';\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tclearCache() {\n\t\tconst cache = this._cache;\n\t\tthis._isClearingCache = true;\n\n\t\tfor (const key in cache) {\n\t\t\tif (cache.hasOwnProperty(key)) {\n\t\t\t\tcache[key].destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis._cache = {};\n\t\tthis._isClearingCache = false;\n\t}\n\n\tremoveFromCache(shader) {\n\t\tif (this._isClearingCache) return;\n\t\tconst cache = this._cache;\n\n\t\tfor (const key in cache) {\n\t\t\tif (cache.hasOwnProperty(key)) {\n\t\t\t\tif (cache[key] === shader) {\n\t\t\t\t\tdelete cache[key];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_getDefaultStdMatOptions(pass) {\n\t\treturn pass > SHADER_FORWARDHDR && pass <= SHADER_PICK ? this._defaultStdMatOptionMin : this._defaultStdMatOption;\n\t}\n\n\tprecompile(cache) {\n\t\tif (cache) {\n\t\t\tconst shaders = new Array(cache.length);\n\n\t\t\tfor (let i = 0; i < cache.length; i++) {\n\t\t\t\tif (cache[i].name === \"standard\") {\n\t\t\t\t\tconst opt = cache[i].options;\n\n\t\t\t\t\tconst defaultMat = this._getDefaultStdMatOptions(opt.pass);\n\n\t\t\t\t\tfor (const p in defaultMat) {\n\t\t\t\t\t\tif (defaultMat.hasOwnProperty(p) && opt[p] === undefined) opt[p] = defaultMat[p];\n\t\t\t\t\t}\n\n\t\t\t\t\topt.useTexCubeLod = this._device.useTexCubeLod;\n\t\t\t\t}\n\n\t\t\t\tshaders[i] = this.getProgram(cache[i].name, cache[i].options);\n\t\t\t}\n\t\t}\n\n\t\tthis._precached = true;\n\t}\n\n}\n\nclass Version {\n\tconstructor() {\n\t\tthis.globalId = 0;\n\t\tthis.revision = 0;\n\t}\n\n\tequals(other) {\n\t\treturn this.globalId === other.globalId && this.revision === other.revision;\n\t}\n\n\tcopy(other) {\n\t\tthis.globalId = other.globalId;\n\t\tthis.revision = other.revision;\n\t}\n\n\treset() {\n\t\tthis.globalId = 0;\n\t\tthis.revision = 0;\n\t}\n\n}\n\nlet idCounter = 0;\n\nclass VersionedObject {\n\tconstructor() {\n\t\tidCounter++;\n\t\tthis.version = new Version();\n\t\tthis.version.globalId = idCounter;\n\t}\n\n\tincrement() {\n\t\tthis.version.revision++;\n\t}\n\n}\n\nclass ScopeId {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t\tthis.value = null;\n\t\tthis.versionObject = new VersionedObject();\n\t}\n\n\tsetValue(value) {\n\t\tthis.value = value;\n\t\tthis.versionObject.increment();\n\t}\n\n\tgetValue() {\n\t\treturn this.value;\n\t}\n\n}\n\nclass ScopeSpace {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t\tthis.variables = new Map();\n\t}\n\n\tresolve(name) {\n\t\tif (!this.variables.has(name)) {\n\t\t\tthis.variables.set(name, new ScopeId(name));\n\t\t}\n\n\t\treturn this.variables.get(name);\n\t}\n\n\tremoveValue(value) {\n\t\tfor (const uniformName in this.variables) {\n\t\t\tconst uniform = this.variables[uniformName];\n\n\t\t\tif (uniform.value === value) {\n\t\t\t\tuniform.value = null;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ShaderInput {\n\tconstructor(graphicsDevice, name, type, locationId) {\n\t\tthis.locationId = locationId;\n\t\tthis.scopeId = graphicsDevice.scope.resolve(name);\n\t\tthis.version = new Version();\n\n\t\tif (name.substr(name.length - 3) === \"[0]\") {\n\t\t\tswitch (type) {\n\t\t\t\tcase UNIFORMTYPE_FLOAT:\n\t\t\t\t\ttype = UNIFORMTYPE_FLOATARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC2:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC2ARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC3:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC3ARRAY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UNIFORMTYPE_VEC4:\n\t\t\t\t\ttype = UNIFORMTYPE_VEC4ARRAY;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.dataType = type;\n\t\tthis.value = [null, null, null, null];\n\t\tthis.array = [];\n\t}\n\n}\n\nconst EVENT_RESIZE = 'resizecanvas';\n\nfunction downsampleImage(image, size) {\n\tconst srcW = image.width;\n\tconst srcH = image.height;\n\n\tif (srcW > size || srcH > size) {\n\t\tconst scale = size / Math.max(srcW, srcH);\n\t\tconst dstW = Math.floor(srcW * scale);\n\t\tconst dstH = Math.floor(srcH * scale);\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = dstW;\n\t\tcanvas.height = dstH;\n\t\tconst context = canvas.getContext('2d');\n\t\tcontext.drawImage(image, 0, 0, srcW, srcH, 0, 0, dstW, dstH);\n\t\treturn canvas;\n\t}\n\n\treturn image;\n}\n\nfunction testRenderable(gl, pixelFormat) {\n\tlet result = true;\n\tconst texture = gl.createTexture();\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, pixelFormat, null);\n\tconst framebuffer = gl.createFramebuffer();\n\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n\tif (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n\t\tresult = false;\n\t}\n\n\tgl.bindTexture(gl.TEXTURE_2D, null);\n\tgl.deleteTexture(texture);\n\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\tgl.deleteFramebuffer(framebuffer);\n\treturn result;\n}\n\nfunction testTextureHalfFloatUpdatable(gl, pixelFormat) {\n\tlet result = true;\n\tconst texture = gl.createTexture();\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\tconst data = new Uint16Array(4 * 2 * 2);\n\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, pixelFormat, data);\n\n\tif (gl.getError() !== gl.NO_ERROR) {\n\t\tresult = false;\n\t\tconsole.log(\"Above error related to HALF_FLOAT_OES can be ignored, it was triggered by testing half float texture support\");\n\t}\n\n\tgl.bindTexture(gl.TEXTURE_2D, null);\n\tgl.deleteTexture(texture);\n\treturn result;\n}\n\nfunction testTextureFloatHighPrecision(device) {\n\tif (!device.textureFloatRenderable) return false;\n\tconst test1 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.precisionTestPS, \"ptest1\");\n\tconst test2 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.precisionTest2PS, \"ptest2\");\n\tconst textureOptions = {\n\t\tformat: PIXELFORMAT_RGBA32F,\n\t\twidth: 1,\n\t\theight: 1,\n\t\tmipmaps: false,\n\t\tminFilter: FILTER_NEAREST,\n\t\tmagFilter: FILTER_NEAREST\n\t};\n\tconst tex1 = new Texture(device, textureOptions);\n\ttex1.name = 'testFHP';\n\tconst targ1 = new RenderTarget({\n\t\tcolorBuffer: tex1,\n\t\tdepth: false\n\t});\n\tdrawQuadWithShader(device, targ1, test1);\n\ttextureOptions.format = PIXELFORMAT_R8_G8_B8_A8;\n\tconst tex2 = new Texture(device, textureOptions);\n\ttex2.name = 'testFHP';\n\tconst targ2 = new RenderTarget({\n\t\tcolorBuffer: tex2,\n\t\tdepth: false\n\t});\n\tdevice.constantTexSource.setValue(tex1);\n\tdrawQuadWithShader(device, targ2, test2);\n\tconst prevFramebuffer = device.activeFramebuffer;\n\tdevice.setFramebuffer(targ2._glFrameBuffer);\n\tconst pixels = new Uint8Array(4);\n\tdevice.readPixels(0, 0, 1, 1, pixels);\n\tdevice.setFramebuffer(prevFramebuffer);\n\tconst x = pixels[0] / 255;\n\tconst y = pixels[1] / 255;\n\tconst z = pixels[2] / 255;\n\tconst w = pixels[3] / 255;\n\tconst f = x / (256 * 256 * 256) + y / (256 * 256) + z / 256 + w;\n\ttex1.destroy();\n\ttarg1.destroy();\n\ttex2.destroy();\n\ttarg2.destroy();\n\treturn f === 0;\n}\n\nclass GraphicsDevice extends EventHandler {\n\tconstructor(canvas, options) {\n\t\tsuper();\n\t\tthis.canvas = canvas;\n\t\tthis._enableAutoInstancing = false;\n\t\tthis.autoInstancingMaxObjects = 16384;\n\t\tthis.defaultFramebuffer = null;\n\t\tthis._maxPixelRatio = 1;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis.updateClientRect();\n\t\tthis.shaders = [];\n\t\tthis.buffers = [];\n\t\tthis.textures = [];\n\t\tthis.targets = [];\n\t\tthis.contextLost = false;\n\n\t\tthis._contextLostHandler = event => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.contextLost = true;\n\t\t\tthis.loseContext();\n\t\t\tthis.fire('devicelost');\n\t\t};\n\n\t\tthis._contextRestoredHandler = () => {\n\t\t\tthis.restoreContext();\n\t\t\tthis.contextLost = false;\n\t\t\tthis.fire('devicerestored');\n\t\t};\n\n\t\tconst preferWebGl2 = options && options.preferWebGl2 !== undefined ? options.preferWebGl2 : true;\n\t\tconst names = preferWebGl2 ? [\"webgl2\", \"webgl\", \"experimental-webgl\"] : [\"webgl\", \"experimental-webgl\"];\n\t\tlet gl = null;\n\t\toptions = options || {};\n\t\toptions.stencil = true;\n\n\t\tfor (let i = 0; i < names.length; i++) {\n\t\t\tgl = canvas.getContext(names[i], options);\n\n\t\t\tif (gl) {\n\t\t\t\tthis.webgl2 = names[i] === 'webgl2';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!gl) {\n\t\t\tthrow new Error(\"WebGL not supported\");\n\t\t}\n\n\t\tthis.gl = gl;\n\t\tthis._tempEnableSafariTextureUnitWorkaround = !!window.safari;\n\t\tconst isChrome = !!window.chrome;\n\t\tconst isMac = navigator.appVersion.indexOf(\"Mac\") !== -1;\n\t\tthis._tempMacChromeBlitFramebufferWorkaround = isMac && isChrome && !options.alpha;\n\t\twindow.setupVertexArrayObject(gl);\n\t\tcanvas.addEventListener(\"webglcontextlost\", this._contextLostHandler, false);\n\t\tcanvas.addEventListener(\"webglcontextrestored\", this._contextRestoredHandler, false);\n\t\tthis.initializeExtensions();\n\t\tthis.initializeCapabilities();\n\t\tthis.initializeRenderState();\n\t\tthis.initializeContextCaches();\n\t\tthis.defaultClearOptions = {\n\t\t\tcolor: [0, 0, 0, 1],\n\t\t\tdepth: 1,\n\t\t\tstencil: 0,\n\t\t\tflags: CLEARFLAG_COLOR | CLEARFLAG_DEPTH\n\t\t};\n\t\tthis.glAddress = [gl.REPEAT, gl.CLAMP_TO_EDGE, gl.MIRRORED_REPEAT];\n\t\tthis.glBlendEquation = [gl.FUNC_ADD, gl.FUNC_SUBTRACT, gl.FUNC_REVERSE_SUBTRACT, this.webgl2 ? gl.MIN : this.extBlendMinmax ? this.extBlendMinmax.MIN_EXT : gl.FUNC_ADD, this.webgl2 ? gl.MAX : this.extBlendMinmax ? this.extBlendMinmax.MAX_EXT : gl.FUNC_ADD];\n\t\tthis.glBlendFunction = [gl.ZERO, gl.ONE, gl.SRC_COLOR, gl.ONE_MINUS_SRC_COLOR, gl.DST_COLOR, gl.ONE_MINUS_DST_COLOR, gl.SRC_ALPHA, gl.SRC_ALPHA_SATURATE, gl.ONE_MINUS_SRC_ALPHA, gl.DST_ALPHA, gl.ONE_MINUS_DST_ALPHA];\n\t\tthis.glComparison = [gl.NEVER, gl.LESS, gl.EQUAL, gl.LEQUAL, gl.GREATER, gl.NOTEQUAL, gl.GEQUAL, gl.ALWAYS];\n\t\tthis.glStencilOp = [gl.KEEP, gl.ZERO, gl.REPLACE, gl.INCR, gl.INCR_WRAP, gl.DECR, gl.DECR_WRAP, gl.INVERT];\n\t\tthis.glClearFlag = [0, gl.COLOR_BUFFER_BIT, gl.DEPTH_BUFFER_BIT, gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, gl.STENCIL_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.COLOR_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, gl.STENCIL_BUFFER_BIT | gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT];\n\t\tthis.glCull = [0, gl.BACK, gl.FRONT, gl.FRONT_AND_BACK];\n\t\tthis.glFilter = [gl.NEAREST, gl.LINEAR, gl.NEAREST_MIPMAP_NEAREST, gl.NEAREST_MIPMAP_LINEAR, gl.LINEAR_MIPMAP_NEAREST, gl.LINEAR_MIPMAP_LINEAR];\n\t\tthis.glPrimitive = [gl.POINTS, gl.LINES, gl.LINE_LOOP, gl.LINE_STRIP, gl.TRIANGLES, gl.TRIANGLE_STRIP, gl.TRIANGLE_FAN];\n\t\tthis.glType = [gl.BYTE, gl.UNSIGNED_BYTE, gl.SHORT, gl.UNSIGNED_SHORT, gl.INT, gl.UNSIGNED_INT, gl.FLOAT];\n\t\tthis.pcUniformType = {};\n\t\tthis.pcUniformType[gl.BOOL] = UNIFORMTYPE_BOOL;\n\t\tthis.pcUniformType[gl.INT] = UNIFORMTYPE_INT;\n\t\tthis.pcUniformType[gl.FLOAT] = UNIFORMTYPE_FLOAT;\n\t\tthis.pcUniformType[gl.FLOAT_VEC2] = UNIFORMTYPE_VEC2;\n\t\tthis.pcUniformType[gl.FLOAT_VEC3] = UNIFORMTYPE_VEC3;\n\t\tthis.pcUniformType[gl.FLOAT_VEC4] = UNIFORMTYPE_VEC4;\n\t\tthis.pcUniformType[gl.INT_VEC2] = UNIFORMTYPE_IVEC2;\n\t\tthis.pcUniformType[gl.INT_VEC3] = UNIFORMTYPE_IVEC3;\n\t\tthis.pcUniformType[gl.INT_VEC4] = UNIFORMTYPE_IVEC4;\n\t\tthis.pcUniformType[gl.BOOL_VEC2] = UNIFORMTYPE_BVEC2;\n\t\tthis.pcUniformType[gl.BOOL_VEC3] = UNIFORMTYPE_BVEC3;\n\t\tthis.pcUniformType[gl.BOOL_VEC4] = UNIFORMTYPE_BVEC4;\n\t\tthis.pcUniformType[gl.FLOAT_MAT2] = UNIFORMTYPE_MAT2;\n\t\tthis.pcUniformType[gl.FLOAT_MAT3] = UNIFORMTYPE_MAT3;\n\t\tthis.pcUniformType[gl.FLOAT_MAT4] = UNIFORMTYPE_MAT4;\n\t\tthis.pcUniformType[gl.SAMPLER_2D] = UNIFORMTYPE_TEXTURE2D;\n\t\tthis.pcUniformType[gl.SAMPLER_CUBE] = UNIFORMTYPE_TEXTURECUBE;\n\n\t\tif (this.webgl2) {\n\t\t\tthis.pcUniformType[gl.SAMPLER_2D_SHADOW] = UNIFORMTYPE_TEXTURE2D_SHADOW;\n\t\t\tthis.pcUniformType[gl.SAMPLER_CUBE_SHADOW] = UNIFORMTYPE_TEXTURECUBE_SHADOW;\n\t\t\tthis.pcUniformType[gl.SAMPLER_3D] = UNIFORMTYPE_TEXTURE3D;\n\t\t}\n\n\t\tthis.targetToSlot = {};\n\t\tthis.targetToSlot[gl.TEXTURE_2D] = 0;\n\t\tthis.targetToSlot[gl.TEXTURE_CUBE_MAP] = 1;\n\t\tthis.targetToSlot[gl.TEXTURE_3D] = 2;\n\t\tlet scopeX, scopeY, scopeZ, scopeW;\n\t\tlet uniformValue;\n\t\tthis.commitFunction = [];\n\n\t\tthis.commitFunction[UNIFORMTYPE_BOOL] = function (uniform, value) {\n\t\t\tif (uniform.value !== value) {\n\t\t\t\tgl.uniform1i(uniform.locationId, value);\n\t\t\t\tuniform.value = value;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_INT] = this.commitFunction[UNIFORMTYPE_BOOL];\n\n\t\tthis.commitFunction[UNIFORMTYPE_FLOAT] = function (uniform, value) {\n\t\t\tif (uniform.value !== value) {\n\t\t\t\tgl.uniform1f(uniform.locationId, value);\n\t\t\t\tuniform.value = value;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC2] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY) {\n\t\t\t\tgl.uniform2fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC3] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ) {\n\t\t\t\tgl.uniform3fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC4] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\t\t\tscopeW = value[3];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ || uniformValue[3] !== scopeW) {\n\t\t\t\tgl.uniform4fv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t\tuniformValue[3] = scopeW;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC2] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY) {\n\t\t\t\tgl.uniform2iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC2] = this.commitFunction[UNIFORMTYPE_IVEC2];\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC3] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ) {\n\t\t\t\tgl.uniform3iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC3] = this.commitFunction[UNIFORMTYPE_IVEC3];\n\n\t\tthis.commitFunction[UNIFORMTYPE_IVEC4] = function (uniform, value) {\n\t\t\tuniformValue = uniform.value;\n\t\t\tscopeX = value[0];\n\t\t\tscopeY = value[1];\n\t\t\tscopeZ = value[2];\n\t\t\tscopeW = value[3];\n\n\t\t\tif (uniformValue[0] !== scopeX || uniformValue[1] !== scopeY || uniformValue[2] !== scopeZ || uniformValue[3] !== scopeW) {\n\t\t\t\tgl.uniform4iv(uniform.locationId, value);\n\t\t\t\tuniformValue[0] = scopeX;\n\t\t\t\tuniformValue[1] = scopeY;\n\t\t\t\tuniformValue[2] = scopeZ;\n\t\t\t\tuniformValue[3] = scopeW;\n\t\t\t}\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_BVEC4] = this.commitFunction[UNIFORMTYPE_IVEC4];\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT2] = function (uniform, value) {\n\t\t\tgl.uniformMatrix2fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT3] = function (uniform, value) {\n\t\t\tgl.uniformMatrix3fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_MAT4] = function (uniform, value) {\n\t\t\tgl.uniformMatrix4fv(uniform.locationId, false, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_FLOATARRAY] = function (uniform, value) {\n\t\t\tgl.uniform1fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC2ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform2fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC3ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform3fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.commitFunction[UNIFORMTYPE_VEC4ARRAY] = function (uniform, value) {\n\t\t\tgl.uniform4fv(uniform.locationId, value);\n\t\t};\n\n\t\tthis.scope = new ScopeSpace(\"Device\");\n\t\tthis.programLib = new ProgramLibrary(this);\n\n\t\tfor (const generator in programlib) this.programLib.register(generator, programlib[generator]);\n\n\t\tthis.supportsBoneTextures = this.extTextureFloat && this.maxVertexTextures > 0;\n\t\tthis.useTexCubeLod = this.extTextureLod && this.maxTextures < 16;\n\t\tlet numUniforms = this.vertexUniformsCount;\n\t\tnumUniforms -= 4 * 4;\n\t\tnumUniforms -= 8;\n\t\tnumUniforms -= 1;\n\t\tnumUniforms -= 4 * 4;\n\t\tthis.boneLimit = Math.floor(numUniforms / 3);\n\t\tthis.boneLimit = Math.min(this.boneLimit, 128);\n\n\t\tif (this.unmaskedRenderer === 'Mali-450 MP') {\n\t\t\tthis.boneLimit = 34;\n\t\t}\n\n\t\tthis._drawCallsPerFrame = 0;\n\t\tthis._shaderSwitchesPerFrame = 0;\n\t\tthis._primsPerFrame = [];\n\n\t\tfor (let i = PRIMITIVE_POINTS; i <= PRIMITIVE_TRIFAN; i++) {\n\t\t\tthis._primsPerFrame[i] = 0;\n\t\t}\n\n\t\tthis._renderTargetCreationTime = 0;\n\t\tthis._vram = {\n\t\t\ttex: 0,\n\t\t\tvb: 0,\n\t\t\tib: 0\n\t\t};\n\t\tthis._shaderStats = {\n\t\t\tvsCompiled: 0,\n\t\t\tfsCompiled: 0,\n\t\t\tlinked: 0,\n\t\t\tmaterialShaders: 0,\n\t\t\tcompileTime: 0\n\t\t};\n\t\tthis.constantTexSource = this.scope.resolve(\"source\");\n\n\t\tif (this.extTextureFloat) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis.textureFloatRenderable = !!this.extColorBufferFloat;\n\t\t\t} else {\n\t\t\t\tthis.textureFloatRenderable = testRenderable(gl, gl.FLOAT);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.textureFloatRenderable = false;\n\t\t}\n\n\t\tif (this.extColorBufferHalfFloat) {\n\t\t\tthis.textureHalfFloatRenderable = !!this.extColorBufferHalfFloat;\n\t\t} else if (this.extTextureHalfFloat) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis.textureHalfFloatRenderable = !!this.extColorBufferFloat;\n\t\t\t} else {\n\t\t\t\tthis.textureHalfFloatRenderable = testRenderable(gl, this.extTextureHalfFloat.HALF_FLOAT_OES);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.textureHalfFloatRenderable = false;\n\t\t}\n\n\t\tthis.supportsMorphTargetTexturesCore = this.maxPrecision === \"highp\" && this.maxVertexTextures >= 2;\n\t\tthis._textureFloatHighPrecision = undefined;\n\t\tthis._textureHalfFloatUpdatable = undefined;\n\t\tthis.grabPassAvailable = true;\n\t\tthis.grabPassAlpha = options.alpha;\n\t\tthis.createGrabPass();\n\t\tVertexFormat.init(this);\n\t\tthis.areaLightLutFormat = PIXELFORMAT_R8_G8_B8_A8;\n\n\t\tif (this.extTextureHalfFloat && this.textureHalfFloatUpdatable && this.extTextureHalfFloatLinear) {\n\t\t\tthis.areaLightLutFormat = PIXELFORMAT_RGBA16F;\n\t\t} else if (this.extTextureFloat && this.extTextureFloatLinear) {\n\t\t\tthis.areaLightLutFormat = PIXELFORMAT_RGBA32F;\n\t\t}\n\t}\n\n\ttoJSON(key) {\n\t\treturn undefined;\n\t}\n\n\tgetPrecision() {\n\t\tconst gl = this.gl;\n\t\tlet precision = \"highp\";\n\n\t\tif (gl.getShaderPrecisionFormat) {\n\t\t\tconst vertexShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT);\n\t\t\tconst vertexShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT);\n\t\t\tconst fragmentShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n\t\t\tconst fragmentShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT);\n\t\t\tconst highpAvailable = vertexShaderPrecisionHighpFloat.precision > 0 && fragmentShaderPrecisionHighpFloat.precision > 0;\n\t\t\tconst mediumpAvailable = vertexShaderPrecisionMediumpFloat.precision > 0 && fragmentShaderPrecisionMediumpFloat.precision > 0;\n\n\t\t\tif (!highpAvailable) {\n\t\t\t\tif (mediumpAvailable) {\n\t\t\t\t\tprecision = \"mediump\";\n\t\t\t\t} else {\n\t\t\t\t\tprecision = \"lowp\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn precision;\n\t}\n\n\tinitializeExtensions() {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\tconst supportedExtensions = {};\n\t\tgl.getSupportedExtensions().forEach(e => {\n\t\t\tsupportedExtensions[e] = true;\n\t\t});\n\n\t\tconst getExtension = function getExtension() {\n\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\tif (supportedExtensions.hasOwnProperty(arguments[i])) {\n\t\t\t\t\treturn gl.getExtension(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (this.webgl2) {\n\t\t\tthis.extBlendMinmax = true;\n\t\t\tthis.extDrawBuffers = true;\n\t\t\tthis.extInstancing = true;\n\t\t\tthis.extStandardDerivatives = true;\n\t\t\tthis.extTextureFloat = true;\n\t\t\tthis.extTextureHalfFloat = true;\n\t\t\tthis.extTextureHalfFloatLinear = true;\n\t\t\tthis.extTextureLod = true;\n\t\t\tthis.extUintElement = true;\n\t\t\tthis.extVertexArrayObject = true;\n\t\t\tthis.extColorBufferFloat = getExtension('EXT_color_buffer_float');\n\t\t\tthis.extDisjointTimerQuery = getExtension('EXT_disjoint_timer_query_webgl2', 'EXT_disjoint_timer_query');\n\t\t} else {\n\t\t\tthis.extBlendMinmax = getExtension(\"EXT_blend_minmax\");\n\t\t\tthis.extDrawBuffers = getExtension('EXT_draw_buffers');\n\t\t\tthis.extInstancing = getExtension(\"ANGLE_instanced_arrays\");\n\n\t\t\tif (this.extInstancing) {\n\t\t\t\text = this.extInstancing;\n\t\t\t\tgl.drawArraysInstanced = ext.drawArraysInstancedANGLE.bind(ext);\n\t\t\t\tgl.drawElementsInstanced = ext.drawElementsInstancedANGLE.bind(ext);\n\t\t\t\tgl.vertexAttribDivisor = ext.vertexAttribDivisorANGLE.bind(ext);\n\t\t\t}\n\n\t\t\tthis.extStandardDerivatives = getExtension(\"OES_standard_derivatives\");\n\t\t\tthis.extTextureFloat = getExtension(\"OES_texture_float\");\n\t\t\tthis.extTextureHalfFloat = getExtension(\"OES_texture_half_float\");\n\t\t\tthis.extTextureHalfFloatLinear = getExtension(\"OES_texture_half_float_linear\");\n\t\t\tthis.extTextureLod = getExtension('EXT_shader_texture_lod');\n\t\t\tthis.extUintElement = getExtension(\"OES_element_index_uint\");\n\t\t\tthis.extVertexArrayObject = getExtension(\"OES_vertex_array_object\");\n\n\t\t\tif (this.extVertexArrayObject) {\n\t\t\t\text = this.extVertexArrayObject;\n\t\t\t\tgl.createVertexArray = ext.createVertexArrayOES.bind(ext);\n\t\t\t\tgl.deleteVertexArray = ext.deleteVertexArrayOES.bind(ext);\n\t\t\t\tgl.isVertexArray = ext.isVertexArrayOES.bind(ext);\n\t\t\t\tgl.bindVertexArray = ext.bindVertexArrayOES.bind(ext);\n\t\t\t}\n\n\t\t\tthis.extColorBufferFloat = null;\n\t\t\tthis.extDisjointTimerQuery = null;\n\t\t}\n\n\t\tthis.extDebugRendererInfo = getExtension('WEBGL_debug_renderer_info');\n\t\tthis.extTextureFloatLinear = getExtension(\"OES_texture_float_linear\");\n\t\tthis.extFloatBlend = getExtension(\"EXT_float_blend\");\n\t\tthis.extTextureFilterAnisotropic = getExtension('EXT_texture_filter_anisotropic', 'WEBKIT_EXT_texture_filter_anisotropic');\n\t\tthis.extCompressedTextureETC1 = getExtension('WEBGL_compressed_texture_etc1');\n\t\tthis.extCompressedTextureETC = getExtension('WEBGL_compressed_texture_etc');\n\t\tthis.extCompressedTexturePVRTC = getExtension('WEBGL_compressed_texture_pvrtc', 'WEBKIT_WEBGL_compressed_texture_pvrtc');\n\t\tthis.extCompressedTextureS3TC = getExtension('WEBGL_compressed_texture_s3tc', 'WEBKIT_WEBGL_compressed_texture_s3tc');\n\t\tthis.extCompressedTextureATC = getExtension('WEBGL_compressed_texture_atc');\n\t\tthis.extCompressedTextureASTC = getExtension('WEBGL_compressed_texture_astc');\n\t\tthis.extParallelShaderCompile = getExtension('KHR_parallel_shader_compile');\n\t\tthis.extColorBufferHalfFloat = getExtension(\"EXT_color_buffer_half_float\");\n\t\tthis.supportsInstancing = !!this.extInstancing;\n\t}\n\n\tinitializeCapabilities() {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\tthis.maxPrecision = this.precision = this.getPrecision();\n\t\tconst contextAttribs = gl.getContextAttributes();\n\t\tthis.supportsMsaa = contextAttribs.antialias;\n\t\tthis.supportsStencil = contextAttribs.stencil;\n\t\tthis.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\t\tthis.maxCubeMapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n\t\tthis.maxRenderBufferSize = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);\n\t\tthis.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\t\tthis.maxCombinedTextures = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n\t\tthis.maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n\t\tthis.vertexUniformsCount = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n\t\tthis.fragmentUniformsCount = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);\n\n\t\tif (this.webgl2) {\n\t\t\tthis.maxDrawBuffers = gl.getParameter(gl.MAX_DRAW_BUFFERS);\n\t\t\tthis.maxColorAttachments = gl.getParameter(gl.MAX_COLOR_ATTACHMENTS);\n\t\t\tthis.maxVolumeSize = gl.getParameter(gl.MAX_3D_TEXTURE_SIZE);\n\t\t} else {\n\t\t\text = this.extDrawBuffers;\n\t\t\tthis.maxDrawBuffers = ext ? gl.getParameter(ext.MAX_DRAW_BUFFERS_EXT) : 1;\n\t\t\tthis.maxColorAttachments = ext ? gl.getParameter(ext.MAX_COLOR_ATTACHMENTS_EXT) : 1;\n\t\t\tthis.maxVolumeSize = 1;\n\t\t}\n\n\t\text = this.extDebugRendererInfo;\n\t\tthis.unmaskedRenderer = ext ? gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : '';\n\t\tthis.unmaskedVendor = ext ? gl.getParameter(ext.UNMASKED_VENDOR_WEBGL) : '';\n\t\text = this.extTextureFilterAnisotropic;\n\t\tthis.maxAnisotropy = ext ? gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1;\n\t\tthis.samples = gl.getParameter(gl.SAMPLES);\n\t\tthis.maxSamples = this.webgl2 ? gl.getParameter(gl.MAX_SAMPLES) : 1;\n\t}\n\n\tinitializeRenderState() {\n\t\tconst gl = this.gl;\n\t\tthis.blending = false;\n\t\tgl.disable(gl.BLEND);\n\t\tthis.blendSrc = BLENDMODE_ONE;\n\t\tthis.blendDst = BLENDMODE_ZERO;\n\t\tthis.blendSrcAlpha = BLENDMODE_ONE;\n\t\tthis.blendDstAlpha = BLENDMODE_ZERO;\n\t\tthis.separateAlphaBlend = false;\n\t\tthis.blendEquation = BLENDEQUATION_ADD;\n\t\tthis.blendAlphaEquation = BLENDEQUATION_ADD;\n\t\tthis.separateAlphaEquation = false;\n\t\tgl.blendFunc(gl.ONE, gl.ZERO);\n\t\tgl.blendEquation(gl.FUNC_ADD);\n\t\tthis.writeRed = true;\n\t\tthis.writeGreen = true;\n\t\tthis.writeBlue = true;\n\t\tthis.writeAlpha = true;\n\t\tgl.colorMask(true, true, true, true);\n\t\tthis.cullMode = CULLFACE_BACK;\n\t\tgl.enable(gl.CULL_FACE);\n\t\tgl.cullFace(gl.BACK);\n\t\tthis.depthTest = true;\n\t\tgl.enable(gl.DEPTH_TEST);\n\t\tthis.depthFunc = FUNC_LESSEQUAL;\n\t\tgl.depthFunc(gl.LEQUAL);\n\t\tthis.depthWrite = true;\n\t\tgl.depthMask(true);\n\t\tthis.stencil = false;\n\t\tgl.disable(gl.STENCIL_TEST);\n\t\tthis.stencilFuncFront = this.stencilFuncBack = FUNC_ALWAYS;\n\t\tthis.stencilRefFront = this.stencilRefBack = 0;\n\t\tthis.stencilMaskFront = this.stencilMaskBack = 0xFF;\n\t\tgl.stencilFunc(gl.ALWAYS, 0, 0xFF);\n\t\tthis.stencilFailFront = this.stencilFailBack = STENCILOP_KEEP;\n\t\tthis.stencilZfailFront = this.stencilZfailBack = STENCILOP_KEEP;\n\t\tthis.stencilZpassFront = this.stencilZpassBack = STENCILOP_KEEP;\n\t\tthis.stencilWriteMaskFront = 0xFF;\n\t\tthis.stencilWriteMaskBack = 0xFF;\n\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\t\tgl.stencilMask(0xFF);\n\t\tthis.alphaToCoverage = false;\n\t\tthis.raster = true;\n\n\t\tif (this.webgl2) {\n\t\t\tgl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t\tgl.disable(gl.RASTERIZER_DISCARD);\n\t\t}\n\n\t\tthis.depthBiasEnabled = false;\n\t\tgl.disable(gl.POLYGON_OFFSET_FILL);\n\t\tthis.clearDepth = 1;\n\t\tgl.clearDepth(1);\n\t\tthis.clearRed = 0;\n\t\tthis.clearBlue = 0;\n\t\tthis.clearGreen = 0;\n\t\tthis.clearAlpha = 0;\n\t\tgl.clearColor(0, 0, 0, 0);\n\t\tthis.clearStencil = 0;\n\t\tgl.clearStencil(0);\n\t\tthis.vx = this.vy = this.vw = this.vh = 0;\n\t\tthis.sx = this.sy = this.sw = this.sh = 0;\n\n\t\tif (this.webgl2) {\n\t\t\tgl.hint(gl.FRAGMENT_SHADER_DERIVATIVE_HINT, gl.NICEST);\n\t\t} else {\n\t\t\tif (this.extStandardDerivatives) {\n\t\t\t\tgl.hint(this.extStandardDerivatives.FRAGMENT_SHADER_DERIVATIVE_HINT_OES, gl.NICEST);\n\t\t\t}\n\t\t}\n\n\t\tgl.enable(gl.SCISSOR_TEST);\n\t\tgl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n\t\tthis.unpackFlipY = false;\n\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\t\tthis.unpackPremultiplyAlpha = false;\n\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n\t\tgl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n\t}\n\n\tinitializeContextCaches() {\n\t\tthis.vertexShaderCache = {};\n\t\tthis.fragmentShaderCache = {};\n\t\tthis._vaoMap = new Map();\n\t\tthis.boundVao = null;\n\t\tthis.indexBuffer = null;\n\t\tthis.vertexBuffers = [];\n\t\tthis.shader = null;\n\t\tthis.renderTarget = null;\n\t\tthis.activeFramebuffer = null;\n\t\tthis.feedback = null;\n\t\tthis.transformFeedbackBuffer = null;\n\t\tthis.textureUnit = 0;\n\t\tthis.textureUnits = [];\n\n\t\tfor (let i = 0; i < this.maxCombinedTextures; i++) {\n\t\t\tthis.textureUnits.push([null, null, null]);\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tfor (const shader of this.shaders) {\n\t\t\tshader.loseContext();\n\t\t}\n\n\t\tthis.destroyGrabPass();\n\n\t\twhile (this.textures.length > 0) {\n\t\t\tconst texture = this.textures[0];\n\t\t\tthis.destroyTexture(texture);\n\t\t\ttexture.dirtyAll();\n\t\t}\n\n\t\tfor (const buffer of this.buffers) {\n\t\t\tbuffer.loseContext();\n\t\t}\n\n\t\tfor (const target of this.targets) {\n\t\t\ttarget.loseContext();\n\t\t}\n\t}\n\n\trestoreContext() {\n\t\tthis.initializeExtensions();\n\t\tthis.initializeCapabilities();\n\t\tthis.initializeRenderState();\n\t\tthis.initializeContextCaches();\n\n\t\tfor (const shader of this.shaders) {\n\t\t\tthis.compileAndLinkShader(shader);\n\t\t}\n\n\t\tfor (const buffer of this.buffers) {\n\t\t\tbuffer.unlock();\n\t\t}\n\n\t\tthis.createGrabPass();\n\t}\n\n\tcreateGrabPass() {\n\t\tif (this.grabPassTexture) return;\n\t\tconst grabPassTexture = new Texture(this, {\n\t\t\tformat: this.grabPassAlpha === false ? PIXELFORMAT_R8_G8_B8 : PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tminFilter: FILTER_LINEAR,\n\t\t\tmagFilter: FILTER_LINEAR,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tmipmaps: false\n\t\t});\n\t\tgrabPassTexture.name = 'texture_grabPass';\n\t\tconst grabPassTextureId = this.scope.resolve(grabPassTexture.name);\n\t\tgrabPassTextureId.setValue(grabPassTexture);\n\t\tconst grabPassRenderTarget = new RenderTarget({\n\t\t\tcolorBuffer: grabPassTexture,\n\t\t\tdepth: false\n\t\t});\n\t\tthis.grabPassRenderTarget = grabPassRenderTarget;\n\t\tthis.grabPassTextureId = grabPassTextureId;\n\t\tthis.grabPassTexture = grabPassTexture;\n\t}\n\n\tupdateGrabPass() {\n\t\tconst gl = this.gl;\n\n\t\tif (!this.grabPassAvailable) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst renderTarget = this.renderTarget;\n\t\tconst resolveRenderTarget = renderTarget && renderTarget._glResolveFrameBuffer;\n\t\tconst grabPassTexture = this.grabPassTexture;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\n\t\tif (this.webgl2 && !this._tempMacChromeBlitFramebufferWorkaround && width === grabPassTexture._width && height === grabPassTexture._height) {\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\trenderTarget.resolve(true);\n\t\t\t}\n\n\t\t\tconst currentFrameBuffer = renderTarget ? renderTarget._glFrameBuffer : null;\n\t\t\tconst resolvedFrameBuffer = renderTarget ? renderTarget._glResolveFrameBuffer || renderTarget._glFrameBuffer : null;\n\t\t\tthis.initRenderTarget(this.grabPassRenderTarget);\n\t\t\tconst grabPassFrameBuffer = this.grabPassRenderTarget._glFrameBuffer;\n\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, resolvedFrameBuffer);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, grabPassFrameBuffer);\n\t\t\tgl.blitFramebuffer(0, 0, width, height, 0, 0, width, height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, currentFrameBuffer);\n\t\t} else {\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\trenderTarget.resolve(true);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget._glResolveFrameBuffer);\n\t\t\t}\n\n\t\t\tconst format = grabPassTexture._glFormat;\n\t\t\tgl.copyTexImage2D(gl.TEXTURE_2D, 0, format, 0, 0, width, height, 0);\n\t\t\tgrabPassTexture._width = width;\n\t\t\tgrabPassTexture._height = height;\n\n\t\t\tif (resolveRenderTarget) {\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget._glFrameBuffer);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdestroyGrabPass() {\n\t\tthis.grabPassRenderTarget.destroy();\n\t\tthis.grabPassRenderTarget = null;\n\t\tthis.grabPassTextureId = null;\n\t\tthis.grabPassTexture.destroy();\n\t\tthis.grabPassTexture = null;\n\t}\n\n\tupdateClientRect() {\n\t\tthis.clientRect = this.canvas.getBoundingClientRect();\n\t}\n\n\tsetViewport(x, y, w, h) {\n\t\tif (this.vx !== x || this.vy !== y || this.vw !== w || this.vh !== h) {\n\t\t\tthis.gl.viewport(x, y, w, h);\n\t\t\tthis.vx = x;\n\t\t\tthis.vy = y;\n\t\t\tthis.vw = w;\n\t\t\tthis.vh = h;\n\t\t}\n\t}\n\n\tsetScissor(x, y, w, h) {\n\t\tif (this.sx !== x || this.sy !== y || this.sw !== w || this.sh !== h) {\n\t\t\tthis.gl.scissor(x, y, w, h);\n\t\t\tthis.sx = x;\n\t\t\tthis.sy = y;\n\t\t\tthis.sw = w;\n\t\t\tthis.sh = h;\n\t\t}\n\t}\n\n\tgetProgramLibrary() {\n\t\treturn this.programLib;\n\t}\n\n\tsetProgramLibrary(programLib) {\n\t\tthis.programLib = programLib;\n\t}\n\n\tsetFramebuffer(fb) {\n\t\tif (this.activeFramebuffer !== fb) {\n\t\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, fb);\n\t\t\tthis.activeFramebuffer = fb;\n\t\t}\n\t}\n\n\t_checkFbo() {\n\t\tconst gl = this.gl;\n\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\n\t\tswitch (status) {\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_ATTACHMENT\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_INCOMPLETE_DIMENSIONS\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_UNSUPPORTED:\n\t\t\t\tconsole.error(\"ERROR: FRAMEBUFFER_UNSUPPORTED\");\n\t\t\t\tbreak;\n\n\t\t\tcase gl.FRAMEBUFFER_COMPLETE:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcopyRenderTarget(source, dest, color, depth) {\n\t\tconst gl = this.gl;\n\n\t\tif (!this.webgl2 && depth) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color) {\n\t\t\tif (!dest) {\n\t\t\t\tif (!source._colorBuffer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!source._colorBuffer || !dest._colorBuffer) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (source._colorBuffer._format !== dest._colorBuffer._format) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (depth) {\n\t\t\tif (!source._depthBuffer || !dest._depthBuffer) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (source._depthBuffer._format !== dest._depthBuffer._format) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && dest) {\n\t\t\tconst prevRt = this.renderTarget;\n\t\t\tthis.renderTarget = dest;\n\t\t\tthis.updateBegin();\n\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, source ? source._glFrameBuffer : null);\n\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, dest._glFrameBuffer);\n\t\t\tconst w = source ? source.width : dest.width;\n\t\t\tconst h = source ? source.height : dest.height;\n\t\t\tgl.blitFramebuffer(0, 0, w, h, 0, 0, w, h, (color ? gl.COLOR_BUFFER_BIT : 0) | (depth ? gl.DEPTH_BUFFER_BIT : 0), gl.NEAREST);\n\t\t\tthis.renderTarget = prevRt;\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, prevRt ? prevRt._glFrameBuffer : null);\n\t\t} else {\n\t\t\tconst shader = this.getCopyShader();\n\t\t\tthis.constantTexSource.setValue(source._colorBuffer);\n\t\t\tdrawQuadWithShader(this, dest, shader);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tinitRenderTarget(target) {\n\t\tif (target._glFrameBuffer) return;\n\t\ttarget._device = this;\n\t\tconst gl = this.gl;\n\t\ttarget._glFrameBuffer = gl.createFramebuffer();\n\t\tthis.setFramebuffer(target._glFrameBuffer);\n\t\tconst colorBuffer = target._colorBuffer;\n\n\t\tif (colorBuffer) {\n\t\t\tif (!colorBuffer._glTexture) {\n\t\t\t\tcolorBuffer._width = Math.min(colorBuffer.width, this.maxRenderBufferSize);\n\t\t\t\tcolorBuffer._height = Math.min(colorBuffer.height, this.maxRenderBufferSize);\n\t\t\t\tthis.setTexture(colorBuffer, 0);\n\t\t\t}\n\n\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, colorBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, colorBuffer._glTexture, 0);\n\t\t}\n\n\t\tconst depthBuffer = target._depthBuffer;\n\n\t\tif (depthBuffer && this.webgl2) {\n\t\t\tif (!depthBuffer._glTexture) {\n\t\t\t\tdepthBuffer._width = Math.min(depthBuffer.width, this.maxRenderBufferSize);\n\t\t\t\tdepthBuffer._height = Math.min(depthBuffer.height, this.maxRenderBufferSize);\n\t\t\t\tthis.setTexture(depthBuffer, 0);\n\t\t\t}\n\n\t\t\tif (target._stencil) {\n\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer._glTexture, 0);\n\t\t\t} else {\n\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, depthBuffer._cubemap ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + target._face : gl.TEXTURE_2D, target._depthBuffer._glTexture, 0);\n\t\t\t}\n\t\t} else if (target._depth) {\n\t\t\tconst willRenderMsaa = target._samples > 1 && this.webgl2;\n\n\t\t\tif (!willRenderMsaa) {\n\t\t\t\tif (!target._glDepthBuffer) {\n\t\t\t\t\ttarget._glDepthBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glDepthBuffer);\n\n\t\t\t\tif (target._stencil) {\n\t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, target._glDepthBuffer);\n\t\t\t\t} else {\n\t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target._glDepthBuffer);\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && target._samples > 1) {\n\t\t\ttarget._glResolveFrameBuffer = target._glFrameBuffer;\n\t\t\ttarget._glFrameBuffer = gl.createFramebuffer();\n\t\t\tthis.setFramebuffer(target._glFrameBuffer);\n\n\t\t\tif (colorBuffer) {\n\t\t\t\tif (!target._glMsaaColorBuffer) {\n\t\t\t\t\ttarget._glMsaaColorBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glMsaaColorBuffer);\n\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, colorBuffer._glInternalFormat, target.width, target.height);\n\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, target._glMsaaColorBuffer);\n\t\t\t}\n\n\t\t\tif (target._depth) {\n\t\t\t\tif (!target._glMsaaDepthBuffer) {\n\t\t\t\t\ttarget._glMsaaDepthBuffer = gl.createRenderbuffer();\n\t\t\t\t}\n\n\t\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\n\t\t\t\tif (target._stencil) {\n\t\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH24_STENCIL8, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\t\t\t\t} else {\n\t\t\t\t\tgl.renderbufferStorageMultisample(gl.RENDERBUFFER, target._samples, gl.DEPTH_COMPONENT32F, target.width, target.height);\n\t\t\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, target._glMsaaDepthBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.targets.push(target);\n\t}\n\n\tgetCopyShader() {\n\t\tif (!this._copyShader) {\n\t\t\tthis._copyShader = createShaderFromCode(this, shaderChunks.fullscreenQuadVS, shaderChunks.outputTex2DPS, \"outputTex2D\");\n\t\t}\n\n\t\treturn this._copyShader;\n\t}\n\n\tupdateBegin() {\n\t\tthis.boundVao = null;\n\n\t\tif (this._tempEnableSafariTextureUnitWorkaround) {\n\t\t\tfor (let unit = 0; unit < this.textureUnits.length; ++unit) {\n\t\t\t\tfor (let slot = 0; slot < 3; ++slot) {\n\t\t\t\t\tthis.textureUnits[unit][slot] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst target = this.renderTarget;\n\n\t\tif (target) {\n\t\t\tif (!target._glFrameBuffer) {\n\t\t\t\tthis.initRenderTarget(target);\n\t\t\t} else {\n\t\t\t\tthis.setFramebuffer(target._glFrameBuffer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setFramebuffer(this.defaultFramebuffer);\n\t\t}\n\t}\n\n\tupdateEnd() {\n\t\tconst gl = this.gl;\n\t\tthis.boundVao = null;\n\t\tthis.gl.bindVertexArray(null);\n\t\tconst target = this.renderTarget;\n\n\t\tif (target) {\n\t\t\tconst colorBuffer = target._colorBuffer;\n\n\t\t\tif (colorBuffer && colorBuffer._glTexture && colorBuffer.mipmaps && (colorBuffer.pot || this.webgl2)) {\n\t\t\t\tthis.activeTexture(this.maxCombinedTextures - 1);\n\t\t\t\tthis.bindTexture(colorBuffer);\n\t\t\t\tgl.generateMipmap(colorBuffer._glTarget);\n\t\t\t}\n\n\t\t\tif (this.webgl2 && target._samples > 1 && target.autoResolve) {\n\t\t\t\ttarget.resolve();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeTexture(texture) {\n\t\tconst gl = this.gl;\n\t\tlet ext;\n\t\ttexture._glTexture = gl.createTexture();\n\t\ttexture._glTarget = texture._cubemap ? gl.TEXTURE_CUBE_MAP : texture._volume ? gl.TEXTURE_3D : gl.TEXTURE_2D;\n\n\t\tswitch (texture._format) {\n\t\t\tcase PIXELFORMAT_A8:\n\t\t\t\ttexture._glFormat = gl.ALPHA;\n\t\t\t\ttexture._glInternalFormat = gl.ALPHA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_L8:\n\t\t\t\ttexture._glFormat = gl.LUMINANCE;\n\t\t\t\ttexture._glInternalFormat = gl.LUMINANCE;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_L8_A8:\n\t\t\t\ttexture._glFormat = gl.LUMINANCE_ALPHA;\n\t\t\t\ttexture._glInternalFormat = gl.LUMINANCE_ALPHA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R5_G6_B5:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_5_6_5;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R5_G5_B5_A1:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_5_5_5_1;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R4_G4_B4_A4:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT_4_4_4_4;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R8_G8_B8:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = this.webgl2 ? gl.RGB8 : gl.RGB;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R8_G8_B8_A8:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = this.webgl2 ? gl.RGBA8 : gl.RGBA;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT1:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT3:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DXT5:\n\t\t\t\text = this.extCompressedTextureS3TC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC1:\n\t\t\t\text = this.extCompressedTextureETC1;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_ETC1_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_2BPP_RGB_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_2BPP_RGBA_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_4BPP_RGB_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_PVRTC_4BPP_RGBA_1:\n\t\t\t\text = this.extCompressedTexturePVRTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC2_RGB:\n\t\t\t\text = this.extCompressedTextureETC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB8_ETC2;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ETC2_RGBA:\n\t\t\t\text = this.extCompressedTextureETC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA8_ETC2_EAC;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ASTC_4x4:\n\t\t\t\text = this.extCompressedTextureASTC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ATC_RGB:\n\t\t\t\text = this.extCompressedTextureATC;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGB_ATC_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_ATC_RGBA:\n\t\t\t\text = this.extCompressedTextureATC;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = ext.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\text = this.extTextureHalfFloat;\n\t\t\t\ttexture._glFormat = gl.RGB;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB16F;\n\t\t\t\t\ttexture._glPixelType = gl.HALF_FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\t\ttexture._glPixelType = ext.HALF_FLOAT_OES;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\text = this.extTextureHalfFloat;\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA16F;\n\t\t\t\t\ttexture._glPixelType = gl.HALF_FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\t\ttexture._glPixelType = ext.HALF_FLOAT_OES;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB32F;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGB;\n\t\t\t\t}\n\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA32F;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glInternalFormat = gl.RGBA;\n\t\t\t\t}\n\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_R32F:\n\t\t\t\ttexture._glFormat = gl.RED;\n\t\t\t\ttexture._glInternalFormat = gl.R32F;\n\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DEPTH:\n\t\t\t\tif (this.webgl2) {\n\t\t\t\t\ttexture._glFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glInternalFormat = gl.DEPTH_COMPONENT32F;\n\t\t\t\t\ttexture._glPixelType = gl.FLOAT;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._glFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glInternalFormat = gl.DEPTH_COMPONENT;\n\t\t\t\t\ttexture._glPixelType = gl.UNSIGNED_SHORT;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_DEPTHSTENCIL:\n\t\t\t\ttexture._glFormat = gl.DEPTH_STENCIL;\n\t\t\t\ttexture._glInternalFormat = gl.DEPTH24_STENCIL8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_INT_24_8;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_111110F:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.R11F_G11F_B10F;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_INT_10F_11F_11F_REV;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_SRGB:\n\t\t\t\ttexture._glFormat = gl.RGB;\n\t\t\t\ttexture._glInternalFormat = gl.SRGB8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\n\t\t\tcase PIXELFORMAT_SRGBA:\n\t\t\t\ttexture._glFormat = gl.RGBA;\n\t\t\t\ttexture._glInternalFormat = gl.SRGB8_ALPHA8;\n\t\t\t\ttexture._glPixelType = gl.UNSIGNED_BYTE;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.textures.push(texture);\n\t}\n\n\tdestroyTexture(texture) {\n\t\tif (texture._glTexture) {\n\t\t\tconst idx = this.textures.indexOf(texture);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tthis.textures.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.scope.removeValue(texture);\n\n\t\t\tfor (let i = 0; i < this.textureUnits.length; i++) {\n\t\t\t\tconst textureUnit = this.textureUnits[i];\n\n\t\t\t\tfor (let j = 0; j < textureUnit.length; j++) {\n\t\t\t\t\tif (textureUnit[j] === texture._glTexture) {\n\t\t\t\t\t\ttextureUnit[j] = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst gl = this.gl;\n\t\t\tgl.deleteTexture(texture._glTexture);\n\t\t\tdelete texture._glTexture;\n\t\t\tdelete texture._glTarget;\n\t\t\tdelete texture._glFormat;\n\t\t\tdelete texture._glInternalFormat;\n\t\t\tdelete texture._glPixelType;\n\t\t\tthis._vram.tex -= texture._gpuSize;\n\t\t}\n\t}\n\n\tsetUnpackFlipY(flipY) {\n\t\tif (this.unpackFlipY !== flipY) {\n\t\t\tthis.unpackFlipY = flipY;\n\t\t\tconst gl = this.gl;\n\t\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\n\t\t}\n\t}\n\n\tsetUnpackPremultiplyAlpha(premultiplyAlpha) {\n\t\tif (this.unpackPremultiplyAlpha !== premultiplyAlpha) {\n\t\t\tthis.unpackPremultiplyAlpha = premultiplyAlpha;\n\t\t\tconst gl = this.gl;\n\t\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultiplyAlpha);\n\t\t}\n\t}\n\n\t_isBrowserInterface(texture) {\n\t\treturn typeof HTMLCanvasElement !== 'undefined' && texture instanceof HTMLCanvasElement || typeof HTMLImageElement !== 'undefined' && texture instanceof HTMLImageElement || typeof HTMLVideoElement !== 'undefined' && texture instanceof HTMLVideoElement || typeof ImageBitmap !== 'undefined' && texture instanceof ImageBitmap;\n\t}\n\n\tuploadTexture(texture) {\n\t\tconst gl = this.gl;\n\t\tif (!texture._needsUpload && (texture._needsMipmapsUpload && texture._mipmapsUploaded || !texture.pot)) return;\n\t\tlet mipLevel = 0;\n\t\tlet mipObject;\n\t\tlet resMult;\n\t\tconst requiredMipLevels = Math.log2(Math.max(texture._width, texture._height)) + 1;\n\n\t\twhile (texture._levels[mipLevel] || mipLevel === 0) {\n\t\t\tif (!texture._needsUpload && mipLevel === 0) {\n\t\t\t\tmipLevel++;\n\t\t\t\tcontinue;\n\t\t\t} else if (mipLevel && (!texture._needsMipmapsUpload || !texture._mipmaps)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tmipObject = texture._levels[mipLevel];\n\n\t\t\tif (mipLevel === 1 && !texture._compressed && texture._levels.length < requiredMipLevels) {\n\t\t\t\tgl.generateMipmap(texture._glTarget);\n\t\t\t\ttexture._mipmapsUploaded = true;\n\t\t\t}\n\n\t\t\tif (texture._cubemap) {\n\t\t\t\tlet face;\n\n\t\t\t\tif (this._isBrowserInterface(mipObject[0])) {\n\t\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\t\tif (!texture._levelsUpdated[0][face]) continue;\n\t\t\t\t\t\tlet src = mipObject[face];\n\n\t\t\t\t\t\tif (src instanceof HTMLImageElement) {\n\t\t\t\t\t\t\tif (src.width > this.maxCubeMapSize || src.height > this.maxCubeMapSize) {\n\t\t\t\t\t\t\t\tsrc = downsampleImage(src, this.maxCubeMapSize);\n\n\t\t\t\t\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\t\t\t\t\ttexture._width = src.width;\n\t\t\t\t\t\t\t\t\ttexture._height = src.height;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, texture._glFormat, texture._glPixelType, src);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\t\tif (!texture._levelsUpdated[0][face]) continue;\n\t\t\t\t\t\tconst texData = mipObject[face];\n\n\t\t\t\t\t\tif (texture._compressed) {\n\t\t\t\t\t\t\tgl.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texData);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texture._glFormat, texture._glPixelType, texData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (texture._volume) {\n\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\tif (texture._compressed) {\n\t\t\t\t\tgl.compressedTexImage3D(gl.TEXTURE_3D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), Math.max(texture._depth * resMult, 1), 0, mipObject);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\tgl.texImage3D(gl.TEXTURE_3D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), Math.max(texture._depth * resMult, 1), 0, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._isBrowserInterface(mipObject)) {\n\t\t\t\t\tif (mipObject instanceof HTMLImageElement) {\n\t\t\t\t\t\tif (mipObject.width > this.maxTextureSize || mipObject.height > this.maxTextureSize) {\n\t\t\t\t\t\t\tmipObject = downsampleImage(mipObject, this.maxTextureSize);\n\n\t\t\t\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\t\t\t\ttexture._width = mipObject.width;\n\t\t\t\t\t\t\t\ttexture._height = mipObject.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setUnpackFlipY(texture._flipY);\n\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t} else {\n\t\t\t\t\tresMult = 1 / Math.pow(2, mipLevel);\n\n\t\t\t\t\tif (texture._compressed) {\n\t\t\t\t\t\tgl.compressedTexImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, mipObject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setUnpackFlipY(false);\n\t\t\t\t\t\tthis.setUnpackPremultiplyAlpha(texture._premultiplyAlpha);\n\t\t\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, mipLevel, texture._glInternalFormat, Math.max(texture._width * resMult, 1), Math.max(texture._height * resMult, 1), 0, texture._glFormat, texture._glPixelType, mipObject);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mipLevel === 0) {\n\t\t\t\t\ttexture._mipmapsUploaded = false;\n\t\t\t\t} else {\n\t\t\t\t\ttexture._mipmapsUploaded = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmipLevel++;\n\t\t}\n\n\t\tif (texture._needsUpload) {\n\t\t\tif (texture._cubemap) {\n\t\t\t\tfor (let i = 0; i < 6; i++) texture._levelsUpdated[0][i] = false;\n\t\t\t} else {\n\t\t\t\ttexture._levelsUpdated[0] = false;\n\t\t\t}\n\t\t}\n\n\t\tif (!texture._compressed && texture._mipmaps && texture._needsMipmapsUpload && (texture.pot || this.webgl2) && texture._levels.length === 1) {\n\t\t\tgl.generateMipmap(texture._glTarget);\n\t\t\ttexture._mipmapsUploaded = true;\n\t\t}\n\n\t\tif (texture._gpuSize) {\n\t\t\tthis._vram.tex -= texture._gpuSize;\n\t\t}\n\n\t\ttexture._gpuSize = texture.gpuSize;\n\t\tthis._vram.tex += texture._gpuSize;\n\t}\n\n\tactiveTexture(textureUnit) {\n\t\tif (this.textureUnit !== textureUnit) {\n\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0 + textureUnit);\n\t\t\tthis.textureUnit = textureUnit;\n\t\t}\n\t}\n\n\tbindTexture(texture) {\n\t\tconst textureTarget = texture._glTarget;\n\t\tconst textureObject = texture._glTexture;\n\t\tconst textureUnit = this.textureUnit;\n\t\tconst slot = this.targetToSlot[textureTarget];\n\n\t\tif (this.textureUnits[textureUnit][slot] !== textureObject) {\n\t\t\tthis.gl.bindTexture(textureTarget, textureObject);\n\t\t\tthis.textureUnits[textureUnit][slot] = textureObject;\n\t\t}\n\t}\n\n\tbindTextureOnUnit(texture, textureUnit) {\n\t\tconst textureTarget = texture._glTarget;\n\t\tconst textureObject = texture._glTexture;\n\t\tconst slot = this.targetToSlot[textureTarget];\n\n\t\tif (this.textureUnits[textureUnit][slot] !== textureObject) {\n\t\t\tthis.activeTexture(textureUnit);\n\t\t\tthis.gl.bindTexture(textureTarget, textureObject);\n\t\t\tthis.textureUnits[textureUnit][slot] = textureObject;\n\t\t}\n\t}\n\n\tsetTextureParameters(texture) {\n\t\tconst gl = this.gl;\n\t\tconst flags = texture._parameterFlags;\n\t\tconst target = texture._glTarget;\n\n\t\tif (flags & 1) {\n\t\t\tlet filter = texture._minFilter;\n\n\t\t\tif (!texture.pot && !this.webgl2 || !texture._mipmaps || texture._compressed && texture._levels.length === 1) {\n\t\t\t\tif (filter === FILTER_NEAREST_MIPMAP_NEAREST || filter === FILTER_NEAREST_MIPMAP_LINEAR) {\n\t\t\t\t\tfilter = FILTER_NEAREST;\n\t\t\t\t} else if (filter === FILTER_LINEAR_MIPMAP_NEAREST || filter === FILTER_LINEAR_MIPMAP_LINEAR) {\n\t\t\t\t\tfilter = FILTER_LINEAR;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.glFilter[filter]);\n\t\t}\n\n\t\tif (flags & 2) {\n\t\t\tgl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.glFilter[texture._magFilter]);\n\t\t}\n\n\t\tif (flags & 4) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_S, this.glAddress[texture._addressU]);\n\t\t\t} else {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_S, this.glAddress[texture.pot ? texture._addressU : ADDRESS_CLAMP_TO_EDGE]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 8) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_T, this.glAddress[texture._addressV]);\n\t\t\t} else {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_T, this.glAddress[texture.pot ? texture._addressV : ADDRESS_CLAMP_TO_EDGE]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 16) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_WRAP_R, this.glAddress[texture._addressW]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 32) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, texture._compareOnRead ? gl.COMPARE_REF_TO_TEXTURE : gl.NONE);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 64) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tgl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, this.glComparison[texture._compareFunc]);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & 128) {\n\t\t\tconst ext = this.extTextureFilterAnisotropic;\n\n\t\t\tif (ext) {\n\t\t\t\tgl.texParameterf(target, ext.TEXTURE_MAX_ANISOTROPY_EXT, Math.max(1, Math.min(Math.round(texture._anisotropy), this.maxAnisotropy)));\n\t\t\t}\n\t\t}\n\t}\n\n\tsetTexture(texture, textureUnit) {\n\t\tif (!texture._glTexture) this.initializeTexture(texture);\n\n\t\tif (texture._parameterFlags > 0 || texture._needsUpload || texture._needsMipmapsUpload || texture === this.grabPassTexture) {\n\t\t\tthis.activeTexture(textureUnit);\n\t\t\tthis.bindTexture(texture);\n\n\t\t\tif (texture._parameterFlags) {\n\t\t\t\tthis.setTextureParameters(texture);\n\t\t\t\ttexture._parameterFlags = 0;\n\t\t\t}\n\n\t\t\tconst processed = texture === this.grabPassTexture && this.updateGrabPass();\n\n\t\t\tif (!processed && (texture._needsUpload || texture._needsMipmapsUpload)) {\n\t\t\t\tthis.uploadTexture(texture);\n\t\t\t\ttexture._needsUpload = false;\n\t\t\t\ttexture._needsMipmapsUpload = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.bindTextureOnUnit(texture, textureUnit);\n\t\t}\n\t}\n\n\tcreateVertexArray(vertexBuffers) {\n\t\tlet key, vao;\n\t\tconst useCache = vertexBuffers.length > 1;\n\n\t\tif (useCache) {\n\t\t\tkey = \"\";\n\n\t\t\tfor (let i = 0; i < vertexBuffers.length; i++) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[i];\n\t\t\t\tkey += vertexBuffer.id + vertexBuffer.format.renderingingHash;\n\t\t\t}\n\n\t\t\tvao = this._vaoMap.get(key);\n\t\t}\n\n\t\tif (!vao) {\n\t\t\tconst gl = this.gl;\n\t\t\tvao = gl.createVertexArray();\n\t\t\tgl.bindVertexArray(vao);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n\t\t\tfor (let i = 0; i < vertexBuffers.length; i++) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[i];\n\t\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.bufferId);\n\t\t\t\tconst elements = vertexBuffer.format.elements;\n\n\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\tconst e = elements[j];\n\t\t\t\t\tconst loc = semanticToLocation[e.name];\n\t\t\t\t\tgl.vertexAttribPointer(loc, e.numComponents, this.glType[e.dataType], e.normalize, e.stride, e.offset);\n\t\t\t\t\tgl.enableVertexAttribArray(loc);\n\n\t\t\t\t\tif (vertexBuffer.instancing) {\n\t\t\t\t\t\tgl.vertexAttribDivisor(loc, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.bindVertexArray(null);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n\t\t\tif (useCache) {\n\t\t\t\tthis._vaoMap.set(key, vao);\n\t\t\t}\n\t\t}\n\n\t\treturn vao;\n\t}\n\n\tsetBuffers() {\n\t\tconst gl = this.gl;\n\t\tlet vao;\n\n\t\tif (this.vertexBuffers.length === 1) {\n\t\t\tconst vertexBuffer = this.vertexBuffers[0];\n\n\t\t\tif (!vertexBuffer._vao) {\n\t\t\t\tvertexBuffer._vao = this.createVertexArray(this.vertexBuffers);\n\t\t\t}\n\n\t\t\tvao = vertexBuffer._vao;\n\t\t} else {\n\t\t\tvao = this.createVertexArray(this.vertexBuffers);\n\t\t}\n\n\t\tif (this.boundVao !== vao) {\n\t\t\tthis.boundVao = vao;\n\t\t\tgl.bindVertexArray(vao);\n\t\t}\n\n\t\tthis.vertexBuffers.length = 0;\n\t\tconst bufferId = this.indexBuffer ? this.indexBuffer.bufferId : null;\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferId);\n\t}\n\n\tdraw(primitive, numInstances, keepBuffers) {\n\t\tconst gl = this.gl;\n\t\tlet sampler, samplerValue, texture, numTextures;\n\t\tlet uniform, scopeId, uniformVersion, programVersion;\n\t\tconst shader = this.shader;\n\t\tif (!shader) return;\n\t\tconst samplers = shader.samplers;\n\t\tconst uniforms = shader.uniforms;\n\n\t\tif (!keepBuffers) {\n\t\t\tthis.setBuffers();\n\t\t}\n\n\t\tlet textureUnit = 0;\n\n\t\tfor (let i = 0, len = samplers.length; i < len; i++) {\n\t\t\tsampler = samplers[i];\n\t\t\tsamplerValue = sampler.scopeId.value;\n\n\t\t\tif (!samplerValue) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (samplerValue instanceof Texture) {\n\t\t\t\ttexture = samplerValue;\n\t\t\t\tthis.setTexture(texture, textureUnit);\n\n\t\t\t\tif (sampler.slot !== textureUnit) {\n\t\t\t\t\tgl.uniform1i(sampler.locationId, textureUnit);\n\t\t\t\t\tsampler.slot = textureUnit;\n\t\t\t\t}\n\n\t\t\t\ttextureUnit++;\n\t\t\t} else {\n\t\t\t\tsampler.array.length = 0;\n\t\t\t\tnumTextures = samplerValue.length;\n\n\t\t\t\tfor (let j = 0; j < numTextures; j++) {\n\t\t\t\t\ttexture = samplerValue[j];\n\t\t\t\t\tthis.setTexture(texture, textureUnit);\n\t\t\t\t\tsampler.array[j] = textureUnit;\n\t\t\t\t\ttextureUnit++;\n\t\t\t\t}\n\n\t\t\t\tgl.uniform1iv(sampler.locationId, sampler.array);\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = uniforms.length; i < len; i++) {\n\t\t\tuniform = uniforms[i];\n\t\t\tscopeId = uniform.scopeId;\n\t\t\tuniformVersion = uniform.version;\n\t\t\tprogramVersion = scopeId.versionObject.version;\n\n\t\t\tif (uniformVersion.globalId !== programVersion.globalId || uniformVersion.revision !== programVersion.revision) {\n\t\t\t\tuniformVersion.globalId = programVersion.globalId;\n\t\t\t\tuniformVersion.revision = programVersion.revision;\n\n\t\t\t\tif (scopeId.value !== null) {\n\t\t\t\t\tthis.commitFunction[uniform.dataType](uniform, scopeId.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && this.transformFeedbackBuffer) {\n\t\t\tgl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.transformFeedbackBuffer.bufferId);\n\t\t\tgl.beginTransformFeedback(gl.POINTS);\n\t\t}\n\n\t\tconst mode = this.glPrimitive[primitive.type];\n\t\tconst count = primitive.count;\n\n\t\tif (primitive.indexed) {\n\t\t\tconst indexBuffer = this.indexBuffer;\n\t\t\tconst format = indexBuffer.glFormat;\n\t\t\tconst offset = primitive.base * indexBuffer.bytesPerIndex;\n\n\t\t\tif (numInstances > 0) {\n\t\t\t\tgl.drawElementsInstanced(mode, count, format, offset, numInstances);\n\t\t\t} else {\n\t\t\t\tgl.drawElements(mode, count, format, offset);\n\t\t\t}\n\t\t} else {\n\t\t\tconst first = primitive.base;\n\n\t\t\tif (numInstances > 0) {\n\t\t\t\tgl.drawArraysInstanced(mode, first, count, numInstances);\n\t\t\t} else {\n\t\t\t\tgl.drawArrays(mode, first, count);\n\t\t\t}\n\t\t}\n\n\t\tif (this.webgl2 && this.transformFeedbackBuffer) {\n\t\t\tgl.endTransformFeedback();\n\t\t\tgl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);\n\t\t}\n\n\t\tthis._drawCallsPerFrame++;\n\t}\n\n\tclear(options) {\n\t\tconst defaultOptions = this.defaultClearOptions;\n\t\toptions = options || defaultOptions;\n\t\tconst flags = options.flags == undefined ? defaultOptions.flags : options.flags;\n\n\t\tif (flags !== 0) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (flags & CLEARFLAG_COLOR) {\n\t\t\t\tconst color = options.color == undefined ? defaultOptions.color : options.color;\n\t\t\t\tthis.setClearColor(color[0], color[1], color[2], color[3]);\n\t\t\t}\n\n\t\t\tif (flags & CLEARFLAG_DEPTH) {\n\t\t\t\tconst depth = options.depth == undefined ? defaultOptions.depth : options.depth;\n\t\t\t\tthis.setClearDepth(depth);\n\n\t\t\t\tif (!this.depthWrite) {\n\t\t\t\t\tgl.depthMask(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (flags & CLEARFLAG_STENCIL) {\n\t\t\t\tconst stencil = options.stencil == undefined ? defaultOptions.stencil : options.stencil;\n\t\t\t\tthis.setClearStencil(stencil);\n\t\t\t}\n\n\t\t\tgl.clear(this.glClearFlag[flags]);\n\n\t\t\tif (flags & CLEARFLAG_DEPTH) {\n\t\t\t\tif (!this.depthWrite) {\n\t\t\t\t\tgl.depthMask(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treadPixels(x, y, w, h, pixels) {\n\t\tconst gl = this.gl;\n\t\tgl.readPixels(x, y, w, h, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\t}\n\n\tsetClearDepth(depth) {\n\t\tif (depth !== this.clearDepth) {\n\t\t\tthis.gl.clearDepth(depth);\n\t\t\tthis.clearDepth = depth;\n\t\t}\n\t}\n\n\tsetClearColor(r, g, b, a) {\n\t\tif (r !== this.clearRed || g !== this.clearGreen || b !== this.clearBlue || a !== this.clearAlpha) {\n\t\t\tthis.gl.clearColor(r, g, b, a);\n\t\t\tthis.clearRed = r;\n\t\t\tthis.clearGreen = g;\n\t\t\tthis.clearBlue = b;\n\t\t\tthis.clearAlpha = a;\n\t\t}\n\t}\n\n\tsetClearStencil(value) {\n\t\tif (value !== this.clearStencil) {\n\t\t\tthis.gl.clearStencil(value);\n\t\t\tthis.clearStencil = value;\n\t\t}\n\t}\n\n\tsetRenderTarget(renderTarget) {\n\t\tthis.renderTarget = renderTarget;\n\t}\n\n\tgetRenderTarget() {\n\t\treturn this.renderTarget;\n\t}\n\n\tgetDepthTest() {\n\t\treturn this.depthTest;\n\t}\n\n\tsetDepthTest(depthTest) {\n\t\tif (this.depthTest !== depthTest) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (depthTest) {\n\t\t\t\tgl.enable(gl.DEPTH_TEST);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\t}\n\n\t\t\tthis.depthTest = depthTest;\n\t\t}\n\t}\n\n\tsetDepthFunc(func) {\n\t\tif (this.depthFunc === func) return;\n\t\tthis.gl.depthFunc(this.glComparison[func]);\n\t\tthis.depthFunc = func;\n\t}\n\n\tgetDepthWrite() {\n\t\treturn this.depthWrite;\n\t}\n\n\tsetDepthWrite(writeDepth) {\n\t\tif (this.depthWrite !== writeDepth) {\n\t\t\tthis.gl.depthMask(writeDepth);\n\t\t\tthis.depthWrite = writeDepth;\n\t\t}\n\t}\n\n\tsetColorWrite(writeRed, writeGreen, writeBlue, writeAlpha) {\n\t\tif (this.writeRed !== writeRed || this.writeGreen !== writeGreen || this.writeBlue !== writeBlue || this.writeAlpha !== writeAlpha) {\n\t\t\tthis.gl.colorMask(writeRed, writeGreen, writeBlue, writeAlpha);\n\t\t\tthis.writeRed = writeRed;\n\t\t\tthis.writeGreen = writeGreen;\n\t\t\tthis.writeBlue = writeBlue;\n\t\t\tthis.writeAlpha = writeAlpha;\n\t\t}\n\t}\n\n\tsetAlphaToCoverage(state) {\n\t\tif (!this.webgl2) return;\n\t\tif (this.alphaToCoverage === state) return;\n\t\tthis.alphaToCoverage = state;\n\n\t\tif (state) {\n\t\t\tthis.gl.enable(this.gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t} else {\n\t\t\tthis.gl.disable(this.gl.SAMPLE_ALPHA_TO_COVERAGE);\n\t\t}\n\t}\n\n\tsetTransformFeedbackBuffer(tf) {\n\t\tif (this.transformFeedbackBuffer === tf) return;\n\t\tthis.transformFeedbackBuffer = tf;\n\n\t\tif (this.webgl2) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (tf) {\n\t\t\t\tif (!this.feedback) {\n\t\t\t\t\tthis.feedback = gl.createTransformFeedback();\n\t\t\t\t}\n\n\t\t\t\tgl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.feedback);\n\t\t\t} else {\n\t\t\t\tgl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetRaster(on) {\n\t\tif (this.raster === on) return;\n\t\tthis.raster = on;\n\n\t\tif (this.webgl2) {\n\t\t\tif (on) {\n\t\t\t\tthis.gl.disable(this.gl.RASTERIZER_DISCARD);\n\t\t\t} else {\n\t\t\t\tthis.gl.enable(this.gl.RASTERIZER_DISCARD);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDepthBias(on) {\n\t\tif (this.depthBiasEnabled === on) return;\n\t\tthis.depthBiasEnabled = on;\n\n\t\tif (on) {\n\t\t\tthis.gl.enable(this.gl.POLYGON_OFFSET_FILL);\n\t\t} else {\n\t\t\tthis.gl.disable(this.gl.POLYGON_OFFSET_FILL);\n\t\t}\n\t}\n\n\tsetDepthBiasValues(constBias, slopeBias) {\n\t\tthis.gl.polygonOffset(slopeBias, constBias);\n\t}\n\n\tgetBlending() {\n\t\treturn this.blending;\n\t}\n\n\tsetBlending(blending) {\n\t\tif (this.blending !== blending) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (blending) {\n\t\t\t\tgl.enable(gl.BLEND);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.BLEND);\n\t\t\t}\n\n\t\t\tthis.blending = blending;\n\t\t}\n\t}\n\n\tsetStencilTest(enable) {\n\t\tif (this.stencil !== enable) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif (enable) {\n\t\t\t\tgl.enable(gl.STENCIL_TEST);\n\t\t\t} else {\n\t\t\t\tgl.disable(gl.STENCIL_TEST);\n\t\t\t}\n\n\t\t\tthis.stencil = enable;\n\t\t}\n\t}\n\n\tsetStencilFunc(func, ref, mask) {\n\t\tif (this.stencilFuncFront !== func || this.stencilRefFront !== ref || this.stencilMaskFront !== mask || this.stencilFuncBack !== func || this.stencilRefBack !== ref || this.stencilMaskBack !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFunc(this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncFront = this.stencilFuncBack = func;\n\t\t\tthis.stencilRefFront = this.stencilRefBack = ref;\n\t\t\tthis.stencilMaskFront = this.stencilMaskBack = mask;\n\t\t}\n\t}\n\n\tsetStencilFuncFront(func, ref, mask) {\n\t\tif (this.stencilFuncFront !== func || this.stencilRefFront !== ref || this.stencilMaskFront !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFuncSeparate(gl.FRONT, this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncFront = func;\n\t\t\tthis.stencilRefFront = ref;\n\t\t\tthis.stencilMaskFront = mask;\n\t\t}\n\t}\n\n\tsetStencilFuncBack(func, ref, mask) {\n\t\tif (this.stencilFuncBack !== func || this.stencilRefBack !== ref || this.stencilMaskBack !== mask) {\n\t\t\tconst gl = this.gl;\n\t\t\tgl.stencilFuncSeparate(gl.BACK, this.glComparison[func], ref, mask);\n\t\t\tthis.stencilFuncBack = func;\n\t\t\tthis.stencilRefBack = ref;\n\t\t\tthis.stencilMaskBack = mask;\n\t\t}\n\t}\n\n\tsetStencilOperation(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailFront !== fail || this.stencilZfailFront !== zfail || this.stencilZpassFront !== zpass || this.stencilFailBack !== fail || this.stencilZfailBack !== zfail || this.stencilZpassBack !== zpass) {\n\t\t\tthis.gl.stencilOp(this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailFront = this.stencilFailBack = fail;\n\t\t\tthis.stencilZfailFront = this.stencilZfailBack = zfail;\n\t\t\tthis.stencilZpassFront = this.stencilZpassBack = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskFront !== writeMask || this.stencilWriteMaskBack !== writeMask) {\n\t\t\tthis.gl.stencilMask(writeMask);\n\t\t\tthis.stencilWriteMaskFront = writeMask;\n\t\t\tthis.stencilWriteMaskBack = writeMask;\n\t\t}\n\t}\n\n\tsetStencilOperationFront(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailFront !== fail || this.stencilZfailFront !== zfail || this.stencilZpassFront !== zpass) {\n\t\t\tthis.gl.stencilOpSeparate(this.gl.FRONT, this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailFront = fail;\n\t\t\tthis.stencilZfailFront = zfail;\n\t\t\tthis.stencilZpassFront = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskFront !== writeMask) {\n\t\t\tthis.gl.stencilMaskSeparate(this.gl.FRONT, writeMask);\n\t\t\tthis.stencilWriteMaskFront = writeMask;\n\t\t}\n\t}\n\n\tsetStencilOperationBack(fail, zfail, zpass, writeMask) {\n\t\tif (this.stencilFailBack !== fail || this.stencilZfailBack !== zfail || this.stencilZpassBack !== zpass) {\n\t\t\tthis.gl.stencilOpSeparate(this.gl.BACK, this.glStencilOp[fail], this.glStencilOp[zfail], this.glStencilOp[zpass]);\n\t\t\tthis.stencilFailBack = fail;\n\t\t\tthis.stencilZfailBack = zfail;\n\t\t\tthis.stencilZpassBack = zpass;\n\t\t}\n\n\t\tif (this.stencilWriteMaskBack !== writeMask) {\n\t\t\tthis.gl.stencilMaskSeparate(this.gl.BACK, writeMask);\n\t\t\tthis.stencilWriteMaskBack = writeMask;\n\t\t}\n\t}\n\n\tsetBlendFunction(blendSrc, blendDst) {\n\t\tif (this.blendSrc !== blendSrc || this.blendDst !== blendDst || this.separateAlphaBlend) {\n\t\t\tthis.gl.blendFunc(this.glBlendFunction[blendSrc], this.glBlendFunction[blendDst]);\n\t\t\tthis.blendSrc = blendSrc;\n\t\t\tthis.blendDst = blendDst;\n\t\t\tthis.separateAlphaBlend = false;\n\t\t}\n\t}\n\n\tsetBlendFunctionSeparate(blendSrc, blendDst, blendSrcAlpha, blendDstAlpha) {\n\t\tif (this.blendSrc !== blendSrc || this.blendDst !== blendDst || this.blendSrcAlpha !== blendSrcAlpha || this.blendDstAlpha !== blendDstAlpha || !this.separateAlphaBlend) {\n\t\t\tthis.gl.blendFuncSeparate(this.glBlendFunction[blendSrc], this.glBlendFunction[blendDst], this.glBlendFunction[blendSrcAlpha], this.glBlendFunction[blendDstAlpha]);\n\t\t\tthis.blendSrc = blendSrc;\n\t\t\tthis.blendDst = blendDst;\n\t\t\tthis.blendSrcAlpha = blendSrcAlpha;\n\t\t\tthis.blendDstAlpha = blendDstAlpha;\n\t\t\tthis.separateAlphaBlend = true;\n\t\t}\n\t}\n\n\tsetBlendEquation(blendEquation) {\n\t\tif (this.blendEquation !== blendEquation || this.separateAlphaEquation) {\n\t\t\tthis.gl.blendEquation(this.glBlendEquation[blendEquation]);\n\t\t\tthis.blendEquation = blendEquation;\n\t\t\tthis.separateAlphaEquation = false;\n\t\t}\n\t}\n\n\tsetBlendEquationSeparate(blendEquation, blendAlphaEquation) {\n\t\tif (this.blendEquation !== blendEquation || this.blendAlphaEquation !== blendAlphaEquation || !this.separateAlphaEquation) {\n\t\t\tthis.gl.blendEquationSeparate(this.glBlendEquation[blendEquation], this.glBlendEquation[blendAlphaEquation]);\n\t\t\tthis.blendEquation = blendEquation;\n\t\t\tthis.blendAlphaEquation = blendAlphaEquation;\n\t\t\tthis.separateAlphaEquation = true;\n\t\t}\n\t}\n\n\tsetCullMode(cullMode) {\n\t\tif (this.cullMode !== cullMode) {\n\t\t\tif (cullMode === CULLFACE_NONE) {\n\t\t\t\tthis.gl.disable(this.gl.CULL_FACE);\n\t\t\t} else {\n\t\t\t\tif (this.cullMode === CULLFACE_NONE) {\n\t\t\t\t\tthis.gl.enable(this.gl.CULL_FACE);\n\t\t\t\t}\n\n\t\t\t\tconst mode = this.glCull[cullMode];\n\n\t\t\t\tif (this.cullFace !== mode) {\n\t\t\t\t\tthis.gl.cullFace(mode);\n\t\t\t\t\tthis.cullFace = mode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cullMode = cullMode;\n\t\t}\n\t}\n\n\tgetCullMode() {\n\t\treturn this.cullMode;\n\t}\n\n\tsetIndexBuffer(indexBuffer) {\n\t\tthis.indexBuffer = indexBuffer;\n\t}\n\n\tsetVertexBuffer(vertexBuffer) {\n\t\tif (vertexBuffer) {\n\t\t\tthis.vertexBuffers.push(vertexBuffer);\n\t\t}\n\t}\n\n\tcompileShaderSource(src, isVertexShader) {\n\t\tconst gl = this.gl;\n\t\tlet glShader = isVertexShader ? this.vertexShaderCache[src] : this.fragmentShaderCache[src];\n\n\t\tif (!glShader) {\n\t\t\tglShader = gl.createShader(isVertexShader ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n\t\t\tgl.shaderSource(glShader, src);\n\t\t\tgl.compileShader(glShader);\n\n\t\t\tif (isVertexShader) {\n\t\t\t\tthis.vertexShaderCache[src] = glShader;\n\t\t\t} else {\n\t\t\t\tthis.fragmentShaderCache[src] = glShader;\n\t\t\t}\n\t\t}\n\n\t\treturn glShader;\n\t}\n\n\tcompileAndLinkShader(shader) {\n\t\tconst gl = this.gl;\n\t\tconst definition = shader.definition;\n\t\tconst attrs = definition.attributes;\n\t\tconst glVertexShader = this.compileShaderSource(definition.vshader, true);\n\t\tconst glFragmentShader = this.compileShaderSource(definition.fshader, false);\n\t\tconst glProgram = gl.createProgram();\n\t\tgl.attachShader(glProgram, glVertexShader);\n\t\tgl.attachShader(glProgram, glFragmentShader);\n\n\t\tif (this.webgl2 && definition.useTransformFeedback) {\n\t\t\tconst outNames = [];\n\n\t\t\tfor (const attr in attrs) {\n\t\t\t\tif (attrs.hasOwnProperty(attr)) {\n\t\t\t\t\toutNames.push(\"out_\" + attr);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgl.transformFeedbackVaryings(glProgram, outNames, gl.INTERLEAVED_ATTRIBS);\n\t\t}\n\n\t\tconst locations = {};\n\n\t\tfor (const attr in attrs) {\n\t\t\tif (attrs.hasOwnProperty(attr)) {\n\t\t\t\tconst semantic = attrs[attr];\n\t\t\t\tconst loc = semanticToLocation[semantic];\n\t\t\t\tlocations[loc] = attr;\n\t\t\t\tgl.bindAttribLocation(glProgram, loc, attr);\n\t\t\t}\n\t\t}\n\n\t\tgl.linkProgram(glProgram);\n\t\tshader._glVertexShader = glVertexShader;\n\t\tshader._glFragmentShader = glFragmentShader;\n\t\tshader._glProgram = glProgram;\n\t}\n\n\tcreateShader(shader) {\n\t\tthis.compileAndLinkShader(shader);\n\t\tthis.shaders.push(shader);\n\t}\n\n\tdestroyShader(shader) {\n\t\tconst idx = this.shaders.indexOf(shader);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.shaders.splice(idx, 1);\n\t\t}\n\n\t\tif (shader._glProgram) {\n\t\t\tthis.gl.deleteProgram(shader._glProgram);\n\t\t\tshader._glProgram = null;\n\t\t\tthis.removeShaderFromCache(shader);\n\t\t}\n\t}\n\n\t_addLineNumbers(src) {\n\t\tif (!src) return \"\";\n\t\tconst lines = src.split(\"\\n\");\n\n\t\tfor (let i = 0, len = lines.length; i < len; i++) {\n\t\t\tlines[i] = i + 1 + \":\\t\" + lines[i];\n\t\t}\n\n\t\treturn lines.join(\"\\n\");\n\t}\n\n\tpostLink(shader) {\n\t\tconst gl = this.gl;\n\t\tconst glVertexShader = shader._glVertexShader;\n\t\tconst glFragmentShader = shader._glFragmentShader;\n\t\tconst glProgram = shader._glProgram;\n\t\tconst definition = shader.definition;\n\n\t\tif (!gl.getShaderParameter(glVertexShader, gl.COMPILE_STATUS)) {\n\t\t\tconsole.error(\"Failed to compile vertex shader:\\n\\n\" + this._addLineNumbers(definition.vshader) + \"\\n\\n\" + gl.getShaderInfoLog(glVertexShader));\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!gl.getShaderParameter(glFragmentShader, gl.COMPILE_STATUS)) {\n\t\t\tconsole.error(\"Failed to compile fragment shader:\\n\\n\" + this._addLineNumbers(definition.fshader) + \"\\n\\n\" + gl.getShaderInfoLog(glFragmentShader));\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {\n\t\t\tconsole.error(\"Failed to link shader program. Error: \" + gl.getProgramInfoLog(glProgram));\n\t\t\treturn false;\n\t\t}\n\n\t\tlet i, info, location, shaderInput;\n\t\ti = 0;\n\t\tconst numAttributes = gl.getProgramParameter(glProgram, gl.ACTIVE_ATTRIBUTES);\n\n\t\twhile (i < numAttributes) {\n\t\t\tinfo = gl.getActiveAttrib(glProgram, i++);\n\t\t\tlocation = gl.getAttribLocation(glProgram, info.name);\n\n\t\t\tif (definition.attributes[info.name] === undefined) {\n\t\t\t\tconsole.error(`Vertex shader attribute \"${info.name}\" is not mapped to a semantic in shader definition.`);\n\t\t\t}\n\n\t\t\tshaderInput = new ShaderInput(this, definition.attributes[info.name], this.pcUniformType[info.type], location);\n\t\t\tshader.attributes.push(shaderInput);\n\t\t}\n\n\t\ti = 0;\n\t\tconst numUniforms = gl.getProgramParameter(glProgram, gl.ACTIVE_UNIFORMS);\n\n\t\twhile (i < numUniforms) {\n\t\t\tinfo = gl.getActiveUniform(glProgram, i++);\n\t\t\tlocation = gl.getUniformLocation(glProgram, info.name);\n\t\t\tshaderInput = new ShaderInput(this, info.name, this.pcUniformType[info.type], location);\n\n\t\t\tif (info.type === gl.SAMPLER_2D || info.type === gl.SAMPLER_CUBE || this.webgl2 && (info.type === gl.SAMPLER_2D_SHADOW || info.type === gl.SAMPLER_CUBE_SHADOW || info.type === gl.SAMPLER_3D)) {\n\t\t\t\tshader.samplers.push(shaderInput);\n\t\t\t} else {\n\t\t\t\tshader.uniforms.push(shaderInput);\n\t\t\t}\n\t\t}\n\n\t\tshader.ready = true;\n\t\treturn true;\n\t}\n\n\tsetShader(shader) {\n\t\tif (shader !== this.shader) {\n\t\t\tif (!shader.ready) {\n\t\t\t\tif (!this.postLink(shader)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.shader = shader;\n\t\t\tthis.gl.useProgram(shader._glProgram);\n\t\t\tthis.attributesInvalidated = true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetHdrFormat() {\n\t\tif (this.textureHalfFloatRenderable) {\n\t\t\treturn PIXELFORMAT_RGBA16F;\n\t\t} else if (this.textureFloatRenderable) {\n\t\t\treturn PIXELFORMAT_RGBA32F;\n\t\t}\n\n\t\treturn PIXELFORMAT_R8_G8_B8_A8;\n\t}\n\n\tgetBoneLimit() {\n\t\treturn this.boneLimit;\n\t}\n\n\tsetBoneLimit(maxBones) {\n\t\tthis.boneLimit = maxBones;\n\t}\n\n\tresizeCanvas(width, height) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tconst ratio = Math.min(this._maxPixelRatio, window.devicePixelRatio);\n\t\twidth = Math.floor(width * ratio);\n\t\theight = Math.floor(height * ratio);\n\n\t\tif (this.canvas.width !== width || this.canvas.height !== height) {\n\t\t\tthis.canvas.width = width;\n\t\t\tthis.canvas.height = height;\n\t\t\tthis.fire(EVENT_RESIZE, width, height);\n\t\t}\n\t}\n\n\tsetResolution(width, height) {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height = height;\n\t\tthis.fire(EVENT_RESIZE, width, height);\n\t}\n\n\tclearShaderCache() {\n\t\tconst gl = this.gl;\n\n\t\tfor (const shaderSrc in this.fragmentShaderCache) {\n\t\t\tgl.deleteShader(this.fragmentShaderCache[shaderSrc]);\n\t\t\tdelete this.fragmentShaderCache[shaderSrc];\n\t\t}\n\n\t\tfor (const shaderSrc in this.vertexShaderCache) {\n\t\t\tgl.deleteShader(this.vertexShaderCache[shaderSrc]);\n\t\t\tdelete this.vertexShaderCache[shaderSrc];\n\t\t}\n\n\t\tthis.programLib.clearCache();\n\t}\n\n\tclearVertexArrayObjectCache() {\n\t\tconst gl = this.gl;\n\n\t\tthis._vaoMap.forEach((item, key, mapObj) => {\n\t\t\tgl.deleteVertexArray(item);\n\t\t});\n\n\t\tthis._vaoMap.clear();\n\t}\n\n\tremoveShaderFromCache(shader) {\n\t\tthis.programLib.removeFromCache(shader);\n\t}\n\n\tdestroy() {\n\t\tconst gl = this.gl;\n\t\tthis.destroyGrabPass();\n\n\t\tif (this.webgl2 && this.feedback) {\n\t\t\tgl.deleteTransformFeedback(this.feedback);\n\t\t}\n\n\t\tthis.clearShaderCache();\n\t\tthis.clearVertexArrayObjectCache();\n\t\tthis.canvas.removeEventListener('webglcontextlost', this._contextLostHandler, false);\n\t\tthis.canvas.removeEventListener('webglcontextrestored', this._contextRestoredHandler, false);\n\t\tthis._contextLostHandler = null;\n\t\tthis._contextRestoredHandler = null;\n\t\tthis.canvas = null;\n\t\tthis.gl = null;\n\t}\n\n\tget width() {\n\t\treturn this.gl.drawingBufferWidth || this.canvas.width;\n\t}\n\n\tget height() {\n\t\treturn this.gl.drawingBufferHeight || this.canvas.height;\n\t}\n\n\tget fullscreen() {\n\t\treturn !!document.fullscreenElement;\n\t}\n\n\tset fullscreen(fullscreen) {\n\t\tif (fullscreen) {\n\t\t\tconst canvas = this.gl.canvas;\n\t\t\tcanvas.requestFullscreen();\n\t\t} else {\n\t\t\tdocument.exitFullscreen();\n\t\t}\n\t}\n\n\tget enableAutoInstancing() {\n\t\treturn this._enableAutoInstancing;\n\t}\n\n\tset enableAutoInstancing(value) {\n\t\tthis._enableAutoInstancing = value && this.extInstancing;\n\t}\n\n\tget maxPixelRatio() {\n\t\treturn this._maxPixelRatio;\n\t}\n\n\tset maxPixelRatio(ratio) {\n\t\tthis._maxPixelRatio = ratio;\n\t\tthis.resizeCanvas(this._width, this._height);\n\t}\n\n\tget textureFloatHighPrecision() {\n\t\tif (this._textureFloatHighPrecision === undefined) {\n\t\t\tthis._textureFloatHighPrecision = testTextureFloatHighPrecision(this);\n\t\t}\n\n\t\treturn this._textureFloatHighPrecision;\n\t}\n\n\tget textureHalfFloatUpdatable() {\n\t\tif (this._textureHalfFloatUpdatable === undefined) {\n\t\t\tif (this.webgl2) {\n\t\t\t\tthis._textureHalfFloatUpdatable = true;\n\t\t\t} else {\n\t\t\t\tthis._textureHalfFloatUpdatable = testTextureHalfFloatUpdatable(this.gl, this.extTextureHalfFloat.HALF_FLOAT_OES);\n\t\t\t}\n\t\t}\n\n\t\treturn this._textureHalfFloatUpdatable;\n\t}\n\n}\n\nconst defaultOptions = {\n\tdepth: true,\n\tface: 0\n};\n\nclass RenderTarget {\n\tconstructor(options) {\n\t\tconst _arg2 = arguments[1];\n\t\tconst _arg3 = arguments[2];\n\n\t\tif (options instanceof GraphicsDevice) {\n\t\t\tthis._colorBuffer = _arg2;\n\t\t\toptions = _arg3;\n\t\t} else {\n\t\t\tthis._colorBuffer = options.colorBuffer;\n\t\t}\n\n\t\tif (this._colorBuffer) {\n\t\t\tthis._colorBuffer._isRenderTarget = true;\n\t\t}\n\n\t\tthis._device = null;\n\t\tthis._glFrameBuffer = null;\n\t\tthis._glDepthBuffer = null;\n\t\toptions = options !== undefined ? options : defaultOptions;\n\t\tthis._depthBuffer = options.depthBuffer;\n\t\tthis._face = options.face !== undefined ? options.face : 0;\n\n\t\tif (this._depthBuffer) {\n\t\t\tconst format = this._depthBuffer._format;\n\n\t\t\tif (format === PIXELFORMAT_DEPTH) {\n\t\t\t\tthis._depth = true;\n\t\t\t\tthis._stencil = false;\n\t\t\t} else if (format === PIXELFORMAT_DEPTHSTENCIL) {\n\t\t\t\tthis._depth = true;\n\t\t\t\tthis._stencil = true;\n\t\t\t} else {\n\t\t\t\tthis._depth = false;\n\t\t\t\tthis._stencil = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._depth = options.depth !== undefined ? options.depth : true;\n\t\t\tthis._stencil = options.stencil !== undefined ? options.stencil : false;\n\t\t}\n\n\t\tthis._samples = options.samples !== undefined ? options.samples : 1;\n\t\tthis.autoResolve = options.autoResolve !== undefined ? options.autoResolve : true;\n\t\tthis._glResolveFrameBuffer = null;\n\t\tthis._glMsaaColorBuffer = null;\n\t\tthis._glMsaaDepthBuffer = null;\n\t\tthis.name = options.name;\n\n\t\tif (!this.name) {\n\t\t\tvar _this$_colorBuffer;\n\n\t\t\tthis.name = (_this$_colorBuffer = this._colorBuffer) == null ? void 0 : _this$_colorBuffer.name;\n\t\t}\n\n\t\tif (!this.name) {\n\t\t\tvar _this$_depthBuffer;\n\n\t\t\tthis.name = (_this$_depthBuffer = this._depthBuffer) == null ? void 0 : _this$_depthBuffer.name;\n\t\t}\n\n\t\tif (!this.name) {\n\t\t\tthis.name = \"Untitled\";\n\t\t}\n\n\t\tthis.flipY = !!options.flipY;\n\t}\n\n\tdestroy() {\n\t\tconst device = this._device;\n\n\t\tif (device) {\n\t\t\tconst idx = device.targets.indexOf(this);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tdevice.targets.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.destroyFrameBuffers();\n\t\t}\n\t}\n\n\tdestroyFrameBuffers() {\n\t\tconst device = this._device;\n\n\t\tif (device) {\n\t\t\tconst gl = device.gl;\n\n\t\t\tif (this._glFrameBuffer) {\n\t\t\t\tgl.deleteFramebuffer(this._glFrameBuffer);\n\t\t\t\tthis._glFrameBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glDepthBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glDepthBuffer);\n\t\t\t\tthis._glDepthBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glResolveFrameBuffer) {\n\t\t\t\tgl.deleteFramebuffer(this._glResolveFrameBuffer);\n\t\t\t\tthis._glResolveFrameBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glMsaaColorBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glMsaaColorBuffer);\n\t\t\t\tthis._glMsaaColorBuffer = null;\n\t\t\t}\n\n\t\t\tif (this._glMsaaDepthBuffer) {\n\t\t\t\tgl.deleteRenderbuffer(this._glMsaaDepthBuffer);\n\t\t\t\tthis._glMsaaDepthBuffer = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroyTextureBuffers() {\n\t\tif (this._depthBuffer) {\n\t\t\tthis._depthBuffer.destroy();\n\n\t\t\tthis._depthBuffer = null;\n\t\t}\n\n\t\tif (this._colorBuffer) {\n\t\t\tthis._colorBuffer.destroy();\n\n\t\t\tthis._colorBuffer = null;\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis._glFrameBuffer = undefined;\n\t\tthis._glDepthBuffer = undefined;\n\t\tthis._glResolveFrameBuffer = undefined;\n\t\tthis._glMsaaColorBuffer = undefined;\n\t\tthis._glMsaaDepthBuffer = undefined;\n\t}\n\n\tresolve(color = true, depth = !!this._depthBuffer) {\n\t\tif (!this._device) return;\n\t\tif (!this._device.webgl2) return;\n\t\tconst gl = this._device.gl;\n\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._glFrameBuffer);\n\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._glResolveFrameBuffer);\n\t\tgl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, (color ? gl.COLOR_BUFFER_BIT : 0) | (depth ? gl.DEPTH_BUFFER_BIT : 0), gl.NEAREST);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this._glFrameBuffer);\n\t}\n\n\tcopy(source, color, depth) {\n\t\tif (!this._device) {\n\t\t\tif (source._device) {\n\t\t\t\tthis._device = source._device;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn this._device.copyRenderTarget(source, this, color, depth);\n\t}\n\n\tget colorBuffer() {\n\t\treturn this._colorBuffer;\n\t}\n\n\tget depthBuffer() {\n\t\treturn this._depthBuffer;\n\t}\n\n\tget face() {\n\t\treturn this._face;\n\t}\n\n\tget width() {\n\t\treturn this._colorBuffer ? this._colorBuffer.width : this._depthBuffer.width;\n\t}\n\n\tget height() {\n\t\treturn this._colorBuffer ? this._colorBuffer.height : this._depthBuffer.height;\n\t}\n\n}\n\nfunction syncToCpu(device, targ, face) {\n\tvar tex = targ._colorBuffer;\n\tif (tex.format !== PIXELFORMAT_R8_G8_B8_A8) return;\n\tvar pixels = new Uint8Array(tex.width * tex.height * 4);\n\tvar gl = device.gl;\n\tdevice.setFramebuffer(targ._glFrameBuffer);\n\tgl.readPixels(0, 0, tex.width, tex.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\tif (!tex._levels) tex._levels = [];\n\tif (!tex._levels[0]) tex._levels[0] = [];\n\ttex._levels[0][face] = pixels;\n}\n\nfunction prefilterCubemap(options) {\n\tvar device = options.device;\n\tvar sourceCubemap = options.sourceCubemap;\n\tvar method = options.method;\n\tvar samples = options.samples;\n\tvar cpuSync = options.cpuSync;\n\n\tif (cpuSync && !sourceCubemap._levels[0]) {\n\t\treturn;\n\t}\n\n\tvar sourceType = sourceCubemap.type;\n\tvar rgbmSource = sourceType === TEXTURETYPE_RGBM;\n\tvar shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.rgbmPS + shaderChunks.prefilterCubemapPS.replace(/\\$METHOD/g, method === 0 ? \"cos\" : \"phong\").replace(/\\$NUMSAMPLES/g, samples).replace(/\\$textureCube/g, rgbmSource ? \"textureCubeRGBM\" : \"textureCube\"), \"prefilter\" + method + \"\" + samples + \"\" + rgbmSource);\n\tvar shader2 = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.outputCubemapPS, \"outputCubemap\");\n\tvar constantTexSource = device.scope.resolve(\"source\");\n\tvar constantParams = device.scope.resolve(\"params\");\n\tvar params = new Float32Array(4);\n\tvar size = sourceCubemap.width;\n\tvar format = sourceCubemap.format;\n\tvar cmapsList = [[], options.filteredFixed, options.filteredRgbm, options.filteredFixedRgbm];\n\tvar gloss = method === 0 ? [0.9, 0.85, 0.7, 0.4, 0.25, 0.15, 0.1] : [512, 128, 32, 8, 2, 1, 1];\n\tvar mipSize = [64, 32, 16, 8, 4, 2, 1];\n\tvar numMips = 7;\n\tvar targ;\n\tvar i, face, pass;\n\tvar rgbFormat = format === PIXELFORMAT_R8_G8_B8;\n\tvar isImg = false;\n\tvar nextCubemap, cubemap;\n\n\tif (cpuSync) {\n\t\tisImg = sourceCubemap._levels[0][0] instanceof HTMLImageElement;\n\t}\n\n\tif ((rgbFormat || isImg) && cpuSync) {\n\t\tformat = PIXELFORMAT_R8_G8_B8_A8;\n\t\tnextCubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: sourceType,\n\t\t\tformat: format,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false\n\t\t});\n\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\tfor (face = 0; face < 6; face++) {\n\t\t\ttarg = new RenderTarget({\n\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\tface: face,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = face;\n\t\t\tparams[1] = 0;\n\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, targ, shader2);\n\t\t\tsyncToCpu(device, targ, face);\n\t\t}\n\n\t\tsourceCubemap = nextCubemap;\n\t}\n\n\tif (size > 128) {\n\t\tvar log128 = Math.round(Math.log2(128));\n\t\tvar logSize = Math.round(Math.log2(size));\n\t\tvar steps = logSize - log128;\n\n\t\tfor (i = 0; i < steps; i++) {\n\t\t\tsize = sourceCubemap.width * 0.5;\n\t\t\tvar sampleGloss = method === 0 ? 1 : Math.pow(2, Math.round(Math.log2(gloss[0]) + (steps - i) * 2));\n\t\t\tnextCubemap = new Texture(device, {\n\t\t\t\tcubemap: true,\n\t\t\t\ttype: sourceType,\n\t\t\t\tformat: format,\n\t\t\t\twidth: size,\n\t\t\t\theight: size,\n\t\t\t\tmipmaps: false\n\t\t\t});\n\t\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\ttarg = new RenderTarget({\n\t\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\t\tface: face,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t\tparams[0] = face;\n\t\t\t\tparams[1] = sampleGloss;\n\t\t\t\tparams[2] = size;\n\t\t\t\tparams[3] = rgbmSource ? 3 : 0;\n\t\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\t\tconstantParams.setValue(params);\n\t\t\t\tdrawQuadWithShader(device, targ, shader2);\n\n\t\t\t\tif (i === steps - 1 && cpuSync) {\n\t\t\t\t\tsyncToCpu(device, targ, face);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsourceCubemap = nextCubemap;\n\t\t}\n\t}\n\n\toptions.sourceCubemap = sourceCubemap;\n\tvar sourceCubemapRgbm = null;\n\n\tif (!rgbmSource && options.filteredFixedRgbm) {\n\t\tnextCubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: TEXTURETYPE_RGBM,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false\n\t\t});\n\t\tnextCubemap.name = 'prefiltered-cube';\n\n\t\tfor (face = 0; face < 6; face++) {\n\t\t\ttarg = new RenderTarget({\n\t\t\t\tcolorBuffer: nextCubemap,\n\t\t\t\tface: face,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = face;\n\t\t\tparams[3] = 2;\n\t\t\tconstantTexSource.setValue(sourceCubemap);\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, targ, shader2);\n\t\t\tsyncToCpu(device, targ, face);\n\t\t}\n\n\t\tsourceCubemapRgbm = nextCubemap;\n\t}\n\n\tvar unblurredGloss = method === 0 ? 1 : 2048;\n\tvar startPass = method === 0 ? 0 : -1;\n\tcmapsList[startPass] = [];\n\n\tfor (i = 0; i < numMips; i++) {\n\t\tfor (pass = startPass; pass < cmapsList.length; pass++) {\n\t\t\tif (cmapsList[pass] != null) {\n\t\t\t\tcmapsList[pass][i] = new Texture(device, {\n\t\t\t\t\tcubemap: true,\n\t\t\t\t\ttype: pass < 2 ? sourceType : TEXTURETYPE_RGBM,\n\t\t\t\t\tformat: pass < 2 ? format : PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\t\tfixCubemapSeams: pass === 1 || pass === 3,\n\t\t\t\t\twidth: mipSize[i],\n\t\t\t\t\theight: mipSize[i],\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\tcmapsList[pass][i].name = 'prefiltered-cube';\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (pass = startPass; pass < cmapsList.length; pass++) {\n\t\tif (cmapsList[pass] != null) {\n\t\t\tif (pass > 1 && rgbmSource) {\n\t\t\t\tcmapsList[pass] = cmapsList[pass - 2];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (i = 0; i < numMips; i++) {\n\t\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\t\ttarg = new RenderTarget({\n\t\t\t\t\t\tcolorBuffer: cmapsList[pass][i],\n\t\t\t\t\t\tface: face,\n\t\t\t\t\t\tdepth: false\n\t\t\t\t\t});\n\t\t\t\t\tparams[0] = face;\n\t\t\t\t\tparams[1] = pass < 0 ? unblurredGloss : gloss[i];\n\t\t\t\t\tparams[2] = mipSize[i];\n\t\t\t\t\tparams[3] = rgbmSource ? 3 : pass;\n\t\t\t\t\tconstantTexSource.setValue(i === 0 ? sourceCubemap : method === 0 ? cmapsList[0][i - 1] : cmapsList[-1][i - 1]);\n\t\t\t\t\tconstantParams.setValue(params);\n\t\t\t\t\tdrawQuadWithShader(device, targ, shader);\n\t\t\t\t\tif (cpuSync) syncToCpu(device, targ, face);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toptions.filtered = cmapsList[0];\n\tvar mips;\n\n\tif (cpuSync && options.singleFilteredFixed) {\n\t\tmips = [sourceCubemap].concat(options.filteredFixed);\n\t\tcubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: sourceType,\n\t\t\tfixCubemapSeams: true,\n\t\t\tformat: format,\n\t\t\twidth: 128,\n\t\t\theight: 128,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'prefiltered-cube';\n\n\t\tfor (i = 0; i < mips.length; i++) cubemap._levels[i] = mips[i]._levels[0];\n\n\t\tcubemap.upload();\n\t\toptions.singleFilteredFixed = cubemap;\n\t}\n\n\tif (cpuSync && options.singleFilteredFixedRgbm && options.filteredFixedRgbm) {\n\t\tmips = [sourceCubemapRgbm].concat(options.filteredFixedRgbm);\n\t\tcubemap = new Texture(device, {\n\t\t\tcubemap: true,\n\t\t\ttype: TEXTURETYPE_RGBM,\n\t\t\tfixCubemapSeams: true,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: 128,\n\t\t\theight: 128,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'prefiltered-cube';\n\n\t\tfor (i = 0; i < mips.length; i++) {\n\t\t\tcubemap._levels[i] = mips[i]._levels[0];\n\t\t}\n\n\t\tcubemap.upload();\n\t\toptions.singleFilteredFixedRgbm = cubemap;\n\t}\n}\n\nfunction areaElement(x, y) {\n\treturn Math.atan2(x * y, Math.sqrt(x * x + y * y + 1));\n}\n\nfunction texelCoordSolidAngle(u, v, size) {\n\tvar _u = 2.0 * (u + 0.5) / size - 1.0;\n\n\tvar _v = 2.0 * (v + 0.5) / size - 1.0;\n\n\t_u *= 1.0 - 1.0 / size;\n\t_v *= 1.0 - 1.0 / size;\n\tvar invResolution = 1.0 / size;\n\tvar x0 = _u - invResolution;\n\tvar y0 = _v - invResolution;\n\tvar x1 = _u + invResolution;\n\tvar y1 = _v + invResolution;\n\tvar solidAngle = areaElement(x0, y0) - areaElement(x0, y1) - areaElement(x1, y0) + areaElement(x1, y1);\n\n\tif (u === 0 && v === 0 || u === size - 1 && v === 0 || u === 0 && v === size - 1 || u === size - 1 && v === size - 1) {\n\t\tsolidAngle /= 3;\n\t} else if (u === 0 || v === 0 || u === size - 1 || v === size - 1) {\n\t\tsolidAngle *= 0.5;\n\t}\n\n\treturn solidAngle;\n}\n\nfunction shFromCubemap(device, source, dontFlipX) {\n\tvar face;\n\tvar cubeSize = source.width;\n\tvar x, y;\n\n\tif (source.format !== PIXELFORMAT_R8_G8_B8_A8) {\n\t\treturn;\n\t}\n\n\tif (!source._levels[0]) {\n\t\treturn;\n\t}\n\n\tif (!source._levels[0][0].length) {\n\t\tif (source._levels[0][0] instanceof HTMLImageElement) {\n\t\t\tvar gl = device.gl;\n\t\t\tvar shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.fullscreenQuadPS, \"fsQuadSimple\");\n\t\t\tvar constantTexSource = device.scope.resolve(\"source\");\n\n\t\t\tfor (face = 0; face < 6; face++) {\n\t\t\t\tvar img = source._levels[0][face];\n\t\t\t\tvar tex = new Texture(device, {\n\t\t\t\t\tcubemap: false,\n\t\t\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\t\t\tformat: source.format,\n\t\t\t\t\twidth: cubeSize,\n\t\t\t\t\theight: cubeSize,\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\ttex.name = 'prefiltered-cube';\n\t\t\t\ttex._levels[0] = img;\n\t\t\t\ttex.upload();\n\t\t\t\tvar tex2 = new Texture(device, {\n\t\t\t\t\tcubemap: false,\n\t\t\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\t\t\tformat: source.format,\n\t\t\t\t\twidth: cubeSize,\n\t\t\t\t\theight: cubeSize,\n\t\t\t\t\tmipmaps: false\n\t\t\t\t});\n\t\t\t\ttex2.name = 'prefiltered-cube';\n\t\t\t\tvar targ = new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex2,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t\tconstantTexSource.setValue(tex);\n\t\t\t\tdrawQuadWithShader(device, targ, shader);\n\t\t\t\tvar pixels = new Uint8Array(cubeSize * cubeSize * 4);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, targ._glFrameBuffer);\n\t\t\t\tgl.readPixels(0, 0, tex.width, tex.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\t\t\t\tsource._levels[0][face] = pixels;\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tvar dirs = [];\n\n\tfor (y = 0; y < cubeSize; y++) {\n\t\tfor (x = 0; x < cubeSize; x++) {\n\t\t\tvar u = x / (cubeSize - 1) * 2 - 1;\n\t\t\tvar v = y / (cubeSize - 1) * 2 - 1;\n\t\t\tdirs[y * cubeSize + x] = new Vec3(u, v, 1.0).normalize();\n\t\t}\n\t}\n\n\tvar sh = new Float32Array(9 * 3);\n\tvar coef1 = 0;\n\tvar coef2 = 1 * 3;\n\tvar coef3 = 2 * 3;\n\tvar coef4 = 3 * 3;\n\tvar coef5 = 4 * 3;\n\tvar coef6 = 5 * 3;\n\tvar coef7 = 6 * 3;\n\tvar coef8 = 7 * 3;\n\tvar coef9 = 8 * 3;\n\tvar nx = 0;\n\tvar px = 1;\n\tvar ny = 2;\n\tvar py = 3;\n\tvar nz = 4;\n\tvar pz = 5;\n\tvar addr, c, a, value, weight, dir, dx, dy, dz;\n\tvar weight1, weight2, weight3, weight4, weight5;\n\tvar accum = 0;\n\n\tfor (face = 0; face < 6; face++) {\n\t\tfor (y = 0; y < cubeSize; y++) {\n\t\t\tfor (x = 0; x < cubeSize; x++) {\n\t\t\t\taddr = y * cubeSize + x;\n\t\t\t\tweight = texelCoordSolidAngle(x, y, cubeSize);\n\t\t\t\tweight1 = weight * 4 / 17;\n\t\t\t\tweight2 = weight * 8 / 17;\n\t\t\t\tweight3 = weight * 15 / 17;\n\t\t\t\tweight4 = weight * 5 / 68;\n\t\t\t\tweight5 = weight * 15 / 68;\n\t\t\t\tdir = dirs[addr];\n\n\t\t\t\tif (face == nx) {\n\t\t\t\t\tdx = dir.z;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = -dir.x;\n\t\t\t\t} else if (face === px) {\n\t\t\t\t\tdx = -dir.z;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = dir.x;\n\t\t\t\t} else if (face === ny) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = dir.z;\n\t\t\t\t\tdz = dir.y;\n\t\t\t\t} else if (face === py) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = -dir.z;\n\t\t\t\t\tdz = -dir.y;\n\t\t\t\t} else if (face === nz) {\n\t\t\t\t\tdx = dir.x;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = dir.z;\n\t\t\t\t} else if (face === pz) {\n\t\t\t\t\tdx = -dir.x;\n\t\t\t\t\tdy = -dir.y;\n\t\t\t\t\tdz = -dir.z;\n\t\t\t\t}\n\n\t\t\t\tif (!dontFlipX) dx = -dx;\n\t\t\t\ta = source._levels[0][face][addr * 4 + 3] / 255.0;\n\n\t\t\t\tfor (c = 0; c < 3; c++) {\n\t\t\t\t\tvalue = source._levels[0][face][addr * 4 + c] / 255.0;\n\n\t\t\t\t\tif (source.type === TEXTURETYPE_RGBM) {\n\t\t\t\t\t\tvalue *= a * 8.0;\n\t\t\t\t\t\tvalue *= value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = Math.pow(value, 2.2);\n\t\t\t\t\t}\n\n\t\t\t\t\tsh[coef1 + c] += value * weight1;\n\t\t\t\t\tsh[coef2 + c] += value * weight2 * dx;\n\t\t\t\t\tsh[coef3 + c] += value * weight2 * dy;\n\t\t\t\t\tsh[coef4 + c] += value * weight2 * dz;\n\t\t\t\t\tsh[coef5 + c] += value * weight3 * dx * dz;\n\t\t\t\t\tsh[coef6 + c] += value * weight3 * dz * dy;\n\t\t\t\t\tsh[coef7 + c] += value * weight3 * dy * dx;\n\t\t\t\t\tsh[coef8 + c] += value * weight4 * (3.0 * dz * dz - 1.0);\n\t\t\t\t\tsh[coef9 + c] += value * weight5 * (dx * dx - dy * dy);\n\t\t\t\t\taccum += weight;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (c = 0; c < sh.length; c++) {\n\t\tsh[c] *= 4 * Math.PI / accum;\n\t}\n\n\treturn sh;\n}\n\nfunction getCoding(texture) {\n\tswitch (texture.type) {\n\t\tcase TEXTURETYPE_RGBM:\n\t\t\treturn \"RGBM\";\n\n\t\tcase TEXTURETYPE_RGBE:\n\t\t\treturn \"RGBE\";\n\n\t\tdefault:\n\t\t\tswitch (texture.format) {\n\t\t\t\tcase PIXELFORMAT_RGB16F:\n\t\t\t\tcase PIXELFORMAT_RGB32F:\n\t\t\t\tcase PIXELFORMAT_RGBA16F:\n\t\t\t\tcase PIXELFORMAT_RGBA32F:\n\t\t\t\t\treturn \"Linear\";\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"Gamma\";\n\t\t\t}\n\n\t}\n}\n\nfunction getProjectionName(projection) {\n\tif (projection === TEXTUREPROJECTION_NONE) {\n\t\tprojection = TEXTUREPROJECTION_EQUIRECT;\n\t}\n\n\tswitch (projection) {\n\t\tcase TEXTUREPROJECTION_CUBE:\n\t\t\treturn \"Cubemap\";\n\n\t\tcase TEXTUREPROJECTION_EQUIRECT:\n\t\t\treturn \"Equirect\";\n\n\t\tcase TEXTUREPROJECTION_OCTAHEDRAL:\n\t\t\treturn \"Octahedral\";\n\t}\n}\n\nfunction reprojectTexture(source, target, options = {}) {\n\tif (source instanceof GraphicsDevice) {\n\t\tsource = arguments[1];\n\t\ttarget = arguments[2];\n\t\toptions = {\n\t\t\tspecularPower: arguments[3] === undefined ? 1 : arguments[3],\n\t\t\tnumSamples: arguments[4] === undefined ? 1024 : arguments[4]\n\t\t};\n\t}\n\n\tconst device = source.device;\n\tconst specularPower = options.hasOwnProperty('specularPower') ? options.specularPower : 1;\n\tconst numSamples = options.hasOwnProperty('numSamples') ? options.numSamples : 1024;\n\tconst face = options.hasOwnProperty('face') ? options.face : null;\n\tconst processFunc = specularPower === 1 ? 'reproject' : 'prefilter';\n\tconst decodeFunc = \"decode\" + getCoding(source);\n\tconst encodeFunc = \"encode\" + getCoding(target);\n\tconst sourceFunc = \"sample\" + getProjectionName(source.projection);\n\tconst targetFunc = \"getDirection\" + getProjectionName(target.projection);\n\tconst shader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, \"#define PROCESS_FUNC \" + processFunc + \"\\n\" + \"#define DECODE_FUNC \" + decodeFunc + \"\\n\" + \"#define ENCODE_FUNC \" + encodeFunc + \"\\n\" + \"#define SOURCE_FUNC \" + sourceFunc + \"\\n\" + \"#define TARGET_FUNC \" + targetFunc + \"\\n\" + \"#define NUM_SAMPLES \" + numSamples + \"\\n\" + \"#define NUM_SAMPLES_SQRT \" + Math.round(Math.sqrt(numSamples)).toFixed(1) + \"\\n\\n\" + shaderChunks.reprojectPS, processFunc + decodeFunc + encodeFunc + sourceFunc + targetFunc, null, device.webgl2 ? \"\" : \"#extension GL_OES_standard_derivatives: enable\\n\");\n\tconst constantSource = device.scope.resolve(source.cubemap ? \"sourceCube\" : \"sourceTex\");\n\tconstantSource.setValue(source);\n\tconst constantParams = device.scope.resolve(\"params\");\n\tconst params = [0, specularPower, 1.0 - (source.fixCubemapSeams ? 1.0 / source.width : 0.0), 1.0 - (target.fixCubemapSeams ? 1.0 / target.width : 0.0)];\n\n\tfor (let f = 0; f < (target.cubemap ? 6 : 1); f++) {\n\t\tif (face === null || f === face) {\n\t\t\tconst renderTarget = new RenderTarget({\n\t\t\t\tcolorBuffer: target,\n\t\t\t\tface: f,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tparams[0] = f;\n\t\t\tconstantParams.setValue(params);\n\t\t\tdrawQuadWithShader(device, renderTarget, shader);\n\t\t\trenderTarget.destroy();\n\t\t}\n\t}\n}\n\nclass IndexBuffer {\n\tconstructor(graphicsDevice, format, numIndices, usage = BUFFER_STATIC, initialData) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.format = format;\n\t\tthis.numIndices = numIndices;\n\t\tthis.usage = usage;\n\t\tconst gl = this.device.gl;\n\t\tlet bytesPerIndex;\n\n\t\tif (format === INDEXFORMAT_UINT8) {\n\t\t\tbytesPerIndex = 1;\n\t\t\tthis.glFormat = gl.UNSIGNED_BYTE;\n\t\t} else if (format === INDEXFORMAT_UINT16) {\n\t\t\tbytesPerIndex = 2;\n\t\t\tthis.glFormat = gl.UNSIGNED_SHORT;\n\t\t} else if (format === INDEXFORMAT_UINT32) {\n\t\t\tbytesPerIndex = 4;\n\t\t\tthis.glFormat = gl.UNSIGNED_INT;\n\t\t}\n\n\t\tthis.bytesPerIndex = bytesPerIndex;\n\t\tthis.numBytes = this.numIndices * bytesPerIndex;\n\n\t\tif (initialData) {\n\t\t\tthis.setData(initialData);\n\t\t} else {\n\t\t\tthis.storage = new ArrayBuffer(this.numBytes);\n\t\t}\n\n\t\tgraphicsDevice._vram.ib += this.numBytes;\n\t\tthis.device.buffers.push(this);\n\t}\n\n\tdestroy() {\n\t\tconst device = this.device;\n\t\tconst idx = device.buffers.indexOf(this);\n\n\t\tif (idx !== -1) {\n\t\t\tdevice.buffers.splice(idx, 1);\n\t\t}\n\n\t\tif (this.bufferId) {\n\t\t\tconst gl = this.device.gl;\n\t\t\tgl.deleteBuffer(this.bufferId);\n\t\t\tthis.device._vram.ib -= this.storage.byteLength;\n\t\t\tthis.bufferId = null;\n\n\t\t\tif (this.device.indexBuffer === this) {\n\t\t\t\tthis.device.indexBuffer = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tloseContext() {\n\t\tthis.bufferId = undefined;\n\t}\n\n\tgetFormat() {\n\t\treturn this.format;\n\t}\n\n\tgetNumIndices() {\n\t\treturn this.numIndices;\n\t}\n\n\tlock() {\n\t\treturn this.storage;\n\t}\n\n\tunlock() {\n\t\tconst gl = this.device.gl;\n\n\t\tif (!this.bufferId) {\n\t\t\tthis.bufferId = gl.createBuffer();\n\t\t}\n\n\t\tlet glUsage;\n\n\t\tswitch (this.usage) {\n\t\t\tcase BUFFER_STATIC:\n\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_DYNAMIC:\n\t\t\t\tglUsage = gl.DYNAMIC_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_STREAM:\n\t\t\t\tglUsage = gl.STREAM_DRAW;\n\t\t\t\tbreak;\n\n\t\t\tcase BUFFER_GPUDYNAMIC:\n\t\t\t\tif (this.device.webgl2) {\n\t\t\t\t\tglUsage = gl.DYNAMIC_COPY;\n\t\t\t\t} else {\n\t\t\t\t\tglUsage = gl.STATIC_DRAW;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.bufferId);\n\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.storage, glUsage);\n\t}\n\n\tsetData(data) {\n\t\tif (data.byteLength !== this.numBytes) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.storage = data;\n\t\tthis.unlock();\n\t\treturn true;\n\t}\n\n\t_lockTypedArray() {\n\t\tconst lock = this.lock();\n\t\tconst indices = this.format === INDEXFORMAT_UINT32 ? new Uint32Array(lock) : this.format === INDEXFORMAT_UINT16 ? new Uint16Array(lock) : new Uint8Array(lock);\n\t\treturn indices;\n\t}\n\n\twriteData(data, count) {\n\t\tconst indices = this._lockTypedArray();\n\n\t\tif (data.length > count) {\n\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\tdata = data.subarray(0, count);\n\t\t\t\tindices.set(data);\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < count; i++) indices[i] = data[i];\n\t\t\t}\n\t\t} else {\n\t\t\tindices.set(data);\n\t\t}\n\n\t\tthis.unlock();\n\t}\n\n\treadData(data) {\n\t\tconst indices = this._lockTypedArray();\n\n\t\tconst count = this.numIndices;\n\n\t\tif (ArrayBuffer.isView(data)) {\n\t\t\tdata.set(indices);\n\t\t} else {\n\t\t\tdata.length = 0;\n\n\t\t\tfor (let i = 0; i < count; i++) data[i] = indices[i];\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nconst primitive = {\n\ttype: PRIMITIVE_TRISTRIP,\n\tbase: 0,\n\tcount: 4,\n\tindexed: false\n};\n\nclass PostEffect$1 {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.shader = null;\n\t\tthis.depthMap = null;\n\t\tthis.vertexBuffer = createFullscreenQuad(graphicsDevice);\n\t\tthis.needsDepthBuffer = false;\n\t}\n\n\trender(inputTarget, outputTarget, rect) {}\n\n}\n\nfunction createFullscreenQuad(device) {\n\tconst vertexFormat = new VertexFormat(device, [{\n\t\tsemantic: SEMANTIC_POSITION,\n\t\tcomponents: 2,\n\t\ttype: TYPE_FLOAT32\n\t}]);\n\tconst vertexBuffer = new VertexBuffer(device, vertexFormat, 4);\n\tconst iterator = new VertexIterator(vertexBuffer);\n\titerator.element[SEMANTIC_POSITION].set(-1.0, -1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(1.0, -1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(-1.0, 1.0);\n\titerator.next();\n\titerator.element[SEMANTIC_POSITION].set(1.0, 1.0);\n\titerator.end();\n\treturn vertexBuffer;\n}\n\nfunction drawFullscreenQuad(device, target, vertexBuffer, shader, rect) {\n\tconst oldRt = device.getRenderTarget();\n\tdevice.setRenderTarget(target);\n\tdevice.updateBegin();\n\tlet w = target ? target.width : device.width;\n\tlet h = target ? target.height : device.height;\n\tlet x = 0;\n\tlet y = 0;\n\n\tif (rect) {\n\t\tx = rect.x * w;\n\t\ty = rect.y * h;\n\t\tw *= rect.z;\n\t\th *= rect.w;\n\t}\n\n\tconst oldVx = device.vx;\n\tconst oldVy = device.vy;\n\tconst oldVw = device.vw;\n\tconst oldVh = device.vh;\n\tdevice.setViewport(x, y, w, h);\n\tconst oldSx = device.sx;\n\tconst oldSy = device.sy;\n\tconst oldSw = device.sw;\n\tconst oldSh = device.sh;\n\tdevice.setScissor(x, y, w, h);\n\tconst oldBlending = device.getBlending();\n\tconst oldDepthTest = device.getDepthTest();\n\tconst oldDepthWrite = device.getDepthWrite();\n\tconst oldCullMode = device.getCullMode();\n\tconst oldWR = device.writeRed;\n\tconst oldWG = device.writeGreen;\n\tconst oldWB = device.writeBlue;\n\tconst oldWA = device.writeAlpha;\n\tdevice.setBlending(false);\n\tdevice.setDepthTest(false);\n\tdevice.setDepthWrite(false);\n\tdevice.setCullMode(CULLFACE_NONE);\n\tdevice.setColorWrite(true, true, true, true);\n\tdevice.setVertexBuffer(vertexBuffer, 0);\n\tdevice.setShader(shader);\n\tdevice.draw(primitive);\n\tdevice.setBlending(oldBlending);\n\tdevice.setDepthTest(oldDepthTest);\n\tdevice.setDepthWrite(oldDepthWrite);\n\tdevice.setCullMode(oldCullMode);\n\tdevice.setColorWrite(oldWR, oldWG, oldWB, oldWA);\n\tdevice.updateEnd();\n\tdevice.setRenderTarget(oldRt);\n\tdevice.updateBegin();\n\tdevice.setViewport(oldVx, oldVy, oldVw, oldVh);\n\tdevice.setScissor(oldSx, oldSy, oldSw, oldSh);\n}\n\nclass TransformFeedback {\n\tconstructor(inputBuffer, usage = BUFFER_GPUDYNAMIC) {\n\t\tthis.device = inputBuffer.device;\n\t\tconst gl = this.device.gl;\n\t\tthis._inputBuffer = inputBuffer;\n\n\t\tif (usage === BUFFER_GPUDYNAMIC && inputBuffer.usage !== usage) {\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, inputBuffer.bufferId);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, inputBuffer.storage, gl.DYNAMIC_COPY);\n\t\t}\n\n\t\tthis._outputBuffer = new VertexBuffer(inputBuffer.device, inputBuffer.format, inputBuffer.numVertices, usage, inputBuffer.storage);\n\t}\n\n\tstatic createShader(graphicsDevice, vsCode, name) {\n\t\treturn createShaderFromCode(graphicsDevice, vsCode, null, name, true);\n\t}\n\n\tdestroy() {\n\t\tthis._outputBuffer.destroy();\n\t}\n\n\tprocess(shader, swap = true) {\n\t\tconst device = this.device;\n\t\tconst oldRt = device.getRenderTarget();\n\t\tdevice.setRenderTarget(null);\n\t\tdevice.updateBegin();\n\t\tdevice.setVertexBuffer(this._inputBuffer, 0);\n\t\tdevice.setRaster(false);\n\t\tdevice.setTransformFeedbackBuffer(this._outputBuffer);\n\t\tdevice.setShader(shader);\n\t\tdevice.draw({\n\t\t\ttype: PRIMITIVE_POINTS,\n\t\t\tbase: 0,\n\t\t\tcount: this._inputBuffer.numVertices,\n\t\t\tindexed: false\n\t\t});\n\t\tdevice.setTransformFeedbackBuffer(null);\n\t\tdevice.setRaster(true);\n\t\tdevice.updateEnd();\n\t\tdevice.setRenderTarget(oldRt);\n\n\t\tif (swap) {\n\t\t\tlet tmp = this._inputBuffer.bufferId;\n\t\t\tthis._inputBuffer.bufferId = this._outputBuffer.bufferId;\n\t\t\tthis._outputBuffer.bufferId = tmp;\n\t\t\ttmp = this._inputBuffer._vao;\n\t\t\tthis._inputBuffer._vao = this._outputBuffer._vao;\n\t\t\tthis._outputBuffer._vao = tmp;\n\t\t}\n\t}\n\n\tget inputBuffer() {\n\t\treturn this._inputBuffer;\n\t}\n\n\tget outputBuffer() {\n\t\treturn this._outputBuffer;\n\t}\n\n}\n\nclass RefCountedObject {\n\tconstructor() {\n\t\tthis._refCount = 0;\n\t}\n\n\tincRefCount() {\n\t\tthis._refCount++;\n\t}\n\n\tdecRefCount() {\n\t\tthis._refCount--;\n\t}\n\n\tgetRefCount() {\n\t\treturn this._refCount;\n\t}\n\n}\n\nvar id = 0;\n\nclass GeometryData {\n\tconstructor() {\n\t\tthis.initDefaults();\n\t}\n\n\tinitDefaults() {\n\t\tthis.recreate = false;\n\t\tthis.verticesUsage = BUFFER_STATIC;\n\t\tthis.indicesUsage = BUFFER_STATIC;\n\t\tthis.maxVertices = 0;\n\t\tthis.maxIndices = 0;\n\t\tthis.vertexCount = 0;\n\t\tthis.indexCount = 0;\n\t\tthis.vertexStreamsUpdated = false;\n\t\tthis.indexStreamUpdated = false;\n\t\tthis.vertexStreamDictionary = {};\n\t\tthis.indices = null;\n\t}\n\n\t_validateVertexCount(count, semantic) {}\n\n\t_changeVertexCount(count, semantic) {\n\t\tif (!this.vertexCount) {\n\t\t\tthis.vertexCount = count;\n\t\t} else {\n\t\t\tthis._validateVertexCount(count, semantic);\n\t\t}\n\t}\n\n}\n\nGeometryData.DEFAULT_COMPONENTS_POSITION = 3;\nGeometryData.DEFAULT_COMPONENTS_NORMAL = 3;\nGeometryData.DEFAULT_COMPONENTS_UV = 2;\nGeometryData.DEFAULT_COMPONENTS_COLORS = 4;\n\nclass GeometryVertexStream {\n\tconstructor(data, componentCount, dataType, dataTypeNormalize) {\n\t\tthis.data = data;\n\t\tthis.componentCount = componentCount;\n\t\tthis.dataType = dataType;\n\t\tthis.dataTypeNormalize = dataTypeNormalize;\n\t}\n\n}\n\nclass Mesh extends RefCountedObject {\n\tconstructor(graphicsDevice) {\n\t\tsuper();\n\t\tthis.id = id++;\n\t\tthis.device = graphicsDevice || getApplication().graphicsDevice;\n\t\tthis.vertexBuffer = null;\n\t\tthis.indexBuffer = [null];\n\t\tthis.primitive = [{\n\t\t\ttype: 0,\n\t\t\tbase: 0,\n\t\t\tcount: 0\n\t\t}];\n\t\tthis.skin = null;\n\t\tthis.morph = null;\n\t\tthis._geometryData = null;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis.boneAabb = null;\n\t}\n\n\tget aabb() {\n\t\treturn this._aabb;\n\t}\n\n\tset aabb(aabb) {\n\t\tthis._aabb = aabb;\n\t}\n\n\tdestroy() {\n\t\tif (this.vertexBuffer) {\n\t\t\tthis.vertexBuffer.destroy();\n\t\t\tthis.vertexBuffer = null;\n\t\t}\n\n\t\tfor (let j = 0; j < this.indexBuffer.length; j++) {\n\t\t\tthis._destroyIndexBuffer(j);\n\t\t}\n\n\t\tthis.indexBuffer.length = 0;\n\t\tthis._geometryData = null;\n\t}\n\n\t_destroyIndexBuffer(index) {\n\t\tif (this.indexBuffer[index]) {\n\t\t\tthis.indexBuffer[index].destroy();\n\t\t\tthis.indexBuffer[index] = null;\n\t\t}\n\t}\n\n\t_initBoneAabbs(morphTargets) {\n\t\tthis.boneAabb = [];\n\t\tthis.boneUsed = [];\n\t\tvar numVerts = this.vertexBuffer.numVertices;\n\t\tvar i, j, k, l;\n\t\tvar x, y, z;\n\t\tvar bMax, bMin;\n\t\tvar boneMin = [];\n\t\tvar boneMax = [];\n\t\tvar boneUsed = this.boneUsed;\n\t\tvar numBones = this.skin.boneNames.length;\n\t\tvar aabb;\n\t\tvar boneWeight, boneIndex;\n\t\tvar minMorphX, minMorphY, minMorphZ;\n\t\tvar maxMorphX, maxMorphY, maxMorphZ;\n\t\tvar dx, dy, dz;\n\t\tvar target;\n\n\t\tfor (i = 0; i < numBones; i++) {\n\t\t\tboneMin[i] = new Vec3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n\t\t\tboneMax[i] = new Vec3(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n\t\t}\n\n\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\tvar posElement = iterator.element[SEMANTIC_POSITION];\n\t\tvar weightsElement = iterator.element[SEMANTIC_BLENDWEIGHT];\n\t\tvar indicesElement = iterator.element[SEMANTIC_BLENDINDICES];\n\n\t\tfor (j = 0; j < numVerts; j++) {\n\t\t\tfor (k = 0; k < 4; k++) {\n\t\t\t\tboneWeight = weightsElement.array[weightsElement.index + k];\n\n\t\t\t\tif (boneWeight > 0) {\n\t\t\t\t\tboneIndex = indicesElement.array[indicesElement.index + k];\n\t\t\t\t\tboneUsed[boneIndex] = true;\n\t\t\t\t\tx = posElement.array[posElement.index];\n\t\t\t\t\ty = posElement.array[posElement.index + 1];\n\t\t\t\t\tz = posElement.array[posElement.index + 2];\n\t\t\t\t\tbMax = boneMax[boneIndex];\n\t\t\t\t\tbMin = boneMin[boneIndex];\n\t\t\t\t\tif (bMin.x > x) bMin.x = x;\n\t\t\t\t\tif (bMin.y > y) bMin.y = y;\n\t\t\t\t\tif (bMin.z > z) bMin.z = z;\n\t\t\t\t\tif (bMax.x < x) bMax.x = x;\n\t\t\t\t\tif (bMax.y < y) bMax.y = y;\n\t\t\t\t\tif (bMax.z < z) bMax.z = z;\n\n\t\t\t\t\tif (morphTargets) {\n\t\t\t\t\t\tminMorphX = maxMorphX = x;\n\t\t\t\t\t\tminMorphY = maxMorphY = y;\n\t\t\t\t\t\tminMorphZ = maxMorphZ = z;\n\n\t\t\t\t\t\tfor (l = 0; l < morphTargets.length; l++) {\n\t\t\t\t\t\t\ttarget = morphTargets[l];\n\t\t\t\t\t\t\tdx = target.deltaPositions[j * 3];\n\t\t\t\t\t\t\tdy = target.deltaPositions[j * 3 + 1];\n\t\t\t\t\t\t\tdz = target.deltaPositions[j * 3 + 2];\n\n\t\t\t\t\t\t\tif (dx < 0) {\n\t\t\t\t\t\t\t\tminMorphX += dx;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphX += dx;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (dy < 0) {\n\t\t\t\t\t\t\t\tminMorphY += dy;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphY += dy;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (dz < 0) {\n\t\t\t\t\t\t\t\tminMorphZ += dz;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxMorphZ += dz;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (bMin.x > minMorphX) bMin.x = minMorphX;\n\t\t\t\t\t\tif (bMin.y > minMorphY) bMin.y = minMorphY;\n\t\t\t\t\t\tif (bMin.z > minMorphZ) bMin.z = minMorphZ;\n\t\t\t\t\t\tif (bMax.x < maxMorphX) bMax.x = maxMorphX;\n\t\t\t\t\t\tif (bMax.y < maxMorphY) bMax.y = maxMorphY;\n\t\t\t\t\t\tif (bMax.z < maxMorphZ) bMax.z = maxMorphZ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\titerator.next();\n\t\t}\n\n\t\tfor (i = 0; i < numBones; i++) {\n\t\t\taabb = new BoundingBox();\n\t\t\taabb.setMinMax(boneMin[i], boneMax[i]);\n\t\t\tthis.boneAabb.push(aabb);\n\t\t}\n\t}\n\n\t_initGeometryData() {\n\t\tif (!this._geometryData) {\n\t\t\tthis._geometryData = new GeometryData();\n\n\t\t\tif (this.vertexBuffer) {\n\t\t\t\tthis._geometryData.vertexCount = this.vertexBuffer.numVertices;\n\t\t\t\tthis._geometryData.maxVertices = this.vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tthis._geometryData.indexCount = this.indexBuffer[0].numIndices;\n\t\t\t\tthis._geometryData.maxIndices = this.indexBuffer[0].numIndices;\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(verticesDynamic, indicesDynamic, maxVertices = 0, maxIndices = 0) {\n\t\tthis._initGeometryData();\n\n\t\tthis._geometryData.initDefaults();\n\n\t\tthis._geometryData.recreate = true;\n\t\tthis._geometryData.maxVertices = maxVertices;\n\t\tthis._geometryData.maxIndices = maxIndices;\n\t\tthis._geometryData.verticesUsage = verticesDynamic ? BUFFER_STATIC : BUFFER_DYNAMIC;\n\t\tthis._geometryData.indicesUsage = indicesDynamic ? BUFFER_STATIC : BUFFER_DYNAMIC;\n\t}\n\n\tsetVertexStream(semantic, data, componentCount, numVertices, dataType = TYPE_FLOAT32, dataTypeNormalize = false) {\n\t\tthis._initGeometryData();\n\n\t\tvar vertexCount = numVertices || data.length / componentCount;\n\n\t\tthis._geometryData._changeVertexCount(vertexCount, semantic);\n\n\t\tthis._geometryData.vertexStreamsUpdated = true;\n\t\tthis._geometryData.vertexStreamDictionary[semantic] = new GeometryVertexStream(data, componentCount, dataType, dataTypeNormalize);\n\t}\n\n\tgetVertexStream(semantic, data) {\n\t\tvar count = 0;\n\t\tvar done = false;\n\n\t\tif (this._geometryData) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\n\t\t\tif (stream) {\n\t\t\t\tdone = true;\n\t\t\t\tcount = this._geometryData.vertexCount;\n\n\t\t\t\tif (ArrayBuffer.isView(data)) {\n\t\t\t\t\tdata.set(stream.data);\n\t\t\t\t} else {\n\t\t\t\t\tdata.length = 0;\n\t\t\t\t\tdata.push(stream.data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!done) {\n\t\t\tif (this.vertexBuffer) {\n\t\t\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\t\t\tcount = iterator.readData(semantic, data);\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tsetPositions(positions, componentCount = GeometryData.DEFAULT_COMPONENTS_POSITION, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_POSITION, positions, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetNormals(normals, componentCount = GeometryData.DEFAULT_COMPONENTS_NORMAL, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_NORMAL, normals, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetUvs(channel, uvs, componentCount = GeometryData.DEFAULT_COMPONENTS_UV, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_TEXCOORD + channel, uvs, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetColors(colors, componentCount = GeometryData.DEFAULT_COMPONENTS_COLORS, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_COLOR, colors, componentCount, numVertices, TYPE_FLOAT32, false);\n\t}\n\n\tsetColors32(colors, numVertices) {\n\t\tthis.setVertexStream(SEMANTIC_COLOR, colors, GeometryData.DEFAULT_COMPONENTS_COLORS, numVertices, TYPE_UINT8, true);\n\t}\n\n\tsetIndices(indices, numIndices) {\n\t\tthis._initGeometryData();\n\n\t\tthis._geometryData.indexStreamUpdated = true;\n\t\tthis._geometryData.indices = indices;\n\t\tthis._geometryData.indexCount = numIndices || indices.length;\n\t}\n\n\tgetPositions(positions) {\n\t\treturn this.getVertexStream(SEMANTIC_POSITION, positions);\n\t}\n\n\tgetNormals(normals) {\n\t\treturn this.getVertexStream(SEMANTIC_NORMAL, normals);\n\t}\n\n\tgetUvs(channel, uvs) {\n\t\treturn this.getVertexStream(SEMANTIC_TEXCOORD + channel, uvs);\n\t}\n\n\tgetColors(colors) {\n\t\treturn this.getVertexStream(SEMANTIC_COLOR, colors);\n\t}\n\n\tgetIndices(indices) {\n\t\tvar count = 0;\n\n\t\tif (this._geometryData && this._geometryData.indices) {\n\t\t\tvar streamIndices = this._geometryData.indices;\n\t\t\tcount = this._geometryData.indexCount;\n\n\t\t\tif (ArrayBuffer.isView(indices)) {\n\t\t\t\tindices.set(streamIndices);\n\t\t\t} else {\n\t\t\t\tindices.length = 0;\n\t\t\t\tindices.push(streamIndices);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tvar indexBuffer = this.indexBuffer[0];\n\t\t\t\tcount = indexBuffer.readData(indices);\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tupdate(primitiveType = PRIMITIVE_TRIANGLES, updateBoundingBox = true) {\n\t\tif (this._geometryData) {\n\t\t\tif (updateBoundingBox) {\n\t\t\t\tvar stream = this._geometryData.vertexStreamDictionary[SEMANTIC_POSITION];\n\n\t\t\t\tif (stream) {\n\t\t\t\t\tif (stream.componentCount === 3) {\n\t\t\t\t\t\tthis._aabb.compute(stream.data, this._geometryData.vertexCount);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar destroyVB = this._geometryData.recreate;\n\n\t\t\tif (this._geometryData.vertexCount > this._geometryData.maxVertices) {\n\t\t\t\tdestroyVB = true;\n\t\t\t\tthis._geometryData.maxVertices = this._geometryData.vertexCount;\n\t\t\t}\n\n\t\t\tif (destroyVB) {\n\t\t\t\tif (this.vertexBuffer) {\n\t\t\t\t\tthis.vertexBuffer.destroy();\n\t\t\t\t\tthis.vertexBuffer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar destroyIB = this._geometryData.recreate;\n\n\t\t\tif (this._geometryData.indexCount > this._geometryData.maxIndices) {\n\t\t\t\tdestroyIB = true;\n\t\t\t\tthis._geometryData.maxIndices = this._geometryData.indexCount;\n\t\t\t}\n\n\t\t\tif (destroyIB) {\n\t\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\t\tthis.indexBuffer[0].destroy();\n\t\t\t\t\tthis.indexBuffer[0] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._geometryData.vertexStreamsUpdated) {\n\t\t\t\tthis._updateVertexBuffer();\n\t\t\t}\n\n\t\t\tif (this._geometryData.indexStreamUpdated) {\n\t\t\t\tthis._updateIndexBuffer();\n\t\t\t}\n\n\t\t\tthis.primitive[0].type = primitiveType;\n\n\t\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\t\tif (this._geometryData.indexStreamUpdated) {\n\t\t\t\t\tthis.primitive[0].count = this._geometryData.indexCount;\n\t\t\t\t\tthis.primitive[0].indexed = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._geometryData.vertexStreamsUpdated) {\n\t\t\t\t\tthis.primitive[0].count = this._geometryData.vertexCount;\n\t\t\t\t\tthis.primitive[0].indexed = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._geometryData.vertexCount = 0;\n\t\t\tthis._geometryData.indexCount = 0;\n\t\t\tthis._geometryData.vertexStreamsUpdated = false;\n\t\t\tthis._geometryData.indexStreamUpdated = false;\n\t\t\tthis._geometryData.recreate = false;\n\t\t\tthis.updateRenderStates();\n\t\t}\n\t}\n\n\t_buildVertexFormat(vertexCount) {\n\t\tvar vertexDesc = [];\n\n\t\tfor (var semantic in this._geometryData.vertexStreamDictionary) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\t\t\tvertexDesc.push({\n\t\t\t\tsemantic: semantic,\n\t\t\t\tcomponents: stream.componentCount,\n\t\t\t\ttype: stream.dataType,\n\t\t\t\tnormalize: stream.dataTypeNormalize\n\t\t\t});\n\t\t}\n\n\t\treturn new VertexFormat(this.device, vertexDesc, vertexCount);\n\t}\n\n\t_updateVertexBuffer() {\n\t\tif (!this.vertexBuffer) {\n\t\t\tvar allocateVertexCount = this._geometryData.maxVertices;\n\n\t\t\tvar format = this._buildVertexFormat(allocateVertexCount);\n\n\t\t\tthis.vertexBuffer = new VertexBuffer(this.device, format, allocateVertexCount, this._geometryData.verticesUsage);\n\t\t}\n\n\t\tvar iterator = new VertexIterator(this.vertexBuffer);\n\t\tvar numVertices = this._geometryData.vertexCount;\n\n\t\tfor (var semantic in this._geometryData.vertexStreamDictionary) {\n\t\t\tvar stream = this._geometryData.vertexStreamDictionary[semantic];\n\t\t\titerator.writeData(semantic, stream.data, numVertices);\n\t\t\tdelete this._geometryData.vertexStreamDictionary[semantic];\n\t\t}\n\n\t\titerator.end();\n\t}\n\n\t_updateIndexBuffer() {\n\t\tif (this.indexBuffer.length <= 0 || !this.indexBuffer[0]) {\n\t\t\tvar createFormat = this._geometryData.maxVertices > 0xffff ? INDEXFORMAT_UINT32 : INDEXFORMAT_UINT16;\n\t\t\tthis.indexBuffer[0] = new IndexBuffer(this.device, createFormat, this._geometryData.maxIndices, this._geometryData.indicesUsage);\n\t\t}\n\n\t\tvar srcIndices = this._geometryData.indices;\n\n\t\tif (srcIndices) {\n\t\t\tvar indexBuffer = this.indexBuffer[0];\n\t\t\tindexBuffer.writeData(srcIndices, this._geometryData.indexCount);\n\t\t\tthis._geometryData.indices = null;\n\t\t}\n\t}\n\n\tprepareRenderState(renderStyle) {\n\t\tif (renderStyle === RENDERSTYLE_WIREFRAME) {\n\t\t\tthis.generateWireframe();\n\t\t} else if (renderStyle === RENDERSTYLE_POINTS) {\n\t\t\tthis.primitive[RENDERSTYLE_POINTS] = {\n\t\t\t\ttype: PRIMITIVE_POINTS,\n\t\t\t\tbase: 0,\n\t\t\t\tcount: this.vertexBuffer ? this.vertexBuffer.numVertices : 0,\n\t\t\t\tindexed: false\n\t\t\t};\n\t\t}\n\t}\n\n\tupdateRenderStates() {\n\t\tif (this.primitive[RENDERSTYLE_POINTS]) {\n\t\t\tthis.prepareRenderState(RENDERSTYLE_POINTS);\n\t\t}\n\n\t\tif (this.primitive[RENDERSTYLE_WIREFRAME]) {\n\t\t\tthis.prepareRenderState(RENDERSTYLE_WIREFRAME);\n\t\t}\n\t}\n\n\tgenerateWireframe() {\n\t\tthis._destroyIndexBuffer(RENDERSTYLE_WIREFRAME);\n\n\t\tvar lines = [];\n\t\tvar format;\n\n\t\tif (this.indexBuffer.length > 0 && this.indexBuffer[0]) {\n\t\t\tvar offsets = [[0, 1], [1, 2], [2, 0]];\n\t\t\tvar base = this.primitive[RENDERSTYLE_SOLID].base;\n\t\t\tvar count = this.primitive[RENDERSTYLE_SOLID].count;\n\t\t\tvar indexBuffer = this.indexBuffer[RENDERSTYLE_SOLID];\n\t\t\tvar srcIndices = new typedArrayIndexFormats[indexBuffer.format](indexBuffer.storage);\n\t\t\tvar uniqueLineIndices = {};\n\n\t\t\tfor (var j = base; j < base + count; j += 3) {\n\t\t\t\tfor (var k = 0; k < 3; k++) {\n\t\t\t\t\tvar i1 = srcIndices[j + offsets[k][0]];\n\t\t\t\t\tvar i2 = srcIndices[j + offsets[k][1]];\n\t\t\t\t\tvar line = i1 > i2 ? i2 << 16 | i1 : i1 << 16 | i2;\n\n\t\t\t\t\tif (uniqueLineIndices[line] === undefined) {\n\t\t\t\t\t\tuniqueLineIndices[line] = 0;\n\t\t\t\t\t\tlines.push(i1, i2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tformat = indexBuffer.format;\n\t\t} else {\n\t\t\tfor (var i = 0; i < this.vertexBuffer.numVertices; i += 3) {\n\t\t\t\tlines.push(i, i + 1, i + 1, i + 2, i + 2, i);\n\t\t\t}\n\n\t\t\tformat = lines.length > 65535 ? INDEXFORMAT_UINT32 : INDEXFORMAT_UINT16;\n\t\t}\n\n\t\tvar wireBuffer = new IndexBuffer(this.vertexBuffer.device, format, lines.length);\n\t\tvar dstIndices = new typedArrayIndexFormats[wireBuffer.format](wireBuffer.storage);\n\t\tdstIndices.set(lines);\n\t\twireBuffer.unlock();\n\t\tthis.primitive[RENDERSTYLE_WIREFRAME] = {\n\t\t\ttype: PRIMITIVE_LINES,\n\t\t\tbase: 0,\n\t\t\tcount: lines.length,\n\t\t\tindexed: true\n\t\t};\n\t\tthis.indexBuffer[RENDERSTYLE_WIREFRAME] = wireBuffer;\n\t}\n\n}\n\nvar primitiveUv1Padding = 4.0 / 64;\nvar primitiveUv1PaddingScale = 1.0 - primitiveUv1Padding * 2;\nvar shapePrimitives = [];\n\nfunction calculateNormals(positions, indices) {\n\tvar triangleCount = indices.length / 3;\n\tvar vertexCount = positions.length / 3;\n\tvar i1, i2, i3;\n\tvar i;\n\tvar p1 = new Vec3();\n\tvar p2 = new Vec3();\n\tvar p3 = new Vec3();\n\tvar p1p2 = new Vec3();\n\tvar p1p3 = new Vec3();\n\tvar faceNormal = new Vec3();\n\tvar normals = [];\n\n\tfor (i = 0; i < positions.length; i++) {\n\t\tnormals[i] = 0;\n\t}\n\n\tfor (i = 0; i < triangleCount; i++) {\n\t\ti1 = indices[i * 3];\n\t\ti2 = indices[i * 3 + 1];\n\t\ti3 = indices[i * 3 + 2];\n\t\tp1.set(positions[i1 * 3], positions[i1 * 3 + 1], positions[i1 * 3 + 2]);\n\t\tp2.set(positions[i2 * 3], positions[i2 * 3 + 1], positions[i2 * 3 + 2]);\n\t\tp3.set(positions[i3 * 3], positions[i3 * 3 + 1], positions[i3 * 3 + 2]);\n\t\tp1p2.sub2(p2, p1);\n\t\tp1p3.sub2(p3, p1);\n\t\tfaceNormal.cross(p1p2, p1p3).normalize();\n\t\tnormals[i1 * 3] += faceNormal.x;\n\t\tnormals[i1 * 3 + 1] += faceNormal.y;\n\t\tnormals[i1 * 3 + 2] += faceNormal.z;\n\t\tnormals[i2 * 3] += faceNormal.x;\n\t\tnormals[i2 * 3 + 1] += faceNormal.y;\n\t\tnormals[i2 * 3 + 2] += faceNormal.z;\n\t\tnormals[i3 * 3] += faceNormal.x;\n\t\tnormals[i3 * 3 + 1] += faceNormal.y;\n\t\tnormals[i3 * 3 + 2] += faceNormal.z;\n\t}\n\n\tfor (i = 0; i < vertexCount; i++) {\n\t\tvar nx = normals[i * 3];\n\t\tvar ny = normals[i * 3 + 1];\n\t\tvar nz = normals[i * 3 + 2];\n\t\tvar invLen = 1 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n\t\tnormals[i * 3] *= invLen;\n\t\tnormals[i * 3 + 1] *= invLen;\n\t\tnormals[i * 3 + 2] *= invLen;\n\t}\n\n\treturn normals;\n}\n\nfunction calculateTangents(positions, normals, uvs, indices) {\n\tvar triangleCount = indices.length / 3;\n\tvar vertexCount = positions.length / 3;\n\tvar i1, i2, i3;\n\tvar x1, x2, y1, y2, z1, z2, s1, s2, t1, t2, r;\n\tvar sdir = new Vec3();\n\tvar tdir = new Vec3();\n\tvar v1 = new Vec3();\n\tvar v2 = new Vec3();\n\tvar v3 = new Vec3();\n\tvar w1 = new Vec2();\n\tvar w2 = new Vec2();\n\tvar w3 = new Vec2();\n\tvar i;\n\tvar tan1 = new Float32Array(vertexCount * 3);\n\tvar tan2 = new Float32Array(vertexCount * 3);\n\tvar tangents = [];\n\tvar area = 0.0;\n\n\tfor (i = 0; i < triangleCount; i++) {\n\t\ti1 = indices[i * 3];\n\t\ti2 = indices[i * 3 + 1];\n\t\ti3 = indices[i * 3 + 2];\n\t\tv1.set(positions[i1 * 3], positions[i1 * 3 + 1], positions[i1 * 3 + 2]);\n\t\tv2.set(positions[i2 * 3], positions[i2 * 3 + 1], positions[i2 * 3 + 2]);\n\t\tv3.set(positions[i3 * 3], positions[i3 * 3 + 1], positions[i3 * 3 + 2]);\n\t\tw1.set(uvs[i1 * 2], uvs[i1 * 2 + 1]);\n\t\tw2.set(uvs[i2 * 2], uvs[i2 * 2 + 1]);\n\t\tw3.set(uvs[i3 * 2], uvs[i3 * 2 + 1]);\n\t\tx1 = v2.x - v1.x;\n\t\tx2 = v3.x - v1.x;\n\t\ty1 = v2.y - v1.y;\n\t\ty2 = v3.y - v1.y;\n\t\tz1 = v2.z - v1.z;\n\t\tz2 = v3.z - v1.z;\n\t\ts1 = w2.x - w1.x;\n\t\ts2 = w3.x - w1.x;\n\t\tt1 = w2.y - w1.y;\n\t\tt2 = w3.y - w1.y;\n\t\tarea = s1 * t2 - s2 * t1;\n\n\t\tif (area === 0) {\n\t\t\tsdir.set(0.0, 1.0, 0.0);\n\t\t\ttdir.set(1.0, 0.0, 0.0);\n\t\t} else {\n\t\t\tr = 1.0 / area;\n\t\t\tsdir.set((t2 * x1 - t1 * x2) * r, (t2 * y1 - t1 * y2) * r, (t2 * z1 - t1 * z2) * r);\n\t\t\ttdir.set((s1 * x2 - s2 * x1) * r, (s1 * y2 - s2 * y1) * r, (s1 * z2 - s2 * z1) * r);\n\t\t}\n\n\t\ttan1[i1 * 3 + 0] += sdir.x;\n\t\ttan1[i1 * 3 + 1] += sdir.y;\n\t\ttan1[i1 * 3 + 2] += sdir.z;\n\t\ttan1[i2 * 3 + 0] += sdir.x;\n\t\ttan1[i2 * 3 + 1] += sdir.y;\n\t\ttan1[i2 * 3 + 2] += sdir.z;\n\t\ttan1[i3 * 3 + 0] += sdir.x;\n\t\ttan1[i3 * 3 + 1] += sdir.y;\n\t\ttan1[i3 * 3 + 2] += sdir.z;\n\t\ttan2[i1 * 3 + 0] += tdir.x;\n\t\ttan2[i1 * 3 + 1] += tdir.y;\n\t\ttan2[i1 * 3 + 2] += tdir.z;\n\t\ttan2[i2 * 3 + 0] += tdir.x;\n\t\ttan2[i2 * 3 + 1] += tdir.y;\n\t\ttan2[i2 * 3 + 2] += tdir.z;\n\t\ttan2[i3 * 3 + 0] += tdir.x;\n\t\ttan2[i3 * 3 + 1] += tdir.y;\n\t\ttan2[i3 * 3 + 2] += tdir.z;\n\t}\n\n\tt1 = new Vec3();\n\tt2 = new Vec3();\n\tvar n = new Vec3();\n\tvar temp = new Vec3();\n\n\tfor (i = 0; i < vertexCount; i++) {\n\t\tn.set(normals[i * 3], normals[i * 3 + 1], normals[i * 3 + 2]);\n\t\tt1.set(tan1[i * 3], tan1[i * 3 + 1], tan1[i * 3 + 2]);\n\t\tt2.set(tan2[i * 3], tan2[i * 3 + 1], tan2[i * 3 + 2]);\n\t\tvar ndott = n.dot(t1);\n\t\ttemp.copy(n).mulScalar(ndott);\n\t\ttemp.sub2(t1, temp).normalize();\n\t\ttangents[i * 4] = temp.x;\n\t\ttangents[i * 4 + 1] = temp.y;\n\t\ttangents[i * 4 + 2] = temp.z;\n\t\ttemp.cross(n, t1);\n\t\ttangents[i * 4 + 3] = temp.dot(t2) < 0.0 ? -1.0 : 1.0;\n\t}\n\n\treturn tangents;\n}\n\nfunction createMesh$1(device, positions, opts) {\n\tconst mesh = new Mesh(device);\n\tmesh.setPositions(positions);\n\n\tif (opts) {\n\t\tif (opts.normals) {\n\t\t\tmesh.setNormals(opts.normals);\n\t\t}\n\n\t\tif (opts.tangents) {\n\t\t\tmesh.setVertexStream(SEMANTIC_TANGENT, opts.tangents, 4);\n\t\t}\n\n\t\tif (opts.colors) {\n\t\t\tmesh.setColors32(opts.colors);\n\t\t}\n\n\t\tif (opts.uvs) {\n\t\t\tmesh.setUvs(0, opts.uvs);\n\t\t}\n\n\t\tif (opts.uvs1) {\n\t\t\tmesh.setUvs(1, opts.uvs1);\n\t\t}\n\n\t\tif (opts.blendIndices) {\n\t\t\tmesh.setVertexStream(SEMANTIC_BLENDINDICES, opts.blendIndices, 4, TYPE_UINT8);\n\t\t}\n\n\t\tif (opts.blendWeights) {\n\t\t\tmesh.setVertexStream(SEMANTIC_BLENDWEIGHT, opts.blendWeights, 4);\n\t\t}\n\n\t\tif (opts.indices) {\n\t\t\tmesh.setIndices(opts.indices);\n\t\t}\n\t}\n\n\tmesh.update();\n\treturn mesh;\n}\n\nfunction createTorus(device, opts) {\n\tvar rc = opts && opts.tubeRadius !== undefined ? opts.tubeRadius : 0.2;\n\tvar rt = opts && opts.ringRadius !== undefined ? opts.ringRadius : 0.3;\n\tvar segments = opts && opts.segments !== undefined ? opts.segments : 30;\n\tvar sides = opts && opts.sides !== undefined ? opts.sides : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar i, j;\n\tvar x, y, z, nx, ny, nz, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\tfor (i = 0; i <= sides; i++) {\n\t\tfor (j = 0; j <= segments; j++) {\n\t\t\tx = Math.cos(2.0 * Math.PI * j / segments) * (rt + rc * Math.cos(2.0 * Math.PI * i / sides));\n\t\t\ty = Math.sin(2.0 * Math.PI * i / sides) * rc;\n\t\t\tz = Math.sin(2.0 * Math.PI * j / segments) * (rt + rc * Math.cos(2.0 * Math.PI * i / sides));\n\t\t\tnx = Math.cos(2.0 * Math.PI * j / segments) * Math.cos(2.0 * Math.PI * i / sides);\n\t\t\tny = Math.sin(2.0 * Math.PI * i / sides);\n\t\t\tnz = Math.sin(2.0 * Math.PI * j / segments) * Math.cos(2.0 * Math.PI * i / sides);\n\t\t\tu = i / sides;\n\t\t\tv = 1.0 - j / segments;\n\t\t\tpositions.push(x, y, z);\n\t\t\tnormals.push(nx, ny, nz);\n\t\t\tuvs.push(u, 1.0 - v);\n\n\t\t\tif (i < sides && j < segments) {\n\t\t\t\tvar first, second, third, fourth;\n\t\t\t\tfirst = i * (segments + 1) + j;\n\t\t\t\tsecond = (i + 1) * (segments + 1) + j;\n\t\t\t\tthird = i * (segments + 1) + (j + 1);\n\t\t\t\tfourth = (i + 1) * (segments + 1) + (j + 1);\n\t\t\t\tindices.push(first, second, third);\n\t\t\t\tindices.push(second, fourth, third);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction _createConeData(baseRadius, peakRadius, height, heightSegments, capSegments, roundedCaps) {\n\tvar i, j;\n\tvar x, y, z, u, v;\n\tvar pos = new Vec3();\n\tvar bottomToTop = new Vec3();\n\tvar norm = new Vec3();\n\tvar top, bottom, tangent;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar uvs1 = [];\n\tvar indices = [];\n\tvar theta, cosTheta, sinTheta;\n\tvar phi, sinPhi, cosPhi;\n\tvar first, second, third, fourth;\n\tvar offset;\n\n\tif (height > 0) {\n\t\tfor (i = 0; i <= heightSegments; i++) {\n\t\t\tfor (j = 0; j <= capSegments; j++) {\n\t\t\t\ttheta = j / capSegments * 2.0 * Math.PI - Math.PI;\n\t\t\t\tsinTheta = Math.sin(theta);\n\t\t\t\tcosTheta = Math.cos(theta);\n\t\t\t\tbottom = new Vec3(sinTheta * baseRadius, -height / 2.0, cosTheta * baseRadius);\n\t\t\t\ttop = new Vec3(sinTheta * peakRadius, height / 2.0, cosTheta * peakRadius);\n\t\t\t\tpos.lerp(bottom, top, i / heightSegments);\n\t\t\t\tbottomToTop.sub2(top, bottom).normalize();\n\t\t\t\ttangent = new Vec3(cosTheta, 0.0, -sinTheta);\n\t\t\t\tnorm.cross(tangent, bottomToTop).normalize();\n\t\t\t\tpositions.push(pos.x, pos.y, pos.z);\n\t\t\t\tnormals.push(norm.x, norm.y, norm.z);\n\t\t\t\tu = j / capSegments;\n\t\t\t\tv = i / heightSegments;\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tvar _v = v;\n\t\t\t\tv = u;\n\t\t\t\tu = _v;\n\t\t\t\tu /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i < heightSegments && j < capSegments) {\n\t\t\t\t\tfirst = i * (capSegments + 1) + j;\n\t\t\t\t\tsecond = i * (capSegments + 1) + (j + 1);\n\t\t\t\t\tthird = (i + 1) * (capSegments + 1) + j;\n\t\t\t\t\tfourth = (i + 1) * (capSegments + 1) + (j + 1);\n\t\t\t\t\tindices.push(first, second, third);\n\t\t\t\t\tindices.push(second, fourth, third);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (roundedCaps) {\n\t\tvar lat, lon;\n\t\tvar latitudeBands = Math.floor(capSegments / 2);\n\t\tvar longitudeBands = capSegments;\n\t\tvar capOffset = height / 2;\n\n\t\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\t\ttheta = lat * Math.PI * 0.5 / latitudeBands;\n\t\t\tsinTheta = Math.sin(theta);\n\t\t\tcosTheta = Math.cos(theta);\n\n\t\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\t\tsinPhi = Math.sin(phi);\n\t\t\t\tcosPhi = Math.cos(phi);\n\t\t\t\tx = cosPhi * sinTheta;\n\t\t\t\ty = cosTheta;\n\t\t\t\tz = sinPhi * sinTheta;\n\t\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\t\tpositions.push(x * peakRadius, y * peakRadius + capOffset, z * peakRadius);\n\t\t\t\tnormals.push(x, y, z);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 1.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\t\t\t}\n\t\t}\n\n\t\toffset = (heightSegments + 1) * (capSegments + 1);\n\n\t\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\t\tsecond = first + longitudeBands + 1;\n\t\t\t\tindices.push(offset + first + 1, offset + second, offset + first);\n\t\t\t\tindices.push(offset + first + 1, offset + second + 1, offset + second);\n\t\t\t}\n\t\t}\n\n\t\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\t\ttheta = Math.PI * 0.5 + lat * Math.PI * 0.5 / latitudeBands;\n\t\t\tsinTheta = Math.sin(theta);\n\t\t\tcosTheta = Math.cos(theta);\n\n\t\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\t\tsinPhi = Math.sin(phi);\n\t\t\t\tcosPhi = Math.cos(phi);\n\t\t\t\tx = cosPhi * sinTheta;\n\t\t\t\ty = cosTheta;\n\t\t\t\tz = sinPhi * sinTheta;\n\t\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\t\tpositions.push(x * peakRadius, y * peakRadius - capOffset, z * peakRadius);\n\t\t\t\tnormals.push(x, y, z);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 2.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\t\t\t}\n\t\t}\n\n\t\toffset = (heightSegments + 1) * (capSegments + 1) + (longitudeBands + 1) * (latitudeBands + 1);\n\n\t\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\t\tsecond = first + longitudeBands + 1;\n\t\t\t\tindices.push(offset + first + 1, offset + second, offset + first);\n\t\t\t\tindices.push(offset + first + 1, offset + second + 1, offset + second);\n\t\t\t}\n\t\t}\n\t} else {\n\t\toffset = (heightSegments + 1) * (capSegments + 1);\n\n\t\tif (baseRadius > 0.0) {\n\t\t\tfor (i = 0; i < capSegments; i++) {\n\t\t\t\ttheta = i / capSegments * 2.0 * Math.PI;\n\t\t\t\tx = Math.sin(theta);\n\t\t\t\ty = -height / 2.0;\n\t\t\t\tz = Math.cos(theta);\n\t\t\t\tu = 1.0 - (x + 1.0) / 2.0;\n\t\t\t\tv = (z + 1.0) / 2.0;\n\t\t\t\tpositions.push(x * baseRadius, y, z * baseRadius);\n\t\t\t\tnormals.push(0.0, -1.0, 0.0);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 1.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i > 1) {\n\t\t\t\t\tindices.push(offset, offset + i, offset + i - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\toffset += capSegments;\n\n\t\tif (peakRadius > 0.0) {\n\t\t\tfor (i = 0; i < capSegments; i++) {\n\t\t\t\ttheta = i / capSegments * 2.0 * Math.PI;\n\t\t\t\tx = Math.sin(theta);\n\t\t\t\ty = height / 2.0;\n\t\t\t\tz = Math.cos(theta);\n\t\t\t\tu = 1.0 - (x + 1.0) / 2.0;\n\t\t\t\tv = (z + 1.0) / 2.0;\n\t\t\t\tpositions.push(x * peakRadius, y, z * peakRadius);\n\t\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += 2.0 / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i > 1) {\n\t\t\t\t\tindices.push(offset, offset + i - 1, offset + i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tpositions: positions,\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs1,\n\t\tindices: indices\n\t};\n}\n\nfunction createCylinder(device, opts) {\n\tvar radius = opts && (opts.radius || opts.baseRadius);\n\tradius = radius !== undefined ? radius : 0.5;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 5;\n\tvar capSegments = opts && opts.capSegments !== undefined ? opts.capSegments : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(radius, radius, height, heightSegments, capSegments, false);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createCapsule(device, opts) {\n\tvar radius = opts && opts.radius !== undefined ? opts.radius : 0.3;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 1;\n\tvar sides = opts && opts.sides !== undefined ? opts.sides : 20;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(radius, radius, height - 2 * radius, heightSegments, sides, true);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createCone(device, opts) {\n\tvar baseRadius = opts && opts.baseRadius !== undefined ? opts.baseRadius : 0.5;\n\tvar peakRadius = opts && opts.peakRadius !== undefined ? opts.peakRadius : 0.0;\n\tvar height = opts && opts.height !== undefined ? opts.height : 1.0;\n\tvar heightSegments = opts && opts.heightSegments !== undefined ? opts.heightSegments : 5;\n\tvar capSegments = opts && opts.capSegments !== undefined ? opts.capSegments : 18;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\n\tvar options = _createConeData(baseRadius, peakRadius, height, heightSegments, capSegments, false);\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(options.positions, options.normals, options.uvs, options.indices);\n\t}\n\n\treturn createMesh$1(device, options.positions, options);\n}\n\nfunction createSphere(device, opts) {\n\tvar radius = opts && opts.radius !== undefined ? opts.radius : 0.5;\n\tvar latitudeBands = opts && opts.latitudeBands !== undefined ? opts.latitudeBands : 16;\n\tvar longitudeBands = opts && opts.longitudeBands !== undefined ? opts.longitudeBands : 16;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar lon, lat;\n\tvar theta, sinTheta, cosTheta, phi, sinPhi, cosPhi;\n\tvar first, second;\n\tvar x, y, z, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\tfor (lat = 0; lat <= latitudeBands; lat++) {\n\t\ttheta = lat * Math.PI / latitudeBands;\n\t\tsinTheta = Math.sin(theta);\n\t\tcosTheta = Math.cos(theta);\n\n\t\tfor (lon = 0; lon <= longitudeBands; lon++) {\n\t\t\tphi = lon * 2 * Math.PI / longitudeBands - Math.PI / 2.0;\n\t\t\tsinPhi = Math.sin(phi);\n\t\t\tcosPhi = Math.cos(phi);\n\t\t\tx = cosPhi * sinTheta;\n\t\t\ty = cosTheta;\n\t\t\tz = sinPhi * sinTheta;\n\t\t\tu = 1.0 - lon / longitudeBands;\n\t\t\tv = 1.0 - lat / latitudeBands;\n\t\t\tpositions.push(x * radius, y * radius, z * radius);\n\t\t\tnormals.push(x, y, z);\n\t\t\tuvs.push(u, 1.0 - v);\n\t\t}\n\t}\n\n\tfor (lat = 0; lat < latitudeBands; ++lat) {\n\t\tfor (lon = 0; lon < longitudeBands; ++lon) {\n\t\t\tfirst = lat * (longitudeBands + 1) + lon;\n\t\t\tsecond = first + longitudeBands + 1;\n\t\t\tindices.push(first + 1, second, first);\n\t\t\tindices.push(first + 1, second + 1, second);\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction createPlane(device, opts) {\n\tvar he = opts && opts.halfExtents !== undefined ? opts.halfExtents : new Vec2(0.5, 0.5);\n\tvar ws = opts && opts.widthSegments !== undefined ? opts.widthSegments : 5;\n\tvar ls = opts && opts.lengthSegments !== undefined ? opts.lengthSegments : 5;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar i, j;\n\tvar x, y, z, u, v;\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\tvar vcounter = 0;\n\n\tfor (i = 0; i <= ws; i++) {\n\t\tfor (j = 0; j <= ls; j++) {\n\t\t\tx = -he.x + 2.0 * he.x * i / ws;\n\t\t\ty = 0.0;\n\t\t\tz = -(-he.y + 2.0 * he.y * j / ls);\n\t\t\tu = i / ws;\n\t\t\tv = j / ls;\n\t\t\tpositions.push(x, y, z);\n\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\tuvs.push(u, 1.0 - v);\n\n\t\t\tif (i < ws && j < ls) {\n\t\t\t\tindices.push(vcounter + ls + 1, vcounter + 1, vcounter);\n\t\t\t\tindices.push(vcounter + ls + 1, vcounter + ls + 2, vcounter + 1);\n\t\t\t}\n\n\t\t\tvcounter++;\n\t\t}\n\t}\n\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction createBox(device, opts) {\n\tvar he = opts && opts.halfExtents !== undefined ? opts.halfExtents : new Vec3(0.5, 0.5, 0.5);\n\tvar ws = opts && opts.widthSegments !== undefined ? opts.widthSegments : 1;\n\tvar ls = opts && opts.lengthSegments !== undefined ? opts.lengthSegments : 1;\n\tvar hs = opts && opts.heightSegments !== undefined ? opts.heightSegments : 1;\n\tvar calculateTangents = opts && opts.calculateTangents !== undefined ? opts.calculateTangents : false;\n\tvar corners = [new Vec3(-he.x, -he.y, he.z), new Vec3(he.x, -he.y, he.z), new Vec3(he.x, he.y, he.z), new Vec3(-he.x, he.y, he.z), new Vec3(he.x, -he.y, -he.z), new Vec3(-he.x, -he.y, -he.z), new Vec3(-he.x, he.y, -he.z), new Vec3(he.x, he.y, -he.z)];\n\tvar faceAxes = [[0, 1, 3], [4, 5, 7], [3, 2, 6], [1, 0, 4], [1, 4, 2], [5, 0, 6]];\n\tvar faceNormals = [[0, 0, 1], [0, 0, -1], [0, 1, 0], [0, -1, 0], [1, 0, 0], [-1, 0, 0]];\n\tvar sides = {\n\t\tFRONT: 0,\n\t\tBACK: 1,\n\t\tTOP: 2,\n\t\tBOTTOM: 3,\n\t\tRIGHT: 4,\n\t\tLEFT: 5\n\t};\n\tvar positions = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar uvs1 = [];\n\tvar indices = [];\n\tvar vcounter = 0;\n\n\tvar generateFace = function generateFace(side, uSegments, vSegments) {\n\t\tvar u, v;\n\t\tvar i, j;\n\n\t\tfor (i = 0; i <= uSegments; i++) {\n\t\t\tfor (j = 0; j <= vSegments; j++) {\n\t\t\t\tvar temp1 = new Vec3();\n\t\t\t\tvar temp2 = new Vec3();\n\t\t\t\tvar temp3 = new Vec3();\n\t\t\t\tvar r = new Vec3();\n\t\t\t\ttemp1.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][1]], i / uSegments);\n\t\t\t\ttemp2.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][2]], j / vSegments);\n\t\t\t\ttemp3.sub2(temp2, corners[faceAxes[side][0]]);\n\t\t\t\tr.add2(temp1, temp3);\n\t\t\t\tu = i / uSegments;\n\t\t\t\tv = j / vSegments;\n\t\t\t\tpositions.push(r.x, r.y, r.z);\n\t\t\t\tnormals.push(faceNormals[side][0], faceNormals[side][1], faceNormals[side][2]);\n\t\t\t\tuvs.push(u, 1.0 - v);\n\t\t\t\tu /= 3;\n\t\t\t\tv /= 3;\n\t\t\t\tu = u * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tv = v * primitiveUv1PaddingScale + primitiveUv1Padding;\n\t\t\t\tu += side % 3 / 3;\n\t\t\t\tv += Math.floor(side / 3) / 3;\n\t\t\t\tuvs1.push(u, 1.0 - v);\n\n\t\t\t\tif (i < uSegments && j < vSegments) {\n\t\t\t\t\tindices.push(vcounter + vSegments + 1, vcounter + 1, vcounter);\n\t\t\t\t\tindices.push(vcounter + vSegments + 1, vcounter + vSegments + 2, vcounter + 1);\n\t\t\t\t}\n\n\t\t\t\tvcounter++;\n\t\t\t}\n\t\t}\n\t};\n\n\tgenerateFace(sides.FRONT, ws, hs);\n\tgenerateFace(sides.BACK, ws, hs);\n\tgenerateFace(sides.TOP, ws, ls);\n\tgenerateFace(sides.BOTTOM, ws, ls);\n\tgenerateFace(sides.RIGHT, ls, hs);\n\tgenerateFace(sides.LEFT, ls, hs);\n\tvar options = {\n\t\tnormals: normals,\n\t\tuvs: uvs,\n\t\tuvs1: uvs1,\n\t\tindices: indices\n\t};\n\n\tif (calculateTangents) {\n\t\toptions.tangents = calculateTangents(positions, normals, uvs, indices);\n\t}\n\n\treturn createMesh$1(device, positions, options);\n}\n\nfunction getShapePrimitive(device, type) {\n\tvar primData = null;\n\n\tfor (var i = 0; i < shapePrimitives.length; i++) {\n\t\tif (shapePrimitives[i].type === type && shapePrimitives[i].device === device) {\n\t\t\tprimData = shapePrimitives[i].primData;\n\t\t}\n\t}\n\n\tif (!primData) {\n\t\tvar mesh, area;\n\n\t\tswitch (type) {\n\t\t\tcase 'box':\n\t\t\t\tmesh = createBox(device, {\n\t\t\t\t\thalfExtents: new Vec3(0.5, 0.5, 0.5)\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 2,\n\t\t\t\t\ty: 2,\n\t\t\t\t\tz: 2,\n\t\t\t\t\tuv: 2.0 / 3\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'capsule':\n\t\t\t\tmesh = createCapsule(device, {\n\t\t\t\t\tradius: 0.5,\n\t\t\t\t\theight: 2\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI * 2,\n\t\t\t\t\ty: Math.PI,\n\t\t\t\t\tz: Math.PI * 2,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3 * 2\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'cone':\n\t\t\t\tmesh = createCone(device, {\n\t\t\t\t\tbaseRadius: 0.5,\n\t\t\t\t\tpeakRadius: 0,\n\t\t\t\t\theight: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 2.54,\n\t\t\t\t\ty: 2.54,\n\t\t\t\t\tz: 2.54,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'cylinder':\n\t\t\t\tmesh = createCylinder(device, {\n\t\t\t\t\tradius: 0.5,\n\t\t\t\t\theight: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI,\n\t\t\t\t\ty: 0.79 * 2,\n\t\t\t\t\tz: Math.PI,\n\t\t\t\t\tuv: 1.0 / 3 + 1.0 / 3 / 3 * 2\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'plane':\n\t\t\t\tmesh = createPlane(device, {\n\t\t\t\t\thalfExtents: new Vec2(0.5, 0.5),\n\t\t\t\t\twidthSegments: 1,\n\t\t\t\t\tlengthSegments: 1\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 1,\n\t\t\t\t\tz: 0,\n\t\t\t\t\tuv: 1\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'sphere':\n\t\t\t\tmesh = createSphere(device, {\n\t\t\t\t\tradius: 0.5\n\t\t\t\t});\n\t\t\t\tarea = {\n\t\t\t\t\tx: Math.PI,\n\t\t\t\t\ty: Math.PI,\n\t\t\t\t\tz: Math.PI,\n\t\t\t\t\tuv: 1\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Invalid primitive type: \" + type);\n\t\t}\n\n\t\tmesh.incRefCount();\n\t\tprimData = {\n\t\t\tmesh: mesh,\n\t\t\tarea: area\n\t\t};\n\t\tshapePrimitives.push({\n\t\t\ttype: type,\n\t\t\tdevice: device,\n\t\t\tprimData: primData\n\t\t});\n\t}\n\n\treturn primData;\n}\n\nclass BasicMaterial extends Material {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.color = new Color(1, 1, 1, 1);\n\t\tthis.colorUniform = new Float32Array(4);\n\t\tthis.colorMap = null;\n\t\tthis.vertexColors = false;\n\t}\n\n\tclone() {\n\t\tvar clone = new BasicMaterial();\n\n\t\tMaterial.prototype._cloneInternal.call(this, clone);\n\n\t\tclone.color.copy(this.color);\n\t\tclone.colorMap = this.colorMap;\n\t\tclone.vertexColors = this.vertexColors;\n\t\treturn clone;\n\t}\n\n\tupdateUniforms() {\n\t\tthis.clearParameters();\n\t\tthis.colorUniform[0] = this.color.r;\n\t\tthis.colorUniform[1] = this.color.g;\n\t\tthis.colorUniform[2] = this.color.b;\n\t\tthis.colorUniform[3] = this.color.a;\n\t\tthis.setParameter('uColor', this.colorUniform);\n\n\t\tif (this.colorMap) {\n\t\t\tthis.setParameter('texture_diffuseMap', this.colorMap);\n\t\t}\n\t}\n\n\tupdateShader(device, scene, objDefs, staticLightList, pass, sortedLights) {\n\t\tvar options = {\n\t\t\tskin: objDefs && (objDefs & SHADERDEF_SKIN) !== 0,\n\t\t\tscreenSpace: objDefs && (objDefs & SHADERDEF_SCREENSPACE) !== 0,\n\t\t\tuseInstancing: objDefs && (objDefs & SHADERDEF_INSTANCING) !== 0,\n\t\t\tuseMorphPosition: objDefs && (objDefs & SHADERDEF_MORPH_POSITION) !== 0,\n\t\t\tuseMorphNormal: objDefs && (objDefs & SHADERDEF_MORPH_NORMAL) !== 0,\n\t\t\tuseMorphTextureBased: objDefs && (objDefs & SHADERDEF_MORPH_TEXTURE_BASED) !== 0,\n\t\t\tvertexColors: this.vertexColors,\n\t\t\tdiffuseMap: !!this.colorMap,\n\t\t\tpass: pass\n\t\t};\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('basic', options);\n\t}\n\n}\n\nclass Batch {\n\tconstructor(meshInstances, dynamic, batchGroupId) {\n\t\tthis.origMeshInstances = meshInstances;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis.meshInstance = null;\n\t\tthis.dynamic = dynamic;\n\t\tthis.batchGroupId = batchGroupId;\n\t}\n\n\tdestroy(scene, layers) {\n\t\tif (this.meshInstance) {\n\t\t\tthis.removeFromLayers(scene, layers);\n\t\t\tthis.meshInstance.destroy();\n\t\t}\n\t}\n\n\taddToLayers(scene, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tvar layer = scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances([this.meshInstance]);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFromLayers(scene, layers) {\n\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\tvar layer = scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeMeshInstances([this.meshInstance]);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateBoundingBox() {\n\t\tthis._aabb.copy(this.origMeshInstances[0].aabb);\n\n\t\tfor (var i = 1; i < this.origMeshInstances.length; i++) {\n\t\t\tthis._aabb.add(this.origMeshInstances[i].aabb);\n\t\t}\n\n\t\tthis.meshInstance.aabb = this._aabb;\n\t\tthis.meshInstance._aabbVer = 0;\n\t}\n\n}\n\nclass BatchGroup {\n\tconstructor(id, name, dynamic, maxAabbSize, layers = [LAYERID_WORLD]) {\n\t\tthis.dynamic = dynamic;\n\t\tthis.maxAabbSize = maxAabbSize;\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.layers = layers;\n\t\tthis._ui = false;\n\t\tthis._sprite = false;\n\t\tthis._obj = {\n\t\t\tmodel: [],\n\t\t\telement: [],\n\t\t\tsprite: [],\n\t\t\trender: []\n\t\t};\n\t}\n\n}\n\nBatchGroup.MODEL = 'model';\nBatchGroup.ELEMENT = 'element';\nBatchGroup.SPRITE = 'sprite';\nBatchGroup.RENDER = 'render';\n\nvar _invMatrix = new Mat4();\n\nclass SkinInstance {\n\tconstructor(skin) {\n\t\tthis._dirty = true;\n\t\tthis._rootBone = null;\n\t\tthis._skinUpdateIndex = -1;\n\t\tthis._updateBeforeCull = true;\n\n\t\tif (skin) {\n\t\t\tthis.initSkin(skin);\n\t\t}\n\t}\n\n\tinit(device, numBones) {\n\t\tif (device.supportsBoneTextures) {\n\t\t\tvar numPixels = numBones * 3;\n\t\t\tvar width = Math.ceil(Math.sqrt(numPixels));\n\t\t\twidth = math.roundUp(width, 3);\n\t\t\tvar height = Math.ceil(numPixels / width);\n\t\t\tthis.boneTexture = new Texture(device, {\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tformat: PIXELFORMAT_RGBA32F,\n\t\t\t\tmipmaps: false,\n\t\t\t\tminFilter: FILTER_NEAREST,\n\t\t\t\tmagFilter: FILTER_NEAREST\n\t\t\t});\n\t\t\tthis.boneTexture.name = 'skin';\n\t\t\tthis.matrixPalette = this.boneTexture.lock();\n\t\t} else {\n\t\t\tthis.matrixPalette = new Float32Array(numBones * 12);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif (this.boneTexture) {\n\t\t\tthis.boneTexture.destroy();\n\t\t\tthis.boneTexture = null;\n\t\t}\n\t}\n\n\tget rootBone() {\n\t\treturn this._rootBone;\n\t}\n\n\tset rootBone(rootBone) {\n\t\tthis._rootBone = rootBone;\n\t}\n\n\tresolve(rootBone, entity) {\n\t\tthis.rootBone = rootBone;\n\t\tconst skin = this.skin;\n\t\tconst bones = [];\n\n\t\tfor (let j = 0; j < skin.boneNames.length; j++) {\n\t\t\tvar boneName = skin.boneNames[j];\n\t\t\tvar bone = rootBone.findByName(boneName);\n\n\t\t\tif (!bone) {\n\t\t\t\tbone = entity;\n\t\t\t}\n\n\t\t\tbones.push(bone);\n\t\t}\n\n\t\tthis.bones = bones;\n\t}\n\n\tinitSkin(skin) {\n\t\tthis.skin = skin;\n\t\tthis.bones = [];\n\t\tvar numBones = skin.inverseBindPose.length;\n\t\tthis.init(skin.device, numBones);\n\t\tthis.matrices = [];\n\n\t\tfor (var i = 0; i < numBones; i++) {\n\t\t\tthis.matrices[i] = new Mat4();\n\t\t}\n\t}\n\n\tuploadBones(device) {\n\t\tif (device.supportsBoneTextures) {\n\t\t\tthis.boneTexture.lock();\n\t\t\tthis.boneTexture.unlock();\n\t\t}\n\t}\n\n\t_updateMatrices(rootNode, skinUpdateIndex) {\n\t\tif (this._skinUpdateIndex !== skinUpdateIndex) {\n\t\t\tthis._skinUpdateIndex = skinUpdateIndex;\n\n\t\t\t_invMatrix.copy(rootNode.getWorldTransform()).invert();\n\n\t\t\tfor (var i = this.bones.length - 1; i >= 0; i--) {\n\t\t\t\tthis.matrices[i].mulAffine2(_invMatrix, this.bones[i].getWorldTransform());\n\t\t\t\tthis.matrices[i].mulAffine2(this.matrices[i], this.skin.inverseBindPose[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMatrices(rootNode, skinUpdateIndex) {\n\t\tif (this._updateBeforeCull) {\n\t\t\tthis._updateMatrices(rootNode, skinUpdateIndex);\n\t\t}\n\t}\n\n\tupdateMatrixPalette(rootNode, skinUpdateIndex) {\n\t\tthis._updateMatrices(rootNode, skinUpdateIndex);\n\n\t\tvar pe;\n\t\tvar mp = this.matrixPalette;\n\t\tvar base;\n\t\tvar count = this.bones.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tpe = this.matrices[i].data;\n\t\t\tbase = i * 12;\n\t\t\tmp[base] = pe[0];\n\t\t\tmp[base + 1] = pe[4];\n\t\t\tmp[base + 2] = pe[8];\n\t\t\tmp[base + 3] = pe[12];\n\t\t\tmp[base + 4] = pe[1];\n\t\t\tmp[base + 5] = pe[5];\n\t\t\tmp[base + 6] = pe[9];\n\t\t\tmp[base + 7] = pe[13];\n\t\t\tmp[base + 8] = pe[2];\n\t\t\tmp[base + 9] = pe[6];\n\t\t\tmp[base + 10] = pe[10];\n\t\t\tmp[base + 11] = pe[14];\n\t\t}\n\n\t\tthis.uploadBones(this.skin.device);\n\t}\n\n}\n\nclass SkinBatchInstance extends SkinInstance {\n\tconstructor(device, nodes, rootNode) {\n\t\tsuper();\n\t\tvar numBones = nodes.length;\n\t\tthis.init(device, numBones);\n\t\tthis.device = device;\n\t\tthis.rootNode = rootNode;\n\t\tthis.bones = nodes;\n\t}\n\n\tupdateMatrices(rootNode, skinUpdateIndex) {}\n\n\tupdateMatrixPalette(rootNode, skinUpdateIndex) {\n\t\tvar pe;\n\t\tvar mp = this.matrixPalette;\n\t\tvar base;\n\t\tvar count = this.bones.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tpe = this.bones[i].getWorldTransform().data;\n\t\t\tbase = i * 12;\n\t\t\tmp[base] = pe[0];\n\t\t\tmp[base + 1] = pe[4];\n\t\t\tmp[base + 2] = pe[8];\n\t\t\tmp[base + 3] = pe[12];\n\t\t\tmp[base + 4] = pe[1];\n\t\t\tmp[base + 5] = pe[5];\n\t\t\tmp[base + 6] = pe[9];\n\t\t\tmp[base + 7] = pe[13];\n\t\t\tmp[base + 8] = pe[2];\n\t\t\tmp[base + 9] = pe[6];\n\t\t\tmp[base + 10] = pe[10];\n\t\t\tmp[base + 11] = pe[14];\n\t\t}\n\n\t\tthis.uploadBones(this.device);\n\t}\n\n}\n\nclass RefCountedCache {\n\tconstructor() {\n\t\tthis.cache = new Map();\n\t}\n\n\tdestroy() {\n\t\tthis.cache.forEach((refCount, object) => {\n\t\t\tobject.destroy();\n\t\t});\n\t\tthis.cache.clear();\n\t}\n\n\tincRef(object) {\n\t\tconst refCount = (this.cache.get(object) || 0) + 1;\n\t\tthis.cache.set(object, refCount);\n\t}\n\n\tdecRef(object) {\n\t\tif (object) {\n\t\t\tlet refCount = this.cache.get(object);\n\n\t\t\tif (refCount) {\n\t\t\t\trefCount--;\n\n\t\t\t\tif (refCount === 0) {\n\t\t\t\t\tthis.cache.delete(object);\n\t\t\t\t\tobject.destroy();\n\t\t\t\t} else {\n\t\t\t\t\tthis.cache.set(object, refCount);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nvar scaleCompensatePosTransform = new Mat4();\nvar scaleCompensatePos = new Vec3();\nvar scaleCompensateRot = new Quat();\nvar scaleCompensateRot2 = new Quat();\nvar scaleCompensateScale = new Vec3();\nvar scaleCompensateScaleForParent = new Vec3();\nvar tmpMat4 = new Mat4();\nvar tmpQuat = new Quat();\nvar position$1 = new Vec3();\nvar invParentWtm$1 = new Mat4();\nvar rotation = new Quat();\nvar invParentRot = new Quat();\nvar matrix = new Mat4();\nvar target = new Vec3();\nvar up = new Vec3();\n\nclass GraphNode extends EventHandler {\n\tconstructor(name) {\n\t\tsuper();\n\t\tthis.name = typeof name === \"string\" ? name : \"Untitled\";\n\t\tthis.tags = new Tags(this);\n\t\tthis._labels = {};\n\t\tthis.localPosition = new Vec3(0, 0, 0);\n\t\tthis.localRotation = new Quat(0, 0, 0, 1);\n\t\tthis.localScale = new Vec3(1, 1, 1);\n\t\tthis.localEulerAngles = new Vec3(0, 0, 0);\n\t\tthis.position = new Vec3(0, 0, 0);\n\t\tthis.rotation = new Quat(0, 0, 0, 1);\n\t\tthis.eulerAngles = new Vec3(0, 0, 0);\n\t\tthis._scale = null;\n\t\tthis.localTransform = new Mat4();\n\t\tthis._dirtyLocal = false;\n\t\tthis._aabbVer = 0;\n\t\tthis._frozen = false;\n\t\tthis.worldTransform = new Mat4();\n\t\tthis._dirtyWorld = false;\n\t\tthis.normalMatrix = new Mat3();\n\t\tthis._dirtyNormal = true;\n\t\tthis._right = null;\n\t\tthis._up = null;\n\t\tthis._forward = null;\n\t\tthis._parent = null;\n\t\tthis._children = [];\n\t\tthis._graphDepth = 0;\n\t\tthis._enabled = true;\n\t\tthis._enabledInHierarchy = false;\n\t\tthis.scaleCompensation = false;\n\t}\n\n\tget right() {\n\t\tif (!this._right) {\n\t\t\tthis._right = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getX(this._right).normalize();\n\t}\n\n\tget up() {\n\t\tif (!this._up) {\n\t\t\tthis._up = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getY(this._up).normalize();\n\t}\n\n\tget forward() {\n\t\tif (!this._forward) {\n\t\t\tthis._forward = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getZ(this._forward).normalize().mulScalar(-1);\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled && this._enabledInHierarchy;\n\t}\n\n\tset enabled(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tif (!this._parent || this._parent.enabled) this._notifyHierarchyStateChanged(this, enabled);\n\t\t}\n\t}\n\n\tget parent() {\n\t\treturn this._parent;\n\t}\n\n\tget path() {\n\t\tvar parent = this._parent;\n\n\t\tif (parent) {\n\t\t\tvar path = this.name;\n\n\t\t\twhile (parent && parent._parent) {\n\t\t\t\tpath = parent.name + \"/\" + path;\n\t\t\t\tparent = parent._parent;\n\t\t\t}\n\n\t\t\treturn path;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tget root() {\n\t\tvar parent = this._parent;\n\t\tif (!parent) return this;\n\n\t\twhile (parent._parent) parent = parent._parent;\n\n\t\treturn parent;\n\t}\n\n\tget children() {\n\t\treturn this._children;\n\t}\n\n\tget graphDepth() {\n\t\treturn this._graphDepth;\n\t}\n\n\t_notifyHierarchyStateChanged(node, enabled) {\n\t\tnode._onHierarchyStateChanged(enabled);\n\n\t\tvar c = node._children;\n\n\t\tfor (var i = 0, len = c.length; i < len; i++) {\n\t\t\tif (c[i]._enabled) this._notifyHierarchyStateChanged(c[i], enabled);\n\t\t}\n\t}\n\n\t_onHierarchyStateChanged(enabled) {\n\t\tthis._enabledInHierarchy = enabled;\n\t\tif (enabled && !this._frozen) this._unfreezeParentToRoot();\n\t}\n\n\t_cloneInternal(clone) {\n\t\tclone.name = this.name;\n\t\tvar tags = this.tags._list;\n\t\tclone.tags.clear();\n\n\t\tfor (var i = 0; i < tags.length; i++) clone.tags.add(tags[i]);\n\n\t\tclone._labels = Object.assign({}, this._labels);\n\t\tclone.localPosition.copy(this.localPosition);\n\t\tclone.localRotation.copy(this.localRotation);\n\t\tclone.localScale.copy(this.localScale);\n\t\tclone.localEulerAngles.copy(this.localEulerAngles);\n\t\tclone.position.copy(this.position);\n\t\tclone.rotation.copy(this.rotation);\n\t\tclone.eulerAngles.copy(this.eulerAngles);\n\t\tclone.localTransform.copy(this.localTransform);\n\t\tclone._dirtyLocal = this._dirtyLocal;\n\t\tclone.worldTransform.copy(this.worldTransform);\n\t\tclone._dirtyWorld = this._dirtyWorld;\n\t\tclone._dirtyNormal = this._dirtyNormal;\n\t\tclone._aabbVer = this._aabbVer + 1;\n\t\tclone._enabled = this._enabled;\n\t\tclone.scaleCompensation = this.scaleCompensation;\n\t\tclone._enabledInHierarchy = false;\n\t}\n\n\tclone() {\n\t\tvar clone = new GraphNode();\n\n\t\tthis._cloneInternal(clone);\n\n\t\treturn clone;\n\t}\n\n\tcopy(source) {\n\t\tsource._cloneInternal(this);\n\n\t\treturn this;\n\t}\n\n\tfind(attr, value) {\n\t\tvar result,\n\t\t\t\tresults = [];\n\t\tvar len = this._children.length;\n\t\tvar i, descendants;\n\n\t\tif (attr instanceof Function) {\n\t\t\tvar fn = attr;\n\t\t\tresult = fn(this);\n\t\t\tif (result) results.push(this);\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tdescendants = this._children[i].find(fn);\n\t\t\t\tif (descendants.length) results = results.concat(descendants);\n\t\t\t}\n\t\t} else {\n\t\t\tvar testValue;\n\n\t\t\tif (this[attr]) {\n\t\t\t\tif (this[attr] instanceof Function) {\n\t\t\t\t\ttestValue = this[attr]();\n\t\t\t\t} else {\n\t\t\t\t\ttestValue = this[attr];\n\t\t\t\t}\n\n\t\t\t\tif (testValue === value) results.push(this);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tdescendants = this._children[i].find(attr, value);\n\t\t\t\tif (descendants.length) results = results.concat(descendants);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tfindOne(attr, value) {\n\t\tvar i;\n\t\tvar len = this._children.length;\n\t\tvar result = null;\n\n\t\tif (attr instanceof Function) {\n\t\t\tvar fn = attr;\n\t\t\tresult = fn(this);\n\t\t\tif (result) return this;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tresult = this._children[i].findOne(fn);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} else {\n\t\t\tvar testValue;\n\n\t\t\tif (this[attr]) {\n\t\t\t\tif (this[attr] instanceof Function) {\n\t\t\t\t\ttestValue = this[attr]();\n\t\t\t\t} else {\n\t\t\t\t\ttestValue = this[attr];\n\t\t\t\t}\n\n\t\t\t\tif (testValue === value) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tresult = this._children[i].findOne(attr, value);\n\t\t\t\tif (result !== null) return result;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByTag() {\n\t\tvar tags = this.tags._processArguments(arguments);\n\n\t\treturn this._findByTag(tags);\n\t}\n\n\t_findByTag(tags) {\n\t\tvar result = [];\n\t\tvar i,\n\t\t\t\tlen = this._children.length;\n\t\tvar descendants;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (this._children[i].tags._has(tags)) result.push(this._children[i]);\n\t\t\tdescendants = this._children[i]._findByTag(tags);\n\t\t\tif (descendants.length) result = result.concat(descendants);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfindByName(name) {\n\t\tif (this.name === name) return this;\n\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tvar found = this._children[i].findByName(name);\n\n\t\t\tif (found !== null) return found;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByPath(path) {\n\t\tvar parts;\n\n\t\tif (Array.isArray(path)) {\n\t\t\tif (path.length === 0) return null;\n\t\t\tparts = path;\n\t\t} else {\n\t\t\tparts = path.split('/');\n\t\t}\n\n\t\tvar currentParent = this;\n\t\tvar result = null;\n\n\t\tfor (var i = 0, imax = parts.length; i < imax && currentParent; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tresult = null;\n\t\t\tvar children = currentParent._children;\n\n\t\t\tfor (var j = 0, jmax = children.length; j < jmax; j++) {\n\t\t\t\tif (children[j].name === part) {\n\t\t\t\t\tresult = children[j];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentParent = result;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tforEach(callback, thisArg) {\n\t\tcallback.call(thisArg, this);\n\t\tvar children = this._children;\n\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tchildren[i].forEach(callback, thisArg);\n\t\t}\n\t}\n\n\tisDescendantOf(node) {\n\t\tvar parent = this._parent;\n\n\t\twhile (parent) {\n\t\t\tif (parent === node) return true;\n\t\t\tparent = parent._parent;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisAncestorOf(node) {\n\t\treturn node.isDescendantOf(this);\n\t}\n\n\tgetEulerAngles() {\n\t\tthis.getWorldTransform().getEulerAngles(this.eulerAngles);\n\t\treturn this.eulerAngles;\n\t}\n\n\tgetLocalEulerAngles() {\n\t\tthis.localRotation.getEulerAngles(this.localEulerAngles);\n\t\treturn this.localEulerAngles;\n\t}\n\n\tgetLocalPosition() {\n\t\treturn this.localPosition;\n\t}\n\n\tgetLocalRotation() {\n\t\treturn this.localRotation;\n\t}\n\n\tgetLocalScale() {\n\t\treturn this.localScale;\n\t}\n\n\tgetLocalTransform() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\treturn this.localTransform;\n\t}\n\n\tgetPosition() {\n\t\tthis.getWorldTransform().getTranslation(this.position);\n\t\treturn this.position;\n\t}\n\n\tgetRotation() {\n\t\tthis.rotation.setFromMat4(this.getWorldTransform());\n\t\treturn this.rotation;\n\t}\n\n\tgetScale() {\n\t\tif (!this._scale) {\n\t\t\tthis._scale = new Vec3();\n\t\t}\n\n\t\treturn this.getWorldTransform().getScale(this._scale);\n\t}\n\n\tgetWorldTransform() {\n\t\tif (!this._dirtyLocal && !this._dirtyWorld) return this.worldTransform;\n\t\tif (this._parent) this._parent.getWorldTransform();\n\n\t\tthis._sync();\n\n\t\treturn this.worldTransform;\n\t}\n\n\treparent(parent, index) {\n\t\tvar current = this._parent;\n\t\tif (current) current.removeChild(this);\n\n\t\tif (parent) {\n\t\t\tif (index >= 0) {\n\t\t\t\tparent.insertChild(this, index);\n\t\t\t} else {\n\t\t\t\tparent.addChild(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLocalEulerAngles(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localRotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\tthis.localRotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localPosition.copy(x);\n\t\t} else {\n\t\t\tthis.localPosition.set(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalRotation(x, y, z, w) {\n\t\tif (x instanceof Quat) {\n\t\t\tthis.localRotation.copy(x);\n\t\t} else {\n\t\t\tthis.localRotation.set(x, y, z, w);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetLocalScale(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localScale.copy(x);\n\t\t} else {\n\t\t\tthis.localScale.set(x, y, z);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_dirtifyLocal() {\n\t\tif (!this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = true;\n\t\t\tif (!this._dirtyWorld) this._dirtifyWorld();\n\t\t}\n\t}\n\n\t_unfreezeParentToRoot() {\n\t\tvar p = this._parent;\n\n\t\twhile (p) {\n\t\t\tp._frozen = false;\n\t\t\tp = p._parent;\n\t\t}\n\t}\n\n\t_dirtifyWorld() {\n\t\tif (!this._dirtyWorld) this._unfreezeParentToRoot();\n\n\t\tthis._dirtifyWorldInternal();\n\t}\n\n\t_dirtifyWorldInternal() {\n\t\tif (!this._dirtyWorld) {\n\t\t\tthis._frozen = false;\n\t\t\tthis._dirtyWorld = true;\n\n\t\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\t\tif (!this._children[i]._dirtyWorld) this._children[i]._dirtifyWorldInternal();\n\t\t\t}\n\t\t}\n\n\t\tthis._dirtyNormal = true;\n\t\tthis._aabbVer++;\n\t}\n\n\tsetPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localPosition.copy(position$1);\n\t\t} else {\n\t\t\tinvParentWtm$1.copy(this._parent.getWorldTransform()).invert();\n\t\t\tinvParentWtm$1.transformPoint(position$1, this.localPosition);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetRotation(x, y, z, w) {\n\t\tif (x instanceof Quat) {\n\t\t\trotation.copy(x);\n\t\t} else {\n\t\t\trotation.set(x, y, z, w);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localRotation.copy(rotation);\n\t\t} else {\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\tthis.localRotation.copy(invParentRot).mul(rotation);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\tsetEulerAngles(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localRotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\tthis.localRotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (this._parent !== null) {\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\tthis.localRotation.mul2(invParentRot, this.localRotation);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\taddChild(node) {\n\t\tif (node._parent !== null) throw new Error(\"GraphNode is already parented\");\n\n\t\tthis._children.push(node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\taddChildAndSaveTransform(node) {\n\t\tvar wPos = node.getPosition();\n\t\tvar wRot = node.getRotation();\n\t\tvar current = node._parent;\n\t\tif (current) current.removeChild(node);\n\t\tnode.setPosition(tmpMat4.copy(this.worldTransform).invert().transformPoint(wPos));\n\t\tnode.setRotation(tmpQuat.copy(this.getRotation()).invert().mul(wRot));\n\n\t\tthis._children.push(node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\tinsertChild(node, index) {\n\t\tif (node._parent !== null) throw new Error(\"GraphNode is already parented\");\n\n\t\tthis._children.splice(index, 0, node);\n\n\t\tthis._onInsertChild(node);\n\t}\n\n\t_onInsertChild(node) {\n\t\tnode._parent = this;\n\t\tvar enabledInHierarchy = node._enabled && this.enabled;\n\n\t\tif (node._enabledInHierarchy !== enabledInHierarchy) {\n\t\t\tnode._enabledInHierarchy = enabledInHierarchy;\n\n\t\t\tnode._notifyHierarchyStateChanged(node, enabledInHierarchy);\n\t\t}\n\n\t\tnode._updateGraphDepth();\n\n\t\tnode._dirtifyWorld();\n\n\t\tif (this._frozen) node._unfreezeParentToRoot();\n\t\tif (node.fire) node.fire('insert', this);\n\t\tif (this.fire) this.fire('childinsert', node);\n\t}\n\n\t_updateGraphDepth() {\n\t\tif (this._parent) {\n\t\t\tthis._graphDepth = this._parent._graphDepth + 1;\n\t\t} else {\n\t\t\tthis._graphDepth = 0;\n\t\t}\n\n\t\tfor (var i = 0, len = this._children.length; i < len; i++) {\n\t\t\tthis._children[i]._updateGraphDepth();\n\t\t}\n\t}\n\n\tremoveChild(child) {\n\t\tvar i;\n\t\tvar length = this._children.length;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\tif (this._children[i] === child) {\n\t\t\t\tthis._children.splice(i, 1);\n\n\t\t\t\tchild._parent = null;\n\t\t\t\tif (child.fire) child.fire('remove', this);\n\t\t\t\tif (this.fire) this.fire('childremove', child);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t_sync() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\tif (this._dirtyWorld) {\n\t\t\tif (this._parent === null) {\n\t\t\t\tthis.worldTransform.copy(this.localTransform);\n\t\t\t} else {\n\t\t\t\tif (this.scaleCompensation) {\n\t\t\t\t\tvar parentWorldScale;\n\t\t\t\t\tvar parent = this._parent;\n\t\t\t\t\tvar scale = this.localScale;\n\t\t\t\t\tvar parentToUseScaleFrom = parent;\n\n\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\twhile (parentToUseScaleFrom && parentToUseScaleFrom.scaleCompensation) {\n\t\t\t\t\t\t\tparentToUseScaleFrom = parentToUseScaleFrom._parent;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\t\tparentToUseScaleFrom = parentToUseScaleFrom._parent;\n\n\t\t\t\t\t\t\tif (parentToUseScaleFrom) {\n\t\t\t\t\t\t\t\tparentWorldScale = parentToUseScaleFrom.worldTransform.getScale();\n\t\t\t\t\t\t\t\tscaleCompensateScale.mul2(parentWorldScale, this.localScale);\n\t\t\t\t\t\t\t\tscale = scaleCompensateScale;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tscaleCompensateRot2.setFromMat4(parent.worldTransform);\n\t\t\t\t\tscaleCompensateRot.mul2(scaleCompensateRot2, this.localRotation);\n\t\t\t\t\tvar tmatrix = parent.worldTransform;\n\n\t\t\t\t\tif (parent.scaleCompensation) {\n\t\t\t\t\t\tscaleCompensateScaleForParent.mul2(parentWorldScale, parent.getLocalScale());\n\t\t\t\t\t\tscaleCompensatePosTransform.setTRS(parent.worldTransform.getTranslation(scaleCompensatePos), scaleCompensateRot2, scaleCompensateScaleForParent);\n\t\t\t\t\t\ttmatrix = scaleCompensatePosTransform;\n\t\t\t\t\t}\n\n\t\t\t\t\ttmatrix.transformPoint(this.localPosition, scaleCompensatePos);\n\t\t\t\t\tthis.worldTransform.setTRS(scaleCompensatePos, scaleCompensateRot, scale);\n\t\t\t\t} else {\n\t\t\t\t\tthis.worldTransform.mulAffine2(this._parent.worldTransform, this.localTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyWorld = false;\n\t\t}\n\t}\n\n\tsyncHierarchy() {\n\t\tif (!this._enabled) return;\n\t\tif (this._frozen) return;\n\t\tthis._frozen = true;\n\n\t\tif (this._dirtyLocal || this._dirtyWorld) {\n\t\t\tthis._sync();\n\t\t}\n\n\t\tvar children = this._children;\n\n\t\tfor (var i = 0, len = children.length; i < len; i++) {\n\t\t\tchildren[i].syncHierarchy();\n\t\t}\n\t}\n\n\tlookAt(x, y, z, ux = 0, uy = 1, uz = 0) {\n\t\tif (x instanceof Vec3) {\n\t\t\ttarget.copy(x);\n\n\t\t\tif (y instanceof Vec3) {\n\t\t\t\tup.copy(y);\n\t\t\t} else {\n\t\t\t\tup.copy(Vec3.UP);\n\t\t\t}\n\t\t} else if (z === undefined) {\n\t\t\treturn;\n\t\t} else {\n\t\t\ttarget.set(x, y, z);\n\t\t\tup.set(ux, uy, uz);\n\t\t}\n\n\t\tmatrix.setLookAt(this.getPosition(), target, up);\n\t\trotation.setFromMat4(matrix);\n\t\tthis.setRotation(rotation);\n\t}\n\n\ttranslate(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tposition$1.add(this.getPosition());\n\t\tthis.setPosition(position$1);\n\t}\n\n\ttranslateLocal(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tposition$1.copy(x);\n\t\t} else {\n\t\t\tposition$1.set(x, y, z);\n\t\t}\n\n\t\tthis.localRotation.transformVector(position$1, position$1);\n\t\tthis.localPosition.add(position$1);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\trotate(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\trotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\trotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tif (this._parent === null) {\n\t\t\tthis.localRotation.mul2(rotation, this.localRotation);\n\t\t} else {\n\t\t\tvar rot = this.getRotation();\n\n\t\t\tvar parentRot = this._parent.getRotation();\n\n\t\t\tinvParentRot.copy(parentRot).invert();\n\t\t\trotation.mul2(invParentRot, rotation);\n\t\t\tthis.localRotation.mul2(rotation, rot);\n\t\t}\n\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\trotateLocal(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\trotation.setFromEulerAngles(x.x, x.y, x.z);\n\t\t} else {\n\t\t\trotation.setFromEulerAngles(x, y, z);\n\t\t}\n\n\t\tthis.localRotation.mul(rotation);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n}\n\nvar _tmpAabb = new BoundingBox();\n\nvar _tempBoneAabb = new BoundingBox();\n\nvar _tempSphere = new BoundingSphere();\n\nvar _meshSet = new Set();\n\nclass InstancingData {\n\tconstructor(numObjects) {\n\t\tthis.count = numObjects;\n\t\tthis.vertexBuffer = null;\n\t}\n\n}\n\nclass Command {\n\tconstructor(layer, blendType, command) {\n\t\tthis._key = [];\n\t\tthis._key[SORTKEY_FORWARD] = getKey(layer, blendType, true, 0);\n\t\tthis.command = command;\n\t}\n\n\tget key() {\n\t\treturn this._key[SORTKEY_FORWARD];\n\t}\n\n\tset key(val) {\n\t\tthis._key[SORTKEY_FORWARD] = val;\n\t}\n\n}\n\nclass MeshInstance {\n\tconstructor(mesh, material, node = null) {\n\t\tif (mesh instanceof GraphNode) {\n\t\t\tconst temp = mesh;\n\t\t\tmesh = material;\n\t\t\tmaterial = node;\n\t\t\tnode = temp;\n\t\t}\n\n\t\tthis._key = [0, 0];\n\t\tthis._shader = [null, null, null];\n\t\tthis.isStatic = false;\n\t\tthis._staticLightList = null;\n\t\tthis._staticSource = null;\n\t\tthis.node = node;\n\t\tthis._mesh = mesh;\n\t\tmesh.incRefCount();\n\t\tthis.material = material;\n\t\tthis._shaderDefs = MASK_DYNAMIC << 16;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasUv0 ? SHADERDEF_UV0 : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasUv1 ? SHADERDEF_UV1 : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasColor ? SHADERDEF_VCOLOR : 0;\n\t\tthis._shaderDefs |= mesh.vertexBuffer.format.hasTangents ? SHADERDEF_TANGENTS : 0;\n\t\tthis._lightHash = 0;\n\t\tthis.visible = true;\n\t\tthis.layer = LAYER_WORLD;\n\t\tthis._renderStyle = RENDERSTYLE_SOLID;\n\t\tthis.castShadow = false;\n\t\tthis._receiveShadow = true;\n\t\tthis._screenSpace = false;\n\t\tthis._noDepthDrawGl1 = false;\n\t\tthis.cull = true;\n\t\tthis.pick = true;\n\t\tthis._updateAabb = true;\n\t\tthis._updateAabbFunc = null;\n\t\tthis._calculateSortDistance = null;\n\t\tthis.updateKey();\n\t\tthis._skinInstance = null;\n\t\tthis._morphInstance = null;\n\t\tthis.instancingData = null;\n\t\tthis._customAabb = null;\n\t\tthis.aabb = new BoundingBox();\n\t\tthis._aabbVer = -1;\n\t\tthis.drawOrder = 0;\n\t\tthis.visibleThisFrame = 0;\n\t\tthis.isVisibleFunc = null;\n\t\tthis.parameters = {};\n\t\tthis.stencilFront = null;\n\t\tthis.stencilBack = null;\n\t\tthis.flipFaces = false;\n\t}\n\n\tstatic incRefLightmap(texture) {\n\t\tthis._lightmapCache.incRef(texture);\n\t}\n\n\tstatic decRefLightmap(texture) {\n\t\tthis._lightmapCache.decRef(texture);\n\t}\n\n\tstatic destroyLightmapCache() {\n\t\tthis._lightmapCache.destroy();\n\t}\n\n\tget renderStyle() {\n\t\treturn this._renderStyle;\n\t}\n\n\tset renderStyle(renderStyle) {\n\t\tthis._renderStyle = renderStyle;\n\t\tthis.mesh.prepareRenderState(renderStyle);\n\t}\n\n\tstatic _prepareRenderStyleForArray(meshInstances, renderStyle) {\n\t\tif (meshInstances) {\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i]._renderStyle = renderStyle;\n\t\t\t\tconst mesh = meshInstances[i].mesh;\n\n\t\t\t\tif (!_meshSet.has(mesh)) {\n\t\t\t\t\t_meshSet.add(mesh);\n\n\t\t\t\t\tmesh.prepareRenderState(renderStyle);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_meshSet.clear();\n\t\t}\n\t}\n\n\tget mesh() {\n\t\treturn this._mesh;\n\t}\n\n\tset mesh(mesh) {\n\t\tif (mesh === this._mesh) return;\n\n\t\tif (this._mesh) {\n\t\t\tthis._mesh.decRefCount();\n\t\t}\n\n\t\tthis._mesh = mesh;\n\n\t\tif (mesh) {\n\t\t\tmesh.incRefCount();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (!this._updateAabb) {\n\t\t\treturn this._aabb;\n\t\t}\n\n\t\tif (this._updateAabbFunc) {\n\t\t\treturn this._updateAabbFunc(this._aabb);\n\t\t}\n\n\t\tlet localAabb = this._customAabb;\n\t\tlet toWorldSpace = !!localAabb;\n\n\t\tif (!localAabb) {\n\t\t\tlocalAabb = _tmpAabb;\n\n\t\t\tif (this.skinInstance) {\n\t\t\t\tif (!this.mesh.boneAabb) {\n\t\t\t\t\tconst morphTargets = this._morphInstance ? this._morphInstance.morph._targets : null;\n\n\t\t\t\t\tthis.mesh._initBoneAabbs(morphTargets);\n\t\t\t\t}\n\n\t\t\t\tconst boneUsed = this.mesh.boneUsed;\n\t\t\t\tlet first = true;\n\n\t\t\t\tfor (let i = 0; i < this.mesh.boneAabb.length; i++) {\n\t\t\t\t\tif (boneUsed[i]) {\n\t\t\t\t\t\t_tempBoneAabb.setFromTransformedAabb(this.mesh.boneAabb[i], this.skinInstance.matrices[i]);\n\n\t\t\t\t\t\tif (first) {\n\t\t\t\t\t\t\tfirst = false;\n\t\t\t\t\t\t\tlocalAabb.center.copy(_tempBoneAabb.center);\n\t\t\t\t\t\t\tlocalAabb.halfExtents.copy(_tempBoneAabb.halfExtents);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlocalAabb.add(_tempBoneAabb);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoWorldSpace = true;\n\t\t\t} else if (this.node._aabbVer !== this._aabbVer) {\n\t\t\t\tif (this.mesh) {\n\t\t\t\t\tlocalAabb.center.copy(this.mesh.aabb.center);\n\t\t\t\t\tlocalAabb.halfExtents.copy(this.mesh.aabb.halfExtents);\n\t\t\t\t} else {\n\t\t\t\t\tlocalAabb.center.set(0, 0, 0);\n\t\t\t\t\tlocalAabb.halfExtents.set(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif (this.mesh && this.mesh.morph) {\n\t\t\t\t\tlocalAabb._expand(this.mesh.morph.aabb.getMin(), this.mesh.morph.aabb.getMax());\n\t\t\t\t}\n\n\t\t\t\ttoWorldSpace = true;\n\t\t\t\tthis._aabbVer = this.node._aabbVer;\n\t\t\t}\n\t\t}\n\n\t\tif (toWorldSpace) {\n\t\t\tthis._aabb.setFromTransformedAabb(localAabb, this.node.getWorldTransform());\n\t\t}\n\n\t\treturn this._aabb;\n\t}\n\n\tset aabb(aabb) {\n\t\tthis._aabb = aabb;\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(material) {\n\t\tfor (let i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\n\t\tvar prevMat = this._material;\n\n\t\tif (prevMat) {\n\t\t\tprevMat.removeMeshInstanceRef(this);\n\t\t}\n\n\t\tthis._material = material;\n\n\t\tif (this._material) {\n\t\t\tthis._material.addMeshInstanceRef(this);\n\n\t\t\tthis.updateKey();\n\t\t\tvar prevBlend = prevMat && prevMat.blendType !== BLEND_NONE;\n\t\t\tvar thisBlend = this._material.blendType !== BLEND_NONE;\n\n\t\t\tif (prevBlend !== thisBlend) {\n\t\t\t\tvar scene = this._material._scene;\n\t\t\t\tif (!scene && prevMat && prevMat._scene) scene = prevMat._scene;\n\n\t\t\t\tif (scene) {\n\t\t\t\t\tscene.layers._dirtyBlend = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._material._dirtyBlend = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget layer() {\n\t\treturn this._layer;\n\t}\n\n\tset layer(layer) {\n\t\tthis._layer = layer;\n\t\tthis.updateKey();\n\t}\n\n\tget calculateSortDistance() {\n\t\treturn this._calculateSortDistance;\n\t}\n\n\tset calculateSortDistance(calculateSortDistance) {\n\t\tthis._calculateSortDistance = calculateSortDistance;\n\t}\n\n\tget receiveShadow() {\n\t\treturn this._receiveShadow;\n\t}\n\n\tset receiveShadow(val) {\n\t\tthis._receiveShadow = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs & ~SHADERDEF_NOSHADOW : this._shaderDefs | SHADERDEF_NOSHADOW;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t\tthis._shader[SHADER_FORWARDHDR] = null;\n\t}\n\n\tget skinInstance() {\n\t\treturn this._skinInstance;\n\t}\n\n\tset skinInstance(val) {\n\t\tthis._skinInstance = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs | SHADERDEF_SKIN : this._shaderDefs & ~SHADERDEF_SKIN;\n\n\t\tfor (var i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\n\t\tthis._setupSkinUpdate();\n\t}\n\n\tget morphInstance() {\n\t\treturn this._morphInstance;\n\t}\n\n\tset morphInstance(val) {\n\t\tthis._morphInstance = val;\n\n\t\tif (this._morphInstance) {\n\t\t\tthis._morphInstance.meshInstance = this;\n\t\t}\n\n\t\tthis._shaderDefs = val && val.morph.useTextureMorph ? this._shaderDefs | SHADERDEF_MORPH_TEXTURE_BASED : this._shaderDefs & ~SHADERDEF_MORPH_TEXTURE_BASED;\n\t\tthis._shaderDefs = val && val.morph.morphPositions ? this._shaderDefs | SHADERDEF_MORPH_POSITION : this._shaderDefs & ~SHADERDEF_MORPH_POSITION;\n\t\tthis._shaderDefs = val && val.morph.morphNormals ? this._shaderDefs | SHADERDEF_MORPH_NORMAL : this._shaderDefs & ~SHADERDEF_MORPH_NORMAL;\n\n\t\tfor (var i = 0; i < this._shader.length; i++) {\n\t\t\tthis._shader[i] = null;\n\t\t}\n\t}\n\n\tget screenSpace() {\n\t\treturn this._screenSpace;\n\t}\n\n\tset screenSpace(val) {\n\t\tthis._screenSpace = val;\n\t\tthis._shaderDefs = val ? this._shaderDefs | SHADERDEF_SCREENSPACE : this._shaderDefs & ~SHADERDEF_SCREENSPACE;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t}\n\n\tget key() {\n\t\treturn this._key[SORTKEY_FORWARD];\n\t}\n\n\tset key(val) {\n\t\tthis._key[SORTKEY_FORWARD] = val;\n\t}\n\n\tget mask() {\n\t\treturn this._shaderDefs >> 16;\n\t}\n\n\tset mask(val) {\n\t\tvar toggles = this._shaderDefs & 0x0000FFFF;\n\t\tthis._shaderDefs = toggles | val << 16;\n\t\tthis._shader[SHADER_FORWARD] = null;\n\t\tthis._shader[SHADER_FORWARDHDR] = null;\n\t}\n\n\tget instancingCount() {\n\t\treturn this.instancingData ? this.instancingData.count : 0;\n\t}\n\n\tset instancingCount(value) {\n\t\tif (this.instancingData) this.instancingData.count = value;\n\t}\n\n\tdestroy() {\n\t\tconst mesh = this.mesh;\n\n\t\tif (mesh) {\n\t\t\tthis.mesh = null;\n\n\t\t\tif (mesh.getRefCount() < 1) {\n\t\t\t\tmesh.destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], null);\n\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], null);\n\n\t\tif (this._skinInstance) {\n\t\t\tthis._skinInstance.destroy();\n\n\t\t\tthis._skinInstance = null;\n\t\t}\n\n\t\tif (this.morphInstance) {\n\t\t\tthis.morphInstance.destroy();\n\t\t\tthis.morphInstance = null;\n\t\t}\n\n\t\tthis.material = null;\n\t}\n\n\tsyncAabb() {}\n\n\t_isVisible(camera) {\n\t\tif (this.visible) {\n\t\t\tif (this.isVisibleFunc) {\n\t\t\t\treturn this.isVisibleFunc(camera);\n\t\t\t}\n\n\t\t\t_tempSphere.center = this.aabb.center;\n\t\t\t_tempSphere.radius = this._aabb.halfExtents.length();\n\t\t\treturn camera.frustum.containsSphere(_tempSphere);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tupdateKey() {\n\t\tvar material = this.material;\n\t\tthis._key[SORTKEY_FORWARD] = getKey(this.layer, material.alphaToCoverage || material.alphaTest ? BLEND_NORMAL : material.blendType, false, material.id);\n\t}\n\n\tsetInstancing(vertexBuffer) {\n\t\tif (vertexBuffer) {\n\t\t\tthis.instancingData = new InstancingData(vertexBuffer.numVertices);\n\t\t\tthis.instancingData.vertexBuffer = vertexBuffer;\n\t\t\tvertexBuffer.instancing = true;\n\t\t\tthis.cull = false;\n\t\t} else {\n\t\t\tthis.instancingData = null;\n\t\t\tthis.cull = true;\n\t\t}\n\t}\n\n\tclearParameters() {\n\t\tthis.parameters = {};\n\t}\n\n\tgetParameters() {\n\t\treturn this.parameters;\n\t}\n\n\tgetParameter(name) {\n\t\treturn this.parameters[name];\n\t}\n\n\tsetParameter(name, data, passFlags = -262141) {\n\t\tif (data === undefined && typeof name === 'object') {\n\t\t\tvar uniformObject = name;\n\n\t\t\tif (uniformObject.length) {\n\t\t\t\tfor (var i = 0; i < uniformObject.length; i++) {\n\t\t\t\t\tthis.setParameter(uniformObject[i]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tname = uniformObject.name;\n\t\t\tdata = uniformObject.value;\n\t\t}\n\n\t\tvar param = this.parameters[name];\n\n\t\tif (param) {\n\t\t\tparam.data = data;\n\t\t\tparam.passFlags = passFlags;\n\t\t} else {\n\t\t\tthis.parameters[name] = {\n\t\t\t\tscopeId: null,\n\t\t\t\tdata: data,\n\t\t\t\tpassFlags: passFlags\n\t\t\t};\n\t\t}\n\t}\n\n\tsetRealtimeLightmap(name, texture) {\n\t\tconst old = this.getParameter(name);\n\t\tif (old === texture) return;\n\n\t\tif (old) {\n\t\t\tMeshInstance.decRefLightmap(old.data);\n\t\t}\n\n\t\tif (texture) {\n\t\t\tMeshInstance.incRefLightmap(texture);\n\t\t\tthis.setParameter(name, texture);\n\t\t} else {\n\t\t\tthis.deleteParameter(name);\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (this.parameters[name]) {\n\t\t\tdelete this.parameters[name];\n\t\t}\n\t}\n\n\tsetParameters(device, passFlag) {\n\t\tvar parameter,\n\t\t\t\tparameters = this.parameters;\n\n\t\tfor (var paramName in parameters) {\n\t\t\tparameter = parameters[paramName];\n\n\t\t\tif (parameter.passFlags & passFlag) {\n\t\t\t\tif (!parameter.scopeId) {\n\t\t\t\t\tparameter.scopeId = device.scope.resolve(paramName);\n\t\t\t\t}\n\n\t\t\t\tparameter.scopeId.setValue(parameter.data);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetLightmapped(value) {\n\t\tif (value) {\n\t\t\tthis.mask = (this.mask | MASK_BAKED) & ~(MASK_DYNAMIC | MASK_LIGHTMAP);\n\t\t} else {\n\t\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], null);\n\t\t\tthis.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], null);\n\t\t\tthis._shaderDefs &= ~(SHADERDEF_LM | SHADERDEF_DIRLM);\n\t\t\tthis.mask = (this.mask | MASK_DYNAMIC) & ~(MASK_BAKED | MASK_LIGHTMAP);\n\t\t}\n\t}\n\n\tsetCustomAabb(aabb) {\n\t\tif (aabb) {\n\t\t\tif (this._customAabb) {\n\t\t\t\tthis._customAabb.copy(aabb);\n\t\t\t} else {\n\t\t\t\tthis._customAabb = aabb.clone();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._customAabb = null;\n\t\t\tthis._aabbVer = -1;\n\t\t}\n\n\t\tthis._setupSkinUpdate();\n\t}\n\n\t_setupSkinUpdate() {\n\t\tif (this._skinInstance) {\n\t\t\tthis._skinInstance._updateBeforeCull = !this._customAabb;\n\t\t}\n\t}\n\n}\n\nMeshInstance.lightmapParamNames = [\"texture_lightMap\", \"texture_dirLightMap\"];\nMeshInstance._lightmapCache = new RefCountedCache();\n\nfunction getKey(layer, blendType, isCommand, materialId) {\n\treturn (layer & 0x0f) << 27 | (blendType === BLEND_NONE ? 1 : 0) << 26 | (isCommand ? 1 : 0) << 25 | (materialId & 0x1ffffff) << 0;\n}\n\nfunction paramsIdentical(a, b) {\n\tif (a && !b) return false;\n\tif (!a && b) return false;\n\ta = a.data;\n\tb = b.data;\n\tif (a === b) return true;\n\n\tif (a instanceof Float32Array && b instanceof Float32Array) {\n\t\tif (a.length !== b.length) return false;\n\n\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\tif (a[i] !== b[i]) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction equalParamSets(params1, params2) {\n\tvar param;\n\n\tfor (param in params1) {\n\t\tif (params1.hasOwnProperty(param) && !paramsIdentical(params1[param], params2[param])) return false;\n\t}\n\n\tfor (param in params2) {\n\t\tif (params2.hasOwnProperty(param) && !paramsIdentical(params2[param], params1[param])) return false;\n\t}\n\n\treturn true;\n}\n\nfunction equalLightLists(lightList1, lightList2) {\n\tvar k;\n\n\tfor (k = 0; k < lightList1.length; k++) {\n\t\tif (lightList2.indexOf(lightList1[k]) < 0) return false;\n\t}\n\n\tfor (k = 0; k < lightList2.length; k++) {\n\t\tif (lightList1.indexOf(lightList2[k]) < 0) return false;\n\t}\n\n\treturn true;\n}\n\nvar mat3 = new Mat3();\nvar worldMatX$1 = new Vec3();\nvar worldMatY$1 = new Vec3();\nvar worldMatZ$1 = new Vec3();\n\nfunction getScaleSign(mi) {\n\tvar wt = mi.node.worldTransform;\n\twt.getX(worldMatX$1);\n\twt.getY(worldMatY$1);\n\twt.getZ(worldMatZ$1);\n\tworldMatX$1.cross(worldMatX$1, worldMatY$1);\n\treturn worldMatX$1.dot(worldMatZ$1) >= 0 ? 1 : -1;\n}\n\nclass BatchManager {\n\tconstructor(device, root, scene) {\n\t\tthis.device = device;\n\t\tthis.rootNode = root;\n\t\tthis.scene = scene;\n\t\tthis._init = false;\n\t\tthis._batchGroups = {};\n\t\tthis._batchGroupCounter = 0;\n\t\tthis._batchList = [];\n\t\tthis._dirtyGroups = [];\n\t}\n\n\tdestroy() {\n\t\tthis.device = null;\n\t\tthis.rootNode = null;\n\t\tthis.scene = null;\n\t\tthis._batchGroups = {};\n\t\tthis._batchList = [];\n\t\tthis._dirtyGroups = [];\n\t}\n\n\taddGroup(name, dynamic, maxAabbSize, id, layers) {\n\t\tif (id === undefined) {\n\t\t\tid = this._batchGroupCounter;\n\t\t\tthis._batchGroupCounter++;\n\t\t}\n\n\t\tif (this._batchGroups[id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar group;\n\t\tthis._batchGroups[id] = group = new BatchGroup(id, name, dynamic, maxAabbSize, layers);\n\t\treturn group;\n\t}\n\n\tremoveGroup(id) {\n\t\tif (!this._batchGroups[id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar newBatchList = [];\n\n\t\tfor (let i = 0; i < this._batchList.length; i++) {\n\t\t\tif (this._batchList[i].batchGroupId == id) {\n\t\t\t\tthis.destroyBatch(this._batchList[i]);\n\t\t\t} else {\n\t\t\t\tnewBatchList.push(this._batchList[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis._batchList = newBatchList;\n\n\t\tthis._removeModelsFromBatchGroup(this.rootNode, id);\n\n\t\tdelete this._batchGroups[id];\n\t}\n\n\tmarkGroupDirty(id) {\n\t\tif (this._dirtyGroups.indexOf(id) < 0) {\n\t\t\tthis._dirtyGroups.push(id);\n\t\t}\n\t}\n\n\tgetGroupByName(name) {\n\t\tvar groups = this._batchGroups;\n\n\t\tfor (var group in groups) {\n\t\t\tif (!groups.hasOwnProperty(group)) continue;\n\n\t\t\tif (groups[group].name === name) {\n\t\t\t\treturn groups[group];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetBatches(batchGroupId) {\n\t\tvar results = [];\n\t\tvar len = this._batchList.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar batch = this._batchList[i];\n\n\t\t\tif (batch.batchGroupId === batchGroupId) {\n\t\t\t\tresults.push(batch);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\t_removeModelsFromBatchGroup(node, id) {\n\t\tif (!node.enabled) return;\n\n\t\tif (node.model && node.model.batchGroupId === id) {\n\t\t\tnode.model.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.render && node.render.batchGroupId === id) {\n\t\t\tnode.render.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.element && node.element.batchGroupId === id) {\n\t\t\tnode.element.batchGroupId = -1;\n\t\t}\n\n\t\tif (node.sprite && node.sprite.batchGroupId === id) {\n\t\t\tnode.sprite.batchGroupId = -1;\n\t\t}\n\n\t\tfor (var i = 0; i < node._children.length; i++) {\n\t\t\tthis._removeModelsFromBatchGroup(node._children[i], id);\n\t\t}\n\t}\n\n\tinsert(type, groupId, node) {\n\t\tvar group = this._batchGroups[groupId];\n\n\t\tif (group) {\n\t\t\tif (group._obj[type].indexOf(node) < 0) {\n\t\t\t\tgroup._obj[type].push(node);\n\n\t\t\t\tthis.markGroupDirty(groupId);\n\t\t\t}\n\t\t}\n\t}\n\n\tremove(type, groupId, node) {\n\t\tvar group = this._batchGroups[groupId];\n\n\t\tif (group) {\n\t\t\tvar idx = group._obj[type].indexOf(node);\n\n\t\t\tif (idx >= 0) {\n\t\t\t\tgroup._obj[type].splice(idx, 1);\n\n\t\t\t\tthis.markGroupDirty(groupId);\n\t\t\t}\n\t\t}\n\t}\n\n\t_extractRender(node, arr, group, groupMeshInstances) {\n\t\tif (node.render) {\n\t\t\tif (node.render.isStatic) {\n\t\t\t\tconst drawCalls = this.scene.drawCalls;\n\t\t\t\tvar nodeMeshInstances = node.render.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < drawCalls.length; i++) {\n\t\t\t\t\tif (!drawCalls[i]._staticSource) continue;\n\t\t\t\t\tif (nodeMeshInstances.indexOf(drawCalls[i]._staticSource) < 0) continue;\n\t\t\t\t\tarr.push(drawCalls[i]);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < nodeMeshInstances.length; i++) {\n\t\t\t\t\tif (drawCalls.indexOf(nodeMeshInstances[i]) >= 0) {\n\t\t\t\t\t\tarr.push(nodeMeshInstances[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr = groupMeshInstances[node.render.batchGroupId] = arr.concat(node.render.meshInstances);\n\t\t\t}\n\n\t\t\tnode.render.removeFromLayers();\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t_extractModel(node, arr, group, groupMeshInstances) {\n\t\tif (node.model && node.model.model) {\n\t\t\tif (node.model.isStatic) {\n\t\t\t\tconst drawCalls = this.scene.drawCalls;\n\t\t\t\tconst nodeMeshInstances = node.model.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < drawCalls.length; i++) {\n\t\t\t\t\tif (!drawCalls[i]._staticSource) continue;\n\t\t\t\t\tif (nodeMeshInstances.indexOf(drawCalls[i]._staticSource) < 0) continue;\n\t\t\t\t\tarr.push(drawCalls[i]);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < nodeMeshInstances.length; i++) {\n\t\t\t\t\tif (drawCalls.indexOf(nodeMeshInstances[i]) >= 0) {\n\t\t\t\t\t\tarr.push(nodeMeshInstances[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr = groupMeshInstances[node.model.batchGroupId] = arr.concat(node.model.meshInstances);\n\t\t\t}\n\n\t\t\tnode.model.removeModelFromLayers();\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\t_extractElement(node, arr, group) {\n\t\tif (!node.element) return;\n\t\tvar valid = false;\n\n\t\tif (node.element._text && node.element._text._model.meshInstances.length > 0) {\n\t\t\tarr.push(node.element._text._model.meshInstances[0]);\n\t\t\tnode.element.removeModelFromLayers(node.element._text._model);\n\t\t\tvalid = true;\n\t\t} else if (node.element._image) {\n\t\t\tarr.push(node.element._image._renderable.meshInstance);\n\t\t\tnode.element.removeModelFromLayers(node.element._image._renderable.model);\n\n\t\t\tif (node.element._image._renderable.unmaskMeshInstance) {\n\t\t\t\tarr.push(node.element._image._renderable.unmaskMeshInstance);\n\n\t\t\t\tif (!node.element._image._renderable.unmaskMeshInstance.stencilFront || !node.element._image._renderable.unmaskMeshInstance.stencilBack) {\n\t\t\t\t\tnode.element._dirtifyMask();\n\n\t\t\t\t\tnode.element._onPrerender();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvalid = true;\n\t\t}\n\n\t\tif (valid) {\n\t\t\tgroup._ui = true;\n\t\t}\n\t}\n\n\t_collectAndRemoveMeshInstances(groupMeshInstances, groupIds) {\n\t\tfor (let g = 0; g < groupIds.length; g++) {\n\t\t\tconst id = groupIds[g];\n\t\t\tconst group = this._batchGroups[id];\n\t\t\tif (!group) continue;\n\t\t\tlet arr = groupMeshInstances[id];\n\t\t\tif (!arr) arr = groupMeshInstances[id] = [];\n\n\t\t\tfor (let m = 0; m < group._obj.model.length; m++) {\n\t\t\t\tarr = this._extractModel(group._obj.model[m], arr, group, groupMeshInstances);\n\t\t\t}\n\n\t\t\tfor (let r = 0; r < group._obj.render.length; r++) {\n\t\t\t\tarr = this._extractRender(group._obj.render[r], arr, group, groupMeshInstances);\n\t\t\t}\n\n\t\t\tfor (let e = 0; e < group._obj.element.length; e++) {\n\t\t\t\tthis._extractElement(group._obj.element[e], arr, group);\n\t\t\t}\n\n\t\t\tfor (let s = 0; s < group._obj.sprite.length; s++) {\n\t\t\t\tconst node = group._obj.sprite[s];\n\n\t\t\t\tif (node.sprite && node.sprite._meshInstance && (group.dynamic || node.sprite.sprite._renderMode === SPRITE_RENDERMODE_SIMPLE)) {\n\t\t\t\t\tarr.push(node.sprite._meshInstance);\n\t\t\t\t\tnode.sprite.removeModelFromLayers();\n\t\t\t\t\tgroup._sprite = true;\n\t\t\t\t\tnode.sprite._batchGroup = group;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerate(groupIds) {\n\t\tvar groupMeshInstances = {};\n\n\t\tif (!groupIds) {\n\t\t\tgroupIds = Object.keys(this._batchGroups);\n\t\t}\n\n\t\tvar newBatchList = [];\n\n\t\tfor (let i = 0; i < this._batchList.length; i++) {\n\t\t\tif (groupIds.indexOf(this._batchList[i].batchGroupId) < 0) {\n\t\t\t\tnewBatchList.push(this._batchList[i]);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.destroyBatch(this._batchList[i]);\n\t\t}\n\n\t\tthis._batchList = newBatchList;\n\n\t\tthis._collectAndRemoveMeshInstances(groupMeshInstances, groupIds);\n\n\t\tif (groupIds === this._dirtyGroups) {\n\t\t\tthis._dirtyGroups.length = 0;\n\t\t} else {\n\t\t\tvar newDirtyGroups = [];\n\n\t\t\tfor (let i = 0; i < this._dirtyGroups.length; i++) {\n\t\t\t\tif (groupIds.indexOf(this._dirtyGroups[i]) < 0) newDirtyGroups.push(this._dirtyGroups[i]);\n\t\t\t}\n\n\t\t\tthis._dirtyGroups = newDirtyGroups;\n\t\t}\n\n\t\tvar group, lists, groupData, batch;\n\n\t\tfor (var groupId in groupMeshInstances) {\n\t\t\tif (!groupMeshInstances.hasOwnProperty(groupId)) continue;\n\t\t\tgroup = groupMeshInstances[groupId];\n\t\t\tgroupData = this._batchGroups[groupId];\n\n\t\t\tif (!groupData) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlists = this.prepare(group, groupData.dynamic, groupData.maxAabbSize, groupData._ui || groupData._sprite);\n\n\t\t\tfor (let i = 0; i < lists.length; i++) {\n\t\t\t\tbatch = this.create(lists[i], groupData.dynamic, parseInt(groupId, 10));\n\n\t\t\t\tif (batch) {\n\t\t\t\t\tbatch.addToLayers(this.scene, groupData.layers);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprepare(meshInstances, dynamic, maxAabbSize = Number.POSITIVE_INFINITY, translucent) {\n\t\tif (meshInstances.length === 0) return [];\n\t\tvar halfMaxAabbSize = maxAabbSize * 0.5;\n\t\tvar maxInstanceCount = this.device.supportsBoneTextures ? 1024 : this.device.boneLimit;\n\t\tvar maxNumVertices = this.device.extUintElement ? 0xffffffff : 0xffff;\n\t\tvar material, layer, vertCount, params, lightList, defs, stencil, staticLights, scaleSign, drawOrder, indexed, vertexFormatBatchingHash;\n\t\tvar aabb = new BoundingBox();\n\t\tvar testAabb = new BoundingBox();\n\t\tvar skipTranslucentAabb = null;\n\t\tvar mi, sf;\n\t\tvar lists = [];\n\t\tvar i,\n\t\t\t\tj = 0;\n\n\t\tif (translucent) {\n\t\t\tmeshInstances.sort(function (a, b) {\n\t\t\t\treturn a.drawOrder - b.drawOrder;\n\t\t\t});\n\t\t}\n\n\t\tvar meshInstancesLeftA = meshInstances;\n\t\tvar meshInstancesLeftB;\n\t\tvar skipMesh = translucent ? function (mi) {\n\t\t\tif (skipTranslucentAabb) {\n\t\t\t\tskipTranslucentAabb.add(mi.aabb);\n\t\t\t} else {\n\t\t\t\tskipTranslucentAabb = mi.aabb.clone();\n\t\t\t}\n\n\t\t\tmeshInstancesLeftB.push(mi);\n\t\t} : function (mi) {\n\t\t\tmeshInstancesLeftB.push(mi);\n\t\t};\n\n\t\twhile (meshInstancesLeftA.length > 0) {\n\t\t\tlists[j] = [meshInstancesLeftA[0]];\n\t\t\tmeshInstancesLeftB = [];\n\t\t\tmaterial = meshInstancesLeftA[0].material;\n\t\t\tlayer = meshInstancesLeftA[0].layer;\n\t\t\tdefs = meshInstancesLeftA[0]._shaderDefs;\n\t\t\tparams = meshInstancesLeftA[0].parameters;\n\t\t\tstencil = meshInstancesLeftA[0].stencilFront;\n\t\t\tlightList = meshInstancesLeftA[0]._staticLightList;\n\t\t\tvertCount = meshInstancesLeftA[0].mesh.vertexBuffer.getNumVertices();\n\t\t\tdrawOrder = meshInstancesLeftA[0].drawOrder;\n\t\t\taabb.copy(meshInstancesLeftA[0].aabb);\n\t\t\tscaleSign = getScaleSign(meshInstancesLeftA[0]);\n\t\t\tvertexFormatBatchingHash = meshInstancesLeftA[0].mesh.vertexBuffer.format.batchingHash;\n\t\t\tindexed = meshInstancesLeftA[0].mesh.primitive[0].indexed;\n\t\t\tskipTranslucentAabb = null;\n\n\t\t\tfor (i = 1; i < meshInstancesLeftA.length; i++) {\n\t\t\t\tmi = meshInstancesLeftA[i];\n\n\t\t\t\tif (dynamic && lists[j].length >= maxInstanceCount) {\n\t\t\t\t\tmeshInstancesLeftB = meshInstancesLeftB.concat(meshInstancesLeftA.slice(i));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (material !== mi.material || layer !== mi.layer || vertexFormatBatchingHash !== mi.mesh.vertexBuffer.format.batchingHash || indexed !== mi.mesh.primitive[0].indexed || defs !== mi._shaderDefs || vertCount + mi.mesh.vertexBuffer.getNumVertices() > maxNumVertices) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttestAabb.copy(aabb);\n\t\t\t\ttestAabb.add(mi.aabb);\n\n\t\t\t\tif (testAabb.halfExtents.x > halfMaxAabbSize || testAabb.halfExtents.y > halfMaxAabbSize || testAabb.halfExtents.z > halfMaxAabbSize) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (stencil) {\n\t\t\t\t\tif (!(sf = mi.stencilFront) || stencil.func !== sf.func || stencil.zpass !== sf.zpass) {\n\t\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scaleSign !== getScaleSign(mi)) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!equalParamSets(params, mi.parameters)) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tstaticLights = mi._staticLightList;\n\n\t\t\t\tif (lightList && staticLights) {\n\t\t\t\t\tif (!equalLightLists(lightList, staticLights)) {\n\t\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else if (lightList || staticLights) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (translucent && skipTranslucentAabb && skipTranslucentAabb.intersects(mi.aabb) && mi.drawOrder !== drawOrder) {\n\t\t\t\t\tskipMesh(mi);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\taabb.add(mi.aabb);\n\t\t\t\tvertCount += mi.mesh.vertexBuffer.getNumVertices();\n\t\t\t\tlists[j].push(mi);\n\t\t\t}\n\n\t\t\tj++;\n\t\t\tmeshInstancesLeftA = meshInstancesLeftB;\n\t\t}\n\n\t\treturn lists;\n\t}\n\n\tcreate(meshInstances, dynamic, batchGroupId) {\n\t\tif (!this._init) {\n\t\t\tvar boneLimit = \"#define BONE_LIMIT \" + this.device.getBoneLimit() + \"\\n\";\n\t\t\tthis.transformVS = boneLimit + \"#define DYNAMICBATCH\\n\" + shaderChunks.transformVS;\n\t\t\tthis.skinTexVS = shaderChunks.skinBatchTexVS;\n\t\t\tthis.skinConstVS = shaderChunks.skinBatchConstVS;\n\t\t\tthis.vertexFormats = {};\n\t\t\tthis._init = true;\n\t\t}\n\n\t\tvar i, j;\n\t\tvar streams = null,\n\t\t\t\tstream;\n\t\tvar semantic;\n\t\tvar material = null;\n\t\tvar mesh, elems, numVerts;\n\t\tvar batchNumVerts = 0;\n\t\tvar batchNumIndices = 0;\n\t\tvar batch = null;\n\n\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\tif (meshInstances[i].visible) {\n\t\t\t\tmesh = meshInstances[i].mesh;\n\t\t\t\tnumVerts = mesh.vertexBuffer.numVertices;\n\t\t\t\tbatchNumVerts += numVerts;\n\t\t\t\tbatchNumIndices += mesh.primitive[0].indexed ? mesh.primitive[0].count : mesh.primitive[0].type === PRIMITIVE_TRIFAN && mesh.primitive[0].count === 4 ? 6 : 0;\n\n\t\t\t\tif (!streams) {\n\t\t\t\t\tmaterial = meshInstances[i].material;\n\t\t\t\t\tstreams = {};\n\t\t\t\t\telems = mesh.vertexBuffer.format.elements;\n\n\t\t\t\t\tfor (j = 0; j < elems.length; j++) {\n\t\t\t\t\t\tsemantic = elems[j].name;\n\t\t\t\t\t\tstreams[semantic] = {\n\t\t\t\t\t\t\tnumComponents: elems[j].numComponents,\n\t\t\t\t\t\t\tdataType: elems[j].dataType,\n\t\t\t\t\t\t\tnormalize: elems[j].normalize,\n\t\t\t\t\t\t\tcount: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dynamic) {\n\t\t\t\t\t\tstreams[SEMANTIC_BLENDINDICES] = {\n\t\t\t\t\t\t\tnumComponents: 1,\n\t\t\t\t\t\t\tdataType: TYPE_FLOAT32,\n\t\t\t\t\t\t\tnormalize: false,\n\t\t\t\t\t\t\tcount: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (streams) {\n\t\t\tbatch = new Batch(meshInstances, dynamic, batchGroupId);\n\n\t\t\tthis._batchList.push(batch);\n\n\t\t\tvar indexBase, numIndices, indexData;\n\t\t\tvar verticesOffset = 0;\n\t\t\tvar indexOffset = 0;\n\t\t\tvar transform,\n\t\t\t\t\tvec = new Vec3();\n\t\t\tvar indexArrayType = batchNumVerts <= 0xffff ? Uint16Array : Uint32Array;\n\t\t\tvar indices = new indexArrayType(batchNumIndices);\n\n\t\t\tfor (semantic in streams) {\n\t\t\t\tstream = streams[semantic];\n\t\t\t\tstream.typeArrayType = typedArrayTypes[stream.dataType];\n\t\t\t\tstream.elementByteSize = typedArrayTypesByteSize[stream.dataType];\n\t\t\t\tstream.buffer = new stream.typeArrayType(batchNumVerts * stream.numComponents);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (!meshInstances[i].visible) continue;\n\t\t\t\tmesh = meshInstances[i].mesh;\n\t\t\t\tnumVerts = mesh.vertexBuffer.numVertices;\n\n\t\t\t\tif (!dynamic) {\n\t\t\t\t\ttransform = meshInstances[i].node.getWorldTransform();\n\t\t\t\t}\n\n\t\t\t\tfor (semantic in streams) {\n\t\t\t\t\tif (semantic !== SEMANTIC_BLENDINDICES) {\n\t\t\t\t\t\tstream = streams[semantic];\n\t\t\t\t\t\tvar subarray = new stream.typeArrayType(stream.buffer.buffer, stream.elementByteSize * stream.count);\n\t\t\t\t\t\tvar totalComponents = mesh.getVertexStream(semantic, subarray) * stream.numComponents;\n\t\t\t\t\t\tstream.count += totalComponents;\n\n\t\t\t\t\t\tif (!dynamic && stream.numComponents >= 3) {\n\t\t\t\t\t\t\tif (semantic === SEMANTIC_POSITION) {\n\t\t\t\t\t\t\t\tfor (j = 0; j < totalComponents; j += stream.numComponents) {\n\t\t\t\t\t\t\t\t\tvec.set(subarray[j], subarray[j + 1], subarray[j + 2]);\n\t\t\t\t\t\t\t\t\ttransform.transformPoint(vec, vec);\n\t\t\t\t\t\t\t\t\tsubarray[j] = vec.x;\n\t\t\t\t\t\t\t\t\tsubarray[j + 1] = vec.y;\n\t\t\t\t\t\t\t\t\tsubarray[j + 2] = vec.z;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (semantic === SEMANTIC_NORMAL || semantic === SEMANTIC_TANGENT) {\n\t\t\t\t\t\t\t\ttransform.invertTo3x3(mat3);\n\t\t\t\t\t\t\t\tmat3.transpose();\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < totalComponents; j += stream.numComponents) {\n\t\t\t\t\t\t\t\t\tvec.set(subarray[j], subarray[j + 1], subarray[j + 2]);\n\t\t\t\t\t\t\t\t\tmat3.transformVector(vec, vec);\n\t\t\t\t\t\t\t\t\tsubarray[j] = vec.x;\n\t\t\t\t\t\t\t\t\tsubarray[j + 1] = vec.y;\n\t\t\t\t\t\t\t\t\tsubarray[j + 2] = vec.z;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (dynamic) {\n\t\t\t\t\tstream = streams[SEMANTIC_BLENDINDICES];\n\n\t\t\t\t\tfor (j = 0; j < numVerts; j++) stream.buffer[stream.count++] = i;\n\t\t\t\t}\n\n\t\t\t\tif (mesh.primitive[0].indexed) {\n\t\t\t\t\tindexBase = mesh.primitive[0].base;\n\t\t\t\t\tnumIndices = mesh.primitive[0].count;\n\t\t\t\t\tvar srcFormat = mesh.indexBuffer[0].getFormat();\n\t\t\t\t\tindexData = new typedArrayIndexFormats[srcFormat](mesh.indexBuffer[0].storage);\n\t\t\t\t} else if (mesh.primitive[0].type === PRIMITIVE_TRIFAN && mesh.primitive[0].count === 4) {\n\t\t\t\t\tindexBase = 0;\n\t\t\t\t\tnumIndices = 6;\n\t\t\t\t\tindexData = [0, 1, 3, 2, 3, 1];\n\t\t\t\t} else {\n\t\t\t\t\tnumIndices = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (j = 0; j < numIndices; j++) {\n\t\t\t\t\tindices[j + indexOffset] = indexData[indexBase + j] + verticesOffset;\n\t\t\t\t}\n\n\t\t\t\tindexOffset += numIndices;\n\t\t\t\tverticesOffset += numVerts;\n\t\t\t}\n\n\t\t\tmesh = new Mesh(this.device);\n\n\t\t\tfor (semantic in streams) {\n\t\t\t\tstream = streams[semantic];\n\t\t\t\tmesh.setVertexStream(semantic, stream.buffer, stream.numComponents, undefined, stream.dataType, stream.normalize);\n\t\t\t}\n\n\t\t\tif (indices.length > 0) mesh.setIndices(indices);\n\t\t\tmesh.update(PRIMITIVE_TRIANGLES, false);\n\n\t\t\tif (dynamic) {\n\t\t\t\tmaterial = material.clone();\n\t\t\t\tmaterial.chunks.transformVS = this.transformVS;\n\t\t\t\tmaterial.chunks.skinTexVS = this.skinTexVS;\n\t\t\t\tmaterial.chunks.skinConstVS = this.skinConstVS;\n\t\t\t\tmaterial.update();\n\t\t\t}\n\n\t\t\tvar meshInstance = new MeshInstance(mesh, material, this.rootNode);\n\t\t\tmeshInstance.castShadow = batch.origMeshInstances[0].castShadow;\n\t\t\tmeshInstance.parameters = batch.origMeshInstances[0].parameters;\n\t\t\tmeshInstance.isStatic = batch.origMeshInstances[0].isStatic;\n\t\t\tmeshInstance.layer = batch.origMeshInstances[0].layer;\n\t\t\tmeshInstance._staticLightList = batch.origMeshInstances[0]._staticLightList;\n\t\t\tmeshInstance._shaderDefs = batch.origMeshInstances[0]._shaderDefs;\n\t\t\tmeshInstance.cull = batch.origMeshInstances[0].cull;\n\t\t\tvar batchGroup = this._batchGroups[batchGroupId];\n\t\t\tif (batchGroup && batchGroup._ui) meshInstance.cull = false;\n\n\t\t\tif (dynamic) {\n\t\t\t\tvar nodes = [];\n\n\t\t\t\tfor (i = 0; i < batch.origMeshInstances.length; i++) {\n\t\t\t\t\tnodes.push(batch.origMeshInstances[i].node);\n\t\t\t\t}\n\n\t\t\t\tmeshInstance.skinInstance = new SkinBatchInstance(this.device, nodes, this.rootNode);\n\t\t\t}\n\n\t\t\tmeshInstance._updateAabb = false;\n\t\t\tmeshInstance.drawOrder = batch.origMeshInstances[0].drawOrder;\n\t\t\tmeshInstance.stencilFront = batch.origMeshInstances[0].stencilFront;\n\t\t\tmeshInstance.stencilBack = batch.origMeshInstances[0].stencilBack;\n\t\t\tmeshInstance.flipFaces = getScaleSign(batch.origMeshInstances[0]) < 0;\n\t\t\tmeshInstance.castShadow = batch.origMeshInstances[0].castShadow;\n\t\t\tbatch.meshInstance = meshInstance;\n\t\t\tbatch.updateBoundingBox();\n\t\t}\n\n\t\treturn batch;\n\t}\n\n\tupdateAll() {\n\t\tif (this._dirtyGroups.length > 0) {\n\t\t\tthis.generate(this._dirtyGroups);\n\t\t}\n\n\t\tfor (var i = 0; i < this._batchList.length; i++) {\n\t\t\tif (!this._batchList[i].dynamic) continue;\n\n\t\t\tthis._batchList[i].updateBoundingBox();\n\t\t}\n\t}\n\n\tclone(batch, clonedMeshInstances) {\n\t\tvar batch2 = new Batch(clonedMeshInstances, batch.dynamic, batch.batchGroupId);\n\n\t\tthis._batchList.push(batch2);\n\n\t\tvar nodes = [];\n\n\t\tfor (var i = 0; i < clonedMeshInstances.length; i++) {\n\t\t\tnodes.push(clonedMeshInstances[i].node);\n\t\t}\n\n\t\tbatch2.meshInstance = new MeshInstance(batch.meshInstance.mesh, batch.meshInstance.material, batch.meshInstance.node);\n\t\tbatch2.meshInstance._updateAabb = false;\n\t\tbatch2.meshInstance.parameters = clonedMeshInstances[0].parameters;\n\t\tbatch2.meshInstance.isStatic = clonedMeshInstances[0].isStatic;\n\t\tbatch2.meshInstance.cull = clonedMeshInstances[0].cull;\n\t\tbatch2.meshInstance.layer = clonedMeshInstances[0].layer;\n\t\tbatch2.meshInstance._staticLightList = clonedMeshInstances[0]._staticLightList;\n\n\t\tif (batch.dynamic) {\n\t\t\tbatch2.meshInstance.skinInstance = new SkinBatchInstance(this.device, nodes, this.rootNode);\n\t\t}\n\n\t\tbatch2.meshInstance.castShadow = batch.meshInstance.castShadow;\n\t\tbatch2.meshInstance._shader = batch.meshInstance._shader;\n\t\tbatch2.meshInstance.castShadow = batch.meshInstance.castShadow;\n\t\treturn batch2;\n\t}\n\n\tdestroyBatch(batch) {\n\t\tbatch.destroy(this.scene, this._batchGroups[batch.batchGroupId].layers);\n\t}\n\n}\n\nvar _deviceCoord = new Vec3();\n\nvar _halfSize = new Vec3();\n\nvar _point = new Vec3();\n\nvar _invViewProjMat = new Mat4();\n\nclass Camera {\n\tconstructor() {\n\t\tthis._aspectRatio = 16 / 9;\n\t\tthis._aspectRatioMode = ASPECT_AUTO;\n\t\tthis._calculateProjection = null;\n\t\tthis._calculateTransform = null;\n\t\tthis._clearColor = new Color(0.75, 0.75, 0.75, 1);\n\t\tthis._clearColorBuffer = true;\n\t\tthis._clearDepth = 1;\n\t\tthis._clearDepthBuffer = true;\n\t\tthis._clearStencil = 0;\n\t\tthis._clearStencilBuffer = true;\n\t\tthis._cullingMask = 0xFFFFFFFF;\n\t\tthis._cullFaces = true;\n\t\tthis._farClip = 1000;\n\t\tthis._flipFaces = false;\n\t\tthis._fov = 45;\n\t\tthis._frustumCulling = true;\n\t\tthis._horizontalFov = false;\n\t\tthis._layers = [LAYERID_WORLD, LAYERID_DEPTH, LAYERID_SKYBOX, LAYERID_UI, LAYERID_IMMEDIATE];\n\t\tthis._nearClip = 0.1;\n\t\tthis._node = null;\n\t\tthis._orthoHeight = 10;\n\t\tthis._projection = PROJECTION_PERSPECTIVE;\n\t\tthis._rect = new Vec4(0, 0, 1, 1);\n\t\tthis._renderTarget = null;\n\t\tthis._scissorRect = new Vec4(0, 0, 1, 1);\n\t\tthis._vrDisplay = null;\n\t\tthis._projMat = new Mat4();\n\t\tthis._projMatDirty = true;\n\t\tthis._projMatSkybox = new Mat4();\n\t\tthis._viewMat = new Mat4();\n\t\tthis._viewMatDirty = true;\n\t\tthis._viewProjMat = new Mat4();\n\t\tthis._viewProjMatDirty = true;\n\t\tthis.frustum = new Frustum();\n\t}\n\n\tget aspectRatio() {\n\t\treturn this._aspectRatio;\n\t}\n\n\tset aspectRatio(newValue) {\n\t\tif (this._aspectRatio !== newValue) {\n\t\t\tthis._aspectRatio = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget aspectRatioMode() {\n\t\treturn this._aspectRatioMode;\n\t}\n\n\tset aspectRatioMode(newValue) {\n\t\tif (this._aspectRatioMode !== newValue) {\n\t\t\tthis._aspectRatioMode = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget calculateProjection() {\n\t\treturn this._calculateProjection;\n\t}\n\n\tset calculateProjection(newValue) {\n\t\tthis._calculateProjection = newValue;\n\t\tthis._projMatDirty = true;\n\t}\n\n\tget calculateTransform() {\n\t\treturn this._calculateTransform;\n\t}\n\n\tset calculateTransform(newValue) {\n\t\tthis._calculateTransform = newValue;\n\t}\n\n\tget clearColor() {\n\t\treturn this._clearColor;\n\t}\n\n\tset clearColor(newValue) {\n\t\tthis._clearColor.copy(newValue);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(newValue) {\n\t\tthis._clearColorBuffer = newValue;\n\t}\n\n\tget clearDepth() {\n\t\treturn this._clearDepth;\n\t}\n\n\tset clearDepth(newValue) {\n\t\tthis._clearDepth = newValue;\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(newValue) {\n\t\tthis._clearDepthBuffer = newValue;\n\t}\n\n\tget clearStencil() {\n\t\treturn this._clearStencil;\n\t}\n\n\tset clearStencil(newValue) {\n\t\tthis._clearStencil = newValue;\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(newValue) {\n\t\tthis._clearStencilBuffer = newValue;\n\t}\n\n\tget cullingMask() {\n\t\treturn this._cullingMask;\n\t}\n\n\tset cullingMask(newValue) {\n\t\tthis._cullingMask = newValue;\n\t}\n\n\tget cullFaces() {\n\t\treturn this._cullFaces;\n\t}\n\n\tset cullFaces(newValue) {\n\t\tthis._cullFaces = newValue;\n\t}\n\n\tget farClip() {\n\t\treturn this._farClip;\n\t}\n\n\tset farClip(newValue) {\n\t\tif (this._farClip !== newValue) {\n\t\t\tthis._farClip = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget flipFaces() {\n\t\treturn this._flipFaces;\n\t}\n\n\tset flipFaces(newValue) {\n\t\tthis._flipFaces = newValue;\n\t}\n\n\tget fov() {\n\t\treturn this._fov;\n\t}\n\n\tset fov(newValue) {\n\t\tif (this._fov !== newValue) {\n\t\t\tthis._fov = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget frustumCulling() {\n\t\treturn this._frustumCulling;\n\t}\n\n\tset frustumCulling(newValue) {\n\t\tthis._frustumCulling = newValue;\n\t}\n\n\tget horizontalFov() {\n\t\treturn this._horizontalFov;\n\t}\n\n\tset horizontalFov(newValue) {\n\t\tif (this._horizontalFov !== newValue) {\n\t\t\tthis._horizontalFov = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(newValue) {\n\t\tthis._layers = newValue.slice(0);\n\t}\n\n\tget nearClip() {\n\t\treturn this._nearClip;\n\t}\n\n\tset nearClip(newValue) {\n\t\tif (this._nearClip !== newValue) {\n\t\t\tthis._nearClip = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget node() {\n\t\treturn this._node;\n\t}\n\n\tset node(newValue) {\n\t\tthis._node = newValue;\n\t}\n\n\tget orthoHeight() {\n\t\treturn this._orthoHeight;\n\t}\n\n\tset orthoHeight(newValue) {\n\t\tif (this._orthoHeight !== newValue) {\n\t\t\tthis._orthoHeight = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget projection() {\n\t\treturn this._projection;\n\t}\n\n\tset projection(newValue) {\n\t\tif (this._projection !== newValue) {\n\t\t\tthis._projection = newValue;\n\t\t\tthis._projMatDirty = true;\n\t\t}\n\t}\n\n\tget projectionMatrix() {\n\t\tthis._evaluateProjectionMatrix();\n\n\t\treturn this._projMat;\n\t}\n\n\tget rect() {\n\t\treturn this._rect;\n\t}\n\n\tset rect(newValue) {\n\t\tthis._rect.copy(newValue);\n\t}\n\n\tget renderTarget() {\n\t\treturn this._renderTarget;\n\t}\n\n\tset renderTarget(newValue) {\n\t\tthis._renderTarget = newValue;\n\t}\n\n\tget scissorRect() {\n\t\treturn this._scissorRect;\n\t}\n\n\tset scissorRect(newValue) {\n\t\tthis._scissorRect.copy(newValue);\n\t}\n\n\tget viewMatrix() {\n\t\tif (this._viewMatDirty) {\n\t\t\tvar wtm = this._node.getWorldTransform();\n\n\t\t\tthis._viewMat.copy(wtm).invert();\n\n\t\t\tthis._viewMatDirty = false;\n\t\t}\n\n\t\treturn this._viewMat;\n\t}\n\n\tget vrDisplay() {\n\t\treturn this._vrDisplay;\n\t}\n\n\tset vrDisplay(newValue) {\n\t\tthis._vrDisplay = newValue;\n\n\t\tif (newValue) {\n\t\t\tnewValue._camera = this;\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn new Camera().copy(this);\n\t}\n\n\tcopy(other) {\n\t\tthis.aspectRatio = other.aspectRatio;\n\t\tthis.aspectRatioMode = other.aspectRatioMode;\n\t\tthis.calculateProjection = other.calculateProjection;\n\t\tthis.calculateTransform = other.calculateTransform;\n\t\tthis.clearColor = other.clearColor;\n\t\tthis.clearColorBuffer = other.clearColorBuffer;\n\t\tthis.clearDepth = other.clearDepth;\n\t\tthis.clearDepthBuffer = other.clearDepthBuffer;\n\t\tthis.clearStencil = other.clearStencil;\n\t\tthis.clearStencilBuffer = other.clearStencilBuffer;\n\t\tthis.cullFaces = other.cullFaces;\n\t\tthis.cullingMask = other.cullingMask;\n\t\tthis.farClip = other.farClip;\n\t\tthis.flipFaces = other.flipFaces;\n\t\tthis.fov = other.fov;\n\t\tthis.frustumCulling = other.frustumCulling;\n\t\tthis.horizontalFov = other.horizontalFov;\n\t\tthis.layers = other.layers;\n\t\tthis.nearClip = other.nearClip;\n\t\tthis.orthoHeight = other.orthoHeight;\n\t\tthis.projection = other.projection;\n\t\tthis.rect = other.rect;\n\t\tthis.renderTarget = other.renderTarget;\n\t\tthis.scissorRect = other.scissorRect;\n\t\tthis.vrDisplay = other.vrDisplay;\n\t\treturn this;\n\t}\n\n\t_updateViewProjMat() {\n\t\tif (this._projMatDirty || this._viewMatDirty || this._viewProjMatDirty) {\n\t\t\tvar projMat = this.projectionMatrix;\n\t\t\tvar viewMat = this.viewMatrix;\n\n\t\t\tthis._viewProjMat.mul2(projMat, viewMat);\n\n\t\t\tthis._viewProjMatDirty = false;\n\t\t}\n\t}\n\n\tworldToScreen(worldCoord, cw, ch, screenCoord = new Vec3()) {\n\t\tthis._updateViewProjMat();\n\n\t\tthis._viewProjMat.transformPoint(worldCoord, screenCoord);\n\n\t\tvar vpm = this._viewProjMat.data;\n\t\tvar w = worldCoord.x * vpm[3] + worldCoord.y * vpm[7] + worldCoord.z * vpm[11] + 1 * vpm[15];\n\t\tscreenCoord.x = (screenCoord.x / w + 1) * 0.5 * cw;\n\t\tscreenCoord.y = (1 - screenCoord.y / w) * 0.5 * ch;\n\t\treturn screenCoord;\n\t}\n\n\tscreenToWorld(x, y, z, cw, ch, worldCoord = new Vec3()) {\n\t\tvar range = this._farClip - this._nearClip;\n\n\t\t_deviceCoord.set(x / cw, (ch - y) / ch, z / range);\n\n\t\t_deviceCoord.mulScalar(2);\n\n\t\t_deviceCoord.sub(Vec3.ONE);\n\n\t\tif (this._projection === PROJECTION_PERSPECTIVE) {\n\t\t\tMat4._getPerspectiveHalfSize(_halfSize, this._fov, this._aspectRatio, this._nearClip, this._horizontalFov);\n\n\t\t\t_halfSize.x *= _deviceCoord.x;\n\t\t\t_halfSize.y *= _deviceCoord.y;\n\n\t\t\tvar invView = this._node.getWorldTransform();\n\n\t\t\t_halfSize.z = -this._nearClip;\n\t\t\tinvView.transformPoint(_halfSize, _point);\n\n\t\t\tvar cameraPos = this._node.getPosition();\n\n\t\t\tworldCoord.sub2(_point, cameraPos);\n\t\t\tworldCoord.normalize();\n\t\t\tworldCoord.mulScalar(z);\n\t\t\tworldCoord.add(cameraPos);\n\t\t} else {\n\t\t\tthis._updateViewProjMat();\n\n\t\t\t_invViewProjMat.copy(this._viewProjMat).invert();\n\n\t\t\t_invViewProjMat.transformPoint(_deviceCoord, worldCoord);\n\t\t}\n\n\t\treturn worldCoord;\n\t}\n\n\t_evaluateProjectionMatrix() {\n\t\tif (this._projMatDirty) {\n\t\t\tif (this._projection === PROJECTION_PERSPECTIVE) {\n\t\t\t\tthis._projMat.setPerspective(this._fov, this._aspectRatio, this._nearClip, this._farClip, this._horizontalFov);\n\n\t\t\t\tthis._projMatSkybox.copy(this._projMat);\n\t\t\t} else {\n\t\t\t\tvar y = this._orthoHeight;\n\t\t\t\tvar x = y * this._aspectRatio;\n\n\t\t\t\tthis._projMat.setOrtho(-x, x, -y, y, this._nearClip, this._farClip);\n\n\t\t\t\tthis._projMatSkybox.setPerspective(this._fov, this._aspectRatio, this._nearClip, this._farClip);\n\t\t\t}\n\n\t\t\tthis._projMatDirty = false;\n\t\t}\n\t}\n\n\tgetProjectionMatrixSkybox() {\n\t\tthis._evaluateProjectionMatrix();\n\n\t\treturn this._projMatSkybox;\n\t}\n\n}\n\nclass DepthMaterial extends Material {\n\tclone() {\n\t\tvar clone = new DepthMaterial();\n\n\t\tMaterial.prototype._cloneInternal.call(this, clone);\n\n\t\treturn clone;\n\t}\n\n\tupdateShader(device) {\n\t\tvar options = {\n\t\t\tskin: !!this.meshInstances[0].skinInstance\n\t\t};\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.shader = library.getProgram('depth', options);\n\t}\n\n}\n\nclass ShadowMap {\n\tconstructor(texture, targets) {\n\t\tthis.texture = texture;\n\t\tthis.cached = false;\n\t\tthis.renderTargets = targets;\n\t}\n\n\tdestroy() {\n\t\tif (this.texture) {\n\t\t\tthis.texture.destroy();\n\t\t\tthis.texture = null;\n\t\t}\n\n\t\tconst targets = this.renderTargets;\n\n\t\tfor (let i = 0; i < targets.length; i++) {\n\t\t\ttargets[i].destroy();\n\t\t}\n\n\t\tthis.renderTargets.length = 0;\n\t}\n\n\tstatic getShadowFormat(device, shadowType) {\n\t\tif (shadowType === SHADOW_VSM32) {\n\t\t\treturn PIXELFORMAT_RGBA32F;\n\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\treturn PIXELFORMAT_RGBA16F;\n\t\t} else if (shadowType === SHADOW_PCF5) {\n\t\t\treturn PIXELFORMAT_DEPTH;\n\t\t} else if (shadowType === SHADOW_PCF3 && device.webgl2) {\n\t\t\treturn PIXELFORMAT_DEPTH;\n\t\t}\n\n\t\treturn PIXELFORMAT_R8_G8_B8_A8;\n\t}\n\n\tstatic getShadowFiltering(device, shadowType) {\n\t\tif (shadowType === SHADOW_PCF3 && !device.webgl2) {\n\t\t\treturn FILTER_NEAREST;\n\t\t} else if (shadowType === SHADOW_VSM32) {\n\t\t\treturn device.extTextureFloatLinear ? FILTER_LINEAR : FILTER_NEAREST;\n\t\t} else if (shadowType === SHADOW_VSM16) {\n\t\t\treturn device.extTextureHalfFloatLinear ? FILTER_LINEAR : FILTER_NEAREST;\n\t\t}\n\n\t\treturn FILTER_LINEAR;\n\t}\n\n\tstatic create(device, light) {\n\t\tlet shadowMap = null;\n\n\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\tshadowMap = this.createCubemap(device, light._shadowResolution);\n\t\t} else {\n\t\t\tshadowMap = this.create2dMap(device, light._shadowResolution, light._shadowType);\n\t\t}\n\n\t\treturn shadowMap;\n\t}\n\n\tstatic create2dMap(device, size, shadowType) {\n\t\tconst format = this.getShadowFormat(device, shadowType);\n\t\tconst filter = this.getShadowFiltering(device, shadowType);\n\t\tconst texture = new Texture(device, {\n\t\t\tformat: format,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: filter,\n\t\t\tmagFilter: filter,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = 'ShadowMap2D';\n\t\tlet target = null;\n\n\t\tif (shadowType === SHADOW_PCF5 || shadowType === SHADOW_PCF3 && device.webgl2) {\n\t\t\ttexture.compareOnRead = true;\n\t\t\ttexture.compareFunc = FUNC_LESS;\n\t\t\ttarget = new RenderTarget({\n\t\t\t\tdepthBuffer: texture\n\t\t\t});\n\t\t} else {\n\t\t\ttarget = new RenderTarget({\n\t\t\t\tcolorBuffer: texture,\n\t\t\t\tdepth: true\n\t\t\t});\n\t\t}\n\n\t\treturn new ShadowMap(texture, [target]);\n\t}\n\n\tstatic createCubemap(device, size) {\n\t\tconst cubemap = new Texture(device, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tcubemap: true,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcubemap.name = 'ShadowMapCube';\n\t\tconst targets = [];\n\n\t\tfor (let i = 0; i < 6; i++) {\n\t\t\tconst target = new RenderTarget({\n\t\t\t\tcolorBuffer: cubemap,\n\t\t\t\tface: i,\n\t\t\t\tdepth: true\n\t\t\t});\n\t\t\ttargets.push(target);\n\t\t}\n\n\t\treturn new ShadowMap(cubemap, targets);\n\t}\n\n}\n\nclass ShadowMapCache {\n\tconstructor() {\n\t\tthis.shadowMapCache = new Map();\n\t}\n\n\tdestroy() {\n\t\tthis.clear();\n\t\tthis.shadowMapCache = null;\n\t}\n\n\tclear() {\n\t\tthis.shadowMapCache.forEach(shadowMaps => {\n\t\t\tshadowMaps.forEach(shadowMap => {\n\t\t\t\tshadowMap.destroy();\n\t\t\t});\n\t\t});\n\t\tthis.shadowMapCache.clear();\n\t}\n\n\tgetKey(light) {\n\t\tconst isCubeMap = light._type === LIGHTTYPE_OMNI;\n\t\tconst shadowType = light._shadowType;\n\t\tconst resolution = light._shadowResolution;\n\t\treturn `${isCubeMap}-${shadowType}-${resolution}`;\n\t}\n\n\tget(device, light) {\n\t\tconst key = this.getKey(light);\n\t\tconst shadowMaps = this.shadowMapCache.get(key);\n\n\t\tif (shadowMaps && shadowMaps.length) {\n\t\t\treturn shadowMaps.pop();\n\t\t}\n\n\t\tconst shadowMap = ShadowMap.create(device, light);\n\t\tshadowMap.cached = true;\n\t\treturn shadowMap;\n\t}\n\n\tadd(light, shadowMap) {\n\t\tconst key = this.getKey(light);\n\t\tconst shadowMaps = this.shadowMapCache.get(key);\n\n\t\tif (shadowMaps) {\n\t\t\tshadowMaps.push(shadowMap);\n\t\t} else {\n\t\t\tthis.shadowMapCache.set(key, [shadowMap]);\n\t\t}\n\t}\n\n}\n\nconst pointLightRotations = [new Quat().setFromEulerAngles(0, 90, 180), new Quat().setFromEulerAngles(0, -90, 180), new Quat().setFromEulerAngles(90, 0, 0), new Quat().setFromEulerAngles(-90, 0, 0), new Quat().setFromEulerAngles(0, 180, 180), new Quat().setFromEulerAngles(0, 0, 180)];\nconst aabbPoints = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\nconst _depthRange = {\n\tmin: 0,\n\tmax: 0\n};\n\nfunction getDepthRange(cameraViewMatrix, aabbMin, aabbMax) {\n\taabbPoints[0].x = aabbPoints[1].x = aabbPoints[2].x = aabbPoints[3].x = aabbMin.x;\n\taabbPoints[1].y = aabbPoints[3].y = aabbPoints[7].y = aabbPoints[5].y = aabbMin.y;\n\taabbPoints[2].z = aabbPoints[3].z = aabbPoints[6].z = aabbPoints[7].z = aabbMin.z;\n\taabbPoints[4].x = aabbPoints[5].x = aabbPoints[6].x = aabbPoints[7].x = aabbMax.x;\n\taabbPoints[0].y = aabbPoints[2].y = aabbPoints[4].y = aabbPoints[6].y = aabbMax.y;\n\taabbPoints[0].z = aabbPoints[1].z = aabbPoints[4].z = aabbPoints[5].z = aabbMax.z;\n\tlet minz = 9999999999;\n\tlet maxz = -9999999999;\n\n\tfor (let i = 0; i < 8; ++i) {\n\t\tcameraViewMatrix.transformPoint(aabbPoints[i], aabbPoints[i]);\n\t\tconst z = aabbPoints[i].z;\n\t\tif (z < minz) minz = z;\n\t\tif (z > maxz) maxz = z;\n\t}\n\n\t_depthRange.min = minz;\n\t_depthRange.max = maxz;\n\treturn _depthRange;\n}\n\nfunction gauss(x, sigma) {\n\treturn Math.exp(-(x * x) / (2.0 * sigma * sigma));\n}\n\nconst maxBlurSize = 25;\n\nfunction gaussWeights(kernelSize) {\n\tif (kernelSize > maxBlurSize) {\n\t\tkernelSize = maxBlurSize;\n\t}\n\n\tconst sigma = (kernelSize - 1) / (2 * 3);\n\tconst halfWidth = (kernelSize - 1) * 0.5;\n\tconst values = new Array(kernelSize);\n\tlet sum = 0.0;\n\n\tfor (let i = 0; i < kernelSize; ++i) {\n\t\tvalues[i] = gauss(i - halfWidth, sigma);\n\t\tsum += values[i];\n\t}\n\n\tfor (let i = 0; i < kernelSize; ++i) {\n\t\tvalues[i] /= sum;\n\t}\n\n\treturn values;\n}\n\nconst visibleSceneAabb = new BoundingBox();\nconst shadowCamView$1 = new Mat4();\nconst shadowCamViewProj$1 = new Mat4();\nconst pixelOffset = new Float32Array(2);\nconst blurScissorRect = {\n\tx: 1,\n\ty: 1,\n\tz: 0,\n\tw: 0\n};\nconst opChanId = {\n\tr: 1,\n\tg: 2,\n\tb: 3,\n\ta: 4\n};\nconst center = new Vec3();\nconst viewportMatrix = new Mat4();\n\nfunction getDepthKey(meshInstance) {\n\tconst material = meshInstance.material;\n\tconst x = meshInstance.skinInstance ? 10 : 0;\n\tlet y = 0;\n\n\tif (material.opacityMap) {\n\t\tconst opChan = material.opacityMapChannel;\n\n\t\tif (opChan) {\n\t\t\ty = opChanId[opChan];\n\t\t}\n\t}\n\n\treturn x + y;\n}\n\nclass ShadowRenderer {\n\tconstructor(forwardRenderer) {\n\t\tthis.device = forwardRenderer.device;\n\t\tthis.forwardRenderer = forwardRenderer;\n\t\tconst scope = this.device.scope;\n\t\tthis.sourceId = scope.resolve(\"source\");\n\t\tthis.pixelOffsetId = scope.resolve(\"pixelOffset\");\n\t\tthis.weightId = scope.resolve(\"weight[0]\");\n\t\tthis.blurVsmShaderCode = [shaderChunks.blurVSMPS, \"#define GAUSS\\n\" + shaderChunks.blurVSMPS];\n\t\tconst packed = \"#define PACKED\\n\";\n\t\tthis.blurPackedVsmShaderCode = [packed + this.blurVsmShaderCode[0], packed + this.blurVsmShaderCode[1]];\n\t\tthis.blurVsmShader = [{}, {}];\n\t\tthis.blurPackedVsmShader = [{}, {}];\n\t\tthis.blurVsmWeights = {};\n\t\tthis.shadowMapLightRadiusId = scope.resolve('light_radius');\n\t\tthis.shadowMapCache = new ShadowMapCache();\n\t}\n\n\tdestroy() {\n\t\tthis.shadowMapCache.destroy();\n\t\tthis.shadowMapCache = null;\n\t}\n\n\tstatic createShadowCamera(device, shadowType, type, face) {\n\t\tconst shadowCam = new Camera();\n\t\tshadowCam.node = new GraphNode(\"ShadowCamera\");\n\t\tshadowCam.aspectRatio = 1;\n\n\t\tswitch (type) {\n\t\t\tcase LIGHTTYPE_OMNI:\n\t\t\t\tshadowCam.node.setRotation(pointLightRotations[face]);\n\t\t\t\tshadowCam.fov = 90;\n\t\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\t\tbreak;\n\n\t\t\tcase LIGHTTYPE_SPOT:\n\t\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\t\tbreak;\n\n\t\t\tcase LIGHTTYPE_DIRECTIONAL:\n\t\t\t\tshadowCam.projection = PROJECTION_ORTHOGRAPHIC;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet hwPcf = shadowType === SHADOW_PCF5 || shadowType === SHADOW_PCF3 && device.webgl2;\n\n\t\tif (type === LIGHTTYPE_OMNI) {\n\t\t\thwPcf = false;\n\t\t}\n\n\t\tif (shadowType >= SHADOW_VSM8 && shadowType <= SHADOW_VSM32) {\n\t\t\tshadowCam.clearColor = new Color(0, 0, 0, 0);\n\t\t} else {\n\t\t\tshadowCam.clearColor = new Color(1, 1, 1, 1);\n\t\t}\n\n\t\tshadowCam.clearColorBuffer = !hwPcf;\n\t\tshadowCam.clearDepthBuffer = true;\n\t\tshadowCam.clearStencilBuffer = false;\n\t\treturn shadowCam;\n\t}\n\n\tcullShadowCasters(meshInstances, visible, camera) {\n\t\tlet count = 0;\n\t\tconst numInstances = meshInstances.length;\n\n\t\tfor (let i = 0; i < numInstances; i++) {\n\t\t\tconst meshInstance = meshInstances[i];\n\n\t\t\tif (!meshInstance.cull || meshInstance._isVisible(camera)) {\n\t\t\t\tmeshInstance.visibleThisFrame = true;\n\t\t\t\tvisible[count] = meshInstance;\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\tvisible.length = count;\n\t\tvisible.sort(this.forwardRenderer.depthSortCompare);\n\t}\n\n\tcullLocal(light, drawCalls) {\n\t\tlight.visibleThisFrame = true;\n\n\t\tif (!light._shadowMap) {\n\t\t\tlight._shadowMap = ShadowMap.create(this.device, light);\n\t\t}\n\n\t\tconst type = light._type;\n\t\tconst faceCount = type === LIGHTTYPE_SPOT ? 1 : 6;\n\n\t\tfor (let face = 0; face < faceCount; face++) {\n\t\t\tconst lightRenderData = light.getRenderData(null, face);\n\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\tshadowCam.nearClip = light.attenuationEnd / 1000;\n\t\t\tshadowCam.farClip = light.attenuationEnd;\n\t\t\tconst shadowCamNode = shadowCam._node;\n\t\t\tconst lightNode = light._node;\n\t\t\tshadowCamNode.setPosition(lightNode.getPosition());\n\n\t\t\tif (type === LIGHTTYPE_SPOT) {\n\t\t\t\tshadowCam.fov = light._outerConeAngle * 2;\n\t\t\t\tshadowCamNode.setRotation(lightNode.getRotation());\n\t\t\t\tshadowCamNode.rotateLocal(-90, 0, 0);\n\t\t\t}\n\n\t\t\tshadowCam.renderTarget = light._shadowMap.renderTargets[face];\n\t\t\tthis.forwardRenderer.updateCameraFrustum(shadowCam);\n\t\t\tthis.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);\n\t\t}\n\t}\n\n\tgenerateSplitDistances(light, nearDist, farDist) {\n\t\tlight._shadowCascadeDistances.fill(farDist);\n\n\t\tfor (let i = 1; i < light.numCascades; i++) {\n\t\t\tconst fraction = i / light.numCascades;\n\t\t\tconst linearDist = nearDist + (farDist - nearDist) * fraction;\n\t\t\tconst logDist = nearDist * (farDist / nearDist) ** fraction;\n\t\t\tconst dist = math.lerp(linearDist, logDist, light.cascadeDistribution);\n\t\t\tlight._shadowCascadeDistances[i - 1] = dist;\n\t\t}\n\t}\n\n\tcullDirectional(light, drawCalls, camera) {\n\t\tlight.visibleThisFrame = true;\n\n\t\tif (!light._shadowMap) {\n\t\t\tlight._shadowMap = ShadowMap.create(this.device, light);\n\t\t}\n\n\t\tconst nearDist = camera._nearClip;\n\t\tthis.generateSplitDistances(light, nearDist, light.shadowDistance);\n\n\t\tfor (let cascade = 0; cascade < light.numCascades; cascade++) {\n\t\t\tconst lightRenderData = light.getRenderData(camera, cascade);\n\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\tshadowCam.renderTarget = light._shadowMap.renderTargets[0];\n\t\t\tconst shadowCamNode = shadowCam._node;\n\t\t\tconst lightNode = light._node;\n\t\t\tshadowCamNode.setPosition(lightNode.getPosition());\n\t\t\tshadowCamNode.setRotation(lightNode.getRotation());\n\t\t\tshadowCamNode.rotateLocal(-90, 0, 0);\n\t\t\tconst frustumNearDist = cascade === 0 ? nearDist : light._shadowCascadeDistances[cascade - 1];\n\t\t\tconst frustumFarDist = light._shadowCascadeDistances[cascade];\n\t\t\tconst frustumPoints = Frustum.getPoints(camera, frustumNearDist, frustumFarDist);\n\t\t\tcenter.set(0, 0, 0);\n\t\t\tconst cameraWorldMat = camera.node.getWorldTransform();\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tcameraWorldMat.transformPoint(frustumPoints[i], frustumPoints[i]);\n\t\t\t\tcenter.add(frustumPoints[i]);\n\t\t\t}\n\n\t\t\tcenter.mulScalar(1 / 8);\n\t\t\tlet radius = 0;\n\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\tconst dist = frustumPoints[i].sub(center).length();\n\t\t\t\tif (dist > radius) radius = dist;\n\t\t\t}\n\n\t\t\tconst right = shadowCamNode.right;\n\t\t\tconst up = shadowCamNode.up;\n\t\t\tconst lightDir = shadowCamNode.forward;\n\t\t\tconst sizeRatio = 0.25 * light._shadowResolution / radius;\n\t\t\tconst x = Math.ceil(center.dot(up) * sizeRatio) / sizeRatio;\n\t\t\tconst y = Math.ceil(center.dot(right) * sizeRatio) / sizeRatio;\n\t\t\tconst scaledUp = up.mulScalar(x);\n\t\t\tconst scaledRight = right.mulScalar(y);\n\t\t\tconst dot = center.dot(lightDir);\n\t\t\tconst scaledDir = lightDir.mulScalar(dot);\n\t\t\tcenter.add2(scaledUp, scaledRight).add(scaledDir);\n\t\t\tshadowCamNode.setPosition(center);\n\t\t\tshadowCamNode.translateLocal(0, 0, 1000000);\n\t\t\tshadowCam.nearClip = 0;\n\t\t\tshadowCam.farClip = 2000000;\n\t\t\tshadowCam.orthoHeight = radius;\n\t\t\tthis.forwardRenderer.updateCameraFrustum(shadowCam);\n\t\t\tthis.cullShadowCasters(drawCalls, lightRenderData.visibleCasters, shadowCam);\n\t\t\tlet emptyAabb = true;\n\t\t\tconst visibleCasters = lightRenderData.visibleCasters;\n\n\t\t\tfor (let i = 0; i < visibleCasters.length; i++) {\n\t\t\t\tconst meshInstance = visibleCasters[i];\n\n\t\t\t\tif (emptyAabb) {\n\t\t\t\t\temptyAabb = false;\n\t\t\t\t\tvisibleSceneAabb.copy(meshInstance.aabb);\n\t\t\t\t} else {\n\t\t\t\t\tvisibleSceneAabb.add(meshInstance.aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshadowCamView$1.copy(shadowCamNode.getWorldTransform()).invert();\n\t\t\tconst depthRange = getDepthRange(shadowCamView$1, visibleSceneAabb.getMin(), visibleSceneAabb.getMax());\n\t\t\tshadowCamNode.translateLocal(0, 0, depthRange.max + 0.1);\n\t\t\tshadowCam.farClip = depthRange.max - depthRange.min + 0.2;\n\t\t}\n\t}\n\n\tsetupRenderState(device, light) {\n\t\tif (device.webgl2) {\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\tdevice.setDepthBias(false);\n\t\t\t} else {\n\t\t\t\tdevice.setDepthBias(true);\n\t\t\t\tdevice.setDepthBiasValues(light.shadowBias * -1000.0, light.shadowBias * -1000.0);\n\t\t\t}\n\t\t} else if (device.extStandardDerivatives) {\n\t\t\tconst forwardRenderer = this.forwardRenderer;\n\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\tforwardRenderer.polygonOffset[0] = 0;\n\t\t\t\tforwardRenderer.polygonOffset[1] = 0;\n\t\t\t\tforwardRenderer.polygonOffsetId.setValue(forwardRenderer.polygonOffset);\n\t\t\t} else {\n\t\t\t\tforwardRenderer.polygonOffset[0] = light.shadowBias * -1000.0;\n\t\t\t\tforwardRenderer.polygonOffset[1] = light.shadowBias * -1000.0;\n\t\t\t\tforwardRenderer.polygonOffsetId.setValue(forwardRenderer.polygonOffset);\n\t\t\t}\n\t\t}\n\n\t\tdevice.setBlending(false);\n\t\tdevice.setDepthWrite(true);\n\t\tdevice.setDepthTest(true);\n\n\t\tif (light._isPcf && device.webgl2 && light._type !== LIGHTTYPE_OMNI) {\n\t\t\tdevice.setColorWrite(false, false, false, false);\n\t\t} else {\n\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t}\n\t}\n\n\tdispatchUniforms(light, shadowCam, lightRenderData, face) {\n\t\tconst shadowCamNode = shadowCam._node;\n\n\t\tif (light._type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\tthis.forwardRenderer.dispatchViewPos(shadowCamNode.getPosition());\n\t\t\tthis.shadowMapLightRadiusId.setValue(light.attenuationEnd);\n\t\t}\n\n\t\tif (light._type !== LIGHTTYPE_OMNI) {\n\t\t\tshadowCamView$1.setTRS(shadowCamNode.getPosition(), shadowCamNode.getRotation(), Vec3.ONE).invert();\n\t\t\tshadowCamViewProj$1.mul2(shadowCam.projectionMatrix, shadowCamView$1);\n\n\t\t\tif (light._type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tconst rect = light.cascades[face];\n\t\t\t\tshadowCam.rect = rect;\n\t\t\t\tshadowCam.scissorRect = rect;\n\t\t\t\tviewportMatrix.setViewport(rect.x, rect.y, rect.z, rect.w);\n\t\t\t\tlightRenderData.shadowMatrix.mul2(viewportMatrix, shadowCamViewProj$1);\n\n\t\t\t\tlight._shadowMatrixPalette.set(lightRenderData.shadowMatrix.data, face * 16);\n\t\t\t} else {\n\t\t\t\tlightRenderData.shadowMatrix.mul2(ShadowRenderer.scaleShiftMatrix, shadowCamViewProj$1);\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitCasters(visibleCasters, light) {\n\t\tconst device = this.device;\n\t\tconst forwardRenderer = this.forwardRenderer;\n\t\tconst shadowPass = 1 << SHADER_SHADOW;\n\t\tconst shadowType = light._shadowType;\n\t\tconst smode = shadowType + light._type * SHADOW_COUNT;\n\t\tconst count = visibleCasters.length;\n\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst meshInstance = visibleCasters[i];\n\t\t\tconst mesh = meshInstance.mesh;\n\t\t\tconst material = meshInstance.material;\n\t\t\tforwardRenderer.setBaseConstants(device, material);\n\t\t\tforwardRenderer.setSkinning(device, meshInstance, material);\n\n\t\t\tif (material.dirty) {\n\t\t\t\tmaterial.updateUniforms();\n\t\t\t\tmaterial.dirty = false;\n\t\t\t}\n\n\t\t\tif (material.chunks) {\n\t\t\t\tforwardRenderer.setCullMode(true, false, meshInstance);\n\t\t\t\tmaterial.setParameters(device);\n\t\t\t\tmeshInstance.setParameters(device, shadowPass);\n\t\t\t}\n\n\t\t\tlet shadowShader = meshInstance._shader[SHADER_SHADOW + smode];\n\n\t\t\tif (!shadowShader) {\n\t\t\t\tforwardRenderer.updateShader(meshInstance, meshInstance._shaderDefs, null, SHADER_SHADOW + smode);\n\t\t\t\tshadowShader = meshInstance._shader[SHADER_SHADOW + smode];\n\t\t\t\tmeshInstance._key[SORTKEY_DEPTH] = getDepthKey(meshInstance);\n\t\t\t}\n\n\t\t\tdevice.setShader(shadowShader);\n\t\t\tforwardRenderer.setVertexBuffers(device, mesh);\n\t\t\tforwardRenderer.setMorphing(device, meshInstance.morphInstance);\n\t\t\tconst style = meshInstance.renderStyle;\n\t\t\tdevice.setIndexBuffer(mesh.indexBuffer[style]);\n\t\t\ti += forwardRenderer.drawInstance(device, meshInstance, mesh, style);\n\t\t\tforwardRenderer._shadowDrawCalls++;\n\t\t}\n\t}\n\n\trender(light, camera) {\n\t\tif (light.enabled && light.castShadows && light.shadowUpdateMode !== SHADOWUPDATE_NONE && light.visibleThisFrame) {\n\t\t\tconst device = this.device;\n\n\t\t\tif (light.shadowUpdateMode === SHADOWUPDATE_THISFRAME) {\n\t\t\t\tlight.shadowUpdateMode = SHADOWUPDATE_NONE;\n\t\t\t}\n\n\t\t\tlet faceCount = 1;\n\t\t\tconst type = light._type;\n\n\t\t\tif (type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tfaceCount = light.numCascades;\n\t\t\t} else if (type === LIGHTTYPE_OMNI) {\n\t\t\t\tfaceCount = 6;\n\t\t\t}\n\n\t\t\tconst forwardRenderer = this.forwardRenderer;\n\t\t\tforwardRenderer._shadowMapUpdates += faceCount;\n\t\t\tthis.setupRenderState(device, light);\n\n\t\t\tfor (let face = 0; face < faceCount; face++) {\n\t\t\t\tconst lightRenderData = light.getRenderData(type === LIGHTTYPE_DIRECTIONAL ? camera : null, face);\n\t\t\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\t\t\tthis.dispatchUniforms(light, shadowCam, lightRenderData, face);\n\t\t\t\tforwardRenderer.setCamera(shadowCam, shadowCam.renderTarget, true, faceCount === 1);\n\t\t\t\tthis.submitCasters(lightRenderData.visibleCasters, light);\n\t\t\t}\n\n\t\t\tif (light._isVsm && light._vsmBlurSize > 1) {\n\t\t\t\tthis.applyVsmBlur(light, camera);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetVsmBlurShader(isVsm8, blurMode, filterSize) {\n\t\tlet blurShader = (isVsm8 ? this.blurPackedVsmShader : this.blurVsmShader)[blurMode][filterSize];\n\n\t\tif (!blurShader) {\n\t\t\tthis.blurVsmWeights[filterSize] = gaussWeights(filterSize);\n\t\t\tconst blurVS = shaderChunks.fullscreenQuadVS;\n\t\t\tlet blurFS = \"#define SAMPLES \" + filterSize + \"\\n\";\n\n\t\t\tif (isVsm8) {\n\t\t\t\tblurFS += this.blurPackedVsmShaderCode[blurMode];\n\t\t\t} else {\n\t\t\t\tblurFS += this.blurVsmShaderCode[blurMode];\n\t\t\t}\n\n\t\t\tconst blurShaderName = \"blurVsm\" + blurMode + \"\" + filterSize + \"\" + isVsm8;\n\t\t\tblurShader = createShaderFromCode(this.device, blurVS, blurFS, blurShaderName);\n\n\t\t\tif (isVsm8) {\n\t\t\t\tthis.blurPackedVsmShader[blurMode][filterSize] = blurShader;\n\t\t\t} else {\n\t\t\t\tthis.blurVsmShader[blurMode][filterSize] = blurShader;\n\t\t\t}\n\t\t}\n\n\t\treturn blurShader;\n\t}\n\n\tapplyVsmBlur(light, camera) {\n\t\tconst device = this.device;\n\t\tconst lightRenderData = light.getRenderData(light._type === LIGHTTYPE_DIRECTIONAL ? camera : null, 0);\n\t\tconst shadowCam = lightRenderData.shadowCamera;\n\t\tconst origShadowMap = shadowCam.renderTarget;\n\t\tconst tempShadowMap = this.shadowMapCache.get(device, light);\n\t\tconst tempRt = tempShadowMap.renderTargets[0];\n\t\tconst isVsm8 = light._shadowType === SHADOW_VSM8;\n\t\tconst blurMode = light.vsmBlurMode;\n\t\tconst filterSize = light._vsmBlurSize;\n\t\tconst blurShader = this.getVsmBlurShader(isVsm8, blurMode, filterSize);\n\t\tblurScissorRect.z = light._shadowResolution - 2;\n\t\tblurScissorRect.w = blurScissorRect.z;\n\t\tthis.sourceId.setValue(origShadowMap.colorBuffer);\n\t\tpixelOffset[0] = 1 / light._shadowResolution;\n\t\tpixelOffset[1] = 0;\n\t\tthis.pixelOffsetId.setValue(pixelOffset);\n\t\tif (blurMode === BLUR_GAUSSIAN) this.weightId.setValue(this.blurVsmWeights[filterSize]);\n\t\tdrawQuadWithShader(device, tempRt, blurShader, null, blurScissorRect);\n\t\tthis.sourceId.setValue(tempRt.colorBuffer);\n\t\tpixelOffset[1] = pixelOffset[0];\n\t\tpixelOffset[0] = 0;\n\t\tthis.pixelOffsetId.setValue(pixelOffset);\n\t\tdrawQuadWithShader(device, origShadowMap, blurShader, null, blurScissorRect);\n\t\tthis.shadowMapCache.add(light, tempShadowMap);\n\t}\n\n}\n\nShadowRenderer.scaleShiftMatrix = new Mat4().setViewport(0, 0, 1, 1);\n\nvar shadowCamView = new Mat4();\nvar shadowCamViewProj = new Mat4();\nvar viewInvMat = new Mat4();\nvar viewMat = new Mat4();\nvar viewMat3 = new Mat3();\nvar viewProjMat = new Mat4();\nvar projMat;\nvar flipYMat = new Mat4().setScale(1, -1, 1);\nvar flippedViewProjMat = new Mat4();\nvar flippedSkyboxProjMat = new Mat4();\nvar viewInvL = new Mat4();\nvar viewInvR = new Mat4();\nvar viewL = new Mat4();\nvar viewR = new Mat4();\nvar viewPosL = new Vec3();\nvar viewPosR = new Vec3();\nvar projL, projR;\nvar viewMat3L = new Mat3();\nvar viewMat3R = new Mat3();\nvar viewProjMatL = new Mat4();\nvar viewProjMatR = new Mat4();\nvar worldMatX = new Vec3();\nvar worldMatY = new Vec3();\nvar worldMatZ = new Vec3();\nvar tempSphere$1 = new BoundingSphere();\nvar boneTextureSize = [0, 0, 0, 0];\nvar boneTexture, instancingData, modelMatrix, normalMatrix;\nvar keyA$1, keyB$1;\nvar _autoInstanceBuffer = null;\nvar _skinUpdateIndex = 0;\n\nvar _tempMaterialSet = new Set();\n\nclass ForwardRenderer {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tvar device = this.device;\n\t\tthis._shadowDrawCalls = 0;\n\t\tthis._forwardDrawCalls = 0;\n\t\tthis._skinDrawCalls = 0;\n\t\tthis._camerasRendered = 0;\n\t\tthis._materialSwitches = 0;\n\t\tthis._shadowMapUpdates = 0;\n\t\tthis._shadowMapTime = 0;\n\t\tthis._depthMapTime = 0;\n\t\tthis._forwardTime = 0;\n\t\tthis._cullTime = 0;\n\t\tthis._sortTime = 0;\n\t\tthis._skinTime = 0;\n\t\tthis._morphTime = 0;\n\t\tthis._instancingTime = 0;\n\t\tthis._layerCompositionUpdateTime = 0;\n\t\tthis._lightClustersTime = 0;\n\t\tthis._lightClusters = 0;\n\t\tvar library = device.getProgramLibrary();\n\t\tthis.library = library;\n\t\tthis._shadowRenderer = new ShadowRenderer(this);\n\t\tvar scope = device.scope;\n\t\tthis.projId = scope.resolve('matrix_projection');\n\t\tthis.projSkyboxId = scope.resolve('matrix_projectionSkybox');\n\t\tthis.viewId = scope.resolve('matrix_view');\n\t\tthis.viewId3 = scope.resolve('matrix_view3');\n\t\tthis.viewInvId = scope.resolve('matrix_viewInverse');\n\t\tthis.viewProjId = scope.resolve('matrix_viewProjection');\n\t\tthis.viewPos = new Float32Array(3);\n\t\tthis.viewPosId = scope.resolve('view_position');\n\t\tthis.nearClipId = scope.resolve('camera_near');\n\t\tthis.farClipId = scope.resolve('camera_far');\n\t\tthis.cameraParamsId = scope.resolve('camera_params');\n\t\tthis.fogColorId = scope.resolve('fog_color');\n\t\tthis.fogStartId = scope.resolve('fog_start');\n\t\tthis.fogEndId = scope.resolve('fog_end');\n\t\tthis.fogDensityId = scope.resolve('fog_density');\n\t\tthis.modelMatrixId = scope.resolve('matrix_model');\n\t\tthis.normalMatrixId = scope.resolve('matrix_normal');\n\t\tthis.poseMatrixId = scope.resolve('matrix_pose[0]');\n\t\tthis.boneTextureId = scope.resolve('texture_poseMap');\n\t\tthis.boneTextureSizeId = scope.resolve('texture_poseMapSize');\n\t\tthis.morphWeightsA = scope.resolve('morph_weights_a');\n\t\tthis.morphWeightsB = scope.resolve('morph_weights_b');\n\t\tthis.morphPositionTex = scope.resolve('morphPositionTex');\n\t\tthis.morphNormalTex = scope.resolve('morphNormalTex');\n\t\tthis.morphTexParams = scope.resolve('morph_tex_params');\n\t\tthis.alphaTestId = scope.resolve('alpha_ref');\n\t\tthis.opacityMapId = scope.resolve('texture_opacityMap');\n\t\tthis.ambientId = scope.resolve(\"light_globalAmbient\");\n\t\tthis.exposureId = scope.resolve(\"exposure\");\n\t\tthis.skyboxIntensityId = scope.resolve(\"skyboxIntensity\");\n\t\tthis.lightColorId = [];\n\t\tthis.lightDir = [];\n\t\tthis.lightDirId = [];\n\t\tthis.lightShadowMapId = [];\n\t\tthis.lightShadowMatrixId = [];\n\t\tthis.lightShadowParamsId = [];\n\t\tthis.lightRadiusId = [];\n\t\tthis.lightPos = [];\n\t\tthis.lightPosId = [];\n\t\tthis.lightWidth = [];\n\t\tthis.lightWidthId = [];\n\t\tthis.lightHeight = [];\n\t\tthis.lightHeightId = [];\n\t\tthis.lightInAngleId = [];\n\t\tthis.lightOutAngleId = [];\n\t\tthis.lightCookieId = [];\n\t\tthis.lightCookieIntId = [];\n\t\tthis.lightCookieMatrixId = [];\n\t\tthis.lightCookieOffsetId = [];\n\t\tthis.shadowMatrixPaletteId = [];\n\t\tthis.shadowCascadeDistancesId = [];\n\t\tthis.shadowCascadeCountId = [];\n\t\tthis.depthMapId = scope.resolve('uDepthMap');\n\t\tthis.screenSizeId = scope.resolve('uScreenSize');\n\t\tthis._screenSize = new Float32Array(4);\n\t\tthis.twoSidedLightingNegScaleFactorId = scope.resolve(\"twoSidedLightingNegScaleFactor\");\n\t\tthis.polygonOffsetId = scope.resolve(\"polygonOffset\");\n\t\tthis.polygonOffset = new Float32Array(2);\n\t\tthis.fogColor = new Float32Array(3);\n\t\tthis.ambientColor = new Float32Array(3);\n\t\tthis.cameraParams = new Float32Array(4);\n\t}\n\n\tdestroy() {\n\t\tthis._shadowRenderer.destroy();\n\n\t\tthis._shadowRenderer = null;\n\t}\n\n\tstatic getSpotCookieCamera() {\n\t\tif (!this.spotCookieCamera) {\n\t\t\tthis.spotCookieCamera = new Camera();\n\t\t\tthis.spotCookieCamera.projection = PROJECTION_PERSPECTIVE;\n\t\t\tthis.spotCookieCamera.aspectRatio = 1;\n\t\t\tthis.spotCookieCamera.node = new GraphNode();\n\t\t}\n\n\t\treturn this.spotCookieCamera;\n\t}\n\n\tsortCompare(drawCallA, drawCallB) {\n\t\tif (drawCallA.layer === drawCallB.layer) {\n\t\t\tif (drawCallA.drawOrder && drawCallB.drawOrder) {\n\t\t\t\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n\t\t\t} else if (drawCallA.zdist && drawCallB.zdist) {\n\t\t\t\treturn drawCallB.zdist - drawCallA.zdist;\n\t\t\t} else if (drawCallA.zdist2 && drawCallB.zdist2) {\n\t\t\t\treturn drawCallA.zdist2 - drawCallB.zdist2;\n\t\t\t}\n\t\t}\n\n\t\treturn drawCallB._key[SORTKEY_FORWARD] - drawCallA._key[SORTKEY_FORWARD];\n\t}\n\n\tsortCompareMesh(drawCallA, drawCallB) {\n\t\tif (drawCallA.layer === drawCallB.layer) {\n\t\t\tif (drawCallA.drawOrder && drawCallB.drawOrder) {\n\t\t\t\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n\t\t\t} else if (drawCallA.zdist && drawCallB.zdist) {\n\t\t\t\treturn drawCallB.zdist - drawCallA.zdist;\n\t\t\t}\n\t\t}\n\n\t\tkeyA$1 = drawCallA._key[SORTKEY_FORWARD];\n\t\tkeyB$1 = drawCallB._key[SORTKEY_FORWARD];\n\n\t\tif (keyA$1 === keyB$1 && drawCallA.mesh && drawCallB.mesh) {\n\t\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t\t}\n\n\t\treturn keyB$1 - keyA$1;\n\t}\n\n\tdepthSortCompare(drawCallA, drawCallB) {\n\t\tkeyA$1 = drawCallA._key[SORTKEY_DEPTH];\n\t\tkeyB$1 = drawCallB._key[SORTKEY_DEPTH];\n\n\t\tif (keyA$1 === keyB$1 && drawCallA.mesh && drawCallB.mesh) {\n\t\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t\t}\n\n\t\treturn keyB$1 - keyA$1;\n\t}\n\n\tlightCompare(lightA, lightB) {\n\t\treturn lightA.key - lightB.key;\n\t}\n\n\tupdateCameraFrustum(camera) {\n\t\tif (camera.vrDisplay && camera.vrDisplay.presenting) {\n\t\t\tprojMat = camera.vrDisplay.combinedProj;\n\t\t\tvar parent = camera._node.parent;\n\n\t\t\tif (parent) {\n\t\t\t\tviewMat.copy(parent.getWorldTransform()).mul(camera.vrDisplay.combinedViewInv).invert();\n\t\t\t} else {\n\t\t\t\tviewMat.copy(camera.vrDisplay.combinedView);\n\t\t\t}\n\n\t\t\tviewInvMat.copy(viewMat).invert();\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t} else if (camera.xr && camera.xr.views.length) {\n\t\t\tvar view = camera.xr.views[0];\n\t\t\tviewProjMat.mul2(view.projMat, view.viewOffMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t\treturn;\n\t\t}\n\n\t\tprojMat = camera.projectionMatrix;\n\n\t\tif (camera.calculateProjection) {\n\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t}\n\n\t\tif (camera.calculateTransform) {\n\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t} else {\n\t\t\tvar pos = camera._node.getPosition();\n\n\t\t\tvar rot = camera._node.getRotation();\n\n\t\t\tviewInvMat.setTRS(pos, rot, Vec3.ONE);\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t}\n\n\t\tviewMat.copy(viewInvMat).invert();\n\t\tviewProjMat.mul2(projMat, viewMat);\n\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t}\n\n\tsetCamera(camera, target, clear, cullBorder) {\n\t\tvar vrDisplay = camera.vrDisplay;\n\t\tvar parent, transform;\n\n\t\tif (vrDisplay && vrDisplay.presenting) {\n\t\t\tprojL = vrDisplay.leftProj;\n\t\t\tprojR = vrDisplay.rightProj;\n\t\t\tprojMat = vrDisplay.combinedProj;\n\n\t\t\tif (camera.calculateProjection) {\n\t\t\t\tcamera.calculateProjection(projL, VIEW_LEFT);\n\t\t\t\tcamera.calculateProjection(projR, VIEW_RIGHT);\n\t\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t\t}\n\n\t\t\tif (camera.calculateTransform) {\n\t\t\t\tcamera.calculateTransform(viewInvL, VIEW_LEFT);\n\t\t\t\tcamera.calculateTransform(viewInvR, VIEW_RIGHT);\n\t\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t\t\tviewL.copy(viewInvL).invert();\n\t\t\t\tviewR.copy(viewInvR).invert();\n\t\t\t\tviewMat.copy(viewInvMat).invert();\n\t\t\t} else {\n\t\t\t\tparent = camera._node.parent;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\ttransform = parent.getWorldTransform();\n\t\t\t\t\tviewInvL.mul2(transform, vrDisplay.leftViewInv);\n\t\t\t\t\tviewInvR.mul2(transform, vrDisplay.rightViewInv);\n\t\t\t\t\tviewL.copy(viewInvL).invert();\n\t\t\t\t\tviewR.copy(viewInvR).invert();\n\t\t\t\t\tviewMat.copy(parent.getWorldTransform()).mul(vrDisplay.combinedViewInv).invert();\n\t\t\t\t} else {\n\t\t\t\t\tviewInvL.copy(vrDisplay.leftViewInv);\n\t\t\t\t\tviewInvR.copy(vrDisplay.rightViewInv);\n\t\t\t\t\tviewL.copy(vrDisplay.leftView);\n\t\t\t\t\tviewR.copy(vrDisplay.rightView);\n\t\t\t\t\tviewMat.copy(vrDisplay.combinedView);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tviewMat3L.setFromMat4(viewL);\n\t\t\tviewMat3R.setFromMat4(viewR);\n\t\t\tviewProjMatL.mul2(projL, viewL);\n\t\t\tviewProjMatR.mul2(projR, viewR);\n\t\t\tviewPosL.x = viewInvL.data[12];\n\t\t\tviewPosL.y = viewInvL.data[13];\n\t\t\tviewPosL.z = viewInvL.data[14];\n\t\t\tviewPosR.x = viewInvR.data[12];\n\t\t\tviewPosR.y = viewInvR.data[13];\n\t\t\tviewPosR.z = viewInvR.data[14];\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t} else if (camera.xr && camera.xr.session) {\n\t\t\tparent = camera._node.parent;\n\t\t\tif (parent) transform = parent.getWorldTransform();\n\t\t\tvar views = camera.xr.views;\n\n\t\t\tfor (var v = 0; v < views.length; v++) {\n\t\t\t\tvar view = views[v];\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tview.viewInvOffMat.mul2(transform, view.viewInvMat);\n\t\t\t\t\tview.viewOffMat.copy(view.viewInvOffMat).invert();\n\t\t\t\t} else {\n\t\t\t\t\tview.viewInvOffMat.copy(view.viewInvMat);\n\t\t\t\t\tview.viewOffMat.copy(view.viewMat);\n\t\t\t\t}\n\n\t\t\t\tview.viewMat3.setFromMat4(view.viewOffMat);\n\t\t\t\tview.projViewOffMat.mul2(view.projMat, view.viewOffMat);\n\t\t\t\tview.position[0] = view.viewInvOffMat.data[12];\n\t\t\t\tview.position[1] = view.viewInvOffMat.data[13];\n\t\t\t\tview.position[2] = view.viewInvOffMat.data[14];\n\t\t\t\tcamera.frustum.setFromMat4(view.projViewOffMat);\n\t\t\t}\n\t\t} else {\n\t\t\tprojMat = camera.projectionMatrix;\n\n\t\t\tif (camera.calculateProjection) {\n\t\t\t\tcamera.calculateProjection(projMat, VIEW_CENTER);\n\t\t\t}\n\n\t\t\tthis.projId.setValue(projMat.data);\n\t\t\tthis.projSkyboxId.setValue(camera.getProjectionMatrixSkybox().data);\n\n\t\t\tif (camera.calculateTransform) {\n\t\t\t\tcamera.calculateTransform(viewInvMat, VIEW_CENTER);\n\t\t\t} else {\n\t\t\t\tvar pos = camera._node.getPosition();\n\n\t\t\t\tvar rot = camera._node.getRotation();\n\n\t\t\t\tviewInvMat.setTRS(pos, rot, Vec3.ONE);\n\t\t\t}\n\n\t\t\tthis.viewInvId.setValue(viewInvMat.data);\n\t\t\tviewMat.copy(viewInvMat).invert();\n\t\t\tthis.viewId.setValue(viewMat.data);\n\t\t\tviewMat3.setFromMat4(viewMat);\n\t\t\tthis.viewId3.setValue(viewMat3.data);\n\t\t\tviewProjMat.mul2(projMat, viewMat);\n\n\t\t\tif (target && target.flipY) {\n\t\t\t\tflippedViewProjMat.mul2(flipYMat, viewProjMat);\n\t\t\t\tflippedSkyboxProjMat.mul2(flipYMat, camera.getProjectionMatrixSkybox());\n\t\t\t\tthis.viewProjId.setValue(flippedViewProjMat.data);\n\t\t\t\tthis.projSkyboxId.setValue(flippedSkyboxProjMat.data);\n\t\t\t} else {\n\t\t\t\tthis.viewProjId.setValue(viewProjMat.data);\n\t\t\t\tthis.projSkyboxId.setValue(camera.getProjectionMatrixSkybox().data);\n\t\t\t}\n\n\t\t\tthis.dispatchViewPos(camera._node.getPosition());\n\t\t\tcamera.frustum.setFromMat4(viewProjMat);\n\t\t}\n\n\t\tthis.nearClipId.setValue(camera._nearClip);\n\t\tthis.farClipId.setValue(camera._farClip);\n\t\tvar n = camera._nearClip;\n\t\tvar f = camera._farClip;\n\t\tthis.cameraParams[0] = 1 / f;\n\t\tthis.cameraParams[1] = f;\n\t\tthis.cameraParams[2] = (1 - f / n) * 0.5;\n\t\tthis.cameraParams[3] = (1 + f / n) * 0.5;\n\t\tthis.cameraParamsId.setValue(this.cameraParams);\n\t\tthis.clearView(camera, target, clear, false);\n\t\tvar device = this.device;\n\t\tvar pixelWidth = target ? target.width : device.width;\n\t\tvar pixelHeight = target ? target.height : device.height;\n\t\tvar scissorRect = camera.scissorRect;\n\t\tvar x = Math.floor(scissorRect.x * pixelWidth);\n\t\tvar y = Math.floor(scissorRect.y * pixelHeight);\n\t\tvar w = Math.floor(scissorRect.z * pixelWidth);\n\t\tvar h = Math.floor(scissorRect.w * pixelHeight);\n\t\tdevice.setScissor(x, y, w, h);\n\t\tif (cullBorder) device.setScissor(1, 1, pixelWidth - 2, pixelHeight - 2);\n\t}\n\n\tclearView(camera, target, clear, forceWrite, options) {\n\t\tvar device = this.device;\n\t\tdevice.setRenderTarget(target);\n\t\tdevice.updateBegin();\n\n\t\tif (forceWrite) {\n\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t\tdevice.setDepthWrite(true);\n\t\t}\n\n\t\tvar rect = camera.rect;\n\t\tvar pixelWidth = target ? target.width : device.width;\n\t\tvar pixelHeight = target ? target.height : device.height;\n\t\tvar x = Math.floor(rect.x * pixelWidth);\n\t\tvar y = Math.floor(rect.y * pixelHeight);\n\t\tvar w = Math.floor(rect.z * pixelWidth);\n\t\tvar h = Math.floor(rect.w * pixelHeight);\n\t\tdevice.setViewport(x, y, w, h);\n\t\tdevice.setScissor(x, y, w, h);\n\n\t\tif (clear) {\n\t\t\tif (!options) options = camera._clearOptions;\n\t\t\tdevice.clear(options ? options : {\n\t\t\t\tcolor: [camera._clearColor.r, camera._clearColor.g, camera._clearColor.b, camera._clearColor.a],\n\t\t\t\tdepth: camera._clearDepth,\n\t\t\t\tflags: (camera._clearColorBuffer ? CLEARFLAG_COLOR : 0) | (camera._clearDepthBuffer ? CLEARFLAG_DEPTH : 0) | (camera._clearStencilBuffer ? CLEARFLAG_STENCIL : 0),\n\t\t\t\tstencil: camera._clearStencil\n\t\t\t});\n\t\t}\n\t}\n\n\tdispatchGlobalLights(scene) {\n\t\tthis.ambientColor[0] = scene.ambientLight.r;\n\t\tthis.ambientColor[1] = scene.ambientLight.g;\n\t\tthis.ambientColor[2] = scene.ambientLight.b;\n\n\t\tif (scene.gammaCorrection) {\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tthis.ambientColor[i] = Math.pow(this.ambientColor[i], 2.2);\n\t\t\t}\n\t\t}\n\n\t\tthis.ambientId.setValue(this.ambientColor);\n\t\tthis.exposureId.setValue(scene.exposure);\n\t\tif (scene.skyboxModel) this.skyboxIntensityId.setValue(scene.skyboxIntensity);\n\t}\n\n\t_resolveLight(scope, i) {\n\t\tconst light = \"light\" + i;\n\t\tthis.lightColorId[i] = scope.resolve(light + \"_color\");\n\t\tthis.lightDir[i] = new Float32Array(3);\n\t\tthis.lightDirId[i] = scope.resolve(light + \"_direction\");\n\t\tthis.lightShadowMapId[i] = scope.resolve(light + \"_shadowMap\");\n\t\tthis.lightShadowMatrixId[i] = scope.resolve(light + \"_shadowMatrix\");\n\t\tthis.lightShadowParamsId[i] = scope.resolve(light + \"_shadowParams\");\n\t\tthis.lightRadiusId[i] = scope.resolve(light + \"_radius\");\n\t\tthis.lightPos[i] = new Float32Array(3);\n\t\tthis.lightPosId[i] = scope.resolve(light + \"_position\");\n\t\tthis.lightWidth[i] = new Float32Array(3);\n\t\tthis.lightWidthId[i] = scope.resolve(light + \"_halfWidth\");\n\t\tthis.lightHeight[i] = new Float32Array(3);\n\t\tthis.lightHeightId[i] = scope.resolve(light + \"_halfHeight\");\n\t\tthis.lightInAngleId[i] = scope.resolve(light + \"_innerConeAngle\");\n\t\tthis.lightOutAngleId[i] = scope.resolve(light + \"_outerConeAngle\");\n\t\tthis.lightCookieId[i] = scope.resolve(light + \"_cookie\");\n\t\tthis.lightCookieIntId[i] = scope.resolve(light + \"_cookieIntensity\");\n\t\tthis.lightCookieMatrixId[i] = scope.resolve(light + \"_cookieMatrix\");\n\t\tthis.lightCookieOffsetId[i] = scope.resolve(light + \"_cookieOffset\");\n\t\tthis.shadowMatrixPaletteId[i] = scope.resolve(light + \"_shadowMatrixPalette[0]\");\n\t\tthis.shadowCascadeDistancesId[i] = scope.resolve(light + \"_shadowCascadeDistances[0]\");\n\t\tthis.shadowCascadeCountId[i] = scope.resolve(light + \"_shadowCascadeCount\");\n\t}\n\n\tsetLTCDirectionallLight(wtm, cnt, dir, campos, far) {\n\t\tthis.lightPos[cnt][0] = campos.x - dir.x * far;\n\t\tthis.lightPos[cnt][1] = campos.y - dir.y * far;\n\t\tthis.lightPos[cnt][2] = campos.z - dir.z * far;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\t\tvar hWidth = wtm.transformVector(new Vec3(-0.5, 0, 0));\n\t\tthis.lightWidth[cnt][0] = hWidth.x * far;\n\t\tthis.lightWidth[cnt][1] = hWidth.y * far;\n\t\tthis.lightWidth[cnt][2] = hWidth.z * far;\n\t\tthis.lightWidthId[cnt].setValue(this.lightWidth[cnt]);\n\t\tvar hHeight = wtm.transformVector(new Vec3(0, 0, 0.5));\n\t\tthis.lightHeight[cnt][0] = hHeight.x * far;\n\t\tthis.lightHeight[cnt][1] = hHeight.y * far;\n\t\tthis.lightHeight[cnt][2] = hHeight.z * far;\n\t\tthis.lightHeightId[cnt].setValue(this.lightHeight[cnt]);\n\t}\n\n\tdispatchDirectLights(dirs, scene, mask, camera) {\n\t\tvar numDirs = dirs.length;\n\t\tvar i;\n\t\tvar directional, wtm;\n\t\tvar cnt = 0;\n\t\tvar scope = this.device.scope;\n\n\t\tfor (i = 0; i < numDirs; i++) {\n\t\t\tif (!(dirs[i].mask & mask)) continue;\n\t\t\tdirectional = dirs[i];\n\t\t\twtm = directional._node.getWorldTransform();\n\n\t\t\tif (!this.lightColorId[cnt]) {\n\t\t\t\tthis._resolveLight(scope, cnt);\n\t\t\t}\n\n\t\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? directional._linearFinalColor : directional._finalColor);\n\t\t\twtm.getY(directional._direction).mulScalar(-1);\n\n\t\t\tdirectional._direction.normalize();\n\n\t\t\tthis.lightDir[cnt][0] = directional._direction.x;\n\t\t\tthis.lightDir[cnt][1] = directional._direction.y;\n\t\t\tthis.lightDir[cnt][2] = directional._direction.z;\n\t\t\tthis.lightDirId[cnt].setValue(this.lightDir[cnt]);\n\n\t\t\tif (directional.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\t\tthis.setLTCDirectionallLight(wtm, cnt, directional._direction, camera._node.getPosition(), camera.farClip);\n\t\t\t}\n\n\t\t\tif (directional.castShadows) {\n\t\t\t\tconst lightRenderData = directional.getRenderData(camera, 0);\n\t\t\t\tconst farClip = lightRenderData.shadowCamera._farClip;\n\t\t\t\tlet bias;\n\n\t\t\t\tif (directional._isVsm) {\n\t\t\t\t\tbias = -0.00001 * 20;\n\t\t\t\t} else {\n\t\t\t\t\tbias = directional.shadowBias / farClip * 100;\n\n\t\t\t\t\tif (!this.device.webgl2 && this.device.extStandardDerivatives) {\n\t\t\t\t\t\tbias *= -100;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar normalBias = directional._isVsm ? directional.vsmBias / (farClip / 7.0) : directional._normalOffsetBias;\n\t\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\t\tthis.lightShadowMatrixId[cnt].setValue(lightRenderData.shadowMatrix.data);\n\t\t\t\tthis.shadowMatrixPaletteId[cnt].setValue(directional._shadowMatrixPalette);\n\t\t\t\tthis.shadowCascadeDistancesId[cnt].setValue(directional._shadowCascadeDistances);\n\t\t\t\tthis.shadowCascadeCountId[cnt].setValue(directional.numCascades);\n\t\t\t\tvar params = directional._shadowRenderParams;\n\t\t\t\tparams.length = 3;\n\t\t\t\tparams[0] = directional._shadowResolution;\n\t\t\t\tparams[1] = normalBias;\n\t\t\t\tparams[2] = bias;\n\t\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t\t}\n\n\t\t\tcnt++;\n\t\t}\n\n\t\treturn cnt;\n\t}\n\n\tsetLTCPositionalLight(wtm, cnt) {\n\t\tvar hWidth = wtm.transformVector(new Vec3(-0.5, 0, 0));\n\t\tthis.lightWidth[cnt][0] = hWidth.x;\n\t\tthis.lightWidth[cnt][1] = hWidth.y;\n\t\tthis.lightWidth[cnt][2] = hWidth.z;\n\t\tthis.lightWidthId[cnt].setValue(this.lightWidth[cnt]);\n\t\tvar hHeight = wtm.transformVector(new Vec3(0, 0, 0.5));\n\t\tthis.lightHeight[cnt][0] = hHeight.x;\n\t\tthis.lightHeight[cnt][1] = hHeight.y;\n\t\tthis.lightHeight[cnt][2] = hHeight.z;\n\t\tthis.lightHeightId[cnt].setValue(this.lightHeight[cnt]);\n\t}\n\n\tdispatchOmniLight(scene, scope, omni, cnt) {\n\t\tvar wtm = omni._node.getWorldTransform();\n\n\t\tif (!this.lightColorId[cnt]) {\n\t\t\tthis._resolveLight(scope, cnt);\n\t\t}\n\n\t\tthis.lightRadiusId[cnt].setValue(omni.attenuationEnd);\n\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? omni._linearFinalColor : omni._finalColor);\n\t\twtm.getTranslation(omni._position);\n\t\tthis.lightPos[cnt][0] = omni._position.x;\n\t\tthis.lightPos[cnt][1] = omni._position.y;\n\t\tthis.lightPos[cnt][2] = omni._position.z;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\n\t\tif (omni.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\tthis.setLTCPositionalLight(wtm, cnt);\n\t\t}\n\n\t\tif (omni.castShadows) {\n\t\t\tconst lightRenderData = omni.getRenderData(null, 0);\n\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\tvar params = omni._shadowRenderParams;\n\t\t\tparams.length = 4;\n\t\t\tparams[0] = omni._shadowResolution;\n\t\t\tparams[1] = omni._normalOffsetBias;\n\t\t\tparams[2] = omni.shadowBias;\n\t\t\tparams[3] = 1.0 / omni.attenuationEnd;\n\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t}\n\n\t\tif (omni._cookie) {\n\t\t\tthis.lightCookieId[cnt].setValue(omni._cookie);\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(wtm.data);\n\t\t\tthis.lightCookieIntId[cnt].setValue(omni.cookieIntensity);\n\t\t}\n\t}\n\n\tdispatchSpotLight(scene, scope, spot, cnt) {\n\t\tvar wtm = spot._node.getWorldTransform();\n\n\t\tif (!this.lightColorId[cnt]) {\n\t\t\tthis._resolveLight(scope, cnt);\n\t\t}\n\n\t\tthis.lightInAngleId[cnt].setValue(spot._innerConeAngleCos);\n\t\tthis.lightOutAngleId[cnt].setValue(spot._outerConeAngleCos);\n\t\tthis.lightRadiusId[cnt].setValue(spot.attenuationEnd);\n\t\tthis.lightColorId[cnt].setValue(scene.gammaCorrection ? spot._linearFinalColor : spot._finalColor);\n\t\twtm.getTranslation(spot._position);\n\t\tthis.lightPos[cnt][0] = spot._position.x;\n\t\tthis.lightPos[cnt][1] = spot._position.y;\n\t\tthis.lightPos[cnt][2] = spot._position.z;\n\t\tthis.lightPosId[cnt].setValue(this.lightPos[cnt]);\n\n\t\tif (spot.shape !== LIGHTSHAPE_PUNCTUAL) {\n\t\t\tthis.setLTCPositionalLight(wtm, cnt);\n\t\t}\n\n\t\twtm.getY(spot._direction).mulScalar(-1);\n\n\t\tspot._direction.normalize();\n\n\t\tthis.lightDir[cnt][0] = spot._direction.x;\n\t\tthis.lightDir[cnt][1] = spot._direction.y;\n\t\tthis.lightDir[cnt][2] = spot._direction.z;\n\t\tthis.lightDirId[cnt].setValue(this.lightDir[cnt]);\n\t\tlet cookieMatrix;\n\n\t\tif (spot.castShadows) {\n\t\t\tvar bias;\n\n\t\t\tif (spot._isVsm) {\n\t\t\t\tbias = -0.00001 * 20;\n\t\t\t} else {\n\t\t\t\tbias = spot.shadowBias * 20;\n\t\t\t\tif (!this.device.webgl2 && this.device.extStandardDerivatives) bias *= -100;\n\t\t\t}\n\n\t\t\tvar normalBias = spot._isVsm ? spot.vsmBias / (spot.attenuationEnd / 7.0) : spot._normalOffsetBias;\n\t\t\tconst lightRenderData = spot.getRenderData(null, 0);\n\t\t\tthis.lightShadowMapId[cnt].setValue(lightRenderData.shadowBuffer);\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(lightRenderData.shadowMatrix.data);\n\t\t\tvar params = spot._shadowRenderParams;\n\t\t\tparams.length = 4;\n\t\t\tparams[0] = spot._shadowResolution;\n\t\t\tparams[1] = normalBias;\n\t\t\tparams[2] = bias;\n\t\t\tparams[3] = 1.0 / spot.attenuationEnd;\n\t\t\tthis.lightShadowParamsId[cnt].setValue(params);\n\t\t\tcookieMatrix = lightRenderData.shadowMatrix;\n\t\t}\n\n\t\tif (spot._cookie) {\n\t\t\tthis.lightCookieId[cnt].setValue(spot._cookie);\n\n\t\t\tif (!spot.castShadows) {\n\t\t\t\tconst cookieCam = ForwardRenderer.getSpotCookieCamera();\n\t\t\t\tcookieCam.fov = spot._outerConeAngle * 2;\n\t\t\t\tconst cookieNode = cookieCam._node;\n\t\t\t\tcookieNode.setPosition(spot._node.getPosition());\n\t\t\t\tcookieNode.setRotation(spot._node.getRotation());\n\t\t\t\tcookieNode.rotateLocal(-90, 0, 0);\n\t\t\t\tshadowCamView.setTRS(cookieNode.getPosition(), cookieNode.getRotation(), Vec3.ONE).invert();\n\t\t\t\tshadowCamViewProj.mul2(cookieCam.projectionMatrix, shadowCamView);\n\t\t\t\tcookieMatrix = spot.cookieMatrix;\n\t\t\t\tcookieMatrix.mul2(ShadowRenderer.scaleShiftMatrix, shadowCamViewProj);\n\t\t\t}\n\n\t\t\tthis.lightShadowMatrixId[cnt].setValue(cookieMatrix.data);\n\t\t\tthis.lightCookieIntId[cnt].setValue(spot.cookieIntensity);\n\n\t\t\tif (spot._cookieTransform) {\n\t\t\t\tspot._cookieTransformUniform[0] = spot._cookieTransform.x;\n\t\t\t\tspot._cookieTransformUniform[1] = spot._cookieTransform.y;\n\t\t\t\tspot._cookieTransformUniform[2] = spot._cookieTransform.z;\n\t\t\t\tspot._cookieTransformUniform[3] = spot._cookieTransform.w;\n\t\t\t\tthis.lightCookieMatrixId[cnt].setValue(spot._cookieTransformUniform);\n\t\t\t\tspot._cookieOffsetUniform[0] = spot._cookieOffset.x;\n\t\t\t\tspot._cookieOffsetUniform[1] = spot._cookieOffset.y;\n\t\t\t\tthis.lightCookieOffsetId[cnt].setValue(spot._cookieOffsetUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispatchLocalLights(sortedLights, scene, mask, usedDirLights, staticLightList) {\n\t\tvar i;\n\t\tvar omni, spot;\n\t\tvar omnis = sortedLights[LIGHTTYPE_OMNI];\n\t\tvar spts = sortedLights[LIGHTTYPE_SPOT];\n\t\tvar numDirs = usedDirLights;\n\t\tvar numOmnis = omnis.length;\n\t\tvar numSpts = spts.length;\n\t\tvar cnt = numDirs;\n\t\tvar scope = this.device.scope;\n\n\t\tfor (i = 0; i < numOmnis; i++) {\n\t\t\tomni = omnis[i];\n\t\t\tif (!(omni.mask & mask)) continue;\n\t\t\tif (omni.isStatic) continue;\n\t\t\tthis.dispatchOmniLight(scene, scope, omni, cnt);\n\t\t\tcnt++;\n\t\t}\n\n\t\tvar staticId = 0;\n\n\t\tif (staticLightList) {\n\t\t\tomni = staticLightList[staticId];\n\n\t\t\twhile (omni && omni._type === LIGHTTYPE_OMNI) {\n\t\t\t\tthis.dispatchOmniLight(scene, scope, omni, cnt);\n\t\t\t\tcnt++;\n\t\t\t\tstaticId++;\n\t\t\t\tomni = staticLightList[staticId];\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < numSpts; i++) {\n\t\t\tspot = spts[i];\n\t\t\tif (!(spot.mask & mask)) continue;\n\t\t\tif (spot.isStatic) continue;\n\t\t\tthis.dispatchSpotLight(scene, scope, spot, cnt);\n\t\t\tcnt++;\n\t\t}\n\n\t\tif (staticLightList) {\n\t\t\tspot = staticLightList[staticId];\n\n\t\t\twhile (spot && spot._type === LIGHTTYPE_SPOT) {\n\t\t\t\tthis.dispatchSpotLight(scene, scope, spot, cnt);\n\t\t\t\tcnt++;\n\t\t\t\tstaticId++;\n\t\t\t\tspot = staticLightList[staticId];\n\t\t\t}\n\t\t}\n\t}\n\n\tcull(camera, drawCalls, visibleList) {\n\t\tvar visibleLength = 0;\n\t\tvar i, drawCall, visible;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar cullingMask = camera.cullingMask || 0xFFFFFFFF;\n\n\t\tif (!camera.frustumCulling) {\n\t\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\t\tdrawCall = drawCalls[i];\n\t\t\t\tif (!drawCall.visible && !drawCall.command) continue;\n\t\t\t\tif (drawCall.mask && (drawCall.mask & cullingMask) === 0) continue;\n\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\tvisibleLength++;\n\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t}\n\n\t\t\treturn visibleLength;\n\t\t}\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (!drawCall.command) {\n\t\t\t\tif (!drawCall.visible) continue;\n\t\t\t\tvisible = true;\n\t\t\t\tif (drawCall.mask && (drawCall.mask & cullingMask) === 0) continue;\n\n\t\t\t\tif (drawCall.cull) {\n\t\t\t\t\tvisible = drawCall._isVisible(camera);\n\t\t\t\t}\n\n\t\t\t\tif (visible) {\n\t\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\t\tvisibleLength++;\n\t\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\tvisibleLength++;\n\t\t\t\tdrawCall.visibleThisFrame = true;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleLength;\n\t}\n\n\tcullLights(camera, lights) {\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tconst light = lights[i];\n\n\t\t\tif (!light.visibleThisFrame && light.enabled) {\n\t\t\t\tif (light._type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t} else {\n\t\t\t\t\tlight.getBoundingSphere(tempSphere$1);\n\n\t\t\t\t\tif (camera.frustum.containsSphere(tempSphere$1)) {\n\t\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (light.castShadows && !light.shadowMap) {\n\t\t\t\t\t\t\tlight.visibleThisFrame = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateCpuSkinMatrices(drawCalls) {\n\t\t_skinUpdateIndex++;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tif (drawCallsCount === 0) return;\n\t\tvar i, si;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tsi = drawCalls[i].skinInstance;\n\n\t\t\tif (si) {\n\t\t\t\tsi.updateMatrices(drawCalls[i].node, _skinUpdateIndex);\n\t\t\t\tsi._dirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateGpuSkinMatrices(drawCalls) {\n\t\tvar i, skin;\n\t\tvar drawCallsCount = drawCalls.length;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tif (!drawCalls[i].visibleThisFrame) continue;\n\t\t\tskin = drawCalls[i].skinInstance;\n\n\t\t\tif (skin) {\n\t\t\t\tif (skin._dirty) {\n\t\t\t\t\tskin.updateMatrixPalette(drawCalls[i].node, _skinUpdateIndex);\n\t\t\t\t\tskin._dirty = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMorphing(drawCalls) {\n\t\tvar i, morphInst;\n\t\tvar drawCallsCount = drawCalls.length;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tmorphInst = drawCalls[i].morphInstance;\n\n\t\t\tif (morphInst && morphInst._dirty && drawCalls[i].visibleThisFrame) {\n\t\t\t\tmorphInst.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetBaseConstants(device, material) {\n\t\tdevice.setCullMode(material.cull);\n\n\t\tif (material.opacityMap) {\n\t\t\tthis.opacityMapId.setValue(material.opacityMap);\n\t\t\tthis.alphaTestId.setValue(material.alphaTest);\n\t\t}\n\t}\n\n\tsetSkinning(device, meshInstance, material) {\n\t\tif (meshInstance.skinInstance) {\n\t\t\tthis._skinDrawCalls++;\n\n\t\t\tif (device.supportsBoneTextures) {\n\t\t\t\tboneTexture = meshInstance.skinInstance.boneTexture;\n\t\t\t\tthis.boneTextureId.setValue(boneTexture);\n\t\t\t\tboneTextureSize[0] = boneTexture.width;\n\t\t\t\tboneTextureSize[1] = boneTexture.height;\n\t\t\t\tboneTextureSize[2] = 1.0 / boneTexture.width;\n\t\t\t\tboneTextureSize[3] = 1.0 / boneTexture.height;\n\t\t\t\tthis.boneTextureSizeId.setValue(boneTextureSize);\n\t\t\t} else {\n\t\t\t\tthis.poseMatrixId.setValue(meshInstance.skinInstance.matrixPalette);\n\t\t\t}\n\t\t}\n\t}\n\n\tdrawInstance(device, meshInstance, mesh, style, normal) {\n\t\tinstancingData = meshInstance.instancingData;\n\n\t\tif (instancingData) {\n\t\t\tif (instancingData.count > 0) {\n\t\t\t\tthis._instancedDrawCalls++;\n\t\t\t\tdevice.setVertexBuffer(instancingData.vertexBuffer);\n\t\t\t\tdevice.draw(mesh.primitive[style], instancingData.count);\n\n\t\t\t\tif (instancingData.vertexBuffer === _autoInstanceBuffer) {\n\t\t\t\t\tthis._removedByInstancing += instancingData.count;\n\t\t\t\t\tmeshInstance.instancingData = null;\n\t\t\t\t\treturn instancingData.count - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmodelMatrix = meshInstance.node.worldTransform;\n\t\t\tthis.modelMatrixId.setValue(modelMatrix.data);\n\n\t\t\tif (normal) {\n\t\t\t\tnormalMatrix = meshInstance.node.normalMatrix;\n\n\t\t\t\tif (meshInstance.node._dirtyNormal) {\n\t\t\t\t\tmodelMatrix.invertTo3x3(normalMatrix);\n\t\t\t\t\tnormalMatrix.transpose();\n\t\t\t\t\tmeshInstance.node._dirtyNormal = false;\n\t\t\t\t}\n\n\t\t\t\tthis.normalMatrixId.setValue(normalMatrix.data);\n\t\t\t}\n\n\t\t\tdevice.draw(mesh.primitive[style]);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tdrawInstance2(device, meshInstance, mesh, style) {\n\t\tinstancingData = meshInstance.instancingData;\n\n\t\tif (instancingData) {\n\t\t\tif (instancingData.count > 0) {\n\t\t\t\tthis._instancedDrawCalls++;\n\t\t\t\tdevice.draw(mesh.primitive[style], instancingData.count, true);\n\n\t\t\t\tif (instancingData.vertexBuffer === _autoInstanceBuffer) {\n\t\t\t\t\tthis._removedByInstancing += instancingData.count;\n\t\t\t\t\tmeshInstance.instancingData = null;\n\t\t\t\t\treturn instancingData.count - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdevice.draw(mesh.primitive[style], undefined, true);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\trenderShadows(lights, camera) {\n\t\tvar device = this.device;\n\t\tdevice.grabPassAvailable = false;\n\n\t\tfor (let i = 0; i < lights.length; i++) {\n\t\t\tthis._shadowRenderer.render(lights[i], camera);\n\t\t}\n\n\t\tif (device.webgl2) {\n\t\t\tdevice.setDepthBias(false);\n\t\t} else if (device.extStandardDerivatives) {\n\t\t\tthis.polygonOffset[0] = 0;\n\t\t\tthis.polygonOffset[1] = 0;\n\t\t\tthis.polygonOffsetId.setValue(this.polygonOffset);\n\t\t}\n\n\t\tdevice.grabPassAvailable = true;\n\t}\n\n\tupdateShader(meshInstance, objDefs, staticLightList, pass, sortedLights) {\n\t\tmeshInstance.material._scene = this.scene;\n\n\t\tif (meshInstance.material._dirtyBlend) {\n\t\t\tthis.scene.layers._dirtyBlend = true;\n\t\t}\n\n\t\tmeshInstance.material.updateShader(this.device, this.scene, objDefs, staticLightList, pass, sortedLights);\n\t\tmeshInstance._shader[pass] = meshInstance.material.shader;\n\t}\n\n\tsetCullMode(cullFaces, flip, drawCall) {\n\t\tvar material = drawCall.material;\n\t\tvar mode = CULLFACE_NONE;\n\n\t\tif (cullFaces) {\n\t\t\tvar flipFaces = 1;\n\n\t\t\tif (material.cull > CULLFACE_NONE && material.cull < CULLFACE_FRONTANDBACK) {\n\t\t\t\tif (drawCall.flipFaces) flipFaces *= -1;\n\t\t\t\tif (flip) flipFaces *= -1;\n\t\t\t\tvar wt = drawCall.node.worldTransform;\n\t\t\t\twt.getX(worldMatX);\n\t\t\t\twt.getY(worldMatY);\n\t\t\t\twt.getZ(worldMatZ);\n\t\t\t\tworldMatX.cross(worldMatX, worldMatY);\n\n\t\t\t\tif (worldMatX.dot(worldMatZ) < 0) {\n\t\t\t\t\tflipFaces *= -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (flipFaces < 0) {\n\t\t\t\tmode = material.cull === CULLFACE_FRONT ? CULLFACE_BACK : CULLFACE_FRONT;\n\t\t\t} else {\n\t\t\t\tmode = material.cull;\n\t\t\t}\n\t\t}\n\n\t\tthis.device.setCullMode(mode);\n\n\t\tif (mode === CULLFACE_NONE && material.cull === CULLFACE_NONE) {\n\t\t\tvar wt2 = drawCall.node.worldTransform;\n\t\t\twt2.getX(worldMatX);\n\t\t\twt2.getY(worldMatY);\n\t\t\twt2.getZ(worldMatZ);\n\t\t\tworldMatX.cross(worldMatX, worldMatY);\n\n\t\t\tif (worldMatX.dot(worldMatZ) < 0) {\n\t\t\t\tthis.twoSidedLightingNegScaleFactorId.setValue(-1.0);\n\t\t\t} else {\n\t\t\t\tthis.twoSidedLightingNegScaleFactorId.setValue(1.0);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetVertexBuffers(device, mesh) {\n\t\tdevice.setVertexBuffer(mesh.vertexBuffer);\n\t}\n\n\tsetMorphing(device, morphInstance) {\n\t\tif (morphInstance) {\n\t\t\tif (morphInstance.morph.useTextureMorph) {\n\t\t\t\tdevice.setVertexBuffer(morphInstance.morph.vertexBufferIds);\n\t\t\t\tthis.morphPositionTex.setValue(morphInstance.texturePositions);\n\t\t\t\tthis.morphNormalTex.setValue(morphInstance.textureNormals);\n\t\t\t\tthis.morphTexParams.setValue(morphInstance._textureParams);\n\t\t\t} else {\n\t\t\t\tvar vb, semantic;\n\n\t\t\t\tfor (var t = 0; t < morphInstance._activeVertexBuffers.length; t++) {\n\t\t\t\t\tvb = morphInstance._activeVertexBuffers[t];\n\n\t\t\t\t\tif (vb) {\n\t\t\t\t\t\tsemantic = SEMANTIC_ATTR + (t + 8);\n\t\t\t\t\t\tvb.format.elements[0].name = semantic;\n\t\t\t\t\t\tvb.format.elements[0].scopeId = device.scope.resolve(semantic);\n\t\t\t\t\t\tvb.format.update();\n\t\t\t\t\t\tdevice.setVertexBuffer(vb);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.morphWeightsA.setValue(morphInstance._shaderMorphWeightsA);\n\t\t\t\tthis.morphWeightsB.setValue(morphInstance._shaderMorphWeightsB);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispatchViewPos(position) {\n\t\tconst vp = this.viewPos;\n\t\tvp[0] = position.x;\n\t\tvp[1] = position.y;\n\t\tvp[2] = position.z;\n\t\tthis.viewPosId.setValue(vp);\n\t}\n\n\trenderForward(camera, drawCalls, drawCallsCount, sortedLights, pass, cullingMask, drawCallback, layer, flipFaces) {\n\t\tvar device = this.device;\n\t\tvar scene = this.scene;\n\t\tvar vrDisplay = camera.vrDisplay;\n\t\tvar lightHash = layer ? layer._lightHash : 0;\n\t\tvar passFlag = 1 << pass;\n\t\tvar i, drawCall, mesh, material, objDefs, variantKey, lightMask, style, usedDirLights;\n\t\tvar prevMaterial = null,\n\t\t\t\tprevObjDefs,\n\t\t\t\tprevLightMask,\n\t\t\t\tprevStatic;\n\t\tvar stencilFront, stencilBack;\n\t\tvar halfWidth = device.width * 0.5;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\t\t\tif (cullingMask && drawCall.mask && !(cullingMask & drawCall.mask)) continue;\n\n\t\t\tif (drawCall.command) {\n\t\t\t\tdrawCall.command();\n\t\t\t} else {\n\t\t\t\tmesh = drawCall.mesh;\n\t\t\t\tmaterial = drawCall.material;\n\t\t\t\tobjDefs = drawCall._shaderDefs;\n\t\t\t\tlightMask = drawCall.mask;\n\t\t\t\tthis.setSkinning(device, drawCall, material);\n\n\t\t\t\tif (material && material === prevMaterial && objDefs !== prevObjDefs) {\n\t\t\t\t\tprevMaterial = null;\n\t\t\t\t}\n\n\t\t\t\tif (drawCall.isStatic || prevStatic) {\n\t\t\t\t\tprevMaterial = null;\n\t\t\t\t}\n\n\t\t\t\tif (material !== prevMaterial) {\n\t\t\t\t\tthis._materialSwitches++;\n\n\t\t\t\t\tif (material.dirty) {\n\t\t\t\t\t\tmaterial.updateUniforms();\n\t\t\t\t\t\tmaterial.dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!drawCall._shader[pass] || drawCall._shaderDefs !== objDefs || drawCall._lightHash !== lightHash) {\n\t\t\t\t\t\tif (!drawCall.isStatic) {\n\t\t\t\t\t\t\tvariantKey = pass + \"_\" + objDefs + \"_\" + lightHash;\n\t\t\t\t\t\t\tdrawCall._shader[pass] = material.variants[variantKey];\n\n\t\t\t\t\t\t\tif (!drawCall._shader[pass]) {\n\t\t\t\t\t\t\t\tthis.updateShader(drawCall, objDefs, null, pass, sortedLights);\n\t\t\t\t\t\t\t\tmaterial.variants[variantKey] = drawCall._shader[pass];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.updateShader(drawCall, objDefs, drawCall._staticLightList, pass, sortedLights);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdrawCall._shaderDefs = objDefs;\n\t\t\t\t\t\tdrawCall._lightHash = lightHash;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!drawCall._shader[pass].failed && !device.setShader(drawCall._shader[pass])) {\n\t\t\t\t\t\tdrawCall._shader[pass].failed = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterial.setParameters(device);\n\n\t\t\t\t\tif (!prevMaterial || lightMask !== prevLightMask) {\n\t\t\t\t\t\tusedDirLights = this.dispatchDirectLights(sortedLights[LIGHTTYPE_DIRECTIONAL], scene, lightMask, camera);\n\t\t\t\t\t\tthis.dispatchLocalLights(sortedLights, scene, lightMask, usedDirLights, drawCall._staticLightList);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.alphaTestId.setValue(material.alphaTest);\n\t\t\t\t\tdevice.setBlending(material.blend);\n\n\t\t\t\t\tif (material.blend) {\n\t\t\t\t\t\tif (material.separateAlphaBlend) {\n\t\t\t\t\t\t\tdevice.setBlendFunctionSeparate(material.blendSrc, material.blendDst, material.blendSrcAlpha, material.blendDstAlpha);\n\t\t\t\t\t\t\tdevice.setBlendEquationSeparate(material.blendEquation, material.blendAlphaEquation);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setBlendFunction(material.blendSrc, material.blendDst);\n\t\t\t\t\t\t\tdevice.setBlendEquation(material.blendEquation);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdevice.setColorWrite(material.redWrite, material.greenWrite, material.blueWrite, material.alphaWrite);\n\t\t\t\t\tdevice.setDepthWrite(material.depthWrite);\n\n\t\t\t\t\tif (material.depthWrite && !material.depthTest) {\n\t\t\t\t\t\tdevice.setDepthFunc(FUNC_ALWAYS);\n\t\t\t\t\t\tdevice.setDepthTest(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdevice.setDepthFunc(FUNC_LESSEQUAL);\n\t\t\t\t\t\tdevice.setDepthTest(material.depthTest);\n\t\t\t\t\t}\n\n\t\t\t\t\tdevice.setAlphaToCoverage(material.alphaToCoverage);\n\n\t\t\t\t\tif (material.depthBias || material.slopeDepthBias) {\n\t\t\t\t\t\tdevice.setDepthBias(true);\n\t\t\t\t\t\tdevice.setDepthBiasValues(material.depthBias, material.slopeDepthBias);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdevice.setDepthBias(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setCullMode(camera._cullFaces, flipFaces, drawCall);\n\t\t\t\tstencilFront = drawCall.stencilFront || material.stencilFront;\n\t\t\t\tstencilBack = drawCall.stencilBack || material.stencilBack;\n\n\t\t\t\tif (stencilFront || stencilBack) {\n\t\t\t\t\tdevice.setStencilTest(true);\n\n\t\t\t\t\tif (stencilFront === stencilBack) {\n\t\t\t\t\t\tdevice.setStencilFunc(stencilFront.func, stencilFront.ref, stencilFront.readMask);\n\t\t\t\t\t\tdevice.setStencilOperation(stencilFront.fail, stencilFront.zfail, stencilFront.zpass, stencilFront.writeMask);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (stencilFront) {\n\t\t\t\t\t\t\tdevice.setStencilFuncFront(stencilFront.func, stencilFront.ref, stencilFront.readMask);\n\t\t\t\t\t\t\tdevice.setStencilOperationFront(stencilFront.fail, stencilFront.zfail, stencilFront.zpass, stencilFront.writeMask);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setStencilFuncFront(FUNC_ALWAYS, 0, 0xFF);\n\t\t\t\t\t\t\tdevice.setStencilOperationFront(STENCILOP_KEEP, STENCILOP_KEEP, STENCILOP_KEEP, 0xFF);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (stencilBack) {\n\t\t\t\t\t\t\tdevice.setStencilFuncBack(stencilBack.func, stencilBack.ref, stencilBack.readMask);\n\t\t\t\t\t\t\tdevice.setStencilOperationBack(stencilBack.fail, stencilBack.zfail, stencilBack.zpass, stencilBack.writeMask);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdevice.setStencilFuncBack(FUNC_ALWAYS, 0, 0xFF);\n\t\t\t\t\t\t\tdevice.setStencilOperationBack(STENCILOP_KEEP, STENCILOP_KEEP, STENCILOP_KEEP, 0xFF);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdevice.setStencilTest(false);\n\t\t\t\t}\n\n\t\t\t\tdrawCall.setParameters(device, passFlag);\n\t\t\t\tthis.setVertexBuffers(device, mesh);\n\t\t\t\tthis.setMorphing(device, drawCall.morphInstance);\n\t\t\t\tstyle = drawCall.renderStyle;\n\t\t\t\tdevice.setIndexBuffer(mesh.indexBuffer[style]);\n\n\t\t\t\tif (drawCallback) {\n\t\t\t\t\tdrawCallback(drawCall, i);\n\t\t\t\t}\n\n\t\t\t\tif (vrDisplay && vrDisplay.presenting) {\n\t\t\t\t\tdevice.setViewport(0, 0, halfWidth, device.height);\n\t\t\t\t\tthis.projId.setValue(projL.data);\n\t\t\t\t\tthis.projSkyboxId.setValue(projL.data);\n\t\t\t\t\tthis.viewInvId.setValue(viewInvL.data);\n\t\t\t\t\tthis.viewId.setValue(viewL.data);\n\t\t\t\t\tthis.viewId3.setValue(viewMat3L.data);\n\t\t\t\t\tthis.viewProjId.setValue(viewProjMatL.data);\n\t\t\t\t\tthis.dispatchViewPos(viewPosL);\n\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t\tdevice.setViewport(halfWidth, 0, halfWidth, device.height);\n\t\t\t\t\tthis.projId.setValue(projR.data);\n\t\t\t\t\tthis.projSkyboxId.setValue(projR.data);\n\t\t\t\t\tthis.viewInvId.setValue(viewInvR.data);\n\t\t\t\t\tthis.viewId.setValue(viewR.data);\n\t\t\t\t\tthis.viewId3.setValue(viewMat3R.data);\n\t\t\t\t\tthis.viewProjId.setValue(viewProjMatR.data);\n\t\t\t\t\tthis.dispatchViewPos(viewPosR);\n\t\t\t\t\ti += this.drawInstance2(device, drawCall, mesh, style);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t} else if (camera.xr && camera.xr.session && camera.xr.views.length) {\n\t\t\t\t\tvar views = camera.xr.views;\n\n\t\t\t\t\tfor (var v = 0; v < views.length; v++) {\n\t\t\t\t\t\tvar view = views[v];\n\t\t\t\t\t\tdevice.setViewport(view.viewport.x, view.viewport.y, view.viewport.z, view.viewport.w);\n\t\t\t\t\t\tthis.projId.setValue(view.projMat.data);\n\t\t\t\t\t\tthis.projSkyboxId.setValue(view.projMat.data);\n\t\t\t\t\t\tthis.viewId.setValue(view.viewOffMat.data);\n\t\t\t\t\t\tthis.viewInvId.setValue(view.viewInvOffMat.data);\n\t\t\t\t\t\tthis.viewId3.setValue(view.viewMat3.data);\n\t\t\t\t\t\tthis.viewProjId.setValue(view.projViewOffMat.data);\n\t\t\t\t\t\tthis.viewPosId.setValue(view.position);\n\n\t\t\t\t\t\tif (v === 0) {\n\t\t\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ti += this.drawInstance2(device, drawCall, mesh, style);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ti += this.drawInstance(device, drawCall, mesh, style, true);\n\t\t\t\t\tthis._forwardDrawCalls++;\n\t\t\t\t}\n\n\t\t\t\tif (i < drawCallsCount - 1 && drawCalls[i + 1].material === material) {\n\t\t\t\t\tmaterial.setParameters(device, drawCall.parameters);\n\t\t\t\t}\n\n\t\t\t\tprevMaterial = material;\n\t\t\t\tprevObjDefs = objDefs;\n\t\t\t\tprevLightMask = lightMask;\n\t\t\t\tprevStatic = drawCall.isStatic;\n\t\t\t}\n\t\t}\n\n\t\tdevice.updateEnd();\n\t}\n\n\tsetupInstancing(device) {\n\t\tif (device.enableAutoInstancing) {\n\t\t\tif (!_autoInstanceBuffer) {\n\t\t\t\t_autoInstanceBuffer = new VertexBuffer(device, VertexFormat.defaultInstancingFormat, device.autoInstancingMaxObjects, BUFFER_DYNAMIC);\n\t\t\t}\n\t\t}\n\t}\n\n\trevertStaticMeshes(meshInstances) {\n\t\tvar i;\n\t\tvar drawCalls = meshInstances;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar drawCall;\n\t\tvar newDrawCalls = [];\n\t\tvar prevStaticSource;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (drawCall._staticSource) {\n\t\t\t\tif (drawCall._staticSource !== prevStaticSource) {\n\t\t\t\t\tnewDrawCalls.push(drawCall._staticSource);\n\t\t\t\t\tprevStaticSource = drawCall._staticSource;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t}\n\t\t}\n\n\t\tmeshInstances.length = newDrawCalls.length;\n\n\t\tfor (i = 0; i < newDrawCalls.length; i++) {\n\t\t\tmeshInstances[i] = newDrawCalls[i];\n\t\t}\n\t}\n\n\tprepareStaticMeshes(meshInstances, lights) {\n\t\tvar i, j, k, v, s, index;\n\t\tvar device = this.device;\n\t\tthis.scene;\n\t\tvar drawCalls = meshInstances;\n\t\tvar drawCallsCount = drawCalls.length;\n\t\tvar drawCall, light;\n\t\tvar newDrawCalls = [];\n\t\tvar mesh;\n\t\tvar indices, verts, numTris, elems, vertSize, offsetP, baseIndex;\n\n\t\tvar _x, _y, _z;\n\n\t\tvar minx, miny, minz, maxx, maxy, maxz;\n\t\tvar minv, maxv;\n\t\tvar minVec = new Vec3();\n\t\tvar maxVec = new Vec3();\n\t\tvar localLightBounds = new BoundingBox();\n\t\tvar invMatrix = new Mat4();\n\t\tvar triLightComb = [];\n\t\tvar triLightCombUsed;\n\t\tvar indexBuffer, vertexBuffer;\n\t\tvar combIndices, combIbName, combIb;\n\t\tvar lightTypePass;\n\t\tvar lightAabb = [];\n\t\tvar aabb;\n\t\tvar triBounds = [];\n\t\tvar staticLights = [];\n\t\tvar bit;\n\t\tvar lht;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\n\t\t\tif (!drawCall.isStatic) {\n\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t} else {\n\t\t\t\taabb = drawCall.aabb;\n\t\t\t\tstaticLights.length = 0;\n\n\t\t\t\tfor (lightTypePass = LIGHTTYPE_OMNI; lightTypePass <= LIGHTTYPE_SPOT; lightTypePass++) {\n\t\t\t\t\tfor (j = 0; j < lights.length; j++) {\n\t\t\t\t\t\tlight = lights[j];\n\t\t\t\t\t\tif (light._type !== lightTypePass) continue;\n\n\t\t\t\t\t\tif (light.enabled) {\n\t\t\t\t\t\t\tif (light.mask & drawCall.mask) {\n\t\t\t\t\t\t\t\tif (light.isStatic) {\n\t\t\t\t\t\t\t\t\tif (!lightAabb[j]) {\n\t\t\t\t\t\t\t\t\t\tlightAabb[j] = new BoundingBox();\n\n\t\t\t\t\t\t\t\t\t\tlight._node.getWorldTransform();\n\n\t\t\t\t\t\t\t\t\t\tlight.getBoundingSphere(tempSphere$1);\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].center.copy(tempSphere$1.center);\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.x = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.y = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t\tlightAabb[j].halfExtents.z = tempSphere$1.radius;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (!lightAabb[j].intersects(aabb)) continue;\n\t\t\t\t\t\t\t\t\tstaticLights.push(j);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (staticLights.length === 0) {\n\t\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tmesh = drawCall.mesh;\n\t\t\t\tvertexBuffer = mesh.vertexBuffer;\n\t\t\t\tindexBuffer = mesh.indexBuffer[drawCall.renderStyle];\n\t\t\t\tindices = indexBuffer.bytesPerIndex === 2 ? new Uint16Array(indexBuffer.lock()) : new Uint32Array(indexBuffer.lock());\n\t\t\t\tnumTris = mesh.primitive[drawCall.renderStyle].count / 3;\n\t\t\t\tbaseIndex = mesh.primitive[drawCall.renderStyle].base;\n\t\t\t\telems = vertexBuffer.format.elements;\n\t\t\t\tvertSize = vertexBuffer.format.size / 4;\n\t\t\t\tverts = new Float32Array(vertexBuffer.storage);\n\n\t\t\t\tfor (k = 0; k < elems.length; k++) {\n\t\t\t\t\tif (elems[k].name === SEMANTIC_POSITION) {\n\t\t\t\t\t\toffsetP = elems[k].offset / 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttriLightComb.length = numTris;\n\n\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\ttriLightComb[k] = 0;\n\t\t\t\t}\n\n\t\t\t\ttriLightCombUsed = false;\n\t\t\t\ttriBounds.length = numTris * 6;\n\n\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\tminx = Number.MAX_VALUE;\n\t\t\t\t\tminy = Number.MAX_VALUE;\n\t\t\t\t\tminz = Number.MAX_VALUE;\n\t\t\t\t\tmaxx = -Number.MAX_VALUE;\n\t\t\t\t\tmaxy = -Number.MAX_VALUE;\n\t\t\t\t\tmaxz = -Number.MAX_VALUE;\n\n\t\t\t\t\tfor (v = 0; v < 3; v++) {\n\t\t\t\t\t\tindex = indices[k * 3 + v + baseIndex];\n\t\t\t\t\t\tindex = index * vertSize + offsetP;\n\t\t\t\t\t\t_x = verts[index];\n\t\t\t\t\t\t_y = verts[index + 1];\n\t\t\t\t\t\t_z = verts[index + 2];\n\t\t\t\t\t\tif (_x < minx) minx = _x;\n\t\t\t\t\t\tif (_y < miny) miny = _y;\n\t\t\t\t\t\tif (_z < minz) minz = _z;\n\t\t\t\t\t\tif (_x > maxx) maxx = _x;\n\t\t\t\t\t\tif (_y > maxy) maxy = _y;\n\t\t\t\t\t\tif (_z > maxz) maxz = _z;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex = k * 6;\n\t\t\t\t\ttriBounds[index] = minx;\n\t\t\t\t\ttriBounds[index + 1] = miny;\n\t\t\t\t\ttriBounds[index + 2] = minz;\n\t\t\t\t\ttriBounds[index + 3] = maxx;\n\t\t\t\t\ttriBounds[index + 4] = maxy;\n\t\t\t\t\ttriBounds[index + 5] = maxz;\n\t\t\t\t}\n\n\t\t\t\tfor (s = 0; s < staticLights.length; s++) {\n\t\t\t\t\tj = staticLights[s];\n\t\t\t\t\tlight = lights[j];\n\t\t\t\t\tinvMatrix.copy(drawCall.node.worldTransform).invert();\n\t\t\t\t\tlocalLightBounds.setFromTransformedAabb(lightAabb[j], invMatrix);\n\t\t\t\t\tminv = localLightBounds.getMin();\n\t\t\t\t\tmaxv = localLightBounds.getMax();\n\t\t\t\t\tbit = 1 << s;\n\n\t\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\t\tindex = k * 6;\n\n\t\t\t\t\t\tif (triBounds[index] <= maxv.x && triBounds[index + 3] >= minv.x && triBounds[index + 1] <= maxv.y && triBounds[index + 4] >= minv.y && triBounds[index + 2] <= maxv.z && triBounds[index + 5] >= minv.z) {\n\t\t\t\t\t\t\ttriLightComb[k] |= bit;\n\t\t\t\t\t\t\ttriLightCombUsed = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (triLightCombUsed) {\n\t\t\t\t\tcombIndices = {};\n\n\t\t\t\t\tfor (k = 0; k < numTris; k++) {\n\t\t\t\t\t\tj = k * 3 + baseIndex;\n\t\t\t\t\t\tcombIbName = triLightComb[k];\n\t\t\t\t\t\tif (!combIndices[combIbName]) combIndices[combIbName] = [];\n\t\t\t\t\t\tcombIb = combIndices[combIbName];\n\t\t\t\t\t\tcombIb.push(indices[j]);\n\t\t\t\t\t\tcombIb.push(indices[j + 1]);\n\t\t\t\t\t\tcombIb.push(indices[j + 2]);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (combIbName in combIndices) {\n\t\t\t\t\t\tcombIb = combIndices[combIbName];\n\t\t\t\t\t\tvar ib = new IndexBuffer(device, indexBuffer.format, combIb.length, indexBuffer.usage);\n\t\t\t\t\t\tvar ib2 = ib.bytesPerIndex === 2 ? new Uint16Array(ib.lock()) : new Uint32Array(ib.lock());\n\t\t\t\t\t\tib2.set(combIb);\n\t\t\t\t\t\tib.unlock();\n\t\t\t\t\t\tminx = Number.MAX_VALUE;\n\t\t\t\t\t\tminy = Number.MAX_VALUE;\n\t\t\t\t\t\tminz = Number.MAX_VALUE;\n\t\t\t\t\t\tmaxx = -Number.MAX_VALUE;\n\t\t\t\t\t\tmaxy = -Number.MAX_VALUE;\n\t\t\t\t\t\tmaxz = -Number.MAX_VALUE;\n\n\t\t\t\t\t\tfor (k = 0; k < combIb.length; k++) {\n\t\t\t\t\t\t\tindex = combIb[k];\n\t\t\t\t\t\t\t_x = verts[index * vertSize + offsetP];\n\t\t\t\t\t\t\t_y = verts[index * vertSize + offsetP + 1];\n\t\t\t\t\t\t\t_z = verts[index * vertSize + offsetP + 2];\n\t\t\t\t\t\t\tif (_x < minx) minx = _x;\n\t\t\t\t\t\t\tif (_y < miny) miny = _y;\n\t\t\t\t\t\t\tif (_z < minz) minz = _z;\n\t\t\t\t\t\t\tif (_x > maxx) maxx = _x;\n\t\t\t\t\t\t\tif (_y > maxy) maxy = _y;\n\t\t\t\t\t\t\tif (_z > maxz) maxz = _z;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tminVec.set(minx, miny, minz);\n\t\t\t\t\t\tmaxVec.set(maxx, maxy, maxz);\n\t\t\t\t\t\tvar chunkAabb = new BoundingBox();\n\t\t\t\t\t\tchunkAabb.setMinMax(minVec, maxVec);\n\t\t\t\t\t\tvar mesh2 = new Mesh(device);\n\t\t\t\t\t\tmesh2.vertexBuffer = vertexBuffer;\n\t\t\t\t\t\tmesh2.indexBuffer[0] = ib;\n\t\t\t\t\t\tmesh2.primitive[0].type = PRIMITIVE_TRIANGLES;\n\t\t\t\t\t\tmesh2.primitive[0].base = 0;\n\t\t\t\t\t\tmesh2.primitive[0].count = combIb.length;\n\t\t\t\t\t\tmesh2.primitive[0].indexed = true;\n\t\t\t\t\t\tmesh2.aabb = chunkAabb;\n\t\t\t\t\t\tvar instance = new MeshInstance(mesh2, drawCall.material, drawCall.node);\n\t\t\t\t\t\tinstance.isStatic = drawCall.isStatic;\n\t\t\t\t\t\tinstance.visible = drawCall.visible;\n\t\t\t\t\t\tinstance.layer = drawCall.layer;\n\t\t\t\t\t\tinstance.castShadow = drawCall.castShadow;\n\t\t\t\t\t\tinstance._receiveShadow = drawCall._receiveShadow;\n\t\t\t\t\t\tinstance.cull = drawCall.cull;\n\t\t\t\t\t\tinstance.pick = drawCall.pick;\n\t\t\t\t\t\tinstance.mask = drawCall.mask;\n\t\t\t\t\t\tinstance.parameters = drawCall.parameters;\n\t\t\t\t\t\tinstance._shaderDefs = drawCall._shaderDefs;\n\t\t\t\t\t\tinstance._staticSource = drawCall;\n\n\t\t\t\t\t\tif (drawCall._staticLightList) {\n\t\t\t\t\t\t\tinstance._staticLightList = drawCall._staticLightList;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinstance._staticLightList = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (k = 0; k < staticLights.length; k++) {\n\t\t\t\t\t\t\tbit = 1 << k;\n\n\t\t\t\t\t\t\tif (combIbName & bit) {\n\t\t\t\t\t\t\t\tlht = lights[staticLights[k]];\n\n\t\t\t\t\t\t\t\tif (instance._staticLightList.indexOf(lht) < 0) {\n\t\t\t\t\t\t\t\t\tinstance._staticLightList.push(lht);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinstance._staticLightList.sort(this.lightCompare);\n\n\t\t\t\t\t\tnewDrawCalls.push(instance);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnewDrawCalls.push(drawCall);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmeshInstances.length = newDrawCalls.length;\n\n\t\tfor (i = 0; i < newDrawCalls.length; i++) {\n\t\t\tmeshInstances[i] = newDrawCalls[i];\n\t\t}\n\t}\n\n\tupdateShaders(drawCalls) {\n\t\tvar mat,\n\t\t\t\tcount = drawCalls.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tmat = drawCalls[i].material;\n\n\t\t\tif (mat) {\n\t\t\t\tif (!_tempMaterialSet.has(mat)) {\n\t\t\t\t\t_tempMaterialSet.add(mat);\n\n\t\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\t\tmat.shader = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_tempMaterialSet.clear();\n\t}\n\n\tupdateLitShaders(drawCalls) {\n\t\tvar mat,\n\t\t\t\tcount = drawCalls.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tmat = drawCalls[i].material;\n\n\t\t\tif (mat) {\n\t\t\t\tif (!_tempMaterialSet.has(mat)) {\n\t\t\t\t\t_tempMaterialSet.add(mat);\n\n\t\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\t\tif (mat.useLighting && (!mat.emitter || mat.emitter.lighting)) {\n\t\t\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\t\t\tmat.shader = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_tempMaterialSet.clear();\n\t}\n\n\tbeginFrame(comp) {\n\t\tvar scene = this.scene;\n\t\tvar meshInstances = comp._meshInstances;\n\t\tvar lights = comp._lights;\n\n\t\tif (scene.updateShaders) {\n\t\t\tthis.updateShaders(meshInstances);\n\t\t\tscene.updateShaders = false;\n\t\t\tscene.updateLitShaders = false;\n\t\t\tscene._shaderVersion++;\n\t\t} else if (scene.updateLitShaders) {\n\t\t\tthis.updateLitShaders(meshInstances);\n\t\t\tscene.updateLitShaders = false;\n\t\t\tscene._shaderVersion++;\n\t\t}\n\n\t\tthis.updateCpuSkinMatrices(meshInstances);\n\t\tvar i;\n\t\tvar len = meshInstances.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tmeshInstances[i].visibleThisFrame = false;\n\t\t}\n\n\t\tlen = lights.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tlights[i].visibleThisFrame = lights[i]._type === LIGHTTYPE_DIRECTIONAL;\n\t\t}\n\t}\n\n\tbeginLayers(comp) {\n\t\tvar scene = this.scene;\n\t\tvar len = comp.layerList.length;\n\t\tvar layer;\n\t\tvar i, j;\n\t\tvar shaderVersion = this.scene._shaderVersion;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tcomp.layerList[i]._postRenderCounter = 0;\n\t\t}\n\n\t\tvar transparent;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tlayer = comp.layerList[i];\n\t\t\tlayer._shaderVersion = shaderVersion;\n\t\t\tlayer._preRenderCalledForCameras = 0;\n\t\t\tlayer._postRenderCalledForCameras = 0;\n\t\t\ttransparent = comp.subLayerList[i];\n\n\t\t\tif (transparent) {\n\t\t\t\tlayer._postRenderCounter |= 2;\n\t\t\t} else {\n\t\t\t\tlayer._postRenderCounter |= 1;\n\t\t\t}\n\n\t\t\tlayer._postRenderCounterMax = layer._postRenderCounter;\n\n\t\t\tfor (j = 0; j < layer.cameras.length; j++) {\n\t\t\t\tlayer.instances.prepare(j);\n\t\t\t}\n\n\t\t\tif (layer._needsStaticPrepare && layer._staticLightHash) {\n\t\t\t\tif (layer._staticPrepareDone) {\n\t\t\t\t\tthis.revertStaticMeshes(layer.opaqueMeshInstances);\n\t\t\t\t\tthis.revertStaticMeshes(layer.transparentMeshInstances);\n\t\t\t\t}\n\n\t\t\t\tthis.prepareStaticMeshes(layer.opaqueMeshInstances, layer._lights);\n\t\t\t\tthis.prepareStaticMeshes(layer.transparentMeshInstances, layer._lights);\n\t\t\t\tcomp._dirty = true;\n\t\t\t\tscene.updateShaders = true;\n\t\t\t\tlayer._needsStaticPrepare = false;\n\t\t\t\tlayer._staticPrepareDone = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tgpuUpdate(drawCalls) {\n\t\tthis.updateGpuSkinMatrices(drawCalls);\n\t\tthis.updateMorphing(drawCalls);\n\t}\n\n\tsetSceneConstants() {\n\t\tvar i;\n\t\tvar device = this.device;\n\t\tvar scene = this.scene;\n\t\tthis.dispatchGlobalLights(scene);\n\n\t\tif (scene.fog !== FOG_NONE) {\n\t\t\tthis.fogColor[0] = scene.fogColor.r;\n\t\t\tthis.fogColor[1] = scene.fogColor.g;\n\t\t\tthis.fogColor[2] = scene.fogColor.b;\n\n\t\t\tif (scene.gammaCorrection) {\n\t\t\t\tfor (i = 0; i < 3; i++) {\n\t\t\t\t\tthis.fogColor[i] = Math.pow(this.fogColor[i], 2.2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fogColorId.setValue(this.fogColor);\n\n\t\t\tif (scene.fog === FOG_LINEAR) {\n\t\t\t\tthis.fogStartId.setValue(scene.fogStart);\n\t\t\t\tthis.fogEndId.setValue(scene.fogEnd);\n\t\t\t} else {\n\t\t\t\tthis.fogDensityId.setValue(scene.fogDensity);\n\t\t\t}\n\t\t}\n\n\t\tthis._screenSize[0] = device.width;\n\t\tthis._screenSize[1] = device.height;\n\t\tthis._screenSize[2] = 1 / device.width;\n\t\tthis._screenSize[3] = 1 / device.height;\n\t\tthis.screenSizeId.setValue(this._screenSize);\n\t}\n\n\tupdateLightStats(comp, compUpdatedFlags) {}\n\n\tcullShadowmaps(comp) {\n\t\tfor (let i = 0; i < comp._lights.length; i++) {\n\t\t\tconst light = comp._lights[i];\n\n\t\t\tif (light._type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tif (light.visibleThisFrame && light.castShadows && light.shadowUpdateMode !== SHADOWUPDATE_NONE) {\n\t\t\t\t\tconst casters = comp._lightCompositionData[i].shadowCastersList;\n\n\t\t\t\t\tthis._shadowRenderer.cullLocal(light, casters);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst renderActions = comp._renderActions;\n\n\t\tfor (let i = 0; i < renderActions.length; i++) {\n\t\t\tconst renderAction = renderActions[i];\n\t\t\tconst count = renderAction.directionalLightsIndices.length;\n\n\t\t\tfor (let j = 0; j < count; j++) {\n\t\t\t\tconst lightIndex = renderAction.directionalLightsIndices[j];\n\t\t\t\tconst light = comp._lights[lightIndex];\n\t\t\t\tconst casters = comp._lightCompositionData[lightIndex].shadowCastersList;\n\n\t\t\t\tthis._shadowRenderer.cullDirectional(light, casters, renderAction.camera.camera);\n\t\t\t}\n\t\t}\n\t}\n\n\tcullComposition(comp) {\n\t\tconst renderActions = comp._renderActions;\n\n\t\tfor (let i = 0; i < renderActions.length; i++) {\n\t\t\tconst renderAction = renderActions[i];\n\t\t\tconst layerIndex = renderAction.layerIndex;\n\t\t\tconst layer = comp.layerList[layerIndex];\n\t\t\tif (!layer.enabled || !comp.subLayerEnabled[layerIndex]) continue;\n\t\t\tconst transparent = comp.subLayerList[layerIndex];\n\t\t\tconst cameraPass = renderAction.cameraIndex;\n\t\t\tconst camera = layer.cameras[cameraPass];\n\n\t\t\tif (camera) {\n\t\t\t\tcamera.frameBegin(renderAction.renderTarget);\n\n\t\t\t\tif (renderAction.firstCameraUse) {\n\t\t\t\t\tthis.updateCameraFrustum(camera.camera);\n\t\t\t\t\tthis._camerasRendered++;\n\t\t\t\t}\n\n\t\t\t\tthis.cullLights(camera.camera, layer._lights);\n\t\t\t\tconst objects = layer.instances;\n\t\t\t\tconst visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\n\t\t\t\tif (!visible.done) {\n\t\t\t\t\tif (layer.onPreCull) {\n\t\t\t\t\t\tlayer.onPreCull(cameraPass);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst drawCalls = transparent ? layer.transparentMeshInstances : layer.opaqueMeshInstances;\n\t\t\t\t\tvisible.length = this.cull(camera.camera, drawCalls, visible.list);\n\t\t\t\t\tvisible.done = true;\n\n\t\t\t\t\tif (layer.onPostCull) {\n\t\t\t\t\t\tlayer.onPostCull(cameraPass);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcamera.frameEnd();\n\t\t\t}\n\t\t}\n\n\t\tthis.cullShadowmaps(comp);\n\t}\n\n\tupdateClusters(comp) {\n\t\tfor (let i = 0; i < comp._worldClusters.length; i++) {\n\t\t\tconst cluster = comp._worldClusters[i];\n\t\t\tcluster.update(comp._lights, this.scene.gammaCorrection);\n\t\t}\n\t}\n\n\trenderComposition(comp) {\n\t\tvar device = this.device;\n\t\tvar camera;\n\t\tvar renderAction,\n\t\t\t\trenderActions = comp._renderActions;\n\t\tvar i, layer, layerIndex, transparent;\n\n\t\tif (this.scene.updateSkybox) {\n\t\t\tthis.scene._updateSkybox(device);\n\n\t\t\tthis.scene.updateSkybox = false;\n\t\t}\n\n\t\tthis.beginLayers(comp);\n\n\t\tvar updated = comp._update();\n\n\t\tif (updated & COMPUPDATED_LIGHTS) {\n\t\t\tthis.scene.updateLitShaders = true;\n\t\t}\n\n\t\tthis.updateLightStats(comp, updated);\n\t\tthis.beginFrame(comp);\n\t\tthis.setSceneConstants();\n\t\tthis.cullComposition(comp);\n\t\tthis.updateClusters(comp);\n\t\tthis.gpuUpdate(comp._meshInstances);\n\n\t\tif (!LayerComposition.clusteredLightingEnabled) {\n\t\t\tthis.renderShadows(comp._splitLights[LIGHTTYPE_SPOT]);\n\t\t\tthis.renderShadows(comp._splitLights[LIGHTTYPE_OMNI]);\n\t\t}\n\n\t\tfor (i = 0; i < renderActions.length; i++) {\n\t\t\trenderAction = renderActions[i];\n\t\t\tlayerIndex = renderAction.layerIndex;\n\t\t\tlayer = comp.layerList[layerIndex];\n\t\t\ttransparent = comp.subLayerList[layerIndex];\n\t\t\tconst cameraPass = renderAction.cameraIndex;\n\t\t\tcamera = layer.cameras[cameraPass];\n\n\t\t\tif (renderAction.directionalLights.length > 0) {\n\t\t\t\tthis.renderShadows(renderAction.directionalLights, camera.camera);\n\t\t\t}\n\n\t\t\tif (!layer.enabled || !comp.subLayerEnabled[layerIndex]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (camera) {\n\t\t\t\tcamera.frameBegin(renderAction.renderTarget);\n\t\t\t}\n\n\t\t\tif (!transparent && layer.onPreRenderOpaque) {\n\t\t\t\tlayer.onPreRenderOpaque(cameraPass);\n\t\t\t} else if (transparent && layer.onPreRenderTransparent) {\n\t\t\t\tlayer.onPreRenderTransparent(cameraPass);\n\t\t\t}\n\n\t\t\tif (!(layer._preRenderCalledForCameras & 1 << cameraPass)) {\n\t\t\t\tif (layer.onPreRender) {\n\t\t\t\t\tlayer.onPreRender(cameraPass);\n\t\t\t\t}\n\n\t\t\t\tlayer._preRenderCalledForCameras |= 1 << cameraPass;\n\t\t\t}\n\n\t\t\tif (camera) {\n\t\t\t\tvar _renderAction, _renderAction$renderT;\n\n\t\t\t\tif (renderAction.clearColor || renderAction.clearDepth || renderAction.clearStencil) {\n\t\t\t\t\tconst backupColor = camera.camera._clearColorBuffer;\n\t\t\t\t\tconst backupDepth = camera.camera._clearDepthBuffer;\n\t\t\t\t\tconst backupStencil = camera.camera._clearStencilBuffer;\n\t\t\t\t\tcamera.camera._clearColorBuffer = renderAction.clearColor;\n\t\t\t\t\tcamera.camera._clearDepthBuffer = renderAction.clearDepth;\n\t\t\t\t\tcamera.camera._clearStencilBuffer = renderAction.clearStencil;\n\t\t\t\t\tthis.clearView(camera.camera, renderAction.renderTarget, true, true);\n\t\t\t\t\tcamera.camera._clearColorBuffer = backupColor;\n\t\t\t\t\tcamera.camera._clearDepthBuffer = backupDepth;\n\t\t\t\t\tcamera.camera._clearStencilBuffer = backupStencil;\n\t\t\t\t}\n\n\t\t\t\tlayer._sortVisible(transparent, camera.camera.node, cameraPass);\n\n\t\t\t\tconst objects = layer.instances;\n\t\t\t\tconst visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\t\t\t\tthis.scene._activeCamera = camera.camera;\n\t\t\t\tthis.setCamera(camera.camera, renderAction.renderTarget);\n\n\t\t\t\tif (LayerComposition.clusteredLightingEnabled && renderAction.lightClusters) {\n\t\t\t\t\trenderAction.lightClusters.activate();\n\t\t\t\t}\n\n\t\t\t\tconst flipFaces = !!(camera.camera._flipFaces ^ ((_renderAction = renderAction) == null ? void 0 : (_renderAction$renderT = _renderAction.renderTarget) == null ? void 0 : _renderAction$renderT.flipY));\n\t\t\t\tconst draws = this._forwardDrawCalls;\n\t\t\t\tthis.renderForward(camera.camera, visible.list, visible.length, layer._splitLights, layer.shaderPass, layer.cullingMask, layer.onDrawCall, layer, flipFaces);\n\t\t\t\tlayer._forwardDrawCalls += this._forwardDrawCalls - draws;\n\t\t\t\tdevice.setColorWrite(true, true, true, true);\n\t\t\t\tdevice.setStencilTest(false);\n\t\t\t\tdevice.setAlphaToCoverage(false);\n\t\t\t\tdevice.setDepthBias(false);\n\t\t\t\tcamera.frameEnd();\n\n\t\t\t\tif (renderAction.triggerPostprocess && camera.onPostprocessing) {\n\t\t\t\t\tcamera.onPostprocessing(camera);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!transparent && layer.onPostRenderOpaque) {\n\t\t\t\tlayer.onPostRenderOpaque(cameraPass);\n\t\t\t} else if (transparent && layer.onPostRenderTransparent) {\n\t\t\t\tlayer.onPostRenderTransparent(cameraPass);\n\t\t\t}\n\n\t\t\tif (layer.onPostRender && !(layer._postRenderCalledForCameras & 1 << cameraPass)) {\n\t\t\t\tlayer._postRenderCounter &= ~(transparent ? 2 : 1);\n\n\t\t\t\tif (layer._postRenderCounter === 0) {\n\t\t\t\t\tlayer.onPostRender(cameraPass);\n\t\t\t\t\tlayer._postRenderCalledForCameras |= 1 << cameraPass;\n\t\t\t\t\tlayer._postRenderCounter = layer._postRenderCounterMax;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nForwardRenderer.spotCookieCamera = null;\n\nvar keyA, keyB, sortPos, sortDir;\n\nfunction sortManual(drawCallA, drawCallB) {\n\treturn drawCallA.drawOrder - drawCallB.drawOrder;\n}\n\nfunction sortMaterialMesh(drawCallA, drawCallB) {\n\tkeyA = drawCallA._key[SORTKEY_FORWARD];\n\tkeyB = drawCallB._key[SORTKEY_FORWARD];\n\n\tif (keyA === keyB && drawCallA.mesh && drawCallB.mesh) {\n\t\treturn drawCallB.mesh.id - drawCallA.mesh.id;\n\t}\n\n\treturn keyB - keyA;\n}\n\nfunction sortBackToFront(drawCallA, drawCallB) {\n\treturn drawCallB.zdist - drawCallA.zdist;\n}\n\nfunction sortFrontToBack(drawCallA, drawCallB) {\n\treturn drawCallA.zdist - drawCallB.zdist;\n}\n\nvar sortCallbacks = [null, sortManual, sortMaterialMesh, sortBackToFront, sortFrontToBack];\n\nfunction sortLights(lightA, lightB) {\n\treturn lightB.key - lightA.key;\n}\n\nvar layerCounter = 0;\n\nclass VisibleInstanceList {\n\tconstructor() {\n\t\tthis.list = [];\n\t\tthis.length = 0;\n\t\tthis.done = false;\n\t}\n\n}\n\nclass InstanceList {\n\tconstructor() {\n\t\tthis.opaqueMeshInstances = [];\n\t\tthis.transparentMeshInstances = [];\n\t\tthis.shadowCasters = [];\n\t\tthis.visibleOpaque = [];\n\t\tthis.visibleTransparent = [];\n\t}\n\n\tprepare(index) {\n\t\tif (!this.visibleOpaque[index]) {\n\t\t\tthis.visibleOpaque[index] = new VisibleInstanceList();\n\t\t}\n\n\t\tif (!this.visibleTransparent[index]) {\n\t\t\tthis.visibleTransparent[index] = new VisibleInstanceList();\n\t\t}\n\n\t\tthis.visibleOpaque[index].done = false;\n\t\tthis.visibleTransparent[index].done = false;\n\t}\n\n\tdelete(index) {\n\t\tif (index < this.visibleOpaque.length) {\n\t\t\tthis.visibleOpaque.splice(index, 1);\n\t\t}\n\n\t\tif (index < this.visibleTransparent.length) {\n\t\t\tthis.visibleTransparent.splice(index, 1);\n\t\t}\n\t}\n\n}\n\nclass Layer {\n\tconstructor(options = {}) {\n\t\tif (options.id !== undefined) {\n\t\t\tthis.id = options.id;\n\t\t\tlayerCounter = Math.max(this.id + 1, layerCounter);\n\t\t} else {\n\t\t\tthis.id = layerCounter++;\n\t\t}\n\n\t\tthis.name = options.name;\n\t\tthis._enabled = options.enabled === undefined ? true : options.enabled;\n\t\tthis._refCounter = this._enabled ? 1 : 0;\n\t\tthis.opaqueSortMode = options.opaqueSortMode === undefined ? SORTMODE_MATERIALMESH : options.opaqueSortMode;\n\t\tthis.transparentSortMode = options.transparentSortMode === undefined ? SORTMODE_BACK2FRONT : options.transparentSortMode;\n\t\tthis.renderTarget = options.renderTarget;\n\t\tthis.shaderPass = options.shaderPass === undefined ? SHADER_FORWARD : options.shaderPass;\n\t\tthis.passThrough = options.passThrough === undefined ? false : options.passThrough;\n\t\tthis._clearColorBuffer = options.clearColorBuffer ? options.clearColorBuffer : false;\n\t\tthis._clearDepthBuffer = options.clearDepthBuffer ? options.clearDepthBuffer : false;\n\t\tthis._clearStencilBuffer = options.clearStencilBuffer ? options.clearStencilBuffer : false;\n\t\tthis.onPreCull = options.onPreCull;\n\t\tthis.onPreRender = options.onPreRender;\n\t\tthis.onPreRenderOpaque = options.onPreRenderOpaque;\n\t\tthis.onPreRenderTransparent = options.onPreRenderTransparent;\n\t\tthis.onPostCull = options.onPostCull;\n\t\tthis.onPostRender = options.onPostRender;\n\t\tthis.onPostRenderOpaque = options.onPostRenderOpaque;\n\t\tthis.onPostRenderTransparent = options.onPostRenderTransparent;\n\t\tthis.onDrawCall = options.onDrawCall;\n\t\tthis.onEnable = options.onEnable;\n\t\tthis.onDisable = options.onDisable;\n\n\t\tif (this._enabled && this.onEnable) {\n\t\t\tthis.onEnable();\n\t\t}\n\n\t\tthis.layerReference = options.layerReference;\n\t\tthis.instances = options.layerReference ? options.layerReference.instances : new InstanceList();\n\t\tthis.cullingMask = options.cullingMask ? options.cullingMask : 0xFFFFFFFF;\n\t\tthis.opaqueMeshInstances = this.instances.opaqueMeshInstances;\n\t\tthis.transparentMeshInstances = this.instances.transparentMeshInstances;\n\t\tthis.shadowCasters = this.instances.shadowCasters;\n\t\tthis.customSortCallback = null;\n\t\tthis.customCalculateSortValues = null;\n\t\tthis._lights = [];\n\t\tthis._lightsSet = new Set();\n\t\tthis._clusteredLightsSet = new Set();\n\t\tthis._splitLights = [[], [], []];\n\t\tthis.cameras = [];\n\t\tthis._dirty = false;\n\t\tthis._dirtyLights = false;\n\t\tthis._dirtyCameras = false;\n\t\tthis._lightHash = 0;\n\t\tthis._staticLightHash = 0;\n\t\tthis._needsStaticPrepare = true;\n\t\tthis._staticPrepareDone = false;\n\t\tthis._shaderVersion = -1;\n\t\tthis._lightCube = null;\n\t}\n\n\tget renderTarget() {\n\t\treturn this._renderTarget;\n\t}\n\n\tset renderTarget(rt) {\n\t\tthis._renderTarget = rt;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(val) {\n\t\tif (val !== this._enabled) {\n\t\t\tthis._enabled = val;\n\n\t\t\tif (val) {\n\t\t\t\tthis.incrementCounter();\n\t\t\t\tif (this.onEnable) this.onEnable();\n\t\t\t} else {\n\t\t\t\tthis.decrementCounter();\n\t\t\t\tif (this.onDisable) this.onDisable();\n\t\t\t}\n\t\t}\n\t}\n\n\tget clearColor() {\n\t\treturn this._clearColor;\n\t}\n\n\tset clearColor(val) {\n\t\tthis._clearColor.copy(val);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(val) {\n\t\tthis._clearColorBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(val) {\n\t\tthis._clearDepthBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(val) {\n\t\tthis._clearStencilBuffer = val;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tincrementCounter() {\n\t\tif (this._refCounter === 0) {\n\t\t\tthis._enabled = true;\n\t\t\tif (this.onEnable) this.onEnable();\n\t\t}\n\n\t\tthis._refCounter++;\n\t}\n\n\tdecrementCounter() {\n\t\tif (this._refCounter === 1) {\n\t\t\tthis._enabled = false;\n\t\t\tif (this.onDisable) this.onDisable();\n\t\t} else if (this._refCounter === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._refCounter--;\n\t}\n\n\taddMeshInstances(meshInstances, skipShadowCasters) {\n\t\tvar sceneShaderVer = this._shaderVersion;\n\t\tvar m, arr, mat;\n\t\tvar casters = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tmat = m.material;\n\n\t\t\tif (mat.blendType === BLEND_NONE) {\n\t\t\t\tarr = this.opaqueMeshInstances;\n\t\t\t} else {\n\t\t\t\tarr = this.transparentMeshInstances;\n\t\t\t}\n\n\t\t\tif (this.opaqueMeshInstances.indexOf(m) < 0 && this.transparentMeshInstances.indexOf(m) < 0) {\n\t\t\t\tarr.push(m);\n\t\t\t}\n\n\t\t\tif (!skipShadowCasters && m.castShadow && casters.indexOf(m) < 0) casters.push(m);\n\n\t\t\tif (!this.passThrough && sceneShaderVer >= 0 && mat._shaderVersion !== sceneShaderVer) {\n\t\t\t\tif (mat.updateShader !== Material.prototype.updateShader) {\n\t\t\t\t\tmat.clearVariants();\n\t\t\t\t\tmat.shader = null;\n\t\t\t\t}\n\n\t\t\t\tmat._shaderVersion = sceneShaderVer;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.passThrough) this._dirty = true;\n\t}\n\n\tremoveMeshInstanceFromArray(m, arr) {\n\t\tvar drawCall;\n\t\tvar spliceOffset = -1;\n\t\tvar spliceCount = 0;\n\t\tvar len = arr.length;\n\n\t\tfor (var j = 0; j < len; j++) {\n\t\t\tdrawCall = arr[j];\n\n\t\t\tif (drawCall === m) {\n\t\t\t\tspliceOffset = j;\n\t\t\t\tspliceCount = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (drawCall._staticSource === m) {\n\t\t\t\tif (spliceOffset < 0) spliceOffset = j;\n\t\t\t\tspliceCount++;\n\t\t\t} else if (spliceOffset >= 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (spliceOffset >= 0) {\n\t\t\tarr.splice(spliceOffset, spliceCount);\n\t\t}\n\t}\n\n\tremoveMeshInstances(meshInstances, skipShadowCasters) {\n\t\tvar j, m;\n\t\tvar opaque = this.opaqueMeshInstances;\n\t\tvar transparent = this.transparentMeshInstances;\n\t\tvar casters = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tthis.removeMeshInstanceFromArray(m, opaque);\n\t\t\tthis.removeMeshInstanceFromArray(m, transparent);\n\n\t\t\tif (!skipShadowCasters) {\n\t\t\t\tj = casters.indexOf(m);\n\t\t\t\tif (j >= 0) casters.splice(j, 1);\n\t\t\t}\n\t\t}\n\n\t\tthis._dirty = true;\n\t}\n\n\tclearMeshInstances(skipShadowCasters) {\n\t\tif (this.opaqueMeshInstances.length === 0 && this.transparentMeshInstances.length === 0) {\n\t\t\tif (skipShadowCasters || this.shadowCasters.length === 0) return;\n\t\t}\n\n\t\tthis.opaqueMeshInstances.length = 0;\n\t\tthis.transparentMeshInstances.length = 0;\n\t\tif (!skipShadowCasters) this.shadowCasters.length = 0;\n\t\tif (!this.passThrough) this._dirty = true;\n\t}\n\n\taddLight(light) {\n\t\tconst l = light.light;\n\n\t\tif (!this._lightsSet.has(l)) {\n\t\t\tthis._lightsSet.add(l);\n\n\t\t\tif (l.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis._clusteredLightsSet.add(l);\n\t\t\t}\n\n\t\t\tthis._lights.push(l);\n\n\t\t\tthis._dirtyLights = true;\n\n\t\t\tthis._generateLightHash();\n\t\t}\n\t}\n\n\tremoveLight(light) {\n\t\tconst l = light.light;\n\n\t\tif (this._lightsSet.has(l)) {\n\t\t\tthis._lightsSet.delete(l);\n\n\t\t\tif (l.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis._clusteredLightsSet.delete(l);\n\t\t\t}\n\n\t\t\tthis._lights.splice(this._lights.indexOf(l), 1);\n\n\t\t\tthis._dirtyLights = true;\n\n\t\t\tthis._generateLightHash();\n\t\t}\n\t}\n\n\tclearLights() {\n\t\tthis._lightsSet.clear();\n\n\t\tthis._clusteredLightsSet.clear();\n\n\t\tthis._lights.length = 0;\n\t\tthis._dirtyLights = true;\n\t}\n\n\tget clusteredLightsSet() {\n\t\treturn this._clusteredLightsSet;\n\t}\n\n\taddShadowCasters(meshInstances) {\n\t\tvar m;\n\t\tvar arr = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tm = meshInstances[i];\n\t\t\tif (!m.castShadow) continue;\n\t\t\tif (arr.indexOf(m) < 0) arr.push(m);\n\t\t}\n\n\t\tthis._dirtyLights = true;\n\t}\n\n\tremoveShadowCasters(meshInstances) {\n\t\tvar id;\n\t\tvar arr = this.shadowCasters;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tid = arr.indexOf(meshInstances[i]);\n\t\t\tif (id >= 0) arr.splice(id, 1);\n\t\t}\n\n\t\tthis._dirtyLights = true;\n\t}\n\n\t_generateLightHash() {\n\t\tif (this._lights.length > 0) {\n\t\t\tthis._lights.sort(sortLights);\n\n\t\t\tvar str = \"\";\n\t\t\tvar strStatic = \"\";\n\n\t\t\tfor (var i = 0; i < this._lights.length; i++) {\n\t\t\t\tif (this._lights[i].isStatic) {\n\t\t\t\t\tstrStatic += this._lights[i].key;\n\t\t\t\t} else {\n\t\t\t\t\tstr += this._lights[i].key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (str.length === 0) {\n\t\t\t\tthis._lightHash = 0;\n\t\t\t} else {\n\t\t\t\tthis._lightHash = hashCode(str);\n\t\t\t}\n\n\t\t\tif (strStatic.length === 0) {\n\t\t\t\tthis._staticLightHash = 0;\n\t\t\t} else {\n\t\t\t\tthis._staticLightHash = hashCode(strStatic);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._lightHash = 0;\n\t\t\tthis._staticLightHash = 0;\n\t\t}\n\t}\n\n\taddCamera(camera) {\n\t\tif (this.cameras.indexOf(camera) >= 0) return;\n\t\tthis.cameras.push(camera);\n\t\tthis._dirtyCameras = true;\n\t}\n\n\tremoveCamera(camera) {\n\t\tvar index = this.cameras.indexOf(camera);\n\n\t\tif (index >= 0) {\n\t\t\tthis.cameras.splice(index, 1);\n\t\t\tthis._dirtyCameras = true;\n\t\t\tthis.instances.delete(index);\n\t\t}\n\t}\n\n\tclearCameras() {\n\t\tthis.cameras.length = 0;\n\t\tthis._dirtyCameras = true;\n\t}\n\n\t_calculateSortDistances(drawCalls, drawCallsCount, camPos, camFwd) {\n\t\tvar i, drawCall, meshPos;\n\t\tvar tempx, tempy, tempz;\n\n\t\tfor (i = 0; i < drawCallsCount; i++) {\n\t\t\tdrawCall = drawCalls[i];\n\t\t\tif (drawCall.command) continue;\n\t\t\tif (drawCall.layer <= LAYER_FX) continue;\n\n\t\t\tif (drawCall.calculateSortDistance) {\n\t\t\t\tdrawCall.zdist = drawCall.calculateSortDistance(drawCall, camPos, camFwd);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmeshPos = drawCall.aabb.center;\n\t\t\ttempx = meshPos.x - camPos.x;\n\t\t\ttempy = meshPos.y - camPos.y;\n\t\t\ttempz = meshPos.z - camPos.z;\n\t\t\tdrawCall.zdist = tempx * camFwd.x + tempy * camFwd.y + tempz * camFwd.z;\n\t\t}\n\t}\n\n\t_sortVisible(transparent, cameraNode, cameraPass) {\n\t\tvar objects = this.instances;\n\t\tvar sortMode = transparent ? this.transparentSortMode : this.opaqueSortMode;\n\t\tif (sortMode === SORTMODE_NONE) return;\n\t\tvar visible = transparent ? objects.visibleTransparent[cameraPass] : objects.visibleOpaque[cameraPass];\n\n\t\tif (sortMode === SORTMODE_CUSTOM) {\n\t\t\tsortPos = cameraNode.getPosition();\n\t\t\tsortDir = cameraNode.forward;\n\n\t\t\tif (this.customCalculateSortValues) {\n\t\t\t\tthis.customCalculateSortValues(visible.list, visible.length, sortPos, sortDir);\n\t\t\t}\n\n\t\t\tif (visible.list.length !== visible.length) {\n\t\t\t\tvisible.list.length = visible.length;\n\t\t\t}\n\n\t\t\tif (this.customSortCallback) {\n\t\t\t\tvisible.list.sort(this.customSortCallback);\n\t\t\t}\n\t\t} else {\n\t\t\tif (sortMode === SORTMODE_BACK2FRONT || sortMode === SORTMODE_FRONT2BACK) {\n\t\t\t\tsortPos = cameraNode.getPosition();\n\t\t\t\tsortDir = cameraNode.forward;\n\n\t\t\t\tthis._calculateSortDistances(visible.list, visible.length, sortPos, sortDir);\n\t\t\t}\n\n\t\t\tif (visible.list.length !== visible.length) {\n\t\t\t\tvisible.list.length = visible.length;\n\t\t\t}\n\n\t\t\tvisible.list.sort(sortCallbacks[sortMode]);\n\t\t}\n\t}\n\n}\n\nvar spotCenter = new Vec3();\nvar spotEndPoint = new Vec3();\nvar tmpVec = new Vec3();\nvar chanId = {\n\tr: 0,\n\tg: 1,\n\tb: 2,\n\ta: 3\n};\nconst directionalCascades = [[new Vec4(0, 0, 1, 1)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5), new Vec4(0.5, 0, 0.5, 0.5)], [new Vec4(0, 0, 0.5, 0.5), new Vec4(0, 0.5, 0.5, 0.5), new Vec4(0.5, 0, 0.5, 0.5), new Vec4(0.5, 0.5, 0.5, 0.5)]];\n\nclass LightRenderData {\n\tconstructor(device, camera, face, light) {\n\t\tthis.light = light;\n\t\tthis.camera = camera;\n\t\tthis.shadowCamera = ShadowRenderer.createShadowCamera(device, light._shadowType, light._type, face);\n\t\tthis.shadowMatrix = new Mat4();\n\t\tthis.face = face;\n\t\tthis.visibleCasters = [];\n\t}\n\n\tget shadowBuffer() {\n\t\tconst rt = this.shadowCamera.renderTarget;\n\n\t\tif (rt) {\n\t\t\tconst light = this.light;\n\n\t\t\tif (light._type === LIGHTTYPE_OMNI) {\n\t\t\t\treturn rt.colorBuffer;\n\t\t\t}\n\n\t\t\treturn light._isPcf && light.device.webgl2 ? rt.depthBuffer : rt.colorBuffer;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass Light {\n\tconstructor(graphicsDevice) {\n\t\tthis.device = graphicsDevice;\n\t\tthis._type = LIGHTTYPE_DIRECTIONAL;\n\t\tthis._color = new Color(0.8, 0.8, 0.8);\n\t\tthis._intensity = 1;\n\t\tthis._castShadows = false;\n\t\tthis._enabled = false;\n\t\tthis.mask = MASK_DYNAMIC;\n\t\tthis.isStatic = false;\n\t\tthis.key = 0;\n\t\tthis.bakeDir = true;\n\t\tthis.attenuationStart = 10;\n\t\tthis.attenuationEnd = 10;\n\t\tthis._falloffMode = 0;\n\t\tthis._shadowType = SHADOW_PCF3;\n\t\tthis._vsmBlurSize = 11;\n\t\tthis.vsmBlurMode = BLUR_GAUSSIAN;\n\t\tthis.vsmBias = 0.01 * 0.25;\n\t\tthis._cookie = null;\n\t\tthis.cookieIntensity = 1;\n\t\tthis._cookieFalloff = true;\n\t\tthis._cookieChannel = \"rgb\";\n\t\tthis._cookieTransform = null;\n\t\tthis._cookieTransformUniform = new Float32Array(4);\n\t\tthis._cookieOffset = null;\n\t\tthis._cookieOffsetUniform = new Float32Array(2);\n\t\tthis._cookieTransformSet = false;\n\t\tthis._cookieOffsetSet = false;\n\t\tthis._innerConeAngle = 40;\n\t\tthis._outerConeAngle = 45;\n\t\tthis.cascades = null;\n\t\tthis._shadowMatrixPalette = null;\n\t\tthis._shadowCascadeDistances = null;\n\t\tthis.numCascades = 1;\n\t\tthis.cascadeDistribution = 0.5;\n\t\tthis._shape = LIGHTSHAPE_PUNCTUAL;\n\t\tthis._finalColor = new Float32Array([0.8, 0.8, 0.8]);\n\t\tvar c = Math.pow(this._finalColor[0], 2.2);\n\t\tthis._linearFinalColor = new Float32Array([c, c, c]);\n\t\tthis._position = new Vec3(0, 0, 0);\n\t\tthis._direction = new Vec3(0, 0, 0);\n\t\tthis._innerConeAngleCos = Math.cos(this._innerConeAngle * Math.PI / 180);\n\t\tthis._outerConeAngleCos = Math.cos(this._outerConeAngle * Math.PI / 180);\n\t\tthis._shadowMap = null;\n\t\tthis._shadowRenderParams = [];\n\t\tthis.shadowDistance = 40;\n\t\tthis._shadowResolution = 1024;\n\t\tthis.shadowBias = -0.0005;\n\t\tthis._normalOffsetBias = 0.0;\n\t\tthis.shadowUpdateMode = SHADOWUPDATE_REALTIME;\n\t\tthis._isVsm = false;\n\t\tthis._isPcf = true;\n\t\tthis._cookieMatrix = null;\n\t\tthis._scene = null;\n\t\tthis._node = null;\n\t\tthis._renderData = [];\n\t\tthis.visibleThisFrame = false;\n\t}\n\n\tdestroy() {\n\t\tthis._destroyShadowMap();\n\n\t\tthis._renderData = null;\n\t}\n\n\t_destroyShadowMap() {\n\t\tif (this._renderData) {\n\t\t\tthis._renderData.length = 0;\n\t\t}\n\n\t\tif (this._shadowMap) {\n\t\t\tif (!this._shadowMap.cached) {\n\t\t\t\tthis._shadowMap.destroy();\n\t\t\t}\n\n\t\t\tthis._shadowMap = null;\n\t\t}\n\n\t\tif (this.shadowUpdateMode === SHADOWUPDATE_NONE) {\n\t\t\tthis.shadowUpdateMode = SHADOWUPDATE_THISFRAME;\n\t\t}\n\t}\n\n\tgetRenderData(camera, face) {\n\t\tfor (let i = 0; i < this._renderData.length; i++) {\n\t\t\tconst current = this._renderData[i];\n\n\t\t\tif (current.camera === camera && current.face === face) {\n\t\t\t\treturn current;\n\t\t\t}\n\t\t}\n\n\t\tconst rd = new LightRenderData(this.device, camera, face, this);\n\n\t\tthis._renderData.push(rd);\n\n\t\treturn rd;\n\t}\n\n\tclone() {\n\t\tvar clone = new Light(this.device);\n\t\tclone.type = this._type;\n\t\tclone.setColor(this._color);\n\t\tclone.intensity = this._intensity;\n\t\tclone.castShadows = this.castShadows;\n\t\tclone._enabled = this._enabled;\n\t\tclone.attenuationStart = this.attenuationStart;\n\t\tclone.attenuationEnd = this.attenuationEnd;\n\t\tclone.falloffMode = this._falloffMode;\n\t\tclone.shadowType = this._shadowType;\n\t\tclone.vsmBlurSize = this._vsmBlurSize;\n\t\tclone.vsmBlurMode = this.vsmBlurMode;\n\t\tclone.vsmBias = this.vsmBias;\n\t\tclone.shadowUpdateMode = this.shadowUpdateMode;\n\t\tclone.mask = this.mask;\n\t\tclone.innerConeAngle = this._innerConeAngle;\n\t\tclone.outerConeAngle = this._outerConeAngle;\n\t\tclone.numCascades = this.numCascades;\n\t\tclone.cascadeDistribution = this.cascadeDistribution;\n\t\tclone.shape = this._shape;\n\t\tclone.shadowBias = this.shadowBias;\n\t\tclone.normalOffsetBias = this._normalOffsetBias;\n\t\tclone.shadowResolution = this._shadowResolution;\n\t\tclone.shadowDistance = this.shadowDistance;\n\t\treturn clone;\n\t}\n\n\tget numCascades() {\n\t\treturn this.cascades.length;\n\t}\n\n\tset numCascades(value) {\n\t\tif (!this.cascades || this.numCascades != value) {\n\t\t\tthis.cascades = directionalCascades[value - 1];\n\t\t\tthis._shadowMatrixPalette = new Float32Array(4 * 16);\n\t\t\tthis._shadowCascadeDistances = new Float32Array(4);\n\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis.updateKey();\n\t\t}\n\t}\n\n\tget shadowMap() {\n\t\treturn this._shadowMap;\n\t}\n\n\tset shadowMap(shadowMap) {\n\t\tif (this._shadowMap !== shadowMap) {\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis._shadowMap = shadowMap;\n\t\t}\n\t}\n\n\tgetColor() {\n\t\treturn this._color;\n\t}\n\n\tgetBoundingSphere(sphere) {\n\t\tif (this._type === LIGHTTYPE_SPOT) {\n\t\t\tvar range = this.attenuationEnd;\n\t\t\tvar angle = this._outerConeAngle;\n\t\t\tvar f = Math.cos(angle * math.DEG_TO_RAD);\n\t\t\tvar node = this._node;\n\t\t\tspotCenter.copy(node.up);\n\t\t\tspotCenter.mulScalar(-range * 0.5 * f);\n\t\t\tspotCenter.add(node.getPosition());\n\t\t\tsphere.center = spotCenter;\n\t\t\tspotEndPoint.copy(node.up);\n\t\t\tspotEndPoint.mulScalar(-range);\n\t\t\ttmpVec.copy(node.right);\n\t\t\ttmpVec.mulScalar(Math.sin(angle * math.DEG_TO_RAD) * range);\n\t\t\tspotEndPoint.add(tmpVec);\n\t\t\tsphere.radius = spotEndPoint.length() * 0.5;\n\t\t} else if (this._type === LIGHTTYPE_OMNI) {\n\t\t\tsphere.center = this._node.getPosition();\n\t\t\tsphere.radius = this.attenuationEnd;\n\t\t}\n\t}\n\n\tgetBoundingBox(box) {\n\t\tif (this._type === LIGHTTYPE_SPOT) {\n\t\t\tvar range = this.attenuationEnd;\n\t\t\tvar angle = this._outerConeAngle;\n\t\t\tvar node = this._node;\n\t\t\tvar scl = Math.abs(Math.sin(angle * math.DEG_TO_RAD) * range);\n\t\t\tbox.center.set(0, -range * 0.5, 0);\n\t\t\tbox.halfExtents.set(scl, range * 0.5, scl);\n\t\t\tbox.setFromTransformedAabb(box, node.getWorldTransform());\n\t\t} else if (this._type === LIGHTTYPE_OMNI) {\n\t\t\tbox.center.copy(this._node.getPosition());\n\t\t\tbox.halfExtents.set(this.attenuationEnd, this.attenuationEnd, this.attenuationEnd);\n\t\t}\n\t}\n\n\t_updateFinalColor() {\n\t\tvar color = this._color;\n\t\tvar r = color.r;\n\t\tvar g = color.g;\n\t\tvar b = color.b;\n\t\tvar i = this._intensity;\n\t\tvar finalColor = this._finalColor;\n\t\tvar linearFinalColor = this._linearFinalColor;\n\t\tfinalColor[0] = r * i;\n\t\tfinalColor[1] = g * i;\n\t\tfinalColor[2] = b * i;\n\n\t\tif (i >= 1) {\n\t\t\tlinearFinalColor[0] = Math.pow(r, 2.2) * i;\n\t\t\tlinearFinalColor[1] = Math.pow(g, 2.2) * i;\n\t\t\tlinearFinalColor[2] = Math.pow(b, 2.2) * i;\n\t\t} else {\n\t\t\tlinearFinalColor[0] = Math.pow(finalColor[0], 2.2);\n\t\t\tlinearFinalColor[1] = Math.pow(finalColor[1], 2.2);\n\t\t\tlinearFinalColor[2] = Math.pow(finalColor[2], 2.2);\n\t\t}\n\t}\n\n\tsetColor() {\n\t\tvar r, g, b;\n\n\t\tif (arguments.length === 1) {\n\t\t\tr = arguments[0].r;\n\t\t\tg = arguments[0].g;\n\t\t\tb = arguments[0].b;\n\t\t} else if (arguments.length === 3) {\n\t\t\tr = arguments[0];\n\t\t\tg = arguments[1];\n\t\t\tb = arguments[2];\n\t\t}\n\n\t\tthis._color.set(r, g, b);\n\n\t\tthis._updateFinalColor();\n\t}\n\n\tupdateShadow() {\n\t\tif (this.shadowUpdateMode !== SHADOWUPDATE_REALTIME) {\n\t\t\tthis.shadowUpdateMode = SHADOWUPDATE_THISFRAME;\n\t\t}\n\t}\n\n\tlayersDirty() {\n\t\tvar _this$_scene;\n\n\t\tif ((_this$_scene = this._scene) != null && _this$_scene.layers) {\n\t\t\tthis._scene.layers._dirtyLights = true;\n\t\t}\n\t}\n\n\tupdateKey() {\n\t\tvar key = this._type << 29 | (this._castShadows ? 1 : 0) << 28 | this._shadowType << 25 | this._falloffMode << 23 | (this._normalOffsetBias !== 0.0 ? 1 : 0) << 22 | (this._cookie ? 1 : 0) << 21 | (this._cookieFalloff ? 1 : 0) << 20 | chanId[this._cookieChannel.charAt(0)] << 18 | (this._cookieTransform ? 1 : 0) << 12 | this._shape << 10 | this.numCascades - 1 << 8;\n\n\t\tif (this._cookieChannel.length === 3) {\n\t\t\tkey |= chanId[this._cookieChannel.charAt(1)] << 16;\n\t\t\tkey |= chanId[this._cookieChannel.charAt(2)] << 14;\n\t\t}\n\n\t\tif (key !== this.key && this._scene !== null) {\n\t\t\tthis.layersDirty();\n\t\t}\n\n\t\tthis.key = key;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._type = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t\tvar stype = this._shadowType;\n\t\tthis._shadowType = null;\n\t\tthis.shadowType = stype;\n\t}\n\n\tget shape() {\n\t\treturn this._shape;\n\t}\n\n\tset shape(value) {\n\t\tif (this._shape === value) return;\n\t\tthis._shape = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t\tvar stype = this._shadowType;\n\t\tthis._shadowType = null;\n\t\tthis.shadowType = stype;\n\t}\n\n\tget shadowType() {\n\t\treturn this._shadowType;\n\t}\n\n\tset shadowType(value) {\n\t\tif (this._shadowType === value) return;\n\t\tvar device = this.device;\n\t\tif (this._type === LIGHTTYPE_OMNI) value = SHADOW_PCF3;\n\n\t\tif (value === SHADOW_PCF5 && !device.webgl2) {\n\t\t\tvalue = SHADOW_PCF3;\n\t\t}\n\n\t\tif (value === SHADOW_VSM32 && !device.textureFloatRenderable) value = SHADOW_VSM16;\n\t\tif (value === SHADOW_VSM16 && !device.textureHalfFloatRenderable) value = SHADOW_VSM8;\n\t\tthis._isVsm = value >= SHADOW_VSM8 && value <= SHADOW_VSM32;\n\t\tthis._isPcf = value === SHADOW_PCF5 || value === SHADOW_PCF3;\n\t\tthis._shadowType = value;\n\n\t\tthis._destroyShadowMap();\n\n\t\tthis.updateKey();\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tif (this._enabled !== value) {\n\t\t\tthis._enabled = value;\n\t\t\tthis.layersDirty();\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows && this.mask !== MASK_LIGHTMAP && this.mask !== 0;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows !== value) {\n\t\t\tthis._castShadows = value;\n\n\t\t\tthis._destroyShadowMap();\n\n\t\t\tthis.layersDirty();\n\t\t\tthis.updateKey();\n\t\t}\n\t}\n\n\tget shadowResolution() {\n\t\treturn this._shadowResolution;\n\t}\n\n\tset shadowResolution(value) {\n\t\tif (this._shadowResolution !== value) {\n\t\t\tif (this._type === LIGHTTYPE_OMNI) {\n\t\t\t\tvalue = Math.min(value, this.device.maxCubeMapSize);\n\t\t\t} else {\n\t\t\t\tvalue = Math.min(value, this.device.maxTextureSize);\n\t\t\t}\n\n\t\t\tthis._shadowResolution = value;\n\n\t\t\tthis._destroyShadowMap();\n\t\t}\n\t}\n\n\tget vsmBlurSize() {\n\t\treturn this._vsmBlurSize;\n\t}\n\n\tset vsmBlurSize(value) {\n\t\tif (this._vsmBlurSize === value) return;\n\t\tif (value % 2 === 0) value++;\n\t\tthis._vsmBlurSize = value;\n\t}\n\n\tget normalOffsetBias() {\n\t\treturn this._normalOffsetBias;\n\t}\n\n\tset normalOffsetBias(value) {\n\t\tif (this._normalOffsetBias === value) return;\n\n\t\tif (!this._normalOffsetBias && value || this._normalOffsetBias && !value) {\n\t\t\tthis.updateKey();\n\t\t}\n\n\t\tthis._normalOffsetBias = value;\n\t}\n\n\tget falloffMode() {\n\t\treturn this._falloffMode;\n\t}\n\n\tset falloffMode(value) {\n\t\tif (this._falloffMode === value) return;\n\t\tthis._falloffMode = value;\n\t\tthis.updateKey();\n\t}\n\n\tget innerConeAngle() {\n\t\treturn this._innerConeAngle;\n\t}\n\n\tset innerConeAngle(value) {\n\t\tif (this._innerConeAngle === value) return;\n\t\tthis._innerConeAngle = value;\n\t\tthis._innerConeAngleCos = Math.cos(value * Math.PI / 180);\n\t}\n\n\tget outerConeAngle() {\n\t\treturn this._outerConeAngle;\n\t}\n\n\tset outerConeAngle(value) {\n\t\tif (this._outerConeAngle === value) return;\n\t\tthis._outerConeAngle = value;\n\t\tthis._outerConeAngleCos = Math.cos(value * Math.PI / 180);\n\t}\n\n\tget intensity() {\n\t\treturn this._intensity;\n\t}\n\n\tset intensity(value) {\n\t\tif (this._intensity !== value) {\n\t\t\tthis._intensity = value;\n\n\t\t\tthis._updateFinalColor();\n\t\t}\n\t}\n\n\tget cookieMatrix() {\n\t\tif (!this._cookieMatrix) {\n\t\t\tthis._cookieMatrix = new Mat4();\n\t\t}\n\n\t\treturn this._cookieMatrix;\n\t}\n\n\tget cookie() {\n\t\treturn this._cookie;\n\t}\n\n\tset cookie(value) {\n\t\tif (this._cookie === value) return;\n\t\tthis._cookie = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieFalloff() {\n\t\treturn this._cookieFalloff;\n\t}\n\n\tset cookieFalloff(value) {\n\t\tif (this._cookieFalloff === value) return;\n\t\tthis._cookieFalloff = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieChannel() {\n\t\treturn this._cookieChannel;\n\t}\n\n\tset cookieChannel(value) {\n\t\tif (this._cookieChannel === value) return;\n\n\t\tif (value.length < 3) {\n\t\t\tvar chr = value.charAt(value.length - 1);\n\t\t\tvar addLen = 3 - value.length;\n\n\t\t\tfor (var i = 0; i < addLen; i++) value += chr;\n\t\t}\n\n\t\tthis._cookieChannel = value;\n\t\tthis.updateKey();\n\t}\n\n\tget cookieTransform() {\n\t\treturn this._cookieTransform;\n\t}\n\n\tset cookieTransform(value) {\n\t\tif (this._cookieTransform === value) return;\n\t\tthis._cookieTransform = value;\n\t\tthis._cookieTransformSet = !!value;\n\n\t\tif (value && !this._cookieOffset) {\n\t\t\tthis.cookieOffset = new Vec2();\n\t\t\tthis._cookieOffsetSet = false;\n\t\t}\n\n\t\tthis.updateKey();\n\t}\n\n\tget cookieOffset() {\n\t\treturn this._cookieOffset;\n\t}\n\n\tset cookieOffset(value) {\n\t\tif (this._cookieOffset === value) return;\n\t\tvar xformNew = !!(this._cookieTransformSet || value);\n\n\t\tif (xformNew && !value && this._cookieOffset) {\n\t\t\tthis._cookieOffset.set(0, 0);\n\t\t} else {\n\t\t\tthis._cookieOffset = value;\n\t\t}\n\n\t\tthis._cookieOffsetSet = !!value;\n\n\t\tif (value && !this._cookieTransform) {\n\t\t\tthis.cookieTransform = new Vec4(1, 1, 0, 0);\n\t\t\tthis._cookieTransformSet = false;\n\t\t}\n\n\t\tthis.updateKey();\n\t}\n\n}\n\nconst MAX_LIGHTMAP_SIZE = 2048;\nconst PASS_COLOR = 0;\nconst PASS_DIR = 1;\nconst tempVec$1 = new Vec3();\nconst tempSphere = new BoundingSphere();\n\nclass MeshNode {\n\tconstructor(node, meshInstances = null) {\n\t\tthis.node = node;\n\n\t\tif (node.render) {\n\t\t\tthis.component = node.render;\n\t\t\tmeshInstances = meshInstances ? meshInstances : node.render.meshInstances;\n\t\t} else {\n\t\t\tthis.component = node.model;\n\t\t\tmeshInstances = meshInstances ? meshInstances : node.model.model.meshInstances;\n\t\t}\n\n\t\tthis.castShadows = this.component.castShadows;\n\t\tthis.meshInstances = meshInstances;\n\t\tthis.bounds = null;\n\t\tthis.renderTargets = [];\n\t}\n\n}\n\nclass LightInfo {\n\tconstructor(light) {\n\t\tthis.light = light;\n\t\tthis.store();\n\t\tlight.numCascades = 1;\n\n\t\tif (light.type !== LIGHTTYPE_DIRECTIONAL) {\n\t\t\tlight._node.getWorldTransform();\n\n\t\t\tlight.getBoundingSphere(tempSphere);\n\t\t\tthis.lightBounds = new BoundingBox();\n\t\t\tthis.lightBounds.center.copy(tempSphere.center);\n\t\t\tthis.lightBounds.halfExtents.set(tempSphere.radius, tempSphere.radius, tempSphere.radius);\n\t\t}\n\t}\n\n\tstore() {\n\t\tthis.mask = this.light.mask;\n\t\tthis.shadowUpdateMode = this.light.shadowUpdateMode;\n\t\tthis.enabled = this.light.enabled;\n\t\tthis.numCascades = this.light.numCascades;\n\t}\n\n\trestore() {\n\t\tthis.light.mask = this.mask;\n\t\tthis.light.shadowUpdateMode = this.shadowUpdateMode;\n\t\tthis.light.enabled = this.enabled;\n\t\tthis.light.numCascades = this.numCascades;\n\t}\n\n}\n\nclass Lightmapper {\n\tconstructor(device, root, scene, renderer, assets) {\n\t\tthis.device = device;\n\t\tthis.root = root;\n\t\tthis.scene = scene;\n\t\tthis.renderer = renderer;\n\t\tthis.assets = assets;\n\t\tthis.shadowMapCache = renderer._shadowRenderer.shadowMapCache;\n\t\tthis._tempSet = new Set();\n\t\tthis._initCalled = false;\n\t\tthis.passMaterials = [];\n\t\tthis.fog = \"\";\n\t\tthis.ambientLight = new Color();\n\t\tthis.renderTargets = new Map();\n\t\tthis.stats = {\n\t\t\trenderPasses: 0,\n\t\t\tlightmapCount: 0,\n\t\t\ttotalRenderTime: 0,\n\t\t\tforwardTime: 0,\n\t\t\tfboTime: 0,\n\t\t\tshadowMapTime: 0,\n\t\t\tcompileTime: 0,\n\t\t\tshadersLinked: 0\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tMeshInstance.decRefLightmap(this.blackTex);\n\t\tthis.blackTex = null;\n\t\tMeshInstance.destroyLightmapCache();\n\t\tthis.device = null;\n\t\tthis.root = null;\n\t\tthis.scene = null;\n\t\tthis.renderer = null;\n\t\tthis.assets = null;\n\t}\n\n\tinitBake(device) {\n\t\tif (!this._initCalled) {\n\t\t\tthis._initCalled = true;\n\t\t\tthis.dilateShader = createShaderFromCode(device, shaderChunks.fullscreenQuadVS, shaderChunks.dilatePS, \"lmDilate\");\n\t\t\tthis.constantTexSource = device.scope.resolve(\"source\");\n\t\t\tthis.constantPixelOffset = device.scope.resolve(\"pixelOffset\");\n\t\t\tthis.constantBakeDir = device.scope.resolve(\"bakeDir\");\n\t\t\tthis.pixelOffset = new Float32Array(2);\n\t\t\tthis.materials = [];\n\t\t\tthis.blackTex = new Texture(this.device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\ttype: TEXTURETYPE_RGBM\n\t\t\t});\n\t\t\tthis.blackTex.name = 'lightmapBlack';\n\t\t\tMeshInstance.incRefLightmap(this.blackTex);\n\t\t\tconst camera = new Camera();\n\t\t\tcamera.clearColor.set(0, 0, 0, 0);\n\t\t\tcamera.clearColorBuffer = true;\n\t\t\tcamera.clearDepthBuffer = false;\n\t\t\tcamera.clearStencilBuffer = false;\n\t\t\tcamera.frustumCulling = false;\n\t\t\tcamera.projection = PROJECTION_ORTHOGRAPHIC;\n\t\t\tcamera.aspectRatio = 1;\n\t\t\tcamera.node = new GraphNode();\n\t\t\tthis.camera = camera;\n\t\t}\n\t}\n\n\tfinishBake(bakeNodes) {\n\t\tthis.materials = [];\n\n\t\tfunction destroyRT(rt) {\n\t\t\tMeshInstance.decRefLightmap(rt.colorBuffer);\n\t\t\trt.destroy();\n\t\t}\n\n\t\tthis.renderTargets.forEach(rt => {\n\t\t\tdestroyRT(rt);\n\t\t});\n\t\tthis.renderTargets.clear();\n\t\tbakeNodes.forEach(node => {\n\t\t\tnode.renderTargets.forEach(rt => {\n\t\t\t\tdestroyRT(rt);\n\t\t\t});\n\t\t\tnode.renderTargets.lenght = 0;\n\t\t});\n\t}\n\n\tcreateMaterials(device, scene, passCount) {\n\t\tconst xformUv1 = \"#define UV1LAYOUT\\n\" + shaderChunks.transformVS;\n\t\tconst bakeLmEnd = shaderChunks.bakeLmEndPS;\n\n\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\tif (!this.passMaterials[pass]) {\n\t\t\t\tconst lmMaterial = new StandardMaterial();\n\t\t\t\tlmMaterial.chunks.transformVS = xformUv1;\n\n\t\t\t\tif (pass === PASS_COLOR) {\n\t\t\t\t\tlmMaterial.chunks.endPS = bakeLmEnd;\n\t\t\t\t\tlmMaterial.ambient = new Color(0, 0, 0);\n\t\t\t\t\tlmMaterial.ambientTint = true;\n\t\t\t\t\tlmMaterial.lightMap = this.blackTex;\n\t\t\t\t} else {\n\t\t\t\t\tlmMaterial.chunks.basePS = shaderChunks.basePS + \"\\nuniform sampler2D texture_dirLightMap;\\nuniform float bakeDir;\\n\";\n\t\t\t\t\tlmMaterial.chunks.endPS = shaderChunks.bakeDirLmEndPS;\n\t\t\t\t}\n\n\t\t\t\tlmMaterial.chunks.outputAlphaPS = \"\\n\";\n\t\t\t\tlmMaterial.chunks.outputAlphaOpaquePS = \"\\n\";\n\t\t\t\tlmMaterial.chunks.outputAlphaPremulPS = \"\\n\";\n\t\t\t\tlmMaterial.cull = CULLFACE_NONE;\n\t\t\t\tlmMaterial.forceUv1 = true;\n\t\t\t\tlmMaterial.update();\n\t\t\t\tlmMaterial.updateShader(device, scene);\n\t\t\t\tlmMaterial.name = \"lmMaterial\" + pass;\n\t\t\t\tthis.passMaterials[pass] = lmMaterial;\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateTexture(size, type, name) {\n\t\tconst tex = new Texture(this.device, {\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tmipmaps: false,\n\t\t\ttype: type,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST\n\t\t});\n\t\ttex.name = name;\n\t\treturn tex;\n\t}\n\n\tcollectModels(node, bakeNodes, allNodes) {\n\t\tvar _node$model, _node$model2, _node$render;\n\n\t\tif (!node.enabled) return;\n\t\tlet meshInstances;\n\n\t\tif ((_node$model = node.model) != null && _node$model.model && (_node$model2 = node.model) != null && _node$model2.enabled) {\n\t\t\tif (allNodes) allNodes.push(new MeshNode(node));\n\n\t\t\tif (node.model.lightmapped) {\n\t\t\t\tif (bakeNodes) {\n\t\t\t\t\tmeshInstances = node.model.model.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((_node$render = node.render) != null && _node$render.enabled) {\n\t\t\tif (allNodes) allNodes.push(new MeshNode(node));\n\n\t\t\tif (node.render.lightmapped) {\n\t\t\t\tif (bakeNodes) {\n\t\t\t\t\tmeshInstances = node.render.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (meshInstances) {\n\t\t\tlet hasUv1 = true;\n\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (!meshInstances[i].mesh.vertexBuffer.format.hasUv1) {\n\t\t\t\t\thasUv1 = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasUv1) {\n\t\t\t\tconst notInstancedMeshInstances = [];\n\n\t\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\t\tconst mesh = meshInstances[i].mesh;\n\n\t\t\t\t\tif (this._tempSet.has(mesh)) {\n\t\t\t\t\t\tbakeNodes.push(new MeshNode(node, [meshInstances[i]]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnotInstancedMeshInstances.push(meshInstances[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._tempSet.add(mesh);\n\t\t\t\t}\n\n\t\t\t\tthis._tempSet.clear();\n\n\t\t\t\tif (notInstancedMeshInstances.length > 0) {\n\t\t\t\t\tbakeNodes.push(new MeshNode(node, notInstancedMeshInstances));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < node._children.length; i++) {\n\t\t\tthis.collectModels(node._children[i], bakeNodes, allNodes);\n\t\t}\n\t}\n\n\tprepareShadowCasters(nodes) {\n\t\tconst casters = [];\n\n\t\tfor (let n = 0; n < nodes.length; n++) {\n\t\t\tconst component = nodes[n].component;\n\t\t\tcomponent.castShadows = component.castShadowsLightmap;\n\n\t\t\tif (component.castShadowsLightmap) {\n\t\t\t\tconst meshes = nodes[n].meshInstances;\n\n\t\t\t\tfor (let i = 0; i < meshes.length; i++) {\n\t\t\t\t\tmeshes[i].visibleThisFrame = true;\n\t\t\t\t\tcasters.push(meshes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn casters;\n\t}\n\n\tupdateTransforms(nodes) {\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst meshInstances = nodes[i].meshInstances;\n\n\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\tmeshInstances[j].node.getWorldTransform();\n\t\t\t}\n\t\t}\n\t}\n\n\tcalculateLightmapSize(node) {\n\t\tlet data, parent;\n\t\tconst sizeMult = this.scene.lightmapSizeMultiplier || 16;\n\t\tconst scale = tempVec$1;\n\t\tlet srcArea, lightmapSizeMultiplier;\n\n\t\tif (node.model) {\n\t\t\tlightmapSizeMultiplier = node.model.lightmapSizeMultiplier;\n\n\t\t\tif (node.model.asset) {\n\t\t\t\tdata = this.assets.get(node.model.asset).data;\n\n\t\t\t\tif (data.area) {\n\t\t\t\t\tsrcArea = data.area;\n\t\t\t\t}\n\t\t\t} else if (node.model._area) {\n\t\t\t\tdata = node.model;\n\n\t\t\t\tif (data._area) {\n\t\t\t\t\tsrcArea = data._area;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (node.render) {\n\t\t\tlightmapSizeMultiplier = node.render.lightmapSizeMultiplier;\n\n\t\t\tif (node.render.type !== 'asset') {\n\t\t\t\tif (node.render._area) {\n\t\t\t\t\tdata = node.render;\n\n\t\t\t\t\tif (data._area) {\n\t\t\t\t\t\tsrcArea = data._area;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst area = {\n\t\t\tx: 1,\n\t\t\ty: 1,\n\t\t\tz: 1,\n\t\t\tuv: 1\n\t\t};\n\n\t\tif (srcArea) {\n\t\t\tarea.x = srcArea.x;\n\t\t\tarea.y = srcArea.y;\n\t\t\tarea.z = srcArea.z;\n\t\t\tarea.uv = srcArea.uv;\n\t\t}\n\n\t\tconst areaMult = lightmapSizeMultiplier || 1;\n\t\tarea.x *= areaMult;\n\t\tarea.y *= areaMult;\n\t\tarea.z *= areaMult;\n\t\tscale.copy(node.localScale);\n\t\tparent = node._parent;\n\n\t\twhile (parent) {\n\t\t\tscale.mul(parent.localScale);\n\t\t\tparent = parent._parent;\n\t\t}\n\n\t\tscale.x = Math.abs(scale.x);\n\t\tscale.y = Math.abs(scale.y);\n\t\tscale.z = Math.abs(scale.z);\n\t\tlet totalArea = area.x * scale.y * scale.z + area.y * scale.x * scale.z + area.z * scale.x * scale.y;\n\t\ttotalArea /= area.uv;\n\t\ttotalArea = Math.sqrt(totalArea);\n\t\treturn Math.min(math.nextPowerOfTwo(totalArea * sizeMult), this.scene.lightmapMaxResolution || MAX_LIGHTMAP_SIZE);\n\t}\n\n\tsetLightmaping(nodes, value, passCount, shaderDefs) {\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tconst meshInstances = node.meshInstances;\n\n\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\tconst meshInstance = meshInstances[j];\n\t\t\t\tmeshInstance.setLightmapped(value);\n\n\t\t\t\tif (value) {\n\t\t\t\t\tif (shaderDefs) {\n\t\t\t\t\t\tmeshInstance._shaderDefs |= shaderDefs;\n\t\t\t\t\t}\n\n\t\t\t\t\tmeshInstance.mask = MASK_BAKED;\n\n\t\t\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\t\t\tconst tex = node.renderTargets[pass].colorBuffer;\n\t\t\t\t\t\ttex.minFilter = FILTER_LINEAR;\n\t\t\t\t\t\ttex.magFilter = FILTER_LINEAR;\n\t\t\t\t\t\tmeshInstance.setRealtimeLightmap(MeshInstance.lightmapParamNames[pass], tex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbake(nodes, mode = BAKE_COLORDIR) {\n\t\tconst device = this.device;\n\t\tconst startTime = now();\n\t\tthis.stats.renderPasses = 0;\n\t\tthis.stats.shadowMapTime = 0;\n\t\tthis.stats.forwardTime = 0;\n\t\tconst startShaders = device._shaderStats.linked;\n\t\tconst startFboTime = device._renderTargetCreationTime;\n\t\tconst startCompileTime = device._shaderStats.compileTime;\n\t\tconst bakeNodes = [];\n\t\tconst allNodes = [];\n\n\t\tif (nodes) {\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tthis.collectModels(nodes[i], bakeNodes, null);\n\t\t\t}\n\n\t\t\tthis.collectModels(this.root, null, allNodes);\n\t\t} else {\n\t\t\tthis.collectModels(this.root, bakeNodes, allNodes);\n\t\t}\n\n\t\tif (bakeNodes.length > 0) {\n\t\t\tconst passCount = mode === BAKE_COLORDIR ? 2 : 1;\n\t\t\tthis.setLightmaping(bakeNodes, false, passCount);\n\t\t\tthis.initBake(device);\n\t\t\tthis.bakeInternal(passCount, bakeNodes, allNodes);\n\t\t\tconst shaderDefs = mode === BAKE_COLORDIR ? SHADERDEF_LM | SHADERDEF_DIRLM : SHADERDEF_LM;\n\t\t\tthis.setLightmaping(bakeNodes, true, passCount, shaderDefs);\n\t\t\tthis.finishBake(bakeNodes);\n\t\t}\n\n\t\tconst nowTime = now();\n\t\tthis.stats.totalRenderTime = nowTime - startTime;\n\t\tthis.stats.shadersLinked = device._shaderStats.linked - startShaders;\n\t\tthis.stats.compileTime = device._shaderStats.compileTime - startCompileTime;\n\t\tthis.stats.fboTime = device._renderTargetCreationTime - startFboTime;\n\t\tthis.stats.lightmapCount = bakeNodes.length;\n\t}\n\n\tallocateTextures(bakeNodes, passCount) {\n\t\tfor (let i = 0; i < bakeNodes.length; i++) {\n\t\t\tconst bakeNode = bakeNodes[i];\n\t\t\tconst size = this.calculateLightmapSize(bakeNode.node);\n\n\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\tconst tex = this.createTexture(size, TEXTURETYPE_DEFAULT, \"lightmapper_lightmap_\" + i);\n\t\t\t\tMeshInstance.incRefLightmap(tex);\n\t\t\t\tbakeNode.renderTargets[pass] = new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex,\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.renderTargets.has(size)) {\n\t\t\t\tconst tex = this.createTexture(size, TEXTURETYPE_DEFAULT, \"lightmapper_temp_lightmap_\" + size);\n\t\t\t\tMeshInstance.incRefLightmap(tex);\n\t\t\t\tthis.renderTargets.set(size, new RenderTarget({\n\t\t\t\t\tcolorBuffer: tex,\n\t\t\t\t\tdepth: false\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareLightsToBake(layerComposition, allLights, bakeLights) {\n\t\tconst sceneLights = layerComposition._lights;\n\n\t\tfor (let i = 0; i < sceneLights.length; i++) {\n\t\t\tconst light = sceneLights[i];\n\t\t\tconst lightInfo = new LightInfo(light);\n\t\t\tallLights.push(lightInfo);\n\n\t\t\tif (light.enabled && (light.mask & MASK_LIGHTMAP) !== 0) {\n\t\t\t\tlight.isStatic = false;\n\t\t\t\tlight.mask = 0xFFFFFFFF;\n\t\t\t\tlight.shadowUpdateMode = light.type === LIGHTTYPE_DIRECTIONAL ? SHADOWUPDATE_REALTIME : SHADOWUPDATE_THISFRAME;\n\t\t\t\tbakeLights.push(lightInfo);\n\t\t\t}\n\t\t}\n\n\t\tbakeLights.sort();\n\t}\n\n\trestoreLights(allLights) {\n\t\tfor (let i = 0; i < allLights.length; i++) {\n\t\t\tallLights[i].restore();\n\t\t}\n\t}\n\n\tsetupScene() {\n\t\tthis.revertStatic = false;\n\n\t\tif (this.scene._needsStaticPrepare) {\n\t\t\tthis.scene._needsStaticPrepare = false;\n\t\t\tthis.revertStatic = true;\n\t\t}\n\n\t\tthis.fog = this.scene.fog;\n\t\tthis.ambientLight.copy(this.scene.ambientLight);\n\t\tthis.scene.fog = FOG_NONE;\n\t\tthis.scene.ambientLight.set(0, 0, 0);\n\t}\n\n\trestoreScene() {\n\t\tthis.scene.fog = this.fog;\n\t\tthis.scene.ambientLight.copy(this.ambientLight);\n\n\t\tif (this.revertStatic) {\n\t\t\tthis.scene._needsStaticPrepare = true;\n\t\t}\n\t}\n\n\tcomputeNodeBounds(nodes) {\n\t\tconst bounds = new BoundingBox();\n\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tconst meshInstances = nodes[i].meshInstances;\n\n\t\t\tif (meshInstances.length > 0) {\n\t\t\t\tbounds.copy(meshInstances[0].aabb);\n\n\t\t\t\tfor (let m = 1; m < meshInstances.length; m++) {\n\t\t\t\t\tbounds.add(meshInstances[m].aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes[i].bounds = bounds.clone();\n\t\t}\n\t}\n\n\tcomputeBounds(meshInstances) {\n\t\tconst bounds = new BoundingBox();\n\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tbounds.copy(meshInstances[0].aabb);\n\n\t\t\tfor (let m = 1; m < meshInstances.length; m++) {\n\t\t\t\tbounds.add(meshInstances[m].aabb);\n\t\t\t}\n\t\t}\n\n\t\treturn bounds;\n\t}\n\n\tbackupMaterials(meshInstances) {\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tthis.materials[i] = meshInstances[i].material;\n\t\t}\n\t}\n\n\trestoreMaterials(meshInstances) {\n\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].material = this.materials[i];\n\t\t}\n\t}\n\n\tlightCameraPrepare(device, bakeLight) {\n\t\tconst light = bakeLight.light;\n\t\tlet shadowCam;\n\n\t\tif (light.type === LIGHTTYPE_SPOT) {\n\t\t\tconst lightRenderData = light.getRenderData(null, 0);\n\t\t\tshadowCam = lightRenderData.shadowCamera;\n\n\t\t\tshadowCam._node.setPosition(light._node.getPosition());\n\n\t\t\tshadowCam._node.setRotation(light._node.getRotation());\n\n\t\t\tshadowCam._node.rotateLocal(-90, 0, 0);\n\n\t\t\tshadowCam.projection = PROJECTION_PERSPECTIVE;\n\t\t\tshadowCam.nearClip = light.attenuationEnd / 1000;\n\t\t\tshadowCam.farClip = light.attenuationEnd;\n\t\t\tshadowCam.aspectRatio = 1;\n\t\t\tshadowCam.fov = light._outerConeAngle * 2;\n\t\t\tthis.renderer.updateCameraFrustum(shadowCam);\n\t\t}\n\n\t\treturn shadowCam;\n\t}\n\n\tlightCameraPrepareAndCull(bakeLight, bakeNode, shadowCam, casterBounds) {\n\t\tconst light = bakeLight.light;\n\t\tlet lightAffectsNode = true;\n\n\t\tif (light.type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\ttempVec$1.copy(casterBounds.center);\n\t\t\ttempVec$1.y += casterBounds.halfExtents.y;\n\t\t\tthis.camera.node.setPosition(tempVec$1);\n\t\t\tthis.camera.node.setEulerAngles(-90, 0, 0);\n\t\t\tthis.camera.nearClip = 0;\n\t\t\tthis.camera.farClip = casterBounds.halfExtents.y * 2;\n\t\t\tconst frustumSize = Math.max(casterBounds.halfExtents.x, casterBounds.halfExtents.z);\n\t\t\tthis.camera.orthoHeight = frustumSize;\n\t\t} else {\n\t\t\tif (!bakeLight.lightBounds.intersects(bakeNode.bounds)) {\n\t\t\t\tlightAffectsNode = false;\n\t\t\t}\n\t\t}\n\n\t\tif (light.type === LIGHTTYPE_SPOT) {\n\t\t\tlet nodeVisible = false;\n\t\t\tconst meshInstances = bakeNode.meshInstances;\n\n\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\tif (meshInstances[i]._isVisible(shadowCam)) {\n\t\t\t\t\tnodeVisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!nodeVisible) {\n\t\t\t\tlightAffectsNode = false;\n\t\t\t}\n\t\t}\n\n\t\treturn lightAffectsNode;\n\t}\n\n\tsetupLightArray(lightArray, light) {\n\t\tlightArray[LIGHTTYPE_DIRECTIONAL].length = 0;\n\t\tlightArray[LIGHTTYPE_OMNI].length = 0;\n\t\tlightArray[LIGHTTYPE_SPOT].length = 0;\n\t\tlightArray[light.type][0] = light;\n\t}\n\n\trenderShadowMap(shadowMapRendered, casters, lightArray, bakeLight) {\n\t\tconst light = bakeLight.light;\n\n\t\tif (!shadowMapRendered && light.castShadows) {\n\t\t\tlight.shadowMap = this.shadowMapCache.get(this.device, light);\n\n\t\t\tif (light.type === LIGHTTYPE_DIRECTIONAL) {\n\t\t\t\tthis.renderer._shadowRenderer.cullDirectional(light, casters, this.camera);\n\t\t\t} else {\n\t\t\t\tthis.renderer._shadowRenderer.cullLocal(light, casters);\n\t\t\t}\n\n\t\t\tthis.renderer.renderShadows(lightArray[light.type], this.camera);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdilateTextures(device, bakeNodes, passCount) {\n\t\tconst numDilates2x = 4;\n\t\tconst pixelOffset = this.pixelOffset;\n\t\tconst dilateShader = this.dilateShader;\n\t\tconst constantTexSource = this.constantTexSource;\n\t\tconst constantPixelOffset = this.constantPixelOffset;\n\n\t\tfor (let node = 0; node < bakeNodes.length; node++) {\n\t\t\tconst bakeNode = bakeNodes[node];\n\n\t\t\tfor (let pass = 0; pass < passCount; pass++) {\n\t\t\t\tconst nodeRT = bakeNode.renderTargets[pass];\n\t\t\t\tconst lightmap = nodeRT.colorBuffer;\n\t\t\t\tconst tempRT = this.renderTargets.get(lightmap.width);\n\t\t\t\tconst tempTex = tempRT.colorBuffer;\n\t\t\t\tpixelOffset[0] = 1 / lightmap.width;\n\t\t\t\tpixelOffset[1] = 1 / lightmap.height;\n\t\t\t\tconstantPixelOffset.setValue(pixelOffset);\n\n\t\t\t\tfor (let i = 0; i < numDilates2x; i++) {\n\t\t\t\t\tconstantTexSource.setValue(lightmap);\n\t\t\t\t\tdrawQuadWithShader(device, tempRT, dilateShader);\n\t\t\t\t\tconstantTexSource.setValue(tempTex);\n\t\t\t\t\tdrawQuadWithShader(device, nodeRT, dilateShader);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbakeInternal(passCount, bakeNodes, allNodes) {\n\t\tconst scene = this.scene;\n\t\tconst device = this.device;\n\t\tthis.createMaterials(device, scene, passCount);\n\t\tthis.setupScene();\n\n\t\tscene.layers._update();\n\n\t\tthis.allocateTextures(bakeNodes, passCount);\n\t\tconst allLights = [],\n\t\t\t\t\tbakeLights = [];\n\t\tthis.prepareLightsToBake(scene.layers, allLights, bakeLights);\n\t\tthis.updateTransforms(allNodes);\n\t\tconst casters = this.prepareShadowCasters(allNodes);\n\t\tthis.renderer.updateMorphing(casters);\n\t\tthis.renderer.updateCpuSkinMatrices(casters);\n\t\tthis.renderer.gpuUpdate(casters);\n\t\tthis.computeNodeBounds(bakeNodes);\n\t\tconst casterBounds = this.computeBounds(casters);\n\t\tlet i, j, rcv, m;\n\n\t\tfor (i = 0; i < bakeNodes.length; i++) {\n\t\t\tconst bakeNode = bakeNodes[i];\n\t\t\trcv = bakeNode.meshInstances;\n\n\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\tm = rcv[j];\n\t\t\t\tm.setLightmapped(false);\n\t\t\t\tm.mask = MASK_LIGHTMAP;\n\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[0], m.material.lightMap ? m.material.lightMap : this.blackTex);\n\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[1], this.blackTex);\n\t\t\t}\n\t\t}\n\n\t\tfor (j = 0; j < bakeLights.length; j++) {\n\t\t\tbakeLights[j].light.enabled = false;\n\t\t}\n\n\t\tconst lightArray = [[], [], []];\n\t\tlet pass, node;\n\t\tlet shadersUpdatedOn1stPass = false;\n\n\t\tfor (i = 0; i < bakeLights.length; i++) {\n\t\t\tvar _bakeLight$light$shad;\n\n\t\t\tconst bakeLight = bakeLights[i];\n\t\t\tbakeLight.light.enabled = true;\n\t\t\tlet shadowMapRendered = false;\n\t\t\tconst shadowCam = this.lightCameraPrepare(device, bakeLight);\n\n\t\t\tfor (node = 0; node < bakeNodes.length; node++) {\n\t\t\t\tconst bakeNode = bakeNodes[node];\n\t\t\t\trcv = bakeNode.meshInstances;\n\t\t\t\tconst lightAffectsNode = this.lightCameraPrepareAndCull(bakeLight, bakeNode, shadowCam, casterBounds);\n\n\t\t\t\tif (!lightAffectsNode) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.setupLightArray(lightArray, bakeLight.light);\n\t\t\t\tshadowMapRendered = this.renderShadowMap(shadowMapRendered, casters, lightArray, bakeLight);\n\t\t\t\tthis.backupMaterials(rcv);\n\n\t\t\t\tfor (pass = 0; pass < passCount; pass++) {\n\t\t\t\t\tconst nodeRT = bakeNode.renderTargets[pass];\n\t\t\t\t\tconst lightmapSize = bakeNode.renderTargets[pass].colorBuffer.width;\n\t\t\t\t\tconst tempRT = this.renderTargets.get(lightmapSize);\n\t\t\t\t\tconst tempTex = tempRT.colorBuffer;\n\n\t\t\t\t\tif (pass === 0) {\n\t\t\t\t\t\tshadersUpdatedOn1stPass = scene.updateShaders;\n\t\t\t\t\t} else if (shadersUpdatedOn1stPass) {\n\t\t\t\t\t\tscene.updateShaders = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\t\t\trcv[j].material = this.passMaterials[pass];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.renderer.updateShaders(rcv);\n\t\t\t\t\tthis.renderer.setCamera(this.camera, tempRT, true);\n\n\t\t\t\t\tif (pass === PASS_DIR) {\n\t\t\t\t\t\tthis.constantBakeDir.setValue(bakeLight.light.bakeDir ? 1 : 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.renderer._forwardTime = 0;\n\t\t\t\t\tthis.renderer._shadowMapTime = 0;\n\t\t\t\t\tthis.renderer.renderForward(this.camera, rcv, rcv.length, lightArray, SHADER_FORWARDHDR);\n\t\t\t\t\tbakeNode.renderTargets[pass] = tempRT;\n\t\t\t\t\tthis.renderTargets.set(lightmapSize, nodeRT);\n\n\t\t\t\t\tfor (j = 0; j < rcv.length; j++) {\n\t\t\t\t\t\tm = rcv[j];\n\t\t\t\t\t\tm.setRealtimeLightmap(MeshInstance.lightmapParamNames[pass], tempTex);\n\t\t\t\t\t\tm._shaderDefs |= SHADERDEF_LM;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.restoreMaterials(rcv);\n\t\t\t}\n\n\t\t\tbakeLight.light.enabled = false;\n\n\t\t\tif ((_bakeLight$light$shad = bakeLight.light.shadowMap) != null && _bakeLight$light$shad.cached) {\n\t\t\t\tthis.shadowMapCache.add(bakeLight.light, bakeLight.light.shadowMap);\n\t\t\t\tbakeLight.light.shadowMap = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.shadowMapCache.clear();\n\t\tthis.dilateTextures(device, bakeNodes, passCount);\n\n\t\tfor (node = 0; node < allNodes.length; node++) {\n\t\t\tallNodes[node].component.castShadows = allNodes[node].castShadows;\n\t\t}\n\n\t\tthis.restoreLights(allLights);\n\t\tthis.restoreScene();\n\t}\n\n}\n\nclass Morph extends RefCountedObject {\n\tconstructor(targets, graphicsDevice) {\n\t\tsuper();\n\t\tthis.device = graphicsDevice || getApplication().graphicsDevice;\n\t\tthis._targets = targets;\n\n\t\tif (this.device.supportsMorphTargetTexturesCore) {\n\t\t\tif (this.device.extTextureHalfFloat && this.device.textureHalfFloatRenderable) {\n\t\t\t\tthis._renderTextureFormat = Morph.FORMAT_HALF_FLOAT;\n\t\t\t} else if (this.device.extTextureFloat && this.device.textureFloatRenderable) {\n\t\t\t\tthis._renderTextureFormat = Morph.FORMAT_FLOAT;\n\t\t\t}\n\n\t\t\tif (this.device.extTextureHalfFloat && this.device.textureHalfFloatUpdatable) {\n\t\t\t\tthis._textureFormat = Morph.FORMAT_HALF_FLOAT;\n\t\t\t} else if (this.device.extTextureFloat) {\n\t\t\t\tthis._textureFormat = Morph.FORMAT_FLOAT;\n\t\t\t}\n\n\t\t\tif (this._renderTextureFormat !== undefined && this._textureFormat !== undefined) {\n\t\t\t\tthis._useTextureMorph = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._init();\n\n\t\tthis._updateMorphFlags();\n\n\t\tthis._calculateAabb();\n\t}\n\n\tget morphPositions() {\n\t\treturn this._morphPositions;\n\t}\n\n\tget morphNormals() {\n\t\treturn this._morphNormals;\n\t}\n\n\tget maxActiveTargets() {\n\t\tif (this._useTextureMorph) return this._targets.length;\n\t\treturn this._morphPositions && this._morphNormals ? 4 : 8;\n\t}\n\n\tget useTextureMorph() {\n\t\treturn this._useTextureMorph;\n\t}\n\n\t_init() {\n\t\tif (this._useTextureMorph) {\n\t\t\tthis._useTextureMorph = this._initTextureBased();\n\t\t}\n\n\t\tvar i;\n\n\t\tif (!this._useTextureMorph) {\n\t\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\t\tthis._targets[i]._initVertexBuffers(this.device);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\tthis._targets[i]._postInit();\n\t\t}\n\t}\n\n\t_initTextureBased() {\n\t\tvar target, i, v;\n\t\tvar deltaArrays = [],\n\t\t\t\tdeltaInfos = [];\n\n\t\tfor (i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tif (target.options.deltaPositions) {\n\t\t\t\tdeltaArrays.push(target.options.deltaPositions);\n\t\t\t\tdeltaInfos.push({\n\t\t\t\t\ttarget: target,\n\t\t\t\t\tname: 'texturePositions'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (target.options.deltaNormals) {\n\t\t\t\tdeltaArrays.push(target.options.deltaNormals);\n\t\t\t\tdeltaInfos.push({\n\t\t\t\t\ttarget: target,\n\t\t\t\t\tname: 'textureNormals'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvar ids = [],\n\t\t\t\tusedDataIndices = [];\n\t\tvar vertexUsed, data;\n\t\tvar freeIndex = 1;\n\t\tvar dataCount = deltaArrays[0].length;\n\n\t\tfor (v = 0; v < dataCount; v += 3) {\n\t\t\tvertexUsed = false;\n\n\t\t\tfor (i = 0; i < deltaArrays.length; i++) {\n\t\t\t\tdata = deltaArrays[i];\n\n\t\t\t\tif (data[v] !== 0 || data[v + 1] !== 0 || data[v + 2] !== 0) {\n\t\t\t\t\tvertexUsed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (vertexUsed) {\n\t\t\t\tids.push(freeIndex);\n\t\t\t\tusedDataIndices.push(v / 3);\n\t\t\t\tfreeIndex++;\n\t\t\t} else {\n\t\t\t\tids.push(0);\n\t\t\t}\n\t\t}\n\n\t\tvar maxTextureSize = Math.min(this.device.maxTextureSize, 4096);\n\t\tvar morphTextureWidth = Math.ceil(Math.sqrt(freeIndex));\n\t\tmorphTextureWidth = Math.min(morphTextureWidth, maxTextureSize);\n\t\tvar morphTextureHeight = Math.ceil(freeIndex / morphTextureWidth);\n\n\t\tif (morphTextureHeight > maxTextureSize) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.morphTextureWidth = morphTextureWidth;\n\t\tthis.morphTextureHeight = morphTextureHeight;\n\t\tvar halfFloat = false;\n\t\tvar numComponents = 3;\n\t\tvar float2Half = math.float2Half;\n\n\t\tif (this._textureFormat === Morph.FORMAT_HALF_FLOAT) {\n\t\t\thalfFloat = true;\n\t\t\tnumComponents = 4;\n\t\t}\n\n\t\tvar arraySize = this.morphTextureWidth * this.morphTextureHeight * numComponents;\n\t\tvar packedDeltas = halfFloat ? new Uint16Array(arraySize) : new Float32Array(arraySize);\n\n\t\tfor (i = 0; i < deltaArrays.length; i++) {\n\t\t\tdata = deltaArrays[i];\n\n\t\t\tfor (v = 0; v < usedDataIndices.length; v++) {\n\t\t\t\tvar index = usedDataIndices[v];\n\n\t\t\t\tif (halfFloat) {\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents] = float2Half(data[index * 3]);\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 1] = float2Half(data[index * 3 + 1]);\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 2] = float2Half(data[index * 3 + 2]);\n\t\t\t\t} else {\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents] = data[index * 3];\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 1] = data[index * 3 + 1];\n\t\t\t\t\tpackedDeltas[v * numComponents + numComponents + 2] = data[index * 3 + 2];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttarget = deltaInfos[i].target;\n\t\t\tvar format = this._textureFormat === Morph.FORMAT_FLOAT ? PIXELFORMAT_RGB32F : PIXELFORMAT_RGBA16F;\n\n\t\t\ttarget._setTexture(deltaInfos[i].name, this._createTexture(\"MorphTarget\", format, packedDeltas));\n\t\t}\n\n\t\tvar formatDesc = [{\n\t\t\tsemantic: SEMANTIC_ATTR15,\n\t\t\tcomponents: 1,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tthis.vertexBufferIds = new VertexBuffer(this.device, new VertexFormat(this.device, formatDesc), ids.length, BUFFER_STATIC, new Float32Array(ids));\n\t\treturn true;\n\t}\n\n\tdestroy() {\n\t\tif (this.vertexBufferIds) {\n\t\t\tthis.vertexBufferIds.destroy();\n\t\t\tthis.vertexBufferIds = null;\n\t\t}\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\tthis._targets[i].destroy();\n\t\t}\n\n\t\tthis._targets.length = 0;\n\t}\n\n\tget targets() {\n\t\treturn this._targets;\n\t}\n\n\t_updateMorphFlags() {\n\t\tthis._morphPositions = false;\n\t\tthis._morphNormals = false;\n\t\tvar target;\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tif (target.morphPositions) {\n\t\t\t\tthis._morphPositions = true;\n\t\t\t}\n\n\t\t\tif (target.morphNormals) {\n\t\t\t\tthis._morphNormals = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_calculateAabb() {\n\t\tthis.aabb = new BoundingBox(new Vec3(0, 0, 0), new Vec3(0, 0, 0));\n\t\tvar target;\n\n\t\tfor (var i = 0; i < this._targets.length; i++) {\n\t\t\ttarget = this._targets[i];\n\n\t\t\tthis.aabb._expand(target.aabb.getMin(), target.aabb.getMax());\n\t\t}\n\t}\n\n\t_createTexture(name, format, pixelData) {\n\t\tvar texture = new Texture(this.device, {\n\t\t\twidth: this.morphTextureWidth,\n\t\t\theight: this.morphTextureHeight,\n\t\t\tformat: format,\n\t\t\tcubemap: false,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = name;\n\n\t\tif (pixelData) {\n\t\t\tvar pixels = texture.lock();\n\t\t\tpixels.set(pixelData);\n\t\t\ttexture.unlock();\n\t\t}\n\n\t\treturn texture;\n\t}\n\n}\n\nMorph.FORMAT_FLOAT = 0;\nMorph.FORMAT_HALF_FLOAT = 1;\n\nvar textureMorphVertexShader = 'attribute vec2 vertex_position;\\n' + 'varying vec2 uv0;\\n' + 'void main(void) {\\n' + '\t\tgl_Position = vec4(vertex_position, 0.5, 1.0);\\n' + '\t\tuv0 = vertex_position.xy * 0.5 + 0.5;\\n' + '}\\n';\n\nclass MorphInstance {\n\tconstructor(morph) {\n\t\tthis.morph = morph;\n\t\tmorph.incRefCount();\n\t\tthis.device = morph.device;\n\t\tthis.meshInstance = null;\n\t\tthis._weights = [];\n\n\t\tfor (var v = 0; v < morph._targets.length; v++) {\n\t\t\tthis.setWeight(v, morph._targets[v].defaultWeight);\n\t\t}\n\n\t\tthis._activeTargets = [];\n\n\t\tif (morph.useTextureMorph) {\n\t\t\tthis.shaderCache = {};\n\t\t\tthis.maxSubmitCount = this.device.maxTextures;\n\t\t\tthis._shaderMorphWeights = new Float32Array(this.maxSubmitCount);\n\n\t\t\tvar createRT = function (name, textureVar) {\n\t\t\t\tvar format = morph._renderTextureFormat === Morph.FORMAT_FLOAT ? PIXELFORMAT_RGBA32F : PIXELFORMAT_RGBA16F;\n\t\t\t\tthis[textureVar] = morph._createTexture(name, format);\n\t\t\t\treturn new RenderTarget({\n\t\t\t\t\tcolorBuffer: this[textureVar],\n\t\t\t\t\tdepth: false\n\t\t\t\t});\n\t\t\t}.bind(this);\n\n\t\t\tif (morph.morphPositions) {\n\t\t\t\tthis.rtPositions = createRT(\"MorphRTPos\", \"texturePositions\");\n\t\t\t}\n\n\t\t\tif (morph.morphNormals) {\n\t\t\t\tthis.rtNormals = createRT(\"MorphRTNrm\", \"textureNormals\");\n\t\t\t}\n\n\t\t\tthis._textureParams = new Float32Array([morph.morphTextureWidth, morph.morphTextureHeight, 1 / morph.morphTextureWidth, 1 / morph.morphTextureHeight]);\n\n\t\t\tfor (var i = 0; i < this.maxSubmitCount; i++) {\n\t\t\t\tthis[\"morphBlendTex\" + i] = this.device.scope.resolve(\"morphBlendTex\" + i);\n\t\t\t}\n\n\t\t\tthis.morphFactor = this.device.scope.resolve(\"morphFactor[0]\");\n\t\t\tthis.zeroTextures = false;\n\t\t} else {\n\t\t\tthis.maxSubmitCount = 8;\n\t\t\tthis._shaderMorphWeights = new Float32Array(this.maxSubmitCount);\n\t\t\tthis._shaderMorphWeightsA = new Float32Array(this._shaderMorphWeights.buffer, 0, 4);\n\t\t\tthis._shaderMorphWeightsB = new Float32Array(this._shaderMorphWeights.buffer, 4 * 4, 4);\n\t\t\tthis._activeVertexBuffers = new Array(this.maxSubmitCount);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.meshInstance = null;\n\t\tthis.shader = null;\n\t\tconst morph = this.morph;\n\n\t\tif (morph) {\n\t\t\tthis.morph = null;\n\t\t\tmorph.decRefCount();\n\n\t\t\tif (morph.getRefCount() < 1) {\n\t\t\t\tmorph.destroy();\n\t\t\t}\n\t\t}\n\n\t\tif (this.rtPositions) {\n\t\t\tthis.rtPositions.destroy();\n\t\t\tthis.rtPositions = null;\n\t\t}\n\n\t\tif (this.texturePositions) {\n\t\t\tthis.texturePositions.destroy();\n\t\t\tthis.texturePositions = null;\n\t\t}\n\n\t\tif (this.rtNormals) {\n\t\t\tthis.rtNormals.destroy();\n\t\t\tthis.rtNormals = null;\n\t\t}\n\n\t\tif (this.textureNormals) {\n\t\t\tthis.textureNormals.destroy();\n\t\t\tthis.textureNormals = null;\n\t\t}\n\t}\n\n\tclone() {\n\t\tvar clone = new MorphInstance(this.morph);\n\t\treturn clone;\n\t}\n\n\tgetWeight(index) {\n\t\treturn this._weights[index];\n\t}\n\n\tsetWeight(index, weight) {\n\t\tthis._weights[index] = weight;\n\t\tthis._dirty = true;\n\t}\n\n\t_getFragmentShader(numTextures) {\n\t\tvar i,\n\t\t\t\tfragmentShader = '';\n\n\t\tif (numTextures > 0) {\n\t\t\tfragmentShader += 'varying vec2 uv0;\\n' + 'uniform highp float morphFactor[' + numTextures + '];\\n';\n\t\t}\n\n\t\tfor (i = 0; i < numTextures; i++) {\n\t\t\tfragmentShader += 'uniform highp sampler2D morphBlendTex' + i + ';\\n';\n\t\t}\n\n\t\tfragmentShader += 'void main (void) {\\n' + '\t\thighp vec4 color = vec4(0, 0, 0, 1);\\n';\n\n\t\tfor (i = 0; i < numTextures; i++) {\n\t\t\tfragmentShader += '\t\tcolor.xyz += morphFactor[' + i + '] * texture2D(morphBlendTex' + i + ', uv0).xyz;\\n';\n\t\t}\n\n\t\tfragmentShader += '\t\tgl_FragColor = color;\\n' + '}\\n';\n\t\treturn fragmentShader;\n\t}\n\n\t_getShader(count) {\n\t\tvar shader = this.shaderCache[count];\n\n\t\tif (!shader) {\n\t\t\tvar fs = this._getFragmentShader(count);\n\n\t\t\tshader = createShaderFromCode(this.device, textureMorphVertexShader, fs, \"textureMorph\" + count);\n\t\t\tthis.shaderCache[count] = shader;\n\t\t}\n\n\t\treturn shader;\n\t}\n\n\t_updateTextureRenderTarget(renderTarget, srcTextureName) {\n\t\tvar device = this.device;\n\n\t\tvar submitBatch = function (usedCount, blending) {\n\t\t\tthis.morphFactor.setValue(this._shaderMorphWeights);\n\t\t\tdevice.setBlending(blending);\n\n\t\t\tif (blending) {\n\t\t\t\tdevice.setBlendFunction(BLENDMODE_ONE, BLENDMODE_ONE);\n\t\t\t\tdevice.setBlendEquation(BLENDEQUATION_ADD);\n\t\t\t}\n\n\t\t\tvar shader = this._getShader(usedCount);\n\n\t\t\tdrawQuadWithShader(device, renderTarget, shader, undefined, undefined, blending);\n\t\t}.bind(this);\n\n\t\tvar usedCount = 0;\n\t\tvar blending = false;\n\t\tvar count = this._activeTargets.length;\n\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tvar activeTarget = this._activeTargets[i];\n\t\t\tvar tex = activeTarget.target[srcTextureName];\n\n\t\t\tif (tex) {\n\t\t\t\tthis[\"morphBlendTex\" + usedCount].setValue(tex);\n\t\t\t\tthis._shaderMorphWeights[usedCount] = activeTarget.weight;\n\t\t\t\tusedCount++;\n\n\t\t\t\tif (usedCount >= this.maxSubmitCount) {\n\t\t\t\t\tsubmitBatch(usedCount, blending);\n\t\t\t\t\tusedCount = 0;\n\t\t\t\t\tblending = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (usedCount > 0 || count === 0 && !this.zeroTextures) {\n\t\t\tsubmitBatch(usedCount, blending);\n\t\t}\n\t}\n\n\t_updateTextureMorph() {\n\t\tthis.device;\n\n\t\tif (this._activeTargets.length > 0 || !this.zeroTextures) {\n\t\t\tthis._updateTextureRenderTarget(this.rtPositions, 'texturePositions');\n\n\t\t\tthis._updateTextureRenderTarget(this.rtNormals, 'textureNormals');\n\n\t\t\tthis.zeroTextures = this._activeTargets.length === 0;\n\t\t}\n\t}\n\n\t_updateVertexMorph() {\n\t\tvar i,\n\t\t\t\tcount = this.maxSubmitCount;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tthis._shaderMorphWeights[i] = 0;\n\t\t\tthis._activeVertexBuffers[i] = null;\n\t\t}\n\n\t\tvar posIndex = 0;\n\t\tvar nrmIndex = this.morph.morphPositions ? 4 : 0;\n\t\tvar target;\n\n\t\tfor (i = 0; i < this._activeTargets.length; i++) {\n\t\t\ttarget = this._activeTargets[i].target;\n\n\t\t\tif (target._vertexBufferPositions) {\n\t\t\t\tthis._activeVertexBuffers[posIndex] = target._vertexBufferPositions;\n\t\t\t\tthis._shaderMorphWeights[posIndex] = this._activeTargets[i].weight;\n\t\t\t\tposIndex++;\n\t\t\t}\n\n\t\t\tif (target._vertexBufferNormals) {\n\t\t\t\tthis._activeVertexBuffers[nrmIndex] = target._vertexBufferNormals;\n\t\t\t\tthis._shaderMorphWeights[nrmIndex] = this._activeTargets[i].weight;\n\t\t\t\tnrmIndex++;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis._dirty = false;\n\t\tvar targets = this.morph._targets;\n\t\tvar activeCount = 0,\n\t\t\t\tactiveTarget;\n\t\tvar i,\n\t\t\t\tabsWeight,\n\t\t\t\tepsilon = 0.00001;\n\n\t\tfor (i = 0; i < targets.length; i++) {\n\t\t\tabsWeight = Math.abs(this.getWeight(i));\n\n\t\t\tif (absWeight > epsilon) {\n\t\t\t\tif (this._activeTargets.length <= activeCount) {\n\t\t\t\t\tthis._activeTargets[activeCount] = {};\n\t\t\t\t}\n\n\t\t\t\tactiveTarget = this._activeTargets[activeCount++];\n\t\t\t\tactiveTarget.absWeight = absWeight;\n\t\t\t\tactiveTarget.weight = this.getWeight(i);\n\t\t\t\tactiveTarget.target = targets[i];\n\t\t\t}\n\t\t}\n\n\t\tthis._activeTargets.length = activeCount;\n\t\tvar maxActiveTargets = this.morph.maxActiveTargets;\n\n\t\tif (this._activeTargets.length > maxActiveTargets) {\n\t\t\tthis._activeTargets.sort(function (l, r) {\n\t\t\t\treturn l.absWeight < r.absWeight ? 1 : r.absWeight < l.absWeight ? -1 : 0;\n\t\t\t});\n\n\t\t\tthis._activeTargets.length = maxActiveTargets;\n\t\t}\n\n\t\tif (this.morph.useTextureMorph) {\n\t\t\tthis._updateTextureMorph();\n\t\t} else {\n\t\t\tthis._updateVertexMorph();\n\t\t}\n\t}\n\n}\n\nclass Model {\n\tconstructor() {\n\t\tthis.graph = null;\n\t\tthis.meshInstances = [];\n\t\tthis.skinInstances = [];\n\t\tthis.morphInstances = [];\n\t\tthis.cameras = [];\n\t\tthis.lights = [];\n\t\tthis._shadersVersion = 0;\n\t\tthis._immutable = false;\n\t}\n\n\tgetGraph() {\n\t\treturn this.graph;\n\t}\n\n\tsetGraph(graph) {\n\t\tthis.graph = graph;\n\t}\n\n\tgetCameras() {\n\t\treturn this.cameras;\n\t}\n\n\tsetCameras(cameras) {\n\t\tthis.cameras = cameras;\n\t}\n\n\tgetLights() {\n\t\treturn this.lights;\n\t}\n\n\tsetLights(lights) {\n\t\tthis.lights = lights;\n\t}\n\n\tgetMaterials() {\n\t\tvar i;\n\t\tvar materials = [];\n\n\t\tfor (i = 0; i < this.meshInstances.length; i++) {\n\t\t\tvar meshInstance = this.meshInstances[i];\n\n\t\t\tif (materials.indexOf(meshInstance.material) === -1) {\n\t\t\t\tmaterials.push(meshInstance.material);\n\t\t\t}\n\t\t}\n\n\t\treturn materials;\n\t}\n\n\tclone() {\n\t\tvar i, j;\n\t\tvar srcNodes = [];\n\t\tvar cloneNodes = [];\n\n\t\tvar _duplicate = function _duplicate(node) {\n\t\t\tvar newNode = node.clone();\n\t\t\tsrcNodes.push(node);\n\t\t\tcloneNodes.push(newNode);\n\n\t\t\tfor (var idx = 0; idx < node._children.length; idx++) {\n\t\t\t\tnewNode.addChild(_duplicate(node._children[idx]));\n\t\t\t}\n\n\t\t\treturn newNode;\n\t\t};\n\n\t\tvar cloneGraph = _duplicate(this.graph);\n\n\t\tvar cloneMeshInstances = [];\n\t\tvar cloneSkinInstances = [];\n\t\tvar cloneMorphInstances = [];\n\n\t\tfor (i = 0; i < this.skinInstances.length; i++) {\n\t\t\tvar skin = this.skinInstances[i].skin;\n\t\t\tvar cloneSkinInstance = new SkinInstance(skin);\n\t\t\tvar bones = [];\n\n\t\t\tfor (j = 0; j < skin.boneNames.length; j++) {\n\t\t\t\tvar boneName = skin.boneNames[j];\n\t\t\t\tvar bone = cloneGraph.findByName(boneName);\n\t\t\t\tbones.push(bone);\n\t\t\t}\n\n\t\t\tcloneSkinInstance.bones = bones;\n\t\t\tcloneSkinInstances.push(cloneSkinInstance);\n\t\t}\n\n\t\tfor (i = 0; i < this.morphInstances.length; i++) {\n\t\t\tvar morph = this.morphInstances[i].morph;\n\t\t\tvar cloneMorphInstance = new MorphInstance(morph);\n\t\t\tcloneMorphInstances.push(cloneMorphInstance);\n\t\t}\n\n\t\tfor (i = 0; i < this.meshInstances.length; i++) {\n\t\t\tvar meshInstance = this.meshInstances[i];\n\t\t\tvar nodeIndex = srcNodes.indexOf(meshInstance.node);\n\t\t\tvar cloneMeshInstance = new MeshInstance(meshInstance.mesh, meshInstance.material, cloneNodes[nodeIndex]);\n\n\t\t\tif (meshInstance.skinInstance) {\n\t\t\t\tvar skinInstanceIndex = this.skinInstances.indexOf(meshInstance.skinInstance);\n\t\t\t\tcloneMeshInstance.skinInstance = cloneSkinInstances[skinInstanceIndex];\n\t\t\t}\n\n\t\t\tif (meshInstance.morphInstance) {\n\t\t\t\tvar morphInstanceIndex = this.morphInstances.indexOf(meshInstance.morphInstance);\n\t\t\t\tcloneMeshInstance.morphInstance = cloneMorphInstances[morphInstanceIndex];\n\t\t\t}\n\n\t\t\tcloneMeshInstances.push(cloneMeshInstance);\n\t\t}\n\n\t\tvar clone = new Model();\n\t\tclone.graph = cloneGraph;\n\t\tclone.meshInstances = cloneMeshInstances;\n\t\tclone.skinInstances = cloneSkinInstances;\n\t\tclone.morphInstances = cloneMorphInstances;\n\t\tclone.getGraph().syncHierarchy();\n\t\treturn clone;\n\t}\n\n\tdestroy() {\n\t\tvar meshInstances = this.meshInstances;\n\n\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\tmeshInstances[i].destroy();\n\t\t}\n\n\t\tthis.meshInstances.length = 0;\n\t}\n\n\tgenerateWireframe() {\n\t\tMeshInstance._prepareRenderStyleForArray(this.meshInstances, RENDERSTYLE_WIREFRAME);\n\t}\n\n}\n\nclass MorphTarget {\n\tconstructor(options) {\n\t\tif (arguments.length === 2) {\n\t\t\toptions = arguments[1];\n\t\t}\n\n\t\tthis.options = options;\n\t\tthis._name = options.name;\n\t\tthis._defaultWeight = options.defaultWeight || 0;\n\t\tthis.aabb = options.aabb;\n\n\t\tif (!this.aabb) {\n\t\t\tthis.aabb = new BoundingBox();\n\t\t\tif (options.deltaPositions) this.aabb.compute(options.deltaPositions);\n\t\t}\n\n\t\tthis.deltaPositions = options.deltaPositions;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget defaultWeight() {\n\t\treturn this._defaultWeight;\n\t}\n\n\tget morphPositions() {\n\t\treturn !!this._vertexBufferPositions || !!this.texturePositions;\n\t}\n\n\tget morphNormals() {\n\t\treturn !!this._vertexBufferNormals || !!this.textureNormals;\n\t}\n\n\t_postInit() {\n\t\tthis.options = null;\n\t}\n\n\t_initVertexBuffers(graphicsDevice) {\n\t\tvar options = this.options;\n\t\tthis._vertexBufferPositions = this._createVertexBuffer(graphicsDevice, options.deltaPositions, options.deltaPositionsType);\n\t\tthis._vertexBufferNormals = this._createVertexBuffer(graphicsDevice, options.deltaNormals, options.deltaNormalsType);\n\n\t\tif (this._vertexBufferPositions) {\n\t\t\tthis.deltaPositions = this._vertexBufferPositions.lock();\n\t\t}\n\t}\n\n\t_createVertexBuffer(device, data, dataType = TYPE_FLOAT32) {\n\t\tif (data) {\n\t\t\tvar formatDesc = [{\n\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\tcomponents: 3,\n\t\t\t\ttype: dataType\n\t\t\t}];\n\t\t\treturn new VertexBuffer(device, new VertexFormat(device, formatDesc), data.length / 3, BUFFER_STATIC, data);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_setTexture(name, texture) {\n\t\tthis[name] = texture;\n\t}\n\n\tdestroy() {\n\t\tif (this._vertexBufferPositions) {\n\t\t\tthis._vertexBufferPositions.destroy();\n\n\t\t\tthis._vertexBufferPositions = null;\n\t\t}\n\n\t\tif (this._vertexBufferNormals) {\n\t\t\tthis._vertexBufferNormals.destroy();\n\n\t\t\tthis._vertexBufferNormals = null;\n\t\t}\n\n\t\tif (this.texturePositions) {\n\t\t\tthis.texturePositions.destroy();\n\t\t\tthis.texturePositions = null;\n\t\t}\n\n\t\tif (this.textureNormals) {\n\t\t\tthis.textureNormals.destroy();\n\t\t\tthis.textureNormals = null;\n\t\t}\n\t}\n\n}\n\nvar nonUniformScale;\nvar uniformScale = 1;\nvar particleTexChannels$1 = 4;\nvar rotMat = new Mat4();\nvar rotMatInv = new Mat4();\nvar randomPosTformed = new Vec3();\nvar randomPos = new Vec3();\nvar rndFactor3Vec = new Vec3();\nvar particlePosPrev = new Vec3();\nvar velocityVec = new Vec3();\nvar localVelocityVec = new Vec3();\nvar velocityVec2 = new Vec3();\nvar localVelocityVec2 = new Vec3();\nvar radialVelocityVec = new Vec3();\nvar particlePos = new Vec3();\nvar particleFinalPos = new Vec3();\nvar moveDirVec = new Vec3();\nvar tmpVec3$1 = new Vec3();\n\nfunction frac(f) {\n\treturn f - Math.floor(f);\n}\n\nfunction saturate$1(x) {\n\treturn Math.max(Math.min(x, 1), 0);\n}\n\nfunction glMod(x, y) {\n\treturn x - y * Math.floor(x / y);\n}\n\nfunction encodeFloatRGBA(v) {\n\tvar encX = frac(v);\n\tvar encY = frac(255.0 * v);\n\tvar encZ = frac(65025.0 * v);\n\tvar encW = frac(160581375.0 * v);\n\tencX -= encY / 255.0;\n\tencY -= encZ / 255.0;\n\tencZ -= encW / 255.0;\n\tencW -= encW / 255.0;\n\treturn [encX, encY, encZ, encW];\n}\n\nfunction encodeFloatRG(v) {\n\tvar encX = frac(v);\n\tvar encY = frac(255.0 * v);\n\tencX -= encY / 255.0;\n\tencY -= encY / 255.0;\n\treturn [encX, encY];\n}\n\nclass ParticleCPUUpdater {\n\tconstructor(emitter) {\n\t\tthis._emitter = emitter;\n\t}\n\n\tcalcSpawnPosition(particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, i) {\n\t\tvar emitter = this._emitter;\n\t\tvar rX = Math.random();\n\t\tvar rY = Math.random();\n\t\tvar rZ = Math.random();\n\t\tvar rW = Math.random();\n\n\t\tif (emitter.useCpu) {\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rX;\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rY;\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * 2 * particleTexChannels$1] = rZ;\n\t\t}\n\n\t\trandomPos.x = rX - 0.5;\n\t\trandomPos.y = rY - 0.5;\n\t\trandomPos.z = rZ - 0.5;\n\n\t\tif (emitter.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tvar max = Math.max(Math.abs(randomPos.x), Math.max(Math.abs(randomPos.y), Math.abs(randomPos.z)));\n\t\t\tvar edgeX = max + (0.5 - max) * extentsInnerRatioUniform[0];\n\t\t\tvar edgeY = max + (0.5 - max) * extentsInnerRatioUniform[1];\n\t\t\tvar edgeZ = max + (0.5 - max) * extentsInnerRatioUniform[2];\n\t\t\trandomPos.x = edgeX * (max === Math.abs(randomPos.x) ? Math.sign(randomPos.x) : 2 * randomPos.x);\n\t\t\trandomPos.y = edgeY * (max === Math.abs(randomPos.y) ? Math.sign(randomPos.y) : 2 * randomPos.y);\n\t\t\trandomPos.z = edgeZ * (max === Math.abs(randomPos.z) ? Math.sign(randomPos.z) : 2 * randomPos.z);\n\t\t\tif (!emitter.localSpace) randomPosTformed.copy(emitterPos).add(spawnMatrix.transformPoint(randomPos));else randomPosTformed.copy(spawnMatrix.transformPoint(randomPos));\n\t\t} else {\n\t\t\trandomPos.normalize();\n\t\t\tvar spawnBoundsSphereInnerRatio = emitter.emitterRadius === 0 ? 0 : emitter.emitterRadiusInner / emitter.emitterRadius;\n\t\t\tvar r = rW * (1.0 - spawnBoundsSphereInnerRatio) + spawnBoundsSphereInnerRatio;\n\t\t\tif (!emitter.localSpace) randomPosTformed.copy(emitterPos).add(randomPos.mulScalar(r * emitter.emitterRadius));else randomPosTformed.copy(randomPos.mulScalar(r * emitter.emitterRadius));\n\t\t}\n\n\t\tvar particleRate, startSpawnTime;\n\t\tparticleRate = math.lerp(emitter.rate, emitter.rate2, rX);\n\t\tstartSpawnTime = -particleRate * i;\n\n\t\tif (emitter.pack8) {\n\t\t\tvar packX = (randomPosTformed.x - emitter.worldBounds.center.x) / emitter.worldBoundsSize.x + 0.5;\n\t\t\tvar packY = (randomPosTformed.y - emitter.worldBounds.center.y) / emitter.worldBoundsSize.y + 0.5;\n\t\t\tvar packZ = (randomPosTformed.z - emitter.worldBounds.center.z) / emitter.worldBoundsSize.z + 0.5;\n\t\t\tvar packA = math.lerp(emitter.startAngle * math.DEG_TO_RAD, emitter.startAngle2 * math.DEG_TO_RAD, rX);\n\t\t\tpackA = packA % (Math.PI * 2) / (Math.PI * 2);\n\t\t\tvar rg0 = encodeFloatRG(packX);\n\t\t\tparticleTex[i * particleTexChannels$1] = rg0[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1] = rg0[1];\n\t\t\tvar ba0 = encodeFloatRG(packY);\n\t\t\tparticleTex[i * particleTexChannels$1 + 2] = ba0[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3] = ba0[1];\n\t\t\tvar rg1 = encodeFloatRG(packZ);\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * particleTexChannels$1] = rg1[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * particleTexChannels$1] = rg1[1];\n\t\t\tvar ba1 = encodeFloatRG(packA);\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * particleTexChannels$1] = ba1[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = ba1[1];\n\t\t\tvar a2 = 1.0;\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1 * 2] = a2;\n\t\t\tvar maxNegLife = Math.max(emitter.lifetime, (emitter.numParticles - 1.0) * Math.max(emitter.rate, emitter.rate2));\n\t\t\tvar maxPosLife = emitter.lifetime + 1.0;\n\t\t\tstartSpawnTime = (startSpawnTime + maxNegLife) / (maxNegLife + maxPosLife);\n\t\t\tvar rgba3 = encodeFloatRGBA(startSpawnTime);\n\t\t\tparticleTex[i * particleTexChannels$1 + 0 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[0];\n\t\t\tparticleTex[i * particleTexChannels$1 + 1 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[1];\n\t\t\tparticleTex[i * particleTexChannels$1 + 2 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[2];\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1 * 3] = rgba3[3];\n\t\t} else {\n\t\t\tparticleTex[i * particleTexChannels$1] = randomPosTformed.x;\n\t\t\tparticleTex[i * particleTexChannels$1 + 1] = randomPosTformed.y;\n\t\t\tparticleTex[i * particleTexChannels$1 + 2] = randomPosTformed.z;\n\t\t\tparticleTex[i * particleTexChannels$1 + 3] = math.lerp(emitter.startAngle * math.DEG_TO_RAD, emitter.startAngle2 * math.DEG_TO_RAD, rX);\n\t\t\tparticleTex[i * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = startSpawnTime;\n\t\t}\n\t}\n\n\tupdate(data, vbToSort, particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, delta, isOnStop) {\n\t\tvar a, b, c, i, j;\n\t\tvar emitter = this._emitter;\n\n\t\tif (emitter.meshInstance.node) {\n\t\t\tvar fullMat = emitter.meshInstance.node.worldTransform;\n\n\t\t\tfor (j = 0; j < 12; j++) {\n\t\t\t\trotMat.data[j] = fullMat.data[j];\n\t\t\t}\n\n\t\t\trotMatInv.copy(rotMat);\n\t\t\trotMatInv.invert();\n\t\t\tnonUniformScale = emitter.meshInstance.node.localScale;\n\t\t\tuniformScale = Math.max(Math.max(nonUniformScale.x, nonUniformScale.y), nonUniformScale.z);\n\t\t}\n\n\t\temitterPos = emitter.meshInstance.node === null || emitter.localSpace ? Vec3.ZERO : emitter.meshInstance.node.getPosition();\n\t\tvar posCam = emitter.camera ? emitter.camera._node.getPosition() : Vec3.ZERO;\n\t\tvar vertSize = !emitter.useMesh ? 15 : 17;\n\t\tvar cf, cc;\n\t\tvar rotSpeed, rotSpeed2, scale2, alpha, alpha2, radialSpeed, radialSpeed2;\n\t\tvar precision1 = emitter.precision - 1;\n\n\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\tvar id = Math.floor(emitter.vbCPU[i * emitter.numParticleVerts * (emitter.useMesh ? 6 : 4) + 3]);\n\t\t\tvar rndFactor = particleTex[id * particleTexChannels$1 + 0 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\trndFactor3Vec.x = rndFactor;\n\t\t\trndFactor3Vec.y = particleTex[id * particleTexChannels$1 + 1 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\trndFactor3Vec.z = particleTex[id * particleTexChannels$1 + 2 + emitter.numParticlesPot * 2 * particleTexChannels$1];\n\t\t\tvar particleRate = emitter.rate + (emitter.rate2 - emitter.rate) * rndFactor;\n\t\t\tvar particleLifetime = emitter.lifetime;\n\t\t\tvar life = particleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] + delta;\n\t\t\tvar nlife = saturate$1(life / particleLifetime);\n\t\t\tvar scale = 0;\n\t\t\tvar alphaDiv = 0;\n\t\t\tvar angle = 0;\n\t\t\tvar respawn = life - delta <= 0.0 || life >= particleLifetime;\n\n\t\t\tif (respawn) {\n\t\t\t\tthis.calcSpawnPosition(particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, id);\n\t\t\t}\n\n\t\t\tvar particleEnabled = life > 0.0 && life < particleLifetime;\n\n\t\t\tif (particleEnabled) {\n\t\t\t\tc = nlife * precision1;\n\t\t\t\tcf = Math.floor(c);\n\t\t\t\tcc = Math.ceil(c);\n\t\t\t\tc %= 1;\n\t\t\t\ta = emitter.qRotSpeed[cf];\n\t\t\t\tb = emitter.qRotSpeed[cc];\n\t\t\t\trotSpeed = a + (b - a) * c;\n\t\t\t\ta = emitter.qRotSpeed2[cf];\n\t\t\t\tb = emitter.qRotSpeed2[cc];\n\t\t\t\trotSpeed2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qScale[cf];\n\t\t\t\tb = emitter.qScale[cc];\n\t\t\t\tscale = a + (b - a) * c;\n\t\t\t\ta = emitter.qScale2[cf];\n\t\t\t\tb = emitter.qScale2[cc];\n\t\t\t\tscale2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qAlpha[cf];\n\t\t\t\tb = emitter.qAlpha[cc];\n\t\t\t\talpha = a + (b - a) * c;\n\t\t\t\ta = emitter.qAlpha2[cf];\n\t\t\t\tb = emitter.qAlpha2[cc];\n\t\t\t\talpha2 = a + (b - a) * c;\n\t\t\t\ta = emitter.qRadialSpeed[cf];\n\t\t\t\tb = emitter.qRadialSpeed[cc];\n\t\t\t\tradialSpeed = a + (b - a) * c;\n\t\t\t\ta = emitter.qRadialSpeed2[cf];\n\t\t\t\tb = emitter.qRadialSpeed2[cc];\n\t\t\t\tradialSpeed2 = a + (b - a) * c;\n\t\t\t\tradialSpeed += (radialSpeed2 - radialSpeed) * (rndFactor * 100.0 % 1.0);\n\t\t\t\tparticlePosPrev.x = particleTex[id * particleTexChannels$1];\n\t\t\t\tparticlePosPrev.y = particleTex[id * particleTexChannels$1 + 1];\n\t\t\t\tparticlePosPrev.z = particleTex[id * particleTexChannels$1 + 2];\n\t\t\t\tif (!emitter.localSpace) radialVelocityVec.copy(particlePosPrev).sub(emitterPos);else radialVelocityVec.copy(particlePosPrev);\n\t\t\t\tradialVelocityVec.normalize().mulScalar(radialSpeed);\n\t\t\t\tcf *= 3;\n\t\t\t\tcc *= 3;\n\t\t\t\ta = emitter.qLocalVelocity[cf];\n\t\t\t\tb = emitter.qLocalVelocity[cc];\n\t\t\t\tlocalVelocityVec.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity[cf + 1];\n\t\t\t\tb = emitter.qLocalVelocity[cc + 1];\n\t\t\t\tlocalVelocityVec.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity[cf + 2];\n\t\t\t\tb = emitter.qLocalVelocity[cc + 2];\n\t\t\t\tlocalVelocityVec.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf];\n\t\t\t\tb = emitter.qLocalVelocity2[cc];\n\t\t\t\tlocalVelocityVec2.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf + 1];\n\t\t\t\tb = emitter.qLocalVelocity2[cc + 1];\n\t\t\t\tlocalVelocityVec2.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qLocalVelocity2[cf + 2];\n\t\t\t\tb = emitter.qLocalVelocity2[cc + 2];\n\t\t\t\tlocalVelocityVec2.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf];\n\t\t\t\tb = emitter.qVelocity[cc];\n\t\t\t\tvelocityVec.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf + 1];\n\t\t\t\tb = emitter.qVelocity[cc + 1];\n\t\t\t\tvelocityVec.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity[cf + 2];\n\t\t\t\tb = emitter.qVelocity[cc + 2];\n\t\t\t\tvelocityVec.z = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf];\n\t\t\t\tb = emitter.qVelocity2[cc];\n\t\t\t\tvelocityVec2.x = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf + 1];\n\t\t\t\tb = emitter.qVelocity2[cc + 1];\n\t\t\t\tvelocityVec2.y = a + (b - a) * c;\n\t\t\t\ta = emitter.qVelocity2[cf + 2];\n\t\t\t\tb = emitter.qVelocity2[cc + 2];\n\t\t\t\tvelocityVec2.z = a + (b - a) * c;\n\t\t\t\tlocalVelocityVec.x += (localVelocityVec2.x - localVelocityVec.x) * rndFactor3Vec.x;\n\t\t\t\tlocalVelocityVec.y += (localVelocityVec2.y - localVelocityVec.y) * rndFactor3Vec.y;\n\t\t\t\tlocalVelocityVec.z += (localVelocityVec2.z - localVelocityVec.z) * rndFactor3Vec.z;\n\n\t\t\t\tif (emitter.initialVelocity > 0) {\n\t\t\t\t\tif (emitter.emitterShape === EMITTERSHAPE_SPHERE) {\n\t\t\t\t\t\trandomPos.copy(rndFactor3Vec).mulScalar(2).sub(Vec3.ONE).normalize();\n\t\t\t\t\t\tlocalVelocityVec.add(randomPos.mulScalar(emitter.initialVelocity));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalVelocityVec.add(Vec3.FORWARD.mulScalar(emitter.initialVelocity));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvelocityVec.x += (velocityVec2.x - velocityVec.x) * rndFactor3Vec.x;\n\t\t\t\tvelocityVec.y += (velocityVec2.y - velocityVec.y) * rndFactor3Vec.y;\n\t\t\t\tvelocityVec.z += (velocityVec2.z - velocityVec.z) * rndFactor3Vec.z;\n\t\t\t\trotSpeed += (rotSpeed2 - rotSpeed) * rndFactor3Vec.y;\n\t\t\t\tscale = (scale + (scale2 - scale) * (rndFactor * 10000.0 % 1.0)) * uniformScale;\n\t\t\t\talphaDiv = (alpha2 - alpha) * (rndFactor * 1000.0 % 1.0);\n\n\t\t\t\tif (emitter.meshInstance.node) {\n\t\t\t\t\tif (!emitter.localSpace) {\n\t\t\t\t\t\trotMat.transformPoint(localVelocityVec, localVelocityVec);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalVelocityVec.x /= nonUniformScale.x;\n\t\t\t\t\t\tlocalVelocityVec.y /= nonUniformScale.y;\n\t\t\t\t\t\tlocalVelocityVec.z /= nonUniformScale.z;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!emitter.localSpace) {\n\t\t\t\t\tlocalVelocityVec.add(velocityVec.mul(nonUniformScale));\n\t\t\t\t\tlocalVelocityVec.add(radialVelocityVec.mul(nonUniformScale));\n\t\t\t\t} else {\n\t\t\t\t\trotMatInv.transformPoint(velocityVec, velocityVec);\n\t\t\t\t\tlocalVelocityVec.add(velocityVec).add(radialVelocityVec);\n\t\t\t\t}\n\n\t\t\t\tmoveDirVec.copy(localVelocityVec);\n\t\t\t\tparticlePos.copy(particlePosPrev).add(localVelocityVec.mulScalar(delta));\n\t\t\t\tparticleFinalPos.copy(particlePos);\n\t\t\t\tparticleTex[id * particleTexChannels$1] = particleFinalPos.x;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 1] = particleFinalPos.y;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 2] = particleFinalPos.z;\n\t\t\t\tparticleTex[id * particleTexChannels$1 + 3] += rotSpeed * delta;\n\n\t\t\t\tif (emitter.wrap && emitter.wrapBounds) {\n\t\t\t\t\tif (!emitter.localSpace) particleFinalPos.sub(emitterPos);\n\t\t\t\t\tparticleFinalPos.x = glMod(particleFinalPos.x, emitter.wrapBounds.x) - emitter.wrapBounds.x * 0.5;\n\t\t\t\t\tparticleFinalPos.y = glMod(particleFinalPos.y, emitter.wrapBounds.y) - emitter.wrapBounds.y * 0.5;\n\t\t\t\t\tparticleFinalPos.z = glMod(particleFinalPos.z, emitter.wrapBounds.z) - emitter.wrapBounds.z * 0.5;\n\t\t\t\t\tif (!emitter.localSpace) particleFinalPos.add(emitterPos);\n\t\t\t\t}\n\n\t\t\t\tif (emitter.sort > 0) {\n\t\t\t\t\tif (emitter.sort === 1) {\n\t\t\t\t\t\ttmpVec3$1.copy(particleFinalPos).sub(posCam);\n\t\t\t\t\t\temitter.particleDistance[id] = -(tmpVec3$1.x * tmpVec3$1.x + tmpVec3$1.y * tmpVec3$1.y + tmpVec3$1.z * tmpVec3$1.z);\n\t\t\t\t\t} else if (emitter.sort === 2) {\n\t\t\t\t\t\temitter.particleDistance[id] = life;\n\t\t\t\t\t} else if (emitter.sort === 3) {\n\t\t\t\t\t\temitter.particleDistance[id] = -life;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isOnStop) {\n\t\t\t\tif (life < 0) {\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (life >= particleLifetime) {\n\t\t\t\t\tlife -= Math.max(particleLifetime, (emitter.numParticles - 1) * particleRate);\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = emitter.loop ? 1 : -1;\n\t\t\t\t}\n\n\t\t\t\tif (life < 0 && emitter.loop) {\n\t\t\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (particleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * 2 * particleTexChannels$1] < 0) particleEnabled = false;\n\t\t\tparticleTex[id * particleTexChannels$1 + 3 + emitter.numParticlesPot * particleTexChannels$1] = life;\n\n\t\t\tfor (var v = 0; v < emitter.numParticleVerts; v++) {\n\t\t\t\tvar vbOffset = (i * emitter.numParticleVerts + v) * (emitter.useMesh ? 6 : 4);\n\t\t\t\tvar quadX = emitter.vbCPU[vbOffset];\n\t\t\t\tvar quadY = emitter.vbCPU[vbOffset + 1];\n\t\t\t\tvar quadZ = emitter.vbCPU[vbOffset + 2];\n\n\t\t\t\tif (!particleEnabled) {\n\t\t\t\t\tquadX = quadY = quadZ = 0;\n\t\t\t\t}\n\n\t\t\t\tvar w = i * emitter.numParticleVerts * vertSize + v * vertSize;\n\t\t\t\tdata[w] = particleFinalPos.x;\n\t\t\t\tdata[w + 1] = particleFinalPos.y;\n\t\t\t\tdata[w + 2] = particleFinalPos.z;\n\t\t\t\tdata[w + 3] = nlife;\n\t\t\t\tdata[w + 4] = emitter.alignToMotion ? angle : particleTex[id * particleTexChannels$1 + 3];\n\t\t\t\tdata[w + 5] = scale;\n\t\t\t\tdata[w + 6] = alphaDiv;\n\t\t\t\tdata[w + 7] = moveDirVec.x;\n\t\t\t\tdata[w + 8] = quadX;\n\t\t\t\tdata[w + 9] = quadY;\n\t\t\t\tdata[w + 10] = quadZ;\n\t\t\t\tdata[w + 11] = moveDirVec.y;\n\t\t\t\tdata[w + 12] = id;\n\t\t\t\tdata[w + 13] = moveDirVec.z;\n\t\t\t\tdata[w + 14] = emitter.vbCPU[vbOffset + 3];\n\n\t\t\t\tif (emitter.useMesh) {\n\t\t\t\t\tdata[w + 15] = emitter.vbCPU[vbOffset + 4];\n\t\t\t\t\tdata[w + 16] = emitter.vbCPU[vbOffset + 5];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (emitter.sort > PARTICLESORT_NONE && emitter.camera) {\n\t\t\tvar vbStride = emitter.useMesh ? 6 : 4;\n\t\t\tvar particleDistance = emitter.particleDistance;\n\n\t\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\t\tvbToSort[i][0] = i;\n\t\t\t\tvbToSort[i][1] = particleDistance[Math.floor(emitter.vbCPU[i * emitter.numParticleVerts * vbStride + 3])];\n\t\t\t}\n\n\t\t\temitter.vbOld.set(emitter.vbCPU);\n\t\t\tvbToSort.sort(function (p1, p2) {\n\t\t\t\treturn p1[1] - p2[1];\n\t\t\t});\n\n\t\t\tfor (i = 0; i < emitter.numParticles; i++) {\n\t\t\t\tvar src = vbToSort[i][0] * emitter.numParticleVerts * vbStride;\n\t\t\t\tvar dest = i * emitter.numParticleVerts * vbStride;\n\n\t\t\t\tfor (j = 0; j < emitter.numParticleVerts * vbStride; j++) {\n\t\t\t\t\temitter.vbCPU[dest + j] = emitter.vbOld[src + j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nvar spawnMatrix3 = new Mat3();\nvar emitterMatrix3 = new Mat3();\nvar emitterMatrix3Inv = new Mat3();\n\nclass ParticleGPUUpdater {\n\tconstructor(emitter, gd) {\n\t\tthis._emitter = emitter;\n\t\tthis.frameRandomUniform = new Float32Array(3);\n\t\tthis.emitterPosUniform = new Float32Array(3);\n\t\tthis.emitterScaleUniform = new Float32Array([1, 1, 1]);\n\t\tthis.worldBoundsMulUniform = new Float32Array(3);\n\t\tthis.worldBoundsAddUniform = new Float32Array(3);\n\t\tthis.inBoundsSizeUniform = new Float32Array(3);\n\t\tthis.inBoundsCenterUniform = new Float32Array(3);\n\t\tthis.constantParticleTexIN = gd.scope.resolve(\"particleTexIN\");\n\t\tthis.constantParticleTexOUT = gd.scope.resolve(\"particleTexOUT\");\n\t\tthis.constantEmitterPos = gd.scope.resolve(\"emitterPos\");\n\t\tthis.constantEmitterScale = gd.scope.resolve(\"emitterScale\");\n\t\tthis.constantSpawnBounds = gd.scope.resolve(\"spawnBounds\");\n\t\tthis.constantSpawnPosInnerRatio = gd.scope.resolve(\"spawnPosInnerRatio\");\n\t\tthis.constantSpawnBoundsSphere = gd.scope.resolve(\"spawnBoundsSphere\");\n\t\tthis.constantSpawnBoundsSphereInnerRatio = gd.scope.resolve(\"spawnBoundsSphereInnerRatio\");\n\t\tthis.constantInitialVelocity = gd.scope.resolve(\"initialVelocity\");\n\t\tthis.constantFrameRandom = gd.scope.resolve(\"frameRandom\");\n\t\tthis.constantDelta = gd.scope.resolve(\"delta\");\n\t\tthis.constantRate = gd.scope.resolve(\"rate\");\n\t\tthis.constantRateDiv = gd.scope.resolve(\"rateDiv\");\n\t\tthis.constantLifetime = gd.scope.resolve(\"lifetime\");\n\t\tthis.constantGraphSampleSize = gd.scope.resolve(\"graphSampleSize\");\n\t\tthis.constantGraphNumSamples = gd.scope.resolve(\"graphNumSamples\");\n\t\tthis.constantInternalTex0 = gd.scope.resolve(\"internalTex0\");\n\t\tthis.constantInternalTex1 = gd.scope.resolve(\"internalTex1\");\n\t\tthis.constantInternalTex2 = gd.scope.resolve(\"internalTex2\");\n\t\tthis.constantInternalTex3 = gd.scope.resolve(\"internalTex3\");\n\t\tthis.constantEmitterMatrix = gd.scope.resolve(\"emitterMatrix\");\n\t\tthis.constantEmitterMatrixInv = gd.scope.resolve(\"emitterMatrixInv\");\n\t\tthis.constantNumParticles = gd.scope.resolve(\"numParticles\");\n\t\tthis.constantNumParticlesPot = gd.scope.resolve(\"numParticlesPot\");\n\t\tthis.constantLocalVelocityDivMult = gd.scope.resolve(\"localVelocityDivMult\");\n\t\tthis.constantVelocityDivMult = gd.scope.resolve(\"velocityDivMult\");\n\t\tthis.constantRotSpeedDivMult = gd.scope.resolve(\"rotSpeedDivMult\");\n\t\tthis.constantSeed = gd.scope.resolve(\"seed\");\n\t\tthis.constantStartAngle = gd.scope.resolve(\"startAngle\");\n\t\tthis.constantStartAngle2 = gd.scope.resolve(\"startAngle2\");\n\t\tthis.constantOutBoundsMul = gd.scope.resolve(\"outBoundsMul\");\n\t\tthis.constantOutBoundsAdd = gd.scope.resolve(\"outBoundsAdd\");\n\t\tthis.constantInBoundsSize = gd.scope.resolve(\"inBoundsSize\");\n\t\tthis.constantInBoundsCenter = gd.scope.resolve(\"inBoundsCenter\");\n\t\tthis.constantMaxVel = gd.scope.resolve(\"maxVel\");\n\t\tthis.constantFaceTangent = gd.scope.resolve(\"faceTangent\");\n\t\tthis.constantFaceBinorm = gd.scope.resolve(\"faceBinorm\");\n\t}\n\n\t_setInputBounds() {\n\t\tthis.inBoundsSizeUniform[0] = this._emitter.prevWorldBoundsSize.x;\n\t\tthis.inBoundsSizeUniform[1] = this._emitter.prevWorldBoundsSize.y;\n\t\tthis.inBoundsSizeUniform[2] = this._emitter.prevWorldBoundsSize.z;\n\t\tthis.constantInBoundsSize.setValue(this.inBoundsSizeUniform);\n\t\tthis.inBoundsCenterUniform[0] = this._emitter.prevWorldBoundsCenter.x;\n\t\tthis.inBoundsCenterUniform[1] = this._emitter.prevWorldBoundsCenter.y;\n\t\tthis.inBoundsCenterUniform[2] = this._emitter.prevWorldBoundsCenter.z;\n\t\tthis.constantInBoundsCenter.setValue(this.inBoundsCenterUniform);\n\t}\n\n\trandomize() {\n\t\tthis.frameRandomUniform[0] = Math.random();\n\t\tthis.frameRandomUniform[1] = Math.random();\n\t\tthis.frameRandomUniform[2] = Math.random();\n\t}\n\n\tupdate(device, spawnMatrix, extentsInnerRatioUniform, delta, isOnStop) {\n\t\tvar emitter = this._emitter;\n\t\tdevice.setBlending(false);\n\t\tdevice.setColorWrite(true, true, true, true);\n\t\tdevice.setCullMode(CULLFACE_NONE);\n\t\tdevice.setDepthTest(false);\n\t\tdevice.setDepthWrite(false);\n\t\tthis.randomize();\n\t\tthis.constantGraphSampleSize.setValue(1.0 / emitter.precision);\n\t\tthis.constantGraphNumSamples.setValue(emitter.precision);\n\t\tthis.constantNumParticles.setValue(emitter.numParticles);\n\t\tthis.constantNumParticlesPot.setValue(emitter.numParticlesPot);\n\t\tthis.constantInternalTex0.setValue(emitter.internalTex0);\n\t\tthis.constantInternalTex1.setValue(emitter.internalTex1);\n\t\tthis.constantInternalTex2.setValue(emitter.internalTex2);\n\t\tthis.constantInternalTex3.setValue(emitter.internalTex3);\n\t\tvar node = emitter.meshInstance.node;\n\t\tvar emitterScale = node === null ? Vec3.ONE : node.localScale;\n\n\t\tif (emitter.pack8) {\n\t\t\tthis.worldBoundsMulUniform[0] = emitter.worldBoundsMul.x;\n\t\t\tthis.worldBoundsMulUniform[1] = emitter.worldBoundsMul.y;\n\t\t\tthis.worldBoundsMulUniform[2] = emitter.worldBoundsMul.z;\n\t\t\tthis.constantOutBoundsMul.setValue(this.worldBoundsMulUniform);\n\t\t\tthis.worldBoundsAddUniform[0] = emitter.worldBoundsAdd.x;\n\t\t\tthis.worldBoundsAddUniform[1] = emitter.worldBoundsAdd.y;\n\t\t\tthis.worldBoundsAddUniform[2] = emitter.worldBoundsAdd.z;\n\t\t\tthis.constantOutBoundsAdd.setValue(this.worldBoundsAddUniform);\n\n\t\t\tthis._setInputBounds();\n\n\t\t\tvar maxVel = emitter.maxVel * Math.max(Math.max(emitterScale.x, emitterScale.y), emitterScale.z);\n\t\t\tmaxVel = Math.max(maxVel, 1);\n\t\t\tthis.constantMaxVel.setValue(maxVel);\n\t\t}\n\n\t\tvar emitterPos = node === null || emitter.localSpace ? Vec3.ZERO : node.getPosition();\n\t\tvar emitterMatrix = node === null ? Mat4.IDENTITY : node.getWorldTransform();\n\n\t\tif (emitter.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tspawnMatrix3.setFromMat4(spawnMatrix);\n\t\t\tthis.constantSpawnBounds.setValue(spawnMatrix3.data);\n\t\t\tthis.constantSpawnPosInnerRatio.setValue(extentsInnerRatioUniform);\n\t\t} else {\n\t\t\tthis.constantSpawnBoundsSphere.setValue(emitter.emitterRadius);\n\t\t\tthis.constantSpawnBoundsSphereInnerRatio.setValue(emitter.emitterRadius === 0 ? 0 : emitter.emitterRadiusInner / emitter.emitterRadius);\n\t\t}\n\n\t\tthis.constantInitialVelocity.setValue(emitter.initialVelocity);\n\t\temitterMatrix3.setFromMat4(emitterMatrix);\n\t\temitterMatrix.invertTo3x3(emitterMatrix3Inv);\n\t\tthis.emitterPosUniform[0] = emitterPos.x;\n\t\tthis.emitterPosUniform[1] = emitterPos.y;\n\t\tthis.emitterPosUniform[2] = emitterPos.z;\n\t\tthis.constantEmitterPos.setValue(this.emitterPosUniform);\n\t\tthis.constantFrameRandom.setValue(this.frameRandomUniform);\n\t\tthis.constantDelta.setValue(delta);\n\t\tthis.constantRate.setValue(emitter.rate);\n\t\tthis.constantRateDiv.setValue(emitter.rate2 - emitter.rate);\n\t\tthis.constantStartAngle.setValue(emitter.startAngle * math.DEG_TO_RAD);\n\t\tthis.constantStartAngle2.setValue(emitter.startAngle2 * math.DEG_TO_RAD);\n\t\tthis.constantSeed.setValue(emitter.seed);\n\t\tthis.constantLifetime.setValue(emitter.lifetime);\n\t\tthis.emitterScaleUniform[0] = emitterScale.x;\n\t\tthis.emitterScaleUniform[1] = emitterScale.y;\n\t\tthis.emitterScaleUniform[2] = emitterScale.z;\n\t\tthis.constantEmitterScale.setValue(this.emitterScaleUniform);\n\t\tthis.constantEmitterMatrix.setValue(emitterMatrix3.data);\n\t\tthis.constantEmitterMatrixInv.setValue(emitterMatrix3Inv.data);\n\t\tthis.constantLocalVelocityDivMult.setValue(emitter.localVelocityUMax);\n\t\tthis.constantVelocityDivMult.setValue(emitter.velocityUMax);\n\t\tthis.constantRotSpeedDivMult.setValue(emitter.rotSpeedUMax[0]);\n\t\tvar texIN = emitter.swapTex ? emitter.particleTexOUT : emitter.particleTexIN;\n\t\ttexIN = emitter.beenReset ? emitter.particleTexStart : texIN;\n\t\tvar texOUT = emitter.swapTex ? emitter.particleTexIN : emitter.particleTexOUT;\n\t\tthis.constantParticleTexIN.setValue(texIN);\n\t\tdrawQuadWithShader(device, emitter.swapTex ? emitter.rtParticleTexIN : emitter.rtParticleTexOUT, !isOnStop ? emitter.loop ? emitter.shaderParticleUpdateRespawn : emitter.shaderParticleUpdateNoRespawn : emitter.shaderParticleUpdateOnStop);\n\t\temitter.material.setParameter(\"particleTexOUT\", texIN);\n\t\temitter.material.setParameter(\"particleTexIN\", texOUT);\n\t\temitter.beenReset = false;\n\t\temitter.swapTex = !emitter.swapTex;\n\t\tdevice.setDepthTest(true);\n\t\tdevice.setDepthWrite(true);\n\t\temitter.prevWorldBoundsSize.copy(emitter.worldBoundsSize);\n\t\temitter.prevWorldBoundsCenter.copy(emitter.worldBounds.center);\n\t\tif (emitter.pack8) this._setInputBounds();\n\t}\n\n}\n\nconst particleVerts = [[-1, -1], [1, -1], [1, 1], [-1, 1]];\n\nfunction _createTexture(device, width, height, pixelData, format = PIXELFORMAT_RGBA32F, mult8Bit, filter) {\n\tvar mipFilter = FILTER_NEAREST;\n\tif (filter && format === PIXELFORMAT_R8_G8_B8_A8) mipFilter = FILTER_LINEAR;\n\tvar texture = new Texture(device, {\n\t\twidth: width,\n\t\theight: height,\n\t\tformat: format,\n\t\tcubemap: false,\n\t\tmipmaps: false,\n\t\tminFilter: mipFilter,\n\t\tmagFilter: mipFilter,\n\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t});\n\ttexture.name = \"PSTexture\";\n\tvar pixels = texture.lock();\n\n\tif (format === PIXELFORMAT_R8_G8_B8_A8) {\n\t\tvar temp = new Uint8Array(pixelData.length);\n\n\t\tfor (var i = 0; i < pixelData.length; i++) {\n\t\t\ttemp[i] = pixelData[i] * mult8Bit * 255;\n\t\t}\n\n\t\tpixelData = temp;\n\t}\n\n\tpixels.set(pixelData);\n\ttexture.unlock();\n\treturn texture;\n}\n\nfunction saturate(x) {\n\treturn Math.max(Math.min(x, 1), 0);\n}\n\nvar default0Curve = new Curve([0, 0, 1, 0]);\nvar default1Curve = new Curve([0, 1, 1, 1]);\nvar default0Curve3 = new CurveSet([0, 0, 1, 0], [0, 0, 1, 0], [0, 0, 1, 0]);\nvar default1Curve3 = new CurveSet([0, 1, 1, 1], [0, 1, 1, 1], [0, 1, 1, 1]);\nvar particleTexHeight = 2;\nvar particleTexChannels = 4;\nvar extentsInnerRatioUniform = new Float32Array(3);\nvar spawnMatrix = new Mat4();\nvar tmpVec3 = new Vec3();\nvar bMin = new Vec3();\nvar bMax = new Vec3();\nvar setPropertyTarget;\nvar setPropertyOptions;\n\nfunction setProperty(pName, defaultVal) {\n\tif (setPropertyOptions[pName] !== undefined && setPropertyOptions[pName] !== null) {\n\t\tsetPropertyTarget[pName] = setPropertyOptions[pName];\n\t} else {\n\t\tsetPropertyTarget[pName] = defaultVal;\n\t}\n}\n\nfunction pack3NFloats(a, b, c) {\n\tvar packed = a * 255 << 16 | b * 255 << 8 | c * 255;\n\treturn packed / (1 << 24);\n}\n\nfunction packTextureXYZ_NXYZ(qXYZ, qXYZ2) {\n\tvar num = qXYZ.length / 3;\n\tvar colors = new Array(num * 4);\n\n\tfor (var i = 0; i < num; i++) {\n\t\tcolors[i * 4] = qXYZ[i * 3];\n\t\tcolors[i * 4 + 1] = qXYZ[i * 3 + 1];\n\t\tcolors[i * 4 + 2] = qXYZ[i * 3 + 2];\n\t\tcolors[i * 4 + 3] = pack3NFloats(qXYZ2[i * 3], qXYZ2[i * 3 + 1], qXYZ2[i * 3 + 2]);\n\t}\n\n\treturn colors;\n}\n\nfunction packTextureRGBA(qRGB, qA) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qRGB[i * 3];\n\t\tcolors[i * 4 + 1] = qRGB[i * 3 + 1];\n\t\tcolors[i * 4 + 2] = qRGB[i * 3 + 2];\n\t\tcolors[i * 4 + 3] = qA[i];\n\t}\n\n\treturn colors;\n}\n\nfunction packTexture5Floats(qA, qB, qC, qD, qE) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qA[i];\n\t\tcolors[i * 4 + 1] = qB[i];\n\t\tcolors[i * 4 + 2] = 0;\n\t\tcolors[i * 4 + 3] = pack3NFloats(qC[i], qD[i], qE[i]);\n\t}\n\n\treturn colors;\n}\n\nfunction packTexture2Floats(qA, qB) {\n\tvar colors = new Array(qA.length * 4);\n\n\tfor (var i = 0; i < qA.length; i++) {\n\t\tcolors[i * 4] = qA[i];\n\t\tcolors[i * 4 + 1] = qB[i];\n\t\tcolors[i * 4 + 2] = 0;\n\t\tcolors[i * 4 + 3] = 0;\n\t}\n\n\treturn colors;\n}\n\nfunction calcEndTime(emitter) {\n\tvar interval = Math.max(emitter.rate, emitter.rate2) * emitter.numParticles + emitter.lifetime;\n\treturn Date.now() + interval * 1000;\n}\n\nfunction subGraph(A, B) {\n\tvar r = new Float32Array(A.length);\n\n\tfor (var i = 0; i < A.length; i++) {\n\t\tr[i] = A[i] - B[i];\n\t}\n\n\treturn r;\n}\n\nfunction maxUnsignedGraphValue(A, outUMax) {\n\tvar i, j;\n\tvar chans = outUMax.length;\n\tvar values = A.length / chans;\n\n\tfor (i = 0; i < values; i++) {\n\t\tfor (j = 0; j < chans; j++) {\n\t\t\tvar a = Math.abs(A[i * chans + j]);\n\t\t\toutUMax[j] = Math.max(outUMax[j], a);\n\t\t}\n\t}\n}\n\nfunction normalizeGraph(A, uMax) {\n\tvar chans = uMax.length;\n\tvar i, j;\n\tvar values = A.length / chans;\n\n\tfor (i = 0; i < values; i++) {\n\t\tfor (j = 0; j < chans; j++) {\n\t\t\tA[i * chans + j] /= uMax[j] === 0 ? 1 : uMax[j];\n\t\t\tA[i * chans + j] *= 0.5;\n\t\t\tA[i * chans + j] += 0.5;\n\t\t}\n\t}\n}\n\nfunction divGraphFrom2Curves(curve1, curve2, outUMax) {\n\tvar sub = subGraph(curve2, curve1);\n\tmaxUnsignedGraphValue(sub, outUMax);\n\tnormalizeGraph(sub, outUMax);\n\treturn sub;\n}\n\nclass ParticleEmitter {\n\tconstructor(graphicsDevice, options) {\n\t\tthis.graphicsDevice = graphicsDevice;\n\t\tvar gd = graphicsDevice;\n\t\tvar precision = 32;\n\t\tthis.precision = precision;\n\t\tthis._addTimeTime = 0;\n\n\t\tif (!ParticleEmitter.DEFAULT_PARAM_TEXTURE) {\n\t\t\tvar resolution = 16;\n\t\t\tvar centerPoint = resolution * 0.5 + 0.5;\n\t\t\tvar dtex = new Float32Array(resolution * resolution * 4);\n\t\t\tvar x, y, xgrad, ygrad, p, c;\n\n\t\t\tfor (y = 0; y < resolution; y++) {\n\t\t\t\tfor (x = 0; x < resolution; x++) {\n\t\t\t\t\txgrad = x + 1 - centerPoint;\n\t\t\t\t\tygrad = y + 1 - centerPoint;\n\t\t\t\t\tc = saturate(1 - saturate(Math.sqrt(xgrad * xgrad + ygrad * ygrad) / resolution) - 0.5);\n\t\t\t\t\tp = y * resolution + x;\n\t\t\t\t\tdtex[p * 4] = 1;\n\t\t\t\t\tdtex[p * 4 + 1] = 1;\n\t\t\t\t\tdtex[p * 4 + 2] = 1;\n\t\t\t\t\tdtex[p * 4 + 3] = c;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE = _createTexture(gd, resolution, resolution, dtex, PIXELFORMAT_R8_G8_B8_A8, 1.0, true);\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE.minFilter = FILTER_LINEAR;\n\t\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE.magFilter = FILTER_LINEAR;\n\t\t}\n\n\t\tsetPropertyTarget = this;\n\t\tsetPropertyOptions = options;\n\t\tsetProperty(\"numParticles\", 1);\n\n\t\tif (this.numParticles > graphicsDevice.maxTextureSize) {\n\t\t\tconsole.warn(\"WARNING: can't create more than \" + graphicsDevice.maxTextureSize + \" particles on this device.\");\n\t\t\tthis.numParticles = graphicsDevice.maxTextureSize;\n\t\t}\n\n\t\tsetProperty(\"rate\", 1);\n\t\tsetProperty(\"rate2\", this.rate);\n\t\tsetProperty(\"lifetime\", 50);\n\t\tsetProperty(\"emitterExtents\", new Vec3(0, 0, 0));\n\t\tsetProperty(\"emitterExtentsInner\", new Vec3(0, 0, 0));\n\t\tsetProperty(\"emitterRadius\", 0);\n\t\tsetProperty(\"emitterRadiusInner\", 0);\n\t\tsetProperty(\"emitterShape\", EMITTERSHAPE_BOX);\n\t\tsetProperty(\"initialVelocity\", 1);\n\t\tsetProperty(\"wrap\", false);\n\t\tsetProperty(\"localSpace\", false);\n\t\tsetProperty(\"screenSpace\", false);\n\t\tsetProperty(\"wrapBounds\", null);\n\t\tsetProperty(\"colorMap\", ParticleEmitter.DEFAULT_PARAM_TEXTURE);\n\t\tsetProperty(\"normalMap\", null);\n\t\tsetProperty(\"loop\", true);\n\t\tsetProperty(\"preWarm\", false);\n\t\tsetProperty(\"sort\", PARTICLESORT_NONE);\n\t\tsetProperty(\"mode\", PARTICLEMODE_GPU);\n\t\tsetProperty(\"scene\", null);\n\t\tsetProperty(\"lighting\", false);\n\t\tsetProperty(\"halfLambert\", false);\n\t\tsetProperty(\"intensity\", 1.0);\n\t\tsetProperty(\"stretch\", 0.0);\n\t\tsetProperty(\"alignToMotion\", false);\n\t\tsetProperty(\"depthSoftening\", 0);\n\t\tsetProperty(\"mesh\", null);\n\t\tsetProperty(\"particleNormal\", new Vec3(0, 1, 0));\n\t\tsetProperty(\"orientation\", PARTICLEORIENTATION_SCREEN);\n\t\tsetProperty(\"depthWrite\", false);\n\t\tsetProperty(\"noFog\", false);\n\t\tsetProperty(\"blendType\", BLEND_NORMAL);\n\t\tsetProperty(\"node\", null);\n\t\tsetProperty(\"startAngle\", 0);\n\t\tsetProperty(\"startAngle2\", this.startAngle);\n\t\tsetProperty(\"animTilesX\", 1);\n\t\tsetProperty(\"animTilesY\", 1);\n\t\tsetProperty(\"animStartFrame\", 0);\n\t\tsetProperty(\"animNumFrames\", 1);\n\t\tsetProperty(\"animNumAnimations\", 1);\n\t\tsetProperty(\"animIndex\", 0);\n\t\tsetProperty(\"randomizeAnimIndex\", false);\n\t\tsetProperty(\"animSpeed\", 1);\n\t\tsetProperty(\"animLoop\", true);\n\t\tthis._gpuUpdater = new ParticleGPUUpdater(this, gd);\n\t\tthis._cpuUpdater = new ParticleCPUUpdater(this);\n\t\tthis.constantLightCube = gd.scope.resolve(\"lightCube[0]\");\n\t\tthis.emitterPosUniform = new Float32Array(3);\n\t\tthis.wrapBoundsUniform = new Float32Array(3);\n\t\tthis.emitterScaleUniform = new Float32Array([1, 1, 1]);\n\t\tsetProperty(\"colorGraph\", default1Curve3);\n\t\tsetProperty(\"colorGraph2\", this.colorGraph);\n\t\tsetProperty(\"scaleGraph\", default1Curve);\n\t\tsetProperty(\"scaleGraph2\", this.scaleGraph);\n\t\tsetProperty(\"alphaGraph\", default1Curve);\n\t\tsetProperty(\"alphaGraph2\", this.alphaGraph);\n\t\tsetProperty(\"localVelocityGraph\", default0Curve3);\n\t\tsetProperty(\"localVelocityGraph2\", this.localVelocityGraph);\n\t\tsetProperty(\"velocityGraph\", default0Curve3);\n\t\tsetProperty(\"velocityGraph2\", this.velocityGraph);\n\t\tsetProperty(\"rotationSpeedGraph\", default0Curve);\n\t\tsetProperty(\"rotationSpeedGraph2\", this.rotationSpeedGraph);\n\t\tsetProperty(\"radialSpeedGraph\", default0Curve);\n\t\tsetProperty(\"radialSpeedGraph2\", this.radialSpeedGraph);\n\t\tthis.lightCube = new Float32Array(6 * 3);\n\t\tthis.lightCubeDir = new Array(6);\n\t\tthis.lightCubeDir[0] = new Vec3(-1, 0, 0);\n\t\tthis.lightCubeDir[1] = new Vec3(1, 0, 0);\n\t\tthis.lightCubeDir[2] = new Vec3(0, -1, 0);\n\t\tthis.lightCubeDir[3] = new Vec3(0, 1, 0);\n\t\tthis.lightCubeDir[4] = new Vec3(0, 0, -1);\n\t\tthis.lightCubeDir[5] = new Vec3(0, 0, 1);\n\t\tthis.animTilesParams = new Float32Array(2);\n\t\tthis.animParams = new Float32Array(4);\n\t\tthis.animIndexParams = new Float32Array(2);\n\t\tthis.internalTex0 = null;\n\t\tthis.internalTex1 = null;\n\t\tthis.internalTex2 = null;\n\t\tthis.colorParam = null;\n\t\tthis.vbToSort = null;\n\t\tthis.vbOld = null;\n\t\tthis.particleDistance = null;\n\t\tthis.camera = null;\n\t\tthis.swapTex = false;\n\t\tthis.useMesh = true;\n\t\tthis.useCpu = false;\n\t\tthis.pack8 = true;\n\t\tthis.localBounds = new BoundingBox();\n\t\tthis.worldBoundsNoTrail = new BoundingBox();\n\t\tthis.worldBoundsTrail = [new BoundingBox(), new BoundingBox()];\n\t\tthis.worldBounds = new BoundingBox();\n\t\tthis.worldBoundsSize = new Vec3();\n\t\tthis.prevWorldBoundsSize = new Vec3();\n\t\tthis.prevWorldBoundsCenter = new Vec3();\n\t\tthis.prevEmitterExtents = this.emitterExtents;\n\t\tthis.prevEmitterRadius = this.emitterRadius;\n\t\tthis.worldBoundsMul = new Vec3();\n\t\tthis.worldBoundsAdd = new Vec3();\n\t\tthis.timeToSwitchBounds = 0;\n\t\tthis.shaderParticleUpdateRespawn = null;\n\t\tthis.shaderParticleUpdateNoRespawn = null;\n\t\tthis.shaderParticleUpdateOnStop = null;\n\t\tthis.numParticleVerts = 0;\n\t\tthis.numParticleIndices = 0;\n\t\tthis.material = null;\n\t\tthis.meshInstance = null;\n\t\tthis.drawOrder = 0;\n\t\tthis.seed = Math.random();\n\t\tthis.fixedTimeStep = 1.0 / 60;\n\t\tthis.maxSubSteps = 10;\n\t\tthis.simTime = 0;\n\t\tthis.simTimeTotal = 0;\n\t\tthis.beenReset = false;\n\t\tthis._layer = null;\n\t\tthis.rebuild();\n\t}\n\n\tonChangeCamera() {\n\t\tthis.regenShader();\n\t\tthis.resetMaterial();\n\t}\n\n\tcalculateBoundsMad() {\n\t\tthis.worldBoundsMul.x = 1.0 / this.worldBoundsSize.x;\n\t\tthis.worldBoundsMul.y = 1.0 / this.worldBoundsSize.y;\n\t\tthis.worldBoundsMul.z = 1.0 / this.worldBoundsSize.z;\n\t\tthis.worldBoundsAdd.copy(this.worldBounds.center).mul(this.worldBoundsMul).mulScalar(-1);\n\t\tthis.worldBoundsAdd.x += 0.5;\n\t\tthis.worldBoundsAdd.y += 0.5;\n\t\tthis.worldBoundsAdd.z += 0.5;\n\t}\n\n\tcalculateWorldBounds() {\n\t\tif (!this.node) return;\n\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\n\t\tif (!this.useCpu) {\n\t\t\tvar recalculateLocalBounds = false;\n\n\t\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\t\trecalculateLocalBounds = !this.emitterExtents.equals(this.prevEmitterExtents);\n\t\t\t} else {\n\t\t\t\trecalculateLocalBounds = !(this.emitterRadius === this.prevEmitterRadius);\n\t\t\t}\n\n\t\t\tif (recalculateLocalBounds) {\n\t\t\t\tthis.calculateLocalBounds();\n\t\t\t}\n\t\t}\n\n\t\tvar nodeWT = this.node.getWorldTransform();\n\n\t\tif (this.localSpace) {\n\t\t\tthis.worldBoundsNoTrail.copy(this.localBounds);\n\t\t} else {\n\t\t\tthis.worldBoundsNoTrail.setFromTransformedAabb(this.localBounds, nodeWT);\n\t\t}\n\n\t\tthis.worldBoundsTrail[0].add(this.worldBoundsNoTrail);\n\t\tthis.worldBoundsTrail[1].add(this.worldBoundsNoTrail);\n\t\tvar now = this.simTimeTotal;\n\n\t\tif (now >= this.timeToSwitchBounds) {\n\t\t\tthis.worldBoundsTrail[0].copy(this.worldBoundsTrail[1]);\n\t\t\tthis.worldBoundsTrail[1].copy(this.worldBoundsNoTrail);\n\t\t\tthis.timeToSwitchBounds = now + this.lifetime;\n\t\t}\n\n\t\tthis.worldBounds.copy(this.worldBoundsTrail[0]);\n\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\n\t\tif (this.localSpace) {\n\t\t\tthis.meshInstance.aabb.setFromTransformedAabb(this.worldBounds, nodeWT);\n\t\t\tthis.meshInstance.mesh.aabb.setFromTransformedAabb(this.worldBounds, nodeWT);\n\t\t} else {\n\t\t\tthis.meshInstance.aabb.copy(this.worldBounds);\n\t\t\tthis.meshInstance.mesh.aabb.copy(this.worldBounds);\n\t\t}\n\n\t\tthis.meshInstance._aabbVer = 1 - this.meshInstance._aabbVer;\n\t\tif (this.pack8) this.calculateBoundsMad();\n\t}\n\n\tresetWorldBounds() {\n\t\tif (!this.node) return;\n\t\tthis.worldBoundsNoTrail.setFromTransformedAabb(this.localBounds, this.localSpace ? Mat4.IDENTITY : this.node.getWorldTransform());\n\t\tthis.worldBoundsTrail[0].copy(this.worldBoundsNoTrail);\n\t\tthis.worldBoundsTrail[1].copy(this.worldBoundsNoTrail);\n\t\tthis.worldBounds.copy(this.worldBoundsTrail[0]);\n\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\t\tthis.simTimeTotal = 0;\n\t\tthis.timeToSwitchBounds = 0;\n\t}\n\n\tcalculateLocalBounds() {\n\t\tvar minx = Number.MAX_VALUE;\n\t\tvar miny = Number.MAX_VALUE;\n\t\tvar minz = Number.MAX_VALUE;\n\t\tvar maxx = -Number.MAX_VALUE;\n\t\tvar maxy = -Number.MAX_VALUE;\n\t\tvar maxz = -Number.MAX_VALUE;\n\t\tvar maxR = 0;\n\t\tvar maxScale = 0;\n\t\tvar stepWeight = this.lifetime / this.precision;\n\t\tvar wVels = [this.qVelocity, this.qVelocity2];\n\t\tvar lVels = [this.qLocalVelocity, this.qLocalVelocity2];\n\t\tvar accumX = [0, 0];\n\t\tvar accumY = [0, 0];\n\t\tvar accumZ = [0, 0];\n\t\tvar accumR = [0, 0];\n\t\tvar accumW = [0, 0];\n\t\tvar i, j;\n\t\tvar index;\n\t\tvar x, y, z;\n\n\t\tfor (i = 0; i < this.precision + 1; i++) {\n\t\t\tindex = Math.min(i, this.precision - 1);\n\n\t\t\tfor (j = 0; j < 2; j++) {\n\t\t\t\tx = lVels[j][index * 3 + 0] * stepWeight + accumX[j];\n\t\t\t\ty = lVels[j][index * 3 + 1] * stepWeight + accumY[j];\n\t\t\t\tz = lVels[j][index * 3 + 2] * stepWeight + accumZ[j];\n\t\t\t\tminx = Math.min(x, minx);\n\t\t\t\tminy = Math.min(y, miny);\n\t\t\t\tminz = Math.min(z, minz);\n\t\t\t\tmaxx = Math.max(x, maxx);\n\t\t\t\tmaxy = Math.max(y, maxy);\n\t\t\t\tmaxz = Math.max(z, maxz);\n\t\t\t\taccumX[j] = x;\n\t\t\t\taccumY[j] = y;\n\t\t\t\taccumZ[j] = z;\n\t\t\t}\n\n\t\t\tfor (j = 0; j < 2; j++) {\n\t\t\t\taccumW[j] += stepWeight * Math.sqrt(wVels[j][index * 3 + 0] * wVels[j][index * 3 + 0] + wVels[j][index * 3 + 1] * wVels[j][index * 3 + 1] + wVels[j][index * 3 + 2] * wVels[j][index * 3 + 2]);\n\t\t\t}\n\n\t\t\taccumR[0] += this.qRadialSpeed[index] * stepWeight;\n\t\t\taccumR[1] += this.qRadialSpeed2[index] * stepWeight;\n\t\t\tmaxR = Math.max(maxR, Math.max(Math.abs(accumR[0]), Math.abs(accumR[1])));\n\t\t\tmaxScale = Math.max(maxScale, this.qScale[index]);\n\t\t}\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tx = this.emitterExtents.x * 0.5;\n\t\t\ty = this.emitterExtents.y * 0.5;\n\t\t\tz = this.emitterExtents.z * 0.5;\n\t\t} else {\n\t\t\tx = this.emitterRadius;\n\t\t\ty = this.emitterRadius;\n\t\t\tz = this.emitterRadius;\n\t\t}\n\n\t\tvar w = Math.max(accumW[0], accumW[1]);\n\t\tbMin.x = minx - maxScale - x - maxR - w;\n\t\tbMin.y = miny - maxScale - y - maxR - w;\n\t\tbMin.z = minz - maxScale - z - maxR - w;\n\t\tbMax.x = maxx + maxScale + x + maxR + w;\n\t\tbMax.y = maxy + maxScale + y + maxR + w;\n\t\tbMax.z = maxz + maxScale + z + maxR + w;\n\t\tthis.localBounds.setMinMax(bMin, bMax);\n\t}\n\n\trebuild() {\n\t\tvar i;\n\t\tvar gd = this.graphicsDevice;\n\t\tif (this.colorMap === null) this.colorMap = ParticleEmitter.DEFAULT_PARAM_TEXTURE;\n\t\tthis.spawnBounds = this.emitterShape === EMITTERSHAPE_BOX ? this.emitterExtents : this.emitterRadius;\n\t\tthis.useCpu = this.useCpu || this.sort > PARTICLESORT_NONE || gd.maxVertexTextures <= 1 || gd.fragmentUniformsCount < 64 || gd.forceCpuParticles || !gd.extTextureFloat;\n\n\t\tthis._destroyResources();\n\n\t\tthis.pack8 = (this.pack8 || !gd.textureFloatRenderable) && !this.useCpu;\n\t\tparticleTexHeight = this.useCpu || this.pack8 ? 4 : 2;\n\t\tthis.useMesh = false;\n\n\t\tif (this.mesh) {\n\t\t\tvar totalVertCount = this.numParticles * this.mesh.vertexBuffer.numVertices;\n\n\t\t\tif (totalVertCount > 65535) {\n\t\t\t\tconsole.warn(\"WARNING: particle system can't render mesh particles because numParticles * numVertices is more than 65k. Reverting to quad particles.\");\n\t\t\t} else {\n\t\t\t\tthis.useMesh = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.numParticlesPot = math.nextPowerOfTwo(this.numParticles);\n\t\tthis.rebuildGraphs();\n\t\tthis.calculateLocalBounds();\n\t\tthis.resetWorldBounds();\n\n\t\tif (this.node) {\n\t\t\tthis.worldBounds.setFromTransformedAabb(this.localBounds, this.localSpace ? Mat4.IDENTITY : this.node.getWorldTransform());\n\t\t\tthis.worldBoundsTrail[0].copy(this.worldBounds);\n\t\t\tthis.worldBoundsTrail[1].copy(this.worldBounds);\n\t\t\tthis.worldBoundsSize.copy(this.worldBounds.halfExtents).mulScalar(2);\n\t\t\tthis.prevWorldBoundsSize.copy(this.worldBoundsSize);\n\t\t\tthis.prevWorldBoundsCenter.copy(this.worldBounds.center);\n\t\t\tif (this.pack8) this.calculateBoundsMad();\n\t\t}\n\n\t\tthis.vbToSort = new Array(this.numParticles);\n\n\t\tfor (var iSort = 0; iSort < this.numParticles; iSort++) this.vbToSort[iSort] = [0, 0];\n\n\t\tthis.particleDistance = new Float32Array(this.numParticles);\n\n\t\tthis._gpuUpdater.randomize();\n\n\t\tthis.particleTex = new Float32Array(this.numParticlesPot * particleTexHeight * particleTexChannels);\n\t\tvar emitterPos = this.node === null || this.localSpace ? Vec3.ZERO : this.node.getPosition();\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\tif (this.node === null || this.localSpace) {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, Quat.IDENTITY, this.spawnBounds);\n\t\t\t} else {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, this.node.getRotation(), tmpVec3.copy(this.spawnBounds).mul(this.node.localScale));\n\t\t\t}\n\n\t\t\textentsInnerRatioUniform[0] = this.emitterExtents.x !== 0 ? this.emitterExtentsInner.x / this.emitterExtents.x : 0;\n\t\t\textentsInnerRatioUniform[1] = this.emitterExtents.y !== 0 ? this.emitterExtentsInner.y / this.emitterExtents.y : 0;\n\t\t\textentsInnerRatioUniform[2] = this.emitterExtents.z !== 0 ? this.emitterExtentsInner.z / this.emitterExtents.z : 0;\n\t\t}\n\n\t\tfor (i = 0; i < this.numParticles; i++) {\n\t\t\tthis._cpuUpdater.calcSpawnPosition(this.particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, i);\n\n\t\t\tif (this.useCpu) this.particleTex[i * particleTexChannels + 3 + this.numParticlesPot * 2 * particleTexChannels] = 1;\n\t\t}\n\n\t\tthis.particleTexStart = new Float32Array(this.numParticlesPot * particleTexHeight * particleTexChannels);\n\n\t\tfor (i = 0; i < this.particleTexStart.length; i++) this.particleTexStart[i] = this.particleTex[i];\n\n\t\tif (!this.useCpu) {\n\t\t\tif (this.pack8) {\n\t\t\t\tthis.particleTexIN = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t\tthis.particleTexOUT = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t\tthis.particleTexStart = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTexStart, PIXELFORMAT_R8_G8_B8_A8, 1, false);\n\t\t\t} else {\n\t\t\t\tthis.particleTexIN = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex);\n\t\t\t\tthis.particleTexOUT = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTex);\n\t\t\t\tthis.particleTexStart = _createTexture(gd, this.numParticlesPot, particleTexHeight, this.particleTexStart);\n\t\t\t}\n\n\t\t\tthis.rtParticleTexIN = new RenderTarget({\n\t\t\t\tcolorBuffer: this.particleTexIN,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tthis.rtParticleTexOUT = new RenderTarget({\n\t\t\t\tcolorBuffer: this.particleTexOUT,\n\t\t\t\tdepth: false\n\t\t\t});\n\t\t\tthis.swapTex = false;\n\t\t}\n\n\t\tvar shaderCodeStart = (this.localSpace ? '#define LOCAL_SPACE\\n' : '') + shaderChunks.particleUpdaterInitPS + (this.pack8 ? shaderChunks.particleInputRgba8PS + shaderChunks.particleOutputRgba8PS : shaderChunks.particleInputFloatPS + shaderChunks.particleOutputFloatPS) + (this.emitterShape === EMITTERSHAPE_BOX ? shaderChunks.particleUpdaterAABBPS : shaderChunks.particleUpdaterSpherePS) + shaderChunks.particleUpdaterStartPS;\n\t\tvar shaderCodeRespawn = shaderCodeStart + shaderChunks.particleUpdaterRespawnPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar shaderCodeNoRespawn = shaderCodeStart + shaderChunks.particleUpdaterNoRespawnPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar shaderCodeOnStop = shaderCodeStart + shaderChunks.particleUpdaterOnStopPS + shaderChunks.particleUpdaterEndPS;\n\t\tvar params = this.emitterShape + \"\" + this.pack8 + \"\" + this.localSpace;\n\t\tthis.shaderParticleUpdateRespawn = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeRespawn, \"fsQuad0\" + params);\n\t\tthis.shaderParticleUpdateNoRespawn = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeNoRespawn, \"fsQuad1\" + params);\n\t\tthis.shaderParticleUpdateOnStop = createShaderFromCode(gd, shaderChunks.fullscreenQuadVS, shaderCodeOnStop, \"fsQuad2\" + params);\n\t\tthis.numParticleVerts = this.useMesh ? this.mesh.vertexBuffer.numVertices : 4;\n\t\tthis.numParticleIndices = this.useMesh ? this.mesh.indexBuffer[0].numIndices : 6;\n\n\t\tthis._allocate(this.numParticles);\n\n\t\tvar mesh = new Mesh(gd);\n\t\tmesh.vertexBuffer = this.vertexBuffer;\n\t\tmesh.indexBuffer[0] = this.indexBuffer;\n\t\tmesh.primitive[0].type = PRIMITIVE_TRIANGLES;\n\t\tmesh.primitive[0].base = 0;\n\t\tmesh.primitive[0].count = this.numParticles * this.numParticleIndices;\n\t\tmesh.primitive[0].indexed = true;\n\t\tthis.material = new Material();\n\t\tthis.material.name = this.node.name;\n\t\tthis.material.cull = CULLFACE_NONE;\n\t\tthis.material.alphaWrite = false;\n\t\tthis.material.blend = true;\n\t\tthis.material.blendType = this.blendType;\n\t\tthis.material.depthWrite = this.depthWrite;\n\t\tthis.material.emitter = this;\n\t\tthis.regenShader();\n\t\tthis.resetMaterial();\n\t\tvar wasVisible = this.meshInstance ? this.meshInstance.visible : true;\n\t\tthis.meshInstance = new MeshInstance(mesh, this.material, this.node);\n\t\tthis.meshInstance.pick = false;\n\t\tthis.meshInstance.updateKey();\n\t\tthis.meshInstance.cull = true;\n\t\tthis.meshInstance._noDepthDrawGl1 = true;\n\n\t\tif (this.localSpace) {\n\t\t\tthis.meshInstance.aabb.setFromTransformedAabb(this.worldBounds, this.node.getWorldTransform());\n\t\t} else {\n\t\t\tthis.meshInstance.aabb.copy(this.worldBounds);\n\t\t}\n\n\t\tthis.meshInstance._updateAabb = false;\n\t\tthis.meshInstance.visible = wasVisible;\n\n\t\tthis._initializeTextures();\n\n\t\tthis.resetTime();\n\t\tthis.addTime(0, false);\n\t\tif (this.preWarm) this.prewarm(this.lifetime);\n\t}\n\n\t_isAnimated() {\n\t\treturn this.animNumFrames >= 1 && (this.animTilesX > 1 || this.animTilesY > 1) && (this.colorMap && this.colorMap !== ParticleEmitter.DEFAULT_PARAM_TEXTURE || this.normalMap);\n\t}\n\n\trebuildGraphs() {\n\t\tvar precision = this.precision;\n\t\tvar gd = this.graphicsDevice;\n\t\tvar i;\n\t\tthis.qLocalVelocity = this.localVelocityGraph.quantize(precision);\n\t\tthis.qVelocity = this.velocityGraph.quantize(precision);\n\t\tthis.qColor = this.colorGraph.quantizeClamped(precision, 0, 1);\n\t\tthis.qRotSpeed = this.rotationSpeedGraph.quantize(precision);\n\t\tthis.qScale = this.scaleGraph.quantize(precision);\n\t\tthis.qAlpha = this.alphaGraph.quantize(precision);\n\t\tthis.qRadialSpeed = this.radialSpeedGraph.quantize(precision);\n\t\tthis.qLocalVelocity2 = this.localVelocityGraph2.quantize(precision);\n\t\tthis.qVelocity2 = this.velocityGraph2.quantize(precision);\n\t\tthis.qColor2 = this.colorGraph2.quantizeClamped(precision, 0, 1);\n\t\tthis.qRotSpeed2 = this.rotationSpeedGraph2.quantize(precision);\n\t\tthis.qScale2 = this.scaleGraph2.quantize(precision);\n\t\tthis.qAlpha2 = this.alphaGraph2.quantize(precision);\n\t\tthis.qRadialSpeed2 = this.radialSpeedGraph2.quantize(precision);\n\n\t\tfor (i = 0; i < precision; i++) {\n\t\t\tthis.qRotSpeed[i] *= math.DEG_TO_RAD;\n\t\t\tthis.qRotSpeed2[i] *= math.DEG_TO_RAD;\n\t\t}\n\n\t\tthis.localVelocityUMax = new Float32Array(3);\n\t\tthis.velocityUMax = new Float32Array(3);\n\t\tthis.colorUMax = new Float32Array(3);\n\t\tthis.rotSpeedUMax = [0];\n\t\tthis.scaleUMax = [0];\n\t\tthis.alphaUMax = [0];\n\t\tthis.radialSpeedUMax = [0];\n\t\tthis.qLocalVelocityDiv = divGraphFrom2Curves(this.qLocalVelocity, this.qLocalVelocity2, this.localVelocityUMax);\n\t\tthis.qVelocityDiv = divGraphFrom2Curves(this.qVelocity, this.qVelocity2, this.velocityUMax);\n\t\tthis.qColorDiv = divGraphFrom2Curves(this.qColor, this.qColor2, this.colorUMax);\n\t\tthis.qRotSpeedDiv = divGraphFrom2Curves(this.qRotSpeed, this.qRotSpeed2, this.rotSpeedUMax);\n\t\tthis.qScaleDiv = divGraphFrom2Curves(this.qScale, this.qScale2, this.scaleUMax);\n\t\tthis.qAlphaDiv = divGraphFrom2Curves(this.qAlpha, this.qAlpha2, this.alphaUMax);\n\t\tthis.qRadialSpeedDiv = divGraphFrom2Curves(this.qRadialSpeed, this.qRadialSpeed2, this.radialSpeedUMax);\n\n\t\tif (this.pack8) {\n\t\t\tvar umax = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qVelocity, umax);\n\t\t\tvar umax2 = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qVelocity2, umax2);\n\t\t\tvar lumax = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qLocalVelocity, lumax);\n\t\t\tvar lumax2 = [0, 0, 0];\n\t\t\tmaxUnsignedGraphValue(this.qLocalVelocity2, lumax2);\n\t\t\tvar rumax = [0];\n\t\t\tmaxUnsignedGraphValue(this.qRadialSpeed, rumax);\n\t\t\tvar rumax2 = [0];\n\t\t\tmaxUnsignedGraphValue(this.qRadialSpeed2, rumax2);\n\t\t\tvar maxVel = Math.max(umax[0], umax2[0]);\n\t\t\tmaxVel = Math.max(maxVel, umax[1]);\n\t\t\tmaxVel = Math.max(maxVel, umax2[1]);\n\t\t\tmaxVel = Math.max(maxVel, umax[2]);\n\t\t\tmaxVel = Math.max(maxVel, umax2[2]);\n\t\t\tvar lmaxVel = Math.max(lumax[0], lumax2[0]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax[1]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax2[1]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax[2]);\n\t\t\tlmaxVel = Math.max(lmaxVel, lumax2[2]);\n\t\t\tvar maxRad = Math.max(rumax[0], rumax2[0]);\n\t\t\tthis.maxVel = maxVel + lmaxVel + maxRad;\n\t\t}\n\n\t\tif (!this.useCpu) {\n\t\t\tthis.internalTex0 = _createTexture(gd, precision, 1, packTextureXYZ_NXYZ(this.qLocalVelocity, this.qLocalVelocityDiv));\n\t\t\tthis.internalTex1 = _createTexture(gd, precision, 1, packTextureXYZ_NXYZ(this.qVelocity, this.qVelocityDiv));\n\t\t\tthis.internalTex2 = _createTexture(gd, precision, 1, packTexture5Floats(this.qRotSpeed, this.qScale, this.qScaleDiv, this.qRotSpeedDiv, this.qAlphaDiv));\n\t\t\tthis.internalTex3 = _createTexture(gd, precision, 1, packTexture2Floats(this.qRadialSpeed, this.qRadialSpeedDiv));\n\t\t}\n\n\t\tthis.colorParam = _createTexture(gd, precision, 1, packTextureRGBA(this.qColor, this.qAlpha), PIXELFORMAT_R8_G8_B8_A8, 1.0, true);\n\t}\n\n\t_initializeTextures() {\n\t\tif (this.colorMap) {\n\t\t\tthis.material.setParameter('colorMap', this.colorMap);\n\n\t\t\tif (this.lighting && this.normalMap) {\n\t\t\t\tthis.material.setParameter('normalMap', this.normalMap);\n\t\t\t}\n\t\t}\n\t}\n\n\tregenShader() {\n\t\tvar programLib = this.graphicsDevice.getProgramLibrary();\n\t\tvar hasNormal = this.normalMap !== null;\n\t\tthis.normalOption = 0;\n\n\t\tif (this.lighting) {\n\t\t\tthis.normalOption = hasNormal ? 2 : 1;\n\t\t}\n\n\t\tthis.material.updateShader = function () {\n\t\t\tif (this.emitter.scene) {\n\t\t\t\tif (this.emitter.camera !== this.emitter.scene._activeCamera) {\n\t\t\t\t\tthis.emitter.camera = this.emitter.scene._activeCamera;\n\t\t\t\t\tthis.emitter.onChangeCamera();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar inTools = this.emitter.inTools;\n\t\t\tvar shader = programLib.getProgram(\"particle\", {\n\t\t\t\tuseCpu: this.emitter.useCpu,\n\t\t\t\tnormal: this.emitter.normalOption,\n\t\t\t\thalflambert: this.emitter.halfLambert,\n\t\t\t\tstretch: this.emitter.stretch,\n\t\t\t\talignToMotion: this.emitter.alignToMotion,\n\t\t\t\tsoft: this.emitter.depthSoftening,\n\t\t\t\tmesh: this.emitter.useMesh,\n\t\t\t\tgamma: this.emitter.scene ? this.emitter.scene.gammaCorrection : 0,\n\t\t\t\ttoneMap: this.emitter.scene ? this.emitter.scene.toneMapping : 0,\n\t\t\t\tfog: this.emitter.scene && !this.emitter.noFog ? this.emitter.scene.fog : \"none\",\n\t\t\t\twrap: this.emitter.wrap && this.emitter.wrapBounds,\n\t\t\t\tlocalSpace: this.emitter.localSpace,\n\t\t\t\tscreenSpace: inTools ? false : this.emitter.screenSpace,\n\t\t\t\tblend: this.blendType,\n\t\t\t\tanimTex: this.emitter._isAnimated(),\n\t\t\t\tanimTexLoop: this.emitter.animLoop,\n\t\t\t\tpack8: this.emitter.pack8,\n\t\t\t\tcustomFace: this.emitter.orientation !== PARTICLEORIENTATION_SCREEN\n\t\t\t});\n\t\t\tthis.shader = shader;\n\t\t};\n\n\t\tthis.material.updateShader();\n\t}\n\n\tresetMaterial() {\n\t\tvar material = this.material;\n\t\tmaterial.setParameter('stretch', this.stretch);\n\n\t\tif (this._isAnimated()) {\n\t\t\tmaterial.setParameter('animTexTilesParams', this.animTilesParams);\n\t\t\tmaterial.setParameter('animTexParams', this.animParams);\n\t\t\tmaterial.setParameter('animTexIndexParams', this.animIndexParams);\n\t\t}\n\n\t\tmaterial.setParameter('colorMult', this.intensity);\n\n\t\tif (!this.useCpu) {\n\t\t\tmaterial.setParameter('internalTex0', this.internalTex0);\n\t\t\tmaterial.setParameter('internalTex1', this.internalTex1);\n\t\t\tmaterial.setParameter('internalTex2', this.internalTex2);\n\t\t\tmaterial.setParameter('internalTex3', this.internalTex3);\n\t\t}\n\n\t\tmaterial.setParameter('colorParam', this.colorParam);\n\t\tmaterial.setParameter('numParticles', this.numParticles);\n\t\tmaterial.setParameter('numParticlesPot', this.numParticlesPot);\n\t\tmaterial.setParameter('lifetime', this.lifetime);\n\t\tmaterial.setParameter('rate', this.rate);\n\t\tmaterial.setParameter('rateDiv', this.rate2 - this.rate);\n\t\tmaterial.setParameter('seed', this.seed);\n\t\tmaterial.setParameter('scaleDivMult', this.scaleUMax[0]);\n\t\tmaterial.setParameter('alphaDivMult', this.alphaUMax[0]);\n\t\tmaterial.setParameter('radialSpeedDivMult', this.radialSpeedUMax[0]);\n\t\tmaterial.setParameter(\"graphNumSamples\", this.precision);\n\t\tmaterial.setParameter(\"graphSampleSize\", 1.0 / this.precision);\n\t\tmaterial.setParameter(\"emitterScale\", new Float32Array([1, 1, 1]));\n\n\t\tif (this.pack8) {\n\t\t\tthis._gpuUpdater._setInputBounds();\n\n\t\t\tmaterial.setParameter(\"inBoundsSize\", this._gpuUpdater.inBoundsSizeUniform);\n\t\t\tmaterial.setParameter(\"inBoundsCenter\", this._gpuUpdater.inBoundsCenterUniform);\n\t\t\tmaterial.setParameter(\"maxVel\", this.maxVel);\n\t\t}\n\n\t\tif (this.wrap && this.wrapBounds) {\n\t\t\tthis.wrapBoundsUniform[0] = this.wrapBounds.x;\n\t\t\tthis.wrapBoundsUniform[1] = this.wrapBounds.y;\n\t\t\tthis.wrapBoundsUniform[2] = this.wrapBounds.z;\n\t\t\tmaterial.setParameter('wrapBounds', this.wrapBoundsUniform);\n\t\t}\n\n\t\tif (this.colorMap) {\n\t\t\tmaterial.setParameter('colorMap', this.colorMap);\n\t\t}\n\n\t\tif (this.lighting) {\n\t\t\tif (this.normalMap) {\n\t\t\t\tmaterial.setParameter('normalMap', this.normalMap);\n\t\t\t}\n\t\t}\n\n\t\tif (this.depthSoftening > 0) {\n\t\t\tmaterial.setParameter('softening', 1.0 / (this.depthSoftening * this.depthSoftening * 100));\n\t\t}\n\n\t\tif (this.stretch > 0.0) material.cull = CULLFACE_NONE;\n\n\t\tthis._compParticleFaceParams();\n\t}\n\n\t_compParticleFaceParams() {\n\t\tvar tangent, binormal;\n\n\t\tif (this.orientation === PARTICLEORIENTATION_SCREEN) {\n\t\t\ttangent = new Float32Array([1, 0, 0]);\n\t\t\tbinormal = new Float32Array([0, 0, 1]);\n\t\t} else {\n\t\t\tvar n;\n\n\t\t\tif (this.orientation === PARTICLEORIENTATION_WORLD) {\n\t\t\t\tn = this.particleNormal.normalize();\n\t\t\t} else {\n\t\t\t\tvar emitterMat = this.node === null ? Mat4.IDENTITY : this.node.getWorldTransform();\n\t\t\t\tn = emitterMat.transformVector(this.particleNormal).normalize();\n\t\t\t}\n\n\t\t\tvar t = new Vec3(1, 0, 0);\n\t\t\tif (Math.abs(t.dot(n)) === 1) t.set(0, 0, 1);\n\t\t\tvar b = new Vec3().cross(n, t).normalize();\n\t\t\tt.cross(b, n).normalize();\n\t\t\ttangent = new Float32Array([t.x, t.y, t.z]);\n\t\t\tbinormal = new Float32Array([b.x, b.y, b.z]);\n\t\t}\n\n\t\tthis.material.setParameter(\"faceTangent\", tangent);\n\t\tthis.material.setParameter(\"faceBinorm\", binormal);\n\t}\n\n\t_allocate(numParticles) {\n\t\tvar psysVertCount = numParticles * this.numParticleVerts;\n\t\tvar psysIndexCount = numParticles * this.numParticleIndices;\n\t\tvar elements, particleFormat;\n\t\tvar i;\n\n\t\tif (this.vertexBuffer === undefined || this.vertexBuffer.getNumVertices() !== psysVertCount) {\n\t\t\tif (!this.useCpu) {\n\t\t\t\telements = [{\n\t\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}];\n\n\t\t\t\tif (this.useMesh) {\n\t\t\t\t\telements.push({\n\t\t\t\t\t\tsemantic: SEMANTIC_ATTR1,\n\t\t\t\t\t\tcomponents: 2,\n\t\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tparticleFormat = new VertexFormat(this.graphicsDevice, elements);\n\t\t\t\tthis.vertexBuffer = new VertexBuffer(this.graphicsDevice, particleFormat, psysVertCount, BUFFER_DYNAMIC);\n\t\t\t\tthis.indexBuffer = new IndexBuffer(this.graphicsDevice, INDEXFORMAT_UINT16, psysIndexCount);\n\t\t\t} else {\n\t\t\t\telements = [{\n\t\t\t\t\tsemantic: SEMANTIC_ATTR0,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR1,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR2,\n\t\t\t\t\tcomponents: 4,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR3,\n\t\t\t\t\tcomponents: 1,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}, {\n\t\t\t\t\tsemantic: SEMANTIC_ATTR4,\n\t\t\t\t\tcomponents: this.useMesh ? 4 : 2,\n\t\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t\t}];\n\t\t\t\tparticleFormat = new VertexFormat(this.graphicsDevice, elements);\n\t\t\t\tthis.vertexBuffer = new VertexBuffer(this.graphicsDevice, particleFormat, psysVertCount, BUFFER_DYNAMIC);\n\t\t\t\tthis.indexBuffer = new IndexBuffer(this.graphicsDevice, INDEXFORMAT_UINT16, psysIndexCount);\n\t\t\t}\n\n\t\t\tvar data = new Float32Array(this.vertexBuffer.lock());\n\t\t\tvar meshData, stride, texCoordOffset;\n\n\t\t\tif (this.useMesh) {\n\t\t\t\tmeshData = new Float32Array(this.mesh.vertexBuffer.lock());\n\t\t\t\tstride = meshData.length / this.mesh.vertexBuffer.numVertices;\n\n\t\t\t\tfor (var elem = 0; elem < this.mesh.vertexBuffer.format.elements.length; elem++) {\n\t\t\t\t\tif (this.mesh.vertexBuffer.format.elements[elem].name === SEMANTIC_TEXCOORD0) {\n\t\t\t\t\t\ttexCoordOffset = this.mesh.vertexBuffer.format.elements[elem].offset / 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar id;\n\n\t\t\tfor (i = 0; i < psysVertCount; i++) {\n\t\t\t\tid = Math.floor(i / this.numParticleVerts);\n\n\t\t\t\tif (!this.useMesh) {\n\t\t\t\t\tvar vertID = i % 4;\n\t\t\t\t\tdata[i * 4] = particleVerts[vertID][0];\n\t\t\t\t\tdata[i * 4 + 1] = particleVerts[vertID][1];\n\t\t\t\t\tdata[i * 4 + 2] = 0;\n\t\t\t\t\tdata[i * 4 + 3] = id;\n\t\t\t\t} else {\n\t\t\t\t\tvar vert = i % this.numParticleVerts;\n\t\t\t\t\tdata[i * 6] = meshData[vert * stride];\n\t\t\t\t\tdata[i * 6 + 1] = meshData[vert * stride + 1];\n\t\t\t\t\tdata[i * 6 + 2] = meshData[vert * stride + 2];\n\t\t\t\t\tdata[i * 6 + 3] = id;\n\t\t\t\t\tdata[i * 6 + 4] = meshData[vert * stride + texCoordOffset + 0];\n\t\t\t\t\tdata[i * 6 + 5] = meshData[vert * stride + texCoordOffset + 1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.useCpu) {\n\t\t\t\tthis.vbCPU = new Float32Array(data);\n\t\t\t\tthis.vbOld = new Float32Array(this.vbCPU.length);\n\t\t\t}\n\n\t\t\tthis.vertexBuffer.unlock();\n\n\t\t\tif (this.useMesh) {\n\t\t\t\tthis.mesh.vertexBuffer.unlock();\n\t\t\t}\n\n\t\t\tvar dst = 0;\n\t\t\tvar indices = new Uint16Array(this.indexBuffer.lock());\n\t\t\tif (this.useMesh) meshData = new Uint16Array(this.mesh.indexBuffer[0].lock());\n\n\t\t\tfor (i = 0; i < numParticles; i++) {\n\t\t\t\tif (!this.useMesh) {\n\t\t\t\t\tvar baseIndex = i * 4;\n\t\t\t\t\tindices[dst++] = baseIndex;\n\t\t\t\t\tindices[dst++] = baseIndex + 1;\n\t\t\t\t\tindices[dst++] = baseIndex + 2;\n\t\t\t\t\tindices[dst++] = baseIndex;\n\t\t\t\t\tindices[dst++] = baseIndex + 2;\n\t\t\t\t\tindices[dst++] = baseIndex + 3;\n\t\t\t\t} else {\n\t\t\t\t\tfor (var j = 0; j < this.numParticleIndices; j++) {\n\t\t\t\t\t\tindices[i * this.numParticleIndices + j] = meshData[j] + i * this.numParticleVerts;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.indexBuffer.unlock();\n\t\t\tif (this.useMesh) this.mesh.indexBuffer[0].unlock();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.beenReset = true;\n\t\tthis.seed = Math.random();\n\t\tthis.material.setParameter('seed', this.seed);\n\n\t\tif (this.useCpu) {\n\t\t\tfor (var i = 0; i < this.particleTexStart.length; i++) {\n\t\t\t\tthis.particleTex[i] = this.particleTexStart[i];\n\t\t\t}\n\t\t} else {\n\t\t\tthis._initializeTextures();\n\t\t}\n\n\t\tthis.resetWorldBounds();\n\t\tthis.resetTime();\n\t\tvar origLoop = this.loop;\n\t\tthis.loop = true;\n\t\tthis.addTime(0, false);\n\t\tthis.loop = origLoop;\n\n\t\tif (this.preWarm) {\n\t\t\tthis.prewarm(this.lifetime);\n\t\t}\n\t}\n\n\tprewarm(time) {\n\t\tvar lifetimeFraction = time / this.lifetime;\n\t\tvar iterations = Math.min(Math.floor(lifetimeFraction * this.precision), this.precision);\n\t\tvar stepDelta = time / iterations;\n\n\t\tfor (var i = 0; i < iterations; i++) {\n\t\t\tthis.addTime(stepDelta, false);\n\t\t}\n\t}\n\n\tresetTime() {\n\t\tthis.endTime = calcEndTime(this);\n\t}\n\n\tfinishFrame() {\n\t\tif (this.useCpu) this.vertexBuffer.unlock();\n\t}\n\n\taddTime(delta, isOnStop) {\n\t\tvar device = this.graphicsDevice;\n\t\tthis.simTimeTotal += delta;\n\t\tthis.calculateWorldBounds();\n\n\t\tif (this._isAnimated()) {\n\t\t\tvar tilesParams = this.animTilesParams;\n\t\t\ttilesParams[0] = 1.0 / this.animTilesX;\n\t\t\ttilesParams[1] = 1.0 / this.animTilesY;\n\t\t\tvar params = this.animParams;\n\t\t\tparams[0] = this.animStartFrame;\n\t\t\tparams[1] = this.animNumFrames * this.animSpeed;\n\t\t\tparams[2] = this.animNumFrames - 1;\n\t\t\tparams[3] = this.animNumAnimations - 1;\n\t\t\tvar animIndexParams = this.animIndexParams;\n\t\t\tanimIndexParams[0] = this.animIndex;\n\t\t\tanimIndexParams[1] = this.randomizeAnimIndex;\n\t\t}\n\n\t\tif (this.scene) {\n\t\t\tif (this.camera !== this.scene._activeCamera) {\n\t\t\t\tthis.camera = this.scene._activeCamera;\n\t\t\t\tthis.onChangeCamera();\n\t\t\t}\n\t\t}\n\n\t\tif (this.emitterShape === EMITTERSHAPE_BOX) {\n\t\t\textentsInnerRatioUniform[0] = this.emitterExtents.x !== 0 ? this.emitterExtentsInner.x / this.emitterExtents.x : 0;\n\t\t\textentsInnerRatioUniform[1] = this.emitterExtents.y !== 0 ? this.emitterExtentsInner.y / this.emitterExtents.y : 0;\n\t\t\textentsInnerRatioUniform[2] = this.emitterExtents.z !== 0 ? this.emitterExtentsInner.z / this.emitterExtents.z : 0;\n\n\t\t\tif (this.meshInstance.node === null) {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, Quat.IDENTITY, this.emitterExtents);\n\t\t\t} else {\n\t\t\t\tspawnMatrix.setTRS(Vec3.ZERO, this.meshInstance.node.getRotation(), tmpVec3.copy(this.emitterExtents).mul(this.meshInstance.node.localScale));\n\t\t\t}\n\t\t}\n\n\t\tvar emitterPos;\n\t\tvar emitterScale = this.meshInstance.node === null ? Vec3.ONE : this.meshInstance.node.localScale;\n\t\tthis.emitterScaleUniform[0] = emitterScale.x;\n\t\tthis.emitterScaleUniform[1] = emitterScale.y;\n\t\tthis.emitterScaleUniform[2] = emitterScale.z;\n\t\tthis.material.setParameter(\"emitterScale\", this.emitterScaleUniform);\n\n\t\tif (this.localSpace && this.meshInstance.node) {\n\t\t\temitterPos = this.meshInstance.node.getPosition();\n\t\t\tthis.emitterPosUniform[0] = emitterPos.x;\n\t\t\tthis.emitterPosUniform[1] = emitterPos.y;\n\t\t\tthis.emitterPosUniform[2] = emitterPos.z;\n\t\t\tthis.material.setParameter(\"emitterPos\", this.emitterPosUniform);\n\t\t}\n\n\t\tthis._compParticleFaceParams();\n\n\t\tif (!this.useCpu) {\n\t\t\tthis._gpuUpdater.update(device, spawnMatrix, extentsInnerRatioUniform, delta, isOnStop);\n\t\t} else {\n\t\t\tvar data = new Float32Array(this.vertexBuffer.lock());\n\n\t\t\tthis._cpuUpdater.update(data, this.vbToSort, this.particleTex, spawnMatrix, extentsInnerRatioUniform, emitterPos, delta, isOnStop);\n\t\t}\n\n\t\tif (!this.loop) {\n\t\t\tif (Date.now() > this.endTime) {\n\t\t\t\tif (this.onFinished) this.onFinished();\n\t\t\t\tthis.meshInstance.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.meshInstance) {\n\t\t\tthis.meshInstance.drawOrder = this.drawOrder;\n\t\t}\n\t}\n\n\t_destroyResources() {\n\t\tif (this.particleTexIN) {\n\t\t\tthis.particleTexIN.destroy();\n\t\t\tthis.particleTexIN = null;\n\t\t}\n\n\t\tif (this.particleTexOUT) {\n\t\t\tthis.particleTexOUT.destroy();\n\t\t\tthis.particleTexOUT = null;\n\t\t}\n\n\t\tif (this.particleTexStart && this.particleTexStart.destroy) {\n\t\t\tthis.particleTexStart.destroy();\n\t\t\tthis.particleTexStart = null;\n\t\t}\n\n\t\tif (this.rtParticleTexIN) {\n\t\t\tthis.rtParticleTexIN.destroy();\n\t\t\tthis.rtParticleTexIN = null;\n\t\t}\n\n\t\tif (this.rtParticleTexOUT) {\n\t\t\tthis.rtParticleTexOUT.destroy();\n\t\t\tthis.rtParticleTexOUT = null;\n\t\t}\n\n\t\tif (this.internalTex0) {\n\t\t\tthis.internalTex0.destroy();\n\t\t\tthis.internalTex0 = null;\n\t\t}\n\n\t\tif (this.internalTex1) {\n\t\t\tthis.internalTex1.destroy();\n\t\t\tthis.internalTex1 = null;\n\t\t}\n\n\t\tif (this.internalTex2) {\n\t\t\tthis.internalTex2.destroy();\n\t\t\tthis.internalTex2 = null;\n\t\t}\n\n\t\tif (this.internalTex3) {\n\t\t\tthis.internalTex3.destroy();\n\t\t\tthis.internalTex3 = null;\n\t\t}\n\n\t\tif (this.colorParam) {\n\t\t\tthis.colorParam.destroy();\n\t\t\tthis.colorParam = null;\n\t\t}\n\n\t\tif (this.vertexBuffer) {\n\t\t\tthis.vertexBuffer.destroy();\n\t\t\tthis.vertexBuffer = undefined;\n\t\t}\n\n\t\tif (this.indexBuffer) {\n\t\t\tthis.indexBuffer.destroy();\n\t\t\tthis.indexBuffer = undefined;\n\t\t}\n\n\t\tif (this.material) {\n\t\t\tthis.material.destroy();\n\t\t\tthis.material = null;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.camera = null;\n\n\t\tthis._destroyResources();\n\t}\n\n}\n\nclass AreaLightLuts {\n\tstatic createTexture(device, format, size) {\n\t\tconst tex = new Texture(device, {\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\tformat: format,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\ttype: TEXTURETYPE_DEFAULT,\n\t\t\tmagFilter: FILTER_LINEAR,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tanisotropy: 1\n\t\t});\n\t\ttex.name = 'AreaLightLUT';\n\t\treturn tex;\n\t}\n\n\tstatic setUniforms(device, texture1, texture2) {\n\t\tdevice.scope.resolve('areaLightsLutTex1').setValue(texture1);\n\t\tdevice.scope.resolve('areaLightsLutTex2').setValue(texture2);\n\t}\n\n\tstatic createPlaceholder(device) {\n\t\tconst texture = AreaLightLuts.createTexture(device, PIXELFORMAT_R8_G8_B8_A8, 2);\n\t\tconst pixels = texture.lock();\n\t\tpixels.fill(0);\n\t\ttexture.unlock();\n\t\tAreaLightLuts.setUniforms(device, texture, texture);\n\t}\n\n\tstatic set(device, resource) {\n\t\tfunction buildTexture(device, data, format) {\n\t\t\tconst texture = AreaLightLuts.createTexture(device, format, 64);\n\t\t\ttexture.lock().set(data);\n\t\t\ttexture.unlock();\n\t\t\ttexture.upload();\n\t\t\treturn texture;\n\t\t}\n\n\t\tfunction offsetScale(data, offset, scale) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Float32Array(count);\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst n = i % 4;\n\t\t\t\tret[i] = (data[i] + offset[n]) * scale[n];\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tfunction convertToHalfFloat(data) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Uint16Array(count);\n\t\t\tconst float2Half = math.float2Half;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tret[i] = float2Half(data[i]);\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tfunction convertToUint(data) {\n\t\t\tconst count = data.length;\n\t\t\tconst ret = new Uint8ClampedArray(count);\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tret[i] = data[i] * 255;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tconst versions = new Int16Array(resource, 0, 2);\n\t\tconst majorVersion = versions[0];\n\t\tconst minorVersion = versions[1];\n\n\t\tif (majorVersion !== 0 || minorVersion !== 1) {\n\t\t\tconsole.warn(`areaLightLuts asset version: ${majorVersion}.${minorVersion} is not supported in current engine version!`);\n\t\t} else {\n\t\t\tconst srcData1 = new Float32Array(resource, 4, 16384);\n\t\t\tconst srcData2 = new Float32Array(resource, 4 + 16384 * 4, 16384);\n\t\t\tlet data1, data2;\n\t\t\tconst format = device.areaLightLutFormat;\n\n\t\t\tif (format === PIXELFORMAT_RGBA32F) {\n\t\t\t\tdata1 = srcData1;\n\t\t\t\tdata2 = srcData2;\n\t\t\t} else if (format === PIXELFORMAT_RGBA16F) {\n\t\t\t\tdata1 = convertToHalfFloat(srcData1);\n\t\t\t\tdata2 = convertToHalfFloat(srcData2);\n\t\t\t} else {\n\t\t\t\tconst o1 = [0.0, 0.2976, 0.01381, 0.0];\n\t\t\t\tconst s1 = [0.999, 3.08737, 1.6546, 0.603249];\n\t\t\t\tconst o2 = [-0.306897, 0.0, 0.0, 0.0];\n\t\t\t\tconst s2 = [1.442787, 1.0, 1.0, 1.0];\n\t\t\t\tdata1 = convertToUint(offsetScale(srcData1, o1, s1));\n\t\t\t\tdata2 = convertToUint(offsetScale(srcData2, o2, s2));\n\t\t\t}\n\n\t\t\tconst tex1 = buildTexture(device, data1, format);\n\t\t\tconst tex2 = buildTexture(device, data2, format);\n\t\t\tAreaLightLuts.setUniforms(device, tex1, tex2);\n\t\t}\n\t}\n\n}\n\nvar identityGraphNode = new GraphNode();\n\nclass LineBatch {\n\tconstructor() {\n\t\tthis.numLinesAllocated = 128;\n\t\tthis.vb = null;\n\t\tthis.vbRam = null;\n\t\tthis.mesh = null;\n\t\tthis.linesUsed = 0;\n\t\tthis.material = null;\n\t\tthis.meshInstance = null;\n\t\tthis.meshInstanceArray = [];\n\t\tthis.layer = null;\n\t}\n\n\tinit(device, vertexFormat, layer, linesToAdd) {\n\t\tif (!this.mesh) {\n\t\t\tthis.mesh = new Mesh(device);\n\t\t\tthis.mesh.primitive[0].type = PRIMITIVE_LINES;\n\t\t\tthis.mesh.primitive[0].base = 0;\n\t\t\tthis.mesh.primitive[0].indexed = false;\n\t\t\tthis.material = new BasicMaterial();\n\t\t\tthis.material.vertexColors = true;\n\t\t\tthis.material.blend = true;\n\t\t\tthis.material.blendType = BLEND_NORMAL;\n\t\t\tthis.material.update();\n\t\t}\n\n\t\tthis.layer = layer;\n\n\t\twhile (this.linesUsed + linesToAdd > this.numLinesAllocated) {\n\t\t\tif (this.vb) {\n\t\t\t\tthis.vb.destroy();\n\t\t\t\tthis.vb = null;\n\t\t\t}\n\n\t\t\tthis.numLinesAllocated *= 2;\n\t\t}\n\n\t\tthis.vertexFormat = vertexFormat;\n\n\t\tif (!this.vb) {\n\t\t\tthis.vb = new VertexBuffer(device, vertexFormat, this.numLinesAllocated * 2, BUFFER_DYNAMIC);\n\t\t\tthis.mesh.vertexBuffer = this.vb;\n\t\t\tthis.vbRam = new DataView(this.vb.lock());\n\n\t\t\tif (!this.meshInstance) {\n\t\t\t\tidentityGraphNode.worldTransform = Mat4.IDENTITY;\n\t\t\t\tidentityGraphNode._dirtyWorld = identityGraphNode._dirtyNormal = false;\n\t\t\t\tthis.meshInstance = new MeshInstance(this.mesh, this.material, identityGraphNode);\n\t\t\t\tthis.meshInstance.cull = false;\n\t\t\t}\n\t\t}\n\t}\n\n\taddLines(position, color) {\n\t\tvar multiColor = !!color.length;\n\t\tvar offset = this.linesUsed * 2 * this.vertexFormat.size;\n\t\tvar clr;\n\n\t\tfor (var i = 0; i < position.length; i++) {\n\t\t\tthis.vbRam.setFloat32(offset, position[i].x, true);\n\t\t\toffset += 4;\n\t\t\tthis.vbRam.setFloat32(offset, position[i].y, true);\n\t\t\toffset += 4;\n\t\t\tthis.vbRam.setFloat32(offset, position[i].z, true);\n\t\t\toffset += 4;\n\t\t\tclr = multiColor ? color[i] : color;\n\t\t\tthis.vbRam.setUint8(offset, clr.r * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.g * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.b * 255);\n\t\t\toffset += 1;\n\t\t\tthis.vbRam.setUint8(offset, clr.a * 255);\n\t\t\toffset += 1;\n\t\t}\n\n\t\tthis.linesUsed += position.length / 2;\n\t}\n\n\tfinalize(meshInstanceArray) {\n\t\tif (this.linesUsed > 0) {\n\t\t\tthis.vb.setData(this.vbRam.buffer);\n\t\t\tthis.mesh.primitive[0].count = this.linesUsed * 2;\n\t\t\tmeshInstanceArray[0] = this.meshInstance;\n\t\t\tthis.layer.addMeshInstances(meshInstanceArray, true);\n\t\t\tthis.linesUsed = 0;\n\t\t}\n\t}\n\n}\n\nclass ImmediateData {\n\tconstructor(device) {\n\t\tthis.lineVertexFormat = new VertexFormat(device, [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_COLOR,\n\t\t\tcomponents: 4,\n\t\t\ttype: TYPE_UINT8,\n\t\t\tnormalize: true\n\t\t}]);\n\t\tthis.device = device;\n\t\tthis.lineBatches = [];\n\t\tthis.layers = [];\n\t\tthis.layerToBatch = {};\n\t\tthis.quadMesh = null;\n\t\tthis.textureShader = null;\n\t\tthis.depthTextureShader = null;\n\t\tthis.cubeLocalPos = null;\n\t\tthis.cubeWorldPos = null;\n\t\tthis.meshInstanceArray = [];\n\t\tthis.usedGraphNodes = [];\n\t\tthis.freeGraphNodes = [];\n\t}\n\n\tstatic getTextureVS() {\n\t\treturn `\n\t\t\t\t\t\tattribute vec2 aPosition;\n\t\t\t\t\t\tuniform mat4 matrix_model;\n\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\t\t\tgl_Position = matrix_model * vec4(aPosition, 0, 1);\n\t\t\t\t\t\t\t\tuv0 = aPosition.xy + 0.5;\n\t\t\t\t\t\t\t\tuv0.y = 1.0 - uv0.y;\n\t\t\t\t\t\t}\n\t\t\t\t`;\n\t}\n\n\tgetTextureShader() {\n\t\tif (!this.textureShader) {\n\t\t\tconst shaderDefinition = {\n\t\t\t\tattributes: {\n\t\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t\t},\n\t\t\t\tvshader: ImmediateData.getTextureVS(),\n\t\t\t\tfshader: `\n\t\t\t\t\t\t\t\t\t\tprecision lowp float;\n\t\t\t\t\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\t\t\t\t\tuniform sampler2D colorMap;\n\t\t\t\t\t\t\t\t\t\tvoid main (void) {\n\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(texture2D(colorMap, uv0).xyz, 1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`\n\t\t\t};\n\t\t\tthis.textureShader = new Shader(this.device, shaderDefinition);\n\t\t}\n\n\t\treturn this.textureShader;\n\t}\n\n\tgetDepthTextureShader() {\n\t\tif (!this.depthTextureShader) {\n\t\t\tconst gl2 = this.device.webgl2 ? \"#define GL2\" : \"\";\n\t\t\tconst shaderDefinition = {\n\t\t\t\tattributes: {\n\t\t\t\t\taPosition: SEMANTIC_POSITION\n\t\t\t\t},\n\t\t\t\tvshader: ImmediateData.getTextureVS(),\n\t\t\t\tfshader: `\n\t\t\t\t\t\t\t\t\t\tprecision ${this.device.precision} float;\n\t\t\t\t\t\t\t\t\t\t${gl2}\n\t\t\t\t\t\t\t\t\t\t${shaderChunks.screenDepthPS}\n\t\t\t\t\t\t\t\t\t\tvarying vec2 uv0;\n\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\t\t\t\t\t\tfloat depth = getLinearScreenDepth(uv0) * camera_params.x;\n\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(vec3(depth), 1.0);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`\n\t\t\t};\n\t\t\tthis.depthTextureShader = new Shader(this.device, shaderDefinition);\n\t\t}\n\n\t\treturn this.depthTextureShader;\n\t}\n\n\tgetQuadMesh() {\n\t\tif (!this.quadMesh) {\n\t\t\tvar format = new VertexFormat(this.device, [{\n\t\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\t\tcomponents: 3,\n\t\t\t\ttype: TYPE_FLOAT32\n\t\t\t}]);\n\t\t\tvar quadVb = new VertexBuffer(this.device, format, 4);\n\t\t\tvar iterator = new VertexIterator(quadVb);\n\t\t\titerator.element[SEMANTIC_POSITION].set(-0.5, -0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(0.5, -0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(-0.5, 0.5, 0);\n\t\t\titerator.next();\n\t\t\titerator.element[SEMANTIC_POSITION].set(0.5, 0.5, 0);\n\t\t\titerator.end();\n\t\t\tthis.quadMesh = new Mesh(this.device);\n\t\t\tthis.quadMesh.vertexBuffer = quadVb;\n\t\t\tthis.quadMesh.primitive[0].type = PRIMITIVE_TRISTRIP;\n\t\t\tthis.quadMesh.primitive[0].base = 0;\n\t\t\tthis.quadMesh.primitive[0].count = 4;\n\t\t\tthis.quadMesh.primitive[0].indexed = false;\n\t\t}\n\n\t\treturn this.quadMesh;\n\t}\n\n\trenderMesh(material, matrix, mesh, meshInstance, options) {\n\t\tif (!meshInstance) {\n\t\t\tvar graphNode = this.getGraphNode(matrix);\n\t\t\tmeshInstance = new MeshInstance(mesh, material, graphNode);\n\t\t\tmeshInstance.cull = false;\n\t\t}\n\n\t\tthis.addLayer(options.layer);\n\n\t\tif (options.mask) {\n\t\t\tmeshInstance.mask = options.mask;\n\t\t}\n\n\t\tthis.meshInstanceArray[0] = meshInstance;\n\t\toptions.layer.addMeshInstances(this.meshInstanceArray, true);\n\t}\n\n\trenderWireCube(matrix, color, options) {\n\t\tif (!this.cubeLocalPos) {\n\t\t\tconst x = 0.5;\n\t\t\tthis.cubeLocalPos = [new Vec3(-x, -x, -x), new Vec3(-x, x, -x), new Vec3(x, x, -x), new Vec3(x, -x, -x), new Vec3(-x, -x, x), new Vec3(-x, x, x), new Vec3(x, x, x), new Vec3(x, -x, x)];\n\t\t\tthis.cubeWorldPos = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\t\tconst _cubeWorldPos = this.cubeWorldPos;\n\t\t\tthis.cubePositions = [_cubeWorldPos[0], _cubeWorldPos[1], _cubeWorldPos[1], _cubeWorldPos[2], _cubeWorldPos[2], _cubeWorldPos[3], _cubeWorldPos[3], _cubeWorldPos[0], _cubeWorldPos[4], _cubeWorldPos[5], _cubeWorldPos[5], _cubeWorldPos[6], _cubeWorldPos[6], _cubeWorldPos[7], _cubeWorldPos[7], _cubeWorldPos[4], _cubeWorldPos[0], _cubeWorldPos[4], _cubeWorldPos[1], _cubeWorldPos[5], _cubeWorldPos[2], _cubeWorldPos[6], _cubeWorldPos[3], _cubeWorldPos[7]];\n\t\t}\n\n\t\tconst cubeLocalPos = this.cubeLocalPos;\n\t\tconst cubeWorldPos = this.cubeWorldPos;\n\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tmatrix.transformPoint(cubeLocalPos[i], cubeWorldPos[i]);\n\t\t}\n\n\t\tconst lineBatch = this.prepareLineBatch(options.layer, options.depthTest, undefined, this.cubePositions.length);\n\t\tlineBatch.addLines(this.cubePositions, color);\n\t}\n\n\trenderWireSphere(center, radius, color, options) {\n\t\tconst numSegments = 20;\n\n\t\tif (!this.spherePoints) {\n\t\t\tthis.spherePoints = [];\n\n\t\t\tfor (let i = 0; i < numSegments * 6; i++) {\n\t\t\t\tthis.spherePoints.push(new Vec3());\n\t\t\t}\n\t\t}\n\n\t\tconst points = this.spherePoints;\n\t\tconst step = 2 * Math.PI / numSegments;\n\t\tlet angle = 0;\n\n\t\tfor (let i = 0; i < numSegments; i++) {\n\t\t\tconst sin0 = Math.sin(angle);\n\t\t\tconst cos0 = Math.cos(angle);\n\t\t\tangle += step;\n\t\t\tconst sin1 = Math.sin(angle);\n\t\t\tconst cos1 = Math.cos(angle);\n\t\t\tpoints[i * 6].set(center.x + radius * sin0, center.y, center.z + radius * cos0);\n\t\t\tpoints[i * 6 + 1].set(center.x + radius * sin1, center.y, center.z + radius * cos1);\n\t\t\tpoints[i * 6 + 2].set(center.x + radius * sin0, center.y + radius * cos0, center.z);\n\t\t\tpoints[i * 6 + 3].set(center.x + radius * sin1, center.y + radius * cos1, center.z);\n\t\t\tpoints[i * 6 + 4].set(center.x, center.y + radius * sin0, center.z + radius * cos0);\n\t\t\tpoints[i * 6 + 5].set(center.x, center.y + radius * sin1, center.z + radius * cos1);\n\t\t}\n\n\t\tconst lineBatch = this.prepareLineBatch(options.layer, options.depthTest, undefined, points.length);\n\t\tlineBatch.addLines(points, color);\n\t}\n\n\tgetGraphNode(matrix) {\n\t\tlet graphNode = null;\n\n\t\tif (this.freeGraphNodes.length > 0) {\n\t\t\tgraphNode = this.freeGraphNodes.pop();\n\t\t} else {\n\t\t\tgraphNode = new GraphNode();\n\t\t}\n\n\t\tthis.usedGraphNodes.push(graphNode);\n\t\tgraphNode.worldTransform = matrix;\n\t\tgraphNode._dirtyWorld = graphNode._dirtyNormal = false;\n\t\treturn graphNode;\n\t}\n\n\taddLayer(layer) {\n\t\tif (this.layers.indexOf(layer) < 0) {\n\t\t\tthis.layers.push(layer);\n\t\t}\n\t}\n\n\tgetLayerIdx(layer) {\n\t\treturn this.layerToBatch[layer.id];\n\t}\n\n\taddLayerIdx(idx, layer) {\n\t\tthis.layerToBatch[layer.id] = idx;\n\t}\n\n\tfinalize() {\n\t\tfor (var i = 0; i < this.lineBatches.length; i++) {\n\t\t\tif (this.lineBatches[i]) {\n\t\t\t\tthis.lineBatches[i].finalize(this.meshInstanceArray);\n\t\t\t}\n\t\t}\n\t}\n\n\tclear() {\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tthis.layers[i].clearMeshInstances(true);\n\t\t}\n\n\t\tconst temp = this.freeGraphNodes;\n\t\tthis.freeGraphNodes = this.usedGraphNodes;\n\t\tthis.usedGraphNodes = temp;\n\t\tthis.layers.length = 0;\n\t}\n\n\tprepareLineBatch(layer, depthTest, mask, numLines) {\n\t\tthis.addLayer(layer);\n\t\tvar idx = this.getLayerIdx(layer);\n\n\t\tif (idx === undefined) {\n\t\t\tvar batch = new LineBatch();\n\t\t\tbatch.init(this.device, this.lineVertexFormat, layer, numLines);\n\t\t\tbatch.material.depthTest = depthTest;\n\n\t\t\tif (mask) {\n\t\t\t\tbatch.meshInstance.mask = mask;\n\t\t\t}\n\n\t\t\tidx = this.lineBatches.push(batch) - 1;\n\t\t\tthis.addLayerIdx(idx, layer);\n\t\t} else {\n\t\t\tthis.lineBatches[idx].init(this.device, this.lineVertexFormat, layer, numLines);\n\t\t\tthis.lineBatches[idx].material.depthTest = depthTest;\n\n\t\t\tif (mask) {\n\t\t\t\tthis.lineBatches[idx].meshInstance.mask = mask;\n\t\t\t}\n\t\t}\n\n\t\treturn this.lineBatches[idx];\n\t}\n\n}\n\nclass Scene extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.root = null;\n\t\tthis._gravity = new Vec3(0, -9.8, 0);\n\t\tthis._layers = null;\n\t\tthis._fog = FOG_NONE;\n\t\tthis.fogColor = new Color(0, 0, 0);\n\t\tthis.fogStart = 1;\n\t\tthis.fogEnd = 1000;\n\t\tthis.fogDensity = 0;\n\t\tthis.ambientLight = new Color(0, 0, 0);\n\t\tthis._gammaCorrection = GAMMA_NONE;\n\t\tthis._toneMapping = 0;\n\t\tthis.exposure = 1.0;\n\t\tthis._skyboxPrefiltered = [null, null, null, null, null, null];\n\t\tthis._skyboxCubeMap = null;\n\t\tthis.skyboxModel = null;\n\t\tthis._skyboxIntensity = 1;\n\t\tthis._skyboxMip = 0;\n\t\tthis._skyboxRotation = new Quat();\n\t\tthis._skyboxRotationMat3 = null;\n\t\tthis._skyboxRotationMat4 = null;\n\t\tthis._skyboxIsRenderTarget = false;\n\t\tthis.lightmapSizeMultiplier = 1;\n\t\tthis.lightmapMaxResolution = 2048;\n\t\tthis.lightmapMode = BAKE_COLORDIR;\n\t\tthis._stats = {\n\t\t\tmeshInstances: 0,\n\t\t\tlights: 0,\n\t\t\tdynamicLights: 0,\n\t\t\tbakedLights: 0,\n\t\t\tlastStaticPrepareFullTime: 0,\n\t\t\tlastStaticPrepareSearchTime: 0,\n\t\t\tlastStaticPrepareWriteTime: 0,\n\t\t\tlastStaticPrepareTriAabbTime: 0,\n\t\t\tlastStaticPrepareCombineTime: 0,\n\t\t\tupdateShadersTime: 0\n\t\t};\n\t\tthis.updateShaders = true;\n\t\tthis.updateSkybox = true;\n\t\tthis._shaderVersion = 0;\n\t\tthis._statsUpdated = false;\n\t\tthis._models = [];\n\t\tthis.defaultMaterial = new StandardMaterial();\n\t\tthis.defaultMaterial.name = \"Default Material\";\n\t\tthis.defaultMaterial.shadingModel = SPECULAR_BLINN;\n\t}\n\n\tdestroy() {\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.root = null;\n\t\tthis.defaultMaterial.destroy();\n\t\tthis.defaultMaterial = null;\n\t\tthis.off();\n\t}\n\n\tget fog() {\n\t\treturn this._fog;\n\t}\n\n\tset fog(type) {\n\t\tif (type !== this._fog) {\n\t\t\tthis._fog = type;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget gammaCorrection() {\n\t\treturn this._gammaCorrection;\n\t}\n\n\tset gammaCorrection(value) {\n\t\tif (value !== this._gammaCorrection) {\n\t\t\tthis._gammaCorrection = value;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget toneMapping() {\n\t\treturn this._toneMapping;\n\t}\n\n\tset toneMapping(value) {\n\t\tif (value !== this._toneMapping) {\n\t\t\tthis._toneMapping = value;\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget skybox() {\n\t\treturn this._skyboxCubeMap;\n\t}\n\n\tset skybox(value) {\n\t\tthis._skyboxCubeMap = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxIntensity() {\n\t\treturn this._skyboxIntensity;\n\t}\n\n\tset skyboxIntensity(value) {\n\t\tthis._skyboxIntensity = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxRotation() {\n\t\treturn this._skyboxRotation;\n\t}\n\n\tset skyboxRotation(value) {\n\t\tif (!this._skyboxRotation.equals(value)) {\n\t\t\tthis._skyboxRotation.copy(value);\n\n\t\t\tthis._resetSkyboxModel();\n\n\t\t\tthis.updateShaders = true;\n\t\t}\n\t}\n\n\tget skyboxMip() {\n\t\treturn this._skyboxMip;\n\t}\n\n\tset skyboxMip(value) {\n\t\tthis._skyboxMip = value;\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered128() {\n\t\treturn this._skyboxPrefiltered[0];\n\t}\n\n\tset skyboxPrefiltered128(value) {\n\t\tif (this._skyboxPrefiltered[0] === value) return;\n\t\tthis._skyboxPrefiltered[0] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered64() {\n\t\treturn this._skyboxPrefiltered[1];\n\t}\n\n\tset skyboxPrefiltered64(value) {\n\t\tif (this._skyboxPrefiltered[1] === value) return;\n\t\tthis._skyboxPrefiltered[1] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered32() {\n\t\treturn this._skyboxPrefiltered[2];\n\t}\n\n\tset skyboxPrefiltered32(value) {\n\t\tif (this._skyboxPrefiltered[2] === value) return;\n\t\tthis._skyboxPrefiltered[2] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered16() {\n\t\treturn this._skyboxPrefiltered[3];\n\t}\n\n\tset skyboxPrefiltered16(value) {\n\t\tif (this._skyboxPrefiltered[3] === value) return;\n\t\tthis._skyboxPrefiltered[3] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered8() {\n\t\treturn this._skyboxPrefiltered[4];\n\t}\n\n\tset skyboxPrefiltered8(value) {\n\t\tif (this._skyboxPrefiltered[4] === value) return;\n\t\tthis._skyboxPrefiltered[4] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget skyboxPrefiltered4() {\n\t\treturn this._skyboxPrefiltered[5];\n\t}\n\n\tset skyboxPrefiltered4(value) {\n\t\tif (this._skyboxPrefiltered[5] === value) return;\n\t\tthis._skyboxPrefiltered[5] = value;\n\t\tthis.updateShaders = true;\n\t}\n\n\tget drawCalls() {\n\t\tvar drawCalls = this.layers._meshInstances;\n\n\t\tif (!drawCalls.length) {\n\t\t\tthis.layers._update();\n\n\t\t\tdrawCalls = this.layers._meshInstances;\n\t\t}\n\n\t\treturn drawCalls;\n\t}\n\n\tset drawCalls(value) {}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(layers) {\n\t\tvar prev = this._layers;\n\t\tthis._layers = layers;\n\t\tthis.fire(\"set:layers\", prev, layers);\n\t}\n\n\tget defaultMaterial() {\n\t\treturn Material.defaultMaterial;\n\t}\n\n\tset defaultMaterial(value) {\n\t\tMaterial.defaultMaterial = value;\n\t}\n\n\tapplySettings(settings) {\n\t\tthis._gravity.set(settings.physics.gravity[0], settings.physics.gravity[1], settings.physics.gravity[2]);\n\n\t\tthis.ambientLight.set(settings.render.global_ambient[0], settings.render.global_ambient[1], settings.render.global_ambient[2]);\n\t\tthis._fog = settings.render.fog;\n\t\tthis.fogColor.set(settings.render.fog_color[0], settings.render.fog_color[1], settings.render.fog_color[2]);\n\t\tthis.fogStart = settings.render.fog_start;\n\t\tthis.fogEnd = settings.render.fog_end;\n\t\tthis.fogDensity = settings.render.fog_density;\n\t\tthis._gammaCorrection = settings.render.gamma_correction;\n\t\tthis._toneMapping = settings.render.tonemapping;\n\t\tthis.lightmapSizeMultiplier = settings.render.lightmapSizeMultiplier;\n\t\tthis.lightmapMaxResolution = settings.render.lightmapMaxResolution;\n\t\tthis.lightmapMode = settings.render.lightmapMode;\n\t\tthis.exposure = settings.render.exposure;\n\t\tthis._skyboxIntensity = settings.render.skyboxIntensity === undefined ? 1 : settings.render.skyboxIntensity;\n\t\tthis._skyboxMip = settings.render.skyboxMip === undefined ? 0 : settings.render.skyboxMip;\n\n\t\tif (settings.render.skyboxRotation) {\n\t\t\tthis._skyboxRotation.setFromEulerAngles(settings.render.skyboxRotation[0], settings.render.skyboxRotation[1], settings.render.skyboxRotation[2]);\n\t\t}\n\n\t\tthis._resetSkyboxModel();\n\n\t\tthis.updateShaders = true;\n\t}\n\n\t_updateSkybox(device) {\n\t\tif (!this.skyboxModel) {\n\t\t\tvar skyboxMapping = [0, 1, 3, 4, 5, 6];\n\t\t\tvar usedTex = this._skyboxMip ? this._skyboxPrefiltered[skyboxMapping[this._skyboxMip]] || this._skyboxPrefiltered[0] || this._skyboxCubeMap : this._skyboxCubeMap || this._skyboxPrefiltered[0];\n\n\t\t\tif (!usedTex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (usedTex._isRenderTarget) {\n\t\t\t\tthis._skyboxIsRenderTarget = true;\n\t\t\t} else {\n\t\t\t\tthis._skyboxIsRenderTarget = false;\n\t\t\t}\n\n\t\t\tvar material = new Material();\n\t\t\tvar scene = this;\n\n\t\t\tmaterial.updateShader = function (dev, sc, defs, staticLightList, pass) {\n\t\t\t\tvar library = device.getProgramLibrary();\n\t\t\t\tvar shader = library.getProgram('skybox', {\n\t\t\t\t\trgbm: usedTex.type === TEXTURETYPE_RGBM,\n\t\t\t\t\thdr: usedTex.type === TEXTURETYPE_RGBM || usedTex.format === PIXELFORMAT_RGBA32F,\n\t\t\t\t\tuseIntensity: scene.skyboxIntensity !== 1,\n\t\t\t\t\tuseCubeMapRotation: !scene.skyboxRotation.equals(Quat.IDENTITY),\n\t\t\t\t\tuseRightHandedCubeMap: scene._skyboxIsRenderTarget,\n\t\t\t\t\tmip: usedTex.fixCubemapSeams ? scene.skyboxMip : 0,\n\t\t\t\t\tfixSeams: usedTex.fixCubemapSeams,\n\t\t\t\t\tgamma: pass === SHADER_FORWARDHDR ? scene.gammaCorrection ? GAMMA_SRGBHDR : GAMMA_NONE : scene.gammaCorrection,\n\t\t\t\t\ttoneMapping: pass === SHADER_FORWARDHDR ? TONEMAP_LINEAR : scene.toneMapping\n\t\t\t\t});\n\t\t\t\tthis.shader = shader;\n\t\t\t};\n\n\t\t\tmaterial.updateShader();\n\t\t\tmaterial.setParameter(\"texture_cubeMap\", usedTex);\n\n\t\t\tif (!this.skyboxRotation.equals(Quat.IDENTITY)) {\n\t\t\t\tif (!this._skyboxRotationMat4) this._skyboxRotationMat4 = new Mat4();\n\t\t\t\tif (!this._skyboxRotationMat3) this._skyboxRotationMat3 = new Mat3();\n\n\t\t\t\tthis._skyboxRotationMat4.setTRS(Vec3.ZERO, this._skyboxRotation, Vec3.ONE);\n\n\t\t\t\tthis._skyboxRotationMat4.invertTo3x3(this._skyboxRotationMat3);\n\n\t\t\t\tmaterial.setParameter(\"cubeMapRotationMatrix\", this._skyboxRotationMat3.data);\n\t\t\t}\n\n\t\t\tmaterial.cull = CULLFACE_FRONT;\n\t\t\tmaterial.depthWrite = false;\n\t\t\tvar skyLayer = this.layers.getLayerById(LAYERID_SKYBOX);\n\n\t\t\tif (skyLayer) {\n\t\t\t\tvar node = new GraphNode(\"Skybox\");\n\t\t\t\tvar mesh = createBox(device);\n\t\t\t\tvar meshInstance = new MeshInstance(mesh, material, node);\n\t\t\t\tmeshInstance.cull = false;\n\t\t\t\tmeshInstance._noDepthDrawGl1 = true;\n\t\t\t\tvar model = new Model();\n\t\t\t\tmodel.graph = node;\n\t\t\t\tmodel.meshInstances = [meshInstance];\n\t\t\t\tthis.skyboxModel = model;\n\t\t\t\tskyLayer.addMeshInstances(model.meshInstances);\n\t\t\t\tthis.skyLayer = skyLayer;\n\t\t\t\tthis.fire(\"set:skybox\", usedTex);\n\t\t\t}\n\t\t}\n\t}\n\n\t_resetSkyboxModel() {\n\t\tif (this.skyboxModel) {\n\t\t\tthis.skyLayer.removeMeshInstances(this.skyboxModel.meshInstances);\n\t\t\tthis.skyboxModel.destroy();\n\t\t}\n\n\t\tthis.skyboxModel = null;\n\t\tthis.updateSkybox = true;\n\t}\n\n\tsetSkybox(cubemaps) {\n\t\tvar i;\n\t\tif (!cubemaps) cubemaps = [null, null, null, null, null, null, null];\n\t\tvar different = false;\n\t\tif (this._skyboxCubeMap !== cubemaps[0]) different = true;\n\n\t\tif (!different) {\n\t\t\tfor (i = 0; i < 6 && !different; i++) {\n\t\t\t\tif (this._skyboxPrefiltered[i] !== cubemaps[i + 1]) different = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!different) return;\n\n\t\tfor (i = 0; i < 6; i++) this._skyboxPrefiltered[i] = cubemaps[i + 1];\n\n\t\tthis.skybox = cubemaps[0];\n\t}\n\n\taddModel(model) {\n\t\tif (this.containsModel(model)) return;\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.addMeshInstances(model.meshInstances);\n\n\t\tthis._models.push(model);\n\t}\n\n\taddShadowCaster(model) {\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.addShadowCasters(model.meshInstances);\n\t}\n\n\tremoveModel(model) {\n\t\tvar index = this._models.indexOf(model);\n\n\t\tif (index !== -1) {\n\t\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\t\tif (!layer) return;\n\t\t\tlayer.removeMeshInstances(model.meshInstances);\n\n\t\t\tthis._models.splice(index, 1);\n\t\t}\n\t}\n\n\tremoveShadowCasters(model) {\n\t\tvar layer = this.layers.getLayerById(LAYERID_WORLD);\n\t\tif (!layer) return;\n\t\tlayer.removeShadowCasters(model.meshInstances);\n\t}\n\n\tcontainsModel(model) {\n\t\treturn this._models.indexOf(model) >= 0;\n\t}\n\n\tgetModels(model) {\n\t\treturn this._models;\n\t}\n\n}\n\nfunction hasAudioContext() {\n\treturn !!(typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined');\n}\n\nclass Channel {\n\tconstructor(manager, sound, options = {}) {\n\t\tthis.volume = options.volume === undefined ? 1 : options.volume;\n\t\tthis.loop = options.loop === undefined ? false : options.loop;\n\t\tthis.pitch = options.pitch === undefined ? 1 : options.pitch;\n\t\tthis.sound = sound;\n\t\tthis.paused = false;\n\t\tthis.suspended = false;\n\t\tthis.manager = manager;\n\t\tthis.source = null;\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis.startTime = 0;\n\t\t\tthis.startOffset = 0;\n\t\t\tconst context = manager.context;\n\t\t\tthis.gain = context.createGain();\n\t\t} else if (sound.audio) {\n\t\t\tthis.source = sound.audio.cloneNode(false);\n\t\t\tthis.source.pause();\n\t\t}\n\t}\n\n\tgetVolume() {\n\t\treturn this.volume;\n\t}\n\n\tgetLoop() {\n\t\treturn this.loop;\n\t}\n\n\tsetLoop(loop) {\n\t\tthis.loop = loop;\n\n\t\tif (this.source) {\n\t\t\tthis.source.loop = loop;\n\t\t}\n\t}\n\n\tgetPitch() {\n\t\treturn this.pitch;\n\t}\n\n\tonManagerVolumeChange() {\n\t\tthis.setVolume(this.getVolume());\n\t}\n\n\tonManagerSuspend() {\n\t\tif (this.isPlaying() && !this.suspended) {\n\t\t\tthis.suspended = true;\n\t\t\tthis.pause();\n\t\t}\n\t}\n\n\tonManagerResume() {\n\t\tif (this.suspended) {\n\t\t\tthis.suspended = false;\n\t\t\tthis.unpause();\n\t\t}\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(Channel.prototype, {\n\t\tplay: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthrow new Error('Call stop() before calling play()');\n\t\t\t}\n\n\t\t\tthis._createSource();\n\n\t\t\tif (!this.source) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startTime = this.manager.context.currentTime;\n\t\t\tthis.source.start(0, this.startOffset % this.source.buffer.duration);\n\t\t\tthis.setVolume(this.volume);\n\t\t\tthis.setLoop(this.loop);\n\t\t\tthis.setPitch(this.pitch);\n\t\t\tthis.manager.on('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.on('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.on('resume', this.onManagerResume, this);\n\t\t\tif (this.manager.suspended) this.onManagerSuspend();\n\t\t},\n\t\tpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.startOffset += this.manager.context.currentTime - this.startTime;\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\t\t},\n\t\tunpause: function () {\n\t\t\tif (this.source || !this.paused) {\n\t\t\t\tconsole.warn('Call pause() before unpausing.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._createSource();\n\n\t\t\tif (!this.source) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startTime = this.manager.context.currentTime;\n\t\t\tthis.source.start(0, this.startOffset % this.source.buffer.duration);\n\t\t\tthis.setVolume(this.volume);\n\t\t\tthis.setLoop(this.loop);\n\t\t\tthis.setPitch(this.pitch);\n\t\t\tthis.paused = false;\n\t\t},\n\t\tstop: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\n\t\t\tthis.manager.off('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.off('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.off('resume', this.onManagerResume, this);\n\t\t},\n\t\tsetVolume: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis.volume = volume;\n\n\t\t\tif (this.gain) {\n\t\t\t\tthis.gain.gain.value = volume * this.manager.volume;\n\t\t\t}\n\t\t},\n\t\tsetPitch: function (pitch) {\n\t\t\tthis.pitch = pitch;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate.value = pitch;\n\t\t\t}\n\t\t},\n\t\tisPlaying: function () {\n\t\t\treturn !this.paused && this.source.playbackState === this.source.PLAYING_STATE;\n\t\t},\n\t\tgetDuration: function () {\n\t\t\treturn this.source ? this.source.buffer.duration : 0;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tconst context = this.manager.context;\n\n\t\t\tif (this.sound.buffer) {\n\t\t\t\tthis.source = context.createBufferSource();\n\t\t\t\tthis.source.buffer = this.sound.buffer;\n\t\t\t\tthis.source.connect(this.gain);\n\t\t\t\tthis.gain.connect(context.destination);\n\n\t\t\t\tif (!this.loop) {\n\t\t\t\t\tthis.source.onended = this.pause.bind(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tObject.assign(Channel.prototype, {\n\t\tplay: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.setVolume(this.volume);\n\t\t\t\tthis.setLoop(this.loop);\n\t\t\t\tthis.setPitch(this.pitch);\n\t\t\t\tthis.source.play();\n\t\t\t}\n\n\t\t\tthis.manager.on('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.on('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.on('resume', this.onManagerResume, this);\n\t\t\tif (this.manager.suspended) this.onManagerSuspend();\n\t\t},\n\t\tpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\t\t},\n\t\tunpause: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.source.play();\n\t\t\t}\n\t\t},\n\t\tstop: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\n\t\t\tthis.manager.off('volumechange', this.onManagerVolumeChange, this);\n\t\t\tthis.manager.off('suspend', this.onManagerSuspend, this);\n\t\t\tthis.manager.off('resume', this.onManagerResume, this);\n\t\t},\n\t\tsetVolume: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis.volume = volume;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.volume = volume * this.manager.volume;\n\t\t\t}\n\t\t},\n\t\tsetPitch: function (pitch) {\n\t\t\tthis.pitch = pitch;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate = pitch;\n\t\t\t}\n\t\t},\n\t\tgetDuration: function () {\n\t\t\treturn this.source && !isNaN(this.source.duration) ? this.source.duration : 0;\n\t\t},\n\t\tisPlaying: function () {\n\t\t\treturn !this.source.paused;\n\t\t}\n\t});\n}\n\nconst DISTANCE_LINEAR = 'linear';\nconst DISTANCE_INVERSE = 'inverse';\nconst DISTANCE_EXPONENTIAL = 'exponential';\n\nconst MAX_DISTANCE$1 = 10000;\n\nclass Channel3d extends Channel {\n\tconstructor(manager, sound, options) {\n\t\tsuper(manager, sound, options);\n\t\tthis.position = new Vec3();\n\t\tthis.velocity = new Vec3();\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis.panner = manager.context.createPanner();\n\t\t} else {\n\t\t\tthis.maxDistance = MAX_DISTANCE$1;\n\t\t\tthis.minDistance = 1;\n\t\t\tthis.rollOffFactor = 1;\n\t\t\tthis.distanceModel = DISTANCE_INVERSE;\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tgetVelocity() {\n\t\treturn this.velocity;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(Channel3d.prototype, {\n\t\tsetPosition: function (position) {\n\t\t\tthis.position.copy(position);\n\t\t\tthis.panner.setPosition(position.x, position.y, position.z);\n\t\t},\n\t\tsetVelocity: function (velocity) {\n\t\t\tthis.velocity.copy(velocity);\n\t\t\tthis.panner.setVelocity(velocity.x, velocity.y, velocity.z);\n\t\t},\n\t\tgetMaxDistance: function () {\n\t\t\treturn this.panner.maxDistance;\n\t\t},\n\t\tsetMaxDistance: function (max) {\n\t\t\tthis.panner.maxDistance = max;\n\t\t},\n\t\tgetMinDistance: function () {\n\t\t\treturn this.panner.refDistance;\n\t\t},\n\t\tsetMinDistance: function (min) {\n\t\t\tthis.panner.refDistance = min;\n\t\t},\n\t\tgetRollOffFactor: function () {\n\t\t\treturn this.panner.rolloffFactor;\n\t\t},\n\t\tsetRollOffFactor: function (factor) {\n\t\t\tthis.panner.rolloffFactor = factor;\n\t\t},\n\t\tgetDistanceModel: function () {\n\t\t\treturn this.pannel.distanceModel;\n\t\t},\n\t\tsetDistanceModel: function (distanceModel) {\n\t\t\tthis.panner.distanceModel = distanceModel;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tconst context = this.manager.context;\n\t\t\tthis.source = context.createBufferSource();\n\t\t\tthis.source.buffer = this.sound.buffer;\n\t\t\tthis.source.connect(this.panner);\n\t\t\tthis.panner.connect(this.gain);\n\t\t\tthis.gain.connect(context.destination);\n\n\t\t\tif (!this.loop) {\n\t\t\t\tthis.source.onended = this.pause.bind(this);\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tlet offset = new Vec3();\n\n\tconst fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rolloffFactor, distanceModel) {\n\t\toffset = offset.sub2(posOne, posTwo);\n\t\tconst distance = offset.length();\n\n\t\tif (distance < refDistance) {\n\t\t\treturn 1;\n\t\t} else if (distance > maxDistance) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet result = 0;\n\n\t\tif (distanceModel === DISTANCE_LINEAR) {\n\t\t\tresult = 1 - rolloffFactor * (distance - refDistance) / (maxDistance - refDistance);\n\t\t} else if (distanceModel === DISTANCE_INVERSE) {\n\t\t\tresult = refDistance / (refDistance + rolloffFactor * (distance - refDistance));\n\t\t} else if (distanceModel === DISTANCE_EXPONENTIAL) {\n\t\t\tresult = Math.pow(distance / refDistance, -rolloffFactor);\n\t\t}\n\n\t\treturn math.clamp(result, 0, 1);\n\t};\n\n\tObject.assign(Channel3d.prototype, {\n\t\tsetPosition: function (position) {\n\t\t\tthis.position.copy(position);\n\n\t\t\tif (this.source) {\n\t\t\t\tconst listener = this.manager.listener;\n\t\t\t\tconst lpos = listener.getPosition();\n\t\t\t\tconst factor = fallOff(lpos, this.position, this.minDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);\n\t\t\t\tconst v = this.getVolume();\n\t\t\t\tthis.source.volume = v * factor;\n\t\t\t}\n\t\t},\n\t\tsetVelocity: function (velocity) {\n\t\t\tthis.velocity.copy(velocity);\n\t\t},\n\t\tgetMaxDistance: function () {\n\t\t\treturn this.maxDistance;\n\t\t},\n\t\tsetMaxDistance: function (max) {\n\t\t\tthis.maxDistance = max;\n\t\t},\n\t\tgetMinDistance: function () {\n\t\t\treturn this.minDistance;\n\t\t},\n\t\tsetMinDistance: function (min) {\n\t\t\tthis.minDistance = min;\n\t\t},\n\t\tgetRollOffFactor: function () {\n\t\t\treturn this.rollOffFactor;\n\t\t},\n\t\tsetRollOffFactor: function (factor) {\n\t\t\tthis.rollOffFactor = factor;\n\t\t},\n\t\tgetDistanceModel: function () {\n\t\t\treturn this.distanceModel;\n\t\t},\n\t\tsetDistanceModel: function (distanceModel) {\n\t\t\tthis.distanceModel = distanceModel;\n\t\t}\n\t});\n}\n\nclass Listener {\n\tconstructor(manager) {\n\t\tthis._manager = manager;\n\t\tthis.position = new Vec3();\n\t\tthis.velocity = new Vec3();\n\t\tthis.orientation = new Mat4();\n\t}\n\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tsetPosition(position) {\n\t\tthis.position.copy(position);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setPosition(position.x, position.y, position.z);\n\t\t}\n\t}\n\n\tgetVelocity() {\n\t\treturn this.velocity;\n\t}\n\n\tsetVelocity(velocity) {\n\t\tthis.velocity.copy(velocity);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setPosition(velocity.x, velocity.y, velocity.z);\n\t\t}\n\t}\n\n\tsetOrientation(orientation) {\n\t\tthis.orientation.copy(orientation);\n\t\tconst listener = this.listener;\n\n\t\tif (listener) {\n\t\t\tlistener.setOrientation(-orientation.data[8], -orientation.data[9], -orientation.data[10], orientation.data[4], orientation.data[5], orientation.data[6]);\n\t\t}\n\t}\n\n\tgetOrientation() {\n\t\treturn this.orientation;\n\t}\n\n\tget listener() {\n\t\tconst context = this._manager.context;\n\t\treturn context ? context.listener : null;\n\t}\n\n}\n\nclass SoundManager extends EventHandler {\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis._context = null;\n\t\tthis._forceWebAudioApi = options.forceWebAudioApi;\n\t\tthis._resumeContext = null;\n\t\tthis._unlock = null;\n\n\t\tif (hasAudioContext() || this._forceWebAudioApi) {\n\t\t\tthis._resumeContext = () => {\n\t\t\t\twindow.removeEventListener('mousedown', this._resumeContext);\n\t\t\t\twindow.removeEventListener('touchend', this._resumeContext);\n\n\t\t\t\tif (this.context) {\n\t\t\t\t\tthis.context.resume();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.addEventListener('mousedown', this._resumeContext);\n\t\t\twindow.addEventListener('touchend', this._resumeContext);\n\n\t\t\tif (platform.ios) {\n\t\t\t\tthis._unlock = () => {\n\t\t\t\t\twindow.removeEventListener('touchend', this._unlock);\n\t\t\t\t\tconst context = this.context;\n\n\t\t\t\t\tif (context) {\n\t\t\t\t\t\tvar buffer = context.createBuffer(1, 1, 44100);\n\t\t\t\t\t\tvar source = context.createBufferSource();\n\t\t\t\t\t\tsource.buffer = buffer;\n\t\t\t\t\t\tsource.connect(context.destination);\n\t\t\t\t\t\tsource.start(0);\n\t\t\t\t\t\tsource.disconnect();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twindow.addEventListener('touchend', this._unlock);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No support for 3D audio found');\n\t\t}\n\n\t\tthis.listener = new Listener(this);\n\t\tthis._volume = 1;\n\t\tthis.suspended = false;\n\t}\n\n\tsuspend() {\n\t\tthis.suspended = true;\n\t\tthis.fire('suspend');\n\t}\n\n\tresume() {\n\t\tthis.suspended = false;\n\t\tthis.fire('resume');\n\t}\n\n\tdestroy() {\n\t\tif (this._resumeContext) {\n\t\t\twindow.removeEventListener('mousedown', this._resumeContext);\n\t\t\twindow.removeEventListener('touchend', this._resumeContext);\n\t\t}\n\n\t\tif (this._unlock) {\n\t\t\twindow.removeEventListener('touchend', this._unlock);\n\t\t}\n\n\t\tthis.fire('destroy');\n\n\t\tif (this._context && this._context.close) {\n\t\t\tthis._context.close();\n\n\t\t\tthis._context = null;\n\t\t}\n\t}\n\n\tplaySound(sound, options) {\n\t\toptions = options || {};\n\t\tvar channel = null;\n\n\t\tif (Channel) {\n\t\t\tchannel = new Channel(this, sound, options);\n\t\t\tchannel.play();\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\tplaySound3d(sound, position, options) {\n\t\toptions = options || {};\n\t\tvar channel = null;\n\n\t\tif (Channel3d) {\n\t\t\tchannel = new Channel3d(this, sound, options);\n\t\t\tchannel.setPosition(position);\n\n\t\t\tif (options.volume) {\n\t\t\t\tchannel.setVolume(options.volume);\n\t\t\t}\n\n\t\t\tif (options.loop) {\n\t\t\t\tchannel.setLoop(options.loop);\n\t\t\t}\n\n\t\t\tif (options.maxDistance) {\n\t\t\t\tchannel.setMaxDistance(options.maxDistance);\n\t\t\t}\n\n\t\t\tif (options.minDistance) {\n\t\t\t\tchannel.setMinDistance(options.minDistance);\n\t\t\t}\n\n\t\t\tif (options.rollOffFactor) {\n\t\t\t\tchannel.setRollOffFactor(options.rollOffFactor);\n\t\t\t}\n\n\t\t\tif (options.distanceModel) {\n\t\t\t\tchannel.setDistanceModel(options.distanceModel);\n\t\t\t}\n\n\t\t\tchannel.play();\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tset volume(volume) {\n\t\tvolume = math.clamp(volume, 0, 1);\n\t\tthis._volume = volume;\n\t\tthis.fire('volumechange', volume);\n\t}\n\n\tget context() {\n\t\tif (!this._context) {\n\t\t\tif (hasAudioContext() || this._forceWebAudioApi) {\n\t\t\t\tif (typeof AudioContext !== 'undefined') {\n\t\t\t\t\tthis._context = new AudioContext();\n\t\t\t\t} else if (typeof webkitAudioContext !== 'undefined') {\n\t\t\t\t\tthis._context = new webkitAudioContext();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._context;\n\t}\n\n}\n\nclass Key {\n\tconstructor(time, position, rotation, scale) {\n\t\tthis.time = time;\n\t\tthis.position = position;\n\t\tthis.rotation = rotation;\n\t\tthis.scale = scale;\n\t}\n\n}\n\nclass Node {\n\tconstructor() {\n\t\tthis._name = \"\";\n\t\tthis._keys = [];\n\t}\n\n}\n\nclass Animation {\n\tconstructor() {\n\t\tthis.name = '';\n\t\tthis.duration = 0;\n\t\tthis._nodes = [];\n\t\tthis._nodeDict = {};\n\t}\n\n\tgetNode(name) {\n\t\treturn this._nodeDict[name];\n\t}\n\n\tget nodes() {\n\t\treturn this._nodes;\n\t}\n\n\taddNode(node) {\n\t\tthis._nodes.push(node);\n\n\t\tthis._nodeDict[node._name] = node;\n\t}\n\n}\n\nclass Skin {\n\tconstructor(graphicsDevice, ibp, boneNames) {\n\t\tthis.device = graphicsDevice;\n\t\tthis.inverseBindPose = ibp;\n\t\tthis.boneNames = boneNames;\n\t}\n\n}\n\nclass Render extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._meshes = null;\n\t}\n\n\tdestroy() {\n\t\tthis.meshes = null;\n\t}\n\n\tdecRefMeshes() {\n\t\tif (this._meshes) {\n\t\t\tconst count = this._meshes.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst mesh = this._meshes[i];\n\n\t\t\t\tif (mesh) {\n\t\t\t\t\tmesh.decRefCount();\n\n\t\t\t\t\tif (mesh.getRefCount() < 1) {\n\t\t\t\t\t\tmesh.destroy();\n\t\t\t\t\t\tthis._meshes[i] = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tincRefMeshes() {\n\t\tif (this._meshes) {\n\t\t\tconst count = this._meshes.length;\n\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tif (this._meshes[i]) {\n\t\t\t\t\tthis._meshes[i].incRefCount();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshes() {\n\t\treturn this._meshes;\n\t}\n\n\tset meshes(value) {\n\t\tthis.decRefMeshes();\n\t\tthis._meshes = value;\n\t\tthis.incRefMeshes();\n\t\tthis.fire('set:meshes', value);\n\t}\n\n}\n\nclass AnimCurve {\n\tconstructor(paths, input, output, interpolation) {\n\t\tthis._paths = paths;\n\t\tthis._input = input;\n\t\tthis._output = output;\n\t\tthis._interpolation = interpolation;\n\t}\n\n\tget paths() {\n\t\treturn this._paths;\n\t}\n\n\tget input() {\n\t\treturn this._input;\n\t}\n\n\tget output() {\n\t\treturn this._output;\n\t}\n\n\tget interpolation() {\n\t\treturn this._interpolation;\n\t}\n\n}\n\nclass AnimData {\n\tconstructor(components, data) {\n\t\tthis._components = components;\n\t\tthis._data = data;\n\t}\n\n\tget components() {\n\t\treturn this._components;\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n}\n\nclass AnimEvents {\n\tconstructor(events) {\n\t\tthis._events = [...events];\n\n\t\tthis._events.sort((a, b) => a.time - b.time);\n\t}\n\n\tget events() {\n\t\treturn this._events;\n\t}\n\n}\n\nclass AnimTrack {\n\tconstructor(name, duration, inputs, outputs, curves, animEvents = new AnimEvents([])) {\n\t\tthis._name = name;\n\t\tthis._duration = duration;\n\t\tthis._inputs = inputs;\n\t\tthis._outputs = outputs;\n\t\tthis._curves = curves;\n\t\tthis._animEvents = animEvents;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget duration() {\n\t\treturn this._duration;\n\t}\n\n\tget inputs() {\n\t\treturn this._inputs;\n\t}\n\n\tget outputs() {\n\t\treturn this._outputs;\n\t}\n\n\tget curves() {\n\t\treturn this._curves;\n\t}\n\n\tget events() {\n\t\treturn this._animEvents.events;\n\t}\n\n\tset events(animEvents) {\n\t\tthis._animEvents = animEvents;\n\t}\n\n\teval(time, snapshot) {\n\t\tsnapshot._time = time;\n\t\tvar inputs = this._inputs;\n\t\tvar outputs = this._outputs;\n\t\tvar curves = this._curves;\n\t\tvar cache = snapshot._cache;\n\t\tvar results = snapshot._results;\n\t\tvar i;\n\n\t\tfor (i = 0; i < inputs.length; ++i) {\n\t\t\tcache[i].update(time, inputs[i]._data);\n\t\t}\n\n\t\tfor (i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar output = outputs[curve._output];\n\t\t\tvar result = results[i];\n\n\t\t\tcache[curve._input].eval(result, curve._interpolation, output);\n\t\t}\n\t}\n\n}\n\nclass AnimBinder {\n\tstatic joinPath(pathSegments, character) {\n\t\tcharacter = character || '.';\n\n\t\tvar escape = function escape(string) {\n\t\t\treturn string.replace(/\\\\/g, '\\\\\\\\').replace(new RegExp('\\\\' + character, 'g'), '\\\\' + character);\n\t\t};\n\n\t\treturn pathSegments.map(escape).join(character);\n\t}\n\n\tstatic splitPath(path, character) {\n\t\tcharacter = character || '.';\n\t\tvar result = [];\n\t\tvar curr = \"\";\n\t\tvar i = 0;\n\n\t\twhile (i < path.length) {\n\t\t\tvar c = path[i++];\n\n\t\t\tif (c === '\\\\' && i < path.length) {\n\t\t\t\tc = path[i++];\n\n\t\t\t\tif (c === '\\\\' || c === character) {\n\t\t\t\t\tcurr += c;\n\t\t\t\t} else {\n\t\t\t\t\tcurr += '\\\\' + c;\n\t\t\t\t}\n\t\t\t} else if (c === character) {\n\t\t\t\tresult.push(curr);\n\t\t\t\tcurr = '';\n\t\t\t} else {\n\t\t\t\tcurr += c;\n\t\t\t}\n\t\t}\n\n\t\tif (curr.length > 0) {\n\t\t\tresult.push(curr);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic encode(entityPath, component, propertyPath) {\n\t\treturn `${Array.isArray(entityPath) ? entityPath.join('/') : entityPath}/${component}/${Array.isArray(propertyPath) ? propertyPath.join('/') : propertyPath}`;\n\t}\n\n\tresolve(path) {\n\t\treturn null;\n\t}\n\n\tunresolve(path) {}\n\n\tupdate(deltaTime) {}\n\n}\n\nconst INTERPOLATION_STEP = 0;\nconst INTERPOLATION_LINEAR = 1;\nconst INTERPOLATION_CUBIC = 2;\n\nconst DEFAULT_LOCALE = 'en-US';\nconst DEFAULT_LOCALE_FALLBACKS = {\n\t'en': 'en-US',\n\t'es': 'en-ES',\n\t'zh': 'zh-CN',\n\t'zh-HK': 'zh-TW',\n\t'zh-TW': 'zh-HK',\n\t'zh-MO': 'zh-HK',\n\t'fr': 'fr-FR',\n\t'de': 'de-DE',\n\t'it': 'it-IT',\n\t'ru': 'ru-RU',\n\t'ja': 'ja-JP'\n};\n\nvar PLURALS = {};\n\nfunction definePluralFn(locales, fn) {\n\tfor (var i = 0, len = locales.length; i < len; i++) {\n\t\tPLURALS[locales[i]] = fn;\n\t}\n}\n\nfunction getLang(locale) {\n\tvar idx = locale.indexOf('-');\n\n\tif (idx !== -1) {\n\t\treturn locale.substring(0, idx);\n\t}\n\n\treturn locale;\n}\n\nfunction replaceLang(locale, desiredLang) {\n\tvar idx = locale.indexOf('-');\n\n\tif (idx !== -1) {\n\t\treturn desiredLang + locale.substring(idx);\n\t}\n\n\treturn desiredLang;\n}\n\nfunction findAvailableLocale(desiredLocale, availableLocales) {\n\tif (availableLocales[desiredLocale]) {\n\t\treturn desiredLocale;\n\t}\n\n\tvar fallback = DEFAULT_LOCALE_FALLBACKS[desiredLocale];\n\n\tif (fallback && availableLocales[fallback]) {\n\t\treturn fallback;\n\t}\n\n\tvar lang = getLang(desiredLocale);\n\tfallback = DEFAULT_LOCALE_FALLBACKS[lang];\n\n\tif (availableLocales[fallback]) {\n\t\treturn fallback;\n\t}\n\n\tif (availableLocales[lang]) {\n\t\treturn lang;\n\t}\n\n\treturn DEFAULT_LOCALE;\n}\n\ndefinePluralFn(['ja', 'ko', 'th', 'vi', 'zh', 'id'], function (n) {\n\treturn 0;\n});\ndefinePluralFn(['fa', 'hi'], function (n) {\n\tif (n >= 0 && n <= 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['fr', 'pt'], function (n) {\n\tif (n >= 0 && n < 2) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['da'], function (n) {\n\tif (n === 1 || !Number.isInteger(n) && n >= 0 && n <= 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['de', 'en', 'it', 'el', 'es', 'tr', 'fi', 'sv', 'nb', 'no', 'ur'], function (n) {\n\tif (n === 1) {\n\t\treturn 0;\n\t}\n\n\treturn 1;\n});\ndefinePluralFn(['ru', 'uk'], function (n) {\n\tif (Number.isInteger(n)) {\n\t\tvar mod10 = n % 10;\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod10 === 1 && mod100 !== 11) {\n\t\t\treturn 0;\n\t\t} else if (mod10 >= 2 && mod10 <= 4 && (mod100 < 12 || mod100 > 14)) {\n\t\t\treturn 1;\n\t\t} else if (mod10 === 0 || mod10 >= 5 && mod10 <= 9 || mod100 >= 11 && mod100 <= 14) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\treturn 3;\n});\ndefinePluralFn(['pl'], function (n) {\n\tif (Number.isInteger(n)) {\n\t\tif (n === 1) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar mod10 = n % 10;\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod10 >= 2 && mod10 <= 4 && (mod100 < 12 || mod100 > 14)) {\n\t\t\treturn 1;\n\t\t} else if (mod10 >= 0 && mod10 <= 1 || mod10 >= 5 && mod10 <= 9 || mod100 >= 12 && mod100 <= 14) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\treturn 3;\n});\ndefinePluralFn(['ar'], function (n) {\n\tif (n === 0) {\n\t\treturn 0;\n\t} else if (n === 1) {\n\t\treturn 1;\n\t} else if (n === 2) {\n\t\treturn 2;\n\t}\n\n\tif (Number.isInteger(n)) {\n\t\tvar mod100 = n % 100;\n\n\t\tif (mod100 >= 3 && mod100 <= 10) {\n\t\t\treturn 3;\n\t\t} else if (mod100 >= 11 && mod100 <= 99) {\n\t\t\treturn 4;\n\t\t}\n\t}\n\n\treturn 5;\n});\nvar DEFAULT_PLURAL_FN = PLURALS[getLang(DEFAULT_LOCALE)];\n\nfunction getPluralFn(lang) {\n\treturn PLURALS[lang] || DEFAULT_PLURAL_FN;\n}\n\nconst ABSOLUTE_URL = new RegExp('^' + '\\\\s*' + '(?:' + '(?:' + '[a-z]+[a-z0-9\\\\-\\\\+\\\\.]*' + ':' + ')?' + '//' + '|' + 'data:' + '|blob:' + ')', 'i');\nconst ASSET_ANIMATION = 'animation';\nconst ASSET_AUDIO = 'audio';\nconst ASSET_IMAGE = 'image';\nconst ASSET_JSON = 'json';\nconst ASSET_MODEL = 'model';\nconst ASSET_MATERIAL = 'material';\nconst ASSET_TEXT = 'text';\nconst ASSET_TEXTURE = 'texture';\nconst ASSET_CUBEMAP = 'cubemap';\nconst ASSET_SHADER = 'shader';\nconst ASSET_CSS = 'css';\nconst ASSET_HTML = 'html';\nconst ASSET_SCRIPT = 'script';\nconst ASSET_CONTAINER = 'container';\n\nconst properties$2 = [];\n\nclass AssetVariants {\n\tconstructor(asset) {\n\t\tthis.asset = asset;\n\t}\n\n\tclear() {\n\t\tfor (let i = 0; i < properties$2.length; i++) this[properties$2[i]] = null;\n\t}\n\n}\n\nfunction defineVariantProperty(name) {\n\tconst field = '_' + name;\n\tproperties$2.push(field);\n\tObject.defineProperty(AssetVariants.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[field] || null;\n\t\t},\n\t\tset: function (value) {\n\t\t\tconst fieldAsBool = !!this[field];\n\t\t\tconst valueAsBool = !!value;\n\n\t\t\tif (fieldAsBool !== valueAsBool || this[field] && value && this[field].hash !== value.hash) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis[field] = {\n\t\t\t\t\t\turl: value.url,\n\t\t\t\t\t\tfilename: value.filename,\n\t\t\t\t\t\tsize: value.size,\n\t\t\t\t\t\thash: value.hash,\n\t\t\t\t\t\topt: value.opt || 0\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis[field] = null;\n\t\t\t\t}\n\n\t\t\t\tif (this.asset.file) {\n\t\t\t\t\tthis.asset.fire('change', this.asset, 'file', this.asset._file, this.asset._file);\n\t\t\t\t\tthis.asset.reload();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineVariantProperty('dxt');\ndefineVariantProperty('pvr');\ndefineVariantProperty('etc1');\ndefineVariantProperty('etc2');\ndefineVariantProperty('basis');\n\nvar assetIdCounter = -1;\nconst VARIANT_SUPPORT = {\n\tpvr: 'extCompressedTexturePVRTC',\n\tdxt: 'extCompressedTextureS3TC',\n\tetc2: 'extCompressedTextureETC',\n\tetc1: 'extCompressedTextureETC1',\n\tbasis: 'canvas'\n};\nconst VARIANT_DEFAULT_PRIORITY = ['pvr', 'dxt', 'etc2', 'etc1', 'basis'];\n\nclass Asset extends EventHandler {\n\tconstructor(name, type, file, data, options) {\n\t\tsuper();\n\t\tthis._id = assetIdCounter--;\n\t\tthis.name = name || '';\n\t\tthis.type = type;\n\t\tthis.tags = new Tags(this);\n\t\tthis._preload = false;\n\t\tthis.variants = new AssetVariants(this);\n\t\tthis._file = null;\n\t\tthis._data = data || {};\n\t\tthis.options = options || {};\n\t\tthis._resources = [];\n\t\tthis._i18n = {};\n\t\tthis.loaded = false;\n\t\tthis.loading = false;\n\t\tthis.registry = null;\n\t\tif (file) this.file = file;\n\t}\n\n\tgetFileUrl() {\n\t\tvar file = this.getPreferredFile();\n\t\tif (!file || !file.url) return null;\n\t\tvar url = file.url;\n\t\tif (this.registry && this.registry.prefix && !ABSOLUTE_URL.test(url)) url = this.registry.prefix + url;\n\n\t\tif (this.type !== 'script' && file.hash) {\n\t\t\tvar separator = url.indexOf('?') !== -1 ? '&' : '?';\n\t\t\turl += separator + 't=' + file.hash;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tgetPreferredFile() {\n\t\tif (!this.file) return null;\n\n\t\tif (this.type === 'texture' || this.type === 'textureatlas' || this.type === 'bundle') {\n\t\t\tvar _this$registry, _this$registry$_loade;\n\n\t\t\tvar app = ((_this$registry = this.registry) == null ? void 0 : (_this$registry$_loade = _this$registry._loader) == null ? void 0 : _this$registry$_loade._app) || getApplication();\n\t\t\tvar device = app == null ? void 0 : app.graphicsDevice;\n\n\t\t\tif (device) {\n\t\t\t\tfor (var i = 0, len = VARIANT_DEFAULT_PRIORITY.length; i < len; i++) {\n\t\t\t\t\tvar variant = VARIANT_DEFAULT_PRIORITY[i];\n\t\t\t\t\tif (!device[VARIANT_SUPPORT[variant]]) continue;\n\n\t\t\t\t\tif (this.file.variants[variant]) {\n\t\t\t\t\t\treturn this.file.variants[variant];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (app.enableBundles) {\n\t\t\t\t\t\tvar bundles = app.bundles.listBundlesForAsset(this);\n\t\t\t\t\t\tif (!bundles) continue;\n\n\t\t\t\t\t\tfor (var j = 0, len2 = bundles.length; j < len2; j++) {\n\t\t\t\t\t\t\tif (bundles[j].file && bundles[j].file.variants && bundles[j].file.variants[variant]) {\n\t\t\t\t\t\t\t\treturn this.file;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.file;\n\t}\n\n\tgetAbsoluteUrl(relativePath) {\n\t\tif (relativePath.startsWith('blob:') || relativePath.startsWith('data:')) {\n\t\t\treturn relativePath;\n\t\t}\n\n\t\tvar base = path.getDirectory(this.file.url);\n\t\treturn path.join(base, relativePath);\n\t}\n\n\tgetLocalizedAssetId(locale) {\n\t\tlocale = findAvailableLocale(locale, this._i18n);\n\t\treturn this._i18n[locale] || null;\n\t}\n\n\taddLocalizedAssetId(locale, assetId) {\n\t\tthis._i18n[locale] = assetId;\n\t\tthis.fire('add:localized', locale, assetId);\n\t}\n\n\tremoveLocalizedAssetId(locale) {\n\t\tvar assetId = this._i18n[locale];\n\n\t\tif (assetId) {\n\t\t\tdelete this._i18n[locale];\n\t\t\tthis.fire('remove:localized', locale, assetId);\n\t\t}\n\t}\n\n\tready(callback, scope) {\n\t\tscope = scope || this;\n\n\t\tif (this.resource) {\n\t\t\tcallback.call(scope, this);\n\t\t} else {\n\t\t\tthis.once(\"load\", function (asset) {\n\t\t\t\tcallback.call(scope, asset);\n\t\t\t});\n\t\t}\n\t}\n\n\treload() {\n\t\tif (this.loaded) {\n\t\t\tthis.loaded = false;\n\t\t\tthis.registry.load(this);\n\t\t}\n\t}\n\n\tunload() {\n\t\tif (!this.loaded && this._resources.length === 0) return;\n\t\tthis.fire('unload', this);\n\t\tthis.registry.fire('unload:' + this.id, this);\n\t\tvar old = this._resources;\n\t\tthis.resources = [];\n\t\tthis.loaded = false;\n\n\t\tif (this.file) {\n\t\t\tthis.registry._loader.clearCache(this.getFileUrl(), this.type);\n\t\t}\n\n\t\tfor (var i = 0; i < old.length; ++i) {\n\t\t\tvar resource = old[i];\n\n\t\t\tif (resource && resource.destroy) {\n\t\t\t\tresource.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget file() {\n\t\treturn this._file;\n\t}\n\n\tset file(value) {\n\t\tvar key;\n\t\tvar valueAsBool = !!value;\n\t\tvar fileAsBool = !!this._file;\n\n\t\tif (valueAsBool !== fileAsBool || value && this._file && value.hash !== this._file) {\n\t\t\tif (value) {\n\t\t\t\tif (!this._file) this._file = {};\n\t\t\t\tthis._file.url = value.url;\n\t\t\t\tthis._file.filename = value.filename;\n\t\t\t\tthis._file.hash = value.hash;\n\t\t\t\tthis._file.size = value.size;\n\t\t\t\tthis._file.variants = this.variants;\n\t\t\t\tthis._file.contents = value.contents;\n\n\t\t\t\tif (value.hasOwnProperty('variants')) {\n\t\t\t\t\tthis.variants.clear();\n\n\t\t\t\t\tif (value.variants) {\n\t\t\t\t\t\tfor (key in value.variants) {\n\t\t\t\t\t\t\tif (!value.variants[key]) continue;\n\t\t\t\t\t\t\tthis.variants[key] = value.variants[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.fire('change', this, 'file', this._file, this._file);\n\t\t\t\tthis.reload();\n\t\t\t} else {\n\t\t\t\tthis._file = null;\n\t\t\t\tthis.variants.clear();\n\t\t\t}\n\t\t} else if (value && this._file && value.hasOwnProperty('variants')) {\n\t\t\tthis.variants.clear();\n\n\t\t\tif (value.variants) {\n\t\t\t\tfor (key in value.variants) {\n\t\t\t\t\tif (!value.variants[key]) continue;\n\t\t\t\t\tthis.variants[key] = value.variants[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\tset data(value) {\n\t\tvar old = this._data;\n\t\tthis._data = value;\n\n\t\tif (value !== old) {\n\t\t\tthis.fire('change', this, 'data', value, old);\n\t\t\tif (this.loaded) this.registry._loader.patch(this, this.registry);\n\t\t}\n\t}\n\n\tget resource() {\n\t\treturn this._resources[0];\n\t}\n\n\tset resource(value) {\n\t\tvar _old = this._resources[0];\n\t\tthis._resources[0] = value;\n\t\tthis.fire('change', this, 'resource', value, _old);\n\t}\n\n\tget resources() {\n\t\treturn this._resources;\n\t}\n\n\tset resources(value) {\n\t\tvar _old = this._resources;\n\t\tthis._resources = value;\n\t\tthis.fire('change', this, 'resources', value, _old);\n\t}\n\n\tget preload() {\n\t\treturn this._preload;\n\t}\n\n\tset preload(value) {\n\t\tvalue = !!value;\n\t\tif (this._preload === value) return;\n\t\tthis._preload = value;\n\t\tif (this._preload && !this.loaded && !this.loading && this.registry) this.registry.load(this);\n\t}\n\n\tget loadFaces() {\n\t\treturn this._loadFaces;\n\t}\n\n\tset loadFaces(value) {\n\t\tvalue = !!value;\n\n\t\tif (!this.hasOwnProperty('_loadFaces') || value !== this._loadFaces) {\n\t\t\tthis._loadFaces = value;\n\t\t\tif (this.loaded) this.registry._loader.patch(this, this.registry);\n\t\t}\n\t}\n\n}\n\nclass GlbResources {\n\tconstructor(gltf) {\n\t\tthis.gltf = gltf;\n\t\tthis.nodes = null;\n\t\tthis.scenes = null;\n\t\tthis.animations = null;\n\t\tthis.textures = null;\n\t\tthis.materials = null;\n\t\tthis.renders = null;\n\t\tthis.skins = null;\n\t\tthis.lights = null;\n\t}\n\n\tdestroy() {\n\t\tif (this.renders) {\n\t\t\tthis.renders.forEach(render => {\n\t\t\t\trender.meshes = null;\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nconst isDataURI = function isDataURI(uri) {\n\treturn /^data:.*,.*$/i.test(uri);\n};\n\nconst getDataURIMimeType = function getDataURIMimeType(uri) {\n\treturn uri.substring(uri.indexOf(\":\") + 1, uri.indexOf(\";\"));\n};\n\nconst getNumComponents = function getNumComponents(accessorType) {\n\tswitch (accessorType) {\n\t\tcase 'SCALAR':\n\t\t\treturn 1;\n\n\t\tcase 'VEC2':\n\t\t\treturn 2;\n\n\t\tcase 'VEC3':\n\t\t\treturn 3;\n\n\t\tcase 'VEC4':\n\t\t\treturn 4;\n\n\t\tcase 'MAT2':\n\t\t\treturn 4;\n\n\t\tcase 'MAT3':\n\t\t\treturn 9;\n\n\t\tcase 'MAT4':\n\t\t\treturn 16;\n\n\t\tdefault:\n\t\t\treturn 3;\n\t}\n};\n\nconst getComponentType = function getComponentType(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn TYPE_INT8;\n\n\t\tcase 5121:\n\t\t\treturn TYPE_UINT8;\n\n\t\tcase 5122:\n\t\t\treturn TYPE_INT16;\n\n\t\tcase 5123:\n\t\t\treturn TYPE_UINT16;\n\n\t\tcase 5124:\n\t\t\treturn TYPE_INT32;\n\n\t\tcase 5125:\n\t\t\treturn TYPE_UINT32;\n\n\t\tcase 5126:\n\t\t\treturn TYPE_FLOAT32;\n\n\t\tdefault:\n\t\t\treturn 0;\n\t}\n};\n\nconst getComponentSizeInBytes = function getComponentSizeInBytes(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn 1;\n\n\t\tcase 5121:\n\t\t\treturn 1;\n\n\t\tcase 5122:\n\t\t\treturn 2;\n\n\t\tcase 5123:\n\t\t\treturn 2;\n\n\t\tcase 5124:\n\t\t\treturn 4;\n\n\t\tcase 5125:\n\t\t\treturn 4;\n\n\t\tcase 5126:\n\t\t\treturn 4;\n\n\t\tdefault:\n\t\t\treturn 0;\n\t}\n};\n\nconst getComponentDataType = function getComponentDataType(componentType) {\n\tswitch (componentType) {\n\t\tcase 5120:\n\t\t\treturn Int8Array;\n\n\t\tcase 5121:\n\t\t\treturn Uint8Array;\n\n\t\tcase 5122:\n\t\t\treturn Int16Array;\n\n\t\tcase 5123:\n\t\t\treturn Uint16Array;\n\n\t\tcase 5124:\n\t\t\treturn Int32Array;\n\n\t\tcase 5125:\n\t\t\treturn Uint32Array;\n\n\t\tcase 5126:\n\t\t\treturn Float32Array;\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n\nconst gltfToEngineSemanticMap = {\n\t'POSITION': SEMANTIC_POSITION,\n\t'NORMAL': SEMANTIC_NORMAL,\n\t'TANGENT': SEMANTIC_TANGENT,\n\t'COLOR_0': SEMANTIC_COLOR,\n\t'JOINTS_0': SEMANTIC_BLENDINDICES,\n\t'WEIGHTS_0': SEMANTIC_BLENDWEIGHT,\n\t'TEXCOORD_0': SEMANTIC_TEXCOORD0,\n\t'TEXCOORD_1': SEMANTIC_TEXCOORD1\n};\n\nconst getAccessorData = function getAccessorData(gltfAccessor, bufferViews) {\n\tconst numComponents = getNumComponents(gltfAccessor.type);\n\tconst dataType = getComponentDataType(gltfAccessor.componentType);\n\n\tif (!dataType) {\n\t\treturn null;\n\t}\n\n\tlet result;\n\n\tif (gltfAccessor.sparse) {\n\t\tconst sparse = gltfAccessor.sparse;\n\t\tconst indicesAccessor = {\n\t\t\tcount: sparse.count,\n\t\t\ttype: \"SCALAR\"\n\t\t};\n\t\tconst indices = getAccessorData(Object.assign(indicesAccessor, sparse.indices), bufferViews);\n\t\tconst valuesAccessor = {\n\t\t\tcount: sparse.count,\n\t\t\ttype: gltfAccessor.scalar,\n\t\t\tcomponentType: gltfAccessor.componentType\n\t\t};\n\t\tconst values = getAccessorData(Object.assign(valuesAccessor, sparse.values), bufferViews);\n\n\t\tif (gltfAccessor.hasOwnProperty('bufferView')) {\n\t\t\tconst baseAccessor = {\n\t\t\t\tbufferView: gltfAccessor.bufferView,\n\t\t\t\tbyteOffset: gltfAccessor.byteOffset,\n\t\t\t\tcomponentType: gltfAccessor.componentType,\n\t\t\t\tcount: gltfAccessor.count,\n\t\t\t\ttype: gltfAccessor.type\n\t\t\t};\n\t\t\tresult = getAccessorData(baseAccessor, bufferViews).slice();\n\t\t} else {\n\t\t\tresult = new dataType(gltfAccessor.count * numComponents);\n\t\t}\n\n\t\tfor (let i = 0; i < sparse.count; ++i) {\n\t\t\tconst targetIndex = indices[i];\n\n\t\t\tfor (let j = 0; j < numComponents; ++j) {\n\t\t\t\tresult[targetIndex * numComponents + j] = values[i * numComponents + j];\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst bufferView = bufferViews[gltfAccessor.bufferView];\n\t\tresult = new dataType(bufferView.buffer, bufferView.byteOffset + (gltfAccessor.byteOffset || 0), gltfAccessor.count * numComponents);\n\t}\n\n\treturn result;\n};\n\nconst getPrimitiveType = function getPrimitiveType(primitive) {\n\tif (!primitive.hasOwnProperty('mode')) {\n\t\treturn PRIMITIVE_TRIANGLES;\n\t}\n\n\tswitch (primitive.mode) {\n\t\tcase 0:\n\t\t\treturn PRIMITIVE_POINTS;\n\n\t\tcase 1:\n\t\t\treturn PRIMITIVE_LINES;\n\n\t\tcase 2:\n\t\t\treturn PRIMITIVE_LINELOOP;\n\n\t\tcase 3:\n\t\t\treturn PRIMITIVE_LINESTRIP;\n\n\t\tcase 4:\n\t\t\treturn PRIMITIVE_TRIANGLES;\n\n\t\tcase 5:\n\t\t\treturn PRIMITIVE_TRISTRIP;\n\n\t\tcase 6:\n\t\t\treturn PRIMITIVE_TRIFAN;\n\n\t\tdefault:\n\t\t\treturn PRIMITIVE_TRIANGLES;\n\t}\n};\n\nconst generateIndices = function generateIndices(numVertices) {\n\tconst dummyIndices = new Uint16Array(numVertices);\n\n\tfor (let i = 0; i < numVertices; i++) {\n\t\tdummyIndices[i] = i;\n\t}\n\n\treturn dummyIndices;\n};\n\nconst generateNormals = function generateNormals(sourceDesc, indices) {\n\tconst p = sourceDesc[SEMANTIC_POSITION];\n\n\tif (!p || p.components !== 3) {\n\t\treturn;\n\t}\n\n\tlet positions;\n\n\tif (p.size !== p.stride) {\n\t\tconst srcStride = p.stride / typedArrayTypesByteSize[p.type];\n\t\tconst src = new typedArrayTypes[p.type](p.buffer, p.offset, p.count * srcStride);\n\t\tpositions = new typedArrayTypes[p.type](p.count * 3);\n\n\t\tfor (let i = 0; i < p.count; ++i) {\n\t\t\tpositions[i * 3 + 0] = src[i * srcStride + 0];\n\t\t\tpositions[i * 3 + 1] = src[i * srcStride + 1];\n\t\t\tpositions[i * 3 + 2] = src[i * srcStride + 2];\n\t\t}\n\t} else {\n\t\tpositions = new typedArrayTypes[p.type](p.buffer, p.offset, p.count * 3);\n\t}\n\n\tconst numVertices = p.count;\n\n\tif (!indices) {\n\t\tindices = generateIndices(numVertices);\n\t}\n\n\tconst normalsTemp = calculateNormals(positions, indices);\n\tconst normals = new Float32Array(normalsTemp.length);\n\tnormals.set(normalsTemp);\n\tsourceDesc[SEMANTIC_NORMAL] = {\n\t\tbuffer: normals.buffer,\n\t\tsize: 12,\n\t\toffset: 0,\n\t\tstride: 12,\n\t\tcount: numVertices,\n\t\tcomponents: 3,\n\t\ttype: TYPE_FLOAT32\n\t};\n};\n\nconst flipTexCoordVs = function flipTexCoordVs(vertexBuffer) {\n\tlet i, j;\n\tconst floatOffsets = [];\n\tconst shortOffsets = [];\n\tconst byteOffsets = [];\n\n\tfor (i = 0; i < vertexBuffer.format.elements.length; ++i) {\n\t\tconst element = vertexBuffer.format.elements[i];\n\n\t\tif (element.name === SEMANTIC_TEXCOORD0 || element.name === SEMANTIC_TEXCOORD1) {\n\t\t\tswitch (element.dataType) {\n\t\t\t\tcase TYPE_FLOAT32:\n\t\t\t\t\tfloatOffsets.push({\n\t\t\t\t\t\toffset: element.offset / 4 + 1,\n\t\t\t\t\t\tstride: element.stride / 4\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TYPE_UINT16:\n\t\t\t\t\tshortOffsets.push({\n\t\t\t\t\t\toffset: element.offset / 2 + 1,\n\t\t\t\t\t\tstride: element.stride / 2\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TYPE_UINT8:\n\t\t\t\t\tbyteOffsets.push({\n\t\t\t\t\t\toffset: element.offset + 1,\n\t\t\t\t\t\tstride: element.stride\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst flip = function flip(offsets, type, one) {\n\t\tconst typedArray = new type(vertexBuffer.storage);\n\n\t\tfor (i = 0; i < offsets.length; ++i) {\n\t\t\tlet index = offsets[i].offset;\n\t\t\tconst stride = offsets[i].stride;\n\n\t\t\tfor (j = 0; j < vertexBuffer.numVertices; ++j) {\n\t\t\t\ttypedArray[index] = one - typedArray[index];\n\t\t\t\tindex += stride;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (floatOffsets.length > 0) {\n\t\tflip(floatOffsets, Float32Array, 1.0);\n\t}\n\n\tif (shortOffsets.length > 0) {\n\t\tflip(shortOffsets, Uint16Array, 65535);\n\t}\n\n\tif (byteOffsets.length > 0) {\n\t\tflip(byteOffsets, Uint8Array, 255);\n\t}\n};\n\nconst cloneTexture = function cloneTexture(texture) {\n\tconst shallowCopyLevels = function shallowCopyLevels(texture) {\n\t\tconst result = [];\n\n\t\tfor (let mip = 0; mip < texture._levels.length; ++mip) {\n\t\t\tlet level = [];\n\n\t\t\tif (texture.cubemap) {\n\t\t\t\tfor (let face = 0; face < 6; ++face) {\n\t\t\t\t\tlevel.push(texture._levels[mip][face]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlevel = texture._levels[mip];\n\t\t\t}\n\n\t\t\tresult.push(level);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconst result = new Texture(texture.device, texture);\n\tresult._levels = shallowCopyLevels(texture);\n\treturn result;\n};\n\nconst cloneTextureAsset = function cloneTextureAsset(src) {\n\tconst result = new Asset(src.name + '_clone', src.type, src.file, src.data, src.options);\n\tresult.loaded = true;\n\tresult.resource = cloneTexture(src.resource);\n\tsrc.registry.add(result);\n\treturn result;\n};\n\nconst createVertexBufferInternal = function createVertexBufferInternal(device, sourceDesc, disableFlipV) {\n\tconst positionDesc = sourceDesc[SEMANTIC_POSITION];\n\n\tif (!positionDesc) {\n\t\treturn null;\n\t}\n\n\tconst numVertices = positionDesc.count;\n\tconst vertexDesc = [];\n\n\tfor (const semantic in sourceDesc) {\n\t\tif (sourceDesc.hasOwnProperty(semantic)) {\n\t\t\tvertexDesc.push({\n\t\t\t\tsemantic: semantic,\n\t\t\t\tcomponents: sourceDesc[semantic].components,\n\t\t\t\ttype: sourceDesc[semantic].type,\n\t\t\t\tnormalize: !!sourceDesc[semantic].normalize\n\t\t\t});\n\t\t}\n\t}\n\n\tconst elementOrder = [SEMANTIC_POSITION, SEMANTIC_NORMAL, SEMANTIC_TANGENT, SEMANTIC_COLOR, SEMANTIC_BLENDINDICES, SEMANTIC_BLENDWEIGHT, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1];\n\tvertexDesc.sort(function (lhs, rhs) {\n\t\tconst lhsOrder = elementOrder.indexOf(lhs.semantic);\n\t\tconst rhsOrder = elementOrder.indexOf(rhs.semantic);\n\t\treturn lhsOrder < rhsOrder ? -1 : rhsOrder < lhsOrder ? 1 : 0;\n\t});\n\tlet i, j, k;\n\tlet source, target, sourceOffset;\n\tconst vertexFormat = new VertexFormat(device, vertexDesc);\n\tlet isCorrectlyInterleaved = true;\n\n\tfor (i = 0; i < vertexFormat.elements.length; ++i) {\n\t\ttarget = vertexFormat.elements[i];\n\t\tsource = sourceDesc[target.name];\n\t\tsourceOffset = source.offset - positionDesc.offset;\n\n\t\tif (source.buffer !== positionDesc.buffer || source.stride !== target.stride || source.size !== target.size || sourceOffset !== target.offset) {\n\t\t\tisCorrectlyInterleaved = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst vertexBuffer = new VertexBuffer(device, vertexFormat, numVertices, BUFFER_STATIC);\n\tconst vertexData = vertexBuffer.lock();\n\tconst targetArray = new Uint32Array(vertexData);\n\tlet sourceArray;\n\n\tif (isCorrectlyInterleaved) {\n\t\tsourceArray = new Uint32Array(positionDesc.buffer, positionDesc.offset, numVertices * vertexBuffer.format.size / 4);\n\t\ttargetArray.set(sourceArray);\n\t} else {\n\t\tlet targetStride, sourceStride;\n\n\t\tfor (i = 0; i < vertexBuffer.format.elements.length; ++i) {\n\t\t\ttarget = vertexBuffer.format.elements[i];\n\t\t\ttargetStride = target.stride / 4;\n\t\t\tsource = sourceDesc[target.name];\n\t\t\tsourceStride = source.stride / 4;\n\t\t\tsourceArray = new Uint32Array(source.buffer, source.offset, (source.count - 1) * sourceStride + source.size / 4);\n\t\t\tlet src = 0;\n\t\t\tlet dst = target.offset / 4;\n\t\t\tconst kend = Math.floor((source.size + 3) / 4);\n\n\t\t\tfor (j = 0; j < numVertices; ++j) {\n\t\t\t\tfor (k = 0; k < kend; ++k) {\n\t\t\t\t\ttargetArray[dst + k] = sourceArray[src + k];\n\t\t\t\t}\n\n\t\t\t\tsrc += sourceStride;\n\t\t\t\tdst += targetStride;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!disableFlipV) {\n\t\tflipTexCoordVs(vertexBuffer);\n\t}\n\n\tvertexBuffer.unlock();\n\treturn vertexBuffer;\n};\n\nconst createVertexBuffer = function createVertexBuffer(device, attributes, indices, accessors, bufferViews, disableFlipV, vertexBufferDict) {\n\tconst useAttributes = {};\n\tconst attribIds = [];\n\n\tfor (const attrib in attributes) {\n\t\tif (attributes.hasOwnProperty(attrib) && gltfToEngineSemanticMap.hasOwnProperty(attrib)) {\n\t\t\tuseAttributes[attrib] = attributes[attrib];\n\t\t\tattribIds.push(attrib + \":\" + attributes[attrib]);\n\t\t}\n\t}\n\n\tattribIds.sort();\n\tconst vbKey = attribIds.join();\n\tlet vb = vertexBufferDict[vbKey];\n\n\tif (!vb) {\n\t\tconst sourceDesc = {};\n\n\t\tfor (const attrib in useAttributes) {\n\t\t\tconst accessor = accessors[attributes[attrib]];\n\t\t\tconst accessorData = getAccessorData(accessor, bufferViews);\n\t\t\tconst bufferView = bufferViews[accessor.bufferView];\n\t\t\tconst semantic = gltfToEngineSemanticMap[attrib];\n\t\t\tconst size = getNumComponents(accessor.type) * getComponentSizeInBytes(accessor.componentType);\n\t\t\tconst stride = bufferView.hasOwnProperty('byteStride') ? bufferView.byteStride : size;\n\t\t\tsourceDesc[semantic] = {\n\t\t\t\tbuffer: accessorData.buffer,\n\t\t\t\tsize: size,\n\t\t\t\toffset: accessorData.byteOffset,\n\t\t\t\tstride: stride,\n\t\t\t\tcount: accessor.count,\n\t\t\t\tcomponents: getNumComponents(accessor.type),\n\t\t\t\ttype: getComponentType(accessor.componentType),\n\t\t\t\tnormalize: accessor.normalized\n\t\t\t};\n\t\t}\n\n\t\tif (!sourceDesc.hasOwnProperty(SEMANTIC_NORMAL)) {\n\t\t\tgenerateNormals(sourceDesc, indices);\n\t\t}\n\n\t\tvb = createVertexBufferInternal(device, sourceDesc, disableFlipV);\n\t\tvertexBufferDict[vbKey] = vb;\n\t}\n\n\treturn vb;\n};\n\nconst createVertexBufferDraco = function createVertexBufferDraco(device, outputGeometry, extDraco, decoder, decoderModule, indices, disableFlipV) {\n\tconst numPoints = outputGeometry.num_points();\n\n\tconst extractDracoAttributeInfo = function extractDracoAttributeInfo(uniqueId) {\n\t\tconst attribute = decoder.GetAttributeByUniqueId(outputGeometry, uniqueId);\n\t\tconst numValues = numPoints * attribute.num_components();\n\t\tconst dracoFormat = attribute.data_type();\n\t\tlet ptr, values, componentSizeInBytes, storageType;\n\n\t\tswitch (dracoFormat) {\n\t\t\tcase decoderModule.DT_UINT8:\n\t\t\t\tstorageType = TYPE_UINT8;\n\t\t\t\tcomponentSizeInBytes = 1;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_UINT8, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Uint8Array(decoderModule.HEAPU8.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\n\t\t\tcase decoderModule.DT_UINT16:\n\t\t\t\tstorageType = TYPE_UINT16;\n\t\t\t\tcomponentSizeInBytes = 2;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_UINT16, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Uint16Array(decoderModule.HEAPU16.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\n\t\t\tcase decoderModule.DT_FLOAT32:\n\t\t\tdefault:\n\t\t\t\tstorageType = TYPE_FLOAT32;\n\t\t\t\tcomponentSizeInBytes = 4;\n\t\t\t\tptr = decoderModule._malloc(numValues * componentSizeInBytes);\n\t\t\t\tdecoder.GetAttributeDataArrayForAllPoints(outputGeometry, attribute, decoderModule.DT_FLOAT32, numValues * componentSizeInBytes, ptr);\n\t\t\t\tvalues = new Float32Array(decoderModule.HEAPF32.buffer, ptr, numValues).slice();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tdecoderModule._free(ptr);\n\n\t\treturn {\n\t\t\tvalues: values,\n\t\t\tnumComponents: attribute.num_components(),\n\t\t\tcomponentSizeInBytes: componentSizeInBytes,\n\t\t\tstorageType: storageType,\n\t\t\tnormalized: attribute.normalized()\n\t\t};\n\t};\n\n\tconst sourceDesc = {};\n\tconst attributes = extDraco.attributes;\n\n\tfor (const attrib in attributes) {\n\t\tif (attributes.hasOwnProperty(attrib) && gltfToEngineSemanticMap.hasOwnProperty(attrib)) {\n\t\t\tconst semantic = gltfToEngineSemanticMap[attrib];\n\t\t\tconst attributeInfo = extractDracoAttributeInfo(attributes[attrib]);\n\t\t\tconst size = attributeInfo.numComponents * attributeInfo.componentSizeInBytes;\n\t\t\tsourceDesc[semantic] = {\n\t\t\t\tvalues: attributeInfo.values,\n\t\t\t\tbuffer: attributeInfo.values.buffer,\n\t\t\t\tsize: size,\n\t\t\t\toffset: 0,\n\t\t\t\tstride: size,\n\t\t\t\tcount: numPoints,\n\t\t\t\tcomponents: attributeInfo.numComponents,\n\t\t\t\ttype: attributeInfo.storageType,\n\t\t\t\tnormalize: attributeInfo.normalized\n\t\t\t};\n\t\t}\n\t}\n\n\tif (!sourceDesc.hasOwnProperty(SEMANTIC_NORMAL)) {\n\t\tgenerateNormals(sourceDesc, indices);\n\t}\n\n\treturn createVertexBufferInternal(device, sourceDesc, disableFlipV);\n};\n\nconst createSkin = function createSkin(device, gltfSkin, accessors, bufferViews, nodes, glbSkins) {\n\tlet i, j, bindMatrix;\n\tconst joints = gltfSkin.joints;\n\tconst numJoints = joints.length;\n\tconst ibp = [];\n\n\tif (gltfSkin.hasOwnProperty('inverseBindMatrices')) {\n\t\tconst inverseBindMatrices = gltfSkin.inverseBindMatrices;\n\t\tconst ibmData = getAccessorData(accessors[inverseBindMatrices], bufferViews);\n\t\tconst ibmValues = [];\n\n\t\tfor (i = 0; i < numJoints; i++) {\n\t\t\tfor (j = 0; j < 16; j++) {\n\t\t\t\tibmValues[j] = ibmData[i * 16 + j];\n\t\t\t}\n\n\t\t\tbindMatrix = new Mat4();\n\t\t\tbindMatrix.set(ibmValues);\n\t\t\tibp.push(bindMatrix);\n\t\t}\n\t} else {\n\t\tfor (i = 0; i < numJoints; i++) {\n\t\t\tbindMatrix = new Mat4();\n\t\t\tibp.push(bindMatrix);\n\t\t}\n\t}\n\n\tconst boneNames = [];\n\n\tfor (i = 0; i < numJoints; i++) {\n\t\tboneNames[i] = nodes[joints[i]].name;\n\t}\n\n\tconst key = boneNames.join(\"#\");\n\tlet skin = glbSkins.get(key);\n\n\tif (!skin) {\n\t\tskin = new Skin(device, ibp, boneNames);\n\t\tglbSkins.set(key, skin);\n\t}\n\n\treturn skin;\n};\n\nconst tempMat = new Mat4();\nconst tempVec = new Vec3();\n\nconst createMesh = function createMesh(device, gltfMesh, accessors, bufferViews, callback, disableFlipV, vertexBufferDict) {\n\tconst meshes = [];\n\tgltfMesh.primitives.forEach(function (primitive) {\n\t\tlet primitiveType, vertexBuffer, numIndices;\n\t\tlet indices = null;\n\t\tlet canUseMorph = true;\n\n\t\tif (primitive.hasOwnProperty('extensions')) {\n\t\t\tconst extensions = primitive.extensions;\n\n\t\t\tif (extensions.hasOwnProperty('KHR_draco_mesh_compression')) {\n\t\t\t\tconst decoderModule = window.DracoDecoderModule;\n\n\t\t\t\tif (decoderModule) {\n\t\t\t\t\tconst extDraco = extensions.KHR_draco_mesh_compression;\n\n\t\t\t\t\tif (extDraco.hasOwnProperty('attributes')) {\n\t\t\t\t\t\tconst uint8Buffer = bufferViews[extDraco.bufferView];\n\t\t\t\t\t\tconst buffer = new decoderModule.DecoderBuffer();\n\t\t\t\t\t\tbuffer.Init(uint8Buffer, uint8Buffer.length);\n\t\t\t\t\t\tconst decoder = new decoderModule.Decoder();\n\t\t\t\t\t\tconst geometryType = decoder.GetEncodedGeometryType(buffer);\n\t\t\t\t\t\tlet outputGeometry, status;\n\n\t\t\t\t\t\tswitch (geometryType) {\n\t\t\t\t\t\t\tcase decoderModule.POINT_CLOUD:\n\t\t\t\t\t\t\t\tprimitiveType = PRIMITIVE_POINTS;\n\t\t\t\t\t\t\t\toutputGeometry = new decoderModule.PointCloud();\n\t\t\t\t\t\t\t\tstatus = decoder.DecodeBufferToPointCloud(buffer, outputGeometry);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase decoderModule.TRIANGULAR_MESH:\n\t\t\t\t\t\t\t\tprimitiveType = PRIMITIVE_TRIANGLES;\n\t\t\t\t\t\t\t\toutputGeometry = new decoderModule.Mesh();\n\t\t\t\t\t\t\t\tstatus = decoder.DecodeBufferToMesh(buffer, outputGeometry);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase decoderModule.INVALID_GEOMETRY_TYPE:\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!status || !status.ok() || outputGeometry.ptr == 0) {\n\t\t\t\t\t\t\tcallback(\"Failed to decode draco compressed asset: \" + (status ? status.error_msg() : 'Mesh asset - invalid draco compressed geometry type: ' + geometryType));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst numFaces = outputGeometry.num_faces();\n\n\t\t\t\t\t\tif (geometryType === decoderModule.TRIANGULAR_MESH) {\n\t\t\t\t\t\t\tconst bit32 = outputGeometry.num_points() > 65535;\n\t\t\t\t\t\t\tnumIndices = numFaces * 3;\n\t\t\t\t\t\t\tconst dataSize = numIndices * (bit32 ? 4 : 2);\n\n\t\t\t\t\t\t\tconst ptr = decoderModule._malloc(dataSize);\n\n\t\t\t\t\t\t\tif (bit32) {\n\t\t\t\t\t\t\t\tdecoder.GetTrianglesUInt32Array(outputGeometry, dataSize, ptr);\n\t\t\t\t\t\t\t\tindices = new Uint32Array(decoderModule.HEAPU32.buffer, ptr, numIndices).slice();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdecoder.GetTrianglesUInt16Array(outputGeometry, dataSize, ptr);\n\t\t\t\t\t\t\t\tindices = new Uint16Array(decoderModule.HEAPU16.buffer, ptr, numIndices).slice();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdecoderModule._free(ptr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvertexBuffer = createVertexBufferDraco(device, outputGeometry, extDraco, decoder, decoderModule, indices, disableFlipV);\n\t\t\t\t\t\tdecoderModule.destroy(outputGeometry);\n\t\t\t\t\t\tdecoderModule.destroy(decoder);\n\t\t\t\t\t\tdecoderModule.destroy(buffer);\n\t\t\t\t\t\tcanUseMorph = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!vertexBuffer) {\n\t\t\tindices = primitive.hasOwnProperty('indices') ? getAccessorData(accessors[primitive.indices], bufferViews) : null;\n\t\t\tvertexBuffer = createVertexBuffer(device, primitive.attributes, indices, accessors, bufferViews, disableFlipV, vertexBufferDict);\n\t\t\tprimitiveType = getPrimitiveType(primitive);\n\t\t}\n\n\t\tlet mesh = null;\n\n\t\tif (vertexBuffer) {\n\t\t\tmesh = new Mesh(device);\n\t\t\tmesh.vertexBuffer = vertexBuffer;\n\t\t\tmesh.primitive[0].type = primitiveType;\n\t\t\tmesh.primitive[0].base = 0;\n\t\t\tmesh.primitive[0].indexed = indices !== null;\n\n\t\t\tif (indices !== null) {\n\t\t\t\tlet indexFormat;\n\n\t\t\t\tif (indices instanceof Uint8Array) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT8;\n\t\t\t\t} else if (indices instanceof Uint16Array) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT16;\n\t\t\t\t} else {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT32;\n\t\t\t\t}\n\n\t\t\t\tif (indexFormat === INDEXFORMAT_UINT32 && !device.extUintElement) {\n\t\t\t\t\tindexFormat = INDEXFORMAT_UINT16;\n\t\t\t\t\tindices = new Uint16Array(indices);\n\t\t\t\t}\n\n\t\t\t\tconst indexBuffer = new IndexBuffer(device, indexFormat, indices.length, BUFFER_STATIC, indices);\n\t\t\t\tmesh.indexBuffer[0] = indexBuffer;\n\t\t\t\tmesh.primitive[0].count = indices.length;\n\t\t\t} else {\n\t\t\t\tmesh.primitive[0].count = vertexBuffer.numVertices;\n\t\t\t}\n\n\t\t\tmesh.materialIndex = primitive.material;\n\t\t\tlet accessor = accessors[primitive.attributes.POSITION];\n\t\t\tconst min = accessor.min;\n\t\t\tconst max = accessor.max;\n\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) / 2, (max[1] + min[1]) / 2, (max[2] + min[2]) / 2), new Vec3((max[0] - min[0]) / 2, (max[1] - min[1]) / 2, (max[2] - min[2]) / 2));\n\t\t\tmesh.aabb = aabb;\n\n\t\t\tif (canUseMorph && primitive.hasOwnProperty('targets')) {\n\t\t\t\tconst targets = [];\n\t\t\t\tprimitive.targets.forEach(function (target, index) {\n\t\t\t\t\tconst options = {};\n\n\t\t\t\t\tif (target.hasOwnProperty('POSITION')) {\n\t\t\t\t\t\taccessor = accessors[target.POSITION];\n\t\t\t\t\t\toptions.deltaPositions = getAccessorData(accessor, bufferViews);\n\t\t\t\t\t\toptions.deltaPositionsType = getComponentType(accessor.componentType);\n\n\t\t\t\t\t\tif (accessor.hasOwnProperty('min') && accessor.hasOwnProperty('max')) {\n\t\t\t\t\t\t\toptions.aabb = new BoundingBox();\n\t\t\t\t\t\t\toptions.aabb.setMinMax(new Vec3(accessor.min), new Vec3(accessor.max));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target.hasOwnProperty('NORMAL')) {\n\t\t\t\t\t\taccessor = accessors[target.NORMAL];\n\t\t\t\t\t\toptions.deltaNormals = getAccessorData(accessor, bufferViews);\n\t\t\t\t\t\toptions.deltaNormalsType = getComponentType(accessor.componentType);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gltfMesh.hasOwnProperty('extras') && gltfMesh.extras.hasOwnProperty('targetNames')) {\n\t\t\t\t\t\toptions.name = gltfMesh.extras.targetNames[index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions.name = index.toString(10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gltfMesh.hasOwnProperty('weights')) {\n\t\t\t\t\t\toptions.defaultWeight = gltfMesh.weights[index];\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push(new MorphTarget(options));\n\t\t\t\t});\n\t\t\t\tmesh.morph = new Morph(targets, device);\n\t\t\t}\n\t\t}\n\n\t\tmeshes.push(mesh);\n\t});\n\treturn meshes;\n};\n\nconst createMaterial = function createMaterial(gltfMaterial, textures, disableFlipV) {\n\tconst glossChunk = [\"#ifdef MAPFLOAT\", \"uniform float material_shininess;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_glossMap;\", \"#endif\", \"\", \"void getGlossiness() {\", \"\t\tdGlossiness = 1.0;\", \"\", \"#ifdef MAPFLOAT\", \"\t\tdGlossiness *= material_shininess;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"\t\tdGlossiness *= texture2D(texture_glossMap, $UV).$CH;\", \"#endif\", \"\", \"#ifdef MAPVERTEX\", \"\t\tdGlossiness *= saturate(vVertexColor.$VC);\", \"#endif\", \"\", \"\t\tdGlossiness = 1.0 - dGlossiness;\", \"\", \"\t\tdGlossiness += 0.0000001;\", \"}\"].join('\\n');\n\tconst specularChunk = [\"#ifdef MAPCOLOR\", \"uniform vec3 material_specular;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_specularMap;\", \"#endif\", \"\", \"void getSpecularity() {\", \"\t\tdSpecularity = vec3(1.0);\", \"\", \"\t\t#ifdef MAPCOLOR\", \"\t\t\t\tdSpecularity *= material_specular;\", \"\t\t#endif\", \"\", \"\t\t#ifdef MAPTEXTURE\", \"\t\t\t\tvec3 srgb = texture2D(texture_specularMap, $UV).$CH;\", \"\t\t\t\tdSpecularity *= vec3(pow(srgb.r, 2.2), pow(srgb.g, 2.2), pow(srgb.b, 2.2));\", \"\t\t#endif\", \"\", \"\t\t#ifdef MAPVERTEX\", \"\t\t\t\tdSpecularity *= saturate(vVertexColor.$VC);\", \"\t\t#endif\", \"}\"].join('\\n');\n\tconst clearCoatGlossChunk = [\"#ifdef MAPFLOAT\", \"uniform float material_clearCoatGlossiness;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"uniform sampler2D texture_clearCoatGlossMap;\", \"#endif\", \"\", \"void getClearCoatGlossiness() {\", \"\t\tccGlossiness = 1.0;\", \"\", \"#ifdef MAPFLOAT\", \"\t\tccGlossiness *= material_clearCoatGlossiness;\", \"#endif\", \"\", \"#ifdef MAPTEXTURE\", \"\t\tccGlossiness *= texture2D(texture_clearCoatGlossMap, $UV).$CH;\", \"#endif\", \"\", \"#ifdef MAPVERTEX\", \"\t\tccGlossiness *= saturate(vVertexColor.$VC);\", \"#endif\", \"\", \"\t\tccGlossiness = 1.0 - ccGlossiness;\", \"\", \"\t\tccGlossiness += 0.0000001;\", \"}\"].join('\\n');\n\tconst uvONE = [1, 1];\n\tconst uvZERO = [0, 0];\n\n\tconst extractTextureTransform = function extractTextureTransform(source, material, maps) {\n\t\tlet map;\n\t\tconst texCoord = source.texCoord;\n\n\t\tif (texCoord) {\n\t\t\tfor (map = 0; map < maps.length; ++map) {\n\t\t\t\tmaterial[maps[map] + 'MapUv'] = texCoord;\n\t\t\t}\n\t\t}\n\n\t\tlet scale = uvONE;\n\t\tlet offset = uvZERO;\n\t\tconst extensions = source.extensions;\n\n\t\tif (extensions) {\n\t\t\tconst textureTransformData = extensions.KHR_texture_transform;\n\n\t\t\tif (textureTransformData) {\n\t\t\t\tif (textureTransformData.scale) {\n\t\t\t\t\tscale = textureTransformData.scale;\n\t\t\t\t}\n\n\t\t\t\tif (textureTransformData.offset) {\n\t\t\t\t\toffset = textureTransformData.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (map = 0; map < maps.length; ++map) {\n\t\t\tmaterial[maps[map] + 'MapTiling'] = new Vec2(scale[0], scale[1]);\n\t\t\tmaterial[maps[map] + 'MapOffset'] = new Vec2(offset[0], disableFlipV ? 1.0 - scale[1] - offset[1] : offset[1]);\n\t\t}\n\t};\n\n\tconst material = new StandardMaterial();\n\tmaterial.occludeSpecular = true;\n\tmaterial.diffuseTint = true;\n\tmaterial.diffuseVertexColor = true;\n\tmaterial.specularTint = true;\n\tmaterial.specularVertexColor = true;\n\n\tif (gltfMaterial.hasOwnProperty('name')) {\n\t\tmaterial.name = gltfMaterial.name;\n\t}\n\n\tlet color, texture;\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_pbrSpecularGlossiness')) {\n\t\tconst specData = gltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness;\n\n\t\tif (specData.hasOwnProperty('diffuseFactor')) {\n\t\t\tcolor = specData.diffuseFactor;\n\t\t\tmaterial.diffuse.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t\tmaterial.opacity = color[3];\n\t\t} else {\n\t\t\tmaterial.diffuse.set(1, 1, 1);\n\t\t\tmaterial.opacity = 1;\n\t\t}\n\n\t\tif (specData.hasOwnProperty('diffuseTexture')) {\n\t\t\tconst diffuseTexture = specData.diffuseTexture;\n\t\t\ttexture = textures[diffuseTexture.index];\n\t\t\tmaterial.diffuseMap = texture;\n\t\t\tmaterial.diffuseMapChannel = 'rgb';\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = 'a';\n\t\t\textractTextureTransform(diffuseTexture, material, ['diffuse', 'opacity']);\n\t\t}\n\n\t\tmaterial.useMetalness = false;\n\n\t\tif (specData.hasOwnProperty('specularFactor')) {\n\t\t\tcolor = specData.specularFactor;\n\t\t\tmaterial.specular.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t} else {\n\t\t\tmaterial.specular.set(1, 1, 1);\n\t\t}\n\n\t\tif (specData.hasOwnProperty('glossinessFactor')) {\n\t\t\tmaterial.shininess = 100 * specData.glossinessFactor;\n\t\t} else {\n\t\t\tmaterial.shininess = 100;\n\t\t}\n\n\t\tif (specData.hasOwnProperty('specularGlossinessTexture')) {\n\t\t\tconst specularGlossinessTexture = specData.specularGlossinessTexture;\n\t\t\tmaterial.specularMap = material.glossMap = textures[specularGlossinessTexture.index];\n\t\t\tmaterial.specularMapChannel = 'rgb';\n\t\t\tmaterial.glossMapChannel = 'a';\n\t\t\textractTextureTransform(specularGlossinessTexture, material, ['gloss', 'metalness']);\n\t\t}\n\n\t\tmaterial.chunks.specularPS = specularChunk;\n\t} else if (gltfMaterial.hasOwnProperty('pbrMetallicRoughness')) {\n\t\tconst pbrData = gltfMaterial.pbrMetallicRoughness;\n\n\t\tif (pbrData.hasOwnProperty('baseColorFactor')) {\n\t\t\tcolor = pbrData.baseColorFactor;\n\t\t\tmaterial.diffuse.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\t\tmaterial.opacity = color[3];\n\t\t} else {\n\t\t\tmaterial.diffuse.set(1, 1, 1);\n\t\t\tmaterial.opacity = 1;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('baseColorTexture')) {\n\t\t\tconst baseColorTexture = pbrData.baseColorTexture;\n\t\t\ttexture = textures[baseColorTexture.index];\n\t\t\tmaterial.diffuseMap = texture;\n\t\t\tmaterial.diffuseMapChannel = 'rgb';\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = 'a';\n\t\t\textractTextureTransform(baseColorTexture, material, ['diffuse', 'opacity']);\n\t\t}\n\n\t\tmaterial.useMetalness = true;\n\n\t\tif (pbrData.hasOwnProperty('metallicFactor')) {\n\t\t\tmaterial.metalness = pbrData.metallicFactor;\n\t\t} else {\n\t\t\tmaterial.metalness = 1;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('roughnessFactor')) {\n\t\t\tmaterial.shininess = 100 * pbrData.roughnessFactor;\n\t\t} else {\n\t\t\tmaterial.shininess = 100;\n\t\t}\n\n\t\tif (pbrData.hasOwnProperty('metallicRoughnessTexture')) {\n\t\t\tconst metallicRoughnessTexture = pbrData.metallicRoughnessTexture;\n\t\t\tmaterial.metalnessMap = material.glossMap = textures[metallicRoughnessTexture.index];\n\t\t\tmaterial.metalnessMapChannel = 'b';\n\t\t\tmaterial.glossMapChannel = 'g';\n\t\t\textractTextureTransform(metallicRoughnessTexture, material, ['gloss', 'metalness']);\n\t\t}\n\n\t\tmaterial.chunks.glossPS = glossChunk;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('normalTexture')) {\n\t\tconst normalTexture = gltfMaterial.normalTexture;\n\t\tmaterial.normalMap = textures[normalTexture.index];\n\t\textractTextureTransform(normalTexture, material, ['normal']);\n\n\t\tif (normalTexture.hasOwnProperty('scale')) {\n\t\t\tmaterial.bumpiness = normalTexture.scale;\n\t\t}\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('occlusionTexture')) {\n\t\tconst occlusionTexture = gltfMaterial.occlusionTexture;\n\t\tmaterial.aoMap = textures[occlusionTexture.index];\n\t\tmaterial.aoMapChannel = 'r';\n\t\textractTextureTransform(occlusionTexture, material, ['ao']);\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('emissiveFactor')) {\n\t\tcolor = gltfMaterial.emissiveFactor;\n\t\tmaterial.emissive.set(Math.pow(color[0], 1 / 2.2), Math.pow(color[1], 1 / 2.2), Math.pow(color[2], 1 / 2.2));\n\t\tmaterial.emissiveTint = true;\n\t} else {\n\t\tmaterial.emissive.set(0, 0, 0);\n\t\tmaterial.emissiveTint = false;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('emissiveTexture')) {\n\t\tconst emissiveTexture = gltfMaterial.emissiveTexture;\n\t\tmaterial.emissiveMap = textures[emissiveTexture.index];\n\t\textractTextureTransform(emissiveTexture, material, ['emissive']);\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('alphaMode')) {\n\t\tswitch (gltfMaterial.alphaMode) {\n\t\t\tcase 'MASK':\n\t\t\t\tmaterial.blendType = BLEND_NONE;\n\n\t\t\t\tif (gltfMaterial.hasOwnProperty('alphaCutoff')) {\n\t\t\t\t\tmaterial.alphaTest = gltfMaterial.alphaCutoff;\n\t\t\t\t} else {\n\t\t\t\t\tmaterial.alphaTest = 0.5;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'BLEND':\n\t\t\t\tmaterial.blendType = BLEND_NORMAL;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\tcase 'OPAQUE':\n\t\t\t\tmaterial.blendType = BLEND_NONE;\n\t\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tmaterial.blendType = BLEND_NONE;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('doubleSided')) {\n\t\tmaterial.twoSidedLighting = gltfMaterial.doubleSided;\n\t\tmaterial.cull = gltfMaterial.doubleSided ? CULLFACE_NONE : CULLFACE_BACK;\n\t} else {\n\t\tmaterial.twoSidedLighting = false;\n\t\tmaterial.cull = CULLFACE_BACK;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_clearcoat')) {\n\t\tconst ccData = gltfMaterial.extensions.KHR_materials_clearcoat;\n\n\t\tif (ccData.hasOwnProperty('clearcoatFactor')) {\n\t\t\tmaterial.clearCoat = ccData.clearcoatFactor * 0.25;\n\t\t} else {\n\t\t\tmaterial.clearCoat = 0;\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatTexture')) {\n\t\t\tconst clearcoatTexture = ccData.clearcoatTexture;\n\t\t\tmaterial.clearCoatMap = textures[clearcoatTexture.index];\n\t\t\tmaterial.clearCoatMapChannel = 'r';\n\t\t\textractTextureTransform(clearcoatTexture, material, ['clearCoat']);\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatRoughnessFactor')) {\n\t\t\tmaterial.clearCoatGlossiness = ccData.clearcoatRoughnessFactor;\n\t\t} else {\n\t\t\tmaterial.clearCoatGlossiness = 0;\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatRoughnessTexture')) {\n\t\t\tconst clearcoatRoughnessTexture = ccData.clearcoatRoughnessTexture;\n\t\t\tmaterial.clearCoatGlossMap = textures[clearcoatRoughnessTexture.index];\n\t\t\tmaterial.clearCoatGlossMapChannel = 'g';\n\t\t\textractTextureTransform(clearcoatRoughnessTexture, material, ['clearCoatGloss']);\n\t\t}\n\n\t\tif (ccData.hasOwnProperty('clearcoatNormalTexture')) {\n\t\t\tconst clearcoatNormalTexture = ccData.clearcoatNormalTexture;\n\t\t\tmaterial.clearCoatNormalMap = textures[clearcoatNormalTexture.index];\n\t\t\textractTextureTransform(clearcoatNormalTexture, material, ['clearCoatNormal']);\n\n\t\t\tif (clearcoatNormalTexture.hasOwnProperty('scale')) {\n\t\t\t\tmaterial.clearCoatBumpiness = clearcoatNormalTexture.scale;\n\t\t\t}\n\t\t}\n\n\t\tmaterial.chunks.clearCoatGlossPS = clearCoatGlossChunk;\n\t}\n\n\tif (gltfMaterial.hasOwnProperty('extensions') && gltfMaterial.extensions.hasOwnProperty('KHR_materials_unlit')) {\n\t\tmaterial.useLighting = false;\n\t\tmaterial.emissive.copy(material.diffuse);\n\t\tmaterial.emissiveTint = material.diffuseTint;\n\t\tmaterial.emissiveMap = material.diffuseMap;\n\t\tmaterial.emissiveMapUv = material.diffuseMapUv;\n\t\tmaterial.emissiveMapTiling.copy(material.diffuseMapTiling);\n\t\tmaterial.emissiveMapOffset.copy(material.diffuseMapOffset);\n\t\tmaterial.emissiveMapChannel = material.diffuseMapChannel;\n\t\tmaterial.emissiveVertexColor = material.diffuseVertexColor;\n\t\tmaterial.emissiveVertexColorChannel = material.diffuseVertexColorChannel;\n\t\tmaterial.diffuse.set(0, 0, 0);\n\t\tmaterial.diffuseTint = false;\n\t\tmaterial.diffuseMap = null;\n\t\tmaterial.diffuseVertexColor = false;\n\t}\n\n\tmaterial.update();\n\treturn material;\n};\n\nconst createAnimation = function createAnimation(gltfAnimation, animationIndex, gltfAccessors, bufferViews, nodes) {\n\tconst createAnimData = function createAnimData(gltfAccessor) {\n\t\tconst data = getAccessorData(gltfAccessor, bufferViews);\n\t\treturn new AnimData(getNumComponents(gltfAccessor.type), new data.constructor(data));\n\t};\n\n\tconst interpMap = {\n\t\t\"STEP\": INTERPOLATION_STEP,\n\t\t\"LINEAR\": INTERPOLATION_LINEAR,\n\t\t\"CUBICSPLINE\": INTERPOLATION_CUBIC\n\t};\n\tconst inputMap = {};\n\tconst inputs = [];\n\tconst outputMap = {};\n\tconst outputs = [];\n\tconst curves = [];\n\tlet i;\n\n\tfor (i = 0; i < gltfAnimation.samplers.length; ++i) {\n\t\tconst sampler = gltfAnimation.samplers[i];\n\n\t\tif (!inputMap.hasOwnProperty(sampler.input)) {\n\t\t\tinputMap[sampler.input] = inputs.length;\n\t\t\tinputs.push(createAnimData(gltfAccessors[sampler.input]));\n\t\t}\n\n\t\tif (!outputMap.hasOwnProperty(sampler.output)) {\n\t\t\toutputMap[sampler.output] = outputs.length;\n\t\t\toutputs.push(createAnimData(gltfAccessors[sampler.output]));\n\t\t}\n\n\t\tconst interpolation = sampler.hasOwnProperty('interpolation') && interpMap.hasOwnProperty(sampler.interpolation) ? interpMap[sampler.interpolation] : INTERPOLATION_LINEAR;\n\t\tcurves.push(new AnimCurve([], inputMap[sampler.input], outputMap[sampler.output], interpolation));\n\t}\n\n\tconst quatArrays = [];\n\tconst transformSchema = {\n\t\t'translation': 'localPosition',\n\t\t'rotation': 'localRotation',\n\t\t'scale': 'localScale',\n\t\t'weights': 'weights'\n\t};\n\n\tfor (i = 0; i < gltfAnimation.channels.length; ++i) {\n\t\tconst channel = gltfAnimation.channels[i];\n\t\tconst target = channel.target;\n\t\tconst curve = curves[channel.sampler];\n\t\tconst node = nodes[target.node];\n\t\tconst entityPath = [nodes[0].name, ...AnimBinder.splitPath(node.path, '/')];\n\n\t\tcurve._paths.push({\n\t\t\tentityPath: entityPath,\n\t\t\tcomponent: 'graph',\n\t\t\tpropertyPath: [transformSchema[target.path]]\n\t\t});\n\n\t\tif (target.path.startsWith('rotation') && curve.interpolation !== INTERPOLATION_CUBIC) {\n\t\t\tquatArrays.push(curve.output);\n\t\t} else if (target.path.startsWith('weights')) {\n\t\t\toutputs[curve.output]._components = outputs[curve.output].data.length / inputs[curve.input].data.length;\n\t\t}\n\t}\n\n\tquatArrays.sort();\n\tlet prevIndex = null;\n\tlet data;\n\n\tfor (i = 0; i < quatArrays.length; ++i) {\n\t\tconst index = quatArrays[i];\n\n\t\tif (i === 0 || index !== prevIndex) {\n\t\t\tdata = outputs[index];\n\n\t\t\tif (data.components === 4) {\n\t\t\t\tconst d = data.data;\n\t\t\t\tconst len = d.length - 4;\n\n\t\t\t\tfor (let j = 0; j < len; j += 4) {\n\t\t\t\t\tconst dp = d[j + 0] * d[j + 4] + d[j + 1] * d[j + 5] + d[j + 2] * d[j + 6] + d[j + 3] * d[j + 7];\n\n\t\t\t\t\tif (dp < 0) {\n\t\t\t\t\t\td[j + 4] *= -1;\n\t\t\t\t\t\td[j + 5] *= -1;\n\t\t\t\t\t\td[j + 6] *= -1;\n\t\t\t\t\t\td[j + 7] *= -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprevIndex = index;\n\t\t}\n\t}\n\n\tlet duration = 0;\n\n\tfor (i = 0; i < inputs.length; i++) {\n\t\tdata = inputs[i]._data;\n\t\tduration = Math.max(duration, data.length === 0 ? 0 : data[data.length - 1]);\n\t}\n\n\treturn new AnimTrack(gltfAnimation.hasOwnProperty('name') ? gltfAnimation.name : \"animation_\" + animationIndex, duration, inputs, outputs, curves);\n};\n\nconst createNode = function createNode(gltfNode, nodeIndex) {\n\tconst entity = new GraphNode();\n\n\tif (gltfNode.hasOwnProperty('name') && gltfNode.name.length > 0) {\n\t\tentity.name = gltfNode.name;\n\t} else {\n\t\tentity.name = \"node_\" + nodeIndex;\n\t}\n\n\tif (gltfNode.hasOwnProperty('matrix')) {\n\t\ttempMat.data.set(gltfNode.matrix);\n\t\ttempMat.getTranslation(tempVec);\n\t\tentity.setLocalPosition(tempVec);\n\t\ttempMat.getEulerAngles(tempVec);\n\t\tentity.setLocalEulerAngles(tempVec);\n\t\ttempMat.getScale(tempVec);\n\t\tentity.setLocalScale(tempVec);\n\t}\n\n\tif (gltfNode.hasOwnProperty('rotation')) {\n\t\tconst r = gltfNode.rotation;\n\t\tentity.setLocalRotation(r[0], r[1], r[2], r[3]);\n\t}\n\n\tif (gltfNode.hasOwnProperty('translation')) {\n\t\tconst t = gltfNode.translation;\n\t\tentity.setLocalPosition(t[0], t[1], t[2]);\n\t}\n\n\tif (gltfNode.hasOwnProperty('scale')) {\n\t\tconst s = gltfNode.scale;\n\t\tentity.setLocalScale(s[0], s[1], s[2]);\n\t}\n\n\treturn entity;\n};\n\nconst createLight = function createLight(gltfLight, node) {\n\tconst lightProps = {\n\t\ttype: gltfLight.type === \"point\" ? \"omni\" : gltfLight.type,\n\t\tcolor: gltfLight.hasOwnProperty('color') ? new Color(gltfLight.color) : Color.WHITE,\n\t\trange: gltfLight.hasOwnProperty('range') ? gltfLight.range : Number.MAX_VALUE,\n\t\tfalloffMode: LIGHTFALLOFF_INVERSESQUARED,\n\t\tintensity: gltfLight.hasOwnProperty('intensity') ? math.clamp(gltfLight.intensity, 0, 2) : 1\n\t};\n\n\tif (gltfLight.hasOwnProperty('spot')) {\n\t\tlightProps.innerConeAngle = gltfLight.spot.hasOwnProperty('innerConeAngle') ? gltfLight.spot.innerConeAngle * math.RAD_TO_DEG : 0;\n\t\tlightProps.outerConeAngle = gltfLight.spot.hasOwnProperty('outerConeAngle') ? gltfLight.spot.outerConeAngle * math.RAD_TO_DEG : Math.PI / 4;\n\t}\n\n\tvar lightNode = new Entity(node.name);\n\tlightNode.rotateLocal(90, 0, 0);\n\tlightNode.addComponent(\"light\", lightProps);\n\treturn lightNode;\n};\n\nconst createSkins = function createSkins(device, gltf, nodes, bufferViews) {\n\tif (!gltf.hasOwnProperty('skins') || gltf.skins.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst glbSkins = new Map();\n\treturn gltf.skins.map(function (gltfSkin) {\n\t\treturn createSkin(device, gltfSkin, gltf.accessors, bufferViews, nodes, glbSkins);\n\t});\n};\n\nconst createMeshes = function createMeshes(device, gltf, bufferViews, callback, disableFlipV) {\n\tif (!gltf.hasOwnProperty('meshes') || gltf.meshes.length === 0 || !gltf.hasOwnProperty('accessors') || gltf.accessors.length === 0 || !gltf.hasOwnProperty('bufferViews') || gltf.bufferViews.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst vertexBufferDict = {};\n\treturn gltf.meshes.map(function (gltfMesh) {\n\t\treturn createMesh(device, gltfMesh, gltf.accessors, bufferViews, callback, disableFlipV, vertexBufferDict);\n\t});\n};\n\nconst createMaterials = function createMaterials(gltf, textures, options, disableFlipV) {\n\tif (!gltf.hasOwnProperty('materials') || gltf.materials.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.material && options.material.preprocess;\n\tconst process = options && options.material && options.material.process || createMaterial;\n\tconst postprocess = options && options.material && options.material.postprocess;\n\treturn gltf.materials.map(function (gltfMaterial) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfMaterial);\n\t\t}\n\n\t\tconst material = process(gltfMaterial, textures, disableFlipV);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfMaterial, material);\n\t\t}\n\n\t\treturn material;\n\t});\n};\n\nconst createAnimations = function createAnimations(gltf, nodes, bufferViews, options) {\n\tif (!gltf.hasOwnProperty('animations') || gltf.animations.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.animation && options.animation.preprocess;\n\tconst postprocess = options && options.animation && options.animation.postprocess;\n\treturn gltf.animations.map(function (gltfAnimation, index) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfAnimation);\n\t\t}\n\n\t\tconst animation = createAnimation(gltfAnimation, index, gltf.accessors, bufferViews, nodes);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfAnimation, animation);\n\t\t}\n\n\t\treturn animation;\n\t});\n};\n\nconst createNodes = function createNodes(gltf, options) {\n\tif (!gltf.hasOwnProperty('nodes') || gltf.nodes.length === 0) {\n\t\treturn [];\n\t}\n\n\tconst preprocess = options && options.node && options.node.preprocess;\n\tconst process = options && options.node && options.node.process || createNode;\n\tconst postprocess = options && options.node && options.node.postprocess;\n\tconst nodes = gltf.nodes.map(function (gltfNode, index) {\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfNode);\n\t\t}\n\n\t\tconst node = process(gltfNode, index);\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfNode, node);\n\t\t}\n\n\t\treturn node;\n\t});\n\n\tfor (let i = 0; i < gltf.nodes.length; ++i) {\n\t\tconst gltfNode = gltf.nodes[i];\n\n\t\tif (gltfNode.hasOwnProperty('children')) {\n\t\t\tfor (let j = 0; j < gltfNode.children.length; ++j) {\n\t\t\t\tconst parent = nodes[i];\n\t\t\t\tconst child = nodes[gltfNode.children[j]];\n\n\t\t\t\tif (!child.parent) {\n\t\t\t\t\tparent.addChild(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\nconst createScenes = function createScenes(gltf, nodes) {\n\tconst scenes = [];\n\tconst count = gltf.scenes.length;\n\n\tif (count === 1 && gltf.scenes[0].nodes.length === 1) {\n\t\tconst nodeIndex = gltf.scenes[0].nodes[0];\n\t\tscenes.push(nodes[nodeIndex]);\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tconst scene = gltf.scenes[i];\n\t\t\tconst sceneRoot = new GraphNode(scene.name);\n\n\t\t\tfor (let n = 0; n < scene.nodes.length; n++) {\n\t\t\t\tconst childNode = nodes[scene.nodes[n]];\n\t\t\t\tsceneRoot.addChild(childNode);\n\t\t\t}\n\n\t\t\tscenes.push(sceneRoot);\n\t\t}\n\t}\n\n\treturn scenes;\n};\n\nconst createLights = function createLights(gltf, nodes, options) {\n\tlet lights = null;\n\n\tif (gltf.hasOwnProperty('nodes') && gltf.hasOwnProperty('extensions') && gltf.extensions.hasOwnProperty('KHR_lights_punctual') && gltf.extensions.KHR_lights_punctual.hasOwnProperty('lights')) {\n\t\tconst gltfLights = gltf.extensions.KHR_lights_punctual.lights;\n\n\t\tif (gltfLights.length) {\n\t\t\tconst preprocess = options && options.light && options.light.preprocess;\n\t\t\tconst process = options && options.light && options.light.process || createLight;\n\t\t\tconst postprocess = options && options.light && options.light.postprocess;\n\t\t\tgltf.nodes.forEach(function (gltfNode, nodeIndex) {\n\t\t\t\tif (gltfNode.hasOwnProperty('extensions') && gltfNode.extensions.hasOwnProperty('KHR_lights_punctual') && gltfNode.extensions.KHR_lights_punctual.hasOwnProperty('light')) {\n\t\t\t\t\tconst lightIndex = gltfNode.extensions.KHR_lights_punctual.light;\n\t\t\t\t\tconst gltfLight = gltfLights[lightIndex];\n\n\t\t\t\t\tif (gltfLight) {\n\t\t\t\t\t\tif (preprocess) {\n\t\t\t\t\t\t\tpreprocess(gltfLight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst light = process(gltfLight, nodes[nodeIndex]);\n\n\t\t\t\t\t\tif (postprocess) {\n\t\t\t\t\t\t\tpostprocess(gltfLight, light);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (light) {\n\t\t\t\t\t\t\tif (!lights) lights = new Map();\n\t\t\t\t\t\t\tlights.set(gltfNode, light);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\treturn lights;\n};\n\nconst linkSkins = function linkSkins(gltf, renders, skins) {\n\tgltf.nodes.forEach(gltfNode => {\n\t\tif (gltfNode.hasOwnProperty('mesh') && gltfNode.hasOwnProperty('skin')) {\n\t\t\tconst meshGroup = renders[gltfNode.mesh].meshes;\n\t\t\tmeshGroup.forEach(mesh => {\n\t\t\t\tmesh.skin = skins[gltfNode.skin];\n\t\t\t});\n\t\t}\n\t});\n};\n\nconst createResources = function createResources(device, gltf, bufferViews, textureAssets, options, callback) {\n\tconst preprocess = options && options.global && options.global.preprocess;\n\tconst postprocess = options && options.global && options.global.postprocess;\n\n\tif (preprocess) {\n\t\tpreprocess(gltf);\n\t}\n\n\tconst disableFlipV = !(gltf.asset && gltf.asset.generator === 'PlayCanvas');\n\tconst nodes = createNodes(gltf, options);\n\tconst scenes = createScenes(gltf, nodes);\n\tconst lights = createLights(gltf, nodes, options);\n\tconst animations = createAnimations(gltf, nodes, bufferViews, options);\n\tconst materials = createMaterials(gltf, textureAssets.map(function (textureAsset) {\n\t\treturn textureAsset.resource;\n\t}), options, disableFlipV);\n\tconst meshes = createMeshes(device, gltf, bufferViews, callback, disableFlipV);\n\tconst skins = createSkins(device, gltf, nodes, bufferViews);\n\tconst renders = [];\n\n\tfor (let i = 0; i < meshes.length; i++) {\n\t\trenders[i] = new Render();\n\t\trenders[i].meshes = meshes[i];\n\t}\n\n\tlinkSkins(gltf, renders, skins);\n\tconst result = new GlbResources(gltf);\n\tresult.nodes = nodes;\n\tresult.scenes = scenes;\n\tresult.animations = animations;\n\tresult.textures = textureAssets;\n\tresult.materials = materials;\n\tresult.renders = renders;\n\tresult.skins = skins;\n\tresult.lights = lights;\n\n\tif (postprocess) {\n\t\tpostprocess(gltf, result);\n\t}\n\n\tcallback(null, result);\n};\n\nconst applySampler = function applySampler(texture, gltfSampler) {\n\tconst getFilter = function getFilter(filter, defaultValue) {\n\t\tswitch (filter) {\n\t\t\tcase 9728:\n\t\t\t\treturn FILTER_NEAREST;\n\n\t\t\tcase 9729:\n\t\t\t\treturn FILTER_LINEAR;\n\n\t\t\tcase 9984:\n\t\t\t\treturn FILTER_NEAREST_MIPMAP_NEAREST;\n\n\t\t\tcase 9985:\n\t\t\t\treturn FILTER_LINEAR_MIPMAP_NEAREST;\n\n\t\t\tcase 9986:\n\t\t\t\treturn FILTER_NEAREST_MIPMAP_LINEAR;\n\n\t\t\tcase 9987:\n\t\t\t\treturn FILTER_LINEAR_MIPMAP_LINEAR;\n\n\t\t\tdefault:\n\t\t\t\treturn defaultValue;\n\t\t}\n\t};\n\n\tconst getWrap = function getWrap(wrap, defaultValue) {\n\t\tswitch (wrap) {\n\t\t\tcase 33071:\n\t\t\t\treturn ADDRESS_CLAMP_TO_EDGE;\n\n\t\t\tcase 33648:\n\t\t\t\treturn ADDRESS_MIRRORED_REPEAT;\n\n\t\t\tcase 10497:\n\t\t\t\treturn ADDRESS_REPEAT;\n\n\t\t\tdefault:\n\t\t\t\treturn defaultValue;\n\t\t}\n\t};\n\n\tif (texture) {\n\t\tgltfSampler = gltfSampler || {};\n\t\ttexture.minFilter = getFilter(gltfSampler.minFilter, FILTER_LINEAR_MIPMAP_LINEAR);\n\t\ttexture.magFilter = getFilter(gltfSampler.magFilter, FILTER_LINEAR);\n\t\ttexture.addressU = getWrap(gltfSampler.wrapS, ADDRESS_REPEAT);\n\t\ttexture.addressV = getWrap(gltfSampler.wrapT, ADDRESS_REPEAT);\n\t}\n};\n\nconst loadImageAsync = function loadImageAsync(gltfImage, index, bufferViews, urlBase, registry, options, callback) {\n\tconst preprocess = options && options.image && options.image.preprocess;\n\n\tconst processAsync = options && options.image && options.image.processAsync || function (gltfImage, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.image && options.image.postprocess;\n\n\tconst onLoad = function onLoad(textureAsset) {\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfImage, textureAsset);\n\t\t}\n\n\t\tcallback(null, textureAsset);\n\t};\n\n\tconst loadTexture = function loadTexture(url, mimeType, crossOrigin, isBlobUrl) {\n\t\tconst mimeTypeFileExtensions = {\n\t\t\t'image/png': 'png',\n\t\t\t'image/jpeg': 'jpg',\n\t\t\t'image/basis': 'basis',\n\t\t\t'image/ktx': 'ktx',\n\t\t\t'image/vnd-ms.dds': 'dds'\n\t\t};\n\t\tconst file = {\n\t\t\turl: url\n\t\t};\n\n\t\tif (mimeType) {\n\t\t\tconst extension = mimeTypeFileExtensions[mimeType];\n\n\t\t\tif (extension) {\n\t\t\t\tfile.filename = 'glb-texture-' + index + '.' + extension;\n\t\t\t}\n\t\t}\n\n\t\tconst asset = new Asset('texture_' + index, 'texture', file, null, {\n\t\t\tcrossOrigin: crossOrigin\n\t\t});\n\t\tasset.on('load', function () {\n\t\t\tif (isBlobUrl) {\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t}\n\n\t\t\tonLoad(asset);\n\t\t});\n\t\tasset.on('error', function (err, asset) {\n\t\t\tcallback(err);\n\t\t});\n\t\tregistry.add(asset);\n\t\tregistry.load(asset);\n\t};\n\n\tif (preprocess) {\n\t\tpreprocess(gltfImage);\n\t}\n\n\tprocessAsync(gltfImage, function (err, textureAsset) {\n\t\tif (err) {\n\t\t\tcallback(err);\n\t\t} else if (textureAsset) {\n\t\t\tonLoad(textureAsset);\n\t\t} else {\n\t\t\tif (gltfImage.hasOwnProperty('uri')) {\n\t\t\t\tif (isDataURI(gltfImage.uri)) {\n\t\t\t\t\tloadTexture(gltfImage.uri, getDataURIMimeType(gltfImage.uri));\n\t\t\t\t} else {\n\t\t\t\t\tloadTexture(path.join(urlBase, gltfImage.uri), null, \"anonymous\");\n\t\t\t\t}\n\t\t\t} else if (gltfImage.hasOwnProperty('bufferView') && gltfImage.hasOwnProperty('mimeType')) {\n\t\t\t\tconst blob = new Blob([bufferViews[gltfImage.bufferView]], {\n\t\t\t\t\ttype: gltfImage.mimeType\n\t\t\t\t});\n\t\t\t\tloadTexture(URL.createObjectURL(blob), gltfImage.mimeType, null, true);\n\t\t\t} else {\n\t\t\t\tcallback(\"Invalid image found in gltf (neither uri or bufferView found). index=\" + index);\n\t\t\t}\n\t\t}\n\t});\n};\n\nconst loadTexturesAsync = function loadTexturesAsync(gltf, bufferViews, urlBase, registry, options, callback) {\n\tif (!gltf.hasOwnProperty('images') || gltf.images.length === 0 || !gltf.hasOwnProperty('textures') || gltf.textures.length === 0) {\n\t\tcallback(null, []);\n\t\treturn;\n\t}\n\n\tconst preprocess = options && options.texture && options.texture.preprocess;\n\n\tconst processAsync = options && options.texture && options.texture.processAsync || function (gltfTexture, gltfImages, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.texture && options.texture.postprocess;\n\tconst assets = [];\n\tconst textures = [];\n\tlet remaining = gltf.textures.length;\n\n\tconst onLoad = function onLoad(textureIndex, imageIndex) {\n\t\tif (!textures[imageIndex]) {\n\t\t\ttextures[imageIndex] = [];\n\t\t}\n\n\t\ttextures[imageIndex].push(textureIndex);\n\n\t\tif (--remaining === 0) {\n\t\t\tconst result = [];\n\t\t\ttextures.forEach(function (textureList, imageIndex) {\n\t\t\t\ttextureList.forEach(function (textureIndex, index) {\n\t\t\t\t\tconst textureAsset = index === 0 ? assets[imageIndex] : cloneTextureAsset(assets[imageIndex]);\n\t\t\t\t\tapplySampler(textureAsset.resource, (gltf.samplers || [])[gltf.textures[textureIndex].sampler]);\n\t\t\t\t\tresult[textureIndex] = textureAsset;\n\n\t\t\t\t\tif (postprocess) {\n\t\t\t\t\t\tpostprocess(gltf.textures[textureIndex], textureAsset);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.textures.length; ++i) {\n\t\tconst gltfTexture = gltf.textures[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfTexture);\n\t\t}\n\n\t\tprocessAsync(gltfTexture, gltf.images, function (i, gltfTexture, err, gltfImageIndex) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tif (gltfImageIndex === undefined || gltfImageIndex === null) {\n\t\t\t\t\tgltfImageIndex = gltfTexture.source;\n\t\t\t\t}\n\n\t\t\t\tif (assets[gltfImageIndex]) {\n\t\t\t\t\tonLoad(i, gltfImageIndex);\n\t\t\t\t} else {\n\t\t\t\t\tconst gltfImage = gltf.images[gltfImageIndex];\n\t\t\t\t\tloadImageAsync(gltfImage, i, bufferViews, urlBase, registry, options, function (err, textureAsset) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassets[gltfImageIndex] = textureAsset;\n\t\t\t\t\t\t\tonLoad(i, gltfImageIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(null, i, gltfTexture));\n\t}\n};\n\nconst loadBuffersAsync = function loadBuffersAsync(gltf, binaryChunk, urlBase, options, callback) {\n\tconst result = [];\n\n\tif (!gltf.buffers || gltf.buffers.length === 0) {\n\t\tcallback(null, result);\n\t\treturn;\n\t}\n\n\tconst preprocess = options && options.buffer && options.buffer.preprocess;\n\n\tconst processAsync = options && options.buffer && options.buffer.processAsync || function (gltfBuffer, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.buffer && options.buffer.postprocess;\n\tlet remaining = gltf.buffers.length;\n\n\tconst onLoad = function onLoad(index, buffer) {\n\t\tresult[index] = buffer;\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltf.buffers[index], buffer);\n\t\t}\n\n\t\tif (--remaining === 0) {\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.buffers.length; ++i) {\n\t\tconst gltfBuffer = gltf.buffers[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfBuffer);\n\t\t}\n\n\t\tprocessAsync(gltfBuffer, function (i, gltfBuffer, err, arrayBuffer) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else if (arrayBuffer) {\n\t\t\t\tonLoad(i, new Uint8Array(arrayBuffer));\n\t\t\t} else {\n\t\t\t\tif (gltfBuffer.hasOwnProperty('uri')) {\n\t\t\t\t\tif (isDataURI(gltfBuffer.uri)) {\n\t\t\t\t\t\tconst byteString = atob(gltfBuffer.uri.split(',')[1]);\n\t\t\t\t\t\tconst binaryArray = new Uint8Array(byteString.length);\n\n\t\t\t\t\t\tfor (let j = 0; j < byteString.length; j++) {\n\t\t\t\t\t\t\tbinaryArray[j] = byteString.charCodeAt(j);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonLoad(i, binaryArray);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thttp.get(path.join(urlBase, gltfBuffer.uri), {\n\t\t\t\t\t\t\tcache: true,\n\t\t\t\t\t\t\tresponseType: 'arraybuffer',\n\t\t\t\t\t\t\tretry: false\n\t\t\t\t\t\t}, function (i, err, result) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonLoad(i, new Uint8Array(result));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(null, i));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tonLoad(i, binaryChunk);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(null, i, gltfBuffer));\n\t}\n};\n\nconst parseGltf = function parseGltf(gltfChunk, callback) {\n\tconst decodeBinaryUtf8 = function decodeBinaryUtf8(array) {\n\t\tif (typeof TextDecoder !== 'undefined') {\n\t\t\treturn new TextDecoder().decode(array);\n\t\t}\n\n\t\tlet str = \"\";\n\n\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\tstr += String.fromCharCode(array[i]);\n\t\t}\n\n\t\treturn decodeURIComponent(escape(str));\n\t};\n\n\tconst gltf = JSON.parse(decodeBinaryUtf8(gltfChunk));\n\n\tif (gltf.asset && gltf.asset.version && parseFloat(gltf.asset.version) < 2) {\n\t\tcallback(\"Invalid gltf version. Expected version 2.0 or above but found version '\" + gltf.asset.version + \"'.\");\n\t\treturn;\n\t}\n\n\tcallback(null, gltf);\n};\n\nconst parseGlb = function parseGlb(glbData, callback) {\n\tconst data = new DataView(glbData);\n\tconst magic = data.getUint32(0, true);\n\tconst version = data.getUint32(4, true);\n\tconst length = data.getUint32(8, true);\n\n\tif (magic !== 0x46546C67) {\n\t\tcallback(\"Invalid magic number found in glb header. Expected 0x46546C67, found 0x\" + magic.toString(16));\n\t\treturn;\n\t}\n\n\tif (version !== 2) {\n\t\tcallback(\"Invalid version number found in glb header. Expected 2, found \" + version);\n\t\treturn;\n\t}\n\n\tif (length <= 0 || length > glbData.byteLength) {\n\t\tcallback(\"Invalid length found in glb header. Found \" + length);\n\t\treturn;\n\t}\n\n\tconst chunks = [];\n\tlet offset = 12;\n\n\twhile (offset < length) {\n\t\tconst chunkLength = data.getUint32(offset, true);\n\n\t\tif (offset + chunkLength + 8 > glbData.byteLength) {\n\t\t\tthrow new Error(\"Invalid chunk length found in glb. Found \" + chunkLength);\n\t\t}\n\n\t\tconst chunkType = data.getUint32(offset + 4, true);\n\t\tconst chunkData = new Uint8Array(glbData, offset + 8, chunkLength);\n\t\tchunks.push({\n\t\t\tlength: chunkLength,\n\t\t\ttype: chunkType,\n\t\t\tdata: chunkData\n\t\t});\n\t\toffset += chunkLength + 8;\n\t}\n\n\tif (chunks.length !== 1 && chunks.length !== 2) {\n\t\tcallback(\"Invalid number of chunks found in glb file.\");\n\t\treturn;\n\t}\n\n\tif (chunks[0].type !== 0x4E4F534A) {\n\t\tcallback(\"Invalid chunk type found in glb file. Expected 0x4E4F534A, found 0x\" + chunks[0].type.toString(16));\n\t\treturn;\n\t}\n\n\tif (chunks.length > 1 && chunks[1].type !== 0x004E4942) {\n\t\tcallback(\"Invalid chunk type found in glb file. Expected 0x004E4942, found 0x\" + chunks[1].type.toString(16));\n\t\treturn;\n\t}\n\n\tcallback(null, {\n\t\tgltfChunk: chunks[0].data,\n\t\tbinaryChunk: chunks.length === 2 ? chunks[1].data : null\n\t});\n};\n\nconst parseChunk = function parseChunk(filename, data, callback) {\n\tif (filename && filename.toLowerCase().endsWith('.glb')) {\n\t\tparseGlb(data, callback);\n\t} else {\n\t\tcallback(null, {\n\t\t\tgltfChunk: data,\n\t\t\tbinaryChunk: null\n\t\t});\n\t}\n};\n\nconst parseBufferViewsAsync = function parseBufferViewsAsync(gltf, buffers, options, callback) {\n\tconst result = [];\n\tconst preprocess = options && options.bufferView && options.bufferView.preprocess;\n\n\tconst processAsync = options && options.bufferView && options.bufferView.processAsync || function (gltfBufferView, buffers, callback) {\n\t\tcallback(null, null);\n\t};\n\n\tconst postprocess = options && options.bufferView && options.bufferView.postprocess;\n\tlet remaining = gltf.bufferViews ? gltf.bufferViews.length : 0;\n\n\tif (!remaining) {\n\t\tcallback(null, null);\n\t\treturn;\n\t}\n\n\tconst onLoad = function onLoad(index, bufferView) {\n\t\tconst gltfBufferView = gltf.bufferViews[index];\n\n\t\tif (gltfBufferView.hasOwnProperty('byteStride')) {\n\t\t\tbufferView.byteStride = gltfBufferView.byteStride;\n\t\t}\n\n\t\tresult[index] = bufferView;\n\n\t\tif (postprocess) {\n\t\t\tpostprocess(gltfBufferView, bufferView);\n\t\t}\n\n\t\tif (--remaining === 0) {\n\t\t\tcallback(null, result);\n\t\t}\n\t};\n\n\tfor (let i = 0; i < gltf.bufferViews.length; ++i) {\n\t\tconst gltfBufferView = gltf.bufferViews[i];\n\n\t\tif (preprocess) {\n\t\t\tpreprocess(gltfBufferView);\n\t\t}\n\n\t\tprocessAsync(gltfBufferView, buffers, function (i, gltfBufferView, err, result) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else if (result) {\n\t\t\t\tonLoad(i, result);\n\t\t\t} else {\n\t\t\t\tconst buffer = buffers[gltfBufferView.buffer];\n\t\t\t\tconst typedArray = new Uint8Array(buffer.buffer, buffer.byteOffset + (gltfBufferView.byteOffset || 0), gltfBufferView.byteLength);\n\t\t\t\tonLoad(i, typedArray);\n\t\t\t}\n\t\t}.bind(null, i, gltfBufferView));\n\t}\n};\n\nclass GlbParser {\n\tstatic parseAsync(filename, urlBase, data, device, registry, options, callback) {\n\t\tparseChunk(filename, data, function (err, chunks) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tparseGltf(chunks.gltfChunk, function (err, gltf) {\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tloadBuffersAsync(gltf, chunks.binaryChunk, urlBase, options, function (err, buffers) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tparseBufferViewsAsync(gltf, buffers, options, function (err, bufferViews) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloadTexturesAsync(gltf, bufferViews, urlBase, registry, options, function (err, textureAssets) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcreateResources(device, gltf, bufferViews, textureAssets, options, callback);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic parse(filename, data, device, options) {\n\t\tlet result = null;\n\t\toptions = options || {};\n\t\tparseChunk(filename, data, function (err, chunks) {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t} else {\n\t\t\t\tparseGltf(chunks.gltfChunk, function (err, gltf) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparseBufferViewsAsync(gltf, [chunks.binaryChunk], options, function (err, bufferViews) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcreateResources(device, gltf, bufferViews, [], options, function (err, result_) {\n\t\t\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tresult = result_;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n}\n\nclass AnimationHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:') || url.load.startsWith('data:')) {\n\t\t\tif (path.getExtension(url.original).toLowerCase() === '.glb') {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t} else {\n\t\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t\t}\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tif (path.getExtension(url).toLowerCase() === '.glb') {\n\t\t\tconst glbResources = GlbParser.parse(\"filename.glb\", data, null);\n\n\t\t\tif (glbResources) {\n\t\t\t\tconst animations = glbResources.animations;\n\t\t\t\tglbResources.destroy();\n\t\t\t\treturn animations;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[\"_parseAnimationV\" + data.animation.version](data);\n\t}\n\n\t_parseAnimationV3(data) {\n\t\tconst animData = data.animation;\n\t\tconst anim = new Animation();\n\t\tanim.name = animData.name;\n\t\tanim.duration = animData.duration;\n\n\t\tfor (let i = 0; i < animData.nodes.length; i++) {\n\t\t\tconst node = new Node();\n\t\t\tconst n = animData.nodes[i];\n\t\t\tnode._name = n.name;\n\n\t\t\tfor (let j = 0; j < n.keys.length; j++) {\n\t\t\t\tconst k = n.keys[j];\n\t\t\t\tconst t = k.time;\n\t\t\t\tconst p = k.pos;\n\t\t\t\tconst r = k.rot;\n\t\t\t\tconst s = k.scale;\n\t\t\t\tconst pos = new Vec3(p[0], p[1], p[2]);\n\t\t\t\tconst rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);\n\t\t\t\tconst scl = new Vec3(s[0], s[1], s[2]);\n\t\t\t\tconst key = new Key(t, pos, rot, scl);\n\n\t\t\t\tnode._keys.push(key);\n\t\t\t}\n\n\t\t\tanim.addNode(node);\n\t\t}\n\n\t\treturn anim;\n\t}\n\n\t_parseAnimationV4(data) {\n\t\tconst animData = data.animation;\n\t\tconst anim = new Animation();\n\t\tanim.name = animData.name;\n\t\tanim.duration = animData.duration;\n\n\t\tfor (let i = 0; i < animData.nodes.length; i++) {\n\t\t\tconst node = new Node();\n\t\t\tconst n = animData.nodes[i];\n\t\t\tnode._name = n.name;\n\t\t\tconst defPos = n.defaults.p;\n\t\t\tconst defRot = n.defaults.r;\n\t\t\tconst defScl = n.defaults.s;\n\n\t\t\tfor (let j = 0; j < n.keys.length; j++) {\n\t\t\t\tconst k = n.keys[j];\n\t\t\t\tconst t = k.t;\n\t\t\t\tconst p = defPos ? defPos : k.p;\n\t\t\t\tconst r = defRot ? defRot : k.r;\n\t\t\t\tconst s = defScl ? defScl : k.s;\n\t\t\t\tconst pos = new Vec3(p[0], p[1], p[2]);\n\t\t\t\tconst rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);\n\t\t\t\tconst scl = new Vec3(s[0], s[1], s[2]);\n\t\t\t\tconst key = new Key(t, pos, rot, scl);\n\n\t\t\t\tnode._keys.push(key);\n\t\t\t}\n\n\t\t\tanim.addNode(node);\n\t\t}\n\n\t\treturn anim;\n\t}\n\n}\n\nclass AnimClipHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation clip resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tconst name = data.name;\n\t\tconst duration = data.duration;\n\t\tconst inputs = data.inputs.map(function (input) {\n\t\t\treturn new AnimData(1, input);\n\t\t});\n\t\tconst outputs = data.outputs.map(function (output) {\n\t\t\treturn new AnimData(output.components, output.data);\n\t\t});\n\t\tconst curves = data.curves.map(function (curve) {\n\t\t\treturn new AnimCurve([curve.path], curve.inputIndex, curve.outputIndex, curve.interpolation);\n\t\t});\n\t\treturn new AnimTrack(name, duration, inputs, outputs, curves);\n\t}\n\n}\n\nclass AnimStateGraph {\n\tconstructor(data) {\n\t\tthis._layers = [];\n\t\tthis._parameters = {};\n\t\tvar i;\n\n\t\tif (!Array.isArray(data.layers)) {\n\t\t\tfor (var layerId in data.layers) {\n\t\t\t\tvar dataLayer = data.layers[layerId];\n\t\t\t\tvar layer = {\n\t\t\t\t\tname: dataLayer.name,\n\t\t\t\t\tstates: [],\n\t\t\t\t\ttransitions: []\n\t\t\t\t};\n\n\t\t\t\tfor (i = 0; i < dataLayer.states.length; i++) {\n\t\t\t\t\tlayer.states.push(data.states[dataLayer.states[i]]);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < dataLayer.transitions.length; i++) {\n\t\t\t\t\tvar dataLayerTransition = data.transitions[dataLayer.transitions[i]];\n\n\t\t\t\t\tif (dataLayerTransition.conditions && !Array.isArray(dataLayerTransition.conditions)) {\n\t\t\t\t\t\tvar conditionKeys = Object.keys(dataLayerTransition.conditions);\n\t\t\t\t\t\tvar conditions = [];\n\n\t\t\t\t\t\tfor (var j = 0; j < conditionKeys.length; j++) {\n\t\t\t\t\t\t\tvar condition = dataLayerTransition.conditions[conditionKeys[j]];\n\n\t\t\t\t\t\t\tif (condition.parameterName) {\n\t\t\t\t\t\t\t\tconditions.push(condition);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataLayerTransition.conditions = conditions;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Number.isInteger(dataLayerTransition.from)) {\n\t\t\t\t\t\tdataLayerTransition.from = data.states[dataLayerTransition.from].name;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Number.isInteger(dataLayerTransition.to)) {\n\t\t\t\t\t\tdataLayerTransition.to = data.states[dataLayerTransition.to].name;\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer.transitions.push(dataLayerTransition);\n\t\t\t\t}\n\n\t\t\t\tthis._layers.push(layer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._layers = data.layers;\n\t\t}\n\n\t\tfor (var paramId in data.parameters) {\n\t\t\tvar param = data.parameters[paramId];\n\t\t\tthis._parameters[param.name] = {\n\t\t\t\ttype: param.type,\n\t\t\t\tvalue: param.value\n\t\t\t};\n\t\t}\n\t}\n\n\tget parameters() {\n\t\treturn Object.assign({}, this._parameters);\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n}\n\nclass AnimStateGraphHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error loading animation state graph resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t} else {\n\t\t\t\tcallback(null, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn new AnimStateGraph(data);\n\t}\n\n}\n\nclass Sound {\n\tconstructor(resource) {\n\t\tif (resource instanceof Audio) {\n\t\t\tthis.audio = resource;\n\t\t} else {\n\t\t\tthis.buffer = resource;\n\t\t}\n\t}\n\n\tget duration() {\n\t\tlet duration = 0;\n\n\t\tif (this.buffer) {\n\t\t\tduration = this.buffer.duration;\n\t\t} else if (this.audio) {\n\t\t\tduration = this.audio.duration;\n\t\t}\n\n\t\treturn duration || 0;\n\t}\n\n}\n\nconst ie = function () {\n\tif (typeof window === 'undefined') {\n\t\treturn false;\n\t}\n\n\tconst ua = window.navigator.userAgent;\n\tconst msie = ua.indexOf('MSIE ');\n\n\tif (msie > 0) {\n\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n\t}\n\n\tconst trident = ua.indexOf('Trident/');\n\n\tif (trident > 0) {\n\t\tconst rv = ua.indexOf('rv:');\n\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n\t}\n\n\treturn false;\n}();\n\nconst toMIME = {\n\t'.ogg': 'audio/ogg',\n\t'.mp3': 'audio/mpeg',\n\t'.wav': 'audio/x-wav',\n\t'.mp4a': 'audio/mp4',\n\t'.m4a': 'audio/mp4',\n\t'.mp4': 'audio/mp4',\n\t'.aac': 'audio/aac'\n};\n\nclass AudioHandler {\n\tconstructor(manager) {\n\t\tthis.manager = manager;\n\t\tthis.maxRetries = 0;\n\t}\n\n\t_isSupported(url) {\n\t\tconst ext = path.getExtension(url);\n\n\t\tif (toMIME[ext]) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst success = function success(resource) {\n\t\t\tcallback(null, new Sound(resource));\n\t\t};\n\n\t\tconst error = function error(err) {\n\t\t\tlet msg = 'Error loading audio url: ' + url.original;\n\n\t\t\tif (err) {\n\t\t\t\tmsg += ': ' + (err.message || err);\n\t\t\t}\n\n\t\t\tconsole.warn(msg);\n\t\t\tcallback(msg);\n\t\t};\n\n\t\tif (this._createSound) {\n\t\t\tif (!this._isSupported(url.original)) {\n\t\t\t\terror(\"Audio format for \" + url.original + \" not supported\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._createSound(url.load, success, error);\n\t\t} else {\n\t\t\terror(null);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\t_createSound(url, success, error) {\n\t\tif (hasAudioContext()) {\n\t\t\tconst manager = this.manager;\n\n\t\t\tif (!manager.context) {\n\t\t\t\terror('Audio manager has no audio context');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst options = {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t};\n\n\t\t\tif (url.startsWith('blob:') || url.startsWith('data:')) {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t}\n\n\t\t\thttp.get(url, options, function (err, response) {\n\t\t\t\tif (err) {\n\t\t\t\t\terror(err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmanager.context.decodeAudioData(response, success, error);\n\t\t\t});\n\t\t} else {\n\t\t\tlet audio = null;\n\n\t\t\ttry {\n\t\t\t\taudio = new Audio();\n\t\t\t} catch (e) {\n\t\t\t\terror(\"No support for Audio element\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (ie) {\n\t\t\t\tdocument.body.appendChild(audio);\n\t\t\t}\n\n\t\t\tconst onReady = function onReady() {\n\t\t\t\taudio.removeEventListener('canplaythrough', onReady);\n\n\t\t\t\tif (ie) {\n\t\t\t\t\tdocument.body.removeChild(audio);\n\t\t\t\t}\n\n\t\t\t\tsuccess(audio);\n\t\t\t};\n\n\t\t\taudio.onerror = function () {\n\t\t\t\taudio.onerror = null;\n\n\t\t\t\tif (ie) {\n\t\t\t\t\tdocument.body.removeChild(audio);\n\t\t\t\t}\n\n\t\t\t\terror();\n\t\t\t};\n\n\t\t\taudio.addEventListener('canplaythrough', onReady);\n\t\t\taudio.src = url;\n\t\t}\n\t}\n\n}\n\nclass BinaryHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading binary resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass Bundle {\n\tconstructor(files) {\n\t\tthis._blobUrls = {};\n\n\t\tfor (var i = 0, len = files.length; i < len; i++) {\n\t\t\tif (files[i].url) {\n\t\t\t\tthis._blobUrls[files[i].name] = files[i].url;\n\t\t\t}\n\t\t}\n\t}\n\n\thasBlobUrl(url) {\n\t\treturn !!this._blobUrls[url];\n\t}\n\n\tgetBlobUrl(url) {\n\t\treturn this._blobUrls[url];\n\t}\n\n\tdestroy() {\n\t\tfor (var key in this._blobUrls) {\n\t\t\tURL.revokeObjectURL(this._blobUrls[key]);\n\t\t}\n\n\t\tthis._blobUrls = null;\n\t}\n\n}\n\nlet Untar;\n\nfunction UntarScope(isWorker) {\n\tlet utfDecoder;\n\tlet asciiDecoder;\n\n\tif (typeof TextDecoder !== 'undefined') {\n\t\tutfDecoder = new TextDecoder('utf-8');\n\t\tasciiDecoder = new TextDecoder('windows-1252');\n\t} else {\n\t\tconsole.warn('TextDecoder not supported - pc.Untar module will not work');\n\t}\n\n\tfunction PaxHeader(fields) {\n\t\tthis._fields = fields;\n\t}\n\n\tPaxHeader.parse = function (buffer, start, length) {\n\t\tconst paxArray = new Uint8Array(buffer, start, length);\n\t\tlet bytesRead = 0;\n\t\tconst fields = [];\n\n\t\twhile (bytesRead < length) {\n\t\t\tlet spaceIndex;\n\n\t\t\tfor (spaceIndex = bytesRead; spaceIndex < length; spaceIndex++) {\n\t\t\t\tif (paxArray[spaceIndex] === 0x20) break;\n\t\t\t}\n\n\t\t\tif (spaceIndex >= length) {\n\t\t\t\tthrow new Error('Invalid PAX header data format.');\n\t\t\t}\n\n\t\t\tconst fieldLength = parseInt(utfDecoder.decode(new Uint8Array(buffer, start + bytesRead, spaceIndex - bytesRead)), 10);\n\t\t\tconst fieldText = utfDecoder.decode(new Uint8Array(buffer, start + spaceIndex + 1, fieldLength - (spaceIndex - bytesRead) - 2));\n\t\t\tconst field = fieldText.split('=');\n\n\t\t\tif (field.length !== 2) {\n\t\t\t\tthrow new Error('Invalid PAX header data format.');\n\t\t\t}\n\n\t\t\tif (field[1].length === 0) {\n\t\t\t\tfield[1] = null;\n\t\t\t}\n\n\t\t\tfields.push({\n\t\t\t\tname: field[0],\n\t\t\t\tvalue: field[1]\n\t\t\t});\n\t\t\tbytesRead += fieldLength;\n\t\t}\n\n\t\treturn new PaxHeader(fields);\n\t};\n\n\tPaxHeader.prototype.applyHeader = function (file) {\n\t\tfor (let i = 0; i < this._fields.length; i++) {\n\t\t\tlet fieldName = this._fields[i].name;\n\t\t\tconst fieldValue = this._fields[i].value;\n\n\t\t\tif (fieldName === 'path') {\n\t\t\t\tfieldName = 'name';\n\t\t\t}\n\n\t\t\tif (fieldValue === null) {\n\t\t\t\tdelete file[fieldName];\n\t\t\t} else {\n\t\t\t\tfile[fieldName] = fieldValue;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction UntarInternal(arrayBuffer) {\n\t\tthis._arrayBuffer = arrayBuffer || new ArrayBuffer(0);\n\t\tthis._bufferView = new DataView(this._arrayBuffer);\n\t\tthis._globalPaxHeader = null;\n\t\tthis._paxHeader = null;\n\t\tthis._bytesRead = 0;\n\t}\n\n\tif (!isWorker) {\n\t\tUntar = UntarInternal;\n\t}\n\n\tUntarInternal.prototype._hasNext = function () {\n\t\treturn this._bytesRead + 4 < this._arrayBuffer.byteLength && this._bufferView.getUint32(this._bytesRead) !== 0;\n\t};\n\n\tUntarInternal.prototype._readNextFile = function () {\n\t\tconst headersDataView = new DataView(this._arrayBuffer, this._bytesRead, 512);\n\t\tconst headers = asciiDecoder.decode(headersDataView);\n\t\tthis._bytesRead += 512;\n\t\tlet name = headers.substr(0, 100).replace(/\\0/g, '');\n\t\tconst ustarFormat = headers.substr(257, 6);\n\t\tconst size = parseInt(headers.substr(124, 12), 8);\n\t\tconst type = headers.substr(156, 1);\n\t\tconst start = this._bytesRead;\n\t\tlet url = null;\n\t\tlet normalFile = false;\n\n\t\tswitch (type) {\n\t\t\tcase \"0\":\n\t\t\tcase \"\":\n\t\t\t\tnormalFile = true;\n\n\t\t\t\tif (!isWorker) {\n\t\t\t\t\tconst blob = new Blob([this._arrayBuffer.slice(this._bytesRead, this._bytesRead + size)]);\n\t\t\t\t\turl = URL.createObjectURL(blob);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"g\":\n\t\t\t\tthis._globalPaxHeader = PaxHeader.parse(this._arrayBuffer, this._bytesRead, size);\n\t\t\t\tbreak;\n\n\t\t\tcase \"x\":\n\t\t\t\tthis._paxHeader = PaxHeader.parse(this._arrayBuffer, this._bytesRead, size);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._bytesRead += size;\n\t\tconst remainder = size % 512;\n\n\t\tif (remainder !== 0) {\n\t\t\tthis._bytesRead += 512 - remainder;\n\t\t}\n\n\t\tif (!normalFile) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (ustarFormat.indexOf(\"ustar\") !== -1) {\n\t\t\tconst namePrefix = headers.substr(345, 155).replace(/\\0/g, '');\n\n\t\t\tif (namePrefix.length > 0) {\n\t\t\t\tname = namePrefix.trim() + name.trim();\n\t\t\t}\n\t\t}\n\n\t\tconst file = {\n\t\t\tname: name,\n\t\t\tstart: start,\n\t\t\tsize: size,\n\t\t\turl: url\n\t\t};\n\n\t\tif (this._globalPaxHeader) {\n\t\t\tthis._globalPaxHeader.applyHeader(file);\n\t\t}\n\n\t\tif (this._paxHeader) {\n\t\t\tthis._paxHeader.applyHeader(file);\n\n\t\t\tthis._paxHeader = null;\n\t\t}\n\n\t\treturn file;\n\t};\n\n\tUntarInternal.prototype.untar = function (filenamePrefix) {\n\t\tif (!utfDecoder) {\n\t\t\tconsole.error('Cannot untar because TextDecoder interface is not available for this platform.');\n\t\t\treturn [];\n\t\t}\n\n\t\tconst files = [];\n\n\t\twhile (this._hasNext()) {\n\t\t\tconst file = this._readNextFile();\n\n\t\t\tif (!file) continue;\n\n\t\t\tif (filenamePrefix && file.name) {\n\t\t\t\tfile.name = filenamePrefix + file.name;\n\t\t\t}\n\n\t\t\tfiles.push(file);\n\t\t}\n\n\t\treturn files;\n\t};\n\n\tif (isWorker) {\n\t\tself.onmessage = function (e) {\n\t\t\tconst id = e.data.id;\n\n\t\t\ttry {\n\t\t\t\tconst archive = new UntarInternal(e.data.arrayBuffer);\n\t\t\t\tconst files = archive.untar(e.data.prefix);\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: id,\n\t\t\t\t\tfiles: files,\n\t\t\t\t\tarrayBuffer: e.data.arrayBuffer\n\t\t\t\t}, [e.data.arrayBuffer]);\n\t\t\t} catch (err) {\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: id,\n\t\t\t\t\terror: err.toString()\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n}\n\nlet workerUrl = null;\n\nfunction getWorkerUrl() {\n\tif (!workerUrl) {\n\t\tconst code = '(' + UntarScope.toString() + ')(true)\\n\\n';\n\t\tconst blob = new Blob([code], {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tworkerUrl = URL.createObjectURL(blob);\n\t}\n\n\treturn workerUrl;\n}\n\nclass UntarWorker {\n\tconstructor(filenamePrefix) {\n\t\tthis._requestId = 0;\n\t\tthis._pendingRequests = {};\n\t\tthis._filenamePrefix = filenamePrefix;\n\t\tthis._worker = new Worker(getWorkerUrl());\n\n\t\tthis._worker.addEventListener('message', this._onMessage.bind(this));\n\t}\n\n\t_onMessage(e) {\n\t\tconst id = e.data.id;\n\t\tif (!this._pendingRequests[id]) return;\n\t\tconst callback = this._pendingRequests[id];\n\t\tdelete this._pendingRequests[id];\n\n\t\tif (e.data.error) {\n\t\t\tcallback(e.data.error);\n\t\t} else {\n\t\t\tconst arrayBuffer = e.data.arrayBuffer;\n\n\t\t\tfor (let i = 0, len = e.data.files.length; i < len; i++) {\n\t\t\t\tconst file = e.data.files[i];\n\t\t\t\tconst blob = new Blob([arrayBuffer.slice(file.start, file.start + file.size)]);\n\t\t\t\tfile.url = URL.createObjectURL(blob);\n\t\t\t}\n\n\t\t\tcallback(null, e.data.files);\n\t\t}\n\t}\n\n\tuntar(arrayBuffer, callback) {\n\t\tconst id = this._requestId++;\n\t\tthis._pendingRequests[id] = callback;\n\n\t\tthis._worker.postMessage({\n\t\t\tid: id,\n\t\t\tprefix: this._filenamePrefix,\n\t\t\tarrayBuffer: arrayBuffer\n\t\t}, [arrayBuffer]);\n\t}\n\n\thasPendingRequests() {\n\t\tfor (const key in this._pendingRequests) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdestroy() {\n\t\tif (this._worker) {\n\t\t\tthis._worker.terminate();\n\n\t\t\tthis._worker = null;\n\t\t\tthis._pendingRequests = null;\n\t\t}\n\t}\n\n}\n\nUntarScope();\n\nclass BundleHandler {\n\tconstructor(assets) {\n\t\tthis._assets = assets;\n\t\tthis._worker = null;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\thttp.get(url.load, {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\ttry {\n\t\t\t\t\tself._untar(response, callback);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tcallback(\"Error loading bundle resource \" + url.original + \": \" + ex);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading bundle resource \" + url.original + \": \" + err);\n\t\t\t}\n\t\t});\n\t}\n\n\t_untar(response, callback) {\n\t\tconst self = this;\n\n\t\tif (platform.workers) {\n\t\t\tif (!self._worker) {\n\t\t\t\tself._worker = new UntarWorker(self._assets.prefix);\n\t\t\t}\n\n\t\t\tself._worker.untar(response, function (err, files) {\n\t\t\t\tcallback(err, files);\n\n\t\t\t\tif (!self._worker.hasPendingRequests()) {\n\t\t\t\t\tself._worker.destroy();\n\n\t\t\t\t\tself._worker = null;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconst archive = new Untar(response);\n\t\t\tconst files = archive.untar(self._assets.prefix);\n\t\t\tcallback(null, files);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\treturn new Bundle(data);\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass SkinInstanceCachedObject extends RefCountedObject {\n\tconstructor(skin, skinInstance) {\n\t\tsuper();\n\t\tthis.skin = skin;\n\t\tthis.skinInstance = skinInstance;\n\t}\n\n}\n\nclass SkinInstanceCache {\n\tstatic createCachedSkinedInstance(skin, rootBone, entity) {\n\t\tlet skinInst = SkinInstanceCache.getCachedSkinInstance(skin, rootBone);\n\n\t\tif (!skinInst) {\n\t\t\tskinInst = new SkinInstance(skin);\n\t\t\tskinInst.resolve(rootBone, entity);\n\t\t\tSkinInstanceCache.addCachedSkinInstance(skin, rootBone, skinInst);\n\t\t}\n\n\t\treturn skinInst;\n\t}\n\n\tstatic getCachedSkinInstance(skin, rootBone) {\n\t\tlet skinInstance = null;\n\n\t\tconst cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\tif (cachedObjArray) {\n\t\t\tconst cachedObj = cachedObjArray.find(element => element.skin === skin);\n\n\t\t\tif (cachedObj) {\n\t\t\t\tcachedObj.incRefCount();\n\t\t\t\tskinInstance = cachedObj.skinInstance;\n\t\t\t}\n\t\t}\n\n\t\treturn skinInstance;\n\t}\n\n\tstatic addCachedSkinInstance(skin, rootBone, skinInstance) {\n\t\tlet cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\tif (!cachedObjArray) {\n\t\t\tcachedObjArray = [];\n\n\t\t\tSkinInstanceCache._skinInstanceCache.set(rootBone, cachedObjArray);\n\t\t}\n\n\t\tlet cachedObj = cachedObjArray.find(element => element.skin === skin);\n\n\t\tif (!cachedObj) {\n\t\t\tcachedObj = new SkinInstanceCachedObject(skin, skinInstance);\n\t\t\tcachedObjArray.push(cachedObj);\n\t\t}\n\n\t\tcachedObj.incRefCount();\n\t}\n\n\tstatic removeCachedSkinInstance(skinInstance) {\n\t\tif (skinInstance) {\n\t\t\tconst rootBone = skinInstance.rootBone;\n\n\t\t\tif (rootBone) {\n\t\t\t\tconst cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);\n\n\t\t\t\tif (cachedObjArray) {\n\t\t\t\t\tconst cachedObjIndex = cachedObjArray.findIndex(element => element.skinInstance === skinInstance);\n\n\t\t\t\t\tif (cachedObjIndex >= 0) {\n\t\t\t\t\t\tconst cachedObj = cachedObjArray[cachedObjIndex];\n\t\t\t\t\t\tcachedObj.decRefCount();\n\n\t\t\t\t\t\tif (cachedObj.getRefCount() === 0) {\n\t\t\t\t\t\t\tcachedObjArray.splice(cachedObjIndex, 1);\n\n\t\t\t\t\t\t\tif (!cachedObjArray.length) {\n\t\t\t\t\t\t\t\tSkinInstanceCache._skinInstanceCache.delete(rootBone);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (skinInstance) {\n\t\t\t\t\t\t\t\tskinInstance.destroy();\n\t\t\t\t\t\t\t\tcachedObj.skinInstance = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nSkinInstanceCache._skinInstanceCache = new Map();\n\nclass ContainerResource {\n\tconstructor(data) {\n\t\tthis.data = data;\n\t\tthis._model = null;\n\t\tthis.renders = [];\n\t\tthis.materials = [];\n\t\tthis.textures = [];\n\t\tthis.animations = [];\n\t\tthis.registry = null;\n\t\tthis._defaultMaterial = null;\n\t\tthis._assetName = null;\n\t\tthis._assets = null;\n\t}\n\n\tget model() {\n\t\tif (!this._model) {\n\t\t\tconst model = ContainerResource.createModel(this.data, this._defaultMaterial);\n\t\t\tconst modelAsset = ContainerResource.createAsset(this._assetName, 'model', model, 0);\n\n\t\t\tthis._assets.add(modelAsset);\n\n\t\t\tthis._model = modelAsset;\n\t\t}\n\n\t\treturn this._model;\n\t}\n\n\tstatic createAsset(assetName, type, resource, index) {\n\t\tconst subAsset = new Asset(assetName + '/' + type + '/' + index, type, {\n\t\t\turl: ''\n\t\t});\n\t\tsubAsset.resource = resource;\n\t\tsubAsset.loaded = true;\n\t\treturn subAsset;\n\t}\n\n\tinstantiateModelEntity(options) {\n\t\tconst entity = new Entity();\n\t\tentity.addComponent(\"model\", Object.assign({\n\t\t\ttype: \"asset\",\n\t\t\tasset: this.model\n\t\t}, options));\n\t\treturn entity;\n\t}\n\n\tinstantiateRenderEntity(options) {\n\t\tconst defaultMaterial = this._defaultMaterial;\n\t\tconst skinedMeshInstances = [];\n\n\t\tconst createMeshInstance = function createMeshInstance(root, entity, mesh, materials, skins, gltfNode) {\n\t\t\tconst material = mesh.materialIndex === undefined ? defaultMaterial : materials[mesh.materialIndex];\n\t\t\tconst meshInstance = new MeshInstance(mesh, material);\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tmeshInstance.morphInstance = new MorphInstance(mesh.morph);\n\t\t\t}\n\n\t\t\tif (gltfNode.hasOwnProperty('skin')) {\n\t\t\t\tskinedMeshInstances.push({\n\t\t\t\t\tmeshInstance: meshInstance,\n\t\t\t\t\trootBone: root,\n\t\t\t\t\tentity: entity\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn meshInstance;\n\t\t};\n\n\t\tconst cloneHierarchy = function cloneHierarchy(root, node, glb) {\n\t\t\tconst entity = new Entity();\n\n\t\t\tnode._cloneInternal(entity);\n\n\t\t\tif (!root) root = entity;\n\t\t\tlet attachedMi = null;\n\n\t\t\tfor (let i = 0; i < glb.nodes.length; i++) {\n\t\t\t\tconst glbNode = glb.nodes[i];\n\n\t\t\t\tif (glbNode === node) {\n\t\t\t\t\tconst gltfNode = glb.gltf.nodes[i];\n\n\t\t\t\t\tif (gltfNode.hasOwnProperty('mesh')) {\n\t\t\t\t\t\tconst meshGroup = glb.renders[gltfNode.mesh].meshes;\n\n\t\t\t\t\t\tfor (var mi = 0; mi < meshGroup.length; mi++) {\n\t\t\t\t\t\t\tconst mesh = meshGroup[mi];\n\n\t\t\t\t\t\t\tif (mesh) {\n\t\t\t\t\t\t\t\tconst cloneMi = createMeshInstance(root, entity, mesh, glb.materials, glb.skins, gltfNode);\n\n\t\t\t\t\t\t\t\tif (!attachedMi) {\n\t\t\t\t\t\t\t\t\tattachedMi = [];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tattachedMi.push(cloneMi);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (glb.lights) {\n\t\t\t\t\t\tconst lightEntity = glb.lights.get(gltfNode);\n\n\t\t\t\t\t\tif (lightEntity) {\n\t\t\t\t\t\t\tentity.addChild(lightEntity.clone());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attachedMi) {\n\t\t\t\tentity.addComponent(\"render\", Object.assign({\n\t\t\t\t\ttype: \"asset\",\n\t\t\t\t\tmeshInstances: attachedMi\n\t\t\t\t}, options));\n\t\t\t}\n\n\t\t\tconst children = node.children;\n\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tconst childClone = cloneHierarchy(root, children[i], glb);\n\t\t\t\tentity.addChild(childClone);\n\t\t\t}\n\n\t\t\treturn entity;\n\t\t};\n\n\t\tconst sceneClones = [];\n\n\t\tfor (const scene of this.data.scenes) {\n\t\t\tsceneClones.push(cloneHierarchy(null, scene, this.data));\n\t\t}\n\n\t\tskinedMeshInstances.forEach(data => {\n\t\t\tdata.meshInstance.skinInstance = SkinInstanceCache.createCachedSkinedInstance(data.meshInstance.mesh.skin, data.rootBone, data.entity);\n\t\t});\n\t\treturn ContainerResource.createSceneHierarchy(sceneClones, \"Entity\");\n\t}\n\n\tstatic createSceneHierarchy(sceneNodes, nodeType) {\n\t\tlet root = null;\n\n\t\tif (sceneNodes.length === 1) {\n\t\t\troot = sceneNodes[0];\n\t\t} else {\n\t\t\troot = new nodeType('SceneGroup');\n\n\t\t\tfor (const scene of sceneNodes) {\n\t\t\t\troot.addChild(scene);\n\t\t\t}\n\t\t}\n\n\t\treturn root;\n\t}\n\n\tstatic createModel(glb, defaultMaterial) {\n\t\tconst createMeshInstance = function createMeshInstance(model, mesh, skins, skinInstances, materials, node, gltfNode) {\n\t\t\tconst material = mesh.materialIndex === undefined ? defaultMaterial : materials[mesh.materialIndex];\n\t\t\tconst meshInstance = new MeshInstance(mesh, material, node);\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tconst morphInstance = new MorphInstance(mesh.morph);\n\t\t\t\tmeshInstance.morphInstance = morphInstance;\n\t\t\t\tmodel.morphInstances.push(morphInstance);\n\t\t\t}\n\n\t\t\tif (gltfNode.hasOwnProperty('skin')) {\n\t\t\t\tconst skinIndex = gltfNode.skin;\n\t\t\t\tconst skin = skins[skinIndex];\n\t\t\t\tmesh.skin = skin;\n\t\t\t\tconst skinInstance = skinInstances[skinIndex];\n\t\t\t\tmeshInstance.skinInstance = skinInstance;\n\t\t\t\tmodel.skinInstances.push(skinInstance);\n\t\t\t}\n\n\t\t\tmodel.meshInstances.push(meshInstance);\n\t\t};\n\n\t\tconst model = new Model();\n\t\tconst skinInstances = [];\n\n\t\tfor (const skin of glb.skins) {\n\t\t\tconst skinInstance = new SkinInstance(skin);\n\t\t\tskinInstance.bones = skin.bones;\n\t\t\tskinInstances.push(skinInstance);\n\t\t}\n\n\t\tmodel.graph = ContainerResource.createSceneHierarchy(glb.scenes, \"GraphNode\");\n\n\t\tfor (let i = 0; i < glb.nodes.length; i++) {\n\t\t\tconst node = glb.nodes[i];\n\n\t\t\tif (node.root === model.graph) {\n\t\t\t\tconst gltfNode = glb.gltf.nodes[i];\n\n\t\t\t\tif (gltfNode.hasOwnProperty('mesh')) {\n\t\t\t\t\tconst meshGroup = glb.renders[gltfNode.mesh].meshes;\n\n\t\t\t\t\tfor (var mi = 0; mi < meshGroup.length; mi++) {\n\t\t\t\t\t\tconst mesh = meshGroup[mi];\n\n\t\t\t\t\t\tif (mesh) {\n\t\t\t\t\t\t\tcreateMeshInstance(model, mesh, glb.skins, skinInstances, glb.materials, node, gltfNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tdestroy() {\n\t\tconst registry = this.registry;\n\n\t\tconst destroyAsset = function destroyAsset(asset) {\n\t\t\tregistry.remove(asset);\n\t\t\tasset.unload();\n\t\t};\n\n\t\tconst destroyAssets = function destroyAssets(assets) {\n\t\t\tassets.forEach(function (asset) {\n\t\t\t\tdestroyAsset(asset);\n\t\t\t});\n\t\t};\n\n\t\tif (this.animations) {\n\t\t\tdestroyAssets(this.animations);\n\t\t\tthis.animations = null;\n\t\t}\n\n\t\tif (this.textures) {\n\t\t\tdestroyAssets(this.textures);\n\t\t\tthis.textures = null;\n\t\t}\n\n\t\tif (this.materials) {\n\t\t\tdestroyAssets(this.materials);\n\t\t\tthis.materials = null;\n\t\t}\n\n\t\tif (this.renders) {\n\t\t\tdestroyAssets(this.renders);\n\t\t\tthis.renders = null;\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tdestroyAsset(this._model);\n\t\t\tthis._model = null;\n\t\t}\n\n\t\tthis.data = null;\n\t\tthis.assets = null;\n\t}\n\n}\n\nclass ContainerHandler {\n\tconstructor(device, defaultMaterial) {\n\t\tthis._device = device;\n\t\tthis._defaultMaterial = defaultMaterial;\n\t\tthis.maxRetries = 0;\n\t}\n\n\t_getUrlWithoutParams(url) {\n\t\treturn url.indexOf('?') >= 0 ? url.split('?')[0] : url;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tresponseType: Http.ResponseType.ARRAY_BUFFER,\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\tconst self = this;\n\n\t\tconst parseData = function parseData(arrayBuffer) {\n\t\t\tGlbParser.parseAsync(self._getUrlWithoutParams(url.original), path.extractPath(url.load), arrayBuffer, self._device, asset.registry, asset.options, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, new ContainerResource(result));\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif (asset && asset.file && asset.file.contents) {\n\t\t\tparseData(asset.file.contents);\n\t\t} else {\n\t\t\thttp.get(url.load, options, function (err, response) {\n\t\t\t\tif (!callback) return;\n\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(\"Error loading model: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t} else {\n\t\t\t\t\tparseData(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\topen(url, data, asset) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst container = asset.resource;\n\t\tconst data = container && container.data;\n\n\t\tif (data) {\n\t\t\tconst createAsset = function createAsset(type, resource, index) {\n\t\t\t\tconst subAsset = ContainerResource.createAsset(asset.name, type, resource, index);\n\t\t\t\tassets.add(subAsset);\n\t\t\t\treturn subAsset;\n\t\t\t};\n\n\t\t\tlet i;\n\t\t\tconst renders = [];\n\n\t\t\tfor (i = 0; i < data.renders.length; ++i) {\n\t\t\t\trenders.push(createAsset('render', data.renders[i], i));\n\t\t\t}\n\n\t\t\tconst materials = [];\n\n\t\t\tfor (i = 0; i < data.materials.length; ++i) {\n\t\t\t\tmaterials.push(createAsset('material', data.materials[i], i));\n\t\t\t}\n\n\t\t\tconst animations = [];\n\n\t\t\tfor (i = 0; i < data.animations.length; ++i) {\n\t\t\t\tanimations.push(createAsset('animation', data.animations[i], i));\n\t\t\t}\n\n\t\t\tcontainer._assetName = asset.name;\n\t\t\tcontainer._assets = assets;\n\t\t\tcontainer.renders = renders;\n\t\t\tcontainer.materials = materials;\n\t\t\tcontainer.textures = data.textures;\n\t\t\tcontainer.animations = animations;\n\t\t\tcontainer.registry = assets;\n\t\t\tcontainer._defaultMaterial = this._defaultMaterial;\n\t\t}\n\t}\n\n}\n\nclass CssHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading css resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nfunction createStyle(cssString) {\n\tconst result = document.createElement('style');\n\tresult.type = 'text/css';\n\n\tif (result.styleSheet) {\n\t\tresult.styleSheet.cssText = cssString;\n\t} else {\n\t\tresult.appendChild(document.createTextNode(cssString));\n\t}\n\n\treturn result;\n}\n\nclass CubemapHandler {\n\tconstructor(device, assets, loader) {\n\t\tthis._device = device;\n\t\tthis._registry = assets;\n\t\tthis._loader = loader;\n\t}\n\n\tload(url, callback, asset) {\n\t\tthis.loadAssets(asset, callback);\n\t}\n\n\topen(url, data, asset) {\n\t\treturn asset ? asset.resource : null;\n\t}\n\n\tpatch(asset, registry) {\n\t\tthis.loadAssets(asset, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tregistry.fire('error', asset);\n\t\t\t\tregistry.fire('error:' + asset.id, err, asset);\n\t\t\t\tasset.fire('error', asset);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetAssetIds(cubemapAsset) {\n\t\tconst result = [];\n\t\tresult[0] = cubemapAsset.file;\n\n\t\tif ((cubemapAsset.loadFaces || !cubemapAsset.file) && cubemapAsset.data && cubemapAsset.data.textures) {\n\t\t\tfor (let i = 0; i < 6; ++i) {\n\t\t\t\tresult[i + 1] = cubemapAsset.data.textures[i];\n\t\t\t}\n\t\t} else {\n\t\t\tresult[1] = result[2] = result[3] = result[4] = result[5] = result[6] = null;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tcompareAssetIds(assetIdA, assetIdB) {\n\t\tif (assetIdA && assetIdB) {\n\t\t\tif (parseInt(assetIdA, 10) === assetIdA || typeof assetIdA === \"string\") {\n\t\t\t\treturn assetIdA === assetIdB;\n\t\t\t}\n\n\t\t\treturn assetIdA.url === assetIdB.url;\n\t\t}\n\n\t\treturn assetIdA !== null === (assetIdB !== null);\n\t}\n\n\tupdate(cubemapAsset, assetIds, assets) {\n\t\tconst assetData = cubemapAsset.data || {};\n\t\tconst oldAssets = cubemapAsset._handlerState.assets;\n\t\tconst oldResources = cubemapAsset._resources;\n\t\tlet tex, mip, i;\n\t\tconst resources = [null, null, null, null, null, null, null];\n\n\t\tconst getType = function getType() {\n\t\t\tif (assetData.hasOwnProperty('type')) {\n\t\t\t\treturn assetData.type;\n\t\t\t}\n\n\t\t\tif (assetData.hasOwnProperty('rgbm')) {\n\t\t\t\treturn assetData.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (!cubemapAsset.loaded || assets[0] !== oldAssets[0]) {\n\t\t\tif (assets[0]) {\n\t\t\t\ttex = assets[0].resource;\n\n\t\t\t\tfor (i = 0; i < 6; ++i) {\n\t\t\t\t\tconst prelitLevels = [tex._levels[i]];\n\n\t\t\t\t\tif (i === 0 && this._device.useTexCubeLod) {\n\t\t\t\t\t\tfor (mip = 1; mip < tex._levels.length; ++mip) {\n\t\t\t\t\t\t\tprelitLevels[mip] = tex._levels[mip];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst prelit = new Texture(this._device, {\n\t\t\t\t\t\tname: cubemapAsset.name + '_prelitCubemap' + (tex.width >> i),\n\t\t\t\t\t\tcubemap: true,\n\t\t\t\t\t\ttype: getType() || tex.type,\n\t\t\t\t\t\twidth: tex.width >> i,\n\t\t\t\t\t\theight: tex.height >> i,\n\t\t\t\t\t\tformat: tex.format,\n\t\t\t\t\t\tlevels: prelitLevels,\n\t\t\t\t\t\tfixCubemapSeams: true,\n\t\t\t\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t\t\t\t});\n\t\t\t\t\tresources[i + 1] = prelit;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresources[1] = oldResources[1] || null;\n\t\t\tresources[2] = oldResources[2] || null;\n\t\t\tresources[3] = oldResources[3] || null;\n\t\t\tresources[4] = oldResources[4] || null;\n\t\t\tresources[5] = oldResources[5] || null;\n\t\t\tresources[6] = oldResources[6] || null;\n\t\t}\n\n\t\tconst faceAssets = assets.slice(1);\n\n\t\tif (!cubemapAsset.loaded || !this.cmpArrays(faceAssets, oldAssets.slice(1))) {\n\t\t\tif (faceAssets.indexOf(null) === -1) {\n\t\t\t\tconst faceTextures = faceAssets.map(function (asset) {\n\t\t\t\t\treturn asset.resource;\n\t\t\t\t});\n\t\t\t\tconst faceLevels = [];\n\n\t\t\t\tfor (mip = 0; mip < faceTextures[0]._levels.length; ++mip) {\n\t\t\t\t\tfaceLevels.push(faceTextures.map(function (faceTexture) {\n\t\t\t\t\t\treturn faceTexture._levels[mip];\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tconst faces = new Texture(this._device, {\n\t\t\t\t\tname: cubemapAsset.name + '_faces',\n\t\t\t\t\tcubemap: true,\n\t\t\t\t\ttype: getType() || faceTextures[0].type,\n\t\t\t\t\twidth: faceTextures[0].width,\n\t\t\t\t\theight: faceTextures[0].height,\n\t\t\t\t\tformat: faceTextures[0].format,\n\t\t\t\t\tlevels: faceLevels,\n\t\t\t\t\tminFilter: assetData.hasOwnProperty('minFilter') ? assetData.minFilter : faceTextures[0].minFilter,\n\t\t\t\t\tmagFilter: assetData.hasOwnProperty('magFilter') ? assetData.magFilter : faceTextures[0].magFilter,\n\t\t\t\t\tanisotropy: assetData.hasOwnProperty('anisotropy') ? assetData.anisotropy : 1,\n\t\t\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\t\t\tfixCubemapSeams: !!assets[0]\n\t\t\t\t});\n\t\t\t\tresources[0] = faces;\n\t\t\t}\n\t\t} else {\n\t\t\tresources[0] = oldResources[0] || null;\n\t\t}\n\n\t\tif (!this.cmpArrays(resources, oldResources)) {\n\t\t\tcubemapAsset.resources = resources;\n\t\t\tcubemapAsset._handlerState.assetIds = assetIds;\n\t\t\tcubemapAsset._handlerState.assets = assets;\n\n\t\t\tfor (i = 0; i < oldResources.length; ++i) {\n\t\t\t\tif (oldResources[i] !== null && resources.indexOf(oldResources[i]) === -1) {\n\t\t\t\t\toldResources[i].destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < oldAssets.length; ++i) {\n\t\t\tif (oldAssets[i] !== null && assets.indexOf(oldAssets[i]) === -1) {\n\t\t\t\toldAssets[i].unload();\n\t\t\t}\n\t\t}\n\t}\n\n\tcmpArrays(arr1, arr2) {\n\t\tif (arr1.length !== arr2.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < arr1.length; ++i) {\n\t\t\tif (arr1[i] !== arr2[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tresolveId(value) {\n\t\tconst valueInt = parseInt(value, 10);\n\t\treturn valueInt === value || valueInt.toString() === value ? valueInt : value;\n\t}\n\n\tloadAssets(cubemapAsset, callback) {\n\t\tif (!cubemapAsset.hasOwnProperty('_handlerState')) {\n\t\t\tcubemapAsset._handlerState = {\n\t\t\t\tassetIds: [null, null, null, null, null, null, null],\n\t\t\t\tassets: [null, null, null, null, null, null, null]\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\tconst assetIds = self.getAssetIds(cubemapAsset);\n\t\tconst assets = [null, null, null, null, null, null, null];\n\t\tconst loadedAssetIds = cubemapAsset._handlerState.assetIds;\n\t\tconst loadedAssets = cubemapAsset._handlerState.assets;\n\t\tconst registry = self._registry;\n\t\tlet awaiting = 7;\n\n\t\tconst onLoad = function onLoad(index, asset) {\n\t\t\tassets[index] = asset;\n\t\t\tawaiting--;\n\n\t\t\tif (awaiting === 0) {\n\t\t\t\tself.update(cubemapAsset, assetIds, assets);\n\t\t\t\tcallback(null, cubemapAsset.resources);\n\t\t\t}\n\t\t};\n\n\t\tconst onError = function onError(index, err, asset) {\n\t\t\tcallback(err);\n\t\t};\n\n\t\tconst processTexAsset = function processTexAsset(index, texAsset) {\n\t\t\tif (texAsset.loaded) {\n\t\t\t\tonLoad(index, texAsset);\n\t\t\t} else {\n\t\t\t\tregistry.once('load:' + texAsset.id, onLoad.bind(self, index));\n\t\t\t\tregistry.once('error:' + texAsset.id, onError.bind(self, index));\n\n\t\t\t\tif (!texAsset.loading) {\n\t\t\t\t\tregistry.load(texAsset);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet texAsset;\n\n\t\tfor (let i = 0; i < 7; ++i) {\n\t\t\tconst assetId = this.resolveId(assetIds[i]);\n\n\t\t\tif (!assetId) {\n\t\t\t\tonLoad(i, null);\n\t\t\t} else if (self.compareAssetIds(assetId, loadedAssetIds[i])) {\n\t\t\t\tonLoad(i, loadedAssets[i]);\n\t\t\t} else if (parseInt(assetId, 10) === assetId) {\n\t\t\t\ttexAsset = registry.get(assetId);\n\n\t\t\t\tif (texAsset) {\n\t\t\t\t\tprocessTexAsset(i, texAsset);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(function (index, assetId_) {\n\t\t\t\t\t\tconst texAsset = registry.get(assetId_);\n\n\t\t\t\t\t\tif (texAsset) {\n\t\t\t\t\t\t\tprocessTexAsset(index, texAsset);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonError(index, \"failed to find dependent cubemap asset=\" + assetId_);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(null, i, assetId));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst file = typeof assetId === \"string\" ? {\n\t\t\t\t\turl: assetId,\n\t\t\t\t\tfilename: assetId\n\t\t\t\t} : assetId;\n\t\t\t\ttexAsset = new Asset(cubemapAsset.name + \"_part_\" + i, \"texture\", file);\n\t\t\t\tregistry.add(texAsset);\n\t\t\t\tregistry.once('load:' + texAsset.id, onLoad.bind(self, i));\n\t\t\t\tregistry.once('error:' + texAsset.id, onError.bind(self, i));\n\t\t\t\tregistry.load(texAsset);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass FolderHandler {\n\tload(url, callback) {\n\t\tcallback(null, null);\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n}\n\nconst FONT_MSDF = 'msdf';\nconst FONT_BITMAP = 'bitmap';\n\nclass Font {\n\tconstructor(textures, data) {\n\t\tthis.type = data ? data.type || FONT_MSDF : FONT_MSDF;\n\t\tthis.em = 1;\n\t\tthis.textures = textures;\n\t\tthis.intensity = 0.0;\n\t\tthis._data = null;\n\t\tthis.data = data;\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\tset data(value) {\n\t\tthis._data = value;\n\t\tif (!value) return;\n\n\t\tif (this._data.intensity !== undefined) {\n\t\t\tthis.intensity = this._data.intensity;\n\t\t}\n\n\t\tif (!this._data.info) this._data.info = {};\n\n\t\tif (!this._data.version || this._data.version < 2) {\n\t\t\tthis._data.info.maps = [{\n\t\t\t\twidth: this._data.info.width,\n\t\t\t\theight: this._data.info.height\n\t\t\t}];\n\n\t\t\tif (this._data.chars) {\n\t\t\t\tfor (var key in this._data.chars) {\n\t\t\t\t\tthis._data.chars[key].map = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction upgradeDataSchema(data) {\n\tif (data.version < 3) {\n\t\tif (data.version < 2) {\n\t\t\tdata.info.maps = data.info.maps || [{\n\t\t\t\twidth: data.info.width,\n\t\t\t\theight: data.info.height\n\t\t\t}];\n\t\t}\n\n\t\tdata.chars = Object.keys(data.chars || {}).reduce(function (newChars, key) {\n\t\t\tconst existing = data.chars[key];\n\t\t\tconst newKey = existing.letter !== undefined ? existing.letter : string.fromCodePoint(key);\n\n\t\t\tif (data.version < 2) {\n\t\t\t\texisting.map = existing.map || 0;\n\t\t\t}\n\n\t\t\tnewChars[newKey] = existing;\n\t\t\treturn newChars;\n\t\t}, {});\n\t\tdata.version = 3;\n\t}\n\n\treturn data;\n}\n\nclass FontHandler {\n\tconstructor(loader) {\n\t\tthis._loader = loader;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tconst data = upgradeDataSchema(response);\n\n\t\t\t\t\tself._loadTextures(url.load.replace('.json', '.png'), data, function (err, textures) {\n\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\ttextures: textures\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(\"Error loading font resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (asset && asset.data) {\n\t\t\t\tasset.data = upgradeDataSchema(asset.data);\n\t\t\t}\n\n\t\t\tthis._loadTextures(url.load, asset && asset.data, callback);\n\t\t}\n\t}\n\n\t_loadTextures(url, data, callback) {\n\t\tconst numTextures = data.info.maps.length;\n\t\tlet numLoaded = 0;\n\t\tlet error = null;\n\t\tconst textures = new Array(numTextures);\n\t\tconst loader = this._loader;\n\n\t\tconst loadTexture = function loadTexture(index) {\n\t\t\tconst onLoaded = function onLoaded(err, texture) {\n\t\t\t\tif (error) return;\n\n\t\t\t\tif (err) {\n\t\t\t\t\terror = err;\n\t\t\t\t\treturn callback(err);\n\t\t\t\t}\n\n\t\t\t\ttexture.upload();\n\t\t\t\ttextures[index] = texture;\n\t\t\t\tnumLoaded++;\n\n\t\t\t\tif (numLoaded === numTextures) {\n\t\t\t\t\tcallback(null, textures);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (index === 0) {\n\t\t\t\tloader.load(url, \"texture\", onLoaded);\n\t\t\t} else {\n\t\t\t\tloader.load(url.replace('.png', index + '.png'), \"texture\", onLoaded);\n\t\t\t}\n\t\t};\n\n\t\tfor (let i = 0; i < numTextures; i++) loadTexture(i);\n\t}\n\n\topen(url, data, asset) {\n\t\tlet font;\n\n\t\tif (data.textures) {\n\t\t\tfont = new Font(data.textures, data.data);\n\t\t} else {\n\t\t\tfont = new Font(data, null);\n\t\t}\n\n\t\treturn font;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst font = asset.resource;\n\n\t\tif (!font.data && asset.data) {\n\t\t\tfont.data = asset.data;\n\t\t} else if (!asset.data && font.data) {\n\t\t\tasset.data = font.data;\n\t\t}\n\n\t\tif (asset.data) {\n\t\t\tasset.data = upgradeDataSchema(asset.data);\n\t\t}\n\t}\n\n}\n\nvar CompressUtils = {\n\tsetCompressedPRS: function (entity, data, compressed) {\n\t\tvar a = compressed.singleVecs;\n\t\tvar b, i;\n\t\tvar v = data.___1;\n\n\t\tif (!v) {\n\t\t\tb = compressed.tripleVecs;\n\t\t\ti = data.___2;\n\t\t}\n\n\t\tvar n = v ? v[0] : b[i];\n\t\tentity.setLocalPosition(a[n], a[n + 1], a[n + 2]);\n\t\tn = v ? v[1] : b[i + 1];\n\t\tentity.setLocalEulerAngles(a[n], a[n + 1], a[n + 2]);\n\t\tn = v ? v[2] : b[i + 2];\n\t\tentity.setLocalScale(a[n], a[n + 1], a[n + 2]);\n\t},\n\toneCharToKey: function (s, data) {\n\t\tvar i = s.charCodeAt(0) - data.fieldFirstCode;\n\t\treturn data.fieldArray[i];\n\t},\n\tmultCharToKey: function (s, data) {\n\t\tvar ind = 0;\n\n\t\tfor (var i = 0; i < s.length; i++) {\n\t\t\tind = ind * data.fieldCodeBase + s.charCodeAt(i) - data.fieldFirstCode;\n\t\t}\n\n\t\treturn data.fieldArray[ind];\n\t}\n};\n\nclass Decompress {\n\tconstructor(node, data) {\n\t\tthis._node = node;\n\t\tthis._data = data;\n\t}\n\n\trun() {\n\t\tvar type = Object.prototype.toString.call(this._node);\n\n\t\tif (type === '[object Object]') {\n\t\t\tthis._handleMap();\n\t\t} else if (type === '[object Array]') {\n\t\t\tthis._handleArray();\n\t\t} else {\n\t\t\tthis._result = this._node;\n\t\t}\n\n\t\treturn this._result;\n\t}\n\n\t_handleMap() {\n\t\tthis._result = {};\n\t\tvar a = Object.keys(this._node);\n\t\ta.forEach(this._handleKey, this);\n\t}\n\n\t_handleKey(origKey) {\n\t\tvar newKey = origKey;\n\t\tvar len = origKey.length;\n\n\t\tif (len === 1) {\n\t\t\tnewKey = CompressUtils.oneCharToKey(origKey, this._data);\n\t\t} else if (len === 2) {\n\t\t\tnewKey = CompressUtils.multCharToKey(origKey, this._data);\n\t\t}\n\n\t\tthis._result[newKey] = new Decompress(this._node[origKey], this._data).run();\n\t}\n\n\t_handleArray() {\n\t\tthis._result = [];\n\n\t\tthis._node.forEach(this._handleArElt, this);\n\t}\n\n\t_handleArElt(elt) {\n\t\tvar v = new Decompress(elt, this._data).run();\n\n\t\tthis._result.push(v);\n\t}\n\n}\n\nclass SceneParser {\n\tconstructor(app, isTemplate) {\n\t\tthis._app = app;\n\t\tthis._isTemplate = isTemplate;\n\t}\n\n\tparse(data) {\n\t\tconst entities = {};\n\t\tlet parent = null;\n\t\tconst compressed = data.compressedFormat;\n\n\t\tif (compressed && !data.entDecompressed) {\n\t\t\tdata.entDecompressed = true;\n\t\t\tdata.entities = new Decompress(data.entities, compressed).run();\n\t\t}\n\n\t\tfor (const id in data.entities) {\n\t\t\tconst curData = data.entities[id];\n\n\t\t\tconst curEnt = this._createEntity(curData, compressed);\n\n\t\t\tentities[id] = curEnt;\n\n\t\t\tif (curData.parent === null) {\n\t\t\t\tparent = curEnt;\n\t\t\t}\n\t\t}\n\n\t\tfor (const id in data.entities) {\n\t\t\tconst curEnt = entities[id];\n\t\t\tconst children = data.entities[id].children;\n\t\t\tconst len = children.length;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tconst childEnt = entities[children[i]];\n\n\t\t\t\tif (childEnt) {\n\t\t\t\t\tcurEnt.addChild(childEnt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._openComponentData(parent, data.entities);\n\n\t\treturn parent;\n\t}\n\n\t_createEntity(data, compressed) {\n\t\tconst entity = new Entity();\n\t\tentity.name = data.name;\n\t\tentity.setGuid(data.resource_id);\n\n\t\tthis._setPosRotScale(entity, data, compressed);\n\n\t\tentity._enabled = data.enabled !== undefined ? data.enabled : true;\n\n\t\tif (this._isTemplate) {\n\t\t\tentity._template = true;\n\t\t} else {\n\t\t\tentity._enabledInHierarchy = entity._enabled;\n\t\t}\n\n\t\tentity.template = data.template;\n\n\t\tif (data.tags) {\n\t\t\tfor (let i = 0; i < data.tags.length; i++) {\n\t\t\t\tentity.tags.add(data.tags[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.labels) {\n\t\t\tdata.labels.forEach(function (label) {\n\t\t\t\tentity.addLabel(label);\n\t\t\t});\n\t\t}\n\n\t\treturn entity;\n\t}\n\n\t_setPosRotScale(entity, data, compressed) {\n\t\tif (compressed) {\n\t\t\tCompressUtils.setCompressedPRS(entity, data, compressed);\n\t\t} else {\n\t\t\tconst p = data.position;\n\t\t\tconst r = data.rotation;\n\t\t\tconst s = data.scale;\n\t\t\tentity.setLocalPosition(p[0], p[1], p[2]);\n\t\t\tentity.setLocalEulerAngles(r[0], r[1], r[2]);\n\t\t\tentity.setLocalScale(s[0], s[1], s[2]);\n\t\t}\n\t}\n\n\t_openComponentData(entity, entities) {\n\t\tconst systemsList = this._app.systems.list;\n\t\tlet len = systemsList.length;\n\t\tconst entityData = entities[entity.getGuid()];\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tconst system = systemsList[i];\n\t\t\tconst componentData = entityData.components[system.id];\n\n\t\t\tif (componentData) {\n\t\t\t\tsystem.addComponent(entity, componentData);\n\t\t\t}\n\t\t}\n\n\t\tlen = entityData.children.length;\n\t\tconst children = entity._children;\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tchildren[i] = this._openComponentData(children[i], entities);\n\t\t}\n\n\t\treturn entity;\n\t}\n\n}\n\nconst SceneUtils = {\n\tload: function (url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(err, response);\n\t\t\t} else {\n\t\t\t\tlet errMsg = 'Error while loading scene JSON ' + url.original;\n\n\t\t\t\tif (err.message) {\n\t\t\t\t\terrMsg += ': ' + err.message;\n\n\t\t\t\t\tif (err.stack) {\n\t\t\t\t\t\terrMsg += '\\n' + err.stack;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\terrMsg += ': ' + err;\n\t\t\t\t}\n\n\t\t\t\tcallback(errMsg);\n\t\t\t}\n\t\t});\n\t}\n};\n\nclass HierarchyHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\tthis._app.systems.script.preloading = true;\n\t\tconst parser = new SceneParser(this._app, false);\n\t\tconst parent = parser.parse(data);\n\t\tthis._app.systems.script.preloading = false;\n\t\treturn parent;\n\t}\n\n}\n\nclass HtmlHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading html resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass JsonHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:')) {\n\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading JSON resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass AssetReference {\n\tconstructor(propertyName, parent, registry, callbacks, scope) {\n\t\tthis.propertyName = propertyName;\n\t\tthis.parent = parent;\n\t\tthis._scope = scope;\n\t\tthis._registry = registry;\n\t\tthis.id = null;\n\t\tthis.url = null;\n\t\tthis.asset = null;\n\t\tthis._onAssetLoad = callbacks.load;\n\t\tthis._onAssetAdd = callbacks.add;\n\t\tthis._onAssetRemove = callbacks.remove;\n\t\tthis._onAssetUnload = callbacks.unload;\n\t}\n\n\t_bind() {\n\t\tif (this.id) {\n\t\t\tif (this._onAssetLoad) this._registry.on(\"load:\" + this.id, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.once(\"add:\" + this.id, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.on(\"remove:\" + this.id, this._onRemove, this);\n\t\t\tif (this._onAssetUnload) this._registry.on(\"unload:\" + this.id, this._onUnload, this);\n\t\t}\n\n\t\tif (this.url) {\n\t\t\tif (this._onAssetLoad) this._registry.on(\"load:url:\" + this.url, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.once(\"add:url:\" + this.url, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.on(\"remove:url:\" + this.url, this._onRemove, this);\n\t\t}\n\t}\n\n\t_unbind() {\n\t\tif (this.id) {\n\t\t\tif (this._onAssetLoad) this._registry.off('load:' + this.id, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.off('add:' + this.id, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.off('remove:' + this.id, this._onRemove, this);\n\t\t\tif (this._onAssetUnload) this._registry.off(\"unload:\" + this.id, this._onUnload, this);\n\t\t}\n\n\t\tif (this.url) {\n\t\t\tif (this._onAssetLoad) this._registry.off('load:' + this.url, this._onLoad, this);\n\t\t\tif (this._onAssetAdd) this._registry.off('add:' + this.url, this._onAdd, this);\n\t\t\tif (this._onAssetRemove) this._registry.off('remove:' + this.url, this._onRemove, this);\n\t\t}\n\t}\n\n\t_onLoad(asset) {\n\t\tthis._onAssetLoad.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\t_onAdd(asset) {\n\t\tthis.asset = asset;\n\n\t\tthis._onAssetAdd.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\t_onRemove(asset) {\n\t\tthis._onAssetRemove.call(this._scope, this.propertyName, this.parent, asset);\n\n\t\tthis.asset = null;\n\t}\n\n\t_onUnload(asset) {\n\t\tthis._onAssetUnload.call(this._scope, this.propertyName, this.parent, asset);\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tset id(value) {\n\t\tif (this.url) throw Error(\"Can't set id and url\");\n\n\t\tthis._unbind();\n\n\t\tthis._id = value;\n\t\tthis.asset = this._registry.get(this._id);\n\n\t\tthis._bind();\n\t}\n\n\tget url() {\n\t\treturn this._url;\n\t}\n\n\tset url(value) {\n\t\tif (this.id) throw Error(\"Can't set id and url\");\n\n\t\tthis._unbind();\n\n\t\tthis._url = value;\n\t\tthis.asset = this._registry.getByUrl(this._url);\n\n\t\tthis._bind();\n\t}\n\n}\n\nfunction StandardMaterialValidator() {\n\tthis.removeInvalid = true;\n\tthis.valid = true;\n\tthis.enumValidators = {\n\t\toccludeSpecular: this._createEnumValidator([SPECOCC_NONE, SPECOCC_AO, SPECOCC_GLOSSDEPENDENT]),\n\t\tcull: this._createEnumValidator([CULLFACE_NONE, CULLFACE_BACK, CULLFACE_FRONT, CULLFACE_FRONTANDBACK]),\n\t\tblendType: this._createEnumValidator([BLEND_SUBTRACTIVE, BLEND_ADDITIVE, BLEND_NORMAL, BLEND_NONE, BLEND_PREMULTIPLIED, BLEND_MULTIPLICATIVE, BLEND_ADDITIVEALPHA, BLEND_MULTIPLICATIVE2X, BLEND_SCREEN, BLEND_MIN, BLEND_MAX]),\n\t\tshadingModel: this._createEnumValidator([SPECULAR_PHONG, SPECULAR_BLINN])\n\t};\n}\n\nStandardMaterialValidator.prototype.setInvalid = function (key, data) {\n\tthis.valid = false;\n\n\tif (this.removeInvalid) {\n\t\tdelete data[key];\n\t}\n};\n\nStandardMaterialValidator.prototype.validate = function (data) {\n\tvar TYPES = standardMaterialParameterTypes;\n\tvar type;\n\tvar i;\n\tvar pathMapping = data.mappingFormat === \"path\";\n\n\tfor (var key in data) {\n\t\ttype = TYPES[key];\n\n\t\tif (!type) {\n\t\t\tthis.valid = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (type.startsWith(\"enum\")) {\n\t\t\tvar enumType = type.split(\":\")[1];\n\n\t\t\tif (this.enumValidators[enumType]) {\n\t\t\t\tif (!this.enumValidators[enumType](data[key])) {\n\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'number') {\n\t\t\tif (typeof data[key] !== 'number') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'boolean') {\n\t\t\tif (typeof data[key] !== 'boolean') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'string') {\n\t\t\tif (typeof data[key] !== 'string') {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'vec2') {\n\t\t\tif (!(data[key] instanceof Array && data[key].length === 2)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'rgb') {\n\t\t\tif (!(data[key] instanceof Array && data[key].length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'texture') {\n\t\t\tif (!pathMapping) {\n\t\t\t\tif (!(typeof data[key] === 'number' || data[key] === null)) {\n\t\t\t\t\tif (!(data[key] instanceof Texture)) {\n\t\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!(typeof data[key] === 'string' || data[key === null])) {\n\t\t\t\t\tif (!(data[key] instanceof Texture)) {\n\t\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'boundingbox') {\n\t\t\tif (!(data[key].center && data[key].center instanceof Array && data[key].center.length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\n\t\t\tif (!(data[key].halfExtents && data[key].halfExtents instanceof Array && data[key].halfExtents.length === 3)) {\n\t\t\t\tthis.setInvalid(key, data);\n\t\t\t}\n\t\t} else if (type === 'cubemap') {\n\t\t\tif (!(typeof data[key] === 'number' || data[key] === null || data[key] === undefined)) {\n\t\t\t\tif (!(data[key] instanceof Texture && data[key].cubemap)) {\n\t\t\t\t\tthis.setInvalid(key, data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (type === 'chunks') {\n\t\t\tvar chunkNames = Object.keys(data[key]);\n\n\t\t\tfor (i = 0; i < chunkNames.length; i++) {\n\t\t\t\tif (typeof data[key][chunkNames[i]] !== 'string') {\n\t\t\t\t\tthis.setInvalid(chunkNames[i], data[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"Unknown material type: \" + type);\n\t\t}\n\t}\n\n\tdata.validated = true;\n\treturn this.valid;\n};\n\nStandardMaterialValidator.prototype._createEnumValidator = function (values) {\n\treturn function (value) {\n\t\treturn values.indexOf(value) >= 0;\n\t};\n};\n\nclass JsonStandardMaterialParser {\n\tconstructor() {\n\t\tthis._validator = null;\n\t}\n\n\tparse(input) {\n\t\tconst migrated = this.migrate(input);\n\n\t\tconst validated = this._validate(migrated);\n\n\t\tconst material = new StandardMaterial();\n\t\tthis.initialize(material, validated);\n\t\treturn material;\n\t}\n\n\tinitialize(material, data) {\n\t\tif (!data.validated) {\n\t\t\tdata = this._validate(data);\n\t\t}\n\n\t\tif (data.chunks) {\n\t\t\tmaterial.chunks.copy(data.chunks);\n\t\t}\n\n\t\tfor (const key in data) {\n\t\t\tconst type = standardMaterialParameterTypes[key];\n\t\t\tconst value = data[key];\n\n\t\t\tif (type === 'vec2') {\n\t\t\t\tmaterial[key] = new Vec2(value[0], value[1]);\n\t\t\t} else if (type === 'rgb') {\n\t\t\t\tmaterial[key] = new Color(value[0], value[1], value[2]);\n\t\t\t} else if (type === 'texture') {\n\t\t\t\tif (value instanceof Texture) {\n\t\t\t\t\tmaterial[key] = value;\n\t\t\t\t} else if (!(material[key] instanceof Texture && typeof value === 'number' && value > 0)) {\n\t\t\t\t\tmaterial[key] = null;\n\t\t\t\t}\n\t\t\t} else if (type === 'cubemap') {\n\t\t\t\tif (value instanceof Texture) {\n\t\t\t\t\tmaterial[key] = value;\n\t\t\t\t} else if (!(material[key] instanceof Texture && typeof value === 'number' && value > 0)) {\n\t\t\t\t\tmaterial[key] = null;\n\t\t\t\t}\n\t\t\t} else if (type === 'boundingbox') {\n\t\t\t\tconst center = new Vec3(value.center[0], value.center[1], value.center[2]);\n\t\t\t\tconst halfExtents = new Vec3(value.halfExtents[0], value.halfExtents[1], value.halfExtents[2]);\n\t\t\t\tmaterial[key] = new BoundingBox(center, halfExtents);\n\t\t\t} else {\n\t\t\t\tmaterial[key] = data[key];\n\t\t\t}\n\t\t}\n\n\t\tmaterial.update();\n\t}\n\n\tmigrate(data) {\n\t\tif (data.shadingModel === undefined) {\n\t\t\tif (data.shader === 'blinn') {\n\t\t\t\tdata.shadingModel = SPECULAR_BLINN;\n\t\t\t} else {\n\t\t\t\tdata.shadingModel = SPECULAR_PHONG;\n\t\t\t}\n\t\t}\n\n\t\tif (data.shader) delete data.shader;\n\n\t\tif (data.mapping_format) {\n\t\t\tdata.mappingFormat = data.mapping_format;\n\t\t\tdelete data.mapping_format;\n\t\t}\n\n\t\tlet i;\n\t\tconst RENAMED_PROPERTIES = [[\"bumpMapFactor\", \"bumpiness\"], [\"aoUvSet\", \"aoMapUv\"], [\"aoMapVertexColor\", \"aoVertexColor\"], [\"diffuseMapVertexColor\", \"diffuseVertexColor\"], [\"emissiveMapVertexColor\", \"emissiveVertexColor\"], [\"specularMapVertexColor\", \"specularVertexColor\"], [\"metalnessMapVertexColor\", \"metalnessVertexColor\"], [\"opacityMapVertexColor\", \"opacityVertexColor\"], [\"glossMapVertexColor\", \"glossVertexColor\"], [\"lightMapVertexColor\", \"lightVertexColor\"], [\"diffuseMapTint\", \"diffuseTint\"], [\"specularMapTint\", \"specularTint\"], [\"emissiveMapTint\", \"emissiveTint\"], [\"metalnessMapTint\", \"metalnessTint\"]];\n\n\t\tfor (i = 0; i < RENAMED_PROPERTIES.length; i++) {\n\t\t\tconst _old = RENAMED_PROPERTIES[i][0];\n\t\t\tconst _new = RENAMED_PROPERTIES[i][1];\n\n\t\t\tif (data[_old] !== undefined && !(data[_new] !== undefined)) {\n\t\t\t\tdata[_new] = data[_old];\n\t\t\t\tdelete data[_old];\n\t\t\t}\n\t\t}\n\n\t\tconst DEPRECATED_PROPERTIES = ['fresnelFactor', 'shadowSampleType'];\n\n\t\tfor (i = 0; i < DEPRECATED_PROPERTIES.length; i++) {\n\t\t\tconst name = DEPRECATED_PROPERTIES[i];\n\n\t\t\tif (data.hasOwnProperty(name)) {\n\t\t\t\tdelete data[name];\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t_validate(data) {\n\t\tif (!data.validated) {\n\t\t\tif (!this._validator) {\n\t\t\t\tthis._validator = new StandardMaterialValidator();\n\t\t\t}\n\n\t\t\tthis._validator.validate(data);\n\t\t}\n\n\t\treturn data;\n\t}\n\n}\n\nconst PLACEHOLDER_MAP = {\n\taoMap: 'white',\n\tdiffuseMap: 'gray',\n\tspecularMap: 'gray',\n\tmetalnessMap: 'black',\n\tglossMap: 'gray',\n\temissiveMap: 'gray',\n\tnormalMap: 'normal',\n\theightMap: 'gray',\n\topacityMap: 'gray',\n\tsphereMap: 'gray',\n\tlightMap: 'white'\n};\n\nclass MaterialHandler {\n\tconstructor(app) {\n\t\tthis._assets = app.assets;\n\t\tthis._device = app.graphicsDevice;\n\t\tthis._placeholderTextures = null;\n\t\tthis._parser = new JsonStandardMaterialParser();\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tif (callback) {\n\t\t\t\t\tresponse._engine = true;\n\t\t\t\t\tcallback(null, response);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(\"Error loading material: \" + url.original + \" [\" + err + \"]\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tconst material = this._parser.parse(data);\n\n\t\tif (data._engine) {\n\t\t\tmaterial._data = data;\n\t\t\tdelete data._engine;\n\t\t}\n\n\t\treturn material;\n\t}\n\n\t_createPlaceholders() {\n\t\tthis._placeholderTextures = {};\n\t\tconst textures = {\n\t\t\twhite: [255, 255, 255, 255],\n\t\t\tgray: [128, 128, 128, 255],\n\t\t\tblack: [0, 0, 0, 255],\n\t\t\tnormal: [128, 128, 255, 255]\n\t\t};\n\n\t\tfor (const key in textures) {\n\t\t\tif (!textures.hasOwnProperty(key)) continue;\n\t\t\tthis._placeholderTextures[key] = new Texture(this._device, {\n\t\t\t\twidth: 2,\n\t\t\t\theight: 2,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t\t});\n\t\t\tthis._placeholderTextures[key].name = 'placeholder';\n\n\t\t\tconst pixels = this._placeholderTextures[key].lock();\n\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tfor (let c = 0; c < 4; c++) {\n\t\t\t\t\tpixels[i * 4 + c] = textures[key][c];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._placeholderTextures[key].unlock();\n\t\t}\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (asset.resource._data) {\n\t\t\tasset._data = asset.resource._data;\n\t\t\tdelete asset.resource._data;\n\t\t}\n\n\t\tasset.data.name = asset.name;\n\t\tasset.resource.name = asset.name;\n\n\t\tthis._bindAndAssignAssets(asset, assets);\n\n\t\tasset.off('unload', this._onAssetUnload, this);\n\t\tasset.on('unload', this._onAssetUnload, this);\n\t}\n\n\t_onAssetUnload(asset) {\n\t\tdelete asset.data.parameters;\n\t\tdelete asset.data.chunks;\n\t\tdelete asset.data.name;\n\t}\n\n\t_assignTexture(parameterName, materialAsset, texture) {\n\t\tmaterialAsset.resource[parameterName] = texture;\n\t}\n\n\t_getPlaceholderTexture(parameterName) {\n\t\tif (!this._placeholderTextures) {\n\t\t\tthis._createPlaceholders();\n\t\t}\n\n\t\tconst placeholder = PLACEHOLDER_MAP[parameterName];\n\t\tconst texture = this._placeholderTextures[placeholder];\n\t\treturn texture;\n\t}\n\n\t_assignPlaceholderTexture(parameterName, materialAsset) {\n\t\tmaterialAsset.resource[parameterName] = this._getPlaceholderTexture(parameterName, materialAsset);\n\t}\n\n\t_onTextureLoad(parameterName, materialAsset, textureAsset) {\n\t\tthis._assignTexture(parameterName, materialAsset, textureAsset.resource);\n\n\t\tmaterialAsset.resource.update();\n\t}\n\n\t_onTextureAdd(parameterName, materialAsset, textureAsset) {\n\t\tthis._assets.load(textureAsset);\n\t}\n\n\t_onTextureRemoveOrUnload(parameterName, materialAsset, textureAsset) {\n\t\tconst material = materialAsset.resource;\n\n\t\tif (material) {\n\t\t\tif (materialAsset.resource[parameterName] === textureAsset.resource) {\n\t\t\t\tthis._assignPlaceholderTexture(parameterName, materialAsset);\n\n\t\t\t\tmaterial.update();\n\t\t\t}\n\t\t}\n\t}\n\n\t_assignCubemap(parameterName, materialAsset, textures) {\n\t\tmaterialAsset.resource[parameterName] = textures[0];\n\n\t\tif (textures.length === 7) {\n\t\t\tmaterialAsset.resource.prefilteredCubeMap128 = textures[1];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap64 = textures[2];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap32 = textures[3];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap16 = textures[4];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap8 = textures[5];\n\t\t\tmaterialAsset.resource.prefilteredCubeMap4 = textures[6];\n\t\t}\n\t}\n\n\t_onCubemapLoad(parameterName, materialAsset, cubemapAsset) {\n\t\tthis._assignCubemap(parameterName, materialAsset, cubemapAsset.resources);\n\n\t\tthis._parser.initialize(materialAsset.resource, materialAsset.data);\n\t}\n\n\t_onCubemapAdd(parameterName, materialAsset, cubemapAsset) {\n\t\tif (materialAsset.data.shadingModel === SPECULAR_PHONG) {\n\t\t\tmaterialAsset.loadFaces = true;\n\t\t}\n\n\t\tthis._assets.load(cubemapAsset);\n\t}\n\n\t_onCubemapRemoveOrUnload(parameterName, materialAsset, cubemapAsset) {\n\t\tconst material = materialAsset.resource;\n\n\t\tif (materialAsset.data.prefilteredCubeMap128 === cubemapAsset.resources[1]) {\n\t\t\tthis._assignCubemap(parameterName, materialAsset, [null, null, null, null, null, null, null]);\n\n\t\t\tmaterial.update();\n\t\t}\n\t}\n\n\t_bindAndAssignAssets(materialAsset, assets) {\n\t\tconst data = this._parser.migrate(materialAsset.data);\n\n\t\tconst material = materialAsset.resource;\n\t\tconst pathMapping = data.mappingFormat === \"path\";\n\t\tconst TEXTURES = standardMaterialTextureParameters;\n\t\tlet i, name, assetReference;\n\n\t\tfor (i = 0; i < TEXTURES.length; i++) {\n\t\t\tname = TEXTURES[i];\n\t\t\tassetReference = material._assetReferences[name];\n\t\t\tconst dataAssetId = data[name];\n\t\t\tconst materialTexture = material[name];\n\n\t\t\tconst isPlaceHolderTexture = materialTexture === this._getPlaceholderTexture(name, materialAsset);\n\n\t\t\tconst dataValidated = data.validated;\n\n\t\t\tif (dataAssetId && (!materialTexture || !dataValidated || isPlaceHolderTexture)) {\n\t\t\t\tif (!assetReference) {\n\t\t\t\t\tassetReference = new AssetReference(name, materialAsset, assets, {\n\t\t\t\t\t\tload: this._onTextureLoad,\n\t\t\t\t\t\tadd: this._onTextureAdd,\n\t\t\t\t\t\tremove: this._onTextureRemoveOrUnload,\n\t\t\t\t\t\tunload: this._onTextureRemoveOrUnload\n\t\t\t\t\t}, this);\n\t\t\t\t\tmaterial._assetReferences[name] = assetReference;\n\t\t\t\t}\n\n\t\t\t\tif (pathMapping) {\n\t\t\t\t\tassetReference.url = materialAsset.getAbsoluteUrl(dataAssetId);\n\t\t\t\t} else {\n\t\t\t\t\tassetReference.id = dataAssetId;\n\t\t\t\t}\n\n\t\t\t\tif (assetReference.asset) {\n\t\t\t\t\tif (assetReference.asset.resource) {\n\t\t\t\t\t\tthis._assignTexture(name, materialAsset, assetReference.asset.resource);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._assignPlaceholderTexture(name, materialAsset);\n\t\t\t\t\t}\n\n\t\t\t\t\tassets.load(assetReference.asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (assetReference) {\n\t\t\t\t\tif (pathMapping) {\n\t\t\t\t\t\tassetReference.url = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tassetReference.id = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst CUBEMAPS = standardMaterialCubemapParameters;\n\n\t\tfor (i = 0; i < CUBEMAPS.length; i++) {\n\t\t\tname = CUBEMAPS[i];\n\t\t\tassetReference = material._assetReferences[name];\n\n\t\t\tif (data[name] && !materialAsset.data.prefilteredCubeMap128) {\n\t\t\t\tif (!assetReference) {\n\t\t\t\t\tassetReference = new AssetReference(name, materialAsset, assets, {\n\t\t\t\t\t\tload: this._onCubemapLoad,\n\t\t\t\t\t\tadd: this._onCubemapAdd,\n\t\t\t\t\t\tremove: this._onCubemapRemoveOrUnload,\n\t\t\t\t\t\tunload: this._onCubemapRemoveOrUnload\n\t\t\t\t\t}, this);\n\t\t\t\t\tmaterial._assetReferences[name] = assetReference;\n\t\t\t\t}\n\n\t\t\t\tif (pathMapping) {\n\t\t\t\t\tassetReference.url = data[name];\n\t\t\t\t} else {\n\t\t\t\t\tassetReference.id = data[name];\n\t\t\t\t}\n\n\t\t\t\tif (assetReference.asset) {\n\t\t\t\t\tif (assetReference.asset.loaded) {\n\t\t\t\t\t\tthis._assignCubemap(name, materialAsset, assetReference.asset.resources);\n\t\t\t\t\t}\n\n\t\t\t\t\tassets.load(assetReference.asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._parser.initialize(material, data);\n\t}\n\n}\n\nclass GlbModelParser {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t}\n\n\tparse(data) {\n\t\tconst glbResources = GlbParser.parse(\"filename.glb\", data, this._device);\n\n\t\tif (glbResources) {\n\t\t\tconst model = ContainerResource.createModel(glbResources, Material.defaultMaterial);\n\t\t\tglbResources.destroy();\n\t\t\treturn model;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass PartitionedVertex {\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.boneIndices = [0, 0, 0, 0];\n\t}\n\n}\n\nclass SkinPartition {\n\tconstructor() {\n\t\tthis.partition = 0;\n\t\tthis.vertexStart = 0;\n\t\tthis.vertexCount = 0;\n\t\tthis.indexStart = 0;\n\t\tthis.indexCount = 0;\n\t\tthis.boneIndices = [];\n\t\tthis.vertices = [];\n\t\tthis.indices = [];\n\t\tthis.indexMap = {};\n\t\tthis.originalMesh = null;\n\t}\n\n\taddVertex(vertex, idx, vertexArray) {\n\t\tvar remappedIndex = -1;\n\n\t\tif (this.indexMap[idx] !== undefined) {\n\t\t\tremappedIndex = this.indexMap[idx];\n\t\t\tthis.indices.push(remappedIndex);\n\t\t} else {\n\t\t\tfor (var influence = 0; influence < 4; influence++) {\n\t\t\t\tif (vertexArray.blendWeight.data[idx * 4 + influence] === 0) continue;\n\t\t\t\tvar originalBoneIndex = vertexArray.blendIndices.data[vertex.index * 4 + influence];\n\t\t\t\tvertex.boneIndices[influence] = this.getBoneRemap(originalBoneIndex);\n\t\t\t}\n\n\t\t\tremappedIndex = this.vertices.length;\n\t\t\tthis.indices.push(remappedIndex);\n\t\t\tthis.vertices.push(vertex);\n\t\t\tthis.indexMap[idx] = remappedIndex;\n\t\t}\n\t}\n\n\taddPrimitive(vertices, vertexIndices, vertexArray, boneLimit) {\n\t\tvar i, j;\n\t\tvar bonesToAdd = [];\n\t\tvar bonesToAddCount = 0;\n\t\tvar vertexCount = vertices.length;\n\n\t\tfor (i = 0; i < vertexCount; i++) {\n\t\t\tvar vertex = vertices[i];\n\t\t\tvar idx = vertex.index;\n\n\t\t\tfor (var influence = 0; influence < 4; influence++) {\n\t\t\t\tif (vertexArray.blendWeight.data[idx * 4 + influence] > 0) {\n\t\t\t\t\tvar boneIndex = vertexArray.blendIndices.data[idx * 4 + influence];\n\t\t\t\t\tvar needToAdd = true;\n\n\t\t\t\t\tfor (j = 0; j < bonesToAddCount; j++) {\n\t\t\t\t\t\tif (bonesToAdd[j] === boneIndex) {\n\t\t\t\t\t\t\tneedToAdd = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (needToAdd) {\n\t\t\t\t\t\tbonesToAdd[bonesToAddCount] = boneIndex;\n\t\t\t\t\t\tvar boneRemap = this.getBoneRemap(boneIndex);\n\t\t\t\t\t\tbonesToAddCount += boneRemap === -1 ? 1 : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.boneIndices.length + bonesToAddCount > boneLimit) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0; i < bonesToAddCount; i++) {\n\t\t\tthis.boneIndices.push(bonesToAdd[i]);\n\t\t}\n\n\t\tfor (i = 0; i < vertexCount; i++) {\n\t\t\tthis.addVertex(vertices[i], vertexIndices[i], vertexArray);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetBoneRemap(boneIndex) {\n\t\tfor (var i = 0; i < this.boneIndices.length; i++) {\n\t\t\tif (this.boneIndices[i] === boneIndex) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n}\n\nfunction indicesToReferences(model) {\n\tvar i;\n\tvar vertices = model.vertices;\n\tvar skins = model.skins;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tfor (i = 0; i < meshes.length; i++) {\n\t\tmeshes[i].vertices = vertices[meshes[i].vertices];\n\n\t\tif (meshes[i].skin !== undefined) {\n\t\t\tmeshes[i].skin = skins[meshes[i].skin];\n\t\t}\n\t}\n\n\tfor (i = 0; i < meshInstances.length; i++) {\n\t\tmeshInstances[i].mesh = meshes[meshInstances[i].mesh];\n\t}\n}\n\nfunction referencesToIndices(model) {\n\tvar i;\n\tvar vertices = model.vertices;\n\tvar skins = model.skins;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tfor (i = 0; i < meshes.length; i++) {\n\t\tmeshes[i].vertices = vertices.indexOf(meshes[i].vertices);\n\n\t\tif (meshes[i].skin !== undefined) {\n\t\t\tmeshes[i].skin = skins.indexOf(meshes[i].skin);\n\t\t}\n\t}\n\n\tfor (i = 0; i < meshInstances.length; i++) {\n\t\tmeshInstances[i].mesh = meshes.indexOf(meshInstances[i].mesh);\n\t}\n}\n\nfunction partitionSkin(model, materialMappings, boneLimit) {\n\tvar i, j, k, index;\n\tindicesToReferences(model);\n\tvar vertexArrays = model.vertices;\n\tvar skins = model.skins;\n\tvar mesh;\n\tvar meshes = model.meshes;\n\tvar meshInstances = model.meshInstances;\n\n\tvar getVertex = function getVertex(idx) {\n\t\tvar vert = new PartitionedVertex();\n\t\tvert.index = idx;\n\t\treturn vert;\n\t};\n\n\tfor (i = skins.length - 1; i >= 0; i--) {\n\t\tif (skins[i].boneNames.length > boneLimit) {\n\t\t\tvar skin = skins.splice(i, 1)[0];\n\t\t\tvar meshesToSplit = [];\n\n\t\t\tfor (j = 0; j < meshes.length; j++) {\n\t\t\t\tif (meshes[j].skin === skin) {\n\t\t\t\t\tmeshesToSplit.push(meshes[j]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (j = 0; j < meshesToSplit.length; j++) {\n\t\t\t\tindex = meshes.indexOf(meshesToSplit[j]);\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tmeshes.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (meshesToSplit.length === 0) {\n\t\t\t\tthrow new Error('partitionSkin: There should be at least one mesh that references a skin');\n\t\t\t}\n\n\t\t\tvar vertexArray = meshesToSplit[0].vertices;\n\n\t\t\tfor (j = 1; j < meshesToSplit.length; j++) {\n\t\t\t\tif (meshesToSplit[j].vertices !== vertexArray) {\n\t\t\t\t\tthrow new Error('partitionSkin: All meshes that share a skin should also share the same vertex buffer');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar partition;\n\t\t\tvar partitions = [];\n\t\t\tvar primitiveVertices = [];\n\t\t\tvar primitiveIndices = [];\n\t\t\tvar basePartition = 0;\n\n\t\t\tfor (j = 0; j < meshesToSplit.length; j++) {\n\t\t\t\tmesh = meshesToSplit[j];\n\t\t\t\tvar indices = mesh.indices;\n\n\t\t\t\tfor (var iIndex = mesh.base; iIndex < mesh.base + mesh.count;) {\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[0] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[0] = index;\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[1] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[1] = index;\n\t\t\t\t\tindex = indices[iIndex++];\n\t\t\t\t\tprimitiveVertices[2] = getVertex(index);\n\t\t\t\t\tprimitiveIndices[2] = index;\n\t\t\t\t\tvar added = false;\n\n\t\t\t\t\tfor (var iBonePartition = basePartition; iBonePartition < partitions.length; iBonePartition++) {\n\t\t\t\t\t\tpartition = partitions[iBonePartition];\n\n\t\t\t\t\t\tif (partition.addPrimitive(primitiveVertices, primitiveIndices, vertexArray, boneLimit)) {\n\t\t\t\t\t\t\tadded = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!added) {\n\t\t\t\t\t\tpartition = new SkinPartition();\n\t\t\t\t\t\tpartition.originalMesh = mesh;\n\t\t\t\t\t\tpartition.addPrimitive(primitiveVertices, primitiveIndices, vertexArray, boneLimit);\n\t\t\t\t\t\tpartitions.push(partition);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbasePartition = partitions.length;\n\t\t\t}\n\n\t\t\tvar partitionedVertices = [];\n\t\t\tvar partitionedIndices = [];\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\n\t\t\t\tif (partition.vertices.length && partition.indices.length) {\n\t\t\t\t\tvar vertexStart = partitionedVertices.length;\n\t\t\t\t\tvar vertexCount = partition.vertices.length;\n\t\t\t\t\tvar indexStart = partitionedIndices.length;\n\t\t\t\t\tvar indexCount = partition.indices.length;\n\t\t\t\t\tpartition.partition = j;\n\t\t\t\t\tpartition.vertexStart = vertexStart;\n\t\t\t\t\tpartition.vertexCount = vertexCount;\n\t\t\t\t\tpartition.indexStart = indexStart;\n\t\t\t\t\tpartition.indexCount = indexCount;\n\t\t\t\t\tvar iSour;\n\t\t\t\t\tvar iDest;\n\t\t\t\t\tiSour = 0;\n\t\t\t\t\tiDest = vertexStart;\n\n\t\t\t\t\twhile (iSour < vertexCount) {\n\t\t\t\t\t\tpartitionedVertices[iDest++] = partition.vertices[iSour++];\n\t\t\t\t\t}\n\n\t\t\t\t\tiSour = 0;\n\t\t\t\t\tiDest = indexStart;\n\n\t\t\t\t\twhile (iSour < indexCount) {\n\t\t\t\t\t\tpartitionedIndices[iDest++] = partition.indices[iSour++] + vertexStart;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar splitSkins = [];\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\t\t\t\tvar ibp = [];\n\t\t\t\tvar boneNames = [];\n\n\t\t\t\tfor (k = 0; k < partition.boneIndices.length; k++) {\n\t\t\t\t\tibp.push(skin.inverseBindMatrices[partition.boneIndices[k]]);\n\t\t\t\t\tboneNames.push(skin.boneNames[partition.boneIndices[k]]);\n\t\t\t\t}\n\n\t\t\t\tvar splitSkin = {\n\t\t\t\t\tinverseBindMatrices: ibp,\n\t\t\t\t\tboneNames: boneNames\n\t\t\t\t};\n\t\t\t\tsplitSkins.push(splitSkin);\n\t\t\t\tskins.push(splitSkin);\n\t\t\t}\n\n\t\t\tvar attrib, attribName, data, components;\n\t\t\tvar splitVertexArray = {};\n\n\t\t\tfor (attribName in vertexArray) {\n\t\t\t\tsplitVertexArray[attribName] = {\n\t\t\t\t\tcomponents: vertexArray[attribName].components,\n\t\t\t\t\tdata: [],\n\t\t\t\t\ttype: vertexArray[attribName].type\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (attribName in vertexArray) {\n\t\t\t\tif (attribName === 'blendIndices') {\n\t\t\t\t\tvar dstBoneIndices = splitVertexArray[attribName].data;\n\n\t\t\t\t\tfor (j = 0; j < partitionedVertices.length; j++) {\n\t\t\t\t\t\tvar srcBoneIndices = partitionedVertices[j].boneIndices;\n\t\t\t\t\t\tdstBoneIndices.push(srcBoneIndices[0], srcBoneIndices[1], srcBoneIndices[2], srcBoneIndices[3]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tattrib = vertexArray[attribName];\n\t\t\t\t\tdata = attrib.data;\n\t\t\t\t\tcomponents = attrib.components;\n\n\t\t\t\t\tfor (j = 0; j < partitionedVertices.length; j++) {\n\t\t\t\t\t\tindex = partitionedVertices[j].index;\n\n\t\t\t\t\t\tfor (k = 0; k < components; k++) {\n\t\t\t\t\t\t\tsplitVertexArray[attribName].data.push(data[index * components + k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvertexArrays[vertexArrays.indexOf(vertexArray)] = splitVertexArray;\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\t\t\t\tmesh = {\n\t\t\t\t\taabb: {\n\t\t\t\t\t\tmin: [0, 0, 0],\n\t\t\t\t\t\tmax: [0, 0, 0]\n\t\t\t\t\t},\n\t\t\t\t\tvertices: splitVertexArray,\n\t\t\t\t\tskin: splitSkins[j],\n\t\t\t\t\tindices: partitionedIndices.splice(0, partition.indexCount),\n\t\t\t\t\ttype: 'triangles',\n\t\t\t\t\tbase: 0,\n\t\t\t\t\tcount: partition.indexCount\n\t\t\t\t};\n\t\t\t\tmeshes.push(mesh);\n\n\t\t\t\tfor (k = meshInstances.length - 1; k >= 0; k--) {\n\t\t\t\t\tif (meshInstances[k].mesh === partition.originalMesh) {\n\t\t\t\t\t\tmeshInstances.push({\n\t\t\t\t\t\t\tmesh: mesh,\n\t\t\t\t\t\t\tnode: meshInstances[k].node\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (materialMappings) {\n\t\t\t\t\t\t\tmaterialMappings.push({\n\t\t\t\t\t\t\t\tmaterial: materialMappings[k].material,\n\t\t\t\t\t\t\t\tpath: materialMappings[k].path\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (j = 0; j < partitions.length; j++) {\n\t\t\t\tpartition = partitions[j];\n\n\t\t\t\tfor (k = meshInstances.length - 1; k >= 0; k--) {\n\t\t\t\t\tif (meshInstances[k].mesh === partition.originalMesh) {\n\t\t\t\t\t\tmeshInstances.splice(k, 1);\n\n\t\t\t\t\t\tif (materialMappings) {\n\t\t\t\t\t\t\tmaterialMappings.splice(k, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treferencesToIndices(model);\n}\n\nconst JSON_PRIMITIVE_TYPE = {\n\t\"points\": PRIMITIVE_POINTS,\n\t\"lines\": PRIMITIVE_LINES,\n\t\"lineloop\": PRIMITIVE_LINELOOP,\n\t\"linestrip\": PRIMITIVE_LINESTRIP,\n\t\"triangles\": PRIMITIVE_TRIANGLES,\n\t\"trianglestrip\": PRIMITIVE_TRISTRIP,\n\t\"trianglefan\": PRIMITIVE_TRIFAN\n};\nconst JSON_VERTEX_ELEMENT_TYPE = {\n\t\"int8\": TYPE_INT8,\n\t\"uint8\": TYPE_UINT8,\n\t\"int16\": TYPE_INT16,\n\t\"uint16\": TYPE_UINT16,\n\t\"int32\": TYPE_INT32,\n\t\"uint32\": TYPE_UINT32,\n\t\"float32\": TYPE_FLOAT32\n};\n\nclass JsonModelParser {\n\tconstructor(device) {\n\t\tthis._device = device;\n\t}\n\n\tparse(data) {\n\t\tconst modelData = data.model;\n\n\t\tif (!modelData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (modelData.version <= 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst nodes = this._parseNodes(data);\n\n\t\tconst skins = this._parseSkins(data, nodes);\n\n\t\tconst vertexBuffers = this._parseVertexBuffers(data);\n\n\t\tconst indices = this._parseIndexBuffers(data, vertexBuffers);\n\n\t\tconst morphs = this._parseMorphs(data, nodes, vertexBuffers);\n\n\t\tconst meshes = this._parseMeshes(data, skins.skins, morphs.morphs, vertexBuffers, indices.buffer, indices.data);\n\n\t\tconst meshInstances = this._parseMeshInstances(data, nodes, meshes, skins.skins, skins.instances, morphs.morphs, morphs.instances);\n\n\t\tconst model = new Model();\n\t\tmodel.graph = nodes[0];\n\t\tmodel.meshInstances = meshInstances;\n\t\tmodel.skinInstances = skins.instances;\n\t\tmodel.morphInstances = morphs.instances;\n\t\tmodel.getGraph().syncHierarchy();\n\t\treturn model;\n\t}\n\n\t_parseNodes(data) {\n\t\tconst modelData = data.model;\n\t\tconst nodes = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < modelData.nodes.length; i++) {\n\t\t\tconst nodeData = modelData.nodes[i];\n\t\t\tconst node = new GraphNode(nodeData.name);\n\t\t\tnode.setLocalPosition(nodeData.position[0], nodeData.position[1], nodeData.position[2]);\n\t\t\tnode.setLocalEulerAngles(nodeData.rotation[0], nodeData.rotation[1], nodeData.rotation[2]);\n\t\t\tnode.setLocalScale(nodeData.scale[0], nodeData.scale[1], nodeData.scale[2]);\n\t\t\tnode.scaleCompensation = !!nodeData.scaleCompensation;\n\t\t\tnodes.push(node);\n\t\t}\n\n\t\tfor (i = 1; i < modelData.parents.length; i++) {\n\t\t\tnodes[modelData.parents[i]].addChild(nodes[i]);\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t_parseSkins(data, nodes) {\n\t\tconst modelData = data.model;\n\t\tconst skins = [];\n\t\tconst skinInstances = [];\n\t\tlet i, j;\n\n\t\tif (!this._device.supportsBoneTextures && modelData.skins.length > 0) {\n\t\t\tconst boneLimit = this._device.getBoneLimit();\n\n\t\t\tpartitionSkin(modelData, null, boneLimit);\n\t\t}\n\n\t\tfor (i = 0; i < modelData.skins.length; i++) {\n\t\t\tconst skinData = modelData.skins[i];\n\t\t\tconst inverseBindMatrices = [];\n\n\t\t\tfor (j = 0; j < skinData.inverseBindMatrices.length; j++) {\n\t\t\t\tconst ibm = skinData.inverseBindMatrices[j];\n\t\t\t\tinverseBindMatrices[j] = new Mat4().set(ibm);\n\t\t\t}\n\n\t\t\tconst skin = new Skin(this._device, inverseBindMatrices, skinData.boneNames);\n\t\t\tskins.push(skin);\n\t\t\tconst skinInstance = new SkinInstance(skin);\n\t\t\tconst bones = [];\n\n\t\t\tfor (j = 0; j < skin.boneNames.length; j++) {\n\t\t\t\tconst boneName = skin.boneNames[j];\n\t\t\t\tconst bone = nodes[0].findByName(boneName);\n\t\t\t\tbones.push(bone);\n\t\t\t}\n\n\t\t\tskinInstance.bones = bones;\n\t\t\tskinInstances.push(skinInstance);\n\t\t}\n\n\t\treturn {\n\t\t\tskins: skins,\n\t\t\tinstances: skinInstances\n\t\t};\n\t}\n\n\t_getMorphVertexCount(modelData, morphIndex, vertexBuffers) {\n\t\tfor (let i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\n\t\t\tif (meshData.morph === morphIndex) {\n\t\t\t\tconst vertexBuffer = vertexBuffers[meshData.vertices];\n\t\t\t\treturn vertexBuffer.numVertices;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t_parseMorphs(data, nodes, vertexBuffers) {\n\t\tconst modelData = data.model;\n\t\tconst morphs = [];\n\t\tconst morphInstances = [];\n\t\tlet i, j, vertexCount;\n\t\tlet targets, morphTarget, morphTargetArray;\n\n\t\tif (modelData.morphs) {\n\t\t\tconst sparseToFull = function sparseToFull(data, indices, totalCount) {\n\t\t\t\tconst full = new Float32Array(totalCount * 3);\n\n\t\t\t\tfor (let s = 0; s < indices.length; s++) {\n\t\t\t\t\tconst dstIndex = indices[s] * 3;\n\t\t\t\t\tfull[dstIndex] = data[s * 3];\n\t\t\t\t\tfull[dstIndex + 1] = data[s * 3 + 1];\n\t\t\t\t\tfull[dstIndex + 2] = data[s * 3 + 2];\n\t\t\t\t}\n\n\t\t\t\treturn full;\n\t\t\t};\n\n\t\t\tfor (i = 0; i < modelData.morphs.length; i++) {\n\t\t\t\ttargets = modelData.morphs[i].targets;\n\t\t\t\tmorphTargetArray = [];\n\t\t\t\tvertexCount = this._getMorphVertexCount(modelData, i, vertexBuffers);\n\n\t\t\t\tfor (j = 0; j < targets.length; j++) {\n\t\t\t\t\tconst targetAabb = targets[j].aabb;\n\t\t\t\t\tconst min = targetAabb.min;\n\t\t\t\t\tconst max = targetAabb.max;\n\t\t\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) * 0.5, (max[1] + min[1]) * 0.5, (max[2] + min[2]) * 0.5), new Vec3((max[0] - min[0]) * 0.5, (max[1] - min[1]) * 0.5, (max[2] - min[2]) * 0.5));\n\t\t\t\t\tconst indices = targets[j].indices;\n\t\t\t\t\tlet deltaPositions = targets[j].deltaPositions;\n\t\t\t\t\tlet deltaNormals = targets[j].deltaNormals;\n\n\t\t\t\t\tif (indices) {\n\t\t\t\t\t\tdeltaPositions = sparseToFull(deltaPositions, indices, vertexCount);\n\t\t\t\t\t\tdeltaNormals = sparseToFull(deltaNormals, indices, vertexCount);\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphTarget = new MorphTarget({\n\t\t\t\t\t\tdeltaPositions: deltaPositions,\n\t\t\t\t\t\tdeltaNormals: deltaNormals,\n\t\t\t\t\t\tname: targets[j].name,\n\t\t\t\t\t\taabb: aabb\n\t\t\t\t\t});\n\t\t\t\t\tmorphTargetArray.push(morphTarget);\n\t\t\t\t}\n\n\t\t\t\tconst morph = new Morph(morphTargetArray, this._device);\n\t\t\t\tmorphs.push(morph);\n\t\t\t\tconst morphInstance = new MorphInstance(morph);\n\t\t\t\tmorphInstances.push(morphInstance);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tmorphs: morphs,\n\t\t\tinstances: morphInstances\n\t\t};\n\t}\n\n\t_parseVertexBuffers(data) {\n\t\tconst modelData = data.model;\n\t\tconst vertexBuffers = [];\n\t\tconst attributeMap = {\n\t\t\tposition: SEMANTIC_POSITION,\n\t\t\tnormal: SEMANTIC_NORMAL,\n\t\t\ttangent: SEMANTIC_TANGENT,\n\t\t\tblendWeight: SEMANTIC_BLENDWEIGHT,\n\t\t\tblendIndices: SEMANTIC_BLENDINDICES,\n\t\t\tcolor: SEMANTIC_COLOR,\n\t\t\ttexCoord0: SEMANTIC_TEXCOORD0,\n\t\t\ttexCoord1: SEMANTIC_TEXCOORD1,\n\t\t\ttexCoord2: SEMANTIC_TEXCOORD2,\n\t\t\ttexCoord3: SEMANTIC_TEXCOORD3,\n\t\t\ttexCoord4: SEMANTIC_TEXCOORD4,\n\t\t\ttexCoord5: SEMANTIC_TEXCOORD5,\n\t\t\ttexCoord6: SEMANTIC_TEXCOORD6,\n\t\t\ttexCoord7: SEMANTIC_TEXCOORD7\n\t\t};\n\n\t\tfor (let i = 0; i < modelData.vertices.length; i++) {\n\t\t\tconst vertexData = modelData.vertices[i];\n\t\t\tconst formatDesc = [];\n\n\t\t\tfor (const attributeName in vertexData) {\n\t\t\t\tconst attribute = vertexData[attributeName];\n\t\t\t\tformatDesc.push({\n\t\t\t\t\tsemantic: attributeMap[attributeName],\n\t\t\t\t\tcomponents: attribute.components,\n\t\t\t\t\ttype: JSON_VERTEX_ELEMENT_TYPE[attribute.type],\n\t\t\t\t\tnormalize: attributeMap[attributeName] === SEMANTIC_COLOR\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst vertexFormat = new VertexFormat(this._device, formatDesc);\n\t\t\tconst numVertices = vertexData.position.data.length / vertexData.position.components;\n\t\t\tconst vertexBuffer = new VertexBuffer(this._device, vertexFormat, numVertices);\n\t\t\tconst iterator = new VertexIterator(vertexBuffer);\n\n\t\t\tfor (let j = 0; j < numVertices; j++) {\n\t\t\t\tfor (const attributeName in vertexData) {\n\t\t\t\t\tconst attribute = vertexData[attributeName];\n\n\t\t\t\t\tswitch (attribute.components) {\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 2], 1.0 - attribute.data[j * 2 + 1]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 3], attribute.data[j * 3 + 1], attribute.data[j * 3 + 2]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\titerator.element[attributeMap[attributeName]].set(attribute.data[j * 4], attribute.data[j * 4 + 1], attribute.data[j * 4 + 2], attribute.data[j * 4 + 3]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titerator.next();\n\t\t\t}\n\n\t\t\titerator.end();\n\t\t\tvertexBuffers.push(vertexBuffer);\n\t\t}\n\n\t\treturn vertexBuffers;\n\t}\n\n\t_parseIndexBuffers(data, vertexBuffers) {\n\t\tconst modelData = data.model;\n\t\tlet indexBuffer = null;\n\t\tlet indexData = null;\n\t\tlet i;\n\t\tlet numIndices = 0;\n\n\t\tfor (i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\n\t\t\tif (meshData.indices !== undefined) {\n\t\t\t\tnumIndices += meshData.indices.length;\n\t\t\t}\n\t\t}\n\n\t\tlet maxVerts = 0;\n\n\t\tfor (i = 0; i < vertexBuffers.length; i++) {\n\t\t\tmaxVerts = Math.max(maxVerts, vertexBuffers[i].numVertices);\n\t\t}\n\n\t\tif (numIndices > 0) {\n\t\t\tif (maxVerts > 0xFFFF && this._device.extUintElement) {\n\t\t\t\tindexBuffer = new IndexBuffer(this._device, INDEXFORMAT_UINT32, numIndices);\n\t\t\t\tindexData = new Uint32Array(indexBuffer.lock());\n\t\t\t} else {\n\t\t\t\tindexBuffer = new IndexBuffer(this._device, INDEXFORMAT_UINT16, numIndices);\n\t\t\t\tindexData = new Uint16Array(indexBuffer.lock());\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: indexBuffer,\n\t\t\tdata: indexData\n\t\t};\n\t}\n\n\t_parseMeshes(data, skins, morphs, vertexBuffers, indexBuffer, indexData) {\n\t\tconst modelData = data.model;\n\t\tconst meshes = [];\n\t\tlet indexBase = 0;\n\n\t\tfor (let i = 0; i < modelData.meshes.length; i++) {\n\t\t\tconst meshData = modelData.meshes[i];\n\t\t\tconst meshAabb = meshData.aabb;\n\t\t\tconst min = meshAabb.min;\n\t\t\tconst max = meshAabb.max;\n\t\t\tconst aabb = new BoundingBox(new Vec3((max[0] + min[0]) * 0.5, (max[1] + min[1]) * 0.5, (max[2] + min[2]) * 0.5), new Vec3((max[0] - min[0]) * 0.5, (max[1] - min[1]) * 0.5, (max[2] - min[2]) * 0.5));\n\t\t\tconst indexed = meshData.indices !== undefined;\n\t\t\tconst mesh = new Mesh(this._device);\n\t\t\tmesh.vertexBuffer = vertexBuffers[meshData.vertices];\n\t\t\tmesh.indexBuffer[0] = indexed ? indexBuffer : null;\n\t\t\tmesh.primitive[0].type = JSON_PRIMITIVE_TYPE[meshData.type];\n\t\t\tmesh.primitive[0].base = indexed ? meshData.base + indexBase : meshData.base;\n\t\t\tmesh.primitive[0].count = meshData.count;\n\t\t\tmesh.primitive[0].indexed = indexed;\n\t\t\tmesh.skin = meshData.skin !== undefined ? skins[meshData.skin] : null;\n\t\t\tmesh.morph = meshData.morph !== undefined ? morphs[meshData.morph] : null;\n\t\t\tmesh.aabb = aabb;\n\n\t\t\tif (indexed) {\n\t\t\t\tindexData.set(meshData.indices, indexBase);\n\t\t\t\tindexBase += meshData.indices.length;\n\t\t\t}\n\n\t\t\tmeshes.push(mesh);\n\t\t}\n\n\t\tif (indexBuffer !== null) {\n\t\t\tindexBuffer.unlock();\n\t\t}\n\n\t\treturn meshes;\n\t}\n\n\t_parseMeshInstances(data, nodes, meshes, skins, skinInstances, morphs, morphInstances) {\n\t\tconst modelData = data.model;\n\t\tconst meshInstances = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < modelData.meshInstances.length; i++) {\n\t\t\tconst meshInstanceData = modelData.meshInstances[i];\n\t\t\tconst node = nodes[meshInstanceData.node];\n\t\t\tconst mesh = meshes[meshInstanceData.mesh];\n\t\t\tconst meshInstance = new MeshInstance(mesh, Material.defaultMaterial, node);\n\n\t\t\tif (mesh.skin) {\n\t\t\t\tconst skinIndex = skins.indexOf(mesh.skin);\n\t\t\t\tmeshInstance.skinInstance = skinInstances[skinIndex];\n\t\t\t}\n\n\t\t\tif (mesh.morph) {\n\t\t\t\tconst morphIndex = morphs.indexOf(mesh.morph);\n\t\t\t\tmeshInstance.morphInstance = morphInstances[morphIndex];\n\t\t\t}\n\n\t\t\tmeshInstances.push(meshInstance);\n\t\t}\n\n\t\treturn meshInstances;\n\t}\n\n}\n\nclass ModelHandler {\n\tconstructor(device, defaultMaterial) {\n\t\tthis._device = device;\n\t\tthis._parsers = [];\n\t\tthis._defaultMaterial = defaultMaterial;\n\t\tthis.maxRetries = 0;\n\t\tthis.addParser(new JsonModelParser(this._device), function (url, data) {\n\t\t\treturn path.getExtension(url) === '.json';\n\t\t});\n\t\tthis.addParser(new GlbModelParser(this._device), function (url, data) {\n\t\t\treturn path.getExtension(url) === '.glb';\n\t\t});\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst options = {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\n\t\tif (url.load.startsWith('blob:') || url.load.startsWith('data:')) {\n\t\t\tif (path.getExtension(url.original).toLowerCase() === '.glb') {\n\t\t\t\toptions.responseType = Http.ResponseType.ARRAY_BUFFER;\n\t\t\t} else {\n\t\t\t\toptions.responseType = Http.ResponseType.JSON;\n\t\t\t}\n\t\t}\n\n\t\thttp.get(url.load, options, function (err, response) {\n\t\t\tif (!callback) return;\n\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading model: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\tfor (let i = 0; i < this._parsers.length; i++) {\n\t\t\tconst p = this._parsers[i];\n\n\t\t\tif (p.decider(url, data)) {\n\t\t\t\treturn p.parser.parse(data);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (!asset.resource) return;\n\t\tconst data = asset.data;\n\t\tconst self = this;\n\t\tasset.resource.meshInstances.forEach(function (meshInstance, i) {\n\t\t\tif (data.mapping) {\n\t\t\t\tconst handleMaterial = function handleMaterial(asset) {\n\t\t\t\t\tif (asset.resource) {\n\t\t\t\t\t\tmeshInstance.material = asset.resource;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasset.once('load', handleMaterial);\n\t\t\t\t\t\tassets.load(asset);\n\t\t\t\t\t}\n\n\t\t\t\t\tasset.once('remove', function (asset) {\n\t\t\t\t\t\tif (meshInstance.material === asset.resource) {\n\t\t\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tif (!data.mapping[i]) {\n\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst id = data.mapping[i].material;\n\t\t\t\tconst url = data.mapping[i].path;\n\t\t\t\tlet material;\n\n\t\t\t\tif (id !== undefined) {\n\t\t\t\t\tif (!id) {\n\t\t\t\t\t\tmeshInstance.material = self._defaultMaterial;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmaterial = assets.get(id);\n\n\t\t\t\t\t\tif (material) {\n\t\t\t\t\t\t\thandleMaterial(material);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassets.once('add:' + id, handleMaterial);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (url) {\n\t\t\t\t\tconst path = asset.getAbsoluteUrl(data.mapping[i].path);\n\t\t\t\t\tmaterial = assets.getByUrl(path);\n\n\t\t\t\t\tif (material) {\n\t\t\t\t\t\thandleMaterial(material);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tassets.once('add:url:' + path, handleMaterial);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\taddParser(parser, decider) {\n\t\tthis._parsers.push({\n\t\t\tparser: parser,\n\t\t\tdecider: decider\n\t\t});\n\t}\n\n}\n\nfunction onContainerAssetLoaded(containerAsset) {\n\tconst renderAsset = this;\n\tif (!renderAsset.resource) return;\n\tconst containerResource = containerAsset.resource;\n\tconst render = containerResource.renders && containerResource.renders[renderAsset.data.renderIndex];\n\n\tif (render) {\n\t\trenderAsset.resource.meshes = render.resource.meshes;\n\t}\n}\n\nfunction onContainerAssetAdded(containerAsset) {\n\tconst renderAsset = this;\n\trenderAsset.registry.off('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\trenderAsset.registry.on('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\trenderAsset.registry.off('remove:' + containerAsset.id, onContainerAssetRemoved, renderAsset);\n\trenderAsset.registry.once('remove:' + containerAsset.id, onContainerAssetRemoved, renderAsset);\n\n\tif (!containerAsset.resource) {\n\t\trenderAsset.registry.load(containerAsset);\n\t} else {\n\t\tonContainerAssetLoaded.call(renderAsset, containerAsset);\n\t}\n}\n\nfunction onContainerAssetRemoved(containerAsset) {\n\tconst renderAsset = this;\n\trenderAsset.registry.off('load:' + containerAsset.id, onContainerAssetLoaded, renderAsset);\n\n\tif (renderAsset.resource) {\n\t\trenderAsset.resource.destroy();\n\t}\n}\n\nclass RenderHandler {\n\tconstructor(assets) {\n\t\tthis._registry = assets;\n\t}\n\n\tload(url, callback, asset) {}\n\n\topen(url, data) {\n\t\treturn new Render();\n\t}\n\n\tpatch(asset, registry) {\n\t\tif (!asset.data.containerAsset) return;\n\t\tconst containerAsset = registry.get(asset.data.containerAsset);\n\n\t\tif (!containerAsset) {\n\t\t\tregistry.once('add:' + asset.data.containerAsset, onContainerAssetAdded, asset);\n\t\t\treturn;\n\t\t}\n\n\t\tonContainerAssetAdded.call(asset, containerAsset);\n\t}\n\n}\n\nclass ResourceLoader {\n\tconstructor(app) {\n\t\tthis._handlers = {};\n\t\tthis._requests = {};\n\t\tthis._cache = {};\n\t\tthis._app = app;\n\t}\n\n\taddHandler(type, handler) {\n\t\tthis._handlers[type] = handler;\n\t\thandler._loader = this;\n\t}\n\n\tremoveHandler(type) {\n\t\tdelete this._handlers[type];\n\t}\n\n\tgetHandler(type) {\n\t\treturn this._handlers[type];\n\t}\n\n\tload(url, type, callback, asset) {\n\t\tconst handler = this._handlers[type];\n\n\t\tif (!handler) {\n\t\t\tconst err = \"No handler for asset type: \" + type;\n\t\t\tcallback(err);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!url) {\n\t\t\tthis._loadNull(handler, callback, asset);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst key = url + type;\n\n\t\tif (this._cache[key] !== undefined) {\n\t\t\tcallback(null, this._cache[key]);\n\t\t} else if (this._requests[key]) {\n\t\t\tthis._requests[key].push(callback);\n\t\t} else {\n\t\t\tthis._requests[key] = [callback];\n\t\t\tconst self = this;\n\n\t\t\tconst handleLoad = function handleLoad(err, urlObj) {\n\t\t\t\tif (err) {\n\t\t\t\t\tself._onFailure(key, err);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thandler.load(urlObj, function (err, data, extra) {\n\t\t\t\t\tif (!self._requests[key]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tself._onFailure(key, err);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tself._onSuccess(key, handler.open(urlObj.original, data, asset), extra);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tself._onFailure(key, e);\n\t\t\t\t\t}\n\t\t\t\t}, asset);\n\t\t\t};\n\n\t\t\tconst normalizedUrl = url.split('?')[0];\n\n\t\t\tif (this._app.enableBundles && this._app.bundles.hasUrl(normalizedUrl)) {\n\t\t\t\tif (!this._app.bundles.canLoadUrl(normalizedUrl)) {\n\t\t\t\t\thandleLoad('Bundle for ' + url + ' not loaded yet');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._app.bundles.loadUrl(normalizedUrl, function (err, fileUrlFromBundle) {\n\t\t\t\t\thandleLoad(err, {\n\t\t\t\t\t\tload: fileUrlFromBundle,\n\t\t\t\t\t\toriginal: normalizedUrl\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\thandleLoad(null, {\n\t\t\t\t\tload: url,\n\t\t\t\t\toriginal: asset && asset.getPreferredFile().filename || url\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t_loadNull(handler, callback, asset) {\n\t\tconst onLoad = function onLoad(err, data, extra) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tcallback(null, handler.open(null, data, asset), extra);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcallback(e);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\thandler.load(null, onLoad, asset);\n\t}\n\n\t_onSuccess(key, result, extra) {\n\t\tthis._cache[key] = result;\n\n\t\tfor (let i = 0; i < this._requests[key].length; i++) {\n\t\t\tthis._requests[key][i](null, result, extra);\n\t\t}\n\n\t\tdelete this._requests[key];\n\t}\n\n\t_onFailure(key, err) {\n\t\tconsole.error(err);\n\n\t\tif (this._requests[key]) {\n\t\t\tfor (let i = 0; i < this._requests[key].length; i++) {\n\t\t\t\tthis._requests[key][i](err);\n\t\t\t}\n\n\t\t\tdelete this._requests[key];\n\t\t}\n\t}\n\n\topen(type, data) {\n\t\tconst handler = this._handlers[type];\n\n\t\tif (!handler) {\n\t\t\tconsole.warn(\"No resource handler found for: \" + type);\n\t\t\treturn data;\n\t\t}\n\n\t\treturn handler.open(null, data);\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst handler = this._handlers[asset.type];\n\n\t\tif (!handler) {\n\t\t\tconsole.warn(\"No resource handler found for: \" + asset.type);\n\t\t\treturn;\n\t\t}\n\n\t\tif (handler.patch) {\n\t\t\thandler.patch(asset, assets);\n\t\t}\n\t}\n\n\tclearCache(url, type) {\n\t\tdelete this._cache[url + type];\n\t}\n\n\tgetFromCache(url, type) {\n\t\tif (this._cache[url + type]) {\n\t\t\treturn this._cache[url + type];\n\t\t}\n\t}\n\n\tenableRetry(maxRetries = 5) {\n\t\tmaxRetries = Math.max(0, maxRetries) || 0;\n\n\t\tfor (const key in this._handlers) {\n\t\t\tthis._handlers[key].maxRetries = maxRetries;\n\t\t}\n\t}\n\n\tdisableRetry() {\n\t\tfor (const key in this._handlers) {\n\t\t\tthis._handlers[key].maxRetries = 0;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._handlers = {};\n\t\tthis._requests = {};\n\t\tthis._cache = {};\n\t}\n\n}\n\nclass SceneHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\tthis._app.systems.script.preloading = true;\n\t\tconst parser = new SceneParser(this._app, false);\n\t\tconst parent = parser.parse(data);\n\t\tconst scene = this._app.scene;\n\t\tscene.root = parent;\n\n\t\tthis._app.applySceneSettings(data.settings);\n\n\t\tthis._app.systems.script.preloading = false;\n\t\treturn scene;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nvar _legacy = false;\nvar _createdLoadingScreen = false;\nvar script = {\n\tapp: null,\n\tcreate: function (name, callback) {\n\t\tif (!_legacy) return;\n\t\tvar ScriptType = callback(script.app);\n\t\tScriptType._pcScriptName = name;\n\n\t\tScriptHandler._push(ScriptType);\n\n\t\tthis.fire(\"created\", name, callback);\n\t},\n\tattribute: function (name, type, defaultValue, options) {},\n\tcreateLoadingScreen: function (callback) {\n\t\tif (_createdLoadingScreen) return;\n\t\t_createdLoadingScreen = true;\n\t\tvar app = getApplication();\n\t\tcallback(app);\n\t}\n};\nObject.defineProperty(script, 'legacy', {\n\tget: function () {\n\t\treturn _legacy;\n\t},\n\tset: function (value) {\n\t\t_legacy = value;\n\t}\n});\nevents.attach(script);\n\nclass ScriptHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis._scripts = {};\n\t\tthis._cache = {};\n\t}\n\n\tstatic _push(Type) {\n\t\tif (script.legacy && ScriptHandler._types.length > 0) {\n\t\t\tconsole.assert(\"Script Ordering Error. Contact support@playcanvas.com\");\n\t\t} else {\n\t\t\tScriptHandler._types.push(Type);\n\t\t}\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\t\tscript.app = this._app;\n\n\t\tthis._loadScript(url.load, function (err, url, extra) {\n\t\t\tif (!err) {\n\t\t\t\tif (script.legacy) {\n\t\t\t\t\tlet Type = null;\n\n\t\t\t\t\tif (ScriptHandler._types.length) {\n\t\t\t\t\t\tType = ScriptHandler._types.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type) {\n\t\t\t\t\t\tthis._scripts[url] = Type;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tType = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(null, Type, extra);\n\t\t\t\t} else {\n\t\t\t\t\tconst obj = {};\n\n\t\t\t\t\tfor (let i = 0; i < ScriptHandler._types.length; i++) obj[ScriptHandler._types[i].name] = ScriptHandler._types[i];\n\n\t\t\t\t\tScriptHandler._types.length = 0;\n\t\t\t\t\tcallback(null, obj, extra);\n\t\t\t\t\tdelete self._loader._cache[url + 'script'];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback(err);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n\t_loadScript(url, callback) {\n\t\tconst head = document.head;\n\t\tconst element = document.createElement('script');\n\t\tthis._cache[url] = element;\n\t\telement.async = false;\n\t\telement.addEventListener('error', function (e) {\n\t\t\tcallback(\"Script: \" + e.target.src + \" failed to load\");\n\t\t}, false);\n\t\tlet done = false;\n\n\t\telement.onload = element.onreadystatechange = function () {\n\t\t\tif (!done && (!this.readyState || this.readyState === \"loaded\" || this.readyState === \"complete\")) {\n\t\t\t\tdone = true;\n\t\t\t\tcallback(null, url, element);\n\t\t\t}\n\t\t};\n\n\t\telement.src = url;\n\t\thead.appendChild(element);\n\t}\n\n}\n\nScriptHandler._types = [];\n\nclass ShaderHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading shader resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nconst spriteNormals = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1];\nconst spriteIndices = [0, 1, 3, 2, 3, 1];\n\nclass Sprite extends EventHandler {\n\tconstructor(device, options) {\n\t\tsuper();\n\t\tthis._device = device;\n\t\tthis._pixelsPerUnit = options && options.pixelsPerUnit !== undefined ? options.pixelsPerUnit : 1;\n\t\tthis._renderMode = options && options.renderMode !== undefined ? options.renderMode : SPRITE_RENDERMODE_SIMPLE;\n\t\tthis._atlas = options && options.atlas !== undefined ? options.atlas : null;\n\t\tthis._frameKeys = options && options.frameKeys !== undefined ? options.frameKeys : null;\n\t\tthis._meshes = [];\n\t\tthis._updatingProperties = false;\n\t\tthis._meshesDirty = false;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tthis._createMeshes();\n\t\t}\n\t}\n\n\t_createMeshes() {\n\t\tvar i, len;\n\n\t\tfor (i = 0, len = this._meshes.length; i < len; i++) {\n\t\t\tvar mesh = this._meshes[i];\n\n\t\t\tif (mesh) {\n\t\t\t\tmesh.destroy();\n\t\t\t}\n\t\t}\n\n\t\tvar count = this._frameKeys.length;\n\t\tthis._meshes = new Array(count);\n\t\tvar createMeshFunc = this.renderMode === SPRITE_RENDERMODE_SLICED || this._renderMode === SPRITE_RENDERMODE_TILED ? this._create9SliceMesh : this._createSimpleMesh;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tvar frame = this._atlas.frames[this._frameKeys[i]];\n\t\t\tthis._meshes[i] = frame ? createMeshFunc.call(this, frame) : null;\n\t\t}\n\n\t\tthis.fire('set:meshes');\n\t}\n\n\t_createSimpleMesh(frame) {\n\t\tvar rect = frame.rect;\n\t\tvar texWidth = this._atlas.texture.width;\n\t\tvar texHeight = this._atlas.texture.height;\n\t\tvar w = rect.z / this._pixelsPerUnit;\n\t\tvar h = rect.w / this._pixelsPerUnit;\n\t\tvar hp = frame.pivot.x;\n\t\tvar vp = frame.pivot.y;\n\t\tvar positions = [-hp * w, -vp * h, 0, (1 - hp) * w, -vp * h, 0, (1 - hp) * w, (1 - vp) * h, 0, -hp * w, (1 - vp) * h, 0];\n\t\tvar lu = rect.x / texWidth;\n\t\tvar bv = 1.0 - rect.y / texHeight;\n\t\tvar ru = (rect.x + rect.z) / texWidth;\n\t\tvar tv = 1.0 - (rect.y + rect.w) / texHeight;\n\t\tvar uvs = [lu, bv, ru, bv, ru, tv, lu, tv];\n\t\tvar mesh = createMesh$1(this._device, positions, {\n\t\t\tuvs: uvs,\n\t\t\tnormals: spriteNormals,\n\t\t\tindices: spriteIndices\n\t\t});\n\t\treturn mesh;\n\t}\n\n\t_create9SliceMesh() {\n\t\tvar he = Vec2.ONE;\n\t\tvar ws = 3;\n\t\tvar ls = 3;\n\t\tvar i, j;\n\t\tvar x, y, z, u, v;\n\t\tvar positions = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\t\tvar indices = [];\n\t\tvar vcounter = 0;\n\n\t\tfor (i = 0; i <= ws; i++) {\n\t\t\tu = i === 0 || i === ws ? 0 : 1;\n\n\t\t\tfor (j = 0; j <= ls; j++) {\n\t\t\t\tx = -he.x + 2.0 * he.x * (i <= 1 ? 0 : 3) / ws;\n\t\t\t\ty = 0.0;\n\t\t\t\tz = -(-he.y + 2.0 * he.y * (j <= 1 ? 0 : 3) / ls);\n\t\t\t\tv = j === 0 || j === ls ? 0 : 1;\n\t\t\t\tpositions.push(-x, y, z);\n\t\t\t\tnormals.push(0.0, 1.0, 0.0);\n\t\t\t\tuvs.push(u, v);\n\n\t\t\t\tif (i < ws && j < ls) {\n\t\t\t\t\tindices.push(vcounter + ls + 1, vcounter + 1, vcounter);\n\t\t\t\t\tindices.push(vcounter + ls + 1, vcounter + ls + 2, vcounter + 1);\n\t\t\t\t}\n\n\t\t\t\tvcounter++;\n\t\t\t}\n\t\t}\n\n\t\tvar options = {\n\t\t\tnormals: normals,\n\t\t\tuvs: uvs,\n\t\t\tindices: indices\n\t\t};\n\t\treturn createMesh$1(this._device, positions, options);\n\t}\n\n\t_onSetFrames(frames) {\n\t\tif (this._updatingProperties) {\n\t\t\tthis._meshesDirty = true;\n\t\t} else {\n\t\t\tthis._createMeshes();\n\t\t}\n\t}\n\n\t_onFrameChanged(frameKey, frame) {\n\t\tvar idx = this._frameKeys.indexOf(frameKey);\n\n\t\tif (idx < 0) return;\n\n\t\tif (frame) {\n\t\t\tif (this.renderMode === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\t\tthis._meshes[idx] = this._createSimpleMesh(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._meshes[idx] = null;\n\t\t}\n\n\t\tthis.fire('set:meshes');\n\t}\n\n\t_onFrameRemoved(frameKey) {\n\t\tvar idx = this._frameKeys.indexOf(frameKey);\n\n\t\tif (idx < 0) return;\n\t\tthis._meshes[idx] = null;\n\t\tthis.fire('set:meshes');\n\t}\n\n\tstartUpdate() {\n\t\tthis._updatingProperties = true;\n\t\tthis._meshesDirty = false;\n\t}\n\n\tendUpdate() {\n\t\tthis._updatingProperties = false;\n\n\t\tif (this._meshesDirty && this._atlas && this._frameKeys) {\n\t\t\tthis._createMeshes();\n\t\t}\n\n\t\tthis._meshesDirty = false;\n\t}\n\n\tdestroy() {\n\t\tfor (const mesh of this._meshes) {\n\t\t\tif (mesh) mesh.destroy();\n\t\t}\n\n\t\tthis._meshes.length = 0;\n\t}\n\n\tget frameKeys() {\n\t\treturn this._frameKeys;\n\t}\n\n\tset frameKeys(value) {\n\t\tthis._frameKeys = value;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:frameKeys', value);\n\t}\n\n\tget atlas() {\n\t\treturn this._atlas;\n\t}\n\n\tset atlas(value) {\n\t\tif (value === this._atlas) return;\n\n\t\tif (this._atlas) {\n\t\t\tthis._atlas.off('set:frames', this._onSetFrames, this);\n\n\t\t\tthis._atlas.off('set:frame', this._onFrameChanged, this);\n\n\t\t\tthis._atlas.off('remove:frame', this._onFrameRemoved, this);\n\t\t}\n\n\t\tthis._atlas = value;\n\n\t\tif (this._atlas && this._frameKeys) {\n\t\t\tthis._atlas.on('set:frames', this._onSetFrames, this);\n\n\t\t\tthis._atlas.on('set:frame', this._onFrameChanged, this);\n\n\t\t\tthis._atlas.on('remove:frame', this._onFrameRemoved, this);\n\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:atlas', value);\n\t}\n\n\tget pixelsPerUnit() {\n\t\treturn this._pixelsPerUnit;\n\t}\n\n\tset pixelsPerUnit(value) {\n\t\tif (this._pixelsPerUnit === value) return;\n\t\tthis._pixelsPerUnit = value;\n\t\tthis.fire('set:pixelsPerUnit', value);\n\n\t\tif (this._atlas && this._frameKeys && this.renderMode === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\tif (this._updatingProperties) {\n\t\t\t\tthis._meshesDirty = true;\n\t\t\t} else {\n\t\t\t\tthis._createMeshes();\n\t\t\t}\n\t\t}\n\t}\n\n\tget renderMode() {\n\t\treturn this._renderMode;\n\t}\n\n\tset renderMode(value) {\n\t\tif (this._renderMode === value) return;\n\t\tvar prev = this._renderMode;\n\t\tthis._renderMode = value;\n\t\tthis.fire('set:renderMode', value);\n\n\t\tif (prev === SPRITE_RENDERMODE_SIMPLE || value === SPRITE_RENDERMODE_SIMPLE) {\n\t\t\tif (this._atlas && this._frameKeys) {\n\t\t\t\tif (this._updatingProperties) {\n\t\t\t\t\tthis._meshesDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._createMeshes();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshes() {\n\t\treturn this._meshes;\n\t}\n\n}\n\nfunction onTextureAtlasLoaded(atlasAsset) {\n\tconst spriteAsset = this;\n\n\tif (spriteAsset.resource) {\n\t\tspriteAsset.resource.atlas = atlasAsset.resource;\n\t}\n}\n\nfunction onTextureAtlasAdded(atlasAsset) {\n\tconst spriteAsset = this;\n\tspriteAsset.registry.load(atlasAsset);\n}\n\nclass SpriteHandler {\n\tconstructor(assets, device) {\n\t\tthis._assets = assets;\n\t\tthis._device = device;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tcallback(null, response);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\tconst sprite = new Sprite(this._device);\n\n\t\tif (url) {\n\t\t\tsprite.__data = data;\n\t\t}\n\n\t\treturn sprite;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst sprite = asset.resource;\n\n\t\tif (sprite.__data) {\n\t\t\tasset.data.pixelsPerUnit = sprite.__data.pixelsPerUnit;\n\t\t\tasset.data.renderMode = sprite.__data.renderMode;\n\t\t\tasset.data.frameKeys = sprite.__data.frameKeys;\n\n\t\t\tif (sprite.__data.textureAtlasAsset) {\n\t\t\t\tconst atlas = assets.getByUrl(sprite.__data.textureAtlasAsset);\n\n\t\t\t\tif (atlas) {\n\t\t\t\t\tasset.data.textureAtlasAsset = atlas.id;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Could not find textureatlas with url: \" + sprite.__data.textureAtlasAsset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsprite.startUpdate();\n\t\tsprite.renderMode = asset.data.renderMode;\n\t\tsprite.pixelsPerUnit = asset.data.pixelsPerUnit;\n\t\tsprite.frameKeys = asset.data.frameKeys;\n\n\t\tthis._updateAtlas(asset);\n\n\t\tsprite.endUpdate();\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t}\n\n\t_updateAtlas(asset) {\n\t\tconst sprite = asset.resource;\n\n\t\tif (!asset.data.textureAtlasAsset) {\n\t\t\tsprite.atlas = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._assets.off('load:' + asset.data.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\tthis._assets.on('load:' + asset.data.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\tconst atlasAsset = this._assets.get(asset.data.textureAtlasAsset);\n\n\t\tif (atlasAsset && atlasAsset.resource) {\n\t\t\tsprite.atlas = atlasAsset.resource;\n\t\t} else {\n\t\t\tif (!atlasAsset) {\n\t\t\t\tthis._assets.off('add:' + asset.data.textureAtlasAsset, onTextureAtlasAdded, asset);\n\n\t\t\t\tthis._assets.on('add:' + asset.data.textureAtlasAsset, onTextureAtlasAdded, asset);\n\t\t\t} else {\n\t\t\t\tthis._assets.load(atlasAsset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onAssetChange(asset, attribute, value, oldValue) {\n\t\tif (attribute === 'data') {\n\t\t\tif (value && value.textureAtlasAsset && oldValue && value.textureAtlasAsset !== oldValue.textureAtlasAsset) {\n\t\t\t\tthis._assets.off('load:' + oldValue.textureAtlasAsset, onTextureAtlasLoaded, asset);\n\n\t\t\t\tthis._assets.off('add:' + oldValue.textureAtlasAsset, onTextureAtlasAdded, asset);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass Template {\n\tconstructor(app, data) {\n\t\tthis._app = app;\n\t\tthis._data = data;\n\t\tthis._templateRoot = null;\n\t}\n\n\tinstantiate() {\n\t\tif (!this._templateRoot) {\n\t\t\tthis._parseTemplate();\n\t\t}\n\n\t\treturn this._templateRoot.clone();\n\t}\n\n\t_parseTemplate() {\n\t\tvar parser = new SceneParser(this._app, true);\n\t\tthis._templateRoot = parser.parse(this._data);\n\t}\n\n}\n\nclass TemplateHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {}, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(\"Error requesting template: \" + url.original);\n\t\t\t} else {\n\t\t\t\tcallback(err, response);\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn new Template(this._app, data);\n\t}\n\n}\n\nclass TextHandler {\n\tconstructor() {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\thttp.get(url.load, {\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t}, function (err, response) {\n\t\t\tif (!err) {\n\t\t\t\tcallback(null, response);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading text resource: \" + url.original + \" [\" + err + \"]\");\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data) {\n\t\treturn data;\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass TextureAtlas extends EventHandler {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._texture = null;\n\t\tthis._frames = null;\n\t}\n\n\tsetFrame(key, data) {\n\t\tvar frame = this._frames[key];\n\n\t\tif (!frame) {\n\t\t\tframe = {\n\t\t\t\trect: data.rect.clone(),\n\t\t\t\tpivot: data.pivot.clone(),\n\t\t\t\tborder: data.border.clone()\n\t\t\t};\n\t\t\tthis._frames[key] = frame;\n\t\t} else {\n\t\t\tframe.rect.copy(data.rect);\n\t\t\tframe.pivot.copy(data.pivot);\n\t\t\tframe.border.copy(data.border);\n\t\t}\n\n\t\tthis.fire('set:frame', key.toString(), frame);\n\t}\n\n\tremoveFrame(key) {\n\t\tvar frame = this._frames[key];\n\n\t\tif (frame) {\n\t\t\tdelete this._frames[key];\n\t\t\tthis.fire('remove:frame', key.toString(), frame);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif (this._texture) {\n\t\t\tthis._texture.destroy();\n\t\t}\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tset texture(value) {\n\t\tthis._texture = value;\n\t\tthis.fire('set:texture', value);\n\t}\n\n\tget frames() {\n\t\treturn this._frames;\n\t}\n\n\tset frames(value) {\n\t\tthis._frames = value;\n\t\tthis.fire('set:frames', value);\n\t}\n\n}\n\nconst JSON_ADDRESS_MODE$1 = {\n\t\"repeat\": ADDRESS_REPEAT,\n\t\"clamp\": ADDRESS_CLAMP_TO_EDGE,\n\t\"mirror\": ADDRESS_MIRRORED_REPEAT\n};\nconst JSON_FILTER_MODE$1 = {\n\t\"nearest\": FILTER_NEAREST,\n\t\"linear\": FILTER_LINEAR,\n\t\"nearest_mip_nearest\": FILTER_NEAREST_MIPMAP_NEAREST,\n\t\"linear_mip_nearest\": FILTER_LINEAR_MIPMAP_NEAREST,\n\t\"nearest_mip_linear\": FILTER_NEAREST_MIPMAP_LINEAR,\n\t\"linear_mip_linear\": FILTER_LINEAR_MIPMAP_LINEAR\n};\nconst regexFrame = /^data\\.frames\\.(\\d+)$/;\n\nclass TextureAtlasHandler {\n\tconstructor(loader) {\n\t\tthis._loader = loader;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tconst self = this;\n\n\t\tconst handler = this._loader.getHandler(\"texture\");\n\n\t\tif (path.getExtension(url.original) === '.json') {\n\t\t\thttp.get(url.load, {\n\t\t\t\tretry: this.maxRetries > 0,\n\t\t\t\tmaxRetries: this.maxRetries\n\t\t\t}, function (err, response) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tconst textureUrl = url.original.replace('.json', '.png');\n\n\t\t\t\t\tself._loader.load(textureUrl, \"texture\", function (err, texture) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\t\tdata: response,\n\t\t\t\t\t\t\t\ttexture: texture\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn handler.load(url, callback);\n\t\t}\n\t}\n\n\topen(url, data) {\n\t\tconst resource = new TextureAtlas();\n\n\t\tif (data.texture && data.data) {\n\t\t\tresource.texture = data.texture;\n\t\t\tresource.__data = data.data;\n\t\t} else {\n\t\t\tconst handler = this._loader.getHandler(\"texture\");\n\n\t\t\tconst texture = handler.open(url, data);\n\t\t\tif (!texture) return null;\n\t\t\tresource.texture = texture;\n\t\t}\n\n\t\treturn resource;\n\t}\n\n\tpatch(asset, assets) {\n\t\tif (asset.resource.__data) {\n\t\t\tif (asset.resource.__data.minfilter !== undefined) asset.data.minfilter = asset.resource.__data.minfilter;\n\t\t\tif (asset.resource.__data.magfilter !== undefined) asset.data.magfilter = asset.resource.__data.magfilter;\n\t\t\tif (asset.resource.__data.addressu !== undefined) asset.data.addressu = asset.resource.__data.addressu;\n\t\t\tif (asset.resource.__data.addressv !== undefined) asset.data.addressv = asset.resource.__data.addressv;\n\t\t\tif (asset.resource.__data.mipmaps !== undefined) asset.data.mipmaps = asset.resource.__data.mipmaps;\n\t\t\tif (asset.resource.__data.anisotropy !== undefined) asset.data.anisotropy = asset.resource.__data.anisotropy;\n\t\t\tif (asset.resource.__data.rgbm !== undefined) asset.data.rgbm = !!asset.resource.__data.rgbm;\n\t\t\tasset.data.frames = asset.resource.__data.frames;\n\t\t\tdelete asset.resource.__data;\n\t\t}\n\n\t\tconst texture = asset.resource.texture;\n\n\t\tif (texture) {\n\t\t\ttexture.name = asset.name;\n\t\t\tif (asset.data.hasOwnProperty('minfilter') && texture.minFilter !== JSON_FILTER_MODE$1[asset.data.minfilter]) texture.minFilter = JSON_FILTER_MODE$1[asset.data.minfilter];\n\t\t\tif (asset.data.hasOwnProperty('magfilter') && texture.magFilter !== JSON_FILTER_MODE$1[asset.data.magfilter]) texture.magFilter = JSON_FILTER_MODE$1[asset.data.magfilter];\n\t\t\tif (asset.data.hasOwnProperty('addressu') && texture.addressU !== JSON_ADDRESS_MODE$1[asset.data.addressu]) texture.addressU = JSON_ADDRESS_MODE$1[asset.data.addressu];\n\t\t\tif (asset.data.hasOwnProperty('addressv') && texture.addressV !== JSON_ADDRESS_MODE$1[asset.data.addressv]) texture.addressV = JSON_ADDRESS_MODE$1[asset.data.addressv];\n\t\t\tif (asset.data.hasOwnProperty('mipmaps') && texture.mipmaps !== asset.data.mipmaps) texture.mipmaps = asset.data.mipmaps;\n\t\t\tif (asset.data.hasOwnProperty('anisotropy') && texture.anisotropy !== asset.data.anisotropy) texture.anisotropy = asset.data.anisotropy;\n\n\t\t\tif (asset.data.hasOwnProperty('rgbm')) {\n\t\t\t\tconst type = asset.data.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\n\t\t\t\tif (texture.type !== type) {\n\t\t\t\t\ttexture.type = type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasset.resource.texture = texture;\n\t\tconst frames = {};\n\n\t\tfor (const key in asset.data.frames) {\n\t\t\tconst frame = asset.data.frames[key];\n\t\t\tframes[key] = {\n\t\t\t\trect: new Vec4(frame.rect),\n\t\t\t\tpivot: new Vec2(frame.pivot),\n\t\t\t\tborder: new Vec4(frame.border)\n\t\t\t};\n\t\t}\n\n\t\tasset.resource.frames = frames;\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t}\n\n\t_onAssetChange(asset, attribute, value) {\n\t\tlet frame;\n\n\t\tif (attribute === 'data' || attribute === 'data.frames') {\n\t\t\tconst frames = {};\n\n\t\t\tfor (const key in value.frames) {\n\t\t\t\tframe = value.frames[key];\n\t\t\t\tframes[key] = {\n\t\t\t\t\trect: new Vec4(frame.rect),\n\t\t\t\t\tpivot: new Vec2(frame.pivot),\n\t\t\t\t\tborder: new Vec4(frame.border)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tasset.resource.frames = frames;\n\t\t} else {\n\t\t\tconst match = attribute.match(regexFrame);\n\n\t\t\tif (match) {\n\t\t\t\tconst frameKey = match[1];\n\n\t\t\t\tif (value) {\n\t\t\t\t\tif (!asset.resource.frames[frameKey]) {\n\t\t\t\t\t\tasset.resource.frames[frameKey] = {\n\t\t\t\t\t\t\trect: new Vec4(value.rect),\n\t\t\t\t\t\t\tpivot: new Vec2(value.pivot),\n\t\t\t\t\t\t\tborder: new Vec4(value.border)\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tframe = asset.resource.frames[frameKey];\n\t\t\t\t\t\tframe.rect.set(value.rect[0], value.rect[1], value.rect[2], value.rect[3]);\n\t\t\t\t\t\tframe.pivot.set(value.pivot[0], value.pivot[1]);\n\t\t\t\t\t\tframe.border.set(value.border[0], value.border[1], value.border[2], value.border[3]);\n\t\t\t\t\t}\n\n\t\t\t\t\tasset.resource.fire('set:frame', frameKey, asset.resource.frames[frameKey]);\n\t\t\t\t} else {\n\t\t\t\t\tif (asset.resource.frames[frameKey]) {\n\t\t\t\t\t\tdelete asset.resource.frames[frameKey];\n\t\t\t\t\t\tasset.resource.fire('remove:frame', frameKey);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction BasisWorker() {\n\tconst BASIS_FORMAT = {\n\t\tcTFETC1: 0,\n\t\tcTFETC2: 1,\n\t\tcTFBC1: 2,\n\t\tcTFBC3: 3,\n\t\tcTFPVRTC1_4_RGB: 8,\n\t\tcTFPVRTC1_4_RGBA: 9,\n\t\tcTFASTC_4x4: 10,\n\t\tcTFATC_RGB: 11,\n\t\tcTFATC_RGBA_INTERPOLATED_ALPHA: 12,\n\t\tcTFRGBA32: 13,\n\t\tcTFRGB565: 14,\n\t\tcTFRGBA4444: 16\n\t};\n\tconst opaqueMapping = {\n\t\tastc: BASIS_FORMAT.cTFASTC_4x4,\n\t\tdxt: BASIS_FORMAT.cTFBC1,\n\t\tetc1: BASIS_FORMAT.cTFETC1,\n\t\tetc2: BASIS_FORMAT.cTFETC1,\n\t\tpvr: BASIS_FORMAT.cTFPVRTC1_4_RGB,\n\t\tatc: BASIS_FORMAT.cTFATC_RGB,\n\t\tnone: BASIS_FORMAT.cTFRGB565\n\t};\n\tconst alphaMapping = {\n\t\tastc: BASIS_FORMAT.cTFASTC_4x4,\n\t\tdxt: BASIS_FORMAT.cTFBC3,\n\t\tetc1: BASIS_FORMAT.cTFRGBA4444,\n\t\tetc2: BASIS_FORMAT.cTFETC2,\n\t\tpvr: BASIS_FORMAT.cTFPVRTC1_4_RGBA,\n\t\tatc: BASIS_FORMAT.cTFATC_RGBA_INTERPOLATED_ALPHA,\n\t\tnone: BASIS_FORMAT.cTFRGBA4444\n\t};\n\tconst PIXEL_FORMAT = {\n\t\tETC1: 21,\n\t\tETC2_RGB: 22,\n\t\tETC2_RGBA: 23,\n\t\tDXT1: 8,\n\t\tDXT5: 10,\n\t\tPVRTC_4BPP_RGB_1: 26,\n\t\tPVRTC_4BPP_RGBA_1: 27,\n\t\tASTC_4x4: 28,\n\t\tATC_RGB: 29,\n\t\tATC_RGBA: 30,\n\t\tR8_G8_B8_A8: 7,\n\t\tR5_G6_B5: 3,\n\t\tR4_G4_B4_A4: 5\n\t};\n\n\tconst basisToEngineMapping = (basisFormat, deviceDetails) => {\n\t\tswitch (basisFormat) {\n\t\t\tcase BASIS_FORMAT.cTFETC1:\n\t\t\t\treturn deviceDetails.formats.etc1 ? PIXEL_FORMAT.ETC1 : PIXEL_FORMAT.ETC2_RGB;\n\n\t\t\tcase BASIS_FORMAT.cTFETC2:\n\t\t\t\treturn PIXEL_FORMAT.ETC2_RGBA;\n\n\t\t\tcase BASIS_FORMAT.cTFBC1:\n\t\t\t\treturn PIXEL_FORMAT.DXT1;\n\n\t\t\tcase BASIS_FORMAT.cTFBC3:\n\t\t\t\treturn PIXEL_FORMAT.DXT5;\n\n\t\t\tcase BASIS_FORMAT.cTFPVRTC1_4_RGB:\n\t\t\t\treturn PIXEL_FORMAT.PVRTC_4BPP_RGB_1;\n\n\t\t\tcase BASIS_FORMAT.cTFPVRTC1_4_RGBA:\n\t\t\t\treturn PIXEL_FORMAT.PVRTC_4BPP_RGBA_1;\n\n\t\t\tcase BASIS_FORMAT.cTFASTC_4x4:\n\t\t\t\treturn PIXEL_FORMAT.ASTC_4x4;\n\n\t\t\tcase BASIS_FORMAT.cTFATC_RGB:\n\t\t\t\treturn PIXEL_FORMAT.ATC_RGB;\n\n\t\t\tcase BASIS_FORMAT.cTFATC_RGBA_INTERPOLATED_ALPHA:\n\t\t\t\treturn PIXEL_FORMAT.ATC_RGBA;\n\n\t\t\tcase BASIS_FORMAT.cTFRGBA32:\n\t\t\t\treturn PIXEL_FORMAT.R8_G8_B8_A8;\n\n\t\t\tcase BASIS_FORMAT.cTFRGB565:\n\t\t\t\treturn PIXEL_FORMAT.R5_G6_B5;\n\n\t\t\tcase BASIS_FORMAT.cTFRGBA4444:\n\t\t\t\treturn PIXEL_FORMAT.R4_G4_B4_A4;\n\t\t}\n\t};\n\n\tconst unswizzleGGGR = data => {\n\t\tconst genB = function genB(R, G) {\n\t\t\tconst r = R * (2.0 / 255.0) - 1.0;\n\t\t\tconst g = G * (2.0 / 255.0) - 1.0;\n\t\t\tconst b = Math.sqrt(1.0 - Math.min(1.0, r * r + g * g));\n\t\t\treturn Math.max(0, Math.min(255, Math.floor((b + 1.0) * 0.5 * 255.0)));\n\t\t};\n\n\t\tfor (let offset = 0; offset < data.length; offset += 4) {\n\t\t\tconst R = data[offset + 3];\n\t\t\tconst G = data[offset + 1];\n\t\t\tdata[offset + 0] = R;\n\t\t\tdata[offset + 2] = genB(R, G);\n\t\t\tdata[offset + 3] = 255;\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tconst isCompressedFormat = basisFormat => {\n\t\treturn basisFormat !== BASIS_FORMAT.cTFRGBA32 && basisFormat !== BASIS_FORMAT.cTFRGB565 && basisFormat !== BASIS_FORMAT.cTFRGBA4444;\n\t};\n\n\tconst pack565 = data => {\n\t\tconst result = new Uint16Array(data.length / 4);\n\n\t\tfor (let offset = 0; offset < data.length; offset += 4) {\n\t\t\tconst R = data[offset + 0];\n\t\t\tconst G = data[offset + 1];\n\t\t\tconst B = data[offset + 2];\n\t\t\tresult[offset / 4] = (R & 0xf8) << 8 | (G & 0xfc) << 3 | B >> 3;\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconst performanceNow = () => {\n\t\treturn typeof performance !== 'undefined' ? performance.now() : 0;\n\t};\n\n\tlet basis;\n\tlet rgbPriority;\n\tlet rgbaPriority;\n\n\tconst chooseTargetFormat = (deviceDetails, hasAlpha, isUASTC) => {\n\t\tif (isUASTC) {\n\t\t\tif (deviceDetails.formats.astc) {\n\t\t\t\treturn 'astc';\n\t\t\t}\n\t\t} else {\n\t\t\tif (hasAlpha) {\n\t\t\t\tif (deviceDetails.formats.etc2) {\n\t\t\t\t\treturn 'etc2';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (deviceDetails.formats.etc1 || deviceDetails.formats.etc2) {\n\t\t\t\t\treturn 'etc1';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst testInOrder = priority => {\n\t\t\tfor (let i = 0; i < priority.length; ++i) {\n\t\t\t\tconst format = priority[i];\n\n\t\t\t\tif (deviceDetails.formats[format]) {\n\t\t\t\t\treturn format;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 'none';\n\t\t};\n\n\t\treturn testInOrder(hasAlpha ? rgbaPriority : rgbPriority);\n\t};\n\n\tconst transcode = (url, data, options) => {\n\t\tconst funcStart = performanceNow();\n\t\tconst basisFile = new basis.BasisFile(new Uint8Array(data));\n\t\tconst width = basisFile.getImageWidth(0, 0);\n\t\tconst height = basisFile.getImageHeight(0, 0);\n\t\tconst images = basisFile.getNumImages();\n\t\tconst levels = basisFile.getNumLevels(0);\n\t\tconst hasAlpha = !!basisFile.getHasAlpha();\n\t\tconst isUASTC = basisFile.isUASTC && basisFile.isUASTC();\n\n\t\tif (!width || !height || !images || !levels) {\n\t\t\tbasisFile.close();\n\t\t\tbasisFile.delete();\n\t\t\tthrow new Error('Invalid image dimensions url=' + url + ' width=' + width + ' height=' + height + ' images=' + images + ' levels=' + levels);\n\t\t}\n\n\t\tconst format = chooseTargetFormat(options.deviceDetails, hasAlpha, isUASTC);\n\t\tconst unswizzle = !!options.isGGGR && format === 'pvr';\n\t\tlet basisFormat;\n\n\t\tif (unswizzle) {\n\t\t\tbasisFormat = BASIS_FORMAT.cTFRGBA32;\n\t\t} else {\n\t\t\tbasisFormat = hasAlpha ? alphaMapping[format] : opaqueMapping[format];\n\t\t\tconst isPVRTC = basisFormat === BASIS_FORMAT.cTFPVRTC1_4_RGB || basisFormat === BASIS_FORMAT.cTFPVRTC1_4_RGBA;\n\t\t\tconst notPOT = (width & width - 1) !== 0 || (height & height - 1) !== 0;\n\t\t\tconst notSquare = width !== height;\n\n\t\t\tif (isPVRTC && (notPOT || notSquare) || !options.deviceDetails.webgl2 && notPOT) {\n\t\t\t\tbasisFormat = hasAlpha ? BASIS_FORMAT.cTFRGBA32 : BASIS_FORMAT.cTFRGB565;\n\t\t\t}\n\t\t}\n\n\t\tif (!basisFile.startTranscoding()) {\n\t\t\tbasisFile.close();\n\t\t\tbasisFile.delete();\n\t\t\tthrow new Error('Failed to start transcoding url=' + url);\n\t\t}\n\n\t\tlet i;\n\t\tconst levelData = [];\n\n\t\tfor (let mip = 0; mip < levels; ++mip) {\n\t\t\tconst dstSize = basisFile.getImageTranscodedSizeInBytes(0, mip, basisFormat);\n\t\t\tconst dst = new Uint8Array(dstSize);\n\n\t\t\tif (!basisFile.transcodeImage(dst, 0, mip, basisFormat, 1, 0)) {\n\t\t\t\tbasisFile.close();\n\t\t\t\tbasisFile.delete();\n\t\t\t\tthrow new Error('Failed to transcode image url=' + url);\n\t\t\t}\n\n\t\t\tconst is16BitFormat = basisFormat === BASIS_FORMAT.cTFRGB565 || basisFormat === BASIS_FORMAT.cTFRGBA4444;\n\t\t\tlevelData.push(is16BitFormat ? new Uint16Array(dst.buffer) : dst);\n\t\t}\n\n\t\tbasisFile.close();\n\t\tbasisFile.delete();\n\n\t\tif (unswizzle) {\n\t\t\tbasisFormat = BASIS_FORMAT.cTFRGB565;\n\n\t\t\tfor (i = 0; i < levelData.length; ++i) {\n\t\t\t\tlevelData[i] = pack565(unswizzleGGGR(levelData[i]));\n\t\t\t}\n\t\t}\n\n\t\tconst compressedFormat = isCompressedFormat(basisFormat);\n\t\treturn {\n\t\t\tformat: basisToEngineMapping(basisFormat, options.deviceDetails),\n\t\t\twidth: compressedFormat ? width + 3 & ~3 : width,\n\t\t\theight: compressedFormat ? height + 3 & ~3 : height,\n\t\t\tlevels: levelData,\n\t\t\tcubemap: false,\n\t\t\tmipmaps: true,\n\t\t\ttranscodeTime: performanceNow() - funcStart,\n\t\t\turl: url,\n\t\t\tunswizzledGGGR: unswizzle\n\t\t};\n\t};\n\n\tconst workerTranscode = (url, data, options) => {\n\t\ttry {\n\t\t\tconst result = transcode(url, data, options);\n\t\t\tresult.levels = result.levels.map(function (v) {\n\t\t\t\treturn v.buffer;\n\t\t\t});\n\t\t\tself.postMessage({\n\t\t\t\turl: url,\n\t\t\t\tdata: result\n\t\t\t}, result.levels);\n\t\t} catch (err) {\n\t\t\tself.postMessage({\n\t\t\t\turl: url,\n\t\t\t\terr: err\n\t\t\t});\n\t\t}\n\t};\n\n\tconst workerInit = (config, callback) => {\n\t\tself.importScripts(config.basisUrl);\n\n\t\tconst instantiateWasmFunc = (imports, successCallback) => {\n\t\t\tWebAssembly.instantiate(config.module, imports).then(result => {\n\t\t\t\tsuccessCallback(result);\n\t\t\t}).catch(reason => {\n\t\t\t\tconsole.error('instantiate failed + ' + reason);\n\t\t\t});\n\t\t\treturn {};\n\t\t};\n\n\t\tself.BASIS(config.module ? {\n\t\t\tinstantiateWasm: instantiateWasmFunc\n\t\t} : null).then(instance => {\n\t\t\tinstance.initializeBasis();\n\t\t\tbasis = instance;\n\t\t\trgbPriority = config.rgbPriority;\n\t\t\trgbaPriority = config.rgbaPriority;\n\t\t\tcallback(null);\n\t\t});\n\t};\n\n\tconst queue = [];\n\n\tself.onmessage = function (message) {\n\t\tconst data = message.data;\n\n\t\tswitch (data.type) {\n\t\t\tcase 'init':\n\t\t\t\tworkerInit(data.config, () => {\n\t\t\t\t\tfor (let i = 0; i < queue.length; ++i) {\n\t\t\t\t\t\tworkerTranscode(queue[i].url, queue[i].data, queue[i].options);\n\t\t\t\t\t}\n\n\t\t\t\t\tqueue.length = 0;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\tif (basis) {\n\t\t\t\t\tworkerTranscode(data.url, data.data, data.options);\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push(data);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n\nconst getCompressionFormats = device => {\n\treturn {\n\t\tastc: !!device.extCompressedTextureASTC,\n\t\tatc: !!device.extCompressedTextureATC,\n\t\tdxt: !!device.extCompressedTextureS3TC,\n\t\tetc1: !!device.extCompressedTextureETC1,\n\t\tetc2: !!device.extCompressedTextureETC,\n\t\tpvr: !!device.extCompressedTexturePVRTC\n\t};\n};\n\nconst prepareWorkerModules = (config, callback) => {\n\tconst getWorkerBlob = () => {\n\t\tconst code = '(' + BasisWorker.toString() + ')()\\n\\n';\n\t\treturn new File([code], 'basis_worker.js', {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t};\n\n\tconst wasmSupported = () => {\n\t\ttry {\n\t\t\tif (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n\t\t\t\tconst module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n\t\t\t\tif (module instanceof WebAssembly.Module) return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n\t\t\t}\n\t\t} catch (e) {}\n\n\t\treturn false;\n\t};\n\n\tconst sendResponse = (basisCode, module) => {\n\t\tcallback(null, {\n\t\t\tworkerUrl: URL.createObjectURL(getWorkerBlob()),\n\t\t\tbasisUrl: URL.createObjectURL(basisCode),\n\t\t\tmodule: module,\n\t\t\trgbPriority: config.rgbPriority,\n\t\t\trgbaPriority: config.rgbaPriority\n\t\t});\n\t};\n\n\tif (config.glueUrl && config.wasmUrl && wasmSupported()) {\n\t\tlet basisCode = null;\n\t\tlet module = null;\n\t\thttp.get(config.glueUrl, {\n\t\t\tresponseType: 'blob'\n\t\t}, (err, response) => {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tif (module) {\n\t\t\t\t\tsendResponse(response, module);\n\t\t\t\t} else {\n\t\t\t\t\tbasisCode = response;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst fetchPromise = fetch(config.wasmUrl);\n\n\t\tconst compileManual = () => {\n\t\t\tfetchPromise.then(result => result.arrayBuffer()).then(buffer => WebAssembly.compile(buffer)).then(module_ => {\n\t\t\t\tif (basisCode) {\n\t\t\t\t\tsendResponse(basisCode, module_);\n\t\t\t\t} else {\n\t\t\t\t\tmodule = module_;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tcallback(err, null);\n\t\t\t});\n\t\t};\n\n\t\tif (WebAssembly.compileStreaming) {\n\t\t\tWebAssembly.compileStreaming(fetchPromise).then(module_ => {\n\t\t\t\tif (basisCode) {\n\t\t\t\t\tsendResponse(basisCode, module_);\n\t\t\t\t} else {\n\t\t\t\t\tmodule = module_;\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tcompileManual();\n\t\t\t});\n\t\t} else {\n\t\t\tcompileManual();\n\t\t}\n\t} else {\n\t\thttp.get(config.fallbackUrl, {\n\t\t\tresponseType: 'blob'\n\t\t}, (err, response) => {\n\t\t\tif (err) {\n\t\t\t\tcallback(err, null);\n\t\t\t} else {\n\t\t\t\tsendResponse(response, null);\n\t\t\t}\n\t\t});\n\t}\n};\n\nclass BasisQueue {\n\tconstructor() {\n\t\tthis.callbacks = {};\n\t\tthis.queue = [];\n\t\tthis.clients = [];\n\t}\n\n\tenqueueJob(url, data, callback, options) {\n\t\tif (this.callbacks.hasOwnProperty(url)) {\n\t\t\tthis.callbacks[url].push(callback);\n\t\t} else {\n\t\t\tthis.callbacks[url] = [callback];\n\t\t\tconst job = {\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\toptions: options\n\t\t\t};\n\n\t\t\tif (this.clients.length > 0) {\n\t\t\t\tthis.clients.shift().run(job);\n\t\t\t} else {\n\t\t\t\tthis.queue.push(job);\n\t\t\t}\n\t\t}\n\t}\n\n\tenqueueClient(client) {\n\t\tif (this.queue.length > 0) {\n\t\t\tclient.run(this.queue.shift());\n\t\t} else {\n\t\t\tthis.clients.push(client);\n\t\t}\n\t}\n\n\thandleResponse(url, err, data) {\n\t\tconst callback = this.callbacks[url];\n\n\t\tif (err) {\n\t\t\tfor (let i = 0; i < callback.length; ++i) {\n\t\t\t\tcallback[i](err);\n\t\t\t}\n\t\t} else {\n\t\t\tif (data.format === PIXELFORMAT_R5_G6_B5 || data.format === PIXELFORMAT_R4_G4_B4_A4) {\n\t\t\t\tdata.levels = data.levels.map(function (v) {\n\t\t\t\t\treturn new Uint16Array(v);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdata.levels = data.levels.map(function (v) {\n\t\t\t\t\treturn new Uint8Array(v);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < callback.length; ++i) {\n\t\t\t\tcallback[i](null, data);\n\t\t\t}\n\t\t}\n\n\t\tdelete this.callbacks[url];\n\t}\n\n}\n\nclass BasisClient {\n\tconstructor(queue, config, eager) {\n\t\tthis.queue = queue;\n\t\tthis.worker = new Worker(config.workerUrl);\n\t\tthis.worker.addEventListener('message', message => {\n\t\t\tconst data = message.data;\n\t\t\tthis.queue.handleResponse(data.url, data.err, data.data);\n\n\t\t\tif (!this.eager) {\n\t\t\t\tthis.queue.enqueueClient(this);\n\t\t\t}\n\t\t});\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'init',\n\t\t\tconfig: config\n\t\t});\n\t\tthis.eager = eager;\n\t}\n\n\trun(job) {\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'transcode',\n\t\t\turl: job.url,\n\t\t\tformat: job.format,\n\t\t\tdata: job.data,\n\t\t\toptions: job.options\n\t\t}, [job.data]);\n\n\t\tif (this.eager) {\n\t\t\tthis.queue.enqueueClient(this);\n\t\t}\n\t}\n\n}\n\nconst defaultNumWorkers = 1;\nconst defaultRgbPriority = ['etc1', 'etc2', 'astc', 'dxt', 'pvr', 'atc'];\nconst defaultRgbaPriority = ['astc', 'dxt', 'etc2', 'pvr', 'atc'];\nconst queue = new BasisQueue();\nlet lazyConfig = null;\nlet initializing = false;\n\nfunction basisInitialize(config) {\n\tif (initializing) {\n\t\treturn;\n\t}\n\n\tif (!config) {\n\t\tconfig = lazyConfig || {};\n\t} else if (config.lazyInit) {\n\t\tlazyConfig = config;\n\t\treturn;\n\t}\n\n\tif (!config.glueUrl || !config.wasmUrl || !config.fallbackUrl) {\n\t\tconst modules = (window.config ? window.config.wasmModules : window.PRELOAD_MODULES) || [];\n\t\tconst wasmModule = modules.find(function (m) {\n\t\t\treturn m.moduleName === 'BASIS';\n\t\t});\n\n\t\tif (wasmModule) {\n\t\t\tconst urlBase = window.ASSET_PREFIX || \"\";\n\n\t\t\tif (!config.glueUrl) {\n\t\t\t\tconfig.glueUrl = urlBase + wasmModule.glueUrl;\n\t\t\t}\n\n\t\t\tif (!config.wasmUrl) {\n\t\t\t\tconfig.wasmUrl = urlBase + wasmModule.wasmUrl;\n\t\t\t}\n\n\t\t\tif (!config.fallbackUrl) {\n\t\t\t\tconfig.fallbackUrl = urlBase + wasmModule.fallbackUrl;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (config.glueUrl || config.wasmUrl || config.fallbackUrl) {\n\t\tinitializing = true;\n\t\tconst numWorkers = Math.max(1, Math.min(16, config.numWorkers || defaultNumWorkers));\n\t\tconst eagerWorkers = config.numWorkers === 1 || (config.hasOwnProperty('eagerWorkers') ? config.eagerWorkers : true);\n\t\tconfig.rgbPriority = config.rgbPriority || defaultRgbPriority;\n\t\tconfig.rgbaPriority = config.rgbaPriority || defaultRgbaPriority;\n\t\tprepareWorkerModules(config, (err, clientConfig) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(`failed to initialize basis worker: ${err}`);\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < numWorkers; ++i) {\n\t\t\t\t\tqueue.enqueueClient(new BasisClient(queue, clientConfig, eagerWorkers));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nlet deviceDetails = null;\n\nfunction basisTranscode(device, url, data, callback, options) {\n\tbasisInitialize();\n\n\tif (!deviceDetails) {\n\t\tdeviceDetails = {\n\t\t\twebgl2: device.webgl2,\n\t\t\tformats: getCompressionFormats(device)\n\t\t};\n\t}\n\n\tqueue.enqueueJob(url, data, callback, {\n\t\tdeviceDetails: deviceDetails,\n\t\tisGGGR: !!(options != null && options.isGGGR)\n\t});\n\treturn initializing;\n}\n\nclass BasisParser {\n\tconstructor(registry, device) {\n\t\tthis.device = device;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst device = this.device;\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err, result);\n\t\t\t} else {\n\t\t\t\tvar _asset$file, _asset$file$variants, _asset$file$variants$;\n\n\t\t\t\tconst basisModuleFound = basisTranscode(device, url.load, result, callback, {\n\t\t\t\t\tisGGGR: ((asset == null ? void 0 : (_asset$file = asset.file) == null ? void 0 : (_asset$file$variants = _asset$file.variants) == null ? void 0 : (_asset$file$variants$ = _asset$file$variants.basis) == null ? void 0 : _asset$file$variants$.opt) & 8) !== 0\n\t\t\t\t});\n\n\t\t\t\tif (!basisModuleFound) {\n\t\t\t\t\tcallback('Basis module not found. Asset \"' + asset.name + '\" basis texture variant will not be loaded.');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\topen(url, data, device) {\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: data.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: data.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: data.width,\n\t\t\theight: data.height,\n\t\t\tformat: data.format,\n\t\t\tcubemap: data.cubemap,\n\t\t\tlevels: data.levels\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n}\n\nclass ImgParser {\n\tconstructor(registry) {\n\t\tthis.crossOrigin = registry.prefix ? 'anonymous' : null;\n\t\tthis.maxRetries = 0;\n\t\tthis.useImageBitmap = false  ;\n\t}\n\n\tload(url, callback, asset) {\n\t\tlet crossOrigin;\n\n\t\tif (asset && asset.options && asset.options.hasOwnProperty('crossOrigin')) {\n\t\t\tcrossOrigin = asset.options.crossOrigin;\n\t\t} else if (ABSOLUTE_URL.test(url.load)) {\n\t\t\tcrossOrigin = this.crossOrigin;\n\t\t}\n\n\t\tif (this.useImageBitmap) {\n\t\t\tthis._loadImageBitmap(url.load, url.original, crossOrigin, callback);\n\t\t} else {\n\t\t\tthis._loadImage(url.load, url.original, crossOrigin, callback);\n\t\t}\n\t}\n\n\topen(url, data, device) {\n\t\tconst ext = path.getExtension(url).toLowerCase();\n\t\tconst format = ext === \".jpg\" || ext === \".jpeg\" ? PIXELFORMAT_R8_G8_B8 : PIXELFORMAT_R8_G8_B8_A8;\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\twidth: data.width,\n\t\t\theight: data.height,\n\t\t\tformat: format\n\t\t});\n\t\ttexture.setSource(data);\n\t\treturn texture;\n\t}\n\n\t_loadImage(url, originalUrl, crossOrigin, callback) {\n\t\tconst image = new Image();\n\n\t\tif (crossOrigin) {\n\t\t\timage.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tlet retries = 0;\n\t\tconst maxRetries = this.maxRetries;\n\t\tlet retryTimeout;\n\n\t\timage.onload = function () {\n\t\t\tcallback(null, image);\n\t\t};\n\n\t\timage.onerror = function () {\n\t\t\tif (retryTimeout) return;\n\n\t\t\tif (maxRetries > 0 && ++retries <= maxRetries) {\n\t\t\t\tconst retryDelay = Math.pow(2, retries) * 100;\n\t\t\t\tconsole.log(\"Error loading Texture from: '\" + originalUrl + \"' - Retrying in \" + retryDelay + \"ms...\");\n\t\t\t\tconst idx = url.indexOf('?');\n\t\t\t\tconst separator = idx >= 0 ? '&' : '?';\n\t\t\t\tretryTimeout = setTimeout(function () {\n\t\t\t\t\timage.src = url + separator + 'retry=' + Date.now();\n\t\t\t\t\tretryTimeout = null;\n\t\t\t\t}, retryDelay);\n\t\t\t} else {\n\t\t\t\tcallback(\"Error loading Texture from: '\" + originalUrl + \"'\");\n\t\t\t}\n\t\t};\n\n\t\timage.src = url;\n\t}\n\n\t_loadImageBitmap(url, originalUrl, crossOrigin, callback) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"blob\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url, options, function (err, blob) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t} else {\n\t\t\t\tcreateImageBitmap(blob, {\n\t\t\t\t\tpremultiplyAlpha: 'none'\n\t\t\t\t}).then(function (imageBitmap) {\n\t\t\t\t\tcallback(null, imageBitmap);\n\t\t\t\t}).catch(function (e) {\n\t\t\t\t\tcallback(e);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nconst IDENTIFIER = [0x58544BAB, 0xBB313120, 0x0A1A0A0D];\nconst KNOWN_FORMATS = {\n\t0x83F0: PIXELFORMAT_DXT1,\n\t0x83F2: PIXELFORMAT_DXT3,\n\t0x83F3: PIXELFORMAT_DXT5,\n\t0x8D64: PIXELFORMAT_ETC1,\n\t0x9274: PIXELFORMAT_ETC2_RGB,\n\t0x9278: PIXELFORMAT_ETC2_RGBA,\n\t0x8C00: PIXELFORMAT_PVRTC_4BPP_RGB_1,\n\t0x8C01: PIXELFORMAT_PVRTC_2BPP_RGB_1,\n\t0x8C02: PIXELFORMAT_PVRTC_4BPP_RGBA_1,\n\t0x8C03: PIXELFORMAT_PVRTC_2BPP_RGBA_1,\n\t0x8051: PIXELFORMAT_R8_G8_B8,\n\t0x8058: PIXELFORMAT_R8_G8_B8_A8,\n\t0x8C41: PIXELFORMAT_SRGB,\n\t0x8C43: PIXELFORMAT_SRGBA,\n\t0x8C3A: PIXELFORMAT_111110F,\n\t0x881B: PIXELFORMAT_RGB16F,\n\t0x881A: PIXELFORMAT_RGBA16F\n};\n\nfunction createContainer(pixelFormat, buffer, byteOffset, byteSize) {\n\treturn pixelFormat === PIXELFORMAT_111110F ? new Uint32Array(buffer, byteOffset, byteSize / 4) : new Uint8Array(buffer, byteOffset, byteSize);\n}\n\nclass KtxParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst textureData = this.parse(data);\n\n\t\tif (!textureData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: textureData.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: textureData.cubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: textureData.width,\n\t\t\theight: textureData.height,\n\t\t\tformat: textureData.format,\n\t\t\tcubemap: textureData.cubemap,\n\t\t\tlevels: textureData.levels\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n\tparse(data) {\n\t\tconst dataU32 = new Uint32Array(data);\n\n\t\tif (IDENTIFIER[0] !== dataU32[0] || IDENTIFIER[1] !== dataU32[1] || IDENTIFIER[2] !== dataU32[2]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst header = {\n\t\t\tendianness: dataU32[3],\n\t\t\tglType: dataU32[4],\n\t\t\tglTypeSize: dataU32[5],\n\t\t\tglFormat: dataU32[6],\n\t\t\tglInternalFormat: dataU32[7],\n\t\t\tglBaseInternalFormat: dataU32[8],\n\t\t\tpixelWidth: dataU32[9],\n\t\t\tpixelHeight: dataU32[10],\n\t\t\tpixelDepth: dataU32[11],\n\t\t\tnumberOfArrayElements: dataU32[12],\n\t\t\tnumberOfFaces: dataU32[13],\n\t\t\tnumberOfMipmapLevels: dataU32[14],\n\t\t\tbytesOfKeyValueData: dataU32[15]\n\t\t};\n\n\t\tif (header.pixelDepth > 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (header.numberOfArrayElements !== 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst format = KNOWN_FORMATS[header.glInternalFormat];\n\n\t\tif (format === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet offset = 16 + header.bytesOfKeyValueData / 4;\n\t\tconst isCubemap = header.numberOfFaces > 1;\n\t\tconst levels = [];\n\n\t\tfor (let mipmapLevel = 0; mipmapLevel < (header.numberOfMipmapLevels || 1); mipmapLevel++) {\n\t\t\tconst imageSizeInBytes = dataU32[offset++];\n\n\t\t\tif (isCubemap) {\n\t\t\t\tlevels.push([]);\n\t\t\t}\n\n\t\t\tconst target = isCubemap ? levels[mipmapLevel] : levels;\n\n\t\t\tfor (let face = 0; face < (isCubemap ? 6 : 1); ++face) {\n\t\t\t\ttarget.push(createContainer(format, data, offset * 4, imageSizeInBytes));\n\t\t\t\toffset += imageSizeInBytes + 3 >> 2;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tformat: format,\n\t\t\twidth: header.pixelWidth,\n\t\t\theight: header.pixelHeight,\n\t\t\tlevels: levels,\n\t\t\tcubemap: isCubemap\n\t\t};\n\t}\n\n}\n\nclass LegacyDdsParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst header = new Uint32Array(data, 0, 128 / 4);\n\t\tconst width = header[4];\n\t\tconst height = header[3];\n\t\tconst mips = Math.max(header[7], 1);\n\t\tconst isFourCc = header[20] === 4;\n\t\tconst fcc = header[21];\n\t\tconst bpp = header[22];\n\t\tconst isCubemap = header[28] === 65024;\n\t\tconst FCC_DXT1 = 827611204;\n\t\tconst FCC_DXT5 = 894720068;\n\t\tconst FCC_FP32 = 116;\n\t\tconst FCC_ETC1 = 826496069;\n\t\tconst FCC_PVRTC_2BPP_RGB_1 = 825438800;\n\t\tconst FCC_PVRTC_2BPP_RGBA_1 = 825504336;\n\t\tconst FCC_PVRTC_4BPP_RGB_1 = 825439312;\n\t\tconst FCC_PVRTC_4BPP_RGBA_1 = 825504848;\n\t\tlet compressed = false;\n\t\tlet floating = false;\n\t\tlet etc1 = false;\n\t\tlet pvrtc2 = false;\n\t\tlet pvrtc4 = false;\n\t\tlet format = null;\n\t\tlet texture;\n\n\t\tif (isFourCc) {\n\t\t\tif (fcc === FCC_DXT1) {\n\t\t\t\tformat = PIXELFORMAT_DXT1;\n\t\t\t\tcompressed = true;\n\t\t\t} else if (fcc === FCC_DXT5) {\n\t\t\t\tformat = PIXELFORMAT_DXT5;\n\t\t\t\tcompressed = true;\n\t\t\t} else if (fcc === FCC_FP32) {\n\t\t\t\tformat = PIXELFORMAT_RGBA32F;\n\t\t\t\tfloating = true;\n\t\t\t} else if (fcc === FCC_ETC1) {\n\t\t\t\tformat = PIXELFORMAT_ETC1;\n\t\t\t\tcompressed = true;\n\t\t\t\tetc1 = true;\n\t\t\t} else if (fcc === FCC_PVRTC_2BPP_RGB_1 || fcc === FCC_PVRTC_2BPP_RGBA_1) {\n\t\t\t\tformat = fcc === FCC_PVRTC_2BPP_RGB_1 ? PIXELFORMAT_PVRTC_2BPP_RGB_1 : PIXELFORMAT_PVRTC_2BPP_RGBA_1;\n\t\t\t\tcompressed = true;\n\t\t\t\tpvrtc2 = true;\n\t\t\t} else if (fcc === FCC_PVRTC_4BPP_RGB_1 || fcc === FCC_PVRTC_4BPP_RGBA_1) {\n\t\t\t\tformat = fcc === FCC_PVRTC_4BPP_RGB_1 ? PIXELFORMAT_PVRTC_4BPP_RGB_1 : PIXELFORMAT_PVRTC_4BPP_RGBA_1;\n\t\t\t\tcompressed = true;\n\t\t\t\tpvrtc4 = true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (bpp === 32) {\n\t\t\t\tformat = PIXELFORMAT_R8_G8_B8_A8;\n\t\t\t}\n\t\t}\n\n\t\tif (!format) {\n\t\t\ttexture = new Texture(device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8\n\t\t\t});\n\t\t\ttexture.name = 'dds-legacy-empty';\n\t\t\treturn texture;\n\t\t}\n\n\t\ttexture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: isCubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\taddressV: isCubemap ? ADDRESS_CLAMP_TO_EDGE : ADDRESS_REPEAT,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tformat: format,\n\t\t\tcubemap: isCubemap\n\t\t});\n\t\tlet offset = 128;\n\t\tconst faces = isCubemap ? 6 : 1;\n\t\tlet mipSize;\n\t\tconst DXT_BLOCK_WIDTH = 4;\n\t\tconst DXT_BLOCK_HEIGHT = 4;\n\t\tconst blockSize = fcc === FCC_DXT1 ? 8 : 16;\n\t\tlet numBlocksAcross, numBlocksDown, numBlocks;\n\n\t\tfor (let face = 0; face < faces; face++) {\n\t\t\tlet mipWidth = width;\n\t\t\tlet mipHeight = height;\n\n\t\t\tfor (let i = 0; i < mips; i++) {\n\t\t\t\tif (compressed) {\n\t\t\t\t\tif (etc1) {\n\t\t\t\t\t\tmipSize = Math.floor((mipWidth + 3) / 4) * Math.floor((mipHeight + 3) / 4) * 8;\n\t\t\t\t\t} else if (pvrtc2) {\n\t\t\t\t\t\tmipSize = Math.max(mipWidth, 16) * Math.max(mipHeight, 8) / 4;\n\t\t\t\t\t} else if (pvrtc4) {\n\t\t\t\t\t\tmipSize = Math.max(mipWidth, 8) * Math.max(mipHeight, 8) / 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnumBlocksAcross = Math.floor((mipWidth + DXT_BLOCK_WIDTH - 1) / DXT_BLOCK_WIDTH);\n\t\t\t\t\t\tnumBlocksDown = Math.floor((mipHeight + DXT_BLOCK_HEIGHT - 1) / DXT_BLOCK_HEIGHT);\n\t\t\t\t\t\tnumBlocks = numBlocksAcross * numBlocksDown;\n\t\t\t\t\t\tmipSize = numBlocks * blockSize;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmipSize = mipWidth * mipHeight * 4;\n\t\t\t\t}\n\n\t\t\t\tconst mipBuff = floating ? new Float32Array(data, offset, mipSize) : new Uint8Array(data, offset, mipSize);\n\n\t\t\t\tif (!isCubemap) {\n\t\t\t\t\ttexture._levels[i] = mipBuff;\n\t\t\t\t} else {\n\t\t\t\t\tif (!texture._levels[i]) texture._levels[i] = [];\n\t\t\t\t\ttexture._levels[i][face] = mipBuff;\n\t\t\t\t}\n\n\t\t\t\toffset += floating ? mipSize * 4 : mipSize;\n\t\t\t\tmipWidth = Math.max(mipWidth * 0.5, 1);\n\t\t\t\tmipHeight = Math.max(mipHeight * 0.5, 1);\n\t\t\t}\n\t\t}\n\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n}\n\nclass Reader {\n\tconstructor(data) {\n\t\tthis.view = new DataView(data);\n\t\tthis.offset = 0;\n\t}\n\n\treadLine() {\n\t\tconst view = this.view;\n\t\tlet result = \"\";\n\n\t\twhile (true) {\n\t\t\tif (this.offset >= view.byteLength) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst c = String.fromCharCode(this.readUint8());\n\n\t\t\tif (c === '\\n') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tresult += c;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\treadUint8() {\n\t\treturn this.view.getUint8(this.offset++);\n\t}\n\n\treadUint8s(result) {\n\t\tconst view = this.view;\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = view.getUint8(this.offset++);\n\t\t}\n\t}\n\n\tpeekUint8s(result) {\n\t\tconst view = this.view;\n\n\t\tfor (let i = 0; i < result.length; ++i) {\n\t\t\tresult[i] = view.getUint8(this.offset + i);\n\t\t}\n\t}\n\n}\n\nclass HdrParser {\n\tconstructor(registry) {\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback, asset) {\n\t\tconst options = {\n\t\t\tcache: true,\n\t\t\tresponseType: \"arraybuffer\",\n\t\t\tretry: this.maxRetries > 0,\n\t\t\tmaxRetries: this.maxRetries\n\t\t};\n\t\thttp.get(url.load, options, callback);\n\t}\n\n\topen(url, data, device) {\n\t\tconst textureData = this.parse(data);\n\n\t\tif (!textureData) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst texture = new Texture(device, {\n\t\t\tname: url,\n\t\t\taddressU: ADDRESS_REPEAT,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tminFilter: FILTER_NEAREST_MIPMAP_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\twidth: textureData.width,\n\t\t\theight: textureData.height,\n\t\t\tlevels: textureData.levels,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\ttype: TEXTURETYPE_RGBE,\n\t\t\tmipmaps: false\n\t\t});\n\t\ttexture.upload();\n\t\treturn texture;\n\t}\n\n\tparse(data) {\n\t\tconst reader = new Reader(data);\n\t\tconst magic = reader.readLine();\n\n\t\tif (!magic.startsWith('#?RADIANCE')) {\n\t\t\tthis._error(\"radiance header has invalid magic\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst variables = {};\n\n\t\twhile (true) {\n\t\t\tconst line = reader.readLine();\n\n\t\t\tif (line.length === 0) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tconst parts = line.split('=');\n\n\t\t\t\tif (parts.length === 2) {\n\t\t\t\t\tvariables[parts[0]] = parts[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!variables.hasOwnProperty('FORMAT')) {\n\t\t\tthis._error(\"radiance header missing FORMAT variable\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst resolution = reader.readLine().split(' ');\n\n\t\tif (resolution.length !== 4) {\n\t\t\tthis._error(\"radiance header has invalid resolution\");\n\n\t\t\treturn null;\n\t\t}\n\n\t\tconst height = parseInt(resolution[1], 10);\n\t\tconst width = parseInt(resolution[3], 10);\n\n\t\tconst pixels = this._readPixels(reader, width, height, resolution[0] === '-Y');\n\n\t\tif (!pixels) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tlevels: [pixels]\n\t\t};\n\t}\n\n\t_readPixels(reader, width, height, flipY) {\n\t\tif (width < 8 || width > 0x7fff) {\n\t\t\treturn this._readPixelsFlat(reader, width, height);\n\t\t}\n\n\t\tconst rgbe = [0, 0, 0, 0];\n\t\treader.peekUint8s(rgbe);\n\n\t\tif (rgbe[0] !== 2 || rgbe[1] !== 2 || (rgbe[2] & 0x80) !== 0) {\n\t\t\treturn this._readPixelsFlat(reader, width, height);\n\t\t}\n\n\t\tconst buffer = new ArrayBuffer(width * height * 4);\n\t\tconst view = new Uint8Array(buffer);\n\t\tlet scanstart = flipY ? width * 4 * (height - 1) : 0;\n\t\tlet x, y, i, channel, count, value;\n\n\t\tfor (y = 0; y < height; ++y) {\n\t\t\treader.readUint8s(rgbe);\n\n\t\t\tif ((rgbe[2] << 8) + rgbe[3] !== width) {\n\t\t\t\tthis._error(\"radiance has invalid scanline width\");\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor (channel = 0; channel < 4; ++channel) {\n\t\t\t\tx = 0;\n\n\t\t\t\twhile (x < width) {\n\t\t\t\t\tcount = reader.readUint8();\n\n\t\t\t\t\tif (count > 128) {\n\t\t\t\t\t\tcount -= 128;\n\n\t\t\t\t\t\tif (x + count > width) {\n\t\t\t\t\t\t\tthis._error(\"radiance has invalid scanline data\");\n\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = reader.readUint8();\n\n\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\t\t\tview[scanstart + channel + 4 * x++] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (count === 0 || x + count > width) {\n\t\t\t\t\t\t\tthis._error(\"radiance has invalid scanline data\");\n\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\t\t\t\t\t\t\tview[scanstart + channel + 4 * x++] = reader.readUint8();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tscanstart += width * 4 * (flipY ? -1 : 1);\n\t\t}\n\n\t\treturn view;\n\t}\n\n\t_readPixelsFlat(reader, width, height) {\n\t\tconst filePixelBytes = reader.view.buffer.byteLength - reader.offset;\n\t\treturn filePixelBytes === width * height * 4 ? new Uint8Array(reader.view.buffer, reader.offset) : null;\n\t}\n\n\t_error(message) {}\n\n}\n\nconst JSON_ADDRESS_MODE = {\n\t\"repeat\": ADDRESS_REPEAT,\n\t\"clamp\": ADDRESS_CLAMP_TO_EDGE,\n\t\"mirror\": ADDRESS_MIRRORED_REPEAT\n};\nconst JSON_FILTER_MODE = {\n\t\"nearest\": FILTER_NEAREST,\n\t\"linear\": FILTER_LINEAR,\n\t\"nearest_mip_nearest\": FILTER_NEAREST_MIPMAP_NEAREST,\n\t\"linear_mip_nearest\": FILTER_LINEAR_MIPMAP_NEAREST,\n\t\"nearest_mip_linear\": FILTER_NEAREST_MIPMAP_LINEAR,\n\t\"linear_mip_linear\": FILTER_LINEAR_MIPMAP_LINEAR\n};\nconst JSON_TEXTURE_TYPE = {\n\t\"default\": TEXTURETYPE_DEFAULT,\n\t\"rgbm\": TEXTURETYPE_RGBM,\n\t\"rgbe\": TEXTURETYPE_RGBE,\n\t\"swizzleGGGR\": TEXTURETYPE_SWIZZLEGGGR\n};\n\nclass TextureParser {\n\tload(url, callback, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\topen(url, data, device) {\n\t\tthrow new Error('not implemented');\n\t}\n\n}\n\nconst _completePartialMipmapChain = function _completePartialMipmapChain(texture) {\n\tconst requiredMipLevels = Math.log2(Math.max(texture._width, texture._height)) + 1;\n\n\tconst isHtmlElement = function isHtmlElement(object) {\n\t\treturn object instanceof HTMLCanvasElement || object instanceof HTMLImageElement || object instanceof HTMLVideoElement;\n\t};\n\n\tif (!(texture._format === PIXELFORMAT_R8_G8_B8_A8 || texture._format === PIXELFORMAT_RGBA32F) || texture._volume || texture._compressed || texture._levels.length === 1 || texture._levels.length === requiredMipLevels || isHtmlElement(texture._cubemap ? texture._levels[0][0] : texture._levels[0])) {\n\t\treturn;\n\t}\n\n\tconst downsample = function downsample(width, height, data) {\n\t\tconst sampledWidth = Math.max(1, width >> 1);\n\t\tconst sampledHeight = Math.max(1, height >> 1);\n\t\tconst sampledData = new data.constructor(sampledWidth * sampledHeight * 4);\n\t\tconst xs = Math.floor(width / sampledWidth);\n\t\tconst ys = Math.floor(height / sampledHeight);\n\t\tconst xsys = xs * ys;\n\n\t\tfor (let y = 0; y < sampledHeight; ++y) {\n\t\t\tfor (let x = 0; x < sampledWidth; ++x) {\n\t\t\t\tfor (let e = 0; e < 4; ++e) {\n\t\t\t\t\tlet sum = 0;\n\n\t\t\t\t\tfor (let sy = 0; sy < ys; ++sy) {\n\t\t\t\t\t\tfor (let sx = 0; sx < xs; ++sx) {\n\t\t\t\t\t\t\tsum += data[(x * xs + sx + (y * ys + sy) * width) * 4 + e];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsampledData[(x + y * sampledWidth) * 4 + e] = sum / xsys;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sampledData;\n\t};\n\n\tfor (let level = texture._levels.length; level < requiredMipLevels; ++level) {\n\t\tconst width = Math.max(1, texture._width >> level - 1);\n\t\tconst height = Math.max(1, texture._height >> level - 1);\n\n\t\tif (texture._cubemap) {\n\t\t\tconst mips = [];\n\n\t\t\tfor (let face = 0; face < 6; ++face) {\n\t\t\t\tmips.push(downsample(width, height, texture._levels[level - 1][face]));\n\t\t\t}\n\n\t\t\ttexture._levels.push(mips);\n\t\t} else {\n\t\t\ttexture._levels.push(downsample(width, height, texture._levels[level - 1]));\n\t\t}\n\t}\n\n\ttexture._levelsUpdated = texture._cubemap ? [[true, true, true, true, true, true]] : [true];\n};\n\nclass TextureHandler {\n\tconstructor(device, assets, loader) {\n\t\tthis._device = device;\n\t\tthis._assets = assets;\n\t\tthis._loader = loader;\n\t\tthis.imgParser = new ImgParser(assets);\n\t\tthis.parsers = {\n\t\t\tdds: new LegacyDdsParser(assets),\n\t\t\tktx: new KtxParser(assets),\n\t\t\tbasis: new BasisParser(assets, device),\n\t\t\thdr: new HdrParser(assets)\n\t\t};\n\t}\n\n\tget crossOrigin() {\n\t\treturn this.imgParser.crossOrigin;\n\t}\n\n\tset crossOrigin(value) {\n\t\tthis.imgParser.crossOrigin = value;\n\t}\n\n\tget maxRetries() {\n\t\treturn this.imgParser.maxRetries;\n\t}\n\n\tset maxRetries(value) {\n\t\tthis.imgParser.maxRetries = value;\n\n\t\tfor (const parser in this.parsers) {\n\t\t\tif (this.parsers.hasOwnProperty(parser)) {\n\t\t\t\tthis.parsers[parser].maxRetries = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t_getUrlWithoutParams(url) {\n\t\treturn url.indexOf('?') >= 0 ? url.split('?')[0] : url;\n\t}\n\n\t_getParser(url) {\n\t\tconst ext = path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '');\n\t\treturn this.parsers[ext] || this.imgParser;\n\t}\n\n\tload(url, callback, asset) {\n\t\tif (typeof url === 'string') {\n\t\t\turl = {\n\t\t\t\tload: url,\n\t\t\t\toriginal: url\n\t\t\t};\n\t\t}\n\n\t\tthis._getParser(url.original).load(url, callback, asset);\n\t}\n\n\topen(url, data, asset) {\n\t\tif (!url) return;\n\n\t\tlet texture = this._getParser(url).open(url, data, this._device);\n\n\t\tif (texture === null) {\n\t\t\ttexture = new Texture(this._device, {\n\t\t\t\twidth: 4,\n\t\t\t\theight: 4,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8\n\t\t\t});\n\t\t} else {\n\t\t\t_completePartialMipmapChain(texture);\n\n\t\t\tif (data.unswizzledGGGR) {\n\t\t\t\tasset.file.variants.basis.opt &= ~8;\n\t\t\t}\n\t\t}\n\n\t\treturn texture;\n\t}\n\n\tpatch(asset, assets) {\n\t\tconst texture = asset.resource;\n\n\t\tif (!texture) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (asset.name && asset.name.length > 0) {\n\t\t\ttexture.name = asset.name;\n\t\t}\n\n\t\tconst assetData = asset.data;\n\n\t\tif (assetData.hasOwnProperty('minfilter')) {\n\t\t\ttexture.minFilter = JSON_FILTER_MODE[assetData.minfilter];\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('magfilter')) {\n\t\t\ttexture.magFilter = JSON_FILTER_MODE[assetData.magfilter];\n\t\t}\n\n\t\tif (!texture.cubemap) {\n\t\t\tif (assetData.hasOwnProperty('addressu')) {\n\t\t\t\ttexture.addressU = JSON_ADDRESS_MODE[assetData.addressu];\n\t\t\t}\n\n\t\t\tif (assetData.hasOwnProperty('addressv')) {\n\t\t\t\ttexture.addressV = JSON_ADDRESS_MODE[assetData.addressv];\n\t\t\t}\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('mipmaps')) {\n\t\t\ttexture.mipmaps = assetData.mipmaps;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('anisotropy')) {\n\t\t\ttexture.anisotropy = assetData.anisotropy;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('flipY')) {\n\t\t\ttexture.flipY = !!assetData.flipY;\n\t\t}\n\n\t\tif (assetData.hasOwnProperty('type')) {\n\t\t\ttexture.type = JSON_TEXTURE_TYPE[assetData.type];\n\t\t} else if (assetData.hasOwnProperty('rgbm') && assetData.rgbm) {\n\t\t\ttexture.type = TEXTURETYPE_RGBM;\n\t\t} else if (asset.file && asset.getPreferredFile) {\n\t\t\tconst preferredFile = asset.getPreferredFile();\n\n\t\t\tif (preferredFile) {\n\t\t\t\tif (preferredFile.opt && (preferredFile.opt & 8) !== 0) {\n\t\t\t\t\ttexture.type = TEXTURETYPE_SWIZZLEGGGR;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass TagsCache {\n\tconstructor(key = null) {\n\t\tthis._index = {};\n\t\tthis._key = key;\n\t}\n\n\taddItem(item) {\n\t\tconst tags = item.tags._list;\n\n\t\tfor (const tag of tags) this.add(tag, item);\n\t}\n\n\tremoveItem(item) {\n\t\tconst tags = item.tags._list;\n\n\t\tfor (const tag of tags) this.remove(tag, item);\n\t}\n\n\tadd(tag, item) {\n\t\tif (this._index[tag] && this._index[tag].list.indexOf(item) !== -1) return;\n\n\t\tif (!this._index[tag]) {\n\t\t\tthis._index[tag] = {\n\t\t\t\tlist: []\n\t\t\t};\n\t\t\tif (this._key) this._index[tag].keys = {};\n\t\t}\n\n\t\tthis._index[tag].list.push(item);\n\n\t\tif (this._key) this._index[tag].keys[item[this._key]] = item;\n\t}\n\n\tremove(tag, item) {\n\t\tif (!this._index[tag]) return;\n\n\t\tif (this._key) {\n\t\t\tif (!this._index[tag].keys[item[this._key]]) return;\n\t\t}\n\n\t\tconst ind = this._index[tag].list.indexOf(item);\n\n\t\tif (ind === -1) return;\n\n\t\tthis._index[tag].list.splice(ind, 1);\n\n\t\tif (this._key) delete this._index[tag].keys[item[this._key]];\n\t\tif (this._index[tag].list.length === 0) delete this._index[tag];\n\t}\n\n\tfind(args) {\n\t\tconst index = {};\n\t\tconst items = [];\n\t\tlet item, tag, tags, tagsRest, missingIndex;\n\n\t\tconst sort = (a, b) => {\n\t\t\treturn this._index[a].list.length - this._index[b].list.length;\n\t\t};\n\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\ttag = args[i];\n\n\t\t\tif (tag instanceof Array) {\n\t\t\t\tif (tag.length === 0) continue;\n\n\t\t\t\tif (tag.length === 1) {\n\t\t\t\t\ttag = tag[0];\n\t\t\t\t} else {\n\t\t\t\t\tmissingIndex = false;\n\n\t\t\t\t\tfor (let t = 0; t < tag.length; t++) {\n\t\t\t\t\t\tif (!this._index[tag[t]]) {\n\t\t\t\t\t\t\tmissingIndex = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (missingIndex) continue;\n\t\t\t\t\ttags = tag.slice(0).sort(sort);\n\t\t\t\t\ttagsRest = tags.slice(1);\n\t\t\t\t\tif (tagsRest.length === 1) tagsRest = tagsRest[0];\n\n\t\t\t\t\tfor (let n = 0; n < this._index[tags[0]].list.length; n++) {\n\t\t\t\t\t\titem = this._index[tags[0]].list[n];\n\n\t\t\t\t\t\tif ((this._key ? !index[item[this._key]] : items.indexOf(item) === -1) && item.tags.has(tagsRest)) {\n\t\t\t\t\t\t\tif (this._key) index[item[this._key]] = true;\n\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tag && typeof tag === 'string' && this._index[tag]) {\n\t\t\t\tfor (let n = 0; n < this._index[tag].list.length; n++) {\n\t\t\t\t\titem = this._index[tag].list[n];\n\n\t\t\t\t\tif (this._key) {\n\t\t\t\t\t\tif (!index[item[this._key]]) {\n\t\t\t\t\t\t\tindex[item[this._key]] = true;\n\t\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (items.indexOf(item) === -1) {\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n}\n\nclass AssetRegistry extends EventHandler {\n\tconstructor(loader) {\n\t\tsuper();\n\t\tthis._loader = loader;\n\t\tthis._assets = [];\n\t\tthis._cache = {};\n\t\tthis._names = {};\n\t\tthis._tags = new TagsCache('_id');\n\t\tthis._urls = {};\n\t\tthis.prefix = null;\n\t}\n\n\tlist(filters) {\n\t\tfilters = filters || {};\n\t\treturn this._assets.filter(function (asset) {\n\t\t\tvar include = true;\n\n\t\t\tif (filters.preload !== undefined) {\n\t\t\t\tinclude = asset.preload === filters.preload;\n\t\t\t}\n\n\t\t\treturn include;\n\t\t});\n\t}\n\n\tadd(asset) {\n\t\tvar index = this._assets.push(asset) - 1;\n\t\tvar url;\n\t\tthis._cache[asset.id] = index;\n\t\tif (!this._names[asset.name]) this._names[asset.name] = [];\n\n\t\tthis._names[asset.name].push(index);\n\n\t\tif (asset.file) {\n\t\t\turl = asset.file.url;\n\t\t\tthis._urls[url] = index;\n\t\t}\n\n\t\tasset.registry = this;\n\n\t\tthis._tags.addItem(asset);\n\n\t\tasset.tags.on('add', this._onTagAdd, this);\n\t\tasset.tags.on('remove', this._onTagRemove, this);\n\t\tthis.fire(\"add\", asset);\n\t\tthis.fire(\"add:\" + asset.id, asset);\n\t\tif (url) this.fire(\"add:url:\" + url, asset);\n\t\tif (asset.preload) this.load(asset);\n\t}\n\n\tremove(asset) {\n\t\tvar idx = this._cache[asset.id];\n\t\tvar url = asset.file ? asset.file.url : null;\n\n\t\tif (idx !== undefined) {\n\t\t\tthis._assets.splice(idx, 1);\n\n\t\t\tdelete this._cache[asset.id];\n\t\t\tthis._names = {};\n\t\t\tthis._urls = [];\n\n\t\t\tfor (var i = 0, l = this._assets.length; i < l; i++) {\n\t\t\t\tvar a = this._assets[i];\n\t\t\t\tthis._cache[a.id] = i;\n\n\t\t\t\tif (!this._names[a.name]) {\n\t\t\t\t\tthis._names[a.name] = [];\n\t\t\t\t}\n\n\t\t\t\tthis._names[a.name].push(i);\n\n\t\t\t\tif (a.file) {\n\t\t\t\t\tthis._urls[a.file.url] = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._tags.removeItem(asset);\n\n\t\t\tasset.tags.off('add', this._onTagAdd, this);\n\t\t\tasset.tags.off('remove', this._onTagRemove, this);\n\t\t\tasset.fire(\"remove\", asset);\n\t\t\tthis.fire(\"remove\", asset);\n\t\t\tthis.fire(\"remove:\" + asset.id, asset);\n\t\t\tif (url) this.fire(\"remove:url:\" + url, asset);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget(id) {\n\t\tvar idx = this._cache[id];\n\t\treturn this._assets[idx];\n\t}\n\n\tgetByUrl(url) {\n\t\tvar idx = this._urls[url];\n\t\treturn this._assets[idx];\n\t}\n\n\tload(asset) {\n\t\tif (asset.loading || asset.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\t\tvar file = asset.getPreferredFile();\n\n\t\tvar _opened = function _opened(resource) {\n\t\t\tif (resource instanceof Array) {\n\t\t\t\tasset.resources = resource;\n\t\t\t} else {\n\t\t\t\tasset.resource = resource;\n\t\t\t}\n\n\t\t\tself._loader.patch(asset, self);\n\n\t\t\tself.fire(\"load\", asset);\n\t\t\tself.fire(\"load:\" + asset.id, asset);\n\t\t\tif (file && file.url) self.fire(\"load:url:\" + file.url, asset);\n\t\t\tasset.fire(\"load\", asset);\n\t\t};\n\n\t\tvar _loaded = function _loaded(err, resource, extra) {\n\t\t\tasset.loaded = true;\n\t\t\tasset.loading = false;\n\n\t\t\tif (err) {\n\t\t\t\tself.fire(\"error\", err, asset);\n\t\t\t\tself.fire(\"error:\" + asset.id, err, asset);\n\t\t\t\tasset.fire(\"error\", err, asset);\n\t\t\t} else {\n\t\t\t\tif (!script.legacy && asset.type === 'script') {\n\t\t\t\t\tvar handler = self._loader.getHandler('script');\n\n\t\t\t\t\tif (handler._cache[asset.id] && handler._cache[asset.id].parentNode === document.head) {\n\t\t\t\t\t\tdocument.head.removeChild(handler._cache[asset.id]);\n\t\t\t\t\t}\n\n\t\t\t\t\thandler._cache[asset.id] = extra;\n\t\t\t\t}\n\n\t\t\t\t_opened(resource);\n\t\t\t}\n\t\t};\n\n\t\tif (file || asset.type === 'cubemap') {\n\t\t\tthis.fire(\"load:start\", asset);\n\t\t\tthis.fire(\"load:\" + asset.id + \":start\", asset);\n\t\t\tasset.loading = true;\n\n\t\t\tself._loader.load(asset.getFileUrl(), asset.type, _loaded, asset);\n\t\t} else {\n\t\t\tvar resource = self._loader.open(asset.type, asset.data);\n\n\t\t\tasset.loaded = true;\n\n\t\t\t_opened(resource);\n\t\t}\n\t}\n\n\tloadFromUrl(url, type, callback) {\n\t\tthis.loadFromUrlAndFilename(url, null, type, callback);\n\t}\n\n\tloadFromUrlAndFilename(url, filename, type, callback) {\n\t\tvar self = this;\n\t\tvar name = path.getBasename(filename || url);\n\t\tvar file = {\n\t\t\tfilename: filename || name,\n\t\t\turl: url\n\t\t};\n\t\tvar asset = self.getByUrl(url);\n\n\t\tif (!asset) {\n\t\t\tasset = new Asset(name, type, file);\n\t\t\tself.add(asset);\n\t\t} else if (asset.loaded) {\n\t\t\tcallback(asset.loadFromUrlError || null, asset);\n\t\t\treturn;\n\t\t}\n\n\t\tvar startLoad = function startLoad(asset) {\n\t\t\tasset.once(\"load\", function (loadedAsset) {\n\t\t\t\tif (type === 'material') {\n\t\t\t\t\tself._loadTextures(loadedAsset, function (err, textures) {\n\t\t\t\t\t\tcallback(err, loadedAsset);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, loadedAsset);\n\t\t\t\t}\n\t\t\t});\n\t\t\tasset.once(\"error\", function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\tthis.loadFromUrlError = err;\n\t\t\t\t}\n\n\t\t\t\tcallback(err, asset);\n\t\t\t});\n\t\t\tself.load(asset);\n\t\t};\n\n\t\tif (asset.resource) {\n\t\t\tcallback(null, asset);\n\t\t} else if (type === 'model') {\n\t\t\tself._loadModel(asset, startLoad);\n\t\t} else {\n\t\t\tstartLoad(asset);\n\t\t}\n\t}\n\n\t_loadModel(modelAsset, continuation) {\n\t\tvar self = this;\n\t\tvar url = modelAsset.getFileUrl();\n\t\tvar ext = path.getExtension(url);\n\n\t\tif (ext === '.json' || ext === '.glb') {\n\t\t\tvar dir = path.getDirectory(url);\n\t\t\tvar basename = path.getBasename(url);\n\t\t\tvar mappingUrl = path.join(dir, basename.replace(ext, \".mapping.json\"));\n\n\t\t\tthis._loader.load(mappingUrl, 'json', function (err, data) {\n\t\t\t\tif (err) {\n\t\t\t\t\tmodelAsset.data = {\n\t\t\t\t\t\tmapping: []\n\t\t\t\t\t};\n\t\t\t\t\tcontinuation(modelAsset);\n\t\t\t\t} else {\n\t\t\t\t\tself._loadMaterials(modelAsset, data, function (e, materials) {\n\t\t\t\t\t\tmodelAsset.data = data;\n\t\t\t\t\t\tcontinuation(modelAsset);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tcontinuation(modelAsset);\n\t\t}\n\t}\n\n\t_loadMaterials(modelAsset, mapping, callback) {\n\t\tvar self = this;\n\t\tvar materials = [];\n\t\tvar count = 0;\n\n\t\tvar onMaterialLoaded = function onMaterialLoaded(err, materialAsset) {\n\t\t\tself._loadTextures(materialAsset, function (err, textures) {\n\t\t\t\tmaterials.push(materialAsset);\n\n\t\t\t\tif (materials.length === count) {\n\t\t\t\t\tcallback(null, materials);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tfor (var i = 0; i < mapping.mapping.length; i++) {\n\t\t\tvar path = mapping.mapping[i].path;\n\n\t\t\tif (path) {\n\t\t\t\tcount++;\n\t\t\t\tself.loadFromUrl(modelAsset.getAbsoluteUrl(path), \"material\", onMaterialLoaded);\n\t\t\t}\n\t\t}\n\n\t\tif (count === 0) {\n\t\t\tcallback(null, materials);\n\t\t}\n\t}\n\n\t_loadTextures(materialAsset, callback) {\n\t\tvar self = this;\n\t\tvar textures = [];\n\t\tvar count = 0;\n\t\tvar data = materialAsset.data;\n\n\t\tif (data.mappingFormat !== 'path') {\n\t\t\tcallback(null, textures);\n\t\t\treturn;\n\t\t}\n\n\t\tvar onTextureLoaded = function onTextureLoaded(err, texture) {\n\t\t\tif (err) console.error(err);\n\t\t\ttextures.push(texture);\n\n\t\t\tif (textures.length === count) {\n\t\t\t\tcallback(null, textures);\n\t\t\t}\n\t\t};\n\n\t\tvar texParams = standardMaterialTextureParameters;\n\n\t\tfor (var i = 0; i < texParams.length; i++) {\n\t\t\tvar path = data[texParams[i]];\n\n\t\t\tif (path && typeof path === 'string') {\n\t\t\t\tcount++;\n\t\t\t\tself.loadFromUrl(materialAsset.getAbsoluteUrl(path), \"texture\", onTextureLoaded);\n\t\t\t}\n\t\t}\n\n\t\tif (count === 0) {\n\t\t\tcallback(null, textures);\n\t\t}\n\t}\n\n\tfindAll(name, type) {\n\t\tvar self = this;\n\t\tvar idxs = this._names[name];\n\n\t\tif (idxs) {\n\t\t\tvar assets = idxs.map(function (idx) {\n\t\t\t\treturn self._assets[idx];\n\t\t\t});\n\n\t\t\tif (type) {\n\t\t\t\treturn assets.filter(function (asset) {\n\t\t\t\t\treturn asset.type === type;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn assets;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t_onTagAdd(tag, asset) {\n\t\tthis._tags.add(tag, asset);\n\t}\n\n\t_onTagRemove(tag, asset) {\n\t\tthis._tags.remove(tag, asset);\n\t}\n\n\tfindByTag() {\n\t\treturn this._tags.find(arguments);\n\t}\n\n\tfilter(callback) {\n\t\tvar items = [];\n\n\t\tfor (var i = 0, len = this._assets.length; i < len; i++) {\n\t\t\tif (callback(this._assets[i])) items.push(this._assets[i]);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tfind(name, type) {\n\t\tvar asset = this.findAll(name, type);\n\t\treturn asset.length > 0 ? asset[0] : null;\n\t}\n\n}\n\nclass BundleRegistry {\n\tconstructor(assets) {\n\t\tthis._assets = assets;\n\t\tthis._bundleAssets = {};\n\t\tthis._assetsInBundles = {};\n\t\tthis._urlsInBundles = {};\n\t\tthis._fileRequests = {};\n\n\t\tthis._assets.on('add', this._onAssetAdded, this);\n\n\t\tthis._assets.on('remove', this._onAssetRemoved, this);\n\t}\n\n\t_onAssetAdded(asset) {\n\t\tif (asset.type === 'bundle') {\n\t\t\tthis._bundleAssets[asset.id] = asset;\n\n\t\t\tthis._registerBundleEventListeners(asset.id);\n\n\t\t\tfor (var i = 0, len = asset.data.assets.length; i < len; i++) {\n\t\t\t\tthis._indexAssetInBundle(asset.data.assets[i], asset);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._assetsInBundles[asset.id]) {\n\t\t\t\tthis._indexAssetFileUrls(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_registerBundleEventListeners(bundleAssetId) {\n\t\tthis._assets.on('load:' + bundleAssetId, this._onBundleLoaded, this);\n\n\t\tthis._assets.on('error:' + bundleAssetId, this._onBundleError, this);\n\t}\n\n\t_unregisterBundleEventListeners(bundleAssetId) {\n\t\tthis._assets.off('load:' + bundleAssetId, this._onBundleLoaded, this);\n\n\t\tthis._assets.off('error:' + bundleAssetId, this._onBundleError, this);\n\t}\n\n\t_indexAssetInBundle(assetId, bundleAsset) {\n\t\tif (!this._assetsInBundles[assetId]) {\n\t\t\tthis._assetsInBundles[assetId] = [bundleAsset];\n\t\t} else {\n\t\t\tvar bundles = this._assetsInBundles[assetId];\n\t\t\tvar idx = bundles.indexOf(bundleAsset);\n\n\t\t\tif (idx === -1) {\n\t\t\t\tbundles.push(bundleAsset);\n\t\t\t}\n\t\t}\n\n\t\tvar asset = this._assets.get(assetId);\n\n\t\tif (asset) {\n\t\t\tthis._indexAssetFileUrls(asset);\n\t\t}\n\t}\n\n\t_indexAssetFileUrls(asset) {\n\t\tvar urls = this._getAssetFileUrls(asset);\n\n\t\tif (!urls) return;\n\n\t\tfor (var i = 0, len = urls.length; i < len; i++) {\n\t\t\tvar url = urls[i];\n\t\t\tthis._urlsInBundles[url] = this._assetsInBundles[asset.id];\n\t\t}\n\t}\n\n\t_getAssetFileUrls(asset) {\n\t\tvar url = asset.getFileUrl();\n\t\tif (!url) return null;\n\t\turl = this._normalizeUrl(url);\n\t\tvar urls = [url];\n\n\t\tif (asset.type === 'font') {\n\t\t\tvar numFiles = asset.data.info.maps.length;\n\n\t\t\tfor (var i = 1; i < numFiles; i++) {\n\t\t\t\turls.push(url.replace('.png', i + '.png'));\n\t\t\t}\n\t\t}\n\n\t\treturn urls;\n\t}\n\n\t_normalizeUrl(url) {\n\t\treturn url && url.split('?')[0];\n\t}\n\n\t_onAssetRemoved(asset) {\n\t\tif (asset.type === 'bundle') {\n\t\t\tdelete this._bundleAssets[asset.id];\n\n\t\t\tthis._unregisterBundleEventListeners(asset.id);\n\n\t\t\tvar idx, id;\n\n\t\t\tfor (id in this._assetsInBundles) {\n\t\t\t\tvar array = this._assetsInBundles[id];\n\t\t\t\tidx = array.indexOf(asset);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tarray.splice(idx, 1);\n\n\t\t\t\t\tif (!array.length) {\n\t\t\t\t\t\tdelete this._assetsInBundles[id];\n\n\t\t\t\t\t\tfor (var url in this._urlsInBundles) {\n\t\t\t\t\t\t\tif (this._urlsInBundles[url] === array) {\n\t\t\t\t\t\t\t\tdelete this._urlsInBundles[url];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._onBundleError('Bundle ' + asset.id + ' was removed', asset);\n\t\t} else if (this._assetsInBundles[asset.id]) {\n\t\t\tdelete this._assetsInBundles[asset.id];\n\n\t\t\tvar urls = this._getAssetFileUrls(asset);\n\n\t\t\tfor (var i = 0, len = urls.length; i < len; i++) {\n\t\t\t\tdelete this._urlsInBundles[urls[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t_onBundleLoaded(bundleAsset) {\n\t\tif (!bundleAsset.resource) {\n\t\t\tthis._onBundleError('Bundle ' + bundleAsset.id + ' failed to load', bundleAsset);\n\n\t\t\treturn;\n\t\t}\n\n\t\trequestAnimationFrame(function () {\n\t\t\tif (!this._fileRequests) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var url in this._fileRequests) {\n\t\t\t\tvar bundles = this._urlsInBundles[url];\n\t\t\t\tif (!bundles || bundles.indexOf(bundleAsset) === -1) continue;\n\t\t\t\tvar decodedUrl = decodeURIComponent(url);\n\t\t\t\tvar err = null;\n\n\t\t\t\tif (!bundleAsset.resource.hasBlobUrl(decodedUrl)) {\n\t\t\t\t\terr = 'Bundle ' + bundleAsset.id + ' does not contain URL ' + url;\n\t\t\t\t}\n\n\t\t\t\tvar requests = this._fileRequests[url];\n\n\t\t\t\tfor (var i = 0, len = requests.length; i < len; i++) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\trequests[i](err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequests[i](null, bundleAsset.resource.getBlobUrl(decodedUrl));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete this._fileRequests[url];\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\t_onBundleError(err, bundleAsset) {\n\t\tfor (var url in this._fileRequests) {\n\t\t\tvar bundle = this._findLoadedOrLoadingBundleForUrl(url);\n\n\t\t\tif (!bundle) {\n\t\t\t\tvar requests = this._fileRequests[url];\n\n\t\t\t\tfor (var i = 0, len = requests.length; i < len; i++) {\n\t\t\t\t\trequests[i](err);\n\t\t\t\t}\n\n\t\t\t\tdelete this._fileRequests[url];\n\t\t\t}\n\t\t}\n\t}\n\n\t_findLoadedOrLoadingBundleForUrl(url) {\n\t\tvar bundles = this._urlsInBundles[url];\n\t\tif (!bundles) return null;\n\t\tvar len = bundles.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (bundles[i].loaded && bundles[i].resource) {\n\t\t\t\treturn bundles[i];\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (bundles[i].loading) {\n\t\t\t\treturn bundles[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tlistBundlesForAsset(asset) {\n\t\treturn this._assetsInBundles[asset.id] || null;\n\t}\n\n\tlist() {\n\t\tvar result = [];\n\n\t\tfor (var id in this._bundleAssets) {\n\t\t\tresult.push(this._bundleAssets[id]);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\thasUrl(url) {\n\t\treturn !!this._urlsInBundles[url];\n\t}\n\n\tcanLoadUrl(url) {\n\t\treturn !!this._findLoadedOrLoadingBundleForUrl(url);\n\t}\n\n\tloadUrl(url, callback) {\n\t\tvar bundle = this._findLoadedOrLoadingBundleForUrl(url);\n\n\t\tif (!bundle) {\n\t\t\tcallback('URL ' + url + ' not found in any bundles');\n\t\t\treturn;\n\t\t}\n\n\t\tif (bundle.loaded) {\n\t\t\tvar decodedUrl = decodeURIComponent(url);\n\n\t\t\tif (!bundle.resource.hasBlobUrl(decodedUrl)) {\n\t\t\t\tcallback('Bundle ' + bundle.id + ' does not contain URL ' + url);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallback(null, bundle.resource.getBlobUrl(decodedUrl));\n\t\t} else if (this._fileRequests.hasOwnProperty(url)) {\n\t\t\tthis._fileRequests[url].push(callback);\n\t\t} else {\n\t\t\tthis._fileRequests[url] = [callback];\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._assets.off('add', this._onAssetAdded, this);\n\n\t\tthis._assets.off('remove', this._onAssetRemoved, this);\n\n\t\tfor (var id in this._bundleAssets) {\n\t\t\tthis._unregisterBundleEventListeners(id);\n\t\t}\n\n\t\tthis._assets = null;\n\t\tthis._bundleAssets = null;\n\t\tthis._assetsInBundles = null;\n\t\tthis._urlsInBundles = null;\n\t\tthis._fileRequests = null;\n\t}\n\n}\n\nclass ScriptRegistry extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis._scripts = {};\n\t\tthis._list = [];\n\t}\n\n\tdestroy() {\n\t\tthis.app = null;\n\t\tthis.off();\n\t}\n\n\tadd(script) {\n\t\tvar self = this;\n\t\tvar scriptName = script.__name;\n\n\t\tif (this._scripts.hasOwnProperty(scriptName)) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (script.prototype.swap) {\n\t\t\t\t\tvar old = self._scripts[scriptName];\n\n\t\t\t\t\tvar ind = self._list.indexOf(old);\n\n\t\t\t\t\tself._list[ind] = script;\n\t\t\t\t\tself._scripts[scriptName] = script;\n\t\t\t\t\tself.fire('swap', scriptName, script);\n\t\t\t\t\tself.fire('swap:' + scriptName, script);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('script registry already has \\'' + scriptName + '\\' script, define \\'swap\\' method for new script type to enable code hot swapping');\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._scripts[scriptName] = script;\n\n\t\tthis._list.push(script);\n\n\t\tthis.fire('add', scriptName, script);\n\t\tthis.fire('add:' + scriptName, script);\n\t\tsetTimeout(function () {\n\t\t\tif (!self._scripts.hasOwnProperty(scriptName)) return;\n\n\t\t\tif (!self.app || !self.app.systems || !self.app.systems.script) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar components = self.app.systems.script._components;\n\t\t\tvar i, scriptInstance, attributes;\n\t\t\tvar scriptInstances = [];\n\t\t\tvar scriptInstancesInitialized = [];\n\n\t\t\tfor (components.loopIndex = 0; components.loopIndex < components.length; components.loopIndex++) {\n\t\t\t\tvar component = components.items[components.loopIndex];\n\n\t\t\t\tif (component._scriptsIndex[scriptName] && component._scriptsIndex[scriptName].awaiting) {\n\t\t\t\t\tif (component._scriptsData && component._scriptsData[scriptName]) attributes = component._scriptsData[scriptName].attributes;\n\t\t\t\t\tscriptInstance = component.create(scriptName, {\n\t\t\t\t\t\tpreloading: true,\n\t\t\t\t\t\tind: component._scriptsIndex[scriptName].ind,\n\t\t\t\t\t\tattributes: attributes\n\t\t\t\t\t});\n\t\t\t\t\tif (scriptInstance) scriptInstances.push(scriptInstance);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < scriptInstances.length; i++) scriptInstances[i].__initializeAttributes();\n\n\t\t\tfor (i = 0; i < scriptInstances.length; i++) {\n\t\t\t\tif (scriptInstances[i].enabled) {\n\t\t\t\t\tscriptInstances[i]._initialized = true;\n\t\t\t\t\tscriptInstancesInitialized.push(scriptInstances[i]);\n\t\t\t\t\tif (scriptInstances[i].initialize) scriptInstances[i].initialize();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < scriptInstancesInitialized.length; i++) {\n\t\t\t\tif (!scriptInstancesInitialized[i].enabled || scriptInstancesInitialized[i]._postInitialized) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tscriptInstancesInitialized[i]._postInitialized = true;\n\t\t\t\tif (scriptInstancesInitialized[i].postInitialize) scriptInstancesInitialized[i].postInitialize();\n\t\t\t}\n\t\t});\n\t\treturn true;\n\t}\n\n\tremove(nameOrType) {\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptName !== 'string') {\n\t\t\tscriptName = scriptType.__name;\n\t\t} else {\n\t\t\tscriptType = this.get(scriptName);\n\t\t}\n\n\t\tif (this.get(scriptName) !== scriptType) return false;\n\t\tdelete this._scripts[scriptName];\n\n\t\tvar ind = this._list.indexOf(scriptType);\n\n\t\tthis._list.splice(ind, 1);\n\n\t\tthis.fire('remove', scriptName, scriptType);\n\t\tthis.fire('remove:' + scriptName, scriptType);\n\t\treturn true;\n\t}\n\n\tget(name) {\n\t\treturn this._scripts[name] || null;\n\t}\n\n\thas(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\treturn this._scripts.hasOwnProperty(nameOrType);\n\t\t}\n\n\t\tif (!nameOrType) return false;\n\t\tvar scriptName = nameOrType.__name;\n\t\treturn this._scripts[scriptName] === nameOrType;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n}\n\nclass I18nParser {\n\t_validate(data) {\n\t\tif (!data.header) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"header\" field');\n\t\t}\n\n\t\tif (!data.header.version) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"header.version\" field');\n\t\t}\n\n\t\tif (data.header.version !== 1) {\n\t\t\tthrow new Error('pc.I18n#addData: Invalid \"header.version\" field');\n\t\t}\n\n\t\tif (!data.data) {\n\t\t\tthrow new Error('pc.I18n#addData: Missing \"data\" field');\n\t\t} else if (!Array.isArray(data.data)) {\n\t\t\tthrow new Error('pc.I18n#addData: \"data\" field must be an array');\n\t\t}\n\n\t\tfor (var i = 0, len = data.data.length; i < len; i++) {\n\t\t\tvar entry = data.data[i];\n\n\t\t\tif (!entry.info) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].info\" field');\n\t\t\t}\n\n\t\t\tif (!entry.info.locale) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].info.locale\" field');\n\t\t\t}\n\n\t\t\tif (typeof entry.info.locale !== 'string') {\n\t\t\t\tthrow new Error('pc.I18n#addData: \"data[' + i + '].info.locale\" must be a string');\n\t\t\t}\n\n\t\t\tif (!entry.messages) {\n\t\t\t\tthrow new Error('pc.I18n#addData: missing \"data[' + i + '].messages\" field');\n\t\t\t}\n\t\t}\n\t}\n\n\tparse(data) {\n\t\treturn data.data;\n\t}\n\n}\n\nclass I18n extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.locale = DEFAULT_LOCALE;\n\t\tthis._translations = {};\n\t\tthis._availableLangs = {};\n\t\tthis._app = app;\n\t\tthis._assets = [];\n\t\tthis._parser = new I18nParser();\n\t}\n\n\tstatic findAvailableLocale(desiredLocale, availableLocales) {\n\t\treturn findAvailableLocale(desiredLocale, availableLocales);\n\t}\n\n\tfindAvailableLocale(desiredLocale) {\n\t\tif (this._translations[desiredLocale]) {\n\t\t\treturn desiredLocale;\n\t\t}\n\n\t\tconst lang = getLang(desiredLocale);\n\t\treturn this._findFallbackLocale(desiredLocale, lang);\n\t}\n\n\tgetText(key, locale) {\n\t\tvar result = key;\n\t\tvar lang;\n\n\t\tif (!locale) {\n\t\t\tlocale = this._locale;\n\t\t\tlang = this._lang;\n\t\t}\n\n\t\tvar translations = this._translations[locale];\n\n\t\tif (!translations) {\n\t\t\tif (!lang) {\n\t\t\t\tlang = getLang(locale);\n\t\t\t}\n\n\t\t\tlocale = this._findFallbackLocale(locale, lang);\n\t\t\ttranslations = this._translations[locale];\n\t\t}\n\n\t\tif (translations && translations.hasOwnProperty(key)) {\n\t\t\tresult = translations[key];\n\n\t\t\tif (Array.isArray(result)) {\n\t\t\t\tresult = result[0];\n\t\t\t}\n\n\t\t\tif (result === null || result === undefined) {\n\t\t\t\tresult = key;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetPluralText(key, n, locale) {\n\t\tvar result = key;\n\t\tvar pluralFn;\n\t\tvar lang;\n\n\t\tif (!locale) {\n\t\t\tlocale = this._locale;\n\t\t\tlang = this._lang;\n\t\t\tpluralFn = this._pluralFn;\n\t\t} else {\n\t\t\tlang = getLang(locale);\n\t\t\tpluralFn = getPluralFn(lang);\n\t\t}\n\n\t\tvar translations = this._translations[locale];\n\n\t\tif (!translations) {\n\t\t\tlocale = this._findFallbackLocale(locale, lang);\n\t\t\tlang = getLang(locale);\n\t\t\tpluralFn = getPluralFn(lang);\n\t\t\ttranslations = this._translations[locale];\n\t\t}\n\n\t\tif (translations && translations[key] && pluralFn) {\n\t\t\tvar index = pluralFn(n);\n\t\t\tresult = translations[key][index];\n\n\t\t\tif (result === null || result === undefined) {\n\t\t\t\tresult = key;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddData(data) {\n\t\tvar parsed;\n\n\t\ttry {\n\t\t\tparsed = this._parser.parse(data);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, len = parsed.length; i < len; i++) {\n\t\t\tvar entry = parsed[i];\n\t\t\tvar locale = entry.info.locale;\n\t\t\tvar messages = entry.messages;\n\n\t\t\tif (!this._translations[locale]) {\n\t\t\t\tthis._translations[locale] = {};\n\t\t\t\tvar lang = getLang(locale);\n\n\t\t\t\tif (!this._availableLangs[lang]) {\n\t\t\t\t\tthis._availableLangs[lang] = locale;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.assign(this._translations[locale], messages);\n\t\t\tthis.fire('data:add', locale, messages);\n\t\t}\n\t}\n\n\tremoveData(data) {\n\t\tvar parsed;\n\t\tvar key;\n\n\t\ttry {\n\t\t\tparsed = this._parser.parse(data);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, len = parsed.length; i < len; i++) {\n\t\t\tvar entry = parsed[i];\n\t\t\tvar locale = entry.info.locale;\n\t\t\tvar translations = this._translations[locale];\n\t\t\tif (!translations) continue;\n\t\t\tvar messages = entry.messages;\n\n\t\t\tfor (key in messages) {\n\t\t\t\tdelete translations[key];\n\t\t\t}\n\n\t\t\tvar hasAny = false;\n\n\t\t\tfor (key in translations) {\n\t\t\t\thasAny = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!hasAny) {\n\t\t\t\tdelete this._translations[locale];\n\t\t\t\tdelete this._availableLangs[getLang(locale)];\n\t\t\t}\n\n\t\t\tthis.fire('data:remove', locale, messages);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._translations = null;\n\t\tthis._availableLangs = null;\n\t\tthis._assets = null;\n\t\tthis._parser = null;\n\t\tthis.off();\n\t}\n\n\tget locale() {\n\t\treturn this._locale;\n\t}\n\n\tset locale(value) {\n\t\tif (this._locale === value) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar lang = getLang(value);\n\n\t\tif (lang === 'in') {\n\t\t\tlang = 'id';\n\t\t\tvalue = replaceLang(value, lang);\n\n\t\t\tif (this._locale === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar old = this._locale;\n\t\tthis._locale = value;\n\t\tthis._lang = lang;\n\t\tthis._pluralFn = getPluralFn(this._lang);\n\t\tthis.fire('set:locale', value, old);\n\t}\n\n\tget assets() {\n\t\treturn this._assets;\n\t}\n\n\tset assets(value) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar id;\n\t\tvar asset;\n\t\tvar index = {};\n\n\t\tfor (i = 0, len = value.length; i < len; i++) {\n\t\t\tid = value[i] instanceof Asset ? value[i].id : value[i];\n\t\t\tindex[id] = true;\n\t\t}\n\n\t\ti = this._assets.length;\n\n\t\twhile (i--) {\n\t\t\tid = this._assets[i];\n\n\t\t\tif (!index[id]) {\n\t\t\t\tthis._app.assets.off('add:' + id, this._onAssetAdd, this);\n\n\t\t\t\tasset = this._app.assets.get(id);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis._onAssetRemove(asset);\n\t\t\t\t}\n\n\t\t\t\tthis._assets.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tfor (id in index) {\n\t\t\tid = parseInt(id, 10);\n\t\t\tif (this._assets.indexOf(id) !== -1) continue;\n\n\t\t\tthis._assets.push(id);\n\n\t\t\tasset = this._app.assets.get(id);\n\n\t\t\tif (!asset) {\n\t\t\t\tthis._app.assets.once('add:' + id, this._onAssetAdd, this);\n\t\t\t} else {\n\t\t\t\tthis._onAssetAdd(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_findFallbackLocale(locale, lang) {\n\t\tvar result = DEFAULT_LOCALE_FALLBACKS[locale];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = DEFAULT_LOCALE_FALLBACKS[lang];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this._availableLangs[lang];\n\n\t\tif (result && this._translations[result]) {\n\t\t\treturn result;\n\t\t}\n\n\t\treturn DEFAULT_LOCALE;\n\t}\n\n\t_onAssetAdd(asset) {\n\t\tasset.on('load', this._onAssetLoad, this);\n\t\tasset.on('change', this._onAssetChange, this);\n\t\tasset.on('remove', this._onAssetRemove, this);\n\t\tasset.on('unload', this._onAssetUnload, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onAssetLoad(asset);\n\t\t}\n\t}\n\n\t_onAssetLoad(asset) {\n\t\tthis.addData(asset.resource);\n\t}\n\n\t_onAssetChange(asset) {\n\t\tif (asset.resource) {\n\t\t\tthis.addData(asset.resource);\n\t\t}\n\t}\n\n\t_onAssetRemove(asset) {\n\t\tasset.off('load', this._onAssetLoad, this);\n\t\tasset.off('change', this._onAssetChange, this);\n\t\tasset.off('remove', this._onAssetRemove, this);\n\t\tasset.off('unload', this._onAssetUnload, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis.removeData(asset.resource);\n\t\t}\n\n\t\tthis._app.assets.once('add:' + asset.id, this._onAssetAdd, this);\n\t}\n\n\t_onAssetUnload(asset) {\n\t\tif (asset.resource) {\n\t\t\tthis.removeData(asset.resource);\n\t\t}\n\t}\n\n}\n\nconst FILLMODE_NONE = 'NONE';\nconst FILLMODE_FILL_WINDOW = 'FILL_WINDOW';\nconst FILLMODE_KEEP_ASPECT = 'KEEP_ASPECT';\nconst RESOLUTION_AUTO = 'AUTO';\nconst RESOLUTION_FIXED = 'FIXED';\n\nclass VrDisplay extends EventHandler {\n\tconstructor(app, display) {\n\t\tsuper();\n\t\tvar self = this;\n\t\tthis._app = app;\n\t\tthis._device = app.graphicsDevice;\n\t\tthis.id = display.displayId;\n\t\tthis._frameData = null;\n\n\t\tif (window.VRFrameData) {\n\t\t\tthis._frameData = new window.VRFrameData();\n\t\t}\n\n\t\tthis.display = display;\n\t\tthis._camera = null;\n\t\tthis.sitToStandInv = new Mat4();\n\t\tthis.leftView = new Mat4();\n\t\tthis.leftProj = new Mat4();\n\t\tthis.leftViewInv = new Mat4();\n\t\tthis.leftPos = new Vec3();\n\t\tthis.rightView = new Mat4();\n\t\tthis.rightProj = new Mat4();\n\t\tthis.rightViewInv = new Mat4();\n\t\tthis.rightPos = new Vec3();\n\t\tthis.combinedPos = new Vec3();\n\t\tthis.combinedView = new Mat4();\n\t\tthis.combinedProj = new Mat4();\n\t\tthis.combinedViewInv = new Mat4();\n\t\tthis.combinedFov = 0;\n\t\tthis.combinedAspect = 0;\n\t\tthis.presenting = false;\n\n\t\tself._presentChange = function (event) {\n\t\t\tvar display;\n\n\t\t\tif (event.display) {\n\t\t\t\tdisplay = event.display;\n\t\t\t} else if (event.detail && event.detail.display) {\n\t\t\t\tdisplay = event.detail.display;\n\t\t\t} else if (event.detail && event.detail.vrdisplay) {\n\t\t\t\tdisplay = event.detail.vrdisplay;\n\t\t\t} else {\n\t\t\t\tdisplay = self.display;\n\t\t\t}\n\n\t\t\tif (display === self.display) {\n\t\t\t\tself.presenting = self.display && self.display.isPresenting;\n\n\t\t\t\tif (self.presenting) {\n\t\t\t\t\tvar leftEye = self.display.getEyeParameters(\"left\");\n\t\t\t\t\tvar rightEye = self.display.getEyeParameters(\"right\");\n\t\t\t\t\tvar w = Math.max(leftEye.renderWidth, rightEye.renderWidth) * 2;\n\t\t\t\t\tvar h = Math.max(leftEye.renderHeight, rightEye.renderHeight);\n\n\t\t\t\t\tself._app.graphicsDevice.setResolution(w, h);\n\n\t\t\t\t\tself._app._allowResize = false;\n\t\t\t\t} else {\n\t\t\t\t\tself._app.setCanvasResolution(RESOLUTION_AUTO);\n\n\t\t\t\t\tself._app._allowResize = true;\n\t\t\t\t}\n\n\t\t\t\tself.fire('beforepresentchange', self);\n\t\t\t\tself.fire('presentchange', self);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('vrdisplaypresentchange', self._presentChange, false);\n\t}\n\n\tdestroy() {\n\t\twindow.removeEventListener('vrdisplaypresentchange', self._presentChange);\n\t\tif (this._camera) this._camera.vrDisplay = null;\n\t\tthis._camera = null;\n\t}\n\n\tpoll() {\n\t\tif (this.display) {\n\t\t\tthis.display.getFrameData(this._frameData);\n\t\t\tthis.leftProj.data = this._frameData.leftProjectionMatrix;\n\t\t\tthis.rightProj.data = this._frameData.rightProjectionMatrix;\n\t\t\tvar stage = this.display.stageParameters;\n\n\t\t\tif (stage) {\n\t\t\t\tthis.sitToStandInv.set(stage.sittingToStandingTransform).invert();\n\t\t\t\tthis.combinedView.set(this._frameData.leftViewMatrix);\n\t\t\t\tthis.leftView.mul2(this.combinedView, this.sitToStandInv);\n\t\t\t\tthis.combinedView.set(this._frameData.rightViewMatrix);\n\t\t\t\tthis.rightView.mul2(this.combinedView, this.sitToStandInv);\n\t\t\t} else {\n\t\t\t\tthis.leftView.set(this._frameData.leftViewMatrix);\n\t\t\t\tthis.rightView.set(this._frameData.rightViewMatrix);\n\t\t\t}\n\n\t\t\tvar nx = this.leftProj.data[3] + this.leftProj.data[0];\n\t\t\tvar nz = this.leftProj.data[11] + this.leftProj.data[8];\n\t\t\tvar l = 1.0 / Math.sqrt(nx * nx + nz * nz);\n\t\t\tnx *= l;\n\t\t\tnz *= l;\n\t\t\tvar maxFov = -Math.atan2(nz, nx);\n\t\t\tnx = this.rightProj.data[3] + this.rightProj.data[0];\n\t\t\tnz = this.rightProj.data[11] + this.rightProj.data[8];\n\t\t\tl = 1.0 / Math.sqrt(nx * nx + nz * nz);\n\t\t\tnx *= l;\n\t\t\tnz *= l;\n\t\t\tmaxFov = Math.max(maxFov, -Math.atan2(nz, nx));\n\t\t\tmaxFov *= 2.0;\n\t\t\tthis.combinedFov = maxFov;\n\t\t\tvar aspect = this.rightProj.data[5] / this.rightProj.data[0];\n\t\t\tthis.combinedAspect = aspect;\n\t\t\tvar view = this.combinedView;\n\t\t\tview.copy(this.leftView);\n\t\t\tview.invert();\n\t\t\tthis.leftViewInv.copy(view);\n\t\t\tvar pos = this.combinedPos;\n\t\t\tpos.x = this.leftPos.x = view.data[12];\n\t\t\tpos.y = this.leftPos.y = view.data[13];\n\t\t\tpos.z = this.leftPos.z = view.data[14];\n\t\t\tview.copy(this.rightView);\n\t\t\tview.invert();\n\t\t\tthis.rightViewInv.copy(view);\n\t\t\tvar deltaX = pos.x - view.data[12];\n\t\t\tvar deltaY = pos.y - view.data[13];\n\t\t\tvar deltaZ = pos.z - view.data[14];\n\t\t\tvar dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n\t\t\tthis.rightPos.x = view.data[12];\n\t\t\tthis.rightPos.y = view.data[13];\n\t\t\tthis.rightPos.z = view.data[14];\n\t\t\tpos.x += view.data[12];\n\t\t\tpos.y += view.data[13];\n\t\t\tpos.z += view.data[14];\n\t\t\tpos.x *= 0.5;\n\t\t\tpos.y *= 0.5;\n\t\t\tpos.z *= 0.5;\n\t\t\tvar b = Math.PI * 0.5;\n\t\t\tvar c = maxFov * 0.5;\n\t\t\tvar a = Math.PI - (b + c);\n\t\t\tvar offset = dist * 0.5 * Math.sin(a);\n\t\t\tvar fwdX = view.data[8];\n\t\t\tvar fwdY = view.data[9];\n\t\t\tvar fwdZ = view.data[10];\n\t\t\tview.data[12] = pos.x + fwdX * offset;\n\t\t\tview.data[13] = pos.y + fwdY * offset;\n\t\t\tview.data[14] = pos.z + fwdZ * offset;\n\t\t\tthis.combinedViewInv.copy(view);\n\t\t\tview.invert();\n\t\t\tthis.combinedProj.setPerspective(maxFov * math.RAD_TO_DEG, aspect, this.display.depthNear + offset, this.display.depthFar + offset, true);\n\t\t}\n\t}\n\n\trequestPresent(callback) {\n\t\tif (!this.display) {\n\t\t\tif (callback) callback(new Error(\"No VrDisplay to requestPresent\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.presenting) {\n\t\t\tif (callback) callback(new Error(\"VrDisplay already presenting\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.display.requestPresent([{\n\t\t\tsource: this._device.canvas\n\t\t}]).then(function () {\n\t\t\tif (callback) callback();\n\t\t}, function (err) {\n\t\t\tif (callback) callback(err);\n\t\t});\n\t}\n\n\texitPresent(callback) {\n\t\tif (!this.display) {\n\t\t\tif (callback) callback(new Error(\"No VrDisplay to exitPresent\"));\n\t\t}\n\n\t\tif (!this.presenting) {\n\t\t\tif (callback) callback(new Error(\"VrDisplay not presenting\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.display.exitPresent().then(function () {\n\t\t\tif (callback) callback();\n\t\t}, function () {\n\t\t\tif (callback) callback(new Error(\"exitPresent failed\"));\n\t\t});\n\t}\n\n\trequestAnimationFrame(fn) {\n\t\tif (this.display) this.display.requestAnimationFrame(fn);\n\t}\n\n\tsubmitFrame() {\n\t\tif (this.display) this.display.submitFrame();\n\t}\n\n\treset() {\n\t\tif (this.display) this.display.resetPose();\n\t}\n\n\tsetClipPlanes(n, f) {\n\t\tif (this.display) {\n\t\t\tthis.display.depthNear = n;\n\t\t\tthis.display.depthFar = f;\n\t\t}\n\t}\n\n\tgetFrameData() {\n\t\tif (this.display) return this._frameData;\n\t}\n\n\tget capabilities() {\n\t\tif (this.display) return this.display.capabilities;\n\t\treturn {};\n\t}\n\n}\n\nclass VrManager extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tvar self = this;\n\t\tthis.isSupported = VrManager.isSupported;\n\t\tthis._index = {};\n\t\tthis.displays = [];\n\t\tthis.display = null;\n\t\tthis._app = app;\n\t\tthis._onDisplayConnect = this._onDisplayConnect.bind(this);\n\t\tthis._onDisplayDisconnect = this._onDisplayDisconnect.bind(this);\n\n\t\tself._attach();\n\n\t\tthis._getDisplays(function (err, displays) {\n\t\t\tif (err) {\n\t\t\t\tself.fire('error', err);\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < displays.length; i++) {\n\t\t\t\t\tself._addDisplay(displays[i]);\n\t\t\t\t}\n\n\t\t\t\tself.fire('ready', self.displays);\n\t\t\t}\n\t\t});\n\t}\n\n\t_attach() {\n\t\twindow.addEventListener('vrdisplayconnect', this._onDisplayConnect);\n\t\twindow.addEventListener('vrdisplaydisconnect', this._onDisplayDisconnect);\n\t}\n\n\t_detach() {\n\t\twindow.removeEventListener('vrdisplayconnect', this._onDisplayConnect);\n\t\twindow.removeEventListener('vrdisplaydisconnect', this._onDisplayDisconnect);\n\t}\n\n\tdestroy() {\n\t\tthis._detach();\n\t}\n\n\tpoll() {\n\t\tvar l = this.displays.length;\n\t\tif (!l) return;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this.displays[i]._camera) this.displays[i].poll();\n\t\t}\n\t}\n\n\t_getDisplays(callback) {\n\t\tif (navigator.getVRDisplays) {\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\t\t\t\tif (callback) callback(null, displays);\n\t\t\t});\n\t\t} else {\n\t\t\tif (callback) callback(new Error('WebVR not supported'));\n\t\t}\n\t}\n\n\t_addDisplay(vrDisplay) {\n\t\tif (this._index[vrDisplay.displayId]) return;\n\t\tvar display = new VrDisplay(this._app, vrDisplay);\n\t\tthis._index[display.id] = display;\n\t\tthis.displays.push(display);\n\t\tif (!this.display) this.display = display;\n\t\tthis.fire('displayconnect', display);\n\t}\n\n\t_onDisplayConnect(e) {\n\t\tif (e.detail && e.detail.display) {\n\t\t\tthis._addDisplay(e.detail.display);\n\t\t} else {\n\t\t\tthis._addDisplay(e.display);\n\t\t}\n\t}\n\n\t_onDisplayDisconnect(e) {\n\t\tvar id;\n\n\t\tif (e.detail && e.detail.display) {\n\t\t\tid = e.detail.display.displayId;\n\t\t} else {\n\t\t\tid = e.display.displayId;\n\t\t}\n\n\t\tvar display = this._index[id];\n\t\tif (!display) return;\n\t\tdisplay.destroy();\n\t\tdelete this._index[display.id];\n\t\tvar ind = this.displays.indexOf(display);\n\t\tthis.displays.splice(ind, 1);\n\n\t\tif (this.display === display) {\n\t\t\tif (this.displays.length) {\n\t\t\t\tthis.display = this.displays[0];\n\t\t\t} else {\n\t\t\t\tthis.display = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('displaydisconnect', display);\n\t}\n\n}\n\nVrManager.isSupported = typeof navigator !== 'undefined' ? !!navigator.getVRDisplays : false;\n\nconst XRTYPE_INLINE = 'inline';\nconst XRTYPE_VR = 'immersive-vr';\nconst XRTYPE_AR = 'immersive-ar';\nconst XRSPACE_VIEWER = 'viewer';\nconst XRSPACE_LOCAL = 'local';\nconst XRSPACE_LOCALFLOOR = 'local-floor';\nconst XRSPACE_BOUNDEDFLOOR = 'bounded-floor';\nconst XRSPACE_UNBOUNDED = 'unbounded';\nconst XRTARGETRAY_GAZE = 'gaze';\nconst XRTARGETRAY_SCREEN = 'screen';\nconst XRTARGETRAY_POINTER = 'tracked-pointer';\nconst XRHAND_NONE = 'none';\nconst XRHAND_LEFT = 'left';\nconst XRHAND_RIGHT = 'right';\nconst XRTRACKABLE_POINT = 'point';\nconst XRTRACKABLE_PLANE = 'plane';\nconst XRTRACKABLE_MESH = 'mesh';\nconst XRDEPTHSENSINGUSAGE_CPU = 'cpu-optimized';\nconst XRDEPTHSENSINGUSAGE_GPU = 'gpu-optimized';\nconst XRDEPTHSENSINGFORMAT_L8A8 = 'luminance-alpha';\nconst XRDEPTHSENSINGFORMAT_F32 = 'float32';\n\nconst poolVec3 = [];\nconst poolQuat = [];\n\nclass XrHitTestSource extends EventHandler {\n\tconstructor(manager, xrHitTestSource, transient) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._xrHitTestSource = xrHitTestSource;\n\t\tthis._transient = transient;\n\t}\n\n\tremove() {\n\t\tif (!this._xrHitTestSource) return;\n\t\tconst sources = this.manager.hitTest.sources;\n\t\tconst ind = sources.indexOf(this);\n\t\tif (ind !== -1) sources.splice(ind, 1);\n\t\tthis.onStop();\n\t}\n\n\tonStop() {\n\t\tthis._xrHitTestSource.cancel();\n\n\t\tthis._xrHitTestSource = null;\n\t\tthis.fire('remove');\n\t\tthis.manager.hitTest.fire('remove', this);\n\t}\n\n\tupdate(frame) {\n\t\tif (this._transient) {\n\t\t\tconst transientResults = frame.getHitTestResultsForTransientInput(this._xrHitTestSource);\n\n\t\t\tfor (let i = 0; i < transientResults.length; i++) {\n\t\t\t\tconst transientResult = transientResults[i];\n\t\t\t\tlet inputSource;\n\t\t\t\tif (transientResult.inputSource) inputSource = this.manager.input._getByInputSource(transientResult.inputSource);\n\t\t\t\tthis.updateHitResults(transientResult.results, inputSource);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateHitResults(frame.getHitTestResults(this._xrHitTestSource));\n\t\t}\n\t}\n\n\tupdateHitResults(results, inputSource) {\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tconst pose = results[i].getPose(this.manager._referenceSpace);\n\t\t\tlet position = poolVec3.pop();\n\t\t\tif (!position) position = new Vec3();\n\t\t\tposition.copy(pose.transform.position);\n\t\t\tlet rotation = poolQuat.pop();\n\t\t\tif (!rotation) rotation = new Quat();\n\t\t\trotation.copy(pose.transform.orientation);\n\t\t\tthis.fire('result', position, rotation, inputSource);\n\t\t\tthis.manager.hitTest.fire('result', this, position, rotation, inputSource);\n\t\t\tpoolVec3.push(position);\n\t\t\tpoolQuat.push(rotation);\n\t\t}\n\t}\n\n}\n\nclass XrHitTest extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._supported = !!(window.XRSession && window.XRSession.prototype.requestHitTestSource);\n\t\tthis._session = null;\n\t\tthis.sources = [];\n\n\t\tif (this._supported) {\n\t\t\tthis.manager.on('start', this._onSessionStart, this);\n\t\t\tthis.manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tif (this.manager.type !== XRTYPE_AR) return;\n\t\tthis._session = this.manager.session;\n\t}\n\n\t_onSessionEnd() {\n\t\tif (!this._session) return;\n\t\tthis._session = null;\n\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sources[i].onStop();\n\t\t}\n\n\t\tthis.sources = [];\n\t}\n\n\tisAvailable(callback, fireError) {\n\t\tlet err;\n\t\tif (!this._supported) err = new Error('XR HitTest is not supported');\n\t\tif (!this._session) err = new Error('XR Session is not started (1)');\n\t\tif (this.manager.type !== XRTYPE_AR) err = new Error('XR HitTest is available only for AR');\n\n\t\tif (err) {\n\t\t\tif (callback) callback(err);\n\t\t\tif (fireError) fireError.fire('error', err);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tstart(options) {\n\t\toptions = options || {};\n\t\tif (!this.isAvailable(options.callback, this)) return;\n\t\tif (!options.profile && !options.spaceType) options.spaceType = XRSPACE_VIEWER;\n\t\tlet xrRay;\n\t\tconst offsetRay = options.offsetRay;\n\t\tif (offsetRay) xrRay = new XRRay(new DOMPoint(offsetRay.origin.x, offsetRay.origin.y, offsetRay.origin.z), new DOMPoint(offsetRay.direction.x, offsetRay.direction.y, offsetRay.direction.z));\n\t\tconst callback = options.callback;\n\n\t\tif (options.spaceType) {\n\t\t\tthis._session.requestReferenceSpace(options.spaceType).then(referenceSpace => {\n\t\t\t\tif (!this._session) {\n\t\t\t\t\tconst err = new Error('XR Session is not started (2)');\n\t\t\t\t\tif (callback) callback(err);\n\t\t\t\t\tthis.fire('error', err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._session.requestHitTestSource({\n\t\t\t\t\tspace: referenceSpace,\n\t\t\t\t\tentityTypes: options.entityTypes || undefined,\n\t\t\t\t\toffsetRay: xrRay\n\t\t\t\t}).then(xrHitTestSource => {\n\t\t\t\t\tthis._onHitTestSource(xrHitTestSource, false, callback);\n\t\t\t\t}).catch(ex => {\n\t\t\t\t\tif (callback) callback(ex);\n\t\t\t\t\tthis.fire('error', ex);\n\t\t\t\t});\n\t\t\t}).catch(ex => {\n\t\t\t\tif (callback) callback(ex);\n\t\t\t\tthis.fire('error', ex);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._session.requestHitTestSourceForTransientInput({\n\t\t\t\tprofile: options.profile,\n\t\t\t\tentityTypes: options.entityTypes || undefined,\n\t\t\t\toffsetRay: xrRay\n\t\t\t}).then(xrHitTestSource => {\n\t\t\t\tthis._onHitTestSource(xrHitTestSource, true, callback);\n\t\t\t}).catch(ex => {\n\t\t\t\tif (callback) callback(ex);\n\t\t\t\tthis.fire('error', ex);\n\t\t\t});\n\t\t}\n\t}\n\n\t_onHitTestSource(xrHitTestSource, transient, callback) {\n\t\tif (!this._session) {\n\t\t\txrHitTestSource.cancel();\n\t\t\tconst err = new Error('XR Session is not started (3)');\n\t\t\tif (callback) callback(err);\n\t\t\tthis.fire('error', err);\n\t\t\treturn;\n\t\t}\n\n\t\tconst hitTestSource = new XrHitTestSource(this.manager, xrHitTestSource, transient);\n\t\tthis.sources.push(hitTestSource);\n\t\tif (callback) callback(null, hitTestSource);\n\t\tthis.fire('add', hitTestSource);\n\t}\n\n\tupdate(frame) {\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sources[i].update(frame);\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n}\n\nclass XrFinger {\n\tconstructor(index, hand) {\n\t\tthis._index = index;\n\t\tthis._hand = hand;\n\n\t\tthis._hand._fingers.push(this);\n\n\t\tthis._joints = [];\n\t\tthis._tip = null;\n\t}\n\n\tget index() {\n\t\treturn this._index;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget joints() {\n\t\treturn this._joints;\n\t}\n\n\tget tip() {\n\t\treturn this._tip;\n\t}\n\n}\n\nconst tipJointIds = window.XRHand ? ['thumb-tip', 'index-finger-tip', 'middle-finger-tip', 'ring-finger-tip', 'pinky-finger-tip'] : [];\nconst tipJointIdsIndex = {};\n\nfor (let i = 0; i < tipJointIds.length; i++) {\n\ttipJointIdsIndex[tipJointIds[i]] = true;\n}\n\nclass XrJoint {\n\tconstructor(index, id, hand, finger = null) {\n\t\tthis._index = index;\n\t\tthis._id = id;\n\t\tthis._hand = hand;\n\t\tthis._finger = finger;\n\t\tthis._wrist = id === 'wrist';\n\t\tthis._tip = this._finger && !!tipJointIdsIndex[id];\n\t\tthis._radius = null;\n\t\tthis._localTransform = new Mat4();\n\t\tthis._worldTransform = new Mat4();\n\t\tthis._localPosition = new Vec3();\n\t\tthis._localRotation = new Quat();\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t\tthis._dirtyLocal = true;\n\t}\n\n\tupdate(pose) {\n\t\tthis._dirtyLocal = true;\n\t\tthis._radius = pose.radius;\n\n\t\tthis._localPosition.copy(pose.transform.position);\n\n\t\tthis._localRotation.copy(pose.transform.orientation);\n\t}\n\n\t_updateTransforms() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = false;\n\n\t\t\tthis._localTransform.setTRS(this._localPosition, this._localRotation, Vec3.ONE);\n\t\t}\n\n\t\tconst manager = this._hand._manager;\n\t\tconst parent = manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tthis._worldTransform.mul2(parent.getWorldTransform(), this._localTransform);\n\t\t} else {\n\t\t\tthis._worldTransform.copy(this._localTransform);\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tthis._updateTransforms();\n\n\t\tthis._worldTransform.getTranslation(this._position);\n\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\tthis._updateTransforms();\n\n\t\tthis._rotation.setFromMat4(this._worldTransform);\n\n\t\treturn this._rotation;\n\t}\n\n\tget index() {\n\t\treturn this._index;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget finger() {\n\t\treturn this._finger;\n\t}\n\n\tget wrist() {\n\t\treturn this._wrist;\n\t}\n\n\tget tip() {\n\t\treturn this._tip;\n\t}\n\n\tget radius() {\n\t\treturn this._radius || 0.005;\n\t}\n\n}\n\nlet fingerJointIds = [];\nconst vecA$2 = new Vec3();\nconst vecB$2 = new Vec3();\nconst vecC = new Vec3();\n\nif (window.XRHand) {\n\tfingerJointIds = [['thumb-metacarpal', 'thumb-phalanx-proximal', 'thumb-phalanx-distal', 'thumb-tip'], ['index-finger-metacarpal', 'index-finger-phalanx-proximal', 'index-finger-phalanx-intermediate', 'index-finger-phalanx-distal', 'index-finger-tip'], ['middle-finger-metacarpal', 'middle-finger-phalanx-proximal', 'middle-finger-phalanx-intermediate', 'middle-finger-phalanx-distal', 'middle-finger-tip'], ['ring-finger-metacarpal', 'ring-finger-phalanx-proximal', 'ring-finger-phalanx-intermediate', 'ring-finger-phalanx-distal', 'ring-finger-tip'], ['pinky-finger-metacarpal', 'pinky-finger-phalanx-proximal', 'pinky-finger-phalanx-intermediate', 'pinky-finger-phalanx-distal', 'pinky-finger-tip']];\n}\n\nclass XrHand extends EventHandler {\n\tconstructor(inputSource) {\n\t\tsuper();\n\t\tconst xrHand = inputSource._xrInputSource.hand;\n\t\tthis._manager = inputSource._manager;\n\t\tthis._inputSource = inputSource;\n\t\tthis._tracking = false;\n\t\tthis._fingers = [];\n\t\tthis._joints = [];\n\t\tthis._jointsById = {};\n\t\tthis._tips = [];\n\t\tthis._wrist = null;\n\n\t\tif (xrHand.get('wrist')) {\n\t\t\tconst joint = new XrJoint(0, 'wrist', this, null);\n\t\t\tthis._wrist = joint;\n\n\t\t\tthis._joints.push(joint);\n\n\t\t\tthis._jointsById.wrist = joint;\n\t\t}\n\n\t\tfor (let f = 0; f < fingerJointIds.length; f++) {\n\t\t\tconst finger = new XrFinger(f, this);\n\n\t\t\tfor (let j = 0; j < fingerJointIds[f].length; j++) {\n\t\t\t\tconst jointId = fingerJointIds[f][j];\n\t\t\t\tif (!xrHand.get(jointId)) continue;\n\t\t\t\tconst joint = new XrJoint(j, jointId, this, finger);\n\n\t\t\t\tthis._joints.push(joint);\n\n\t\t\t\tthis._jointsById[jointId] = joint;\n\n\t\t\t\tif (joint.tip) {\n\t\t\t\t\tthis._tips.push(joint);\n\n\t\t\t\t\tfinger._tip = joint;\n\t\t\t\t}\n\n\t\t\t\tfinger._joints.push(joint);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tconst xrInputSource = this._inputSource._xrInputSource;\n\n\t\tfor (let j = 0; j < this._joints.length; j++) {\n\t\t\tconst joint = this._joints[j];\n\t\t\tconst jointSpace = xrInputSource.hand.get(joint._id);\n\n\t\t\tif (jointSpace) {\n\t\t\t\tlet pose;\n\t\t\t\tif (frame.session.visibilityState !== 'hidden') pose = frame.getJointPose(jointSpace, this._manager._referenceSpace);\n\n\t\t\t\tif (pose) {\n\t\t\t\t\tjoint.update(pose);\n\n\t\t\t\t\tif (joint.wrist && !this._tracking) {\n\t\t\t\t\t\tthis._tracking = true;\n\t\t\t\t\t\tthis.fire('tracking');\n\t\t\t\t\t}\n\t\t\t\t} else if (joint.wrist) {\n\t\t\t\t\tif (this._tracking) {\n\t\t\t\t\t\tthis._tracking = false;\n\t\t\t\t\t\tthis.fire('trackinglost');\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst j1 = this._jointsById['thumb-metacarpal'];\n\t\tconst j4 = this._jointsById['thumb-tip'];\n\t\tconst j6 = this._jointsById['index-finger-phalanx-proximal'];\n\t\tconst j9 = this._jointsById['index-finger-tip'];\n\t\tconst j16 = this._jointsById['ring-finger-phalanx-proximal'];\n\t\tconst j21 = this._jointsById['pinky-finger-phalanx-proximal'];\n\n\t\tif (j1 && j4 && j6 && j9 && j16 && j21) {\n\t\t\tthis._inputSource._dirtyRay = true;\n\n\t\t\tthis._inputSource._rayLocal.origin.lerp(j4._localPosition, j9._localPosition, 0.5);\n\n\t\t\tlet jointL = j1;\n\t\t\tlet jointR = j21;\n\n\t\t\tif (this._inputSource.handedness === XRHAND_LEFT) {\n\t\t\t\tconst t = jointL;\n\t\t\t\tjointL = jointR;\n\t\t\t\tjointR = t;\n\t\t\t}\n\n\t\t\tvecA$2.sub2(jointL._localPosition, this._wrist._localPosition);\n\t\t\tvecB$2.sub2(jointR._localPosition, this._wrist._localPosition);\n\t\t\tvecC.cross(vecA$2, vecB$2).normalize();\n\t\t\tvecA$2.lerp(j6._localPosition, j16._localPosition, 0.5);\n\t\t\tvecA$2.sub(this._wrist._localPosition).normalize();\n\n\t\t\tthis._inputSource._rayLocal.direction.lerp(vecC, vecA$2, 0.5).normalize();\n\t\t}\n\n\t\tconst squeezing = this._fingerIsClosed(1) && this._fingerIsClosed(2) && this._fingerIsClosed(3) && this._fingerIsClosed(4);\n\n\t\tif (squeezing) {\n\t\t\tif (!this._inputSource._squeezing) {\n\t\t\t\tthis._inputSource._squeezing = true;\n\n\t\t\t\tthis._inputSource.fire('squeezestart');\n\n\t\t\t\tthis._manager.input.fire('squeezestart', this._inputSource);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._inputSource._squeezing) {\n\t\t\t\tthis._inputSource._squeezing = false;\n\n\t\t\t\tthis._inputSource.fire('squeeze');\n\n\t\t\t\tthis._manager.input.fire('squeeze', this._inputSource);\n\n\t\t\t\tthis._inputSource.fire('squeezeend');\n\n\t\t\t\tthis._manager.input.fire('squeezeend', this._inputSource);\n\t\t\t}\n\t\t}\n\t}\n\n\t_fingerIsClosed(index) {\n\t\tconst finger = this._fingers[index];\n\t\tvecA$2.sub2(finger.joints[0]._localPosition, finger.joints[1]._localPosition).normalize();\n\t\tvecB$2.sub2(finger.joints[2]._localPosition, finger.joints[3]._localPosition).normalize();\n\t\treturn vecA$2.dot(vecB$2) < -0.8;\n\t}\n\n\tgetJointById(id) {\n\t\treturn this._jointsById[id] || null;\n\t}\n\n\tget fingers() {\n\t\treturn this._fingers;\n\t}\n\n\tget joints() {\n\t\treturn this._joints;\n\t}\n\n\tget tips() {\n\t\treturn this._tips;\n\t}\n\n\tget wrist() {\n\t\treturn this._wrist;\n\t}\n\n\tget tracking() {\n\t\treturn this._tracking;\n\t}\n\n}\n\nconst quat$1 = new Quat();\nlet ids$1 = 0;\n\nclass XrInputSource extends EventHandler {\n\tconstructor(manager, xrInputSource) {\n\t\tsuper();\n\t\tthis._id = ++ids$1;\n\t\tthis._manager = manager;\n\t\tthis._xrInputSource = xrInputSource;\n\t\tthis._ray = new Ray();\n\t\tthis._rayLocal = new Ray();\n\t\tthis._grip = false;\n\t\tthis._hand = null;\n\t\tif (xrInputSource.hand) this._hand = new XrHand(this);\n\t\tthis._localTransform = null;\n\t\tthis._worldTransform = null;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t\tthis._localPosition = null;\n\t\tthis._localRotation = null;\n\t\tthis._dirtyLocal = true;\n\t\tthis._selecting = false;\n\t\tthis._squeezing = false;\n\t\tthis._elementInput = true;\n\t\tthis._elementEntity = null;\n\t\tthis._hitTestSources = [];\n\t}\n\n\tupdate(frame) {\n\t\tif (this._hand) {\n\t\t\tthis._hand.update(frame);\n\t\t} else {\n\t\t\tif (this._xrInputSource.gripSpace) {\n\t\t\t\tconst gripPose = frame.getPose(this._xrInputSource.gripSpace, this._manager._referenceSpace);\n\n\t\t\t\tif (gripPose) {\n\t\t\t\t\tif (!this._grip) {\n\t\t\t\t\t\tthis._grip = true;\n\t\t\t\t\t\tthis._localTransform = new Mat4();\n\t\t\t\t\t\tthis._worldTransform = new Mat4();\n\t\t\t\t\t\tthis._localPosition = new Vec3();\n\t\t\t\t\t\tthis._localRotation = new Quat();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._dirtyLocal = true;\n\n\t\t\t\t\tthis._localPosition.copy(gripPose.transform.position);\n\n\t\t\t\t\tthis._localRotation.copy(gripPose.transform.orientation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst targetRayPose = frame.getPose(this._xrInputSource.targetRaySpace, this._manager._referenceSpace);\n\n\t\t\tif (targetRayPose) {\n\t\t\t\tthis._dirtyRay = true;\n\n\t\t\t\tthis._rayLocal.origin.copy(targetRayPose.transform.position);\n\n\t\t\t\tthis._rayLocal.direction.set(0, 0, -1);\n\n\t\t\t\tquat$1.copy(targetRayPose.transform.orientation);\n\t\t\t\tquat$1.transformVector(this._rayLocal.direction, this._rayLocal.direction);\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateTransforms() {\n\t\tif (this._dirtyLocal) {\n\t\t\tthis._dirtyLocal = false;\n\n\t\t\tthis._localTransform.setTRS(this._localPosition, this._localRotation, Vec3.ONE);\n\t\t}\n\n\t\tconst parent = this._manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tthis._worldTransform.mul2(parent.getWorldTransform(), this._localTransform);\n\t\t} else {\n\t\t\tthis._worldTransform.copy(this._localTransform);\n\t\t}\n\t}\n\n\t_updateRayTransforms() {\n\t\tconst dirty = this._dirtyRay;\n\t\tthis._dirtyRay = false;\n\t\tconst parent = this._manager.camera.parent;\n\n\t\tif (parent) {\n\t\t\tconst parentTransform = this._manager.camera.parent.getWorldTransform();\n\n\t\t\tparentTransform.getTranslation(this._position);\n\n\t\t\tthis._rotation.setFromMat4(parentTransform);\n\n\t\t\tthis._rotation.transformVector(this._rayLocal.origin, this._ray.origin);\n\n\t\t\tthis._ray.origin.add(this._position);\n\n\t\t\tthis._rotation.transformVector(this._rayLocal.direction, this._ray.direction);\n\t\t} else if (dirty) {\n\t\t\tthis._ray.origin.copy(this._rayLocal.origin);\n\n\t\t\tthis._ray.direction.copy(this._rayLocal.direction);\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tif (!this._position) return null;\n\n\t\tthis._updateTransforms();\n\n\t\tthis._worldTransform.getTranslation(this._position);\n\n\t\treturn this._position;\n\t}\n\n\tgetLocalPosition() {\n\t\treturn this._localPosition;\n\t}\n\n\tgetRotation() {\n\t\tif (!this._rotation) return null;\n\n\t\tthis._updateTransforms();\n\n\t\tthis._rotation.setFromMat4(this._worldTransform);\n\n\t\treturn this._rotation;\n\t}\n\n\tgetLocalRotation() {\n\t\treturn this._localRotation;\n\t}\n\n\tgetOrigin() {\n\t\tthis._updateRayTransforms();\n\n\t\treturn this._ray.origin;\n\t}\n\n\tgetDirection() {\n\t\tthis._updateRayTransforms();\n\n\t\treturn this._ray.direction;\n\t}\n\n\thitTestStart(options = {}) {\n\t\toptions.profile = this._xrInputSource.profiles[0];\n\t\tconst callback = options.callback;\n\n\t\toptions.callback = (err, hitTestSource) => {\n\t\t\tif (hitTestSource) this.onHitTestSourceAdd(hitTestSource);\n\t\t\tif (callback) callback(err, hitTestSource);\n\t\t};\n\n\t\tthis._manager.hitTest.start(options);\n\t}\n\n\tonHitTestSourceAdd(hitTestSource) {\n\t\tthis._hitTestSources.push(hitTestSource);\n\n\t\tthis.fire('hittest:add', hitTestSource);\n\t\thitTestSource.on('result', function (position, rotation, inputSource) {\n\t\t\tif (inputSource !== this) return;\n\t\t\tthis.fire('hittest:result', hitTestSource, position, rotation);\n\t\t}, this);\n\t\thitTestSource.once('remove', function () {\n\t\t\tthis.onHitTestSourceRemove(hitTestSource);\n\t\t\tthis.fire('hittest:remove', hitTestSource);\n\t\t}, this);\n\t}\n\n\tonHitTestSourceRemove(hitTestSource) {\n\t\tconst ind = this._hitTestSources.indexOf(hitTestSource);\n\n\t\tif (ind !== -1) this._hitTestSources.splice(ind, 1);\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget inputSource() {\n\t\treturn this._xrInputSource;\n\t}\n\n\tget targetRayMode() {\n\t\treturn this._xrInputSource.targetRayMode;\n\t}\n\n\tget handedness() {\n\t\treturn this._xrInputSource.handedness;\n\t}\n\n\tget profiles() {\n\t\treturn this._xrInputSource.profiles;\n\t}\n\n\tget grip() {\n\t\treturn this._grip;\n\t}\n\n\tget hand() {\n\t\treturn this._hand;\n\t}\n\n\tget gamepad() {\n\t\treturn this._xrInputSource.gamepad || null;\n\t}\n\n\tget selecting() {\n\t\treturn this._selecting;\n\t}\n\n\tget squeezing() {\n\t\treturn this._squeezing;\n\t}\n\n\tget elementInput() {\n\t\treturn this._elementInput;\n\t}\n\n\tset elementInput(value) {\n\t\tif (this._elementInput === value) return;\n\t\tthis._elementInput = value;\n\t\tif (!this._elementInput) this._elementEntity = null;\n\t}\n\n\tget elementEntity() {\n\t\treturn this._elementEntity;\n\t}\n\n\tget hitTestSources() {\n\t\treturn this._hitTestSources;\n\t}\n\n}\n\nclass XrInput extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis.manager = manager;\n\t\tthis._session = null;\n\t\tthis._inputSources = [];\n\n\t\tthis._onInputSourcesChangeEvt = evt => {\n\t\t\tthis._onInputSourcesChange(evt);\n\t\t};\n\n\t\tthis.manager.on('start', this._onSessionStart, this);\n\t\tthis.manager.on('end', this._onSessionEnd, this);\n\t}\n\n\t_onSessionStart() {\n\t\tthis._session = this.manager.session;\n\n\t\tthis._session.addEventListener('inputsourceschange', this._onInputSourcesChangeEvt);\n\n\t\tthis._session.addEventListener('select', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource.fire('select', evt);\n\t\t\tthis.fire('select', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('selectstart', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._selecting = true;\n\t\t\tinputSource.fire('selectstart', evt);\n\t\t\tthis.fire('selectstart', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('selectend', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._selecting = false;\n\t\t\tinputSource.fire('selectend', evt);\n\t\t\tthis.fire('selectend', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeeze', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource.fire('squeeze', evt);\n\t\t\tthis.fire('squeeze', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeezestart', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._squeezing = true;\n\t\t\tinputSource.fire('squeezestart', evt);\n\t\t\tthis.fire('squeezestart', inputSource, evt);\n\t\t});\n\n\t\tthis._session.addEventListener('squeezeend', evt => {\n\t\t\tconst inputSource = this._getByInputSource(evt.inputSource);\n\n\t\t\tinputSource.update(evt.frame);\n\t\t\tinputSource._squeezing = false;\n\t\t\tinputSource.fire('squeezeend', evt);\n\t\t\tthis.fire('squeezeend', inputSource, evt);\n\t\t});\n\n\t\tconst inputSources = this._session.inputSources;\n\n\t\tfor (let i = 0; i < inputSources.length; i++) {\n\t\t\tthis._addInputSource(inputSources[i]);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tlet i = this._inputSources.length;\n\n\t\twhile (i--) {\n\t\t\tconst inputSource = this._inputSources[i];\n\n\t\t\tthis._inputSources.splice(i, 1);\n\n\t\t\tinputSource.fire('remove');\n\t\t\tthis.fire('remove', inputSource);\n\t\t}\n\n\t\tthis._session.removeEventListener('inputsourceschange', this._onInputSourcesChangeEvt);\n\n\t\tthis._session = null;\n\t}\n\n\t_onInputSourcesChange(evt) {\n\t\tfor (let i = 0; i < evt.removed.length; i++) {\n\t\t\tthis._removeInputSource(evt.removed[i]);\n\t\t}\n\n\t\tfor (let i = 0; i < evt.added.length; i++) {\n\t\t\tthis._addInputSource(evt.added[i]);\n\t\t}\n\t}\n\n\t_getByInputSource(xrInputSource) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tif (this._inputSources[i].inputSource === xrInputSource) {\n\t\t\t\treturn this._inputSources[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_addInputSource(xrInputSource) {\n\t\tif (this._getByInputSource(xrInputSource)) return;\n\t\tconst inputSource = new XrInputSource(this.manager, xrInputSource);\n\n\t\tthis._inputSources.push(inputSource);\n\n\t\tthis.fire('add', inputSource);\n\t}\n\n\t_removeInputSource(xrInputSource) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tif (this._inputSources[i].inputSource !== xrInputSource) continue;\n\t\t\tconst inputSource = this._inputSources[i];\n\n\t\t\tthis._inputSources.splice(i, 1);\n\n\t\t\tlet h = inputSource.hitTestSources.length;\n\n\t\t\twhile (h--) {\n\t\t\t\tinputSource.hitTestSources[h].remove();\n\t\t\t}\n\n\t\t\tinputSource.fire('remove');\n\t\t\tthis.fire('remove', inputSource);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tfor (let i = 0; i < this._inputSources.length; i++) {\n\t\t\tthis._inputSources[i].update(frame);\n\t\t}\n\t}\n\n\tget inputSources() {\n\t\treturn this._inputSources;\n\t}\n\n}\n\nconst vec3A = new Vec3();\nconst vec3B = new Vec3();\nconst mat4A = new Mat4();\nconst mat4B = new Mat4();\n\nclass XrLightEstimation extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = false;\n\t\tthis._available = false;\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t\tthis._intensity = 0;\n\t\tthis._rotation = new Quat();\n\t\tthis._color = new Color();\n\t\tthis._sphericalHarmonics = new Float32Array(27);\n\n\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t}\n\n\t_onSessionStart() {\n\t\tconst supported = !!this._manager.session.requestLightProbe;\n\t\tif (!supported) return;\n\t\tthis._supported = true;\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._supported = false;\n\t\tthis._available = false;\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t}\n\n\tstart() {\n\t\tlet err;\n\t\tif (!this._manager.session) err = new Error('XR session is not running');\n\t\tif (!err && this._manager.type !== XRTYPE_AR) err = new Error('XR session type is not AR');\n\t\tif (!err && !this._supported) err = new Error('light-estimation is not supported');\n\t\tif (!err && this._lightProbe || this._lightProbeRequested) err = new Error('light estimation is already requested');\n\n\t\tif (err) {\n\t\t\tthis.fire('error', err);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._lightProbeRequested = true;\n\n\t\tthis._manager.session.requestLightProbe().then(lightProbe => {\n\t\t\tconst wasRequested = this._lightProbeRequested;\n\t\t\tthis._lightProbeRequested = false;\n\n\t\t\tif (this._manager.active) {\n\t\t\t\tif (wasRequested) {\n\t\t\t\t\tthis._lightProbe = lightProbe;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.fire('error', new Error('XR session is not active'));\n\t\t\t}\n\t\t}).catch(ex => {\n\t\t\tthis._lightProbeRequested = false;\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\tend() {\n\t\tthis._lightProbeRequested = false;\n\t\tthis._lightProbe = null;\n\t\tthis._available = false;\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._lightProbe) return;\n\t\tconst lightEstimate = frame.getLightEstimate(this._lightProbe);\n\t\tif (!lightEstimate) return;\n\n\t\tif (!this._available) {\n\t\t\tthis._available = true;\n\t\t\tthis.fire('available');\n\t\t}\n\n\t\tconst pli = lightEstimate.primaryLightIntensity;\n\t\tthis._intensity = Math.max(1.0, Math.max(pli.x, Math.max(pli.y, pli.z)));\n\t\tvec3A.copy(pli).mulScalar(1 / this._intensity);\n\n\t\tthis._color.set(vec3A.x, vec3A.y, vec3A.z);\n\n\t\tvec3A.set(0, 0, 0);\n\t\tvec3B.copy(lightEstimate.primaryLightDirection);\n\t\tmat4A.setLookAt(vec3B, vec3A, Vec3.UP);\n\t\tmat4B.setFromAxisAngle(Vec3.RIGHT, 90);\n\t\tmat4A.mul(mat4B);\n\n\t\tthis._rotation.setFromMat4(mat4A);\n\n\t\tthis._sphericalHarmonics.set(lightEstimate.sphericalHarmonicsCoefficients);\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget intensity() {\n\t\treturn this._available ? this._intensity : null;\n\t}\n\n\tget color() {\n\t\treturn this._available ? this._color : null;\n\t}\n\n\tget rotation() {\n\t\treturn this._available ? this._rotation : null;\n\t}\n\n\tget sphericalHarmonics() {\n\t\treturn this._available ? this._sphericalHarmonics : null;\n\t}\n\n}\n\nclass XrTrackedImage extends EventHandler {\n\tconstructor(image, width) {\n\t\tsuper();\n\t\tthis._image = image;\n\t\tthis._bitmap = null;\n\t\tthis._width = width;\n\t\tthis._measuredWidth = 0;\n\t\tthis._trackable = false;\n\t\tthis._tracking = false;\n\t\tthis._emulated = false;\n\t\tthis._pose = null;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t}\n\n\tprepare() {\n\t\tif (this._bitmap) {\n\t\t\treturn {\n\t\t\t\timage: this._bitmap,\n\t\t\t\twidthInMeters: this._width\n\t\t\t};\n\t\t}\n\n\t\treturn createImageBitmap(this._image).then(bitmap => {\n\t\t\tthis._bitmap = bitmap;\n\t\t\treturn {\n\t\t\t\timage: this._bitmap,\n\t\t\t\twidthInMeters: this._width\n\t\t\t};\n\t\t});\n\t}\n\n\tdestroy() {\n\t\tthis._image = null;\n\t\tthis._pose = null;\n\n\t\tif (this._bitmap) {\n\t\t\tthis._bitmap.close();\n\n\t\t\tthis._bitmap = null;\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\tif (this._pose) this._position.copy(this._pose.transform.position);\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\tif (this._pose) this._rotation.copy(this._pose.transform.orientation);\n\t\treturn this._rotation;\n\t}\n\n\tget image() {\n\t\treturn this._image;\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tset width(value) {\n\t\tthis._width = value;\n\t}\n\n\tget trackable() {\n\t\treturn this._trackable;\n\t}\n\n\tget tracking() {\n\t\treturn this._tracking;\n\t}\n\n\tget emulated() {\n\t\treturn this._emulated;\n\t}\n\n}\n\nclass XrImageTracking extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRImageTrackingResult;\n\t\tthis._available = false;\n\t\tthis._images = [];\n\n\t\tif (this._supported) {\n\t\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\tadd(image, width) {\n\t\tif (!this._supported || this._manager.active) return null;\n\t\tconst trackedImage = new XrTrackedImage(image, width);\n\n\t\tthis._images.push(trackedImage);\n\n\t\treturn trackedImage;\n\t}\n\n\tremove(trackedImage) {\n\t\tif (this._manager.active) return;\n\n\t\tconst ind = this._images.indexOf(trackedImage);\n\n\t\tif (ind !== -1) {\n\t\t\ttrackedImage.destroy();\n\n\t\t\tthis._images.splice(ind, 1);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tthis._manager.session.getTrackedImageScores().then(images => {\n\t\t\tthis._available = true;\n\n\t\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\t\tthis._images[i]._trackable = images[i] === 'trackable';\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('error', err);\n\t\t});\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._available = false;\n\n\t\tfor (let i = 0; i < this._images.length; i++) {\n\t\t\tthis._images[i]._pose = null;\n\t\t\tthis._images[i]._measuredWidth = 0;\n\n\t\t\tif (this._images[i]._tracking) {\n\t\t\t\tthis._images[i]._tracking = false;\n\n\t\t\t\tthis._images[i].fire('untracked');\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareImages(callback) {\n\t\tif (this._images.length) {\n\t\t\tPromise.all(this._images.map(function (trackedImage) {\n\t\t\t\treturn trackedImage.prepare();\n\t\t\t})).then(function (bitmaps) {\n\t\t\t\tcallback(null, bitmaps);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcallback(err, null);\n\t\t\t});\n\t\t} else {\n\t\t\tcallback(null, null);\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._available) return;\n\t\tconst results = frame.getImageTrackingResults();\n\t\tconst index = {};\n\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tindex[results[i].index] = results[i];\n\t\t\tconst trackedImage = this._images[results[i].index];\n\t\t\ttrackedImage._emulated = results[i].trackingState === 'emulated';\n\t\t\ttrackedImage._measuredWidth = results[i].measuredWidthInMeters;\n\t\t\ttrackedImage._dirtyTransform = true;\n\t\t\ttrackedImage._pose = frame.getPose(results[i].imageSpace, this._manager._referenceSpace);\n\t\t}\n\n\t\tfor (let i = 0; i < this._images.length; i++) {\n\t\t\tif (this._images[i]._tracking && !index[i]) {\n\t\t\t\tthis._images[i]._tracking = false;\n\n\t\t\t\tthis._images[i].fire('untracked');\n\t\t\t} else if (!this._images[i]._tracking && index[i]) {\n\t\t\t\tthis._images[i]._tracking = true;\n\n\t\t\t\tthis._images[i].fire('tracked');\n\t\t\t}\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget images() {\n\t\treturn this._images;\n\t}\n\n}\n\nclass XrDomOverlay {\n\tconstructor(manager) {\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRDOMOverlayState;\n\t\tthis._root = null;\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._supported && this._manager.active && this._manager._session.domOverlayState !== null;\n\t}\n\n\tget state() {\n\t\tif (!this._supported || !this._manager.active || !this._manager._session.domOverlayState) return null;\n\t\treturn this._manager._session.domOverlayState.type;\n\t}\n\n\tset root(value) {\n\t\tif (!this._supported || this._manager.active) return;\n\t\tthis._root = value;\n\t}\n\n\tget root() {\n\t\treturn this._root;\n\t}\n\n}\n\nclass XrDepthSensing extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._available = false;\n\t\tthis._depthInfoCpu = null;\n\t\tthis._depthInfoGpu = null;\n\t\tthis._usage = null;\n\t\tthis._dataFormat = null;\n\t\tthis._matrixDirty = false;\n\t\tthis._matrix = new Mat4();\n\t\tthis._emptyBuffer = new Uint8Array(32);\n\t\tthis._depthBuffer = null;\n\t\tthis._texture = new Texture(this._manager.app.graphicsDevice, {\n\t\t\tformat: PIXELFORMAT_L8_A8,\n\t\t\tmipmaps: false,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE,\n\t\t\tminFilter: FILTER_LINEAR,\n\t\t\tmagFilter: FILTER_LINEAR\n\t\t});\n\n\t\tif (this.supported) {\n\t\t\tthis._manager.on('start', this._onSessionStart, this);\n\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionStart() {\n\t\tconst session = this._manager.session;\n\n\t\ttry {\n\t\t\tthis._usage = session.depthUsage;\n\t\t\tthis._dataFormat = session.depthDataFormat;\n\t\t} catch (ex) {\n\t\t\tthis._usage = null;\n\t\t\tthis._dataFormat = null;\n\t\t\tthis._available = false;\n\t\t\tthis.fire('error', ex);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tthis._depthInfoCpu = null;\n\t\tthis._depthInfoGpu = null;\n\t\tthis._usage = null;\n\t\tthis._dataFormat = null;\n\n\t\tif (this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\n\t\tthis._depthBuffer = null;\n\t\tthis._texture._width = 4;\n\t\tthis._texture._height = 4;\n\t\tthis._texture._levels[0] = this._emptyBuffer;\n\n\t\tthis._texture.upload();\n\t}\n\n\t_updateTexture() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\n\t\tif (depthInfo) {\n\t\t\tlet resized = false;\n\n\t\t\tif (depthInfo.width !== this._texture.width || depthInfo.height !== this._texture.height) {\n\t\t\t\tthis._texture._width = depthInfo.width;\n\t\t\t\tthis._texture._height = depthInfo.height;\n\t\t\t\tthis._matrixDirty = true;\n\t\t\t\tresized = true;\n\t\t\t}\n\n\t\t\tif (this._depthInfoCpu) {\n\t\t\t\tconst dataBuffer = this._depthInfoCpu.data;\n\t\t\t\tthis._depthBuffer = new Uint8Array(dataBuffer);\n\t\t\t\tthis._texture._levels[0] = this._depthBuffer;\n\n\t\t\t\tthis._texture.upload();\n\t\t\t} else if (this._depthInfoGpu) {\n\t\t\t\tthis._texture._levels[0] = this._depthInfoGpu.texture;\n\n\t\t\t\tthis._texture.upload();\n\t\t\t}\n\n\t\t\tif (resized) this.fire('resize', depthInfo.width, depthInfo.height);\n\t\t} else if (this._depthBuffer) {\n\t\t\tthis._depthBuffer = null;\n\t\t\tthis._texture._width = 4;\n\t\t\tthis._texture._height = 4;\n\t\t\tthis._texture._levels[0] = this._emptyBuffer;\n\n\t\t\tthis._texture.upload();\n\t\t}\n\t}\n\n\tupdate(frame, view) {\n\t\tif (!this._usage) return;\n\t\tlet depthInfoCpu = null;\n\t\tlet depthInfoGpu = null;\n\n\t\tif (this._usage === XRDEPTHSENSINGUSAGE_CPU && view) {\n\t\t\tdepthInfoCpu = frame.getDepthInformation(view);\n\t\t} else if (this._usage === XRDEPTHSENSINGUSAGE_GPU && view) {\n\t\t\tdepthInfoGpu = frame.getDepthInformation(view);\n\t\t}\n\n\t\tif (this._depthInfoCpu && !depthInfoCpu || !this._depthInfoCpu && depthInfoCpu || this.depthInfoGpu && !depthInfoGpu || !this._depthInfoGpu && depthInfoGpu) {\n\t\t\tthis._matrixDirty = true;\n\t\t}\n\n\t\tthis._depthInfoCpu = depthInfoCpu;\n\t\tthis._depthInfoGpu = depthInfoGpu;\n\n\t\tthis._updateTexture();\n\n\t\tif (this._matrixDirty) {\n\t\t\tthis._matrixDirty = false;\n\t\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\n\t\t\tif (depthInfo) {\n\t\t\t\tthis._matrix.data.set(depthInfo.normDepthBufferFromNormView.matrix);\n\t\t\t} else {\n\t\t\t\tthis._matrix.setIdentity();\n\t\t\t}\n\t\t}\n\n\t\tif ((this._depthInfoCpu || this._depthInfoGpu) && !this._available) {\n\t\t\tthis._available = true;\n\t\t\tthis.fire('available');\n\t\t} else if (!this._depthInfoCpu && !this._depthInfoGpu && this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\t}\n\n\tgetDepth(u, v) {\n\t\tif (!this._depthInfoCpu) return null;\n\t\treturn this._depthInfoCpu.getDepthInMeters(u, v);\n\t}\n\n\tget supported() {\n\t\treturn !!window.XRDepthInformation;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget usage() {\n\t\treturn this._usage;\n\t}\n\n\tget dataFormat() {\n\t\treturn this._dataFormat;\n\t}\n\n\tget width() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.width || 0;\n\t}\n\n\tget height() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.height || 0;\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tget uvMatrix() {\n\t\treturn this._matrix;\n\t}\n\n\tget rawValueToMeters() {\n\t\tconst depthInfo = this._depthInfoCpu || this._depthInfoGpu;\n\t\treturn depthInfo && depthInfo.rawValueToMeters || 0;\n\t}\n\n}\n\nlet ids = 0;\n\nclass XrPlane extends EventHandler {\n\tconstructor(planeDetection, xrPlane) {\n\t\tsuper();\n\t\tthis._id = ++ids;\n\t\tthis._planeDetection = planeDetection;\n\t\tthis._manager = this._planeDetection._manager;\n\t\tthis._xrPlane = xrPlane;\n\t\tthis._lastChangedTime = this._xrPlane.lastChangedTime;\n\t\tthis._orientation = this._xrPlane.orientation;\n\t\tthis._position = new Vec3();\n\t\tthis._rotation = new Quat();\n\t}\n\n\tdestroy() {\n\t\tthis.fire('remove');\n\t}\n\n\tupdate(frame) {\n\t\tconst pose = frame.getPose(this._xrPlane.planeSpace, this._manager._referenceSpace);\n\n\t\tif (pose) {\n\t\t\tthis._position.copy(pose.transform.position);\n\n\t\t\tthis._rotation.copy(pose.transform.orientation);\n\t\t}\n\n\t\tif (this._lastChangedTime !== this._xrPlane.lastChangedTime) {\n\t\t\tthis._lastChangedTime = this._xrPlane.lastChangedTime;\n\t\t\tthis.fire('change');\n\t\t}\n\t}\n\n\tgetPosition() {\n\t\treturn this._position;\n\t}\n\n\tgetRotation() {\n\t\treturn this._rotation;\n\t}\n\n\tget id() {\n\t\treturn this.id;\n\t}\n\n\tget orientation() {\n\t\treturn this._orientation;\n\t}\n\n\tget points() {\n\t\treturn this._xrPlane.polygon;\n\t}\n\n}\n\nclass XrPlaneDetection extends EventHandler {\n\tconstructor(manager) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._supported = !!window.XRPlane;\n\t\tthis._available = false;\n\t\tthis._planesIndex = new Map();\n\t\tthis._planes = null;\n\n\t\tif (this._supported) {\n\t\t\tthis._manager.on('end', this._onSessionEnd, this);\n\t\t}\n\t}\n\n\t_onSessionEnd() {\n\t\tif (this._planes) {\n\t\t\tfor (let i = 0; i < this._planes.length; i++) {\n\t\t\t\tthis._planes[i].destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis._planesIndex.clear();\n\n\t\tthis._planes = null;\n\n\t\tif (this._available) {\n\t\t\tthis._available = false;\n\t\t\tthis.fire('unavailable');\n\t\t}\n\t}\n\n\tupdate(frame) {\n\t\tlet detectedPlanes;\n\n\t\tif (!this._available) {\n\t\t\ttry {\n\t\t\t\tdetectedPlanes = frame.detectedPlanes;\n\t\t\t\tthis._planes = [];\n\t\t\t\tthis._available = true;\n\t\t\t\tthis.fire('available');\n\t\t\t} catch (ex) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tdetectedPlanes = frame.detectedPlanes;\n\t\t}\n\n\t\tfor (const [xrPlane, plane] of this._planesIndex) {\n\t\t\tif (detectedPlanes.has(xrPlane)) continue;\n\n\t\t\tthis._planesIndex.delete(xrPlane);\n\n\t\t\tthis._planes.splice(this._planes.indexOf(plane), 1);\n\n\t\t\tplane.destroy();\n\t\t\tthis.fire('remove', plane);\n\t\t}\n\n\t\tfor (const xrPlane of detectedPlanes) {\n\t\t\tlet plane = this._planesIndex.get(xrPlane);\n\n\t\t\tif (!plane) {\n\t\t\t\tplane = new XrPlane(this, xrPlane);\n\n\t\t\t\tthis._planesIndex.set(xrPlane, plane);\n\n\t\t\t\tthis._planes.push(plane);\n\n\t\t\t\tplane.update(frame);\n\t\t\t\tthis.fire('add', plane);\n\t\t\t} else {\n\t\t\t\tplane.update(frame);\n\t\t\t}\n\t\t}\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget available() {\n\t\treturn this._available;\n\t}\n\n\tget planes() {\n\t\treturn this._planes;\n\t}\n\n}\n\nclass XrManager extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis._supported = !!navigator.xr;\n\t\tthis._available = {};\n\t\tthis._available[XRTYPE_INLINE] = false;\n\t\tthis._available[XRTYPE_VR] = false;\n\t\tthis._available[XRTYPE_AR] = false;\n\t\tthis._type = null;\n\t\tthis._spaceType = null;\n\t\tthis._session = null;\n\t\tthis._baseLayer = null;\n\t\tthis._referenceSpace = null;\n\t\tthis.depthSensing = new XrDepthSensing(this);\n\t\tthis.domOverlay = new XrDomOverlay(this);\n\t\tthis.hitTest = new XrHitTest(this);\n\t\tthis.imageTracking = new XrImageTracking(this);\n\t\tthis.planeDetection = new XrPlaneDetection(this);\n\t\tthis.input = new XrInput(this);\n\t\tthis.lightEstimation = new XrLightEstimation(this);\n\t\tthis._camera = null;\n\t\tthis.views = [];\n\t\tthis.viewsPool = [];\n\t\tthis._localPosition = new Vec3();\n\t\tthis._localRotation = new Quat();\n\t\tthis._depthNear = 0.1;\n\t\tthis._depthFar = 1000;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tif (this._supported) {\n\t\t\tnavigator.xr.addEventListener('devicechange', () => {\n\t\t\t\tthis._deviceAvailabilityCheck();\n\t\t\t});\n\n\t\t\tthis._deviceAvailabilityCheck();\n\t\t}\n\t}\n\n\tstart(camera, type, spaceType, options) {\n\t\tlet callback = options;\n\t\tif (typeof options === 'object') callback = options.callback;\n\n\t\tif (!this._available[type]) {\n\t\t\tif (callback) callback(new Error('XR is not available'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._session) {\n\t\t\tif (callback) callback(new Error('XR session is already started'));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._camera = camera;\n\t\tthis._camera.camera.xr = this;\n\t\tthis._type = type;\n\t\tthis._spaceType = spaceType;\n\n\t\tthis._setClipPlanes(camera.nearClip, camera.farClip);\n\n\t\tconst opts = {\n\t\t\trequiredFeatures: [spaceType],\n\t\t\toptionalFeatures: []\n\t\t};\n\n\t\tif (type === XRTYPE_AR) {\n\t\t\topts.optionalFeatures.push('light-estimation');\n\t\t\topts.optionalFeatures.push('hit-test');\n\n\t\t\tif (options) {\n\t\t\t\tif (options.imageTracking && this.imageTracking.supported) opts.optionalFeatures.push('image-tracking');\n\t\t\t\tif (options.planeDetection) opts.optionalFeatures.push('plane-detection');\n\t\t\t}\n\n\t\t\tif (this.domOverlay.supported && this.domOverlay.root) {\n\t\t\t\topts.optionalFeatures.push('dom-overlay');\n\t\t\t\topts.domOverlay = {\n\t\t\t\t\troot: this.domOverlay.root\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (options && options.depthSensing && this.depthSensing.supported) {\n\t\t\t\topts.optionalFeatures.push('depth-sensing');\n\t\t\t\tconst usagePreference = [XRDEPTHSENSINGUSAGE_CPU];\n\t\t\t\tconst dataFormatPreference = [XRDEPTHSENSINGFORMAT_L8A8];\n\n\t\t\t\tif (options.depthSensing.usagePreference) {\n\t\t\t\t\tconst ind = usagePreference.indexOf(options.depthSensing.usagePreference);\n\t\t\t\t\tif (ind !== -1) usagePreference.splice(ind, 1);\n\t\t\t\t\tusagePreference.unshift(options.depthSensing.usagePreference);\n\t\t\t\t}\n\n\t\t\t\tif (options.depthSensing.dataFormatPreference) {\n\t\t\t\t\tconst ind = dataFormatPreference.indexOf(options.depthSensing.dataFormatPreference);\n\t\t\t\t\tif (ind !== -1) dataFormatPreference.splice(ind, 1);\n\t\t\t\t\tdataFormatPreference.unshift(options.depthSensing.dataFormatPreference);\n\t\t\t\t}\n\n\t\t\t\topts.depthSensing = {\n\t\t\t\t\tusagePreference: usagePreference,\n\t\t\t\t\tdataFormatPreference: dataFormatPreference\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (type === XRTYPE_VR) {\n\t\t\topts.optionalFeatures.push('hand-tracking');\n\t\t}\n\n\t\tif (options && options.optionalFeatures) opts.optionalFeatures = opts.optionalFeatures.concat(options.optionalFeatures);\n\n\t\tif (this.imageTracking.supported && this.imageTracking.images.length) {\n\t\t\tthis.imageTracking.prepareImages((err, trackedImages) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (callback) callback(err);\n\t\t\t\t\tthis.fire('error', err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (trackedImages !== null) opts.trackedImages = trackedImages;\n\n\t\t\t\tthis._onStartOptionsReady(type, spaceType, opts, callback);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._onStartOptionsReady(type, spaceType, opts, callback);\n\t\t}\n\t}\n\n\t_onStartOptionsReady(type, spaceType, options, callback) {\n\t\tnavigator.xr.requestSession(type, options).then(session => {\n\t\t\tthis._onSessionStart(session, spaceType, callback);\n\t\t}).catch(ex => {\n\t\t\tthis._camera.camera.xr = null;\n\t\t\tthis._camera = null;\n\t\t\tthis._type = null;\n\t\t\tthis._spaceType = null;\n\t\t\tif (callback) callback(ex);\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\tend(callback) {\n\t\tif (!this._session) {\n\t\t\tif (callback) callback(new Error('XR Session is not initialized'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (callback) this.once('end', callback);\n\n\t\tthis._session.end();\n\t}\n\n\tisAvailable(type) {\n\t\treturn this._available[type];\n\t}\n\n\t_deviceAvailabilityCheck() {\n\t\tfor (const key in this._available) {\n\t\t\tthis._sessionSupportCheck(key);\n\t\t}\n\t}\n\n\t_sessionSupportCheck(type) {\n\t\tnavigator.xr.isSessionSupported(type).then(available => {\n\t\t\tif (this._available[type] === available) return;\n\t\t\tthis._available[type] = available;\n\t\t\tthis.fire('available', type, available);\n\t\t\tthis.fire('available:' + type, available);\n\t\t}).catch(ex => {\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\t_onSessionStart(session, spaceType, callback) {\n\t\tlet failed = false;\n\t\tthis._session = session;\n\n\t\tconst onVisibilityChange = () => {\n\t\t\tthis.fire('visibility:change', session.visibilityState);\n\t\t};\n\n\t\tconst onClipPlanesChange = () => {\n\t\t\tthis._setClipPlanes(this._camera.nearClip, this._camera.farClip);\n\t\t};\n\n\t\tconst onEnd = () => {\n\t\t\tthis._session = null;\n\t\t\tthis._referenceSpace = null;\n\t\t\tthis.views = [];\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\t\tthis._type = null;\n\t\t\tthis._spaceType = null;\n\n\t\t\tif (this._camera) {\n\t\t\t\tthis._camera.off('set_nearClip', onClipPlanesChange);\n\n\t\t\t\tthis._camera.off('set_farClip', onClipPlanesChange);\n\n\t\t\t\tthis._camera.camera.xr = null;\n\t\t\t\tthis._camera = null;\n\t\t\t}\n\n\t\t\tsession.removeEventListener('end', onEnd);\n\t\t\tsession.removeEventListener('visibilitychange', onVisibilityChange);\n\t\t\tif (!failed) this.fire('end');\n\t\t\tthis.app.tick();\n\t\t};\n\n\t\tsession.addEventListener('end', onEnd);\n\t\tsession.addEventListener('visibilitychange', onVisibilityChange);\n\n\t\tthis._camera.on('set_nearClip', onClipPlanesChange);\n\n\t\tthis._camera.on('set_farClip', onClipPlanesChange);\n\n\t\tthis._baseLayer = new XRWebGLLayer(session, this.app.graphicsDevice.gl);\n\t\tsession.updateRenderState({\n\t\t\tbaseLayer: this._baseLayer,\n\t\t\tdepthNear: this._depthNear,\n\t\t\tdepthFar: this._depthFar\n\t\t});\n\t\tsession.requestReferenceSpace(spaceType).then(referenceSpace => {\n\t\t\tthis._referenceSpace = referenceSpace;\n\t\t\tthis.app.tick();\n\t\t\tif (callback) callback(null);\n\t\t\tthis.fire('start');\n\t\t}).catch(ex => {\n\t\t\tfailed = true;\n\t\t\tsession.end();\n\t\t\tif (callback) callback(ex);\n\t\t\tthis.fire('error', ex);\n\t\t});\n\t}\n\n\t_setClipPlanes(near, far) {\n\t\tif (this._depthNear === near && this._depthFar === far) return;\n\t\tthis._depthNear = near;\n\t\tthis._depthFar = far;\n\t\tif (!this._session) return;\n\n\t\tthis._session.updateRenderState({\n\t\t\tdepthNear: this._depthNear,\n\t\t\tdepthFar: this._depthFar\n\t\t});\n\t}\n\n\tupdate(frame) {\n\t\tif (!this._session) return;\n\t\tconst width = frame.session.renderState.baseLayer.framebufferWidth;\n\t\tconst height = frame.session.renderState.baseLayer.framebufferHeight;\n\n\t\tif (this._width !== width || this._height !== height) {\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t\tthis.app.graphicsDevice.setResolution(width, height);\n\t\t}\n\n\t\tconst pose = frame.getViewerPose(this._referenceSpace);\n\t\tconst lengthNew = pose ? pose.views.length : 0;\n\n\t\tif (lengthNew > this.views.length) {\n\t\t\tfor (let i = 0; i <= lengthNew - this.views.length; i++) {\n\t\t\t\tlet view = this.viewsPool.pop();\n\n\t\t\t\tif (!view) {\n\t\t\t\t\tview = {\n\t\t\t\t\t\tviewport: new Vec4(),\n\t\t\t\t\t\tprojMat: new Mat4(),\n\t\t\t\t\t\tviewMat: new Mat4(),\n\t\t\t\t\t\tviewOffMat: new Mat4(),\n\t\t\t\t\t\tviewInvMat: new Mat4(),\n\t\t\t\t\t\tviewInvOffMat: new Mat4(),\n\t\t\t\t\t\tprojViewOffMat: new Mat4(),\n\t\t\t\t\t\tviewMat3: new Mat3(),\n\t\t\t\t\t\tposition: new Float32Array(3),\n\t\t\t\t\t\trotation: new Quat()\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.views.push(view);\n\t\t\t}\n\t\t} else if (lengthNew <= this.views.length) {\n\t\t\tfor (let i = 0; i < this.views.length - lengthNew; i++) {\n\t\t\t\tthis.viewsPool.push(this.views.pop());\n\t\t\t}\n\t\t}\n\n\t\tif (pose) {\n\t\t\tconst posePosition = pose.transform.position;\n\t\t\tconst poseOrientation = pose.transform.orientation;\n\n\t\t\tthis._localPosition.set(posePosition.x, posePosition.y, posePosition.z);\n\n\t\t\tthis._localRotation.set(poseOrientation.x, poseOrientation.y, poseOrientation.z, poseOrientation.w);\n\n\t\t\tconst layer = frame.session.renderState.baseLayer;\n\n\t\t\tfor (let i = 0; i < pose.views.length; i++) {\n\t\t\t\tconst viewRaw = pose.views[i];\n\t\t\t\tconst view = this.views[i];\n\t\t\t\tconst viewport = layer.getViewport(viewRaw);\n\t\t\t\tview.viewport.x = viewport.x;\n\t\t\t\tview.viewport.y = viewport.y;\n\t\t\t\tview.viewport.z = viewport.width;\n\t\t\t\tview.viewport.w = viewport.height;\n\t\t\t\tview.projMat.set(viewRaw.projectionMatrix);\n\t\t\t\tview.viewMat.set(viewRaw.transform.inverse.matrix);\n\t\t\t\tview.viewInvMat.set(viewRaw.transform.matrix);\n\t\t\t}\n\t\t}\n\n\t\tthis._camera.camera._node.setLocalPosition(this._localPosition);\n\n\t\tthis._camera.camera._node.setLocalRotation(this._localRotation);\n\n\t\tthis.input.update(frame);\n\n\t\tif (this._type === XRTYPE_AR) {\n\t\t\tif (this.hitTest.supported) this.hitTest.update(frame);\n\t\t\tif (this.lightEstimation.supported) this.lightEstimation.update(frame);\n\t\t\tif (this.depthSensing.supported) this.depthSensing.update(frame, pose && pose.views[0]);\n\t\t\tif (this.imageTracking.supported) this.imageTracking.update(frame);\n\t\t\tif (this.planeDetection.supported) this.planeDetection.update(frame);\n\t\t}\n\n\t\tthis.fire('update', frame);\n\t}\n\n\tget supported() {\n\t\treturn this._supported;\n\t}\n\n\tget active() {\n\t\treturn !!this._session;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tget spaceType() {\n\t\treturn this._spaceType;\n\t}\n\n\tget session() {\n\t\treturn this._session;\n\t}\n\n\tget visibilityState() {\n\t\tif (!this._session) return null;\n\t\treturn this._session.visibilityState;\n\t}\n\n\tget camera() {\n\t\treturn this._camera ? this._camera.entity : null;\n\t}\n\n}\n\nclass Component extends EventHandler {\n\tconstructor(system, entity) {\n\t\tsuper();\n\t\tthis.system = system;\n\t\tthis.entity = entity;\n\n\t\tif (this.system.schema && !this._accessorsBuilt) {\n\t\t\tthis.buildAccessors(this.system.schema);\n\t\t}\n\n\t\tthis.on(\"set\", function (name, oldValue, newValue) {\n\t\t\tthis.fire(\"set_\" + name, name, oldValue, newValue);\n\t\t});\n\t\tthis.on('set_enabled', this.onSetEnabled, this);\n\t}\n\n\tstatic _buildAccessors(obj, schema) {\n\t\tschema.forEach(function (descriptor) {\n\t\t\tvar name = typeof descriptor === 'object' ? descriptor.name : descriptor;\n\t\t\tObject.defineProperty(obj, name, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.data[name];\n\t\t\t\t},\n\t\t\t\tset: function (value) {\n\t\t\t\t\tvar data = this.data;\n\t\t\t\t\tvar oldValue = data[name];\n\t\t\t\t\tdata[name] = value;\n\t\t\t\t\tthis.fire('set', name, oldValue, value);\n\t\t\t\t},\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t});\n\t\tobj._accessorsBuilt = true;\n\t}\n\n\tbuildAccessors(schema) {\n\t\tComponent._buildAccessors(this, schema);\n\t}\n\n\tonSetEnabled(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.entity.enabled) {\n\t\t\t\tif (newValue) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t} else {\n\t\t\t\t\tthis.onDisable();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {}\n\n\tonDisable() {}\n\n\tonPostStateChange() {}\n\n\tget data() {\n\t\tvar record = this.system.store[this.entity.getGuid()];\n\t\treturn record ? record.data : null;\n\t}\n\n}\n\nclass ComponentSystem extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis.app = app;\n\t\tthis.store = {};\n\t\tthis.schema = [];\n\t}\n\n\tstatic _helper(a, p) {\n\t\tfor (var i = 0, l = a.length; i < l; i++) {\n\t\t\ta[i].f.call(a[i].s, p);\n\t\t}\n\t}\n\n\tstatic initialize(root) {\n\t\tthis._helper(this._init, root);\n\t}\n\n\tstatic postInitialize(root) {\n\t\tthis._helper(this._postInit, root);\n\n\t\tthis.fire('postinitialize', root);\n\t}\n\n\tstatic update(dt, inTools) {\n\t\tthis._helper(inTools ? this._toolsUpdate : this._update, dt);\n\t}\n\n\tstatic animationUpdate(dt, inTools) {\n\t\tthis._helper(this._animationUpdate, dt);\n\t}\n\n\tstatic fixedUpdate(dt, inTools) {\n\t\tthis._helper(this._fixedUpdate, dt);\n\t}\n\n\tstatic postUpdate(dt, inTools) {\n\t\tthis._helper(this._postUpdate, dt);\n\t}\n\n\tstatic bind(event, func, scope) {\n\t\tswitch (event) {\n\t\t\tcase 'initialize':\n\t\t\t\tthis._init.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postInitialize':\n\t\t\t\tthis._postInit.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update':\n\t\t\t\tthis._update.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'animationUpdate':\n\t\t\t\tthis._animationUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postUpdate':\n\t\t\t\tthis._postUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'fixedUpdate':\n\t\t\t\tthis._fixedUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'toolsUpdate':\n\t\t\t\tthis._toolsUpdate.push({\n\t\t\t\t\tf: func,\n\t\t\t\t\ts: scope\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error('Component System does not support event', event);\n\t\t}\n\t}\n\n\tstatic _erase(a, f, s) {\n\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\tif (a[i].f === f && a[i].s === s) {\n\t\t\t\ta.splice(i--, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic unbind(event, func, scope) {\n\t\tswitch (event) {\n\t\t\tcase 'initialize':\n\t\t\t\tthis._erase(this._init, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postInitialize':\n\t\t\t\tthis._erase(this._postInit, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update':\n\t\t\t\tthis._erase(this._update, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'animationUpdate':\n\t\t\t\tthis._erase(this._animationUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'postUpdate':\n\t\t\t\tthis._erase(this._postUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'fixedUpdate':\n\t\t\t\tthis._erase(this._fixedUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'toolsUpdate':\n\t\t\t\tthis._erase(this._toolsUpdate, func, scope);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error('Component System does not support event', event);\n\t\t}\n\t}\n\n\taddComponent(entity, data) {\n\t\tvar component = new this.ComponentType(this, entity);\n\t\tvar componentData = new this.DataType();\n\t\tdata = data || {};\n\t\tthis.store[entity.getGuid()] = {\n\t\t\tentity: entity,\n\t\t\tdata: componentData\n\t\t};\n\t\tentity[this.id] = component;\n\t\tentity.c[this.id] = component;\n\t\tthis.initializeComponentData(component, data, []);\n\t\tthis.fire('add', entity, component);\n\t\treturn component;\n\t}\n\n\tremoveComponent(entity) {\n\t\tvar record = this.store[entity.getGuid()];\n\t\tvar component = entity.c[this.id];\n\t\tthis.fire('beforeremove', entity, component);\n\t\tdelete this.store[entity.getGuid()];\n\t\tdelete entity[this.id];\n\t\tdelete entity.c[this.id];\n\t\tthis.fire('remove', entity, record.data);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar src = this.store[entity.getGuid()];\n\t\treturn this.addComponent(clone, src.data);\n\t}\n\n\tinitializeComponentData(component, data = {}, properties) {\n\t\tvar descriptor;\n\t\tvar name, type, value;\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tdescriptor = properties[i];\n\n\t\t\tif (typeof descriptor === 'object') {\n\t\t\t\tname = descriptor.name;\n\t\t\t\ttype = descriptor.type;\n\t\t\t} else {\n\t\t\t\tname = descriptor;\n\t\t\t\ttype = undefined;\n\t\t\t}\n\n\t\t\tvalue = data[name];\n\n\t\t\tif (value !== undefined) {\n\t\t\t\tif (type !== undefined) {\n\t\t\t\t\tvalue = convertValue(value, type);\n\t\t\t\t}\n\n\t\t\t\tcomponent[name] = value;\n\t\t\t} else {\n\t\t\t\tcomponent[name] = component.data[name];\n\t\t\t}\n\t\t}\n\n\t\tif (component.enabled && component.entity.enabled) {\n\t\t\tcomponent.onEnable();\n\t\t}\n\t}\n\n\tgetPropertiesOfType(type) {\n\t\tvar matchingProperties = [];\n\t\tvar schema = this.schema || [];\n\t\tschema.forEach(function (descriptor) {\n\t\t\tif (descriptor && typeof descriptor === 'object' && descriptor.type === type) {\n\t\t\t\tmatchingProperties.push(descriptor);\n\t\t\t}\n\t\t});\n\t\treturn matchingProperties;\n\t}\n\n\tdestroy() {\n\t\tthis.off();\n\t}\n\n}\n\nComponentSystem._init = [];\nComponentSystem._postInit = [];\nComponentSystem._toolsUpdate = [];\nComponentSystem._update = [];\nComponentSystem._animationUpdate = [];\nComponentSystem._fixedUpdate = [];\nComponentSystem._postUpdate = [];\n\nfunction convertValue(value, type) {\n\tif (!value) {\n\t\treturn value;\n\t}\n\n\tswitch (type) {\n\t\tcase 'rgb':\n\t\t\tif (value instanceof Color) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Color(value[0], value[1], value[2]);\n\n\t\tcase 'rgba':\n\t\t\tif (value instanceof Color) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Color(value[0], value[1], value[2], value[3]);\n\n\t\tcase 'vec2':\n\t\t\tif (value instanceof Vec2) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec2(value[0], value[1]);\n\n\t\tcase 'vec3':\n\t\t\tif (value instanceof Vec3) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec3(value[0], value[1], value[2]);\n\n\t\tcase 'vec4':\n\t\t\tif (value instanceof Vec4) {\n\t\t\t\treturn value.clone();\n\t\t\t}\n\n\t\t\treturn new Vec4(value[0], value[1], value[2], value[3]);\n\n\t\tcase 'boolean':\n\t\tcase 'number':\n\t\tcase 'string':\n\t\t\treturn value;\n\n\t\tcase 'entity':\n\t\t\treturn value;\n\n\t\tdefault:\n\t\t\tthrow new Error('Could not convert unhandled type: ' + type);\n\t}\n}\n\nevents.attach(ComponentSystem);\n\nComponentSystem.destroy = function () {\n\tComponentSystem.off('initialize');\n\tComponentSystem.off('postInitialize');\n\tComponentSystem.off('toolsUpdate');\n\tComponentSystem.off('update');\n\tComponentSystem.off('animationUpdate');\n\tComponentSystem.off('fixedUpdate');\n\tComponentSystem.off('postUpdate');\n\tComponentSystem._init = [];\n\tComponentSystem._postInit = [];\n\tComponentSystem._toolsUpdate = [];\n\tComponentSystem._update = [];\n\tComponentSystem._animationUpdate = [];\n\tComponentSystem._fixedUpdate = [];\n\tComponentSystem._postUpdate = [];\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nclass AnimCache {\n\tconstructor() {\n\t\tthis._left = Infinity;\n\t\tthis._right = -Infinity;\n\t\tthis._len = 0;\n\t\tthis._recip = 0;\n\t\tthis._p0 = 0;\n\t\tthis._p1 = 0;\n\t\tthis._t = 0;\n\t\tthis._hermite = {\n\t\t\tvalid: false,\n\t\t\tp0: 0,\n\t\t\tm0: 0,\n\t\t\tp1: 0,\n\t\t\tm1: 0\n\t\t};\n\t}\n\n\tupdate(time, input) {\n\t\tif (time < this._left || time >= this._right) {\n\t\t\tvar len = input.length;\n\n\t\t\tif (!len) {\n\t\t\t\tthis._left = -Infinity;\n\t\t\t\tthis._right = Infinity;\n\t\t\t\tthis._len = 0;\n\t\t\t\tthis._recip = 0;\n\t\t\t\tthis._p0 = this._p1 = 0;\n\t\t\t} else {\n\t\t\t\tif (time < input[0]) {\n\t\t\t\t\tthis._left = -Infinity;\n\t\t\t\t\tthis._right = input[0];\n\t\t\t\t\tthis._len = 0;\n\t\t\t\t\tthis._recip = 0;\n\t\t\t\t\tthis._p0 = this._p1 = 0;\n\t\t\t\t} else if (time >= input[len - 1]) {\n\t\t\t\t\tthis._left = input[len - 1];\n\t\t\t\t\tthis._right = Infinity;\n\t\t\t\t\tthis._len = 0;\n\t\t\t\t\tthis._recip = 0;\n\t\t\t\t\tthis._p0 = this._p1 = len - 1;\n\t\t\t\t} else {\n\t\t\t\t\tvar index = this._findKey(time, input);\n\n\t\t\t\t\tthis._left = input[index];\n\t\t\t\t\tthis._right = input[index + 1];\n\t\t\t\t\tthis._len = this._right - this._left;\n\t\t\t\t\tvar diff = 1.0 / this._len;\n\t\t\t\t\tthis._recip = isFinite(diff) ? diff : 0;\n\t\t\t\t\tthis._p0 = index;\n\t\t\t\t\tthis._p1 = index + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._t = this._recip === 0 ? 0 : (time - this._left) * this._recip;\n\t\tthis._hermite.valid = false;\n\t}\n\n\t_findKey(time, input) {\n\t\tvar index = 0;\n\n\t\twhile (time >= input[index + 1]) {\n\t\t\tindex++;\n\t\t}\n\n\t\treturn index;\n\t}\n\n\teval(result, interpolation, output) {\n\t\tvar data = output._data;\n\t\tvar comp = output._components;\n\t\tvar idx0 = this._p0 * comp;\n\t\tvar i;\n\n\t\tif (interpolation === INTERPOLATION_STEP) {\n\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\tresult[i] = data[idx0 + i];\n\t\t\t}\n\t\t} else {\n\t\t\tvar t = this._t;\n\t\t\tvar idx1 = this._p1 * comp;\n\n\t\t\tswitch (interpolation) {\n\t\t\t\tcase INTERPOLATION_LINEAR:\n\t\t\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\t\t\tresult[i] = math.lerp(data[idx0 + i], data[idx1 + i], t);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase INTERPOLATION_CUBIC:\n\t\t\t\t\tvar hermite = this._hermite;\n\n\t\t\t\t\tif (!hermite.valid) {\n\t\t\t\t\t\tvar t2 = t * t;\n\t\t\t\t\t\tvar twot = t + t;\n\t\t\t\t\t\tvar omt = 1 - t;\n\t\t\t\t\t\tvar omt2 = omt * omt;\n\t\t\t\t\t\thermite.valid = true;\n\t\t\t\t\t\thermite.p0 = (1 + twot) * omt2;\n\t\t\t\t\t\thermite.m0 = t * omt2;\n\t\t\t\t\t\thermite.p1 = t2 * (3 - twot);\n\t\t\t\t\t\thermite.m1 = t2 * (t - 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar p0 = (this._p0 * 3 + 1) * comp;\n\t\t\t\t\tvar m0 = (this._p0 * 3 + 2) * comp;\n\t\t\t\t\tvar p1 = (this._p1 * 3 + 1) * comp;\n\t\t\t\t\tvar m1 = (this._p1 * 3 + 0) * comp;\n\n\t\t\t\t\tfor (i = 0; i < comp; ++i) {\n\t\t\t\t\t\tresult[i] = hermite.p0 * data[p0 + i] + hermite.m0 * data[m0 + i] * this._len + hermite.p1 * data[p1 + i] + hermite.m1 * data[m1 + i] * this._len;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimSnapshot {\n\tconstructor(animTrack) {\n\t\tthis._name = animTrack.name + 'Snapshot';\n\t\tthis._time = -1;\n\t\tthis._cache = [];\n\t\tthis._results = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < animTrack._inputs.length; ++i) {\n\t\t\tthis._cache[i] = new AnimCache();\n\t\t}\n\n\t\tvar curves = animTrack._curves;\n\t\tvar outputs = animTrack._outputs;\n\n\t\tfor (i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar output = outputs[curve._output];\n\t\t\tvar storage = [];\n\n\t\t\tfor (var j = 0; j < output._components; ++j) {\n\t\t\t\tstorage[j] = 0;\n\t\t\t}\n\n\t\t\tthis._results[i] = storage;\n\t\t}\n\t}\n\n}\n\nclass AnimClip {\n\tconstructor(track, time, speed, playing, loop, eventHandler) {\n\t\tthis._name = track.name;\n\t\tthis._track = track;\n\t\tthis._snapshot = new AnimSnapshot(track);\n\t\tthis._playing = playing;\n\t\tthis._time = time;\n\t\tthis._speed = speed;\n\t\tthis._loop = loop;\n\t\tthis._blendWeight = 1.0;\n\t\tthis._blendOrder = 0.0;\n\t\tthis._eventHandler = eventHandler;\n\t\tthis._eventCursor = 0;\n\n\t\twhile (this._track.events[this._eventCursor] && this._track.events[this._eventCursor].time < this.time) {\n\t\t\tthis._eventCursor++;\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tset name(name) {\n\t\tthis._name = name;\n\t}\n\n\tget track() {\n\t\treturn this._track;\n\t}\n\n\tget snapshot() {\n\t\treturn this._snapshot;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tset time(time) {\n\t\tthis._time = time;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(speed) {\n\t\tthis._speed = speed;\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(loop) {\n\t\tthis._loop = loop;\n\t}\n\n\tget blendWeight() {\n\t\treturn this._blendWeight;\n\t}\n\n\tset blendWeight(blendWeight) {\n\t\tthis._blendWeight = blendWeight;\n\t}\n\n\tget blendOrder() {\n\t\treturn this._blendOrder;\n\t}\n\n\tset blendOrder(blendOrder) {\n\t\tthis._blendOrder = blendOrder;\n\t}\n\n\tget eventCursor() {\n\t\treturn this._eventCursor;\n\t}\n\n\tset eventCursor(value) {\n\t\tthis._eventCursor = value;\n\t}\n\n\tactiveEventsForFrame(frameStartTime, frameEndTime) {\n\t\tif (frameStartTime === 0) {\n\t\t\tthis.eventCursor = 0;\n\t\t}\n\n\t\tvar clippedFrameDuration;\n\n\t\tif (frameEndTime > this.track.duration) {\n\t\t\tclippedFrameDuration = frameEndTime - this.track.duration;\n\t\t\tframeEndTime = this.track.duration;\n\t\t}\n\n\t\twhile (this.track.events[this.eventCursor] && this.track.events[this.eventCursor].time >= frameStartTime && (frameEndTime === this.track.duration ? this.track.events[this.eventCursor].time <= frameEndTime : this.track.events[this.eventCursor].time < frameEndTime)) {\n\t\t\tconst event = this.track.events[this.eventCursor];\n\n\t\t\tthis._eventHandler.fire(event.name, _extends({\n\t\t\t\ttrack: this.track\n\t\t\t}, event));\n\n\t\t\tthis.eventCursor++;\n\t\t}\n\n\t\tif (Number.isFinite(clippedFrameDuration)) {\n\t\t\tthis.activeEventsForFrame(0, clippedFrameDuration);\n\t\t}\n\t}\n\n\t_update(deltaTime) {\n\t\tif (this._playing) {\n\t\t\tvar time = this._time;\n\t\t\tvar duration = this._track.duration;\n\t\t\tvar speed = this._speed;\n\t\t\tvar loop = this._loop;\n\n\t\t\tif (this._track.events.length > 0 && duration > 0) {\n\t\t\t\tthis.activeEventsForFrame(time, time + speed * deltaTime);\n\t\t\t}\n\n\t\t\ttime += speed * deltaTime;\n\n\t\t\tif (speed >= 0) {\n\t\t\t\tif (time > duration) {\n\t\t\t\t\tif (loop) {\n\t\t\t\t\t\ttime = time % duration || 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttime = this._track.duration;\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (time < 0) {\n\t\t\t\t\tif (loop) {\n\t\t\t\t\t\ttime = duration + (time % duration || 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._time = time;\n\t\t}\n\n\t\tif (this._time !== this._snapshot._time) {\n\t\t\tthis._track.eval(this._time, this._snapshot);\n\t\t}\n\t}\n\n\tplay() {\n\t\tthis._playing = true;\n\t\tthis._time = 0;\n\t}\n\n\tstop() {\n\t\tthis._playing = false;\n\t\tthis._time = 0;\n\t}\n\n\tpause() {\n\t\tthis._playing = false;\n\t}\n\n\tresume() {\n\t\tthis._playing = true;\n\t}\n\n\treset() {\n\t\tthis._time = 0;\n\t}\n\n}\n\nclass AnimEvaluator {\n\tconstructor(binder) {\n\t\tthis._binder = binder;\n\t\tthis._clips = [];\n\t\tthis._inputs = [];\n\t\tthis._outputs = [];\n\t\tthis._targets = {};\n\t}\n\n\tstatic _dot(a, b) {\n\t\tvar len = a.length;\n\t\tvar result = 0;\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\tresult += a[i] * b[i];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic _normalize(a) {\n\t\tvar l = AnimEvaluator._dot(a, a);\n\n\t\tif (l > 0) {\n\t\t\tl = 1.0 / Math.sqrt(l);\n\t\t\tvar len = a.length;\n\n\t\t\tfor (var i = 0; i < len; ++i) {\n\t\t\t\ta[i] *= l;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _set(a, b, type) {\n\t\tvar len = a.length;\n\t\tvar i;\n\n\t\tif (type === 'quaternion') {\n\t\t\tvar l = AnimEvaluator._dot(b, b);\n\n\t\t\tif (l > 0) {\n\t\t\t\tl = 1.0 / Math.sqrt(l);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\ta[i] = b[i] * l;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\ta[i] = b[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _blendVec(a, b, t) {\n\t\tvar it = 1.0 - t;\n\t\tvar len = a.length;\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ta[i] = a[i] * it + b[i] * t;\n\t\t}\n\t}\n\n\tstatic _blendQuat(a, b, t) {\n\t\tvar len = a.length;\n\t\tvar it = 1.0 - t;\n\n\t\tif (AnimEvaluator._dot(a, b) < 0) {\n\t\t\tt = -t;\n\t\t}\n\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ta[i] = a[i] * it + b[i] * t;\n\t\t}\n\n\t\tAnimEvaluator._normalize(a);\n\t}\n\n\tstatic _blend(a, b, t, type) {\n\t\tif (type === 'quaternion') {\n\t\t\tAnimEvaluator._blendQuat(a, b, t);\n\t\t} else {\n\t\t\tAnimEvaluator._blendVec(a, b, t);\n\t\t}\n\t}\n\n\tstatic _stableSort(a, lessFunc) {\n\t\tvar len = a.length;\n\n\t\tfor (var i = 0; i < len - 1; ++i) {\n\t\t\tfor (var j = i + 1; j < len; ++j) {\n\t\t\t\tif (lessFunc(a[j], a[i])) {\n\t\t\t\t\tvar tmp = a[i];\n\t\t\t\t\ta[i] = a[j];\n\t\t\t\t\ta[j] = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget clips() {\n\t\treturn this._clips;\n\t}\n\n\taddClip(clip) {\n\t\tvar targets = this._targets;\n\t\tvar curves = clip.track.curves;\n\t\tvar snapshot = clip.snapshot;\n\t\tvar inputs = [];\n\t\tvar outputs = [];\n\n\t\tfor (var i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar paths = curve.paths;\n\n\t\t\tfor (var j = 0; j < paths.length; ++j) {\n\t\t\t\tvar path = paths[j];\n\n\t\t\t\tvar resolved = this._binder.resolve(path);\n\n\t\t\t\tvar target = targets[resolved && resolved.targetPath || null];\n\n\t\t\t\tif (!target && resolved) {\n\t\t\t\t\ttarget = {\n\t\t\t\t\t\ttarget: resolved,\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tcurves: 0,\n\t\t\t\t\t\tblendCounter: 0\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (var k = 0; k < target.target.components; ++k) {\n\t\t\t\t\t\ttarget.value.push(0);\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets[resolved.targetPath] = target;\n\t\t\t\t}\n\n\t\t\t\tif (target) {\n\t\t\t\t\ttarget.curves++;\n\t\t\t\t\tinputs.push(snapshot._results[i]);\n\t\t\t\t\toutputs.push(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._clips.push(clip);\n\n\t\tthis._inputs.push(inputs);\n\n\t\tthis._outputs.push(outputs);\n\t}\n\n\tremoveClip(index) {\n\t\tvar targets = this._targets;\n\t\tvar clips = this._clips;\n\t\tvar clip = clips[index];\n\t\tvar curves = clip.track.curves;\n\n\t\tfor (var i = 0; i < curves.length; ++i) {\n\t\t\tvar curve = curves[i];\n\t\t\tvar paths = curve.paths;\n\n\t\t\tfor (var j = 0; j < paths.length; ++j) {\n\t\t\t\tvar path = paths[j];\n\n\t\t\t\tvar target = this._binder.resolve(path);\n\n\t\t\t\tif (target) {\n\t\t\t\t\ttarget.curves--;\n\n\t\t\t\t\tif (target.curves === 0) {\n\t\t\t\t\t\tthis._binder.unresolve(path);\n\n\t\t\t\t\t\tdelete targets[target.targetPath];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclips.splice(index, 1);\n\n\t\tthis._inputs.splice(index, 1);\n\n\t\tthis._outputs.splice(index, 1);\n\t}\n\n\tremoveClips() {\n\t\twhile (this._clips.length > 0) {\n\t\t\tthis.removeClip(0);\n\t\t}\n\t}\n\n\tfindClip(name) {\n\t\tvar clips = this._clips;\n\n\t\tfor (var i = 0; i < clips.length; ++i) {\n\t\t\tvar clip = clips[i];\n\n\t\t\tif (clip.name === name) {\n\t\t\t\treturn clip;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trebind() {\n\t\tthis._binder.rebind();\n\n\t\tthis._targets = {};\n\t\tvar clips = [...this.clips];\n\t\tthis.removeClips();\n\t\tclips.forEach(clip => {\n\t\t\tthis.addClip(clip);\n\t\t});\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar clips = this._clips;\n\t\tvar order = clips.map(function (c, i) {\n\t\t\treturn i;\n\t\t});\n\n\t\tAnimEvaluator._stableSort(order, function (a, b) {\n\t\t\treturn clips[a].blendOrder < clips[b].blendOrder;\n\t\t});\n\n\t\tvar i, j;\n\n\t\tfor (i = 0; i < order.length; ++i) {\n\t\t\tvar index = order[i];\n\t\t\tvar clip = clips[index];\n\t\t\tvar inputs = this._inputs[index];\n\t\t\tvar outputs = this._outputs[index];\n\t\t\tvar blendWeight = clip.blendWeight;\n\n\t\t\tif (blendWeight > 0.0) {\n\t\t\t\tclip._update(deltaTime);\n\t\t\t}\n\n\t\t\tvar input;\n\t\t\tvar output;\n\t\t\tvar value;\n\n\t\t\tif (blendWeight >= 1.0) {\n\t\t\t\tfor (j = 0; j < inputs.length; ++j) {\n\t\t\t\t\tinput = inputs[j];\n\t\t\t\t\toutput = outputs[j];\n\t\t\t\t\tvalue = output.value;\n\n\t\t\t\t\tAnimEvaluator._set(value, input, output.target.type);\n\n\t\t\t\t\toutput.blendCounter++;\n\t\t\t\t}\n\t\t\t} else if (blendWeight > 0.0) {\n\t\t\t\tfor (j = 0; j < inputs.length; ++j) {\n\t\t\t\t\tinput = inputs[j];\n\t\t\t\t\toutput = outputs[j];\n\t\t\t\t\tvalue = output.value;\n\n\t\t\t\t\tif (output.blendCounter === 0) {\n\t\t\t\t\t\tAnimEvaluator._set(value, input, output.target.type);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tAnimEvaluator._blend(value, input, blendWeight, output.target.type);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.blendCounter++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar targets = this._targets;\n\n\t\tfor (var path in targets) {\n\t\t\tif (targets.hasOwnProperty(path)) {\n\t\t\t\tvar target = targets[path];\n\t\t\t\ttarget.target.func(target.value);\n\t\t\t\ttarget.blendCounter = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis._binder.update(deltaTime);\n\t}\n\n}\n\nclass AnimTarget {\n\tconstructor(func, type, components, targetPath) {\n\t\tthis._func = func;\n\t\tthis._type = type;\n\t\tthis._components = components;\n\t\tthis._targetPath = targetPath;\n\t}\n\n\tget func() {\n\t\treturn this._func;\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tget components() {\n\t\treturn this._components;\n\t}\n\n\tget targetPath() {\n\t\treturn this._targetPath;\n\t}\n\n}\n\nclass DefaultAnimBinder {\n\tconstructor(graph) {\n\t\tthis.graph = graph;\n\t\tif (!graph) return;\n\t\tvar nodes = {};\n\n\t\tvar flatten = function flatten(node) {\n\t\t\tnodes[node.name] = node;\n\n\t\t\tfor (var i = 0; i < node.children.length; ++i) {\n\t\t\t\tflatten(node.children[i]);\n\t\t\t}\n\t\t};\n\n\t\tflatten(graph);\n\t\tthis.nodes = nodes;\n\t\tthis.targetCache = {};\n\n\t\tvar findMeshInstances = function findMeshInstances(node) {\n\t\t\tvar object = node;\n\n\t\t\twhile (object && !(object instanceof Entity)) {\n\t\t\t\tobject = object.parent;\n\t\t\t}\n\n\t\t\tvar meshInstances;\n\n\t\t\tif (object) {\n\t\t\t\tif (object.render) {\n\t\t\t\t\tmeshInstances = object.render.meshInstances;\n\t\t\t\t} else if (object.model) {\n\t\t\t\t\tmeshInstances = object.model.meshInstances;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn meshInstances;\n\t\t};\n\n\t\tthis.nodeCounts = {};\n\t\tthis.activeNodes = [];\n\t\tthis.handlers = {\n\t\t\t'localPosition': function (node) {\n\t\t\t\tvar object = node.localPosition;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 3, node, 'localPosition');\n\t\t\t},\n\t\t\t'localRotation': function (node) {\n\t\t\t\tvar object = node.localRotation;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'quaternion', 4, node, 'localRotation');\n\t\t\t},\n\t\t\t'localScale': function (node) {\n\t\t\t\tvar object = node.localScale;\n\n\t\t\t\tvar func = function func(value) {\n\t\t\t\t\tobject.set(...value);\n\t\t\t\t};\n\n\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 3, node, 'localScale');\n\t\t\t},\n\t\t\t'weights': function (node) {\n\t\t\t\tvar meshInstances = findMeshInstances(node);\n\n\t\t\t\tif (meshInstances) {\n\t\t\t\t\tvar morphInstances = [];\n\n\t\t\t\t\tfor (var i = 0; i < meshInstances.length; ++i) {\n\t\t\t\t\t\tif (meshInstances[i].node.name === node.name && meshInstances[i].morphInstance) {\n\t\t\t\t\t\t\tmorphInstances.push(meshInstances[i].morphInstance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (morphInstances.length > 0) {\n\t\t\t\t\t\tvar func = function func(value) {\n\t\t\t\t\t\t\tfor (var i = 0; i < value.length; ++i) {\n\t\t\t\t\t\t\t\tfor (var j = 0; j < morphInstances.length; j++) {\n\t\t\t\t\t\t\t\t\tmorphInstances[j].setWeight(i, value[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', morphInstances[0].morph._targets.length, node, 'weights');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t'materialTexture': function (node, textureName) {\n\t\t\t\tvar meshInstances = findMeshInstances(node);\n\n\t\t\t\tif (meshInstances) {\n\t\t\t\t\tvar meshInstance;\n\n\t\t\t\t\tfor (var i = 0; i < meshInstances.length; ++i) {\n\t\t\t\t\t\tif (meshInstances[i].node.name === node.name) {\n\t\t\t\t\t\t\tmeshInstance = meshInstances[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (meshInstance) {\n\t\t\t\t\t\tvar func = function (value) {\n\t\t\t\t\t\t\tvar textureAsset = this.animComponent.system.app.assets.get(value[0]);\n\n\t\t\t\t\t\t\tif (textureAsset && textureAsset.resource && textureAsset.type === 'texture') {\n\t\t\t\t\t\t\t\tmeshInstance.material[textureName] = textureAsset.resource;\n\t\t\t\t\t\t\t\tmeshInstance.material.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this);\n\n\t\t\t\t\t\treturn DefaultAnimBinder.createAnimTarget(func, 'vector', 1, node, 'materialTexture', 'material');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tfindNode(path) {\n\t\tvar node;\n\n\t\tif (this.graph) {\n\t\t\tnode = this.graph.findByPath(path.entityPath);\n\t\t}\n\n\t\tif (!node) {\n\t\t\tnode = this.nodes[path.entityPath[path.entityPath.length - 1] || \"\"];\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tstatic createAnimTarget(func, type, valueCount, node, propertyPath, componentType) {\n\t\tvar targetPath = AnimBinder.encode(node.path, componentType ? componentType : 'entity', propertyPath);\n\t\treturn new AnimTarget(func, type, valueCount, targetPath);\n\t}\n\n\tresolve(path) {\n\t\tvar encodedPath = AnimBinder.encode(path.entityPath, path.component, path.propertyPath);\n\t\tvar target = this.targetCache[encodedPath];\n\t\tif (target) return target;\n\t\tvar node = this.findNode(path);\n\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar handler = this.handlers[path.propertyPath];\n\n\t\tif (!handler) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttarget = handler(node);\n\n\t\tif (!target) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.targetCache[encodedPath] = target;\n\n\t\tif (!this.nodeCounts[node.path]) {\n\t\t\tthis.activeNodes.push(node);\n\t\t\tthis.nodeCounts[node.path] = 1;\n\t\t} else {\n\t\t\tthis.nodeCounts[node.path]++;\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tunresolve(path) {\n\t\tif (path.component !== 'graph') return;\n\t\tvar node = this.nodes[path.entityPath[path.entityPath.length - 1] || \"\"];\n\t\tthis.nodeCounts[node.path]--;\n\n\t\tif (this.nodeCounts[node.path] === 0) {\n\t\t\tvar activeNodes = this.activeNodes;\n\t\t\tvar i = activeNodes.indexOf(node.node);\n\t\t\tvar len = activeNodes.length;\n\n\t\t\tif (i < len - 1) {\n\t\t\t\tactiveNodes[i] = activeNodes[len - 1];\n\t\t\t}\n\n\t\t\tactiveNodes.pop();\n\t\t}\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar activeNodes = this.activeNodes;\n\n\t\tfor (var i = 0; i < activeNodes.length; ++i) {\n\t\t\tactiveNodes[i]._dirtifyLocal();\n\t\t}\n\t}\n\n}\n\nclass InterpolatedKey {\n\tconstructor() {\n\t\tthis._written = false;\n\t\tthis._name = \"\";\n\t\tthis._keyFrames = [];\n\t\tthis._quat = new Quat();\n\t\tthis._pos = new Vec3();\n\t\tthis._scale = new Vec3();\n\t\tthis._targetNode = null;\n\t}\n\n\tgetTarget() {\n\t\treturn this._targetNode;\n\t}\n\n\tsetTarget(node) {\n\t\tthis._targetNode = node;\n\t}\n\n}\n\nclass Skeleton {\n\tconstructor(graph) {\n\t\tthis._animation = null;\n\t\tthis._time = 0;\n\t\tthis.looping = true;\n\t\tthis._interpolatedKeys = [];\n\t\tthis._interpolatedKeyDict = {};\n\t\tthis._currKeyIndices = {};\n\t\tthis.graph = null;\n\t\tvar self = this;\n\n\t\tfunction addInterpolatedKeys(node) {\n\t\t\tvar interpKey = new InterpolatedKey();\n\t\t\tinterpKey._name = node.name;\n\n\t\t\tself._interpolatedKeys.push(interpKey);\n\n\t\t\tself._interpolatedKeyDict[node.name] = interpKey;\n\t\t\tself._currKeyIndices[node.name] = 0;\n\n\t\t\tfor (var i = 0; i < node._children.length; i++) addInterpolatedKeys(node._children[i]);\n\t\t}\n\n\t\taddInterpolatedKeys(graph);\n\t}\n\n\tget animation() {\n\t\treturn this._animation;\n\t}\n\n\tset animation(value) {\n\t\tthis._animation = value;\n\t\tthis.currentTime = 0;\n\t}\n\n\tget currentTime() {\n\t\treturn this._time;\n\t}\n\n\tset currentTime(value) {\n\t\tthis._time = value;\n\t\tvar numNodes = this._interpolatedKeys.length;\n\n\t\tfor (var i = 0; i < numNodes; i++) {\n\t\t\tvar node = this._interpolatedKeys[i];\n\t\t\tvar nodeName = node._name;\n\t\t\tthis._currKeyIndices[nodeName] = 0;\n\t\t}\n\n\t\tthis.addTime(0);\n\t\tthis.updateGraph();\n\t}\n\n\tget numNodes() {\n\t\treturn this._interpolatedKeys.length;\n\t}\n\n\taddTime(delta) {\n\t\tif (this._animation !== null) {\n\t\t\tvar i;\n\t\t\tvar node, nodeName;\n\t\t\tvar keys, interpKey;\n\t\t\tvar k1, k2, alpha;\n\t\t\tvar nodes = this._animation._nodes;\n\t\t\tvar duration = this._animation.duration;\n\n\t\t\tif (this._time === duration && !this.looping) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._time += delta;\n\n\t\t\tif (this._time > duration) {\n\t\t\t\tthis._time = this.looping ? 0.0 : duration;\n\n\t\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnodeName = node._name;\n\t\t\t\t\tthis._currKeyIndices[nodeName] = 0;\n\t\t\t\t}\n\t\t\t} else if (this._time < 0) {\n\t\t\t\tthis._time = this.looping ? duration : 0.0;\n\n\t\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnodeName = node._name;\n\t\t\t\t\tthis._currKeyIndices[nodeName] = node._keys.length - 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar offset = delta >= 0 ? 1 : -1;\n\t\t\tvar foundKey;\n\n\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tnodeName = node._name;\n\t\t\t\tkeys = node._keys;\n\t\t\t\tinterpKey = this._interpolatedKeyDict[nodeName];\n\n\t\t\t\tif (interpKey === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfoundKey = false;\n\n\t\t\t\tif (keys.length !== 1) {\n\t\t\t\t\tfor (var currKeyIndex = this._currKeyIndices[nodeName]; currKeyIndex < keys.length - 1 && currKeyIndex >= 0; currKeyIndex += offset) {\n\t\t\t\t\t\tk1 = keys[currKeyIndex];\n\t\t\t\t\t\tk2 = keys[currKeyIndex + 1];\n\n\t\t\t\t\t\tif (k1.time <= this._time && k2.time >= this._time) {\n\t\t\t\t\t\t\talpha = (this._time - k1.time) / (k2.time - k1.time);\n\n\t\t\t\t\t\t\tinterpKey._pos.lerp(k1.position, k2.position, alpha);\n\n\t\t\t\t\t\t\tinterpKey._quat.slerp(k1.rotation, k2.rotation, alpha);\n\n\t\t\t\t\t\t\tinterpKey._scale.lerp(k1.scale, k2.scale, alpha);\n\n\t\t\t\t\t\t\tinterpKey._written = true;\n\t\t\t\t\t\t\tthis._currKeyIndices[nodeName] = currKeyIndex;\n\t\t\t\t\t\t\tfoundKey = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (keys.length === 1 || !foundKey && this._time === 0.0 && this.looping) {\n\t\t\t\t\tinterpKey._pos.copy(keys[0].position);\n\n\t\t\t\t\tinterpKey._quat.copy(keys[0].rotation);\n\n\t\t\t\t\tinterpKey._scale.copy(keys[0].scale);\n\n\t\t\t\t\tinterpKey._written = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tblend(skel1, skel2, alpha) {\n\t\tvar numNodes = this._interpolatedKeys.length;\n\n\t\tfor (var i = 0; i < numNodes; i++) {\n\t\t\tvar key1 = skel1._interpolatedKeys[i];\n\t\t\tvar key2 = skel2._interpolatedKeys[i];\n\t\t\tvar dstKey = this._interpolatedKeys[i];\n\n\t\t\tif (key1._written && key2._written) {\n\t\t\t\tdstKey._quat.slerp(key1._quat, skel2._interpolatedKeys[i]._quat, alpha);\n\n\t\t\t\tdstKey._pos.lerp(key1._pos, skel2._interpolatedKeys[i]._pos, alpha);\n\n\t\t\t\tdstKey._scale.lerp(key1._scale, key2._scale, alpha);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t} else if (key1._written) {\n\t\t\t\tdstKey._quat.copy(key1._quat);\n\n\t\t\t\tdstKey._pos.copy(key1._pos);\n\n\t\t\t\tdstKey._scale.copy(key1._scale);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t} else if (key2._written) {\n\t\t\t\tdstKey._quat.copy(key2._quat);\n\n\t\t\t\tdstKey._pos.copy(key2._pos);\n\n\t\t\t\tdstKey._scale.copy(key2._scale);\n\n\t\t\t\tdstKey._written = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetGraph(graph) {\n\t\tvar i;\n\t\tthis.graph = graph;\n\n\t\tif (graph) {\n\t\t\tfor (i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tvar interpKey = this._interpolatedKeys[i];\n\t\t\t\tvar graphNode = graph.findByName(interpKey._name);\n\n\t\t\t\tthis._interpolatedKeys[i].setTarget(graphNode);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tthis._interpolatedKeys[i].setTarget(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateGraph() {\n\t\tif (this.graph) {\n\t\t\tfor (var i = 0; i < this._interpolatedKeys.length; i++) {\n\t\t\t\tvar interpKey = this._interpolatedKeys[i];\n\n\t\t\t\tif (interpKey._written) {\n\t\t\t\t\tvar transform = interpKey.getTarget();\n\t\t\t\t\ttransform.localPosition.copy(interpKey._pos);\n\t\t\t\t\ttransform.localRotation.copy(interpKey._quat);\n\t\t\t\t\ttransform.localScale.copy(interpKey._scale);\n\t\t\t\t\tif (!transform._dirtyLocal) transform._dirtifyLocal();\n\t\t\t\t\tinterpKey._written = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimationComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.animationsIndex = {};\n\t\tthis.on('set_animations', this.onSetAnimations, this);\n\t\tthis.on('set_assets', this.onSetAssets, this);\n\t\tthis.on('set_loop', this.onSetLoop, this);\n\t}\n\n\tplay(name, blendTime) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar data = this.data;\n\n\t\tif (!data.animations[name]) {\n\t\t\treturn;\n\t\t}\n\n\t\tblendTime = blendTime || 0;\n\t\tdata.prevAnim = data.currAnim;\n\t\tdata.currAnim = name;\n\n\t\tif (data.model) {\n\t\t\tif (!data.skeleton && !data.animEvaluator) {\n\t\t\t\tthis._createAnimationController();\n\t\t\t}\n\n\t\t\tvar prevAnim = data.animations[data.prevAnim];\n\t\t\tvar currAnim = data.animations[data.currAnim];\n\t\t\tdata.blending = blendTime > 0 && data.prevAnim;\n\n\t\t\tif (data.blending) {\n\t\t\t\tdata.blend = 0;\n\t\t\t\tdata.blendSpeed = 1.0 / blendTime;\n\t\t\t}\n\n\t\t\tif (data.skeleton) {\n\t\t\t\tif (data.blending) {\n\t\t\t\t\tdata.fromSkel.animation = prevAnim;\n\t\t\t\t\tdata.fromSkel.addTime(data.skeleton._time);\n\t\t\t\t\tdata.toSkel.animation = currAnim;\n\t\t\t\t} else {\n\t\t\t\t\tdata.skeleton.animation = currAnim;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.animEvaluator) {\n\t\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\t\tif (data.blending) {\n\t\t\t\t\twhile (animEvaluator.clips.length > 1) {\n\t\t\t\t\t\tanimEvaluator.removeClip(0);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdata.animEvaluator.removeClips();\n\t\t\t\t}\n\n\t\t\t\tvar clip = new AnimClip(data.animations[data.currAnim], 0, 1.0, true, data.loop);\n\t\t\t\tclip.name = data.currAnim;\n\t\t\t\tclip.blendWeight = data.blending ? 0 : 1;\n\t\t\t\tclip.reset();\n\t\t\t\tdata.animEvaluator.addClip(clip);\n\t\t\t}\n\t\t}\n\n\t\tdata.playing = true;\n\t}\n\n\tgetAnimation(name) {\n\t\treturn this.data.animations[name];\n\t}\n\n\tsetModel(model) {\n\t\tvar data = this.data;\n\n\t\tif (model !== data.model) {\n\t\t\tthis._resetAnimationController();\n\n\t\t\tdata.model = model;\n\n\t\t\tif (data.animations && data.currAnim && data.animations[data.currAnim]) {\n\t\t\t\tthis.play(data.currAnim);\n\t\t\t}\n\t\t}\n\t}\n\n\t_resetAnimationController() {\n\t\tvar data = this.data;\n\t\tdata.skeleton = null;\n\t\tdata.fromSkel = null;\n\t\tdata.toSkel = null;\n\t\tdata.animEvaluator = null;\n\t}\n\n\t_createAnimationController() {\n\t\tvar data = this.data;\n\t\tvar model = data.model;\n\t\tvar animations = data.animations;\n\t\tvar hasJson = false;\n\t\tvar hasGlb = false;\n\n\t\tfor (var animation in animations) {\n\t\t\tif (animations.hasOwnProperty(animation)) {\n\t\t\t\tvar anim = animations[animation];\n\n\t\t\t\tif (anim.constructor === AnimTrack) {\n\t\t\t\t\thasGlb = true;\n\t\t\t\t} else {\n\t\t\t\t\thasJson = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar graph = model.getGraph();\n\n\t\tif (hasJson) {\n\t\t\tdata.fromSkel = new Skeleton(graph);\n\t\t\tdata.toSkel = new Skeleton(graph);\n\t\t\tdata.skeleton = new Skeleton(graph);\n\t\t\tdata.skeleton.looping = data.loop;\n\t\t\tdata.skeleton.setGraph(graph);\n\t\t} else if (hasGlb) {\n\t\t\tdata.animEvaluator = new AnimEvaluator(new DefaultAnimBinder(this.entity));\n\t\t}\n\t}\n\n\tloadAnimationAssets(ids) {\n\t\tif (!ids || !ids.length) return;\n\t\tvar self = this;\n\t\tvar assets = this.system.app.assets;\n\t\tvar i,\n\t\t\t\tl = ids.length;\n\n\t\tvar onAssetReady = function onAssetReady(asset) {\n\t\t\tif (asset.resources.length > 1) {\n\t\t\t\tfor (var i = 0; i < asset.resources.length; i++) {\n\t\t\t\t\tself.animations[asset.resources[i].name] = asset.resources[i];\n\t\t\t\t\tself.animationsIndex[asset.id] = asset.resources[i].name;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.animations[asset.name] = asset.resource;\n\t\t\t\tself.animationsIndex[asset.id] = asset.name;\n\t\t\t}\n\n\t\t\tself.animations = self.animations;\n\t\t};\n\n\t\tvar onAssetAdd = function onAssetAdd(asset) {\n\t\t\tasset.off('change', self.onAssetChanged, self);\n\t\t\tasset.on('change', self.onAssetChanged, self);\n\t\t\tasset.off('remove', self.onAssetRemoved, self);\n\t\t\tasset.on('remove', self.onAssetRemoved, self);\n\n\t\t\tif (asset.resource) {\n\t\t\t\tonAssetReady(asset);\n\t\t\t} else {\n\t\t\t\tasset.once('load', onAssetReady, self);\n\t\t\t\tif (self.enabled && self.entity.enabled) assets.load(asset);\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tvar asset = assets.get(ids[i]);\n\n\t\t\tif (asset) {\n\t\t\t\tonAssetAdd(asset);\n\t\t\t} else {\n\t\t\t\tassets.on('add:' + ids[i], onAssetAdd);\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetChanged(asset, attribute, newValue, oldValue) {\n\t\tvar i;\n\n\t\tif (attribute === 'resource' || attribute === 'resources') {\n\t\t\tif (attribute === 'resources' && newValue && newValue.length === 0) {\n\t\t\t\tnewValue = null;\n\t\t\t}\n\n\t\t\tif (newValue) {\n\t\t\t\tvar restarted = false;\n\n\t\t\t\tif (newValue.length > 1) {\n\t\t\t\t\tif (oldValue && oldValue.length > 1) {\n\t\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.animations[asset.name];\n\t\t\t\t\t}\n\n\t\t\t\t\trestarted = false;\n\n\t\t\t\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\t\t\t\tthis.animations[newValue[i].name] = newValue[i];\n\n\t\t\t\t\t\tif (!restarted && this.data.currAnim === newValue[i].name) {\n\t\t\t\t\t\t\tif (this.data.playing && this.data.enabled && this.entity.enabled) {\n\t\t\t\t\t\t\t\trestarted = true;\n\t\t\t\t\t\t\t\tthis.play(newValue[i].name, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!restarted) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\n\t\t\t\t\t\tthis.onSetAnimations();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (oldValue && oldValue.length > 1) {\n\t\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.animations[asset.name] = newValue[0] || newValue;\n\t\t\t\t\trestarted = false;\n\n\t\t\t\t\tif (this.data.currAnim === asset.name) {\n\t\t\t\t\t\tif (this.data.playing && this.data.enabled && this.entity.enabled) {\n\t\t\t\t\t\t\trestarted = true;\n\t\t\t\t\t\t\tthis.play(asset.name, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!restarted) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\n\t\t\t\t\t\tthis.onSetAnimations();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.animationsIndex[asset.id] = asset.name;\n\t\t\t} else {\n\t\t\t\tif (oldValue.length > 1) {\n\t\t\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\t\t\tdelete this.animations[oldValue[i].name];\n\n\t\t\t\t\t\tif (this.data.currAnim === oldValue[i].name) {\n\t\t\t\t\t\t\tthis._stopCurrentAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.animations[asset.name];\n\n\t\t\t\t\tif (this.data.currAnim === asset.name) {\n\t\t\t\t\t\tthis._stopCurrentAnimation();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete this.animationsIndex[asset.id];\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.animations) {\n\t\t\tif (asset.resources.length > 1) {\n\t\t\t\tfor (var i = 0; i < asset.resources.length; i++) {\n\t\t\t\t\tdelete this.animations[asset.resources[i].name];\n\t\t\t\t\tif (this.data.currAnim === asset.resources[i].name) this._stopCurrentAnimation();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdelete this.animations[asset.name];\n\t\t\t\tif (this.data.currAnim === asset.name) this._stopCurrentAnimation();\n\t\t\t}\n\n\t\t\tdelete this.animationsIndex[asset.id];\n\t\t}\n\t}\n\n\t_stopCurrentAnimation() {\n\t\tvar data = this.data;\n\t\tdata.currAnim = null;\n\t\tdata.playing = false;\n\n\t\tif (data.skeleton) {\n\t\t\tdata.skeleton.currentTime = 0;\n\t\t\tdata.skeleton.animation = null;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tfor (var i = 0; i < data.animEvaluator.clips.length; ++i) {\n\t\t\t\tdata.animEvaluator.clips[i].stop();\n\t\t\t}\n\n\t\t\tdata.animEvaluator.update(0);\n\t\t\tdata.animEvaluator.removeClips();\n\t\t}\n\t}\n\n\tonSetAnimations(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\t\tvar modelComponent = this.entity.model;\n\n\t\tif (modelComponent) {\n\t\t\tvar m = modelComponent.model;\n\n\t\t\tif (m && m !== data.model) {\n\t\t\t\tthis.setModel(m);\n\t\t\t}\n\t\t}\n\n\t\tif (!data.currAnim && data.activate && data.enabled && this.entity.enabled) {\n\t\t\tfor (var animName in data.animations) {\n\t\t\t\tthis.play(animName, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetAssets(name, oldValue, newValue) {\n\t\tif (oldValue && oldValue.length) {\n\t\t\tfor (var i = 0; i < oldValue.length; i++) {\n\t\t\t\tif (oldValue[i]) {\n\t\t\t\t\tvar asset = this.system.app.assets.get(oldValue[i]);\n\n\t\t\t\t\tif (asset) {\n\t\t\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\t\t\tvar animName = this.animationsIndex[asset.id];\n\t\t\t\t\t\tif (this.data.currAnim === animName) this._stopCurrentAnimation();\n\t\t\t\t\t\tdelete this.animations[animName];\n\t\t\t\t\t\tdelete this.animationsIndex[asset.id];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar ids = newValue.map(function (value) {\n\t\t\treturn value instanceof Asset ? value.id : value;\n\t\t});\n\t\tthis.loadAnimationAssets(ids);\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tdata.skeleton.looping = data.loop;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tfor (var i = 0; i < data.animEvaluator.clips.length; ++i) {\n\t\t\t\tdata.animEvaluator.clips[i].loop = data.loop;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetCurrentTime(name, oldValue, newValue) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tvar skeleton = data.skeleton;\n\t\t\tskeleton.currentTime = newValue;\n\t\t\tskeleton.addTime(0);\n\t\t\tskeleton.updateGraph();\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\tanimEvaluator.clips[i].time = newValue;\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tsuper.onEnable();\n\t\tvar data = this.data;\n\t\tvar assets = data.assets;\n\t\tvar registry = this.system.app.assets;\n\n\t\tif (assets) {\n\t\t\tfor (var i = 0, len = assets.length; i < len; i++) {\n\t\t\t\tvar asset = assets[i];\n\t\t\t\tif (!(asset instanceof Asset)) asset = registry.get(asset);\n\t\t\t\tif (asset && !asset.resource) registry.load(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (data.activate && !data.currAnim) {\n\t\t\tfor (var animName in data.animations) {\n\t\t\t\tthis.play(animName, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tfor (var i = 0; i < this.assets.length; i++) {\n\t\t\tvar asset = this.assets[i];\n\n\t\t\tif (typeof asset === 'number') {\n\t\t\t\tasset = this.system.app.assets.get(asset);\n\t\t\t}\n\n\t\t\tif (!asset) continue;\n\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t}\n\n\t\tvar data = this.data;\n\t\tdelete data.animation;\n\t\tdelete data.skeleton;\n\t\tdelete data.fromSkel;\n\t\tdelete data.toSkel;\n\t\tdelete data.animEvaluator;\n\t}\n\n\tget currentTime() {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\treturn this.data.skeleton._time;\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar clips = data.animEvaluator.clips;\n\n\t\t\tif (clips.length > 0) {\n\t\t\t\treturn clips[clips.length - 1].time;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tset currentTime(currentTime) {\n\t\tvar data = this.data;\n\n\t\tif (data.skeleton) {\n\t\t\tvar skeleton = data.skeleton;\n\t\t\tskeleton.currentTime = currentTime;\n\t\t\tskeleton.addTime(0);\n\t\t\tskeleton.updateGraph();\n\t\t}\n\n\t\tif (data.animEvaluator) {\n\t\t\tvar animEvaluator = data.animEvaluator;\n\n\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\tanimEvaluator.clips[i].time = currentTime;\n\t\t\t}\n\t\t}\n\t}\n\n\tget duration() {\n\t\treturn this.data.animations[this.data.currAnim].duration;\n\t}\n\n}\n\nclass AnimationComponentData {\n\tconstructor() {\n\t\tthis.assets = [];\n\t\tthis.speed = 1.0;\n\t\tthis.loop = true;\n\t\tthis.activate = true;\n\t\tthis.enabled = true;\n\t\tthis.animations = {};\n\t\tthis.model = null;\n\t\tthis.prevAnim = null;\n\t\tthis.currAnim = null;\n\t\tthis.blending = false;\n\t\tthis.blend = 0;\n\t\tthis.blendSpeed = 0;\n\t\tthis.playing = false;\n\t\tthis.skeleton = null;\n\t\tthis.fromSkel = null;\n\t\tthis.toSkel = null;\n\t\tthis.animEvaluator = null;\n\t}\n\n}\n\nconst _schema$l = ['enabled', 'assets', 'speed', 'loop', 'activate', 'animations', 'skeleton', 'model', 'prevAnim', 'currAnim', 'fromSkel', 'toSkel', 'blending', 'blendTimeRemaining', 'playing'];\n\nclass AnimationComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'animation';\n\t\tthis.ComponentType = AnimationComponent;\n\t\tthis.DataType = AnimationComponentData;\n\t\tthis.schema = _schema$l;\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('update', this.onUpdate, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['activate', 'enabled', 'loop', 'speed', 'assets'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar key;\n\t\tthis.addComponent(clone, {});\n\t\tclone.animation.assets = entity.animation.assets.slice();\n\t\tclone.animation.data.speed = entity.animation.speed;\n\t\tclone.animation.data.loop = entity.animation.loop;\n\t\tclone.animation.data.activate = entity.animation.activate;\n\t\tclone.animation.data.enabled = entity.animation.enabled;\n\t\tvar clonedAnimations = {};\n\t\tvar animations = entity.animation.animations;\n\n\t\tfor (key in animations) {\n\t\t\tif (animations.hasOwnProperty(key)) {\n\t\t\t\tclonedAnimations[key] = animations[key];\n\t\t\t}\n\t\t}\n\n\t\tclone.animation.animations = clonedAnimations;\n\t\tvar clonedAnimationsIndex = {};\n\t\tvar animationsIndex = entity.animation.animationsIndex;\n\n\t\tfor (key in animationsIndex) {\n\t\t\tif (animationsIndex.hasOwnProperty(key)) {\n\t\t\t\tclonedAnimationsIndex[key] = animationsIndex[key];\n\t\t\t}\n\t\t}\n\n\t\tclone.animation.animationsIndex = clonedAnimationsIndex;\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && component.entity.enabled) {\n\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\tcomponentData.blend += dt * componentData.blendSpeed;\n\n\t\t\t\t\t\tif (componentData.blend >= 1.0) {\n\t\t\t\t\t\t\tcomponentData.blend = 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (componentData.playing) {\n\t\t\t\t\t\tvar skeleton = componentData.skeleton;\n\n\t\t\t\t\t\tif (skeleton !== null && componentData.model !== null) {\n\t\t\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\t\t\tskeleton.blend(componentData.fromSkel, componentData.toSkel, componentData.blend);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar delta = dt * componentData.speed;\n\t\t\t\t\t\t\t\tskeleton.addTime(delta);\n\n\t\t\t\t\t\t\t\tif (componentData.speed > 0 && skeleton._time === skeleton._animation.duration && !componentData.loop) {\n\t\t\t\t\t\t\t\t\tcomponentData.playing = false;\n\t\t\t\t\t\t\t\t} else if (componentData.speed < 0 && skeleton._time === 0 && !componentData.loop) {\n\t\t\t\t\t\t\t\t\tcomponentData.playing = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (componentData.blending && componentData.blend === 1.0) {\n\t\t\t\t\t\t\t\tskeleton.animation = componentData.toSkel._animation;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tskeleton.updateGraph();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar animEvaluator = componentData.animEvaluator;\n\n\t\t\t\t\tif (animEvaluator) {\n\t\t\t\t\t\tfor (var i = 0; i < animEvaluator.clips.length; ++i) {\n\t\t\t\t\t\t\tvar clip = animEvaluator.clips[i];\n\t\t\t\t\t\t\tclip.speed = componentData.speed;\n\n\t\t\t\t\t\t\tif (!componentData.playing) {\n\t\t\t\t\t\t\t\tclip.pause();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclip.resume();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (componentData.blending) {\n\t\t\t\t\t\t\tanimEvaluator.clips[1].blendWeight = componentData.blend;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tanimEvaluator.update(dt);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (componentData.blending && componentData.blend === 1.0) {\n\t\t\t\t\t\tcomponentData.blending = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(AnimationComponent.prototype, _schema$l);\n\nclass AnimNode {\n\tconstructor(state, parent, name, point, speed = 1) {\n\t\tthis._state = state;\n\t\tthis._parent = parent;\n\t\tthis._name = name;\n\n\t\tif (Array.isArray(point)) {\n\t\t\tthis._point = new Vec2(point[0], point[1]);\n\t\t\tthis._pointLength = this._point.length();\n\t\t} else {\n\t\t\tthis._point = point;\n\t\t\tthis._pointLength = point;\n\t\t}\n\n\t\tthis._speed = speed;\n\t\tthis._weightedSpeed = 1.0;\n\t\tthis._weight = 1.0;\n\t\tthis._animTrack = null;\n\t}\n\n\tget parent() {\n\t\treturn this._parent;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget path() {\n\t\treturn this._parent ? this._parent.path + '.' + this._name : this._name;\n\t}\n\n\tget point() {\n\t\treturn this._point;\n\t}\n\n\tget pointLength() {\n\t\treturn this._pointLength;\n\t}\n\n\tget weight() {\n\t\treturn this._parent ? this._parent.weight * this._weight : this._weight;\n\t}\n\n\tset weight(value) {\n\t\tthis._weight = value;\n\t}\n\n\tget normalizedWeight() {\n\t\tvar totalWeight = this._state.totalWeight;\n\t\tif (totalWeight === 0.0) return 0.0;\n\t\treturn this.weight / totalWeight;\n\t}\n\n\tget speed() {\n\t\treturn this._weightedSpeed * this._speed;\n\t}\n\n\tget absoluteSpeed() {\n\t\treturn Math.abs(this._speed);\n\t}\n\n\tget weightedSpeed() {\n\t\treturn this._weightedSpeed;\n\t}\n\n\tset weightedSpeed(weightedSpeed) {\n\t\tthis._weightedSpeed = weightedSpeed;\n\t}\n\n\tget animTrack() {\n\t\treturn this._animTrack;\n\t}\n\n\tset animTrack(value) {\n\t\tthis._animTrack = value;\n\t}\n\n}\n\nclass AnimBlendTree extends AnimNode {\n\tconstructor(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tsuper(state, parent, name, point);\n\t\tthis._parameters = parameters;\n\t\tthis._parameterValues = new Array(parameters.length);\n\t\tthis._children = [];\n\t\tthis._findParameter = findParameter;\n\t\tthis._syncAnimations = syncAnimations !== false;\n\t\tthis._pointCache = {};\n\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tvar child = children[i];\n\n\t\t\tif (child.children) {\n\t\t\t\tthis._children.push(createTree(child.type, this, null, name, 1.0, child.parameter ? [child.parameter] : child.parameters, child.children, createTree, findParameter));\n\t\t\t} else {\n\t\t\t\tthis._children.push(new AnimNode(state, this, child.name, child.point, child.speed));\n\t\t\t}\n\t\t}\n\t}\n\n\tget weight() {\n\t\tthis.calculateWeights();\n\t\treturn this._parent ? this._parent.weight * this._weight : this._weight;\n\t}\n\n\tget syncAnimations() {\n\t\treturn this._syncAnimations;\n\t}\n\n\tgetChild(name) {\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tif (this._children[i].name === name) return this._children[i];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateParameterValues() {\n\t\tvar paramsEqual = true;\n\n\t\tfor (let i = 0; i < this._parameterValues.length; i++) {\n\t\t\tvar updatedParameter = this._findParameter(this._parameters[i]).value;\n\n\t\t\tif (this._parameterValues[i] !== updatedParameter) {\n\t\t\t\tthis._parameterValues[i] = updatedParameter;\n\t\t\t\tparamsEqual = false;\n\t\t\t}\n\t\t}\n\n\t\treturn paramsEqual;\n\t}\n\n\tgetNodeWeightedDuration(i) {\n\t\treturn this._children[i].animTrack.duration / this._children[i].speedMultiplier * this._children[i].weight;\n\t}\n\n\tgetNodeCount() {\n\t\tvar count = 0;\n\n\t\tfor (var i = 0; i < this._children.length; i++) {\n\t\t\tvar child = this._children[i];\n\n\t\t\tif (child.constructor === AnimBlendTree) {\n\t\t\t\tcount += this._children[i].getNodeCount();\n\t\t\t} else {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\treturn count;\n\t}\n\n}\n\nclass AnimBlendTree1D extends AnimBlendTree {\n\tconstructor(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tchildren.sort((a, b) => a.point - b.point);\n\t\tsuper(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i;\n\t\tvar weightedDurationSum = 0.0;\n\t\tthis._children[0].weight = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tvar c1 = this._children[i];\n\n\t\t\tif (i !== this._children.length - 1) {\n\t\t\t\tvar c2 = this._children[i + 1];\n\n\t\t\t\tif (c1.point === c2.point) {\n\t\t\t\t\tc1.weight = 0.5;\n\t\t\t\t\tc2.weight = 0.5;\n\t\t\t\t} else if (math.between(this._parameterValues[0], c1.point, c2.point, true)) {\n\t\t\t\t\tvar child2Distance = Math.abs(c1.point - c2.point);\n\t\t\t\t\tvar parameterDistance = Math.abs(c1.point - this._parameterValues[0]);\n\t\t\t\t\tvar weight = (child2Distance - parameterDistance) / child2Distance;\n\t\t\t\t\tc1.weight = weight;\n\t\t\t\t\tc2.weight = 1.0 - weight;\n\t\t\t\t} else {\n\t\t\t\t\tc2.weight = 0.0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += c1.animTrack.duration / c1.absoluteSpeed * c1.weight;\n\t\t\t}\n\t\t}\n\n\t\tif (this._syncAnimations) {\n\t\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\t\tconst child = this._children[i];\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass AnimBlendTreeCartesian2D extends AnimBlendTree {\n\tpointDistanceCache(i, j) {\n\t\tvar pointKey = `${i}${j}`;\n\n\t\tif (!this._pointCache[pointKey]) {\n\t\t\tthis._pointCache[pointKey] = this._children[j].point.clone().sub(this._children[i].point);\n\t\t}\n\n\t\treturn this._pointCache[pointKey];\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i, j, pi, pipj, minj, result, weightSum, weightedDurationSum;\n\n\t\tAnimBlendTreeCartesian2D._p.set(...this._parameterValues);\n\n\t\tweightSum = 0.0;\n\t\tweightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tpi = child.point;\n\n\t\t\tAnimBlendTreeCartesian2D._pip.set(...AnimBlendTreeCartesian2D._p.data).sub(pi);\n\n\t\t\tminj = Number.MAX_VALUE;\n\n\t\t\tfor (j = 0; j < this._children.length; j++) {\n\t\t\t\tif (i === j) continue;\n\t\t\t\tpipj = this.pointDistanceCache(i, j);\n\t\t\t\tresult = math.clamp(1.0 - AnimBlendTreeCartesian2D._pip.dot(pipj) / pipj.lengthSq(), 0.0, 1.0);\n\t\t\t\tif (result < minj) minj = result;\n\t\t\t}\n\n\t\t\tchild.weight = minj;\n\t\t\tweightSum += minj;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = child._weight / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nAnimBlendTreeCartesian2D._p = new Vec2();\nAnimBlendTreeCartesian2D._pip = new Vec2();\n\nclass AnimBlendTreeDirectional2D extends AnimBlendTree {\n\tpointCache(i, j) {\n\t\tvar pointKey = `${i}${j}`;\n\n\t\tif (!this._pointCache[pointKey]) {\n\t\t\tthis._pointCache[pointKey] = new Vec2((this._children[j].pointLength - this._children[i].pointLength) / ((this._children[j].pointLength + this._children[i].pointLength) / 2), Vec2.angleRad(this._children[i].point, this._children[j].point) * 2.0);\n\t\t}\n\n\t\treturn this._pointCache[pointKey];\n\t}\n\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i, j, pi, pipj, minj, result, weightSum, weightedDurationSum;\n\n\t\tAnimBlendTreeDirectional2D._p.set(...this._parameterValues);\n\n\t\tvar pLength = AnimBlendTreeDirectional2D._p.length();\n\n\t\tweightSum = 0.0;\n\t\tweightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tpi = child.point;\n\t\t\tvar piLength = child.pointLength;\n\t\t\tminj = Number.MAX_VALUE;\n\n\t\t\tfor (j = 0; j < this._children.length; j++) {\n\t\t\t\tif (i === j) continue;\n\t\t\t\tvar pjLength = this._children[j].pointLength;\n\t\t\t\tpipj = this.pointCache(i, j);\n\n\t\t\t\tAnimBlendTreeDirectional2D._pip.set((pLength - piLength) / ((pjLength + piLength) / 2), Vec2.angleRad(pi, AnimBlendTreeDirectional2D._p) * 2.0);\n\n\t\t\t\tresult = math.clamp(1.0 - Math.abs(AnimBlendTreeDirectional2D._pip.dot(pipj) / pipj.lengthSq()), 0.0, 1.0);\n\t\t\t\tif (result < minj) minj = result;\n\t\t\t}\n\n\t\t\tchild.weight = minj;\n\t\t\tweightSum += minj;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = child._weight / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tconst weightedChildDuration = child.animTrack.duration / weightedDurationSum * weightSum;\n\t\t\t\tchild.weightedSpeed = child.absoluteSpeed * weightedChildDuration;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nAnimBlendTreeDirectional2D._p = new Vec2();\nAnimBlendTreeDirectional2D._pip = new Vec2();\n\nclass AnimBlendTreeDirect extends AnimBlendTree {\n\tcalculateWeights() {\n\t\tif (this.updateParameterValues()) return;\n\t\tvar i;\n\t\tvar weightSum = 0.0;\n\t\tvar weightedDurationSum = 0.0;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tweightSum += Math.max(this._parameterValues[i], 0.0);\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tconst child = this._children[i];\n\t\t\t\tweightedDurationSum += child.animTrack.duration / child.absoluteSpeed * child.weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tconst child = this._children[i];\n\t\t\tchild.weight = Math.max(this._parameterValues[i], 0.0) / weightSum;\n\n\t\t\tif (this._syncAnimations) {\n\t\t\t\tchild.weightedSpeed = child.animTrack.duration / child.absoluteSpeed / weightedDurationSum;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nconst ANIM_INTERRUPTION_NONE = 'NONE';\nconst ANIM_INTERRUPTION_PREV = 'PREV_STATE';\nconst ANIM_INTERRUPTION_NEXT = 'NEXT_STATE';\nconst ANIM_INTERRUPTION_PREV_NEXT = 'PREV_STATE_NEXT_STATE';\nconst ANIM_INTERRUPTION_NEXT_PREV = 'NEXT_STATE_PREV_STATE';\nconst ANIM_GREATER_THAN = 'GREATER_THAN';\nconst ANIM_LESS_THAN = 'LESS_THAN';\nconst ANIM_GREATER_THAN_EQUAL_TO = 'GREATER_THAN_EQUAL_TO';\nconst ANIM_LESS_THAN_EQUAL_TO = 'LESS_THAN_EQUAL_TO';\nconst ANIM_EQUAL_TO = 'EQUAL_TO';\nconst ANIM_NOT_EQUAL_TO = 'NOT_EQUAL_TO';\nconst ANIM_PARAMETER_INTEGER = 'INTEGER';\nconst ANIM_PARAMETER_FLOAT = 'FLOAT';\nconst ANIM_PARAMETER_BOOLEAN = 'BOOLEAN';\nconst ANIM_PARAMETER_TRIGGER = 'TRIGGER';\nconst ANIM_BLEND_1D = '1D';\nconst ANIM_BLEND_2D_DIRECTIONAL = '2D_DIRECTIONAL';\nconst ANIM_BLEND_2D_CARTESIAN = '2D_CARTESIAN';\nconst ANIM_BLEND_DIRECT = 'DIRECT';\nconst ANIM_STATE_START = 'START';\nconst ANIM_STATE_END = 'END';\nconst ANIM_STATE_ANY = 'ANY';\nconst ANIM_CONTROL_STATES = [ANIM_STATE_START, ANIM_STATE_END, ANIM_STATE_ANY];\n\nclass AnimState {\n\tconstructor(controller, name, speed, loop, blendTree) {\n\t\tthis._controller = controller;\n\t\tthis._name = name;\n\t\tthis._animations = {};\n\t\tthis._animationList = [];\n\t\tthis._speed = speed || 1.0;\n\t\tthis._loop = loop === undefined ? true : loop;\n\n\t\tvar findParameter = this._controller.findParameter.bind(this._controller);\n\n\t\tif (blendTree) {\n\t\t\tthis._blendTree = this._createTree(blendTree.type, this, null, name, 1.0, blendTree.parameter ? [blendTree.parameter] : blendTree.parameters, blendTree.children, blendTree.syncAnimations, this._createTree, findParameter);\n\t\t} else {\n\t\t\tthis._blendTree = new AnimNode(this, null, name, 1.0, speed);\n\t\t}\n\t}\n\n\t_createTree(type, state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter) {\n\t\tswitch (type) {\n\t\t\tcase ANIM_BLEND_1D:\n\t\t\t\treturn new AnimBlendTree1D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_2D_CARTESIAN:\n\t\t\t\treturn new AnimBlendTreeCartesian2D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_2D_DIRECTIONAL:\n\t\t\t\treturn new AnimBlendTreeDirectional2D(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\n\t\t\tcase ANIM_BLEND_DIRECT:\n\t\t\t\treturn new AnimBlendTreeDirect(state, parent, name, point, parameters, children, syncAnimations, createTree, findParameter);\n\t\t}\n\t}\n\n\t_getNodeFromPath(path) {\n\t\tvar currNode = this._blendTree;\n\n\t\tfor (var i = 1; i < path.length; i++) {\n\t\t\tcurrNode = currNode.getChild(path[i]);\n\t\t}\n\n\t\treturn currNode;\n\t}\n\n\taddAnimation(path, animTrack) {\n\t\tvar pathString = path.join('.');\n\n\t\tvar indexOfAnimation = this._animationList.findIndex(function (animation) {\n\t\t\treturn animation.path === pathString;\n\t\t});\n\n\t\tif (indexOfAnimation >= 0) {\n\t\t\tthis._animationList[indexOfAnimation].animTrack = animTrack;\n\t\t} else {\n\t\t\tvar node = this._getNodeFromPath(path);\n\n\t\t\tnode.animTrack = animTrack;\n\n\t\t\tthis._animationList.push(node);\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget animations() {\n\t\treturn this._animationList;\n\t}\n\n\tset animations(value) {\n\t\tthis._animationList = value;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = value;\n\t}\n\n\tget nodeCount() {\n\t\tif (!this._blendTree || this._blendTree.constructor === AnimNode) return 1;\n\t\treturn this._blendTree.getNodeCount();\n\t}\n\n\tget playable() {\n\t\treturn ANIM_CONTROL_STATES.indexOf(this.name) !== -1 || this.animations.length === this.nodeCount;\n\t}\n\n\tget looping() {\n\t\tif (this.animations.length > 0) {\n\t\t\tvar trackClipName = this.name + '.' + this.animations[0].animTrack.name;\n\n\t\t\tvar trackClip = this._controller.animEvaluator.findClip(trackClipName);\n\n\t\t\tif (trackClip) {\n\t\t\t\treturn trackClip.loop;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget totalWeight() {\n\t\tvar sum = 0;\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.animations.length; i++) {\n\t\t\tsum += this.animations[i].weight;\n\t\t}\n\n\t\treturn sum;\n\t}\n\n\tget timelineDuration() {\n\t\tvar duration = 0;\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.animations.length; i++) {\n\t\t\tvar animation = this.animations[i];\n\n\t\t\tif (animation.animTrack.duration > duration) {\n\t\t\t\tduration = animation.animTrack.duration;\n\t\t\t}\n\t\t}\n\n\t\treturn duration;\n\t}\n\n}\n\nclass AnimTransition {\n\tconstructor({\n\t\tfrom,\n\t\tto,\n\t\ttime = 0,\n\t\tpriority = 0,\n\t\tconditions = [],\n\t\texitTime = null,\n\t\ttransitionOffset = null,\n\t\tinterruptionSource = ANIM_INTERRUPTION_NONE\n\t}) {\n\t\tthis._from = from;\n\t\tthis._to = to;\n\t\tthis._time = time;\n\t\tthis._priority = priority;\n\t\tthis._conditions = conditions;\n\t\tthis._exitTime = exitTime;\n\t\tthis._transitionOffset = transitionOffset;\n\t\tthis._interruptionSource = interruptionSource;\n\t}\n\n\tget from() {\n\t\treturn this._from;\n\t}\n\n\tget to() {\n\t\treturn this._to;\n\t}\n\n\tset to(value) {\n\t\tthis._to = value;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tget conditions() {\n\t\treturn this._conditions;\n\t}\n\n\tget exitTime() {\n\t\treturn this._exitTime;\n\t}\n\n\tget transitionOffset() {\n\t\treturn this._transitionOffset;\n\t}\n\n\tget interruptionSource() {\n\t\treturn this._interruptionSource;\n\t}\n\n\tget hasExitTime() {\n\t\treturn !!this.exitTime;\n\t}\n\n}\n\nclass AnimController {\n\tconstructor(animEvaluator, states, transitions, parameters, activate, eventHandler) {\n\t\tthis._animEvaluator = animEvaluator;\n\t\tthis._states = {};\n\t\tthis._stateNames = [];\n\t\tthis._eventHandler = eventHandler;\n\n\t\tfor (let i = 0; i < states.length; i++) {\n\t\t\tthis._states[states[i].name] = new AnimState(this, states[i].name, states[i].speed, states[i].loop, states[i].blendTree);\n\n\t\t\tthis._stateNames.push(states[i].name);\n\t\t}\n\n\t\tthis._transitions = transitions.map(transition => {\n\t\t\treturn new AnimTransition(_extends({}, transition));\n\t\t});\n\t\tthis._findTransitionsFromStateCache = {};\n\t\tthis._findTransitionsBetweenStatesCache = {};\n\t\tthis._parameters = parameters;\n\t\tthis._previousStateName = null;\n\t\tthis._activeStateName = ANIM_STATE_START;\n\t\tthis._playing = false;\n\t\tthis._activate = activate;\n\t\tthis._currTransitionTime = 1.0;\n\t\tthis._totalTransitionTime = 1.0;\n\t\tthis._isTransitioning = false;\n\t\tthis._transitionInterruptionSource = ANIM_INTERRUPTION_NONE;\n\t\tthis._transitionPreviousStates = [];\n\t\tthis._timeInState = 0;\n\t\tthis._timeInStateBefore = 0;\n\t}\n\n\tget animEvaluator() {\n\t\treturn this._animEvaluator;\n\t}\n\n\tget activeState() {\n\t\treturn this._findState(this._activeStateName);\n\t}\n\n\tset activeState(stateName) {\n\t\tthis._activeStateName = stateName;\n\t}\n\n\tget activeStateName() {\n\t\treturn this._activeStateName;\n\t}\n\n\tget activeStateAnimations() {\n\t\treturn this.activeState.animations;\n\t}\n\n\tget previousState() {\n\t\treturn this._findState(this._previousStateName);\n\t}\n\n\tset previousState(stateName) {\n\t\tthis._previousStateName = stateName;\n\t}\n\n\tget previousStateName() {\n\t\treturn this._previousStateName;\n\t}\n\n\tget playable() {\n\t\tlet playable = true;\n\n\t\tfor (let i = 0; i < this._stateNames.length; i++) {\n\t\t\tif (!this._states[this._stateNames[i]].playable) {\n\t\t\t\tplayable = false;\n\t\t\t}\n\t\t}\n\n\t\treturn playable;\n\t}\n\n\tget playing() {\n\t\treturn this._playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._playing = value;\n\t}\n\n\tget activeStateProgress() {\n\t\treturn this._getActiveStateProgressForTime(this._timeInState);\n\t}\n\n\tget activeStateDuration() {\n\t\tif (this.activeStateName === ANIM_STATE_START || this.activeStateName === ANIM_STATE_END) return 0.0;\n\t\tlet maxDuration = 0.0;\n\n\t\tfor (let i = 0; i < this.activeStateAnimations.length; i++) {\n\t\t\tconst activeClip = this._animEvaluator.findClip(this.activeStateAnimations[i].name);\n\n\t\t\tif (activeClip) {\n\t\t\t\tmaxDuration = Math.max(maxDuration, activeClip.track.duration);\n\t\t\t}\n\t\t}\n\n\t\treturn maxDuration;\n\t}\n\n\tget activeStateCurrentTime() {\n\t\treturn this._timeInState;\n\t}\n\n\tset activeStateCurrentTime(time) {\n\t\tthis._timeInStateBefore = time;\n\t\tthis._timeInState = time;\n\n\t\tfor (let i = 0; i < this.activeStateAnimations.length; i++) {\n\t\t\tconst clip = this.animEvaluator.findClip(this.activeStateAnimations[i].name);\n\n\t\t\tif (clip) {\n\t\t\t\tclip.time = time;\n\t\t\t}\n\t\t}\n\t}\n\n\tget transitioning() {\n\t\treturn this._isTransitioning;\n\t}\n\n\tget transitionProgress() {\n\t\treturn this._currTransitionTime / this._totalTransitionTime;\n\t}\n\n\tget states() {\n\t\treturn this._stateNames;\n\t}\n\n\t_findState(stateName) {\n\t\treturn this._states[stateName];\n\t}\n\n\t_getActiveStateProgressForTime(time) {\n\t\tif (this.activeStateName === ANIM_STATE_START || this.activeStateName === ANIM_STATE_END || this.activeStateName === ANIM_STATE_ANY) return 1.0;\n\n\t\tconst activeClip = this._animEvaluator.findClip(this.activeStateAnimations[0].name);\n\n\t\tif (activeClip) {\n\t\t\treturn time / activeClip.track.duration;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_findTransitionsFromState(stateName) {\n\t\tlet transitions = this._findTransitionsFromStateCache[stateName];\n\n\t\tif (!transitions) {\n\t\t\ttransitions = this._transitions.filter(function (transition) {\n\t\t\t\treturn transition.from === stateName;\n\t\t\t});\n\t\t\ttransitions.sort(function (a, b) {\n\t\t\t\treturn a.priority < b.priority;\n\t\t\t});\n\t\t\tthis._findTransitionsFromStateCache[stateName] = transitions;\n\t\t}\n\n\t\treturn transitions;\n\t}\n\n\t_findTransitionsBetweenStates(sourceStateName, destinationStateName) {\n\t\tlet transitions = this._findTransitionsBetweenStatesCache[sourceStateName + '->' + destinationStateName];\n\n\t\tif (!transitions) {\n\t\t\ttransitions = this._transitions.filter(function (transition) {\n\t\t\t\treturn transition.from === sourceStateName && transition.to === destinationStateName;\n\t\t\t});\n\t\t\ttransitions.sort(function (a, b) {\n\t\t\t\treturn a.priority < b.priority;\n\t\t\t});\n\t\t\tthis._findTransitionsBetweenStatesCache[sourceStateName + '->' + destinationStateName] = transitions;\n\t\t}\n\n\t\treturn transitions;\n\t}\n\n\t_transitionHasConditionsMet(transition) {\n\t\tlet conditionsMet = true;\n\n\t\tfor (let i = 0; i < transition.conditions.length; i++) {\n\t\t\tconst condition = transition.conditions[i];\n\t\t\tconst parameter = this.findParameter(condition.parameterName);\n\n\t\t\tswitch (condition.predicate) {\n\t\t\t\tcase ANIM_GREATER_THAN:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value > condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_LESS_THAN:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value < condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_GREATER_THAN_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value >= condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_LESS_THAN_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value <= condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value === condition.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ANIM_NOT_EQUAL_TO:\n\t\t\t\t\tconditionsMet = conditionsMet && parameter.value !== condition.value;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!conditionsMet) return conditionsMet;\n\t\t}\n\n\t\treturn conditionsMet;\n\t}\n\n\t_findTransition(from, to) {\n\t\tlet transitions = [];\n\n\t\tif (from && to) {\n\t\t\ttransitions.concat(this._findTransitionsBetweenStates(from, to));\n\t\t} else {\n\t\t\tif (!this._isTransitioning) {\n\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t} else {\n\t\t\t\tswitch (this._transitionInterruptionSource) {\n\t\t\t\t\tcase ANIM_INTERRUPTION_PREV:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_NEXT:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_PREV_NEXT:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ANIM_INTERRUPTION_NEXT_PREV:\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._activeStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(this._previousStateName));\n\t\t\t\t\t\ttransitions = transitions.concat(this._findTransitionsFromState(ANIM_STATE_ANY));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttransitions = transitions.filter(function (transition) {\n\t\t\tif (transition.to === this.activeStateName) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (transition.hasExitTime) {\n\t\t\t\tlet progressBefore = this._getActiveStateProgressForTime(this._timeInStateBefore);\n\n\t\t\t\tlet progress = this._getActiveStateProgressForTime(this._timeInState);\n\n\t\t\t\tif (transition.exitTime < 1.0 && this.activeState.loop) {\n\t\t\t\t\tprogressBefore -= Math.floor(progressBefore);\n\t\t\t\t\tprogress -= Math.floor(progress);\n\t\t\t\t}\n\n\t\t\t\tif (!(transition.exitTime > progressBefore && transition.exitTime <= progress)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._transitionHasConditionsMet(transition);\n\t\t}.bind(this));\n\n\t\tif (transitions.length > 0) {\n\t\t\tconst transition = transitions[0];\n\n\t\t\tif (transition.to === ANIM_STATE_END) {\n\t\t\t\tconst startTransition = this._findTransitionsFromState(ANIM_STATE_START)[0];\n\n\t\t\t\ttransition.to = startTransition.to;\n\t\t\t}\n\n\t\t\treturn transition;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tupdateStateFromTransition(transition) {\n\t\tlet state;\n\t\tlet animation;\n\t\tlet clip;\n\t\tthis.previousState = transition.from;\n\t\tthis.activeState = transition.to;\n\n\t\tfor (let i = 0; i < transition.conditions.length; i++) {\n\t\t\tconst condition = transition.conditions[i];\n\t\t\tconst parameter = this.findParameter(condition.parameterName);\n\n\t\t\tif (parameter.type === ANIM_PARAMETER_TRIGGER) {\n\t\t\t\tparameter.value = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.previousState) {\n\t\t\tif (!this._isTransitioning) {\n\t\t\t\tthis._transitionPreviousStates = [];\n\t\t\t}\n\n\t\t\tthis._transitionPreviousStates.push({\n\t\t\t\tname: this._previousStateName,\n\t\t\t\tweight: 1\n\t\t\t});\n\n\t\t\tconst interpolatedTime = Math.min(this._currTransitionTime / this._totalTransitionTime, 1.0);\n\n\t\t\tfor (let i = 0; i < this._transitionPreviousStates.length; i++) {\n\t\t\t\tif (!this._isTransitioning) {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight = 1.0;\n\t\t\t\t} else if (i !== this._transitionPreviousStates.length - 1) {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight *= 1.0 - interpolatedTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._transitionPreviousStates[i].weight = interpolatedTime;\n\t\t\t\t}\n\n\t\t\t\tstate = this._findState(this._transitionPreviousStates[i].name);\n\n\t\t\t\tfor (let j = 0; j < state.animations.length; j++) {\n\t\t\t\t\tanimation = state.animations[j];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name + '.previous.' + i);\n\n\t\t\t\t\tif (!clip) {\n\t\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\t\t\t\t\t\tclip.name = animation.name + '.previous.' + i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (i !== this._transitionPreviousStates.length - 1) {\n\t\t\t\t\t\tclip.pause();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._isTransitioning = true;\n\t\tthis._totalTransitionTime = transition.time;\n\t\tthis._currTransitionTime = 0;\n\t\tthis._transitionInterruptionSource = transition.interruptionSource;\n\t\tconst activeState = this.activeState;\n\t\tconst hasTransitionOffset = transition.transitionOffset && transition.transitionOffset > 0.0 && transition.transitionOffset < 1.0;\n\t\tlet timeInState = 0;\n\t\tlet timeInStateBefore = 0;\n\n\t\tif (hasTransitionOffset) {\n\t\t\tconst offsetTime = activeState.timelineDuration * transition.transitionOffset;\n\t\t\ttimeInState = offsetTime;\n\t\t\ttimeInStateBefore = offsetTime;\n\t\t}\n\n\t\tthis._timeInState = timeInState;\n\t\tthis._timeInStateBefore = timeInStateBefore;\n\n\t\tfor (let i = 0; i < activeState.animations.length; i++) {\n\t\t\tclip = this._animEvaluator.findClip(activeState.animations[i].name);\n\n\t\t\tif (!clip) {\n\t\t\t\tconst speed = Number.isFinite(activeState.animations[i].speed) ? activeState.animations[i].speed : activeState.speed;\n\t\t\t\tclip = new AnimClip(activeState.animations[i].animTrack, this._timeInState, speed, true, activeState.loop, this._eventHandler);\n\t\t\t\tclip.name = activeState.animations[i].name;\n\n\t\t\t\tthis._animEvaluator.addClip(clip);\n\t\t\t} else {\n\t\t\t\tclip.reset();\n\t\t\t}\n\n\t\t\tif (transition.time > 0) {\n\t\t\t\tclip.blendWeight = 0.0;\n\t\t\t} else {\n\t\t\t\tclip.blendWeight = activeState.animations[i].normalizedWeight;\n\t\t\t}\n\n\t\t\tclip.play();\n\n\t\t\tif (hasTransitionOffset) {\n\t\t\t\tclip.time = activeState.timelineDuration * transition.transitionOffset;\n\t\t\t} else {\n\t\t\t\tconst startTime = activeState.speed >= 0 ? 0 : this.activeStateDuration;\n\t\t\t\tclip.time = startTime;\n\t\t\t}\n\t\t}\n\t}\n\n\t_transitionToState(newStateName) {\n\t\tif (!this._findState(newStateName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet transition = this._findTransition(this._activeStateName, newStateName);\n\n\t\tif (!transition) {\n\t\t\tthis._animEvaluator.removeClips();\n\n\t\t\ttransition = new AnimTransition({\n\t\t\t\tfrom: null,\n\t\t\t\tto: newStateName\n\t\t\t});\n\t\t}\n\n\t\tthis.updateStateFromTransition(transition);\n\t}\n\n\tassignAnimation(pathString, animTrack, speed, loop) {\n\t\tconst path = pathString.split('.');\n\n\t\tlet state = this._findState(path[0]);\n\n\t\tif (!state) {\n\t\t\tstate = new AnimState(this, path[0], 1.0);\n\t\t\tthis._states[path[0]] = state;\n\n\t\t\tthis._stateNames.push(path[0]);\n\t\t}\n\n\t\tstate.addAnimation(path, animTrack);\n\n\t\tif (speed !== undefined) {\n\t\t\tstate.speed = speed;\n\t\t}\n\n\t\tif (loop !== undefined) {\n\t\t\tstate.loop = loop;\n\t\t}\n\n\t\tif (!this._playing && this._activate && this.playable) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tremoveNodeAnimations(nodeName) {\n\t\tif (ANIM_CONTROL_STATES.indexOf(nodeName) !== -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state = this._findState(nodeName);\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\tstate.animations = [];\n\t\treturn true;\n\t}\n\n\tplay(stateName) {\n\t\tif (stateName) {\n\t\t\tthis._transitionToState(stateName);\n\t\t}\n\n\t\tthis._playing = true;\n\t}\n\n\tpause() {\n\t\tthis._playing = false;\n\t}\n\n\treset() {\n\t\tthis._previousStateName = null;\n\t\tthis._activeStateName = ANIM_STATE_START;\n\t\tthis._playing = false;\n\t\tthis._currTransitionTime = 1.0;\n\t\tthis._totalTransitionTime = 1.0;\n\t\tthis._isTransitioning = false;\n\t\tthis._timeInState = 0;\n\t\tthis._timeInStateBefore = 0;\n\n\t\tthis._animEvaluator.removeClips();\n\t}\n\n\trebind() {\n\t\tthis._animEvaluator.rebind();\n\t}\n\n\tupdate(dt) {\n\t\tif (!this._playing) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet state;\n\t\tlet animation;\n\t\tlet clip;\n\t\tthis._timeInStateBefore = this._timeInState;\n\t\tthis._timeInState += dt;\n\n\t\tconst transition = this._findTransition(this._activeStateName);\n\n\t\tif (transition) this.updateStateFromTransition(transition);\n\n\t\tif (this._isTransitioning) {\n\t\t\tthis._currTransitionTime += dt;\n\n\t\t\tif (this._currTransitionTime <= this._totalTransitionTime) {\n\t\t\t\tconst interpolatedTime = this._currTransitionTime / this._totalTransitionTime;\n\n\t\t\t\tfor (let i = 0; i < this._transitionPreviousStates.length; i++) {\n\t\t\t\t\tstate = this._findState(this._transitionPreviousStates[i].name);\n\t\t\t\t\tconst stateWeight = this._transitionPreviousStates[i].weight;\n\n\t\t\t\t\tfor (let j = 0; j < state.animations.length; j++) {\n\t\t\t\t\t\tanimation = state.animations[j];\n\t\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name + '.previous.' + i);\n\n\t\t\t\t\t\tif (clip) {\n\t\t\t\t\t\t\tclip.blendWeight = (1.0 - interpolatedTime) * animation.normalizedWeight * stateWeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tthis._animEvaluator.findClip(animation.name).blendWeight = interpolatedTime * animation.normalizedWeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._isTransitioning = false;\n\t\t\t\tconst activeClips = this.activeStateAnimations.length;\n\t\t\t\tconst totalClips = this._animEvaluator.clips.length;\n\n\t\t\t\tfor (let i = 0; i < totalClips - activeClips; i++) {\n\t\t\t\t\tthis._animEvaluator.removeClip(0);\n\t\t\t\t}\n\n\t\t\t\tthis._transitionPreviousStates = [];\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\n\t\t\t\t\tif (clip) {\n\t\t\t\t\t\tclip.blendWeight = animation.normalizedWeight;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.activeState._blendTree.constructor !== AnimNode) {\n\t\t\t\tstate = this.activeState;\n\n\t\t\t\tfor (let i = 0; i < state.animations.length; i++) {\n\t\t\t\t\tanimation = state.animations[i];\n\t\t\t\t\tclip = this._animEvaluator.findClip(animation.name);\n\n\t\t\t\t\tif (clip) {\n\t\t\t\t\t\tclip.blendWeight = animation.normalizedWeight;\n\n\t\t\t\t\t\tif (animation.parent.syncAnimations) {\n\t\t\t\t\t\t\tclip.speed = animation.speed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._animEvaluator.update(dt);\n\t}\n\n\tfindParameter(name) {\n\t\treturn this._parameters[name];\n\t}\n\n}\n\nconst v2 = new Vec2();\nconst v3 = new Vec3();\nconst v4 = new Vec4();\nconst c = new Color();\nconst q = new Quat();\n\nclass AnimComponentBinder extends DefaultAnimBinder {\n\tconstructor(animComponent, graph) {\n\t\tsuper(graph);\n\t\tthis.animComponent = animComponent;\n\t}\n\n\tstatic _packFloat(values) {\n\t\treturn values[0];\n\t}\n\n\tstatic _packBoolean(values) {\n\t\treturn !!values[0];\n\t}\n\n\tstatic _packVec2(values) {\n\t\tv2.x = values[0];\n\t\tv2.y = values[1];\n\t\treturn v2;\n\t}\n\n\tstatic _packVec3(values) {\n\t\tv3.x = values[0];\n\t\tv3.y = values[1];\n\t\tv3.z = values[2];\n\t\treturn v3;\n\t}\n\n\tstatic _packVec4(values) {\n\t\tv4.x = values[0];\n\t\tv4.y = values[1];\n\t\tv4.z = values[2];\n\t\tv4.w = values[3];\n\t\treturn v4;\n\t}\n\n\tstatic _packColor(values) {\n\t\tc.r = values[0];\n\t\tc.g = values[1];\n\t\tc.b = values[2];\n\t\tc.a = values[3];\n\t\treturn c;\n\t}\n\n\tstatic _packQuat(values) {\n\t\tq.x = values[0];\n\t\tq.y = values[1];\n\t\tq.z = values[2];\n\t\tq.w = values[3];\n\t\treturn q;\n\t}\n\n\tresolve(path) {\n\t\tvar encodedPath = AnimBinder.encode(path.entityPath, path.component, path.propertyPath);\n\t\tvar target = this.targetCache[encodedPath];\n\t\tif (target) return target;\n\t\tvar entity;\n\t\tvar propertyComponent;\n\t\tvar targetPath;\n\n\t\tswitch (path.component) {\n\t\t\tcase 'entity':\n\t\t\t\tentity = this._getEntityFromHierarchy(path.entityPath);\n\t\t\t\ttargetPath = AnimBinder.encode(entity.path, 'entity', path.propertyPath);\n\t\t\t\tpropertyComponent = entity;\n\t\t\t\tbreak;\n\n\t\t\tcase 'graph':\n\t\t\t\tpropertyComponent = this.findNode(path);\n\t\t\t\tif (!propertyComponent) return null;\n\t\t\t\ttargetPath = AnimBinder.encode(propertyComponent.path, 'graph', path.propertyPath);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tentity = this._getEntityFromHierarchy(path.entityPath);\n\t\t\t\tpropertyComponent = entity.findComponent(path.component);\n\t\t\t\tif (!propertyComponent) return null;\n\t\t\t\ttargetPath = AnimBinder.encode(entity.path, path.component, path.propertyPath);\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttarget = this._createAnimTargetForProperty(propertyComponent, path.propertyPath, targetPath);\n\t\tthis.targetCache[encodedPath] = target;\n\t\treturn target;\n\t}\n\n\tupdate(deltaTime) {\n\t\tvar activeNodes = this.activeNodes;\n\n\t\tif (activeNodes) {\n\t\t\tfor (var i = 0; i < activeNodes.length; i++) {\n\t\t\t\tactiveNodes[i]._dirtifyLocal();\n\t\t\t}\n\t\t}\n\t}\n\n\t_getEntityFromHierarchy(entityHierarchy) {\n\t\tif (!this.animComponent.entity.name === entityHierarchy[0]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar currEntity = this.animComponent.entity;\n\n\t\tif (entityHierarchy.length === 1) {\n\t\t\treturn currEntity;\n\t\t}\n\n\t\treturn currEntity._parent.findByPath(entityHierarchy);\n\t}\n\n\t_resolvePath(object, path, resolveLeaf) {\n\t\tvar steps = path.length - (resolveLeaf ? 0 : 1);\n\n\t\tfor (var i = 0; i < steps; i++) {\n\t\t\tobject = object[path[i]];\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t_setter(object, path, packFunc) {\n\t\tvar obj = this._resolvePath(object, path);\n\n\t\tvar key = path[path.length - 1];\n\t\tvar setterFunc = \"set\" + key.substring(0, 1).toUpperCase() + key.substring(1);\n\n\t\tif (obj[setterFunc]) {\n\t\t\tvar func = obj[setterFunc].bind(obj);\n\t\t\treturn function (values) {\n\t\t\t\tfunc(packFunc(values));\n\t\t\t};\n\t\t}\n\n\t\tvar prop = obj[key];\n\n\t\tif (typeof prop === 'object' && prop.hasOwnProperty('copy')) {\n\t\t\treturn function (values) {\n\t\t\t\tprop.copy(packFunc(values));\n\t\t\t};\n\t\t}\n\n\t\tif ([Vec2, Vec3, Vec4, Color, Quat].indexOf(obj.constructor) !== -1 && path.length > 1) {\n\t\t\tvar parent = path.length > 2 ? this._resolvePath(object, path.slice(0, -1)) : object;\n\t\t\tvar objKey = path[path.length - 2];\n\t\t\treturn function (values) {\n\t\t\t\tobj[key] = packFunc(values);\n\t\t\t\tparent[objKey] = obj;\n\t\t\t};\n\t\t}\n\n\t\treturn function (values) {\n\t\t\tobj[key] = packFunc(values);\n\t\t};\n\t}\n\n\t_createAnimTargetForProperty(propertyComponent, propertyHierarchy, targetPath) {\n\t\tif (this.handlers && propertyHierarchy[0] === 'weights') {\n\t\t\treturn this.handlers.weights(propertyComponent);\n\t\t} else if (this.handlers && propertyHierarchy[0] === 'material' && propertyHierarchy.length === 2) {\n\t\t\tvar materialPropertyName = propertyHierarchy[1];\n\n\t\t\tif (materialPropertyName.indexOf('Map') === materialPropertyName.length - 3) {\n\t\t\t\treturn this.handlers.materialTexture(propertyComponent, materialPropertyName);\n\t\t\t}\n\t\t}\n\n\t\tvar property = this._resolvePath(propertyComponent, propertyHierarchy, true);\n\n\t\tif (typeof property === 'undefined') return null;\n\t\tvar setter;\n\t\tvar animDataType;\n\t\tvar animDataComponents;\n\n\t\tif (typeof property === 'number') {\n\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packFloat);\n\t\t\tanimDataType = 'vector';\n\t\t\tanimDataComponents = 1;\n\t\t} else if (typeof property === 'boolean') {\n\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packBoolean);\n\t\t\tanimDataType = 'vector';\n\t\t\tanimDataComponents = 1;\n\t\t} else if (typeof property === 'object') {\n\t\t\tswitch (property.constructor) {\n\t\t\t\tcase Vec2:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec2);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 2;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Vec3:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec3);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 3;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Vec4:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packVec4);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Color:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packColor);\n\t\t\t\t\tanimDataType = 'vector';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Quat:\n\t\t\t\t\tsetter = this._setter(propertyComponent, propertyHierarchy, AnimComponentBinder._packQuat);\n\t\t\t\t\tanimDataType = 'quaternion';\n\t\t\t\t\tanimDataComponents = 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tif (propertyHierarchy.indexOf('material') !== -1) {\n\t\t\treturn new AnimTarget(function (values) {\n\t\t\t\tsetter(values);\n\t\t\t\tpropertyComponent.material.update();\n\t\t\t}, animDataType, animDataComponents, targetPath);\n\t\t}\n\n\t\treturn new AnimTarget(setter, animDataType, animDataComponents, targetPath);\n\t}\n\n\trebind() {\n\t\tthis.targetCache = {};\n\n\t\tif (this.animComponent.rootBone) {\n\t\t\tthis.graph = this.animComponent.rootBone;\n\t\t} else {\n\t\t\tthis.graph = this.animComponent.entity;\n\t\t}\n\n\t\tvar nodes = {};\n\n\t\tvar flatten = function flatten(node) {\n\t\t\tnodes[node.name] = node;\n\n\t\t\tfor (var i = 0; i < node.children.length; ++i) {\n\t\t\t\tflatten(node.children[i]);\n\t\t\t}\n\t\t};\n\n\t\tflatten(this.graph);\n\t\tthis.nodes = nodes;\n\t}\n\n}\n\nclass AnimComponentLayer {\n\tconstructor(name, controller, component) {\n\t\tthis._name = name;\n\t\tthis._controller = controller;\n\t\tthis._component = component;\n\t}\n\n\tplay(name) {\n\t\tthis._controller.play(name);\n\t}\n\n\tpause() {\n\t\tthis._controller.pause();\n\t}\n\n\treset() {\n\t\tthis._controller.reset();\n\t}\n\n\trebind() {\n\t\tthis._controller.rebind();\n\t}\n\n\tupdate(dt) {\n\t\tthis._controller.update(dt);\n\t}\n\n\tassignAnimation(nodeName, animTrack, speed, loop) {\n\t\tif (animTrack.constructor !== AnimTrack) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._controller.assignAnimation(nodeName, animTrack, speed, loop);\n\n\t\tif (this._component.activate && this._component.playable) {\n\t\t\tthis._component.playing = true;\n\t\t}\n\t}\n\n\tremoveNodeAnimations(nodeName) {\n\t\tif (this._controller.removeNodeAnimations(nodeName)) {\n\t\t\tthis._component.playing = false;\n\t\t}\n\t}\n\n\ttransition(to, time = 0, transitionOffset = null) {\n\t\tthis._controller.updateStateFromTransition(new AnimTransition({\n\t\t\tfrom: this._controller.activeStateName,\n\t\t\tto,\n\t\t\ttime,\n\t\t\ttransitionOffset\n\t\t}));\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget playing() {\n\t\treturn this._controller.playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._controller.playing = value;\n\t}\n\n\tget playable() {\n\t\treturn this._controller.playable;\n\t}\n\n\tget activeState() {\n\t\treturn this._controller.activeStateName;\n\t}\n\n\tget previousState() {\n\t\treturn this._controller.previousStateName;\n\t}\n\n\tget activeStateProgress() {\n\t\treturn this._controller.activeStateProgress;\n\t}\n\n\tget activeStateDuration() {\n\t\treturn this._controller.activeStateDuration;\n\t}\n\n\tget activeStateCurrentTime() {\n\t\treturn this._controller.activeStateCurrentTime;\n\t}\n\n\tset activeStateCurrentTime(time) {\n\t\tthis._controller.activeStateCurrentTime = time;\n\t}\n\n\tget transitioning() {\n\t\treturn this._controller.transitioning;\n\t}\n\n\tget transitionProgress() {\n\t\tif (this.transitioning) {\n\t\t\treturn this._controller.transitionProgress;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tget states() {\n\t\treturn this._controller.states;\n\t}\n\n}\n\nclass AnimComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\n\t\tthis._onStateGraphAssetChangeEvent = asset => {\n\t\t\tthis._stateGraph = new AnimStateGraph(asset._data);\n\t\t\tthis.loadStateGraph(this._stateGraph);\n\t\t};\n\n\t\tthis._stateGraphAsset = null;\n\t\tthis._animationAssets = {};\n\t\tthis._speed = 1.0;\n\t\tthis._activate = true;\n\t\tthis._playing = false;\n\t\tthis._rootBone = null;\n\t\tthis._stateGraph = null;\n\t\tthis._layers = [];\n\t\tthis._layerIndices = {};\n\t\tthis._parameters = {};\n\t}\n\n\tget stateGraphAsset() {\n\t\treturn this._stateGraphAsset;\n\t}\n\n\tset stateGraphAsset(value) {\n\t\tif (value === null) {\n\t\t\tthis.removeStateGraph();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._stateGraphAsset) this.system.app.assets.get(this._stateGraphAsset).off('change', this._onStateGraphAssetChangeEvent);\n\n\t\tlet _id;\n\n\t\tlet _asset;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t\t_asset = this.system.app.assets.get(_id);\n\n\t\t\tif (!_asset) {\n\t\t\t\tthis.system.app.assets.add(value);\n\t\t\t\t_asset = this.system.app.assets.get(_id);\n\t\t\t}\n\t\t} else {\n\t\t\t_id = value;\n\t\t\t_asset = this.system.app.assets.get(_id);\n\t\t}\n\n\t\tif (!_asset || this._stateGraphAsset === _id) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_asset.resource) {\n\t\t\tthis._stateGraph = _asset.resource;\n\t\t\tthis.loadStateGraph(this._stateGraph);\n\n\t\t\t_asset.on('change', this._onStateGraphAssetChangeEvent);\n\t\t} else {\n\t\t\t_asset.once('load', asset => {\n\t\t\t\tthis._stateGraph = asset.resource;\n\t\t\t\tthis.loadStateGraph(this._stateGraph);\n\t\t\t});\n\n\t\t\t_asset.on('change', this._onStateGraphAssetChangeEvent);\n\n\t\t\tthis.system.app.assets.load(_asset);\n\t\t}\n\n\t\tthis._stateGraphAsset = _id;\n\t}\n\n\tget animationAssets() {\n\t\treturn this._animationAssets;\n\t}\n\n\tset animationAssets(value) {\n\t\tthis._animationAssets = value;\n\t\tthis.loadAnimationAssets();\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget activate() {\n\t\treturn this._activate;\n\t}\n\n\tset activate(value) {\n\t\tthis._activate = value;\n\t}\n\n\tget playing() {\n\t\treturn this._playing;\n\t}\n\n\tset playing(value) {\n\t\tthis._playing = value;\n\t}\n\n\tget rootBone() {\n\t\treturn this._rootBone;\n\t}\n\n\tset rootBone(value) {\n\t\tif (typeof value === 'string') {\n\t\t\tconst entity = this.entity.root.findByGuid(value);\n\t\t\tthis._rootBone = entity;\n\t\t} else if ((value == null ? void 0 : value.constructor.name) === 'Entity') {\n\t\t\tthis._rootBone = value;\n\t\t} else {\n\t\t\tthis._rootBone = null;\n\t\t}\n\n\t\tthis.rebind();\n\t}\n\n\tget stateGraph() {\n\t\treturn this._stateGraph;\n\t}\n\n\tset stateGraph(value) {\n\t\tthis._stateGraph = value;\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tthis._layers = value;\n\t}\n\n\tget layerIndicies() {\n\t\treturn this._layerIndicies;\n\t}\n\n\tset layerIndicies(value) {\n\t\tthis._layerIndicies = value;\n\t}\n\n\tget parameters() {\n\t\treturn this._parameters;\n\t}\n\n\tset parameters(value) {\n\t\tthis._parameters = value;\n\t}\n\n\tget playable() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tif (!this._layers[i].playable) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget baseLayer() {\n\t\tif (this._layers.length > 0) {\n\t\t\treturn this._layers[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_addLayer(name, states, transitions, order) {\n\t\tlet graph;\n\n\t\tif (this.rootBone) {\n\t\t\tgraph = this.rootBone;\n\t\t} else {\n\t\t\tgraph = this.entity;\n\t\t}\n\n\t\tconst animBinder = new AnimComponentBinder(this, graph);\n\t\tconst animEvaluator = new AnimEvaluator(animBinder);\n\t\tconst controller = new AnimController(animEvaluator, states, transitions, this._parameters, this._activate, this);\n\n\t\tthis._layers.push(new AnimComponentLayer(name, controller, this));\n\n\t\tthis._layerIndices[name] = order;\n\t}\n\n\taddLayer(layerName) {\n\t\tconst layer = this.findAnimationLayer(layerName);\n\t\tif (layer) return layer;\n\t\tconst states = [{\n\t\t\t\"name\": \"START\",\n\t\t\t\"speed\": 1\n\t\t}];\n\t\tconst transitions = [];\n\n\t\tthis._addLayer(layerName, states, transitions, this._layers.length);\n\t}\n\n\tloadStateGraph(stateGraph) {\n\t\tthis._stateGraph = stateGraph;\n\t\tthis._parameters = {};\n\t\tconst paramKeys = Object.keys(stateGraph.parameters);\n\n\t\tfor (let i = 0; i < paramKeys.length; i++) {\n\t\t\tconst paramKey = paramKeys[i];\n\t\t\tthis._parameters[paramKey] = {\n\t\t\t\ttype: stateGraph.parameters[paramKey].type,\n\t\t\t\tvalue: stateGraph.parameters[paramKey].value\n\t\t\t};\n\t\t}\n\n\t\tthis._layers = [];\n\n\t\tfor (let i = 0; i < stateGraph.layers.length; i++) {\n\t\t\tconst layer = stateGraph.layers[i];\n\n\t\t\tthis._addLayer.bind(this)(layer.name, layer.states, layer.transitions, i);\n\t\t}\n\n\t\tthis.setupAnimationAssets();\n\t}\n\n\tsetupAnimationAssets() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = this._layers[i];\n\t\t\tconst layerName = layer.name;\n\n\t\t\tfor (let j = 0; j < layer.states.length; j++) {\n\t\t\t\tconst stateName = layer.states[j];\n\n\t\t\t\tif (ANIM_CONTROL_STATES.indexOf(stateName) === -1) {\n\t\t\t\t\tconst stateKey = layerName + ':' + stateName;\n\n\t\t\t\t\tif (!this._animationAssets[stateKey]) {\n\t\t\t\t\t\tthis._animationAssets[stateKey] = {\n\t\t\t\t\t\t\tasset: null\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loadAnimationAssets();\n\t}\n\n\tloadAnimationAssets() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = this._layers[i];\n\n\t\t\tfor (let j = 0; j < layer.states.length; j++) {\n\t\t\t\tconst stateName = layer.states[j];\n\t\t\t\tif (ANIM_CONTROL_STATES.indexOf(stateName) !== -1) continue;\n\t\t\t\tconst animationAsset = this._animationAssets[layer.name + ':' + stateName];\n\n\t\t\t\tif (!animationAsset || !animationAsset.asset) {\n\t\t\t\t\tthis.removeNodeAnimations(stateName, layer.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst assetId = animationAsset.asset;\n\t\t\t\tconst asset = this.system.app.assets.get(assetId);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tif (asset.resource) {\n\t\t\t\t\t\tconst animTrack = asset.resource;\n\n\t\t\t\t\t\tif (asset.data.events) {\n\t\t\t\t\t\t\tanimTrack.events = new AnimEvents(Object.values(asset.data.events));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.findAnimationLayer(layer.name).assignAnimation(stateName, animTrack);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasset.once('load', function (layerName, stateName) {\n\t\t\t\t\t\t\treturn function (asset) {\n\t\t\t\t\t\t\t\tthis.findAnimationLayer(layerName).assignAnimation(stateName, asset.resource);\n\t\t\t\t\t\t\t}.bind(this);\n\t\t\t\t\t\t}.bind(this)(layer.name, stateName));\n\t\t\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveStateGraph() {\n\t\tthis._stateGraph = null;\n\t\tthis._stateGraphAsset = null;\n\t\tthis._animationAssets = {};\n\t\tthis._layers = [];\n\t\tthis._layerIndices = {};\n\t\tthis._parameters = {};\n\t\tthis._playing = false;\n\t}\n\n\tresetStateGraph() {\n\t\tif (this.stateGraphAsset) {\n\t\t\tconst stateGraph = this.system.app.assets.get(this.stateGraphAsset).resource;\n\t\t\tthis.loadStateGraph(stateGraph);\n\t\t} else {\n\t\t\tthis.removeStateGraph();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis._parameters = Object.assign({}, this._stateGraph.parameters);\n\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tconst layerPlaying = this._layers[i].playing;\n\n\t\t\tthis._layers[i].reset();\n\n\t\t\tthis._layers[i].playing = layerPlaying;\n\t\t}\n\t}\n\n\trebind() {\n\t\tfor (let i = 0; i < this._layers.length; i++) {\n\t\t\tthis._layers[i].rebind();\n\t\t}\n\t}\n\n\tfindAnimationLayer(layerName) {\n\t\tconst layerIndex = this._layerIndices[layerName];\n\t\treturn this._layers[layerIndex] || null;\n\t}\n\n\taddAnimationState(nodeName, animTrack, speed = 1, loop = true, layerName = 'Base') {\n\t\tif (!this._stateGraph) {\n\t\t\tthis.loadStateGraph(new AnimStateGraph({\n\t\t\t\t\"layers\": [{\n\t\t\t\t\t\"name\": layerName,\n\t\t\t\t\t\"states\": [{\n\t\t\t\t\t\t\"name\": \"START\",\n\t\t\t\t\t\t\"speed\": 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\t\"name\": nodeName,\n\t\t\t\t\t\t\"speed\": speed,\n\t\t\t\t\t\t\"loop\": loop,\n\t\t\t\t\t\t\"defaultState\": true\n\t\t\t\t\t}],\n\t\t\t\t\t\"transitions\": [{\n\t\t\t\t\t\t\"from\": 'START',\n\t\t\t\t\t\t\"to\": nodeName\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\t\"parameters\": {}\n\t\t\t}));\n\t\t}\n\n\t\tconst layer = this.findAnimationLayer(layerName);\n\n\t\tif (layer) {\n\t\t\tlayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t\t} else {\n\t\t\tvar _this$addLayer;\n\n\t\t\t(_this$addLayer = this.addLayer(layerName)) == null ? void 0 : _this$addLayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t\t}\n\t}\n\n\tassignAnimation(nodeName, animTrack, layerName, speed = 1, loop = true) {\n\t\tif (!this._stateGraph) {\n\t\t\tthis.loadStateGraph(new AnimStateGraph({\n\t\t\t\t\"layers\": [{\n\t\t\t\t\t\"name\": \"Base\",\n\t\t\t\t\t\"states\": [{\n\t\t\t\t\t\t\"name\": \"START\",\n\t\t\t\t\t\t\"speed\": 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\t\"name\": nodeName,\n\t\t\t\t\t\t\"speed\": speed,\n\t\t\t\t\t\t\"loop\": loop,\n\t\t\t\t\t\t\"defaultState\": true\n\t\t\t\t\t}],\n\t\t\t\t\t\"transitions\": [{\n\t\t\t\t\t\t\"from\": 'START',\n\t\t\t\t\t\t\"to\": nodeName\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\t\"parameters\": {}\n\t\t\t}));\n\t\t\tthis.baseLayer.assignAnimation(nodeName, animTrack);\n\t\t\treturn;\n\t\t}\n\n\t\tconst layer = layerName ? this.findAnimationLayer(layerName) : this.baseLayer;\n\n\t\tif (!layer) {\n\t\t\treturn;\n\t\t}\n\n\t\tlayer.assignAnimation(nodeName, animTrack, speed, loop);\n\t}\n\n\tremoveNodeAnimations(nodeName, layerName) {\n\t\tconst layer = layerName ? this.findAnimationLayer(layerName) : this.baseLayer;\n\n\t\tif (!layer) {\n\t\t\treturn;\n\t\t}\n\n\t\tlayer.removeNodeAnimations(nodeName);\n\t}\n\n\tgetParameterValue(name, type) {\n\t\tconst param = this._parameters[name];\n\n\t\tif (param && param.type === type) {\n\t\t\treturn param.value;\n\t\t}\n\t}\n\n\tsetParameterValue(name, type, value) {\n\t\tconst param = this._parameters[name];\n\n\t\tif (param && param.type === type) {\n\t\t\tparam.value = value;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tgetFloat(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_FLOAT);\n\t}\n\n\tsetFloat(name, value) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_FLOAT, value);\n\t}\n\n\tgetInteger(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_INTEGER);\n\t}\n\n\tsetInteger(name, value) {\n\t\tif (typeof value === 'number' && value % 1 === 0) {\n\t\t\tthis.setParameterValue(name, ANIM_PARAMETER_INTEGER, value);\n\t\t}\n\t}\n\n\tgetBoolean(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_BOOLEAN);\n\t}\n\n\tsetBoolean(name, value) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_BOOLEAN, !!value);\n\t}\n\n\tgetTrigger(name) {\n\t\treturn this.getParameterValue(name, ANIM_PARAMETER_TRIGGER);\n\t}\n\n\tsetTrigger(name) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_TRIGGER, true);\n\t}\n\n\tresetTrigger(name) {\n\t\tthis.setParameterValue(name, ANIM_PARAMETER_TRIGGER, false);\n\t}\n\n\tonBeforeRemove() {\n\t\tif (Number.isFinite(this._stateGraphAsset)) {\n\t\t\tthis.system.app.assets.get(this._stateGraphAsset).off('change', this._onStateGraphAssetChangeEvent);\n\t\t}\n\t}\n\n}\n\nclass AnimComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$k = ['enabled'];\n\nclass AnimComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'anim';\n\t\tthis.ComponentType = AnimComponent;\n\t\tthis.DataType = AnimComponentData;\n\t\tthis.schema = _schema$k;\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind('animationUpdate', this.onAnimationUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$k);\n\t\tconst complexProperties = ['animationAssets', 'stateGraph', 'layers'];\n\t\tObject.keys(data).forEach(key => {\n\t\t\tif (complexProperties.includes(key)) return;\n\t\t\tcomponent[key] = data[key];\n\t\t});\n\n\t\tif (data.stateGraph) {\n\t\t\tcomponent.stateGraph = data.stateGraph;\n\t\t\tcomponent.loadStateGraph(component.stateGraph);\n\t\t}\n\n\t\tif (data.layers) {\n\t\t\tdata.layers.forEach((layer, i) => {\n\t\t\t\tlayer._controller.states.forEach(stateKey => {\n\t\t\t\t\tlayer._controller._states[stateKey]._animationList.forEach(node => {\n\t\t\t\t\t\tcomponent.layers[i].assignAnimation(node.name, node.animTrack);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (data.animationAssets) {\n\t\t\tcomponent.animationAssets = Object.assign(component.animationAssets, data.animationAssets);\n\t\t}\n\t}\n\n\tonAnimationUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id].entity.anim;\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && component.entity.enabled && component.playing) {\n\t\t\t\t\tfor (var i = 0; i < component.layers.length; i++) {\n\t\t\t\t\t\tcomponent.layers[i].update(dt * component.speed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\tstateGraphAsset: entity.anim.stateGraphAsset,\n\t\t\tanimationAssets: entity.anim.animationAssets,\n\t\t\tspeed: entity.anim.speed,\n\t\t\tactivate: entity.anim.activate,\n\t\t\tplaying: entity.anim.playing,\n\t\t\trootBone: entity.anim.rootBone,\n\t\t\tstateGraph: entity.anim.stateGraph,\n\t\t\tlayers: entity.anim.layers,\n\t\t\tlayerIndices: entity.anim.layerIndices,\n\t\t\tparameters: entity.anim.parameters\n\t\t};\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(AnimComponent.prototype, _schema$k);\n\nclass AudioListenerComponent extends Component {\n\tsetCurrentListener() {\n\t\tif (this.enabled && this.entity.audiolistener && this.entity.enabled) {\n\t\t\tthis.system.current = this.entity;\n\t\t\tvar position = this.system.current.getPosition();\n\t\t\tthis.system.manager.listener.setPosition(position);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis.setCurrentListener();\n\t}\n\n\tonDisable() {\n\t\tif (this.system.current === this.entity) {\n\t\t\tthis.system.current = null;\n\t\t}\n\t}\n\n}\n\nclass AudioListenerComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$j = ['enabled'];\n\nclass AudioListenerComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"audiolistener\";\n\t\tthis.ComponentType = AudioListenerComponent;\n\t\tthis.DataType = AudioListenerComponentData;\n\t\tthis.schema = _schema$j;\n\t\tthis.manager = manager;\n\t\tthis.current = null;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['enabled'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tonUpdate(dt) {\n\t\tif (this.current) {\n\t\t\tvar position = this.current.getPosition();\n\t\t\tthis.manager.listener.setPosition(position);\n\t\t\tvar wtm = this.current.getWorldTransform();\n\t\t\tthis.manager.listener.setOrientation(wtm);\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(AudioListenerComponent.prototype, _schema$j);\n\nclass AudioSourceComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_assets\", this.onSetAssets, this);\n\t\tthis.on(\"set_loop\", this.onSetLoop, this);\n\t\tthis.on(\"set_volume\", this.onSetVolume, this);\n\t\tthis.on(\"set_pitch\", this.onSetPitch, this);\n\t\tthis.on(\"set_minDistance\", this.onSetMinDistance, this);\n\t\tthis.on(\"set_maxDistance\", this.onSetMaxDistance, this);\n\t\tthis.on(\"set_rollOffFactor\", this.onSetRollOffFactor, this);\n\t\tthis.on(\"set_distanceModel\", this.onSetDistanceModel, this);\n\t\tthis.on(\"set_3d\", this.onSet3d, this);\n\t}\n\n\tplay(name) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.channel) {\n\t\t\tthis.stop();\n\t\t}\n\n\t\tvar channel;\n\t\tvar componentData = this.data;\n\n\t\tif (componentData.sources[name]) {\n\t\t\tif (!componentData['3d']) {\n\t\t\t\tchannel = this.system.manager.playSound(componentData.sources[name], componentData);\n\t\t\t\tcomponentData.currentSource = name;\n\t\t\t\tcomponentData.channel = channel;\n\t\t\t} else {\n\t\t\t\tvar pos = this.entity.getPosition();\n\t\t\t\tchannel = this.system.manager.playSound3d(componentData.sources[name], pos, componentData);\n\t\t\t\tcomponentData.currentSource = name;\n\t\t\t\tcomponentData.channel = channel;\n\t\t\t}\n\t\t}\n\t}\n\n\tpause() {\n\t\tif (this.channel) {\n\t\t\tthis.channel.pause();\n\t\t}\n\t}\n\n\tunpause() {\n\t\tif (this.channel && this.channel.paused) {\n\t\t\tthis.channel.unpause();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.channel) {\n\t\t\tthis.channel.stop();\n\t\t\tthis.channel = null;\n\t\t}\n\t}\n\n\tonSetAssets(name, oldValue, newValue) {\n\t\tvar newAssets = [];\n\t\tvar i,\n\t\t\t\tlen = newValue.length;\n\n\t\tif (oldValue && oldValue.length) {\n\t\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\t\tif (oldValue[i]) {\n\t\t\t\t\tvar asset = this.system.app.assets.get(oldValue[i]);\n\n\t\t\t\t\tif (asset) {\n\t\t\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\t\t\t\t\tif (this.currentSource === asset.name) {\n\t\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (len) {\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (oldValue.indexOf(newValue[i]) < 0) {\n\t\t\t\t\tif (newValue[i] instanceof Asset) {\n\t\t\t\t\t\tnewAssets.push(newValue[i].id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAssets.push(newValue[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.system._inTools && newAssets.length) {\n\t\t\tthis.loadAudioSourceAssets(newAssets);\n\t\t}\n\t}\n\n\tonAssetChanged(asset, attribute, newValue, oldValue) {\n\t\tif (attribute === 'resource') {\n\t\t\tvar sources = this.data.sources;\n\n\t\t\tif (sources) {\n\t\t\t\tthis.data.sources[asset.name] = newValue;\n\n\t\t\t\tif (this.data.currentSource === asset.name) {\n\t\t\t\t\tif (this.channel) {\n\t\t\t\t\t\tif (this.channel.paused) {\n\t\t\t\t\t\t\tthis.play(asset.name);\n\t\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.play(asset.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.data.sources[asset.name]) {\n\t\t\tdelete this.data.sources[asset.name];\n\n\t\t\tif (this.data.currentSource === asset.name) {\n\t\t\t\tthis.stop();\n\t\t\t\tthis.data.currentSource = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setLoop(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetVolume(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setVolume(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetPitch(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel) {\n\t\t\t\tthis.channel.setPitch(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetMaxDistance(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setMaxDistance(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetMinDistance(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setMinDistance(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetRollOffFactor(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setRollOffFactor(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetDistanceModel(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.channel instanceof Channel3d) {\n\t\t\t\tthis.channel.setDistanceModel(newValue);\n\t\t\t}\n\t\t}\n\t}\n\n\tonSet3d(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (this.system.initialized && this.currentSource) {\n\t\t\t\tvar paused = false;\n\t\t\t\tvar suspended = false;\n\n\t\t\t\tif (this.channel) {\n\t\t\t\t\tpaused = this.channel.paused;\n\t\t\t\t\tsuspended = this.channel.suspended;\n\t\t\t\t}\n\n\t\t\t\tthis.play(this.currentSource);\n\n\t\t\t\tif (this.channel) {\n\t\t\t\t\tthis.channel.paused = paused;\n\t\t\t\t\tthis.channel.suspended = suspended;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar assets = this.data.assets;\n\n\t\tif (assets) {\n\t\t\tvar registry = this.system.app.assets;\n\n\t\t\tfor (var i = 0, len = assets.length; i < len; i++) {\n\t\t\t\tvar asset = assets[i];\n\t\t\t\tif (!(asset instanceof Asset)) asset = registry.get(asset);\n\n\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\tregistry.load(asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.system.initialized) {\n\t\t\tif (this.data.activate && !this.channel) {\n\t\t\t\tthis.play(this.currentSource);\n\t\t\t} else {\n\t\t\t\tthis.unpause();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.pause();\n\t}\n\n\tloadAudioSourceAssets(ids) {\n\t\tvar self = this;\n\t\tvar assets = ids.map(function (id) {\n\t\t\treturn this.system.app.assets.get(id);\n\t\t}, this);\n\t\tvar sources = {};\n\t\tvar currentSource = null;\n\t\tvar count = assets.length;\n\n\t\tvar _error = function _error(e) {\n\t\t\tcount--;\n\t\t};\n\n\t\tvar _done = function () {\n\t\t\tthis.data.sources = sources;\n\t\t\tthis.data.currentSource = currentSource;\n\n\t\t\tif (this.enabled && this.activate && currentSource) {\n\t\t\t\tthis.onEnable();\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tassets.forEach(function (asset, index) {\n\t\t\tif (asset) {\n\t\t\t\tcurrentSource = currentSource || asset.name;\n\t\t\t\tasset.off('change', this.onAssetChanged, this);\n\t\t\t\tasset.on('change', this.onAssetChanged, this);\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.off('error', _error, this);\n\t\t\t\tasset.on('error', _error, this);\n\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\tsources[asset.name] = asset.resource;\n\t\t\t\t\tcount--;\n\n\t\t\t\t\tif (count === 0) {\n\t\t\t\t\t\t_done();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!asset.resource && self.enabled && self.entity.enabled) this.system.app.assets.load(asset);\n\t\t\t} else {\n\t\t\t\tcount--;\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\t_done();\n\t\t\t\t}\n\n\t\t\t\tthis.system.app.assets.on(\"add:\" + ids[index], function (asset) {\n\t\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\t\tself.data.sources[asset.name] = asset.resource;\n\t\t\t\t\t});\n\t\t\t\t\tif (!asset.resource) self.system.app.assets.load(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\t}\n\n}\n\nclass AudioSourceComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.assets = [];\n\t\tthis.activate = true;\n\t\tthis.volume = 1;\n\t\tthis.pitch = 1;\n\t\tthis.loop = false;\n\t\tthis['3d'] = true;\n\t\tthis.minDistance = 1;\n\t\tthis.maxDistance = 10000;\n\t\tthis.rollOffFactor = 1;\n\t\tthis.distanceModel = DISTANCE_INVERSE;\n\t\tthis.paused = true;\n\t\tthis.sources = {};\n\t\tthis.currentSource = null;\n\t\tthis.channel = null;\n\t}\n\n}\n\nconst _schema$i = ['enabled', 'assets', 'volume', 'pitch', 'loop', 'activate', '3d', 'minDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'sources', 'currentSource', 'channel'];\n\nclass AudioSourceComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"audiosource\";\n\t\tthis.ComponentType = AudioSourceComponent;\n\t\tthis.DataType = AudioSourceComponentData;\n\t\tthis.schema = _schema$i;\n\t\tthis.manager = manager;\n\t\tthis.initialized = false;\n\t\tComponentSystem.bind('initialize', this.onInitialize, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['activate', 'volume', 'pitch', 'loop', '3d', 'minDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'enabled', 'assets'];\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\tcomponent.paused = !(component.enabled && component.activate);\n\t}\n\n\tonInitialize(root) {\n\t\tif (root.audiosource && root.enabled && root.audiosource.enabled && root.audiosource.activate) {\n\t\t\troot.audiosource.play(root.audiosource.currentSource);\n\t\t}\n\n\t\tvar children = root._children;\n\t\tvar i,\n\t\t\t\tlen = children.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\tthis.onInitialize(children[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis.initialized = true;\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\t\t\t\tvar entity = component.entity;\n\t\t\t\tvar componentData = component.data;\n\n\t\t\t\tif (componentData.enabled && entity.enabled && componentData.channel instanceof Channel3d) {\n\t\t\t\t\tvar pos = entity.getPosition();\n\t\t\t\t\tcomponentData.channel.setPosition(pos);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonRemove(entity, data) {\n\t\tif (data.channel) {\n\t\t\tdata.channel.stop();\n\t\t\tdata.channel = null;\n\t\t}\n\t}\n\n\tsetVolume(volume) {\n\t\tthis.manager.setVolume(volume);\n\t}\n\n}\n\nComponent._buildAccessors(AudioSourceComponent.prototype, _schema$i);\n\nclass EntityReference extends EventHandler {\n\tconstructor(parentComponent, entityPropertyName, eventConfig) {\n\t\tsuper();\n\n\t\tif (!parentComponent || !(parentComponent instanceof Component)) {\n\t\t\tthrow new Error('The parentComponent argument is required and must be a Component');\n\t\t} else if (!entityPropertyName || typeof entityPropertyName !== 'string') {\n\t\t\tthrow new Error('The propertyName argument is required and must be a string');\n\t\t} else if (eventConfig && typeof eventConfig !== 'object') {\n\t\t\tthrow new Error('If provided, the eventConfig argument must be an object');\n\t\t}\n\n\t\tthis._parentComponent = parentComponent;\n\t\tthis._entityPropertyName = entityPropertyName;\n\t\tthis._entity = null;\n\t\tthis._app = parentComponent.system.app;\n\n\t\tthis._configureEventListeners(eventConfig || {}, {\n\t\t\t'entity#destroy': this._onEntityDestroy\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_configureEventListeners(externalEventConfig, internalEventConfig) {\n\t\tvar externalEventListenerConfigs = this._parseEventListenerConfig(externalEventConfig, 'external', this._parentComponent);\n\n\t\tvar internalEventListenerConfigs = this._parseEventListenerConfig(internalEventConfig, 'internal', this);\n\n\t\tthis._eventListenerConfigs = externalEventListenerConfigs.concat(internalEventListenerConfigs);\n\t\tthis._listenerStatusFlags = {};\n\t\tthis._gainListeners = {};\n\t\tthis._loseListeners = {};\n\t}\n\n\t_parseEventListenerConfig(eventConfig, prefix, scope) {\n\t\treturn Object.keys(eventConfig).map(function (listenerDescription, index) {\n\t\t\tvar listenerDescriptionParts = listenerDescription.split('#');\n\t\t\tvar sourceName = listenerDescriptionParts[0];\n\t\t\tvar eventName = listenerDescriptionParts[1];\n\t\t\tvar callback = eventConfig[listenerDescription];\n\n\t\t\tif (listenerDescriptionParts.length !== 2 || typeof sourceName !== 'string' || sourceName.length === 0 || typeof eventName !== 'string' || eventName.length === 0) {\n\t\t\t\tthrow new Error('Invalid event listener description: `' + listenerDescription + '`');\n\t\t\t}\n\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\tthrow new Error('Invalid or missing callback for event listener `' + listenerDescription + '`');\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tid: prefix + '_' + index + '_' + listenerDescription,\n\t\t\t\tsourceName: sourceName,\n\t\t\t\teventName: eventName,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope: scope\n\t\t\t};\n\t\t}, this);\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis._parentComponent[onOrOff]('set_' + this._entityPropertyName, this._onSetEntity, this);\n\n\t\tthis._parentComponent.system[onOrOff]('beforeremove', this._onParentComponentRemove, this);\n\n\t\tComponentSystem[onOrOff]('postinitialize', this._onPostInitialize, this);\n\n\t\tthis._app[onOrOff]('tools:sceneloaded', this._onSceneLoaded, this);\n\n\t\tvar allComponentSystems = [];\n\n\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\tvar config = this._eventListenerConfigs[i];\n\t\t\tvar componentSystem = this._app.systems[config.sourceName];\n\n\t\t\tif (componentSystem) {\n\t\t\t\tif (allComponentSystems.indexOf(componentSystem) === -1) {\n\t\t\t\t\tallComponentSystems.push(componentSystem);\n\t\t\t\t}\n\n\t\t\t\tif (componentSystem && config.eventName === 'gain') {\n\t\t\t\t\tthis._gainListeners[config.sourceName] = config;\n\t\t\t\t}\n\n\t\t\t\tif (componentSystem && config.eventName === 'lose') {\n\t\t\t\t\tthis._loseListeners[config.sourceName] = config;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var j = 0; j < allComponentSystems.length; ++j) {\n\t\t\tallComponentSystems[j][onOrOff]('add', this._onComponentAdd, this);\n\t\t\tallComponentSystems[j][onOrOff]('beforeremove', this._onComponentRemove, this);\n\t\t}\n\t}\n\n\t_onSetEntity(name, oldValue, newValue) {\n\t\tif (newValue instanceof Entity) {\n\t\t\tthis._updateEntityReference();\n\t\t} else {\n\t\t\tif (newValue !== null && newValue !== undefined && typeof newValue !== 'string') {\n\t\t\t\tconsole.warn(\"Entity field `\" + this._entityPropertyName + \"` was set to unexpected type '\" + typeof newValue + \"'\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (oldValue !== newValue) {\n\t\t\t\tthis._updateEntityReference();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onPostInitialize() {\n\t\tthis._updateEntityReference();\n\t}\n\n\tonParentComponentEnable() {\n\t\tif (!this._entity) {\n\t\t\tthis._updateEntityReference();\n\t\t}\n\t}\n\n\t_onSceneLoaded() {\n\t\tthis._updateEntityReference();\n\t}\n\n\t_updateEntityReference() {\n\t\tvar nextEntityGuid = this._parentComponent.data[this._entityPropertyName];\n\t\tvar nextEntity;\n\n\t\tif (nextEntityGuid instanceof Entity) {\n\t\t\tnextEntity = nextEntityGuid;\n\t\t\tnextEntityGuid = nextEntity.getGuid();\n\t\t\tthis._parentComponent.data[this._entityPropertyName] = nextEntityGuid;\n\t\t} else {\n\t\t\tvar root = this._parentComponent.system.app.root;\n\n\t\t\tvar isOnSceneGraph = this._parentComponent.entity.isDescendantOf(root);\n\n\t\t\tnextEntity = isOnSceneGraph && nextEntityGuid ? root.findByGuid(nextEntityGuid) : null;\n\t\t}\n\n\t\tvar hasChanged = this._entity !== nextEntity;\n\n\t\tif (hasChanged) {\n\t\t\tif (this._entity) {\n\t\t\t\tthis._onBeforeEntityChange();\n\t\t\t}\n\n\t\t\tthis._entity = nextEntity;\n\n\t\t\tif (this._entity) {\n\t\t\t\tthis._onAfterEntityChange();\n\t\t\t}\n\n\t\t\tthis.fire('set:entity', this._entity);\n\t\t}\n\t}\n\n\t_onBeforeEntityChange() {\n\t\tthis._toggleEntityListeners('off');\n\n\t\tthis._callAllGainOrLoseListeners(this._loseListeners);\n\t}\n\n\t_onAfterEntityChange() {\n\t\tthis._toggleEntityListeners('on');\n\n\t\tthis._callAllGainOrLoseListeners(this._gainListeners);\n\t}\n\n\t_onComponentAdd(entity, component) {\n\t\tvar componentName = component.system.id;\n\n\t\tif (entity === this._entity) {\n\t\t\tthis._callGainOrLoseListener(componentName, this._gainListeners);\n\n\t\t\tthis._toggleComponentListeners('on', componentName);\n\t\t}\n\t}\n\n\t_onComponentRemove(entity, component) {\n\t\tvar componentName = component.system.id;\n\n\t\tif (entity === this._entity) {\n\t\t\tthis._callGainOrLoseListener(componentName, this._loseListeners);\n\n\t\t\tthis._toggleComponentListeners('off', componentName, true);\n\t\t}\n\t}\n\n\t_callAllGainOrLoseListeners(listenerMap) {\n\t\tfor (var componentName in this._entity.c) {\n\t\t\tthis._callGainOrLoseListener(componentName, listenerMap);\n\t\t}\n\t}\n\n\t_callGainOrLoseListener(componentName, listenerMap) {\n\t\tif (this._entity.c.hasOwnProperty(componentName) && listenerMap[componentName]) {\n\t\t\tvar config = listenerMap[componentName];\n\t\t\tconfig.callback.call(config.scope);\n\t\t}\n\t}\n\n\t_toggleEntityListeners(onOrOff, isDestroying) {\n\t\tif (this._entity) {\n\t\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\t\tthis._safeToggleListener(onOrOff, this._eventListenerConfigs[i], isDestroying);\n\t\t\t}\n\t\t}\n\t}\n\n\t_toggleComponentListeners(onOrOff, componentName, isDestroying) {\n\t\tfor (var i = 0; i < this._eventListenerConfigs.length; ++i) {\n\t\t\tvar config = this._eventListenerConfigs[i];\n\n\t\t\tif (config.sourceName === componentName) {\n\t\t\t\tthis._safeToggleListener(onOrOff, config, isDestroying);\n\t\t\t}\n\t\t}\n\t}\n\n\t_safeToggleListener(onOrOff, config, isDestroying) {\n\t\tvar isAdding = onOrOff === 'on';\n\n\t\tif (isAdding && this._listenerStatusFlags[config.id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar source = this._getEventSource(config.sourceName, isDestroying);\n\n\t\tif (source) {\n\t\t\tsource[onOrOff](config.eventName, config.callback, config.scope);\n\t\t\tthis._listenerStatusFlags[config.id] = isAdding;\n\t\t}\n\t}\n\n\t_getEventSource(sourceName, isDestroying) {\n\t\tif (sourceName === 'entity') {\n\t\t\treturn this._entity;\n\t\t}\n\n\t\tvar component = this._entity[sourceName];\n\n\t\tif (component) {\n\t\t\treturn component;\n\t\t}\n\n\t\tif (!isDestroying) {\n\t\t\tconsole.warn('Entity has no component with name ' + sourceName);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_onEntityDestroy(entity) {\n\t\tif (this._entity === entity) {\n\t\t\tthis._toggleEntityListeners('off', true);\n\n\t\t\tthis._entity = null;\n\t\t}\n\t}\n\n\t_onParentComponentRemove(entity, component) {\n\t\tif (component === this._parentComponent) {\n\t\t\tthis._toggleLifecycleListeners('off');\n\n\t\t\tthis._toggleEntityListeners('off', true);\n\t\t}\n\t}\n\n\thasComponent(componentName) {\n\t\treturn this._entity && this._entity.c ? !!this._entity.c[componentName] : false;\n\t}\n\n\tget entity() {\n\t\treturn this._entity;\n\t}\n\n}\n\nconst BUTTON_TRANSITION_MODE_TINT = 0;\nconst BUTTON_TRANSITION_MODE_SPRITE_CHANGE = 1;\n\nvar VisualState = {\n\tDEFAULT: 'DEFAULT',\n\tHOVER: 'HOVER',\n\tPRESSED: 'PRESSED',\n\tINACTIVE: 'INACTIVE'\n};\nvar STATES_TO_TINT_NAMES = {};\nSTATES_TO_TINT_NAMES[VisualState.DEFAULT] = '_defaultTint';\nSTATES_TO_TINT_NAMES[VisualState.HOVER] = 'hoverTint';\nSTATES_TO_TINT_NAMES[VisualState.PRESSED] = 'pressedTint';\nSTATES_TO_TINT_NAMES[VisualState.INACTIVE] = 'inactiveTint';\nvar STATES_TO_SPRITE_ASSET_NAMES = {};\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.DEFAULT] = '_defaultSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.HOVER] = 'hoverSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.PRESSED] = 'pressedSpriteAsset';\nSTATES_TO_SPRITE_ASSET_NAMES[VisualState.INACTIVE] = 'inactiveSpriteAsset';\nvar STATES_TO_SPRITE_FRAME_NAMES = {};\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.DEFAULT] = '_defaultSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.HOVER] = 'hoverSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.PRESSED] = 'pressedSpriteFrame';\nSTATES_TO_SPRITE_FRAME_NAMES[VisualState.INACTIVE] = 'inactiveSpriteFrame';\n\nclass ButtonComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._visualState = VisualState.DEFAULT;\n\t\tthis._isHovering = false;\n\t\tthis._hoveringCounter = 0;\n\t\tthis._isPressed = false;\n\t\tthis._defaultTint = new Color(1, 1, 1, 1);\n\t\tthis._defaultSpriteAsset = null;\n\t\tthis._defaultSpriteFrame = 0;\n\t\tthis._imageReference = new EntityReference(this, 'imageEntity', {\n\t\t\t'element#gain': this._onImageElementGain,\n\t\t\t'element#lose': this._onImageElementLose,\n\t\t\t'element#set:color': this._onSetColor,\n\t\t\t'element#set:opacity': this._onSetOpacity,\n\t\t\t'element#set:spriteAsset': this._onSetSpriteAsset,\n\t\t\t'element#set:spriteFrame': this._onSetSpriteFrame\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on', system);\n\t}\n\n\t_toggleLifecycleListeners(onOrOff, system) {\n\t\tthis[onOrOff]('set_active', this._onSetActive, this);\n\t\tthis[onOrOff]('set_transitionMode', this._onSetTransitionMode, this);\n\t\tthis[onOrOff]('set_hoverTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveTint', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_hoverSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_hoverSpriteFrame', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_pressedSpriteFrame', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveSpriteAsset', this._onSetTransitionValue, this);\n\t\tthis[onOrOff]('set_inactiveSpriteFrame', this._onSetTransitionValue, this);\n\t\tsystem.app.systems.element[onOrOff]('add', this._onElementComponentAdd, this);\n\t\tsystem.app.systems.element[onOrOff]('beforeremove', this._onElementComponentRemove, this);\n\t}\n\n\t_onSetActive(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._updateVisualState();\n\t\t}\n\t}\n\n\t_onSetTransitionMode(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._cancelTween();\n\n\t\t\tthis._resetToDefaultVisualState(oldValue);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetTransitionValue(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onElementComponentRemove(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleHitElementListeners('off');\n\t\t}\n\t}\n\n\t_onElementComponentAdd(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleHitElementListeners('on');\n\t\t}\n\t}\n\n\t_onImageElementLose() {\n\t\tthis._cancelTween();\n\n\t\tthis._resetToDefaultVisualState(this.transitionMode);\n\t}\n\n\t_onImageElementGain() {\n\t\tthis._storeDefaultVisualState();\n\n\t\tthis._forceReapplyVisualState();\n\t}\n\n\t_toggleHitElementListeners(onOrOff) {\n\t\tif (this.entity.element) {\n\t\t\tvar isAdding = onOrOff === 'on';\n\n\t\t\tif (isAdding && this._hasHitElementListeners) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.entity.element[onOrOff]('mouseenter', this._onMouseEnter, this);\n\t\t\tthis.entity.element[onOrOff]('mouseleave', this._onMouseLeave, this);\n\t\t\tthis.entity.element[onOrOff]('mousedown', this._onMouseDown, this);\n\t\t\tthis.entity.element[onOrOff]('mouseup', this._onMouseUp, this);\n\t\t\tthis.entity.element[onOrOff]('touchstart', this._onTouchStart, this);\n\t\t\tthis.entity.element[onOrOff]('touchend', this._onTouchEnd, this);\n\t\t\tthis.entity.element[onOrOff]('touchleave', this._onTouchLeave, this);\n\t\t\tthis.entity.element[onOrOff]('touchcancel', this._onTouchCancel, this);\n\t\t\tthis.entity.element[onOrOff]('selectstart', this._onSelectStart, this);\n\t\t\tthis.entity.element[onOrOff]('selectend', this._onSelectEnd, this);\n\t\t\tthis.entity.element[onOrOff]('selectenter', this._onSelectEnter, this);\n\t\t\tthis.entity.element[onOrOff]('selectleave', this._onSelectLeave, this);\n\t\t\tthis.entity.element[onOrOff]('click', this._onClick, this);\n\t\t\tthis._hasHitElementListeners = isAdding;\n\t\t}\n\t}\n\n\t_storeDefaultVisualState() {\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tthis._storeDefaultColor(this._imageReference.entity.element.color);\n\n\t\t\tthis._storeDefaultOpacity(this._imageReference.entity.element.opacity);\n\n\t\t\tthis._storeDefaultSpriteAsset(this._imageReference.entity.element.spriteAsset);\n\n\t\t\tthis._storeDefaultSpriteFrame(this._imageReference.entity.element.spriteFrame);\n\t\t}\n\t}\n\n\t_storeDefaultColor(color) {\n\t\tthis._defaultTint.r = color.r;\n\t\tthis._defaultTint.g = color.g;\n\t\tthis._defaultTint.b = color.b;\n\t}\n\n\t_storeDefaultOpacity(opacity) {\n\t\tthis._defaultTint.a = opacity;\n\t}\n\n\t_storeDefaultSpriteAsset(spriteAsset) {\n\t\tthis._defaultSpriteAsset = spriteAsset;\n\t}\n\n\t_storeDefaultSpriteFrame(spriteFrame) {\n\t\tthis._defaultSpriteFrame = spriteFrame;\n\t}\n\n\t_onSetColor(color) {\n\t\tif (!this._isApplyingTint) {\n\t\t\tthis._storeDefaultColor(color);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetOpacity(opacity) {\n\t\tif (!this._isApplyingTint) {\n\t\t\tthis._storeDefaultOpacity(opacity);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetSpriteAsset(spriteAsset) {\n\t\tif (!this._isApplyingSprite) {\n\t\t\tthis._storeDefaultSpriteAsset(spriteAsset);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onSetSpriteFrame(spriteFrame) {\n\t\tif (!this._isApplyingSprite) {\n\t\t\tthis._storeDefaultSpriteFrame(spriteFrame);\n\n\t\t\tthis._forceReapplyVisualState();\n\t\t}\n\t}\n\n\t_onMouseEnter(event) {\n\t\tthis._isHovering = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseenter', event);\n\t}\n\n\t_onMouseLeave(event) {\n\t\tthis._isHovering = false;\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseleave', event);\n\t}\n\n\t_onMouseDown(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mousedown', event);\n\t}\n\n\t_onMouseUp(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('mouseup', event);\n\t}\n\n\t_onTouchStart(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchstart', event);\n\t}\n\n\t_onTouchEnd(event) {\n\t\tevent.event.preventDefault();\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchend', event);\n\t}\n\n\t_onTouchLeave(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchleave', event);\n\t}\n\n\t_onTouchCancel(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('touchcancel', event);\n\t}\n\n\t_onSelectStart(event) {\n\t\tthis._isPressed = true;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('selectstart', event);\n\t}\n\n\t_onSelectEnd(event) {\n\t\tthis._isPressed = false;\n\n\t\tthis._updateVisualState();\n\n\t\tthis._fireIfActive('selectend', event);\n\t}\n\n\t_onSelectEnter(event) {\n\t\tthis._hoveringCounter++;\n\n\t\tif (this._hoveringCounter === 1) {\n\t\t\tthis._isHovering = true;\n\n\t\t\tthis._updateVisualState();\n\t\t}\n\n\t\tthis._fireIfActive('selectenter', event);\n\t}\n\n\t_onSelectLeave(event) {\n\t\tthis._hoveringCounter--;\n\n\t\tif (this._hoveringCounter === 0) {\n\t\t\tthis._isHovering = false;\n\t\t\tthis._isPressed = false;\n\n\t\t\tthis._updateVisualState();\n\t\t}\n\n\t\tthis._fireIfActive('selectleave', event);\n\t}\n\n\t_onClick(event) {\n\t\tthis._fireIfActive('click', event);\n\t}\n\n\t_fireIfActive(name, event) {\n\t\tif (this.data.active) {\n\t\t\tthis.fire(name, event);\n\t\t}\n\t}\n\n\t_updateVisualState(force) {\n\t\tvar oldVisualState = this._visualState;\n\n\t\tvar newVisualState = this._determineVisualState();\n\n\t\tif ((oldVisualState !== newVisualState || force) && this.enabled) {\n\t\t\tthis._visualState = newVisualState;\n\n\t\t\tif (oldVisualState === VisualState.HOVER) {\n\t\t\t\tthis._fireIfActive('hoverend');\n\t\t\t}\n\n\t\t\tif (oldVisualState === VisualState.PRESSED) {\n\t\t\t\tthis._fireIfActive('pressedend');\n\t\t\t}\n\n\t\t\tif (newVisualState === VisualState.HOVER) {\n\t\t\t\tthis._fireIfActive('hoverstart');\n\t\t\t}\n\n\t\t\tif (newVisualState === VisualState.PRESSED) {\n\t\t\t\tthis._fireIfActive('pressedstart');\n\t\t\t}\n\n\t\t\tswitch (this.transitionMode) {\n\t\t\t\tcase BUTTON_TRANSITION_MODE_TINT:\n\t\t\t\t\tvar tintName = STATES_TO_TINT_NAMES[this._visualState];\n\t\t\t\t\tvar tintColor = this[tintName];\n\n\t\t\t\t\tthis._applyTint(tintColor);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BUTTON_TRANSITION_MODE_SPRITE_CHANGE:\n\t\t\t\t\tvar spriteAssetName = STATES_TO_SPRITE_ASSET_NAMES[this._visualState];\n\t\t\t\t\tvar spriteFrameName = STATES_TO_SPRITE_FRAME_NAMES[this._visualState];\n\t\t\t\t\tvar spriteAsset = this[spriteAssetName];\n\t\t\t\t\tvar spriteFrame = this[spriteFrameName];\n\n\t\t\t\t\tthis._applySprite(spriteAsset, spriteFrame);\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_forceReapplyVisualState() {\n\t\tthis._updateVisualState(true);\n\t}\n\n\t_resetToDefaultVisualState(transitionMode) {\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tswitch (transitionMode) {\n\t\t\t\tcase BUTTON_TRANSITION_MODE_TINT:\n\t\t\t\t\tthis._cancelTween();\n\n\t\t\t\t\tthis._applyTintImmediately(this._defaultTint);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BUTTON_TRANSITION_MODE_SPRITE_CHANGE:\n\t\t\t\t\tthis._applySprite(this._defaultSpriteAsset, this._defaultSpriteFrame);\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_determineVisualState() {\n\t\tif (!this.active) {\n\t\t\treturn VisualState.INACTIVE;\n\t\t} else if (this._isPressed) {\n\t\t\treturn VisualState.PRESSED;\n\t\t} else if (this._isHovering) {\n\t\t\treturn VisualState.HOVER;\n\t\t}\n\n\t\treturn VisualState.DEFAULT;\n\t}\n\n\t_applySprite(spriteAsset, spriteFrame) {\n\t\tspriteFrame = spriteFrame || 0;\n\n\t\tif (this._imageReference.hasComponent('element')) {\n\t\t\tthis._isApplyingSprite = true;\n\t\t\tthis._imageReference.entity.element.spriteAsset = spriteAsset;\n\t\t\tthis._imageReference.entity.element.spriteFrame = spriteFrame;\n\t\t\tthis._isApplyingSprite = false;\n\t\t}\n\t}\n\n\t_applyTint(tintColor) {\n\t\tthis._cancelTween();\n\n\t\tif (this.fadeDuration === 0) {\n\t\t\tthis._applyTintImmediately(tintColor);\n\t\t} else {\n\t\t\tthis._applyTintWithTween(tintColor);\n\t\t}\n\t}\n\n\t_applyTintImmediately(tintColor) {\n\t\tif (this._imageReference.hasComponent('element') && tintColor) {\n\t\t\tthis._isApplyingTint = true;\n\t\t\tthis._imageReference.entity.element.color = toColor3(tintColor);\n\t\t\tthis._imageReference.entity.element.opacity = tintColor.a;\n\t\t\tthis._isApplyingTint = false;\n\t\t}\n\t}\n\n\t_applyTintWithTween(tintColor) {\n\t\tif (this._imageReference.hasComponent('element') && tintColor) {\n\t\t\tvar color = this._imageReference.entity.element.color;\n\t\t\tvar opacity = this._imageReference.entity.element.opacity;\n\t\t\tthis._tweenInfo = {\n\t\t\t\tstartTime: now(),\n\t\t\t\tfrom: new Color(color.r, color.g, color.b, opacity),\n\t\t\t\tto: tintColor.clone(),\n\t\t\t\tlerpColor: new Color()\n\t\t\t};\n\t\t}\n\t}\n\n\t_updateTintTween() {\n\t\tvar elapsedTime = now() - this._tweenInfo.startTime;\n\n\t\tvar elapsedProportion = this.fadeDuration === 0 ? 1 : elapsedTime / this.fadeDuration;\n\t\telapsedProportion = math.clamp(elapsedProportion, 0, 1);\n\n\t\tif (Math.abs(elapsedProportion - 1) > 1e-5) {\n\t\t\tvar lerpColor = this._tweenInfo.lerpColor;\n\t\t\tlerpColor.lerp(this._tweenInfo.from, this._tweenInfo.to, elapsedProportion);\n\n\t\t\tthis._applyTintImmediately(new Color(lerpColor.r, lerpColor.g, lerpColor.b, lerpColor.a));\n\t\t} else {\n\t\t\tthis._applyTintImmediately(this._tweenInfo.to);\n\n\t\t\tthis._cancelTween();\n\t\t}\n\t}\n\n\t_cancelTween() {\n\t\tdelete this._tweenInfo;\n\t}\n\n\tonUpdate() {\n\t\tif (this._tweenInfo) {\n\t\t\tthis._updateTintTween();\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis._isHovering = false;\n\t\tthis._hoveringCounter = 0;\n\t\tthis._isPressed = false;\n\n\t\tthis._imageReference.onParentComponentEnable();\n\n\t\tthis._toggleHitElementListeners('on');\n\n\t\tthis._forceReapplyVisualState();\n\t}\n\n\tonDisable() {\n\t\tthis._toggleHitElementListeners('off');\n\n\t\tthis._resetToDefaultVisualState(this.transitionMode);\n\t}\n\n\tonRemove() {\n\t\tthis._toggleLifecycleListeners('off', this.system);\n\n\t\tthis.onDisable();\n\t}\n\n}\n\nfunction toColor3(color4) {\n\treturn new Color(color4.r, color4.g, color4.b);\n}\n\nclass ButtonComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.active = true;\n\t\tthis.imageEntity = null;\n\t\tthis.hitPadding = new Vec4();\n\t\tthis.transitionMode = BUTTON_TRANSITION_MODE_TINT;\n\t\tthis.hoverTint = new Color(0.75, 0.75, 0.75);\n\t\tthis.pressedTint = new Color(0.5, 0.5, 0.5);\n\t\tthis.inactiveTint = new Color(0.25, 0.25, 0.25);\n\t\tthis.fadeDuration = 0;\n\t\tthis.hoverSpriteAsset = null;\n\t\tthis.hoverSpriteFrame = 0;\n\t\tthis.pressedSpriteAsset = null;\n\t\tthis.pressedSpriteFrame = 0;\n\t\tthis.inactiveSpriteAsset = null;\n\t\tthis.inactiveSpriteFrame = 0;\n\t}\n\n}\n\nconst _schema$h = ['enabled', 'active', {\n\tname: 'imageEntity',\n\ttype: 'entity'\n}, {\n\tname: 'hitPadding',\n\ttype: 'vec4'\n}, 'transitionMode', {\n\tname: 'hoverTint',\n\ttype: 'rgba'\n}, {\n\tname: 'pressedTint',\n\ttype: 'rgba'\n}, {\n\tname: 'inactiveTint',\n\ttype: 'rgba'\n}, 'fadeDuration', 'hoverSpriteAsset', 'hoverSpriteFrame', 'pressedSpriteAsset', 'pressedSpriteFrame', 'inactiveSpriteAsset', 'inactiveSpriteFrame'];\n\nclass ButtonComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'button';\n\t\tthis.ComponentType = ButtonComponent;\n\t\tthis.DataType = ButtonComponentData;\n\t\tthis.schema = _schema$h;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$h);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tvar entity = components[id].entity;\n\t\t\tvar component = entity.button;\n\n\t\t\tif (component.enabled && entity.enabled) {\n\t\t\t\tcomponent.onUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ButtonComponent.prototype, _schema$h);\n\nlet depthLayer$1;\n\nclass PostEffect {\n\tconstructor(effect, inputTarget) {\n\t\tthis.effect = effect;\n\t\tthis.inputTarget = inputTarget;\n\t\tthis.outputTarget = null;\n\t\tthis.name = effect.constructor.name;\n\t}\n\n}\n\nclass PostEffectQueue {\n\tconstructor(app, camera) {\n\t\tvar self = this;\n\t\tthis.app = app;\n\t\tthis.camera = camera;\n\t\tthis.destinationRenderTarget = null;\n\t\tthis.effects = [];\n\t\tthis.enabled = false;\n\t\tthis.depthTarget = null;\n\t\tthis.renderTargetScale = 1;\n\t\tthis.resizeTimeout = null;\n\t\tthis.resizeLast = 0;\n\n\t\tthis._resizeTimeoutCallback = function () {\n\t\t\tself.resizeRenderTargets();\n\t\t};\n\n\t\tcamera.on('set:rect', this.onCameraRectChanged, this);\n\t}\n\n\t_allocateColorBuffer(format, name) {\n\t\tvar rect = this.camera.rect;\n\t\tvar width = Math.floor(rect.z * this.app.graphicsDevice.width * this.renderTargetScale);\n\t\tvar height = Math.floor(rect.w * this.app.graphicsDevice.height * this.renderTargetScale);\n\t\tvar colorBuffer = new Texture(this.app.graphicsDevice, {\n\t\t\tformat: format,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcolorBuffer.name = name;\n\t\treturn colorBuffer;\n\t}\n\n\t_createOffscreenTarget(useDepth, hdr) {\n\t\tvar device = this.app.graphicsDevice;\n\t\tconst format = hdr ? device.getHdrFormat() : PIXELFORMAT_R8_G8_B8_A8;\n\t\tconst name = this.camera.entity.name + '-posteffect-' + this.effects.length;\n\n\t\tconst colorBuffer = this._allocateColorBuffer(format, name);\n\n\t\tvar useStencil = this.app.graphicsDevice.supportsStencil;\n\t\tvar samples = useDepth ? device.samples : 1;\n\t\treturn new RenderTarget({\n\t\t\tcolorBuffer: colorBuffer,\n\t\t\tdepth: useDepth,\n\t\t\tstencil: useStencil,\n\t\t\tsamples: samples\n\t\t});\n\t}\n\n\t_resizeOffscreenTarget(rt) {\n\t\tconst format = rt.colorBuffer.format;\n\t\tconst name = rt.colorBuffer.name;\n\t\trt.destroyFrameBuffers();\n\t\trt.destroyTextureBuffers();\n\t\trt._colorBuffer = this._allocateColorBuffer(format, name);\n\t}\n\n\t_destroyOffscreenTarget(rt) {\n\t\trt.destroyTextureBuffers();\n\t\trt.destroy();\n\t}\n\n\tsetRenderTargetScale(scale) {\n\t\tthis.renderTargetScale = scale;\n\t\tthis.resizeRenderTargets();\n\t}\n\n\taddEffect(effect) {\n\t\tconst effects = this.effects;\n\t\tconst isFirstEffect = effects.length === 0;\n\n\t\tconst inputTarget = this._createOffscreenTarget(isFirstEffect, effect.hdr);\n\n\t\tconst newEntry = new PostEffect(effect, inputTarget);\n\t\teffects.push(newEntry);\n\t\tthis._sourceTarget = newEntry.inputTarget;\n\n\t\tif (effects.length > 1) {\n\t\t\teffects[effects.length - 2].outputTarget = newEntry.inputTarget;\n\t\t}\n\n\t\tthis._newPostEffect = effect;\n\n\t\tif (effect.needsDepthBuffer) {\n\t\t\tthis._requestDepthMap();\n\t\t}\n\n\t\tthis.enable();\n\t\tthis._newPostEffect = undefined;\n\t}\n\n\tremoveEffect(effect) {\n\t\tvar i,\n\t\t\t\tlen,\n\t\t\t\tindex = -1;\n\n\t\tfor (i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tif (this.effects[i].effect === effect) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (index >= 0) {\n\t\t\tif (index > 0) {\n\t\t\t\tthis.effects[index - 1].outputTarget = index + 1 < this.effects.length ? this.effects[index + 1].inputTarget : null;\n\t\t\t} else {\n\t\t\t\tif (this.effects.length > 1) {\n\t\t\t\t\tif (!this.effects[1].inputTarget._depth) {\n\t\t\t\t\t\tthis._destroyOffscreenTarget(this.effects[1].inputTarget);\n\n\t\t\t\t\t\tthis.effects[1].inputTarget = this._createOffscreenTarget(true, this.effects[1].hdr);\n\t\t\t\t\t\tthis._sourceTarget = this.effects[1].inputTarget;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.camera.renderTarget = this.effects[1].inputTarget;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._destroyOffscreenTarget(this.effects[index].inputTarget);\n\n\t\t\tthis.effects.splice(index, 1);\n\t\t}\n\n\t\tif (this.enabled) {\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._releaseDepthMap();\n\t\t\t}\n\t\t}\n\n\t\tif (this.effects.length === 0) {\n\t\t\tthis.disable();\n\t\t}\n\t}\n\n\t_requestDepthMaps() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tvar effect = this.effects[i].effect;\n\t\t\tif (this._newPostEffect === effect) continue;\n\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._requestDepthMap();\n\t\t\t}\n\t\t}\n\t}\n\n\t_releaseDepthMaps() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tvar effect = this.effects[i].effect;\n\n\t\t\tif (effect.needsDepthBuffer) {\n\t\t\t\tthis._releaseDepthMap();\n\t\t\t}\n\t\t}\n\t}\n\n\t_requestDepthMap() {\n\t\tif (!depthLayer$1) depthLayer$1 = this.app.scene.layers.getLayerById(LAYERID_DEPTH);\n\t\tif (depthLayer$1) depthLayer$1.incrementCounter();\n\t}\n\n\t_releaseDepthMap() {\n\t\tif (depthLayer$1) depthLayer$1.decrementCounter();\n\t}\n\n\tdestroy() {\n\t\tfor (var i = 0, len = this.effects.length; i < len; i++) {\n\t\t\tthis.effects[i].inputTarget.destroy();\n\t\t}\n\n\t\tthis.effects.length = 0;\n\t\tthis.disable();\n\t}\n\n\tenable() {\n\t\tif (!this.enabled && this.effects.length) {\n\t\t\tthis.enabled = true;\n\t\t\tvar self = this;\n\n\t\t\tthis._requestDepthMaps();\n\n\t\t\tthis.app.graphicsDevice.on('resizecanvas', this._onCanvasResized, this);\n\t\t\tthis.destinationRenderTarget = this.camera.renderTarget;\n\t\t\tthis.camera.renderTarget = this.effects[0].inputTarget;\n\n\t\t\tthis.camera.onPostprocessing = function (camera) {\n\t\t\t\tif (self.enabled) {\n\t\t\t\t\tvar rect = null;\n\t\t\t\t\tvar len = self.effects.length;\n\n\t\t\t\t\tif (len) {\n\t\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\t\tvar fx = self.effects[i];\n\t\t\t\t\t\t\tvar destTarget = fx.outputTarget;\n\n\t\t\t\t\t\t\tif (i === len - 1) {\n\t\t\t\t\t\t\t\trect = self.camera.rect;\n\n\t\t\t\t\t\t\t\tif (self.destinationRenderTarget) {\n\t\t\t\t\t\t\t\t\tdestTarget = self.destinationRenderTarget;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfx.effect.render(fx.inputTarget, destTarget, rect);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tdisable() {\n\t\tif (this.enabled) {\n\t\t\tthis.enabled = false;\n\t\t\tthis.app.graphicsDevice.off('resizecanvas', this._onCanvasResized, this);\n\n\t\t\tthis._releaseDepthMaps();\n\n\t\t\tthis._destroyOffscreenTarget(this._sourceTarget);\n\n\t\t\tthis.camera.renderTarget = null;\n\t\t\tthis.camera.onPostprocessing = null;\n\t\t}\n\t}\n\n\t_onCanvasResized(width, height) {\n\t\tvar rect = this.camera.rect;\n\t\tvar device = this.app.graphicsDevice;\n\t\tthis.camera.camera.aspectRatio = device.width * rect.z / (device.height * rect.w);\n\t\tif (this.resizeTimeout) return;\n\n\t\tif (now() - this.resizeLast > 100) {\n\t\t\tthis.resizeRenderTargets();\n\t\t} else {\n\t\t\tthis.resizeTimeout = setTimeout(this._resizeTimeoutCallback, 100);\n\t\t}\n\t}\n\n\tresizeRenderTargets() {\n\t\tif (this.resizeTimeout) {\n\t\t\tclearTimeout(this.resizeTimeout);\n\t\t\tthis.resizeTimeout = null;\n\t\t}\n\n\t\tthis.resizeLast = now();\n\t\tvar rect = this.camera.rect;\n\t\tvar desiredWidth = Math.floor(rect.z * this.app.graphicsDevice.width * this.renderTargetScale);\n\t\tvar desiredHeight = Math.floor(rect.w * this.app.graphicsDevice.height * this.renderTargetScale);\n\t\tvar effects = this.effects;\n\n\t\tfor (var i = 0, len = effects.length; i < len; i++) {\n\t\t\tvar fx = effects[i];\n\n\t\t\tif (fx.inputTarget.width !== desiredWidth || fx.inputTarget.height !== desiredHeight) {\n\t\t\t\tthis._resizeOffscreenTarget(fx.inputTarget);\n\t\t\t}\n\t\t}\n\t}\n\n\tonCameraRectChanged(name, oldValue, newValue) {\n\t\tif (this.enabled) {\n\t\t\tthis.resizeRenderTargets();\n\t\t}\n\t}\n\n}\n\nconst properties$1 = [{\n\tname: 'aspectRatio',\n\treadonly: false\n}, {\n\tname: 'aspectRatioMode',\n\treadonly: false\n}, {\n\tname: 'calculateProjection',\n\treadonly: false\n}, {\n\tname: 'calculateTransform',\n\treadonly: false\n}, {\n\tname: 'clearColor',\n\treadonly: false\n}, {\n\tname: 'cullFaces',\n\treadonly: false\n}, {\n\tname: 'farClip',\n\treadonly: false\n}, {\n\tname: 'flipFaces',\n\treadonly: false\n}, {\n\tname: 'fov',\n\treadonly: false\n}, {\n\tname: 'frustum',\n\treadonly: true\n}, {\n\tname: 'frustumCulling',\n\treadonly: false\n}, {\n\tname: 'horizontalFov',\n\treadonly: false\n}, {\n\tname: 'nearClip',\n\treadonly: false\n}, {\n\tname: 'orthoHeight',\n\treadonly: false\n}, {\n\tname: 'projection',\n\treadonly: false\n}, {\n\tname: 'projectionMatrix',\n\treadonly: true\n}, {\n\tname: 'scissorRect',\n\treadonly: false\n}, {\n\tname: 'viewMatrix',\n\treadonly: true\n}, {\n\tname: 'vrDisplay',\n\treadonly: false\n}];\n\nclass CameraComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._camera = new Camera();\n\t\tthis._camera.node = entity;\n\t\tthis._priority = 0;\n\t\tthis.onPostprocessing = null;\n\t\tthis._disablePostEffectsLayer = LAYERID_UI;\n\t\tthis._postEffects = new PostEffectQueue(system.app, this);\n\t}\n\n\tget camera() {\n\t\treturn this._camera;\n\t}\n\n\tdirtyLayerCompositionCameras() {\n\t\tconst layerComp = this.system.app.scene.layers;\n\t\tlayerComp._dirtyCameras = true;\n\t}\n\n\tget disablePostEffectsLayer() {\n\t\treturn this._disablePostEffectsLayer;\n\t}\n\n\tset disablePostEffectsLayer(layer) {\n\t\tthis._disablePostEffectsLayer = layer;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget postEffectsEnabled() {\n\t\treturn this._postEffects.enabled;\n\t}\n\n\tget layers() {\n\t\treturn this._camera.layers;\n\t}\n\n\tset layers(newValue) {\n\t\tvar i, layer;\n\t\tvar layers = this._camera.layers;\n\n\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeCamera(this);\n\t\t}\n\n\t\tthis._camera.layers = newValue;\n\t\tif (!this.enabled || !this.entity.enabled) return;\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addCamera(this);\n\t\t}\n\t}\n\n\tget postEffects() {\n\t\treturn this._postEffects;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tset priority(newValue) {\n\t\tthis._priority = newValue;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget rect() {\n\t\treturn this._camera.rect;\n\t}\n\n\tset rect(value) {\n\t\tthis._camera.rect = value;\n\t\tthis.fire('set:rect', this._camera.rect);\n\t}\n\n\tget clearColorBuffer() {\n\t\treturn this._camera.clearColorBuffer;\n\t}\n\n\tset clearColorBuffer(value) {\n\t\tthis._camera.clearColorBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget clearDepthBuffer() {\n\t\treturn this._camera.clearDepthBuffer;\n\t}\n\n\tset clearDepthBuffer(value) {\n\t\tthis._camera.clearDepthBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget clearStencilBuffer() {\n\t\treturn this._camera.clearStencilBuffer;\n\t}\n\n\tset clearStencilBuffer(value) {\n\t\tthis._camera.clearStencilBuffer = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tget renderTarget() {\n\t\treturn this._camera.renderTarget;\n\t}\n\n\tset renderTarget(value) {\n\t\tthis._camera.renderTarget = value;\n\t\tthis.dirtyLayerCompositionCameras();\n\t}\n\n\tscreenToWorld(screenx, screeny, cameraz, worldCoord) {\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar w = device.clientRect.width;\n\t\tvar h = device.clientRect.height;\n\t\treturn this._camera.screenToWorld(screenx, screeny, cameraz, w, h, worldCoord);\n\t}\n\n\tworldToScreen(worldCoord, screenCoord) {\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar w = device.clientRect.width;\n\t\tvar h = device.clientRect.height;\n\t\treturn this._camera.worldToScreen(worldCoord, w, h, screenCoord);\n\t}\n\n\tonAppPrerender() {\n\t\tthis._camera._viewMatDirty = true;\n\t\tthis._camera._viewProjMatDirty = true;\n\t}\n\n\taddCameraToLayers() {\n\t\tvar layers = this.layers;\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addCamera(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveCameraFromLayers() {\n\t\tvar layers = this.layers;\n\n\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeCamera(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addCameraToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addCamera(this);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeCamera(this);\n\t}\n\n\tonEnable() {\n\t\tvar system = this.system;\n\t\tvar scene = system.app.scene;\n\t\tvar layers = scene.layers;\n\t\tsystem.addCamera(this);\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (layers) {\n\t\t\tlayers.on(\"add\", this.onLayerAdded, this);\n\t\t\tlayers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addCameraToLayers();\n\t\t}\n\n\t\tthis.postEffects.enable();\n\t}\n\n\tonDisable() {\n\t\tvar system = this.system;\n\t\tvar scene = system.app.scene;\n\t\tvar layers = scene.layers;\n\t\tthis.postEffects.disable();\n\t\tthis.removeCameraFromLayers();\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (layers) {\n\t\t\tlayers.off(\"add\", this.onLayerAdded, this);\n\t\t\tlayers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tsystem.removeCamera(this);\n\t}\n\n\tonRemove() {\n\t\tthis.onDisable();\n\t\tthis.off();\n\t}\n\n\tcalculateAspectRatio(rt) {\n\t\tvar src = rt ? rt : this.system.app.graphicsDevice;\n\t\tvar rect = this.rect;\n\t\treturn src.width * rect.z / (src.height * rect.w);\n\t}\n\n\tframeBegin(rt) {\n\t\tif (this.aspectRatioMode === ASPECT_AUTO) {\n\t\t\tthis.aspectRatio = this.calculateAspectRatio(rt);\n\t\t}\n\t}\n\n\tframeEnd() {}\n\n\tenterVr(display, callback) {\n\t\tif (display instanceof Function && !callback) {\n\t\t\tcallback = display;\n\t\t\tdisplay = null;\n\t\t}\n\n\t\tif (!this.system.app.vr) {\n\t\t\tcallback(\"VrManager not created. Enable VR in project settings.\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!display) {\n\t\t\tdisplay = this.system.app.vr.display;\n\t\t}\n\n\t\tif (display) {\n\t\t\tvar self = this;\n\n\t\t\tif (display.capabilities.canPresent) {\n\t\t\t\tdisplay.requestPresent(function (err) {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tself.vrDisplay = display;\n\t\t\t\t\t\tself.vrDisplay.once('beforepresentchange', function (display) {\n\t\t\t\t\t\t\tif (!display.presenting) {\n\t\t\t\t\t\t\t\tself.vrDisplay = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.vrDisplay = display;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(\"No pc.VrDisplay to present\");\n\t\t}\n\t}\n\n\texitVr(callback) {\n\t\tif (this.vrDisplay) {\n\t\t\tif (this.vrDisplay.capabilities.canPresent) {\n\t\t\t\tvar display = this.vrDisplay;\n\t\t\t\tthis.vrDisplay = null;\n\t\t\t\tdisplay.exitPresent(callback);\n\t\t\t} else {\n\t\t\t\tthis.vrDisplay = null;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(\"Not presenting VR\");\n\t\t}\n\t}\n\n\tstartXr(type, spaceType, options) {\n\t\tthis.system.app.xr.start(this, type, spaceType, options);\n\t}\n\n\tendXr(callback) {\n\t\tif (!this._camera.xr) {\n\t\t\tif (callback) callback(new Error(\"Camera is not in XR\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._camera.xr.end(callback);\n\t}\n\n\tcopy(source) {\n\t\tproperties$1.forEach(property => {\n\t\t\tif (!property.readonly) {\n\t\t\t\tconst name = property.name;\n\t\t\t\tthis[name] = source[name];\n\t\t\t}\n\t\t});\n\t\tthis.clearColorBuffer = source.clearColorBuffer;\n\t\tthis.clearDepthBuffer = source.clearDepthBuffer;\n\t\tthis.clearStencilBuffer = source.clearStencilBuffer;\n\t\tthis.disablePostEffectsLayer = source.disablePostEffectsLayer;\n\t\tthis.layers = source.layers;\n\t\tthis.priority = source.priority;\n\t\tthis.renderTarget = source.renderTarget;\n\t\tthis.rect = source.rect;\n\t}\n\n}\n\nproperties$1.forEach(function (property) {\n\tvar name = property.name;\n\tvar options = {};\n\n\toptions.get = function () {\n\t\treturn this._camera[name];\n\t};\n\n\tif (!property.readonly) {\n\t\toptions.set = function (newValue) {\n\t\t\tthis._camera[name] = newValue;\n\t\t};\n\t}\n\n\tObject.defineProperty(CameraComponent.prototype, name, options);\n});\n\nclass CameraComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$g = ['enabled'];\n\nclass CameraComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'camera';\n\t\tthis.ComponentType = CameraComponent;\n\t\tthis.DataType = CameraComponentData;\n\t\tthis.schema = _schema$g;\n\t\tthis.cameras = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.app.on(\"prerender\", this.onAppPrerender, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['aspectRatio', 'aspectRatioMode', 'calculateProjection', 'calculateTransform', 'clearColor', 'clearColorBuffer', 'clearDepthBuffer', 'clearStencilBuffer', 'cullFaces', 'farClip', 'flipFaces', 'fov', 'frustumCulling', 'horizontalFov', 'layers', 'renderTarget', 'nearClip', 'orthoHeight', 'projection', 'priority', 'rect', 'scissorRect'];\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tvar property = properties[i];\n\n\t\t\tif (data.hasOwnProperty(property)) {\n\t\t\t\tvar value = data[property];\n\n\t\t\t\tswitch (property) {\n\t\t\t\t\tcase 'rect':\n\t\t\t\t\tcase 'scissorRect':\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tcomponent[property] = new Vec4(value[0], value[1], value[2], value[3]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'clearColor':\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tcomponent[property] = new Color(value[0], value[1], value[2], value[3]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar c = entity.camera;\n\t\tthis.addComponent(clone, {\n\t\t\taspectRatio: c.aspectRatio,\n\t\t\taspectRatioMode: c.aspectRatioMode,\n\t\t\tcalculateProjection: c.calculateProjection,\n\t\t\tcalculateTransform: c.calculateTransform,\n\t\t\tclearColor: c.clearColor,\n\t\t\tclearColorBuffer: c.clearColorBuffer,\n\t\t\tclearDepthBuffer: c.clearDepthBuffer,\n\t\t\tclearStencilBuffer: c.clearStencilBuffer,\n\t\t\tcullFaces: c.cullFaces,\n\t\t\tfarClip: c.farClip,\n\t\t\tflipFaces: c.flipFaces,\n\t\t\tfov: c.fov,\n\t\t\tfrustumCulling: c.frustumCulling,\n\t\t\thorizontalFov: c.horizontalFov,\n\t\t\tlayers: c.layers,\n\t\t\trenderTarget: c.renderTarget,\n\t\t\tnearClip: c.nearClip,\n\t\t\torthoHeight: c.orthoHeight,\n\t\t\tprojection: c.projection,\n\t\t\tpriority: c.priority,\n\t\t\trect: c.rect,\n\t\t\tscissorRect: c.scissorRect\n\t\t});\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tthis.removeCamera(component);\n\t}\n\n\tonUpdate(dt) {\n\t\tif (this.app.vr) {\n\t\t\tvar components = this.store;\n\n\t\t\tfor (var id in components) {\n\t\t\t\tvar component = components[id];\n\n\t\t\t\tif (component.data.enabled && component.entity.enabled) {\n\t\t\t\t\tvar cameraComponent = component.entity.camera;\n\t\t\t\t\tvar vrDisplay = cameraComponent.vrDisplay;\n\n\t\t\t\t\tif (vrDisplay) {\n\t\t\t\t\t\tvrDisplay.setClipPlanes(cameraComponent.nearClip, cameraComponent.farClip);\n\n\t\t\t\t\t\tif (component.entity) {\n\t\t\t\t\t\t\tcomponent.entity.localTransform.copy(vrDisplay.combinedViewInv);\n\t\t\t\t\t\t\tcomponent.entity._dirtyLocal = false;\n\n\t\t\t\t\t\t\tcomponent.entity._dirtifyWorld();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonAppPrerender() {\n\t\tfor (var i = 0, len = this.cameras.length; i < len; i++) {\n\t\t\tthis.cameras[i].onAppPrerender();\n\t\t}\n\t}\n\n\taddCamera(camera) {\n\t\tthis.cameras.push(camera);\n\t\tthis.sortCamerasByPriority();\n\t}\n\n\tremoveCamera(camera) {\n\t\tvar index = this.cameras.indexOf(camera);\n\n\t\tif (index >= 0) {\n\t\t\tthis.cameras.splice(index, 1);\n\t\t\tthis.sortCamerasByPriority();\n\t\t}\n\t}\n\n\tsortCamerasByPriority() {\n\t\tthis.cameras.sort(function (a, b) {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\t}\n\n}\n\nComponent._buildAccessors(CameraComponent.prototype, _schema$g);\n\nclass CollisionComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._compoundParent = null;\n\t\tthis.entity.on('insert', this._onInsert, this);\n\t\tthis.on('set_type', this.onSetType, this);\n\t\tthis.on('set_halfExtents', this.onSetHalfExtents, this);\n\t\tthis.on('set_radius', this.onSetRadius, this);\n\t\tthis.on('set_height', this.onSetHeight, this);\n\t\tthis.on('set_axis', this.onSetAxis, this);\n\t\tthis.on(\"set_asset\", this.onSetAsset, this);\n\t\tthis.on(\"set_renderAsset\", this.onSetRenderAsset, this);\n\t\tthis.on(\"set_model\", this.onSetModel, this);\n\t\tthis.on(\"set_render\", this.onSetRender, this);\n\t}\n\n\tonSetType(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tthis.system.changeType(this, oldValue, newValue);\n\t\t}\n\t}\n\n\tonSetHalfExtents(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && t === 'box') {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetRadius(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'sphere' || t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetHeight(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetAxis(name, oldValue, newValue) {\n\t\tvar t = this.data.type;\n\n\t\tif (this.data.initialized && (t === 'capsule' || t === 'cylinder' || t === 'cone')) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.asset = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(this.data.asset);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tif (!newValue) {\n\t\t\t\tthis.data.model = null;\n\t\t\t}\n\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetRenderAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.renderAsset = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(this.data.renderAsset);\n\n\t\t\tif (asset) {\n\t\t\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\t\t\t\tasset.on('remove', this.onRenderAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tif (!newValue) {\n\t\t\t\tthis.data.render = null;\n\t\t\t}\n\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t}\n\t}\n\n\tonSetModel(name, oldValue, newValue) {\n\t\tif (this.data.initialized && this.data.type === 'mesh') {\n\t\t\tthis.system.implementations.mesh.doRecreatePhysicalShape(this);\n\t\t}\n\t}\n\n\tonSetRender(name, oldValue, newValue) {\n\t\tthis.onSetModel(name, oldValue, newValue);\n\t}\n\n\tonAssetRemoved(asset) {\n\t\tasset.off('remove', this.onAssetRemoved, this);\n\n\t\tif (this.data.asset === asset.id) {\n\t\t\tthis.asset = null;\n\t\t}\n\t}\n\n\tonRenderAssetRemoved(asset) {\n\t\tasset.off('remove', this.onRenderAssetRemoved, this);\n\n\t\tif (this.data.renderAsset === asset.id) {\n\t\t\tthis.renderAsset = null;\n\t\t}\n\t}\n\n\t_getCompoundChildShapeIndex(shape) {\n\t\tvar compound = this.data.shape;\n\t\tvar shapes = compound.getNumChildShapes();\n\n\t\tfor (var i = 0; i < shapes; i++) {\n\t\t\tvar childShape = compound.getChildShape(i);\n\n\t\t\tif (childShape.ptr === shape.ptr) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_onInsert(parent) {\n\t\tif (typeof Ammo === 'undefined') return;\n\n\t\tif (this._compoundParent) {\n\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t} else if (!this.entity.rigidbody) {\n\t\t\tvar ancestor = this.entity.parent;\n\n\t\t\twhile (ancestor) {\n\t\t\t\tif (ancestor.collision && ancestor.collision.type === 'compound') {\n\t\t\t\t\tif (ancestor.collision.shape.getNumChildShapes() === 0) {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(ancestor.collision);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tancestor = ancestor.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateCompound() {\n\t\tvar entity = this.entity;\n\n\t\tif (entity._dirtyWorld) {\n\t\t\tvar dirty = entity._dirtyLocal;\n\t\t\tvar parent = entity;\n\n\t\t\twhile (parent && !dirty) {\n\t\t\t\tif (parent.collision && parent.collision === this._compoundParent) break;\n\t\t\t\tif (parent._dirtyLocal) dirty = true;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\n\t\t\tif (dirty) {\n\t\t\t\tentity.forEach(this.system.implementations.compound._updateEachDescendantTransform, entity);\n\t\t\t\tvar bodyComponent = this._compoundParent.entity.rigidbody;\n\t\t\t\tif (bodyComponent) bodyComponent.activate();\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this.data.type === 'mesh' && (this.data.asset || this.data.renderAsset) && this.data.initialized) {\n\t\t\tvar asset = this.system.app.assets.get(this.data.asset || this.data.renderAsset);\n\n\t\t\tif (asset && (!asset.resource || !this.data.shape)) {\n\t\t\t\tthis.system.recreatePhysicalShapes(this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this.entity.rigidbody) {\n\t\t\tif (this.entity.rigidbody.enabled) {\n\t\t\t\tthis.entity.rigidbody.enableSimulation();\n\t\t\t}\n\t\t} else if (this._compoundParent && this !== this._compoundParent) {\n\t\t\tif (this._compoundParent.shape.getNumChildShapes() === 0) {\n\t\t\t\tthis.system.recreatePhysicalShapes(this._compoundParent);\n\t\t\t} else {\n\t\t\t\tvar transform = this.system._getNodeTransform(this.entity, this._compoundParent.entity);\n\n\t\t\t\tthis._compoundParent.shape.addChildShape(transform, this.data.shape);\n\n\t\t\t\tAmmo.destroy(transform);\n\t\t\t\tif (this._compoundParent.entity.rigidbody) this._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\t\t} else if (this.entity.trigger) {\n\t\t\tthis.entity.trigger.enable();\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tif (this.entity.rigidbody) {\n\t\t\tthis.entity.rigidbody.disableSimulation();\n\t\t} else if (this._compoundParent && this !== this._compoundParent) {\n\t\t\tif (!this._compoundParent.entity._destroying) {\n\t\t\t\tthis.system._removeCompoundChild(this._compoundParent, this.data.shape);\n\n\t\t\t\tif (this._compoundParent.entity.rigidbody) this._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\t\t} else if (this.entity.trigger) {\n\t\t\tthis.entity.trigger.disable();\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tif (this.asset) {\n\t\t\tthis.asset = null;\n\t\t}\n\n\t\tif (this.renderAsset) {\n\t\t\tthis.renderAsset = null;\n\t\t}\n\n\t\tthis.entity.off('insert', this._onInsert, this);\n\t\tthis.off();\n\t}\n\n}\n\nclass CollisionComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.type = 'box';\n\t\tthis.halfExtents = new Vec3(0.5, 0.5, 0.5);\n\t\tthis.radius = 0.5;\n\t\tthis.axis = 1;\n\t\tthis.height = 2;\n\t\tthis.asset = null;\n\t\tthis.renderAsset = null;\n\t\tthis.shape = null;\n\t\tthis.model = null;\n\t\tthis.render = null;\n\t\tthis.initialized = false;\n\t}\n\n}\n\nconst BODYTYPE_STATIC = 'static';\nconst BODYTYPE_DYNAMIC = 'dynamic';\nconst BODYTYPE_KINEMATIC = 'kinematic';\nconst BODYFLAG_STATIC_OBJECT = 1;\nconst BODYFLAG_KINEMATIC_OBJECT = 2;\nconst BODYFLAG_NORESPONSE_OBJECT = 4;\nconst BODYSTATE_ACTIVE_TAG = 1;\nconst BODYSTATE_ISLAND_SLEEPING = 2;\nconst BODYSTATE_WANTS_DEACTIVATION = 3;\nconst BODYSTATE_DISABLE_DEACTIVATION = 4;\nconst BODYSTATE_DISABLE_SIMULATION = 5;\nconst BODYGROUP_NONE = 0;\nconst BODYGROUP_DEFAULT = 1;\nconst BODYGROUP_DYNAMIC = 1;\nconst BODYGROUP_STATIC = 2;\nconst BODYGROUP_KINEMATIC = 4;\nconst BODYGROUP_ENGINE_1 = 8;\nconst BODYGROUP_TRIGGER = 16;\nconst BODYGROUP_ENGINE_2 = 32;\nconst BODYGROUP_ENGINE_3 = 64;\nconst BODYGROUP_USER_1 = 128;\nconst BODYGROUP_USER_2 = 256;\nconst BODYGROUP_USER_3 = 512;\nconst BODYGROUP_USER_4 = 1024;\nconst BODYGROUP_USER_5 = 2048;\nconst BODYGROUP_USER_6 = 4096;\nconst BODYGROUP_USER_7 = 8192;\nconst BODYGROUP_USER_8 = 16384;\nconst BODYMASK_NONE = 0;\nconst BODYMASK_ALL = 65535;\nconst BODYMASK_STATIC = 2;\nconst BODYMASK_NOT_STATIC = 65535 ^ 2;\nconst BODYMASK_NOT_STATIC_KINEMATIC = 65535 ^ (2 | 4);\n\nvar ammoVec1$1, ammoQuat$1, ammoTransform$1;\n\nclass Trigger {\n\tconstructor(app, component, data) {\n\t\tthis.entity = component.entity;\n\t\tthis.component = component;\n\t\tthis.app = app;\n\n\t\tif (typeof Ammo !== 'undefined' && !ammoVec1$1) {\n\t\t\tammoVec1$1 = new Ammo.btVector3();\n\t\t\tammoQuat$1 = new Ammo.btQuaternion();\n\t\t\tammoTransform$1 = new Ammo.btTransform();\n\t\t}\n\n\t\tthis.initialize(data);\n\t}\n\n\tinitialize(data) {\n\t\tvar entity = this.entity;\n\t\tvar shape = data.shape;\n\n\t\tif (shape && typeof Ammo !== 'undefined') {\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t}\n\n\t\t\tvar mass = 1;\n\t\t\tvar pos = entity.getPosition();\n\t\t\tvar rot = entity.getRotation();\n\t\t\tammoVec1$1.setValue(pos.x, pos.y, pos.z);\n\t\t\tammoQuat$1.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\t\tammoTransform$1.setOrigin(ammoVec1$1);\n\t\t\tammoTransform$1.setRotation(ammoQuat$1);\n\t\t\tvar body = this.app.systems.rigidbody.createBody(mass, shape, ammoTransform$1);\n\t\t\tbody.setRestitution(0);\n\t\t\tbody.setFriction(0);\n\t\t\tbody.setDamping(0, 0);\n\t\t\tammoVec1$1.setValue(0, 0, 0);\n\t\t\tbody.setLinearFactor(ammoVec1$1);\n\t\t\tbody.setAngularFactor(ammoVec1$1);\n\t\t\tbody.setCollisionFlags(body.getCollisionFlags() | BODYFLAG_NORESPONSE_OBJECT);\n\t\t\tbody.entity = entity;\n\t\t\tthis.body = body;\n\n\t\t\tif (this.component.enabled && entity.enabled) {\n\t\t\t\tthis.enable();\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tthis.disable();\n\t\tthis.app.systems.rigidbody.destroyBody(body);\n\t}\n\n\t_getEntityTransform(transform) {\n\t\tvar pos = this.entity.getPosition();\n\t\tvar rot = this.entity.getRotation();\n\t\tammoVec1$1.setValue(pos.x, pos.y, pos.z);\n\t\tammoQuat$1.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setOrigin(ammoVec1$1);\n\t\ttransform.setRotation(ammoQuat$1);\n\t}\n\n\tupdateTransform() {\n\t\tthis._getEntityTransform(ammoTransform$1);\n\n\t\tvar body = this.body;\n\t\tbody.setWorldTransform(ammoTransform$1);\n\t\tbody.activate();\n\t}\n\n\tenable() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tvar systems = this.app.systems;\n\t\tsystems.rigidbody.addBody(body, BODYGROUP_TRIGGER, BODYMASK_NOT_STATIC ^ BODYGROUP_TRIGGER);\n\n\t\tsystems.rigidbody._triggers.push(this);\n\n\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\tthis.updateTransform();\n\t}\n\n\tdisable() {\n\t\tvar body = this.body;\n\t\tif (!body) return;\n\t\tvar systems = this.app.systems;\n\n\t\tvar idx = systems.rigidbody._triggers.indexOf(this);\n\n\t\tif (idx > -1) {\n\t\t\tsystems.rigidbody._triggers.splice(idx, 1);\n\t\t}\n\n\t\tsystems.rigidbody.removeBody(body);\n\t\tbody.forceActivationState(BODYSTATE_DISABLE_SIMULATION);\n\t}\n\n}\n\nvar mat4 = new Mat4();\nvar vec3 = new Vec3();\nvar quat = new Quat();\nvar tempGraphNode = new GraphNode();\nconst _schema$f = ['enabled', 'type', 'halfExtents', 'radius', 'axis', 'height', 'asset', 'renderAsset', 'shape', 'model', 'render'];\n\nclass CollisionSystemImpl {\n\tconstructor(system) {\n\t\tthis.system = system;\n\t}\n\n\tbeforeInitialize(component, data) {\n\t\tdata.shape = null;\n\t\tdata.model = new Model();\n\t\tdata.model.graph = new GraphNode();\n\t}\n\n\tafterInitialize(component, data) {\n\t\tthis.recreatePhysicalShapes(component);\n\t\tcomponent.data.initialized = true;\n\t}\n\n\treset(component, data) {\n\t\tthis.beforeInitialize(component, data);\n\t\tthis.afterInitialize(component, data);\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tvar entity = component.entity;\n\t\tvar data = component.data;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t\tdelete entity.trigger;\n\t\t\t}\n\n\t\t\tif (data.shape) {\n\t\t\t\tif (component._compoundParent) {\n\t\t\t\t\tthis.system._removeCompoundChild(component._compoundParent, data.shape);\n\n\t\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t\t}\n\n\t\t\t\tAmmo.destroy(data.shape);\n\t\t\t\tdata.shape = null;\n\t\t\t}\n\n\t\t\tdata.shape = this.createPhysicalShape(component.entity, data);\n\t\t\tvar firstCompoundChild = !component._compoundParent;\n\n\t\t\tif (data.type === 'compound' && (!component._compoundParent || component === component._compoundParent)) {\n\t\t\t\tcomponent._compoundParent = component;\n\t\t\t\tentity.forEach(this._addEachDescendant, component);\n\t\t\t} else if (data.type !== 'compound') {\n\t\t\t\tif (component._compoundParent && component === component._compoundParent) {\n\t\t\t\t\tentity.forEach(this.system.implementations.compound._updateEachDescendant, component);\n\t\t\t\t}\n\n\t\t\t\tif (!component.rigidbody) {\n\t\t\t\t\tcomponent._compoundParent = null;\n\t\t\t\t\tvar parent = entity.parent;\n\n\t\t\t\t\twhile (parent) {\n\t\t\t\t\t\tif (parent.collision && parent.collision.type === 'compound') {\n\t\t\t\t\t\t\tcomponent._compoundParent = parent.collision;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparent = parent.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (component._compoundParent) {\n\t\t\t\tif (component !== component._compoundParent) {\n\t\t\t\t\tif (firstCompoundChild && component._compoundParent.shape.getNumChildShapes() === 0) {\n\t\t\t\t\t\tthis.system.recreatePhysicalShapes(component._compoundParent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.system.updateCompoundChildTransform(entity);\n\t\t\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (entity.rigidbody) {\n\t\t\t\tentity.rigidbody.disableSimulation();\n\t\t\t\tentity.rigidbody.createBody();\n\n\t\t\t\tif (entity.enabled && entity.rigidbody.enabled) {\n\t\t\t\t\tentity.rigidbody.enableSimulation();\n\t\t\t\t}\n\t\t\t} else if (!component._compoundParent) {\n\t\t\t\tif (!entity.trigger) {\n\t\t\t\t\tentity.trigger = new Trigger(this.system.app, component, data);\n\t\t\t\t} else {\n\t\t\t\t\tentity.trigger.initialize(data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreatePhysicalShape(entity, data) {\n\t\treturn undefined;\n\t}\n\n\tupdateTransform(component, position, rotation, scale) {\n\t\tif (component.entity.trigger) {\n\t\t\tcomponent.entity.trigger.updateTransform();\n\t\t}\n\t}\n\n\tbeforeRemove(entity, component) {\n\t\tif (component.data.shape) {\n\t\t\tif (component._compoundParent && !component._compoundParent.entity._destroying) {\n\t\t\t\tthis.system._removeCompoundChild(component._compoundParent, component.data.shape);\n\n\t\t\t\tif (component._compoundParent.entity.rigidbody) component._compoundParent.entity.rigidbody.activate();\n\t\t\t}\n\n\t\t\tcomponent._compoundParent = null;\n\t\t\tAmmo.destroy(component.data.shape);\n\t\t\tcomponent.data.shape = null;\n\t\t}\n\t}\n\n\tremove(entity, data) {\n\t\tvar app = this.system.app;\n\n\t\tif (entity.rigidbody && entity.rigidbody.body) {\n\t\t\tentity.rigidbody.disableSimulation();\n\t\t}\n\n\t\tif (entity.trigger) {\n\t\t\tentity.trigger.destroy();\n\t\t\tdelete entity.trigger;\n\t\t}\n\n\t\tif (app.scene.containsModel(data.model)) {\n\t\t\tapp.root.removeChild(data.model.graph);\n\t\t\tapp.scene.removeModel(data.model);\n\t\t}\n\t}\n\n\tclone(entity, clone) {\n\t\tvar src = this.system.store[entity.getGuid()];\n\t\tvar data = {\n\t\t\tenabled: src.data.enabled,\n\t\t\ttype: src.data.type,\n\t\t\thalfExtents: [src.data.halfExtents.x, src.data.halfExtents.y, src.data.halfExtents.z],\n\t\t\tradius: src.data.radius,\n\t\t\taxis: src.data.axis,\n\t\t\theight: src.data.height,\n\t\t\tasset: src.data.asset,\n\t\t\trenderAsset: src.data.renderAsset,\n\t\t\tmodel: src.data.model,\n\t\t\trender: src.data.render\n\t\t};\n\t\treturn this.system.addComponent(clone, data);\n\t}\n\n}\n\nclass CollisionBoxSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tvar he = data.halfExtents;\n\t\t\tvar ammoHe = new Ammo.btVector3(he ? he.x : 0.5, he ? he.y : 0.5, he ? he.z : 0.5);\n\t\t\tvar shape = new Ammo.btBoxShape(ammoHe);\n\t\t\tAmmo.destroy(ammoHe);\n\t\t\treturn shape;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nclass CollisionSphereSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\treturn new Ammo.btSphereShape(data.radius);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nclass CollisionCapsuleSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius || 0.5;\n\t\tvar height = Math.max((data.height || 2) - 2 * radius, 0);\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\tshape = new Ammo.btCapsuleShapeX(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\tshape = new Ammo.btCapsuleShape(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\tshape = new Ammo.btCapsuleShapeZ(radius, height);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionCylinderSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar halfExtents = null;\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius !== undefined ? data.radius : 0.5;\n\t\tvar height = data.height !== undefined ? data.height : 1;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(height * 0.5, radius, radius);\n\t\t\t\t\tshape = new Ammo.btCylinderShapeX(halfExtents);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(radius, height * 0.5, radius);\n\t\t\t\t\tshape = new Ammo.btCylinderShape(halfExtents);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\thalfExtents = new Ammo.btVector3(radius, radius, height * 0.5);\n\t\t\t\t\tshape = new Ammo.btCylinderShapeZ(halfExtents);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (halfExtents) Ammo.destroy(halfExtents);\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionConeSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tvar shape = null;\n\t\tvar axis = data.axis !== undefined ? data.axis : 1;\n\t\tvar radius = data.radius !== undefined ? data.radius : 0.5;\n\t\tvar height = data.height !== undefined ? data.height : 1;\n\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tswitch (axis) {\n\t\t\t\tcase 0:\n\t\t\t\t\tshape = new Ammo.btConeShapeX(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\tshape = new Ammo.btConeShape(radius, height);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\tshape = new Ammo.btConeShapeZ(radius, height);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn shape;\n\t}\n\n}\n\nclass CollisionMeshSystemImpl extends CollisionSystemImpl {\n\tbeforeInitialize(component, data) {}\n\n\tcreateAmmoMesh(mesh, node, shape) {\n\t\tvar triMesh;\n\t\tvar i;\n\n\t\tif (this.system._triMeshCache[mesh.id]) {\n\t\t\ttriMesh = this.system._triMeshCache[mesh.id];\n\t\t} else {\n\t\t\tvar vb = mesh.vertexBuffer;\n\t\t\tvar format = vb.getFormat();\n\t\t\tvar stride;\n\t\t\tvar positions;\n\n\t\t\tfor (i = 0; i < format.elements.length; i++) {\n\t\t\t\tvar element = format.elements[i];\n\n\t\t\t\tif (element.name === SEMANTIC_POSITION) {\n\t\t\t\t\tpositions = new Float32Array(vb.lock(), element.offset);\n\t\t\t\t\tstride = element.stride / 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar indices = [];\n\t\t\tmesh.getIndices(indices);\n\t\t\tvar numTriangles = mesh.primitive[0].count / 3;\n\t\t\tvar v1 = new Ammo.btVector3();\n\t\t\tvar v2 = new Ammo.btVector3();\n\t\t\tvar v3 = new Ammo.btVector3();\n\t\t\tvar i1, i2, i3;\n\t\t\tvar base = mesh.primitive[0].base;\n\t\t\ttriMesh = new Ammo.btTriangleMesh();\n\t\t\tthis.system._triMeshCache[mesh.id] = triMesh;\n\n\t\t\tfor (i = 0; i < numTriangles; i++) {\n\t\t\t\ti1 = indices[base + i * 3] * stride;\n\t\t\t\ti2 = indices[base + i * 3 + 1] * stride;\n\t\t\t\ti3 = indices[base + i * 3 + 2] * stride;\n\t\t\t\tv1.setValue(positions[i1], positions[i1 + 1], positions[i1 + 2]);\n\t\t\t\tv2.setValue(positions[i2], positions[i2 + 1], positions[i2 + 2]);\n\t\t\t\tv3.setValue(positions[i3], positions[i3 + 1], positions[i3 + 2]);\n\t\t\t\ttriMesh.addTriangle(v1, v2, v3, true);\n\t\t\t}\n\n\t\t\tAmmo.destroy(v1);\n\t\t\tAmmo.destroy(v2);\n\t\t\tAmmo.destroy(v3);\n\t\t}\n\n\t\tvar useQuantizedAabbCompression = true;\n\t\tvar triMeshShape = new Ammo.btBvhTriangleMeshShape(triMesh, useQuantizedAabbCompression);\n\n\t\tvar scaling = this.system._getNodeScaling(node);\n\n\t\ttriMeshShape.setLocalScaling(scaling);\n\t\tAmmo.destroy(scaling);\n\n\t\tvar transform = this.system._getNodeTransform(node);\n\n\t\tshape.addChildShape(transform, triMeshShape);\n\t\tAmmo.destroy(transform);\n\t}\n\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo === 'undefined') return;\n\n\t\tif (data.model || data.render) {\n\t\t\tvar shape = new Ammo.btCompoundShape();\n\n\t\t\tif (data.model) {\n\t\t\t\tvar meshInstances = data.model.meshInstances;\n\n\t\t\t\tfor (let i = 0; i < meshInstances.length; i++) {\n\t\t\t\t\tthis.createAmmoMesh(meshInstances[i].mesh, meshInstances[i].node, shape);\n\t\t\t\t}\n\t\t\t} else if (data.render) {\n\t\t\t\tvar meshes = data.render.meshes;\n\n\t\t\t\tfor (let i = 0; i < meshes.length; i++) {\n\t\t\t\t\tthis.createAmmoMesh(meshes[i], tempGraphNode, shape);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar entityTransform = entity.getWorldTransform();\n\t\t\tvar scale = entityTransform.getScale();\n\t\t\tvar vec = new Ammo.btVector3(scale.x, scale.y, scale.z);\n\t\t\tshape.setLocalScaling(vec);\n\t\t\tAmmo.destroy(vec);\n\t\t\treturn shape;\n\t\t}\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tvar data = component.data;\n\n\t\tif (data.renderAsset || data.asset) {\n\t\t\tif (component.enabled && component.entity.enabled) {\n\t\t\t\tthis.loadAsset(component, data.renderAsset || data.asset, data.renderAsset ? 'render' : 'model');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.doRecreatePhysicalShape(component);\n\t}\n\n\tloadAsset(component, id, property) {\n\t\tvar self = this;\n\t\tvar data = component.data;\n\t\tvar assets = this.system.app.assets;\n\t\tvar asset = assets.get(id);\n\n\t\tif (asset) {\n\t\t\tasset.ready(function (asset) {\n\t\t\t\tdata[property] = asset.resource;\n\t\t\t\tself.doRecreatePhysicalShape(component);\n\t\t\t});\n\t\t\tassets.load(asset);\n\t\t} else {\n\t\t\tassets.once(\"add:\" + id, function (asset) {\n\t\t\t\tasset.ready(function (asset) {\n\t\t\t\t\tdata[property] = asset.resource;\n\t\t\t\t\tself.doRecreatePhysicalShape(component);\n\t\t\t\t});\n\t\t\t\tassets.load(asset);\n\t\t\t});\n\t\t}\n\t}\n\n\tdoRecreatePhysicalShape(component) {\n\t\tvar entity = component.entity;\n\t\tvar data = component.data;\n\n\t\tif (data.model || data.render) {\n\t\t\tthis.destroyShape(data);\n\t\t\tdata.shape = this.createPhysicalShape(entity, data);\n\n\t\t\tif (entity.rigidbody) {\n\t\t\t\tentity.rigidbody.disableSimulation();\n\t\t\t\tentity.rigidbody.createBody();\n\n\t\t\t\tif (entity.enabled && entity.rigidbody.enabled) {\n\t\t\t\t\tentity.rigidbody.enableSimulation();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!entity.trigger) {\n\t\t\t\t\tentity.trigger = new Trigger(this.system.app, component, data);\n\t\t\t\t} else {\n\t\t\t\t\tentity.trigger.initialize(data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.beforeRemove(entity, component);\n\t\t\tthis.remove(entity, data);\n\t\t}\n\t}\n\n\tupdateTransform(component, position, rotation, scale) {\n\t\tif (component.shape) {\n\t\t\tvar entityTransform = component.entity.getWorldTransform();\n\t\t\tvar worldScale = entityTransform.getScale();\n\t\t\tvar previousScale = component.shape.getLocalScaling();\n\n\t\t\tif (worldScale.x !== previousScale.x() || worldScale.y !== previousScale.y() || worldScale.z !== previousScale.z()) {\n\t\t\t\tthis.doRecreatePhysicalShape(component);\n\t\t\t}\n\t\t}\n\n\t\tsuper.updateTransform(component, position, rotation, scale);\n\t}\n\n\tdestroyShape(data) {\n\t\tif (!data.shape) return;\n\t\tvar numShapes = data.shape.getNumChildShapes();\n\n\t\tfor (var i = 0; i < numShapes; i++) {\n\t\t\tvar shape = data.shape.getChildShape(i);\n\t\t\tAmmo.destroy(shape);\n\t\t}\n\n\t\tAmmo.destroy(data.shape);\n\t\tdata.shape = null;\n\t}\n\n\tremove(entity, data) {\n\t\tthis.destroyShape(data);\n\t\tsuper.remove(entity, data);\n\t}\n\n}\n\nclass CollisionCompoundSystemImpl extends CollisionSystemImpl {\n\tcreatePhysicalShape(entity, data) {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\treturn new Ammo.btCompoundShape();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t_addEachDescendant(entity) {\n\t\tif (!entity.collision || entity.rigidbody) return;\n\t\tentity.collision._compoundParent = this;\n\n\t\tif (entity !== this.entity) {\n\t\t\tentity.collision.system.recreatePhysicalShapes(entity.collision);\n\t\t}\n\t}\n\n\t_updateEachDescendant(entity) {\n\t\tif (!entity.collision) return;\n\t\tif (entity.collision._compoundParent !== this) return;\n\t\tentity.collision._compoundParent = null;\n\n\t\tif (entity !== this.entity && !entity.rigidbody) {\n\t\t\tentity.collision.system.recreatePhysicalShapes(entity.collision);\n\t\t}\n\t}\n\n\t_updateEachDescendantTransform(entity) {\n\t\tif (!entity.collision || entity.collision._compoundParent !== this.collision._compoundParent) return;\n\t\tthis.collision.system.updateCompoundChildTransform(entity);\n\t}\n\n}\n\nclass CollisionComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = \"collision\";\n\t\tthis.ComponentType = CollisionComponent;\n\t\tthis.DataType = CollisionComponentData;\n\t\tthis.schema = _schema$f;\n\t\tthis.implementations = {};\n\t\tthis._triMeshCache = {};\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tproperties = ['type', 'halfExtents', 'radius', 'axis', 'height', 'shape', 'model', 'asset', 'render', 'renderAsset', 'enabled'];\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tvar property = properties[i];\n\t\t\tdata[property] = _data[property];\n\t\t}\n\n\t\tvar idx;\n\n\t\tif (_data.hasOwnProperty('asset')) {\n\t\t\tidx = properties.indexOf('model');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = properties.indexOf('render');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\t\t} else if (_data.hasOwnProperty('model')) {\n\t\t\tidx = properties.indexOf('asset');\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tproperties.splice(idx, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (!data.type) {\n\t\t\tdata.type = component.data.type;\n\t\t}\n\n\t\tcomponent.data.type = data.type;\n\n\t\tif (data.halfExtents && Array.isArray(data.halfExtents)) {\n\t\t\tdata.halfExtents = new Vec3(data.halfExtents[0], data.halfExtents[1], data.halfExtents[2]);\n\t\t}\n\n\t\tvar impl = this._createImplementation(data.type);\n\n\t\timpl.beforeInitialize(component, data);\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\timpl.afterInitialize(component, data);\n\t}\n\n\t_createImplementation(type) {\n\t\tif (this.implementations[type] === undefined) {\n\t\t\tvar impl;\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'box':\n\t\t\t\t\timpl = new CollisionBoxSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sphere':\n\t\t\t\t\timpl = new CollisionSphereSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'capsule':\n\t\t\t\t\timpl = new CollisionCapsuleSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'cylinder':\n\t\t\t\t\timpl = new CollisionCylinderSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'cone':\n\t\t\t\t\timpl = new CollisionConeSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\timpl = new CollisionMeshSystemImpl(this);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'compound':\n\t\t\t\t\timpl = new CollisionCompoundSystemImpl(this);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.implementations[type] = impl;\n\t\t}\n\n\t\treturn this.implementations[type];\n\t}\n\n\t_getImplementation(entity) {\n\t\treturn this.implementations[entity.collision.data.type];\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\treturn this._getImplementation(entity).clone(entity, clone);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tthis.implementations[component.data.type].beforeRemove(entity, component);\n\t\tcomponent.onBeforeRemove();\n\t}\n\n\tonRemove(entity, data) {\n\t\tthis.implementations[data.type].remove(entity, data);\n\t}\n\n\tupdateCompoundChildTransform(entity) {\n\t\tthis._removeCompoundChild(entity.collision._compoundParent, entity.collision.data.shape);\n\n\t\tif (entity.enabled && entity.collision.enabled) {\n\t\t\tvar transform = this._getNodeTransform(entity, entity.collision._compoundParent.entity);\n\n\t\t\tentity.collision._compoundParent.shape.addChildShape(transform, entity.collision.data.shape);\n\n\t\t\tAmmo.destroy(transform);\n\t\t}\n\t}\n\n\t_removeCompoundChild(collision, shape) {\n\t\tif (collision.shape.removeChildShape) {\n\t\t\tcollision.shape.removeChildShape(shape);\n\t\t} else {\n\t\t\tvar ind = collision._getCompoundChildShapeIndex(shape);\n\n\t\t\tif (ind !== null) {\n\t\t\t\tcollision.shape.removeChildShapeByIndex(ind);\n\t\t\t}\n\t\t}\n\t}\n\n\tonTransformChanged(component, position, rotation, scale) {\n\t\tthis.implementations[component.data.type].updateTransform(component, position, rotation, scale);\n\t}\n\n\tchangeType(component, previousType, newType) {\n\t\tthis.implementations[previousType].beforeRemove(component.entity, component);\n\t\tthis.implementations[previousType].remove(component.entity, component.data);\n\n\t\tthis._createImplementation(newType).reset(component, component.data);\n\t}\n\n\trecreatePhysicalShapes(component) {\n\t\tthis.implementations[component.data.type].recreatePhysicalShapes(component);\n\t}\n\n\t_calculateNodeRelativeTransform(node, relative) {\n\t\tif (node === relative) {\n\t\t\tvar scale = node.getWorldTransform().getScale();\n\t\t\tmat4.setScale(scale.x, scale.y, scale.z);\n\t\t} else {\n\t\t\tthis._calculateNodeRelativeTransform(node.parent, relative);\n\n\t\t\tmat4.mul(node.getLocalTransform());\n\t\t}\n\t}\n\n\t_getNodeScaling(node) {\n\t\tvar wtm = node.getWorldTransform();\n\t\tvar scl = wtm.getScale();\n\t\treturn new Ammo.btVector3(scl.x, scl.y, scl.z);\n\t}\n\n\t_getNodeTransform(node, relative) {\n\t\tvar pos, rot;\n\n\t\tif (relative) {\n\t\t\tthis._calculateNodeRelativeTransform(node, relative);\n\n\t\t\tpos = vec3;\n\t\t\trot = quat;\n\t\t\tmat4.getTranslation(pos);\n\t\t\trot.setFromMat4(mat4);\n\t\t} else {\n\t\t\tpos = node.getPosition();\n\t\t\trot = node.getRotation();\n\t\t}\n\n\t\tvar transform = new Ammo.btTransform();\n\t\ttransform.setIdentity();\n\t\tvar origin = transform.getOrigin();\n\t\torigin.setValue(pos.x, pos.y, pos.z);\n\t\tvar ammoQuat = new Ammo.btQuaternion();\n\t\tammoQuat.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setRotation(ammoQuat);\n\t\tAmmo.destroy(ammoQuat);\n\t\tAmmo.destroy(origin);\n\t\treturn transform;\n\t}\n\n\tdestroy() {\n\t\tfor (var key in this._triMeshCache) {\n\t\t\tAmmo.destroy(this._triMeshCache[key]);\n\t\t}\n\n\t\tthis._triMeshCache = null;\n\t\tsuper.destroy();\n\t}\n\n}\n\nComponent._buildAccessors(CollisionComponent.prototype, _schema$f);\n\nclass ComponentSystemRegistry {\n\tconstructor() {\n\t\tthis.list = [];\n\t}\n\n\tadd(system) {\n\t\tvar id = system.id;\n\n\t\tif (this[id]) {\n\t\t\tthrow new Error(\"ComponentSystem name '\" + id + \"' already registered or not allowed\");\n\t\t}\n\n\t\tthis[id] = system;\n\t\tthis.list.push(system);\n\t}\n\n\tremove(system) {\n\t\tvar id = system.id;\n\n\t\tif (!this[id]) {\n\t\t\tthrow new Error(\"No ComponentSystem named '\" + id + \"' registered\");\n\t\t}\n\n\t\tdelete this[id];\n\t\tvar index = this.list.indexOf(this[id]);\n\n\t\tif (index !== -1) {\n\t\t\tthis.list.splice(index, 1);\n\t\t}\n\t}\n\n}\n\nconst ELEMENTTYPE_GROUP = 'group';\nconst ELEMENTTYPE_IMAGE = 'image';\nconst ELEMENTTYPE_TEXT = 'text';\n\nclass StencilParameters {\n\tconstructor(options) {\n\t\tthis.func = options.func === undefined ? FUNC_ALWAYS : options.func;\n\t\tthis.ref = options.ref || 0;\n\t\tthis.readMask = options.readMask === undefined ? 0xFF : options.readMask;\n\t\tthis.writeMask = options.writeMask === undefined ? 0xFF : options.writeMask;\n\t\tthis.fail = options.fail || STENCILOP_KEEP;\n\t\tthis.zfail = options.zfail || STENCILOP_KEEP;\n\t\tthis.zpass = options.zpass || STENCILOP_KEEP;\n\t}\n\n\tclone() {\n\t\treturn new StencilParameters({\n\t\t\tfunc: this.func,\n\t\t\tref: this.ref,\n\t\t\treadMask: this.readMask,\n\t\t\twriteMask: this.writeMask,\n\t\t\tfail: this.fail,\n\t\t\tzfail: this.zfail,\n\t\t\tzpass: this.zpass\n\t\t});\n\t}\n\n}\n\nclass ImageRenderable {\n\tconstructor(entity, mesh, material) {\n\t\tthis._entity = entity;\n\t\tthis._element = entity.element;\n\t\tthis.model = new Model();\n\t\tthis.node = new GraphNode();\n\t\tthis.model.graph = this.node;\n\t\tthis.mesh = mesh;\n\t\tthis.meshInstance = new MeshInstance(this.mesh, material, this.node);\n\t\tthis.meshInstance.name = 'ImageElement: ' + entity.name;\n\t\tthis.meshInstance.castShadow = false;\n\t\tthis.meshInstance.receiveShadow = false;\n\t\tthis._meshDirty = false;\n\t\tthis.model.meshInstances.push(this.meshInstance);\n\n\t\tthis._entity.addChild(this.model.graph);\n\n\t\tthis.model._entity = this._entity;\n\t\tthis.unmaskMeshInstance = null;\n\t}\n\n\tdestroy() {\n\t\tthis.setMaterial(null);\n\n\t\tthis._element.removeModelFromLayers(this.model);\n\n\t\tthis.model.destroy();\n\t\tthis.model = null;\n\t\tthis.node = null;\n\t\tthis.mesh = null;\n\t\tthis.meshInstance = null;\n\t\tthis._entity = null;\n\t\tthis._element = null;\n\t}\n\n\tsetMesh(mesh) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.mesh = mesh;\n\t\tthis.meshInstance.mesh = mesh;\n\t\tthis.meshInstance.visible = !!mesh;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.mesh = mesh;\n\t\t}\n\n\t\tthis.forceUpdateAabb();\n\t}\n\n\tsetMask(mask) {\n\t\tif (!this.meshInstance) return;\n\n\t\tif (mask) {\n\t\t\tthis.unmaskMeshInstance = new MeshInstance(this.mesh, this.meshInstance.material, this.node);\n\t\t\tthis.unmaskMeshInstance.name = 'Unmask: ' + this._entity.name;\n\t\t\tthis.unmaskMeshInstance.castShadow = false;\n\t\t\tthis.unmaskMeshInstance.receiveShadow = false;\n\t\t\tthis.unmaskMeshInstance.pick = false;\n\t\t\tthis.model.meshInstances.push(this.unmaskMeshInstance);\n\n\t\t\tfor (var name in this.meshInstance.parameters) {\n\t\t\t\tthis.unmaskMeshInstance.setParameter(name, this.meshInstance.parameters[name].data);\n\t\t\t}\n\t\t} else {\n\t\t\tvar idx = this.model.meshInstances.indexOf(this.unmaskMeshInstance);\n\n\t\t\tif (idx >= 0) {\n\t\t\t\tthis.model.meshInstances.splice(idx, 1);\n\t\t\t}\n\n\t\t\tthis.unmaskMeshInstance = null;\n\t\t}\n\n\t\tif (this._entity.enabled && this._element.enabled) {\n\t\t\tthis._element.removeModelFromLayers(this.model);\n\n\t\t\tthis._element.addModelToLayers(this.model);\n\t\t}\n\t}\n\n\tsetMaterial(material) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.material = material;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.material = material;\n\t\t}\n\t}\n\n\tsetParameter(name, value) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.setParameter(name, value);\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.setParameter(name, value);\n\t\t}\n\t}\n\n\tdeleteParameter(name) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.deleteParameter(name);\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.deleteParameter(name);\n\t\t}\n\t}\n\n\tsetUnmaskDrawOrder() {\n\t\tif (!this.meshInstance) return;\n\n\t\tvar getLastChild = function getLastChild(e) {\n\t\t\tvar last;\n\t\t\tvar c = e.children;\n\t\t\tvar l = c.length;\n\n\t\t\tif (l) {\n\t\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\t\tif (c[i].element) {\n\t\t\t\t\t\tlast = c[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!last) return null;\n\t\t\t\tvar child = getLastChild(last);\n\n\t\t\t\tif (child) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\n\t\t\t\treturn last;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tvar lastChild = getLastChild(this._entity);\n\n\t\t\tif (lastChild && lastChild.element) {\n\t\t\t\tthis.unmaskMeshInstance.drawOrder = lastChild.element.drawOrder + lastChild.element.getMaskOffset();\n\t\t\t} else {\n\t\t\t\tthis.unmaskMeshInstance.drawOrder = this.meshInstance.drawOrder + this._element.getMaskOffset();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDrawOrder(drawOrder) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.drawOrder = drawOrder;\n\t}\n\n\tsetCull(cull) {\n\t\tif (!this.meshInstance) return;\n\t\tvar element = this._element;\n\t\tvar visibleFn = null;\n\n\t\tif (cull && element._isScreenCulled()) {\n\t\t\tvisibleFn = function (camera) {\n\t\t\t\treturn element.isVisibleForCamera(camera);\n\t\t\t};\n\t\t}\n\n\t\tthis.meshInstance.cull = cull;\n\t\tthis.meshInstance.isVisibleFunc = visibleFn;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.cull = cull;\n\t\t\tthis.unmaskMeshInstance.isVisibleFunc = visibleFn;\n\t\t}\n\t}\n\n\tsetScreenSpace(screenSpace) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.screenSpace = screenSpace;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.screenSpace = screenSpace;\n\t\t}\n\t}\n\n\tsetLayer(layer) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance.layer = layer;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance.layer = layer;\n\t\t}\n\t}\n\n\tforceUpdateAabb(mask) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance._aabbVer = -1;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance._aabbVer = -1;\n\t\t}\n\t}\n\n\tsetAabbFunc(fn) {\n\t\tif (!this.meshInstance) return;\n\t\tthis.meshInstance._updateAabbFunc = fn;\n\n\t\tif (this.unmaskMeshInstance) {\n\t\t\tthis.unmaskMeshInstance._updateAabbFunc = fn;\n\t\t}\n\t}\n\n}\n\nclass ImageElement {\n\tconstructor(element) {\n\t\tthis._element = element;\n\t\tthis._entity = element.entity;\n\t\tthis._system = element.system;\n\t\tthis._textureAsset = null;\n\t\tthis._texture = null;\n\t\tthis._materialAsset = null;\n\t\tthis._material = null;\n\t\tthis._spriteAsset = null;\n\t\tthis._sprite = null;\n\t\tthis._spriteFrame = 0;\n\t\tthis._pixelsPerUnit = null;\n\t\tthis._rect = new Vec4(0, 0, 1, 1);\n\t\tthis._mask = false;\n\t\tthis._maskRef = 0;\n\t\tthis._outerScale = new Vec2();\n\t\tthis._outerScaleUniform = new Float32Array(2);\n\t\tthis._innerOffset = new Vec4();\n\t\tthis._innerOffsetUniform = new Float32Array(4);\n\t\tthis._atlasRect = new Vec4();\n\t\tthis._atlasRectUniform = new Float32Array(4);\n\t\tthis._defaultMesh = this._createMesh();\n\t\tthis._renderable = new ImageRenderable(this._entity, this._defaultMesh, this._material);\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array([1, 1, 1]);\n\n\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\tthis._renderable.setParameter('material_opacity', 1);\n\n\t\tthis._updateAabbFunc = this._updateAabb.bind(this);\n\n\t\tthis._onScreenChange(this._element.screen);\n\n\t\tthis._element.on('resize', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.on('set:pivot', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.on('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.on('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.on('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.on('screen:set:resolution', this._onResolutionChange, this);\n\t}\n\n\tdestroy() {\n\t\tthis.textureAsset = null;\n\t\tthis.spriteAsset = null;\n\t\tthis.materialAsset = null;\n\n\t\tthis._renderable.setMesh(this._defaultMesh);\n\n\t\tthis._renderable.destroy();\n\n\t\tthis._defaultMesh = null;\n\n\t\tthis._element.off('resize', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.off('set:pivot', this._onParentResizeOrPivotChange, this);\n\n\t\tthis._element.off('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.off('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.off('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.off('screen:set:resolution', this._onResolutionChange, this);\n\t}\n\n\t_onResolutionChange(res) {}\n\n\t_onParentResizeOrPivotChange() {\n\t\tif (this._renderable.mesh) {\n\t\t\tthis._updateMesh(this._renderable.mesh);\n\t\t}\n\t}\n\n\t_onScreenSpaceChange(value) {\n\t\tthis._updateMaterial(value);\n\t}\n\n\t_onScreenChange(screen, previous) {\n\t\tif (screen) {\n\t\t\tthis._updateMaterial(screen.screen.screenSpace);\n\t\t} else {\n\t\t\tthis._updateMaterial(false);\n\t\t}\n\t}\n\n\t_onDrawOrderChange(order) {\n\t\tthis._renderable.setDrawOrder(order);\n\n\t\tif (this.mask && this._element.screen) {\n\t\t\tthis._element.screen.screen.once('syncdraworder', function () {\n\t\t\t\tthis._renderable.setUnmaskDrawOrder();\n\t\t\t}, this);\n\t\t}\n\t}\n\n\t_hasUserMaterial() {\n\t\treturn !!this._materialAsset || !!this._material && this._system.defaultImageMaterials.indexOf(this._material) === -1;\n\t}\n\n\t_use9Slicing() {\n\t\treturn this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED);\n\t}\n\n\t_updateMaterial(screenSpace) {\n\t\tvar mask = !!this._mask;\n\t\tvar nineSliced = !!(this.sprite && this.sprite.renderMode === SPRITE_RENDERMODE_SLICED);\n\t\tvar nineTiled = !!(this.sprite && this.sprite.renderMode === SPRITE_RENDERMODE_TILED);\n\n\t\tif (!this._hasUserMaterial()) {\n\t\t\tthis._material = this._system.getImageElementMaterial(screenSpace, mask, nineSliced, nineTiled);\n\t\t}\n\n\t\tif (this._renderable) {\n\t\t\tthis._renderable.setCull(true);\n\n\t\t\tthis._renderable.setMaterial(this._material);\n\n\t\t\tthis._renderable.setScreenSpace(screenSpace);\n\n\t\t\tthis._renderable.setLayer(screenSpace ? LAYER_HUD : LAYER_WORLD);\n\t\t}\n\t}\n\n\t_createMesh() {\n\t\tvar element = this._element;\n\t\tvar w = element.calculatedWidth;\n\t\tvar h = element.calculatedHeight;\n\t\tvar r = this._rect;\n\t\tvar vertexData = new ArrayBuffer(4 * 8 * 4);\n\t\tvar vertexDataF32 = new Float32Array(vertexData);\n\t\tvertexDataF32[5] = 1;\n\t\tvertexDataF32[6] = r.x;\n\t\tvertexDataF32[7] = 1.0 - r.y;\n\t\tvertexDataF32[8] = w;\n\t\tvertexDataF32[13] = 1;\n\t\tvertexDataF32[14] = r.x + r.z;\n\t\tvertexDataF32[15] = 1.0 - r.y;\n\t\tvertexDataF32[16] = w;\n\t\tvertexDataF32[17] = h;\n\t\tvertexDataF32[21] = 1;\n\t\tvertexDataF32[22] = r.x + r.z;\n\t\tvertexDataF32[23] = 1.0 - (r.y + r.w);\n\t\tvertexDataF32[25] = h;\n\t\tvertexDataF32[29] = 1;\n\t\tvertexDataF32[30] = r.x;\n\t\tvertexDataF32[31] = 1.0 - (r.y + r.w);\n\t\tvar vertexDesc = [{\n\t\t\tsemantic: SEMANTIC_POSITION,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_NORMAL,\n\t\t\tcomponents: 3,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}, {\n\t\t\tsemantic: SEMANTIC_TEXCOORD0,\n\t\t\tcomponents: 2,\n\t\t\ttype: TYPE_FLOAT32\n\t\t}];\n\t\tvar device = this._system.app.graphicsDevice;\n\t\tvar vertexFormat = new VertexFormat(device, vertexDesc);\n\t\tvar vertexBuffer = new VertexBuffer(device, vertexFormat, 4, BUFFER_STATIC, vertexData);\n\t\tvar mesh = new Mesh(device);\n\t\tmesh.vertexBuffer = vertexBuffer;\n\t\tmesh.primitive[0].type = PRIMITIVE_TRIFAN;\n\t\tmesh.primitive[0].base = 0;\n\t\tmesh.primitive[0].count = 4;\n\t\tmesh.primitive[0].indexed = false;\n\t\tmesh.aabb.setMinMax(Vec3.ZERO, new Vec3(w, h, 0));\n\n\t\tthis._updateMesh(mesh);\n\n\t\treturn mesh;\n\t}\n\n\t_updateMesh(mesh) {\n\t\tvar element = this._element;\n\t\tvar w = element.calculatedWidth;\n\t\tvar h = element.calculatedHeight;\n\n\t\tvar screenSpace = element._isScreenSpace();\n\n\t\tthis._updateMaterial(screenSpace);\n\n\t\tif (this._renderable) this._renderable.forceUpdateAabb();\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tvar frameData = this._sprite.atlas.frames[this._sprite.frameKeys[this._spriteFrame]];\n\t\t\tvar borderWidthScale = 2 / frameData.rect.z;\n\t\t\tvar borderHeightScale = 2 / frameData.rect.w;\n\n\t\t\tthis._innerOffset.set(frameData.border.x * borderWidthScale, frameData.border.y * borderHeightScale, frameData.border.z * borderWidthScale, frameData.border.w * borderHeightScale);\n\n\t\t\tvar tex = this.sprite.atlas.texture;\n\n\t\t\tthis._atlasRect.set(frameData.rect.x / tex.width, frameData.rect.y / tex.height, frameData.rect.z / tex.width, frameData.rect.w / tex.height);\n\n\t\t\tvar ppu = this._pixelsPerUnit !== null ? this._pixelsPerUnit : this.sprite.pixelsPerUnit;\n\t\t\tvar scaleMulX = frameData.rect.z / ppu;\n\t\t\tvar scaleMulY = frameData.rect.w / ppu;\n\n\t\t\tthis._outerScale.set(Math.max(w, this._innerOffset.x * scaleMulX), Math.max(h, this._innerOffset.y * scaleMulY));\n\n\t\t\tvar scaleX = scaleMulX;\n\t\t\tvar scaleY = scaleMulY;\n\t\t\tthis._outerScale.x /= scaleMulX;\n\t\t\tthis._outerScale.y /= scaleMulY;\n\t\t\tscaleX *= math.clamp(w / (this._innerOffset.x * scaleMulX), 0.0001, 1);\n\t\t\tscaleY *= math.clamp(h / (this._innerOffset.y * scaleMulY), 0.0001, 1);\n\n\t\t\tif (this._renderable) {\n\t\t\t\tthis._innerOffsetUniform[0] = this._innerOffset.x;\n\t\t\t\tthis._innerOffsetUniform[1] = this._innerOffset.y;\n\t\t\t\tthis._innerOffsetUniform[2] = this._innerOffset.z;\n\t\t\t\tthis._innerOffsetUniform[3] = this._innerOffset.w;\n\n\t\t\t\tthis._renderable.setParameter('innerOffset', this._innerOffsetUniform);\n\n\t\t\t\tthis._atlasRectUniform[0] = this._atlasRect.x;\n\t\t\t\tthis._atlasRectUniform[1] = this._atlasRect.y;\n\t\t\t\tthis._atlasRectUniform[2] = this._atlasRect.z;\n\t\t\t\tthis._atlasRectUniform[3] = this._atlasRect.w;\n\n\t\t\t\tthis._renderable.setParameter('atlasRect', this._atlasRectUniform);\n\n\t\t\t\tthis._outerScaleUniform[0] = this._outerScale.x;\n\t\t\t\tthis._outerScaleUniform[1] = this._outerScale.y;\n\n\t\t\t\tthis._renderable.setParameter('outerScale', this._outerScaleUniform);\n\n\t\t\t\tthis._renderable.setAabbFunc(this._updateAabbFunc);\n\n\t\t\t\tthis._renderable.node.setLocalScale(scaleX, scaleY, 1);\n\n\t\t\t\tthis._renderable.node.setLocalPosition((0.5 - element.pivot.x) * w, (0.5 - element.pivot.y) * h, 0);\n\t\t\t}\n\t\t} else {\n\t\t\tvar vb = mesh.vertexBuffer;\n\t\t\tvar vertexDataF32 = new Float32Array(vb.lock());\n\t\t\tvar hp = element.pivot.x;\n\t\t\tvar vp = element.pivot.y;\n\t\t\tvertexDataF32[0] = 0 - hp * w;\n\t\t\tvertexDataF32[1] = 0 - vp * h;\n\t\t\tvertexDataF32[8] = w - hp * w;\n\t\t\tvertexDataF32[9] = 0 - vp * h;\n\t\t\tvertexDataF32[16] = w - hp * w;\n\t\t\tvertexDataF32[17] = h - vp * h;\n\t\t\tvertexDataF32[24] = 0 - hp * w;\n\t\t\tvertexDataF32[25] = h - vp * h;\n\t\t\tvar atlasTextureWidth = 1;\n\t\t\tvar atlasTextureHeight = 1;\n\t\t\tvar rect = this._rect;\n\n\t\t\tif (this._sprite && this._sprite.frameKeys[this._spriteFrame] && this._sprite.atlas) {\n\t\t\t\tvar frame = this._sprite.atlas.frames[this._sprite.frameKeys[this._spriteFrame]];\n\n\t\t\t\tif (frame) {\n\t\t\t\t\trect = frame.rect;\n\t\t\t\t\tatlasTextureWidth = this._sprite.atlas.texture.width;\n\t\t\t\t\tatlasTextureHeight = this._sprite.atlas.texture.height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvertexDataF32[6] = rect.x / atlasTextureWidth;\n\t\t\tvertexDataF32[7] = 1.0 - rect.y / atlasTextureHeight;\n\t\t\tvertexDataF32[14] = (rect.x + rect.z) / atlasTextureWidth;\n\t\t\tvertexDataF32[15] = 1.0 - rect.y / atlasTextureHeight;\n\t\t\tvertexDataF32[22] = (rect.x + rect.z) / atlasTextureWidth;\n\t\t\tvertexDataF32[23] = 1.0 - (rect.y + rect.w) / atlasTextureHeight;\n\t\t\tvertexDataF32[30] = rect.x / atlasTextureWidth;\n\t\t\tvertexDataF32[31] = 1.0 - (rect.y + rect.w) / atlasTextureHeight;\n\t\t\tvb.unlock();\n\t\t\tvar min = new Vec3(0 - hp * w, 0 - vp * h, 0);\n\t\t\tvar max = new Vec3(w - hp * w, h - vp * h, 0);\n\t\t\tmesh.aabb.setMinMax(min, max);\n\n\t\t\tif (this._renderable) {\n\t\t\t\tthis._renderable.node.setLocalScale(1, 1, 1);\n\n\t\t\t\tthis._renderable.node.setLocalPosition(0, 0, 0);\n\n\t\t\t\tthis._renderable.setAabbFunc(null);\n\t\t\t}\n\t\t}\n\n\t\tthis._meshDirty = false;\n\t}\n\n\t_updateSprite() {\n\t\tvar nineSlice = false;\n\t\tvar mesh = null;\n\n\t\tif (this._sprite && this._sprite.atlas) {\n\t\t\tmesh = this._sprite.meshes[this.spriteFrame];\n\t\t\tnineSlice = this._sprite.renderMode === SPRITE_RENDERMODE_SLICED || this._sprite.renderMode === SPRITE_RENDERMODE_TILED;\n\t\t}\n\n\t\tthis.mesh = nineSlice ? mesh : this._defaultMesh;\n\n\t\tif (this.mesh) {\n\t\t\tif (!this._element._beingInitialized) {\n\t\t\t\tthis._updateMesh(this.mesh);\n\t\t\t} else {\n\t\t\t\tthis._meshDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateAabb(aabb) {\n\t\taabb.center.set(0, 0, 0);\n\t\taabb.halfExtents.set(this._outerScale.x * 0.5, this._outerScale.y * 0.5, 0.001);\n\t\taabb.setFromTransformedAabb(aabb, this._renderable.node.getWorldTransform());\n\t\treturn aabb;\n\t}\n\n\t_toggleMask() {\n\t\tthis._element._dirtifyMask();\n\n\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\tthis._updateMaterial(screenSpace);\n\n\t\tthis._renderable.setMask(!!this._mask);\n\t}\n\n\t_onMaterialLoad(asset) {\n\t\tthis.material = asset.resource;\n\t}\n\n\t_onMaterialAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onMaterialAdded, this);\n\n\t\tif (this._materialAsset === asset.id) {\n\t\t\tthis._bindMaterialAsset(asset);\n\t\t}\n\t}\n\n\t_bindMaterialAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onMaterialLoad, this);\n\t\tasset.on(\"change\", this._onMaterialChange, this);\n\t\tasset.on(\"remove\", this._onMaterialRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMaterialAsset(asset) {\n\t\tasset.off(\"load\", this._onMaterialLoad, this);\n\t\tasset.off(\"change\", this._onMaterialChange, this);\n\t\tasset.off(\"remove\", this._onMaterialRemove, this);\n\t}\n\n\t_onMaterialChange() {}\n\n\t_onMaterialRemove() {}\n\n\t_onTextureAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onTextureAdded, this);\n\n\t\tif (this._textureAsset === asset.id) {\n\t\t\tthis._bindTextureAsset(asset);\n\t\t}\n\t}\n\n\t_bindTextureAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onTextureLoad, this);\n\t\tasset.on(\"change\", this._onTextureChange, this);\n\t\tasset.on(\"remove\", this._onTextureRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onTextureLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindTextureAsset(asset) {\n\t\tasset.off(\"load\", this._onTextureLoad, this);\n\t\tasset.off(\"change\", this._onTextureChange, this);\n\t\tasset.off(\"remove\", this._onTextureRemove, this);\n\t}\n\n\t_onTextureLoad(asset) {\n\t\tthis.texture = asset.resource;\n\t}\n\n\t_onTextureChange(asset) {}\n\n\t_onTextureRemove(asset) {}\n\n\t_onSpriteAssetAdded(asset) {\n\t\tthis._system.app.assets.off('add:' + asset.id, this._onSpriteAssetAdded, this);\n\n\t\tif (this._spriteAsset === asset.id) {\n\t\t\tthis._bindSpriteAsset(asset);\n\t\t}\n\t}\n\n\t_bindSpriteAsset(asset) {\n\t\tif (!this._entity.enabled) return;\n\t\tasset.on(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.on(\"change\", this._onSpriteAssetChange, this);\n\t\tasset.on(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onSpriteAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindSpriteAsset(asset) {\n\t\tasset.off(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.off(\"change\", this._onSpriteAssetChange, this);\n\t\tasset.off(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.data.textureAtlasAsset) {\n\t\t\tthis._system.app.assets.off(\"load:\" + asset.data.textureAtlasAsset, this._onTextureAtlasLoad, this);\n\t\t}\n\t}\n\n\t_onSpriteAssetLoad(asset) {\n\t\tif (!asset || !asset.resource) {\n\t\t\tthis.sprite = null;\n\t\t} else {\n\t\t\tif (!asset.resource.atlas) {\n\t\t\t\tvar atlasAssetId = asset.data.textureAtlasAsset;\n\n\t\t\t\tif (atlasAssetId) {\n\t\t\t\t\tvar assets = this._system.app.assets;\n\t\t\t\t\tassets.off('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\t\tassets.once('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = asset.resource;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSpriteAssetChange(asset) {\n\t\tthis._onSpriteAssetLoad(asset);\n\t}\n\n\t_onSpriteAssetRemove(asset) {}\n\n\t_bindSprite(sprite) {\n\t\tsprite.on('set:meshes', this._onSpriteMeshesChange, this);\n\t\tsprite.on('set:pixelsPerUnit', this._onSpritePpuChange, this);\n\t\tsprite.on('set:atlas', this._onAtlasTextureChange, this);\n\n\t\tif (sprite.atlas) {\n\t\t\tsprite.atlas.on('set:texture', this._onAtlasTextureChange, this);\n\t\t}\n\t}\n\n\t_unbindSprite(sprite) {\n\t\tsprite.off('set:meshes', this._onSpriteMeshesChange, this);\n\t\tsprite.off('set:pixelsPerUnit', this._onSpritePpuChange, this);\n\t\tsprite.off('set:atlas', this._onAtlasTextureChange, this);\n\n\t\tif (sprite.atlas) {\n\t\t\tsprite.atlas.off('set:texture', this._onAtlasTextureChange, this);\n\t\t}\n\t}\n\n\t_onSpriteMeshesChange() {\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(this._spriteFrame, 0, this._sprite.frameKeys.length - 1);\n\t\t}\n\n\t\tthis._updateSprite();\n\t}\n\n\t_onSpritePpuChange() {\n\t\tif (this.sprite.renderMode !== SPRITE_RENDERMODE_SIMPLE && this._pixelsPerUnit === null) {\n\t\t\tthis._updateSprite();\n\t\t}\n\t}\n\n\t_onAtlasTextureChange() {\n\t\tif (this.sprite && this.sprite.atlas && this.sprite.atlas.texture) {\n\t\t\tthis._renderable.setParameter('texture_emissiveMap', this._sprite.atlas.texture);\n\n\t\t\tthis._renderable.setParameter('texture_opacityMap', this._sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter('texture_emissiveMap');\n\n\t\t\tthis._renderable.deleteParameter('texture_opacityMap');\n\t\t}\n\t}\n\n\t_onTextureAtlasLoad(atlasAsset) {\n\t\tvar spriteAsset = this._spriteAsset;\n\n\t\tif (spriteAsset instanceof Asset) {\n\t\t\tthis._onSpriteAssetLoad(spriteAsset);\n\t\t} else {\n\t\t\tthis._onSpriteAssetLoad(this._system.app.assets.get(spriteAsset));\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar asset;\n\n\t\tif (this._materialAsset) {\n\t\t\tasset = this._system.app.assets.get(this._materialAsset);\n\n\t\t\tif (asset && asset.resource !== this._material) {\n\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._textureAsset) {\n\t\t\tasset = this._system.app.assets.get(this._textureAsset);\n\n\t\t\tif (asset && asset.resource !== this._texture) {\n\t\t\t\tthis._bindTextureAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tasset = this._system.app.assets.get(this._spriteAsset);\n\n\t\t\tif (asset && asset.resource !== this._sprite) {\n\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tthis._element.addModelToLayers(this._renderable.model);\n\t}\n\n\tonDisable() {\n\t\tthis._element.removeModelFromLayers(this._renderable.model);\n\t}\n\n\t_setStencil(stencilParams) {\n\t\tthis._renderable.meshInstance.stencilFront = stencilParams;\n\t\tthis._renderable.meshInstance.stencilBack = stencilParams;\n\t\tvar ref = 0;\n\n\t\tif (this._element.maskedBy) {\n\t\t\tref = this._element.maskedBy.element._image._maskRef;\n\t\t}\n\n\t\tif (this._renderable.unmaskMeshInstance) {\n\t\t\tvar sp = new StencilParameters({\n\t\t\t\tref: ref + 1,\n\t\t\t\tfunc: FUNC_EQUAL,\n\t\t\t\tzpass: STENCILOP_DECREMENT\n\t\t\t});\n\t\t\tthis._renderable.unmaskMeshInstance.stencilFront = sp;\n\t\t\tthis._renderable.unmaskMeshInstance.stencilBack = sp;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tvar r = value.r;\n\t\tvar g = value.g;\n\t\tvar b = value.b;\n\n\t\tif (this._color.r === r && this._color.g === g && this._color.b === b) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._color.r = r;\n\t\tthis._color.g = g;\n\t\tthis._color.b = b;\n\t\tthis._colorUniform[0] = r;\n\t\tthis._colorUniform[1] = g;\n\t\tthis._colorUniform[2] = b;\n\n\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:color', this._color);\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tif (value === this._color.a) return;\n\t\tthis._color.a = value;\n\n\t\tthis._renderable.setParameter('material_opacity', value);\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:opacity', value);\n\t\t}\n\t}\n\n\tget rect() {\n\t\treturn this._rect;\n\t}\n\n\tset rect(value) {\n\t\tvar x, y, z, w;\n\n\t\tif (value instanceof Vec4) {\n\t\t\tx = value.x;\n\t\t\ty = value.y;\n\t\t\tz = value.z;\n\t\t\tw = value.w;\n\t\t} else {\n\t\t\tx = value[0];\n\t\t\ty = value[1];\n\t\t\tz = value[2];\n\t\t\tw = value[3];\n\t\t}\n\n\t\tif (x === this._rect.x && y === this._rect.y && z === this._rect.z && w === this._rect.w) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._rect.set(x, y, z, w);\n\n\t\tif (this._renderable.mesh) {\n\t\t\tif (!this._element._beingInitialized) {\n\t\t\t\tthis._updateMesh(this._renderable.mesh);\n\t\t\t} else {\n\t\t\t\tthis._meshDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material === value) return;\n\n\t\tif (!value) {\n\t\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\t\tif (this.mask) {\n\t\t\t\tvalue = screenSpace ? this._system.defaultScreenSpaceImageMaskMaterial : this._system.defaultImageMaskMaterial;\n\t\t\t} else {\n\t\t\t\tvalue = screenSpace ? this._system.defaultScreenSpaceImageMaterial : this._system.defaultImageMaterial;\n\t\t\t}\n\t\t}\n\n\t\tthis._material = value;\n\n\t\tif (value) {\n\t\t\tthis._renderable.setMaterial(value);\n\n\t\t\tif (this._hasUserMaterial()) {\n\t\t\t\tthis._renderable.deleteParameter('material_opacity');\n\n\t\t\t\tthis._renderable.deleteParameter('material_emissive');\n\t\t\t} else {\n\t\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\t\tthis._renderable.setParameter('material_emissive', this._colorUniform);\n\n\t\t\t\tthis._renderable.setParameter('material_opacity', this._color.a);\n\t\t\t}\n\t\t}\n\t}\n\n\tget materialAsset() {\n\t\treturn this._materialAsset;\n\t}\n\n\tset materialAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._materialAsset !== _id) {\n\t\t\tif (this._materialAsset) {\n\t\t\t\tassets.off('add:' + this._materialAsset, this._onMaterialAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._materialAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\t_prev.off(\"load\", this._onMaterialLoad, this);\n\n\t\t\t\t\t_prev.off(\"change\", this._onMaterialChange, this);\n\n\t\t\t\t\t_prev.off(\"remove\", this._onMaterialRemove, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._materialAsset = _id;\n\n\t\t\tif (this._materialAsset) {\n\t\t\t\tvar asset = assets.get(this._materialAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.material = null;\n\t\t\t\t\tassets.on('add:' + this._materialAsset, this._onMaterialAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.material = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget texture() {\n\t\treturn this._texture;\n\t}\n\n\tset texture(value) {\n\t\tif (this._texture === value) return;\n\n\t\tif (this._textureAsset) {\n\t\t\tvar textureAsset = this._system.app.assets.get(this._textureAsset);\n\n\t\t\tif (textureAsset && textureAsset.resource !== value) {\n\t\t\t\tthis.textureAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._texture = value;\n\n\t\tif (value) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tthis.spriteAsset = null;\n\t\t\t}\n\n\t\t\tthis._renderable.setParameter(\"texture_emissiveMap\", this._texture);\n\n\t\t\tthis._renderable.setParameter(\"texture_opacityMap\", this._texture);\n\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._renderable.setParameter(\"material_emissive\", this._colorUniform);\n\n\t\t\tthis._renderable.setParameter(\"material_opacity\", this._color.a);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter(\"texture_emissiveMap\");\n\n\t\t\tthis._renderable.deleteParameter(\"texture_opacityMap\");\n\t\t}\n\t}\n\n\tget textureAsset() {\n\t\treturn this._textureAsset;\n\t}\n\n\tset textureAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._textureAsset !== _id) {\n\t\t\tif (this._textureAsset) {\n\t\t\t\tassets.off('add:' + this._textureAsset, this._onTextureAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._textureAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\t_prev.off(\"load\", this._onTextureLoad, this);\n\n\t\t\t\t\t_prev.off(\"change\", this._onTextureChange, this);\n\n\t\t\t\t\t_prev.off(\"remove\", this._onTextureRemove, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._textureAsset = _id;\n\n\t\t\tif (this._textureAsset) {\n\t\t\t\tvar asset = assets.get(this._textureAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.texture = null;\n\t\t\t\t\tassets.on('add:' + this._textureAsset, this._onTextureAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindTextureAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.texture = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tvar assets = this._system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._spriteAsset !== _id) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tassets.off('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._spriteAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindSpriteAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._spriteAsset = _id;\n\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar asset = assets.get(this._spriteAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.sprite = null;\n\t\t\t\t\tassets.on('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = null;\n\t\t\t}\n\n\t\t\tif (this._element) {\n\t\t\t\tthis._element.fire('set:spriteAsset', _id);\n\t\t\t}\n\t\t}\n\t}\n\n\tget sprite() {\n\t\treturn this._sprite;\n\t}\n\n\tset sprite(value) {\n\t\tif (this._sprite === value) return;\n\n\t\tif (this._sprite) {\n\t\t\tthis._unbindSprite(this._sprite);\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tvar spriteAsset = this._system.app.assets.get(this._spriteAsset);\n\n\t\t\tif (spriteAsset && spriteAsset.resource !== value) {\n\t\t\t\tthis.spriteAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._sprite = value;\n\n\t\tif (this._sprite) {\n\t\t\tthis._bindSprite(this._sprite);\n\n\t\t\tif (this._textureAsset) {\n\t\t\t\tthis.textureAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tif (this._sprite && this._sprite.atlas && this._sprite.atlas.texture) {\n\t\t\tthis._renderable.setParameter(\"texture_emissiveMap\", this._sprite.atlas.texture);\n\n\t\t\tthis._renderable.setParameter(\"texture_opacityMap\", this._sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._renderable.deleteParameter(\"texture_emissiveMap\");\n\n\t\t\tthis._renderable.deleteParameter(\"texture_opacityMap\");\n\t\t}\n\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(this._spriteFrame, 0, this._sprite.frameKeys.length - 1);\n\t\t}\n\n\t\tthis._updateSprite();\n\t}\n\n\tget spriteFrame() {\n\t\treturn this._spriteFrame;\n\t}\n\n\tset spriteFrame(value) {\n\t\tvar oldValue = this._spriteFrame;\n\n\t\tif (this._sprite) {\n\t\t\tthis._spriteFrame = math.clamp(value, 0, this._sprite.frameKeys.length - 1);\n\t\t} else {\n\t\t\tthis._spriteFrame = value;\n\t\t}\n\n\t\tif (this._spriteFrame === oldValue) return;\n\n\t\tthis._updateSprite();\n\n\t\tif (this._element) {\n\t\t\tthis._element.fire('set:spriteFrame', value);\n\t\t}\n\t}\n\n\tget mesh() {\n\t\treturn this._renderable.mesh;\n\t}\n\n\tset mesh(value) {\n\t\tthis._renderable.setMesh(value);\n\n\t\tif (this._defaultMesh === value) {\n\t\t\tthis._renderable.setAabbFunc(null);\n\t\t} else {\n\t\t\tthis._renderable.setAabbFunc(this._updateAabbFunc);\n\t\t}\n\t}\n\n\tget mask() {\n\t\treturn this._mask;\n\t}\n\n\tset mask(value) {\n\t\tif (this._mask !== value) {\n\t\t\tthis._mask = value;\n\n\t\t\tthis._toggleMask();\n\t\t}\n\t}\n\n\tget pixelsPerUnit() {\n\t\treturn this._pixelsPerUnit;\n\t}\n\n\tset pixelsPerUnit(value) {\n\t\tif (this._pixelsPerUnit === value) return;\n\t\tthis._pixelsPerUnit = value;\n\n\t\tif (this._sprite && (this._sprite.renderMode === SPRITE_RENDERMODE_SLICED || this._sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tthis._updateSprite();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._renderable.meshInstance) {\n\t\t\treturn this._renderable.meshInstance.aabb;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass LocalizedAsset extends EventHandler {\n\tconstructor(app) {\n\t\tsuper();\n\t\tthis._app = app;\n\t\tapp.i18n.on('set:locale', this._onSetLocale, this);\n\t\tthis._autoLoad = false;\n\t\tthis._disableLocalization = false;\n\t\tthis._defaultAsset = null;\n\t\tthis._localizedAsset = null;\n\t}\n\n\t_bindDefaultAsset() {\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset) {\n\t\t\tthis._app.assets.once('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\t\t} else {\n\t\t\tthis._onDefaultAssetAdd(asset);\n\t\t}\n\t}\n\n\t_unbindDefaultAsset() {\n\t\tif (!this._defaultAsset) return;\n\n\t\tthis._app.assets.off('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset) return;\n\t\tasset.off('add:localized', this._onLocaleAdd, this);\n\t\tasset.off('remove:localized', this._onLocaleRemove, this);\n\t\tasset.off('remove', this._onDefaultAssetRemove, this);\n\t}\n\n\t_onDefaultAssetAdd(asset) {\n\t\tif (this._defaultAsset !== asset.id) return;\n\t\tasset.on('add:localized', this._onLocaleAdd, this);\n\t\tasset.on('remove:localized', this._onLocaleRemove, this);\n\t\tasset.once('remove', this._onDefaultAssetRemove, this);\n\t}\n\n\t_onDefaultAssetRemove(asset) {\n\t\tif (this._defaultAsset !== asset.id) return;\n\t\tasset.off('add:localized', this._onLocaleAdd, this);\n\t\tasset.off('remove:localized', this._onLocaleAdd, this);\n\n\t\tthis._app.assets.once('add:' + this._defaultAsset, this._onDefaultAssetAdd, this);\n\t}\n\n\t_bindLocalizedAsset() {\n\t\tif (!this._autoLoad) return;\n\n\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\tif (!asset) return;\n\t\tasset.on(\"load\", this._onLocalizedAssetLoad, this);\n\t\tasset.on(\"change\", this._onLocalizedAssetChange, this);\n\t\tasset.on(\"remove\", this._onLocalizedAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onLocalizedAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindLocalizedAsset() {\n\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\tif (!asset) return;\n\t\tasset.off(\"load\", this._onLocalizedAssetLoad, this);\n\t\tasset.off(\"change\", this._onLocalizedAssetChange, this);\n\t\tasset.off(\"remove\", this._onLocalizedAssetRemove, this);\n\t}\n\n\t_onLocalizedAssetAdd(asset) {\n\t\tif (this._localizedAsset !== asset.id) return;\n\n\t\tthis._bindLocalizedAsset();\n\t}\n\n\t_onLocalizedAssetLoad(asset) {\n\t\tthis.fire('load', asset);\n\t}\n\n\t_onLocalizedAssetChange(asset, name, newValue, oldValue) {\n\t\tthis.fire('change', asset, name, newValue, oldValue);\n\t}\n\n\t_onLocalizedAssetRemove(asset) {\n\t\tif (this._localizedAsset === asset.id) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t}\n\n\t\tthis.fire('remove', asset);\n\t}\n\n\t_onLocaleAdd(locale, assetId) {\n\t\tif (this._app.i18n.locale !== locale) return;\n\n\t\tthis._onSetLocale(locale);\n\t}\n\n\t_onLocaleRemove(locale, assetId) {\n\t\tif (this._app.i18n.locale !== locale) return;\n\n\t\tthis._onSetLocale(locale);\n\t}\n\n\t_onSetLocale(locale) {\n\t\tif (!this._defaultAsset) {\n\t\t\tthis.localizedAsset = null;\n\t\t\treturn;\n\t\t}\n\n\t\tvar asset = this._app.assets.get(this._defaultAsset);\n\n\t\tif (!asset || this._disableLocalization) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t\treturn;\n\t\t}\n\n\t\tvar localizedAssetId = asset.getLocalizedAssetId(locale);\n\n\t\tif (!localizedAssetId) {\n\t\t\tthis.localizedAsset = this._defaultAsset;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.localizedAsset = localizedAssetId;\n\t}\n\n\tdestroy() {\n\t\tthis.defaultAsset = null;\n\n\t\tthis._app.i18n.off('set:locale', this._onSetLocale, this);\n\n\t\tthis.off();\n\t}\n\n\tget defaultAsset() {\n\t\treturn this._defaultAsset;\n\t}\n\n\tset defaultAsset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\t\tif (this._defaultAsset === id) return;\n\n\t\tif (this._defaultAsset) {\n\t\t\tthis._unbindDefaultAsset();\n\t\t}\n\n\t\tthis._defaultAsset = id;\n\n\t\tif (this._defaultAsset) {\n\t\t\tthis._bindDefaultAsset();\n\t\t}\n\n\t\tthis._onSetLocale(this._app.i18n.locale);\n\t}\n\n\tget localizedAsset() {\n\t\treturn this._localizedAsset;\n\t}\n\n\tset localizedAsset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\n\t\tif (this._localizedAsset === id) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._localizedAsset) {\n\t\t\tthis._app.assets.off('add:' + this._localizedAsset, this._onLocalizedAssetAdd, this);\n\n\t\t\tthis._unbindLocalizedAsset();\n\n\t\t\tthis._localizedAsset = null;\n\t\t}\n\n\t\tthis._localizedAsset = id;\n\n\t\tif (this._localizedAsset) {\n\t\t\tvar asset = this._app.assets.get(this._localizedAsset);\n\n\t\t\tif (!asset) {\n\t\t\t\tthis._app.assets.once('add:' + this._localizedAsset, this._onLocalizedAssetAdd, this);\n\t\t\t} else {\n\t\t\t\tthis._bindLocalizedAsset();\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoLoad() {\n\t\treturn this._autoLoad;\n\t}\n\n\tset autoLoad(value) {\n\t\tif (this._autoLoad === value) return;\n\t\tthis._autoLoad = value;\n\n\t\tif (this._autoLoad && this._localizedAsset) {\n\t\t\tthis._unbindLocalizedAsset();\n\n\t\t\tthis._bindLocalizedAsset();\n\t\t}\n\t}\n\n\tget disableLocalization() {\n\t\treturn this._disableLocalization;\n\t}\n\n\tset disableLocalization(value) {\n\t\tif (this._disableLocalization === value) return;\n\t\tthis._disableLocalization = value;\n\n\t\tthis._onSetLocale(this._app.i18n.locale);\n\t}\n\n}\n\nconst EOF_TOKEN = 0;\nconst ERROR_TOKEN = 1;\nconst TEXT_TOKEN = 2;\nconst OPEN_BRACKET_TOKEN = 3;\nconst CLOSE_BRACKET_TOKEN = 4;\nconst EQUALS_TOKEN = 5;\nconst STRING_TOKEN = 6;\nconst IDENTIFIER_TOKEN = 7;\nconst WHITESPACE_TOKEN = 8;\nconst WHITESPACE_CHARS = \" \\t\\n\\r\\v\\f\";\nconst IDENTIFIER_REGEX = /[A-Z|a-z|0-9|_|-|/]/;\n\nclass Scanner {\n\tconstructor(symbols) {\n\t\tthis._symbols = symbols;\n\t\tthis._index = 0;\n\t\tthis._last = 0;\n\t\tthis._cur = this._symbols.length > 0 ? this._symbols[0] : null;\n\t\tthis._buf = [];\n\t\tthis._mode = \"text\";\n\t\tthis._error = null;\n\t}\n\n\tread() {\n\t\tvar token = this._read();\n\n\t\twhile (token === WHITESPACE_TOKEN) {\n\t\t\ttoken = this._read();\n\t\t}\n\n\t\tif (token !== EOF_TOKEN && token !== ERROR_TOKEN) {\n\t\t\tthis._last = this._index;\n\t\t}\n\n\t\treturn token;\n\t}\n\n\tbuf() {\n\t\treturn this._buf;\n\t}\n\n\tlast() {\n\t\treturn this._last;\n\t}\n\n\terror() {\n\t\treturn this._error;\n\t}\n\n\tdebugPrint() {\n\t\tvar tokenStrings = [\"EOF\", \"ERROR\", \"TEXT\", \"OPEN_BRACKET\", \"CLOSE_BRACKET\", \"EQUALS\", \"STRING\", \"IDENTIFIER\", \"WHITESPACE\"];\n\t\tvar token = this.read();\n\t\tvar result = \"\";\n\n\t\twhile (true) {\n\t\t\tresult += (result.length > 0 ? \"\\n\" : \"\") + tokenStrings[token] + \" '\" + this.buf().join(\"\") + \"'\";\n\n\t\t\tif (token === EOF_TOKEN || token === ERROR_TOKEN) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttoken = this.read();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_read() {\n\t\tthis._buf = [];\n\n\t\tif (this._eof()) {\n\t\t\treturn EOF_TOKEN;\n\t\t}\n\n\t\treturn this._mode === \"text\" ? this._text() : this._tag();\n\t}\n\n\t_text() {\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\treturn this._buf.length > 0 ? TEXT_TOKEN : EOF_TOKEN;\n\n\t\t\t\tcase \"[\":\n\t\t\t\t\tthis._mode = \"tag\";\n\t\t\t\t\treturn this._buf.length > 0 ? TEXT_TOKEN : this._tag();\n\n\t\t\t\tcase \"\\\\\":\n\t\t\t\t\tthis._next();\n\n\t\t\t\t\tswitch (this._cur) {\n\t\t\t\t\t\tcase \"[\":\n\t\t\t\t\t\t\tthis._store();\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis._output(\"\\\\\");\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_tag() {\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\tthis._error = \"unexpected end of input reading tag\";\n\t\t\t\t\treturn ERROR_TOKEN;\n\n\t\t\t\tcase \"[\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\treturn OPEN_BRACKET_TOKEN;\n\n\t\t\t\tcase \"]\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tthis._mode = \"text\";\n\t\t\t\t\treturn CLOSE_BRACKET_TOKEN;\n\n\t\t\t\tcase \"=\":\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\treturn EQUALS_TOKEN;\n\n\t\t\t\tcase \" \":\n\t\t\t\tcase \"\\t\":\n\t\t\t\tcase \"\\n\":\n\t\t\t\tcase \"\\r\":\n\t\t\t\tcase \"\\v\":\n\t\t\t\tcase \"\\f\":\n\t\t\t\t\treturn this._whitespace();\n\n\t\t\t\tcase \"\\\"\":\n\t\t\t\t\treturn this._string();\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!this._isIdentifierSymbol(this._cur)) {\n\t\t\t\t\t\tthis._error = \"unrecognized character\";\n\t\t\t\t\t\treturn ERROR_TOKEN;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._identifier();\n\t\t\t}\n\t\t}\n\t}\n\n\t_whitespace() {\n\t\tthis._store();\n\n\t\twhile (WHITESPACE_CHARS.indexOf(this._cur) !== -1) {\n\t\t\tthis._store();\n\t\t}\n\n\t\treturn WHITESPACE_TOKEN;\n\t}\n\n\t_string() {\n\t\tthis._next();\n\n\t\twhile (true) {\n\t\t\tswitch (this._cur) {\n\t\t\t\tcase null:\n\t\t\t\t\tthis._error = \"unexpected end of input reading string\";\n\t\t\t\t\treturn ERROR_TOKEN;\n\n\t\t\t\tcase \"\\\"\":\n\t\t\t\t\tthis._next();\n\n\t\t\t\t\treturn STRING_TOKEN;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._store();\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_identifier() {\n\t\tthis._store();\n\n\t\twhile (this._cur !== null && this._isIdentifierSymbol(this._cur)) {\n\t\t\tthis._store();\n\t\t}\n\n\t\treturn IDENTIFIER_TOKEN;\n\t}\n\n\t_isIdentifierSymbol(s) {\n\t\treturn s.length === 1 && s.match(IDENTIFIER_REGEX) !== null;\n\t}\n\n\t_eof() {\n\t\treturn this._cur === null;\n\t}\n\n\t_next() {\n\t\tif (!this._eof()) {\n\t\t\tthis._index++;\n\t\t\tthis._cur = this._index < this._symbols.length ? this._symbols[this._index] : null;\n\t\t}\n\n\t\treturn this._cur;\n\t}\n\n\t_store() {\n\t\tthis._buf.push(this._cur);\n\n\t\treturn this._next();\n\t}\n\n\t_output(c) {\n\t\tthis._buf.push(c);\n\t}\n\n}\n\nclass Parser {\n\tconstructor(symbols) {\n\t\tthis._scanner = new Scanner(symbols);\n\t\tthis._error = null;\n\t}\n\n\tparse(symbols, tags) {\n\t\twhile (true) {\n\t\t\tvar token = this._scanner.read();\n\n\t\t\tswitch (token) {\n\t\t\t\tcase EOF_TOKEN:\n\t\t\t\t\treturn true;\n\n\t\t\t\tcase ERROR_TOKEN:\n\t\t\t\t\treturn false;\n\n\t\t\t\tcase TEXT_TOKEN:\n\t\t\t\t\tArray.prototype.push.apply(symbols, this._scanner.buf());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase OPEN_BRACKET_TOKEN:\n\t\t\t\t\tif (!this._parseTag(symbols, tags)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\terror() {\n\t\treturn \"Error evaluating markup at #\" + this._scanner.last().toString() + \" (\" + (this._scanner.error() || this._error) + \")\";\n\t}\n\n\t_parseTag(symbols, tags) {\n\t\tvar token = this._scanner.read();\n\n\t\tif (token !== IDENTIFIER_TOKEN) {\n\t\t\tthis._error = \"expected identifier\";\n\t\t\treturn false;\n\t\t}\n\n\t\tvar name = this._scanner.buf().join(\"\");\n\n\t\tif (name[0] === \"/\") {\n\t\t\tfor (var index = tags.length - 1; index >= 0; --index) {\n\t\t\t\tif (name === \"/\" + tags[index].name && tags[index].end === null) {\n\t\t\t\t\ttags[index].end = symbols.length;\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== CLOSE_BRACKET_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected close bracket\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._error = \"failed to find matching tag\";\n\t\t\treturn false;\n\t\t}\n\n\t\tvar tag = {\n\t\t\tname: name,\n\t\t\tvalue: null,\n\t\t\tattributes: {},\n\t\t\tstart: symbols.length,\n\t\t\tend: null\n\t\t};\n\t\ttoken = this._scanner.read();\n\n\t\tif (token === EQUALS_TOKEN) {\n\t\t\ttoken = this._scanner.read();\n\n\t\t\tif (token !== STRING_TOKEN) {\n\t\t\t\tthis._error = \"expected string\";\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttag.value = this._scanner.buf().join(\"\");\n\t\t\ttoken = this._scanner.read();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tswitch (token) {\n\t\t\t\tcase CLOSE_BRACKET_TOKEN:\n\t\t\t\t\ttags.push(tag);\n\t\t\t\t\treturn true;\n\n\t\t\t\tcase IDENTIFIER_TOKEN:\n\t\t\t\t\tvar identifier = this._scanner.buf().join(\"\");\n\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== EQUALS_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected equals\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\ttoken = this._scanner.read();\n\n\t\t\t\t\tif (token !== STRING_TOKEN) {\n\t\t\t\t\t\tthis._error = \"expected string\";\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar value = this._scanner.buf().join(\"\");\n\n\t\t\t\t\ttag.attributes[identifier] = value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._error = \"expected close bracket or identifier\";\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttoken = this._scanner.read();\n\t\t}\n\t}\n\n}\n\nfunction merge(target, source) {\n\tfor (var key in source) {\n\t\tif (!source.hasOwnProperty(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar value = source[key];\n\n\t\tif (value instanceof Object) {\n\t\t\tif (!target.hasOwnProperty(key)) {\n\t\t\t\ttarget[key] = {};\n\t\t\t}\n\n\t\t\tmerge(target[key], source[key]);\n\t\t} else {\n\t\t\ttarget[key] = value;\n\t\t}\n\t}\n}\n\nfunction combineTags(tags) {\n\tif (tags.length === 0) {\n\t\treturn null;\n\t}\n\n\tvar result = {};\n\n\tfor (var index = 0; index < tags.length; ++index) {\n\t\tvar tag = tags[index];\n\t\tvar tmp = {};\n\t\ttmp[tag.name] = {\n\t\t\tvalue: tag.value,\n\t\t\tattributes: tag.attributes\n\t\t};\n\t\tmerge(result, tmp);\n\t}\n\n\treturn result;\n}\n\nfunction resolveMarkupTags(tags, numSymbols) {\n\tvar index;\n\n\tif (tags.length === 0) {\n\t\treturn null;\n\t}\n\n\tvar edges = {};\n\n\tfor (index = 0; index < tags.length; ++index) {\n\t\tvar tag = tags[index];\n\n\t\tif (!edges.hasOwnProperty(tag.start)) {\n\t\t\tedges[tag.start] = {\n\t\t\t\topen: [tag],\n\t\t\t\tclose: null\n\t\t\t};\n\t\t} else {\n\t\t\tif (edges[tag.start].open === null) {\n\t\t\t\tedges[tag.start].open = [tag];\n\t\t\t} else {\n\t\t\t\tedges[tag.start].open.push(tag);\n\t\t\t}\n\t\t}\n\n\t\tif (!edges.hasOwnProperty(tag.end)) {\n\t\t\tedges[tag.end] = {\n\t\t\t\topen: null,\n\t\t\t\tclose: [tag]\n\t\t\t};\n\t\t} else {\n\t\t\tif (edges[tag.end].close === null) {\n\t\t\t\tedges[tag.end].close = [tag];\n\t\t\t} else {\n\t\t\t\tedges[tag.end].close.push(tag);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar tagStack = [];\n\n\tfunction removeTags(tags) {\n\t\ttagStack = tagStack.filter(function (tag) {\n\t\t\treturn tags.find(function (t) {\n\t\t\t\treturn t === tag;\n\t\t\t}) === undefined;\n\t\t});\n\t}\n\n\tfunction addTags(tags) {\n\t\tfor (var index = 0; index < tags.length; ++index) {\n\t\t\ttagStack.push(tags[index]);\n\t\t}\n\t}\n\n\tvar edgeKeys = Object.keys(edges).sort(function (a, b) {\n\t\treturn a - b;\n\t});\n\tvar resolvedTags = [];\n\n\tfor (index = 0; index < edgeKeys.length; ++index) {\n\t\tvar edge = edges[edgeKeys[index]];\n\n\t\tif (edge.close !== null) {\n\t\t\tremoveTags(edge.close);\n\t\t}\n\n\t\tif (edge.open !== null) {\n\t\t\taddTags(edge.open);\n\t\t}\n\n\t\tresolvedTags.push({\n\t\t\tstart: edgeKeys[index],\n\t\t\ttags: combineTags(tagStack)\n\t\t});\n\t}\n\n\tvar result = [];\n\tvar prevTag = null;\n\n\tfor (index = 0; index < resolvedTags.length; ++index) {\n\t\tvar resolvedTag = resolvedTags[index];\n\n\t\twhile (result.length < resolvedTag.start) {\n\t\t\tresult.push(prevTag ? prevTag.tags : null);\n\t\t}\n\n\t\tprevTag = resolvedTag;\n\t}\n\n\twhile (result.length < numSymbols) {\n\t\tresult.push(null);\n\t}\n\n\treturn result;\n}\n\nfunction evaluateMarkup(symbols) {\n\tvar parser = new Parser(symbols);\n\tvar stripped_symbols = [];\n\tvar tags = [];\n\n\tif (!parser.parse(stripped_symbols, tags)) {\n\t\tconsole.warn(parser.error());\n\t\treturn {\n\t\t\tsymbols: symbols,\n\t\t\ttags: null\n\t\t};\n\t}\n\n\tvar invalidTag = tags.find(function (t) {\n\t\treturn t.end === null;\n\t});\n\n\tif (invalidTag) {\n\t\tconsole.warn(\"Markup error: found unclosed tag='\" + invalidTag.name + \"'\");\n\t\treturn {\n\t\t\tsymbols: symbols,\n\t\t\ttags: null\n\t\t};\n\t}\n\n\tvar resolved_tags = resolveMarkupTags(tags, stripped_symbols.length);\n\treturn {\n\t\tsymbols: stripped_symbols,\n\t\ttags: resolved_tags\n\t};\n}\n\nclass Markup {\n\tstatic evaluate(symbols) {\n\t\treturn evaluateMarkup(symbols);\n\t}\n\n}\n\nclass MeshInfo {\n\tconstructor() {\n\t\tthis.count = 0;\n\t\tthis.quad = 0;\n\t\tthis.lines = {};\n\t\tthis.positions = [];\n\t\tthis.normals = [];\n\t\tthis.uvs = [];\n\t\tthis.colors = [];\n\t\tthis.indices = [];\n\t\tthis.meshInstance = null;\n\t}\n\n}\n\nconst LINE_BREAK_CHAR = /^[\\r\\n]$/;\nconst WHITESPACE_CHAR = /^[ \\t]$/;\nconst WORD_BOUNDARY_CHAR = /^[ \\t\\-]|[\\u200b]$/;\nconst ALPHANUMERIC_CHAR = /^[a-z0-9]$/i;\nconst CJK_CHAR = /^[\\u1100-\\u11ff]|[\\u3000-\\u9fff]|[\\ua960-\\ua97f]|[\\uac00-\\ud7ff]$/;\nconst NO_LINE_BREAK_CJK_CHAR = /^[〕〉》」』】〙〗〟ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻]$/;\nconst CONTROL_CHARS = ['\\u200B', '\\u061C', '\\u200E', '\\u200F', '\\u202A', '\\u202B', '\\u202C', '\\u202D', '\\u202E', '\\u2066', '\\u2067', '\\u2068', '\\u2069'];\nconst CONTROL_GLYPH_DATA = {\n\twidth: 0,\n\theight: 0,\n\txadvance: 0,\n\txoffset: 0,\n\tyoffset: 0\n};\n\nclass TextElement {\n\tconstructor(element) {\n\t\tthis._element = element;\n\t\tthis._system = element.system;\n\t\tthis._entity = element.entity;\n\t\tthis._text = \"\";\n\t\tthis._symbols = [];\n\t\tthis._colorPalette = [];\n\t\tthis._symbolColors = null;\n\t\tthis._i18nKey = null;\n\t\tthis._fontAsset = new LocalizedAsset(this._system.app);\n\t\tthis._fontAsset.disableLocalization = true;\n\n\t\tthis._fontAsset.on('load', this._onFontLoad, this);\n\n\t\tthis._fontAsset.on('change', this._onFontChange, this);\n\n\t\tthis._fontAsset.on('remove', this._onFontRemove, this);\n\n\t\tthis._font = null;\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array(3);\n\t\tthis._spacing = 1;\n\t\tthis._fontSize = 32;\n\t\tthis._fontMinY = 0;\n\t\tthis._fontMaxY = 0;\n\t\tthis._originalFontSize = 32;\n\t\tthis._maxFontSize = 32;\n\t\tthis._minFontSize = 8;\n\t\tthis._autoFitWidth = false;\n\t\tthis._autoFitHeight = false;\n\t\tthis._maxLines = -1;\n\t\tthis._lineHeight = 32;\n\t\tthis._scaledLineHeight = 32;\n\t\tthis._wrapLines = false;\n\t\tthis._drawOrder = 0;\n\t\tthis._alignment = new Vec2(0.5, 0.5);\n\t\tthis._autoWidth = true;\n\t\tthis._autoHeight = true;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis._node = new GraphNode();\n\t\tthis._model = new Model();\n\t\tthis._model.graph = this._node;\n\n\t\tthis._entity.addChild(this._node);\n\n\t\tthis._meshInfo = [];\n\t\tthis._material = null;\n\t\tthis._aabbDirty = true;\n\t\tthis._aabb = new BoundingBox();\n\t\tthis._noResize = false;\n\t\tthis._currentMaterialType = null;\n\t\tthis._maskedMaterialSrc = null;\n\t\tthis._rtlReorder = false;\n\t\tthis._unicodeConverter = false;\n\t\tthis._rtl = false;\n\t\tthis._outlineColor = new Color(0, 0, 0, 1);\n\t\tthis._outlineColorUniform = new Float32Array(4);\n\t\tthis._outlineThicknessScale = 0.2;\n\t\tthis._outlineThickness = 0.0;\n\t\tthis._shadowColor = new Color(0, 0, 0, 1);\n\t\tthis._shadowColorUniform = new Float32Array(4);\n\t\tthis._shadowOffsetScale = 0.005;\n\t\tthis._shadowOffset = new Vec2(0, 0);\n\t\tthis._shadowOffsetUniform = new Float32Array(2);\n\t\tthis._enableMarkup = false;\n\n\t\tthis._onScreenChange(this._element.screen);\n\n\t\telement.on('resize', this._onParentResize, this);\n\t\telement.on('set:screen', this._onScreenChange, this);\n\t\telement.on('screen:set:screenspace', this._onScreenSpaceChange, this);\n\t\telement.on('set:draworder', this._onDrawOrderChange, this);\n\t\telement.on('set:pivot', this._onPivotChange, this);\n\n\t\tthis._system.app.i18n.on('set:locale', this._onLocaleSet, this);\n\n\t\tthis._system.app.i18n.on('data:add', this._onLocalizationData, this);\n\n\t\tthis._system.app.i18n.on('data:remove', this._onLocalizationData, this);\n\n\t\tthis._rangeStart = 0;\n\t\tthis._rangeEnd = 0;\n\t}\n\n\tdestroy() {\n\t\tthis._setMaterial(null);\n\n\t\tif (this._model) {\n\t\t\tthis._element.removeModelFromLayers(this._model);\n\n\t\t\tthis._model.destroy();\n\n\t\t\tthis._model = null;\n\t\t}\n\n\t\tthis._fontAsset.destroy();\n\n\t\tthis.font = null;\n\n\t\tthis._element.off('resize', this._onParentResize, this);\n\n\t\tthis._element.off('set:screen', this._onScreenChange, this);\n\n\t\tthis._element.off('screen:set:screenspace', this._onScreenSpaceChange, this);\n\n\t\tthis._element.off('set:draworder', this._onDrawOrderChange, this);\n\n\t\tthis._element.off('set:pivot', this._onPivotChange, this);\n\n\t\tthis._system.app.i18n.off('set:locale', this._onLocaleSet, this);\n\n\t\tthis._system.app.i18n.off('data:add', this._onLocalizationData, this);\n\n\t\tthis._system.app.i18n.off('data:remove', this._onLocalizationData, this);\n\t}\n\n\t_onParentResize(width, height) {\n\t\tif (this._noResize) return;\n\t\tif (this._font) this._updateText();\n\t}\n\n\t_onScreenChange(screen) {\n\t\tif (screen) {\n\t\t\tthis._updateMaterial(screen.screen.screenSpace);\n\t\t} else {\n\t\t\tthis._updateMaterial(false);\n\t\t}\n\t}\n\n\t_onScreenSpaceChange(value) {\n\t\tthis._updateMaterial(value);\n\t}\n\n\t_onDrawOrderChange(order) {\n\t\tthis._drawOrder = order;\n\n\t\tif (this._model) {\n\t\t\tvar i;\n\t\t\tvar len;\n\n\t\t\tfor (i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tthis._model.meshInstances[i].drawOrder = order;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onPivotChange(pivot) {\n\t\tif (this._font) this._updateText();\n\t}\n\n\t_onLocaleSet(locale) {\n\t\tif (!this._i18nKey) return;\n\n\t\tif (this.fontAsset) {\n\t\t\tvar asset = this._system.app.assets.get(this.fontAsset);\n\n\t\t\tif (!asset || !asset.resource || asset.resource !== this._font) {\n\t\t\t\tthis.font = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._resetLocalizedText();\n\t}\n\n\t_onLocalizationData(locale, messages) {\n\t\tif (this._i18nKey && messages[this._i18nKey]) {\n\t\t\tthis._resetLocalizedText();\n\t\t}\n\t}\n\n\t_resetLocalizedText() {\n\t\tthis._setText(this._system.app.i18n.getText(this._i18nKey));\n\t}\n\n\t_setText(text) {\n\t\tif (this.unicodeConverter) {\n\t\t\tvar unicodeConverterFunc = this._system.getUnicodeConverter();\n\n\t\t\tif (unicodeConverterFunc) {\n\t\t\t\ttext = unicodeConverterFunc(text);\n\t\t\t} else {\n\t\t\t\tconsole.warn('Element created with unicodeConverter option but no unicodeConverter function registered');\n\t\t\t}\n\t\t}\n\n\t\tif (this._text !== text) {\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText(text);\n\t\t\t}\n\n\t\t\tthis._text = text;\n\t\t}\n\t}\n\n\t_updateText(text) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar results;\n\t\tvar tags;\n\t\tif (text === undefined) text = this._text;\n\t\tthis._symbols = string.getSymbols(text.normalize ? text.normalize('NFC') : text);\n\n\t\tif (this._symbols.length === 0) {\n\t\t\tthis._symbols = [\" \"];\n\t\t}\n\n\t\tif (this._enableMarkup) {\n\t\t\tresults = Markup.evaluate(this._symbols);\n\t\t\tthis._symbols = results.symbols;\n\t\t\ttags = results.tags;\n\t\t}\n\n\t\tif (this._rtlReorder) {\n\t\t\tvar rtlReorderFunc = this._system.app.systems.element.getRtlReorder();\n\n\t\t\tif (rtlReorderFunc) {\n\t\t\t\tresults = rtlReorderFunc(this._symbols);\n\t\t\t\tthis._rtl = results.rtl;\n\t\t\t\tthis._symbols = results.mapping.map(function (v) {\n\t\t\t\t\treturn this._symbols[v];\n\t\t\t\t}, this);\n\n\t\t\t\tif (tags) {\n\t\t\t\t\ttags = results.mapping.map(function (v) {\n\t\t\t\t\t\treturn tags[v];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('Element created with rtlReorder option but no rtlReorder function registered');\n\t\t\t}\n\t\t} else {\n\t\t\tthis._rtl = false;\n\t\t}\n\n\t\tif (tags) {\n\t\t\tvar paletteMap = {};\n\t\t\tthis._colorPalette = [Math.round(this._color.r * 255), Math.round(this._color.g * 255), Math.round(this._color.b * 255)];\n\t\t\tthis._symbolColors = [];\n\t\t\tpaletteMap[this._color.toString(false).toLowerCase()] = 0;\n\n\t\t\tfor (i = 0, len = this._symbols.length; i < len; ++i) {\n\t\t\t\tvar tag = tags[i];\n\t\t\t\tvar color = 0;\n\n\t\t\t\tif (tag && tag.color && tag.color.value) {\n\t\t\t\t\tvar c = tag.color.value;\n\n\t\t\t\t\tif (c.length === 7 && c[0] === \"#\") {\n\t\t\t\t\t\tvar hex = c.substring(1).toLowerCase();\n\n\t\t\t\t\t\tif (paletteMap.hasOwnProperty(hex)) {\n\t\t\t\t\t\t\tcolor = paletteMap[hex];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (/^([0-9a-f]{2}){3}$/.test(hex)) {\n\t\t\t\t\t\t\t\tcolor = this._colorPalette.length / 3;\n\t\t\t\t\t\t\t\tpaletteMap[hex] = color;\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(0, 2), 16));\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(2, 4), 16));\n\n\t\t\t\t\t\t\t\tthis._colorPalette.push(parseInt(hex.substring(4, 6), 16));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._symbolColors.push(color);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._colorPalette = [];\n\t\t\tthis._symbolColors = null;\n\t\t}\n\n\t\tvar charactersPerTexture = this._calculateCharsPerTexture();\n\n\t\tvar removedModel = false;\n\t\tvar element = this._element;\n\n\t\tvar screenSpace = element._isScreenSpace();\n\n\t\tvar screenCulled = element._isScreenCulled();\n\n\t\tvar visibleFn = function visibleFn(camera) {\n\t\t\treturn element.isVisibleForCamera(camera);\n\t\t};\n\n\t\tfor (i = 0, len = this._meshInfo.length; i < len; i++) {\n\t\t\tvar l = charactersPerTexture[i] || 0;\n\t\t\tvar meshInfo = this._meshInfo[i];\n\n\t\t\tif (meshInfo.count !== l) {\n\t\t\t\tif (!removedModel) {\n\t\t\t\t\telement.removeModelFromLayers(this._model);\n\t\t\t\t\tremovedModel = true;\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.count = l;\n\t\t\t\tmeshInfo.positions.length = meshInfo.normals.length = l * 3 * 4;\n\t\t\t\tmeshInfo.indices.length = l * 3 * 2;\n\t\t\t\tmeshInfo.uvs.length = l * 2 * 4;\n\t\t\t\tmeshInfo.colors.length = l * 4 * 4;\n\n\t\t\t\tif (meshInfo.meshInstance) {\n\t\t\t\t\tthis._removeMeshInstance(meshInfo.meshInstance);\n\t\t\t\t}\n\n\t\t\t\tif (l === 0) {\n\t\t\t\t\tmeshInfo.meshInstance = null;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var v = 0; v < l; v++) {\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 0] = v * 4;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 1] = v * 4 + 1;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 2] = v * 4 + 3;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 3] = v * 4 + 2;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 4] = v * 4 + 3;\n\t\t\t\t\tmeshInfo.indices[v * 3 * 2 + 5] = v * 4 + 1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 0] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 1] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 2] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 3] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 4] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 5] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 6] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 7] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 8] = -1;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 9] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 10] = 0;\n\t\t\t\t\tmeshInfo.normals[v * 4 * 3 + 11] = -1;\n\t\t\t\t}\n\n\t\t\t\tvar mesh = createMesh$1(this._system.app.graphicsDevice, meshInfo.positions, {\n\t\t\t\t\tuvs: meshInfo.uvs,\n\t\t\t\t\tnormals: meshInfo.normals,\n\t\t\t\t\tcolors: meshInfo.colors,\n\t\t\t\t\tindices: meshInfo.indices\n\t\t\t\t});\n\t\t\t\tvar mi = new MeshInstance(mesh, this._material, this._node);\n\t\t\t\tmi.name = \"Text Element: \" + this._entity.name;\n\t\t\t\tmi.castShadow = false;\n\t\t\t\tmi.receiveShadow = false;\n\t\t\t\tmi.cull = !screenSpace;\n\t\t\t\tmi.screenSpace = screenSpace;\n\t\t\t\tmi.drawOrder = this._drawOrder;\n\n\t\t\t\tif (screenCulled) {\n\t\t\t\t\tmi.cull = true;\n\t\t\t\t\tmi.isVisibleFunc = visibleFn;\n\t\t\t\t}\n\n\t\t\t\tthis._setTextureParams(mi, this._font.textures[i]);\n\n\t\t\t\tif (this._symbolColors) {\n\t\t\t\t\tthis._colorUniform[0] = 1;\n\t\t\t\t\tthis._colorUniform[1] = 1;\n\t\t\t\t\tthis._colorUniform[2] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\t\t\tthis._colorUniform[2] = this._color.b;\n\t\t\t\t}\n\n\t\t\t\tmi.setParameter(\"material_emissive\", this._colorUniform);\n\t\t\t\tmi.setParameter(\"material_opacity\", this._color.a);\n\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\t\t\t\tthis._outlineColorUniform[0] = this._outlineColor.r;\n\t\t\t\tthis._outlineColorUniform[1] = this._outlineColor.g;\n\t\t\t\tthis._outlineColorUniform[2] = this._outlineColor.b;\n\t\t\t\tthis._outlineColorUniform[3] = this._outlineColor.a;\n\t\t\t\tmi.setParameter(\"outline_color\", this._outlineColorUniform);\n\t\t\t\tmi.setParameter(\"outline_thickness\", this._outlineThicknessScale * this._outlineThickness);\n\t\t\t\tthis._shadowColorUniform[0] = this._shadowColor.r;\n\t\t\t\tthis._shadowColorUniform[1] = this._shadowColor.g;\n\t\t\t\tthis._shadowColorUniform[2] = this._shadowColor.b;\n\t\t\t\tthis._shadowColorUniform[3] = this._shadowColor.a;\n\t\t\t\tmi.setParameter(\"shadow_color\", this._shadowColorUniform);\n\t\t\t\tvar ratio = -this._font.data.info.maps[i].width / this._font.data.info.maps[i].height;\n\t\t\t\tthis._shadowOffsetUniform[0] = this._shadowOffsetScale * this._shadowOffset.x;\n\t\t\t\tthis._shadowOffsetUniform[1] = ratio * this._shadowOffsetScale * this._shadowOffset.y;\n\t\t\t\tmi.setParameter(\"shadow_offset\", this._shadowOffsetUniform);\n\t\t\t\tmeshInfo.meshInstance = mi;\n\n\t\t\t\tthis._model.meshInstances.push(mi);\n\t\t\t}\n\t\t}\n\n\t\tif (this._element.maskedBy) {\n\t\t\tthis._element._setMaskedBy(this._element.maskedBy);\n\t\t}\n\n\t\tif (removedModel && this._element.enabled && this._entity.enabled) {\n\t\t\tthis._element.addModelToLayers(this._model);\n\t\t}\n\n\t\tthis._updateMeshes();\n\n\t\tthis._rangeStart = 0;\n\t\tthis._rangeEnd = this._symbols.length;\n\n\t\tthis._updateRenderRange();\n\t}\n\n\t_removeMeshInstance(meshInstance) {\n\t\tmeshInstance.material = null;\n\t\tvar oldMesh = meshInstance.mesh;\n\n\t\tif (oldMesh) {\n\t\t\toldMesh.destroy();\n\t\t}\n\n\t\tvar idx = this._model.meshInstances.indexOf(meshInstance);\n\n\t\tif (idx !== -1) this._model.meshInstances.splice(idx, 1);\n\t}\n\n\t_setMaterial(material) {\n\t\tvar i;\n\t\tvar len;\n\t\tthis._material = material;\n\n\t\tif (this._model) {\n\t\t\tfor (i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.material = material;\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateMaterial(screenSpace) {\n\t\tvar element = this._element;\n\n\t\tvar screenCulled = element._isScreenCulled();\n\n\t\tvar visibleFn = function visibleFn(camera) {\n\t\t\treturn element.isVisibleForCamera(camera);\n\t\t};\n\n\t\tvar msdf = this._font && this._font.type === FONT_MSDF;\n\t\tthis._material = this._system.getTextElementMaterial(screenSpace, msdf);\n\n\t\tif (this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.cull = !screenSpace;\n\t\t\t\tmi.material = this._material;\n\t\t\t\tmi.screenSpace = screenSpace;\n\n\t\t\t\tif (screenCulled) {\n\t\t\t\t\tmi.cull = true;\n\t\t\t\t\tmi.isVisibleFunc = visibleFn;\n\t\t\t\t} else {\n\t\t\t\t\tmi.isVisibleFunc = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_isWordBoundary(char) {\n\t\treturn WORD_BOUNDARY_CHAR.test(char);\n\t}\n\n\t_isValidNextChar(nextchar) {\n\t\treturn nextchar !== null && !NO_LINE_BREAK_CJK_CHAR.test(nextchar);\n\t}\n\n\t_isNextCJKBoundary(char, nextchar) {\n\t\treturn CJK_CHAR.test(char) && (WORD_BOUNDARY_CHAR.test(nextchar) || ALPHANUMERIC_CHAR.test(nextchar));\n\t}\n\n\t_isNextCJKWholeWord(nextchar) {\n\t\treturn CJK_CHAR.test(nextchar);\n\t}\n\n\t_updateMeshes() {\n\t\tvar json = this._font.data;\n\t\tvar self = this;\n\t\tvar minFont = Math.min(this._minFontSize, this._maxFontSize);\n\t\tvar maxFont = this._maxFontSize;\n\n\t\tvar autoFit = this._shouldAutoFit();\n\n\t\tif (autoFit) {\n\t\t\tthis._fontSize = this._maxFontSize;\n\t\t}\n\n\t\tvar MAGIC = 32;\n\t\tvar l = this._symbols.length;\n\t\tvar _x = 0;\n\t\tvar _y = 0;\n\t\tvar _z = 0;\n\t\tvar _xMinusTrailingWhitespace = 0;\n\t\tvar lines = 1;\n\t\tvar wordStartX = 0;\n\t\tvar wordStartIndex = 0;\n\t\tvar lineStartIndex = 0;\n\t\tvar numWordsThisLine = 0;\n\t\tvar numCharsThisLine = 0;\n\t\tvar numBreaksThisLine = 0;\n\t\tvar splitHorizontalAnchors = Math.abs(this._element.anchor.x - this._element.anchor.z) >= 0.0001;\n\t\tvar maxLineWidth = this._element.calculatedWidth;\n\n\t\tif (this.autoWidth && !splitHorizontalAnchors || !this._wrapLines) {\n\t\t\tmaxLineWidth = Number.POSITIVE_INFINITY;\n\t\t}\n\n\t\tvar fontMinY = 0;\n\t\tvar fontMaxY = 0;\n\t\tvar scale = 1;\n\t\tvar char, data, i, j, quad, nextchar;\n\n\t\tfunction breakLine(symbols, lineBreakIndex, lineBreakX) {\n\t\t\tself._lineWidths.push(Math.abs(lineBreakX));\n\n\t\t\tvar sliceStart = lineStartIndex > lineBreakIndex ? lineBreakIndex + 1 : lineStartIndex;\n\t\t\tvar sliceEnd = lineStartIndex > lineBreakIndex ? lineStartIndex + 1 : lineBreakIndex;\n\t\t\tvar chars = symbols.slice(sliceStart, sliceEnd);\n\n\t\t\tif (numBreaksThisLine) {\n\t\t\t\tvar i = chars.length;\n\n\t\t\t\twhile (i-- && numBreaksThisLine > 0) {\n\t\t\t\t\tif (LINE_BREAK_CHAR.test(chars[i])) {\n\t\t\t\t\t\tchars.splice(i, 1);\n\t\t\t\t\t\tnumBreaksThisLine--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself._lineContents.push(chars.join(''));\n\n\t\t\t_x = 0;\n\t\t\t_y -= self._scaledLineHeight;\n\t\t\tlines++;\n\t\t\tnumWordsThisLine = 0;\n\t\t\tnumCharsThisLine = 0;\n\t\t\tnumBreaksThisLine = 0;\n\t\t\twordStartX = 0;\n\t\t\tlineStartIndex = lineBreakIndex;\n\t\t}\n\n\t\tvar retryUpdateMeshes = true;\n\n\t\twhile (retryUpdateMeshes) {\n\t\t\tretryUpdateMeshes = false;\n\n\t\t\tif (autoFit) {\n\t\t\t\tthis._scaledLineHeight = this._lineHeight * this._fontSize / (this._maxFontSize || 0.0001);\n\t\t\t} else {\n\t\t\t\tthis._scaledLineHeight = this._lineHeight;\n\t\t\t}\n\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t\tthis._lineWidths = [];\n\t\t\tthis._lineContents = [];\n\t\t\t_x = 0;\n\t\t\t_y = 0;\n\t\t\t_z = 0;\n\t\t\t_xMinusTrailingWhitespace = 0;\n\t\t\tlines = 1;\n\t\t\twordStartX = 0;\n\t\t\twordStartIndex = 0;\n\t\t\tlineStartIndex = 0;\n\t\t\tnumWordsThisLine = 0;\n\t\t\tnumCharsThisLine = 0;\n\t\t\tnumBreaksThisLine = 0;\n\t\t\tscale = this._fontSize / MAGIC;\n\t\t\tfontMinY = this._fontMinY * scale;\n\t\t\tfontMaxY = this._fontMaxY * scale;\n\n\t\t\tfor (i = 0; i < this._meshInfo.length; i++) {\n\t\t\t\tthis._meshInfo[i].quad = 0;\n\t\t\t\tthis._meshInfo[i].lines = {};\n\t\t\t}\n\n\t\t\tvar color_r = 255;\n\t\t\tvar color_g = 255;\n\t\t\tvar color_b = 255;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tchar = this._symbols[i];\n\t\t\t\tnextchar = i + 1 >= l ? null : this._symbols[i + 1];\n\t\t\t\tconst isLineBreak = LINE_BREAK_CHAR.test(char);\n\n\t\t\t\tif (isLineBreak) {\n\t\t\t\t\tnumBreaksThisLine++;\n\n\t\t\t\t\tif (!this._wrapLines || this._maxLines < 0 || lines < this._maxLines) {\n\t\t\t\t\t\tbreakLine(this._symbols, i, _xMinusTrailingWhitespace);\n\t\t\t\t\t\twordStartIndex = i + 1;\n\t\t\t\t\t\tlineStartIndex = i + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar x = 0;\n\t\t\t\tvar y = 0;\n\t\t\t\tvar advance = 0;\n\t\t\t\tvar quadsize = 1;\n\t\t\t\tvar dataScale, size;\n\t\t\t\tdata = json.chars[char];\n\n\t\t\t\tif (!data) {\n\t\t\t\t\tif (CONTROL_CHARS.indexOf(char) !== -1) {\n\t\t\t\t\t\tdata = CONTROL_GLYPH_DATA;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (json.chars[' ']) {\n\t\t\t\t\t\t\tdata = json.chars[' '];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (var key in json.chars) {\n\t\t\t\t\t\t\t\tdata = json.chars[key];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (data) {\n\t\t\t\t\tvar kerning = 0;\n\n\t\t\t\t\tif (numCharsThisLine > 0) {\n\t\t\t\t\t\tvar kernTable = this._font.data.kerning;\n\n\t\t\t\t\t\tif (kernTable) {\n\t\t\t\t\t\t\tvar kernLeft = kernTable[string.getCodePoint(this._symbols[i - 1]) || 0];\n\n\t\t\t\t\t\t\tif (kernLeft) {\n\t\t\t\t\t\t\t\tkerning = kernLeft[string.getCodePoint(this._symbols[i]) || 0] || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdataScale = data.scale || 1;\n\t\t\t\t\tsize = (data.width + data.height) / 2;\n\t\t\t\t\tquadsize = scale * size / dataScale;\n\t\t\t\t\tadvance = (data.xadvance + kerning) * scale;\n\t\t\t\t\tx = (data.xoffset - kerning) * scale;\n\t\t\t\t\ty = data.yoffset * scale;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"Couldn't substitute missing character: '\" + char + \"'\");\n\t\t\t\t}\n\n\t\t\t\tvar isWhitespace = WHITESPACE_CHAR.test(char);\n\t\t\t\tvar meshInfo = this._meshInfo[data && data.map || 0];\n\t\t\t\tvar candidateLineWidth = _x + this._spacing * advance;\n\n\t\t\t\tif (candidateLineWidth > maxLineWidth && numCharsThisLine > 0 && !isWhitespace) {\n\t\t\t\t\tif (this._maxLines < 0 || lines < this._maxLines) {\n\t\t\t\t\t\tif (numWordsThisLine === 0) {\n\t\t\t\t\t\t\twordStartIndex = i;\n\t\t\t\t\t\t\tbreakLine(this._symbols, i, _xMinusTrailingWhitespace);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar backtrack = Math.max(i - wordStartIndex, 0);\n\n\t\t\t\t\t\t\tif (this._meshInfo.length <= 1) {\n\t\t\t\t\t\t\t\tmeshInfo.lines[lines - 1] -= backtrack;\n\t\t\t\t\t\t\t\tmeshInfo.quad -= backtrack;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar backtrackStart = wordStartIndex;\n\t\t\t\t\t\t\t\tvar backtrackEnd = i;\n\n\t\t\t\t\t\t\t\tfor (j = backtrackStart; j < backtrackEnd; j++) {\n\t\t\t\t\t\t\t\t\tvar backChar = this._symbols[j];\n\t\t\t\t\t\t\t\t\tvar backCharData = json.chars[backChar];\n\t\t\t\t\t\t\t\t\tvar backMeshInfo = this._meshInfo[backCharData && backCharData.map || 0];\n\t\t\t\t\t\t\t\t\tbackMeshInfo.lines[lines - 1] -= 1;\n\t\t\t\t\t\t\t\t\tbackMeshInfo.quad -= 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ti -= backtrack + 1;\n\t\t\t\t\t\t\tbreakLine(this._symbols, wordStartIndex, wordStartX);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tquad = meshInfo.quad;\n\t\t\t\tmeshInfo.lines[lines - 1] = quad;\n\t\t\t\tvar left = _x - x;\n\t\t\t\tvar right = left + quadsize;\n\t\t\t\tvar bottom = _y - y;\n\t\t\t\tvar top = bottom + quadsize;\n\n\t\t\t\tif (this._rtl) {\n\t\t\t\t\tvar shift = quadsize - x - this._spacing * advance - x;\n\t\t\t\t\tleft -= shift;\n\t\t\t\t\tright -= shift;\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 0] = left;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 1] = bottom;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 2] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 3] = right;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 4] = bottom;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 5] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 6] = right;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 7] = top;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 8] = _z;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 9] = left;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 10] = top;\n\t\t\t\tmeshInfo.positions[quad * 4 * 3 + 11] = _z;\n\t\t\t\tthis.width = Math.max(this.width, candidateLineWidth);\n\t\t\t\tvar fontSize;\n\n\t\t\t\tif (this._shouldAutoFitWidth() && this.width > this._element.calculatedWidth) {\n\t\t\t\t\tfontSize = Math.floor(this._element.fontSize * this._element.calculatedWidth / (this.width || 0.0001));\n\t\t\t\t\tfontSize = math.clamp(fontSize, minFont, maxFont);\n\n\t\t\t\t\tif (fontSize !== this._element.fontSize) {\n\t\t\t\t\t\tthis._fontSize = fontSize;\n\t\t\t\t\t\tretryUpdateMeshes = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.height = Math.max(this.height, fontMaxY - (_y + fontMinY));\n\n\t\t\t\tif (this._shouldAutoFitHeight() && this.height > this._element.calculatedHeight) {\n\t\t\t\t\tfontSize = math.clamp(this._fontSize - 1, minFont, maxFont);\n\n\t\t\t\t\tif (fontSize !== this._element.fontSize) {\n\t\t\t\t\t\tthis._fontSize = fontSize;\n\t\t\t\t\t\tretryUpdateMeshes = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_x += this._spacing * advance;\n\n\t\t\t\tif (!isWhitespace) {\n\t\t\t\t\t_xMinusTrailingWhitespace = _x;\n\t\t\t\t}\n\n\t\t\t\tif (this._isWordBoundary(char) || this._isValidNextChar(nextchar) && (this._isNextCJKBoundary(char, nextchar) || this._isNextCJKWholeWord(nextchar))) {\n\t\t\t\t\tnumWordsThisLine++;\n\t\t\t\t\twordStartX = _xMinusTrailingWhitespace;\n\t\t\t\t\twordStartIndex = i + 1;\n\t\t\t\t}\n\n\t\t\t\tnumCharsThisLine++;\n\n\t\t\t\tvar uv = this._getUv(char);\n\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 0] = uv[0];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 1] = 1.0 - uv[1];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 2] = uv[2];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 3] = 1.0 - uv[1];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 4] = uv[2];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 5] = 1.0 - uv[3];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 6] = uv[0];\n\t\t\t\tmeshInfo.uvs[quad * 4 * 2 + 7] = 1.0 - uv[3];\n\n\t\t\t\tif (this._symbolColors) {\n\t\t\t\t\tvar colorIdx = this._symbolColors[i] * 3;\n\t\t\t\t\tcolor_r = this._colorPalette[colorIdx];\n\t\t\t\t\tcolor_g = this._colorPalette[colorIdx + 1];\n\t\t\t\t\tcolor_b = this._colorPalette[colorIdx + 2];\n\t\t\t\t}\n\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 0] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 1] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 2] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 3] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 4] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 5] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 6] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 7] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 8] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 9] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 10] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 11] = 255;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 12] = color_r;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 13] = color_g;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 14] = color_b;\n\t\t\t\tmeshInfo.colors[quad * 4 * 4 + 15] = 255;\n\t\t\t\tmeshInfo.quad++;\n\t\t\t}\n\n\t\t\tif (retryUpdateMeshes) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (lineStartIndex < l) {\n\t\t\t\tbreakLine(this._symbols, l, _x);\n\t\t\t}\n\t\t}\n\n\t\tthis._noResize = true;\n\t\tthis.autoWidth = this._autoWidth;\n\t\tthis.autoHeight = this._autoHeight;\n\t\tthis._noResize = false;\n\t\tvar hp = this._element.pivot.x;\n\t\tvar vp = this._element.pivot.y;\n\t\tvar ha = this._alignment.x;\n\t\tvar va = this._alignment.y;\n\n\t\tfor (i = 0; i < this._meshInfo.length; i++) {\n\t\t\tif (this._meshInfo[i].count === 0) continue;\n\t\t\tvar prevQuad = 0;\n\n\t\t\tfor (var line in this._meshInfo[i].lines) {\n\t\t\t\tvar index = this._meshInfo[i].lines[line];\n\n\t\t\t\tvar lw = this._lineWidths[parseInt(line, 10)];\n\n\t\t\t\tvar hoffset = -hp * this._element.calculatedWidth + ha * (this._element.calculatedWidth - lw) * (this._rtl ? -1 : 1);\n\t\t\t\tvar voffset = (1 - vp) * this._element.calculatedHeight - fontMaxY - (1 - va) * (this._element.calculatedHeight - this.height);\n\n\t\t\t\tfor (quad = prevQuad; quad <= index; quad++) {\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 3] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 6] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 9] += hoffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 1] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 4] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 7] += voffset;\n\t\t\t\t\tthis._meshInfo[i].positions[quad * 4 * 3 + 10] += voffset;\n\t\t\t\t}\n\n\t\t\t\tif (this._rtl) {\n\t\t\t\t\tfor (quad = prevQuad; quad <= index; quad++) {\n\t\t\t\t\t\tvar idx = quad * 4 * 3;\n\n\t\t\t\t\t\tfor (var vert = 0; vert < 4; ++vert) {\n\t\t\t\t\t\t\tthis._meshInfo[i].positions[idx + vert * 3] = this._element.calculatedWidth - this._meshInfo[i].positions[idx + vert * 3] + hoffset * 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar tmp0 = this._meshInfo[i].positions[idx + 3];\n\t\t\t\t\t\tvar tmp1 = this._meshInfo[i].positions[idx + 6];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 3] = this._meshInfo[i].positions[idx + 0];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 6] = this._meshInfo[i].positions[idx + 9];\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 0] = tmp0;\n\t\t\t\t\t\tthis._meshInfo[i].positions[idx + 9] = tmp1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprevQuad = index + 1;\n\t\t\t}\n\n\t\t\tvar numVertices = this._meshInfo[i].count * 4;\n\t\t\tvar vertMax = this._meshInfo[i].quad * 4;\n\t\t\tvar it = new VertexIterator(this._meshInfo[i].meshInstance.mesh.vertexBuffer);\n\n\t\t\tfor (var v = 0; v < numVertices; v++) {\n\t\t\t\tif (v >= vertMax) {\n\t\t\t\t\tit.element[SEMANTIC_POSITION].set(0, 0, 0);\n\t\t\t\t\tit.element[SEMANTIC_TEXCOORD0].set(0, 0);\n\t\t\t\t\tit.element[SEMANTIC_COLOR].set(0, 0, 0, 0);\n\t\t\t\t} else {\n\t\t\t\t\tit.element[SEMANTIC_POSITION].set(this._meshInfo[i].positions[v * 3 + 0], this._meshInfo[i].positions[v * 3 + 1], this._meshInfo[i].positions[v * 3 + 2]);\n\t\t\t\t\tit.element[SEMANTIC_TEXCOORD0].set(this._meshInfo[i].uvs[v * 2 + 0], this._meshInfo[i].uvs[v * 2 + 1]);\n\t\t\t\t\tit.element[SEMANTIC_COLOR].set(this._meshInfo[i].colors[v * 4 + 0], this._meshInfo[i].colors[v * 4 + 1], this._meshInfo[i].colors[v * 4 + 2], this._meshInfo[i].colors[v * 4 + 3]);\n\t\t\t\t}\n\n\t\t\t\tit.next();\n\t\t\t}\n\n\t\t\tit.end();\n\n\t\t\tthis._meshInfo[i].meshInstance.mesh.aabb.compute(this._meshInfo[i].positions);\n\n\t\t\tthis._meshInfo[i].meshInstance._aabbVer = -1;\n\t\t}\n\n\t\tthis._aabbDirty = true;\n\t}\n\n\t_onFontRender() {\n\t\tthis.font = this._font;\n\t}\n\n\t_onFontLoad(asset) {\n\t\tif (this.font !== asset.resource) {\n\t\t\tthis.font = asset.resource;\n\t\t}\n\t}\n\n\t_onFontChange(asset, name, _new, _old) {\n\t\tif (name === 'data') {\n\t\t\tthis._font.data = _new;\n\t\t\tvar maps = this._font.data.info.maps.length;\n\n\t\t\tfor (var i = 0; i < maps; i++) {\n\t\t\t\tif (!this._meshInfo[i]) continue;\n\t\t\t\tvar mi = this._meshInfo[i].meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onFontRemove(asset) {}\n\n\t_setTextureParams(mi, texture) {\n\t\tif (this._font) {\n\t\t\tif (this._font.type === FONT_MSDF) {\n\t\t\t\tmi.deleteParameter(\"texture_emissiveMap\");\n\t\t\t\tmi.deleteParameter(\"texture_opacityMap\");\n\t\t\t\tmi.setParameter(\"texture_msdfMap\", texture);\n\t\t\t} else if (this._font.type === FONT_BITMAP) {\n\t\t\t\tmi.deleteParameter(\"texture_msdfMap\");\n\t\t\t\tmi.setParameter(\"texture_emissiveMap\", texture);\n\t\t\t\tmi.setParameter(\"texture_opacityMap\", texture);\n\t\t\t}\n\t\t}\n\t}\n\n\t_getPxRange(font) {\n\t\tvar keys = Object.keys(this._font.data.chars);\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tvar char = this._font.data.chars[keys[i]];\n\n\t\t\tif (char.range) {\n\t\t\t\treturn (char.scale || 1) * char.range;\n\t\t\t}\n\t\t}\n\n\t\treturn 2;\n\t}\n\n\t_getUv(char) {\n\t\tvar data = this._font.data;\n\n\t\tif (!data.chars[char]) {\n\t\t\tvar space = ' ';\n\n\t\t\tif (data.chars[space]) {\n\t\t\t\treturn this._getUv(space);\n\t\t\t}\n\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tvar map = data.chars[char].map;\n\t\tvar width = data.info.maps[map].width;\n\t\tvar height = data.info.maps[map].height;\n\t\tvar x = data.chars[char].x;\n\t\tvar y = data.chars[char].y;\n\t\tvar x1 = x;\n\t\tvar y1 = y;\n\t\tvar x2 = x + data.chars[char].width;\n\t\tvar y2 = y - data.chars[char].height;\n\t\tvar edge = 1 - data.chars[char].height / height;\n\t\treturn [x1 / width, edge - y1 / height, x2 / width, edge - y2 / height];\n\t}\n\n\tonEnable() {\n\t\tthis._fontAsset.autoLoad = true;\n\n\t\tif (this._model) {\n\t\t\tthis._element.addModelToLayers(this._model);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis._fontAsset.autoLoad = false;\n\n\t\tif (this._model) {\n\t\t\tthis._element.removeModelFromLayers(this._model);\n\t\t}\n\t}\n\n\t_setStencil(stencilParams) {\n\t\tif (this._model) {\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (var i = 0; i < instances.length; i++) {\n\t\t\t\tinstances[i].stencilFront = stencilParams;\n\t\t\t\tinstances[i].stencilBack = stencilParams;\n\t\t\t}\n\t\t}\n\t}\n\n\t_shouldAutoFitWidth() {\n\t\treturn this._autoFitWidth && !this._autoWidth;\n\t}\n\n\t_shouldAutoFitHeight() {\n\t\treturn this._autoFitHeight && !this._autoHeight;\n\t}\n\n\t_shouldAutoFit() {\n\t\treturn this._autoFitWidth && !this._autoWidth || this._autoFitHeight && !this._autoHeight;\n\t}\n\n\t_calculateCharsPerTexture(symbolIndex) {\n\t\tvar charactersPerTexture = {};\n\n\t\tif (symbolIndex === undefined) {\n\t\t\tsymbolIndex = this._symbols.length;\n\t\t}\n\n\t\tvar i, len, char, info, map;\n\n\t\tfor (i = 0, len = symbolIndex; i < len; i++) {\n\t\t\tchar = this._symbols[i];\n\t\t\tinfo = this._font.data.chars[char];\n\n\t\t\tif (!info) {\n\t\t\t\tinfo = this._font.data.chars[' '];\n\n\t\t\t\tif (!info) {\n\t\t\t\t\tinfo = this._font.data.chars[Object.keys(this._font.data.chars)[0]];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmap = info.map;\n\n\t\t\tif (!charactersPerTexture[map]) {\n\t\t\t\tcharactersPerTexture[map] = 1;\n\t\t\t} else {\n\t\t\t\tcharactersPerTexture[map]++;\n\t\t\t}\n\t\t}\n\n\t\treturn charactersPerTexture;\n\t}\n\n\t_updateRenderRange() {\n\t\tvar startChars = this._rangeStart === 0 ? 0 : this._calculateCharsPerTexture(this._rangeStart);\n\t\tvar endChars = this._rangeEnd === 0 ? 0 : this._calculateCharsPerTexture(this._rangeEnd);\n\t\tvar i, len;\n\n\t\tfor (i = 0, len = this._meshInfo.length; i < len; i++) {\n\t\t\tvar start = startChars[i] || 0;\n\t\t\tvar end = endChars[i] || 0;\n\t\t\tvar instance = this._meshInfo[i].meshInstance;\n\n\t\t\tif (instance) {\n\t\t\t\tvar mesh = instance.mesh;\n\n\t\t\t\tif (mesh) {\n\t\t\t\t\tmesh.primitive[0].base = start * 3 * 2;\n\t\t\t\t\tmesh.primitive[0].count = (end - start) * 3 * 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget text() {\n\t\treturn this._text;\n\t}\n\n\tset text(value) {\n\t\tthis._i18nKey = null;\n\t\tvar str = value != null && value.toString() || \"\";\n\n\t\tthis._setText(str);\n\t}\n\n\tget key() {\n\t\treturn this._i18nKey;\n\t}\n\n\tset key(value) {\n\t\tvar str = value !== null ? value.toString() : null;\n\n\t\tif (this._i18nKey === str) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._i18nKey = str;\n\n\t\tif (str) {\n\t\t\tthis._fontAsset.disableLocalization = false;\n\n\t\t\tthis._resetLocalizedText();\n\t\t} else {\n\t\t\tthis._fontAsset.disableLocalization = true;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tvar r = value.r;\n\t\tvar g = value.g;\n\t\tvar b = value.b;\n\n\t\tif (this._color.r === r && this._color.g === g && this._color.b === b) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._color.r = r;\n\t\tthis._color.g = g;\n\t\tthis._color.b = b;\n\n\t\tif (this._symbolColors) {\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter('material_emissive', this._colorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tif (this._color.a === value) return;\n\t\tthis._color.a = value;\n\n\t\tif (this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter('material_opacity', value);\n\t\t\t}\n\t\t}\n\t}\n\n\tget lineHeight() {\n\t\treturn this._lineHeight;\n\t}\n\n\tset lineHeight(value) {\n\t\tvar _prev = this._lineHeight;\n\t\tthis._lineHeight = value;\n\t\tthis._scaledLineHeight = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget wrapLines() {\n\t\treturn this._wrapLines;\n\t}\n\n\tset wrapLines(value) {\n\t\tvar _prev = this._wrapLines;\n\t\tthis._wrapLines = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget lines() {\n\t\treturn this._lineContents;\n\t}\n\n\tget spacing() {\n\t\treturn this._spacing;\n\t}\n\n\tset spacing(value) {\n\t\tvar _prev = this._spacing;\n\t\tthis._spacing = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget fontSize() {\n\t\treturn this._fontSize;\n\t}\n\n\tset fontSize(value) {\n\t\tvar _prev = this._fontSize;\n\t\tthis._fontSize = value;\n\t\tthis._originalFontSize = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget fontAsset() {\n\t\treturn this._fontAsset.localizedAsset;\n\t}\n\n\tset fontAsset(value) {\n\t\tthis._fontAsset.defaultAsset = value;\n\t}\n\n\tget font() {\n\t\treturn this._font;\n\t}\n\n\tset font(value) {\n\t\tvar i;\n\t\tvar len;\n\t\tvar previousFontType;\n\n\t\tif (this._font) {\n\t\t\tpreviousFontType = this._font.type;\n\t\t\tif (this._font.off) this._font.off('render', this._onFontRender, this);\n\t\t}\n\n\t\tthis._font = value;\n\t\tthis._fontMinY = 0;\n\t\tthis._fontMaxY = 0;\n\t\tif (!value) return;\n\t\tvar json = this._font.data;\n\n\t\tfor (var charId in json.chars) {\n\t\t\tvar data = json.chars[charId];\n\n\t\t\tif (data.bounds) {\n\t\t\t\tthis._fontMinY = Math.min(this._fontMinY, data.bounds[1]);\n\t\t\t\tthis._fontMaxY = Math.max(this._fontMaxY, data.bounds[3]);\n\t\t\t}\n\t\t}\n\n\t\tif (this._font.on) this._font.on('render', this._onFontRender, this);\n\n\t\tif (this._fontAsset.localizedAsset) {\n\t\t\tvar asset = this._system.app.assets.get(this._fontAsset.localizedAsset);\n\n\t\t\tif (asset.resource !== this._font) {\n\t\t\t\tthis._fontAsset.defaultAsset = null;\n\t\t\t}\n\t\t}\n\n\t\tif (value.type !== previousFontType) {\n\t\t\tvar screenSpace = this._element._isScreenSpace();\n\n\t\t\tthis._updateMaterial(screenSpace);\n\t\t}\n\n\t\tfor (i = 0, len = this._font.textures.length; i < len; i++) {\n\t\t\tif (!this._meshInfo[i]) {\n\t\t\t\tthis._meshInfo[i] = new MeshInfo();\n\t\t\t} else {\n\t\t\t\tvar mi = this._meshInfo[i].meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.setParameter(\"font_sdfIntensity\", this._font.intensity);\n\t\t\t\t\tmi.setParameter(\"font_pxrange\", this._getPxRange(this._font));\n\t\t\t\t\tmi.setParameter(\"font_textureWidth\", this._font.data.info.maps[i].width);\n\n\t\t\t\t\tthis._setTextureParams(mi, this._font.textures[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar removedModel = false;\n\n\t\tfor (i = this._font.textures.length; i < this._meshInfo.length; i++) {\n\t\t\tif (this._meshInfo[i].meshInstance) {\n\t\t\t\tif (!removedModel) {\n\t\t\t\t\tthis._element.removeModelFromLayers(this._model);\n\n\t\t\t\t\tremovedModel = true;\n\t\t\t\t}\n\n\t\t\t\tthis._removeMeshInstance(this._meshInfo[i].meshInstance);\n\t\t\t}\n\t\t}\n\n\t\tif (this._meshInfo.length > this._font.textures.length) this._meshInfo.length = this._font.textures.length;\n\n\t\tthis._updateText();\n\t}\n\n\tget alignment() {\n\t\treturn this._alignment;\n\t}\n\n\tset alignment(value) {\n\t\tif (value instanceof Vec2) {\n\t\t\tthis._alignment.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._alignment.set(value[0], value[1]);\n\t\t}\n\n\t\tif (this._font) this._updateText();\n\t}\n\n\tget autoWidth() {\n\t\treturn this._autoWidth;\n\t}\n\n\tset autoWidth(value) {\n\t\tvar old = this._autoWidth;\n\t\tthis._autoWidth = value;\n\n\t\tif (value && Math.abs(this._element.anchor.x - this._element.anchor.z) < 0.0001) {\n\t\t\tthis._element.width = this.width;\n\t\t}\n\n\t\tif (old !== value) {\n\t\t\tvar newFontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\t\tif (newFontSize !== this._fontSize) {\n\t\t\t\tthis._fontSize = newFontSize;\n\n\t\t\t\tif (this._font) {\n\t\t\t\t\tthis._updateText();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoHeight() {\n\t\treturn this._autoHeight;\n\t}\n\n\tset autoHeight(value) {\n\t\tvar old = this._autoHeight;\n\t\tthis._autoHeight = value;\n\n\t\tif (value && Math.abs(this._element.anchor.y - this._element.anchor.w) < 0.0001) {\n\t\t\tthis._element.height = this.height;\n\t\t}\n\n\t\tif (old !== value) {\n\t\t\tvar newFontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\t\tif (newFontSize !== this._fontSize) {\n\t\t\t\tthis._fontSize = newFontSize;\n\n\t\t\t\tif (this._font) {\n\t\t\t\t\tthis._updateText();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget rtlReorder() {\n\t\treturn this._rtlReorder;\n\t}\n\n\tset rtlReorder(value) {\n\t\tif (this._rtlReorder !== value) {\n\t\t\tthis._rtlReorder = value;\n\n\t\t\tif (this._font) {\n\t\t\t\tthis._updateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tget unicodeConverter() {\n\t\treturn this._unicodeConverter;\n\t}\n\n\tset unicodeConverter(value) {\n\t\tif (this._unicodeConverter !== value) {\n\t\t\tthis._unicodeConverter = value;\n\n\t\t\tthis._setText(this._text);\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._aabbDirty) {\n\t\t\tvar initialized = false;\n\n\t\t\tfor (var i = 0; i < this._meshInfo.length; i++) {\n\t\t\t\tif (!this._meshInfo[i].meshInstance) continue;\n\n\t\t\t\tif (!initialized) {\n\t\t\t\t\tthis._aabb.copy(this._meshInfo[i].meshInstance.aabb);\n\n\t\t\t\t\tinitialized = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis._aabb.add(this._meshInfo[i].meshInstance.aabb);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._aabbDirty = false;\n\t\t}\n\n\t\treturn this._aabb;\n\t}\n\n\tget outlineColor() {\n\t\treturn this._outlineColor;\n\t}\n\n\tset outlineColor(value) {\n\t\tvar r = value instanceof Color ? value.r : value[0];\n\t\tvar g = value instanceof Color ? value.g : value[1];\n\t\tvar b = value instanceof Color ? value.b : value[2];\n\t\tvar a = value instanceof Color ? value.a : value[3];\n\n\t\tif (this._outlineColor.r === r && this._outlineColor.g === g && this._outlineColor.b === b && this._outlineColor.a === a) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._outlineColor.r = r;\n\t\tthis._outlineColor.g = g;\n\t\tthis._outlineColor.b = b;\n\t\tthis._outlineColor.a = a;\n\n\t\tif (this._model) {\n\t\t\tthis._outlineColorUniform[0] = this._outlineColor.r;\n\t\t\tthis._outlineColorUniform[1] = this._outlineColor.g;\n\t\t\tthis._outlineColorUniform[2] = this._outlineColor.b;\n\t\t\tthis._outlineColorUniform[3] = this._outlineColor.a;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"outline_color\", this._outlineColorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget outlineThickness() {\n\t\treturn this._outlineThickness;\n\t}\n\n\tset outlineThickness(value) {\n\t\tvar _prev = this._outlineThickness;\n\t\tthis._outlineThickness = value;\n\n\t\tif (_prev !== value && this._font) {\n\t\t\tif (this._model) {\n\t\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\t\tmi.setParameter(\"outline_thickness\", this._outlineThicknessScale * this._outlineThickness);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget shadowColor() {\n\t\treturn this._shadowColor;\n\t}\n\n\tset shadowColor(value) {\n\t\tvar r = value instanceof Color ? value.r : value[0];\n\t\tvar g = value instanceof Color ? value.g : value[1];\n\t\tvar b = value instanceof Color ? value.b : value[2];\n\t\tvar a = value instanceof Color ? value.a : value[3];\n\n\t\tif (this._shadowColor.r === r && this._shadowColor.g === g && this._shadowColor.b === b && this._shadowColor.a === a) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._shadowColor.r = r;\n\t\tthis._shadowColor.g = g;\n\t\tthis._shadowColor.b = b;\n\t\tthis._shadowColor.a = a;\n\n\t\tif (this._model) {\n\t\t\tthis._shadowColorUniform[0] = this._shadowColor.r;\n\t\t\tthis._shadowColorUniform[1] = this._shadowColor.g;\n\t\t\tthis._shadowColorUniform[2] = this._shadowColor.b;\n\t\t\tthis._shadowColorUniform[3] = this._shadowColor.a;\n\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"shadow_color\", this._shadowColorUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget shadowOffset() {\n\t\treturn this._shadowOffset;\n\t}\n\n\tset shadowOffset(value) {\n\t\tvar x = value instanceof Vec2 ? value.x : value[0],\n\t\t\t\ty = value instanceof Vec2 ? value.y : value[1];\n\n\t\tif (this._shadowOffset.x === x && this._shadowOffset.y === y) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._shadowOffset.set(x, y);\n\n\t\tif (this._font && this._model) {\n\t\t\tfor (var i = 0, len = this._model.meshInstances.length; i < len; i++) {\n\t\t\t\tvar ratio = -this._font.data.info.maps[i].width / this._font.data.info.maps[i].height;\n\t\t\t\tthis._shadowOffsetUniform[0] = this._shadowOffsetScale * this._shadowOffset.x;\n\t\t\t\tthis._shadowOffsetUniform[1] = ratio * this._shadowOffsetScale * this._shadowOffset.y;\n\t\t\t\tvar mi = this._model.meshInstances[i];\n\t\t\t\tmi.setParameter(\"shadow_offset\", this._shadowOffsetUniform);\n\t\t\t}\n\t\t}\n\t}\n\n\tget minFontSize() {\n\t\treturn this._minFontSize;\n\t}\n\n\tset minFontSize(value) {\n\t\tif (this._minFontSize === value) return;\n\t\tthis._minFontSize = value;\n\n\t\tif (this.font && this._shouldAutoFit()) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget maxFontSize() {\n\t\treturn this._maxFontSize;\n\t}\n\n\tset maxFontSize(value) {\n\t\tif (this._maxFontSize === value) return;\n\t\tthis._maxFontSize = value;\n\n\t\tif (this.font && this._shouldAutoFit()) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget autoFitWidth() {\n\t\treturn this._autoFitWidth;\n\t}\n\n\tset autoFitWidth(value) {\n\t\tif (this._autoFitWidth === value) return;\n\t\tthis._autoFitWidth = value;\n\t\tthis._fontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget autoFitHeight() {\n\t\treturn this._autoFitHeight;\n\t}\n\n\tset autoFitHeight(value) {\n\t\tif (this._autoFitHeight === value) return;\n\t\tthis._autoFitHeight = value;\n\t\tthis._fontSize = this._shouldAutoFit() ? this._maxFontSize : this._originalFontSize;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget maxLines() {\n\t\treturn this._maxLines;\n\t}\n\n\tset maxLines(value) {\n\t\tif (this._maxLines === value) return;\n\t\tif (value === null && this._maxLines === -1) return;\n\t\tthis._maxLines = value === null ? -1 : value;\n\n\t\tif (this.font && this._wrapLines) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget enableMarkup() {\n\t\treturn this._enableMarkup;\n\t}\n\n\tset enableMarkup(value) {\n\t\tvalue = !!value;\n\t\tif (this._enableMarkup === value) return;\n\t\tthis._enableMarkup = value;\n\n\t\tif (this.font) {\n\t\t\tthis._updateText();\n\t\t}\n\t}\n\n\tget symbols() {\n\t\treturn this._symbols;\n\t}\n\n\tget symbolColors() {\n\t\tif (this._symbolColors === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._symbolColors.map(function (c) {\n\t\t\treturn this._colorPalette.slice(c * 3, c * 3 + 3);\n\t\t}, this);\n\t}\n\n\tget rtl() {\n\t\treturn this._rtl;\n\t}\n\n\tget rangeStart() {\n\t\treturn this._rangeStart;\n\t}\n\n\tset rangeStart(rangeStart) {\n\t\trangeStart = Math.max(0, Math.min(rangeStart, this._symbols.length));\n\n\t\tif (rangeStart !== this._rangeStart) {\n\t\t\tthis._rangeStart = rangeStart;\n\n\t\t\tthis._updateRenderRange();\n\t\t}\n\t}\n\n\tget rangeEnd() {\n\t\treturn this._rangeEnd;\n\t}\n\n\tset rangeEnd(rangeEnd) {\n\t\trangeEnd = Math.max(this._rangeStart, Math.min(rangeEnd, this._symbols.length));\n\n\t\tif (rangeEnd !== this._rangeEnd) {\n\t\t\tthis._rangeEnd = rangeEnd;\n\n\t\t\tthis._updateRenderRange();\n\t\t}\n\t}\n\n}\n\nvar position = new Vec3();\nvar invParentWtm = new Mat4();\nvar vecA$1 = new Vec3();\nvar vecB$1 = new Vec3();\nvar matA = new Mat4();\nvar matB = new Mat4();\nvar matC = new Mat4();\nvar matD = new Mat4();\n\nclass ElementComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._beingInitialized = false;\n\t\tthis._anchor = new Vec4();\n\t\tthis._localAnchor = new Vec4();\n\t\tthis._pivot = new Vec2();\n\t\tthis._width = this._calculatedWidth = 32;\n\t\tthis._height = this._calculatedHeight = 32;\n\t\tthis._margin = new Vec4(0, 0, -32, -32);\n\t\tthis._modelTransform = new Mat4();\n\t\tthis._screenToWorld = new Mat4();\n\t\tthis._anchorTransform = new Mat4();\n\t\tthis._anchorDirty = true;\n\t\tthis._parentWorldTransform = new Mat4();\n\t\tthis._screenTransform = new Mat4();\n\t\tthis._screenCorners = [new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\tthis._canvasCorners = [new Vec2(), new Vec2(), new Vec2(), new Vec2()];\n\t\tthis._worldCorners = [new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n\t\tthis._cornersDirty = true;\n\t\tthis._canvasCornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\t\tthis.entity.on('insert', this._onInsert, this);\n\n\t\tthis._patch();\n\n\t\tthis.screen = null;\n\t\tthis._type = ELEMENTTYPE_GROUP;\n\t\tthis._image = null;\n\t\tthis._text = null;\n\t\tthis._group = null;\n\t\tthis._drawOrder = 0;\n\t\tthis._useInput = false;\n\t\tthis._layers = [LAYERID_UI];\n\t\tthis._addedModels = [];\n\t\tthis._batchGroupId = -1;\n\t\tthis._offsetReadAt = 0;\n\t\tthis._maskOffset = 0.5;\n\t\tthis._maskedBy = null;\n\t}\n\n\t_patch() {\n\t\tthis.entity._sync = this._sync;\n\t\tthis.entity.setPosition = this._setPosition;\n\t\tthis.entity.setLocalPosition = this._setLocalPosition;\n\t}\n\n\t_unpatch() {\n\t\tthis.entity._sync = Entity.prototype._sync;\n\t\tthis.entity.setPosition = Entity.prototype.setPosition;\n\t\tthis.entity.setLocalPosition = Entity.prototype.setLocalPosition;\n\t}\n\n\t_setPosition(x, y, z) {\n\t\tif (!this.element.screen) return Entity.prototype.setPosition.call(this, x, y, z);\n\n\t\tif (x instanceof Vec3) {\n\t\t\tposition.copy(x);\n\t\t} else {\n\t\t\tposition.set(x, y, z);\n\t\t}\n\n\t\tthis.getWorldTransform();\n\t\tinvParentWtm.copy(this.element._screenToWorld).invert();\n\t\tinvParentWtm.transformPoint(position, this.localPosition);\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_setLocalPosition(x, y, z) {\n\t\tif (x instanceof Vec3) {\n\t\t\tthis.localPosition.copy(x);\n\t\t} else {\n\t\t\tthis.localPosition.set(x, y, z);\n\t\t}\n\n\t\tvar element = this.element;\n\t\tvar p = this.localPosition;\n\t\tvar pvt = element._pivot;\n\t\telement._margin.x = p.x - element._calculatedWidth * pvt.x;\n\t\telement._margin.z = element._localAnchor.z - element._localAnchor.x - element._calculatedWidth - element._margin.x;\n\t\telement._margin.y = p.y - element._calculatedHeight * pvt.y;\n\t\telement._margin.w = element._localAnchor.w - element._localAnchor.y - element._calculatedHeight - element._margin.y;\n\t\tif (!this._dirtyLocal) this._dirtifyLocal();\n\t}\n\n\t_sync() {\n\t\tvar element = this.element;\n\t\tvar screen = element.screen;\n\n\t\tif (screen) {\n\t\t\tif (element._anchorDirty) {\n\t\t\t\tvar resx = 0;\n\t\t\t\tvar resy = 0;\n\t\t\t\tvar px = 0;\n\t\t\t\tvar py = 1;\n\n\t\t\t\tif (this._parent && this._parent.element) {\n\t\t\t\t\tresx = this._parent.element.calculatedWidth;\n\t\t\t\t\tresy = this._parent.element.calculatedHeight;\n\t\t\t\t\tpx = this._parent.element.pivot.x;\n\t\t\t\t\tpy = this._parent.element.pivot.y;\n\t\t\t\t} else {\n\t\t\t\t\tvar resolution = screen.screen.resolution;\n\t\t\t\t\tresx = resolution.x / screen.screen.scale;\n\t\t\t\t\tresy = resolution.y / screen.screen.scale;\n\t\t\t\t}\n\n\t\t\t\telement._anchorTransform.setTranslate(resx * (element.anchor.x - px), -(resy * (py - element.anchor.y)), 0);\n\n\t\t\t\telement._anchorDirty = false;\n\n\t\t\t\telement._calculateLocalAnchors();\n\t\t\t}\n\n\t\t\tif (element._sizeDirty) {\n\t\t\t\telement._calculateSize(false, false);\n\t\t\t}\n\t\t}\n\n\t\tif (this._dirtyLocal) {\n\t\t\tthis.localTransform.setTRS(this.localPosition, this.localRotation, this.localScale);\n\t\t\tvar p = this.localPosition;\n\t\t\tvar pvt = element._pivot;\n\t\t\telement._margin.x = p.x - element._calculatedWidth * pvt.x;\n\t\t\telement._margin.z = element._localAnchor.z - element._localAnchor.x - element._calculatedWidth - element._margin.x;\n\t\t\telement._margin.y = p.y - element._calculatedHeight * pvt.y;\n\t\t\telement._margin.w = element._localAnchor.w - element._localAnchor.y - element._calculatedHeight - element._margin.y;\n\t\t\tthis._dirtyLocal = false;\n\t\t}\n\n\t\tif (!screen) {\n\t\t\tif (this._dirtyWorld) {\n\t\t\t\telement._cornersDirty = true;\n\t\t\t\telement._canvasCornersDirty = true;\n\t\t\t\telement._worldCornersDirty = true;\n\t\t\t}\n\n\t\t\treturn Entity.prototype._sync.call(this);\n\t\t}\n\n\t\tif (this._dirtyWorld) {\n\t\t\tif (this._parent === null) {\n\t\t\t\tthis.worldTransform.copy(this.localTransform);\n\t\t\t} else {\n\t\t\t\tif (this._parent.element) {\n\t\t\t\t\telement._screenToWorld.mul2(this._parent.element._modelTransform, element._anchorTransform);\n\t\t\t\t} else {\n\t\t\t\t\telement._screenToWorld.copy(element._anchorTransform);\n\t\t\t\t}\n\n\t\t\t\telement._modelTransform.mul2(element._screenToWorld, this.localTransform);\n\n\t\t\t\tif (screen) {\n\t\t\t\t\telement._screenToWorld.mul2(screen.screen._screenMatrix, element._screenToWorld);\n\n\t\t\t\t\tif (!screen.screen.screenSpace) {\n\t\t\t\t\t\telement._screenToWorld.mul2(screen.worldTransform, element._screenToWorld);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.worldTransform.mul2(element._screenToWorld, this.localTransform);\n\t\t\t\t\tvar parentWorldTransform = element._parentWorldTransform;\n\t\t\t\t\tparentWorldTransform.setIdentity();\n\t\t\t\t\tvar parent = this._parent;\n\n\t\t\t\t\tif (parent && parent.element && parent !== screen) {\n\t\t\t\t\t\tmatA.setTRS(Vec3.ZERO, parent.getLocalRotation(), parent.getLocalScale());\n\t\t\t\t\t\tparentWorldTransform.mul2(parent.element._parentWorldTransform, matA);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar depthOffset = vecA$1;\n\t\t\t\t\tdepthOffset.set(0, 0, this.localPosition.z);\n\t\t\t\t\tvar pivotOffset = vecB$1;\n\t\t\t\t\tpivotOffset.set(element._absLeft + element._pivot.x * element.calculatedWidth, element._absBottom + element._pivot.y * element.calculatedHeight, 0);\n\t\t\t\t\tmatA.setTranslate(-pivotOffset.x, -pivotOffset.y, -pivotOffset.z);\n\t\t\t\t\tmatB.setTRS(depthOffset, this.getLocalRotation(), this.getLocalScale());\n\t\t\t\t\tmatC.setTranslate(pivotOffset.x, pivotOffset.y, pivotOffset.z);\n\n\t\t\t\t\telement._screenTransform.mul2(element._parentWorldTransform, matC).mul(matB).mul(matA);\n\n\t\t\t\t\telement._cornersDirty = true;\n\t\t\t\t\telement._canvasCornersDirty = true;\n\t\t\t\t\telement._worldCornersDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.worldTransform.copy(element._modelTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._dirtyWorld = false;\n\t\t}\n\t}\n\n\t_onInsert(parent) {\n\t\tvar result = this._parseUpToScreen();\n\n\t\tthis.entity._dirtifyWorld();\n\n\t\tthis._updateScreen(result.screen);\n\n\t\tthis._dirtifyMask();\n\t}\n\n\t_dirtifyMask() {\n\t\tvar current = this.entity;\n\n\t\twhile (current) {\n\t\t\tvar next = current.parent;\n\n\t\t\tif ((next === null || next.screen) && current.element) {\n\t\t\t\tif (!this.system._prerender || !this.system._prerender.length) {\n\t\t\t\t\tthis.system._prerender = [];\n\t\t\t\t\tthis.system.app.once('prerender', this._onPrerender, this);\n\t\t\t\t}\n\n\t\t\t\tvar i = this.system._prerender.indexOf(this.entity);\n\n\t\t\t\tif (i >= 0) {\n\t\t\t\t\tthis.system._prerender.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t\tvar j = this.system._prerender.indexOf(current);\n\n\t\t\t\tif (j < 0) {\n\t\t\t\t\tthis.system._prerender.push(current);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = next;\n\t\t}\n\t}\n\n\t_onPrerender() {\n\t\tfor (var i = 0; i < this.system._prerender.length; i++) {\n\t\t\tvar mask = this.system._prerender[i];\n\n\t\t\tif (mask.element) {\n\t\t\t\tvar depth = 1;\n\t\t\t\tmask.element.syncMask(depth);\n\t\t\t}\n\t\t}\n\n\t\tthis.system._prerender.length = 0;\n\t}\n\n\t_bindScreen(screen) {\n\t\tscreen._bindElement(this);\n\t}\n\n\t_unbindScreen(screen) {\n\t\tscreen._unbindElement(this);\n\t}\n\n\t_updateScreen(screen) {\n\t\tif (this.screen && this.screen !== screen) {\n\t\t\tthis._unbindScreen(this.screen.screen);\n\t\t}\n\n\t\tvar previousScreen = this.screen;\n\t\tthis.screen = screen;\n\n\t\tif (this.screen) {\n\t\t\tthis._bindScreen(this.screen.screen);\n\t\t}\n\n\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\n\t\tthis.fire('set:screen', this.screen, previousScreen);\n\t\tthis._anchorDirty = true;\n\t\tvar children = this.entity.children;\n\n\t\tfor (var i = 0, l = children.length; i < l; i++) {\n\t\t\tif (children[i].element) children[i].element._updateScreen(screen);\n\t\t}\n\n\t\tif (this.screen) this.screen.screen.syncDrawOrder();\n\t}\n\n\tsyncMask(depth) {\n\t\tvar result = this._parseUpToScreen();\n\n\t\tthis._updateMask(result.mask, depth);\n\t}\n\n\t_setMaskedBy(mask) {\n\t\tvar renderableElement = this._image || this._text;\n\n\t\tif (mask) {\n\t\t\tvar ref = mask.element._image._maskRef;\n\t\t\tvar sp = new StencilParameters({\n\t\t\t\tref: ref,\n\t\t\t\tfunc: FUNC_EQUAL\n\t\t\t});\n\n\t\t\tif (renderableElement && renderableElement._setStencil) {\n\t\t\t\trenderableElement._setStencil(sp);\n\t\t\t}\n\n\t\t\tthis._maskedBy = mask;\n\t\t} else {\n\t\t\tif (renderableElement && renderableElement._setStencil) {\n\t\t\t\trenderableElement._setStencil(null);\n\t\t\t}\n\n\t\t\tthis._maskedBy = null;\n\t\t}\n\t}\n\n\t_updateMask(currentMask, depth) {\n\t\tvar i, l, sp, children;\n\n\t\tif (currentMask) {\n\t\t\tthis._setMaskedBy(currentMask);\n\n\t\t\tif (this.mask) {\n\t\t\t\tvar ref = currentMask.element._image._maskRef;\n\t\t\t\tsp = new StencilParameters({\n\t\t\t\t\tref: ref,\n\t\t\t\t\tfunc: FUNC_EQUAL,\n\t\t\t\t\tzpass: STENCILOP_INCREMENT\n\t\t\t\t});\n\n\t\t\t\tthis._image._setStencil(sp);\n\n\t\t\t\tthis._image._maskRef = depth;\n\t\t\t\tdepth++;\n\t\t\t\tcurrentMask = this.entity;\n\t\t\t}\n\n\t\t\tchildren = this.entity.children;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i].element) {\n\t\t\t\t\tchildren[i].element._updateMask(currentMask, depth);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.mask) depth--;\n\t\t} else {\n\t\t\tthis._setMaskedBy(null);\n\n\t\t\tif (this.mask) {\n\t\t\t\tsp = new StencilParameters({\n\t\t\t\t\tref: depth,\n\t\t\t\t\tfunc: FUNC_ALWAYS,\n\t\t\t\t\tzpass: STENCILOP_REPLACE\n\t\t\t\t});\n\n\t\t\t\tthis._image._setStencil(sp);\n\n\t\t\t\tthis._image._maskRef = depth;\n\t\t\t\tdepth++;\n\t\t\t\tcurrentMask = this.entity;\n\t\t\t}\n\n\t\t\tchildren = this.entity.children;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\tif (children[i].element) {\n\t\t\t\t\tchildren[i].element._updateMask(currentMask, depth);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.mask) depth--;\n\t\t}\n\t}\n\n\t_parseUpToScreen() {\n\t\tvar result = {\n\t\t\tscreen: null,\n\t\t\tmask: null\n\t\t};\n\t\tvar parent = this.entity._parent;\n\n\t\twhile (parent && !parent.screen) {\n\t\t\tif (parent.element && parent.element.mask) {\n\t\t\t\tif (!result.mask) result.mask = parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\tif (parent && parent.screen) result.screen = parent;\n\t\treturn result;\n\t}\n\n\t_onScreenResize(res) {\n\t\tthis._anchorDirty = true;\n\t\tthis._cornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\n\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\n\t\tthis.fire('screen:set:resolution', res);\n\t}\n\n\t_onScreenSpaceChange() {\n\t\tthis.fire('screen:set:screenspace', this.screen.screen.screenSpace);\n\t}\n\n\t_onScreenRemove() {\n\t\tif (this.screen) {\n\t\t\tif (this.screen._destroying) {\n\t\t\t\tthis.screen = null;\n\t\t\t} else {\n\t\t\t\tthis._updateScreen(null);\n\t\t\t}\n\t\t}\n\t}\n\n\t_calculateLocalAnchors() {\n\t\tvar resx = 1000;\n\t\tvar resy = 1000;\n\t\tvar parent = this.entity._parent;\n\n\t\tif (parent && parent.element) {\n\t\t\tresx = parent.element.calculatedWidth;\n\t\t\tresy = parent.element.calculatedHeight;\n\t\t} else if (this.screen) {\n\t\t\tvar res = this.screen.screen.resolution;\n\t\t\tvar scale = this.screen.screen.scale;\n\t\t\tresx = res.x / scale;\n\t\t\tresy = res.y / scale;\n\t\t}\n\n\t\tthis._localAnchor.set(this._anchor.x * resx, this._anchor.y * resy, this._anchor.z * resx, this._anchor.w * resy);\n\t}\n\n\tgetOffsetPosition(x, y) {\n\t\tvar p = this.entity.getLocalPosition().clone();\n\t\tp.x += x;\n\t\tp.y += y;\n\n\t\tthis._screenToWorld.transformPoint(p, p);\n\n\t\treturn p;\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers(this._image ? this._image._renderable.model : this._text._model);\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._image) {\n\t\t\tlayer.addMeshInstances(this._image._renderable.model.meshInstances);\n\t\t} else if (this._text) {\n\t\t\tlayer.addMeshInstances(this._text._model.meshInstances);\n\t\t}\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._image) {\n\t\t\tlayer.removeMeshInstances(this._image._renderable.model.meshInstances);\n\t\t} else if (this._text) {\n\t\t\tlayer.removeMeshInstances(this._text._model.meshInstances);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this._image) this._image.onEnable();\n\t\tif (this._text) this._text.onEnable();\n\t\tif (this._group) this._group.onEnable();\n\n\t\tif (this.useInput && this.system.app.elementInput) {\n\t\t\tthis.system.app.elementInput.addElement(this);\n\t\t}\n\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.fire(\"enableelement\");\n\t}\n\n\tonDisable() {\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._image) this._image.onDisable();\n\t\tif (this._text) this._text.onDisable();\n\t\tif (this._group) this._group.onDisable();\n\n\t\tif (this.system.app.elementInput && this.useInput) {\n\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.fire(\"disableelement\");\n\t}\n\n\tonRemove() {\n\t\tthis.entity.off('insert', this._onInsert, this);\n\n\t\tthis._unpatch();\n\n\t\tif (this._image) this._image.destroy();\n\t\tif (this._text) this._text.destroy();\n\n\t\tif (this.system.app.elementInput && this.useInput) {\n\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t}\n\n\t\tif (this.screen && this.screen.screen) {\n\t\t\tthis._unbindScreen(this.screen.screen);\n\n\t\t\tthis.screen.screen.syncDrawOrder();\n\t\t}\n\n\t\tthis.off();\n\t}\n\n\t_calculateSize(propagateCalculatedWidth, propagateCalculatedHeight) {\n\t\tif (!this.entity._parent && !this.screen) return;\n\n\t\tthis._calculateLocalAnchors();\n\n\t\tvar newWidth = this._absRight - this._absLeft;\n\t\tvar newHeight = this._absTop - this._absBottom;\n\n\t\tif (propagateCalculatedWidth) {\n\t\t\tthis._setWidth(newWidth);\n\t\t} else {\n\t\t\tthis._setCalculatedWidth(newWidth, false);\n\t\t}\n\n\t\tif (propagateCalculatedHeight) {\n\t\t\tthis._setHeight(newHeight);\n\t\t} else {\n\t\t\tthis._setCalculatedHeight(newHeight, false);\n\t\t}\n\n\t\tvar p = this.entity.getLocalPosition();\n\t\tp.x = this._margin.x + this._calculatedWidth * this._pivot.x;\n\t\tp.y = this._margin.y + this._calculatedHeight * this._pivot.y;\n\t\tthis.entity.setLocalPosition(p);\n\t\tthis._sizeDirty = false;\n\t}\n\n\t_setWidth(w) {\n\t\tthis._width = w;\n\n\t\tthis._setCalculatedWidth(w, false);\n\n\t\tthis.fire('set:width', this._width);\n\t}\n\n\t_setHeight(h) {\n\t\tthis._height = h;\n\n\t\tthis._setCalculatedHeight(h, false);\n\n\t\tthis.fire('set:height', this._height);\n\t}\n\n\t_setCalculatedWidth(value, updateMargins) {\n\t\tif (Math.abs(value - this._calculatedWidth) <= 1e-4) return;\n\t\tthis._calculatedWidth = value;\n\n\t\tthis.entity._dirtifyLocal();\n\n\t\tif (updateMargins) {\n\t\t\tvar p = this.entity.getLocalPosition();\n\t\t\tvar pvt = this._pivot;\n\t\t\tthis._margin.x = p.x - this._calculatedWidth * pvt.x;\n\t\t\tthis._margin.z = this._localAnchor.z - this._localAnchor.x - this._calculatedWidth - this._margin.x;\n\t\t}\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:calculatedWidth', this._calculatedWidth);\n\t\tthis.fire('resize', this._calculatedWidth, this._calculatedHeight);\n\t}\n\n\t_setCalculatedHeight(value, updateMargins) {\n\t\tif (Math.abs(value - this._calculatedHeight) <= 1e-4) return;\n\t\tthis._calculatedHeight = value;\n\n\t\tthis.entity._dirtifyLocal();\n\n\t\tif (updateMargins) {\n\t\t\tvar p = this.entity.getLocalPosition();\n\t\t\tvar pvt = this._pivot;\n\t\t\tthis._margin.y = p.y - this._calculatedHeight * pvt.y;\n\t\t\tthis._margin.w = this._localAnchor.w - this._localAnchor.y - this._calculatedHeight - this._margin.y;\n\t\t}\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:calculatedHeight', this._calculatedHeight);\n\t\tthis.fire('resize', this._calculatedWidth, this._calculatedHeight);\n\t}\n\n\t_flagChildrenAsDirty() {\n\t\tvar i, l;\n\t\tvar c = this.entity._children;\n\n\t\tfor (i = 0, l = c.length; i < l; i++) {\n\t\t\tif (c[i].element) {\n\t\t\t\tc[i].element._anchorDirty = true;\n\t\t\t\tc[i].element._sizeDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\taddModelToLayers(model) {\n\t\tvar layer;\n\n\t\tthis._addedModels.push(model);\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(model.meshInstances);\n\t\t}\n\t}\n\n\tremoveModelFromLayers(model) {\n\t\tvar layer;\n\n\t\tvar idx = this._addedModels.indexOf(model);\n\n\t\tif (idx >= 0) {\n\t\t\tthis._addedModels.splice(idx, 1);\n\t\t}\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(model.meshInstances);\n\t\t}\n\t}\n\n\tgetMaskOffset() {\n\t\tvar frame = this.system.app.frame;\n\n\t\tif (this._offsetReadAt !== frame) {\n\t\t\tthis._maskOffset = 0.5;\n\t\t\tthis._offsetReadAt = frame;\n\t\t}\n\n\t\tvar mo = this._maskOffset;\n\t\tthis._maskOffset -= 0.001;\n\t\treturn mo;\n\t}\n\n\tisVisibleForCamera(camera) {\n\t\tvar clipL, clipR, clipT, clipB;\n\n\t\tif (this.maskedBy) {\n\t\t\tvar corners = this.maskedBy.element.screenCorners;\n\t\t\tclipL = Math.min(Math.min(corners[0].x, corners[1].x), Math.min(corners[2].x, corners[3].x));\n\t\t\tclipR = Math.max(Math.max(corners[0].x, corners[1].x), Math.max(corners[2].x, corners[3].x));\n\t\t\tclipB = Math.min(Math.min(corners[0].y, corners[1].y), Math.min(corners[2].y, corners[3].y));\n\t\t\tclipT = Math.max(Math.max(corners[0].y, corners[1].y), Math.max(corners[2].y, corners[3].y));\n\t\t} else {\n\t\t\tvar sw = this.system.app.graphicsDevice.width;\n\t\t\tvar sh = this.system.app.graphicsDevice.height;\n\t\t\tvar cameraWidth = camera._rect.z * sw;\n\t\t\tvar cameraHeight = camera._rect.w * sh;\n\t\t\tclipL = camera._rect.x * sw;\n\t\t\tclipR = clipL + cameraWidth;\n\t\t\tclipT = (1 - camera._rect.y) * sh;\n\t\t\tclipB = clipT - cameraHeight;\n\t\t}\n\n\t\tvar hitCorners = this.screenCorners;\n\t\tvar left = Math.min(Math.min(hitCorners[0].x, hitCorners[1].x), Math.min(hitCorners[2].x, hitCorners[3].x));\n\t\tvar right = Math.max(Math.max(hitCorners[0].x, hitCorners[1].x), Math.max(hitCorners[2].x, hitCorners[3].x));\n\t\tvar bottom = Math.min(Math.min(hitCorners[0].y, hitCorners[1].y), Math.min(hitCorners[2].y, hitCorners[3].y));\n\t\tvar top = Math.max(Math.max(hitCorners[0].y, hitCorners[1].y), Math.max(hitCorners[2].y, hitCorners[3].y));\n\n\t\tif (right < clipL || left > clipR || bottom > clipT || top < clipB) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t_isScreenSpace() {\n\t\tif (this.screen && this.screen.screen) {\n\t\t\treturn this.screen.screen.screenSpace;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_isScreenCulled() {\n\t\tif (this.screen && this.screen.screen) {\n\t\t\treturn this.screen.screen.cull;\n\t\t}\n\n\t\treturn false;\n\t}\n\n}\n\nObject.defineProperty(ElementComponent.prototype, \"type\", {\n\tget: function () {\n\t\treturn this._type;\n\t},\n\tset: function (value) {\n\t\tif (value !== this._type) {\n\t\t\tthis._type = value;\n\n\t\t\tif (this._image) {\n\t\t\t\tthis._image.destroy();\n\n\t\t\t\tthis._image = null;\n\t\t\t}\n\n\t\t\tif (this._text) {\n\t\t\t\tthis._text.destroy();\n\n\t\t\t\tthis._text = null;\n\t\t\t}\n\n\t\t\tif (value === ELEMENTTYPE_IMAGE) {\n\t\t\t\tthis._image = new ImageElement(this);\n\t\t\t} else if (value === ELEMENTTYPE_TEXT) {\n\t\t\t\tthis._text = new TextElement(this);\n\t\t\t}\n\t\t}\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"layers\", {\n\tget: function () {\n\t\treturn this._layers;\n\t},\n\tset: function (value) {\n\t\tvar i, j, layer;\n\n\t\tif (this._addedModels.length) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tfor (j = 0; j < this._addedModels.length; j++) {\n\t\t\t\t\t\tlayer.removeMeshInstances(this._addedModels[j].meshInstances);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._layers = value;\n\t\tif (!this.enabled || !this.entity.enabled || !this._addedModels.length) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tfor (j = 0; j < this._addedModels.length; j++) {\n\t\t\t\t\tlayer.addMeshInstances(this._addedModels[j].meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"drawOrder\", {\n\tget: function () {\n\t\treturn this._drawOrder;\n\t},\n\tset: function (value) {\n\t\tvar priority = 0;\n\n\t\tif (this.screen) {\n\t\t\tpriority = this.screen.screen.priority;\n\t\t}\n\n\t\tif (value > 0xFFFFFF) {\n\t\t\tvalue = 0xFFFFFF;\n\t\t}\n\n\t\tthis._drawOrder = (priority << 24) + value;\n\t\tthis.fire('set:draworder', this._drawOrder);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absLeft\", {\n\tget: function () {\n\t\treturn this._localAnchor.x + this._margin.x;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absRight\", {\n\tget: function () {\n\t\treturn this._localAnchor.z - this._margin.z;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absTop\", {\n\tget: function () {\n\t\treturn this._localAnchor.w - this._margin.w;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_absBottom\", {\n\tget: function () {\n\t\treturn this._localAnchor.y + this._margin.y;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"margin\", {\n\tget: function () {\n\t\treturn this._margin;\n\t},\n\tset: function (value) {\n\t\tthis._margin.copy(value);\n\n\t\tthis._calculateSize(true, true);\n\n\t\tthis.fire('set:margin', this._margin);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"left\", {\n\tget: function () {\n\t\treturn this._margin.x;\n\t},\n\tset: function (value) {\n\t\tthis._margin.x = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wr = this._absRight;\n\t\tvar wl = this._localAnchor.x + value;\n\n\t\tthis._setWidth(wr - wl);\n\n\t\tp.x = value + this._calculatedWidth * this._pivot.x;\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"right\", {\n\tget: function () {\n\t\treturn this._margin.z;\n\t},\n\tset: function (value) {\n\t\tthis._margin.z = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wl = this._absLeft;\n\t\tvar wr = this._localAnchor.z - value;\n\n\t\tthis._setWidth(wr - wl);\n\n\t\tp.x = this._localAnchor.z - this._localAnchor.x - value - this._calculatedWidth * (1 - this._pivot.x);\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"top\", {\n\tget: function () {\n\t\treturn this._margin.w;\n\t},\n\tset: function (value) {\n\t\tthis._margin.w = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wb = this._absBottom;\n\t\tvar wt = this._localAnchor.w - value;\n\n\t\tthis._setHeight(wt - wb);\n\n\t\tp.y = this._localAnchor.w - this._localAnchor.y - value - this._calculatedHeight * (1 - this._pivot.y);\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"bottom\", {\n\tget: function () {\n\t\treturn this._margin.y;\n\t},\n\tset: function (value) {\n\t\tthis._margin.y = value;\n\t\tvar p = this.entity.getLocalPosition();\n\t\tvar wt = this._absTop;\n\t\tvar wb = this._localAnchor.y + value;\n\n\t\tthis._setHeight(wt - wb);\n\n\t\tp.y = value + this._calculatedHeight * this._pivot.y;\n\t\tthis.entity.setLocalPosition(p);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"width\", {\n\tget: function () {\n\t\treturn this._width;\n\t},\n\tset: function (value) {\n\t\tthis._width = value;\n\n\t\tif (!this._hasSplitAnchorsX) {\n\t\t\tthis._setCalculatedWidth(value, true);\n\t\t}\n\n\t\tthis.fire('set:width', this._width);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"height\", {\n\tget: function () {\n\t\treturn this._height;\n\t},\n\tset: function (value) {\n\t\tthis._height = value;\n\n\t\tif (!this._hasSplitAnchorsY) {\n\t\t\tthis._setCalculatedHeight(value, true);\n\t\t}\n\n\t\tthis.fire('set:height', this._height);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"calculatedWidth\", {\n\tget: function () {\n\t\treturn this._calculatedWidth;\n\t},\n\tset: function (value) {\n\t\tthis._setCalculatedWidth(value, true);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"calculatedHeight\", {\n\tget: function () {\n\t\treturn this._calculatedHeight;\n\t},\n\tset: function (value) {\n\t\tthis._setCalculatedHeight(value, true);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"pivot\", {\n\tget: function () {\n\t\treturn this._pivot;\n\t},\n\tset: function (value) {\n\t\tvar prevX = this._pivot.x;\n\t\tvar prevY = this._pivot.y;\n\n\t\tif (value instanceof Vec2) {\n\t\t\tthis._pivot.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._pivot.set(value[0], value[1]);\n\t\t}\n\n\t\tvar mx = this._margin.x + this._margin.z;\n\t\tvar dx = this._pivot.x - prevX;\n\t\tthis._margin.x += mx * dx;\n\t\tthis._margin.z -= mx * dx;\n\t\tvar my = this._margin.y + this._margin.w;\n\t\tvar dy = this._pivot.y - prevY;\n\t\tthis._margin.y += my * dy;\n\t\tthis._margin.w -= my * dy;\n\t\tthis._anchorDirty = true;\n\t\tthis._cornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\n\t\tthis._calculateSize(false, false);\n\n\t\tthis._flagChildrenAsDirty();\n\n\t\tthis.fire('set:pivot', this._pivot);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"anchor\", {\n\tget: function () {\n\t\treturn this._anchor;\n\t},\n\tset: function (value) {\n\t\tif (value instanceof Vec4) {\n\t\t\tthis._anchor.set(value.x, value.y, value.z, value.w);\n\t\t} else {\n\t\t\tthis._anchor.set(value[0], value[1], value[2], value[3]);\n\t\t}\n\n\t\tif (!this.entity._parent && !this.screen) {\n\t\t\tthis._calculateLocalAnchors();\n\t\t} else {\n\t\t\tthis._calculateSize(this._hasSplitAnchorsX, this._hasSplitAnchorsY);\n\t\t}\n\n\t\tthis._anchorDirty = true;\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire('set:anchor', this._anchor);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_hasSplitAnchorsX\", {\n\tget: function () {\n\t\treturn Math.abs(this._anchor.x - this._anchor.z) > 0.001;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"_hasSplitAnchorsY\", {\n\tget: function () {\n\t\treturn Math.abs(this._anchor.y - this._anchor.w) > 0.001;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\tif (this._image) return this._image.aabb;\n\t\tif (this._text) return this._text.aabb;\n\t\treturn null;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'screenCorners', {\n\tget: function () {\n\t\tif (!this._cornersDirty || !this.screen) return this._screenCorners;\n\t\tvar parentBottomLeft = this.entity.parent && this.entity.parent.element && this.entity.parent.element.screenCorners[0];\n\n\t\tthis._screenCorners[0].set(this._absLeft, this._absBottom, 0);\n\n\t\tthis._screenCorners[1].set(this._absRight, this._absBottom, 0);\n\n\t\tthis._screenCorners[2].set(this._absRight, this._absTop, 0);\n\n\t\tthis._screenCorners[3].set(this._absLeft, this._absTop, 0);\n\n\t\tvar screenSpace = this.screen.screen.screenSpace;\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis._screenTransform.transformPoint(this._screenCorners[i], this._screenCorners[i]);\n\n\t\t\tif (screenSpace) this._screenCorners[i].mulScalar(this.screen.screen.scale);\n\n\t\t\tif (parentBottomLeft) {\n\t\t\t\tthis._screenCorners[i].add(parentBottomLeft);\n\t\t\t}\n\t\t}\n\n\t\tthis._cornersDirty = false;\n\t\tthis._canvasCornersDirty = true;\n\t\tthis._worldCornersDirty = true;\n\t\treturn this._screenCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'canvasCorners', {\n\tget: function () {\n\t\tif (!this._canvasCornersDirty || !this.screen || !this.screen.screen.screenSpace) return this._canvasCorners;\n\t\tvar device = this.system.app.graphicsDevice;\n\t\tvar screenCorners = this.screenCorners;\n\t\tvar sx = device.canvas.clientWidth / device.width;\n\t\tvar sy = device.canvas.clientHeight / device.height;\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis._canvasCorners[i].set(screenCorners[i].x * sx, (device.height - screenCorners[i].y) * sy);\n\t\t}\n\n\t\tthis._canvasCornersDirty = false;\n\t\treturn this._canvasCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, 'worldCorners', {\n\tget: function () {\n\t\tif (!this._worldCornersDirty) {\n\t\t\treturn this._worldCorners;\n\t\t}\n\n\t\tif (this.screen) {\n\t\t\tvar screenCorners = this.screenCorners;\n\n\t\t\tif (!this.screen.screen.screenSpace) {\n\t\t\t\tmatA.copy(this.screen.screen._screenMatrix);\n\t\t\t\tmatA.data[13] = -matA.data[13];\n\t\t\t\tmatA.mul2(this.screen.getWorldTransform(), matA);\n\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tmatA.transformPoint(screenCorners[i], this._worldCorners[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar localPos = this.entity.getLocalPosition();\n\t\t\tmatA.setTranslate(-localPos.x, -localPos.y, -localPos.z);\n\t\t\tmatB.setTRS(Vec3.ZERO, this.entity.getLocalRotation(), this.entity.getLocalScale());\n\t\t\tmatC.setTranslate(localPos.x, localPos.y, localPos.z);\n\t\t\tvar entity = this.entity.parent ? this.entity.parent : this.entity;\n\t\t\tmatD.copy(entity.getWorldTransform());\n\t\t\tmatD.mul(matC).mul(matB).mul(matA);\n\t\t\tvecA$1.set(localPos.x - this.pivot.x * this.calculatedWidth, localPos.y - this.pivot.y * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[0]);\n\t\t\tvecA$1.set(localPos.x + (1 - this.pivot.x) * this.calculatedWidth, localPos.y - this.pivot.y * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[1]);\n\t\t\tvecA$1.set(localPos.x + (1 - this.pivot.x) * this.calculatedWidth, localPos.y + (1 - this.pivot.y) * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[2]);\n\t\t\tvecA$1.set(localPos.x - this.pivot.x * this.calculatedWidth, localPos.y + (1 - this.pivot.y) * this.calculatedHeight, localPos.z);\n\t\t\tmatD.transformPoint(vecA$1, this._worldCorners[3]);\n\t\t}\n\n\t\tthis._worldCornersDirty = false;\n\t\treturn this._worldCorners;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"textWidth\", {\n\tget: function () {\n\t\treturn this._text ? this._text.width : 0;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"textHeight\", {\n\tget: function () {\n\t\treturn this._text ? this._text.height : 0;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"useInput\", {\n\tget: function () {\n\t\treturn this._useInput;\n\t},\n\tset: function (value) {\n\t\tif (this._useInput === value) return;\n\t\tthis._useInput = value;\n\n\t\tif (this.system.app.elementInput) {\n\t\t\tif (value) {\n\t\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\t\tthis.system.app.elementInput.addElement(this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.system.app.elementInput.removeElement(this);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._useInput === true) {\n\t\t\t\tconsole.warn(\"Elements will not get any input events because this.system.app.elementInput is not created\");\n\t\t\t}\n\t\t}\n\n\t\tthis.fire('set:useInput', value);\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"batchGroupId\", {\n\tget: function () {\n\t\treturn this._batchGroupId;\n\t},\n\tset: function (value) {\n\t\tif (this._batchGroupId === value) return;\n\n\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.ELEMENT, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.ELEMENT, value, this.entity);\n\t\t}\n\n\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tif (this._image && this._image._renderable.model) {\n\t\t\t\tthis.addModelToLayers(this._image._renderable.model);\n\t\t\t} else if (this._text && this._text._model) {\n\t\t\t\tthis.addModelToLayers(this._text._model);\n\t\t\t}\n\t\t}\n\n\t\tthis._batchGroupId = value;\n\t}\n});\nObject.defineProperty(ElementComponent.prototype, \"maskedBy\", {\n\tget: function () {\n\t\treturn this._maskedBy;\n\t}\n});\n\nvar _define = function _define(name) {\n\tObject.defineProperty(ElementComponent.prototype, name, {\n\t\tget: function () {\n\t\t\tif (this._text) {\n\t\t\t\treturn this._text[name];\n\t\t\t} else if (this._image) {\n\t\t\t\treturn this._image[name];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this._text) {\n\t\t\t\tthis._text[name] = value;\n\t\t\t} else if (this._image) {\n\t\t\t\tthis._image[name] = value;\n\t\t\t}\n\t\t}\n\t});\n};\n\n_define(\"fontSize\");\n\n_define(\"minFontSize\");\n\n_define(\"maxFontSize\");\n\n_define(\"maxLines\");\n\n_define(\"autoFitWidth\");\n\n_define(\"autoFitHeight\");\n\n_define(\"color\");\n\n_define(\"font\");\n\n_define(\"fontAsset\");\n\n_define(\"spacing\");\n\n_define(\"lineHeight\");\n\n_define(\"wrapLines\");\n\n_define(\"lines\");\n\n_define(\"alignment\");\n\n_define(\"autoWidth\");\n\n_define(\"autoHeight\");\n\n_define(\"rtlReorder\");\n\n_define(\"unicodeConverter\");\n\n_define(\"text\");\n\n_define(\"key\");\n\n_define(\"texture\");\n\n_define(\"textureAsset\");\n\n_define(\"material\");\n\n_define(\"materialAsset\");\n\n_define(\"sprite\");\n\n_define(\"spriteAsset\");\n\n_define(\"spriteFrame\");\n\n_define(\"pixelsPerUnit\");\n\n_define(\"opacity\");\n\n_define(\"rect\");\n\n_define(\"mask\");\n\n_define(\"outlineColor\");\n\n_define(\"outlineThickness\");\n\n_define(\"shadowColor\");\n\n_define(\"shadowOffset\");\n\n_define(\"enableMarkup\");\n\n_define(\"rangeStart\");\n\n_define(\"rangeEnd\");\n\nclass ElementComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$e = ['enabled'];\n\nclass ElementComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'element';\n\t\tthis.ComponentType = ElementComponent;\n\t\tthis.DataType = ElementComponentData;\n\t\tthis.schema = _schema$e;\n\t\tthis._unicodeConverter = null;\n\t\tthis._rtlReorder = null;\n\t\tthis._defaultTexture = new Texture(app.graphicsDevice, {\n\t\t\twidth: 1,\n\t\t\theight: 1,\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t});\n\t\tthis._defaultTexture.name = 'element-system';\n\n\t\tvar pixels = this._defaultTexture.lock();\n\n\t\tvar pixelData = new Uint8Array(4);\n\t\tpixelData[0] = 255.0;\n\t\tpixelData[1] = 255.0;\n\t\tpixelData[2] = 255.0;\n\t\tpixelData[3] = 255.0;\n\t\tpixels.set(pixelData);\n\n\t\tthis._defaultTexture.unlock();\n\n\t\tthis.defaultImageMaterial = null;\n\t\tthis.defaultImage9SlicedMaterial = null;\n\t\tthis.defaultImage9TiledMaterial = null;\n\t\tthis.defaultImageMaskMaterial = null;\n\t\tthis.defaultImage9SlicedMaskMaterial = null;\n\t\tthis.defaultImage9TiledMaskMaterial = null;\n\t\tthis.defaultScreenSpaceImageMaterial = null;\n\t\tthis.defaultScreenSpaceImage9SlicedMaterial = null;\n\t\tthis.defaultScreenSpaceImage9TiledMaterial = null;\n\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial = null;\n\t\tthis.defaultScreenSpaceImageMask9TiledMaterial = null;\n\t\tthis.defaultScreenSpaceImageMaskMaterial = null;\n\t\tthis.defaultTextMaterial = null;\n\t\tthis.defaultBitmapTextMaterial = null;\n\t\tthis.defaultScreenSpaceTextMaterial = null;\n\t\tthis.defaultScreenSpaceBitmapTextMaterial = null;\n\t\tthis.defaultImageMaterials = [];\n\t\tthis.on('beforeremove', this.onRemoveComponent, this);\n\t}\n\n\tdestroy() {\n\t\tthis._defaultTexture.destroy();\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent._beingInitialized = true;\n\n\t\tif (data.anchor !== undefined) {\n\t\t\tif (data.anchor instanceof Vec4) {\n\t\t\t\tcomponent.anchor.copy(data.anchor);\n\t\t\t} else {\n\t\t\t\tcomponent.anchor.set(data.anchor[0], data.anchor[1], data.anchor[2], data.anchor[3]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.pivot !== undefined) {\n\t\t\tif (data.pivot instanceof Vec2) {\n\t\t\t\tcomponent.pivot.copy(data.pivot);\n\t\t\t} else {\n\t\t\t\tcomponent.pivot.set(data.pivot[0], data.pivot[1]);\n\t\t\t}\n\t\t}\n\n\t\tvar splitHorAnchors = Math.abs(component.anchor.x - component.anchor.z) > 0.001;\n\t\tvar splitVerAnchors = Math.abs(component.anchor.y - component.anchor.w) > 0.001;\n\t\tvar _marginChange = false;\n\t\tvar color;\n\n\t\tif (data.margin !== undefined) {\n\t\t\tif (data.margin instanceof Vec4) {\n\t\t\t\tcomponent.margin.copy(data.margin);\n\t\t\t} else {\n\t\t\t\tcomponent._margin.set(data.margin[0], data.margin[1], data.margin[2], data.margin[3]);\n\t\t\t}\n\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.left !== undefined) {\n\t\t\tcomponent._margin.x = data.left;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.bottom !== undefined) {\n\t\t\tcomponent._margin.y = data.bottom;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.right !== undefined) {\n\t\t\tcomponent._margin.z = data.right;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (data.top !== undefined) {\n\t\t\tcomponent._margin.w = data.top;\n\t\t\t_marginChange = true;\n\t\t}\n\n\t\tif (_marginChange) {\n\t\t\tcomponent.margin = component._margin;\n\t\t}\n\n\t\tvar shouldForceSetAnchor = false;\n\n\t\tif (data.width !== undefined && !splitHorAnchors) {\n\t\t\tcomponent.width = data.width;\n\t\t} else if (splitHorAnchors) {\n\t\t\tshouldForceSetAnchor = true;\n\t\t}\n\n\t\tif (data.height !== undefined && !splitVerAnchors) {\n\t\t\tcomponent.height = data.height;\n\t\t} else if (splitVerAnchors) {\n\t\t\tshouldForceSetAnchor = true;\n\t\t}\n\n\t\tif (shouldForceSetAnchor) {\n\t\t\tcomponent.anchor = component.anchor;\n\t\t}\n\n\t\tif (data.enabled !== undefined) {\n\t\t\tcomponent.enabled = data.enabled;\n\t\t}\n\n\t\tif (data.useInput !== undefined) {\n\t\t\tcomponent.useInput = data.useInput;\n\t\t}\n\n\t\tcomponent.batchGroupId = data.batchGroupId === undefined || data.batchGroupId === null ? -1 : data.batchGroupId;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tcomponent.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.type !== undefined) {\n\t\t\tcomponent.type = data.type;\n\t\t}\n\n\t\tif (component.type === ELEMENTTYPE_IMAGE) {\n\t\t\tif (data.rect !== undefined) {\n\t\t\t\tcomponent.rect = data.rect;\n\t\t\t}\n\n\t\t\tif (data.color !== undefined) {\n\t\t\t\tcolor = data.color;\n\n\t\t\t\tif (!(color instanceof Color)) {\n\t\t\t\t\tcolor = new Color(data.color[0], data.color[1], data.color[2]);\n\t\t\t\t}\n\n\t\t\t\tcomponent.color = color;\n\t\t\t}\n\n\t\t\tif (data.opacity !== undefined) component.opacity = data.opacity;\n\t\t\tif (data.textureAsset !== undefined) component.textureAsset = data.textureAsset;\n\t\t\tif (data.texture) component.texture = data.texture;\n\t\t\tif (data.spriteAsset !== undefined) component.spriteAsset = data.spriteAsset;\n\t\t\tif (data.sprite) component.sprite = data.sprite;\n\t\t\tif (data.spriteFrame !== undefined) component.spriteFrame = data.spriteFrame;\n\t\t\tif (data.pixelsPerUnit !== undefined && data.pixelsPerUnit !== null) component.pixelsPerUnit = data.pixelsPerUnit;\n\t\t\tif (data.materialAsset !== undefined) component.materialAsset = data.materialAsset;\n\t\t\tif (data.material) component.material = data.material;\n\n\t\t\tif (data.mask !== undefined) {\n\t\t\t\tcomponent.mask = data.mask;\n\t\t\t}\n\t\t} else if (component.type === ELEMENTTYPE_TEXT) {\n\t\t\tif (data.autoWidth !== undefined) component.autoWidth = data.autoWidth;\n\t\t\tif (data.autoHeight !== undefined) component.autoHeight = data.autoHeight;\n\t\t\tif (data.rtlReorder !== undefined) component.rtlReorder = data.rtlReorder;\n\t\t\tif (data.unicodeConverter !== undefined) component.unicodeConverter = data.unicodeConverter;\n\n\t\t\tif (data.text !== null && data.text !== undefined) {\n\t\t\t\tcomponent.text = data.text;\n\t\t\t} else if (data.key !== null && data.key !== undefined) {\n\t\t\t\tcomponent.key = data.key;\n\t\t\t}\n\n\t\t\tif (data.color !== undefined) {\n\t\t\t\tcolor = data.color;\n\n\t\t\t\tif (!(color instanceof Color)) {\n\t\t\t\t\tcolor = new Color(color[0], color[1], color[2]);\n\t\t\t\t}\n\n\t\t\t\tcomponent.color = color;\n\t\t\t}\n\n\t\t\tif (data.opacity !== undefined) {\n\t\t\t\tcomponent.opacity = data.opacity;\n\t\t\t}\n\n\t\t\tif (data.spacing !== undefined) component.spacing = data.spacing;\n\n\t\t\tif (data.fontSize !== undefined) {\n\t\t\t\tcomponent.fontSize = data.fontSize;\n\t\t\t\tif (!data.lineHeight) component.lineHeight = data.fontSize;\n\t\t\t}\n\n\t\t\tif (data.lineHeight !== undefined) component.lineHeight = data.lineHeight;\n\t\t\tif (data.maxLines !== undefined) component.maxLines = data.maxLines;\n\t\t\tif (data.wrapLines !== undefined) component.wrapLines = data.wrapLines;\n\t\t\tif (data.minFontSize !== undefined) component.minFontSize = data.minFontSize;\n\t\t\tif (data.maxFontSize !== undefined) component.maxFontSize = data.maxFontSize;\n\t\t\tif (data.autoFitWidth) component.autoFitWidth = data.autoFitWidth;\n\t\t\tif (data.autoFitHeight) component.autoFitHeight = data.autoFitHeight;\n\t\t\tif (data.fontAsset !== undefined) component.fontAsset = data.fontAsset;\n\t\t\tif (data.font !== undefined) component.font = data.font;\n\t\t\tif (data.alignment !== undefined) component.alignment = data.alignment;\n\t\t\tif (data.outlineColor !== undefined) component.outlineColor = data.outlineColor;\n\t\t\tif (data.outlineThickness !== undefined) component.outlineThickness = data.outlineThickness;\n\t\t\tif (data.shadowColor !== undefined) component.shadowColor = data.shadowColor;\n\t\t\tif (data.shadowOffset !== undefined) component.shadowOffset = data.shadowOffset;\n\t\t\tif (data.enableMarkup !== undefined) component.enableMarkup = data.enableMarkup;\n\t\t}\n\n\t\tvar result = component._parseUpToScreen();\n\n\t\tif (result.screen) {\n\t\t\tcomponent._updateScreen(result.screen);\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t\tcomponent._beingInitialized = false;\n\n\t\tif (component.type === ELEMENTTYPE_IMAGE && component._image._meshDirty) {\n\t\t\tcomponent._image._updateMesh(component._image.mesh);\n\t\t}\n\t}\n\n\tonRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.element;\n\t\tvar data = {\n\t\t\tenabled: source.enabled,\n\t\t\twidth: source.width,\n\t\t\theight: source.height,\n\t\t\tanchor: source.anchor.clone(),\n\t\t\tpivot: source.pivot.clone(),\n\t\t\tmargin: source.margin.clone(),\n\t\t\talignment: source.alignment && source.alignment.clone() || source.alignment,\n\t\t\tautoWidth: source.autoWidth,\n\t\t\tautoHeight: source.autoHeight,\n\t\t\ttype: source.type,\n\t\t\trect: source.rect && source.rect.clone() || source.rect,\n\t\t\trtlReorder: source.rtlReorder,\n\t\t\tunicodeConverter: source.unicodeConverter,\n\t\t\tmaterialAsset: source.materialAsset,\n\t\t\tmaterial: source.material,\n\t\t\tcolor: source.color && source.color.clone() || source.color,\n\t\t\topacity: source.opacity,\n\t\t\ttextureAsset: source.textureAsset,\n\t\t\ttexture: source.texture,\n\t\t\tspriteAsset: source.spriteAsset,\n\t\t\tsprite: source.sprite,\n\t\t\tspriteFrame: source.spriteFrame,\n\t\t\tpixelsPerUnit: source.pixelsPerUnit,\n\t\t\tspacing: source.spacing,\n\t\t\tlineHeight: source.lineHeight,\n\t\t\twrapLines: source.wrapLines,\n\t\t\tlayers: source.layers,\n\t\t\tfontSize: source.fontSize,\n\t\t\tminFontSize: source.minFontSize,\n\t\t\tmaxFontSize: source.maxFontSize,\n\t\t\tautoFitWidth: source.autoFitWidth,\n\t\t\tautoFitHeight: source.autoFitHeight,\n\t\t\tmaxLines: source.maxLines,\n\t\t\tfontAsset: source.fontAsset,\n\t\t\tfont: source.font,\n\t\t\tuseInput: source.useInput,\n\t\t\tbatchGroupId: source.batchGroupId,\n\t\t\tmask: source.mask,\n\t\t\toutlineColor: source.outlineColor && source.outlineColor.clone() || source.outlineColor,\n\t\t\toutlineThickness: source.outlineThickness,\n\t\t\tshadowColor: source.shadowColor && source.shadowColor.clone() || source.shadowColor,\n\t\t\tshadowOffset: source.shadowOffset && source.shadowOffset.clone() || source.shadowOffset,\n\t\t\tenableMarkup: source.enableMarkup\n\t\t};\n\n\t\tif (source.key !== undefined && source.key !== null) {\n\t\t\tdata.key = source.key;\n\t\t} else {\n\t\t\tdata.text = source.text;\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tgetTextElementMaterial(screenSpace, msdf) {\n\t\tif (screenSpace) {\n\t\t\tif (msdf) {\n\t\t\t\tif (!this.defaultScreenSpaceTextMaterial) {\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial = new StandardMaterial();\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.name = \"defaultScreenSpaceTextMaterial\";\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.msdfMap = this._defaultTexture;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useLighting = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useGammaTonemap = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useFog = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.useSkybox = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.emissive.set(1, 1, 1);\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.opacity = 0.5;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.depthWrite = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.depthTest = false;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.emissiveVertexColor = true;\n\t\t\t\t\tthis.defaultScreenSpaceTextMaterial.update();\n\t\t\t\t}\n\n\t\t\t\treturn this.defaultScreenSpaceTextMaterial;\n\t\t\t}\n\n\t\t\tif (!this.defaultScreenSpaceBitmapTextMaterial) {\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial = new StandardMaterial();\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.name = \"defaultScreenSpaceBitmapTextMaterial\";\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveMap = this._defaultTexture;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveTint = true;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacity = 0.5;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacityMap = this._defaultTexture;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.opacityMapChannel = 'a';\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useLighting = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useGammaTonemap = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useFog = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.useSkybox = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.depthWrite = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.depthTest = false;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.emissiveVertexColor = true;\n\t\t\t\tthis.defaultScreenSpaceBitmapTextMaterial.update();\n\t\t\t}\n\n\t\t\treturn this.defaultScreenSpaceBitmapTextMaterial;\n\t\t}\n\n\t\tif (msdf) {\n\t\t\tif (!this.defaultTextMaterial) {\n\t\t\t\tthis.defaultTextMaterial = new StandardMaterial();\n\t\t\t\tthis.defaultTextMaterial.name = \"defaultTextMaterial\";\n\t\t\t\tthis.defaultTextMaterial.msdfMap = this._defaultTexture;\n\t\t\t\tthis.defaultTextMaterial.useLighting = false;\n\t\t\t\tthis.defaultTextMaterial.useGammaTonemap = false;\n\t\t\t\tthis.defaultTextMaterial.useFog = false;\n\t\t\t\tthis.defaultTextMaterial.useSkybox = false;\n\t\t\t\tthis.defaultTextMaterial.diffuse.set(0, 0, 0);\n\t\t\t\tthis.defaultTextMaterial.emissive.set(1, 1, 1);\n\t\t\t\tthis.defaultTextMaterial.opacity = 0.5;\n\t\t\t\tthis.defaultTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\t\tthis.defaultTextMaterial.depthWrite = false;\n\t\t\t\tthis.defaultTextMaterial.emissiveVertexColor = true;\n\t\t\t\tthis.defaultTextMaterial.update();\n\t\t\t}\n\n\t\t\treturn this.defaultTextMaterial;\n\t\t}\n\n\t\tif (!this.defaultBitmapTextMaterial) {\n\t\t\tthis.defaultBitmapTextMaterial = new StandardMaterial();\n\t\t\tthis.defaultBitmapTextMaterial.name = \"defaultBitmapTextMaterial\";\n\t\t\tthis.defaultBitmapTextMaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\tthis.defaultBitmapTextMaterial.emissiveTint = true;\n\t\t\tthis.defaultBitmapTextMaterial.emissiveMap = this._defaultTexture;\n\t\t\tthis.defaultBitmapTextMaterial.opacity = 0.5;\n\t\t\tthis.defaultBitmapTextMaterial.opacityMap = this._defaultTexture;\n\t\t\tthis.defaultBitmapTextMaterial.opacityMapChannel = 'a';\n\t\t\tthis.defaultBitmapTextMaterial.useLighting = false;\n\t\t\tthis.defaultBitmapTextMaterial.useGammaTonemap = false;\n\t\t\tthis.defaultBitmapTextMaterial.useFog = false;\n\t\t\tthis.defaultBitmapTextMaterial.useSkybox = false;\n\t\t\tthis.defaultBitmapTextMaterial.diffuse.set(0, 0, 0);\n\t\t\tthis.defaultBitmapTextMaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\tthis.defaultBitmapTextMaterial.depthWrite = false;\n\t\t\tthis.defaultBitmapTextMaterial.emissiveVertexColor = true;\n\t\t\tthis.defaultBitmapTextMaterial.update();\n\t\t}\n\n\t\treturn this.defaultBitmapTextMaterial;\n\t}\n\n\t_createBaseImageMaterial() {\n\t\tvar material = new StandardMaterial();\n\t\tmaterial.diffuse.set(0, 0, 0);\n\t\tmaterial.emissive.set(0.5, 0.5, 0.5);\n\t\tmaterial.emissiveMap = this._defaultTexture;\n\t\tmaterial.emissiveTint = true;\n\t\tmaterial.opacityMap = this._defaultTexture;\n\t\tmaterial.opacityMapChannel = \"a\";\n\t\tmaterial.opacityTint = true;\n\t\tmaterial.opacity = 0;\n\t\tmaterial.useLighting = false;\n\t\tmaterial.useGammaTonemap = false;\n\t\tmaterial.useFog = false;\n\t\tmaterial.useSkybox = false;\n\t\tmaterial.blendType = BLEND_PREMULTIPLIED;\n\t\tmaterial.depthWrite = false;\n\t\treturn material;\n\t}\n\n\tgetImageElementMaterial(screenSpace, mask, nineSliced, nineSliceTiled) {\n\t\tif (screenSpace) {\n\t\t\tif (mask) {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMask9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.name = \"defaultScreenSpaceImageMask9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMask9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMask9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMask9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial = this.defaultScreenSpaceImage9TiledMaterial.clone();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.name = \"defaultScreenSpaceImageMask9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMask9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMask9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMask9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMaskMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.name = \"defaultScreenSpaceImageMaskMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMaskMaterial;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImage9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.name = \"defaultScreenSpaceImage9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImage9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImage9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultScreenSpaceImage9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.name = \"defaultScreenSpaceImage9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImage9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImage9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImage9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultScreenSpaceImageMaterial) {\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.name = \"defaultScreenSpaceImageMaterial\";\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.depthTest = false;\n\t\t\t\t\t\tthis.defaultScreenSpaceImageMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultScreenSpaceImageMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultScreenSpaceImageMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (mask) {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultImage9SlicedMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.name = \"defaultImage9SlicedMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9SlicedMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9SlicedMaskMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultImage9TiledMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.name = \"defaultImage9TiledMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImage9TiledMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9TiledMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9TiledMaskMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultImageMaskMaterial) {\n\t\t\t\t\t\tthis.defaultImageMaskMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.name = \"defaultImageMaskMaterial\";\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.alphaTest = 1;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.redWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.greenWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.blueWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.alphaWrite = false;\n\t\t\t\t\t\tthis.defaultImageMaskMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImageMaskMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImageMaskMaterial;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (nineSliced) {\n\t\t\t\t\tif (!this.defaultImage9SlicedMaterial) {\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.name = \"defaultImage9SlicedMaterial\";\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\t\t\t\tthis.defaultImage9SlicedMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9SlicedMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9SlicedMaterial;\n\t\t\t\t} else if (nineSliceTiled) {\n\t\t\t\t\tif (!this.defaultImage9TiledMaterial) {\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.name = \"defaultImage9TiledMaterial\";\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\t\t\t\tthis.defaultImage9TiledMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImage9TiledMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImage9TiledMaterial;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.defaultImageMaterial) {\n\t\t\t\t\t\tthis.defaultImageMaterial = this._createBaseImageMaterial();\n\t\t\t\t\t\tthis.defaultImageMaterial.name = \"defaultImageMaterial\";\n\t\t\t\t\t\tthis.defaultImageMaterial.update();\n\t\t\t\t\t\tthis.defaultImageMaterials.push(this.defaultImageMaterial);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.defaultImageMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterUnicodeConverter(func) {\n\t\tthis._unicodeConverter = func;\n\t}\n\n\tregisterRtlReorder(func) {\n\t\tthis._rtlReorder = func;\n\t}\n\n\tgetUnicodeConverter() {\n\t\treturn this._unicodeConverter;\n\t}\n\n\tgetRtlReorder() {\n\t\treturn this._rtlReorder;\n\t}\n\n}\n\nComponent._buildAccessors(ElementComponent.prototype, _schema$e);\n\nconst MOTION_FREE = 'free';\nconst MOTION_LIMITED = 'limited';\nconst MOTION_LOCKED = 'locked';\n\nconst properties = ['angularDampingX', 'angularDampingY', 'angularDampingZ', 'angularEquilibriumX', 'angularEquilibriumY', 'angularEquilibriumZ', 'angularLimitsX', 'angularLimitsY', 'angularLimitsZ', 'angularMotionX', 'angularMotionY', 'angularMotionZ', 'angularSpringX', 'angularSpringY', 'angularSpringZ', 'angularStiffnessX', 'angularStiffnessY', 'angularStiffnessZ', 'breakForce', 'enableCollision', 'enabled', 'entityA', 'entityB', 'linearDampingX', 'linearDampingY', 'linearDampingZ', 'linearEquilibriumX', 'linearEquilibriumY', 'linearEquilibriumZ', 'linearLimitsX', 'linearLimitsY', 'linearLimitsZ', 'linearMotionX', 'linearMotionY', 'linearMotionZ', 'linearSpringX', 'linearSpringY', 'linearSpringZ', 'linearStiffnessX', 'linearStiffnessY', 'linearStiffnessZ'];\n\nclass JointComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._constraint = null;\n\t\tthis._entityA = null;\n\t\tthis._entityB = null;\n\t\tthis._breakForce = 3.4e+38;\n\t\tthis._enableCollision = true;\n\t\tthis._linearMotionX = MOTION_LOCKED;\n\t\tthis._linearLimitsX = new Vec2(0, 0);\n\t\tthis._linearSpringX = false;\n\t\tthis._linearStiffnessX = 0;\n\t\tthis._linearDampingX = 1;\n\t\tthis._linearEquilibriumX = 0;\n\t\tthis._linearMotionY = MOTION_LOCKED;\n\t\tthis._linearLimitsY = new Vec2(0, 0);\n\t\tthis._linearSpringY = false;\n\t\tthis._linearStiffnessY = 0;\n\t\tthis._linearDampingY = 1;\n\t\tthis._linearEquilibriumY = 0;\n\t\tthis._linearMotionZ = MOTION_LOCKED;\n\t\tthis._linearLimitsZ = new Vec2(0, 0);\n\t\tthis._linearSpringZ = false;\n\t\tthis._linearStiffnessZ = 0;\n\t\tthis._linearDampingZ = 1;\n\t\tthis._linearEquilibriumZ = 0;\n\t\tthis._angularMotionX = MOTION_LOCKED;\n\t\tthis._angularLimitsX = new Vec2(0, 0);\n\t\tthis._angularSpringX = false;\n\t\tthis._angularStiffnessX = 0;\n\t\tthis._angularDampingX = 1;\n\t\tthis._angularEquilibriumX = 0;\n\t\tthis._angularMotionY = MOTION_LOCKED;\n\t\tthis._angularLimitsY = new Vec2(0, 0);\n\t\tthis._angularSpringY = false;\n\t\tthis._angularStiffnessY = 0;\n\t\tthis._angularDampingY = 1;\n\t\tthis._angularEquilibriumY = 0;\n\t\tthis._angularMotionZ = MOTION_LOCKED;\n\t\tthis._angularLimitsZ = new Vec2(0, 0);\n\t\tthis._angularSpringZ = false;\n\t\tthis._angularEquilibriumZ = 0;\n\t\tthis._angularDampingZ = 1;\n\t\tthis._angularStiffnessZ = 0;\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tset entityA(body) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._entityA = body;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget entityA() {\n\t\treturn this._entityA;\n\t}\n\n\tset entityB(body) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._entityB = body;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget entityB() {\n\t\treturn this._entityB;\n\t}\n\n\tset breakForce(force) {\n\t\tif (this._constraint && this._breakForce !== force) {\n\t\t\tthis._constraint.setBreakingImpulseThreshold(force);\n\n\t\t\tthis._breakForce = force;\n\t\t}\n\t}\n\n\tget breakForce() {\n\t\treturn this._breakForce;\n\t}\n\n\tset enableCollision(enableCollision) {\n\t\tthis._destroyConstraint();\n\n\t\tthis._enableCollision = enableCollision;\n\n\t\tthis._createConstraint();\n\t}\n\n\tget enableCollision() {\n\t\treturn this._enableCollision;\n\t}\n\n\tset angularLimitsX(limits) {\n\t\tif (!this._angularLimitsX.equals(limits)) {\n\t\t\tthis._angularLimitsX.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsX() {\n\t\treturn this._angularLimitsX;\n\t}\n\n\tset angularMotionX(value) {\n\t\tif (this._angularMotionX !== value) {\n\t\t\tthis._angularMotionX = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionX() {\n\t\treturn this._angularMotionX;\n\t}\n\n\tset angularLimitsY(limits) {\n\t\tif (!this._angularLimitsY.equals(limits)) {\n\t\t\tthis._angularLimitsY.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsY() {\n\t\treturn this._angularLimitsY;\n\t}\n\n\tset angularMotionY(value) {\n\t\tif (this._angularMotionY !== value) {\n\t\t\tthis._angularMotionY = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionY() {\n\t\treturn this._angularMotionY;\n\t}\n\n\tset angularLimitsZ(limits) {\n\t\tif (!this._angularLimitsZ.equals(limits)) {\n\t\t\tthis._angularLimitsZ.copy(limits);\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularLimitsZ() {\n\t\treturn this._angularLimitsZ;\n\t}\n\n\tset angularMotionZ(value) {\n\t\tif (this._angularMotionZ !== value) {\n\t\t\tthis._angularMotionZ = value;\n\n\t\t\tthis._updateAngularLimits();\n\t\t}\n\t}\n\n\tget angularMotionZ() {\n\t\treturn this._angularMotionZ;\n\t}\n\n\tset linearLimitsX(limits) {\n\t\tif (!this._linearLimitsX.equals(limits)) {\n\t\t\tthis._linearLimitsX.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsX() {\n\t\treturn this._linearLimitsX;\n\t}\n\n\tset linearMotionX(value) {\n\t\tif (this._linearMotionX !== value) {\n\t\t\tthis._linearMotionX = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionX() {\n\t\treturn this._linearMotionX;\n\t}\n\n\tset linearLimitsY(limits) {\n\t\tif (!this._linearLimitsY.equals(limits)) {\n\t\t\tthis._linearLimitsY.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsY() {\n\t\treturn this._linearLimitsY;\n\t}\n\n\tset linearMotionY(value) {\n\t\tif (this._linearMotionY !== value) {\n\t\t\tthis._linearMotionY = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionY() {\n\t\treturn this._linearMotionY;\n\t}\n\n\tset linearLimitsZ(limits) {\n\t\tif (!this._linearLimitsZ.equals(limits)) {\n\t\t\tthis._linearLimitsZ.copy(limits);\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearLimitsZ() {\n\t\treturn this._linearLimitsZ;\n\t}\n\n\tset linearMotionZ(value) {\n\t\tif (this._linearMotionZ !== value) {\n\t\t\tthis._linearMotionZ = value;\n\n\t\t\tthis._updateLinearLimits();\n\t\t}\n\t}\n\n\tget linearMotionZ() {\n\t\treturn this._linearMotionZ;\n\t}\n\n\t_convertTransform(pcTransform, ammoTransform) {\n\t\tconst pos = pcTransform.getTranslation();\n\t\tconst rot = new Quat();\n\t\trot.setFromMat4(pcTransform);\n\t\tconst ammoVec = new Ammo.btVector3(pos.x, pos.y, pos.z);\n\t\tconst ammoQuat = new Ammo.btQuaternion(rot.x, rot.y, rot.z, rot.w);\n\t\tammoTransform.setOrigin(ammoVec);\n\t\tammoTransform.setRotation(ammoQuat);\n\t\tAmmo.destroy(ammoVec);\n\t\tAmmo.destroy(ammoQuat);\n\t}\n\n\t_updateAngularLimits() {\n\t\tconst constraint = this._constraint;\n\n\t\tif (constraint) {\n\t\t\tlet lx, ly, lz, ux, uy, uz;\n\n\t\t\tif (this._angularMotionX === MOTION_LIMITED) {\n\t\t\t\tlx = this._angularLimitsX.x * math.DEG_TO_RAD;\n\t\t\t\tux = this._angularLimitsX.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionX === MOTION_FREE) {\n\t\t\t\tlx = 1;\n\t\t\t\tux = 0;\n\t\t\t} else {\n\t\t\t\tlx = ux = 0;\n\t\t\t}\n\n\t\t\tif (this._angularMotionY === MOTION_LIMITED) {\n\t\t\t\tly = this._angularLimitsY.x * math.DEG_TO_RAD;\n\t\t\t\tuy = this._angularLimitsY.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionY === MOTION_FREE) {\n\t\t\t\tly = 1;\n\t\t\t\tuy = 0;\n\t\t\t} else {\n\t\t\t\tly = uy = 0;\n\t\t\t}\n\n\t\t\tif (this._angularMotionZ === MOTION_LIMITED) {\n\t\t\t\tlz = this._angularLimitsZ.x * math.DEG_TO_RAD;\n\t\t\t\tuz = this._angularLimitsZ.y * math.DEG_TO_RAD;\n\t\t\t} else if (this._angularMotionZ === MOTION_FREE) {\n\t\t\t\tlz = 1;\n\t\t\t\tuz = 0;\n\t\t\t} else {\n\t\t\t\tlz = uz = 0;\n\t\t\t}\n\n\t\t\tconst limits = new Ammo.btVector3(lx, ly, lz);\n\t\t\tconstraint.setAngularLowerLimit(limits);\n\t\t\tlimits.setValue(ux, uy, uz);\n\t\t\tconstraint.setAngularUpperLimit(limits);\n\t\t\tAmmo.destroy(limits);\n\t\t}\n\t}\n\n\t_updateLinearLimits() {\n\t\tconst constraint = this._constraint;\n\n\t\tif (constraint) {\n\t\t\tlet lx, ly, lz, ux, uy, uz;\n\n\t\t\tif (this._linearMotionX === MOTION_LIMITED) {\n\t\t\t\tlx = this._linearLimitsX.x;\n\t\t\t\tux = this._linearLimitsX.y;\n\t\t\t} else if (this._linearMotionX === MOTION_FREE) {\n\t\t\t\tlx = 1;\n\t\t\t\tux = 0;\n\t\t\t} else {\n\t\t\t\tlx = ux = 0;\n\t\t\t}\n\n\t\t\tif (this._linearMotionY === MOTION_LIMITED) {\n\t\t\t\tly = this._linearLimitsY.x;\n\t\t\t\tuy = this._linearLimitsY.y;\n\t\t\t} else if (this._linearMotionY === MOTION_FREE) {\n\t\t\t\tly = 1;\n\t\t\t\tuy = 0;\n\t\t\t} else {\n\t\t\t\tly = uy = 0;\n\t\t\t}\n\n\t\t\tif (this._linearMotionZ === MOTION_LIMITED) {\n\t\t\t\tlz = this._linearLimitsZ.x;\n\t\t\t\tuz = this._linearLimitsZ.y;\n\t\t\t} else if (this._linearMotionZ === MOTION_FREE) {\n\t\t\t\tlz = 1;\n\t\t\t\tuz = 0;\n\t\t\t} else {\n\t\t\t\tlz = uz = 0;\n\t\t\t}\n\n\t\t\tconst limits = new Ammo.btVector3(lx, ly, lz);\n\t\t\tconstraint.setLinearLowerLimit(limits);\n\t\t\tlimits.setValue(ux, uy, uz);\n\t\t\tconstraint.setLinearUpperLimit(limits);\n\t\t\tAmmo.destroy(limits);\n\t\t}\n\t}\n\n\t_createConstraint() {\n\t\tif (this._entityA && this._entityA.rigidbody) {\n\t\t\tthis._destroyConstraint();\n\n\t\t\tconst mat = new Mat4();\n\t\t\tconst bodyA = this._entityA.rigidbody.body;\n\t\t\tbodyA.activate();\n\t\t\tconst jointWtm = this.entity.getWorldTransform();\n\n\t\t\tconst entityAWtm = this._entityA.getWorldTransform();\n\n\t\t\tconst invEntityAWtm = entityAWtm.clone().invert();\n\t\t\tmat.mul2(invEntityAWtm, jointWtm);\n\t\t\tconst frameA = new Ammo.btTransform();\n\n\t\t\tthis._convertTransform(mat, frameA);\n\n\t\t\tif (this._entityB && this._entityB.rigidbody) {\n\t\t\t\tconst bodyB = this._entityB.rigidbody.body;\n\t\t\t\tbodyB.activate();\n\n\t\t\t\tconst entityBWtm = this._entityB.getWorldTransform();\n\n\t\t\t\tconst invEntityBWtm = entityBWtm.clone().invert();\n\t\t\t\tmat.mul2(invEntityBWtm, jointWtm);\n\t\t\t\tconst frameB = new Ammo.btTransform();\n\n\t\t\t\tthis._convertTransform(mat, frameB);\n\n\t\t\t\tthis._constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA, bodyB, frameA, frameB, !this._enableCollision);\n\t\t\t\tAmmo.destroy(frameB);\n\t\t\t} else {\n\t\t\t\tthis._constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA, frameA, !this._enableCollision);\n\t\t\t}\n\n\t\t\tAmmo.destroy(frameA);\n\t\t\tconst axis = ['X', 'Y', 'Z', 'X', 'Y', 'Z'];\n\n\t\t\tfor (let i = 0; i < 6; i++) {\n\t\t\t\tconst type = i < 3 ? '_linear' : '_angular';\n\n\t\t\t\tthis._constraint.enableSpring(i, this[type + 'Spring' + axis[i]]);\n\n\t\t\t\tthis._constraint.setDamping(i, this[type + 'Damping' + axis[i]]);\n\n\t\t\t\tthis._constraint.setEquilibriumPoint(i, this[type + 'Equilibrium' + axis[i]]);\n\n\t\t\t\tthis._constraint.setStiffness(i, this[type + 'Stiffness' + axis[i]]);\n\t\t\t}\n\n\t\t\tthis._constraint.setBreakingImpulseThreshold(this._breakForce);\n\n\t\t\tthis._updateLinearLimits();\n\n\t\t\tthis._updateAngularLimits();\n\n\t\t\tconst app = this.system.app;\n\t\t\tconst dynamicsWorld = app.systems.rigidbody.dynamicsWorld;\n\t\t\tdynamicsWorld.addConstraint(this._constraint, !this._enableCollision);\n\t\t}\n\t}\n\n\t_destroyConstraint() {\n\t\tif (this._constraint) {\n\t\t\tconst app = this.system.app;\n\t\t\tconst dynamicsWorld = app.systems.rigidbody.dynamicsWorld;\n\t\t\tdynamicsWorld.removeConstraint(this._constraint);\n\t\t\tAmmo.destroy(this._constraint);\n\t\t\tthis._constraint = null;\n\t\t}\n\t}\n\n\tinitFromData(data) {\n\t\tfor (const prop of properties) {\n\t\t\tif (data.hasOwnProperty(prop)) {\n\t\t\t\tif (data[prop] instanceof Vec2) {\n\t\t\t\t\tthis['_' + prop].copy(data[prop]);\n\t\t\t\t} else {\n\t\t\t\t\tthis['_' + prop] = data[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._createConstraint();\n\t}\n\n\tonEnable() {\n\t\tthis._createConstraint();\n\t}\n\n\tonDisable() {\n\t\tthis._destroyConstraint();\n\t}\n\n\t_onSetEnabled(prop, old, value) {}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\t}\n\n}\n\nconst functionMap = {\n\tDamping: 'setDamping',\n\tEquilibrium: 'setEquilibriumPoint',\n\tSpring: 'enableSpring',\n\tStiffness: 'setStiffness'\n};\n['linear', 'angular'].forEach(type => {\n\t['Damping', 'Equilibrium', 'Spring', 'Stiffness'].forEach(name => {\n\t\t['X', 'Y', 'Z'].forEach(axis => {\n\t\t\tconst prop = type + name + axis;\n\t\t\tconst propInternal = '_' + prop;\n\t\t\tlet index = type === 'linear' ? 0 : 3;\n\t\t\tif (axis === 'Y') index += 1;\n\t\t\tif (axis === 'Z') index += 2;\n\t\t\tObject.defineProperty(JointComponent.prototype, prop, {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this[propInternal];\n\t\t\t\t},\n\t\t\t\tset: function (value) {\n\t\t\t\t\tif (this[propInternal] !== value) {\n\t\t\t\t\t\tthis[propInternal] = value;\n\n\t\t\t\t\t\tthis._constraint[functionMap[name]](index, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n\nclass JointComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nvar _schema$d = ['enabled'];\n\nclass JointComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'joint';\n\t\tthis.app = app;\n\t\tthis.ComponentType = JointComponent;\n\t\tthis.DataType = JointComponentData;\n\t\tthis.schema = _schema$d;\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent.initFromData(data);\n\t}\n\n}\n\nComponent._buildAccessors(JointComponent.prototype, _schema$d);\n\nclass LayoutChildComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._minWidth = 0;\n\t\tthis._minHeight = 0;\n\t\tthis._maxWidth = null;\n\t\tthis._maxHeight = null;\n\t\tthis._fitWidthProportion = 0;\n\t\tthis._fitHeightProportion = 0;\n\t\tthis._excludeFromLayout = false;\n\t}\n\n}\n\nfunction defineResizeProperty(name) {\n\tvar _name = '_' + name;\n\n\tObject.defineProperty(LayoutChildComponent.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[_name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[_name] !== value) {\n\t\t\t\tthis[_name] = value;\n\t\t\t\tthis.fire('resize');\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineResizeProperty('minWidth');\ndefineResizeProperty('minHeight');\ndefineResizeProperty('maxWidth');\ndefineResizeProperty('maxHeight');\ndefineResizeProperty('fitWidthProportion');\ndefineResizeProperty('fitHeightProportion');\ndefineResizeProperty('excludeFromLayout');\n\nclass LayoutChildComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$c = ['enabled'];\n\nclass LayoutChildComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'layoutchild';\n\t\tthis.ComponentType = LayoutChildComponent;\n\t\tthis.DataType = LayoutChildComponentData;\n\t\tthis.schema = _schema$c;\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) component.enabled = data.enabled;\n\t\tif (data.minWidth !== undefined) component.minWidth = data.minWidth;\n\t\tif (data.minHeight !== undefined) component.minHeight = data.minHeight;\n\t\tif (data.maxWidth !== undefined) component.maxWidth = data.maxWidth;\n\t\tif (data.maxHeight !== undefined) component.maxHeight = data.maxHeight;\n\t\tif (data.fitWidthProportion !== undefined) component.fitWidthProportion = data.fitWidthProportion;\n\t\tif (data.fitHeightProportion !== undefined) component.fitHeightProportion = data.fitHeightProportion;\n\t\tif (data.excludeFromLayout !== undefined) component.excludeFromLayout = data.excludeFromLayout;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar layoutChild = entity.layoutchild;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: layoutChild.enabled,\n\t\t\tminWidth: layoutChild.minWidth,\n\t\t\tminHeight: layoutChild.minHeight,\n\t\t\tmaxWidth: layoutChild.maxWidth,\n\t\t\tmaxHeight: layoutChild.maxHeight,\n\t\t\tfitWidthProportion: layoutChild.fitWidthProportion,\n\t\t\tfitHeightProportion: layoutChild.fitHeightProportion,\n\t\t\texcludeFromLayout: layoutChild.excludeFromLayout\n\t\t});\n\t}\n\n}\n\nComponent._buildAccessors(LayoutChildComponent.prototype, _schema$c);\n\nconst FITTING_NONE = 0;\nconst FITTING_STRETCH = 1;\nconst FITTING_SHRINK = 2;\nconst FITTING_BOTH = 3;\n\nvar AXIS_MAPPINGS = {};\nAXIS_MAPPINGS[ORIENTATION_HORIZONTAL] = {\n\taxis: 'x',\n\tsize: 'width',\n\tcalculatedSize: 'calculatedWidth',\n\tminSize: 'minWidth',\n\tmaxSize: 'maxWidth',\n\tfitting: 'widthFitting',\n\tfittingProportion: 'fitWidthProportion'\n};\nAXIS_MAPPINGS[ORIENTATION_VERTICAL] = {\n\taxis: 'y',\n\tsize: 'height',\n\tcalculatedSize: 'calculatedHeight',\n\tminSize: 'minHeight',\n\tmaxSize: 'maxHeight',\n\tfitting: 'heightFitting',\n\tfittingProportion: 'fitHeightProportion'\n};\nvar OPPOSITE_ORIENTATION = {};\nOPPOSITE_ORIENTATION[ORIENTATION_HORIZONTAL] = ORIENTATION_VERTICAL;\nOPPOSITE_ORIENTATION[ORIENTATION_VERTICAL] = ORIENTATION_HORIZONTAL;\nvar PROPERTY_DEFAULTS = {\n\tminWidth: 0,\n\tminHeight: 0,\n\tmaxWidth: Number.POSITIVE_INFINITY,\n\tmaxHeight: Number.POSITIVE_INFINITY,\n\twidth: null,\n\theight: null,\n\tfitWidthProportion: 0,\n\tfitHeightProportion: 0\n};\nvar FITTING_ACTION = {\n\tNONE: 'NONE',\n\tAPPLY_STRETCHING: 'APPLY_STRETCHING',\n\tAPPLY_SHRINKING: 'APPLY_SHRINKING'\n};\nvar availableSpace = new Vec2();\n\nfunction createCalculator(orientation) {\n\tvar options;\n\tvar a = AXIS_MAPPINGS[orientation];\n\tvar b = AXIS_MAPPINGS[OPPOSITE_ORIENTATION[orientation]];\n\n\tfunction minExtentA(element, size) {\n\t\treturn -size[a.size] * element.pivot[a.axis];\n\t}\n\n\tfunction minExtentB(element, size) {\n\t\treturn -size[b.size] * element.pivot[b.axis];\n\t}\n\n\tfunction maxExtentA(element, size) {\n\t\treturn size[a.size] * (1 - element.pivot[a.axis]);\n\t}\n\n\tfunction calculateAll(allElements, layoutOptions) {\n\t\tallElements = allElements.filter(shouldIncludeInLayout);\n\t\toptions = layoutOptions;\n\t\tavailableSpace.x = options.containerSize.x - options.padding.x - options.padding.z;\n\t\tavailableSpace.y = options.containerSize.y - options.padding.y - options.padding.w;\n\t\tresetAnchors(allElements);\n\t\tvar lines = reverseLinesIfRequired(splitLines(allElements));\n\t\tvar sizes = calculateSizesOnAxisB(lines, calculateSizesOnAxisA(lines));\n\t\tvar positions = calculateBasePositions(lines, sizes);\n\t\tapplyAlignmentAndPadding(lines, sizes, positions);\n\t\tapplySizesAndPositions(lines, sizes, positions);\n\t\treturn createLayoutInfo(lines);\n\t}\n\n\tfunction shouldIncludeInLayout(element) {\n\t\tvar layoutChildComponent = element.entity.layoutchild;\n\t\treturn !layoutChildComponent || !layoutChildComponent.enabled || !layoutChildComponent.excludeFromLayout;\n\t}\n\n\tfunction resetAnchors(allElements) {\n\t\tfor (var i = 0; i < allElements.length; ++i) {\n\t\t\tvar element = allElements[i];\n\t\t\tvar anchor = element.anchor;\n\n\t\t\tif (anchor.x !== 0 || anchor.y !== 0 || anchor.z !== 0 || anchor.w !== 0) {\n\t\t\t\telement.anchor = Vec4.ZERO;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction splitLines(allElements) {\n\t\tif (!options.wrap) {\n\t\t\treturn [allElements];\n\t\t}\n\n\t\tvar lines = [[]];\n\t\tvar sizes = getElementSizeProperties(allElements);\n\t\tvar runningSize = 0;\n\t\tvar allowOverrun = options[a.fitting] === FITTING_SHRINK;\n\n\t\tfor (var i = 0; i < allElements.length; ++i) {\n\t\t\tif (lines[lines.length - 1].length > 0) {\n\t\t\t\trunningSize += options.spacing[a.axis];\n\t\t\t}\n\n\t\t\tvar idealElementSize = sizes[i][a.size];\n\t\t\trunningSize += idealElementSize;\n\n\t\t\tif (!allowOverrun && runningSize > availableSpace[a.axis] && lines[lines.length - 1].length !== 0) {\n\t\t\t\trunningSize = idealElementSize;\n\t\t\t\tlines.push([]);\n\t\t\t}\n\n\t\t\tlines[lines.length - 1].push(allElements[i]);\n\n\t\t\tif (allowOverrun && runningSize > availableSpace[a.axis] && i !== allElements.length - 1) {\n\t\t\t\trunningSize = 0;\n\t\t\t\tlines.push([]);\n\t\t\t}\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\tfunction reverseLinesIfRequired(lines) {\n\t\tvar reverseAxisA = options.orientation === ORIENTATION_HORIZONTAL && options.reverseX || options.orientation === ORIENTATION_VERTICAL && options.reverseY;\n\t\tvar reverseAxisB = options.orientation === ORIENTATION_HORIZONTAL && options.reverseY || options.orientation === ORIENTATION_VERTICAL && options.reverseX;\n\n\t\tif (reverseAxisA) {\n\t\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\t\tif (reverseAxisA) {\n\t\t\t\t\tlines[lineIndex].reverse();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (reverseAxisB) {\n\t\t\tlines.reverse();\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\tfunction calculateSizesOnAxisA(lines) {\n\t\tvar sizesAllLines = [];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = getElementSizeProperties(line);\n\t\t\tvar idealRequiredSpace = calculateTotalSpace(sizesThisLine, a);\n\t\t\tvar fittingAction = determineFittingAction(options[a.fitting], idealRequiredSpace, availableSpace[a.axis]);\n\n\t\t\tif (fittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\t\tstretchSizesToFitContainer(sizesThisLine, idealRequiredSpace, a);\n\t\t\t} else if (fittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\t\tshrinkSizesToFitContainer(sizesThisLine, idealRequiredSpace, a);\n\t\t\t}\n\n\t\t\tsizesAllLines.push(sizesThisLine);\n\t\t}\n\n\t\treturn sizesAllLines;\n\t}\n\n\tfunction calculateSizesOnAxisB(lines, sizesAllLines) {\n\t\tvar largestElementsForEachLine = [];\n\t\tvar largestSizesForEachLine = [];\n\t\tvar elementIndex;\n\t\tvar lineIndex;\n\t\tvar line;\n\n\t\tfor (lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tline = lines[lineIndex];\n\t\t\tline.largestElement = null;\n\t\t\tline.largestSize = {\n\t\t\t\twidth: Number.NEGATIVE_INFINITY,\n\t\t\t\theight: Number.NEGATIVE_INFINITY\n\t\t\t};\n\n\t\t\tfor (elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar sizesThisElement = sizesAllLines[lineIndex][elementIndex];\n\n\t\t\t\tif (sizesThisElement[b.size] > line.largestSize[b.size]) {\n\t\t\t\t\tline.largestElement = line[elementIndex];\n\t\t\t\t\tline.largestSize = sizesThisElement;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlargestElementsForEachLine.push(line.largestElement);\n\t\t\tlargestSizesForEachLine.push(line.largestSize);\n\t\t}\n\n\t\tvar idealRequiredSpace = calculateTotalSpace(largestSizesForEachLine, b);\n\t\tvar fittingAction = determineFittingAction(options[b.fitting], idealRequiredSpace, availableSpace[b.axis]);\n\n\t\tif (fittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\tstretchSizesToFitContainer(largestSizesForEachLine, idealRequiredSpace, b);\n\t\t} else if (fittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\tshrinkSizesToFitContainer(largestSizesForEachLine, idealRequiredSpace, b);\n\t\t}\n\n\t\tfor (lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tline = lines[lineIndex];\n\n\t\t\tfor (elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar sizesForThisElement = sizesAllLines[lineIndex][elementIndex];\n\t\t\t\tvar currentSize = sizesForThisElement[b.size];\n\t\t\t\tvar availableSize = lines.length === 1 ? availableSpace[b.axis] : line.largestSize[b.size];\n\t\t\t\tvar elementFittingAction = determineFittingAction(options[b.fitting], currentSize, availableSize);\n\n\t\t\t\tif (elementFittingAction === FITTING_ACTION.APPLY_STRETCHING) {\n\t\t\t\t\tsizesForThisElement[b.size] = Math.min(availableSize, sizesForThisElement[b.maxSize]);\n\t\t\t\t} else if (elementFittingAction === FITTING_ACTION.APPLY_SHRINKING) {\n\t\t\t\t\tsizesForThisElement[b.size] = Math.max(availableSize, sizesForThisElement[b.minSize]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sizesAllLines;\n\t}\n\n\tfunction determineFittingAction(fittingMode, currentSize, availableSize) {\n\t\tswitch (fittingMode) {\n\t\t\tcase FITTING_NONE:\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_STRETCH:\n\t\t\t\tif (currentSize < availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_STRETCHING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_SHRINK:\n\t\t\t\tif (currentSize >= availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_SHRINKING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tcase FITTING_BOTH:\n\t\t\t\tif (currentSize < availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_STRETCHING;\n\t\t\t\t} else if (currentSize >= availableSize) {\n\t\t\t\t\treturn FITTING_ACTION.APPLY_SHRINKING;\n\t\t\t\t}\n\n\t\t\t\treturn FITTING_ACTION.NONE;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unrecognized fitting mode: ' + fittingMode);\n\t\t}\n\t}\n\n\tfunction calculateTotalSpace(sizes, axis) {\n\t\tvar totalSizes = sumValues(sizes, axis.size);\n\t\tvar totalSpacing = (sizes.length - 1) * options.spacing[axis.axis];\n\t\treturn totalSizes + totalSpacing;\n\t}\n\n\tfunction stretchSizesToFitContainer(sizesThisLine, idealRequiredSpace, axis) {\n\t\tvar ascendingMaxSizeOrder = getTraversalOrder(sizesThisLine, axis.maxSize);\n\t\tvar fittingProportions = getNormalizedValues(sizesThisLine, axis.fittingProportion);\n\t\tvar fittingProportionSums = createSumArray(fittingProportions, ascendingMaxSizeOrder);\n\t\tvar remainingUndershoot = availableSpace[axis.axis] - idealRequiredSpace;\n\n\t\tfor (var i = 0; i < sizesThisLine.length; ++i) {\n\t\t\tvar index = ascendingMaxSizeOrder[i];\n\t\t\tvar targetIncrease = calculateAdjustment(index, remainingUndershoot, fittingProportions, fittingProportionSums);\n\t\t\tvar targetSize = sizesThisLine[index][axis.size] + targetIncrease;\n\t\t\tvar maxSize = sizesThisLine[index][axis.maxSize];\n\t\t\tvar actualSize = Math.min(targetSize, maxSize);\n\t\t\tsizesThisLine[index][axis.size] = actualSize;\n\t\t\tvar actualIncrease = Math.max(targetSize - actualSize, 0);\n\t\t\tvar appliedIncrease = targetIncrease - actualIncrease;\n\t\t\tremainingUndershoot -= appliedIncrease;\n\t\t}\n\t}\n\n\tfunction shrinkSizesToFitContainer(sizesThisLine, idealRequiredSpace, axis) {\n\t\tvar descendingMinSizeOrder = getTraversalOrder(sizesThisLine, axis.minSize, true);\n\t\tvar fittingProportions = getNormalizedValues(sizesThisLine, axis.fittingProportion);\n\t\tvar inverseFittingProportions = invertNormalizedValues(fittingProportions);\n\t\tvar inverseFittingProportionSums = createSumArray(inverseFittingProportions, descendingMinSizeOrder);\n\t\tvar remainingOvershoot = idealRequiredSpace - availableSpace[axis.axis];\n\n\t\tfor (var i = 0; i < sizesThisLine.length; ++i) {\n\t\t\tvar index = descendingMinSizeOrder[i];\n\t\t\tvar targetReduction = calculateAdjustment(index, remainingOvershoot, inverseFittingProportions, inverseFittingProportionSums);\n\t\t\tvar targetSize = sizesThisLine[index][axis.size] - targetReduction;\n\t\t\tvar minSize = sizesThisLine[index][axis.minSize];\n\t\t\tvar actualSize = Math.max(targetSize, minSize);\n\t\t\tsizesThisLine[index][axis.size] = actualSize;\n\t\t\tvar actualReduction = Math.max(actualSize - targetSize, 0);\n\t\t\tvar appliedReduction = targetReduction - actualReduction;\n\t\t\tremainingOvershoot -= appliedReduction;\n\t\t}\n\t}\n\n\tfunction calculateAdjustment(index, remainingAdjustment, fittingProportions, fittingProportionSums) {\n\t\tvar proportion = fittingProportions[index];\n\t\tvar sumOfRemainingProportions = fittingProportionSums[index];\n\n\t\tif (Math.abs(proportion) < 1e-5 && Math.abs(sumOfRemainingProportions) < 1e-5) {\n\t\t\treturn remainingAdjustment;\n\t\t}\n\n\t\treturn remainingAdjustment * proportion / sumOfRemainingProportions;\n\t}\n\n\tfunction calculateBasePositions(lines, sizes) {\n\t\tvar cursor = {};\n\t\tcursor[a.axis] = 0;\n\t\tcursor[b.axis] = 0;\n\t\tlines[a.size] = Number.NEGATIVE_INFINITY;\n\t\tvar positionsAllLines = [];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\n\t\t\tif (line.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar positionsThisLine = [];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar element = line[elementIndex];\n\t\t\t\tvar sizesThisElement = sizesThisLine[elementIndex];\n\t\t\t\tcursor[b.axis] -= minExtentB(element, sizesThisElement);\n\t\t\t\tcursor[a.axis] -= minExtentA(element, sizesThisElement);\n\t\t\t\tpositionsThisLine[elementIndex] = {};\n\t\t\t\tpositionsThisLine[elementIndex][a.axis] = cursor[a.axis];\n\t\t\t\tpositionsThisLine[elementIndex][b.axis] = cursor[b.axis];\n\t\t\t\tcursor[b.axis] += minExtentB(element, sizesThisElement);\n\t\t\t\tcursor[a.axis] += maxExtentA(element, sizesThisElement) + options.spacing[a.axis];\n\t\t\t}\n\n\t\t\tline[a.size] = cursor[a.axis] - options.spacing[a.axis];\n\t\t\tline[b.size] = line.largestSize[b.size];\n\t\t\tlines[a.size] = Math.max(lines[a.size], line[a.size]);\n\t\t\tcursor[a.axis] = 0;\n\t\t\tcursor[b.axis] += line[b.size] + options.spacing[b.axis];\n\t\t\tpositionsAllLines.push(positionsThisLine);\n\t\t}\n\n\t\tlines[b.size] = cursor[b.axis] - options.spacing[b.axis];\n\t\treturn positionsAllLines;\n\t}\n\n\tfunction applyAlignmentAndPadding(lines, sizes, positions) {\n\t\tvar alignmentA = options.alignment[a.axis];\n\t\tvar alignmentB = options.alignment[b.axis];\n\t\tvar paddingA = options.padding[a.axis];\n\t\tvar paddingB = options.padding[b.axis];\n\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\t\t\tvar positionsThisLine = positions[lineIndex];\n\t\t\tvar axisAOffset = (availableSpace[a.axis] - line[a.size]) * alignmentA + paddingA;\n\t\t\tvar axisBOffset = (availableSpace[b.axis] - lines[b.size]) * alignmentB + paddingB;\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar withinLineAxisBOffset = (line[b.size] - sizesThisLine[elementIndex][b.size]) * options.alignment[b.axis];\n\t\t\t\tpositionsThisLine[elementIndex][a.axis] += axisAOffset;\n\t\t\t\tpositionsThisLine[elementIndex][b.axis] += axisBOffset + withinLineAxisBOffset;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction applySizesAndPositions(lines, sizes, positions) {\n\t\tfor (var lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n\t\t\tvar line = lines[lineIndex];\n\t\t\tvar sizesThisLine = sizes[lineIndex];\n\t\t\tvar positionsThisLine = positions[lineIndex];\n\n\t\t\tfor (var elementIndex = 0; elementIndex < line.length; ++elementIndex) {\n\t\t\t\tvar element = line[elementIndex];\n\t\t\t\telement[a.calculatedSize] = sizesThisLine[elementIndex][a.size];\n\t\t\t\telement[b.calculatedSize] = sizesThisLine[elementIndex][b.size];\n\n\t\t\t\tif (options.orientation === ORIENTATION_HORIZONTAL) {\n\t\t\t\t\telement.entity.setLocalPosition(positionsThisLine[elementIndex][a.axis], positionsThisLine[elementIndex][b.axis], element.entity.getLocalPosition().z);\n\t\t\t\t} else {\n\t\t\t\t\telement.entity.setLocalPosition(positionsThisLine[elementIndex][b.axis], positionsThisLine[elementIndex][a.axis], element.entity.getLocalPosition().z);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction createLayoutInfo(lines) {\n\t\tvar layoutWidth = lines.width;\n\t\tvar layoutHeight = lines.height;\n\t\tvar xOffset = (availableSpace.x - layoutWidth) * options.alignment.x + options.padding.x;\n\t\tvar yOffset = (availableSpace.y - layoutHeight) * options.alignment.y + options.padding.y;\n\t\treturn {\n\t\t\tbounds: new Vec4(xOffset, yOffset, layoutWidth, layoutHeight)\n\t\t};\n\t}\n\n\tfunction getElementSizeProperties(elements) {\n\t\tvar sizeProperties = [];\n\n\t\tfor (var i = 0; i < elements.length; ++i) {\n\t\t\tvar element = elements[i];\n\t\t\tvar minWidth = Math.max(getProperty(element, 'minWidth'), 0);\n\t\t\tvar minHeight = Math.max(getProperty(element, 'minHeight'), 0);\n\t\t\tvar maxWidth = Math.max(getProperty(element, 'maxWidth'), minWidth);\n\t\t\tvar maxHeight = Math.max(getProperty(element, 'maxHeight'), minHeight);\n\t\t\tvar width = clamp(getProperty(element, 'width'), minWidth, maxWidth);\n\t\t\tvar height = clamp(getProperty(element, 'height'), minHeight, maxHeight);\n\t\t\tvar fitWidthProportion = getProperty(element, 'fitWidthProportion');\n\t\t\tvar fitHeightProportion = getProperty(element, 'fitHeightProportion');\n\t\t\tsizeProperties.push({\n\t\t\t\tminWidth: minWidth,\n\t\t\t\tminHeight: minHeight,\n\t\t\t\tmaxWidth: maxWidth,\n\t\t\t\tmaxHeight: maxHeight,\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tfitWidthProportion: fitWidthProportion,\n\t\t\t\tfitHeightProportion: fitHeightProportion\n\t\t\t});\n\t\t}\n\n\t\treturn sizeProperties;\n\t}\n\n\tfunction getProperty(element, propertyName) {\n\t\tvar layoutChildComponent = element.entity.layoutchild;\n\n\t\tif (layoutChildComponent && layoutChildComponent.enabled && layoutChildComponent[propertyName] !== undefined && layoutChildComponent[propertyName] !== null) {\n\t\t\treturn layoutChildComponent[propertyName];\n\t\t} else if (element[propertyName] !== undefined) {\n\t\t\treturn element[propertyName];\n\t\t}\n\n\t\treturn PROPERTY_DEFAULTS[propertyName];\n\t}\n\n\tfunction clamp(value, min, max) {\n\t\treturn Math.min(Math.max(value, min), max);\n\t}\n\n\tfunction sumValues(items, propertyName) {\n\t\treturn items.reduce(function (accumulator, current) {\n\t\t\treturn accumulator + current[propertyName];\n\t\t}, 0);\n\t}\n\n\tfunction getNormalizedValues(items, propertyName) {\n\t\tvar sum = sumValues(items, propertyName);\n\t\tvar normalizedValues = [];\n\t\tvar numItems = items.length;\n\t\tvar i;\n\n\t\tif (sum === 0) {\n\t\t\tfor (i = 0; i < numItems; ++i) {\n\t\t\t\tnormalizedValues.push(1 / numItems);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < numItems; ++i) {\n\t\t\t\tnormalizedValues.push(items[i][propertyName] / sum);\n\t\t\t}\n\t\t}\n\n\t\treturn normalizedValues;\n\t}\n\n\tfunction invertNormalizedValues(values) {\n\t\tif (values.length === 1) {\n\t\t\treturn [1];\n\t\t}\n\n\t\tvar invertedValues = [];\n\t\tvar numValues = values.length;\n\n\t\tfor (var i = 0; i < numValues; ++i) {\n\t\t\tinvertedValues.push((1 - values[i]) / (numValues - 1));\n\t\t}\n\n\t\treturn invertedValues;\n\t}\n\n\tfunction getTraversalOrder(items, orderBy, descending) {\n\t\titems.forEach(assignIndex);\n\t\treturn items.slice().sort(function (itemA, itemB) {\n\t\t\treturn descending ? itemB[orderBy] - itemA[orderBy] : itemA[orderBy] - itemB[orderBy];\n\t\t}).map(getIndex);\n\t}\n\n\tfunction assignIndex(item, index) {\n\t\titem.index = index;\n\t}\n\n\tfunction getIndex(item) {\n\t\treturn item.index;\n\t}\n\n\tfunction createSumArray(values, order) {\n\t\tvar sumArray = [];\n\t\tsumArray[order[values.length - 1]] = values[order[values.length - 1]];\n\n\t\tfor (var i = values.length - 2; i >= 0; --i) {\n\t\t\tsumArray[order[i]] = sumArray[order[i + 1]] + values[order[i]];\n\t\t}\n\n\t\treturn sumArray;\n\t}\n\n\treturn calculateAll;\n}\n\nvar CALCULATE_FNS = {};\nCALCULATE_FNS[ORIENTATION_HORIZONTAL] = createCalculator(ORIENTATION_HORIZONTAL);\nCALCULATE_FNS[ORIENTATION_VERTICAL] = createCalculator(ORIENTATION_VERTICAL);\n\nclass LayoutCalculator {\n\tcalculateLayout(elements, options) {\n\t\tvar calculateFn = CALCULATE_FNS[options.orientation];\n\n\t\tif (!calculateFn) {\n\t\t\tthrow new Error('Unrecognized orientation value: ' + options.orientation);\n\t\t} else {\n\t\t\treturn calculateFn(elements, options);\n\t\t}\n\t}\n\n}\n\nfunction getElement(entity) {\n\treturn entity.element;\n}\n\nfunction isEnabledAndHasEnabledElement(entity) {\n\treturn entity.enabled && entity.element && entity.element.enabled;\n}\n\nclass LayoutGroupComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._orientation = ORIENTATION_HORIZONTAL;\n\t\tthis._reverseX = false;\n\t\tthis._reverseY = true;\n\t\tthis._alignment = new Vec2(0, 1);\n\t\tthis._padding = new Vec4();\n\t\tthis._spacing = new Vec2();\n\t\tthis._widthFitting = FITTING_NONE;\n\t\tthis._heightFitting = FITTING_NONE;\n\t\tthis._wrap = false;\n\t\tthis._layoutCalculator = new LayoutCalculator();\n\n\t\tthis._listenForReflowEvents(this.entity, 'on');\n\n\t\tthis.entity.children.forEach(function (child) {\n\t\t\tthis._listenForReflowEvents(child, 'on');\n\t\t}.bind(this));\n\t\tthis.entity.on('childinsert', this._onChildInsert, this);\n\t\tthis.entity.on('childremove', this._onChildRemove, this);\n\t\tsystem.app.systems.element.on('add', this._onElementOrLayoutComponentAdd, this);\n\t\tsystem.app.systems.element.on('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t\tsystem.app.systems.layoutchild.on('add', this._onElementOrLayoutComponentAdd, this);\n\t\tsystem.app.systems.layoutchild.on('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t}\n\n\t_isSelfOrChild(entity) {\n\t\treturn entity === this.entity || this.entity.children.indexOf(entity) !== -1;\n\t}\n\n\t_listenForReflowEvents(target, onOff) {\n\t\tif (target.element) {\n\t\t\ttarget.element[onOff]('enableelement', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('disableelement', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('resize', this._scheduleReflow, this);\n\t\t\ttarget.element[onOff]('set:pivot', this._scheduleReflow, this);\n\t\t}\n\n\t\tif (target.layoutchild) {\n\t\t\ttarget.layoutchild[onOff]('set_enabled', this._scheduleReflow, this);\n\t\t\ttarget.layoutchild[onOff]('resize', this._scheduleReflow, this);\n\t\t}\n\t}\n\n\t_onElementOrLayoutComponentAdd(entity) {\n\t\tif (this._isSelfOrChild(entity)) {\n\t\t\tthis._listenForReflowEvents(entity, 'on');\n\n\t\t\tthis._scheduleReflow();\n\t\t}\n\t}\n\n\t_onElementOrLayoutComponentRemove(entity) {\n\t\tif (this._isSelfOrChild(entity)) {\n\t\t\tthis._listenForReflowEvents(entity, 'off');\n\n\t\t\tthis._scheduleReflow();\n\t\t}\n\t}\n\n\t_onChildInsert(child) {\n\t\tthis._listenForReflowEvents(child, 'on');\n\n\t\tthis._scheduleReflow();\n\t}\n\n\t_onChildRemove(child) {\n\t\tthis._listenForReflowEvents(child, 'off');\n\n\t\tthis._scheduleReflow();\n\t}\n\n\t_scheduleReflow() {\n\t\tif (this.enabled && this.entity && this.entity.enabled && !this._isPerformingReflow) {\n\t\t\tthis.system.scheduleReflow(this);\n\t\t}\n\t}\n\n\treflow() {\n\t\tvar container = getElement(this.entity);\n\t\tvar elements = this.entity.children.filter(isEnabledAndHasEnabledElement).map(getElement);\n\n\t\tif (!container || elements.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar containerWidth = Math.max(container.calculatedWidth, 0);\n\t\tvar containerHeight = Math.max(container.calculatedHeight, 0);\n\t\tvar options = {\n\t\t\torientation: this._orientation,\n\t\t\treverseX: this._reverseX,\n\t\t\treverseY: this._reverseY,\n\t\t\talignment: this._alignment,\n\t\t\tpadding: this._padding,\n\t\t\tspacing: this._spacing,\n\t\t\twidthFitting: this._widthFitting,\n\t\t\theightFitting: this._heightFitting,\n\t\t\twrap: this._wrap,\n\t\t\tcontainerSize: new Vec2(containerWidth, containerHeight)\n\t\t};\n\t\tthis._isPerformingReflow = true;\n\n\t\tvar layoutInfo = this._layoutCalculator.calculateLayout(elements, options);\n\n\t\tthis._isPerformingReflow = false;\n\t\tthis.fire('reflow', layoutInfo);\n\t}\n\n\tonEnable() {\n\t\tthis._scheduleReflow();\n\t}\n\n\tonRemove() {\n\t\tthis.entity.off('childinsert', this._onChildInsert, this);\n\t\tthis.entity.off('childremove', this._onChildRemove, this);\n\n\t\tthis._listenForReflowEvents(this.entity, 'off');\n\n\t\tthis.entity.children.forEach(function (child) {\n\t\t\tthis._listenForReflowEvents(child, 'off');\n\t\t}.bind(this));\n\t\tthis.system.app.systems.element.off('add', this._onElementOrLayoutComponentAdd, this);\n\t\tthis.system.app.systems.element.off('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t\tthis.system.app.systems.layoutchild.off('add', this._onElementOrLayoutComponentAdd, this);\n\t\tthis.system.app.systems.layoutchild.off('beforeremove', this._onElementOrLayoutComponentRemove, this);\n\t}\n\n}\n\nfunction defineReflowSchedulingProperty(name) {\n\tvar _name = '_' + name;\n\n\tObject.defineProperty(LayoutGroupComponent.prototype, name, {\n\t\tget: function () {\n\t\t\treturn this[_name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (this[_name] !== value) {\n\t\t\t\tthis[_name] = value;\n\n\t\t\t\tthis._scheduleReflow();\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineReflowSchedulingProperty('orientation');\ndefineReflowSchedulingProperty('reverseX');\ndefineReflowSchedulingProperty('reverseY');\ndefineReflowSchedulingProperty('alignment');\ndefineReflowSchedulingProperty('padding');\ndefineReflowSchedulingProperty('spacing');\ndefineReflowSchedulingProperty('widthFitting');\ndefineReflowSchedulingProperty('heightFitting');\ndefineReflowSchedulingProperty('wrap');\n\nclass LayoutGroupComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$b = ['enabled'];\nvar MAX_ITERATIONS = 100;\n\nclass LayoutGroupComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'layoutgroup';\n\t\tthis.ComponentType = LayoutGroupComponent;\n\t\tthis.DataType = LayoutGroupComponentData;\n\t\tthis.schema = _schema$b;\n\t\tthis._reflowQueue = [];\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('postUpdate', this._onPostUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) component.enabled = data.enabled;\n\t\tif (data.orientation !== undefined) component.orientation = data.orientation;\n\t\tif (data.reverseX !== undefined) component.reverseX = data.reverseX;\n\t\tif (data.reverseY !== undefined) component.reverseY = data.reverseY;\n\n\t\tif (data.alignment !== undefined) {\n\t\t\tif (data.alignment instanceof Vec2) {\n\t\t\t\tcomponent.alignment.copy(data.alignment);\n\t\t\t} else {\n\t\t\t\tcomponent.alignment.set(data.alignment[0], data.alignment[1]);\n\t\t\t}\n\n\t\t\tcomponent.alignment = component.alignment;\n\t\t}\n\n\t\tif (data.padding !== undefined) {\n\t\t\tif (data.padding instanceof Vec4) {\n\t\t\t\tcomponent.padding.copy(data.padding);\n\t\t\t} else {\n\t\t\t\tcomponent.padding.set(data.padding[0], data.padding[1], data.padding[2], data.padding[3]);\n\t\t\t}\n\n\t\t\tcomponent.padding = component.padding;\n\t\t}\n\n\t\tif (data.spacing !== undefined) {\n\t\t\tif (data.spacing instanceof Vec2) {\n\t\t\t\tcomponent.spacing.copy(data.spacing);\n\t\t\t} else {\n\t\t\t\tcomponent.spacing.set(data.spacing[0], data.spacing[1]);\n\t\t\t}\n\n\t\t\tcomponent.spacing = component.spacing;\n\t\t}\n\n\t\tif (data.widthFitting !== undefined) component.widthFitting = data.widthFitting;\n\t\tif (data.heightFitting !== undefined) component.heightFitting = data.heightFitting;\n\t\tif (data.wrap !== undefined) component.wrap = data.wrap;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar layoutGroup = entity.layoutgroup;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: layoutGroup.enabled,\n\t\t\torientation: layoutGroup.orientation,\n\t\t\treverseX: layoutGroup.reverseX,\n\t\t\treverseY: layoutGroup.reverseY,\n\t\t\talignment: layoutGroup.alignment,\n\t\t\tpadding: layoutGroup.padding,\n\t\t\tspacing: layoutGroup.spacing,\n\t\t\twidthFitting: layoutGroup.widthFitting,\n\t\t\theightFitting: layoutGroup.heightFitting,\n\t\t\twrap: layoutGroup.wrap\n\t\t});\n\t}\n\n\tscheduleReflow(component) {\n\t\tif (this._reflowQueue.indexOf(component) === -1) {\n\t\t\tthis._reflowQueue.push(component);\n\t\t}\n\t}\n\n\t_onPostUpdate() {\n\t\tthis._processReflowQueue();\n\t}\n\n\t_processReflowQueue() {\n\t\tif (this._reflowQueue.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar iterationCount = 0;\n\n\t\twhile (this._reflowQueue.length > 0) {\n\t\t\tvar queue = this._reflowQueue.slice();\n\n\t\t\tthis._reflowQueue.length = 0;\n\t\t\tqueue.sort(function (componentA, componentB) {\n\t\t\t\treturn componentA.entity.graphDepth - componentB.entity.graphDepth;\n\t\t\t});\n\n\t\t\tfor (var i = 0; i < queue.length; ++i) {\n\t\t\t\tqueue[i].reflow();\n\t\t\t}\n\n\t\t\tif (++iterationCount >= MAX_ITERATIONS) {\n\t\t\t\tconsole.warn('Max reflow iterations limit reached, bailing.');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(LayoutGroupComponent.prototype, _schema$b);\n\nvar _lightProps = [];\nvar _lightPropsDefault = [];\n\nclass LightComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._cookieAsset = null;\n\t\tthis._cookieAssetId = null;\n\t\tthis._cookieAssetAdd = false;\n\t\tthis._cookieMatrix = null;\n\t}\n\n\taddLightToLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addLight(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveLightFromLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeLight(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addLightToLayers();\n\t\t}\n\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\n\t\tif (index >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tlayer.addLight(this);\n\t\t}\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\n\t\tif (index >= 0) {\n\t\t\tlayer.removeLight(this);\n\t\t}\n\t}\n\n\trefreshProperties() {\n\t\tvar name;\n\n\t\tfor (var i = 0; i < _lightProps.length; i++) {\n\t\t\tname = _lightProps[i];\n\t\t\tthis[name] = this[name];\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) this.onEnable();\n\t}\n\n\tupdateShadow() {\n\t\tthis.light.updateShadow();\n\t}\n\n\tonCookieAssetSet() {\n\t\tvar forceLoad = false;\n\n\t\tif (this._cookieAsset.type === 'cubemap' && !this._cookieAsset.loadFaces) {\n\t\t\tthis._cookieAsset.loadFaces = true;\n\t\t\tforceLoad = true;\n\t\t}\n\n\t\tif (!this._cookieAsset.resource || forceLoad) this.system.app.assets.load(this._cookieAsset);\n\t\tif (this._cookieAsset.resource) this.onCookieAssetLoad();\n\t}\n\n\tonCookieAssetAdd(asset) {\n\t\tif (this._cookieAssetId !== asset.id) return;\n\t\tthis._cookieAsset = asset;\n\t\tif (this.light.enabled) this.onCookieAssetSet();\n\n\t\tthis._cookieAsset.on('load', this.onCookieAssetLoad, this);\n\n\t\tthis._cookieAsset.on('remove', this.onCookieAssetRemove, this);\n\t}\n\n\tonCookieAssetLoad() {\n\t\tif (!this._cookieAsset || !this._cookieAsset.resource) return;\n\t\tthis.cookie = this._cookieAsset.resource;\n\t}\n\n\tonCookieAssetRemove() {\n\t\tif (!this._cookieAssetId) return;\n\n\t\tif (this._cookieAssetAdd) {\n\t\t\tthis.system.app.assets.off('add:' + this._cookieAssetId, this.onCookieAssetAdd, this);\n\t\t\tthis._cookieAssetAdd = false;\n\t\t}\n\n\t\tif (this._cookieAsset) {\n\t\t\tthis._cookieAsset.off('load', this.onCookieAssetLoad, this);\n\n\t\t\tthis._cookieAsset.off('remove', this.onCookieAssetRemove, this);\n\n\t\t\tthis._cookieAsset = null;\n\t\t}\n\n\t\tthis.cookie = null;\n\t}\n\n\tonEnable() {\n\t\tthis.light.enabled = true;\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis.addLightToLayers();\n\t\t}\n\n\t\tif (this._cookieAsset && !this.cookie) this.onCookieAssetSet();\n\t}\n\n\tonDisable() {\n\t\tthis.light.enabled = false;\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tthis.removeLightFromLayers();\n\t}\n\n\tonRemove() {\n\t\tthis.onDisable();\n\t\tthis.light.destroy();\n\t\tthis.cookieAsset = null;\n\t}\n\n}\n\nfunction _defineProperty(name, defaultValue, setFunc, skipEqualsCheck) {\n\tvar c = LightComponent.prototype;\n\n\t_lightProps.push(name);\n\n\t_lightPropsDefault.push(defaultValue);\n\n\tObject.defineProperty(c, name, {\n\t\tget: function () {\n\t\t\treturn this.data[name];\n\t\t},\n\t\tset: function (value) {\n\t\t\tvar data = this.data;\n\t\t\tvar oldValue = data[name];\n\t\t\tif (!skipEqualsCheck && oldValue === value) return;\n\t\t\tdata[name] = value;\n\t\t\tif (setFunc) setFunc.call(this, value, oldValue);\n\t\t},\n\t\tconfigurable: true\n\t});\n}\n\nfunction _defineProps() {\n\t_defineProperty(\"enabled\", true, function (newValue, oldValue) {\n\t\tthis.onSetEnabled(null, oldValue, newValue);\n\t});\n\n\t_defineProperty(\"light\", null);\n\n\t_defineProperty(\"type\", 'directional', function (newValue, oldValue) {\n\t\tthis.system.changeType(this, oldValue, newValue);\n\t\tthis.refreshProperties();\n\t});\n\n\t_defineProperty(\"color\", new Color(1, 1, 1), function (newValue, oldValue) {\n\t\tthis.light.setColor(newValue);\n\t}, true);\n\n\t_defineProperty(\"intensity\", 1, function (newValue, oldValue) {\n\t\tthis.light.intensity = newValue;\n\t});\n\n\t_defineProperty(\"shape\", LIGHTSHAPE_PUNCTUAL, function (newValue, oldValue) {\n\t\tthis.light.shape = newValue;\n\t});\n\n\t_defineProperty(\"castShadows\", false, function (newValue, oldValue) {\n\t\tthis.light.castShadows = newValue;\n\t});\n\n\t_defineProperty(\"shadowDistance\", 40, function (newValue, oldValue) {\n\t\tthis.light.shadowDistance = newValue;\n\t});\n\n\t_defineProperty(\"shadowResolution\", 1024, function (newValue, oldValue) {\n\t\tthis.light.shadowResolution = newValue;\n\t});\n\n\t_defineProperty(\"shadowBias\", 0.05, function (newValue, oldValue) {\n\t\tthis.light.shadowBias = -0.01 * newValue;\n\t});\n\n\t_defineProperty(\"numCascades\", 1, function (newValue, oldValue) {\n\t\tthis.light.numCascades = math.clamp(Math.floor(newValue), 1, 4);\n\t});\n\n\t_defineProperty(\"cascadeDistribution\", 0.5, function (newValue, oldValue) {\n\t\tthis.light.cascadeDistribution = math.clamp(newValue, 0, 1);\n\t});\n\n\t_defineProperty(\"normalOffsetBias\", 0, function (newValue, oldValue) {\n\t\tthis.light.normalOffsetBias = newValue;\n\t});\n\n\t_defineProperty(\"range\", 10, function (newValue, oldValue) {\n\t\tthis.light.attenuationEnd = newValue;\n\t});\n\n\t_defineProperty(\"innerConeAngle\", 40, function (newValue, oldValue) {\n\t\tthis.light.innerConeAngle = newValue;\n\t});\n\n\t_defineProperty(\"outerConeAngle\", 45, function (newValue, oldValue) {\n\t\tthis.light.outerConeAngle = newValue;\n\t});\n\n\t_defineProperty(\"falloffMode\", LIGHTFALLOFF_LINEAR, function (newValue, oldValue) {\n\t\tthis.light.falloffMode = newValue;\n\t});\n\n\t_defineProperty(\"shadowType\", SHADOW_PCF3, function (newValue, oldValue) {\n\t\tthis.light.shadowType = newValue;\n\t});\n\n\t_defineProperty(\"vsmBlurSize\", 11, function (newValue, oldValue) {\n\t\tthis.light.vsmBlurSize = newValue;\n\t});\n\n\t_defineProperty(\"vsmBlurMode\", BLUR_GAUSSIAN, function (newValue, oldValue) {\n\t\tthis.light.vsmBlurMode = newValue;\n\t});\n\n\t_defineProperty(\"vsmBias\", 0.01 * 0.25, function (newValue, oldValue) {\n\t\tthis.light.vsmBias = newValue;\n\t});\n\n\t_defineProperty(\"cookieAsset\", null, function (newValue, oldValue) {\n\t\tif (this._cookieAssetId && (newValue instanceof Asset && newValue.id === this._cookieAssetId || newValue === this._cookieAssetId)) return;\n\t\tthis.onCookieAssetRemove();\n\t\tthis._cookieAssetId = null;\n\n\t\tif (newValue instanceof Asset) {\n\t\t\tthis.data.cookieAsset = newValue.id;\n\t\t\tthis._cookieAssetId = newValue.id;\n\t\t\tthis.onCookieAssetAdd(newValue);\n\t\t} else if (typeof newValue === 'number') {\n\t\t\tthis._cookieAssetId = newValue;\n\t\t\tvar asset = this.system.app.assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis.onCookieAssetAdd(asset);\n\t\t\t} else {\n\t\t\t\tthis._cookieAssetAdd = true;\n\t\t\t\tthis.system.app.assets.on('add:' + this._cookieAssetId, this.onCookieAssetAdd, this);\n\t\t\t}\n\t\t}\n\t});\n\n\t_defineProperty(\"cookie\", null, function (newValue, oldValue) {\n\t\tthis.light.cookie = newValue;\n\t});\n\n\t_defineProperty(\"cookieIntensity\", 1, function (newValue, oldValue) {\n\t\tthis.light.cookieIntensity = newValue;\n\t});\n\n\t_defineProperty(\"cookieFalloff\", true, function (newValue, oldValue) {\n\t\tthis.light.cookieFalloff = newValue;\n\t});\n\n\t_defineProperty(\"cookieChannel\", \"rgb\", function (newValue, oldValue) {\n\t\tthis.light.cookieChannel = newValue;\n\t});\n\n\t_defineProperty(\"cookieAngle\", 0, function (newValue, oldValue) {\n\t\tif (newValue !== 0 || this.cookieScale !== null) {\n\t\t\tif (!this._cookieMatrix) this._cookieMatrix = new Vec4();\n\t\t\tvar scx = 1;\n\t\t\tvar scy = 1;\n\n\t\t\tif (this.cookieScale) {\n\t\t\t\tscx = this.cookieScale.x;\n\t\t\t\tscy = this.cookieScale.y;\n\t\t\t}\n\n\t\t\tvar c = Math.cos(newValue * math.DEG_TO_RAD);\n\t\t\tvar s = Math.sin(newValue * math.DEG_TO_RAD);\n\n\t\t\tthis._cookieMatrix.set(c / scx, -s / scx, s / scy, c / scy);\n\n\t\t\tthis.light.cookieTransform = this._cookieMatrix;\n\t\t} else {\n\t\t\tthis.light.cookieTransform = null;\n\t\t}\n\t});\n\n\t_defineProperty(\"cookieScale\", null, function (newValue, oldValue) {\n\t\tif (newValue !== null || this.cookieAngle !== 0) {\n\t\t\tif (!this._cookieMatrix) this._cookieMatrix = new Vec4();\n\t\t\tvar scx = newValue.x;\n\t\t\tvar scy = newValue.y;\n\t\t\tvar c = Math.cos(this.cookieAngle * math.DEG_TO_RAD);\n\t\t\tvar s = Math.sin(this.cookieAngle * math.DEG_TO_RAD);\n\n\t\t\tthis._cookieMatrix.set(c / scx, -s / scx, s / scy, c / scy);\n\n\t\t\tthis.light.cookieTransform = this._cookieMatrix;\n\t\t} else {\n\t\t\tthis.light.cookieTransform = null;\n\t\t}\n\t}, true);\n\n\t_defineProperty(\"cookieOffset\", null, function (newValue, oldValue) {\n\t\tthis.light.cookieOffset = newValue;\n\t}, true);\n\n\t_defineProperty(\"shadowUpdateMode\", SHADOWUPDATE_REALTIME, function (newValue, oldValue) {\n\t\tthis.light.shadowUpdateMode = newValue;\n\t});\n\n\t_defineProperty(\"mask\", 1, function (newValue, oldValue) {\n\t\tthis.light.mask = newValue;\n\t});\n\n\t_defineProperty(\"affectDynamic\", true, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_DYNAMIC;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_DYNAMIC;\n\t\t}\n\n\t\tthis.light.layersDirty();\n\t});\n\n\t_defineProperty(\"affectLightmapped\", false, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_BAKED;\n\t\t\tif (this.bake) this.light.mask &= ~MASK_LIGHTMAP;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_BAKED;\n\t\t\tif (this.bake) this.light.mask |= MASK_LIGHTMAP;\n\t\t}\n\t});\n\n\t_defineProperty(\"bake\", false, function (newValue, oldValue) {\n\t\tif (newValue) {\n\t\t\tthis.light.mask |= MASK_LIGHTMAP;\n\t\t\tif (this.affectLightmapped) this.light.mask &= ~MASK_BAKED;\n\t\t} else {\n\t\t\tthis.light.mask &= ~MASK_LIGHTMAP;\n\t\t\tif (this.affectLightmapped) this.light.mask |= MASK_BAKED;\n\t\t}\n\t});\n\n\t_defineProperty(\"bakeDir\", true, function (newValue, oldValue) {\n\t\tthis.light.bakeDir = newValue;\n\t});\n\n\t_defineProperty(\"isStatic\", false, function (newValue, oldValue) {\n\t\tthis.light.isStatic = newValue;\n\t});\n\n\t_defineProperty(\"layers\", [LAYERID_WORLD], function (newValue, oldValue) {\n\t\tvar i, layer;\n\n\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(oldValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeLight(this);\n\t\t}\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tlayer.addLight(this);\n\t\t\t}\n\t\t}\n\t});\n}\n\n_defineProps();\n\nclass LightComponentData {\n\tconstructor() {\n\t\tvar _props = _lightProps;\n\t\tvar _propsDefault = _lightPropsDefault;\n\t\tvar value;\n\n\t\tfor (var i = 0; i < _props.length; i++) {\n\t\t\tvalue = _propsDefault[i];\n\n\t\t\tif (value && value.clone) {\n\t\t\t\tthis[_props[i]] = value.clone();\n\t\t\t} else {\n\t\t\t\tthis[_props[i]] = value;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nconst lightTypes = {\n\t'directional': LIGHTTYPE_DIRECTIONAL,\n\t'omni': LIGHTTYPE_OMNI,\n\t'point': LIGHTTYPE_OMNI,\n\t'spot': LIGHTTYPE_SPOT\n};\n\nclass LightComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'light';\n\t\tthis.ComponentType = LightComponent;\n\t\tthis.DataType = LightComponentData;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, _data) {\n\t\tvar properties = _lightProps;\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = properties.length; i < len; i++) {\n\t\t\tvar property = properties[i];\n\t\t\tdata[property] = _data[property];\n\t\t}\n\n\t\tif (!data.type) data.type = component.data.type;\n\t\tcomponent.data.type = data.type;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tdata.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.color && Array.isArray(data.color)) data.color = new Color(data.color[0], data.color[1], data.color[2]);\n\t\tif (data.cookieOffset && data.cookieOffset instanceof Array) data.cookieOffset = new Vec2(data.cookieOffset[0], data.cookieOffset[1]);\n\t\tif (data.cookieScale && data.cookieScale instanceof Array) data.cookieScale = new Vec2(data.cookieScale[0], data.cookieScale[1]);\n\n\t\tif (data.enable) {\n\t\t\tconsole.warn(\"WARNING: enable: Property is deprecated. Set enabled property instead.\");\n\t\t\tdata.enabled = data.enable;\n\t\t}\n\n\t\tif (!data.shape) {\n\t\t\tdata.shape = LIGHTSHAPE_PUNCTUAL;\n\t\t}\n\n\t\tvar light = new Light(this.app.graphicsDevice);\n\t\tlight.type = lightTypes[data.type];\n\t\tlight._node = component.entity;\n\t\tlight._scene = this.app.scene;\n\t\tcomponent.data.light = light;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar light = entity.light;\n\t\tvar data = [];\n\t\tvar name;\n\t\tvar _props = _lightProps;\n\n\t\tfor (var i = 0; i < _props.length; i++) {\n\t\t\tname = _props[i];\n\t\t\tif (name === \"light\") continue;\n\n\t\t\tif (light[name] && light[name].clone) {\n\t\t\t\tdata[name] = light[name].clone();\n\t\t\t} else {\n\t\t\t\tdata[name] = light[name];\n\t\t\t}\n\t\t}\n\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tchangeType(component, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tcomponent.light.type = lightTypes[newValue];\n\t\t}\n\t}\n\n}\n\nclass ModelComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = 'asset';\n\t\tthis._asset = null;\n\t\tthis._model = null;\n\t\tthis._mapping = {};\n\t\tthis._castShadows = true;\n\t\tthis._receiveShadows = true;\n\t\tthis._materialAsset = null;\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._castShadowsLightmap = true;\n\t\tthis._lightmapped = false;\n\t\tthis._lightmapSizeMultiplier = 1;\n\t\tthis._isStatic = false;\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._batchGroupId = -1;\n\t\tthis._customAabb = null;\n\t\tthis._area = null;\n\t\tthis._assetOld = 0;\n\t\tthis._materialEvents = null;\n\t\tthis._dirtyModelAsset = false;\n\t\tthis._dirtyMaterialAsset = false;\n\t\tthis._clonedModel = false;\n\t\tentity.on('remove', this.onRemoveChild, this);\n\t\tentity.on('insert', this.onInsertChild, this);\n\t}\n\n\taddModelToLayers() {\n\t\tconst layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this.meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveModelFromLayers() {\n\t\tvar layer;\n\t\tvar layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.meshInstances);\n\t\t}\n\t}\n\n\tonRemoveChild() {\n\t\tif (this._model) this.removeModelFromLayers();\n\t}\n\n\tonInsertChild() {\n\t\tif (this._model && this.enabled && this.entity.enabled) this.addModelToLayers();\n\t}\n\n\tonRemove() {\n\t\tif (this.type === 'asset') {\n\t\t\tthis.asset = null;\n\t\t} else {\n\t\t\tthis.model = null;\n\t\t}\n\n\t\tthis.materialAsset = null;\n\n\t\tthis._unsetMaterialEvents();\n\n\t\tthis.entity.off('remove', this.onRemoveChild, this);\n\t\tthis.entity.off('insert', this.onInsertChild, this);\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this.meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this.meshInstances);\n\t}\n\n\t_setMaterialEvent(index, event, id, handler) {\n\t\tvar evt = event + ':' + id;\n\t\tthis.system.app.assets.on(evt, handler, this);\n\t\tif (!this._materialEvents) this._materialEvents = [];\n\t\tif (!this._materialEvents[index]) this._materialEvents[index] = {};\n\t\tthis._materialEvents[index][evt] = {\n\t\t\tid: id,\n\t\t\thandler: handler\n\t\t};\n\t}\n\n\t_unsetMaterialEvents() {\n\t\tvar assets = this.system.app.assets;\n\t\tvar events = this._materialEvents;\n\t\tif (!events) return;\n\n\t\tfor (var i = 0, len = events.length; i < len; i++) {\n\t\t\tif (!events[i]) continue;\n\t\t\tvar evt = events[i];\n\n\t\t\tfor (var key in evt) {\n\t\t\t\tassets.off(key, evt[key].handler, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._materialEvents = null;\n\t}\n\n\t_getAssetByIdOrPath(idOrPath) {\n\t\tvar asset = null;\n\t\tvar isPath = isNaN(parseInt(idOrPath, 10));\n\n\t\tif (!isPath) {\n\t\t\tasset = this.system.app.assets.get(idOrPath);\n\t\t} else if (this.asset) {\n\t\t\tvar url = this._getMaterialAssetUrl(idOrPath);\n\n\t\t\tif (url) asset = this.system.app.assets.getByUrl(url);\n\t\t}\n\n\t\treturn asset;\n\t}\n\n\t_getMaterialAssetUrl(path) {\n\t\tif (!this.asset) return null;\n\t\tvar modelAsset = this.system.app.assets.get(this.asset);\n\t\treturn modelAsset ? modelAsset.getAbsoluteUrl(path) : null;\n\t}\n\n\t_loadAndSetMeshInstanceMaterial(materialAsset, meshInstance, index) {\n\t\tvar assets = this.system.app.assets;\n\t\tif (!materialAsset) return;\n\n\t\tif (materialAsset.resource) {\n\t\t\tmeshInstance.material = materialAsset.resource;\n\n\t\t\tthis._setMaterialEvent(index, 'remove', materialAsset.id, function () {\n\t\t\t\tmeshInstance.material = this.system.defaultMaterial;\n\t\t\t});\n\t\t} else {\n\t\t\tthis._setMaterialEvent(index, 'load', materialAsset.id, function (asset) {\n\t\t\t\tmeshInstance.material = asset.resource;\n\n\t\t\t\tthis._setMaterialEvent(index, 'remove', materialAsset.id, function () {\n\t\t\t\t\tmeshInstance.material = this.system.defaultMaterial;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (this.enabled && this.entity.enabled) assets.load(materialAsset);\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tvar isAsset = this._type === 'asset';\n\t\tvar asset;\n\n\t\tif (this._model) {\n\t\t\tthis.addModelToLayers();\n\t\t} else if (isAsset && this._asset) {\n\t\t\tasset = app.assets.get(this._asset);\n\n\t\t\tif (asset && asset.resource !== this._model) {\n\t\t\t\tthis._bindModelAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._materialAsset) {\n\t\t\tasset = app.assets.get(this._materialAsset);\n\n\t\t\tif (asset && asset.resource !== this._material) {\n\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (isAsset) {\n\t\t\tif (this._mapping) {\n\t\t\t\tfor (var index in this._mapping) {\n\t\t\t\t\tif (this._mapping[index]) {\n\t\t\t\t\t\tasset = this._getAssetByIdOrPath(this._mapping[index]);\n\n\t\t\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\t\t\tapp.assets.load(asset);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tthis.removeModelFromLayers();\n\t\t}\n\t}\n\n\thide() {\n\t\tif (this._model) {\n\t\t\tvar i, l;\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tshow() {\n\t\tif (this._model) {\n\t\t\tvar i, l;\n\t\t\tvar instances = this._model.meshInstances;\n\n\t\t\tfor (i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].visible = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_bindMaterialAsset(asset) {\n\t\tasset.on('load', this._onMaterialAssetLoad, this);\n\t\tasset.on('unload', this._onMaterialAssetUnload, this);\n\t\tasset.on('remove', this._onMaterialAssetRemove, this);\n\t\tasset.on('change', this._onMaterialAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMaterialAsset(asset) {\n\t\tasset.off('load', this._onMaterialAssetLoad, this);\n\t\tasset.off('unload', this._onMaterialAssetUnload, this);\n\t\tasset.off('remove', this._onMaterialAssetRemove, this);\n\t\tasset.off('change', this._onMaterialAssetChange, this);\n\t}\n\n\t_onMaterialAssetAdd(asset) {\n\t\tthis.system.app.assets.off('add:' + asset.id, this._onMaterialAssetAdd, this);\n\n\t\tif (this._materialAsset === asset.id) {\n\t\t\tthis._bindMaterialAsset(asset);\n\t\t}\n\t}\n\n\t_onMaterialAssetLoad(asset) {\n\t\tthis._setMaterial(asset.resource);\n\t}\n\n\t_onMaterialAssetUnload(asset) {\n\t\tthis._setMaterial(this.system.defaultMaterial);\n\t}\n\n\t_onMaterialAssetRemove(asset) {\n\t\tthis._onMaterialAssetUnload(asset);\n\t}\n\n\t_onMaterialAssetChange(asset) {}\n\n\t_bindModelAsset(asset) {\n\t\tthis._unbindModelAsset(asset);\n\n\t\tasset.on('load', this._onModelAssetLoad, this);\n\t\tasset.on('unload', this._onModelAssetUnload, this);\n\t\tasset.on('change', this._onModelAssetChange, this);\n\t\tasset.on('remove', this._onModelAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onModelAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindModelAsset(asset) {\n\t\tasset.off('load', this._onModelAssetLoad, this);\n\t\tasset.off('unload', this._onModelAssetUnload, this);\n\t\tasset.off('change', this._onModelAssetChange, this);\n\t\tasset.off('remove', this._onModelAssetRemove, this);\n\t}\n\n\t_onModelAssetAdded(asset) {\n\t\tthis.system.app.assets.off('add:' + asset.id, this._onModelAssetAdded, this);\n\n\t\tif (asset.id === this._asset) {\n\t\t\tthis._bindModelAsset(asset);\n\t\t}\n\t}\n\n\t_onModelAssetLoad(asset) {\n\t\tthis.model = asset.resource.clone();\n\t\tthis._clonedModel = true;\n\t}\n\n\t_onModelAssetUnload(asset) {\n\t\tthis.model = null;\n\t}\n\n\t_onModelAssetChange(asset, attr, _new, _old) {\n\t\tif (attr === 'data') {\n\t\t\tthis.mapping = this._mapping;\n\t\t}\n\t}\n\n\t_onModelAssetRemove(asset) {\n\t\tthis.model = null;\n\t}\n\n\t_setMaterial(material) {\n\t\tif (this._material === material) return;\n\t\tthis._material = material;\n\t\tvar model = this._model;\n\n\t\tif (model && this._type !== 'asset') {\n\t\t\tvar meshInstances = model.meshInstances;\n\n\t\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\t\tmeshInstances[i].material = material;\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshInstances() {\n\t\tif (!this._model) return null;\n\t\treturn this._model.meshInstances;\n\t}\n\n\tset meshInstances(value) {\n\t\tif (!this._model) return;\n\t\tthis._model.meshInstances = value;\n\t}\n\n\tget customAabb() {\n\t\treturn this._customAabb;\n\t}\n\n\tset customAabb(value) {\n\t\tthis._customAabb = value;\n\n\t\tif (this._model) {\n\t\t\tvar mi = this._model.meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._area = null;\n\t\tthis._type = value;\n\n\t\tif (value === 'asset') {\n\t\t\tif (this._asset !== null) {\n\t\t\t\tthis._bindModelAsset(this._asset);\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t}\n\t\t} else {\n\t\t\tvar primData = getShapePrimitive(this.system.app.graphicsDevice, value);\n\t\t\tthis._area = primData.area;\n\t\t\tvar mesh = primData.mesh;\n\t\t\tvar node = new GraphNode();\n\t\t\tvar model = new Model();\n\t\t\tmodel.graph = node;\n\t\t\tmodel.meshInstances = [new MeshInstance(mesh, this._material, node)];\n\t\t\tthis.model = model;\n\t\t\tthis._asset = null;\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._asset;\n\t}\n\n\tset asset(value) {\n\t\tvar assets = this.system.app.assets;\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tif (this._asset !== _id) {\n\t\t\tif (this._asset) {\n\t\t\t\tassets.off('add:' + this._asset, this._onModelAssetAdded, this);\n\n\t\t\t\tvar _prev = assets.get(this._asset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindModelAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._asset = _id;\n\n\t\t\tif (this._asset) {\n\t\t\t\tvar asset = assets.get(this._asset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.model = null;\n\t\t\t\t\tassets.on('add:' + this._asset, this._onModelAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindModelAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget model() {\n\t\treturn this._model;\n\t}\n\n\tset model(value) {\n\t\tvar i;\n\t\tif (this._model === value) return;\n\n\t\tif (value && value._immutable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._model) {\n\t\t\tthis._model._immutable = false;\n\t\t\tthis.removeModelFromLayers();\n\t\t\tthis.entity.removeChild(this._model.getGraph());\n\t\t\tdelete this._model._entity;\n\n\t\t\tif (this._clonedModel) {\n\t\t\t\tthis._model.destroy();\n\n\t\t\t\tthis._clonedModel = false;\n\t\t\t}\n\t\t}\n\n\t\tthis._model = value;\n\n\t\tif (this._model) {\n\t\t\tthis._model._immutable = true;\n\t\t\tvar meshInstances = this._model.meshInstances;\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].castShadow = this._castShadows;\n\t\t\t\tmeshInstances[i].receiveShadow = this._receiveShadows;\n\t\t\t\tmeshInstances[i].isStatic = this._isStatic;\n\t\t\t\tmeshInstances[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\n\t\t\tthis.lightmapped = this._lightmapped;\n\t\t\tthis.entity.addChild(this._model.graph);\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addModelToLayers();\n\t\t\t}\n\n\t\t\tthis._model._entity = this.entity;\n\t\t\tif (this.entity.animation) this.entity.animation.setModel(this._model);\n\n\t\t\tif (this.entity.anim) {\n\t\t\t\tif (this.entity.anim.playing) {\n\t\t\t\t\tthis.entity.anim.rebind();\n\t\t\t\t} else {\n\t\t\t\t\tthis.entity.anim.resetStateGraph();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.type === 'asset') {\n\t\t\t\tthis.mapping = this._mapping;\n\t\t\t} else {\n\t\t\t\tthis._unsetMaterialEvents();\n\t\t\t}\n\t\t}\n\t}\n\n\tget lightmapped() {\n\t\treturn this._lightmapped;\n\t}\n\n\tset lightmapped(value) {\n\t\tif (value !== this._lightmapped) {\n\t\t\tthis._lightmapped = value;\n\n\t\t\tif (this._model) {\n\t\t\t\tvar mi = this._model.meshInstances;\n\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setLightmapped(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows === value) return;\n\t\tvar layer;\n\t\tvar i;\n\t\tvar model = this._model;\n\n\t\tif (model) {\n\t\t\tvar layers = this.layers;\n\t\t\tvar scene = this.system.app.scene;\n\n\t\t\tif (this._castShadows && !value) {\n\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\t\t\tif (!layer) continue;\n\t\t\t\t\tlayer.removeShadowCasters(model.meshInstances);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar meshInstances = model.meshInstances;\n\n\t\t\tfor (i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].castShadow = value;\n\t\t\t}\n\n\t\t\tif (!this._castShadows && value) {\n\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\tlayer = scene.layers.getLayerById(layers[i]);\n\t\t\t\t\tif (!layer) continue;\n\t\t\t\t\tlayer.addShadowCasters(model.meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._castShadows = value;\n\t}\n\n\tget receiveShadows() {\n\t\treturn this._receiveShadows;\n\t}\n\n\tset receiveShadows(value) {\n\t\tif (this._receiveShadows === value) return;\n\t\tthis._receiveShadows = value;\n\n\t\tif (this._model) {\n\t\t\tvar meshInstances = this._model.meshInstances;\n\n\t\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\t\tmeshInstances[i].receiveShadow = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadowsLightmap() {\n\t\treturn this._castShadowsLightmap;\n\t}\n\n\tset castShadowsLightmap(value) {\n\t\tthis._castShadowsLightmap = value;\n\t}\n\n\tget lightmapSizeMultiplier() {\n\t\treturn this._lightmapSizeMultiplier;\n\t}\n\n\tset lightmapSizeMultiplier(value) {\n\t\tthis._lightmapSizeMultiplier = value;\n\t}\n\n\tget isStatic() {\n\t\treturn this._isStatic;\n\t}\n\n\tset isStatic(value) {\n\t\tif (this._isStatic === value) return;\n\t\tthis._isStatic = value;\n\t\tvar i, m;\n\n\t\tif (this._model) {\n\t\t\tvar rcv = this._model.meshInstances;\n\n\t\t\tfor (i = 0; i < rcv.length; i++) {\n\t\t\t\tm = rcv[i];\n\t\t\t\tm.isStatic = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tvar i, layer;\n\t\tvar layers = this.system.app.scene.layers;\n\n\t\tif (this.meshInstances) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\t\tif (!layer) continue;\n\t\t\t\tlayer.removeMeshInstances(this.meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._layers.length = 0;\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tthis._layers[i] = value[i];\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled || !this.meshInstances) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.meshInstances);\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId === value) return;\n\t\tvar batcher = this.system.app.batcher;\n\n\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\tbatcher.remove(BatchGroup.MODEL, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tbatcher.insert(BatchGroup.MODEL, value, this.entity);\n\t\t}\n\n\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\tthis.addModelToLayers();\n\t\t}\n\n\t\tthis._batchGroupId = value;\n\t}\n\n\tget materialAsset() {\n\t\treturn this._materialAsset;\n\t}\n\n\tset materialAsset(value) {\n\t\tvar _id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\t_id = value.id;\n\t\t}\n\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (_id !== this._materialAsset) {\n\t\t\tif (this._materialAsset) {\n\t\t\t\tassets.off('add:' + this._materialAsset, this._onMaterialAssetAdd, this);\n\n\t\t\t\tvar _prev = assets.get(this._materialAsset);\n\n\t\t\t\tif (_prev) {\n\t\t\t\t\tthis._unbindMaterialAsset(_prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._materialAsset = _id;\n\n\t\t\tif (this._materialAsset) {\n\t\t\t\tvar asset = assets.get(this._materialAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis._setMaterial(this.system.defaultMaterial);\n\n\t\t\t\t\tassets.on('add:' + this._materialAsset, this._onMaterialAssetAdd, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindMaterialAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._setMaterial(this.system.defaultMaterial);\n\t\t\t}\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material === value) return;\n\t\tthis.materialAsset = null;\n\n\t\tthis._setMaterial(value);\n\t}\n\n\tget mapping() {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping(value) {\n\t\tif (this._type !== 'asset') return;\n\n\t\tthis._unsetMaterialEvents();\n\n\t\tif (!value) value = {};\n\t\tthis._mapping = value;\n\t\tif (!this._model) return;\n\t\tvar meshInstances = this._model.meshInstances;\n\t\tvar modelAsset = this.asset ? this.system.app.assets.get(this.asset) : null;\n\t\tvar assetMapping = modelAsset ? modelAsset.data.mapping : null;\n\t\tvar asset = null;\n\n\t\tfor (var i = 0, len = meshInstances.length; i < len; i++) {\n\t\t\tif (value[i] !== undefined) {\n\t\t\t\tif (value[i]) {\n\t\t\t\t\tasset = this.system.app.assets.get(value[i]);\n\n\t\t\t\t\tthis._loadAndSetMeshInstanceMaterial(asset, meshInstances[i], i);\n\t\t\t\t} else {\n\t\t\t\t\tmeshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t} else if (assetMapping) {\n\t\t\t\tif (assetMapping[i] && (assetMapping[i].material || assetMapping[i].path)) {\n\t\t\t\t\tif (assetMapping[i].material !== undefined) {\n\t\t\t\t\t\tasset = this.system.app.assets.get(assetMapping[i].material);\n\t\t\t\t\t} else if (assetMapping[i].path !== undefined) {\n\t\t\t\t\t\tvar url = this._getMaterialAssetUrl(assetMapping[i].path);\n\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\tasset = this.system.app.assets.getByUrl(url);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loadAndSetMeshInstanceMaterial(asset, meshInstances[i], i);\n\t\t\t\t} else {\n\t\t\t\t\tmeshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ModelComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$a = ['enabled'];\n\nclass ModelComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'model';\n\t\tthis.ComponentType = ModelComponent;\n\t\tthis.DataType = ModelComponentData;\n\t\tthis.schema = _schema$a;\n\t\tthis.defaultMaterial = app.scene.defaultMaterial;\n\t\tthis.on('beforeremove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tproperties = ['material', 'materialAsset', 'asset', 'castShadows', 'receiveShadows', 'castShadowsLightmap', 'lightmapped', 'lightmapSizeMultiplier', 'type', 'mapping', 'layers', 'isStatic', 'batchGroupId'];\n\n\t\tif (_data.batchGroupId === null || _data.batchGroupId === undefined) {\n\t\t\t_data.batchGroupId = -1;\n\t\t}\n\n\t\tif (_data.layers && _data.layers.length) {\n\t\t\t_data.layers = _data.layers.slice(0);\n\t\t}\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tif (_data.hasOwnProperty(properties[i])) {\n\t\t\t\tcomponent[properties[i]] = _data[properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tif (_data.aabbCenter && _data.aabbHalfExtents) {\n\t\t\tcomponent.customAabb = new BoundingBox(new Vec3(_data.aabbCenter), new Vec3(_data.aabbHalfExtents));\n\t\t}\n\n\t\tsuper.initializeComponentData(component, _data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\ttype: entity.model.type,\n\t\t\tasset: entity.model.asset,\n\t\t\tcastShadows: entity.model.castShadows,\n\t\t\treceiveShadows: entity.model.receiveShadows,\n\t\t\tcastShadowsLightmap: entity.model.castShadowsLightmap,\n\t\t\tlightmapped: entity.model.lightmapped,\n\t\t\tlightmapSizeMultiplier: entity.model.lightmapSizeMultiplier,\n\t\t\tisStatic: entity.model.isStatic,\n\t\t\tenabled: entity.model.enabled,\n\t\t\tlayers: entity.model.layers,\n\t\t\tbatchGroupId: entity.model.batchGroupId,\n\t\t\tmapping: extend({}, entity.model.mapping)\n\t\t};\n\t\tvar materialAsset = entity.model.materialAsset;\n\n\t\tif (!(materialAsset instanceof Asset) && materialAsset != null) {\n\t\t\tmaterialAsset = this.app.assets.get(materialAsset);\n\t\t}\n\n\t\tvar material = entity.model.material;\n\n\t\tif (!material || material === this.defaultMaterial || !materialAsset || material === materialAsset.resource) {\n\t\t\tdata.materialAsset = materialAsset;\n\t\t}\n\n\t\tvar component = this.addComponent(clone, data);\n\n\t\tif (entity.model.model && entity.model.type === 'asset' && !entity.model.asset) {\n\t\t\tcomponent.model = entity.model.model.clone();\n\t\t\tcomponent._clonedModel = true;\n\t\t}\n\n\t\tif (!data.materialAsset) component.material = material;\n\n\t\tif (entity.model.model) {\n\t\t\tvar meshInstances = entity.model.model.meshInstances;\n\t\t\tvar meshInstancesClone = component.model.meshInstances;\n\n\t\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstancesClone[i].mask = meshInstances[i].mask;\n\t\t\t\tmeshInstancesClone[i].material = meshInstances[i].material;\n\t\t\t\tmeshInstancesClone[i].layer = meshInstances[i].layer;\n\t\t\t\tmeshInstancesClone[i].receiveShadow = meshInstances[i].receiveShadow;\n\t\t\t}\n\t\t}\n\n\t\tif (entity.model.customAabb) {\n\t\t\tcomponent.customAabb = entity.model.aabb.clone();\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ModelComponent.prototype, _schema$a);\n\nclass RenderComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = 'asset';\n\t\tthis._castShadows = true;\n\t\tthis._receiveShadows = true;\n\t\tthis._castShadowsLightmap = true;\n\t\tthis._lightmapped = false;\n\t\tthis._lightmapSizeMultiplier = 1;\n\t\tthis._isStatic = false;\n\t\tthis._batchGroupId = -1;\n\t\tthis._meshInstances = [];\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._renderStyle = RENDERSTYLE_SOLID;\n\t\tthis._customAabb = null;\n\t\tthis._area = null;\n\t\tthis._rootBone = new EntityReference(this, 'rootBone');\n\n\t\tthis._rootBone.on('set:entity', this._onSetRootBone, this);\n\n\t\tthis._assetReference = new AssetReference('asset', this, system.app.assets, {\n\t\t\tadd: this._onRenderAssetAdded,\n\t\t\tload: this._onRenderAssetLoad,\n\t\t\tremove: this._onRenderAssetRemove,\n\t\t\tunload: this._onRenderAssetUnload\n\t\t}, this);\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._materialReferences = [];\n\t\tentity.on('remove', this.onRemoveChild, this);\n\t\tentity.on('insert', this.onInsertChild, this);\n\t}\n\n\t_onSetRootBone(entity) {\n\t\tif (entity) {\n\t\t\tthis._onRootBoneChanged();\n\t\t}\n\t}\n\n\t_onRootBoneChanged() {\n\t\tthis._clearSkinInstances();\n\n\t\tthis._cloneSkinInstances();\n\t}\n\n\tdestroyMeshInstances() {\n\t\tvar meshInstances = this._meshInstances;\n\n\t\tif (meshInstances) {\n\t\t\tthis.removeFromLayers();\n\n\t\t\tthis._clearSkinInstances();\n\n\t\t\tfor (var i = 0; i < meshInstances.length; i++) {\n\t\t\t\tmeshInstances[i].destroy();\n\t\t\t}\n\n\t\t\tthis._meshInstances.length = 0;\n\t\t}\n\t}\n\n\taddToLayers() {\n\t\tconst layers = this.system.app.scene.layers;\n\n\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\tconst layer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this._meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveFromLayers() {\n\t\tif (this._meshInstances && this._meshInstances.length) {\n\t\t\tvar layer,\n\t\t\t\t\tlayers = this.system.app.scene.layers;\n\n\t\t\tfor (var i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.removeMeshInstances(this._meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonRemoveChild() {\n\t\tthis.removeFromLayers();\n\t}\n\n\tonInsertChild() {\n\t\tif (this._meshInstances && this.enabled && this.entity.enabled) {\n\t\t\tthis.addToLayers();\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tthis.destroyMeshInstances();\n\t\tthis.asset = null;\n\t\tthis.materialAsset = null;\n\t\tthis.entity.off('remove', this.onRemoveChild, this);\n\t\tthis.entity.off('insert', this.onInsertChild, this);\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this._meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this._meshInstances);\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\n\t\tthis._rootBone.onParentComponentEnable();\n\n\t\tscene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tvar isAsset = this._type === 'asset';\n\n\t\tif (this._meshInstances && this._meshInstances.length) {\n\t\t\tthis.addToLayers();\n\t\t} else if (isAsset && this.asset) {\n\t\t\tthis._onRenderAssetAdded();\n\t\t}\n\n\t\tfor (var i = 0; i < this._materialReferences.length; i++) {\n\t\t\tif (this._materialReferences[i].asset) {\n\t\t\t\tthis.system.app.assets.load(this._materialReferences[i].asset);\n\t\t\t}\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t}\n\n\t\tthis.removeFromLayers();\n\t}\n\n\thide() {\n\t\tif (this._meshInstances) {\n\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tthis._meshInstances[i].visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tshow() {\n\t\tif (this._meshInstances) {\n\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tthis._meshInstances[i].visible = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRenderAssetAdded() {\n\t\tif (!this._assetReference.asset) return;\n\n\t\tif (this._assetReference.asset.resource) {\n\t\t\tthis._onRenderAssetLoad();\n\t\t} else if (this.enabled && this.entity.enabled) {\n\t\t\tthis.system.app.assets.load(this._assetReference.asset);\n\t\t}\n\t}\n\n\t_onRenderAssetLoad() {\n\t\tthis.destroyMeshInstances();\n\n\t\tif (this._assetReference.asset) {\n\t\t\tvar render = this._assetReference.asset.resource;\n\t\t\trender.off('set:meshes', this._onSetMeshes, this);\n\t\t\trender.on('set:meshes', this._onSetMeshes, this);\n\n\t\t\tif (render.meshes) {\n\t\t\t\tthis._onSetMeshes(render.meshes);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSetMeshes(meshes) {\n\t\tthis._cloneMeshes(meshes);\n\t}\n\n\t_clearSkinInstances() {\n\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\tconst meshInstance = this._meshInstances[i];\n\t\t\tSkinInstanceCache.removeCachedSkinInstance(meshInstance.skinInstance);\n\t\t\tmeshInstance.skinInstance = null;\n\t\t}\n\t}\n\n\t_cloneSkinInstances() {\n\t\tif (this._meshInstances.length && this._rootBone.entity instanceof GraphNode) {\n\t\t\tfor (let i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\tconst meshInstance = this._meshInstances[i];\n\t\t\t\tconst mesh = meshInstance.mesh;\n\n\t\t\t\tif (mesh.skin && !mesh.skinInstance) {\n\t\t\t\t\tmeshInstance.skinInstance = SkinInstanceCache.createCachedSkinedInstance(mesh.skin, this._rootBone.entity, this.entity);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_cloneMeshes(meshes) {\n\t\tif (meshes && meshes.length) {\n\t\t\tvar meshInstances = [];\n\n\t\t\tfor (var i = 0; i < meshes.length; i++) {\n\t\t\t\tvar mesh = meshes[i];\n\t\t\t\tvar material = this._materialReferences[i] && this._materialReferences[i].asset && this._materialReferences[i].asset.resource;\n\t\t\t\tvar meshInst = new MeshInstance(mesh, material || this.system.defaultMaterial, this.entity);\n\t\t\t\tmeshInstances.push(meshInst);\n\n\t\t\t\tif (mesh.morph) {\n\t\t\t\t\tmeshInst.morphInstance = new MorphInstance(mesh.morph);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.meshInstances = meshInstances;\n\n\t\t\tthis._cloneSkinInstances();\n\t\t}\n\t}\n\n\t_onRenderAssetUnload() {\n\t\tif (this._type === 'asset') {\n\t\t\tthis.destroyMeshInstances();\n\t\t}\n\t}\n\n\t_onRenderAssetRemove() {\n\t\tif (this._assetReference.asset && this._assetReference.asset.resource) {\n\t\t\tthis._assetReference.asset.resource.off('set:meshes', this._onSetMeshes, this);\n\t\t}\n\n\t\tthis._onRenderAssetUnload();\n\t}\n\n\t_onMaterialAdded(index, component, asset) {\n\t\tif (asset.resource) {\n\t\t\tthis._onMaterialLoad(index, component, asset);\n\t\t} else {\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onMaterialLoad(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = asset.resource;\n\t\t}\n\t}\n\n\t_onMaterialRemove(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = this.system.defaultMaterial;\n\t\t}\n\t}\n\n\t_onMaterialUnload(index, component, asset) {\n\t\tif (this._meshInstances[index]) {\n\t\t\tthis._meshInstances[index].material = this.system.defaultMaterial;\n\t\t}\n\t}\n\n\tget renderStyle() {\n\t\treturn this._renderStyle;\n\t}\n\n\tset renderStyle(renderStyle) {\n\t\tif (this._renderStyle !== renderStyle) {\n\t\t\tthis._renderStyle = renderStyle;\n\n\t\t\tMeshInstance._prepareRenderStyleForArray(this._meshInstances, renderStyle);\n\t\t}\n\t}\n\n\tget customAabb() {\n\t\treturn this._customAabb;\n\t}\n\n\tset customAabb(value) {\n\t\tthis._customAabb = value;\n\t\tvar mi = this._meshInstances;\n\n\t\tif (mi) {\n\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type !== value) {\n\t\t\tthis._area = null;\n\t\t\tthis._type = value;\n\t\t\tthis.destroyMeshInstances();\n\n\t\t\tif (value !== 'asset') {\n\t\t\t\tvar material = this._material;\n\n\t\t\t\tif (!material || material === this.system.defaultMaterial) {\n\t\t\t\t\tmaterial = this._materialReferences[0] && this._materialReferences[0].asset && this._materialReferences[0].asset.resource;\n\t\t\t\t}\n\n\t\t\t\tvar primData = getShapePrimitive(this.system.app.graphicsDevice, value);\n\t\t\t\tthis._area = primData.area;\n\t\t\t\tthis.meshInstances = [new MeshInstance(primData.mesh, material || this.system.defaultMaterial, this.entity)];\n\t\t\t}\n\t\t}\n\t}\n\n\tget meshInstances() {\n\t\treturn this._meshInstances;\n\t}\n\n\tset meshInstances(value) {\n\t\tthis.destroyMeshInstances();\n\t\tthis._meshInstances = value;\n\n\t\tif (this._meshInstances) {\n\t\t\tconst mi = this._meshInstances;\n\n\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\tif (!mi[i].node) {\n\t\t\t\t\tmi[i].node = this.entity;\n\t\t\t\t}\n\n\t\t\t\tmi[i].castShadow = this._castShadows;\n\t\t\t\tmi[i].receiveShadow = this._receiveShadows;\n\t\t\t\tmi[i].isStatic = this._isStatic;\n\t\t\t\tmi[i].renderStyle = this._renderStyle;\n\t\t\t\tmi[i].setLightmapped(this._lightmapped);\n\t\t\t\tmi[i].setCustomAabb(this._customAabb);\n\t\t\t}\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addToLayers();\n\t\t\t}\n\t\t}\n\t}\n\n\tget lightmapped() {\n\t\treturn this._lightmapped;\n\t}\n\n\tset lightmapped(value) {\n\t\tif (value !== this._lightmapped) {\n\t\t\tthis._lightmapped = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].setLightmapped(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadows() {\n\t\treturn this._castShadows;\n\t}\n\n\tset castShadows(value) {\n\t\tif (this._castShadows !== value) {\n\t\t\tvar i,\n\t\t\t\t\tlayer,\n\t\t\t\t\tmi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tvar layers = this.layers;\n\t\t\t\tvar scene = this.system.app.scene;\n\n\t\t\t\tif (this._castShadows && !value) {\n\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\tlayer = scene.layers.getLayerById(this.layers[i]);\n\n\t\t\t\t\t\tif (layer) {\n\t\t\t\t\t\t\tlayer.removeShadowCasters(mi);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].castShadow = value;\n\t\t\t\t}\n\n\t\t\t\tif (!this._castShadows && value) {\n\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\tlayer = scene.layers.getLayerById(layers[i]);\n\n\t\t\t\t\t\tif (layer) {\n\t\t\t\t\t\t\tlayer.addShadowCasters(mi);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._castShadows = value;\n\t\t}\n\t}\n\n\tget receiveShadows() {\n\t\treturn this._receiveShadows;\n\t}\n\n\tset receiveShadows(value) {\n\t\tif (this._receiveShadows !== value) {\n\t\t\tthis._receiveShadows = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].receiveShadow = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget castShadowsLightmap() {\n\t\treturn this._castShadowsLightmap;\n\t}\n\n\tset castShadowsLightmap(value) {\n\t\tthis._castShadowsLightmap = value;\n\t}\n\n\tget lightmapSizeMultiplier() {\n\t\treturn this._lightmapSizeMultiplier;\n\t}\n\n\tset lightmapSizeMultiplier(value) {\n\t\tthis._lightmapSizeMultiplier = value;\n\t}\n\n\tget isStatic() {\n\t\treturn this._isStatic;\n\t}\n\n\tset isStatic(value) {\n\t\tif (this._isStatic !== value) {\n\t\t\tthis._isStatic = value;\n\t\t\tvar mi = this._meshInstances;\n\n\t\t\tif (mi) {\n\t\t\t\tfor (var i = 0; i < mi.length; i++) {\n\t\t\t\t\tmi[i].isStatic = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tvar i,\n\t\t\t\tlayer,\n\t\t\t\tlayers = this.system.app.scene.layers;\n\n\t\tif (this._meshInstances) {\n\t\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\t\tif (layer) {\n\t\t\t\t\tlayer.removeMeshInstances(this._meshInstances);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._layers.length = 0;\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tthis._layers[i] = value[i];\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled || !this._meshInstances) return;\n\n\t\tfor (i = 0; i < this._layers.length; i++) {\n\t\t\tlayer = layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(this._meshInstances);\n\t\t\t}\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId !== value) {\n\t\t\tvar batcher = this.system.app.batcher;\n\n\t\t\tif (this.entity.enabled && this._batchGroupId >= 0) {\n\t\t\t\tbatcher.remove(BatchGroup.RENDER, this.batchGroupId, this.entity);\n\t\t\t}\n\n\t\t\tif (this.entity.enabled && value >= 0) {\n\t\t\t\tbatcher.insert(BatchGroup.RENDER, value, this.entity);\n\t\t\t}\n\n\t\t\tif (value < 0 && this._batchGroupId >= 0 && this.enabled && this.entity.enabled) {\n\t\t\t\tthis.addToLayers();\n\t\t\t}\n\n\t\t\tthis._batchGroupId = value;\n\t\t}\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tif (this._material !== value) {\n\t\t\tthis._material = value;\n\n\t\t\tif (this._meshInstances && this._type !== 'asset') {\n\t\t\t\tfor (var i = 0; i < this._meshInstances.length; i++) {\n\t\t\t\t\tthis._meshInstances[i].material = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget materialAssets() {\n\t\treturn this._materialReferences.map(function (ref) {\n\t\t\treturn ref.id;\n\t\t});\n\t}\n\n\tset materialAssets(value) {\n\t\tvar i;\n\t\tvalue = value || [];\n\n\t\tif (this._materialReferences.length > value.length) {\n\t\t\tfor (i = value.length; i < this._materialReferences.length; i++) {\n\t\t\t\tthis._materialReferences[i].id = null;\n\t\t\t}\n\n\t\t\tthis._materialReferences.length = value.length;\n\t\t}\n\n\t\tfor (i = 0; i < value.length; i++) {\n\t\t\tif (!this._materialReferences[i]) {\n\t\t\t\tthis._materialReferences.push(new AssetReference(i, this, this.system.app.assets, {\n\t\t\t\t\tadd: this._onMaterialAdded,\n\t\t\t\t\tload: this._onMaterialLoad,\n\t\t\t\t\tremove: this._onMaterialRemove,\n\t\t\t\t\tunload: this._onMaterialUnload\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tif (value[i]) {\n\t\t\t\tvar id = value[i] instanceof Asset ? value[i].id : value[i];\n\n\t\t\t\tif (this._materialReferences[i].id !== id) {\n\t\t\t\t\tthis._materialReferences[i].id = id;\n\t\t\t\t}\n\n\t\t\t\tif (this._materialReferences[i].asset) {\n\t\t\t\t\tthis._onMaterialAdded(i, this, this._materialReferences[i].asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._materialReferences[i].id = null;\n\n\t\t\t\tif (this._meshInstances[i]) {\n\t\t\t\t\tthis._meshInstances[i].material = this.system.defaultMaterial;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._assetReference.id;\n\t}\n\n\tset asset(value) {\n\t\tvar id = value instanceof Asset ? value.id : value;\n\t\tif (this._assetReference.id === id) return;\n\n\t\tif (this._assetReference.asset && this._assetReference.asset.resource) {\n\t\t\tthis._onRenderAssetRemove();\n\t\t}\n\n\t\tthis._assetReference.id = id;\n\n\t\tif (this._assetReference.asset) {\n\t\t\tthis._onRenderAssetAdded();\n\t\t}\n\t}\n\n}\n\nclass RenderComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t\tthis.rootBone = null;\n\t}\n\n}\n\nconst _schema$9 = [{\n\tname: 'rootBone',\n\ttype: 'entity'\n}, 'enabled'];\nconst _properties = ['material', 'meshInstances', 'asset', 'materialAssets', 'castShadows', 'receiveShadows', 'castShadowsLightmap', 'lightmapped', 'lightmapSizeMultiplier', 'renderStyle', 'type', 'layers', 'isStatic', 'batchGroupId'];\n\nclass RenderComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'render';\n\t\tthis.ComponentType = RenderComponent;\n\t\tthis.DataType = RenderComponentData;\n\t\tthis.schema = _schema$9;\n\t\tthis.defaultMaterial = app.scene.defaultMaterial;\n\t\tthis.on('beforeremove', this.onRemove, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tif (_data.batchGroupId === null || _data.batchGroupId === undefined) {\n\t\t\t_data.batchGroupId = -1;\n\t\t}\n\n\t\tif (_data.layers && _data.layers.length) {\n\t\t\t_data.layers = _data.layers.slice(0);\n\t\t}\n\n\t\tfor (var i = 0; i < _properties.length; i++) {\n\t\t\tif (_data.hasOwnProperty(_properties[i])) {\n\t\t\t\tcomponent[_properties[i]] = _data[_properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tif (_data.aabbCenter && _data.aabbHalfExtents) {\n\t\t\tcomponent.customAabb = new BoundingBox(new Vec3(_data.aabbCenter), new Vec3(_data.aabbHalfExtents));\n\t\t}\n\n\t\tsuper.initializeComponentData(component, _data, _schema$9);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tconst data = {};\n\n\t\tfor (let i = 0; i < _properties.length; i++) {\n\t\t\tdata[_properties[i]] = entity.render[_properties[i]];\n\t\t}\n\n\t\tdelete data.meshInstances;\n\t\tconst component = this.addComponent(clone, data);\n\t\tconst srcMeshInstances = entity.render.meshInstances;\n\t\tconst meshes = srcMeshInstances.map(mi => mi.mesh);\n\n\t\tcomponent._onSetMeshes(meshes);\n\n\t\tfor (let m = 0; m < srcMeshInstances.length; m++) {\n\t\t\tcomponent.meshInstances[m].material = srcMeshInstances[m].material;\n\t\t}\n\n\t\tif (entity.render.customAabb) {\n\t\t\tcomponent.customAabb = entity.render.customAabb.clone();\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(RenderComponent.prototype, _schema$9);\n\nconst SIMPLE_PROPERTIES = ['emitterExtents', 'emitterRadius', 'emitterExtentsInner', 'emitterRadiusInner', 'loop', 'initialVelocity', 'animSpeed', 'normalMap', 'particleNormal'];\nconst COMPLEX_PROPERTIES = ['numParticles', 'lifetime', 'rate', 'rate2', 'startAngle', 'startAngle2', 'lighting', 'halfLambert', 'intensity', 'wrap', 'wrapBounds', 'depthWrite', 'noFog', 'sort', 'stretch', 'alignToMotion', 'preWarm', 'emitterShape', 'animTilesX', 'animTilesY', 'animStartFrame', 'animNumFrames', 'animNumAnimations', 'animIndex', 'randomizeAnimIndex', 'animLoop', 'colorMap', 'localSpace', 'screenSpace', 'orientation'];\nconst GRAPH_PROPERTIES = ['scaleGraph', 'scaleGraph2', 'colorGraph', 'colorGraph2', 'alphaGraph', 'alphaGraph2', 'velocityGraph', 'velocityGraph2', 'localVelocityGraph', 'localVelocityGraph2', 'rotationSpeedGraph', 'rotationSpeedGraph2', 'radialSpeedGraph', 'radialSpeedGraph2'];\nconst ASSET_PROPERTIES = ['colorMapAsset', 'normalMapAsset', 'meshAsset', 'renderAsset'];\nvar depthLayer;\n\nclass ParticleSystemComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_colorMapAsset\", this.onSetColorMapAsset, this);\n\t\tthis.on(\"set_normalMapAsset\", this.onSetNormalMapAsset, this);\n\t\tthis.on(\"set_meshAsset\", this.onSetMeshAsset, this);\n\t\tthis.on(\"set_mesh\", this.onSetMesh, this);\n\t\tthis.on(\"set_renderAsset\", this.onSetRenderAsset, this);\n\t\tthis.on(\"set_loop\", this.onSetLoop, this);\n\t\tthis.on(\"set_blendType\", this.onSetBlendType, this);\n\t\tthis.on(\"set_depthSoftening\", this.onSetDepthSoftening, this);\n\t\tthis.on(\"set_layers\", this.onSetLayers, this);\n\t\tSIMPLE_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetSimpleProperty, this);\n\t\t}.bind(this));\n\t\tCOMPLEX_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetComplexProperty, this);\n\t\t}.bind(this));\n\t\tGRAPH_PROPERTIES.forEach(function (prop) {\n\t\t\tthis.on('set_' + prop, this.onSetGraphProperty, this);\n\t\t}.bind(this));\n\t\tthis._requestedDepth = false;\n\t\tthis._drawOrder = 0;\n\t}\n\n\tget drawOrder() {\n\t\treturn this._drawOrder;\n\t}\n\n\tset drawOrder(drawOrder) {\n\t\tthis._drawOrder = drawOrder;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.drawOrder = drawOrder;\n\t\t}\n\t}\n\n\taddModelToLayers() {\n\t\tif (!this.data.model) return;\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t\t\tthis.emitter._layer = layer;\n\t\t}\n\t}\n\n\tremoveModelFromLayers(model) {\n\t\tif (!this.data.model) return;\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t\t}\n\t}\n\n\tonSetLayers(name, oldValue, newValue) {\n\t\tif (!this.data.model) return;\n\t\tvar i, layer;\n\n\t\tfor (i = 0; i < oldValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(oldValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t\t}\n\n\t\tif (!this.enabled || !this.entity.enabled) return;\n\n\t\tfor (i = 0; i < newValue.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(newValue[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t\t}\n\t}\n\n\tonLayersChanged(oldComp, newComp) {\n\t\tthis.addModelToLayers();\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\t}\n\n\tonLayerAdded(layer) {\n\t\tif (!this.data.model) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.addMeshInstances(this.data.model.meshInstances);\n\t}\n\n\tonLayerRemoved(layer) {\n\t\tif (!this.data.model) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances(this.data.model.meshInstances);\n\t}\n\n\t_bindColorMapAsset(asset) {\n\t\tasset.on('load', this._onColorMapAssetLoad, this);\n\t\tasset.on('unload', this._onColorMapAssetUnload, this);\n\t\tasset.on('remove', this._onColorMapAssetRemove, this);\n\t\tasset.on('change', this._onColorMapAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onColorMapAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindColorMapAsset(asset) {\n\t\tasset.off('load', this._onColorMapAssetLoad, this);\n\t\tasset.off('unload', this._onColorMapAssetUnload, this);\n\t\tasset.off('remove', this._onColorMapAssetRemove, this);\n\t\tasset.off('change', this._onColorMapAssetChange, this);\n\t}\n\n\t_onColorMapAssetLoad(asset) {\n\t\tthis.colorMap = asset.resource;\n\t}\n\n\t_onColorMapAssetUnload(asset) {\n\t\tthis.colorMap = null;\n\t}\n\n\t_onColorMapAssetRemove(asset) {\n\t\tthis._onColorMapAssetUnload(asset);\n\t}\n\n\t_onColorMapAssetChange(asset) {}\n\n\tonSetColorMapAsset(name, oldValue, newValue) {\n\t\tvar self = this;\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindColorMapAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.colorMapAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tself._bindColorMapAsset(asset);\n\t\t\t} else {\n\t\t\t\tassets.once(\"add:\" + newValue, function (asset) {\n\t\t\t\t\tself._bindColorMapAsset(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.colorMap = null;\n\t\t}\n\t}\n\n\t_bindNormalMapAsset(asset) {\n\t\tasset.on('load', this._onNormalMapAssetLoad, this);\n\t\tasset.on('unload', this._onNormalMapAssetUnload, this);\n\t\tasset.on('remove', this._onNormalMapAssetRemove, this);\n\t\tasset.on('change', this._onNormalMapAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onNormalMapAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindNormalMapAsset(asset) {\n\t\tasset.off('load', this._onNormalMapAssetLoad, this);\n\t\tasset.off('unload', this._onNormalMapAssetUnload, this);\n\t\tasset.off('remove', this._onNormalMapAssetRemove, this);\n\t\tasset.off('change', this._onNormalMapAssetChange, this);\n\t}\n\n\t_onNormalMapAssetLoad(asset) {\n\t\tthis.normalMap = asset.resource;\n\t}\n\n\t_onNormalMapAssetUnload(asset) {\n\t\tthis.normalMap = null;\n\t}\n\n\t_onNormalMapAssetRemove(asset) {\n\t\tthis._onNormalMapAssetUnload(asset);\n\t}\n\n\t_onNormalMapAssetChange(asset) {}\n\n\tonSetNormalMapAsset(name, oldValue, newValue) {\n\t\tvar self = this;\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindNormalMapAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.normalMapAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tself._bindNormalMapAsset(asset);\n\t\t\t} else {\n\t\t\t\tassets.once(\"add:\" + newValue, function (asset) {\n\t\t\t\t\tself._bindNormalMapAsset(asset);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.normalMap = null;\n\t\t}\n\t}\n\n\t_bindMeshAsset(asset) {\n\t\tasset.on('load', this._onMeshAssetLoad, this);\n\t\tasset.on('unload', this._onMeshAssetUnload, this);\n\t\tasset.on('remove', this._onMeshAssetRemove, this);\n\t\tasset.on('change', this._onMeshAssetChange, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onMeshAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindMeshAsset(asset) {\n\t\tasset.off('load', this._onMeshAssetLoad, this);\n\t\tasset.off('unload', this._onMeshAssetUnload, this);\n\t\tasset.off('remove', this._onMeshAssetRemove, this);\n\t\tasset.off('change', this._onMeshAssetChange, this);\n\t}\n\n\t_onMeshAssetLoad(asset) {\n\t\tthis._onMeshChanged(asset.resource);\n\t}\n\n\t_onMeshAssetUnload(asset) {\n\t\tthis.mesh = null;\n\t}\n\n\t_onMeshAssetRemove(asset) {\n\t\tthis._onMeshAssetUnload(asset);\n\t}\n\n\t_onMeshAssetChange(asset) {}\n\n\tonSetMeshAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindMeshAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.meshAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._bindMeshAsset(asset);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._onMeshChanged(null);\n\t\t}\n\t}\n\n\tonSetMesh(name, oldValue, newValue) {\n\t\tif (!newValue || newValue instanceof Asset || typeof newValue === 'number') {\n\t\t\tthis.meshAsset = newValue;\n\t\t} else {\n\t\t\tthis._onMeshChanged(newValue);\n\t\t}\n\t}\n\n\t_onMeshChanged(mesh) {\n\t\tif (mesh && !(mesh instanceof Mesh)) {\n\t\t\tif (mesh.meshInstances[0]) {\n\t\t\t\tmesh = mesh.meshInstances[0].mesh;\n\t\t\t} else {\n\t\t\t\tmesh = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.data.mesh = mesh;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.mesh = mesh;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tonSetRenderAsset(name, oldValue, newValue) {\n\t\tvar asset;\n\t\tvar assets = this.system.app.assets;\n\n\t\tif (oldValue) {\n\t\t\tasset = assets.get(oldValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._unbindRenderAsset(asset);\n\t\t\t}\n\t\t}\n\n\t\tif (newValue) {\n\t\t\tif (newValue instanceof Asset) {\n\t\t\t\tthis.data.renderAsset = newValue.id;\n\t\t\t\tnewValue = newValue.id;\n\t\t\t}\n\n\t\t\tasset = assets.get(newValue);\n\n\t\t\tif (asset) {\n\t\t\t\tthis._bindRenderAsset(asset);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._onRenderChanged(null);\n\t\t}\n\t}\n\n\t_bindRenderAsset(asset) {\n\t\tasset.on('load', this._onRenderAssetLoad, this);\n\t\tasset.on('unload', this._onRenderAssetUnload, this);\n\t\tasset.on('remove', this._onRenderAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onRenderAssetLoad(asset);\n\t\t} else {\n\t\t\tif (!this.enabled || !this.entity.enabled) return;\n\t\t\tthis.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindRenderAsset(asset) {\n\t\tasset.off('load', this._onRenderAssetLoad, this);\n\t\tasset.off('unload', this._onRenderAssetUnload, this);\n\t\tasset.off('remove', this._onRenderAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tasset.resource.off('set:meshes', this._onRenderSetMeshes, this);\n\t\t}\n\t}\n\n\t_onRenderAssetLoad(asset) {\n\t\tthis._onRenderChanged(asset.resource);\n\t}\n\n\t_onRenderAssetUnload(asset) {\n\t\tthis._onRenderChanged(null);\n\t}\n\n\t_onRenderAssetRemove(asset) {\n\t\tthis._onRenderAssetUnload(asset);\n\t}\n\n\t_onRenderChanged(render) {\n\t\tif (!render) {\n\t\t\tthis._onMeshChanged(null);\n\n\t\t\treturn;\n\t\t}\n\n\t\trender.off('set:meshes', this._onRenderSetMeshes, this);\n\t\trender.on('set:meshes', this._onRenderSetMeshes, this);\n\n\t\tif (render.meshes) {\n\t\t\tthis._onRenderSetMeshes(render.meshes);\n\t\t}\n\t}\n\n\t_onRenderSetMeshes(meshes) {\n\t\tthis._onMeshChanged(meshes && meshes[0]);\n\t}\n\n\tonSetLoop(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetTime();\n\t\t}\n\t}\n\n\tonSetBlendType(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.material.blendType = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\t_requestDepth() {\n\t\tif (this._requestedDepth) return;\n\t\tif (!depthLayer) depthLayer = this.system.app.scene.layers.getLayerById(LAYERID_DEPTH);\n\n\t\tif (depthLayer) {\n\t\t\tdepthLayer.incrementCounter();\n\t\t\tthis._requestedDepth = true;\n\t\t}\n\t}\n\n\t_releaseDepth() {\n\t\tif (!this._requestedDepth) return;\n\n\t\tif (depthLayer) {\n\t\t\tdepthLayer.decrementCounter();\n\t\t\tthis._requestedDepth = false;\n\t\t}\n\t}\n\n\tonSetDepthSoftening(name, oldValue, newValue) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (newValue) {\n\t\t\t\tif (this.enabled && this.entity.enabled) this._requestDepth();\n\t\t\t\tif (this.emitter) this.emitter[name] = newValue;\n\t\t\t} else {\n\t\t\t\tif (this.enabled && this.entity.enabled) this._releaseDepth();\n\t\t\t\tif (this.emitter) this.emitter[name] = newValue;\n\t\t\t}\n\n\t\t\tif (this.emitter) {\n\t\t\t\tthis.reset();\n\t\t\t\tthis.emitter.resetMaterial();\n\t\t\t\tthis.rebuild();\n\t\t\t}\n\t\t}\n\t}\n\n\tonSetSimpleProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t}\n\t}\n\n\tonSetComplexProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.resetMaterial();\n\t\t\tthis.rebuild();\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\tonSetGraphProperty(name, oldValue, newValue) {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter[name] = newValue;\n\t\t\tthis.emitter.rebuildGraphs();\n\t\t\tthis.emitter.resetMaterial();\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tvar data = this.data;\n\n\t\tfor (var i = 0, len = ASSET_PROPERTIES.length; i < len; i++) {\n\t\t\tvar asset = data[ASSET_PROPERTIES[i]];\n\n\t\t\tif (asset) {\n\t\t\t\tif (!(asset instanceof Asset)) {\n\t\t\t\t\tvar id = parseInt(asset, 10);\n\n\t\t\t\t\tif (id >= 0) {\n\t\t\t\t\t\tasset = this.system.app.assets.get(asset);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (asset && !asset.resource) {\n\t\t\t\t\tthis.system.app.assets.load(asset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.emitter) {\n\t\t\tvar mesh = data.mesh;\n\t\t\tif (!(mesh instanceof Mesh)) mesh = null;\n\t\t\tthis.emitter = new ParticleEmitter(this.system.app.graphicsDevice, {\n\t\t\t\tnumParticles: data.numParticles,\n\t\t\t\temitterExtents: data.emitterExtents,\n\t\t\t\temitterExtentsInner: data.emitterExtentsInner,\n\t\t\t\temitterRadius: data.emitterRadius,\n\t\t\t\temitterRadiusInner: data.emitterRadiusInner,\n\t\t\t\temitterShape: data.emitterShape,\n\t\t\t\tinitialVelocity: data.initialVelocity,\n\t\t\t\twrap: data.wrap,\n\t\t\t\tlocalSpace: data.localSpace,\n\t\t\t\tscreenSpace: data.screenSpace,\n\t\t\t\twrapBounds: data.wrapBounds,\n\t\t\t\tlifetime: data.lifetime,\n\t\t\t\trate: data.rate,\n\t\t\t\trate2: data.rate2,\n\t\t\t\torientation: data.orientation,\n\t\t\t\tparticleNormal: data.particleNormal,\n\t\t\t\tanimTilesX: data.animTilesX,\n\t\t\t\tanimTilesY: data.animTilesY,\n\t\t\t\tanimStartFrame: data.animStartFrame,\n\t\t\t\tanimNumFrames: data.animNumFrames,\n\t\t\t\tanimNumAnimations: data.animNumAnimations,\n\t\t\t\tanimIndex: data.animIndex,\n\t\t\t\trandomizeAnimIndex: data.randomizeAnimIndex,\n\t\t\t\tanimSpeed: data.animSpeed,\n\t\t\t\tanimLoop: data.animLoop,\n\t\t\t\tstartAngle: data.startAngle,\n\t\t\t\tstartAngle2: data.startAngle2,\n\t\t\t\tscaleGraph: data.scaleGraph,\n\t\t\t\tscaleGraph2: data.scaleGraph2,\n\t\t\t\tcolorGraph: data.colorGraph,\n\t\t\t\tcolorGraph2: data.colorGraph2,\n\t\t\t\talphaGraph: data.alphaGraph,\n\t\t\t\talphaGraph2: data.alphaGraph2,\n\t\t\t\tlocalVelocityGraph: data.localVelocityGraph,\n\t\t\t\tlocalVelocityGraph2: data.localVelocityGraph2,\n\t\t\t\tvelocityGraph: data.velocityGraph,\n\t\t\t\tvelocityGraph2: data.velocityGraph2,\n\t\t\t\trotationSpeedGraph: data.rotationSpeedGraph,\n\t\t\t\trotationSpeedGraph2: data.rotationSpeedGraph2,\n\t\t\t\tradialSpeedGraph: data.radialSpeedGraph,\n\t\t\t\tradialSpeedGraph2: data.radialSpeedGraph2,\n\t\t\t\tcolorMap: data.colorMap,\n\t\t\t\tnormalMap: data.normalMap,\n\t\t\t\tloop: data.loop,\n\t\t\t\tpreWarm: data.preWarm,\n\t\t\t\tsort: data.sort,\n\t\t\t\tstretch: data.stretch,\n\t\t\t\talignToMotion: data.alignToMotion,\n\t\t\t\tlighting: data.lighting,\n\t\t\t\thalfLambert: data.halfLambert,\n\t\t\t\tintensity: data.intensity,\n\t\t\t\tdepthSoftening: data.depthSoftening,\n\t\t\t\tscene: this.system.app.scene,\n\t\t\t\tmesh: mesh,\n\t\t\t\tdepthWrite: data.depthWrite,\n\t\t\t\tnoFog: data.noFog,\n\t\t\t\tnode: this.entity,\n\t\t\t\tblendType: data.blendType\n\t\t\t});\n\t\t\tthis.emitter.meshInstance.node = this.entity;\n\t\t\tthis.emitter.drawOrder = this.drawOrder;\n\t\t\tthis.psys = new Model();\n\t\t\tthis.psys.graph = this.entity;\n\t\t\tthis.psys.emitter = this.emitter;\n\t\t\tthis.psys.meshInstances = [this.emitter.meshInstance];\n\t\t\tdata.model = this.psys;\n\t\t\tthis.emitter.psys = this.psys;\n\n\t\t\tif (!data.autoPlay) {\n\t\t\t\tthis.pause();\n\t\t\t\tthis.emitter.meshInstance.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tif (data.model && this.emitter.colorMap) {\n\t\t\tthis.addModelToLayers();\n\t\t}\n\n\t\tthis.system.app.scene.on(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.on(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.on(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled && data.depthSoftening) {\n\t\t\tthis._requestDepth();\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.system.app.scene.off(\"set:layers\", this.onLayersChanged, this);\n\n\t\tif (this.system.app.scene.layers) {\n\t\t\tthis.system.app.scene.layers.off(\"add\", this.onLayerAdded, this);\n\t\t\tthis.system.app.scene.layers.off(\"remove\", this.onLayerRemoved, this);\n\t\t}\n\n\t\tif (this.data.model) {\n\t\t\tthis.removeModelFromLayers();\n\t\t\tif (this.data.depthSoftening) this._releaseDepth();\n\t\t}\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.camera = null;\n\t\t}\n\t}\n\n\tonBeforeRemove() {\n\t\tif (this.enabled) {\n\t\t\tthis.enabled = false;\n\t\t}\n\n\t\tvar data = this.data;\n\n\t\tif (data.model) {\n\t\t\tthis.entity.removeChild(data.model.getGraph());\n\t\t\tdata.model.destroy();\n\t\t\tdata.model = null;\n\t\t}\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.destroy();\n\t\t\tthis.emitter = null;\n\t\t}\n\n\t\tfor (var i = 0; i < ASSET_PROPERTIES.length; i++) {\n\t\t\tvar prop = ASSET_PROPERTIES[i];\n\n\t\t\tif (data[prop]) {\n\t\t\t\tthis[prop] = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.off();\n\t}\n\n\treset() {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.reset();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.loop = false;\n\t\t\tthis.emitter.resetTime();\n\t\t\tthis.emitter.addTime(0, true);\n\t\t}\n\t}\n\n\tpause() {\n\t\tthis.data.paused = true;\n\t}\n\n\tunpause() {\n\t\tthis.data.paused = false;\n\t}\n\n\tplay() {\n\t\tthis.data.paused = false;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.meshInstance.visible = true;\n\t\t\tthis.emitter.loop = this.data.loop;\n\t\t\tthis.emitter.resetTime();\n\t\t}\n\t}\n\n\tisPlaying() {\n\t\tif (this.data.paused) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.emitter && this.emitter.loop) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn Date.now() <= this.emitter.endTime;\n\t}\n\n\trebuild() {\n\t\tvar enabled = this.enabled;\n\t\tthis.enabled = false;\n\n\t\tif (this.emitter) {\n\t\t\tthis.emitter.rebuild();\n\t\t\tthis.emitter.meshInstance.node = this.entity;\n\t\t\tthis.data.model.meshInstances = [this.emitter.meshInstance];\n\t\t}\n\n\t\tthis.enabled = enabled;\n\t}\n\n}\n\nclass ParticleSystemComponentData {\n\tconstructor() {\n\t\tthis.numParticles = 1;\n\t\tthis.rate = 1;\n\t\tthis.rate2 = null;\n\t\tthis.startAngle = 0;\n\t\tthis.startAngle2 = null;\n\t\tthis.lifetime = 50;\n\t\tthis.emitterExtents = new Vec3();\n\t\tthis.emitterExtentsInner = new Vec3();\n\t\tthis.emitterRadius = 0;\n\t\tthis.emitterRadiusInner = 0;\n\t\tthis.emitterShape = EMITTERSHAPE_BOX;\n\t\tthis.initialVelocity = 0;\n\t\tthis.wrapBounds = new Vec3();\n\t\tthis.localSpace = false;\n\t\tthis.screenSpace = false;\n\t\tthis.colorMap = null;\n\t\tthis.colorMapAsset = null;\n\t\tthis.normalMap = null;\n\t\tthis.normalMapAsset = null;\n\t\tthis.loop = true;\n\t\tthis.preWarm = false;\n\t\tthis.sort = 0;\n\t\tthis.mode = PARTICLEMODE_GPU;\n\t\tthis.scene = null;\n\t\tthis.lighting = false;\n\t\tthis.halfLambert = false;\n\t\tthis.intensity = 1;\n\t\tthis.stretch = 0.0;\n\t\tthis.alignToMotion = false;\n\t\tthis.depthSoftening = 0;\n\t\tthis.meshAsset = null;\n\t\tthis.mesh = null;\n\t\tthis.depthWrite = false;\n\t\tthis.noFog = false;\n\t\tthis.orientation = PARTICLEORIENTATION_SCREEN;\n\t\tthis.particleNormal = new Vec3(0, 1, 0);\n\t\tthis.animTilesX = 1;\n\t\tthis.animTilesY = 1;\n\t\tthis.animStartFrame = 0;\n\t\tthis.animNumFrames = 1;\n\t\tthis.animNumAnimations = 1;\n\t\tthis.animIndex = 0;\n\t\tthis.randomizeAnimIndex = false;\n\t\tthis.animSpeed = 1;\n\t\tthis.animLoop = true;\n\t\tthis.scaleGraph = null;\n\t\tthis.scaleGraph2 = null;\n\t\tthis.colorGraph = null;\n\t\tthis.colorGraph2 = null;\n\t\tthis.alphaGraph = null;\n\t\tthis.alphaGraph2 = null;\n\t\tthis.localVelocityGraph = null;\n\t\tthis.localVelocityGraph2 = null;\n\t\tthis.velocityGraph = null;\n\t\tthis.velocityGraph2 = null;\n\t\tthis.rotationSpeedGraph = null;\n\t\tthis.rotationSpeedGraph2 = null;\n\t\tthis.radialSpeedGraph = null;\n\t\tthis.radialSpeedGraph2 = null;\n\t\tthis.blendType = BLEND_NORMAL;\n\t\tthis.model = null;\n\t\tthis.enabled = true;\n\t\tthis.paused = false;\n\t\tthis.autoPlay = true;\n\t\tthis.layers = [LAYERID_WORLD];\n\t}\n\n}\n\nconst _schema$8 = ['enabled', 'autoPlay', 'numParticles', 'lifetime', 'rate', 'rate2', 'startAngle', 'startAngle2', 'loop', 'preWarm', 'lighting', 'halfLambert', 'intensity', 'depthWrite', 'noFog', 'depthSoftening', 'sort', 'blendType', 'stretch', 'alignToMotion', 'emitterShape', 'emitterExtents', 'emitterExtentsInner', 'emitterRadius', 'emitterRadiusInner', 'initialVelocity', 'wrap', 'wrapBounds', 'localSpace', 'screenSpace', 'colorMapAsset', 'normalMapAsset', 'mesh', 'meshAsset', 'renderAsset', 'orientation', 'particleNormal', 'localVelocityGraph', 'localVelocityGraph2', 'velocityGraph', 'velocityGraph2', 'rotationSpeedGraph', 'rotationSpeedGraph2', 'radialSpeedGraph', 'radialSpeedGraph2', 'scaleGraph', 'scaleGraph2', 'colorGraph', 'colorGraph2', 'alphaGraph', 'alphaGraph2', 'colorMap', 'normalMap', 'animTilesX', 'animTilesY', 'animStartFrame', 'animNumFrames', 'animNumAnimations', 'animIndex', 'randomizeAnimIndex', 'animSpeed', 'animLoop', 'layers'];\n\nclass ParticleSystemComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'particlesystem';\n\t\tthis.ComponentType = ParticleSystemComponent;\n\t\tthis.DataType = ParticleSystemComponentData;\n\t\tthis.schema = _schema$8;\n\t\tthis.propertyTypes = {\n\t\t\temitterExtents: 'vec3',\n\t\t\temitterExtentsInner: 'vec3',\n\t\t\tparticleNormal: 'vec3',\n\t\t\twrapBounds: 'vec3',\n\t\t\tlocalVelocityGraph: 'curveset',\n\t\t\tlocalVelocityGraph2: 'curveset',\n\t\t\tvelocityGraph: 'curveset',\n\t\t\tvelocityGraph2: 'curveset',\n\t\t\tcolorGraph: 'curveset',\n\t\t\tcolorGraph2: 'curveset',\n\t\t\talphaGraph: 'curve',\n\t\t\talphaGraph2: 'curve',\n\t\t\trotationSpeedGraph: 'curve',\n\t\t\trotationSpeedGraph2: 'curve',\n\t\t\tradialSpeedGraph: 'curve',\n\t\t\tradialSpeedGraph2: 'curve',\n\t\t\tscaleGraph: 'curve',\n\t\t\tscaleGraph2: 'curve'\n\t\t};\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, _data, properties) {\n\t\tvar data = {};\n\t\tproperties = [];\n\t\tvar types = this.propertyTypes;\n\t\tvar t;\n\n\t\tif (_data.mesh instanceof Asset || typeof _data.mesh === 'number') {\n\t\t\t_data.meshAsset = _data.mesh;\n\t\t\tdelete _data.mesh;\n\t\t}\n\n\t\tfor (var prop in _data) {\n\t\t\tif (_data.hasOwnProperty(prop)) {\n\t\t\t\tproperties.push(prop);\n\t\t\t\tdata[prop] = _data[prop];\n\t\t\t}\n\n\t\t\tif (types[prop] === 'vec3') {\n\t\t\t\tif (Array.isArray(data[prop])) {\n\t\t\t\t\tdata[prop] = new Vec3(data[prop][0], data[prop][1], data[prop][2]);\n\t\t\t\t}\n\t\t\t} else if (types[prop] === 'curve') {\n\t\t\t\tif (!(data[prop] instanceof Curve)) {\n\t\t\t\t\tt = data[prop].type;\n\t\t\t\t\tdata[prop] = new Curve(data[prop].keys);\n\t\t\t\t\tdata[prop].type = t;\n\t\t\t\t}\n\t\t\t} else if (types[prop] === 'curveset') {\n\t\t\t\tif (!(data[prop] instanceof CurveSet)) {\n\t\t\t\t\tt = data[prop].type;\n\t\t\t\t\tdata[prop] = new CurveSet(data[prop].keys);\n\t\t\t\t\tdata[prop].type = t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\t\tdata.layers = data.layers.slice(0);\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.particlesystem.data;\n\t\tvar schema = this.schema;\n\t\tvar data = {};\n\n\t\tfor (var i = 0, len = schema.length; i < len; i++) {\n\t\t\tvar prop = schema[i];\n\t\t\tvar sourceProp = source[prop];\n\n\t\t\tif (sourceProp instanceof Vec3 || sourceProp instanceof Curve || sourceProp instanceof CurveSet) {\n\t\t\t\tsourceProp = sourceProp.clone();\n\t\t\t\tdata[prop] = sourceProp;\n\t\t\t} else if (prop === \"layers\") {\n\t\t\t\tdata.layers = source.layers.slice(0);\n\t\t\t} else {\n\t\t\t\tif (sourceProp !== null && sourceProp !== undefined) {\n\t\t\t\t\tdata[prop] = sourceProp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\t\tvar numSteps, i, j, c;\n\t\tvar stats = this.app.stats.particles;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tc = components[id];\n\t\t\t\tvar entity = c.entity;\n\t\t\t\tvar data = c.data;\n\n\t\t\t\tif (data.enabled && entity.enabled) {\n\t\t\t\t\tvar emitter = data.model.emitter;\n\t\t\t\t\tif (!emitter.meshInstance.visible) continue;\n\n\t\t\t\t\tif (emitter.lighting) {\n\t\t\t\t\t\tvar layer, lightCube;\n\t\t\t\t\t\tvar layers = data.layers;\n\n\t\t\t\t\t\tfor (i = 0; i < layers.length; i++) {\n\t\t\t\t\t\t\tlayer = this.app.scene.layers.getLayerById(layers[i]);\n\t\t\t\t\t\t\tif (!layer) continue;\n\n\t\t\t\t\t\t\tif (!layer._lightCube) {\n\t\t\t\t\t\t\t\tlayer._lightCube = new Float32Array(6 * 3);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlightCube = layer._lightCube;\n\n\t\t\t\t\t\t\tfor (i = 0; i < 6; i++) {\n\t\t\t\t\t\t\t\tlightCube[i * 3] = this.app.scene.ambientLight.r;\n\t\t\t\t\t\t\t\tlightCube[i * 3 + 1] = this.app.scene.ambientLight.g;\n\t\t\t\t\t\t\t\tlightCube[i * 3 + 2] = this.app.scene.ambientLight.b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar dirs = layer._splitLights[LIGHTTYPE_DIRECTIONAL];\n\n\t\t\t\t\t\t\tfor (j = 0; j < dirs.length; j++) {\n\t\t\t\t\t\t\t\tfor (c = 0; c < 6; c++) {\n\t\t\t\t\t\t\t\t\tvar weight = Math.max(emitter.lightCubeDir[c].dot(dirs[j]._direction), 0) * dirs[j]._intensity;\n\n\t\t\t\t\t\t\t\t\tlightCube[c * 3] += dirs[j]._color.r * weight;\n\t\t\t\t\t\t\t\t\tlightCube[c * 3 + 1] += dirs[j]._color.g * weight;\n\t\t\t\t\t\t\t\t\tlightCube[c * 3 + 2] += dirs[j]._color.b * weight;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temitter.constantLightCube.setValue(lightCube);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!data.paused) {\n\t\t\t\t\t\temitter.simTime += dt;\n\n\t\t\t\t\t\tif (emitter.simTime > emitter.fixedTimeStep) {\n\t\t\t\t\t\t\tnumSteps = Math.floor(emitter.simTime / emitter.fixedTimeStep);\n\t\t\t\t\t\t\temitter.simTime -= numSteps * emitter.fixedTimeStep;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (numSteps) {\n\t\t\t\t\t\t\tnumSteps = Math.min(numSteps, emitter.maxSubSteps);\n\n\t\t\t\t\t\t\tfor (i = 0; i < numSteps; i++) {\n\t\t\t\t\t\t\t\temitter.addTime(emitter.fixedTimeStep, false);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstats._updatesPerFrame += numSteps;\n\t\t\t\t\t\t\tstats._frameTime += emitter._addTimeTime;\n\t\t\t\t\t\t\temitter._addTimeTime = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temitter.finishFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ParticleSystemComponent.prototype, _schema$8);\n\nclass ObjectPool {\n\tconstructor(constructorFunc, size) {\n\t\tthis._constructor = constructorFunc;\n\t\tthis._pool = [];\n\t\tthis._count = 0;\n\n\t\tthis._resize(size);\n\t}\n\n\t_resize(size) {\n\t\tif (size > this._pool.length) {\n\t\t\tfor (let i = this._pool.length; i < size; i++) {\n\t\t\t\tthis._pool[i] = new this._constructor();\n\t\t\t}\n\t\t}\n\t}\n\n\tallocate() {\n\t\tif (this._count >= this._pool.length) {\n\t\t\tthis._resize(this._pool.length * 2);\n\t\t}\n\n\t\treturn this._pool[this._count++];\n\t}\n\n\tfreeAll() {\n\t\tthis._count = 0;\n\t}\n\n}\n\nvar ammoTransform;\nvar ammoVec1, ammoVec2, ammoQuat, ammoOrigin;\n\nclass RigidBodyComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\n\t\tif (typeof Ammo !== 'undefined' && !ammoTransform) {\n\t\t\tammoTransform = new Ammo.btTransform();\n\t\t\tammoVec1 = new Ammo.btVector3();\n\t\t\tammoVec2 = new Ammo.btVector3();\n\t\t\tammoQuat = new Ammo.btQuaternion();\n\t\t\tammoOrigin = new Ammo.btVector3(0, 0, 0);\n\t\t}\n\n\t\tthis._angularDamping = 0;\n\t\tthis._angularFactor = new Vec3(1, 1, 1);\n\t\tthis._angularVelocity = new Vec3();\n\t\tthis._body = null;\n\t\tthis._friction = 0.5;\n\t\tthis._group = BODYGROUP_STATIC;\n\t\tthis._linearDamping = 0;\n\t\tthis._linearFactor = new Vec3(1, 1, 1);\n\t\tthis._linearVelocity = new Vec3();\n\t\tthis._mask = BODYMASK_NOT_STATIC;\n\t\tthis._mass = 1;\n\t\tthis._restitution = 0;\n\t\tthis._rollingFriction = 0;\n\t\tthis._simulationEnabled = false;\n\t\tthis._type = BODYTYPE_STATIC;\n\t}\n\n\tget angularDamping() {\n\t\treturn this._angularDamping;\n\t}\n\n\tset angularDamping(damping) {\n\t\tif (this._angularDamping !== damping) {\n\t\t\tthis._angularDamping = damping;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setDamping(this._linearDamping, damping);\n\t\t\t}\n\t\t}\n\t}\n\n\tget angularFactor() {\n\t\treturn this._angularFactor;\n\t}\n\n\tset angularFactor(factor) {\n\t\tif (!this._angularFactor.equals(factor)) {\n\t\t\tthis._angularFactor.copy(factor);\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tammoVec1.setValue(factor.x, factor.y, factor.z);\n\n\t\t\t\tthis._body.setAngularFactor(ammoVec1);\n\t\t\t}\n\t\t}\n\t}\n\n\tget angularVelocity() {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tconst velocity = this._body.getAngularVelocity();\n\n\t\t\tthis._angularVelocity.set(velocity.x(), velocity.y(), velocity.z());\n\t\t}\n\n\t\treturn this._angularVelocity;\n\t}\n\n\tset angularVelocity(velocity) {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tthis._body.activate();\n\n\t\t\tammoVec1.setValue(velocity.x, velocity.y, velocity.z);\n\n\t\t\tthis._body.setAngularVelocity(ammoVec1);\n\n\t\t\tthis._angularVelocity.copy(velocity);\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this._body;\n\t}\n\n\tset body(body) {\n\t\tif (this._body !== body) {\n\t\t\tthis._body = body;\n\n\t\t\tif (body && this._simulationEnabled) {\n\t\t\t\tbody.activate();\n\t\t\t}\n\t\t}\n\t}\n\n\tget friction() {\n\t\treturn this._friction;\n\t}\n\n\tset friction(friction) {\n\t\tif (this._friction !== friction) {\n\t\t\tthis._friction = friction;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setFriction(friction);\n\t\t\t}\n\t\t}\n\t}\n\n\tget group() {\n\t\treturn this._group;\n\t}\n\n\tset group(group) {\n\t\tif (this._group !== group) {\n\t\t\tthis._group = group;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.disableSimulation();\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearDamping() {\n\t\treturn this._linearDamping;\n\t}\n\n\tset linearDamping(damping) {\n\t\tif (this._linearDamping !== damping) {\n\t\t\tthis._linearDamping = damping;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setDamping(damping, this._angularDamping);\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearFactor() {\n\t\treturn this._linearFactor;\n\t}\n\n\tset linearFactor(factor) {\n\t\tif (!this._linearFactor.equals(factor)) {\n\t\t\tthis._linearFactor.copy(factor);\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tammoVec1.setValue(factor.x, factor.y, factor.z);\n\n\t\t\t\tthis._body.setLinearFactor(ammoVec1);\n\t\t\t}\n\t\t}\n\t}\n\n\tget linearVelocity() {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tconst velocity = this._body.getLinearVelocity();\n\n\t\t\tthis._linearVelocity.set(velocity.x(), velocity.y(), velocity.z());\n\t\t}\n\n\t\treturn this._linearVelocity;\n\t}\n\n\tset linearVelocity(velocity) {\n\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\tthis._body.activate();\n\n\t\t\tammoVec1.setValue(velocity.x, velocity.y, velocity.z);\n\n\t\t\tthis._body.setLinearVelocity(ammoVec1);\n\n\t\t\tthis._linearVelocity.copy(velocity);\n\t\t}\n\t}\n\n\tget mask() {\n\t\treturn this._mask;\n\t}\n\n\tset mask(mask) {\n\t\tif (this._mask !== mask) {\n\t\t\tthis._mask = mask;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.disableSimulation();\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tget mass() {\n\t\treturn this._mass;\n\t}\n\n\tset mass(mass) {\n\t\tif (this._mass !== mass) {\n\t\t\tthis._mass = mass;\n\n\t\t\tif (this._body && this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tconst enabled = this.enabled && this.entity.enabled;\n\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.disableSimulation();\n\t\t\t\t}\n\n\t\t\t\tthis._body.getCollisionShape().calculateLocalInertia(mass, ammoVec1);\n\n\t\t\t\tthis._body.setMassProps(mass, ammoVec1);\n\n\t\t\t\tthis._body.updateInertiaTensor();\n\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enableSimulation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget restitution() {\n\t\treturn this._restitution;\n\t}\n\n\tset restitution(restitution) {\n\t\tif (this._restitution !== restitution) {\n\t\t\tthis._restitution = restitution;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setRestitution(restitution);\n\t\t\t}\n\t\t}\n\t}\n\n\tget rollingFriction() {\n\t\treturn this._rollingFriction;\n\t}\n\n\tset rollingFriction(friction) {\n\t\tif (this._rollingFriction !== friction) {\n\t\t\tthis._rollingFriction = friction;\n\n\t\t\tif (this._body) {\n\t\t\t\tthis._body.setRollingFriction(friction);\n\t\t\t}\n\t\t}\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(type) {\n\t\tif (this._type !== type) {\n\t\t\tthis._type = type;\n\t\t\tthis.disableSimulation();\n\n\t\t\tswitch (type) {\n\t\t\t\tcase BODYTYPE_DYNAMIC:\n\t\t\t\t\tthis._group = BODYGROUP_DYNAMIC;\n\t\t\t\t\tthis._mask = BODYMASK_ALL;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BODYTYPE_KINEMATIC:\n\t\t\t\t\tthis._group = BODYGROUP_KINEMATIC;\n\t\t\t\t\tthis._mask = BODYMASK_ALL;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase BODYTYPE_STATIC:\n\t\t\t\tdefault:\n\t\t\t\t\tthis._group = BODYGROUP_STATIC;\n\t\t\t\t\tthis._mask = BODYMASK_NOT_STATIC;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.createBody();\n\t\t}\n\t}\n\n\tcreateBody() {\n\t\tconst entity = this.entity;\n\t\tlet shape;\n\n\t\tif (entity.collision) {\n\t\t\tshape = entity.collision.shape;\n\n\t\t\tif (entity.trigger) {\n\t\t\t\tentity.trigger.destroy();\n\t\t\t\tdelete entity.trigger;\n\t\t\t}\n\t\t}\n\n\t\tif (shape) {\n\t\t\tif (this._body) this.system.onRemove(entity, this);\n\t\t\tconst mass = this._type === BODYTYPE_DYNAMIC ? this._mass : 0;\n\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tconst body = this.system.createBody(mass, shape, ammoTransform);\n\t\t\tbody.setRestitution(this._restitution);\n\t\t\tbody.setFriction(this._friction);\n\t\t\tbody.setRollingFriction(this._rollingFriction);\n\t\t\tbody.setDamping(this._linearDamping, this._angularDamping);\n\n\t\t\tif (this._type === BODYTYPE_DYNAMIC) {\n\t\t\t\tconst linearFactor = this._linearFactor;\n\t\t\t\tammoVec1.setValue(linearFactor.x, linearFactor.y, linearFactor.z);\n\t\t\t\tbody.setLinearFactor(ammoVec1);\n\t\t\t\tconst angularFactor = this._angularFactor;\n\t\t\t\tammoVec1.setValue(angularFactor.x, angularFactor.y, angularFactor.z);\n\t\t\t\tbody.setAngularFactor(ammoVec1);\n\t\t\t} else if (this._type === BODYTYPE_KINEMATIC) {\n\t\t\t\tbody.setCollisionFlags(body.getCollisionFlags() | BODYFLAG_KINEMATIC_OBJECT);\n\t\t\t\tbody.setActivationState(BODYSTATE_DISABLE_DEACTIVATION);\n\t\t\t}\n\n\t\t\tbody.entity = entity;\n\t\t\tthis.body = body;\n\n\t\t\tif (this.enabled && entity.enabled) {\n\t\t\t\tthis.enableSimulation();\n\t\t\t}\n\t\t}\n\t}\n\n\tisActive() {\n\t\treturn this._body ? this._body.isActive() : false;\n\t}\n\n\tactivate() {\n\t\tif (this._body) {\n\t\t\tthis._body.activate();\n\t\t}\n\t}\n\n\tenableSimulation() {\n\t\tconst entity = this.entity;\n\n\t\tif (entity.collision && entity.collision.enabled && !this._simulationEnabled) {\n\t\t\tconst body = this._body;\n\n\t\t\tif (body) {\n\t\t\t\tthis.system.addBody(body, this._group, this._mask);\n\n\t\t\t\tswitch (this._type) {\n\t\t\t\t\tcase BODYTYPE_DYNAMIC:\n\t\t\t\t\t\tthis.system._dynamic.push(this);\n\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\t\t\t\t\tthis.syncEntityToBody();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase BODYTYPE_KINEMATIC:\n\t\t\t\t\t\tthis.system._kinematic.push(this);\n\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_DISABLE_DEACTIVATION);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase BODYTYPE_STATIC:\n\t\t\t\t\t\tbody.forceActivationState(BODYSTATE_ACTIVE_TAG);\n\t\t\t\t\t\tthis.syncEntityToBody();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (entity.collision.type === 'compound') {\n\t\t\t\t\tthis.system._compounds.push(entity.collision);\n\t\t\t\t}\n\n\t\t\t\tbody.activate();\n\t\t\t\tthis._simulationEnabled = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableSimulation() {\n\t\tconst body = this._body;\n\n\t\tif (body && this._simulationEnabled) {\n\t\t\tconst system = this.system;\n\n\t\t\tlet idx = system._compounds.indexOf(this.entity.collision);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._compounds.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = system._dynamic.indexOf(this);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._dynamic.splice(idx, 1);\n\t\t\t}\n\n\t\t\tidx = system._kinematic.indexOf(this);\n\n\t\t\tif (idx > -1) {\n\t\t\t\tsystem._kinematic.splice(idx, 1);\n\t\t\t}\n\n\t\t\tsystem.removeBody(body);\n\t\t\tbody.forceActivationState(BODYSTATE_DISABLE_SIMULATION);\n\t\t\tthis._simulationEnabled = false;\n\t\t}\n\t}\n\n\tapplyForce() {\n\t\tlet x, y, z;\n\t\tlet px, py, pz;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tpx = arguments[1].x;\n\t\t\t\tpy = arguments[1].y;\n\t\t\t\tpz = arguments[1].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tcase 6:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tpx = arguments[3];\n\t\t\t\tpy = arguments[4];\n\t\t\t\tpz = arguments[5];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\n\t\t\tif (px !== undefined) {\n\t\t\t\tammoVec2.setValue(px, py, pz);\n\t\t\t\tbody.applyForce(ammoVec1, ammoVec2);\n\t\t\t} else {\n\t\t\t\tbody.applyForce(ammoVec1, ammoOrigin);\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyTorque() {\n\t\tlet x, y, z;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\t\t\tbody.applyTorque(ammoVec1);\n\t\t}\n\t}\n\n\tapplyImpulse() {\n\t\tlet x, y, z;\n\t\tlet px, py, pz;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tpx = arguments[1].x;\n\t\t\t\tpy = arguments[1].y;\n\t\t\t\tpz = arguments[1].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tcase 6:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tpx = arguments[3];\n\t\t\t\tpy = arguments[4];\n\t\t\t\tpz = arguments[5];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\n\t\t\tif (px !== undefined) {\n\t\t\t\tammoVec2.setValue(px, py, pz);\n\t\t\t\tbody.applyImpulse(ammoVec1, ammoVec2);\n\t\t\t} else {\n\t\t\t\tbody.applyImpulse(ammoVec1, ammoOrigin);\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyTorqueImpulse() {\n\t\tlet x, y, z;\n\n\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tx = arguments[0].x;\n\t\t\t\ty = arguments[0].y;\n\t\t\t\tz = arguments[0].z;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tx = arguments[0];\n\t\t\t\ty = arguments[1];\n\t\t\t\tz = arguments[2];\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tbody.activate();\n\t\t\tammoVec1.setValue(x, y, z);\n\t\t\tbody.applyTorqueImpulse(ammoVec1);\n\t\t}\n\t}\n\n\tisStatic() {\n\t\treturn this._type === BODYTYPE_STATIC;\n\t}\n\n\tisStaticOrKinematic() {\n\t\treturn this._type === BODYTYPE_STATIC || this._type === BODYTYPE_KINEMATIC;\n\t}\n\n\tisKinematic() {\n\t\treturn this._type === BODYTYPE_KINEMATIC;\n\t}\n\n\t_getEntityTransform(transform) {\n\t\tconst entity = this.entity;\n\t\tconst pos = entity.getPosition();\n\t\tconst rot = entity.getRotation();\n\t\tammoVec1.setValue(pos.x, pos.y, pos.z);\n\t\tammoQuat.setValue(rot.x, rot.y, rot.z, rot.w);\n\t\ttransform.setOrigin(ammoVec1);\n\t\ttransform.setRotation(ammoQuat);\n\t}\n\n\tsyncEntityToBody() {\n\t\tconst body = this._body;\n\n\t\tif (body) {\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tbody.setWorldTransform(ammoTransform);\n\n\t\t\tif (this._type === BODYTYPE_KINEMATIC) {\n\t\t\t\tconst motionState = body.getMotionState();\n\n\t\t\t\tif (motionState) {\n\t\t\t\t\tmotionState.setWorldTransform(ammoTransform);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbody.activate();\n\t\t}\n\t}\n\n\t_updateDynamic() {\n\t\tconst body = this._body;\n\n\t\tif (body.isActive()) {\n\t\t\tconst motionState = body.getMotionState();\n\n\t\t\tif (motionState) {\n\t\t\t\tmotionState.getWorldTransform(ammoTransform);\n\t\t\t\tconst p = ammoTransform.getOrigin();\n\t\t\t\tconst q = ammoTransform.getRotation();\n\t\t\t\tthis.entity.setPosition(p.x(), p.y(), p.z());\n\t\t\t\tthis.entity.setRotation(q.x(), q.y(), q.z(), q.w());\n\t\t\t}\n\t\t}\n\t}\n\n\t_updateKinematic() {\n\t\tconst motionState = this._body.getMotionState();\n\n\t\tif (motionState) {\n\t\t\tthis._getEntityTransform(ammoTransform);\n\n\t\t\tmotionState.setWorldTransform(ammoTransform);\n\t\t}\n\t}\n\n\tteleport() {\n\t\tif (arguments.length < 3) {\n\t\t\tif (arguments[0]) {\n\t\t\t\tthis.entity.setPosition(arguments[0]);\n\t\t\t}\n\n\t\t\tif (arguments[1]) {\n\t\t\t\tif (arguments[1] instanceof Quat) {\n\t\t\t\t\tthis.entity.setRotation(arguments[1]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.entity.setEulerAngles(arguments[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (arguments.length === 6) {\n\t\t\t\tthis.entity.setEulerAngles(arguments[3], arguments[4], arguments[5]);\n\t\t\t}\n\n\t\t\tthis.entity.setPosition(arguments[0], arguments[1], arguments[2]);\n\t\t}\n\n\t\tthis.syncEntityToBody();\n\t}\n\n\tonEnable() {\n\t\tif (!this._body) {\n\t\t\tthis.createBody();\n\t\t}\n\n\t\tthis.enableSimulation();\n\t}\n\n\tonDisable() {\n\t\tthis.disableSimulation();\n\t}\n\n}\n\nclass RigidBodyComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nvar ammoRayStart, ammoRayEnd;\nvar collisions = {};\nvar frameCollisions = {};\n\nclass RaycastResult {\n\tconstructor(entity, point, normal) {\n\t\tthis.entity = entity;\n\t\tthis.point = point;\n\t\tthis.normal = normal;\n\t}\n\n}\n\nclass SingleContactResult {\n\tconstructor(a, b, contactPoint) {\n\t\tif (arguments.length === 0) {\n\t\t\tthis.a = null;\n\t\t\tthis.b = null;\n\t\t\tthis.localPointA = new Vec3();\n\t\t\tthis.localPointB = new Vec3();\n\t\t\tthis.pointA = new Vec3();\n\t\t\tthis.pointB = new Vec3();\n\t\t\tthis.normal = new Vec3();\n\t\t} else {\n\t\t\tthis.a = a;\n\t\t\tthis.b = b;\n\t\t\tthis.localPointA = contactPoint.localPoint;\n\t\t\tthis.localPointB = contactPoint.localPointOther;\n\t\t\tthis.pointA = contactPoint.point;\n\t\t\tthis.pointB = contactPoint.pointOther;\n\t\t\tthis.normal = contactPoint.normal;\n\t\t}\n\t}\n\n}\n\nclass ContactPoint {\n\tconstructor(localPoint = new Vec3(), localPointOther = new Vec3(), point = new Vec3(), pointOther = new Vec3(), normal = new Vec3()) {\n\t\tthis.localPoint = localPoint;\n\t\tthis.localPointOther = localPointOther;\n\t\tthis.point = point;\n\t\tthis.pointOther = pointOther;\n\t\tthis.normal = normal;\n\t}\n\n}\n\nclass ContactResult {\n\tconstructor(other, contacts) {\n\t\tthis.other = other;\n\t\tthis.contacts = contacts;\n\t}\n\n}\n\nconst _schema$7 = ['enabled'];\n\nclass RigidBodyComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'rigidbody';\n\t\tthis._stats = app.stats.frame;\n\t\tthis.ComponentType = RigidBodyComponent;\n\t\tthis.DataType = RigidBodyComponentData;\n\t\tthis.contactPointPool = null;\n\t\tthis.contactResultPool = null;\n\t\tthis.singleContactResultPool = null;\n\t\tthis.schema = _schema$7;\n\t\tthis.maxSubSteps = 10;\n\t\tthis.fixedTimeStep = 1 / 60;\n\t\tthis.gravity = new Vec3(0, -9.81, 0);\n\t\tthis._dynamic = [];\n\t\tthis._kinematic = [];\n\t\tthis._triggers = [];\n\t\tthis._compounds = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tthis.on('remove', this.onRemove, this);\n\t}\n\n\tonLibraryLoaded() {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tthis.collisionConfiguration = new Ammo.btDefaultCollisionConfiguration();\n\t\t\tthis.dispatcher = new Ammo.btCollisionDispatcher(this.collisionConfiguration);\n\t\t\tthis.overlappingPairCache = new Ammo.btDbvtBroadphase();\n\t\t\tthis.solver = new Ammo.btSequentialImpulseConstraintSolver();\n\t\t\tthis.dynamicsWorld = new Ammo.btDiscreteDynamicsWorld(this.dispatcher, this.overlappingPairCache, this.solver, this.collisionConfiguration);\n\n\t\t\tif (this.dynamicsWorld.setInternalTickCallback) {\n\t\t\t\tconst checkForCollisionsPointer = Ammo.addFunction(this._checkForCollisions.bind(this), 'vif');\n\t\t\t\tthis.dynamicsWorld.setInternalTickCallback(checkForCollisionsPointer);\n\t\t\t}\n\n\t\t\tammoRayStart = new Ammo.btVector3();\n\t\t\tammoRayEnd = new Ammo.btVector3();\n\t\t\tthis.contactPointPool = new ObjectPool(ContactPoint, 1);\n\t\t\tthis.contactResultPool = new ObjectPool(ContactResult, 1);\n\t\t\tthis.singleContactResultPool = new ObjectPool(SingleContactResult, 1);\n\t\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\t} else {\n\t\t\tComponentSystem.unbind('update', this.onUpdate, this);\n\t\t}\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tconst props = ['mass', 'linearDamping', 'angularDamping', 'linearFactor', 'angularFactor', 'friction', 'rollingFriction', 'restitution', 'type', 'group', 'mask'];\n\n\t\tfor (const property of props) {\n\t\t\tif (data.hasOwnProperty(property)) {\n\t\t\t\tconst value = data[property];\n\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tcomponent[property] = new Vec3(value[0], value[1], value[2]);\n\t\t\t\t} else {\n\t\t\t\t\tcomponent[property] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tconst rigidbody = entity.rigidbody;\n\t\tconst data = {\n\t\t\tenabled: rigidbody.enabled,\n\t\t\tmass: rigidbody.mass,\n\t\t\tlinearDamping: rigidbody.linearDamping,\n\t\t\tangularDamping: rigidbody.angularDamping,\n\t\t\tlinearFactor: [rigidbody.linearFactor.x, rigidbody.linearFactor.y, rigidbody.linearFactor.z],\n\t\t\tangularFactor: [rigidbody.angularFactor.x, rigidbody.angularFactor.y, rigidbody.angularFactor.z],\n\t\t\tfriction: rigidbody.friction,\n\t\t\trollingFriction: rigidbody.rollingFriction,\n\t\t\trestitution: rigidbody.restitution,\n\t\t\ttype: rigidbody.type,\n\t\t\tgroup: rigidbody.group,\n\t\t\tmask: rigidbody.mask\n\t\t};\n\t\tthis.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tif (component.enabled) {\n\t\t\tcomponent.enabled = false;\n\t\t}\n\t}\n\n\tonRemove(entity, component) {\n\t\tconst body = component.body;\n\n\t\tif (body) {\n\t\t\tthis.removeBody(body);\n\t\t\tthis.destroyBody(body);\n\t\t\tcomponent.body = null;\n\t\t}\n\t}\n\n\taddBody(body, group, mask) {\n\t\tif (group !== undefined && mask !== undefined) {\n\t\t\tthis.dynamicsWorld.addRigidBody(body, group, mask);\n\t\t} else {\n\t\t\tthis.dynamicsWorld.addRigidBody(body);\n\t\t}\n\t}\n\n\tremoveBody(body) {\n\t\tthis.dynamicsWorld.removeRigidBody(body);\n\t}\n\n\tcreateBody(mass, shape, transform) {\n\t\tconst localInertia = new Ammo.btVector3(0, 0, 0);\n\n\t\tif (mass !== 0) {\n\t\t\tshape.calculateLocalInertia(mass, localInertia);\n\t\t}\n\n\t\tconst motionState = new Ammo.btDefaultMotionState(transform);\n\t\tconst bodyInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, shape, localInertia);\n\t\tconst body = new Ammo.btRigidBody(bodyInfo);\n\t\tAmmo.destroy(bodyInfo);\n\t\tAmmo.destroy(localInertia);\n\t\treturn body;\n\t}\n\n\tdestroyBody(body) {\n\t\tconst motionState = body.getMotionState();\n\n\t\tif (motionState) {\n\t\t\tAmmo.destroy(motionState);\n\t\t}\n\n\t\tAmmo.destroy(body);\n\t}\n\n\traycastFirst(start, end) {\n\t\tlet result = null;\n\t\tammoRayStart.setValue(start.x, start.y, start.z);\n\t\tammoRayEnd.setValue(end.x, end.y, end.z);\n\t\tconst rayCallback = new Ammo.ClosestRayResultCallback(ammoRayStart, ammoRayEnd);\n\t\tthis.dynamicsWorld.rayTest(ammoRayStart, ammoRayEnd, rayCallback);\n\n\t\tif (rayCallback.hasHit()) {\n\t\t\tconst collisionObj = rayCallback.get_m_collisionObject();\n\t\t\tconst body = Ammo.castObject(collisionObj, Ammo.btRigidBody);\n\n\t\t\tif (body) {\n\t\t\t\tconst point = rayCallback.get_m_hitPointWorld();\n\t\t\t\tconst normal = rayCallback.get_m_hitNormalWorld();\n\t\t\t\tresult = new RaycastResult(body.entity, new Vec3(point.x(), point.y(), point.z()), new Vec3(normal.x(), normal.y(), normal.z()));\n\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconst callback = arguments[2];\n\t\t\t\t\tcallback(result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tAmmo.destroy(rayCallback);\n\t\treturn result;\n\t}\n\n\traycastAll(start, end) {\n\t\tconst results = [];\n\t\tammoRayStart.setValue(start.x, start.y, start.z);\n\t\tammoRayEnd.setValue(end.x, end.y, end.z);\n\t\tconst rayCallback = new Ammo.AllHitsRayResultCallback(ammoRayStart, ammoRayEnd);\n\t\tthis.dynamicsWorld.rayTest(ammoRayStart, ammoRayEnd, rayCallback);\n\n\t\tif (rayCallback.hasHit()) {\n\t\t\tconst collisionObjs = rayCallback.get_m_collisionObjects();\n\t\t\tconst points = rayCallback.get_m_hitPointWorld();\n\t\t\tconst normals = rayCallback.get_m_hitNormalWorld();\n\t\t\tconst numHits = collisionObjs.size();\n\n\t\t\tfor (let i = 0; i < numHits; i++) {\n\t\t\t\tconst body = Ammo.castObject(collisionObjs.at(i), Ammo.btRigidBody);\n\n\t\t\t\tif (body) {\n\t\t\t\t\tconst point = points.at(i);\n\t\t\t\t\tconst normal = normals.at(i);\n\t\t\t\t\tconst result = new RaycastResult(body.entity, new Vec3(point.x(), point.y(), point.z()), new Vec3(normal.x(), normal.y(), normal.z()));\n\t\t\t\t\tresults.push(result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tAmmo.destroy(rayCallback);\n\t\treturn results;\n\t}\n\n\t_storeCollision(entity, other) {\n\t\tlet isNewCollision = false;\n\t\tconst guid = entity.getGuid();\n\t\tcollisions[guid] = collisions[guid] || {\n\t\t\tothers: [],\n\t\t\tentity: entity\n\t\t};\n\n\t\tif (collisions[guid].others.indexOf(other) < 0) {\n\t\t\tcollisions[guid].others.push(other);\n\t\t\tisNewCollision = true;\n\t\t}\n\n\t\tframeCollisions[guid] = frameCollisions[guid] || {\n\t\t\tothers: [],\n\t\t\tentity: entity\n\t\t};\n\t\tframeCollisions[guid].others.push(other);\n\t\treturn isNewCollision;\n\t}\n\n\t_createContactPointFromAmmo(contactPoint) {\n\t\tconst localPointA = contactPoint.get_m_localPointA();\n\t\tconst localPointB = contactPoint.get_m_localPointB();\n\t\tconst positionWorldOnA = contactPoint.getPositionWorldOnA();\n\t\tconst positionWorldOnB = contactPoint.getPositionWorldOnB();\n\t\tconst normalWorldOnB = contactPoint.get_m_normalWorldOnB();\n\t\tconst contact = this.contactPointPool.allocate();\n\t\tcontact.localPoint.set(localPointA.x(), localPointA.y(), localPointA.z());\n\t\tcontact.localPointOther.set(localPointB.x(), localPointB.y(), localPointB.z());\n\t\tcontact.point.set(positionWorldOnA.x(), positionWorldOnA.y(), positionWorldOnA.z());\n\t\tcontact.pointOther.set(positionWorldOnB.x(), positionWorldOnB.y(), positionWorldOnB.z());\n\t\tcontact.normal.set(normalWorldOnB.x(), normalWorldOnB.y(), normalWorldOnB.z());\n\t\treturn contact;\n\t}\n\n\t_createReverseContactPointFromAmmo(contactPoint) {\n\t\tconst localPointA = contactPoint.get_m_localPointA();\n\t\tconst localPointB = contactPoint.get_m_localPointB();\n\t\tconst positionWorldOnA = contactPoint.getPositionWorldOnA();\n\t\tconst positionWorldOnB = contactPoint.getPositionWorldOnB();\n\t\tconst normalWorldOnB = contactPoint.get_m_normalWorldOnB();\n\t\tconst contact = this.contactPointPool.allocate();\n\t\tcontact.localPointOther.set(localPointA.x(), localPointA.y(), localPointA.z());\n\t\tcontact.localPoint.set(localPointB.x(), localPointB.y(), localPointB.z());\n\t\tcontact.pointOther.set(positionWorldOnA.x(), positionWorldOnA.y(), positionWorldOnA.z());\n\t\tcontact.point.set(positionWorldOnB.x(), positionWorldOnB.y(), positionWorldOnB.z());\n\t\tcontact.normal.set(normalWorldOnB.x(), normalWorldOnB.y(), normalWorldOnB.z());\n\t\treturn contact;\n\t}\n\n\t_createSingleContactResult(a, b, contactPoint) {\n\t\tconst result = this.singleContactResultPool.allocate();\n\t\tresult.a = a;\n\t\tresult.b = b;\n\t\tresult.localPointA = contactPoint.localPoint;\n\t\tresult.localPointB = contactPoint.localPointOther;\n\t\tresult.pointA = contactPoint.point;\n\t\tresult.pointB = contactPoint.pointOther;\n\t\tresult.normal = contactPoint.normal;\n\t\treturn result;\n\t}\n\n\t_createContactResult(other, contacts) {\n\t\tconst result = this.contactResultPool.allocate();\n\t\tresult.other = other;\n\t\tresult.contacts = contacts;\n\t\treturn result;\n\t}\n\n\t_cleanOldCollisions() {\n\t\tfor (const guid in collisions) {\n\t\t\tif (collisions.hasOwnProperty(guid)) {\n\t\t\t\tconst frameCollision = frameCollisions[guid];\n\t\t\t\tconst collision = collisions[guid];\n\t\t\t\tconst entity = collision.entity;\n\t\t\t\tconst entityCollision = entity.collision;\n\t\t\t\tconst entityRigidbody = entity.rigidbody;\n\t\t\t\tconst others = collision.others;\n\t\t\t\tconst length = others.length;\n\t\t\t\tlet i = length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tconst other = others[i];\n\n\t\t\t\t\tif (!frameCollision || frameCollision.others.indexOf(other) < 0) {\n\t\t\t\t\t\tothers.splice(i, 1);\n\n\t\t\t\t\t\tif (entity.trigger) {\n\t\t\t\t\t\t\tif (entityCollision) {\n\t\t\t\t\t\t\t\tentityCollision.fire(\"triggerleave\", other);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (other.rigidbody) {\n\t\t\t\t\t\t\t\tother.rigidbody.fire('triggerleave', entity);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!other.trigger) {\n\t\t\t\t\t\t\tif (entityRigidbody) {\n\t\t\t\t\t\t\t\tentityRigidbody.fire(\"collisionend\", other);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (entityCollision) {\n\t\t\t\t\t\t\t\tentityCollision.fire(\"collisionend\", other);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (others.length === 0) {\n\t\t\t\t\tdelete collisions[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_hasContactEvent(entity) {\n\t\tconst c = entity.collision;\n\n\t\tif (c && (c.hasEvent(\"collisionstart\") || c.hasEvent(\"collisionend\") || c.hasEvent(\"contact\"))) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst r = entity.rigidbody;\n\t\treturn r && (r.hasEvent(\"collisionstart\") || r.hasEvent(\"collisionend\") || r.hasEvent(\"contact\"));\n\t}\n\n\t_checkForCollisions(world, timeStep) {\n\t\tconst dynamicsWorld = Ammo.wrapPointer(world, Ammo.btDynamicsWorld);\n\t\tconst dispatcher = dynamicsWorld.getDispatcher();\n\t\tconst numManifolds = dispatcher.getNumManifolds();\n\t\tframeCollisions = {};\n\n\t\tfor (let i = 0; i < numManifolds; i++) {\n\t\t\tconst manifold = dispatcher.getManifoldByIndexInternal(i);\n\t\t\tconst body0 = manifold.getBody0();\n\t\t\tconst body1 = manifold.getBody1();\n\t\t\tconst wb0 = Ammo.castObject(body0, Ammo.btRigidBody);\n\t\t\tconst wb1 = Ammo.castObject(body1, Ammo.btRigidBody);\n\t\t\tconst e0 = wb0.entity;\n\t\t\tconst e1 = wb1.entity;\n\n\t\t\tif (!e0 || !e1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst flags0 = wb0.getCollisionFlags();\n\t\t\tconst flags1 = wb1.getCollisionFlags();\n\t\t\tconst numContacts = manifold.getNumContacts();\n\t\t\tconst forwardContacts = [];\n\t\t\tconst reverseContacts = [];\n\t\t\tlet newCollision;\n\n\t\t\tif (numContacts > 0) {\n\t\t\t\tif (flags0 & BODYFLAG_NORESPONSE_OBJECT || flags1 & BODYFLAG_NORESPONSE_OBJECT) {\n\t\t\t\t\tconst e0Events = e0.collision && (e0.collision.hasEvent(\"triggerenter\") || e0.collision.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e1Events = e1.collision && (e1.collision.hasEvent(\"triggerenter\") || e1.collision.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e0BodyEvents = e0.rigidbody && (e0.rigidbody.hasEvent(\"triggerenter\") || e0.rigidbody.hasEvent(\"triggerleave\"));\n\t\t\t\t\tconst e1BodyEvents = e1.rigidbody && (e1.rigidbody.hasEvent(\"triggerenter\") || e1.rigidbody.hasEvent(\"triggerleave\"));\n\n\t\t\t\t\tif (e0Events) {\n\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\n\t\t\t\t\t\tif (newCollision && !(flags1 & BODYFLAG_NORESPONSE_OBJECT)) {\n\t\t\t\t\t\t\te0.collision.fire(\"triggerenter\", e1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e1Events) {\n\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\n\t\t\t\t\t\tif (newCollision && !(flags0 & BODYFLAG_NORESPONSE_OBJECT)) {\n\t\t\t\t\t\t\te1.collision.fire(\"triggerenter\", e0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e0BodyEvents) {\n\t\t\t\t\t\tif (!newCollision) {\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\te0.rigidbody.fire(\"triggerenter\", e1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e1BodyEvents) {\n\t\t\t\t\t\tif (!newCollision) {\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\te1.rigidbody.fire(\"triggerenter\", e0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst e0Events = this._hasContactEvent(e0);\n\n\t\t\t\t\tconst e1Events = this._hasContactEvent(e1);\n\n\t\t\t\t\tconst globalEvents = this.hasEvent(\"contact\");\n\n\t\t\t\t\tif (globalEvents || e0Events || e1Events) {\n\t\t\t\t\t\tfor (let j = 0; j < numContacts; j++) {\n\t\t\t\t\t\t\tconst btContactPoint = manifold.getContactPoint(j);\n\n\t\t\t\t\t\t\tconst contactPoint = this._createContactPointFromAmmo(btContactPoint);\n\n\t\t\t\t\t\t\tif (e0Events || e1Events) {\n\t\t\t\t\t\t\t\tforwardContacts.push(contactPoint);\n\n\t\t\t\t\t\t\t\tconst reverseContactPoint = this._createReverseContactPointFromAmmo(btContactPoint);\n\n\t\t\t\t\t\t\t\treverseContacts.push(reverseContactPoint);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (globalEvents) {\n\t\t\t\t\t\t\t\tconst result = this._createSingleContactResult(e0, e1, contactPoint);\n\n\t\t\t\t\t\t\t\tthis.fire(\"contact\", result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e0Events) {\n\t\t\t\t\t\t\tconst forwardResult = this._createContactResult(e1, forwardContacts);\n\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e0, e1);\n\n\t\t\t\t\t\t\tif (e0.collision) {\n\t\t\t\t\t\t\t\te0.collision.fire(\"contact\", forwardResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te0.collision.fire(\"collisionstart\", forwardResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e0.rigidbody) {\n\t\t\t\t\t\t\t\te0.rigidbody.fire(\"contact\", forwardResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te0.rigidbody.fire(\"collisionstart\", forwardResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e1Events) {\n\t\t\t\t\t\t\tconst reverseResult = this._createContactResult(e0, reverseContacts);\n\n\t\t\t\t\t\t\tnewCollision = this._storeCollision(e1, e0);\n\n\t\t\t\t\t\t\tif (e1.collision) {\n\t\t\t\t\t\t\t\te1.collision.fire(\"contact\", reverseResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te1.collision.fire(\"collisionstart\", reverseResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (e1.rigidbody) {\n\t\t\t\t\t\t\t\te1.rigidbody.fire(\"contact\", reverseResult);\n\n\t\t\t\t\t\t\t\tif (newCollision) {\n\t\t\t\t\t\t\t\t\te1.rigidbody.fire(\"collisionstart\", reverseResult);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._cleanOldCollisions();\n\n\t\tthis.contactPointPool.freeAll();\n\t\tthis.contactResultPool.freeAll();\n\t\tthis.singleContactResultPool.freeAll();\n\t}\n\n\tonUpdate(dt) {\n\t\tlet i, len;\n\t\tconst gravity = this.dynamicsWorld.getGravity();\n\n\t\tif (gravity.x() !== this.gravity.x || gravity.y() !== this.gravity.y || gravity.z() !== this.gravity.z) {\n\t\t\tgravity.setValue(this.gravity.x, this.gravity.y, this.gravity.z);\n\t\t\tthis.dynamicsWorld.setGravity(gravity);\n\t\t}\n\n\t\tconst triggers = this._triggers;\n\n\t\tfor (i = 0, len = triggers.length; i < len; i++) {\n\t\t\ttriggers[i].updateTransform();\n\t\t}\n\n\t\tconst compounds = this._compounds;\n\n\t\tfor (i = 0, len = compounds.length; i < len; i++) {\n\t\t\tcompounds[i]._updateCompound();\n\t\t}\n\n\t\tconst kinematic = this._kinematic;\n\n\t\tfor (i = 0, len = kinematic.length; i < len; i++) {\n\t\t\tkinematic[i]._updateKinematic();\n\t\t}\n\n\t\tthis.dynamicsWorld.stepSimulation(dt, this.maxSubSteps, this.fixedTimeStep);\n\t\tconst dynamic = this._dynamic;\n\n\t\tfor (i = 0, len = dynamic.length; i < len; i++) {\n\t\t\tdynamic[i]._updateDynamic();\n\t\t}\n\n\t\tif (!this.dynamicsWorld.setInternalTickCallback) this._checkForCollisions(Ammo.getPointer(this.dynamicsWorld), dt);\n\t}\n\n\tdestroy() {\n\t\tif (typeof Ammo !== 'undefined') {\n\t\t\tAmmo.destroy(this.dynamicsWorld);\n\t\t\tAmmo.destroy(this.solver);\n\t\t\tAmmo.destroy(this.overlappingPairCache);\n\t\t\tAmmo.destroy(this.dispatcher);\n\t\t\tAmmo.destroy(this.collisionConfiguration);\n\t\t\tthis.dynamicsWorld = null;\n\t\t\tthis.solver = null;\n\t\t\tthis.overlappingPairCache = null;\n\t\t\tthis.dispatcher = null;\n\t\t\tthis.collisionConfiguration = null;\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(RigidBodyComponent.prototype, _schema$7);\n\nconst SCALEMODE_NONE = \"none\";\nconst SCALEMODE_BLEND = \"blend\";\n\nvar _transform = new Mat4();\n\nclass ScreenComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._resolution = new Vec2(640, 320);\n\t\tthis._referenceResolution = new Vec2(640, 320);\n\t\tthis._scaleMode = SCALEMODE_NONE;\n\t\tthis.scale = 1;\n\t\tthis._scaleBlend = 0.5;\n\t\tthis._priority = 0;\n\t\tthis._screenSpace = false;\n\t\tthis.cull = this._screenSpace;\n\t\tthis._screenMatrix = new Mat4();\n\t\tthis._elements = new Set();\n\t\tsystem.app.graphicsDevice.on(\"resizecanvas\", this._onResize, this);\n\t}\n\n\tsyncDrawOrder() {\n\t\tthis.system.queueDrawOrderSync(this.entity.getGuid(), this._processDrawOrderSync, this);\n\t}\n\n\t_recurseDrawOrderSync(e, i) {\n\t\tif (!(e instanceof Entity)) {\n\t\t\treturn i;\n\t\t}\n\n\t\tif (e.element) {\n\t\t\tvar prevDrawOrder = e.element.drawOrder;\n\t\t\te.element.drawOrder = i++;\n\n\t\t\tif (e.element._batchGroupId >= 0 && prevDrawOrder !== e.element.drawOrder) {\n\t\t\t\tthis.system.app.batcher.markGroupDirty(e.element._batchGroupId);\n\t\t\t}\n\t\t}\n\n\t\tif (e.particlesystem) {\n\t\t\te.particlesystem.drawOrder = i++;\n\t\t}\n\n\t\tvar children = e.children;\n\n\t\tfor (var j = 0; j < children.length; j++) {\n\t\t\ti = this._recurseDrawOrderSync(children[j], i);\n\t\t}\n\n\t\treturn i;\n\t}\n\n\t_processDrawOrderSync() {\n\t\tvar i = 1;\n\n\t\tthis._recurseDrawOrderSync(this.entity, i);\n\n\t\tthis.fire('syncdraworder');\n\t}\n\n\t_calcProjectionMatrix() {\n\t\tvar left;\n\t\tvar right;\n\t\tvar bottom;\n\t\tvar top;\n\t\tvar near = 1;\n\t\tvar far = -1;\n\t\tvar w = this._resolution.x / this.scale;\n\t\tvar h = this._resolution.y / this.scale;\n\t\tleft = 0;\n\t\tright = w;\n\t\tbottom = -h;\n\t\ttop = 0;\n\n\t\tthis._screenMatrix.setOrtho(left, right, bottom, top, near, far);\n\n\t\tif (!this._screenSpace) {\n\t\t\t_transform.setScale(0.5 * w, 0.5 * h, 1);\n\n\t\t\tthis._screenMatrix.mul2(_transform, this._screenMatrix);\n\t\t}\n\t}\n\n\t_updateScale() {\n\t\tthis.scale = this._calcScale(this._resolution, this.referenceResolution);\n\t}\n\n\t_calcScale(resolution, referenceResolution) {\n\t\tvar lx = Math.log2(resolution.x / referenceResolution.x);\n\t\tvar ly = Math.log2(resolution.y / referenceResolution.y);\n\t\treturn Math.pow(2, lx * (1 - this._scaleBlend) + ly * this._scaleBlend);\n\t}\n\n\t_onResize(width, height) {\n\t\tif (this._screenSpace) {\n\t\t\tthis._resolution.set(width, height);\n\n\t\t\tthis.resolution = this._resolution;\n\t\t}\n\t}\n\n\t_bindElement(element) {\n\t\tthis._elements.add(element);\n\t}\n\n\t_unbindElement(element) {\n\t\tthis._elements.delete(element);\n\t}\n\n\tonRemove() {\n\t\tthis.system.app.graphicsDevice.off(\"resizecanvas\", this._onResize, this);\n\t\tthis.fire('remove');\n\n\t\tthis._elements.forEach(element => element._onScreenRemove());\n\n\t\tthis._elements.clear();\n\n\t\tthis.off();\n\t}\n\n\tset resolution(value) {\n\t\tif (!this._screenSpace) {\n\t\t\tthis._resolution.set(value.x, value.y);\n\t\t} else {\n\t\t\tthis._resolution.set(this.system.app.graphicsDevice.width, this.system.app.graphicsDevice.height);\n\t\t}\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:resolution\", this._resolution);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget resolution() {\n\t\treturn this._resolution;\n\t}\n\n\tset referenceResolution(value) {\n\t\tthis._referenceResolution.set(value.x, value.y);\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:referenceresolution\", this._resolution);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget referenceResolution() {\n\t\tif (this._scaleMode === SCALEMODE_NONE) {\n\t\t\treturn this._resolution;\n\t\t}\n\n\t\treturn this._referenceResolution;\n\t}\n\n\tset screenSpace(value) {\n\t\tthis._screenSpace = value;\n\n\t\tif (this._screenSpace) {\n\t\t\tthis._resolution.set(this.system.app.graphicsDevice.width, this.system.app.graphicsDevice.height);\n\t\t}\n\n\t\tthis.resolution = this._resolution;\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire('set:screenspace', this._screenSpace);\n\n\t\tthis._elements.forEach(element => element._onScreenSpaceChange());\n\t}\n\n\tget screenSpace() {\n\t\treturn this._screenSpace;\n\t}\n\n\tset scaleMode(value) {\n\t\tif (value !== SCALEMODE_NONE && value !== SCALEMODE_BLEND) {\n\t\t\tvalue = SCALEMODE_NONE;\n\t\t}\n\n\t\tif (!this._screenSpace && value !== SCALEMODE_NONE) {\n\t\t\tvalue = SCALEMODE_NONE;\n\t\t}\n\n\t\tthis._scaleMode = value;\n\t\tthis.resolution = this._resolution;\n\t\tthis.fire(\"set:scalemode\", this._scaleMode);\n\t}\n\n\tget scaleMode() {\n\t\treturn this._scaleMode;\n\t}\n\n\tset scaleBlend(value) {\n\t\tthis._scaleBlend = value;\n\n\t\tthis._updateScale();\n\n\t\tthis._calcProjectionMatrix();\n\n\t\tif (!this.entity._dirtyLocal) this.entity._dirtifyLocal();\n\t\tthis.fire(\"set:scaleblend\", this._scaleBlend);\n\n\t\tthis._elements.forEach(element => element._onScreenResize(this._resolution));\n\t}\n\n\tget scaleBlend() {\n\t\treturn this._scaleBlend;\n\t}\n\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\tset priority(value) {\n\t\tif (value > 0xFF) {\n\t\t\tvalue = 0xFF;\n\t\t}\n\n\t\tthis._priority = value;\n\t}\n\n}\n\nclass ScreenComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$6 = ['enabled'];\n\nclass ScreenComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'screen';\n\t\tthis.ComponentType = ScreenComponent;\n\t\tthis.DataType = ScreenComponentData;\n\t\tthis.schema = _schema$6;\n\t\tthis.windowResolution = new Vec2();\n\t\tthis._drawOrderSyncQueue = new IndexedList();\n\t\tthis.app.graphicsDevice.on(\"resizecanvas\", this._onResize, this);\n\t\tComponentSystem.bind('update', this._onUpdate, this);\n\t\tthis.on('beforeremove', this.onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.priority !== undefined) component.priority = data.priority;\n\t\tif (data.screenSpace !== undefined) component.screenSpace = data.screenSpace;\n\t\tcomponent.cull = component.screenSpace;\n\t\tif (data.scaleMode !== undefined) component.scaleMode = data.scaleMode;\n\t\tif (data.scaleBlend !== undefined) component.scaleBlend = data.scaleBlend;\n\n\t\tif (data.resolution !== undefined) {\n\t\t\tif (data.resolution instanceof Vec2) {\n\t\t\t\tcomponent._resolution.copy(data.resolution);\n\t\t\t} else {\n\t\t\t\tcomponent._resolution.set(data.resolution[0], data.resolution[1]);\n\t\t\t}\n\n\t\t\tcomponent.resolution = component._resolution;\n\t\t}\n\n\t\tif (data.referenceResolution !== undefined) {\n\t\t\tif (data.referenceResolution instanceof Vec2) {\n\t\t\t\tcomponent._referenceResolution.copy(data.referenceResolution);\n\t\t\t} else {\n\t\t\t\tcomponent._referenceResolution.set(data.referenceResolution[0], data.referenceResolution[1]);\n\t\t\t}\n\n\t\t\tcomponent.referenceResolution = component._referenceResolution;\n\t\t}\n\n\t\tcomponent.syncDrawOrder();\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tdestroy() {\n\t\tthis.off();\n\t\tthis.app.graphicsDevice.off(\"resizecanvas\", this._onResize, this);\n\t}\n\n\t_onUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components[id].entity.screen.update) components[id].entity.screen.update(dt);\n\t\t}\n\t}\n\n\t_onResize(width, height) {\n\t\tthis.windowResolution.x = width;\n\t\tthis.windowResolution.y = height;\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar screen = entity.screen;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: screen.enabled,\n\t\t\tscreenSpace: screen.screenSpace,\n\t\t\tscaleMode: screen.scaleMode,\n\t\t\tresolution: screen.resolution.clone(),\n\t\t\treferenceResolution: screen.referenceResolution.clone()\n\t\t});\n\t}\n\n\tonRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n\tprocessDrawOrderSyncQueue() {\n\t\tvar list = this._drawOrderSyncQueue.list();\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i];\n\t\t\titem.callback.call(item.scope);\n\t\t}\n\n\t\tthis._drawOrderSyncQueue.clear();\n\t}\n\n\tqueueDrawOrderSync(id, fn, scope) {\n\t\tif (!this._drawOrderSyncQueue.list().length) {\n\t\t\tthis.app.once('prerender', this.processDrawOrderSyncQueue, this);\n\t\t}\n\n\t\tif (!this._drawOrderSyncQueue.has(id)) {\n\t\t\tthis._drawOrderSyncQueue.push(id, {\n\t\t\t\tcallback: fn,\n\t\t\t\tscope: scope\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(ScreenComponent.prototype, _schema$6);\n\nconst components = ['x', 'y', 'z', 'w'];\nconst vecLookup = [undefined, undefined, Vec2, Vec3, Vec4];\n\nfunction rawToValue(app, args, value, old) {\n\tvar i;\n\tvar j;\n\n\tswitch (args.type) {\n\t\tcase 'boolean':\n\t\t\treturn !!value;\n\n\t\tcase 'number':\n\t\t\tif (typeof value === 'number') {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvar v = parseInt(value, 10);\n\t\t\t\tif (isNaN(v)) return null;\n\t\t\t\treturn v;\n\t\t\t} else if (typeof value === 'boolean') {\n\t\t\t\treturn 0 + value;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'json':\n\t\t\tvar result = {};\n\n\t\t\tif (Array.isArray(args.schema)) {\n\t\t\t\tif (!value || typeof value !== 'object') {\n\t\t\t\t\tvalue = {};\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < args.schema.length; i++) {\n\t\t\t\t\tvar field = args.schema[i];\n\t\t\t\t\tif (!field.name) continue;\n\n\t\t\t\t\tif (field.array) {\n\t\t\t\t\t\tresult[field.name] = [];\n\t\t\t\t\t\tvar arr = Array.isArray(value[field.name]) ? value[field.name] : [];\n\n\t\t\t\t\t\tfor (j = 0; j < arr.length; j++) {\n\t\t\t\t\t\t\tresult[field.name].push(rawToValue(app, field, arr[j]));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar val = value.hasOwnProperty(field.name) ? value[field.name] : field.default;\n\t\t\t\t\t\tresult[field.name] = rawToValue(app, field, val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\tcase 'asset':\n\t\t\tif (value instanceof Asset) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'number') {\n\t\t\t\treturn app.assets.get(value) || null;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\treturn app.assets.get(parseInt(value, 10)) || null;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'entity':\n\t\t\tif (value instanceof GraphNode) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\treturn app.getEntityFromIndex(value);\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'rgb':\n\t\tcase 'rgba':\n\t\t\tif (value instanceof Color) {\n\t\t\t\tif (old instanceof Color) {\n\t\t\t\t\told.copy(value);\n\t\t\t\t\treturn old;\n\t\t\t\t}\n\n\t\t\t\treturn value.clone();\n\t\t\t} else if (value instanceof Array && value.length >= 3 && value.length <= 4) {\n\t\t\t\tfor (i = 0; i < value.length; i++) {\n\t\t\t\t\tif (typeof value[i] !== 'number') return null;\n\t\t\t\t}\n\n\t\t\t\tif (!old) old = new Color();\n\t\t\t\told.r = value[0];\n\t\t\t\told.g = value[1];\n\t\t\t\told.b = value[2];\n\t\t\t\told.a = value.length === 3 ? 1 : value[3];\n\t\t\t\treturn old;\n\t\t\t} else if (typeof value === 'string' && /#([0-9abcdef]{2}){3,4}/i.test(value)) {\n\t\t\t\tif (!old) old = new Color();\n\t\t\t\told.fromString(value);\n\t\t\t\treturn old;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'vec2':\n\t\tcase 'vec3':\n\t\tcase 'vec4':\n\t\t\tvar len = parseInt(args.type.slice(3), 10);\n\t\t\tvar vecType = vecLookup[len];\n\n\t\t\tif (value instanceof vecType) {\n\t\t\t\tif (old instanceof vecType) {\n\t\t\t\t\told.copy(value);\n\t\t\t\t\treturn old;\n\t\t\t\t}\n\n\t\t\t\treturn value.clone();\n\t\t\t} else if (value instanceof Array && value.length === len) {\n\t\t\t\tfor (i = 0; i < value.length; i++) {\n\t\t\t\t\tif (typeof value[i] !== 'number') return null;\n\t\t\t\t}\n\n\t\t\t\tif (!old) old = new vecType();\n\n\t\t\t\tfor (i = 0; i < len; i++) old[components[i]] = value[i];\n\n\t\t\t\treturn old;\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\tcase 'curve':\n\t\t\tif (value) {\n\t\t\t\tvar curve;\n\n\t\t\t\tif (value instanceof Curve || value instanceof CurveSet) {\n\t\t\t\t\tcurve = value.clone();\n\t\t\t\t} else {\n\t\t\t\t\tvar CurveType = value.keys[0] instanceof Array ? CurveSet : Curve;\n\t\t\t\t\tcurve = new CurveType(value.keys);\n\t\t\t\t\tcurve.type = value.type;\n\t\t\t\t}\n\n\t\t\t\treturn curve;\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\treturn value;\n}\n\nclass ScriptAttributes {\n\tconstructor(scriptType) {\n\t\tthis.scriptType = scriptType;\n\t\tthis.index = {};\n\t}\n\n\tadd(name, args) {\n\t\tif (this.index[name]) {\n\t\t\treturn;\n\t\t} else if (ScriptAttributes.reservedNames.has(name)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.index[name] = args;\n\t\tObject.defineProperty(this.scriptType.prototype, name, {\n\t\t\tget: function () {\n\t\t\t\treturn this.__attributes[name];\n\t\t\t},\n\t\t\tset: function (raw) {\n\t\t\t\tvar evt = 'attr';\n\t\t\t\tvar evtName = 'attr:' + name;\n\t\t\t\tvar old = this.__attributes[name];\n\t\t\t\tvar oldCopy = old;\n\n\t\t\t\tif (old && args.type !== 'json' && old.clone) {\n\t\t\t\t\tif (this._callbacks[evt] || this._callbacks[evtName]) {\n\t\t\t\t\t\toldCopy = old.clone();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (args.array) {\n\t\t\t\t\tthis.__attributes[name] = [];\n\n\t\t\t\t\tif (raw) {\n\t\t\t\t\t\tvar i;\n\t\t\t\t\t\tvar len;\n\n\t\t\t\t\t\tfor (i = 0, len = raw.length; i < len; i++) {\n\t\t\t\t\t\t\tthis.__attributes[name].push(rawToValue(this.app, args, raw[i], old ? old[i] : null));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.__attributes[name] = rawToValue(this.app, args, raw, old);\n\t\t\t\t}\n\n\t\t\t\tthis.fire(evt, name, this.__attributes[name], oldCopy);\n\t\t\t\tthis.fire(evtName, this.__attributes[name], oldCopy);\n\t\t\t}\n\t\t});\n\t}\n\n\tremove(name) {\n\t\tif (!this.index[name]) return false;\n\t\tdelete this.index[name];\n\t\tdelete this.scriptType.prototype[name];\n\t\treturn true;\n\t}\n\n\thas(name) {\n\t\treturn !!this.index[name];\n\t}\n\n\tget(name) {\n\t\treturn this.index[name] || null;\n\t}\n\n}\n\nScriptAttributes.reservedNames = new Set(['app', 'entity', 'enabled', '_enabled', '_enabledOld', '_destroyed', '__attributes', '__attributesRaw', '__scriptType', '__executionOrder', '_callbacks', 'has', 'get', 'on', 'off', 'fire', 'once', 'hasEvent']);\n\nclass ScriptComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._scripts = [];\n\t\tthis._updateList = new SortedLoopArray({\n\t\t\tsortBy: '__executionOrder'\n\t\t});\n\t\tthis._postUpdateList = new SortedLoopArray({\n\t\t\tsortBy: '__executionOrder'\n\t\t});\n\t\tthis._scriptsIndex = {};\n\t\tthis._destroyedScripts = [];\n\t\tthis._destroyed = false;\n\t\tthis._scriptsData = null;\n\t\tthis._oldState = true;\n\t\tthis._enabled = true;\n\t\tthis._beingEnabled = false;\n\t\tthis._isLoopingThroughScripts = false;\n\t\tthis._executionOrder = -1;\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tonEnable() {\n\t\tthis._beingEnabled = true;\n\n\t\tthis._checkState();\n\n\t\tif (!this.entity._beingEnabled) {\n\t\t\tthis.onPostStateChange();\n\t\t}\n\n\t\tthis._beingEnabled = false;\n\t}\n\n\tonDisable() {\n\t\tthis._checkState();\n\t}\n\n\tonPostStateChange() {\n\t\tvar script;\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) {\n\t\t\tscript = this.scripts[i];\n\n\t\t\tif (script._initialized && !script._postInitialized && script.enabled) {\n\t\t\t\tscript._postInitialized = true;\n\t\t\t\tif (script.postInitialize) this._scriptMethod(script, ScriptComponent.scriptMethods.postInitialize);\n\t\t\t}\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_beginLooping() {\n\t\tvar looping = this._isLoopingThroughScripts;\n\t\tthis._isLoopingThroughScripts = true;\n\t\treturn looping;\n\t}\n\n\t_endLooping(wasLoopingBefore) {\n\t\tthis._isLoopingThroughScripts = wasLoopingBefore;\n\n\t\tif (!this._isLoopingThroughScripts) {\n\t\t\tthis._removeDestroyedScripts();\n\t\t}\n\t}\n\n\t_onSetEnabled(prop, old, value) {\n\t\tthis._beingEnabled = true;\n\n\t\tthis._checkState();\n\n\t\tthis._beingEnabled = false;\n\t}\n\n\t_checkState() {\n\t\tvar state = this.enabled && this.entity.enabled;\n\t\tif (state === this._oldState) return;\n\t\tthis._oldState = state;\n\t\tthis.fire(state ? 'enable' : 'disable');\n\t\tthis.fire('state', state);\n\n\t\tif (state) {\n\t\t\tthis.system._addComponentToEnabled(this);\n\t\t} else {\n\t\t\tthis.system._removeComponentFromEnabled(this);\n\t\t}\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tvar script;\n\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) {\n\t\t\tscript = this.scripts[i];\n\t\t\tscript.enabled = script._enabled;\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0; i < this.scripts.length; i++) {\n\t\t\tvar script = this.scripts[i];\n\t\t\tif (!script) continue;\n\t\t\tthis.destroy(script.__scriptType.__name);\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_removeDestroyedScripts() {\n\t\tvar len = this._destroyedScripts.length;\n\t\tif (!len) return;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tvar script = this._destroyedScripts[i];\n\n\t\t\tthis._removeScriptInstance(script);\n\t\t}\n\n\t\tthis._destroyedScripts.length = 0;\n\n\t\tthis._resetExecutionOrder(0, this._scripts.length);\n\t}\n\n\t_onInitializeAttributes() {\n\t\tfor (var i = 0, len = this.scripts.length; i < len; i++) this.scripts[i].__initializeAttributes();\n\t}\n\n\t_scriptMethod(script, method, arg) {\n\t\tscript[method](arg);\n\t}\n\n\t_onInitialize() {\n\t\tvar script,\n\t\t\t\tscripts = this._scripts;\n\n\t\tvar wasLooping = this._beginLooping();\n\n\t\tfor (var i = 0, len = scripts.length; i < len; i++) {\n\t\t\tscript = scripts[i];\n\n\t\t\tif (!script._initialized && script.enabled) {\n\t\t\t\tscript._initialized = true;\n\t\t\t\tif (script.initialize) this._scriptMethod(script, ScriptComponent.scriptMethods.initialize);\n\t\t\t}\n\t\t}\n\n\t\tthis._endLooping(wasLooping);\n\t}\n\n\t_onPostInitialize() {\n\t\tthis.onPostStateChange();\n\t}\n\n\t_onUpdate(dt) {\n\t\tvar self = this;\n\t\tvar list = self._updateList;\n\t\tif (!list.length) return;\n\t\tvar script;\n\n\t\tvar wasLooping = self._beginLooping();\n\n\t\tfor (list.loopIndex = 0; list.loopIndex < list.length; list.loopIndex++) {\n\t\t\tscript = list.items[list.loopIndex];\n\n\t\t\tif (script.enabled) {\n\t\t\t\tself._scriptMethod(script, ScriptComponent.scriptMethods.update, dt);\n\t\t\t}\n\t\t}\n\n\t\tself._endLooping(wasLooping);\n\t}\n\n\t_onPostUpdate(dt) {\n\t\tvar self = this;\n\t\tvar list = self._postUpdateList;\n\t\tif (!list.length) return;\n\n\t\tvar wasLooping = self._beginLooping();\n\n\t\tvar script;\n\n\t\tfor (list.loopIndex = 0; list.loopIndex < list.length; list.loopIndex++) {\n\t\t\tscript = list.items[list.loopIndex];\n\n\t\t\tif (script.enabled) {\n\t\t\t\tself._scriptMethod(script, ScriptComponent.scriptMethods.postUpdate, dt);\n\t\t\t}\n\t\t}\n\n\t\tself._endLooping(wasLooping);\n\t}\n\n\t_insertScriptInstance(scriptInstance, index, scriptsLength) {\n\t\tif (index === -1) {\n\t\t\tthis._scripts.push(scriptInstance);\n\n\t\t\tscriptInstance.__executionOrder = scriptsLength;\n\n\t\t\tif (scriptInstance.update) {\n\t\t\t\tthis._updateList.append(scriptInstance);\n\t\t\t}\n\n\t\t\tif (scriptInstance.postUpdate) {\n\t\t\t\tthis._postUpdateList.append(scriptInstance);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._scripts.splice(index, 0, scriptInstance);\n\n\t\t\tscriptInstance.__executionOrder = index;\n\n\t\t\tthis._resetExecutionOrder(index + 1, scriptsLength + 1);\n\n\t\t\tif (scriptInstance.update) {\n\t\t\t\tthis._updateList.insert(scriptInstance);\n\t\t\t}\n\n\t\t\tif (scriptInstance.postUpdate) {\n\t\t\t\tthis._postUpdateList.insert(scriptInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\t_removeScriptInstance(scriptInstance) {\n\t\tvar idx = this._scripts.indexOf(scriptInstance);\n\n\t\tif (idx === -1) return idx;\n\n\t\tthis._scripts.splice(idx, 1);\n\n\t\tif (scriptInstance.update) {\n\t\t\tthis._updateList.remove(scriptInstance);\n\t\t}\n\n\t\tif (scriptInstance.postUpdate) {\n\t\t\tthis._postUpdateList.remove(scriptInstance);\n\t\t}\n\n\t\treturn idx;\n\t}\n\n\t_resetExecutionOrder(startIndex, scriptsLength) {\n\t\tfor (var i = startIndex; i < scriptsLength; i++) {\n\t\t\tthis._scripts[i].__executionOrder = i;\n\t\t}\n\t}\n\n\t_resolveEntityScriptAttribute(attribute, attributeName, oldValue, useGuid, newAttributes, duplicatedIdsMap) {\n\t\tif (attribute.array) {\n\t\t\tvar len = oldValue.length;\n\n\t\t\tif (!len) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newGuidArray = oldValue.slice();\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar guid = newGuidArray[i] instanceof Entity ? newGuidArray[i].getGuid() : newGuidArray[i];\n\n\t\t\t\tif (duplicatedIdsMap[guid]) {\n\t\t\t\t\tnewGuidArray[i] = useGuid ? duplicatedIdsMap[guid].getGuid() : duplicatedIdsMap[guid];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewAttributes[attributeName] = newGuidArray;\n\t\t} else {\n\t\t\tif (oldValue instanceof Entity) {\n\t\t\t\toldValue = oldValue.getGuid();\n\t\t\t} else if (typeof oldValue !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (duplicatedIdsMap[oldValue]) {\n\t\t\t\tnewAttributes[attributeName] = duplicatedIdsMap[oldValue];\n\t\t\t}\n\t\t}\n\t}\n\n\thas(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\treturn !!this._scriptsIndex[nameOrType];\n\t\t}\n\n\t\tif (!nameOrType) return false;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = scriptType.__name;\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tvar scriptInstance = scriptData && scriptData.instance;\n\t\treturn scriptInstance instanceof scriptType;\n\t}\n\n\tget(nameOrType) {\n\t\tif (typeof nameOrType === 'string') {\n\t\t\tvar data = this._scriptsIndex[nameOrType];\n\t\t\treturn data ? data.instance : null;\n\t\t}\n\n\t\tif (!nameOrType) return null;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = scriptType.__name;\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tvar scriptInstance = scriptData && scriptData.instance;\n\t\treturn scriptInstance instanceof scriptType ? scriptInstance : null;\n\t}\n\n\tcreate(nameOrType, args = {}) {\n\t\tvar self = this;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tif (scriptType) {\n\t\t\tif (!this._scriptsIndex[scriptName] || !this._scriptsIndex[scriptName].instance) {\n\t\t\t\tvar scriptInstance = new scriptType({\n\t\t\t\t\tapp: this.system.app,\n\t\t\t\t\tentity: this.entity,\n\t\t\t\t\tenabled: args.hasOwnProperty('enabled') ? args.enabled : true,\n\t\t\t\t\tattributes: args.attributes\n\t\t\t\t});\n\t\t\t\tvar len = this._scripts.length;\n\t\t\t\tvar ind = -1;\n\t\t\t\tif (typeof args.ind === 'number' && args.ind !== -1 && len > args.ind) ind = args.ind;\n\n\t\t\t\tthis._insertScriptInstance(scriptInstance, ind, len);\n\n\t\t\t\tthis._scriptsIndex[scriptName] = {\n\t\t\t\t\tinstance: scriptInstance,\n\t\t\t\t\tonSwap: function () {\n\t\t\t\t\t\tself.swap(scriptName);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis[scriptName] = scriptInstance;\n\t\t\t\tif (!args.preloading) scriptInstance.__initializeAttributes();\n\t\t\t\tthis.fire('create', scriptName, scriptInstance);\n\t\t\t\tthis.fire('create:' + scriptName, scriptInstance);\n\t\t\t\tthis.system.app.scripts.on('swap:' + scriptName, this._scriptsIndex[scriptName].onSwap);\n\n\t\t\t\tif (!args.preloading) {\n\t\t\t\t\tif (scriptInstance.enabled && !scriptInstance._initialized) {\n\t\t\t\t\t\tscriptInstance._initialized = true;\n\t\t\t\t\t\tif (scriptInstance.initialize) this._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.initialize);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scriptInstance.enabled && !scriptInstance._postInitialized) {\n\t\t\t\t\t\tscriptInstance._postInitialized = true;\n\t\t\t\t\t\tif (scriptInstance.postInitialize) this._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.postInitialize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn scriptInstance;\n\t\t\t}\n\n\t\t\tconsole.warn('script \\'' + scriptName + '\\' is already added to entity \\'' + this.entity.name + '\\'');\n\t\t} else {\n\t\t\tthis._scriptsIndex[scriptName] = {\n\t\t\t\tawaiting: true,\n\t\t\t\tind: this._scripts.length\n\t\t\t};\n\t\t\tconsole.warn('script \\'' + scriptName + '\\' is not found, awaiting it to be added to registry');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy(nameOrType) {\n\t\tvar scriptName = nameOrType;\n\t\tvar scriptType = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tdelete this._scriptsIndex[scriptName];\n\t\tif (!scriptData) return false;\n\t\tvar scriptInstance = scriptData.instance;\n\n\t\tif (scriptInstance && !scriptInstance._destroyed) {\n\t\t\tscriptInstance.enabled = false;\n\t\t\tscriptInstance._destroyed = true;\n\n\t\t\tif (!this._isLoopingThroughScripts) {\n\t\t\t\tvar ind = this._removeScriptInstance(scriptInstance);\n\n\t\t\t\tif (ind >= 0) {\n\t\t\t\t\tthis._resetExecutionOrder(ind, this._scripts.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._destroyedScripts.push(scriptInstance);\n\t\t\t}\n\t\t}\n\n\t\tthis.system.app.scripts.off('swap:' + scriptName, scriptData.onSwap);\n\t\tdelete this[scriptName];\n\t\tthis.fire('destroy', scriptName, scriptInstance || null);\n\t\tthis.fire('destroy:' + scriptName, scriptInstance || null);\n\t\tif (scriptInstance) scriptInstance.fire('destroy');\n\t\treturn true;\n\t}\n\n\tswap(nameOrType) {\n\t\tvar scriptName = nameOrType;\n\t\tvar scriptType = nameOrType;\n\n\t\tif (typeof scriptType === 'string') {\n\t\t\tscriptType = this.system.app.scripts.get(scriptType);\n\t\t} else if (scriptType) {\n\t\t\tscriptName = scriptType.__name;\n\t\t}\n\n\t\tvar old = this._scriptsIndex[scriptName];\n\t\tif (!old || !old.instance) return false;\n\t\tvar scriptInstanceOld = old.instance;\n\n\t\tvar ind = this._scripts.indexOf(scriptInstanceOld);\n\n\t\tvar scriptInstance = new scriptType({\n\t\t\tapp: this.system.app,\n\t\t\tentity: this.entity,\n\t\t\tenabled: scriptInstanceOld.enabled,\n\t\t\tattributes: scriptInstanceOld.__attributes\n\t\t});\n\t\tif (!scriptInstance.swap) return false;\n\n\t\tscriptInstance.__initializeAttributes();\n\n\t\tthis._scripts[ind] = scriptInstance;\n\t\tthis._scriptsIndex[scriptName].instance = scriptInstance;\n\t\tthis[scriptName] = scriptInstance;\n\t\tscriptInstance.__executionOrder = ind;\n\n\t\tif (scriptInstanceOld.update) {\n\t\t\tthis._updateList.remove(scriptInstanceOld);\n\t\t}\n\n\t\tif (scriptInstanceOld.postUpdate) {\n\t\t\tthis._postUpdateList.remove(scriptInstanceOld);\n\t\t}\n\n\t\tif (scriptInstance.update) {\n\t\t\tthis._updateList.insert(scriptInstance);\n\t\t}\n\n\t\tif (scriptInstance.postUpdate) {\n\t\t\tthis._postUpdateList.insert(scriptInstance);\n\t\t}\n\n\t\tthis._scriptMethod(scriptInstance, ScriptComponent.scriptMethods.swap, scriptInstanceOld);\n\n\t\tthis.fire('swap', scriptName, scriptInstance);\n\t\tthis.fire('swap:' + scriptName, scriptInstance);\n\t\treturn true;\n\t}\n\n\tresolveDuplicatedEntityReferenceProperties(oldScriptComponent, duplicatedIdsMap) {\n\t\tvar newScriptComponent = this.entity.script;\n\t\tvar i, j;\n\n\t\tfor (var scriptName in oldScriptComponent._scriptsIndex) {\n\t\t\tvar scriptType = this.system.app.scripts.get(scriptName);\n\n\t\t\tif (!scriptType) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar script = oldScriptComponent._scriptsIndex[scriptName];\n\n\t\t\tif (!script || !script.instance) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar newAttributesRaw = newScriptComponent[scriptName].__attributesRaw;\n\t\t\tvar newAttributes = newScriptComponent[scriptName].__attributes;\n\n\t\t\tif (!newAttributesRaw && !newAttributes) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar useGuid = !!newAttributesRaw;\n\t\t\tvar oldAttributes = script.instance.__attributes;\n\n\t\t\tfor (var attributeName in oldAttributes) {\n\t\t\t\tif (!oldAttributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar attribute = scriptType.attributes.get(attributeName);\n\n\t\t\t\tif (!attribute) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (attribute.type === 'entity') {\n\t\t\t\t\tthis._resolveEntityScriptAttribute(attribute, attributeName, oldAttributes[attributeName], useGuid, newAttributesRaw || newAttributes, duplicatedIdsMap);\n\t\t\t\t} else if (attribute.type === 'json' && Array.isArray(attribute.schema)) {\n\t\t\t\t\tvar oldValue = oldAttributes[attributeName];\n\t\t\t\t\tvar newJsonValue = newAttributesRaw ? newAttributesRaw[attributeName] : newAttributes[attributeName];\n\n\t\t\t\t\tfor (i = 0; i < attribute.schema.length; i++) {\n\t\t\t\t\t\tvar field = attribute.schema[i];\n\n\t\t\t\t\t\tif (field.type !== 'entity') {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (attribute.array) {\n\t\t\t\t\t\t\tfor (j = 0; j < oldValue.length; j++) {\n\t\t\t\t\t\t\t\tthis._resolveEntityScriptAttribute(field, field.name, oldValue[j][field.name], useGuid, newJsonValue[j], duplicatedIdsMap);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._resolveEntityScriptAttribute(field, field.name, oldValue[field.name], useGuid, newJsonValue, duplicatedIdsMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmove(nameOrType, ind) {\n\t\tvar len = this._scripts.length;\n\t\tif (ind >= len || ind < 0) return false;\n\t\tvar scriptType = nameOrType;\n\t\tvar scriptName = nameOrType;\n\n\t\tif (typeof scriptName !== 'string') {\n\t\t\tscriptName = nameOrType.__name;\n\t\t} else {\n\t\t\tscriptType = null;\n\t\t}\n\n\t\tvar scriptData = this._scriptsIndex[scriptName];\n\t\tif (!scriptData || !scriptData.instance) return false;\n\t\tvar scriptInstance = scriptData.instance;\n\t\tif (scriptType && !(scriptInstance instanceof scriptType)) return false;\n\n\t\tvar indOld = this._scripts.indexOf(scriptInstance);\n\n\t\tif (indOld === -1 || indOld === ind) return false;\n\n\t\tthis._scripts.splice(ind, 0, this._scripts.splice(indOld, 1)[0]);\n\n\t\tthis._resetExecutionOrder(0, len);\n\n\t\tthis._updateList.sort();\n\n\t\tthis._postUpdateList.sort();\n\n\t\tthis.fire('move', scriptName, scriptInstance, ind, indOld);\n\t\tthis.fire('move:' + scriptName, scriptInstance, ind, indOld);\n\t\treturn true;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tvar oldValue = this._enabled;\n\t\tthis._enabled = value;\n\t\tthis.fire('set', 'enabled', oldValue, value);\n\t}\n\n\tget scripts() {\n\t\treturn this._scripts;\n\t}\n\n\tset scripts(value) {\n\t\tthis._scriptsData = value;\n\n\t\tfor (var key in value) {\n\t\t\tif (!value.hasOwnProperty(key)) continue;\n\t\t\tvar script = this._scriptsIndex[key];\n\n\t\t\tif (script) {\n\t\t\t\tif (typeof value[key].enabled === 'boolean') script.enabled = !!value[key].enabled;\n\n\t\t\t\tif (typeof value[key].attributes === 'object') {\n\t\t\t\t\tfor (var attr in value[key].attributes) {\n\t\t\t\t\t\tif (ScriptAttributes.reservedNames.has(attr)) continue;\n\n\t\t\t\t\t\tif (!script.__attributes.hasOwnProperty(attr)) {\n\t\t\t\t\t\t\tvar scriptType = this.system.app.scripts.get(key);\n\t\t\t\t\t\t\tif (scriptType) scriptType.attributes.add(attr, {});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscript[attr] = value[key].attributes[attr];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log(this.order);\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nScriptComponent.scriptMethods = {\n\tinitialize: 'initialize',\n\tpostInitialize: 'postInitialize',\n\tupdate: 'update',\n\tpostUpdate: 'postUpdate',\n\tswap: 'swap'\n};\n\nclass ScriptComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst METHOD_INITIALIZE_ATTRIBUTES = '_onInitializeAttributes';\nconst METHOD_INITIALIZE = '_onInitialize';\nconst METHOD_POST_INITIALIZE = '_onPostInitialize';\nconst METHOD_UPDATE = '_onUpdate';\nconst METHOD_POST_UPDATE = '_onPostUpdate';\nvar executionOrderCounter = 0;\n\nclass ScriptComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'script';\n\t\tthis.ComponentType = ScriptComponent;\n\t\tthis.DataType = ScriptComponentData;\n\t\tthis._components = new SortedLoopArray({\n\t\t\tsortBy: '_executionOrder'\n\t\t});\n\t\tthis._enabledComponents = new SortedLoopArray({\n\t\t\tsortBy: '_executionOrder'\n\t\t});\n\t\tthis.preloading = true;\n\t\tthis.on('beforeremove', this._onBeforeRemove, this);\n\t\tComponentSystem.bind('initialize', this._onInitialize, this);\n\t\tComponentSystem.bind('postInitialize', this._onPostInitialize, this);\n\t\tComponentSystem.bind('update', this._onUpdate, this);\n\t\tComponentSystem.bind('postUpdate', this._onPostUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data) {\n\t\tcomponent._executionOrder = executionOrderCounter++;\n\n\t\tthis._components.append(component);\n\n\t\tif (executionOrderCounter > Number.MAX_SAFE_INTEGER) {\n\t\t\tthis._resetExecutionOrder();\n\t\t}\n\n\t\tcomponent.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;\n\n\t\tif (component.enabled && component.entity.enabled) {\n\t\t\tthis._enabledComponents.append(component);\n\t\t}\n\n\t\tif (data.hasOwnProperty('order') && data.hasOwnProperty('scripts')) {\n\t\t\tcomponent._scriptsData = data.scripts;\n\n\t\t\tfor (var i = 0; i < data.order.length; i++) {\n\t\t\t\tcomponent.create(data.order[i], {\n\t\t\t\t\tenabled: data.scripts[data.order[i]].enabled,\n\t\t\t\t\tattributes: data.scripts[data.order[i]].attributes,\n\t\t\t\t\tpreloading: this.preloading\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar i, key;\n\t\tvar order = [];\n\t\tvar scripts = {};\n\n\t\tfor (i = 0; i < entity.script._scripts.length; i++) {\n\t\t\tvar scriptInstance = entity.script._scripts[i];\n\t\t\tvar scriptName = scriptInstance.__scriptType.__name;\n\t\t\torder.push(scriptName);\n\t\t\tvar attributes = {};\n\n\t\t\tfor (key in scriptInstance.__attributes) attributes[key] = scriptInstance.__attributes[key];\n\n\t\t\tscripts[scriptName] = {\n\t\t\t\tenabled: scriptInstance._enabled,\n\t\t\t\tattributes: attributes\n\t\t\t};\n\t\t}\n\n\t\tfor (key in entity.script._scriptsIndex) {\n\t\t\tif (key.awaiting) {\n\t\t\t\torder.splice(key.ind, 0, key);\n\t\t\t}\n\t\t}\n\n\t\tvar data = {\n\t\t\tenabled: entity.script.enabled,\n\t\t\torder: order,\n\t\t\tscripts: scripts\n\t\t};\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\t_resetExecutionOrder() {\n\t\texecutionOrderCounter = 0;\n\n\t\tfor (var i = 0, len = this._components.length; i < len; i++) {\n\t\t\tthis._components.items[i]._executionOrder = executionOrderCounter++;\n\t\t}\n\t}\n\n\t_callComponentMethod(components, name, dt) {\n\t\tfor (components.loopIndex = 0; components.loopIndex < components.length; components.loopIndex++) {\n\t\t\tcomponents.items[components.loopIndex][name](dt);\n\t\t}\n\t}\n\n\t_onInitialize() {\n\t\tthis.preloading = false;\n\n\t\tthis._callComponentMethod(this._components, METHOD_INITIALIZE_ATTRIBUTES);\n\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_INITIALIZE);\n\t}\n\n\t_onPostInitialize() {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_POST_INITIALIZE);\n\t}\n\n\t_onUpdate(dt) {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_UPDATE, dt);\n\t}\n\n\t_onPostUpdate(dt) {\n\t\tthis._callComponentMethod(this._enabledComponents, METHOD_POST_UPDATE, dt);\n\t}\n\n\t_addComponentToEnabled(component) {\n\t\tthis._enabledComponents.insert(component);\n\t}\n\n\t_removeComponentFromEnabled(component) {\n\t\tthis._enabledComponents.remove(component);\n\t}\n\n\t_onBeforeRemove(entity, component) {\n\t\tvar ind = this._components.items.indexOf(component);\n\n\t\tif (ind >= 0) {\n\t\t\tcomponent._onBeforeRemove();\n\t\t}\n\n\t\tthis._removeComponentFromEnabled(component);\n\n\t\tthis._components.remove(component);\n\t}\n\n}\n\nclass ScriptLegacyComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis.on(\"set_scripts\", this.onSetScripts, this);\n\t}\n\n\tsend(name, functionName) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\t\tvar instances = this.entity.script.instances;\n\t\tvar fn;\n\n\t\tif (instances && instances[name]) {\n\t\t\tfn = instances[name].instance[functionName];\n\n\t\t\tif (fn) {\n\t\t\t\treturn fn.apply(instances[name].instance, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tif (this.data.areScriptsLoaded && !this.system.preloading) {\n\t\t\tif (!this.data.initialized) {\n\t\t\t\tthis.system._initializeScriptComponent(this);\n\t\t\t} else {\n\t\t\t\tthis.system._enableScriptComponent(this);\n\t\t\t}\n\n\t\t\tif (!this.data.postInitialized) {\n\t\t\t\tthis.system._postInitializeScriptComponent(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tthis.system._disableScriptComponent(this);\n\t}\n\n\tonSetScripts(name, oldValue, newValue) {\n\t\tif (!this.system._inTools || this.runInTools) {\n\t\t\tif (this._updateScriptAttributes(oldValue, newValue)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.enabled) {\n\t\t\t\tthis.system._disableScriptComponent(this);\n\t\t\t}\n\n\t\t\tthis.system._destroyScriptComponent(this);\n\n\t\t\tthis.data.areScriptsLoaded = false;\n\t\t\tvar scripts = newValue;\n\t\t\tvar urls = scripts.map(function (s) {\n\t\t\t\treturn s.url;\n\t\t\t});\n\n\t\t\tif (this._loadFromCache(urls)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._loadScripts(urls);\n\t\t}\n\t}\n\n\t_updateScriptAttributes(oldValue, newValue) {\n\t\tvar onlyUpdateAttributes = true;\n\n\t\tif (oldValue.length !== newValue.length) {\n\t\t\tonlyUpdateAttributes = false;\n\t\t} else {\n\t\t\tvar i,\n\t\t\t\t\tlen = newValue.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (oldValue[i].url !== newValue[i].url) {\n\t\t\t\t\tonlyUpdateAttributes = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (onlyUpdateAttributes) {\n\t\t\tfor (var key in this.instances) {\n\t\t\t\tif (this.instances.hasOwnProperty(key)) {\n\t\t\t\t\tthis.system._updateAccessors(this.entity, this.instances[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn onlyUpdateAttributes;\n\t}\n\n\t_loadFromCache(urls) {\n\t\tvar i, len;\n\t\tvar cached = [];\n\t\tvar prefix = this.system.app._scriptPrefix || \"\";\n\t\tvar regex = /^http(s)?:\\/\\//i;\n\n\t\tfor (i = 0, len = urls.length; i < len; i++) {\n\t\t\tvar url = urls[i];\n\n\t\t\tif (!regex.test(url)) {\n\t\t\t\turl = path.join(prefix, url);\n\t\t\t}\n\n\t\t\tvar type = this.system.app.loader.getFromCache(url, 'script');\n\n\t\t\tif (!type) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tcached.push(type);\n\t\t}\n\n\t\tfor (i = 0, len = cached.length; i < len; i++) {\n\t\t\tvar ScriptType = cached[i];\n\n\t\t\tif (ScriptType === true) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (ScriptType && this.entity.script) {\n\t\t\t\tif (!this.entity.script.instances[ScriptType._pcScriptName]) {\n\t\t\t\t\tvar instance = new ScriptType(this.entity);\n\n\t\t\t\t\tthis.system._preRegisterInstance(this.entity, urls[i], ScriptType._pcScriptName, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.data) {\n\t\t\tthis.data.areScriptsLoaded = true;\n\t\t}\n\n\t\tif (!this.system.preloading) {\n\t\t\tthis.system.onInitialize(this.entity);\n\t\t\tthis.system.onPostInitialize(this.entity);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t_loadScripts(urls) {\n\t\tvar count = urls.length;\n\t\tvar prefix = this.system.app._scriptPrefix || \"\";\n\t\turls.forEach(function (url) {\n\t\t\tvar _url = null;\n\t\t\tvar _unprefixed = null;\n\n\t\t\tif (url.toLowerCase().startsWith(\"http://\") || url.toLowerCase().startsWith(\"https://\")) {\n\t\t\t\t_unprefixed = url;\n\t\t\t\t_url = url;\n\t\t\t} else {\n\t\t\t\t_unprefixed = url;\n\t\t\t\t_url = path.join(prefix, url);\n\t\t\t}\n\n\t\t\tthis.system.app.loader.load(_url, \"script\", function (err, ScriptType) {\n\t\t\t\tcount--;\n\n\t\t\t\tif (!err) {\n\t\t\t\t\tif (ScriptType && this.entity.script) {\n\t\t\t\t\t\tif (!this.entity.script.instances[ScriptType._pcScriptName]) {\n\t\t\t\t\t\t\tvar instance = new ScriptType(this.entity);\n\n\t\t\t\t\t\t\tthis.system._preRegisterInstance(this.entity, _unprefixed, ScriptType._pcScriptName, instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tthis.data.areScriptsLoaded = true;\n\n\t\t\t\t\tif (!this.system.preloading) {\n\t\t\t\t\t\tthis.system.onInitialize(this.entity);\n\t\t\t\t\t\tthis.system.onPostInitialize(this.entity);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n}\n\nclass ScriptLegacyComponentData {\n\tconstructor() {\n\t\tthis.scripts = [];\n\t\tthis.enabled = true;\n\t\tthis.instances = {};\n\t\tthis._instances = {};\n\t\tthis.runInTools = false;\n\t\tthis.attributes = {};\n\t\tthis.initialized = false;\n\t\tthis.postInitialized = false;\n\t\tthis.areScriptsLoaded = false;\n\t}\n\n}\n\nconst _schema$5 = ['enabled', 'scripts', 'instances', 'runInTools'];\nconst INITIALIZE = \"initialize\";\nconst POST_INITIALIZE = \"postInitialize\";\nconst UPDATE = \"update\";\nconst POST_UPDATE = \"postUpdate\";\nconst FIXED_UPDATE = \"fixedUpdate\";\nconst TOOLS_UPDATE = \"toolsUpdate\";\nconst ON_ENABLE = 'onEnable';\nconst ON_DISABLE = 'onDisable';\n\nclass ScriptLegacyComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'script';\n\t\tthis.ComponentType = ScriptLegacyComponent;\n\t\tthis.DataType = ScriptLegacyComponentData;\n\t\tthis.schema = _schema$5;\n\t\tthis.preloading = false;\n\t\tthis.instancesWithUpdate = [];\n\t\tthis.instancesWithFixedUpdate = [];\n\t\tthis.instancesWithPostUpdate = [];\n\t\tthis.instancesWithToolsUpdate = [];\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t\tComponentSystem.bind(INITIALIZE, this.onInitialize, this);\n\t\tComponentSystem.bind(POST_INITIALIZE, this.onPostInitialize, this);\n\t\tComponentSystem.bind(UPDATE, this.onUpdate, this);\n\t\tComponentSystem.bind(FIXED_UPDATE, this.onFixedUpdate, this);\n\t\tComponentSystem.bind(POST_UPDATE, this.onPostUpdate, this);\n\t\tComponentSystem.bind(TOOLS_UPDATE, this.onToolsUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['runInTools', 'enabled', 'scripts'];\n\n\t\tif (data.scripts && data.scripts.length) {\n\t\t\tdata.scripts.forEach(function (script) {\n\t\t\t\tif (script.attributes && Array.isArray(script.attributes)) {\n\t\t\t\t\tvar dict = {};\n\n\t\t\t\t\tfor (var i = 0; i < script.attributes.length; i++) {\n\t\t\t\t\t\tdict[script.attributes[i].name] = script.attributes[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tscript.attributes = dict;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar src = this.store[entity.getGuid()];\n\t\tvar data = {\n\t\t\trunInTools: src.data.runInTools,\n\t\t\tscripts: [],\n\t\t\tenabled: src.data.enabled\n\t\t};\n\t\tvar scripts = src.data.scripts;\n\n\t\tfor (var i = 0, len = scripts.length; i < len; i++) {\n\t\t\tvar attributes = scripts[i].attributes;\n\n\t\t\tif (attributes) {\n\t\t\t\tdelete scripts[i].attributes;\n\t\t\t}\n\n\t\t\tdata.scripts.push(extend({}, scripts[i]));\n\n\t\t\tif (attributes) {\n\t\t\t\tdata.scripts[i].attributes = this._cloneAttributes(attributes);\n\t\t\t\tscripts[i].attributes = attributes;\n\t\t\t}\n\t\t}\n\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tif (component.enabled) {\n\t\t\tthis._disableScriptComponent(component);\n\t\t}\n\n\t\tthis._destroyScriptComponent(component);\n\t}\n\n\tonInitialize(root) {\n\t\tthis._registerInstances(root);\n\n\t\tif (root.enabled) {\n\t\t\tif (root.script && root.script.enabled) {\n\t\t\t\tthis._initializeScriptComponent(root.script);\n\t\t\t}\n\n\t\t\tvar children = root._children;\n\t\t\tvar i,\n\t\t\t\t\tlen = children.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\t\tthis.onInitialize(children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonPostInitialize(root) {\n\t\tif (root.enabled) {\n\t\t\tif (root.script && root.script.enabled) {\n\t\t\t\tthis._postInitializeScriptComponent(root.script);\n\t\t\t}\n\n\t\t\tvar children = root._children;\n\t\t\tvar i,\n\t\t\t\t\tlen = children.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\t\tthis.onPostInitialize(children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_callInstancesMethod(script, method) {\n\t\tvar instances = script.data.instances;\n\n\t\tfor (var name in instances) {\n\t\t\tif (instances.hasOwnProperty(name)) {\n\t\t\t\tvar instance = instances[name].instance;\n\n\t\t\t\tif (instance[method]) {\n\t\t\t\t\tinstance[method]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_initializeScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, INITIALIZE);\n\n\t\tscript.data.initialized = true;\n\n\t\tif (script.enabled && script.entity.enabled) {\n\t\t\tthis._enableScriptComponent(script);\n\t\t}\n\t}\n\n\t_enableScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, ON_ENABLE);\n\t}\n\n\t_disableScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, ON_DISABLE);\n\t}\n\n\t_destroyScriptComponent(script) {\n\t\tvar index;\n\t\tvar instances = script.data.instances;\n\n\t\tfor (var name in instances) {\n\t\t\tif (instances.hasOwnProperty(name)) {\n\t\t\t\tvar instance = instances[name].instance;\n\n\t\t\t\tif (instance.destroy) {\n\t\t\t\t\tinstance.destroy();\n\t\t\t\t}\n\n\t\t\t\tif (instance.update) {\n\t\t\t\t\tindex = this.instancesWithUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.fixedUpdate) {\n\t\t\t\t\tindex = this.instancesWithFixedUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithFixedUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.postUpdate) {\n\t\t\t\t\tindex = this.instancesWithPostUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithPostUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (instance.toolsUpdate) {\n\t\t\t\t\tindex = this.instancesWithToolsUpdate.indexOf(instance);\n\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.instancesWithToolsUpdate.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (script.instances[name].instance === script[name]) {\n\t\t\t\t\tdelete script[name];\n\t\t\t\t}\n\n\t\t\t\tdelete script.instances[name];\n\t\t\t}\n\t\t}\n\t}\n\n\t_postInitializeScriptComponent(script) {\n\t\tthis._callInstancesMethod(script, POST_INITIALIZE);\n\n\t\tscript.data.postInitialized = true;\n\t}\n\n\t_updateInstances(method, updateList, dt) {\n\t\tvar item;\n\n\t\tfor (var i = 0, len = updateList.length; i < len; i++) {\n\t\t\titem = updateList[i];\n\n\t\t\tif (item && item.entity && item.entity.enabled && item.entity.script.enabled) {\n\t\t\t\titem[method](dt);\n\t\t\t}\n\t\t}\n\t}\n\n\tonUpdate(dt) {\n\t\tthis._updateInstances(UPDATE, this.instancesWithUpdate, dt);\n\t}\n\n\tonFixedUpdate(dt) {\n\t\tthis._updateInstances(FIXED_UPDATE, this.instancesWithFixedUpdate, dt);\n\t}\n\n\tonPostUpdate(dt) {\n\t\tthis._updateInstances(POST_UPDATE, this.instancesWithPostUpdate, dt);\n\t}\n\n\tonToolsUpdate(dt) {\n\t\tthis._updateInstances(TOOLS_UPDATE, this.instancesWithToolsUpdate, dt);\n\t}\n\n\tbroadcast(name, functionName) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\t\tvar id, data, fn;\n\t\tvar dataStore = this.store;\n\n\t\tfor (id in dataStore) {\n\t\t\tif (dataStore.hasOwnProperty(id)) {\n\t\t\t\tdata = dataStore[id].data;\n\n\t\t\t\tif (data.instances[name]) {\n\t\t\t\t\tfn = data.instances[name].instance[functionName];\n\n\t\t\t\t\tif (fn) {\n\t\t\t\t\t\tfn.apply(data.instances[name].instance, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_preRegisterInstance(entity, url, name, instance) {\n\t\tif (entity.script) {\n\t\t\tentity.script.data._instances = entity.script.data._instances || {};\n\n\t\t\tif (entity.script.data._instances[name]) {\n\t\t\t\tthrow Error(\"Script name collision '\" + name + \"'. Scripts from '\" + url + \"' and '\" + entity.script.data._instances[name].url + \"' {\" + entity.getGuid() + \"}\");\n\t\t\t}\n\n\t\t\tentity.script.data._instances[name] = {\n\t\t\t\turl: url,\n\t\t\t\tname: name,\n\t\t\t\tinstance: instance\n\t\t\t};\n\t\t}\n\t}\n\n\t_registerInstances(entity) {\n\t\tvar preRegistered, instance, instanceName;\n\n\t\tif (entity.script) {\n\t\t\tif (entity.script.data._instances) {\n\t\t\t\tentity.script.instances = entity.script.data._instances;\n\n\t\t\t\tfor (instanceName in entity.script.instances) {\n\t\t\t\t\tpreRegistered = entity.script.instances[instanceName];\n\t\t\t\t\tinstance = preRegistered.instance;\n\t\t\t\t\tevents.attach(instance);\n\n\t\t\t\t\tif (instance.update) {\n\t\t\t\t\t\tthis.instancesWithUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.fixedUpdate) {\n\t\t\t\t\t\tthis.instancesWithFixedUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.postUpdate) {\n\t\t\t\t\t\tthis.instancesWithPostUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance.toolsUpdate) {\n\t\t\t\t\t\tthis.instancesWithToolsUpdate.push(instance);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (entity.script.scripts) {\n\t\t\t\t\t\tthis._createAccessors(entity, preRegistered);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (entity.script[instanceName]) {\n\t\t\t\t\t\tthrow Error(\"Script with name '\" + instanceName + \"' is already attached to Script Component\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tentity.script[instanceName] = instance;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdelete entity.script.data._instances;\n\t\t\t}\n\t\t}\n\n\t\tvar children = entity._children;\n\t\tvar i,\n\t\t\t\tlen = children.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (children[i] instanceof Entity) {\n\t\t\t\tthis._registerInstances(children[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t_cloneAttributes(attributes) {\n\t\tvar result = {};\n\n\t\tfor (var key in attributes) {\n\t\t\tif (!attributes.hasOwnProperty(key)) continue;\n\n\t\t\tif (attributes[key].type !== 'entity') {\n\t\t\t\tresult[key] = extend({}, attributes[key]);\n\t\t\t} else {\n\t\t\t\tvar val = attributes[key].value;\n\t\t\t\tdelete attributes[key].value;\n\t\t\t\tresult[key] = extend({}, attributes[key]);\n\t\t\t\tresult[key].value = val;\n\t\t\t\tattributes[key].value = val;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_createAccessors(entity, instance) {\n\t\tvar self = this;\n\t\tvar i;\n\t\tvar len = entity.script.scripts.length;\n\t\tvar url = instance.url;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tvar script = entity.script.scripts[i];\n\n\t\t\tif (script.url === url) {\n\t\t\t\tvar attributes = script.attributes;\n\n\t\t\t\tif (script.name && attributes) {\n\t\t\t\t\tfor (var key in attributes) {\n\t\t\t\t\t\tif (attributes.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tself._createAccessor(attributes[key], instance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tentity.script.data.attributes[script.name] = self._cloneAttributes(attributes);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_createAccessor(attribute, instance) {\n\t\tvar self = this;\n\t\tattribute = {\n\t\t\tname: attribute.name,\n\t\t\tvalue: attribute.value,\n\t\t\ttype: attribute.type\n\t\t};\n\n\t\tself._convertAttributeValue(attribute);\n\n\t\tObject.defineProperty(instance.instance, attribute.name, {\n\t\t\tget: function () {\n\t\t\t\treturn attribute.value;\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\tvar oldValue = attribute.value;\n\t\t\t\tattribute.value = value;\n\n\t\t\t\tself._convertAttributeValue(attribute);\n\n\t\t\t\tinstance.instance.fire(\"set\", attribute.name, oldValue, attribute.value);\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t});\n\t}\n\n\t_updateAccessors(entity, instance) {\n\t\tvar self = this;\n\t\tvar i;\n\t\tvar len = entity.script.scripts.length;\n\t\tvar key;\n\t\tvar url = instance.url;\n\t\tvar scriptComponent, script, name, attributes;\n\t\tvar previousAttributes;\n\t\tvar oldAttribute;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tscriptComponent = entity.script;\n\t\t\tscript = scriptComponent.scripts[i];\n\n\t\t\tif (script.url === url) {\n\t\t\t\tname = script.name;\n\t\t\t\tattributes = script.attributes;\n\n\t\t\t\tif (name) {\n\t\t\t\t\tif (attributes) {\n\t\t\t\t\t\tfor (key in attributes) {\n\t\t\t\t\t\t\tif (attributes.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tself._createAccessor(attributes[key], instance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tpreviousAttributes = scriptComponent.data.attributes[name];\n\n\t\t\t\t\tif (previousAttributes) {\n\t\t\t\t\t\tfor (key in previousAttributes) {\n\t\t\t\t\t\t\toldAttribute = previousAttributes[key];\n\n\t\t\t\t\t\t\tif (!(key in attributes)) {\n\t\t\t\t\t\t\t\tdelete instance.instance[oldAttribute.name];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (attributes[key].value !== oldAttribute.value) {\n\t\t\t\t\t\t\t\t\tif (instance.instance.onAttributeChanged) {\n\t\t\t\t\t\t\t\t\t\tinstance.instance.onAttributeChanged(oldAttribute.name, oldAttribute.value, attributes[key].value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attributes) {\n\t\t\t\t\t\tscriptComponent.data.attributes[name] = self._cloneAttributes(attributes);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete scriptComponent.data.attributes[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_convertAttributeValue(attribute) {\n\t\tif (attribute.type === 'rgb' || attribute.type === 'rgba') {\n\t\t\tif (Array.isArray(attribute.value)) {\n\t\t\t\tattribute.value = attribute.value.length === 3 ? new Color(attribute.value[0], attribute.value[1], attribute.value[2]) : new Color(attribute.value[0], attribute.value[1], attribute.value[2], attribute.value[3]);\n\t\t\t}\n\t\t} else if (attribute.type === 'vec2') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec2(attribute.value[0], attribute.value[1]);\n\t\t} else if (attribute.type === 'vec3' || attribute.type === 'vector') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec3(attribute.value[0], attribute.value[1], attribute.value[2]);\n\t\t} else if (attribute.type === 'vec4') {\n\t\t\tif (Array.isArray(attribute.value)) attribute.value = new Vec4(attribute.value[0], attribute.value[1], attribute.value[2], attribute.value[3]);\n\t\t} else if (attribute.type === 'entity') {\n\t\t\tif (attribute.value !== null && typeof attribute.value === 'string') attribute.value = this.app.root.findByGuid(attribute.value);\n\t\t} else if (attribute.type === 'curve' || attribute.type === 'colorcurve') {\n\t\t\tvar curveType = attribute.value.keys[0] instanceof Array ? CurveSet : Curve;\n\t\t\tattribute.value = new curveType(attribute.value.keys);\n\t\t\tattribute.value.type = attribute.value.type;\n\t\t}\n\t}\n\n}\n\nComponent._buildAccessors(ScriptLegacyComponent.prototype, _schema$5);\n\nvar _inputScreenPosition = new Vec2();\n\nvar _inputWorldPosition = new Vec3();\n\nvar _rayOrigin = new Vec3();\n\nvar _rayDirection = new Vec3();\n\nvar _planeOrigin = new Vec3();\n\nvar _planeNormal = new Vec3();\n\nvar _entityRotation = new Quat();\n\nconst OPPOSITE_AXIS = {\n\tx: 'y',\n\ty: 'x'\n};\n\nclass ElementDragHelper extends EventHandler {\n\tconstructor(element, axis) {\n\t\tsuper();\n\n\t\tif (!element || !(element instanceof ElementComponent)) {\n\t\t\tthrow new Error('Element was null or not an ElementComponent');\n\t\t}\n\n\t\tif (axis && axis !== 'x' && axis !== 'y') {\n\t\t\tthrow new Error('Unrecognized axis: ' + axis);\n\t\t}\n\n\t\tthis._element = element;\n\t\tthis._app = element.system.app;\n\t\tthis._axis = axis || null;\n\t\tthis._enabled = true;\n\t\tthis._dragScale = new Vec3();\n\t\tthis._dragStartMousePosition = new Vec3();\n\t\tthis._dragStartHandlePosition = new Vec3();\n\t\tthis._deltaMousePosition = new Vec3();\n\t\tthis._deltaHandlePosition = new Vec3();\n\t\tthis._isDragging = false;\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis._element[onOrOff]('mousedown', this._onMouseDownOrTouchStart, this);\n\n\t\tthis._element[onOrOff]('touchstart', this._onMouseDownOrTouchStart, this);\n\t}\n\n\t_toggleDragListeners(onOrOff) {\n\t\tvar isOn = onOrOff === 'on';\n\t\tvar addOrRemoveEventListener = isOn ? 'addEventListener' : 'removeEventListener';\n\n\t\tif (this._hasDragListeners && isOn) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._handleMouseUpOrTouchEnd) {\n\t\t\tthis._handleMouseUpOrTouchEnd = this._onMouseUpOrTouchEnd.bind(this);\n\t\t}\n\n\t\tif (this._app.mouse) {\n\t\t\tthis._app.mouse[onOrOff]('mousemove', this._onMove, this);\n\n\t\t\twindow[addOrRemoveEventListener]('mouseup', this._handleMouseUpOrTouchEnd, false);\n\t\t}\n\n\t\tif (platform.touch) {\n\t\t\tthis._app.touch[onOrOff]('touchmove', this._onMove, this);\n\n\t\t\twindow[addOrRemoveEventListener]('touchend', this._handleMouseUpOrTouchEnd, false);\n\t\t\twindow[addOrRemoveEventListener]('touchcancel', this._handleMouseUpOrTouchEnd, false);\n\t\t}\n\n\t\tthis._hasDragListeners = isOn;\n\t}\n\n\t_onMouseDownOrTouchStart(event) {\n\t\tif (this._element && !this._isDragging && this.enabled) {\n\t\t\tthis._dragCamera = event.camera;\n\n\t\t\tthis._calculateDragScale();\n\n\t\t\tvar currentMousePosition = this._screenToLocal(event);\n\n\t\t\tif (currentMousePosition) {\n\t\t\t\tthis._toggleDragListeners('on');\n\n\t\t\t\tthis._isDragging = true;\n\n\t\t\t\tthis._dragStartMousePosition.copy(currentMousePosition);\n\n\t\t\t\tthis._dragStartHandlePosition.copy(this._element.entity.getLocalPosition());\n\n\t\t\t\tthis.fire('drag:start');\n\t\t\t}\n\t\t}\n\t}\n\n\t_onMouseUpOrTouchEnd() {\n\t\tif (this._isDragging) {\n\t\t\tthis._isDragging = false;\n\n\t\t\tthis._toggleDragListeners('off');\n\n\t\t\tthis.fire('drag:end');\n\t\t}\n\t}\n\n\t_screenToLocal(event) {\n\t\tthis._determineInputPosition(event);\n\n\t\tthis._chooseRayOriginAndDirection();\n\n\t\t_planeOrigin.copy(this._element.entity.getPosition());\n\n\t\t_planeNormal.copy(this._element.entity.forward).mulScalar(-1);\n\n\t\tvar denominator = _planeNormal.dot(_rayDirection);\n\n\t\tif (Math.abs(denominator) > 0) {\n\t\t\tvar rayOriginToPlaneOrigin = _planeOrigin.sub(_rayOrigin);\n\n\t\t\tvar collisionDistance = rayOriginToPlaneOrigin.dot(_planeNormal) / denominator;\n\n\t\t\tvar position = _rayOrigin.add(_rayDirection.mulScalar(collisionDistance));\n\n\t\t\t_entityRotation.copy(this._element.entity.getRotation()).invert().transformVector(position, position);\n\n\t\t\tposition.mul(this._dragScale);\n\t\t\treturn position;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t_determineInputPosition(event) {\n\t\tvar devicePixelRatio = this._app.graphicsDevice.maxPixelRatio;\n\n\t\tif (typeof event.x !== 'undefined' && typeof event.y !== 'undefined') {\n\t\t\t_inputScreenPosition.x = event.x * devicePixelRatio;\n\t\t\t_inputScreenPosition.y = event.y * devicePixelRatio;\n\t\t} else if (event.changedTouches) {\n\t\t\t_inputScreenPosition.x = event.changedTouches[0].x * devicePixelRatio;\n\t\t\t_inputScreenPosition.y = event.changedTouches[0].y * devicePixelRatio;\n\t\t} else {\n\t\t\tconsole.warn('Could not determine position from input event');\n\t\t}\n\t}\n\n\t_chooseRayOriginAndDirection() {\n\t\tif (this._element.screen && this._element.screen.screen.screenSpace) {\n\t\t\t_rayOrigin.set(_inputScreenPosition.x, -_inputScreenPosition.y, 0);\n\n\t\t\t_rayDirection.set(0, 0, -1);\n\t\t} else {\n\t\t\t_inputWorldPosition.copy(this._dragCamera.screenToWorld(_inputScreenPosition.x, _inputScreenPosition.y, 1));\n\n\t\t\t_rayOrigin.copy(this._dragCamera.entity.getPosition());\n\n\t\t\t_rayDirection.copy(_inputWorldPosition).sub(_rayOrigin).normalize();\n\t\t}\n\t}\n\n\t_calculateDragScale() {\n\t\tvar current = this._element.entity.parent;\n\t\tvar screen = this._element.screen && this._element.screen.screen;\n\t\tvar isWithin2DScreen = screen && screen.screenSpace;\n\t\tvar screenScale = isWithin2DScreen ? screen.scale : 1;\n\t\tvar dragScale = this._dragScale;\n\t\tdragScale.set(screenScale, screenScale, screenScale);\n\n\t\twhile (current) {\n\t\t\tdragScale.mul(current.getLocalScale());\n\t\t\tcurrent = current.parent;\n\n\t\t\tif (isWithin2DScreen && current.screen) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tdragScale.x = 1 / dragScale.x;\n\t\tdragScale.y = 1 / dragScale.y;\n\t\tdragScale.z = 1 / dragScale.z;\n\t}\n\n\t_onMove(event) {\n\t\tif (this._element && this._isDragging && this.enabled && this._element.enabled && this._element.entity.enabled) {\n\t\t\tvar currentMousePosition = this._screenToLocal(event);\n\n\t\t\tif (this._dragStartMousePosition && currentMousePosition) {\n\t\t\t\tthis._deltaMousePosition.copy(currentMousePosition).sub(this._dragStartMousePosition);\n\n\t\t\t\tthis._deltaHandlePosition.copy(this._dragStartHandlePosition).add(this._deltaMousePosition);\n\n\t\t\t\tif (this._axis) {\n\t\t\t\t\tvar currentPosition = this._element.entity.getLocalPosition();\n\n\t\t\t\t\tvar constrainedAxis = OPPOSITE_AXIS[this._axis];\n\t\t\t\t\tthis._deltaHandlePosition[constrainedAxis] = currentPosition[constrainedAxis];\n\t\t\t\t}\n\n\t\t\t\tthis._element.entity.setLocalPosition(this._deltaHandlePosition);\n\n\t\t\t\tthis.fire('drag:move', this._deltaHandlePosition);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis._toggleLifecycleListeners('off');\n\n\t\tthis._toggleDragListeners('off');\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = value;\n\t}\n\n\tget isDragging() {\n\t\treturn this._isDragging;\n\t}\n\n}\n\nconst SCROLL_MODE_CLAMP = 0;\nconst SCROLL_MODE_BOUNCE = 1;\nconst SCROLL_MODE_INFINITE = 2;\nconst SCROLLBAR_VISIBILITY_SHOW_ALWAYS = 0;\nconst SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED = 1;\n\nvar _tempScrollValue = new Vec2();\n\nclass ScrollViewComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._viewportReference = new EntityReference(this, 'viewportEntity', {\n\t\t\t'element#gain': this._onViewportElementGain,\n\t\t\t'element#resize': this._onSetContentOrViewportSize\n\t\t});\n\t\tthis._contentReference = new EntityReference(this, 'contentEntity', {\n\t\t\t'element#gain': this._onContentElementGain,\n\t\t\t'element#lose': this._onContentElementLose,\n\t\t\t'element#resize': this._onSetContentOrViewportSize\n\t\t});\n\t\tthis._scrollbarUpdateFlags = {};\n\t\tthis._scrollbarReferences = {};\n\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL] = new EntityReference(this, 'horizontalScrollbarEntity', {\n\t\t\t'scrollbar#set:value': this._onSetHorizontalScrollbarValue,\n\t\t\t'scrollbar#gain': this._onHorizontalScrollbarGain\n\t\t});\n\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL] = new EntityReference(this, 'verticalScrollbarEntity', {\n\t\t\t'scrollbar#set:value': this._onSetVerticalScrollbarValue,\n\t\t\t'scrollbar#gain': this._onVerticalScrollbarGain\n\t\t});\n\t\tthis._prevContentSizes = {};\n\t\tthis._prevContentSizes[ORIENTATION_HORIZONTAL] = null;\n\t\tthis._prevContentSizes[ORIENTATION_VERTICAL] = null;\n\t\tthis._scroll = new Vec2();\n\t\tthis._velocity = new Vec3();\n\t\tthis._dragStartPosition = new Vec3();\n\t\tthis._disabledContentInput = false;\n\t\tthis._disabledContentInputEntities = [];\n\n\t\tthis._toggleLifecycleListeners('on', system);\n\n\t\tthis._toggleElementListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff, system) {\n\t\tthis[onOrOff]('set_horizontal', this._onSetHorizontalScrollingEnabled, this);\n\t\tthis[onOrOff]('set_vertical', this._onSetVerticalScrollingEnabled, this);\n\t\tsystem.app.systems.element[onOrOff]('add', this._onElementComponentAdd, this);\n\t\tsystem.app.systems.element[onOrOff]('beforeremove', this._onElementComponentRemove, this);\n\t}\n\n\t_toggleElementListeners(onOrOff) {\n\t\tif (this.entity.element) {\n\t\t\tif (onOrOff === 'on' && this._hasElementListeners) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.entity.element[onOrOff]('resize', this._onSetContentOrViewportSize, this);\n\t\t\tthis._hasElementListeners = onOrOff === 'on';\n\t\t}\n\t}\n\n\t_onElementComponentAdd(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleElementListeners('on');\n\t\t}\n\t}\n\n\t_onElementComponentRemove(entity) {\n\t\tif (this.entity === entity) {\n\t\t\tthis._toggleElementListeners('off');\n\t\t}\n\t}\n\n\t_onViewportElementGain() {\n\t\tthis._syncAll();\n\t}\n\n\t_onContentElementGain() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._contentDragHelper = new ElementDragHelper(this._contentReference.entity.element);\n\n\t\tthis._contentDragHelper.on('drag:start', this._onContentDragStart, this);\n\n\t\tthis._contentDragHelper.on('drag:end', this._onContentDragEnd, this);\n\n\t\tthis._contentDragHelper.on('drag:move', this._onContentDragMove, this);\n\n\t\tthis._prevContentSizes[ORIENTATION_HORIZONTAL] = null;\n\t\tthis._prevContentSizes[ORIENTATION_VERTICAL] = null;\n\n\t\tthis._syncAll();\n\t}\n\n\t_onContentElementLose() {\n\t\tthis._destroyDragHelper();\n\t}\n\n\t_onContentDragStart() {\n\t\tif (this._contentReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis._dragStartPosition.copy(this._contentReference.entity.getLocalPosition());\n\t\t}\n\t}\n\n\t_onContentDragEnd() {\n\t\tthis._prevContentDragPosition = null;\n\n\t\tthis._enableContentInput();\n\t}\n\n\t_onContentDragMove(position) {\n\t\tif (this._contentReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis._wasDragged = true;\n\n\t\t\tthis._setScrollFromContentPosition(position);\n\n\t\t\tthis._setVelocityFromContentPositionDelta(position);\n\n\t\t\tif (!this._disabledContentInput) {\n\t\t\t\tvar dx = position.x - this._dragStartPosition.x;\n\t\t\t\tvar dy = position.y - this._dragStartPosition.y;\n\n\t\t\t\tif (Math.abs(dx) > this.dragThreshold || Math.abs(dy) > this.dragThreshold) {\n\t\t\t\t\tthis._disableContentInput();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onSetContentOrViewportSize() {\n\t\tthis._syncAll();\n\t}\n\n\t_onSetHorizontalScrollbarValue(scrollValueX) {\n\t\tif (!this._scrollbarUpdateFlags[ORIENTATION_HORIZONTAL] && this.enabled && this.entity.enabled) {\n\t\t\tthis._onSetScroll(scrollValueX, null);\n\t\t}\n\t}\n\n\t_onSetVerticalScrollbarValue(scrollValueY) {\n\t\tif (!this._scrollbarUpdateFlags[ORIENTATION_VERTICAL] && this.enabled && this.entity.enabled) {\n\t\t\tthis._onSetScroll(null, scrollValueY);\n\t\t}\n\t}\n\n\t_onSetHorizontalScrollingEnabled() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\t}\n\n\t_onSetVerticalScrollingEnabled() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t}\n\n\t_onHorizontalScrollbarGain() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_HORIZONTAL);\n\t}\n\n\t_onVerticalScrollbarGain() {\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_VERTICAL);\n\t}\n\n\t_onSetScroll(x, y, resetVelocity) {\n\t\tif (resetVelocity !== false) {\n\t\t\tthis._velocity.set(0, 0, 0);\n\t\t}\n\n\t\tvar hasChanged = false;\n\t\thasChanged |= this._updateAxis(x, 'x', ORIENTATION_HORIZONTAL);\n\t\thasChanged |= this._updateAxis(y, 'y', ORIENTATION_VERTICAL);\n\n\t\tif (hasChanged) {\n\t\t\tthis.fire('set:scroll', this._scroll);\n\t\t}\n\t}\n\n\t_updateAxis(scrollValue, axis, orientation) {\n\t\tvar hasChanged = scrollValue !== null && Math.abs(scrollValue - this._scroll[axis]) > 1e-5;\n\n\t\tif (hasChanged || this._isDragging() || scrollValue === 0) {\n\t\t\tthis._scroll[axis] = this._determineNewScrollValue(scrollValue, axis, orientation);\n\n\t\t\tthis._syncContentPosition(orientation);\n\n\t\t\tthis._syncScrollbarPosition(orientation);\n\t\t}\n\n\t\treturn hasChanged;\n\t}\n\n\t_determineNewScrollValue(scrollValue, axis, orientation) {\n\t\tif (!this._getScrollingEnabled(orientation)) {\n\t\t\treturn this._scroll[axis];\n\t\t}\n\n\t\tswitch (this.scrollMode) {\n\t\t\tcase SCROLL_MODE_CLAMP:\n\t\t\t\treturn math.clamp(scrollValue, 0, this._getMaxScrollValue(orientation));\n\n\t\t\tcase SCROLL_MODE_BOUNCE:\n\t\t\t\tthis._setVelocityFromOvershoot(scrollValue, axis, orientation);\n\n\t\t\t\treturn scrollValue;\n\n\t\t\tcase SCROLL_MODE_INFINITE:\n\t\t\t\treturn scrollValue;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn('Unhandled scroll mode:' + this.scrollMode);\n\t\t\t\treturn scrollValue;\n\t\t}\n\t}\n\n\t_syncAll() {\n\t\tthis._syncContentPosition(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncContentPosition(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarPosition(ORIENTATION_VERTICAL);\n\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t}\n\n\t_syncContentPosition(orientation) {\n\t\tvar axis = this._getAxis(orientation);\n\n\t\tvar sign = this._getSign(orientation);\n\n\t\tvar contentEntity = this._contentReference.entity;\n\n\t\tif (contentEntity) {\n\t\t\tvar prevContentSize = this._prevContentSizes[orientation];\n\n\t\t\tvar currContentSize = this._getContentSize(orientation);\n\n\t\t\tif (prevContentSize !== null && Math.abs(prevContentSize - currContentSize) > 1e-4) {\n\t\t\t\tvar prevMaxOffset = this._getMaxOffset(orientation, prevContentSize);\n\n\t\t\t\tvar currMaxOffset = this._getMaxOffset(orientation, currContentSize);\n\n\t\t\t\tif (currMaxOffset === 0) {\n\t\t\t\t\tthis._scroll[axis] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis._scroll[axis] = math.clamp(this._scroll[axis] * prevMaxOffset / currMaxOffset, 0, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar offset = this._scroll[axis] * this._getMaxOffset(orientation);\n\n\t\t\tvar contentPosition = contentEntity.getLocalPosition();\n\t\t\tcontentPosition[axis] = offset * sign;\n\t\t\tcontentEntity.setLocalPosition(contentPosition);\n\t\t\tthis._prevContentSizes[orientation] = currContentSize;\n\t\t}\n\t}\n\n\t_syncScrollbarPosition(orientation) {\n\t\tvar axis = this._getAxis(orientation);\n\n\t\tvar scrollbarEntity = this._scrollbarReferences[orientation].entity;\n\n\t\tif (scrollbarEntity && scrollbarEntity.scrollbar) {\n\t\t\tthis._scrollbarUpdateFlags[orientation] = true;\n\t\t\tscrollbarEntity.scrollbar.value = this._scroll[axis];\n\t\t\tscrollbarEntity.scrollbar.handleSize = this._getScrollbarHandleSize(axis, orientation);\n\t\t\tthis._scrollbarUpdateFlags[orientation] = false;\n\t\t}\n\t}\n\n\t_syncScrollbarEnabledState(orientation) {\n\t\tvar entity = this._scrollbarReferences[orientation].entity;\n\n\t\tif (entity) {\n\t\t\tvar isScrollingEnabled = this._getScrollingEnabled(orientation);\n\n\t\t\tvar requestedVisibility = this._getScrollbarVisibility(orientation);\n\n\t\t\tswitch (requestedVisibility) {\n\t\t\t\tcase SCROLLBAR_VISIBILITY_SHOW_ALWAYS:\n\t\t\t\t\tentity.enabled = isScrollingEnabled;\n\t\t\t\t\treturn;\n\n\t\t\t\tcase SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED:\n\t\t\t\t\tentity.enabled = isScrollingEnabled && this._contentIsLargerThanViewport(orientation);\n\t\t\t\t\treturn;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn('Unhandled scrollbar visibility:' + requestedVisibility);\n\t\t\t\t\tentity.enabled = isScrollingEnabled;\n\t\t\t}\n\t\t}\n\t}\n\n\t_contentIsLargerThanViewport(orientation) {\n\t\treturn this._getContentSize(orientation) > this._getViewportSize(orientation);\n\t}\n\n\t_contentPositionToScrollValue(contentPosition) {\n\t\tvar maxOffsetH = this._getMaxOffset(ORIENTATION_HORIZONTAL);\n\n\t\tvar maxOffsetV = this._getMaxOffset(ORIENTATION_VERTICAL);\n\n\t\tif (maxOffsetH === 0) {\n\t\t\t_tempScrollValue.x = 0;\n\t\t} else {\n\t\t\t_tempScrollValue.x = contentPosition.x / maxOffsetH;\n\t\t}\n\n\t\tif (maxOffsetV === 0) {\n\t\t\t_tempScrollValue.y = 0;\n\t\t} else {\n\t\t\t_tempScrollValue.y = contentPosition.y / -maxOffsetV;\n\t\t}\n\n\t\treturn _tempScrollValue;\n\t}\n\n\t_getMaxOffset(orientation, contentSize) {\n\t\tcontentSize = contentSize === undefined ? this._getContentSize(orientation) : contentSize;\n\n\t\tvar viewportSize = this._getViewportSize(orientation);\n\n\t\tif (contentSize < viewportSize) {\n\t\t\treturn -this._getViewportSize(orientation);\n\t\t}\n\n\t\treturn viewportSize - contentSize;\n\t}\n\n\t_getMaxScrollValue(orientation) {\n\t\treturn this._contentIsLargerThanViewport(orientation) ? 1 : 0;\n\t}\n\n\t_getScrollbarHandleSize(axis, orientation) {\n\t\tvar viewportSize = this._getViewportSize(orientation);\n\n\t\tvar contentSize = this._getContentSize(orientation);\n\n\t\tif (Math.abs(contentSize) < 0.001) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tvar handleSize = Math.min(viewportSize / contentSize, 1);\n\n\t\tvar overshoot = this._toOvershoot(this._scroll[axis], orientation);\n\n\t\tif (overshoot === 0) {\n\t\t\treturn handleSize;\n\t\t}\n\n\t\treturn handleSize / (1 + Math.abs(overshoot));\n\t}\n\n\t_getViewportSize(orientation) {\n\t\treturn this._getSize(orientation, this._viewportReference);\n\t}\n\n\t_getContentSize(orientation) {\n\t\treturn this._getSize(orientation, this._contentReference);\n\t}\n\n\t_getSize(orientation, entityReference) {\n\t\tif (entityReference.entity && entityReference.entity.element) {\n\t\t\treturn entityReference.entity.element[this._getCalculatedDimension(orientation)];\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_getScrollingEnabled(orientation) {\n\t\tif (orientation === ORIENTATION_HORIZONTAL) {\n\t\t\treturn this.horizontal;\n\t\t} else if (orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.vertical;\n\t\t}\n\n\t\tconsole.warn('Unrecognized orientation: ' + orientation);\n\t}\n\n\t_getScrollbarVisibility(orientation) {\n\t\tif (orientation === ORIENTATION_HORIZONTAL) {\n\t\t\treturn this.horizontalScrollbarVisibility;\n\t\t} else if (orientation === ORIENTATION_VERTICAL) {\n\t\t\treturn this.verticalScrollbarVisibility;\n\t\t}\n\n\t\tconsole.warn('Unrecognized orientation: ' + orientation);\n\t}\n\n\t_getSign(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 1 : -1;\n\t}\n\n\t_getAxis(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 'x' : 'y';\n\t}\n\n\t_getCalculatedDimension(orientation) {\n\t\treturn orientation === ORIENTATION_HORIZONTAL ? 'calculatedWidth' : 'calculatedHeight';\n\t}\n\n\t_destroyDragHelper() {\n\t\tif (this._contentDragHelper) {\n\t\t\tthis._contentDragHelper.destroy();\n\t\t}\n\t}\n\n\tonUpdate() {\n\t\tif (this._contentReference.entity) {\n\t\t\tthis._updateVelocity();\n\n\t\t\tthis._syncScrollbarEnabledState(ORIENTATION_HORIZONTAL);\n\n\t\t\tthis._syncScrollbarEnabledState(ORIENTATION_VERTICAL);\n\t\t}\n\t}\n\n\t_updateVelocity() {\n\t\tif (!this._isDragging()) {\n\t\t\tif (this.scrollMode === SCROLL_MODE_BOUNCE) {\n\t\t\t\tif (this._hasOvershoot('x', ORIENTATION_HORIZONTAL)) {\n\t\t\t\t\tthis._setVelocityFromOvershoot(this.scroll.x, 'x', ORIENTATION_HORIZONTAL);\n\t\t\t\t}\n\n\t\t\t\tif (this._hasOvershoot('y', ORIENTATION_VERTICAL)) {\n\t\t\t\t\tthis._setVelocityFromOvershoot(this.scroll.y, 'y', ORIENTATION_VERTICAL);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._velocity.x *= 1 - this.friction;\n\t\t\tthis._velocity.y *= 1 - this.friction;\n\n\t\t\tif (Math.abs(this._velocity.x) > 1e-4 || Math.abs(this._velocity.y) > 1e-4) {\n\t\t\t\tvar position = this._contentReference.entity.getLocalPosition();\n\n\t\t\t\tposition.x += this._velocity.x;\n\t\t\t\tposition.y += this._velocity.y;\n\n\t\t\t\tthis._contentReference.entity.setLocalPosition(position);\n\n\t\t\t\tthis._setScrollFromContentPosition(position);\n\t\t\t}\n\t\t}\n\t}\n\n\t_hasOvershoot(axis, orientation) {\n\t\treturn Math.abs(this._toOvershoot(this.scroll[axis], orientation)) > 0.001;\n\t}\n\n\t_toOvershoot(scrollValue, orientation) {\n\t\tvar maxScrollValue = this._getMaxScrollValue(orientation);\n\n\t\tif (scrollValue < 0) {\n\t\t\treturn scrollValue;\n\t\t} else if (scrollValue > maxScrollValue) {\n\t\t\treturn scrollValue - maxScrollValue;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_setVelocityFromOvershoot(scrollValue, axis, orientation) {\n\t\tvar overshootValue = this._toOvershoot(scrollValue, orientation);\n\n\t\tvar overshootPixels = overshootValue * this._getMaxOffset(orientation) * this._getSign(orientation);\n\n\t\tif (Math.abs(overshootPixels) > 0) {\n\t\t\tthis._velocity[axis] = -overshootPixels / (this.bounceAmount * 50 + 1);\n\t\t}\n\t}\n\n\t_setVelocityFromContentPositionDelta(position) {\n\t\tif (this._prevContentDragPosition) {\n\t\t\tthis._velocity.sub2(position, this._prevContentDragPosition);\n\n\t\t\tthis._prevContentDragPosition.copy(position);\n\t\t} else {\n\t\t\tthis._velocity.set(0, 0, 0);\n\n\t\t\tthis._prevContentDragPosition = position.clone();\n\t\t}\n\t}\n\n\t_setScrollFromContentPosition(position) {\n\t\tvar scrollValue = this._contentPositionToScrollValue(position);\n\n\t\tif (this._isDragging()) {\n\t\t\tscrollValue = this._applyScrollValueTension(scrollValue);\n\t\t}\n\n\t\tthis._onSetScroll(scrollValue.x, scrollValue.y, false);\n\t}\n\n\t_applyScrollValueTension(scrollValue) {\n\t\tvar max;\n\t\tvar overshoot;\n\t\tvar factor = 1;\n\t\tmax = this._getMaxScrollValue(ORIENTATION_HORIZONTAL);\n\t\tovershoot = this._toOvershoot(scrollValue.x, ORIENTATION_HORIZONTAL);\n\n\t\tif (overshoot > 0) {\n\t\t\tscrollValue.x = max + factor * Math.log10(1 + overshoot);\n\t\t} else if (overshoot < 0) {\n\t\t\tscrollValue.x = -factor * Math.log10(1 - overshoot);\n\t\t}\n\n\t\tmax = this._getMaxScrollValue(ORIENTATION_VERTICAL);\n\t\tovershoot = this._toOvershoot(scrollValue.y, ORIENTATION_VERTICAL);\n\n\t\tif (overshoot > 0) {\n\t\t\tscrollValue.y = max + factor * Math.log10(1 + overshoot);\n\t\t} else if (overshoot < 0) {\n\t\t\tscrollValue.y = -factor * Math.log10(1 - overshoot);\n\t\t}\n\n\t\treturn scrollValue;\n\t}\n\n\t_isDragging() {\n\t\treturn this._contentDragHelper && this._contentDragHelper.isDragging;\n\t}\n\n\t_setScrollbarComponentsEnabled(enabled) {\n\t\tif (this._scrollbarReferences[ORIENTATION_HORIZONTAL].hasComponent('scrollbar')) {\n\t\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL].entity.scrollbar.enabled = enabled;\n\t\t}\n\n\t\tif (this._scrollbarReferences[ORIENTATION_VERTICAL].hasComponent('scrollbar')) {\n\t\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL].entity.scrollbar.enabled = enabled;\n\t\t}\n\t}\n\n\t_setContentDraggingEnabled(enabled) {\n\t\tif (this._contentDragHelper) {\n\t\t\tthis._contentDragHelper.enabled = enabled;\n\t\t}\n\t}\n\n\t_enableContentInput() {\n\t\twhile (this._disabledContentInputEntities.length) {\n\t\t\tvar e = this._disabledContentInputEntities.pop();\n\n\t\t\tif (e.element) {\n\t\t\t\te.element.useInput = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._disabledContentInput = false;\n\t}\n\n\t_disableContentInput() {\n\t\tvar self = this;\n\n\t\tvar _disableInput = function _disableInput(e) {\n\t\t\tif (e.element && e.element.useInput) {\n\t\t\t\tself._disabledContentInputEntities.push(e);\n\n\t\t\t\te.element.useInput = false;\n\t\t\t}\n\n\t\t\tvar children = e.children;\n\t\t\tvar i, l;\n\n\t\t\tfor (i = 0, l = children.length; i < l; i++) {\n\t\t\t\t_disableInput(children[i]);\n\t\t\t}\n\t\t};\n\n\t\tvar contentEntity = this._contentReference.entity;\n\n\t\tif (contentEntity) {\n\t\t\tvar children = contentEntity.children;\n\t\t\tvar i,\n\t\t\t\t\tl = children.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t_disableInput(children[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis._disabledContentInput = true;\n\t}\n\n\tonEnable() {\n\t\tthis._viewportReference.onParentComponentEnable();\n\n\t\tthis._contentReference.onParentComponentEnable();\n\n\t\tthis._scrollbarReferences[ORIENTATION_HORIZONTAL].onParentComponentEnable();\n\n\t\tthis._scrollbarReferences[ORIENTATION_VERTICAL].onParentComponentEnable();\n\n\t\tthis._setScrollbarComponentsEnabled(true);\n\n\t\tthis._setContentDraggingEnabled(true);\n\n\t\tthis._syncAll();\n\t}\n\n\tonDisable() {\n\t\tthis._setScrollbarComponentsEnabled(false);\n\n\t\tthis._setContentDraggingEnabled(false);\n\t}\n\n\tonRemove() {\n\t\tthis._toggleLifecycleListeners('off', this.system);\n\n\t\tthis._toggleElementListeners('off');\n\n\t\tthis._destroyDragHelper();\n\t}\n\n\tget scroll() {\n\t\treturn this._scroll;\n\t}\n\n\tset scroll(value) {\n\t\tthis._onSetScroll(value.x, value.y);\n\t}\n\n}\n\nclass ScrollViewComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$4 = [{\n\tname: 'enabled',\n\ttype: 'boolean'\n}, {\n\tname: 'horizontal',\n\ttype: 'boolean'\n}, {\n\tname: 'vertical',\n\ttype: 'boolean'\n}, {\n\tname: 'scrollMode',\n\ttype: 'number'\n}, {\n\tname: 'bounceAmount',\n\ttype: 'number'\n}, {\n\tname: 'friction',\n\ttype: 'number'\n}, {\n\tname: 'dragThreshold',\n\ttype: 'number'\n}, {\n\tname: 'horizontalScrollbarVisibility',\n\ttype: 'number'\n}, {\n\tname: 'verticalScrollbarVisibility',\n\ttype: 'number'\n}, {\n\tname: 'viewportEntity',\n\ttype: 'entity'\n}, {\n\tname: 'contentEntity',\n\ttype: 'entity'\n}, {\n\tname: 'horizontalScrollbarEntity',\n\ttype: 'entity'\n}, {\n\tname: 'verticalScrollbarEntity',\n\ttype: 'entity'\n}];\nconst DEFAULT_DRAG_THRESHOLD = 10;\n\nclass ScrollViewComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'scrollview';\n\t\tthis.ComponentType = ScrollViewComponent;\n\t\tthis.DataType = ScrollViewComponentData;\n\t\tthis.schema = _schema$4;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.dragThreshold === undefined) {\n\t\t\tdata.dragThreshold = DEFAULT_DRAG_THRESHOLD;\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, _schema$4);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tvar entity = components[id].entity;\n\t\t\tvar component = entity.scrollview;\n\n\t\t\tif (component.enabled && entity.enabled) {\n\t\t\t\tcomponent.onUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ScrollViewComponent.prototype, _schema$4);\n\nclass ScrollbarComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._app = system.app;\n\t\tthis._handleReference = new EntityReference(this, 'handleEntity', {\n\t\t\t'element#gain': this._onHandleElementGain,\n\t\t\t'element#lose': this._onHandleElementLose,\n\t\t\t'element#set:anchor': this._onSetHandleAlignment,\n\t\t\t'element#set:margin': this._onSetHandleAlignment,\n\t\t\t'element#set:pivot': this._onSetHandleAlignment\n\t\t});\n\n\t\tthis._toggleLifecycleListeners('on');\n\t}\n\n\t_toggleLifecycleListeners(onOrOff) {\n\t\tthis[onOrOff]('set_value', this._onSetValue, this);\n\t\tthis[onOrOff]('set_handleSize', this._onSetHandleSize, this);\n\t\tthis[onOrOff]('set_orientation', this._onSetOrientation, this);\n\t}\n\n\t_onHandleElementGain() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._handleDragHelper = new ElementDragHelper(this._handleReference.entity.element, this._getAxis());\n\n\t\tthis._handleDragHelper.on('drag:move', this._onHandleDrag, this);\n\n\t\tthis._updateHandlePositionAndSize();\n\t}\n\n\t_onHandleElementLose() {\n\t\tthis._destroyDragHelper();\n\t}\n\n\t_onHandleDrag(position) {\n\t\tif (this._handleReference.entity && this.enabled && this.entity.enabled) {\n\t\t\tthis.value = this._handlePositionToScrollValue(position[this._getAxis()]);\n\t\t}\n\t}\n\n\t_onSetValue(name, oldValue, newValue) {\n\t\tif (Math.abs(newValue - oldValue) > 1e-5) {\n\t\t\tthis.data.value = math.clamp(newValue, 0, 1);\n\n\t\t\tthis._updateHandlePositionAndSize();\n\n\t\t\tthis.fire('set:value', this.data.value);\n\t\t}\n\t}\n\n\t_onSetHandleSize(name, oldValue, newValue) {\n\t\tif (Math.abs(newValue - oldValue) > 1e-5) {\n\t\t\tthis.data.handleSize = math.clamp(newValue, 0, 1);\n\n\t\t\tthis._updateHandlePositionAndSize();\n\t\t}\n\t}\n\n\t_onSetHandleAlignment() {\n\t\tthis._updateHandlePositionAndSize();\n\t}\n\n\t_onSetOrientation(name, oldValue, newValue) {\n\t\tif (newValue !== oldValue && this._handleReference.hasComponent('element')) {\n\t\t\tthis._handleReference.entity.element[this._getOppositeDimension()] = 0;\n\t\t}\n\t}\n\n\t_updateHandlePositionAndSize() {\n\t\tvar handleEntity = this._handleReference.entity;\n\t\tvar handleElement = handleEntity && handleEntity.element;\n\n\t\tif (handleEntity) {\n\t\t\tvar position = handleEntity.getLocalPosition();\n\t\t\tposition[this._getAxis()] = this._getHandlePosition();\n\n\t\t\tthis._handleReference.entity.setLocalPosition(position);\n\t\t}\n\n\t\tif (handleElement) {\n\t\t\thandleElement[this._getDimension()] = this._getHandleLength();\n\t\t}\n\t}\n\n\t_handlePositionToScrollValue(handlePosition) {\n\t\treturn handlePosition * this._getSign() / this._getUsableTrackLength();\n\t}\n\n\t_scrollValueToHandlePosition(value) {\n\t\treturn value * this._getSign() * this._getUsableTrackLength();\n\t}\n\n\t_getUsableTrackLength() {\n\t\treturn Math.max(this._getTrackLength() - this._getHandleLength(), 0.001);\n\t}\n\n\t_getTrackLength() {\n\t\tif (this.entity.element) {\n\t\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? this.entity.element.calculatedWidth : this.entity.element.calculatedHeight;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t_getHandleLength() {\n\t\treturn this._getTrackLength() * this.handleSize;\n\t}\n\n\t_getHandlePosition() {\n\t\treturn this._scrollValueToHandlePosition(this.value);\n\t}\n\n\t_getSign() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 1 : -1;\n\t}\n\n\t_getAxis() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'x' : 'y';\n\t}\n\n\t_getDimension() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'width' : 'height';\n\t}\n\n\t_getOppositeDimension() {\n\t\treturn this.orientation === ORIENTATION_HORIZONTAL ? 'height' : 'width';\n\t}\n\n\t_destroyDragHelper() {\n\t\tif (this._handleDragHelper) {\n\t\t\tthis._handleDragHelper.destroy();\n\t\t}\n\t}\n\n\t_setHandleDraggingEnabled(enabled) {\n\t\tif (this._handleDragHelper) {\n\t\t\tthis._handleDragHelper.enabled = enabled;\n\t\t}\n\t}\n\n\tonEnable() {\n\t\tthis._handleReference.onParentComponentEnable();\n\n\t\tthis._setHandleDraggingEnabled(true);\n\t}\n\n\tonDisable() {\n\t\tthis._setHandleDraggingEnabled(false);\n\t}\n\n\tonRemove() {\n\t\tthis._destroyDragHelper();\n\n\t\tthis._toggleLifecycleListeners('off');\n\t}\n\n}\n\nclass ScrollbarComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$3 = [{\n\tname: 'enabled',\n\ttype: 'boolean'\n}, {\n\tname: 'orientation',\n\ttype: 'number'\n}, {\n\tname: 'value',\n\ttype: 'number'\n}, {\n\tname: 'handleSize',\n\ttype: 'number'\n}, {\n\tname: 'handleEntity',\n\ttype: 'entity'\n}];\n\nclass ScrollbarComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'scrollbar';\n\t\tthis.ComponentType = ScrollbarComponent;\n\t\tthis.DataType = ScrollbarComponentData;\n\t\tthis.schema = _schema$3;\n\t\tthis.on('beforeremove', this._onRemoveComponent, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tsuper.initializeComponentData(component, data, _schema$3);\n\t}\n\n\t_onRemoveComponent(entity, component) {\n\t\tcomponent.onRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ScrollbarComponent.prototype, _schema$3);\n\nconst STATE_PLAYING = 0;\nconst STATE_PAUSED = 1;\nconst STATE_STOPPED = 2;\n\nfunction capTime(time, duration) {\n\treturn time % duration || 0;\n}\n\nclass SoundInstance extends EventHandler {\n\tconstructor(manager, sound, options) {\n\t\tsuper();\n\t\tthis._manager = manager;\n\t\tthis._volume = options.volume !== undefined ? math.clamp(Number(options.volume) || 0, 0, 1) : 1;\n\t\tthis._pitch = options.pitch !== undefined ? Math.max(0.01, Number(options.pitch) || 0) : 1;\n\t\tthis._loop = !!(options.loop !== undefined ? options.loop : false);\n\t\tthis._sound = sound;\n\t\tthis._state = STATE_STOPPED;\n\t\tthis._suspended = false;\n\t\tthis._suspendEndEvent = false;\n\t\tthis._suspendInstanceEvents = false;\n\t\tthis._playWhenLoaded = true;\n\t\tthis._startTime = Math.max(0, Number(options.startTime) || 0);\n\t\tthis._duration = Math.max(0, Number(options.duration) || 0);\n\t\tthis._startOffset = null;\n\t\tthis.source = null;\n\t\tthis._onPlayCallback = options.onPlay;\n\t\tthis._onPauseCallback = options.onPause;\n\t\tthis._onResumeCallback = options.onResume;\n\t\tthis._onStopCallback = options.onStop;\n\t\tthis._onEndCallback = options.onEnd;\n\n\t\tif (hasAudioContext()) {\n\t\t\tthis._startedAt = 0;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = 0;\n\t\t\tthis._inputNode = null;\n\t\t\tthis._connectorNode = null;\n\t\t\tthis._firstNode = null;\n\t\t\tthis._lastNode = null;\n\n\t\t\tthis._initializeNodes();\n\n\t\t\tthis._endedHandler = this._onEnded.bind(this);\n\t\t} else {\n\t\t\tthis._isReady = false;\n\t\t\tthis._loadedMetadataHandler = this._onLoadedMetadata.bind(this);\n\t\t\tthis._timeUpdateHandler = this._onTimeUpdate.bind(this);\n\t\t\tthis._endedHandler = this._onEnded.bind(this);\n\n\t\t\tthis._createSource();\n\t\t}\n\t}\n\n\t_onPlay() {\n\t\tthis.fire('play');\n\t\tif (this._onPlayCallback) this._onPlayCallback(this);\n\t}\n\n\t_onPause() {\n\t\tthis.fire('pause');\n\t\tif (this._onPauseCallback) this._onPauseCallback(this);\n\t}\n\n\t_onResume() {\n\t\tthis.fire('resume');\n\t\tif (this._onResumeCallback) this._onResumeCallback(this);\n\t}\n\n\t_onStop() {\n\t\tthis.fire('stop');\n\t\tif (this._onStopCallback) this._onStopCallback(this);\n\t}\n\n\t_onEnded() {\n\t\tif (this._suspendEndEvent) {\n\t\t\tthis._suspendEndEvent = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire('end');\n\t\tif (this._onEndCallback) this._onEndCallback(this);\n\t\tthis.stop();\n\t}\n\n\t_onManagerVolumeChange() {\n\t\tthis.volume = this._volume;\n\t}\n\n\t_onManagerSuspend() {\n\t\tif (this._state === STATE_PLAYING && !this._suspended) {\n\t\t\tthis._suspended = true;\n\t\t\tthis.pause();\n\t\t}\n\t}\n\n\t_onManagerResume() {\n\t\tif (this._suspended) {\n\t\t\tthis._suspended = false;\n\t\t\tthis.resume();\n\t\t}\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = !!value;\n\n\t\tif (this.source) {\n\t\t\tthis.source.loop = this._loop;\n\t\t}\n\t}\n\n\tget startTime() {\n\t\treturn this._startTime;\n\t}\n\n\tset startTime(value) {\n\t\tthis._startTime = Math.max(0, Number(value) || 0);\n\t\tconst isPlaying = this._state === STATE_PLAYING;\n\t\tthis.stop();\n\n\t\tif (isPlaying) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tget duration() {\n\t\tif (!this._sound) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (this._duration) {\n\t\t\treturn capTime(this._duration, this._sound.duration);\n\t\t}\n\n\t\treturn this._sound.duration;\n\t}\n\n\tset duration(value) {\n\t\tthis._duration = Math.max(0, Number(value) || 0);\n\t\tconst isPlaying = this._state === STATE_PLAYING;\n\t\tthis.stop();\n\n\t\tif (isPlaying) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tget isPlaying() {\n\t\treturn this._state === STATE_PLAYING;\n\t}\n\n\tget isPaused() {\n\t\treturn this._state === STATE_PAUSED;\n\t}\n\n\tget isStopped() {\n\t\treturn this._state === STATE_STOPPED;\n\t}\n\n\tget isSuspended() {\n\t\treturn this._suspended;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(SoundInstance.prototype, {\n\t\t_initializeNodes: function () {\n\t\t\tthis.gain = this._manager.context.createGain();\n\t\t\tthis._inputNode = this.gain;\n\t\t\tthis._connectorNode = this.gain;\n\n\t\t\tthis._connectorNode.connect(this._manager.context.destination);\n\t\t},\n\t\tplay: function () {\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\n\t\t\tlet offset = capTime(this._startOffset, this.duration);\n\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\tthis._startOffset = null;\n\n\t\t\tif (this._duration) {\n\t\t\t\tthis.source.start(0, offset, this._duration);\n\t\t\t} else {\n\t\t\t\tthis.source.start(0, offset);\n\t\t\t}\n\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = offset;\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.pitch = this._pitch;\n\n\t\t\tthis._manager.on('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.on('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.on('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.on('destroy', this._onManagerDestroy, this);\n\n\t\t\tif (this._manager.suspended) {\n\t\t\t\tthis._onManagerSuspend();\n\t\t\t}\n\n\t\t\tif (!this._suspendInstanceEvents) this._onPlay();\n\t\t\treturn true;\n\t\t},\n\t\tpause: function () {\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (this._state !== STATE_PLAYING || !this.source) return false;\n\n\t\t\tthis._updateCurrentTime();\n\n\t\t\tthis._state = STATE_PAUSED;\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.stop(0);\n\t\t\tthis.source = null;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onPause();\n\t\t\treturn true;\n\t\t},\n\t\tresume: function () {\n\t\t\tif (this._state !== STATE_PAUSED) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\n\t\t\tlet offset = this.currentTime;\n\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\toffset = capTime(this._startOffset, this.duration);\n\t\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\t\tthis._startOffset = null;\n\t\t\t}\n\n\t\t\tif (this._duration) {\n\t\t\t\tthis.source.start(0, offset, this._duration);\n\t\t\t} else {\n\t\t\t\tthis.source.start(0, offset);\n\t\t\t}\n\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._currentOffset = offset;\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.pitch = this._pitch;\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (!this._suspendInstanceEvents) this._onResume();\n\t\t\treturn true;\n\t\t},\n\t\tstop: function () {\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tif (this._state === STATE_STOPPED || !this.source) return false;\n\n\t\t\tthis._manager.off('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.off('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.off('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.off('destroy', this._onManagerDestroy, this);\n\n\t\t\tthis._startedAt = 0;\n\t\t\tthis._currentTime = 0;\n\t\t\tthis._currentOffset = 0;\n\t\t\tthis._startOffset = null;\n\t\t\tthis._suspendEndEvent = true;\n\n\t\t\tif (this._state === STATE_PLAYING) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t}\n\n\t\t\tthis.source = null;\n\t\t\tthis._state = STATE_STOPPED;\n\t\t\tif (!this._suspendInstanceEvents) this._onStop();\n\t\t\treturn true;\n\t\t},\n\t\tsetExternalNodes: function (firstNode, lastNode) {\n\t\t\tif (!firstNode) {\n\t\t\t\tconsole.error('The firstNode must be a valid Audio Node');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!lastNode) {\n\t\t\t\tlastNode = firstNode;\n\t\t\t}\n\n\t\t\tconst speakers = this._manager.context.destination;\n\n\t\t\tif (this._firstNode !== firstNode) {\n\t\t\t\tif (this._firstNode) {\n\t\t\t\t\tthis._connectorNode.disconnect(this._firstNode);\n\t\t\t\t} else {\n\t\t\t\t\tthis._connectorNode.disconnect(speakers);\n\t\t\t\t}\n\n\t\t\t\tthis._firstNode = firstNode;\n\n\t\t\t\tthis._connectorNode.connect(firstNode);\n\t\t\t}\n\n\t\t\tif (this._lastNode !== lastNode) {\n\t\t\t\tif (this._lastNode) {\n\t\t\t\t\tthis._lastNode.disconnect(speakers);\n\t\t\t\t}\n\n\t\t\t\tthis._lastNode = lastNode;\n\n\t\t\t\tthis._lastNode.connect(speakers);\n\t\t\t}\n\t\t},\n\t\tclearExternalNodes: function () {\n\t\t\tconst speakers = this._manager.context.destination;\n\n\t\t\tif (this._firstNode) {\n\t\t\t\tthis._connectorNode.disconnect(this._firstNode);\n\n\t\t\t\tthis._firstNode = null;\n\t\t\t}\n\n\t\t\tif (this._lastNode) {\n\t\t\t\tthis._lastNode.disconnect(speakers);\n\n\t\t\t\tthis._lastNode = null;\n\t\t\t}\n\n\t\t\tthis._connectorNode.connect(speakers);\n\t\t},\n\t\tgetExternalNodes: function () {\n\t\t\treturn [this._firstNode, this._lastNode];\n\t\t},\n\t\t_createSource: function () {\n\t\t\tif (!this._sound) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst context = this._manager.context;\n\n\t\t\tif (this._sound.buffer) {\n\t\t\t\tthis.source = context.createBufferSource();\n\t\t\t\tthis.source.buffer = this._sound.buffer;\n\t\t\t\tthis.source.connect(this._inputNode);\n\t\t\t\tthis.source.onended = this._endedHandler;\n\t\t\t\tthis.source.loopStart = capTime(this._startTime, this.source.buffer.duration);\n\n\t\t\t\tif (this._duration) {\n\t\t\t\t\tthis.source.loopEnd = Math.max(this.source.loopStart, capTime(this._startTime + this._duration, this.source.buffer.duration));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.source;\n\t\t},\n\t\t_updateCurrentTime: function () {\n\t\t\tthis._currentTime = capTime((this._manager.context.currentTime - this._startedAt) * this._pitch + this._currentOffset, this.duration);\n\t\t},\n\t\t_onManagerDestroy: function () {\n\t\t\tif (this.source && this._state === STATE_PLAYING) {\n\t\t\t\tthis.source.stop(0);\n\t\t\t\tthis.source = null;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'volume', {\n\t\tget: function () {\n\t\t\treturn this._volume;\n\t\t},\n\t\tset: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis._volume = volume;\n\n\t\t\tif (this.gain) {\n\t\t\t\tthis.gain.gain.value = volume * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'pitch', {\n\t\tget: function () {\n\t\t\treturn this._pitch;\n\t\t},\n\t\tset: function (pitch) {\n\t\t\tthis._currentOffset = this.currentTime;\n\t\t\tthis._startedAt = this._manager.context.currentTime;\n\t\t\tthis._pitch = Math.max(Number(pitch) || 0, 0.01);\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate.value = this._pitch;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'sound', {\n\t\tget: function () {\n\t\t\treturn this._sound;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._sound = value;\n\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t} else {\n\t\t\t\tthis._createSource();\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'currentTime', {\n\t\tget: function () {\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\treturn this._startOffset;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_PAUSED) {\n\t\t\t\treturn this._currentTime;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_STOPPED || !this.source) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tthis._updateCurrentTime();\n\n\t\t\treturn this._currentTime;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (value < 0) return;\n\n\t\t\tif (this._state === STATE_PLAYING) {\n\t\t\t\tconst suspend = this._suspendInstanceEvents;\n\t\t\t\tthis._suspendInstanceEvents = true;\n\t\t\t\tthis.stop();\n\t\t\t\tthis._startOffset = value;\n\t\t\t\tthis.play();\n\t\t\t\tthis._suspendInstanceEvents = suspend;\n\t\t\t} else {\n\t\t\t\tthis._startOffset = value;\n\t\t\t\tthis._currentTime = value;\n\t\t\t}\n\t\t}\n\t});\n} else {\n\tObject.assign(SoundInstance.prototype, {\n\t\tplay: function () {\n\t\t\tif (this._state !== STATE_STOPPED) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\n\t\t\tif (!this.source) {\n\t\t\t\tif (!this._createSource()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.volume = this._volume;\n\t\t\tthis.pitch = this._pitch;\n\t\t\tthis.loop = this._loop;\n\t\t\tthis.source.play();\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\n\t\t\tthis._manager.on('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.on('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.on('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.on('destroy', this._onManagerDestroy, this);\n\n\t\t\tif (this._manager.suspended) this._onManagerSuspend();\n\t\t\tif (!this._suspendInstanceEvents) this._onPlay();\n\t\t\treturn true;\n\t\t},\n\t\tpause: function () {\n\t\t\tif (!this.source || this._state !== STATE_PLAYING) return false;\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.pause();\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis._state = STATE_PAUSED;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onPause();\n\t\t\treturn true;\n\t\t},\n\t\tresume: function () {\n\t\t\tif (!this.source || this._state !== STATE_PAUSED) return false;\n\t\t\tthis._state = STATE_PLAYING;\n\t\t\tthis._playWhenLoaded = false;\n\n\t\t\tif (this.source.paused) {\n\t\t\t\tthis.source.play();\n\t\t\t\tif (!this._suspendInstanceEvents) this._onResume();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tstop: function () {\n\t\t\tif (!this.source || this._state === STATE_STOPPED) return false;\n\n\t\t\tthis._manager.off('volumechange', this._onManagerVolumeChange, this);\n\n\t\t\tthis._manager.off('suspend', this._onManagerSuspend, this);\n\n\t\t\tthis._manager.off('resume', this._onManagerResume, this);\n\n\t\t\tthis._manager.off('destroy', this._onManagerDestroy, this);\n\n\t\t\tthis._suspendEndEvent = true;\n\t\t\tthis.source.pause();\n\t\t\tthis._playWhenLoaded = false;\n\t\t\tthis._state = STATE_STOPPED;\n\t\t\tthis._startOffset = null;\n\t\t\tif (!this._suspendInstanceEvents) this._onStop();\n\t\t\treturn true;\n\t\t},\n\t\tsetExternalNodes: function () {},\n\t\tclearExternalNodes: function () {},\n\t\tgetExternalNodes: function () {\n\t\t\treturn [null, null];\n\t\t},\n\t\t_onLoadedMetadata: function () {\n\t\t\tthis.source.removeEventListener('loadedmetadata', this._loadedMetadataHandler);\n\t\t\tthis._isReady = true;\n\t\t\tlet offset = capTime(this._startOffset, this.duration);\n\t\t\toffset = capTime(this._startTime + offset, this._sound.duration);\n\t\t\tthis._startOffset = null;\n\t\t\tthis.source.currentTime = offset;\n\t\t},\n\t\t_createSource: function () {\n\t\t\tif (this._sound && this._sound.audio) {\n\t\t\t\tthis._isReady = false;\n\t\t\t\tthis.source = this._sound.audio.cloneNode(true);\n\t\t\t\tthis.source.addEventListener('loadedmetadata', this._loadedMetadataHandler);\n\t\t\t\tthis.source.addEventListener('timeupdate', this._timeUpdateHandler);\n\t\t\t\tthis.source.onended = this._endedHandler;\n\t\t\t}\n\n\t\t\treturn this.source;\n\t\t},\n\t\t_onTimeUpdate: function () {\n\t\t\tif (!this._duration) return;\n\n\t\t\tif (this.source.currentTime > capTime(this._startTime + this._duration, this.source.duration)) {\n\t\t\t\tif (this.loop) {\n\t\t\t\t\tthis.source.currentTime = capTime(this._startTime, this.source.duration);\n\t\t\t\t} else {\n\t\t\t\t\tthis.source.removeEventListener('timeupdate', this._timeUpdateHandler);\n\t\t\t\t\tthis.source.pause();\n\n\t\t\t\t\tthis._onEnded();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_onManagerDestroy: function () {\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.pause();\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'volume', {\n\t\tget: function () {\n\t\t\treturn this._volume;\n\t\t},\n\t\tset: function (volume) {\n\t\t\tvolume = math.clamp(volume, 0, 1);\n\t\t\tthis._volume = volume;\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.volume = volume * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'pitch', {\n\t\tget: function () {\n\t\t\treturn this._pitch;\n\t\t},\n\t\tset: function (pitch) {\n\t\t\tthis._pitch = Math.max(Number(pitch) || 0, 0.01);\n\n\t\t\tif (this.source) {\n\t\t\t\tthis.source.playbackRate = this._pitch;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'sound', {\n\t\tget: function () {\n\t\t\treturn this._sound;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.stop();\n\t\t\tthis._sound = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance.prototype, 'currentTime', {\n\t\tget: function () {\n\t\t\tif (this._startOffset !== null) {\n\t\t\t\treturn this._startOffset;\n\t\t\t}\n\n\t\t\tif (this._state === STATE_STOPPED || !this.source) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.source.currentTime - this._startTime;\n\t\t},\n\t\tset: function (value) {\n\t\t\tif (value < 0) return;\n\t\t\tthis._startOffset = value;\n\n\t\t\tif (this.source && this._isReady) {\n\t\t\t\tthis.source.currentTime = capTime(this._startTime + capTime(value, this.duration), this._sound.duration);\n\t\t\t\tthis._startOffset = null;\n\t\t\t}\n\t\t}\n\t});\n}\n\nconst MAX_DISTANCE = 10000;\n\nclass SoundInstance3d extends SoundInstance {\n\tconstructor(manager, sound, options) {\n\t\tsuper(manager, sound, options);\n\t\toptions = options || {};\n\t\tthis._position = new Vec3();\n\t\tif (options.position) this.position = options.position;\n\t\tthis._velocity = new Vec3();\n\t\tif (options.velocity) this.velocity = options.velocity;\n\t\tthis.maxDistance = options.maxDistance !== undefined ? Number(options.maxDistance) : MAX_DISTANCE;\n\t\tthis.refDistance = options.refDistance !== undefined ? Number(options.refDistance) : 1;\n\t\tthis.rollOffFactor = options.rollOffFactor !== undefined ? Number(options.rollOffFactor) : 1;\n\t\tthis.distanceModel = options.distanceModel !== undefined ? options.distanceModel : DISTANCE_LINEAR;\n\t}\n\n}\n\nif (hasAudioContext()) {\n\tObject.assign(SoundInstance3d.prototype, {\n\t\t_initializeNodes: function () {\n\t\t\tthis.gain = this._manager.context.createGain();\n\t\t\tthis.panner = this._manager.context.createPanner();\n\t\t\tthis.panner.connect(this.gain);\n\t\t\tthis._inputNode = this.panner;\n\t\t\tthis._connectorNode = this.gain;\n\n\t\t\tthis._connectorNode.connect(this._manager.context.destination);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'position', {\n\t\tget: function () {\n\t\t\treturn this._position;\n\t\t},\n\t\tset: function (position) {\n\t\t\tthis._position.copy(position);\n\n\t\t\tthis.panner.setPosition(position.x, position.y, position.z);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'velocity', {\n\t\tget: function () {\n\t\t\treturn this._velocity;\n\t\t},\n\t\tset: function (velocity) {\n\t\t\tthis._velocity.copy(velocity);\n\n\t\t\tthis.panner.setVelocity(velocity.x, velocity.y, velocity.z);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'maxDistance', {\n\t\tget: function () {\n\t\t\treturn this.panner.maxDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.maxDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'refDistance', {\n\t\tget: function () {\n\t\t\treturn this.panner.refDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.refDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {\n\t\tget: function () {\n\t\t\treturn this.panner.rolloffFactor;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.rolloffFactor = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'distanceModel', {\n\t\tget: function () {\n\t\t\treturn this.panner.distanceModel;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis.panner.distanceModel = value;\n\t\t}\n\t});\n} else {\n\tlet offset = new Vec3();\n\n\tconst fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rollOffFactor, distanceModel) {\n\t\toffset = offset.sub2(posOne, posTwo);\n\t\tconst distance = offset.length();\n\n\t\tif (distance < refDistance) {\n\t\t\treturn 1;\n\t\t} else if (distance > maxDistance) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet result = 0;\n\n\t\tif (distanceModel === DISTANCE_LINEAR) {\n\t\t\tresult = 1 - rollOffFactor * (distance - refDistance) / (maxDistance - refDistance);\n\t\t} else if (distanceModel === DISTANCE_INVERSE) {\n\t\t\tresult = refDistance / (refDistance + rollOffFactor * (distance - refDistance));\n\t\t} else if (distanceModel === DISTANCE_EXPONENTIAL) {\n\t\t\tresult = Math.pow(distance / refDistance, -rollOffFactor);\n\t\t}\n\n\t\treturn math.clamp(result, 0, 1);\n\t};\n\n\tObject.defineProperty(SoundInstance3d.prototype, 'position', {\n\t\tget: function () {\n\t\t\treturn this._position;\n\t\t},\n\t\tset: function (position) {\n\t\t\tthis._position.copy(position);\n\n\t\t\tif (this.source) {\n\t\t\t\tconst listener = this._manager.listener;\n\t\t\t\tconst lpos = listener.getPosition();\n\t\t\t\tconst factor = fallOff(lpos, this._position, this.refDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);\n\t\t\t\tconst v = this.volume;\n\t\t\t\tthis.source.volume = v * factor * this._manager.volume;\n\t\t\t}\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'velocity', {\n\t\tget: function () {\n\t\t\treturn this._velocity;\n\t\t},\n\t\tset: function (velocity) {\n\t\t\tthis._velocity.copy(velocity);\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'maxDistance', {\n\t\tget: function () {\n\t\t\treturn this._maxDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._maxDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'refDistance', {\n\t\tget: function () {\n\t\t\treturn this._refDistance;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._refDistance = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {\n\t\tget: function () {\n\t\t\treturn this._rollOffFactor;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._rollOffFactor = value;\n\t\t}\n\t});\n\tObject.defineProperty(SoundInstance3d.prototype, 'distanceModel', {\n\t\tget: function () {\n\t\t\treturn this._distanceModel;\n\t\t},\n\t\tset: function (value) {\n\t\t\tthis._distanceModel = value;\n\t\t}\n\t});\n}\n\nvar instanceOptions = {\n\tvolume: 0,\n\tpitch: 0,\n\tloop: false,\n\tstartTime: 0,\n\tduration: 0,\n\tposition: new Vec3(),\n\tmaxDistance: 0,\n\trefDistance: 0,\n\trollOffFactor: 0,\n\tdistanceModel: 0,\n\tonPlay: null,\n\tonPause: null,\n\tonResume: null,\n\tonStop: null,\n\tonEnd: null\n};\n\nclass SoundSlot extends EventHandler {\n\tconstructor(component, name, options) {\n\t\tsuper();\n\t\tthis._component = component;\n\t\tthis._assets = component.system.app.assets;\n\t\tthis._manager = component.system.manager;\n\t\tthis.name = name || 'Untitled';\n\t\toptions = options || {};\n\t\tthis._volume = options.volume !== undefined ? math.clamp(Number(options.volume) || 0, 0, 1) : 1;\n\t\tthis._pitch = options.pitch !== undefined ? Math.max(0.01, Number(options.pitch) || 0) : 1;\n\t\tthis._loop = !!(options.loop !== undefined ? options.loop : false);\n\t\tthis._duration = options.duration > 0 ? options.duration : null;\n\t\tthis._startTime = Math.max(0, Number(options.startTime) || 0);\n\t\tthis._overlap = !!options.overlap;\n\t\tthis._autoPlay = !!options.autoPlay;\n\t\tthis._firstNode = null;\n\t\tthis._lastNode = null;\n\t\tthis._asset = options.asset;\n\n\t\tif (this._asset instanceof Asset) {\n\t\t\tthis._asset = this._asset.id;\n\t\t}\n\n\t\tthis._onInstancePlayHandler = this._onInstancePlay.bind(this);\n\t\tthis._onInstancePauseHandler = this._onInstancePause.bind(this);\n\t\tthis._onInstanceResumeHandler = this._onInstanceResume.bind(this);\n\t\tthis._onInstanceStopHandler = this._onInstanceStop.bind(this);\n\t\tthis._onInstanceEndHandler = this._onInstanceEnd.bind(this);\n\t\tthis.instances = [];\n\t}\n\n\tplay() {\n\t\tif (!this.overlap) {\n\t\t\tthis.stop();\n\t\t}\n\n\t\tif (!this.isLoaded && !this._hasAsset()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instance = this._createInstance();\n\n\t\tthis.instances.push(instance);\n\n\t\tif (!this.isLoaded) {\n\t\t\tvar onLoad = function onLoad(sound) {\n\t\t\t\tvar playWhenLoaded = instance._playWhenLoaded;\n\t\t\t\tinstance.sound = sound;\n\n\t\t\t\tif (playWhenLoaded) {\n\t\t\t\t\tinstance.play();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.off('load', onLoad);\n\t\t\tthis.once('load', onLoad);\n\t\t\tthis.load();\n\t\t} else {\n\t\t\tinstance.play();\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tpause() {\n\t\tvar paused = false;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].pause()) {\n\t\t\t\tpaused = true;\n\t\t\t}\n\t\t}\n\n\t\treturn paused;\n\t}\n\n\tresume() {\n\t\tvar resumed = false;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].resume()) resumed = true;\n\t\t}\n\n\t\treturn resumed;\n\t}\n\n\tstop() {\n\t\tvar stopped = false;\n\t\tvar instances = this.instances;\n\t\tvar i = instances.length;\n\n\t\twhile (i--) {\n\t\t\tinstances[i].stop();\n\t\t\tstopped = true;\n\t\t}\n\n\t\tinstances.length = 0;\n\t\treturn stopped;\n\t}\n\n\tload() {\n\t\tif (!this._hasAsset()) return;\n\n\t\tvar asset = this._assets.get(this._asset);\n\n\t\tif (!asset) {\n\t\t\tthis._assets.off('add:' + this._asset, this._onAssetAdd, this);\n\n\t\t\tthis._assets.once('add:' + this._asset, this._onAssetAdd, this);\n\n\t\t\treturn;\n\t\t}\n\n\t\tasset.off('remove', this._onAssetRemoved, this);\n\t\tasset.on('remove', this._onAssetRemoved, this);\n\n\t\tif (!asset.resource) {\n\t\t\tasset.off('load', this._onAssetLoad, this);\n\t\t\tasset.once('load', this._onAssetLoad, this);\n\n\t\t\tthis._assets.load(asset);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire('load', asset.resource);\n\t}\n\n\tsetExternalNodes(firstNode, lastNode) {\n\t\tif (!firstNode) {\n\t\t\tconsole.error('The firstNode must have a valid AudioNode');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!lastNode) {\n\t\t\tlastNode = firstNode;\n\t\t}\n\n\t\tthis._firstNode = firstNode;\n\t\tthis._lastNode = lastNode;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].setExternalNodes(firstNode, lastNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearExternalNodes() {\n\t\tthis._firstNode = null;\n\t\tthis._lastNode = null;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].clearExternalNodes();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetExternalNodes() {\n\t\treturn [this._firstNode, this._lastNode];\n\t}\n\n\t_hasAsset() {\n\t\treturn this._asset != null;\n\t}\n\n\t_createInstance() {\n\t\tvar instance = null;\n\t\tvar component = this._component;\n\t\tvar sound = null;\n\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tif (asset) {\n\t\t\t\tsound = asset.resource;\n\t\t\t}\n\t\t}\n\n\t\tvar data = instanceOptions;\n\t\tdata.volume = this._volume * component.volume;\n\t\tdata.pitch = this._pitch * component.pitch;\n\t\tdata.loop = this._loop;\n\t\tdata.startTime = this._startTime;\n\t\tdata.duration = this._duration;\n\t\tdata.onPlay = this._onInstancePlayHandler;\n\t\tdata.onPause = this._onInstancePauseHandler;\n\t\tdata.onResume = this._onInstanceResumeHandler;\n\t\tdata.onStop = this._onInstanceStopHandler;\n\t\tdata.onEnd = this._onInstanceEndHandler;\n\n\t\tif (component.positional) {\n\t\t\tdata.position.copy(component.entity.getPosition());\n\t\t\tdata.maxDistance = component.maxDistance;\n\t\t\tdata.refDistance = component.refDistance;\n\t\t\tdata.rollOffFactor = component.rollOffFactor;\n\t\t\tdata.distanceModel = component.distanceModel;\n\t\t\tinstance = new SoundInstance3d(this._manager, sound, data);\n\t\t} else {\n\t\t\tinstance = new SoundInstance(this._manager, sound, data);\n\t\t}\n\n\t\tif (this._firstNode) {\n\t\t\tinstance.setExternalNodes(this._firstNode, this._lastNode);\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\t_onInstancePlay(instance) {\n\t\tthis.fire('play', instance);\n\n\t\tthis._component.fire('play', this, instance);\n\t}\n\n\t_onInstancePause(instance) {\n\t\tthis.fire('pause', instance);\n\n\t\tthis._component.fire('pause', this, instance);\n\t}\n\n\t_onInstanceResume(instance) {\n\t\tthis.fire('resume', instance);\n\n\t\tthis._component.fire('resume', this, instance);\n\t}\n\n\t_onInstanceStop(instance) {\n\t\tvar idx = this.instances.indexOf(instance);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.instances.splice(idx, 1);\n\t\t}\n\n\t\tthis.fire('stop', instance);\n\n\t\tthis._component.fire('stop', this, instance);\n\t}\n\n\t_onInstanceEnd(instance) {\n\t\tvar idx = this.instances.indexOf(instance);\n\n\t\tif (idx !== -1) {\n\t\t\tthis.instances.splice(idx, 1);\n\t\t}\n\n\t\tthis.fire('end', instance);\n\n\t\tthis._component.fire('end', this, instance);\n\t}\n\n\t_onAssetAdd(asset) {\n\t\tthis.load();\n\t}\n\n\t_onAssetLoad(asset) {\n\t\tthis.load();\n\t}\n\n\t_onAssetRemoved(asset) {\n\t\tasset.off('remove', this._onAssetRemoved, this);\n\n\t\tthis._assets.off('add:' + asset.id, this._onAssetAdd, this);\n\n\t\tthis.stop();\n\t}\n\n\tupdatePosition(position) {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tinstances[i].position = position;\n\t\t}\n\t}\n\n\tget volume() {\n\t\treturn this._volume;\n\t}\n\n\tset volume(value) {\n\t\tthis._volume = math.clamp(Number(value) || 0, 0, 1);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].volume = this._volume * this._component.volume;\n\t\t\t}\n\t\t}\n\t}\n\n\tget pitch() {\n\t\treturn this._pitch;\n\t}\n\n\tset pitch(value) {\n\t\tthis._pitch = Math.max(Number(value) || 0, 0.01);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].pitch = this.pitch * this._component.pitch;\n\t\t\t}\n\t\t}\n\t}\n\n\tget loop() {\n\t\treturn this._loop;\n\t}\n\n\tset loop(value) {\n\t\tthis._loop = !!value;\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tinstances[i].loop = this._loop;\n\t\t}\n\t}\n\n\tget autoPlay() {\n\t\treturn this._autoPlay;\n\t}\n\n\tset autoPlay(value) {\n\t\tthis._autoPlay = !!value;\n\t}\n\n\tget overlap() {\n\t\treturn this._overlap;\n\t}\n\n\tset overlap(value) {\n\t\tthis._overlap = !!value;\n\t}\n\n\tget startTime() {\n\t\treturn this._startTime;\n\t}\n\n\tset startTime(value) {\n\t\tthis._startTime = Math.max(0, Number(value) || 0);\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].startTime = this._startTime;\n\t\t\t}\n\t\t}\n\t}\n\n\tget duration() {\n\t\tvar assetDuration = 0;\n\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tassetDuration = asset.resource ? asset.resource.duration : 0;\n\t\t}\n\n\t\tif (this._duration != null) {\n\t\t\treturn this._duration % (assetDuration || 1);\n\t\t}\n\n\t\treturn assetDuration;\n\t}\n\n\tset duration(value) {\n\t\tthis._duration = Math.max(0, Number(value) || 0) || null;\n\n\t\tif (!this._overlap) {\n\t\t\tvar instances = this.instances;\n\n\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\tinstances[i].duration = this._duration;\n\t\t\t}\n\t\t}\n\t}\n\n\tget asset() {\n\t\treturn this._asset;\n\t}\n\n\tset asset(value) {\n\t\tvar old = this._asset;\n\n\t\tif (old) {\n\t\t\tthis._assets.off('add:' + old, this._onAssetAdd, this);\n\n\t\t\tvar oldAsset = this._assets.get(old);\n\n\t\t\tif (oldAsset) {\n\t\t\t\toldAsset.off('remove', this._onAssetRemoved, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._asset = value;\n\n\t\tif (this._asset instanceof Asset) {\n\t\t\tthis._asset = this._asset.id;\n\t\t}\n\n\t\tif (this._hasAsset() && this._component.enabled && this._component.entity.enabled) {\n\t\t\tthis.load();\n\t\t}\n\t}\n\n\tget isLoaded() {\n\t\tif (this._hasAsset()) {\n\t\t\tvar asset = this._assets.get(this._asset);\n\n\t\t\tif (asset) {\n\t\t\t\treturn !!asset.resource;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget isPlaying() {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (instances[i].isPlaying) return true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tget isPaused() {\n\t\tvar instances = this.instances;\n\t\tvar len = instances.length;\n\t\tif (len === 0) return false;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (!instances[i].isPaused) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget isStopped() {\n\t\tvar instances = this.instances;\n\n\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\tif (!instances[i].isStopped) return false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n}\n\nclass SoundComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._volume = 1;\n\t\tthis._pitch = 1;\n\t\tthis._positional = true;\n\t\tthis._refDistance = 1;\n\t\tthis._maxDistance = 10000;\n\t\tthis._rollOffFactor = 1;\n\t\tthis._distanceModel = DISTANCE_LINEAR;\n\t\tthis._slots = {};\n\t\tthis._playingBeforeDisable = {};\n\t}\n\n\tget positional() {\n\t\treturn this._positional;\n\t}\n\n\tset positional(newValue) {\n\t\tthis._positional = newValue;\n\t\tvar slots = this._slots;\n\n\t\tfor (var key in slots) {\n\t\t\tvar slot = slots[key];\n\n\t\t\tif (!slot.overlap) {\n\t\t\t\tvar instances = slot.instances;\n\t\t\t\tvar oldLength = instances.length;\n\n\t\t\t\tfor (var i = oldLength - 1; i >= 0; i--) {\n\t\t\t\t\tvar isPlaying = instances[i].isPlaying || instances[i].isSuspended;\n\t\t\t\t\tvar currentTime = instances[i].currentTime;\n\t\t\t\t\tif (isPlaying) instances[i].stop();\n\n\t\t\t\t\tvar instance = slot._createInstance();\n\n\t\t\t\t\tif (isPlaying) {\n\t\t\t\t\t\tinstance.play();\n\t\t\t\t\t\tinstance.currentTime = currentTime;\n\t\t\t\t\t}\n\n\t\t\t\t\tinstances.push(instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget slots() {\n\t\treturn this._slots;\n\t}\n\n\tset slots(newValue) {\n\t\tvar key;\n\t\tvar oldValue = this._slots;\n\n\t\tif (oldValue) {\n\t\t\tfor (key in oldValue) {\n\t\t\t\toldValue[key].stop();\n\t\t\t}\n\t\t}\n\n\t\tvar slots = {};\n\n\t\tfor (key in newValue) {\n\t\t\tif (!(newValue[key] instanceof SoundSlot)) {\n\t\t\t\tif (newValue[key].name) {\n\t\t\t\t\tslots[newValue[key].name] = new SoundSlot(this, newValue[key].name, newValue[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tslots[newValue[key].name] = newValue[key];\n\t\t\t}\n\t\t}\n\n\t\tthis._slots = slots;\n\t\tif (this.enabled && this.entity.enabled) this.onEnable();\n\t}\n\n\tonEnable() {\n\t\tif (this.system._inTools) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar slots = this._slots;\n\t\tvar playingBeforeDisable = this._playingBeforeDisable;\n\n\t\tfor (var key in slots) {\n\t\t\tvar slot = slots[key];\n\n\t\t\tif (slot.autoPlay && slot.isStopped) {\n\t\t\t\tslot.play();\n\t\t\t} else if (playingBeforeDisable[key]) {\n\t\t\t\tslot.resume();\n\t\t\t} else if (!slot.isLoaded) {\n\t\t\t\tslot.load();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar slots = this._slots;\n\t\tvar playingBeforeDisable = {};\n\n\t\tfor (var key in slots) {\n\t\t\tif (!slots[key].overlap) {\n\t\t\t\tif (slots[key].isPlaying) {\n\t\t\t\t\tslots[key].pause();\n\t\t\t\t\tplayingBeforeDisable[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._playingBeforeDisable = playingBeforeDisable;\n\t}\n\n\tonRemove() {\n\t\tthis.off();\n\t}\n\n\taddSlot(name, options) {\n\t\tvar slots = this._slots;\n\n\t\tif (slots[name]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar slot = new SoundSlot(this, name, options);\n\t\tslots[name] = slot;\n\n\t\tif (slot.autoPlay && this.enabled && this.entity.enabled) {\n\t\t\tslot.play();\n\t\t}\n\n\t\treturn slot;\n\t}\n\n\tremoveSlot(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (slots[name]) {\n\t\t\tslots[name].stop();\n\t\t\tdelete slots[name];\n\t\t}\n\t}\n\n\tslot(name) {\n\t\treturn this._slots[name];\n\t}\n\n\tplay(name) {\n\t\tif (!this.enabled || !this.entity.enabled) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar slot = this._slots[name];\n\n\t\tif (!slot) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn slot.play();\n\t}\n\n\tpause(name) {\n\t\tvar slot;\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tslot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tslot.pause();\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].pause();\n\t\t\t}\n\t\t}\n\t}\n\n\tresume(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tvar slot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (slot.isPaused) {\n\t\t\t\tslot.resume();\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].resume();\n\t\t\t}\n\t\t}\n\t}\n\n\tstop(name) {\n\t\tvar slots = this._slots;\n\n\t\tif (name) {\n\t\t\tvar slot = slots[name];\n\n\t\t\tif (!slot) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tslot.stop();\n\t\t} else {\n\t\t\tfor (var key in slots) {\n\t\t\t\tslots[key].stop();\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction defineSoundPropertyBasic(publicName, privateName) {\n\tObject.defineProperty(SoundComponent.prototype, publicName, {\n\t\tget: function () {\n\t\t\treturn this[privateName];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tthis[privateName] = newValue;\n\t\t\tvar slots = this._slots;\n\n\t\t\tfor (var key in slots) {\n\t\t\t\tvar slot = slots[key];\n\n\t\t\t\tif (!slot.overlap) {\n\t\t\t\t\tvar instances = slot.instances;\n\n\t\t\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\t\t\tinstances[i][publicName] = newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction defineSoundPropertyFactor(publicName, privateName) {\n\tObject.defineProperty(SoundComponent.prototype, publicName, {\n\t\tget: function () {\n\t\t\treturn this[privateName];\n\t\t},\n\t\tset: function (newValue) {\n\t\t\tthis[privateName] = newValue;\n\t\t\tvar slots = this._slots;\n\n\t\t\tfor (var key in slots) {\n\t\t\t\tvar slot = slots[key];\n\n\t\t\t\tif (!slot.overlap) {\n\t\t\t\t\tvar instances = slot.instances;\n\n\t\t\t\t\tfor (var i = 0, len = instances.length; i < len; i++) {\n\t\t\t\t\t\tinstances[i][publicName] = slot[publicName] * newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\ndefineSoundPropertyFactor('pitch', '_pitch');\ndefineSoundPropertyFactor('volume', '_volume');\ndefineSoundPropertyBasic('refDistance', '_refDistance');\ndefineSoundPropertyBasic('maxDistance', '_maxDistance');\ndefineSoundPropertyBasic('rollOffFactor', '_rollOffFactor');\ndefineSoundPropertyBasic('distanceModel', '_distanceModel');\n\nclass SoundComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$2 = ['enabled'];\n\nclass SoundComponentSystem extends ComponentSystem {\n\tconstructor(app, manager) {\n\t\tsuper(app);\n\t\tthis.id = \"sound\";\n\t\tthis.ComponentType = SoundComponent;\n\t\tthis.DataType = SoundComponentData;\n\t\tthis.schema = _schema$2;\n\t\tthis.manager = manager;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tproperties = ['volume', 'pitch', 'positional', 'refDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'slots'];\n\n\t\tfor (var i = 0; i < properties.length; i++) {\n\t\t\tif (data.hasOwnProperty(properties[i])) {\n\t\t\t\tcomponent[properties[i]] = data[properties[i]];\n\t\t\t}\n\t\t}\n\n\t\tsuper.initializeComponentData(component, data, ['enabled']);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar srcComponent = entity.sound;\n\t\tvar srcSlots = srcComponent.slots;\n\t\tvar slots = {};\n\n\t\tfor (var key in srcSlots) {\n\t\t\tvar srcSlot = srcSlots[key];\n\t\t\tslots[key] = {\n\t\t\t\tname: srcSlot.name,\n\t\t\t\tvolume: srcSlot.volume,\n\t\t\t\tpitch: srcSlot.pitch,\n\t\t\t\tloop: srcSlot.loop,\n\t\t\t\tduration: srcSlot.duration,\n\t\t\t\tstartTime: srcSlot.startTime,\n\t\t\t\toverlap: srcSlot.overlap,\n\t\t\t\tautoPlay: srcSlot.autoPlay,\n\t\t\t\tasset: srcSlot.asset\n\t\t\t};\n\t\t}\n\n\t\tvar cloneData = {\n\t\t\tdistanceModel: srcComponent.distanceModel,\n\t\t\tenabled: srcComponent.enabled,\n\t\t\tmaxDistance: srcComponent.maxDistance,\n\t\t\tpitch: srcComponent.pitch,\n\t\t\tpositional: srcComponent.positional,\n\t\t\trefDistance: srcComponent.refDistance,\n\t\t\trollOffFactor: srcComponent.rollOffFactor,\n\t\t\tslots: slots,\n\t\t\tvolume: srcComponent.volume\n\t\t};\n\t\treturn this.addComponent(clone, cloneData);\n\t}\n\n\tonUpdate(dt) {\n\t\tvar store = this.store;\n\n\t\tfor (var id in store) {\n\t\t\tif (store.hasOwnProperty(id)) {\n\t\t\t\tvar item = store[id];\n\t\t\t\tvar entity = item.entity;\n\n\t\t\t\tif (entity.enabled) {\n\t\t\t\t\tvar component = entity.sound;\n\n\t\t\t\t\tif (component.enabled && component.positional) {\n\t\t\t\t\t\tvar position = entity.getPosition();\n\t\t\t\t\t\tvar slots = component.slots;\n\n\t\t\t\t\t\tfor (var key in slots) {\n\t\t\t\t\t\t\tslots[key].updatePosition(position);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tvar slots = component.slots;\n\n\t\tfor (var key in slots) {\n\t\t\tif (!slots[key].overlap) {\n\t\t\t\tslots[key].stop();\n\t\t\t}\n\t\t}\n\n\t\tcomponent.onRemove();\n\t}\n\n\tget volume() {\n\t\treturn this.manager.volume;\n\t}\n\n\tset volume(volume) {\n\t\tthis.manager.volume = volume;\n\t}\n\n\tget context() {\n\t\tif (!hasAudioContext()) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.manager.context;\n\t}\n\n}\n\nComponent._buildAccessors(SoundComponent.prototype, _schema$2);\n\nconst SPRITETYPE_SIMPLE = 'simple';\nconst SPRITETYPE_ANIMATED = 'animated';\n\nclass SpriteAnimationClip extends EventHandler {\n\tconstructor(component, data) {\n\t\tsuper();\n\t\tthis._component = component;\n\t\tthis._frame = 0;\n\t\tthis._sprite = null;\n\t\tthis._spriteAsset = null;\n\t\tthis.spriteAsset = data.spriteAsset;\n\t\tthis.name = data.name;\n\t\tthis.fps = data.fps || 0;\n\t\tthis.loop = data.loop || false;\n\t\tthis._playing = false;\n\t\tthis._paused = false;\n\t\tthis._time = 0;\n\t}\n\n\t_onSpriteAssetAdded(asset) {\n\t\tthis._component.system.app.assets.off('add:' + asset.id, this._onSpriteAssetAdded, this);\n\n\t\tif (this._spriteAsset === asset.id) {\n\t\t\tthis._bindSpriteAsset(asset);\n\t\t}\n\t}\n\n\t_bindSpriteAsset(asset) {\n\t\tasset.on(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.on(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource) {\n\t\t\tthis._onSpriteAssetLoad(asset);\n\t\t} else {\n\t\t\tthis._component.system.app.assets.load(asset);\n\t\t}\n\t}\n\n\t_unbindSpriteAsset(asset) {\n\t\tasset.off(\"load\", this._onSpriteAssetLoad, this);\n\t\tasset.off(\"remove\", this._onSpriteAssetRemove, this);\n\n\t\tif (asset.resource && asset.resource.atlas) {\n\t\t\tthis._component.system.app.assets.off('load:' + asset.data.textureAtlasAsset, this._onTextureAtlasLoad, this);\n\t\t}\n\t}\n\n\t_onSpriteAssetLoad(asset) {\n\t\tif (!asset.resource) {\n\t\t\tthis.sprite = null;\n\t\t} else {\n\t\t\tif (!asset.resource.atlas) {\n\t\t\t\tvar atlasAssetId = asset.data.textureAtlasAsset;\n\t\t\t\tvar assets = this._component.system.app.assets;\n\t\t\t\tassets.off('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t\tassets.once('load:' + atlasAssetId, this._onTextureAtlasLoad, this);\n\t\t\t} else {\n\t\t\t\tthis.sprite = asset.resource;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onTextureAtlasLoad(atlasAsset) {\n\t\tvar spriteAsset = this._spriteAsset;\n\n\t\tif (spriteAsset instanceof Asset) {\n\t\t\tthis._onSpriteAssetLoad(spriteAsset);\n\t\t} else {\n\t\t\tthis._onSpriteAssetLoad(this._component.system.app.assets.get(spriteAsset));\n\t\t}\n\t}\n\n\t_onSpriteAssetRemove(asset) {\n\t\tthis.sprite = null;\n\t}\n\n\t_onSpriteMeshesChange() {\n\t\tif (this._component.currentClip === this) {\n\t\t\tthis._component._showFrame(this.frame);\n\t\t}\n\t}\n\n\t_onSpritePpuChanged() {\n\t\tif (this._component.currentClip === this) {\n\t\t\tif (this.sprite.renderMode !== SPRITE_RENDERMODE_SIMPLE) {\n\t\t\t\tthis._component._showFrame(this.frame);\n\t\t\t}\n\t\t}\n\t}\n\n\t_update(dt) {\n\t\tif (this.fps === 0) return;\n\t\tif (!this._playing || this._paused || !this._sprite) return;\n\t\tvar dir = this.fps < 0 ? -1 : 1;\n\t\tvar time = this._time + dt * this._component.speed * dir;\n\t\tvar duration = this.duration;\n\t\tvar end = time > duration || time < 0;\n\n\t\tthis._setTime(time);\n\n\t\tvar frame = this.frame;\n\n\t\tif (this._sprite) {\n\t\t\tframe = Math.floor(this._sprite.frameKeys.length * this._time / duration);\n\t\t} else {\n\t\t\tframe = 0;\n\t\t}\n\n\t\tif (frame !== this._frame) {\n\t\t\tthis._setFrame(frame);\n\t\t}\n\n\t\tif (end) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis.fire('loop');\n\n\t\t\t\tthis._component.fire('loop', this);\n\t\t\t} else {\n\t\t\t\tthis._playing = false;\n\t\t\t\tthis._paused = false;\n\t\t\t\tthis.fire('end');\n\n\t\t\t\tthis._component.fire('end', this);\n\t\t\t}\n\t\t}\n\t}\n\n\t_setTime(value) {\n\t\tthis._time = value;\n\t\tvar duration = this.duration;\n\n\t\tif (this._time < 0) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis._time = this._time % duration + duration;\n\t\t\t} else {\n\t\t\t\tthis._time = 0;\n\t\t\t}\n\t\t} else if (this._time > duration) {\n\t\t\tif (this.loop) {\n\t\t\t\tthis._time %= duration;\n\t\t\t} else {\n\t\t\t\tthis._time = duration;\n\t\t\t}\n\t\t}\n\t}\n\n\t_setFrame(value) {\n\t\tif (this._sprite) {\n\t\t\tthis._frame = math.clamp(value, 0, this._sprite.frameKeys.length - 1);\n\t\t} else {\n\t\t\tthis._frame = value;\n\t\t}\n\n\t\tif (this._component.currentClip === this) {\n\t\t\tthis._component._showFrame(this._frame);\n\t\t}\n\t}\n\n\t_destroy() {\n\t\tif (this._sprite) {\n\t\t\tthis.sprite = null;\n\t\t}\n\n\t\tif (this._spriteAsset) {\n\t\t\tthis.spriteAsset = null;\n\t\t}\n\t}\n\n\tplay() {\n\t\tif (this._playing) return;\n\t\tthis._playing = true;\n\t\tthis._paused = false;\n\t\tthis.frame = 0;\n\t\tthis.fire('play');\n\n\t\tthis._component.fire('play', this);\n\t}\n\n\tpause() {\n\t\tif (!this._playing || this._paused) return;\n\t\tthis._paused = true;\n\t\tthis.fire('pause');\n\n\t\tthis._component.fire('pause', this);\n\t}\n\n\tresume() {\n\t\tif (!this._paused) return;\n\t\tthis._paused = false;\n\t\tthis.fire('resume');\n\n\t\tthis._component.fire('resume', this);\n\t}\n\n\tstop() {\n\t\tif (!this._playing) return;\n\t\tthis._playing = false;\n\t\tthis._paused = false;\n\t\tthis._time = 0;\n\t\tthis.frame = 0;\n\t\tthis.fire('stop');\n\n\t\tthis._component.fire('stop', this);\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tvar assets = this._component.system.app.assets;\n\t\tvar id = value;\n\n\t\tif (value instanceof Asset) {\n\t\t\tid = value.id;\n\t\t}\n\n\t\tif (this._spriteAsset !== id) {\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar prev = assets.get(this._spriteAsset);\n\n\t\t\t\tif (prev) {\n\t\t\t\t\tthis._unbindSpriteAsset(prev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._spriteAsset = id;\n\n\t\t\tif (this._spriteAsset) {\n\t\t\t\tvar asset = assets.get(this._spriteAsset);\n\n\t\t\t\tif (!asset) {\n\t\t\t\t\tthis.sprite = null;\n\t\t\t\t\tassets.on('add:' + this._spriteAsset, this._onSpriteAssetAdded, this);\n\t\t\t\t} else {\n\t\t\t\t\tthis._bindSpriteAsset(asset);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.sprite = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tget sprite() {\n\t\treturn this._sprite;\n\t}\n\n\tset sprite(value) {\n\t\tif (this._sprite) {\n\t\t\tthis._sprite.off('set:meshes', this._onSpriteMeshesChange, this);\n\n\t\t\tthis._sprite.off('set:pixelsPerUnit', this._onSpritePpuChanged, this);\n\n\t\t\tthis._sprite.off('set:atlas', this._onSpriteMeshesChange, this);\n\n\t\t\tif (this._sprite.atlas) {\n\t\t\t\tthis._sprite.atlas.off('set:texture', this._onSpriteMeshesChange, this);\n\t\t\t}\n\t\t}\n\n\t\tthis._sprite = value;\n\n\t\tif (this._sprite) {\n\t\t\tthis._sprite.on('set:meshes', this._onSpriteMeshesChange, this);\n\n\t\t\tthis._sprite.on('set:pixelsPerUnit', this._onSpritePpuChanged, this);\n\n\t\t\tthis._sprite.on('set:atlas', this._onSpriteMeshesChange, this);\n\n\t\t\tif (this._sprite.atlas) {\n\t\t\t\tthis._sprite.atlas.on('set:texture', this._onSpriteMeshesChange, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this._component.currentClip === this) {\n\t\t\tvar mi;\n\n\t\t\tif (!value || !value.atlas) {\n\t\t\t\tmi = this._component._meshInstance;\n\n\t\t\t\tif (mi) {\n\t\t\t\t\tmi.deleteParameter('texture_emissiveMap');\n\t\t\t\t\tmi.deleteParameter('texture_opacityMap');\n\t\t\t\t}\n\n\t\t\t\tthis._component._hideModel();\n\t\t\t} else {\n\t\t\t\tif (value.atlas.texture) {\n\t\t\t\t\tmi = this._component._meshInstance;\n\n\t\t\t\t\tif (mi) {\n\t\t\t\t\t\tmi.setParameter('texture_emissiveMap', value.atlas.texture);\n\t\t\t\t\t\tmi.setParameter('texture_opacityMap', value.atlas.texture);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._component.enabled && this._component.entity.enabled) {\n\t\t\t\t\t\tthis._component._showModel();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.time && this.fps) {\n\t\t\t\t\tthis.time = this.time;\n\t\t\t\t} else {\n\t\t\t\t\tthis.frame = this.frame;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget frame() {\n\t\treturn this._frame;\n\t}\n\n\tset frame(value) {\n\t\tthis._setFrame(value);\n\n\t\tvar fps = this.fps || Number.MIN_VALUE;\n\n\t\tthis._setTime(this._frame / fps);\n\t}\n\n\tget isPlaying() {\n\t\treturn this._playing;\n\t}\n\n\tget isPaused() {\n\t\treturn this._paused;\n\t}\n\n\tget duration() {\n\t\tif (this._sprite) {\n\t\t\tvar fps = this.fps || Number.MIN_VALUE;\n\t\t\treturn this._sprite.frameKeys.length / Math.abs(fps);\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tget time() {\n\t\treturn this._time;\n\t}\n\n\tset time(value) {\n\t\tthis._setTime(value);\n\n\t\tif (this._sprite) {\n\t\t\tthis.frame = Math.min(this._sprite.frameKeys.length - 1, Math.floor(this._time * Math.abs(this.fps)));\n\t\t} else {\n\t\t\tthis.frame = 0;\n\t\t}\n\t}\n\n}\n\nconst PARAM_EMISSIVE_MAP = 'texture_emissiveMap';\nconst PARAM_OPACITY_MAP = 'texture_opacityMap';\nconst PARAM_EMISSIVE = 'material_emissive';\nconst PARAM_OPACITY = 'material_opacity';\nconst PARAM_INNER_OFFSET = 'innerOffset';\nconst PARAM_OUTER_SCALE = 'outerScale';\nconst PARAM_ATLAS_RECT = 'atlasRect';\n\nclass SpriteComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._type = SPRITETYPE_SIMPLE;\n\t\tthis._material = system.defaultMaterial;\n\t\tthis._color = new Color(1, 1, 1, 1);\n\t\tthis._colorUniform = new Float32Array(3);\n\t\tthis._speed = 1;\n\t\tthis._flipX = false;\n\t\tthis._flipY = false;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._drawOrder = 0;\n\t\tthis._layers = [LAYERID_WORLD];\n\t\tthis._outerScale = new Vec2(1, 1);\n\t\tthis._outerScaleUniform = new Float32Array(2);\n\t\tthis._innerOffset = new Vec4();\n\t\tthis._innerOffsetUniform = new Float32Array(4);\n\t\tthis._atlasRect = new Vec4();\n\t\tthis._atlasRectUniform = new Float32Array(4);\n\t\tthis._batchGroupId = -1;\n\t\tthis._batchGroup = null;\n\t\tthis._node = new GraphNode();\n\t\tthis._model = new Model();\n\t\tthis._model.graph = this._node;\n\t\tthis._meshInstance = null;\n\t\tentity.addChild(this._model.graph);\n\t\tthis._model._entity = entity;\n\t\tthis._updateAabbFunc = this._updateAabb.bind(this);\n\t\tthis._addedModel = false;\n\t\tthis._autoPlayClip = null;\n\t\tthis._clips = {};\n\t\tthis._defaultClip = new SpriteAnimationClip(this, {\n\t\t\tname: this.entity.name,\n\t\t\tfps: 0,\n\t\t\tloop: false,\n\t\t\tspriteAsset: null\n\t\t});\n\t\tthis._currentClip = this._defaultClip;\n\t}\n\n\tonEnable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.on(\"set:layers\", this._onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.on(\"add\", this._onLayerAdded, this);\n\t\t\tscene.layers.on(\"remove\", this._onLayerRemoved, this);\n\t\t}\n\n\t\tthis._showModel();\n\n\t\tif (this._autoPlayClip) this._tryAutoPlay();\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.insert(BatchGroup.SPRITE, this._batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDisable() {\n\t\tvar app = this.system.app;\n\t\tvar scene = app.scene;\n\t\tscene.off(\"set:layers\", this._onLayersChanged, this);\n\n\t\tif (scene.layers) {\n\t\t\tscene.layers.off(\"add\", this._onLayerAdded, this);\n\t\t\tscene.layers.off(\"remove\", this._onLayerRemoved, this);\n\t\t}\n\n\t\tthis.stop();\n\n\t\tthis._hideModel();\n\n\t\tif (this._batchGroupId >= 0) {\n\t\t\tapp.batcher.remove(BatchGroup.SPRITE, this._batchGroupId, this.entity);\n\t\t}\n\t}\n\n\tonDestroy() {\n\t\tthis._currentClip = null;\n\n\t\tif (this._defaultClip) {\n\t\t\tthis._defaultClip._destroy();\n\n\t\t\tthis._defaultClip = null;\n\t\t}\n\n\t\tfor (var key in this._clips) {\n\t\t\tthis._clips[key]._destroy();\n\t\t}\n\n\t\tthis._clips = null;\n\n\t\tthis._hideModel();\n\n\t\tthis._model = null;\n\n\t\tif (this._node) {\n\t\t\tif (this._node.parent) this._node.parent.removeChild(this._node);\n\t\t\tthis._node = null;\n\t\t}\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.material = null;\n\t\t\tthis._meshInstance.mesh = null;\n\t\t\tthis._meshInstance = null;\n\t\t}\n\t}\n\n\t_showModel() {\n\t\tif (this._addedModel) return;\n\t\tif (!this._meshInstance) return;\n\t\tvar i;\n\t\tvar len;\n\t\tvar meshInstances = [this._meshInstance];\n\n\t\tfor (i = 0, len = this._layers.length; i < len; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.addMeshInstances(meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._addedModel = true;\n\t}\n\n\t_hideModel() {\n\t\tif (!this._addedModel || !this._meshInstance) return;\n\t\tvar i;\n\t\tvar len;\n\t\tvar meshInstances = [this._meshInstance];\n\n\t\tfor (i = 0, len = this._layers.length; i < len; i++) {\n\t\t\tvar layer = this.system.app.scene.layers.getLayerById(this._layers[i]);\n\n\t\t\tif (layer) {\n\t\t\t\tlayer.removeMeshInstances(meshInstances);\n\t\t\t}\n\t\t}\n\n\t\tthis._addedModel = false;\n\t}\n\n\t_showFrame(frame) {\n\t\tif (!this.sprite) return;\n\t\tvar mesh = this.sprite.meshes[frame];\n\n\t\tif (!mesh) {\n\t\t\tif (this._meshInstance) {\n\t\t\t\tthis._meshInstance.mesh = null;\n\t\t\t\tthis._meshInstance.visible = false;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar material;\n\n\t\tif (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED) {\n\t\t\tmaterial = this.system.default9SlicedMaterialSlicedMode;\n\t\t} else if (this.sprite.renderMode === SPRITE_RENDERMODE_TILED) {\n\t\t\tmaterial = this.system.default9SlicedMaterialTiledMode;\n\t\t} else {\n\t\t\tmaterial = this.system.defaultMaterial;\n\t\t}\n\n\t\tif (!this._meshInstance) {\n\t\t\tthis._meshInstance = new MeshInstance(mesh, this._material, this._node);\n\t\t\tthis._meshInstance.castShadow = false;\n\t\t\tthis._meshInstance.receiveShadow = false;\n\t\t\tthis._meshInstance.drawOrder = this._drawOrder;\n\n\t\t\tthis._model.meshInstances.push(this._meshInstance);\n\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE, this._colorUniform);\n\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY, this._color.a);\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis._showModel();\n\t\t\t}\n\t\t}\n\n\t\tif (this._meshInstance.material !== material) {\n\t\t\tthis._meshInstance.material = material;\n\t\t}\n\n\t\tif (this._meshInstance.mesh !== mesh) {\n\t\t\tthis._meshInstance.mesh = mesh;\n\t\t\tthis._meshInstance.visible = true;\n\t\t\tthis._meshInstance._aabbVer = -1;\n\t\t}\n\n\t\tif (this.sprite.atlas && this.sprite.atlas.texture) {\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE_MAP, this.sprite.atlas.texture);\n\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY_MAP, this.sprite.atlas.texture);\n\t\t} else {\n\t\t\tthis._meshInstance.deleteParameter(PARAM_EMISSIVE_MAP);\n\n\t\t\tthis._meshInstance.deleteParameter(PARAM_OPACITY_MAP);\n\t\t}\n\n\t\tif (this.sprite.atlas && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tthis._meshInstance._updateAabbFunc = this._updateAabbFunc;\n\t\t\tvar frameData = this.sprite.atlas.frames[this.sprite.frameKeys[frame]];\n\n\t\t\tif (frameData) {\n\t\t\t\tvar borderWidthScale = 2 / frameData.rect.z;\n\t\t\t\tvar borderHeightScale = 2 / frameData.rect.w;\n\n\t\t\t\tthis._innerOffset.set(frameData.border.x * borderWidthScale, frameData.border.y * borderHeightScale, frameData.border.z * borderWidthScale, frameData.border.w * borderHeightScale);\n\n\t\t\t\tvar tex = this.sprite.atlas.texture;\n\n\t\t\t\tthis._atlasRect.set(frameData.rect.x / tex.width, frameData.rect.y / tex.height, frameData.rect.z / tex.width, frameData.rect.w / tex.height);\n\t\t\t} else {\n\t\t\t\tthis._innerOffset.set(0, 0, 0, 0);\n\t\t\t}\n\n\t\t\tthis._innerOffsetUniform[0] = this._innerOffset.x;\n\t\t\tthis._innerOffsetUniform[1] = this._innerOffset.y;\n\t\t\tthis._innerOffsetUniform[2] = this._innerOffset.z;\n\t\t\tthis._innerOffsetUniform[3] = this._innerOffset.w;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_INNER_OFFSET, this._innerOffsetUniform);\n\n\t\t\tthis._atlasRectUniform[0] = this._atlasRect.x;\n\t\t\tthis._atlasRectUniform[1] = this._atlasRect.y;\n\t\t\tthis._atlasRectUniform[2] = this._atlasRect.z;\n\t\t\tthis._atlasRectUniform[3] = this._atlasRect.w;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_ATLAS_RECT, this._atlasRectUniform);\n\t\t} else {\n\t\t\tthis._meshInstance._updateAabbFunc = null;\n\t\t}\n\n\t\tthis._updateTransform();\n\t}\n\n\t_updateTransform() {\n\t\tvar scaleX = this.flipX ? -1 : 1;\n\t\tvar scaleY = this.flipY ? -1 : 1;\n\t\tvar posX = 0;\n\t\tvar posY = 0;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_SLICED || this.sprite.renderMode === SPRITE_RENDERMODE_TILED)) {\n\t\t\tvar w = 1;\n\t\t\tvar h = 1;\n\n\t\t\tif (this.sprite.atlas) {\n\t\t\t\tvar frameData = this.sprite.atlas.frames[this.sprite.frameKeys[this.frame]];\n\n\t\t\t\tif (frameData) {\n\t\t\t\t\tw = frameData.rect.z;\n\t\t\t\t\th = frameData.rect.w;\n\t\t\t\t\tposX = (0.5 - frameData.pivot.x) * this._width;\n\t\t\t\t\tposY = (0.5 - frameData.pivot.y) * this._height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar scaleMulX = w / this.sprite.pixelsPerUnit;\n\t\t\tvar scaleMulY = h / this.sprite.pixelsPerUnit;\n\n\t\t\tthis._outerScale.set(Math.max(this._width, this._innerOffset.x * scaleMulX), Math.max(this._height, this._innerOffset.y * scaleMulY));\n\n\t\t\tscaleX *= scaleMulX;\n\t\t\tscaleY *= scaleMulY;\n\t\t\tthis._outerScale.x /= scaleMulX;\n\t\t\tthis._outerScale.y /= scaleMulY;\n\t\t\tscaleX *= math.clamp(this._width / (this._innerOffset.x * scaleMulX), 0.0001, 1);\n\t\t\tscaleY *= math.clamp(this._height / (this._innerOffset.y * scaleMulY), 0.0001, 1);\n\n\t\t\tif (this._meshInstance) {\n\t\t\t\tthis._outerScaleUniform[0] = this._outerScale.x;\n\t\t\t\tthis._outerScaleUniform[1] = this._outerScale.y;\n\n\t\t\t\tthis._meshInstance.setParameter(PARAM_OUTER_SCALE, this._outerScaleUniform);\n\t\t\t}\n\t\t}\n\n\t\tthis._node.setLocalScale(scaleX, scaleY, 1);\n\n\t\tthis._node.setLocalPosition(posX, posY, 0);\n\t}\n\n\t_updateAabb(aabb) {\n\t\taabb.center.set(0, 0, 0);\n\t\taabb.halfExtents.set(this._outerScale.x * 0.5, this._outerScale.y * 0.5, 0.001);\n\t\taabb.setFromTransformedAabb(aabb, this._node.getWorldTransform());\n\t\treturn aabb;\n\t}\n\n\t_tryAutoPlay() {\n\t\tif (!this._autoPlayClip) return;\n\t\tif (this.type !== SPRITETYPE_ANIMATED) return;\n\t\tvar clip = this._clips[this._autoPlayClip];\n\n\t\tif (clip && !clip.isPlaying && (!this._currentClip || !this._currentClip.isPlaying)) {\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis.play(clip.name);\n\t\t\t}\n\t\t}\n\t}\n\n\t_onLayersChanged(oldComp, newComp) {\n\t\toldComp.off(\"add\", this.onLayerAdded, this);\n\t\toldComp.off(\"remove\", this.onLayerRemoved, this);\n\t\tnewComp.on(\"add\", this.onLayerAdded, this);\n\t\tnewComp.on(\"remove\", this.onLayerRemoved, this);\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis._showModel();\n\t\t}\n\t}\n\n\t_onLayerAdded(layer) {\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\n\t\tif (this._addedModel && this.enabled && this.entity.enabled && this._meshInstance) {\n\t\t\tlayer.addMeshInstances([this._meshInstance]);\n\t\t}\n\t}\n\n\t_onLayerRemoved(layer) {\n\t\tif (!this._meshInstance) return;\n\t\tvar index = this.layers.indexOf(layer.id);\n\t\tif (index < 0) return;\n\t\tlayer.removeMeshInstances([this._meshInstance]);\n\t}\n\n\tremoveModelFromLayers() {\n\t\tvar layer;\n\n\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\tlayer = this.system.app.scene.layers.getLayerById(this.layers[i]);\n\t\t\tif (!layer) continue;\n\t\t\tlayer.removeMeshInstances([this._meshInstance]);\n\t\t}\n\t}\n\n\taddClip(data) {\n\t\tvar clip = new SpriteAnimationClip(this, {\n\t\t\tname: data.name,\n\t\t\tfps: data.fps,\n\t\t\tloop: data.loop,\n\t\t\tspriteAsset: data.spriteAsset\n\t\t});\n\t\tthis._clips[data.name] = clip;\n\t\tif (clip.name && clip.name === this._autoPlayClip) this._tryAutoPlay();\n\t\treturn clip;\n\t}\n\n\tremoveClip(name) {\n\t\tdelete this._clips[name];\n\t}\n\n\tclip(name) {\n\t\treturn this._clips[name];\n\t}\n\n\tplay(name) {\n\t\tvar clip = this._clips[name];\n\t\tvar current = this._currentClip;\n\n\t\tif (current && current !== clip) {\n\t\t\tcurrent._playing = false;\n\t\t}\n\n\t\tthis._currentClip = clip;\n\n\t\tif (this._currentClip) {\n\t\t\tthis._currentClip = clip;\n\n\t\t\tthis._currentClip.play();\n\t\t}\n\n\t\treturn clip;\n\t}\n\n\tpause() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tif (this._currentClip.isPlaying) {\n\t\t\tthis._currentClip.pause();\n\t\t}\n\t}\n\n\tresume() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tif (this._currentClip.isPaused) {\n\t\t\tthis._currentClip.resume();\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this._currentClip === this._defaultClip) return;\n\n\t\tthis._currentClip.stop();\n\t}\n\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\tset type(value) {\n\t\tif (this._type === value) return;\n\t\tthis._type = value;\n\n\t\tif (this._type === SPRITETYPE_SIMPLE) {\n\t\t\tthis.stop();\n\t\t\tthis._currentClip = this._defaultClip;\n\n\t\t\tif (this.enabled && this.entity.enabled) {\n\t\t\t\tthis._currentClip.frame = this.frame;\n\n\t\t\t\tif (this._currentClip.sprite) {\n\t\t\t\t\tthis._showModel();\n\t\t\t\t} else {\n\t\t\t\t\tthis._hideModel();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._type === SPRITETYPE_ANIMATED) {\n\t\t\tthis.stop();\n\n\t\t\tif (this._autoPlayClip) {\n\t\t\t\tthis._tryAutoPlay();\n\t\t\t}\n\n\t\t\tif (this._currentClip && this._currentClip.isPlaying && this.enabled && this.entity.enabled) {\n\t\t\t\tthis._showModel();\n\t\t\t} else {\n\t\t\t\tthis._hideModel();\n\t\t\t}\n\t\t}\n\t}\n\n\tget frame() {\n\t\treturn this._currentClip.frame;\n\t}\n\n\tset frame(value) {\n\t\tthis._currentClip.frame = value;\n\t}\n\n\tget spriteAsset() {\n\t\treturn this._defaultClip._spriteAsset;\n\t}\n\n\tset spriteAsset(value) {\n\t\tthis._defaultClip.spriteAsset = value;\n\t}\n\n\tget sprite() {\n\t\treturn this._currentClip.sprite;\n\t}\n\n\tset sprite(value) {\n\t\tthis._currentClip.sprite = value;\n\t}\n\n\tget material() {\n\t\treturn this._material;\n\t}\n\n\tset material(value) {\n\t\tthis._material = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.material = value;\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color.r = value.r;\n\t\tthis._color.g = value.g;\n\t\tthis._color.b = value.b;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._colorUniform[0] = this._color.r;\n\t\t\tthis._colorUniform[1] = this._color.g;\n\t\t\tthis._colorUniform[2] = this._color.b;\n\n\t\t\tthis._meshInstance.setParameter(PARAM_EMISSIVE, this._colorUniform);\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn this._color.a;\n\t}\n\n\tset opacity(value) {\n\t\tthis._color.a = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.setParameter(PARAM_OPACITY, value);\n\t\t}\n\t}\n\n\tget clips() {\n\t\treturn this._clips;\n\t}\n\n\tset clips(value) {\n\t\tvar name, key;\n\n\t\tif (!value) {\n\t\t\tfor (name in this._clips) {\n\t\t\t\tthis.removeClip(name);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (name in this._clips) {\n\t\t\tvar found = false;\n\n\t\t\tfor (key in value) {\n\t\t\t\tif (value[key].name === name) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tthis._clips[name].fps = value[key].fps;\n\t\t\t\t\tthis._clips[name].loop = value[key].loop;\n\n\t\t\t\t\tif (value[key].hasOwnProperty('sprite')) {\n\t\t\t\t\t\tthis._clips[name].sprite = value[key].sprite;\n\t\t\t\t\t} else if (value[key].hasOwnProperty('spriteAsset')) {\n\t\t\t\t\t\tthis._clips[name].spriteAsset = value[key].spriteAsset;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!found) {\n\t\t\t\tthis.removeClip(name);\n\t\t\t}\n\t\t}\n\n\t\tfor (key in value) {\n\t\t\tif (this._clips[value[key].name]) continue;\n\t\t\tthis.addClip(value[key]);\n\t\t}\n\n\t\tif (this._autoPlayClip) {\n\t\t\tthis._tryAutoPlay();\n\t\t}\n\n\t\tif (!this._currentClip || !this._currentClip.sprite) {\n\t\t\tthis._hideModel();\n\t\t}\n\t}\n\n\tget currentClip() {\n\t\treturn this._currentClip;\n\t}\n\n\tget speed() {\n\t\treturn this._speed;\n\t}\n\n\tset speed(value) {\n\t\tthis._speed = value;\n\t}\n\n\tget flipX() {\n\t\treturn this._flipX;\n\t}\n\n\tset flipX(value) {\n\t\tif (this._flipX === value) return;\n\t\tthis._flipX = value;\n\n\t\tthis._updateTransform();\n\t}\n\n\tget flipY() {\n\t\treturn this._flipY;\n\t}\n\n\tset flipY(value) {\n\t\tif (this._flipY === value) return;\n\t\tthis._flipY = value;\n\n\t\tthis._updateTransform();\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tset width(value) {\n\t\tif (value === this._width) return;\n\t\tthis._width = value;\n\t\tthis._outerScale.x = this._width;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_TILED || this.sprite.renderMode === SPRITE_RENDERMODE_SLICED)) {\n\t\t\tthis._updateTransform();\n\t\t}\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tset height(value) {\n\t\tif (value === this._height) return;\n\t\tthis._height = value;\n\t\tthis._outerScale.y = this.height;\n\n\t\tif (this.sprite && (this.sprite.renderMode === SPRITE_RENDERMODE_TILED || this.sprite.renderMode === SPRITE_RENDERMODE_SLICED)) {\n\t\t\tthis._updateTransform();\n\t\t}\n\t}\n\n\tget batchGroupId() {\n\t\treturn this._batchGroupId;\n\t}\n\n\tset batchGroupId(value) {\n\t\tif (this._batchGroupId === value) return;\n\t\tvar prev = this._batchGroupId;\n\t\tthis._batchGroupId = value;\n\n\t\tif (this.entity.enabled && prev >= 0) {\n\t\t\tthis.system.app.batcher.remove(BatchGroup.SPRITE, prev, this.entity);\n\t\t}\n\n\t\tif (this.entity.enabled && value >= 0) {\n\t\t\tthis.system.app.batcher.insert(BatchGroup.SPRITE, value, this.entity);\n\t\t} else {\n\t\t\tif (prev >= 0) {\n\t\t\t\tif (this._currentClip && this._currentClip.sprite && this.enabled && this.entity.enabled) {\n\t\t\t\t\tthis._showModel();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget autoPlayClip() {\n\t\treturn this._autoPlayClip;\n\t}\n\n\tset autoPlayClip(value) {\n\t\tthis._autoPlayClip = value instanceof SpriteAnimationClip ? value.name : value;\n\n\t\tthis._tryAutoPlay();\n\t}\n\n\tget drawOrder() {\n\t\treturn this._drawOrder;\n\t}\n\n\tset drawOrder(value) {\n\t\tthis._drawOrder = value;\n\n\t\tif (this._meshInstance) {\n\t\t\tthis._meshInstance.drawOrder = value;\n\t\t}\n\t}\n\n\tget layers() {\n\t\treturn this._layers;\n\t}\n\n\tset layers(value) {\n\t\tif (this._addedModel) {\n\t\t\tthis._hideModel();\n\t\t}\n\n\t\tthis._layers = value;\n\n\t\tif (!this._meshInstance) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.enabled && this.entity.enabled) {\n\t\t\tthis._showModel();\n\t\t}\n\t}\n\n\tget aabb() {\n\t\tif (this._meshInstance) {\n\t\t\treturn this._meshInstance.aabb;\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass SpriteComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema$1 = ['enabled'];\n\nclass SpriteComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'sprite';\n\t\tthis.ComponentType = SpriteComponent;\n\t\tthis.DataType = SpriteComponentData;\n\t\tthis.schema = _schema$1;\n\t\tthis._defaultTexture = null;\n\t\tthis._defaultMaterial = null;\n\t\tthis._default9SlicedMaterialSlicedMode = null;\n\t\tthis._default9SlicedMaterialTiledMode = null;\n\t\tComponentSystem.bind('update', this.onUpdate, this);\n\t\tthis.on('beforeremove', this.onBeforeRemove, this);\n\t}\n\n\tget defaultMaterial() {\n\t\tif (!this._defaultMaterial) {\n\t\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8\n\t\t\t});\n\t\t\tvar pixels = new Uint8Array(texture.lock());\n\t\t\tpixels[0] = pixels[1] = pixels[2] = pixels[3] = 255;\n\t\t\ttexture.name = 'sprite';\n\t\t\ttexture.unlock();\n\t\t\tvar material = new StandardMaterial();\n\t\t\tmaterial.diffuse.set(0, 0, 0);\n\t\t\tmaterial.emissive.set(0.5, 0.5, 0.5);\n\t\t\tmaterial.emissiveMap = texture;\n\t\t\tmaterial.emissiveMapTint = true;\n\t\t\tmaterial.opacityMap = texture;\n\t\t\tmaterial.opacityMapChannel = \"a\";\n\t\t\tmaterial.opacityTint = true;\n\t\t\tmaterial.opacity = 0;\n\t\t\tmaterial.useLighting = false;\n\t\t\tmaterial.useGammaTonemap = false;\n\t\t\tmaterial.useFog = false;\n\t\t\tmaterial.useSkybox = false;\n\t\t\tmaterial.blendType = BLEND_PREMULTIPLIED;\n\t\t\tmaterial.depthWrite = false;\n\t\t\tmaterial.pixelSnap = false;\n\t\t\tmaterial.cull = CULLFACE_NONE;\n\t\t\tmaterial.update();\n\t\t\tthis._defaultTexture = texture;\n\t\t\tthis._defaultMaterial = material;\n\t\t}\n\n\t\treturn this._defaultMaterial;\n\t}\n\n\tset defaultMaterial(material) {\n\t\tthis._defaultMaterial = material;\n\t}\n\n\tget default9SlicedMaterialSlicedMode() {\n\t\tif (!this._default9SlicedMaterialSlicedMode) {\n\t\t\tvar material = this.defaultMaterial.clone();\n\t\t\tmaterial.nineSlicedMode = SPRITE_RENDERMODE_SLICED;\n\t\t\tmaterial.update();\n\t\t\tthis._default9SlicedMaterialSlicedMode = material;\n\t\t}\n\n\t\treturn this._default9SlicedMaterialSlicedMode;\n\t}\n\n\tset default9SlicedMaterialSlicedMode(material) {\n\t\tthis._default9SlicedMaterialSlicedMode = material;\n\t}\n\n\tget default9SlicedMaterialTiledMode() {\n\t\tif (!this._default9SlicedMaterialTiledMode) {\n\t\t\tvar material = this.defaultMaterial.clone();\n\t\t\tmaterial.nineSlicedMode = SPRITE_RENDERMODE_TILED;\n\t\t\tmaterial.update();\n\t\t\tthis._default9SlicedMaterialTiledMode = material;\n\t\t}\n\n\t\treturn this._default9SlicedMaterialTiledMode;\n\t}\n\n\tset default9SlicedMaterialTiledMode(material) {\n\t\tthis._default9SlicedMaterialTiledMode = material;\n\t}\n\n\tdestroy() {\n\t\tif (this._defaultTexture) {\n\t\t\tthis._defaultTexture.destroy();\n\n\t\t\tthis._defaultTexture = null;\n\t\t}\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tif (data.enabled !== undefined) {\n\t\t\tcomponent.enabled = data.enabled;\n\t\t}\n\n\t\tcomponent.type = data.type;\n\n\t\tif (data.layers && Array.isArray(data.layers)) {\n\t\t\tcomponent.layers = data.layers.slice(0);\n\t\t}\n\n\t\tif (data.drawOrder !== undefined) {\n\t\t\tcomponent.drawOrder = data.drawOrder;\n\t\t}\n\n\t\tif (data.color !== undefined) {\n\t\t\tif (data.color instanceof Color) {\n\t\t\t\tcomponent.color.set(data.color.r, data.color.g, data.color.b, data.opacity !== undefined ? data.opacity : 1);\n\t\t\t} else {\n\t\t\t\tcomponent.color.set(data.color[0], data.color[1], data.color[2], data.opacity !== undefined ? data.opacity : 1);\n\t\t\t}\n\n\t\t\tcomponent.color = component.color;\n\t\t}\n\n\t\tif (data.opacity !== undefined) {\n\t\t\tcomponent.opacity = data.opacity;\n\t\t}\n\n\t\tif (data.flipX !== undefined) {\n\t\t\tcomponent.flipX = data.flipX;\n\t\t}\n\n\t\tif (data.flipY !== undefined) {\n\t\t\tcomponent.flipY = data.flipY;\n\t\t}\n\n\t\tif (data.width !== undefined) {\n\t\t\tcomponent.width = data.width;\n\t\t}\n\n\t\tif (data.height !== undefined) {\n\t\t\tcomponent.height = data.height;\n\t\t}\n\n\t\tif (data.spriteAsset !== undefined) {\n\t\t\tcomponent.spriteAsset = data.spriteAsset;\n\t\t}\n\n\t\tif (data.sprite) {\n\t\t\tcomponent.sprite = data.sprite;\n\t\t}\n\n\t\tif (data.frame !== undefined) {\n\t\t\tcomponent.frame = data.frame;\n\t\t}\n\n\t\tif (data.clips) {\n\t\t\tfor (var name in data.clips) {\n\t\t\t\tcomponent.addClip(data.clips[name]);\n\t\t\t}\n\t\t}\n\n\t\tif (data.speed !== undefined) {\n\t\t\tcomponent.speed = data.speed;\n\t\t}\n\n\t\tif (data.autoPlayClip) {\n\t\t\tcomponent.autoPlayClip = data.autoPlayClip;\n\t\t}\n\n\t\tcomponent.batchGroupId = data.batchGroupId === undefined || data.batchGroupId === null ? -1 : data.batchGroupId;\n\t\tsuper.initializeComponentData(component, data, properties);\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar source = entity.sprite;\n\t\treturn this.addComponent(clone, {\n\t\t\tenabled: source.enabled,\n\t\t\ttype: source.type,\n\t\t\tspriteAsset: source.spriteAsset,\n\t\t\tsprite: source.sprite,\n\t\t\tframe: source.frame,\n\t\t\tcolor: source.color.clone(),\n\t\t\topacity: source.opacity,\n\t\t\tflipX: source.flipX,\n\t\t\tflipY: source.flipY,\n\t\t\tspeed: source.speed,\n\t\t\tclips: source.clips,\n\t\t\tautoPlayClip: source.autoPlayClip,\n\t\t\tbatchGroupId: source.batchGroupId,\n\t\t\tdrawOrder: source.drawOrder,\n\t\t\tlayers: source.layers.slice(0)\n\t\t});\n\t}\n\n\tonUpdate(dt) {\n\t\tvar components = this.store;\n\n\t\tfor (var id in components) {\n\t\t\tif (components.hasOwnProperty(id)) {\n\t\t\t\tvar component = components[id];\n\n\t\t\t\tif (component.data.enabled && component.entity.enabled) {\n\t\t\t\t\tvar sprite = component.entity.sprite;\n\n\t\t\t\t\tif (sprite._currentClip) {\n\t\t\t\t\t\tsprite._currentClip._update(dt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRemove(entity, component) {\n\t\tcomponent.onDestroy();\n\t}\n\n}\n\nComponent._buildAccessors(SpriteComponent.prototype, _schema$1);\n\nclass ZoneComponent extends Component {\n\tconstructor(system, entity) {\n\t\tsuper(system, entity);\n\t\tthis._oldState = true;\n\t\tthis._size = new Vec3();\n\t\tthis.on('set_enabled', this._onSetEnabled, this);\n\t}\n\n\tonEnable() {\n\t\tthis._checkState();\n\t}\n\n\tonDisable() {\n\t\tthis._checkState();\n\t}\n\n\t_onSetEnabled(prop, old, value) {\n\t\tthis._checkState();\n\t}\n\n\t_checkState() {\n\t\tvar state = this.enabled && this.entity.enabled;\n\t\tif (state === this._oldState) return;\n\t\tthis._oldState = state;\n\t\tthis.fire('enable');\n\t\tthis.fire('state', this.enabled);\n\t}\n\n\t_onBeforeRemove() {\n\t\tthis.fire('remove');\n\t}\n\n\tset size(data) {\n\t\tif (data instanceof Vec3) {\n\t\t\tthis._size.copy(data);\n\t\t} else if (data instanceof Array && data.length >= 3) {\n\t\t\tthis.size.set(data[0], data[1], data[2]);\n\t\t}\n\t}\n\n\tget size() {\n\t\treturn this._size;\n\t}\n\n}\n\nclass ZoneComponentData {\n\tconstructor() {\n\t\tthis.enabled = true;\n\t}\n\n}\n\nconst _schema = ['enabled'];\n\nclass ZoneComponentSystem extends ComponentSystem {\n\tconstructor(app) {\n\t\tsuper(app);\n\t\tthis.id = 'zone';\n\t\tthis.ComponentType = ZoneComponent;\n\t\tthis.DataType = ZoneComponentData;\n\t\tthis.schema = _schema;\n\t\tthis.on('beforeremove', this._onBeforeRemove, this);\n\t}\n\n\tinitializeComponentData(component, data, properties) {\n\t\tcomponent.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;\n\n\t\tif (data.size) {\n\t\t\tif (data.size instanceof Vec3) {\n\t\t\t\tcomponent.size.copy(data.size);\n\t\t\t} else if (data.size instanceof Array && data.size.length >= 3) {\n\t\t\t\tcomponent.size.set(data.size[0], data.size[1], data.size[2]);\n\t\t\t}\n\t\t}\n\t}\n\n\tcloneComponent(entity, clone) {\n\t\tvar data = {\n\t\t\tsize: entity.zone.size\n\t\t};\n\t\treturn this.addComponent(clone, data);\n\t}\n\n\t_onBeforeRemove(entity, component) {\n\t\tcomponent._onBeforeRemove();\n\t}\n\n}\n\nComponent._buildAccessors(ZoneComponent.prototype, _schema);\n\nclass ApplicationStats {\n\tconstructor(device) {\n\t\tthis.frame = {\n\t\t\tfps: 0,\n\t\t\tms: 0,\n\t\t\tdt: 0,\n\t\t\tupdateStart: 0,\n\t\t\tupdateTime: 0,\n\t\t\trenderStart: 0,\n\t\t\trenderTime: 0,\n\t\t\tphysicsStart: 0,\n\t\t\tphysicsTime: 0,\n\t\t\tcullTime: 0,\n\t\t\tsortTime: 0,\n\t\t\tskinTime: 0,\n\t\t\tmorphTime: 0,\n\t\t\tinstancingTime: 0,\n\t\t\ttriangles: 0,\n\t\t\totherPrimitives: 0,\n\t\t\tshaders: 0,\n\t\t\tmaterials: 0,\n\t\t\tcameras: 0,\n\t\t\tshadowMapUpdates: 0,\n\t\t\tshadowMapTime: 0,\n\t\t\tdepthMapTime: 0,\n\t\t\tforwardTime: 0,\n\t\t\tlightClustersTime: 0,\n\t\t\tlightClusters: 0,\n\t\t\t_timeToCountFrames: 0,\n\t\t\t_fpsAccum: 0\n\t\t};\n\t\tthis.drawCalls = {\n\t\t\tforward: 0,\n\t\t\tdepth: 0,\n\t\t\tshadow: 0,\n\t\t\timmediate: 0,\n\t\t\tmisc: 0,\n\t\t\ttotal: 0,\n\t\t\tskinned: 0,\n\t\t\tinstanced: 0,\n\t\t\tremovedByInstancing: 0\n\t\t};\n\t\tthis.misc = {\n\t\t\trenderTargetCreationTime: 0\n\t\t};\n\t\tthis.particles = {\n\t\t\tupdatesPerFrame: 0,\n\t\t\t_updatesPerFrame: 0,\n\t\t\tframeTime: 0,\n\t\t\t_frameTime: 0\n\t\t};\n\t\tthis.shaders = device._shaderStats;\n\t\tthis.vram = device._vram;\n\t\tObject.defineProperty(this.vram, 'totalUsed', {\n\t\t\tget: function () {\n\t\t\t\treturn this.tex + this.vb + this.ib;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(this.vram, 'geom', {\n\t\t\tget: function () {\n\t\t\t\treturn this.vb + this.ib;\n\t\t\t}\n\t\t});\n\t}\n\n\tget scene() {\n\t\treturn getApplication().scene._stats;\n\t}\n\n\tget lightmapper() {\n\t\treturn getApplication().lightmapper._stats;\n\t}\n\n\tget batcher() {\n\t\treturn getApplication().batcher._stats;\n\t}\n\n}\n\nclass SceneRegistryItem {\n\tconstructor(name, url) {\n\t\tthis.name = name;\n\t\tthis.url = url;\n\t\tthis.data = null;\n\t\tthis._loading = false;\n\t\tthis._onLoadedCallbacks = [];\n\t}\n\n\tget loaded() {\n\t\treturn !!this.data;\n\t}\n\n\tget loading() {\n\t\treturn this._loading;\n\t}\n\n}\n\nclass SceneRegistry {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis._list = [];\n\t\tthis._index = {};\n\t\tthis._urlIndex = {};\n\t}\n\n\tdestroy() {\n\t\tthis._app = null;\n\t}\n\n\tlist() {\n\t\treturn this._list;\n\t}\n\n\tadd(name, url) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar item = new SceneRegistryItem(name, url);\n\n\t\tvar i = this._list.push(item);\n\n\t\tthis._index[item.name] = i - 1;\n\t\tthis._urlIndex[item.url] = i - 1;\n\t\treturn true;\n\t}\n\n\tfind(name) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\treturn this._list[this._index[name]];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfindByUrl(url) {\n\t\tif (this._urlIndex.hasOwnProperty(url)) {\n\t\t\treturn this._list[this._urlIndex[url]];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tremove(name) {\n\t\tif (this._index.hasOwnProperty(name)) {\n\t\t\tvar i = this._index[name];\n\t\t\tvar item = this._list[i];\n\t\t\tdelete this._urlIndex[item.url];\n\t\t\tdelete this._index[name];\n\n\t\t\tthis._list.splice(i, 1);\n\n\t\t\tfor (i = 0; i < this._list.length; i++) {\n\t\t\t\titem = this._list[i];\n\t\t\t\tthis._index[item.name] = i;\n\t\t\t\tthis._urlIndex[item.url] = i;\n\t\t\t}\n\t\t}\n\t}\n\n\t_loadSceneData(sceneItem, storeInCache, callback) {\n\t\tvar url = sceneItem;\n\n\t\tif (sceneItem instanceof SceneRegistryItem) {\n\t\t\turl = sceneItem.url;\n\t\t} else {\n\t\t\tsceneItem = this.findByUrl(url);\n\n\t\t\tif (!sceneItem) {\n\t\t\t\tsceneItem = new SceneRegistryItem('Untitled', url);\n\t\t\t}\n\t\t}\n\n\t\tif (!sceneItem.url) {\n\t\t\tcallback(\"URL or SceneRegistryItem is null when loading a scene\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (sceneItem.loaded) {\n\t\t\tcallback(null, sceneItem);\n\t\t\treturn;\n\t\t}\n\n\t\tvar handler = this._app.loader.getHandler(\"hierarchy\");\n\n\t\tif (this._app.assets && this._app.assets.prefix && !ABSOLUTE_URL.test(url)) {\n\t\t\turl = path.join(this._app.assets.prefix, url);\n\t\t}\n\n\t\tsceneItem._onLoadedCallbacks.push(callback);\n\n\t\tif (!sceneItem._loading) {\n\t\t\thandler.load(url, function (err, data) {\n\t\t\t\tsceneItem.data = data;\n\t\t\t\tsceneItem._loading = false;\n\n\t\t\t\tfor (var i = 0; i < sceneItem._onLoadedCallbacks.length; i++) {\n\t\t\t\t\tsceneItem._onLoadedCallbacks[i](err, sceneItem);\n\t\t\t\t}\n\n\t\t\t\tif (!storeInCache) {\n\t\t\t\t\tsceneItem.data = null;\n\t\t\t\t}\n\n\t\t\t\tsceneItem._onLoadedCallbacks.length = 0;\n\t\t\t});\n\t\t}\n\n\t\tsceneItem._loading = true;\n\t}\n\n\tloadSceneData(sceneItem, callback) {\n\t\tthis._loadSceneData(sceneItem, true, callback);\n\t}\n\n\tunloadSceneData(sceneItem) {\n\t\tif (typeof sceneItem === 'string') {\n\t\t\tsceneItem = this.findByUrl(sceneItem);\n\t\t}\n\n\t\tif (sceneItem) {\n\t\t\tsceneItem.data = null;\n\t\t}\n\t}\n\n\tloadSceneHierarchy(sceneItem, callback) {\n\t\tvar self = this;\n\n\t\tvar handler = this._app.loader.getHandler(\"hierarchy\");\n\n\t\tthis._loadSceneData(sceneItem, false, function (err, sceneItem) {\n\t\t\tif (err) {\n\t\t\t\tif (callback) callback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = sceneItem.url;\n\t\t\tvar data = sceneItem.data;\n\n\t\t\tvar _loaded = function _loaded() {\n\t\t\t\tself._app.systems.script.preloading = true;\n\t\t\t\tvar entity = handler.open(url, data);\n\t\t\t\tself._app.systems.script.preloading = false;\n\n\t\t\t\tself._app.loader.clearCache(url, \"hierarchy\");\n\n\t\t\t\tself._app.root.addChild(entity);\n\n\t\t\t\tComponentSystem.initialize(entity);\n\t\t\t\tComponentSystem.postInitialize(entity);\n\t\t\t\tif (callback) callback(err, entity);\n\t\t\t};\n\n\t\t\tself._app._preloadScripts(data, _loaded);\n\t\t});\n\t}\n\n\tloadSceneSettings(sceneItem, callback) {\n\t\tvar self = this;\n\n\t\tthis._loadSceneData(sceneItem, false, function (err, sceneItem) {\n\t\t\tif (!err) {\n\t\t\t\tself._app.applySceneSettings(sceneItem.data.settings);\n\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tloadScene(url, callback) {\n\t\tvar self = this;\n\n\t\tvar handler = this._app.loader.getHandler(\"scene\");\n\n\t\tif (this._app.assets && this._app.assets.prefix && !ABSOLUTE_URL.test(url)) {\n\t\t\turl = path.join(this._app.assets.prefix, url);\n\t\t}\n\n\t\thandler.load(url, function (err, data) {\n\t\t\tif (!err) {\n\t\t\t\tvar _loaded = function _loaded() {\n\t\t\t\t\tself._app.systems.script.preloading = true;\n\t\t\t\t\tvar scene = handler.open(url, data);\n\t\t\t\t\tvar sceneItem = self.findByUrl(url);\n\n\t\t\t\t\tif (sceneItem && !sceneItem.loaded) {\n\t\t\t\t\t\tsceneItem.data = data;\n\t\t\t\t\t}\n\n\t\t\t\t\tself._app.systems.script.preloading = false;\n\n\t\t\t\t\tself._app.loader.clearCache(url, \"scene\");\n\n\t\t\t\t\tself._app.loader.patch({\n\t\t\t\t\t\tresource: scene,\n\t\t\t\t\t\ttype: \"scene\"\n\t\t\t\t\t}, self._app.assets);\n\n\t\t\t\t\tself._app.root.addChild(scene.root);\n\n\t\t\t\t\tif (self._app.systems.rigidbody && typeof Ammo !== 'undefined') {\n\t\t\t\t\t\tself._app.systems.rigidbody.gravity.set(scene._gravity.x, scene._gravity.y, scene._gravity.z);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(null, scene);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tself._app._preloadScripts(data, _loaded);\n\t\t\t} else {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nclass SceneDepth {\n\tconstructor(application) {\n\t\tthis.application = application;\n\t\tthis.device = application.graphicsDevice;\n\t\tthis.clearOptions = null;\n\t\tthis.layer = null;\n\t\tthis.init();\n\t}\n\n\tallocateTexture(device, name, format) {\n\t\tconst texture = new Texture(device, {\n\t\t\tformat: format,\n\t\t\twidth: device.width,\n\t\t\theight: device.height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\ttexture.name = name;\n\t\tdevice.scope.resolve(\"uDepthMap\").setValue(texture);\n\t\treturn texture;\n\t}\n\n\tallocateRenderTarget(renderTarget, device, name, format, isDepth) {\n\t\tconst buffer = this.allocateTexture(device, name, format);\n\n\t\tif (renderTarget) {\n\t\t\trenderTarget.destroyFrameBuffers();\n\n\t\t\tif (isDepth) {\n\t\t\t\trenderTarget._depthBuffer = buffer;\n\t\t\t} else {\n\t\t\t\trenderTarget._colorBuffer = buffer;\n\t\t\t}\n\t\t} else {\n\t\t\trenderTarget = new RenderTarget({\n\t\t\t\tcolorBuffer: isDepth ? null : buffer,\n\t\t\t\tdepthBuffer: isDepth ? buffer : null,\n\t\t\t\tdepth: !isDepth,\n\t\t\t\tstencil: device.supportsStencil,\n\t\t\t\tautoResolve: false\n\t\t\t});\n\t\t}\n\n\t\treturn renderTarget;\n\t}\n\n\treleaseRenderTarget(rt) {\n\t\tif (rt) {\n\t\t\trt.destroyTextureBuffers();\n\t\t\trt.destroy();\n\t\t}\n\t}\n\n\tinitWebGl2() {\n\t\tconst app = this.application;\n\t\tconst self = this;\n\t\tthis.clearOptions = {\n\t\t\tflags: 0\n\t\t};\n\t\tthis.layer = new Layer({\n\t\t\tenabled: false,\n\t\t\tname: \"Depth\",\n\t\t\tid: LAYERID_DEPTH,\n\t\t\tonEnable: function () {\n\t\t\t\tthis.renderTarget = self.allocateRenderTarget(this.renderTarget, app.graphicsDevice, \"rt-depth2\", PIXELFORMAT_DEPTHSTENCIL, true);\n\t\t\t},\n\t\t\tonDisable: function () {\n\t\t\t\tself.releaseRenderTarget(this.renderTarget);\n\t\t\t\tthis.renderTarget = null;\n\t\t\t},\n\t\t\tonPreRenderOpaque: function (cameraPass) {\n\t\t\t\tconst gl = app.graphicsDevice.gl;\n\t\t\t\tthis.srcFbo = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n\t\t\t\tif (this.renderTarget.width !== app.graphicsDevice.width || this.renderTarget.height !== app.graphicsDevice.height) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t}\n\n\t\t\t\tthis.oldClear = this.cameras[cameraPass].camera._clearOptions;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = self.clearOptions;\n\t\t\t},\n\t\t\tonPostRenderOpaque: function (cameraPass) {\n\t\t\t\tif (this.renderTarget) {\n\t\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = this.oldClear;\n\t\t\t\t\tapp.graphicsDevice.setRenderTarget(this.renderTarget);\n\t\t\t\t\tapp.graphicsDevice.updateBegin();\n\t\t\t\t\tconst gl = app.graphicsDevice.gl;\n\t\t\t\t\tgl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.srcFbo);\n\t\t\t\t\tgl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.renderTarget._glFrameBuffer);\n\t\t\t\t\tgl.blitFramebuffer(0, 0, this.renderTarget.width, this.renderTarget.height, 0, 0, this.renderTarget.width, this.renderTarget.height, gl.DEPTH_BUFFER_BIT, gl.NEAREST);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitWebGl1() {\n\t\tconst app = this.application;\n\t\tconst self = this;\n\t\tthis.clearOptions = {\n\t\t\tcolor: [254.0 / 255, 254.0 / 255, 254.0 / 255, 254.0 / 255],\n\t\t\tdepth: 1.0,\n\t\t\tflags: CLEARFLAG_COLOR | CLEARFLAG_DEPTH\n\t\t};\n\t\tthis.layer = new Layer({\n\t\t\tenabled: false,\n\t\t\tname: \"Depth\",\n\t\t\tid: LAYERID_DEPTH,\n\t\t\tshaderPass: SHADER_DEPTH,\n\t\t\tonEnable: function () {\n\t\t\t\tthis.renderTarget = self.allocateRenderTarget(this.renderTarget, app.graphicsDevice, \"rt-depth1\", PIXELFORMAT_R8_G8_B8_A8, false);\n\t\t\t},\n\t\t\tonDisable: function () {\n\t\t\t\tself.releaseRenderTarget(this.renderTarget);\n\t\t\t\tthis.renderTarget = null;\n\t\t\t},\n\t\t\tonPostCull: function (cameraPass) {\n\t\t\t\tconst visibleObjects = this.instances.visibleOpaque[cameraPass];\n\t\t\t\tconst visibleList = visibleObjects.list;\n\t\t\t\tconst layerComposition = app.scene.layers;\n\t\t\t\tvar subLayerEnabled = layerComposition.subLayerEnabled;\n\t\t\t\tvar isTransparent = layerComposition.subLayerList;\n\t\t\t\tconst rt = app.scene.layers.getLayerById(LAYERID_WORLD).renderTarget;\n\t\t\t\tconst cam = this.cameras[cameraPass];\n\t\t\t\tlet visibleLength = 0;\n\t\t\t\tconst layers = layerComposition.layerList;\n\n\t\t\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\t\t\tconst layer = layers[i];\n\t\t\t\t\tif (layer === this) break;\n\t\t\t\t\tif (layer.renderTarget !== rt || !layer.enabled || !subLayerEnabled[i]) continue;\n\t\t\t\t\tconst layerCamId = layer.cameras.indexOf(cam);\n\t\t\t\t\tif (layerCamId < 0) continue;\n\t\t\t\t\tconst transparent = isTransparent[i];\n\t\t\t\t\tlet layerVisibleList = transparent ? layer.instances.visibleTransparent[layerCamId] : layer.instances.visibleOpaque[layerCamId];\n\t\t\t\t\tconst layerVisibleListLength = layerVisibleList.length;\n\t\t\t\t\tlayerVisibleList = layerVisibleList.list;\n\n\t\t\t\t\tfor (let j = 0; j < layerVisibleListLength; j++) {\n\t\t\t\t\t\tconst drawCall = layerVisibleList[j];\n\n\t\t\t\t\t\tif (drawCall.material && drawCall.material.depthWrite && !drawCall._noDepthDrawGl1) {\n\t\t\t\t\t\t\tvisibleList[visibleLength] = drawCall;\n\t\t\t\t\t\t\tvisibleLength++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisibleObjects.length = visibleLength;\n\t\t\t},\n\t\t\tonPreRenderOpaque: function (cameraPass) {\n\t\t\t\tif (this.renderTarget.width !== app.graphicsDevice.width || this.renderTarget.height !== app.graphicsDevice.height) {\n\t\t\t\t\tthis.onEnable();\n\t\t\t\t}\n\n\t\t\t\tthis.oldClear = this.cameras[cameraPass].camera._clearOptions;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = self.clearOptions;\n\t\t\t},\n\t\t\tonDrawCall: function () {\n\t\t\t\tapp.graphicsDevice.setColorWrite(true, true, true, true);\n\t\t\t},\n\t\t\tonPostRenderOpaque: function (cameraPass) {\n\t\t\t\tif (!this.renderTarget) return;\n\t\t\t\tthis.cameras[cameraPass].camera._clearOptions = this.oldClear;\n\t\t\t}\n\t\t});\n\t}\n\n\tinit() {\n\t\tif (this.device.webgl2) {\n\t\t\tthis.initWebGl2();\n\t\t} else {\n\t\t\tthis.initWebGl1();\n\t\t}\n\t}\n\n\tpatch(layer) {\n\t\tlayer.onEnable = this.layer.onEnable;\n\t\tlayer.onDisable = this.layer.onDisable;\n\t\tlayer.onPreRenderOpaque = this.layer.onPreRenderOpaque;\n\t\tlayer.onPostRenderOpaque = this.layer.onPostRenderOpaque;\n\t\tlayer.shaderPass = this.layer.shaderPass;\n\t\tlayer.onPostCull = this.layer.onPostCull;\n\t\tlayer.onDrawCall = this.layer.onDrawCall;\n\t}\n\n}\n\nclass Progress {\n\tconstructor(length) {\n\t\tthis.length = length;\n\t\tthis.count = 0;\n\t}\n\n\tinc() {\n\t\tthis.count++;\n\t}\n\n\tdone() {\n\t\treturn this.count === this.length;\n\t}\n\n}\n\nvar _deprecationWarning = false;\nvar app = null;\n\nclass Application extends EventHandler {\n\tconstructor(canvas, options = {}) {\n\t\tsuper();\n\t\tconsole.log(\"Powered by PlayCanvas \" + version + \" \" + revision);\n\t\tApplication._applications[canvas.id] = this;\n\t\tsetApplication(this);\n\t\tapp = this;\n\t\tthis._destroyRequested = false;\n\t\tthis._inFrameUpdate = false;\n\t\tthis._time = 0;\n\t\tthis.timeScale = 1;\n\t\tthis.maxDeltaTime = 0.1;\n\t\tthis.frame = 0;\n\t\tthis.autoRender = true;\n\t\tthis.renderNextFrame = false;\n\t\tthis.useLegacyScriptAttributeCloning = script.legacy;\n\t\tthis._librariesLoaded = false;\n\t\tthis._fillMode = FILLMODE_KEEP_ASPECT;\n\t\tthis._resolutionMode = RESOLUTION_FIXED;\n\t\tthis._allowResize = true;\n\t\tthis.context = this;\n\t\tif (!options.graphicsDeviceOptions) options.graphicsDeviceOptions = {};\n\t\toptions.graphicsDeviceOptions.xrCompatible = true;\n\t\toptions.graphicsDeviceOptions.alpha = options.graphicsDeviceOptions.alpha || false;\n\t\tthis.graphicsDevice = new GraphicsDevice(canvas, options.graphicsDeviceOptions);\n\t\tthis.stats = new ApplicationStats(this.graphicsDevice);\n\t\tthis._soundManager = new SoundManager(options);\n\t\tthis.loader = new ResourceLoader(this);\n\t\tWorldClusters.init(this.graphicsDevice);\n\t\tthis._entityIndex = {};\n\t\tthis.scene = new Scene();\n\t\tthis.root = new Entity(this);\n\t\tthis.root._enabledInHierarchy = true;\n\t\tthis._enableList = [];\n\t\tthis._enableList.size = 0;\n\t\tthis.assets = new AssetRegistry(this.loader);\n\t\tif (options.assetPrefix) this.assets.prefix = options.assetPrefix;\n\t\tthis.bundles = new BundleRegistry(this.assets);\n\t\tthis.enableBundles = typeof TextDecoder !== 'undefined';\n\t\tthis.scriptsOrder = options.scriptsOrder || [];\n\t\tthis.scripts = new ScriptRegistry(this);\n\t\tthis.i18n = new I18n(this);\n\t\tthis.scenes = new SceneRegistry(this);\n\t\tvar self = this;\n\t\tthis.defaultLayerWorld = new Layer({\n\t\t\tname: \"World\",\n\t\t\tid: LAYERID_WORLD\n\t\t});\n\t\tthis.sceneDepth = new SceneDepth(this);\n\t\tthis.defaultLayerDepth = this.sceneDepth.layer;\n\t\tthis.defaultLayerSkybox = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"Skybox\",\n\t\t\tid: LAYERID_SKYBOX,\n\t\t\topaqueSortMode: SORTMODE_NONE\n\t\t});\n\t\tthis.defaultLayerUi = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"UI\",\n\t\t\tid: LAYERID_UI,\n\t\t\ttransparentSortMode: SORTMODE_MANUAL,\n\t\t\tpassThrough: false\n\t\t});\n\t\tthis.defaultLayerImmediate = new Layer({\n\t\t\tenabled: true,\n\t\t\tname: \"Immediate\",\n\t\t\tid: LAYERID_IMMEDIATE,\n\t\t\topaqueSortMode: SORTMODE_NONE,\n\t\t\tpassThrough: true\n\t\t});\n\t\tconst defaultLayerComposition = new LayerComposition(this.graphicsDevice, \"default\");\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerWorld);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerDepth);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerSkybox);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerWorld);\n\t\tdefaultLayerComposition.pushOpaque(this.defaultLayerImmediate);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerImmediate);\n\t\tdefaultLayerComposition.pushTransparent(this.defaultLayerUi);\n\t\tthis.scene.layers = defaultLayerComposition;\n\t\tthis._immediateLayer = this.defaultLayerImmediate;\n\t\tthis.scene.on('set:layers', function (oldComp, newComp) {\n\t\t\tvar list = newComp.layerList;\n\t\t\tvar layer;\n\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\tlayer = list[i];\n\n\t\t\t\tswitch (layer.id) {\n\t\t\t\t\tcase LAYERID_DEPTH:\n\t\t\t\t\t\tself.sceneDepth.patch(layer);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LAYERID_UI:\n\t\t\t\t\t\tlayer.passThrough = self.defaultLayerUi.passThrough;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LAYERID_IMMEDIATE:\n\t\t\t\t\t\tlayer.passThrough = self.defaultLayerImmediate.passThrough;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tAreaLightLuts.createPlaceholder(this.graphicsDevice);\n\t\tthis.renderer = new ForwardRenderer(this.graphicsDevice);\n\t\tthis.renderer.scene = this.scene;\n\t\tthis.lightmapper = new Lightmapper(this.graphicsDevice, this.root, this.scene, this.renderer, this.assets);\n\t\tthis.once('prerender', this._firstBake, this);\n\t\tthis.batcher = new BatchManager(this.graphicsDevice, this.root, this.scene);\n\t\tthis.once('prerender', this._firstBatch, this);\n\t\tthis.keyboard = options.keyboard || null;\n\t\tthis.mouse = options.mouse || null;\n\t\tthis.touch = options.touch || null;\n\t\tthis.gamepads = options.gamepads || null;\n\t\tthis.elementInput = options.elementInput || null;\n\t\tif (this.elementInput) this.elementInput.app = this;\n\t\tthis.vr = null;\n\t\tthis.xr = new XrManager(this);\n\t\tif (this.elementInput) this.elementInput.attachSelectEvents();\n\t\tthis._inTools = false;\n\t\tthis._skyboxLast = 0;\n\t\tthis._scriptPrefix = options.scriptPrefix || '';\n\n\t\tif (this.enableBundles) {\n\t\t\tthis.loader.addHandler(\"bundle\", new BundleHandler(this.assets));\n\t\t}\n\n\t\tthis.loader.addHandler(\"animation\", new AnimationHandler());\n\t\tthis.loader.addHandler(\"animclip\", new AnimClipHandler());\n\t\tthis.loader.addHandler(\"animstategraph\", new AnimStateGraphHandler());\n\t\tthis.loader.addHandler(\"model\", new ModelHandler(this.graphicsDevice, this.scene.defaultMaterial));\n\t\tthis.loader.addHandler(\"render\", new RenderHandler(this.assets));\n\t\tthis.loader.addHandler(\"material\", new MaterialHandler(this));\n\t\tthis.loader.addHandler(\"texture\", new TextureHandler(this.graphicsDevice, this.assets, this.loader));\n\t\tthis.loader.addHandler(\"text\", new TextHandler());\n\t\tthis.loader.addHandler(\"json\", new JsonHandler());\n\t\tthis.loader.addHandler(\"audio\", new AudioHandler(this._soundManager));\n\t\tthis.loader.addHandler(\"script\", new ScriptHandler(this));\n\t\tthis.loader.addHandler(\"scene\", new SceneHandler(this));\n\t\tthis.loader.addHandler(\"cubemap\", new CubemapHandler(this.graphicsDevice, this.assets, this.loader));\n\t\tthis.loader.addHandler(\"html\", new HtmlHandler());\n\t\tthis.loader.addHandler(\"css\", new CssHandler());\n\t\tthis.loader.addHandler(\"shader\", new ShaderHandler());\n\t\tthis.loader.addHandler(\"hierarchy\", new HierarchyHandler(this));\n\t\tthis.loader.addHandler(\"folder\", new FolderHandler());\n\t\tthis.loader.addHandler(\"font\", new FontHandler(this.loader));\n\t\tthis.loader.addHandler(\"binary\", new BinaryHandler());\n\t\tthis.loader.addHandler(\"textureatlas\", new TextureAtlasHandler(this.loader));\n\t\tthis.loader.addHandler(\"sprite\", new SpriteHandler(this.assets, this.graphicsDevice));\n\t\tthis.loader.addHandler(\"template\", new TemplateHandler(this));\n\t\tthis.loader.addHandler(\"container\", new ContainerHandler(this.graphicsDevice, this.scene.defaultMaterial));\n\t\tthis.systems = new ComponentSystemRegistry();\n\t\tthis.systems.add(new RigidBodyComponentSystem(this));\n\t\tthis.systems.add(new CollisionComponentSystem(this));\n\t\tthis.systems.add(new JointComponentSystem(this));\n\t\tthis.systems.add(new AnimationComponentSystem(this));\n\t\tthis.systems.add(new AnimComponentSystem(this));\n\t\tthis.systems.add(new ModelComponentSystem(this));\n\t\tthis.systems.add(new RenderComponentSystem(this));\n\t\tthis.systems.add(new CameraComponentSystem(this));\n\t\tthis.systems.add(new LightComponentSystem(this));\n\n\t\tif (script.legacy) {\n\t\t\tthis.systems.add(new ScriptLegacyComponentSystem(this));\n\t\t} else {\n\t\t\tthis.systems.add(new ScriptComponentSystem(this));\n\t\t}\n\n\t\tthis.systems.add(new AudioSourceComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new SoundComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new AudioListenerComponentSystem(this, this._soundManager));\n\t\tthis.systems.add(new ParticleSystemComponentSystem(this));\n\t\tthis.systems.add(new ScreenComponentSystem(this));\n\t\tthis.systems.add(new ElementComponentSystem(this));\n\t\tthis.systems.add(new ButtonComponentSystem(this));\n\t\tthis.systems.add(new ScrollViewComponentSystem(this));\n\t\tthis.systems.add(new ScrollbarComponentSystem(this));\n\t\tthis.systems.add(new SpriteComponentSystem(this));\n\t\tthis.systems.add(new LayoutGroupComponentSystem(this));\n\t\tthis.systems.add(new LayoutChildComponentSystem(this));\n\t\tthis.systems.add(new ZoneComponentSystem(this));\n\t\tthis._visibilityChangeHandler = this.onVisibilityChange.bind(this);\n\n\t\tif (typeof document !== 'undefined') {\n\t\t\tif (document.hidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'hidden';\n\t\t\t\tdocument.addEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.mozHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'mozHidden';\n\t\t\t\tdocument.addEventListener('mozvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.msHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'msHidden';\n\t\t\t\tdocument.addEventListener('msvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t} else if (document.webkitHidden !== undefined) {\n\t\t\t\tthis._hiddenAttr = 'webkitHidden';\n\t\t\t\tdocument.addEventListener('webkitvisibilitychange', this._visibilityChangeHandler, false);\n\t\t\t}\n\t\t}\n\n\t\tthis.tick = makeTick(this);\n\t}\n\n\tstatic getApplication(id) {\n\t\treturn id ? Application._applications[id] : getApplication();\n\t}\n\n\tget fillMode() {\n\t\treturn this._fillMode;\n\t}\n\n\tget resolutionMode() {\n\t\treturn this._resolutionMode;\n\t}\n\n\tconfigure(url, callback) {\n\t\tvar self = this;\n\t\thttp.get(url, function (err, response) {\n\t\t\tif (err) {\n\t\t\t\tcallback(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar props = response.application_properties;\n\t\t\tvar scenes = response.scenes;\n\t\t\tvar assets = response.assets;\n\n\t\t\tself._parseApplicationProperties(props, function (err) {\n\t\t\t\tself._parseScenes(scenes);\n\n\t\t\t\tself._parseAssets(assets);\n\n\t\t\t\tif (!err) {\n\t\t\t\t\tcallback(null);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpreload(callback) {\n\t\tvar self = this;\n\t\tvar i, total;\n\t\tself.fire(\"preload:start\");\n\t\tvar assets = this.assets.list({\n\t\t\tpreload: true\n\t\t});\n\n\t\tvar _assets = new Progress(assets.length);\n\n\t\tvar _done = false;\n\n\t\tvar done = function done() {\n\t\t\tif (!self.graphicsDevice) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!_done && _assets.done()) {\n\t\t\t\t_done = true;\n\t\t\t\tself.fire(\"preload:end\");\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\n\t\ttotal = assets.length;\n\n\t\tvar count = function count() {\n\t\t\treturn _assets.count;\n\t\t};\n\n\t\tif (_assets.length) {\n\t\t\tvar onAssetLoad = function onAssetLoad(asset) {\n\t\t\t\t_assets.inc();\n\n\t\t\t\tself.fire('preload:progress', count() / total);\n\t\t\t\tif (_assets.done()) done();\n\t\t\t};\n\n\t\t\tvar onAssetError = function onAssetError(err, asset) {\n\t\t\t\t_assets.inc();\n\n\t\t\t\tself.fire('preload:progress', count() / total);\n\t\t\t\tif (_assets.done()) done();\n\t\t\t};\n\n\t\t\tfor (i = 0; i < assets.length; i++) {\n\t\t\t\tif (!assets[i].loaded) {\n\t\t\t\t\tassets[i].once('load', onAssetLoad);\n\t\t\t\t\tassets[i].once('error', onAssetError);\n\t\t\t\t\tthis.assets.load(assets[i]);\n\t\t\t\t} else {\n\t\t\t\t\t_assets.inc();\n\n\t\t\t\t\tself.fire(\"preload:progress\", count() / total);\n\t\t\t\t\tif (_assets.done()) done();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdone();\n\t\t}\n\t}\n\n\t_preloadScripts(sceneData, callback) {\n\t\tif (!script.legacy) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\t\tself.systems.script.preloading = true;\n\n\t\tvar scripts = this._getScriptReferences(sceneData);\n\n\t\tvar i = 0,\n\t\t\t\tl = scripts.length;\n\t\tvar progress = new Progress(l);\n\t\tvar scriptUrl;\n\t\tvar regex = /^http(s)?:\\/\\//;\n\n\t\tif (l) {\n\t\t\tvar onLoad = function onLoad(err, ScriptType) {\n\t\t\t\tif (err) console.error(err);\n\t\t\t\tprogress.inc();\n\n\t\t\t\tif (progress.done()) {\n\t\t\t\t\tself.systems.script.preloading = false;\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tscriptUrl = scripts[i];\n\t\t\t\tif (!regex.test(scriptUrl.toLowerCase()) && self._scriptPrefix) scriptUrl = path.join(self._scriptPrefix, scripts[i]);\n\t\t\t\tthis.loader.load(scriptUrl, 'script', onLoad);\n\t\t\t}\n\t\t} else {\n\t\t\tself.systems.script.preloading = false;\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t_handleAreaLightDataProperty(prop) {\n\t\tvar asset = this.assets.get(prop);\n\n\t\tif (asset) {\n\t\t\tthis.setAreaLightLuts(asset);\n\t\t} else {\n\t\t\tthis.assets.once('add:' + prop, this.setAreaLightLuts, this);\n\t\t}\n\t}\n\n\t_parseApplicationProperties(props, callback) {\n\t\tvar i;\n\t\tvar len;\n\n\t\tif (typeof props.maxAssetRetries === 'number' && props.maxAssetRetries > 0) {\n\t\t\tthis.loader.enableRetry(props.maxAssetRetries);\n\t\t}\n\n\t\tif (!props.useDevicePixelRatio) props.useDevicePixelRatio = props.use_device_pixel_ratio;\n\t\tif (!props.resolutionMode) props.resolutionMode = props.resolution_mode;\n\t\tif (!props.fillMode) props.fillMode = props.fill_mode;\n\t\tthis._width = props.width;\n\t\tthis._height = props.height;\n\n\t\tif (props.useDevicePixelRatio) {\n\t\t\tthis.graphicsDevice.maxPixelRatio = window.devicePixelRatio;\n\t\t}\n\n\t\tthis.setCanvasResolution(props.resolutionMode, this._width, this._height);\n\t\tthis.setCanvasFillMode(props.fillMode, this._width, this._height);\n\n\t\tif (props.layers && props.layerOrder) {\n\t\t\tvar composition = new LayerComposition(this.graphicsDevice, \"application\");\n\t\t\tvar layers = {};\n\n\t\t\tfor (var key in props.layers) {\n\t\t\t\tvar data = props.layers[key];\n\t\t\t\tdata.id = parseInt(key, 10);\n\t\t\t\tdata.enabled = data.id !== LAYERID_DEPTH;\n\t\t\t\tlayers[key] = new Layer(data);\n\t\t\t}\n\n\t\t\tfor (i = 0, len = props.layerOrder.length; i < len; i++) {\n\t\t\t\tvar sublayer = props.layerOrder[i];\n\t\t\t\tvar layer = layers[sublayer.layer];\n\t\t\t\tif (!layer) continue;\n\n\t\t\t\tif (sublayer.transparent) {\n\t\t\t\t\tcomposition.pushTransparent(layer);\n\t\t\t\t} else {\n\t\t\t\t\tcomposition.pushOpaque(layer);\n\t\t\t\t}\n\n\t\t\t\tcomposition.subLayerEnabled[i] = sublayer.enabled;\n\t\t\t}\n\n\t\t\tthis.scene.layers = composition;\n\t\t}\n\n\t\tif (props.batchGroups) {\n\t\t\tfor (i = 0, len = props.batchGroups.length; i < len; i++) {\n\t\t\t\tvar grp = props.batchGroups[i];\n\t\t\t\tthis.batcher.addGroup(grp.name, grp.dynamic, grp.maxAabbSize, grp.id, grp.layers);\n\t\t\t}\n\t\t}\n\n\t\tif (props.i18nAssets) {\n\t\t\tthis.i18n.assets = props.i18nAssets;\n\t\t}\n\n\t\tif (props.areaLightDataAsset) {\n\t\t\tthis._handleAreaLightDataProperty(props.areaLightDataAsset);\n\t\t}\n\n\t\tthis._loadLibraries(props.libraries, callback);\n\t}\n\n\t_loadLibraries(urls, callback) {\n\t\tvar len = urls.length;\n\t\tvar count = len;\n\t\tvar self = this;\n\t\tvar regex = /^http(s)?:\\/\\//;\n\n\t\tif (len) {\n\t\t\tvar onLoad = function onLoad(err, script) {\n\t\t\t\tcount--;\n\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err);\n\t\t\t\t} else if (count === 0) {\n\t\t\t\t\tself.onLibrariesLoaded();\n\t\t\t\t\tcallback(null);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (var i = 0; i < len; ++i) {\n\t\t\t\tvar url = urls[i];\n\t\t\t\tif (!regex.test(url.toLowerCase()) && self._scriptPrefix) url = path.join(self._scriptPrefix, url);\n\t\t\t\tthis.loader.load(url, 'script', onLoad);\n\t\t\t}\n\t\t} else {\n\t\t\tself.onLibrariesLoaded();\n\t\t\tcallback(null);\n\t\t}\n\t}\n\n\t_parseScenes(scenes) {\n\t\tif (!scenes) return;\n\n\t\tfor (var i = 0; i < scenes.length; i++) {\n\t\t\tthis.scenes.add(scenes[i].name, scenes[i].url);\n\t\t}\n\t}\n\n\t_parseAssets(assets) {\n\t\tvar i, id;\n\t\tvar list = [];\n\t\tvar scriptsIndex = {};\n\t\tvar bundlesIndex = {};\n\n\t\tif (!script.legacy) {\n\t\t\tfor (i = 0; i < this.scriptsOrder.length; i++) {\n\t\t\t\tid = this.scriptsOrder[i];\n\t\t\t\tif (!assets[id]) continue;\n\t\t\t\tscriptsIndex[id] = true;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\n\t\t\tif (this.enableBundles) {\n\t\t\t\tfor (id in assets) {\n\t\t\t\t\tif (assets[id].type === 'bundle') {\n\t\t\t\t\t\tbundlesIndex[id] = true;\n\t\t\t\t\t\tlist.push(assets[id]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (id in assets) {\n\t\t\t\tif (scriptsIndex[id] || bundlesIndex[id]) continue;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.enableBundles) {\n\t\t\t\tfor (id in assets) {\n\t\t\t\t\tif (assets[id].type === 'bundle') {\n\t\t\t\t\t\tbundlesIndex[id] = true;\n\t\t\t\t\t\tlist.push(assets[id]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (id in assets) {\n\t\t\t\tif (bundlesIndex[id]) continue;\n\t\t\t\tlist.push(assets[id]);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < list.length; i++) {\n\t\t\tvar data = list[i];\n\t\t\tvar asset = new Asset(data.name, data.type, data.file, data.data);\n\t\t\tasset.id = parseInt(data.id, 10);\n\t\t\tasset.preload = data.preload ? data.preload : false;\n\t\t\tasset.loaded = data.type === 'script' && data.data && data.data.loadingType > 0;\n\t\t\tasset.tags.add(data.tags);\n\n\t\t\tif (data.i18n) {\n\t\t\t\tfor (var locale in data.i18n) {\n\t\t\t\t\tasset.addLocalizedAssetId(locale, data.i18n[locale]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.assets.add(asset);\n\t\t}\n\t}\n\n\t_getScriptReferences(scene) {\n\t\tvar i, key;\n\t\tvar priorityScripts = [];\n\n\t\tif (scene.settings.priority_scripts) {\n\t\t\tpriorityScripts = scene.settings.priority_scripts;\n\t\t}\n\n\t\tvar _scripts = [];\n\t\tvar _index = {};\n\n\t\tfor (i = 0; i < priorityScripts.length; i++) {\n\t\t\t_scripts.push(priorityScripts[i]);\n\n\t\t\t_index[priorityScripts[i]] = true;\n\t\t}\n\n\t\tvar entities = scene.entities;\n\n\t\tfor (key in entities) {\n\t\t\tif (!entities[key].components.script) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar scripts = entities[key].components.script.scripts;\n\n\t\t\tfor (i = 0; i < scripts.length; i++) {\n\t\t\t\tif (_index[scripts[i].url]) continue;\n\n\t\t\t\t_scripts.push(scripts[i].url);\n\n\t\t\t\t_index[scripts[i].url] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn _scripts;\n\t}\n\n\tstart() {\n\t\tthis.frame = 0;\n\t\tthis.fire(\"start\", {\n\t\t\ttimestamp: now(),\n\t\t\ttarget: this\n\t\t});\n\n\t\tif (!this._librariesLoaded) {\n\t\t\tthis.onLibrariesLoaded();\n\t\t}\n\n\t\tComponentSystem.initialize(this.root);\n\t\tthis.fire(\"initialize\");\n\t\tComponentSystem.postInitialize(this.root);\n\t\tthis.fire(\"postinitialize\");\n\t\tthis.tick();\n\t}\n\n\tinputUpdate(dt) {\n\t\tif (this.controller) {\n\t\t\tthis.controller.update(dt);\n\t\t}\n\n\t\tif (this.mouse) {\n\t\t\tthis.mouse.update(dt);\n\t\t}\n\n\t\tif (this.keyboard) {\n\t\t\tthis.keyboard.update(dt);\n\t\t}\n\n\t\tif (this.gamepads) {\n\t\t\tthis.gamepads.update(dt);\n\t\t}\n\t}\n\n\tupdate(dt) {\n\t\tthis.frame++;\n\t\tthis.graphicsDevice.updateClientRect();\n\t\tif (this.vr) this.vr.poll();\n\t\tif (script.legacy) ComponentSystem.fixedUpdate(1.0 / 60.0, this._inTools);\n\t\tComponentSystem.update(dt, this._inTools);\n\t\tComponentSystem.animationUpdate(dt, this._inTools);\n\t\tComponentSystem.postUpdate(dt, this._inTools);\n\t\tthis.fire(\"update\", dt);\n\t\tthis.inputUpdate(dt);\n\t}\n\n\trender() {\n\t\tthis.fire(\"prerender\");\n\t\tthis.root.syncHierarchy();\n\t\tthis.batcher.updateAll();\n\t\tthis.renderer.renderComposition(this.scene.layers);\n\t\tthis.fire(\"postrender\");\n\t}\n\n\t_fillFrameStatsBasic(now, dt, ms) {\n\t\tvar stats = this.stats.frame;\n\t\tstats.dt = dt;\n\t\tstats.ms = ms;\n\n\t\tif (now > stats._timeToCountFrames) {\n\t\t\tstats.fps = stats._fpsAccum;\n\t\t\tstats._fpsAccum = 0;\n\t\t\tstats._timeToCountFrames = now + 1000;\n\t\t} else {\n\t\t\tstats._fpsAccum++;\n\t\t}\n\n\t\tthis.stats.drawCalls.total = this.graphicsDevice._drawCallsPerFrame;\n\t\tthis.graphicsDevice._drawCallsPerFrame = 0;\n\t}\n\n\t_fillFrameStats() {\n\t\tvar stats = this.stats.frame;\n\t\tstats.cameras = this.renderer._camerasRendered;\n\t\tstats.materials = this.renderer._materialSwitches;\n\t\tstats.shaders = this.graphicsDevice._shaderSwitchesPerFrame;\n\t\tstats.shadowMapUpdates = this.renderer._shadowMapUpdates;\n\t\tstats.shadowMapTime = this.renderer._shadowMapTime;\n\t\tstats.depthMapTime = this.renderer._depthMapTime;\n\t\tstats.forwardTime = this.renderer._forwardTime;\n\t\tvar prims = this.graphicsDevice._primsPerFrame;\n\t\tstats.triangles = prims[PRIMITIVE_TRIANGLES] / 3 + Math.max(prims[PRIMITIVE_TRISTRIP] - 2, 0) + Math.max(prims[PRIMITIVE_TRIFAN] - 2, 0);\n\t\tstats.cullTime = this.renderer._cullTime;\n\t\tstats.sortTime = this.renderer._sortTime;\n\t\tstats.skinTime = this.renderer._skinTime;\n\t\tstats.morphTime = this.renderer._morphTime;\n\t\tstats.instancingTime = this.renderer._instancingTime;\n\t\tstats.lightClusters = this.renderer._lightClusters;\n\t\tstats.lightClustersTime = this.renderer._lightClustersTime;\n\t\tstats.otherPrimitives = 0;\n\n\t\tfor (var i = 0; i < prims.length; i++) {\n\t\t\tif (i < PRIMITIVE_TRIANGLES) {\n\t\t\t\tstats.otherPrimitives += prims[i];\n\t\t\t}\n\n\t\t\tprims[i] = 0;\n\t\t}\n\n\t\tthis.renderer._camerasRendered = 0;\n\t\tthis.renderer._materialSwitches = 0;\n\t\tthis.renderer._shadowMapUpdates = 0;\n\t\tthis.graphicsDevice._shaderSwitchesPerFrame = 0;\n\t\tthis.renderer._cullTime = 0;\n\t\tthis.renderer._layerCompositionUpdateTime = 0;\n\t\tthis.renderer._lightClustersTime = 0;\n\t\tthis.renderer._sortTime = 0;\n\t\tthis.renderer._skinTime = 0;\n\t\tthis.renderer._morphTime = 0;\n\t\tthis.renderer._instancingTime = 0;\n\t\tthis.renderer._shadowMapTime = 0;\n\t\tthis.renderer._depthMapTime = 0;\n\t\tthis.renderer._forwardTime = 0;\n\t\tstats = this.stats.drawCalls;\n\t\tstats.forward = this.renderer._forwardDrawCalls;\n\t\tstats.culled = this.renderer._numDrawCallsCulled;\n\t\tstats.depth = 0;\n\t\tstats.shadow = this.renderer._shadowDrawCalls;\n\t\tstats.skinned = this.renderer._skinDrawCalls;\n\t\tstats.immediate = 0;\n\t\tstats.instanced = 0;\n\t\tstats.removedByInstancing = 0;\n\t\tstats.misc = stats.total - (stats.forward + stats.shadow);\n\t\tthis.renderer._depthDrawCalls = 0;\n\t\tthis.renderer._shadowDrawCalls = 0;\n\t\tthis.renderer._forwardDrawCalls = 0;\n\t\tthis.renderer._numDrawCallsCulled = 0;\n\t\tthis.renderer._skinDrawCalls = 0;\n\t\tthis.renderer._immediateRendered = 0;\n\t\tthis.renderer._instancedDrawCalls = 0;\n\t\tthis.renderer._removedByInstancing = 0;\n\t\tthis.stats.misc.renderTargetCreationTime = this.graphicsDevice.renderTargetCreationTime;\n\t\tstats = this.stats.particles;\n\t\tstats.updatesPerFrame = stats._updatesPerFrame;\n\t\tstats.frameTime = stats._frameTime;\n\t\tstats._updatesPerFrame = 0;\n\t\tstats._frameTime = 0;\n\t}\n\n\tsetCanvasFillMode(mode, width, height) {\n\t\tthis._fillMode = mode;\n\t\tthis.resizeCanvas(width, height);\n\t}\n\n\tsetCanvasResolution(mode, width, height) {\n\t\tthis._resolutionMode = mode;\n\n\t\tif (mode === RESOLUTION_AUTO && width === undefined) {\n\t\t\twidth = this.graphicsDevice.canvas.clientWidth;\n\t\t\theight = this.graphicsDevice.canvas.clientHeight;\n\t\t}\n\n\t\tthis.graphicsDevice.resizeCanvas(width, height);\n\t}\n\n\tisHidden() {\n\t\treturn document[this._hiddenAttr];\n\t}\n\n\tonVisibilityChange() {\n\t\tif (this.isHidden()) {\n\t\t\tthis._soundManager.suspend();\n\t\t} else {\n\t\t\tthis._soundManager.resume();\n\t\t}\n\t}\n\n\tresizeCanvas(width, height) {\n\t\tif (!this._allowResize) return;\n\t\tif (this.xr && this.xr.session) return;\n\t\tvar windowWidth = window.innerWidth;\n\t\tvar windowHeight = window.innerHeight;\n\n\t\tif (this._fillMode === FILLMODE_KEEP_ASPECT) {\n\t\t\tvar r = this.graphicsDevice.canvas.width / this.graphicsDevice.canvas.height;\n\t\t\tvar winR = windowWidth / windowHeight;\n\n\t\t\tif (r > winR) {\n\t\t\t\twidth = windowWidth;\n\t\t\t\theight = width / r;\n\t\t\t} else {\n\t\t\t\theight = windowHeight;\n\t\t\t\twidth = height * r;\n\t\t\t}\n\t\t} else if (this._fillMode === FILLMODE_FILL_WINDOW) {\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t}\n\n\t\tthis.graphicsDevice.canvas.style.width = width + 'px';\n\t\tthis.graphicsDevice.canvas.style.height = height + 'px';\n\t\tthis.updateCanvasSize();\n\t\treturn {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\tupdateCanvasSize() {\n\t\tif (!this._allowResize || this.xr.active) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._resolutionMode === RESOLUTION_AUTO) {\n\t\t\tconst canvas = this.graphicsDevice.canvas;\n\t\t\tthis.graphicsDevice.resizeCanvas(canvas.clientWidth, canvas.clientHeight);\n\t\t}\n\t}\n\n\tonLibrariesLoaded() {\n\t\tthis._librariesLoaded = true;\n\t\tthis.systems.rigidbody.onLibraryLoaded();\n\t}\n\n\tapplySceneSettings(settings) {\n\t\tvar asset;\n\n\t\tif (this.systems.rigidbody && typeof Ammo !== 'undefined') {\n\t\t\tvar gravity = settings.physics.gravity;\n\t\t\tthis.systems.rigidbody.gravity.set(gravity[0], gravity[1], gravity[2]);\n\t\t}\n\n\t\tthis.scene.applySettings(settings);\n\n\t\tif (settings.render.hasOwnProperty('skybox')) {\n\t\t\tif (settings.render.skybox) {\n\t\t\t\tasset = this.assets.get(settings.render.skybox);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis.setSkybox(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis.assets.once('add:' + settings.render.skybox, this.setSkybox, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setSkybox(null);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetAreaLightLuts(asset) {\n\t\tif (asset) {\n\t\t\tconst device = this.graphicsDevice;\n\t\t\tasset.ready(function (asset) {\n\t\t\t\tAreaLightLuts.set(device, asset.resource);\n\t\t\t});\n\t\t\tthis.assets.load(asset);\n\t\t}\n\t}\n\n\tsetSkybox(asset) {\n\t\tif (asset) {\n\t\t\tif (this._skyboxLast === asset.id) {\n\t\t\t\tif (this.scene.skyboxMip === 0 && !asset.loadFaces) {\n\t\t\t\t\tthis._skyboxLoad(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._onSkyboxChange(asset);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._skyboxLast) {\n\t\t\t\tthis.assets.off('add:' + this._skyboxLast, this.setSkybox, this);\n\t\t\t\tthis.assets.off('load:' + this._skyboxLast, this._onSkyboxChange, this);\n\t\t\t\tthis.assets.off('remove:' + this._skyboxLast, this._skyboxRemove, this);\n\t\t\t}\n\n\t\t\tthis._skyboxLast = asset.id;\n\t\t\tthis.assets.on('load:' + asset.id, this._onSkyboxChange, this);\n\t\t\tthis.assets.once('remove:' + asset.id, this._skyboxRemove, this);\n\t\t\tif (asset.resource) this.scene.setSkybox(asset.resources);\n\n\t\t\tthis._skyboxLoad(asset);\n\t\t} else {\n\t\t\tif (!this._skyboxLast) return;\n\n\t\t\tthis._skyboxRemove({\n\t\t\t\tid: this._skyboxLast\n\t\t\t});\n\t\t}\n\t}\n\n\tenableVr() {\n\t\tif (!this.vr) {\n\t\t\tthis.vr = new VrManager(this);\n\t\t}\n\t}\n\n\tdisableVr() {\n\t\tif (this.vr) {\n\t\t\tthis.vr.destroy();\n\t\t\tthis.vr = null;\n\t\t}\n\t}\n\n\t_onSkyboxChange(asset) {\n\t\tthis.scene.setSkybox(asset.resources);\n\t}\n\n\t_skyboxLoad(asset) {\n\t\tif (this.scene.skyboxMip === 0) asset.loadFaces = true;\n\t\tthis.assets.load(asset);\n\n\t\tthis._onSkyboxChange(asset);\n\t}\n\n\t_skyboxRemove(asset) {\n\t\tif (!this._skyboxLast) return;\n\t\tthis.assets.off('add:' + asset.id, this.setSkybox, this);\n\t\tthis.assets.off('load:' + asset.id, this._onSkyboxChange, this);\n\t\tthis.assets.off('remove:' + asset.id, this._skyboxRemove, this);\n\t\tthis.scene.setSkybox(null);\n\t\tthis._skyboxLast = null;\n\t}\n\n\t_firstBake() {\n\t\tthis.lightmapper.bake(null, this.scene.lightmapMode);\n\t}\n\n\t_firstBatch() {\n\t\tif (this.scene._needsStaticPrepare) {\n\t\t\tthis.renderer.prepareStaticMeshes(this.graphicsDevice, this.scene);\n\t\t\tthis.scene._needsStaticPrepare = false;\n\t\t}\n\n\t\tthis.batcher.generate();\n\t}\n\n\t_processTimestamp(timestamp) {\n\t\treturn timestamp;\n\t}\n\n\t_preRenderImmediate() {\n\t\tthis._immediateData.finalize();\n\t}\n\n\t_postRenderImmediate() {\n\t\tthis._immediateData.clear();\n\t}\n\n\t_initImmediate() {\n\t\tif (!this._immediateData) {\n\t\t\tthis._immediateData = new ImmediateData(this.graphicsDevice);\n\t\t\tthis.on('prerender', this._preRenderImmediate, this);\n\t\t\tthis.on('postrender', this._postRenderImmediate, this);\n\t\t}\n\t}\n\n\t_addLines(position, color, options) {\n\t\tvar layer = options && options.layer ? options.layer : this.scene.layers.getLayerById(LAYERID_IMMEDIATE);\n\t\tvar depthTest = options && options.depthTest !== undefined ? options.depthTest : true;\n\t\tvar mask = options && options.mask ? options.mask : undefined;\n\n\t\tthis._initImmediate();\n\n\t\tconst lineBatch = this._immediateData.prepareLineBatch(layer, depthTest, mask, position.length / 2);\n\n\t\tlineBatch.addLines(position, color);\n\t}\n\n\trenderLine(start, end, color) {\n\t\tvar endColor = color;\n\t\tvar options;\n\t\tvar arg3 = arguments[3];\n\t\tvar arg4 = arguments[4];\n\n\t\tif (arg3 instanceof Color) {\n\t\t\tendColor = arg3;\n\n\t\t\tif (typeof arg4 === 'number') {\n\t\t\t\tif (!_deprecationWarning) {\n\t\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t\t_deprecationWarning = true;\n\t\t\t\t}\n\n\t\t\t\tif (arg4 === LINEBATCH_OVERLAY) {\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\t\tdepthTest: false\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\t\tdepthTest: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toptions = arg4;\n\t\t\t}\n\t\t} else if (typeof arg3 === 'number') {\n\t\t\tif (!_deprecationWarning) {\n\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t_deprecationWarning = true;\n\t\t\t}\n\n\t\t\tendColor = color;\n\n\t\t\tif (arg3 === LINEBATCH_OVERLAY) {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: false\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: true\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (arg3) {\n\t\t\toptions = arg3;\n\t\t}\n\n\t\tthis._addLines([start, end], [color, endColor], options);\n\t}\n\n\trenderLines(position, color, options) {\n\t\tif (!options) {\n\t\t\toptions = {\n\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\tdepthTest: true\n\t\t\t};\n\t\t} else if (typeof options === 'number') {\n\t\t\tif (!_deprecationWarning) {\n\t\t\t\tconsole.warn(\"lineBatch argument is deprecated for renderLine. Use options.layer instead\");\n\t\t\t\t_deprecationWarning = true;\n\t\t\t}\n\n\t\t\tif (options === LINEBATCH_OVERLAY) {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: false\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toptions = {\n\t\t\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\t\t\tdepthTest: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tvar multiColor = !!color.length;\n\n\t\tif (multiColor) {\n\t\t\tif (position.length !== color.length) {\n\t\t\t\tconsole.error(\"renderLines: position/color arrays have different lengths\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (position.length % 2 !== 0) {\n\t\t\tconsole.error(\"renderLines: array length is not divisible by 2\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._addLines(position, color, options);\n\t}\n\n\t_getDefaultImmediateOptions(depthTest = false) {\n\t\treturn {\n\t\t\tlayer: this.scene.layers.getLayerById(LAYERID_IMMEDIATE),\n\t\t\tdepthTest: depthTest\n\t\t};\n\t}\n\n\trenderWireCube(matrix, color, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderWireCube(matrix, color, options);\n\t}\n\n\trenderWireSphere(center, radius, color, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderWireSphere(center, radius, color, options);\n\t}\n\n\trenderMeshInstance(meshInstance, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(null, null, null, meshInstance, options);\n\t}\n\n\trenderMesh(mesh, material, matrix, options = this._getDefaultImmediateOptions(true)) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(material, matrix, mesh, null, options);\n\t}\n\n\trenderQuad(matrix, material, options = this._getDefaultImmediateOptions()) {\n\t\tthis._initImmediate();\n\n\t\tthis._immediateData.renderMesh(material, matrix, this._immediateData.getQuadMesh(), null, options);\n\t}\n\n\trenderTexture(x, y, width, height, texture, material, options) {\n\t\tthis._initImmediate();\n\n\t\tconst matrix = new Mat4();\n\t\tmatrix.setTRS(new Vec3(x, y, 0.0), Quat.IDENTITY, new Vec3(width, height, 0.0));\n\n\t\tif (!material) {\n\t\t\tmaterial = new Material();\n\t\t\tmaterial.setParameter(\"colorMap\", texture);\n\t\t\tmaterial.shader = this._immediateData.getTextureShader();\n\t\t\tmaterial.update();\n\t\t}\n\n\t\tthis.renderQuad(matrix, material, options);\n\t}\n\n\trenderDepthTexture(x, y, width, height, options) {\n\t\tthis._initImmediate();\n\n\t\tconst material = new Material();\n\t\tmaterial.shader = this._immediateData.getDepthTextureShader();\n\t\tmaterial.update();\n\t\tthis.renderTexture(x, y, width, height, null, material, options);\n\t}\n\n\tdestroy() {\n\t\tif (this._inFrameUpdate) {\n\t\t\tthis._destroyRequested = true;\n\t\t\treturn;\n\t\t}\n\n\t\tvar i, l;\n\t\tvar canvasId = this.graphicsDevice.canvas.id;\n\t\tthis.off('librariesloaded');\n\t\tdocument.removeEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('mozvisibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('msvisibilitychange', this._visibilityChangeHandler, false);\n\t\tdocument.removeEventListener('webkitvisibilitychange', this._visibilityChangeHandler, false);\n\t\tthis._visibilityChangeHandler = null;\n\t\tthis.onVisibilityChange = null;\n\t\tthis.root.destroy();\n\t\tthis.root = null;\n\n\t\tif (this.mouse) {\n\t\t\tthis.mouse.off();\n\t\t\tthis.mouse.detach();\n\t\t\tthis.mouse = null;\n\t\t}\n\n\t\tif (this.keyboard) {\n\t\t\tthis.keyboard.off();\n\t\t\tthis.keyboard.detach();\n\t\t\tthis.keyboard = null;\n\t\t}\n\n\t\tif (this.touch) {\n\t\t\tthis.touch.off();\n\t\t\tthis.touch.detach();\n\t\t\tthis.touch = null;\n\t\t}\n\n\t\tif (this.elementInput) {\n\t\t\tthis.elementInput.detach();\n\t\t\tthis.elementInput = null;\n\t\t}\n\n\t\tif (this.controller) {\n\t\t\tthis.controller = null;\n\t\t}\n\n\t\tvar systems = this.systems.list;\n\n\t\tfor (i = 0, l = systems.length; i < l; i++) {\n\t\t\tsystems[i].destroy();\n\t\t}\n\n\t\tComponentSystem.destroy();\n\n\t\tif (this.scene.layers) {\n\t\t\tthis.scene.layers.destroy();\n\t\t}\n\n\t\tvar assets = this.assets.list();\n\n\t\tfor (i = 0; i < assets.length; i++) {\n\t\t\tassets[i].unload();\n\t\t\tassets[i].off();\n\t\t}\n\n\t\tthis.assets.off();\n\t\tthis.bundles.destroy();\n\t\tthis.bundles = null;\n\t\tthis.i18n.destroy();\n\t\tthis.i18n = null;\n\n\t\tfor (var key in this.loader.getHandler('script')._cache) {\n\t\t\tvar element = this.loader.getHandler('script')._cache[key];\n\n\t\t\tvar parent = element.parentNode;\n\t\t\tif (parent) parent.removeChild(element);\n\t\t}\n\n\t\tthis.loader.getHandler('script')._cache = {};\n\t\tthis.loader.destroy();\n\t\tthis.loader = null;\n\t\tthis.scene.destroy();\n\t\tthis.scene = null;\n\t\tthis.systems = [];\n\t\tthis.context = null;\n\t\tthis.scripts.destroy();\n\t\tthis.scripts = null;\n\t\tthis.scenes.destroy();\n\t\tthis.scenes = null;\n\t\tthis.lightmapper.destroy();\n\t\tthis.lightmapper = null;\n\t\tthis.batcher.destroy();\n\t\tthis.batcher = null;\n\t\tthis._entityIndex = {};\n\t\tthis.defaultLayerDepth.onPreRenderOpaque = null;\n\t\tthis.defaultLayerDepth.onPostRenderOpaque = null;\n\t\tthis.defaultLayerDepth.onDisable = null;\n\t\tthis.defaultLayerDepth.onEnable = null;\n\t\tthis.defaultLayerDepth = null;\n\t\tthis.defaultLayerWorld = null;\n\t\tdestroyPostEffectQuad();\n\n\t\tif (this.vr) {\n\t\t\tthis.vr.destroy();\n\t\t\tthis.vr = null;\n\t\t}\n\n\t\tthis.xr.end();\n\t\tthis.graphicsDevice.destroy();\n\t\tthis.graphicsDevice = null;\n\t\tthis.renderer.destroy();\n\t\tthis.renderer = null;\n\t\tthis.tick = null;\n\t\tthis.off();\n\n\t\tif (this._soundManager) {\n\t\t\tthis._soundManager.destroy();\n\n\t\t\tthis._soundManager = null;\n\t\t}\n\n\t\tscript.app = null;\n\t\tParticleEmitter.DEFAULT_PARAM_TEXTURE = null;\n\t\tApplication._applications[canvasId] = null;\n\n\t\tif (getApplication() === this) {\n\t\t\tsetApplication(null);\n\t\t}\n\t}\n\n\tgetEntityFromIndex(guid) {\n\t\treturn this._entityIndex[guid];\n\t}\n\n}\n\nApplication._applications = {};\nvar _frameEndData = {};\n\nvar makeTick = function makeTick(_app) {\n\tvar application = _app;\n\tvar frameRequest;\n\treturn function (timestamp, frame) {\n\t\tif (!application.graphicsDevice) return;\n\t\tsetApplication(application);\n\n\t\tif (frameRequest) {\n\t\t\twindow.cancelAnimationFrame(frameRequest);\n\t\t\tframeRequest = null;\n\t\t}\n\n\t\tapp = application;\n\t\tvar currentTime = application._processTimestamp(timestamp) || now();\n\t\tvar ms = currentTime - (application._time || currentTime);\n\t\tvar dt = ms / 1000.0;\n\t\tdt = math.clamp(dt, 0, application.maxDeltaTime);\n\t\tdt *= application.timeScale;\n\t\tapplication._time = currentTime;\n\n\t\tif (application.vr && application.vr.display) {\n\t\t\tframeRequest = application.vr.display.requestAnimationFrame(application.tick);\n\t\t} else if (application.xr.session) {\n\t\t\tframeRequest = application.xr.session.requestAnimationFrame(application.tick);\n\t\t} else {\n\t\t\tframeRequest = window.requestAnimationFrame(application.tick);\n\t\t}\n\n\t\tif (application.graphicsDevice.contextLost) return;\n\n\t\tapplication._fillFrameStatsBasic(currentTime, dt, ms);\n\n\t\tapplication._inFrameUpdate = true;\n\t\tapplication.fire(\"frameupdate\", ms);\n\n\t\tif (frame) {\n\t\t\tapplication.xr.update(frame);\n\t\t\tapplication.graphicsDevice.defaultFramebuffer = frame.session.renderState.baseLayer.framebuffer;\n\t\t} else {\n\t\t\tapplication.graphicsDevice.defaultFramebuffer = null;\n\t\t}\n\n\t\tapplication.update(dt);\n\t\tapplication.fire(\"framerender\");\n\n\t\tif (application.autoRender || application.renderNextFrame) {\n\t\t\tapplication.updateCanvasSize();\n\t\t\tapplication.render();\n\t\t\tapplication.renderNextFrame = false;\n\t\t}\n\n\t\t_frameEndData.timestamp = now();\n\t\t_frameEndData.target = application;\n\t\tapplication.fire(\"frameend\", _frameEndData);\n\t\tapplication.fire(\"frameEnd\", _frameEndData);\n\n\t\tif (application.vr && application.vr.display && application.vr.display.presenting) {\n\t\t\tapplication.vr.display.submitFrame();\n\t\t}\n\n\t\tapplication._inFrameUpdate = false;\n\n\t\tif (application._destroyRequested) {\n\t\t\tapplication.destroy();\n\t\t}\n\t};\n};\n\nclass Entity extends GraphNode {\n\tconstructor(name, app) {\n\t\tsuper(name);\n\t\tif (name instanceof Application) app = name;\n\t\tthis._batchHandle = null;\n\t\tthis.c = {};\n\t\tthis._app = app;\n\n\t\tif (!app) {\n\t\t\tthis._app = Application.getApplication();\n\n\t\t\tif (!this._app) {\n\t\t\t\tthrow new Error(\"Couldn't find current application\");\n\t\t\t}\n\t\t}\n\n\t\tthis._guid = null;\n\t\tthis._destroying = false;\n\t\tthis._template = false;\n\t}\n\n\taddComponent(type, data) {\n\t\tvar system = this._app.systems[type];\n\n\t\tif (!system) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.c[type]) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn system.addComponent(this, data);\n\t}\n\n\tremoveComponent(type) {\n\t\tvar system = this._app.systems[type];\n\n\t\tif (!system) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.c[type]) {\n\t\t\treturn;\n\t\t}\n\n\t\tsystem.removeComponent(this);\n\t}\n\n\tfindComponent(type) {\n\t\tvar entity = this.findOne(function (node) {\n\t\t\treturn node.c && node.c[type];\n\t\t});\n\t\treturn entity && entity.c[type];\n\t}\n\n\tfindComponents(type) {\n\t\tvar entities = this.find(function (node) {\n\t\t\treturn node.c && node.c[type];\n\t\t});\n\t\treturn entities.map(function (entity) {\n\t\t\treturn entity.c[type];\n\t\t});\n\t}\n\n\tgetGuid() {\n\t\tif (!this._guid) {\n\t\t\tthis.setGuid(guid.create());\n\t\t}\n\n\t\treturn this._guid;\n\t}\n\n\tsetGuid(guid) {\n\t\tvar index = this._app._entityIndex;\n\n\t\tif (this._guid) {\n\t\t\tdelete index[this._guid];\n\t\t}\n\n\t\tthis._guid = guid;\n\t\tindex[this._guid] = this;\n\t}\n\n\t_notifyHierarchyStateChanged(node, enabled) {\n\t\tvar enableFirst = false;\n\t\tif (node === this && this._app._enableList.length === 0) enableFirst = true;\n\t\tnode._beingEnabled = true;\n\n\t\tnode._onHierarchyStateChanged(enabled);\n\n\t\tif (node._onHierarchyStatePostChanged) this._app._enableList.push(node);\n\t\tvar i, len;\n\t\tvar c = node._children;\n\n\t\tfor (i = 0, len = c.length; i < len; i++) {\n\t\t\tif (c[i]._enabled) this._notifyHierarchyStateChanged(c[i], enabled);\n\t\t}\n\n\t\tnode._beingEnabled = false;\n\n\t\tif (enableFirst) {\n\t\t\tfor (i = 0; i < this._app._enableList.length; i++) {\n\t\t\t\tthis._app._enableList[i]._onHierarchyStatePostChanged();\n\t\t\t}\n\n\t\t\tthis._app._enableList.length = 0;\n\t\t}\n\t}\n\n\t_onHierarchyStateChanged(enabled) {\n\t\tsuper._onHierarchyStateChanged(enabled);\n\n\t\tvar component;\n\t\tvar components = this.c;\n\n\t\tfor (var type in components) {\n\t\t\tif (components.hasOwnProperty(type)) {\n\t\t\t\tcomponent = components[type];\n\n\t\t\t\tif (component.enabled) {\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tcomponent.onEnable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcomponent.onDisable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onHierarchyStatePostChanged() {\n\t\tvar components = this.c;\n\n\t\tfor (var type in components) {\n\t\t\tif (components.hasOwnProperty(type)) components[type].onPostStateChange();\n\t\t}\n\t}\n\n\tfindByGuid(guid) {\n\t\tif (this._guid === guid) return this;\n\t\tvar e = this._app._entityIndex[guid];\n\n\t\tif (e && (e === this || e.isDescendantOf(this))) {\n\t\t\treturn e;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy() {\n\t\tvar name;\n\t\tthis._destroying = true;\n\n\t\tfor (name in this.c) {\n\t\t\tthis.c[name].enabled = false;\n\t\t}\n\n\t\tfor (name in this.c) {\n\t\t\tthis.c[name].system.removeComponent(this);\n\t\t}\n\n\t\tif (this._parent) this._parent.removeChild(this);\n\t\tvar children = this._children;\n\t\tvar child = children.shift();\n\n\t\twhile (child) {\n\t\t\tif (child instanceof Entity) {\n\t\t\t\tchild.destroy();\n\t\t\t}\n\n\t\t\tchild._parent = null;\n\t\t\tchild = children.shift();\n\t\t}\n\n\t\tthis.fire('destroy', this);\n\t\tthis.off();\n\n\t\tif (this._guid) {\n\t\t\tdelete this._app._entityIndex[this._guid];\n\t\t}\n\n\t\tthis._destroying = false;\n\t}\n\n\tclone() {\n\t\tvar duplicatedIdsMap = {};\n\n\t\tvar clone = this._cloneRecursively(duplicatedIdsMap);\n\n\t\tduplicatedIdsMap[this.getGuid()] = clone;\n\t\tresolveDuplicatedEntityReferenceProperties(this, this, clone, duplicatedIdsMap);\n\t\treturn clone;\n\t}\n\n\t_cloneRecursively(duplicatedIdsMap) {\n\t\tvar clone = new Entity(this._app);\n\n\t\tsuper._cloneInternal(clone);\n\n\t\tfor (var type in this.c) {\n\t\t\tvar component = this.c[type];\n\t\t\tcomponent.system.cloneComponent(this, clone);\n\t\t}\n\n\t\tvar i;\n\n\t\tfor (i = 0; i < this._children.length; i++) {\n\t\t\tvar oldChild = this._children[i];\n\n\t\t\tif (oldChild instanceof Entity) {\n\t\t\t\tvar newChild = oldChild._cloneRecursively(duplicatedIdsMap);\n\n\t\t\t\tclone.addChild(newChild);\n\t\t\t\tduplicatedIdsMap[oldChild.getGuid()] = newChild;\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n}\n\nfunction resolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, oldEntity, newEntity, duplicatedIdsMap) {\n\tvar i, len;\n\n\tif (oldEntity instanceof Entity) {\n\t\tvar components = oldEntity.c;\n\n\t\tfor (var componentName in components) {\n\t\t\tvar component = components[componentName];\n\t\t\tvar entityProperties = component.system.getPropertiesOfType('entity');\n\n\t\t\tfor (i = 0, len = entityProperties.length; i < len; i++) {\n\t\t\t\tvar propertyDescriptor = entityProperties[i];\n\t\t\t\tvar propertyName = propertyDescriptor.name;\n\t\t\t\tvar oldEntityReferenceId = component[propertyName];\n\t\t\t\tvar entityIsWithinOldSubtree = !!oldSubtreeRoot.findByGuid(oldEntityReferenceId);\n\n\t\t\t\tif (entityIsWithinOldSubtree) {\n\t\t\t\t\tvar newEntityReferenceId = duplicatedIdsMap[oldEntityReferenceId].getGuid();\n\n\t\t\t\t\tif (newEntityReferenceId) {\n\t\t\t\t\t\tnewEntity.c[componentName][propertyName] = newEntityReferenceId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('Could not find corresponding entity id when resolving duplicated entity references');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (components.script && !newEntity._app.useLegacyScriptAttributeCloning) {\n\t\t\tnewEntity.script.resolveDuplicatedEntityReferenceProperties(components.script, duplicatedIdsMap);\n\t\t}\n\n\t\tvar _old = oldEntity.children.filter(function (e) {\n\t\t\treturn e instanceof Entity;\n\t\t});\n\n\t\tvar _new = newEntity.children.filter(function (e) {\n\t\t\treturn e instanceof Entity;\n\t\t});\n\n\t\tfor (i = 0, len = _old.length; i < len; i++) {\n\t\t\tresolveDuplicatedEntityReferenceProperties(oldSubtreeRoot, _old[i], _new[i], duplicatedIdsMap);\n\t\t}\n\t}\n}\n\nconst tempSet = new Set();\nconst clearDepthOptions = {\n\tdepth: 1.0,\n\tflags: CLEARFLAG_DEPTH\n};\n\nclass Picker {\n\tconstructor(app, width, height) {\n\t\tif (app instanceof GraphicsDevice) {\n\t\t\tapp = getApplication();\n\t\t}\n\n\t\tthis.app = app;\n\t\tthis.device = app.graphicsDevice;\n\t\tthis.pickColor = new Float32Array(4);\n\t\tthis.pickColor[3] = 1;\n\t\tthis.mapping = [];\n\t\tthis.cameraEntity = null;\n\t\tthis.layer = null;\n\t\tthis.layerComp = null;\n\t\tthis.initLayerComposition();\n\t\tthis._renderTarget = null;\n\t\tconst device = this.device;\n\t\tthis.clearDepthCommand = new Command(0, 0, function () {\n\t\t\tdevice.clear(clearDepthOptions);\n\t\t});\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.resize(width, height);\n\t}\n\n\tgetSelection(x, y, width, height) {\n\t\tconst device = this.device;\n\n\t\tif (typeof x === 'object') {\n\t\t\tconst rect = x;\n\t\t\tx = rect.x;\n\t\t\ty = rect.y;\n\t\t\twidth = rect.width;\n\t\t\theight = rect.height;\n\t\t} else {\n\t\t\ty = this.renderTarget.height - (y + (height || 1));\n\t\t}\n\n\t\tx = Math.floor(x);\n\t\ty = Math.floor(y);\n\t\twidth = Math.floor(Math.max(width || 1, 1));\n\t\theight = Math.floor(Math.max(height || 1, 1));\n\t\tconst origRenderTarget = device.renderTarget;\n\t\tdevice.setRenderTarget(this.renderTarget);\n\t\tdevice.updateBegin();\n\t\tconst pixels = new Uint8Array(4 * width * height);\n\t\tdevice.readPixels(x, y, width, height, pixels);\n\t\tdevice.updateEnd();\n\t\tdevice.setRenderTarget(origRenderTarget);\n\t\tconst mapping = this.mapping;\n\n\t\tfor (let i = 0; i < width * height; i++) {\n\t\t\tconst r = pixels[4 * i + 0];\n\t\t\tconst g = pixels[4 * i + 1];\n\t\t\tconst b = pixels[4 * i + 2];\n\t\t\tconst index = r << 16 | g << 8 | b;\n\n\t\t\tif (index !== 0xffffff) {\n\t\t\t\ttempSet.add(mapping[index]);\n\t\t\t}\n\t\t}\n\n\t\tconst selection = [];\n\t\ttempSet.forEach(meshInstance => selection.push(meshInstance));\n\t\ttempSet.clear();\n\t\treturn selection;\n\t}\n\n\tallocateRenderTarget() {\n\t\tconst colorBuffer = new Texture(this.device, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tmipmaps: false,\n\t\t\tminFilter: FILTER_NEAREST,\n\t\t\tmagFilter: FILTER_NEAREST,\n\t\t\taddressU: ADDRESS_CLAMP_TO_EDGE,\n\t\t\taddressV: ADDRESS_CLAMP_TO_EDGE\n\t\t});\n\t\tcolorBuffer.name = 'pick';\n\t\tthis.renderTarget = new RenderTarget({\n\t\t\tcolorBuffer: colorBuffer,\n\t\t\tdepth: true\n\t\t});\n\t}\n\n\treleaseRenderTarget() {\n\t\tthis.cameraEntity.camera.renderTarget = null;\n\n\t\tif (this._renderTarget) {\n\t\t\tthis._renderTarget._colorBuffer.destroy();\n\n\t\t\tthis._renderTarget.destroy();\n\n\t\t\tthis._renderTarget = null;\n\t\t}\n\t}\n\n\tinitLayerComposition() {\n\t\tconst device = this.device;\n\t\tconst self = this;\n\t\tconst pickColorId = device.scope.resolve('uColor');\n\t\tthis.cameraEntity = new Entity();\n\t\tthis.cameraEntity.addComponent(\"camera\");\n\t\tthis.layer = new Layer({\n\t\t\tname: \"Picker\",\n\t\t\tshaderPass: SHADER_PICK,\n\t\t\topaqueSortMode: SORTMODE_NONE,\n\t\t\tonDrawCall: function (meshInstance, index) {\n\t\t\t\tself.pickColor[0] = (index >> 16 & 0xff) / 255;\n\t\t\t\tself.pickColor[1] = (index >> 8 & 0xff) / 255;\n\t\t\t\tself.pickColor[2] = (index & 0xff) / 255;\n\t\t\t\tpickColorId.setValue(self.pickColor);\n\t\t\t\tdevice.setBlending(false);\n\t\t\t\tself.mapping[index] = meshInstance;\n\t\t\t}\n\t\t});\n\t\tthis.layer.addCamera(this.cameraEntity.camera);\n\t\tthis.layerComp = new LayerComposition(\"picker\");\n\t\tthis.layerComp.pushOpaque(this.layer);\n\t}\n\n\tprepare(camera, scene, layers) {\n\t\tif (camera instanceof Camera) {\n\t\t\tcamera = camera.node.camera;\n\t\t}\n\n\t\tif (layers instanceof Layer) {\n\t\t\tlayers = [layers];\n\t\t}\n\n\t\tthis.layer.clearMeshInstances();\n\t\tconst destMeshInstances = this.layer.opaqueMeshInstances;\n\t\tconst srcLayers = scene.layers.layerList;\n\t\tconst subLayerEnabled = scene.layers.subLayerEnabled;\n\t\tconst isTransparent = scene.layers.subLayerList;\n\n\t\tfor (let i = 0; i < srcLayers.length; i++) {\n\t\t\tconst srcLayer = srcLayers[i];\n\n\t\t\tif (layers && layers.indexOf(srcLayer) < 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (srcLayer.enabled && subLayerEnabled[i]) {\n\t\t\t\tconst layerCamId = srcLayer.cameras.indexOf(camera);\n\n\t\t\t\tif (layerCamId >= 0) {\n\t\t\t\t\tif (srcLayer._clearDepthBuffer) {\n\t\t\t\t\t\tdestMeshInstances.push(this.clearDepthCommand);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst meshInstances = isTransparent[i] ? srcLayer.instances.transparentMeshInstances : srcLayer.instances.opaqueMeshInstances;\n\n\t\t\t\t\tfor (let j = 0; j < meshInstances.length; j++) {\n\t\t\t\t\t\tconst meshInstance = meshInstances[j];\n\n\t\t\t\t\t\tif (meshInstance.pick) {\n\t\t\t\t\t\t\tdestMeshInstances.push(meshInstance);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.renderTarget || this.width !== this.renderTarget.width || this.height !== this.renderTarget.height) {\n\t\t\tthis.releaseRenderTarget();\n\t\t\tthis.allocateRenderTarget();\n\t\t}\n\n\t\tthis.updateCamera(camera);\n\t\tthis.mapping.length = 0;\n\t\tthis.app.renderer.renderComposition(this.layerComp);\n\t}\n\n\tupdateCamera(srcCamera) {\n\t\tthis.cameraEntity.copy(srcCamera.entity);\n\t\tthis.cameraEntity.name = \"PickerCamera\";\n\t\tconst destCamera = this.cameraEntity.camera;\n\t\tdestCamera.copy(srcCamera);\n\t\tdestCamera.clearColorBuffer = true;\n\t\tdestCamera.clearDepthBuffer = true;\n\t\tdestCamera.clearStencilBuffer = true;\n\t\tdestCamera.clearColor = Color.WHITE;\n\t\tdestCamera.renderTarget = this.renderTarget;\n\t\tthis.layer.clearCameras();\n\t\tthis.layer.addCamera(destCamera);\n\t\tdestCamera.layers = [this.layer.id];\n\t}\n\n\tresize(width, height) {\n\t\tthis.width = Math.floor(width);\n\t\tthis.height = Math.floor(height);\n\t}\n\n}\n\nconst MAX_TEXTURE_SIZE = 4096;\nconst DEFAULT_TEXTURE_SIZE = 512;\n\nclass CanvasFont extends EventHandler {\n\tconstructor(app, options = {}) {\n\t\tsuper();\n\t\tthis.type = \"bitmap\";\n\t\tthis.app = app;\n\t\tthis.intensity = 0;\n\t\tthis.fontWeight = options.fontWeight || 'normal';\n\t\tthis.fontSize = parseInt(options.fontSize, 10);\n\t\tthis.glyphSize = this.fontSize;\n\t\tthis.fontName = options.fontName || 'Arial';\n\t\tthis.color = options.color || new Color(1, 1, 1);\n\t\tthis.padding = options.padding || 0;\n\t\tvar w = options.width > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.width || DEFAULT_TEXTURE_SIZE;\n\t\tvar h = options.height > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.height || DEFAULT_TEXTURE_SIZE;\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.height = h;\n\t\tcanvas.width = w;\n\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\tmipmaps: true\n\t\t});\n\t\ttexture.name = 'font';\n\t\ttexture.setSource(canvas);\n\t\ttexture.minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\ttexture.magFilter = FILTER_LINEAR;\n\t\ttexture.addressU = ADDRESS_CLAMP_TO_EDGE;\n\t\ttexture.addressV = ADDRESS_CLAMP_TO_EDGE;\n\t\tthis.textures = [texture];\n\t\tthis.chars = \"\";\n\t\tthis.data = {};\n\t}\n\n\tcreateTextures(text) {\n\t\tvar _chars = this._normalizeCharsSet(text);\n\n\t\tif (_chars.length !== this.chars.length) {\n\t\t\tthis._renderAtlas(_chars);\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < _chars.length; i++) {\n\t\t\tif (_chars[i] !== this.chars[i]) {\n\t\t\t\tthis._renderAtlas(_chars);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTextures(text) {\n\t\tvar _chars = this._normalizeCharsSet(text);\n\n\t\tvar newCharsSet = [];\n\n\t\tfor (var i = 0; i < _chars.length; i++) {\n\t\t\tvar char = _chars[i];\n\n\t\t\tif (!this.data.chars[char]) {\n\t\t\t\tnewCharsSet.push(char);\n\t\t\t}\n\t\t}\n\n\t\tif (newCharsSet.length > 0) {\n\t\t\tthis._renderAtlas(this.chars.concat(newCharsSet));\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tfor (var i = 0; i < this.textures.length; i++) {\n\t\t\tthis.textures[i].destroy();\n\t\t}\n\n\t\tthis.chars = null;\n\t\tthis.color = null;\n\t\tthis.data = null;\n\t\tthis.fontName = null;\n\t\tthis.fontSize = null;\n\t\tthis.glyphSize = null;\n\t\tthis.intensity = null;\n\t\tthis.textures = null;\n\t\tthis.type = null;\n\t\tthis.fontWeight = null;\n\t}\n\n\t_getAndClearContext(canvas, clearColor) {\n\t\tvar w = canvas.width;\n\t\tvar h = canvas.height;\n\t\tvar ctx = canvas.getContext('2d', {\n\t\t\talpha: true\n\t\t});\n\t\tctx.clearRect(0, 0, w, h);\n\t\tctx.fillStyle = clearColor;\n\t\tctx.fillRect(0, 0, w, h);\n\t\treturn ctx;\n\t}\n\n\t_colorToRgbString(color, alpha) {\n\t\tvar str;\n\t\tvar r = Math.round(255 * color.r);\n\t\tvar g = Math.round(255 * color.g);\n\t\tvar b = Math.round(255 * color.b);\n\n\t\tif (alpha) {\n\t\t\tstr = \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + color.a + \")\";\n\t\t} else {\n\t\t\tstr = \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n\t\t}\n\n\t\treturn str;\n\t}\n\n\trenderCharacter(context, char, x, y, color) {\n\t\tcontext.fillStyle = color;\n\t\tcontext.fillText(char, x, y);\n\t}\n\n\t_renderAtlas(charsArray) {\n\t\tthis.chars = charsArray;\n\t\tvar numTextures = 1;\n\t\tvar canvas = this.textures[numTextures - 1].getSource();\n\t\tvar w = canvas.width;\n\t\tvar h = canvas.height;\n\n\t\tvar color = this._colorToRgbString(this.color, false);\n\n\t\tvar a = this.color.a;\n\t\tthis.color.a = 1 / 255;\n\n\t\tvar transparent = this._colorToRgbString(this.color, true);\n\n\t\tthis.color.a = a;\n\t\tvar TEXT_ALIGN = 'center';\n\t\tvar TEXT_BASELINE = 'alphabetic';\n\n\t\tvar ctx = this._getAndClearContext(canvas, transparent);\n\n\t\tctx.font = this.fontWeight + ' ' + this.fontSize.toString() + 'px ' + this.fontName;\n\t\tctx.textAlign = TEXT_ALIGN;\n\t\tctx.textBaseline = TEXT_BASELINE;\n\t\tthis.data = this._createJson(this.chars, this.fontName, w, h);\n\t\tvar symbols = string.getSymbols(this.chars.join(''));\n\t\tvar prevNumTextures = this.textures.length;\n\t\tvar maxHeight = 0;\n\t\tvar maxDescent = 0;\n\t\tvar metrics = {};\n\t\tvar i, ch;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tch = symbols[i];\n\t\t\tmetrics[ch] = this._getTextMetrics(ch);\n\t\t\tmaxHeight = Math.max(maxHeight, metrics[ch].height);\n\t\t\tmaxDescent = Math.max(maxDescent, metrics[ch].descent);\n\t\t}\n\n\t\tthis.glyphSize = Math.max(this.glyphSize, maxHeight);\n\t\tvar sx = this.glyphSize + this.padding * 2;\n\t\tvar sy = this.glyphSize + this.padding * 2;\n\n\t\tvar _xOffset = this.glyphSize / 2 + this.padding;\n\n\t\tvar _yOffset = sy - maxDescent - this.padding;\n\n\t\tvar _x = 0;\n\t\tvar _y = 0;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tch = symbols[i];\n\t\t\tvar code = string.getCodePoint(symbols[i]);\n\t\t\tvar fs = this.fontSize;\n\t\t\tctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;\n\t\t\tctx.textAlign = TEXT_ALIGN;\n\t\t\tctx.textBaseline = TEXT_BASELINE;\n\t\t\tvar width = ctx.measureText(ch).width;\n\n\t\t\tif (width > fs) {\n\t\t\t\tfs = this.fontSize * this.fontSize / width;\n\t\t\t\tctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;\n\t\t\t\twidth = this.fontSize;\n\t\t\t}\n\n\t\t\tthis.renderCharacter(ctx, ch, _x + _xOffset, _y + _yOffset, color);\n\t\t\tvar xoffset = this.padding + (this.glyphSize - width) / 2;\n\t\t\tvar yoffset = -this.padding + metrics[ch].descent - maxDescent;\n\t\t\tvar xadvance = width;\n\n\t\t\tthis._addChar(this.data, ch, code, _x, _y, sx, sy, xoffset, yoffset, xadvance, numTextures - 1, w, h);\n\n\t\t\t_x += sx;\n\n\t\t\tif (_x + sx > w) {\n\t\t\t\t_x = 0;\n\t\t\t\t_y += sy;\n\n\t\t\t\tif (_y + sy > h) {\n\t\t\t\t\tthis.textures[numTextures - 1].upload();\n\t\t\t\t\tnumTextures++;\n\t\t\t\t\t_y = 0;\n\n\t\t\t\t\tif (numTextures > prevNumTextures) {\n\t\t\t\t\t\tcanvas = document.createElement('canvas');\n\t\t\t\t\t\tcanvas.height = h;\n\t\t\t\t\t\tcanvas.width = w;\n\t\t\t\t\t\tctx = this._getAndClearContext(canvas, transparent);\n\t\t\t\t\t\tvar texture = new Texture(this.app.graphicsDevice, {\n\t\t\t\t\t\t\tformat: PIXELFORMAT_R8_G8_B8_A8,\n\t\t\t\t\t\t\tmipmaps: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttexture.name = 'font-atlas';\n\t\t\t\t\t\ttexture.setSource(canvas);\n\t\t\t\t\t\ttexture.minFilter = FILTER_LINEAR_MIPMAP_LINEAR;\n\t\t\t\t\t\ttexture.magFilter = FILTER_LINEAR;\n\t\t\t\t\t\ttexture.addressU = ADDRESS_CLAMP_TO_EDGE;\n\t\t\t\t\t\ttexture.addressV = ADDRESS_CLAMP_TO_EDGE;\n\t\t\t\t\t\tthis.textures.push(texture);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanvas = this.textures[numTextures - 1].getSource();\n\t\t\t\t\t\tctx = this._getAndClearContext(canvas, transparent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.textures[numTextures - 1].upload();\n\n\t\tif (numTextures < prevNumTextures) {\n\t\t\tfor (i = numTextures; i < prevNumTextures; i++) {\n\t\t\t\tthis.textures[i].destroy();\n\t\t\t}\n\n\t\t\tthis.textures.splice(numTextures);\n\t\t}\n\n\t\tthis.fire(\"render\");\n\t}\n\n\t_createJson(chars, fontName, width, height) {\n\t\tvar base = {\n\t\t\t\"version\": 3,\n\t\t\t\"intensity\": this.intensity,\n\t\t\t\"info\": {\n\t\t\t\t\"face\": fontName,\n\t\t\t\t\"width\": width,\n\t\t\t\t\"height\": height,\n\t\t\t\t\"maps\": [{\n\t\t\t\t\t\"width\": width,\n\t\t\t\t\t\"height\": height\n\t\t\t\t}]\n\t\t\t},\n\t\t\t\"chars\": {}\n\t\t};\n\t\treturn base;\n\t}\n\n\t_addChar(json, char, charCode, x, y, w, h, xoffset, yoffset, xadvance, mapNum, mapW, mapH) {\n\t\tif (json.info.maps.length < mapNum + 1) {\n\t\t\tjson.info.maps.push({\n\t\t\t\t\"width\": mapW,\n\t\t\t\t\"height\": mapH\n\t\t\t});\n\t\t}\n\n\t\tvar scale = this.fontSize / 32;\n\t\tjson.chars[char] = {\n\t\t\t\"id\": charCode,\n\t\t\t\"letter\": char,\n\t\t\t\"x\": x,\n\t\t\t\"y\": y,\n\t\t\t\"width\": w,\n\t\t\t\"height\": h,\n\t\t\t\"xadvance\": xadvance / scale,\n\t\t\t\"xoffset\": xoffset / scale,\n\t\t\t\"yoffset\": (yoffset + this.padding) / scale,\n\t\t\t\"scale\": scale,\n\t\t\t\"range\": 1,\n\t\t\t\"map\": mapNum,\n\t\t\t\"bounds\": [0, 0, w / scale, h / scale]\n\t\t};\n\t}\n\n\t_normalizeCharsSet(text) {\n\t\tvar unicodeConverterFunc = this.app.systems.element.getUnicodeConverter();\n\n\t\tif (unicodeConverterFunc) {\n\t\t\ttext = unicodeConverterFunc(text);\n\t\t}\n\n\t\tvar set = {};\n\t\tvar symbols = string.getSymbols(text);\n\t\tvar i;\n\n\t\tfor (i = 0; i < symbols.length; i++) {\n\t\t\tvar ch = symbols[i];\n\t\t\tif (set[ch]) continue;\n\t\t\tset[ch] = ch;\n\t\t}\n\n\t\tvar chars = Object.keys(set);\n\t\treturn chars.sort();\n\t}\n\n\t_getTextMetrics(text) {\n\t\tvar textSpan = document.createElement('span');\n\t\ttextSpan.id = 'content-span';\n\t\ttextSpan.innerHTML = text;\n\t\tvar block = document.createElement(\"div\");\n\t\tblock.id = 'content-block';\n\t\tblock.style.display = 'inline-block';\n\t\tblock.style.width = '1px';\n\t\tblock.style.height = '0px';\n\t\tvar div = document.createElement('div');\n\t\tdiv.appendChild(textSpan);\n\t\tdiv.appendChild(block);\n\t\tdiv.style.font = this.fontSize + 'px ' + this.fontName;\n\t\tvar body = document.body;\n\t\tbody.appendChild(div);\n\t\tvar ascent = -1;\n\t\tvar descent = -1;\n\t\tvar height = -1;\n\n\t\ttry {\n\t\t\tblock.style['vertical-align'] = 'baseline';\n\t\t\tascent = block.offsetTop - textSpan.offsetTop;\n\t\t\tblock.style['vertical-align'] = 'bottom';\n\t\t\theight = block.offsetTop - textSpan.offsetTop;\n\t\t\tdescent = height - ascent;\n\t\t} finally {\n\t\t\tdocument.body.removeChild(div);\n\t\t}\n\n\t\treturn {\n\t\t\tascent: ascent,\n\t\t\tdescent: descent,\n\t\t\theight: height\n\t\t};\n\t}\n\n}\n\nclass ResourceHandler {\n\tload(url, callback, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\topen(url, data, asset) {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tpatch(asset, assets) {}\n\n}\n\nclass SceneSettingsHandler {\n\tconstructor(app) {\n\t\tthis._app = app;\n\t\tthis.maxRetries = 0;\n\t}\n\n\tload(url, callback) {\n\t\tSceneUtils.load(url, callback);\n\t}\n\n\topen(url, data) {\n\t\treturn data.settings;\n\t}\n\n}\n\nclass AssetListLoader extends EventHandler {\n\tconstructor(assetList, assetRegistry) {\n\t\tsuper();\n\t\tthis._assets = [];\n\t\tthis._registry = assetRegistry;\n\t\tthis._loaded = false;\n\t\tthis._count = 0;\n\t\tthis._total = 0;\n\t\tthis._failed = [];\n\t\tthis._waitingAssets = [];\n\n\t\tif (assetList.length && assetList[0] instanceof Asset) {\n\t\t\tthis._assets = assetList;\n\t\t} else {\n\t\t\tfor (var i = 0; i < assetList.length; i++) {\n\t\t\t\tvar asset = assetRegistry.get(assetList[i]);\n\n\t\t\t\tif (asset) {\n\t\t\t\t\tthis._assets.push(asset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._waitForAsset(assetList[i]);\n\n\t\t\t\t\tthis._total++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar self = this;\n\n\t\tthis._registry.off(\"load\", this._onLoad);\n\n\t\tthis._registry.off(\"error\", this._onError);\n\n\t\tthis._waitingAssets.forEach(function (id) {\n\t\t\tself._registry.off(\"add:\" + id, this._onAddAsset);\n\t\t});\n\n\t\tthis.off(\"progress\");\n\t\tthis.off(\"load\");\n\t}\n\n\tload(done, scope) {\n\t\tvar i = 0;\n\t\tvar l = this._assets.length;\n\t\tvar asset;\n\t\tthis._count = 0;\n\t\tthis._failed = [];\n\t\tthis._callback = done;\n\t\tthis._scope = scope;\n\n\t\tthis._registry.on(\"load\", this._onLoad, this);\n\n\t\tthis._registry.on(\"error\", this._onError, this);\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tasset = this._assets[i];\n\n\t\t\tif (!asset.loading && !asset.loaded) {\n\t\t\t\tthis._registry.load(asset);\n\n\t\t\t\tthis._total++;\n\t\t\t}\n\t\t}\n\t}\n\n\tready(done, scope) {\n\t\tscope = scope || this;\n\n\t\tif (this._loaded) {\n\t\t\tdone.call(scope, this._assets);\n\t\t} else {\n\t\t\tthis.once(\"load\", function (assets) {\n\t\t\t\tdone.call(scope, assets);\n\t\t\t});\n\t\t}\n\t}\n\n\t_loadingComplete() {\n\t\tthis._loaded = true;\n\n\t\tthis._registry.off(\"load\", this._onLoad, this);\n\n\t\tthis._registry.off(\"error\", this._onError, this);\n\n\t\tif (this._failed && this._failed.length) {\n\t\t\tif (this._callback) {\n\t\t\t\tthis._callback.call(this._scope, \"Failed to load some assets\", this._failed);\n\t\t\t}\n\n\t\t\tthis.fire(\"error\", this._failed);\n\t\t} else {\n\t\t\tif (this._callback) {\n\t\t\t\tthis._callback.call(this._scope);\n\t\t\t}\n\n\t\t\tthis.fire(\"load\", this._assets);\n\t\t}\n\t}\n\n\t_onLoad(asset) {\n\t\tvar self = this;\n\n\t\tif (this._assets.indexOf(asset) >= 0) {\n\t\t\tthis._count++;\n\t\t\tthis.fire(\"progress\", asset);\n\t\t}\n\n\t\tif (this._count === this._total) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tself._loadingComplete(self._failed);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onError(err, asset) {\n\t\tvar self = this;\n\n\t\tif (this._assets.indexOf(asset) >= 0) {\n\t\t\tthis._count++;\n\n\t\t\tthis._failed.push(asset);\n\t\t}\n\n\t\tif (this._count === this._total) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tself._loadingComplete(self._failed);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onAddAsset(asset) {\n\t\tvar index = this._waitingAssets.indexOf(asset);\n\n\t\tif (index >= 0) {\n\t\t\tthis._waitingAssets.splice(index, 1);\n\t\t}\n\n\t\tthis._assets.push(asset);\n\n\t\tvar i;\n\t\tvar l = this._assets.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tasset = this._assets[i];\n\n\t\t\tif (!asset.loading && !asset.loaded) {\n\t\t\t\tthis._registry.load(asset);\n\t\t\t}\n\t\t}\n\t}\n\n\t_waitForAsset(assetId) {\n\t\tthis._waitingAssets.push(assetId);\n\n\t\tthis._registry.once('add:' + assetId, this._onAddAsset, this);\n\t}\n\n}\n\nvar funcNameRegex = new RegExp('^\\\\s*function(?:\\\\s|\\\\s*\\\\/\\\\*.*\\\\*\\\\/\\\\s*)+([^\\\\(\\\\s\\\\/]*)\\\\s*');\n\nclass ScriptType extends EventHandler {\n\tconstructor(args) {\n\t\tsuper();\n\t\tthis.initScriptType(args);\n\t}\n\n\tinitScriptType(args) {\n\t\tvar script = this.constructor;\n\t\tthis.app = args.app;\n\t\tthis.entity = args.entity;\n\t\tthis._enabled = typeof args.enabled === 'boolean' ? args.enabled : true;\n\t\tthis._enabledOld = this.enabled;\n\t\tthis.__destroyed = false;\n\t\tthis.__attributes = {};\n\t\tthis.__attributesRaw = args.attributes || {};\n\t\tthis.__scriptType = script;\n\t\tthis.__executionOrder = -1;\n\t}\n\n\tstatic __getScriptName(constructorFn) {\n\t\tif (typeof constructorFn !== 'function') return undefined;\n\t\tif ('name' in Function.prototype) return constructorFn.name;\n\t\tif (constructorFn === Function || constructorFn === Function.prototype.constructor) return 'Function';\n\t\tvar match = (\"\" + constructorFn).match(funcNameRegex);\n\t\treturn match ? match[1] : undefined;\n\t}\n\n\tstatic get scriptName() {\n\t\treturn this.__name;\n\t}\n\n\tstatic get attributes() {\n\t\tif (!this.hasOwnProperty('__attributes')) this.__attributes = new ScriptAttributes(this);\n\t\treturn this.__attributes;\n\t}\n\n\t__initializeAttributes(force) {\n\t\tif (!force && !this.__attributesRaw) return;\n\n\t\tfor (var key in this.__scriptType.attributes.index) {\n\t\t\tif (this.__attributesRaw && this.__attributesRaw.hasOwnProperty(key)) {\n\t\t\t\tthis[key] = this.__attributesRaw[key];\n\t\t\t} else if (!this.__attributes.hasOwnProperty(key)) {\n\t\t\t\tif (this.__scriptType.attributes.index[key].hasOwnProperty('default')) {\n\t\t\t\t\tthis[key] = this.__scriptType.attributes.index[key].default;\n\t\t\t\t} else {\n\t\t\t\t\tthis[key] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.__attributesRaw = null;\n\t}\n\n\tstatic extend(methods) {\n\t\tfor (var key in methods) {\n\t\t\tif (!methods.hasOwnProperty(key)) continue;\n\t\t\tthis.prototype[key] = methods[key];\n\t\t}\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled && !this._destroyed && this.entity.script.enabled && this.entity.enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = !!value;\n\t\tif (this.enabled === this._enabledOld) return;\n\t\tthis._enabledOld = this.enabled;\n\t\tthis.fire(this.enabled ? 'enable' : 'disable');\n\t\tthis.fire('state', this.enabled);\n\n\t\tif (!this._initialized && this.enabled) {\n\t\t\tthis._initialized = true;\n\n\t\t\tthis.__initializeAttributes(true);\n\n\t\t\tif (this.initialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.initialize);\n\t\t}\n\n\t\tif (this._initialized && !this._postInitialized && this.enabled && !this.entity.script._beingEnabled) {\n\t\t\tthis._postInitialized = true;\n\t\t\tif (this.postInitialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.postInitialize);\n\t\t}\n\t}\n\n}\n\nScriptType.__name = null;\n\nconst reservedScriptNames = new Set(['system', 'entity', 'create', 'destroy', 'swap', 'move', 'scripts', '_scripts', '_scriptsIndex', '_scriptsData', 'enabled', '_oldState', 'onEnable', 'onDisable', 'onPostStateChange', '_onSetEnabled', '_checkState', '_onBeforeRemove', '_onInitializeAttributes', '_onInitialize', '_onPostInitialize', '_onUpdate', '_onPostUpdate', '_callbacks', 'has', 'get', 'on', 'off', 'fire', 'once', 'hasEvent']);\n\nfunction createScript(name, app) {\n\tif (script.legacy) {\n\t\treturn null;\n\t}\n\n\tif (reservedScriptNames.has(name)) throw new Error('script name: \\'' + name + '\\' is reserved, please change script name');\n\n\tvar scriptType = function scriptType(args) {\n\t\tEventHandler.prototype.initEventHandler.call(this);\n\t\tScriptType.prototype.initScriptType.call(this, args);\n\t};\n\n\tscriptType.prototype = Object.create(ScriptType.prototype);\n\tscriptType.prototype.constructor = scriptType;\n\tscriptType.extend = ScriptType.extend;\n\tscriptType.attributes = new ScriptAttributes(scriptType);\n\tregisterScript(scriptType, name, app);\n\treturn scriptType;\n}\n\nvar reservedAttributes = {};\nScriptAttributes.reservedNames.forEach((value, value2, set) => {\n\treservedAttributes[value] = 1;\n});\ncreateScript.reservedAttributes = reservedAttributes;\n\nfunction registerScript(script, name, app) {\n\tif (script.legacy) {\n\t\treturn;\n\t}\n\n\tif (typeof script !== 'function') throw new Error('script class: \\'' + script + '\\' must be a constructor function (i.e. class).');\n\tif (!(script.prototype instanceof ScriptType)) throw new Error('script class: \\'' + ScriptType.__getScriptName(script) + '\\' does not extend pc.ScriptType.');\n\tname = name || script.__name || ScriptType.__getScriptName(script);\n\tif (reservedScriptNames.has(name)) throw new Error('script name: \\'' + name + '\\' is reserved, please change script name');\n\tscript.__name = name;\n\tvar registry = app ? app.scripts : Application.getApplication().scripts;\n\tregistry.add(script);\n\n\tScriptHandler._push(script);\n}\n\nconst ACTION_MOUSE = 'mouse';\nconst ACTION_KEYBOARD = 'keyboard';\nconst ACTION_GAMEPAD = 'gamepad';\nconst AXIS_MOUSE_X = 'mousex';\nconst AXIS_MOUSE_Y = 'mousey';\nconst AXIS_PAD_L_X = 'padlx';\nconst AXIS_PAD_L_Y = 'padly';\nconst AXIS_PAD_R_X = 'padrx';\nconst AXIS_PAD_R_Y = 'padry';\nconst AXIS_KEY = 'key';\nconst EVENT_KEYDOWN = 'keydown';\nconst EVENT_KEYUP = 'keyup';\nconst EVENT_MOUSEDOWN = \"mousedown\";\nconst EVENT_MOUSEMOVE = \"mousemove\";\nconst EVENT_MOUSEUP = \"mouseup\";\nconst EVENT_MOUSEWHEEL = \"mousewheel\";\nconst EVENT_TOUCHSTART = 'touchstart';\nconst EVENT_TOUCHEND = 'touchend';\nconst EVENT_TOUCHMOVE = 'touchmove';\nconst EVENT_TOUCHCANCEL = 'touchcancel';\nconst EVENT_SELECT = 'select';\nconst EVENT_SELECTSTART = 'selectstart';\nconst EVENT_SELECTEND = 'selectend';\nconst KEY_BACKSPACE = 8;\nconst KEY_TAB = 9;\nconst KEY_RETURN = 13;\nconst KEY_ENTER = 13;\nconst KEY_SHIFT = 16;\nconst KEY_CONTROL = 17;\nconst KEY_ALT = 18;\nconst KEY_PAUSE = 19;\nconst KEY_CAPS_LOCK = 20;\nconst KEY_ESCAPE = 27;\nconst KEY_SPACE = 32;\nconst KEY_PAGE_UP = 33;\nconst KEY_PAGE_DOWN = 34;\nconst KEY_END = 35;\nconst KEY_HOME = 36;\nconst KEY_LEFT = 37;\nconst KEY_UP = 38;\nconst KEY_RIGHT = 39;\nconst KEY_DOWN = 40;\nconst KEY_PRINT_SCREEN = 44;\nconst KEY_INSERT = 45;\nconst KEY_DELETE = 46;\nconst KEY_0 = 48;\nconst KEY_1 = 49;\nconst KEY_2 = 50;\nconst KEY_3 = 51;\nconst KEY_4 = 52;\nconst KEY_5 = 53;\nconst KEY_6 = 54;\nconst KEY_7 = 55;\nconst KEY_8 = 56;\nconst KEY_9 = 57;\nconst KEY_SEMICOLON = 59;\nconst KEY_EQUAL = 61;\nconst KEY_A = 65;\nconst KEY_B = 66;\nconst KEY_C = 67;\nconst KEY_D = 68;\nconst KEY_E = 69;\nconst KEY_F = 70;\nconst KEY_G = 71;\nconst KEY_H = 72;\nconst KEY_I = 73;\nconst KEY_J = 74;\nconst KEY_K = 75;\nconst KEY_L = 76;\nconst KEY_M = 77;\nconst KEY_N = 78;\nconst KEY_O = 79;\nconst KEY_P = 80;\nconst KEY_Q = 81;\nconst KEY_R = 82;\nconst KEY_S = 83;\nconst KEY_T = 84;\nconst KEY_U = 85;\nconst KEY_V = 86;\nconst KEY_W = 87;\nconst KEY_X = 88;\nconst KEY_Y = 89;\nconst KEY_Z = 90;\nconst KEY_WINDOWS = 91;\nconst KEY_CONTEXT_MENU = 93;\nconst KEY_NUMPAD_0 = 96;\nconst KEY_NUMPAD_1 = 97;\nconst KEY_NUMPAD_2 = 98;\nconst KEY_NUMPAD_3 = 99;\nconst KEY_NUMPAD_4 = 100;\nconst KEY_NUMPAD_5 = 101;\nconst KEY_NUMPAD_6 = 102;\nconst KEY_NUMPAD_7 = 103;\nconst KEY_NUMPAD_8 = 104;\nconst KEY_NUMPAD_9 = 105;\nconst KEY_MULTIPLY = 106;\nconst KEY_ADD = 107;\nconst KEY_SEPARATOR = 108;\nconst KEY_SUBTRACT = 109;\nconst KEY_DECIMAL = 110;\nconst KEY_DIVIDE = 111;\nconst KEY_F1 = 112;\nconst KEY_F2 = 113;\nconst KEY_F3 = 114;\nconst KEY_F4 = 115;\nconst KEY_F5 = 116;\nconst KEY_F6 = 117;\nconst KEY_F7 = 118;\nconst KEY_F8 = 119;\nconst KEY_F9 = 120;\nconst KEY_F10 = 121;\nconst KEY_F11 = 122;\nconst KEY_F12 = 123;\nconst KEY_COMMA = 188;\nconst KEY_PERIOD = 190;\nconst KEY_SLASH = 191;\nconst KEY_OPEN_BRACKET = 219;\nconst KEY_BACK_SLASH = 220;\nconst KEY_CLOSE_BRACKET = 221;\nconst KEY_META = 224;\nconst MOUSEBUTTON_NONE = -1;\nconst MOUSEBUTTON_LEFT = 0;\nconst MOUSEBUTTON_MIDDLE = 1;\nconst MOUSEBUTTON_RIGHT = 2;\nconst PAD_1 = 0;\nconst PAD_2 = 1;\nconst PAD_3 = 2;\nconst PAD_4 = 3;\nconst PAD_FACE_1 = 0;\nconst PAD_FACE_2 = 1;\nconst PAD_FACE_3 = 2;\nconst PAD_FACE_4 = 3;\nconst PAD_L_SHOULDER_1 = 4;\nconst PAD_R_SHOULDER_1 = 5;\nconst PAD_L_SHOULDER_2 = 6;\nconst PAD_R_SHOULDER_2 = 7;\nconst PAD_SELECT = 8;\nconst PAD_START = 9;\nconst PAD_L_STICK_BUTTON = 10;\nconst PAD_R_STICK_BUTTON = 11;\nconst PAD_UP = 12;\nconst PAD_DOWN = 13;\nconst PAD_LEFT = 14;\nconst PAD_RIGHT = 15;\nconst PAD_VENDOR = 16;\nconst PAD_L_STICK_X = 0;\nconst PAD_L_STICK_Y = 1;\nconst PAD_R_STICK_X = 2;\nconst PAD_R_STICK_Y = 3;\n\nclass KeyboardEvent {\n\tconstructor(keyboard, event) {\n\t\tif (event) {\n\t\t\tthis.key = event.keyCode;\n\t\t\tthis.element = event.target;\n\t\t\tthis.event = event;\n\t\t} else {\n\t\t\tthis.key = null;\n\t\t\tthis.element = null;\n\t\t\tthis.event = null;\n\t\t}\n\t}\n\n}\n\nconst _keyboardEvent = new KeyboardEvent();\n\nfunction makeKeyboardEvent(event) {\n\t_keyboardEvent.key = event.keyCode;\n\t_keyboardEvent.element = event.target;\n\t_keyboardEvent.event = event;\n\treturn _keyboardEvent;\n}\n\nfunction toKeyCode(s) {\n\tif (typeof s === \"string\") {\n\t\treturn s.toUpperCase().charCodeAt(0);\n\t}\n\n\treturn s;\n}\n\nconst _keyCodeToKeyIdentifier = {\n\t'9': 'Tab',\n\t'13': 'Enter',\n\t'16': 'Shift',\n\t'17': 'Control',\n\t'18': 'Alt',\n\t'27': 'Escape',\n\t'37': 'Left',\n\t'38': 'Up',\n\t'39': 'Right',\n\t'40': 'Down',\n\t'46': 'Delete',\n\t'91': 'Win'\n};\n\nclass Keyboard extends EventHandler {\n\tconstructor(element, options = {}) {\n\t\tsuper();\n\t\tthis._element = null;\n\t\tthis._keyDownHandler = this._handleKeyDown.bind(this);\n\t\tthis._keyUpHandler = this._handleKeyUp.bind(this);\n\t\tthis._keyPressHandler = this._handleKeyPress.bind(this);\n\t\tthis._visibilityChangeHandler = this._handleVisibilityChange.bind(this);\n\t\tthis._windowBlurHandler = this._handleWindowBlur.bind(this);\n\t\tthis._keymap = {};\n\t\tthis._lastmap = {};\n\n\t\tif (element) {\n\t\t\tthis.attach(element);\n\t\t}\n\n\t\tthis.preventDefault = options.preventDefault || false;\n\t\tthis.stopPropagation = options.stopPropagation || false;\n\t}\n\n\tattach(element) {\n\t\tif (this._element) {\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._element = element;\n\n\t\tthis._element.addEventListener(\"keydown\", this._keyDownHandler, false);\n\n\t\tthis._element.addEventListener(\"keypress\", this._keyPressHandler, false);\n\n\t\tthis._element.addEventListener(\"keyup\", this._keyUpHandler, false);\n\n\t\tdocument.addEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\twindow.addEventListener('blur', this._windowBlurHandler, false);\n\t}\n\n\tdetach() {\n\t\tthis._element.removeEventListener(\"keydown\", this._keyDownHandler);\n\n\t\tthis._element.removeEventListener(\"keypress\", this._keyPressHandler);\n\n\t\tthis._element.removeEventListener(\"keyup\", this._keyUpHandler);\n\n\t\tthis._element = null;\n\t\tdocument.removeEventListener('visibilitychange', this._visibilityChangeHandler, false);\n\t\twindow.removeEventListener('blur', this._windowBlurHandler, false);\n\t}\n\n\ttoKeyIdentifier(keyCode) {\n\t\tkeyCode = toKeyCode(keyCode);\n\t\tvar count;\n\t\tvar hex;\n\t\tvar length;\n\n\t\tvar id = _keyCodeToKeyIdentifier[keyCode.toString()];\n\n\t\tif (id) {\n\t\t\treturn id;\n\t\t}\n\n\t\thex = keyCode.toString(16).toUpperCase();\n\t\tlength = hex.length;\n\n\t\tfor (count = 0; count < 4 - length; count++) {\n\t\t\thex = '0' + hex;\n\t\t}\n\n\t\treturn 'U+' + hex;\n\t}\n\n\t_handleKeyDown(event) {\n\t\tvar code = event.keyCode || event.charCode;\n\t\tif (code === undefined) return;\n\t\tvar id = this.toKeyIdentifier(code);\n\t\tthis._keymap[id] = true;\n\t\tthis.fire(\"keydown\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleKeyUp(event) {\n\t\tvar code = event.keyCode || event.charCode;\n\t\tif (code === undefined) return;\n\t\tvar id = this.toKeyIdentifier(code);\n\t\tdelete this._keymap[id];\n\t\tthis.fire(\"keyup\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleKeyPress(event) {\n\t\tthis.fire(\"keypress\", makeKeyboardEvent(event));\n\n\t\tif (this.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (this.stopPropagation) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t_handleVisibilityChange() {\n\t\tif (document.visibilityState === 'hidden') {\n\t\t\tthis._handleWindowBlur();\n\t\t}\n\t}\n\n\t_handleWindowBlur() {\n\t\tthis._keymap = {};\n\t\tthis._lastmap = {};\n\t}\n\n\tupdate() {\n\t\tvar prop;\n\n\t\tfor (prop in this._lastmap) {\n\t\t\tdelete this._lastmap[prop];\n\t\t}\n\n\t\tfor (prop in this._keymap) {\n\t\t\tif (this._keymap.hasOwnProperty(prop)) {\n\t\t\t\tthis._lastmap[prop] = this._keymap[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\tisPressed(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!this._keymap[id];\n\t}\n\n\twasPressed(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!this._keymap[id] && !!!this._lastmap[id];\n\t}\n\n\twasReleased(key) {\n\t\tvar keyCode = toKeyCode(key);\n\t\tvar id = this.toKeyIdentifier(keyCode);\n\t\treturn !!!this._keymap[id] && !!this._lastmap[id];\n\t}\n\n}\n\nfunction isMousePointerLocked() {\n\treturn !!(document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement);\n}\n\nclass MouseEvent {\n\tconstructor(mouse, event) {\n\t\tvar coords = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tif (event) {\n\t\t\tif (event instanceof MouseEvent) {\n\t\t\t\tthrow Error(\"Expected MouseEvent\");\n\t\t\t}\n\n\t\t\tcoords = mouse._getTargetCoords(event);\n\t\t} else {\n\t\t\tevent = {};\n\t\t}\n\n\t\tif (coords) {\n\t\t\tthis.x = coords.x;\n\t\t\tthis.y = coords.y;\n\t\t} else if (isMousePointerLocked()) {\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.wheelDelta = 0;\n\n\t\tif (event.type === 'wheel') {\n\t\t\tif (event.deltaY > 0) {\n\t\t\t\tthis.wheelDelta = 1;\n\t\t\t} else if (event.deltaY < 0) {\n\t\t\t\tthis.wheelDelta = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (isMousePointerLocked()) {\n\t\t\tthis.dx = event.movementX || event.webkitMovementX || event.mozMovementX || 0;\n\t\t\tthis.dy = event.movementY || event.webkitMovementY || event.mozMovementY || 0;\n\t\t} else {\n\t\t\tthis.dx = this.x - mouse._lastX;\n\t\t\tthis.dy = this.y - mouse._lastY;\n\t\t}\n\n\t\tif (event.type === 'mousedown' || event.type === 'mouseup') {\n\t\t\tthis.button = event.button;\n\t\t} else {\n\t\t\tthis.button = MOUSEBUTTON_NONE;\n\t\t}\n\n\t\tthis.buttons = mouse._buttons.slice(0);\n\t\tthis.element = event.target;\n\t\tthis.ctrlKey = event.ctrlKey || false;\n\t\tthis.altKey = event.altKey || false;\n\t\tthis.shiftKey = event.shiftKey || false;\n\t\tthis.metaKey = event.metaKey || false;\n\t\tthis.event = event;\n\t}\n\n}\n\nclass Mouse extends EventHandler {\n\tconstructor(element) {\n\t\tsuper();\n\t\tthis._lastX = 0;\n\t\tthis._lastY = 0;\n\t\tthis._buttons = [false, false, false];\n\t\tthis._lastbuttons = [false, false, false];\n\t\tthis._upHandler = this._handleUp.bind(this);\n\t\tthis._downHandler = this._handleDown.bind(this);\n\t\tthis._moveHandler = this._handleMove.bind(this);\n\t\tthis._wheelHandler = this._handleWheel.bind(this);\n\n\t\tthis._contextMenuHandler = function (event) {\n\t\t\tevent.preventDefault();\n\t\t};\n\n\t\tthis._target = null;\n\t\tthis._attached = false;\n\t\tthis.attach(element);\n\t}\n\n\tstatic isPointerLocked() {\n\t\treturn isMousePointerLocked();\n\t}\n\n\tattach(element) {\n\t\tthis._target = element;\n\t\tif (this._attached) return;\n\t\tthis._attached = true;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: false\n\t\t} : false;\n\t\twindow.addEventListener(\"mouseup\", this._upHandler, opts);\n\t\twindow.addEventListener(\"mousedown\", this._downHandler, opts);\n\t\twindow.addEventListener(\"mousemove\", this._moveHandler, opts);\n\t\twindow.addEventListener(\"wheel\", this._wheelHandler, opts);\n\t}\n\n\tdetach() {\n\t\tif (!this._attached) return;\n\t\tthis._attached = false;\n\t\tthis._target = null;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: false\n\t\t} : false;\n\t\twindow.removeEventListener(\"mouseup\", this._upHandler, opts);\n\t\twindow.removeEventListener(\"mousedown\", this._downHandler, opts);\n\t\twindow.removeEventListener(\"mousemove\", this._moveHandler, opts);\n\t\twindow.removeEventListener(\"wheel\", this._wheelHandler, opts);\n\t}\n\n\tdisableContextMenu() {\n\t\tif (!this._target) return;\n\n\t\tthis._target.addEventListener(\"contextmenu\", this._contextMenuHandler);\n\t}\n\n\tenableContextMenu() {\n\t\tif (!this._target) return;\n\n\t\tthis._target.removeEventListener(\"contextmenu\", this._contextMenuHandler);\n\t}\n\n\tenablePointerLock(success, error) {\n\t\tif (!document.body.requestPointerLock) {\n\t\t\tif (error) error();\n\t\t\treturn;\n\t\t}\n\n\t\tvar s = function s() {\n\t\t\tsuccess();\n\t\t\tdocument.removeEventListener('pointerlockchange', s);\n\t\t};\n\n\t\tvar e = function e() {\n\t\t\terror();\n\t\t\tdocument.removeEventListener('pointerlockerror', e);\n\t\t};\n\n\t\tif (success) {\n\t\t\tdocument.addEventListener('pointerlockchange', s, false);\n\t\t}\n\n\t\tif (error) {\n\t\t\tdocument.addEventListener('pointerlockerror', e, false);\n\t\t}\n\n\t\tdocument.body.requestPointerLock();\n\t}\n\n\tdisablePointerLock(success) {\n\t\tif (!document.exitPointerLock) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar s = function s() {\n\t\t\tsuccess();\n\t\t\tdocument.removeEventListener('pointerlockchange', s);\n\t\t};\n\n\t\tif (success) {\n\t\t\tdocument.addEventListener('pointerlockchange', s, false);\n\t\t}\n\n\t\tdocument.exitPointerLock();\n\t}\n\n\tupdate() {\n\t\tthis._lastbuttons[0] = this._buttons[0];\n\t\tthis._lastbuttons[1] = this._buttons[1];\n\t\tthis._lastbuttons[2] = this._buttons[2];\n\t}\n\n\tisPressed(button) {\n\t\treturn this._buttons[button];\n\t}\n\n\twasPressed(button) {\n\t\treturn this._buttons[button] && !this._lastbuttons[button];\n\t}\n\n\twasReleased(button) {\n\t\treturn !this._buttons[button] && this._lastbuttons[button];\n\t}\n\n\t_handleUp(event) {\n\t\tthis._buttons[event.button] = false;\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEUP, e);\n\t}\n\n\t_handleDown(event) {\n\t\tthis._buttons[event.button] = true;\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEDOWN, e);\n\t}\n\n\t_handleMove(event) {\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEMOVE, e);\n\t\tthis._lastX = e.x;\n\t\tthis._lastY = e.y;\n\t}\n\n\t_handleWheel(event) {\n\t\tvar e = new MouseEvent(this, event);\n\t\tif (!e.event) return;\n\t\tthis.fire(EVENT_MOUSEWHEEL, e);\n\t}\n\n\t_getTargetCoords(event) {\n\t\tvar rect = this._target.getBoundingClientRect();\n\n\t\tvar left = Math.floor(rect.left);\n\t\tvar top = Math.floor(rect.top);\n\n\t\tif (event.clientX < left || event.clientX >= left + this._target.clientWidth || event.clientY < top || event.clientY >= top + this._target.clientHeight) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tx: event.clientX - left,\n\t\t\ty: event.clientY - top\n\t\t};\n\t}\n\n}\n\nclass Controller {\n\tconstructor(element, options = {}) {\n\t\tthis._keyboard = options.keyboard || null;\n\t\tthis._mouse = options.mouse || null;\n\t\tthis._gamepads = options.gamepads || null;\n\t\tthis._element = null;\n\t\tthis._actions = {};\n\t\tthis._axes = {};\n\t\tthis._axesValues = {};\n\n\t\tif (element) {\n\t\t\tthis.attach(element);\n\t\t}\n\t}\n\n\tattach(element) {\n\t\tthis._element = element;\n\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.attach(element);\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.attach(element);\n\t\t}\n\t}\n\n\tdetach() {\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.detach();\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.detach();\n\t\t}\n\n\t\tthis._element = null;\n\t}\n\n\tdisableContextMenu() {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tthis._mouse.disableContextMenu();\n\t}\n\n\tenableContextMenu() {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tthis._mouse.enableContextMenu();\n\t}\n\n\tupdate(dt) {\n\t\tif (this._keyboard) {\n\t\t\tthis._keyboard.update(dt);\n\t\t}\n\n\t\tif (this._mouse) {\n\t\t\tthis._mouse.update(dt);\n\t\t}\n\n\t\tif (this._gamepads) {\n\t\t\tthis._gamepads.update(dt);\n\t\t}\n\n\t\tthis._axesValues = {};\n\n\t\tfor (var key in this._axes) {\n\t\t\tthis._axesValues[key] = [];\n\t\t}\n\t}\n\n\tregisterKeys(action, keys) {\n\t\tif (!this._keyboard) {\n\t\t\tthis._enableKeyboard();\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthrow new Error(\"Action: \" + action + \" already registered\");\n\t\t}\n\n\t\tif (keys === undefined) {\n\t\t\tthrow new Error(\"Invalid button\");\n\t\t}\n\n\t\tif (!keys.length) {\n\t\t\tkeys = [keys];\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_KEYBOARD,\n\t\t\t\tkeys: keys\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_KEYBOARD,\n\t\t\t\tkeys: keys\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterMouse(action, button) {\n\t\tif (!this._mouse) {\n\t\t\tthis._enableMouse();\n\t\t}\n\n\t\tif (button === undefined) {\n\t\t\tthrow new Error('Invalid button');\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_MOUSE,\n\t\t\t\tbutton: button\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_MOUSE,\n\t\t\t\tbutton: -button\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterPadButton(action, pad, button) {\n\t\tif (button === undefined) {\n\t\t\tthrow new Error('Invalid button');\n\t\t}\n\n\t\tif (this._actions[action]) {\n\t\t\tthis._actions[action].push({\n\t\t\t\ttype: ACTION_GAMEPAD,\n\t\t\t\tbutton: button,\n\t\t\t\tpad: pad\n\t\t\t});\n\t\t} else {\n\t\t\tthis._actions[action] = [{\n\t\t\t\ttype: ACTION_GAMEPAD,\n\t\t\t\tbutton: button,\n\t\t\t\tpad: pad\n\t\t\t}];\n\t\t}\n\t}\n\n\tregisterAxis(options) {\n\t\tvar name = options.name;\n\n\t\tif (!this._axes[name]) {\n\t\t\tthis._axes[name] = [];\n\t\t}\n\n\t\tvar i = this._axes[name].push(name);\n\n\t\toptions = options || {};\n\t\toptions.pad = options.pad || PAD_1;\n\n\t\tvar bind = function bind(controller, source, value, key) {\n\t\t\tswitch (source) {\n\t\t\t\tcase 'mousex':\n\t\t\t\t\tcontroller._mouse.on(EVENT_MOUSEMOVE, function (e) {\n\t\t\t\t\t\tcontroller._axesValues[name][i] = e.dx / 10;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mousey':\n\t\t\t\t\tcontroller._mouse.on(EVENT_MOUSEMOVE, function (e) {\n\t\t\t\t\t\tcontroller._axesValues[name][i] = e.dy / 10;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'key':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._keyboard.isPressed(key) ? value : 0;\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padrx':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_R_STICK_X);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padry':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_R_STICK_Y);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padlx':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_L_STICK_X);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'padly':\n\t\t\t\t\tcontroller._axes[name].push(function () {\n\t\t\t\t\t\treturn controller._gamepads.getAxis(options.pad, PAD_L_STICK_Y);\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unknown axis');\n\t\t\t}\n\t\t};\n\n\t\tbind(this, options.positive, 1, options.positiveKey);\n\n\t\tif (options.negativeKey || options.negative !== options.positive) {\n\t\t\tbind(this, options.negative, -1, options.negativeKey);\n\t\t}\n\t}\n\n\tisPressed(actionName) {\n\t\tif (!this._actions[actionName]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar action;\n\t\tvar index = 0;\n\t\tvar length = this._actions[actionName].length;\n\n\t\tfor (index = 0; index < length; ++index) {\n\t\t\taction = this._actions[actionName][index];\n\n\t\t\tswitch (action.type) {\n\t\t\t\tcase ACTION_KEYBOARD:\n\t\t\t\t\tif (this._keyboard) {\n\t\t\t\t\t\tvar i,\n\t\t\t\t\t\t\t\tlen = action.keys.length;\n\n\t\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\t\tif (this._keyboard.isPressed(action.keys[i])) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_MOUSE:\n\t\t\t\t\tif (this._mouse && this._mouse.isPressed(action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_GAMEPAD:\n\t\t\t\t\tif (this._gamepads && this._gamepads.isPressed(action.pad, action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\twasPressed(actionName) {\n\t\tif (!this._actions[actionName]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = 0;\n\t\tvar length = this._actions[actionName].length;\n\n\t\tfor (index = 0; index < length; ++index) {\n\t\t\tvar action = this._actions[actionName][index];\n\n\t\t\tswitch (action.type) {\n\t\t\t\tcase ACTION_KEYBOARD:\n\t\t\t\t\tif (this._keyboard) {\n\t\t\t\t\t\tvar i,\n\t\t\t\t\t\t\t\tlen = action.keys.length;\n\n\t\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\t\tif (this._keyboard.wasPressed(action.keys[i])) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_MOUSE:\n\t\t\t\t\tif (this._mouse && this._mouse.wasPressed(action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ACTION_GAMEPAD:\n\t\t\t\t\tif (this._gamepads && this._gamepads.wasPressed(action.pad, action.button)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetAxis(name) {\n\t\tvar value = 0;\n\n\t\tif (this._axes[name]) {\n\t\t\tvar i,\n\t\t\t\t\tlen = this._axes[name].length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (type$1(this._axes[name][i]) === 'function') {\n\t\t\t\t\tvar v = this._axes[name][i]();\n\n\t\t\t\t\tif (Math.abs(v) > Math.abs(value)) {\n\t\t\t\t\t\tvalue = v;\n\t\t\t\t\t}\n\t\t\t\t} else if (this._axesValues[name]) {\n\t\t\t\t\tif (Math.abs(this._axesValues[name][i]) > Math.abs(value)) {\n\t\t\t\t\t\tvalue = this._axesValues[name][i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t_enableMouse() {\n\t\tthis._mouse = new Mouse();\n\n\t\tif (!this._element) {\n\t\t\tthrow new Error(\"Controller must be attached to an Element\");\n\t\t}\n\n\t\tthis._mouse.attach(this._element);\n\t}\n\n\t_enableKeyboard() {\n\t\tthis._keyboard = new Keyboard();\n\n\t\tif (!this._element) {\n\t\t\tthrow new Error(\"Controller must be attached to an Element\");\n\t\t}\n\n\t\tthis._keyboard.attach(this._element);\n\t}\n\n}\n\nvar targetX, targetY;\nvar vecA = new Vec3();\nvar vecB = new Vec3();\nvar rayA = new Ray();\nvar rayB = new Ray();\nvar rayC = new Ray();\nrayA.end = new Vec3();\nrayB.end = new Vec3();\nrayC.end = new Vec3();\n\nvar _pq = new Vec3();\n\nvar _pa = new Vec3();\n\nvar _pb = new Vec3();\n\nvar _pc = new Vec3();\n\nvar _pd = new Vec3();\n\nvar _m = new Vec3();\n\nvar _sct = new Vec3();\n\nvar _accumulatedScale = new Vec2();\n\nvar _paddingTop = new Vec3();\n\nvar _paddingBottom = new Vec3();\n\nvar _paddingLeft = new Vec3();\n\nvar _paddingRight = new Vec3();\n\nvar _cornerBottomLeft = new Vec3();\n\nvar _cornerBottomRight = new Vec3();\n\nvar _cornerTopRight = new Vec3();\n\nvar _cornerTopLeft = new Vec3();\n\nvar ZERO_VEC4 = new Vec4();\n\nfunction scalarTriple(p1, p2, p3) {\n\treturn _sct.cross(p1, p2).dot(p3);\n}\n\nfunction intersectLineQuad(p, q, corners) {\n\t_pq.sub2(q, p);\n\n\t_pa.sub2(corners[0], p);\n\n\t_pb.sub2(corners[1], p);\n\n\t_pc.sub2(corners[2], p);\n\n\t_m.cross(_pc, _pq);\n\n\tvar v = _pa.dot(_m);\n\n\tif (v >= 0) {\n\t\tif (-_pb.dot(_m) < 0) return false;\n\t\tif (scalarTriple(_pq, _pb, _pa) < 0) return false;\n\t} else {\n\t\t_pd.sub2(corners[3], p);\n\n\t\tif (_pd.dot(_m) < 0) return false;\n\t\tif (scalarTriple(_pq, _pa, _pd) < 0) return false;\n\t}\n\n\tif (_pq.sub2(corners[0], corners[2]).lengthSq() < 0.0001 * 0.0001) return false;\n\tif (_pq.sub2(corners[1], corners[3]).lengthSq() < 0.0001 * 0.0001) return false;\n\treturn true;\n}\n\nclass ElementInputEvent {\n\tconstructor(event, element, camera) {\n\t\tthis.event = event;\n\t\tthis.element = element;\n\t\tthis.camera = camera;\n\t\tthis._stopPropagation = false;\n\t}\n\n\tstopPropagation() {\n\t\tthis._stopPropagation = true;\n\n\t\tif (this.event) {\n\t\t\tthis.event.stopImmediatePropagation();\n\t\t\tthis.event.stopPropagation();\n\t\t}\n\t}\n\n}\n\nclass ElementMouseEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, x, y, lastX, lastY) {\n\t\tsuper(event, element, camera);\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.ctrlKey = event.ctrlKey || false;\n\t\tthis.altKey = event.altKey || false;\n\t\tthis.shiftKey = event.shiftKey || false;\n\t\tthis.metaKey = event.metaKey || false;\n\t\tthis.button = event.button;\n\n\t\tif (Mouse.isPointerLocked()) {\n\t\t\tthis.dx = event.movementX || event.webkitMovementX || event.mozMovementX || 0;\n\t\t\tthis.dy = event.movementY || event.webkitMovementY || event.mozMovementY || 0;\n\t\t} else {\n\t\t\tthis.dx = x - lastX;\n\t\t\tthis.dy = y - lastY;\n\t\t}\n\n\t\tthis.wheelDelta = 0;\n\n\t\tif (event.type === 'wheel') {\n\t\t\tif (event.deltaY > 0) {\n\t\t\t\tthis.wheelDelta = 1;\n\t\t\t} else if (event.deltaY < 0) {\n\t\t\t\tthis.wheelDelta = -1;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nclass ElementTouchEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, x, y, touch) {\n\t\tsuper(event, element, camera);\n\t\tthis.touches = event.touches;\n\t\tthis.changedTouches = event.changedTouches;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.touch = touch;\n\t}\n\n}\n\nclass ElementSelectEvent extends ElementInputEvent {\n\tconstructor(event, element, camera, inputSource) {\n\t\tsuper(event, element, camera);\n\t\tthis.inputSource = inputSource;\n\t}\n\n}\n\nclass ElementInput {\n\tconstructor(domElement, options) {\n\t\tthis._app = null;\n\t\tthis._attached = false;\n\t\tthis._target = null;\n\t\tthis._enabled = true;\n\t\tthis._lastX = 0;\n\t\tthis._lastY = 0;\n\t\tthis._upHandler = this._handleUp.bind(this);\n\t\tthis._downHandler = this._handleDown.bind(this);\n\t\tthis._moveHandler = this._handleMove.bind(this);\n\t\tthis._wheelHandler = this._handleWheel.bind(this);\n\t\tthis._touchstartHandler = this._handleTouchStart.bind(this);\n\t\tthis._touchendHandler = this._handleTouchEnd.bind(this);\n\t\tthis._touchcancelHandler = this._touchendHandler;\n\t\tthis._touchmoveHandler = this._handleTouchMove.bind(this);\n\t\tthis._sortHandler = this._sortElements.bind(this);\n\t\tthis._elements = [];\n\t\tthis._hoveredElement = null;\n\t\tthis._pressedElement = null;\n\t\tthis._touchedElements = {};\n\t\tthis._touchesForWhichTouchLeaveHasFired = {};\n\t\tthis._selectedElements = {};\n\t\tthis._selectedPressedElements = {};\n\t\tthis._useMouse = !options || options.useMouse !== false;\n\t\tthis._useTouch = !options || options.useTouch !== false;\n\t\tthis._useXr = !options || options.useXr !== false;\n\t\tthis._selectEventsAttached = false;\n\t\tif (platform.touch) this._clickedEntities = {};\n\t\tthis.attach(domElement);\n\t}\n\n\tattach(domElement) {\n\t\tif (this._attached) {\n\t\t\tthis._attached = false;\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._target = domElement;\n\t\tthis._attached = true;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: true\n\t\t} : false;\n\n\t\tif (this._useMouse) {\n\t\t\twindow.addEventListener('mouseup', this._upHandler, opts);\n\t\t\twindow.addEventListener('mousedown', this._downHandler, opts);\n\t\t\twindow.addEventListener('mousemove', this._moveHandler, opts);\n\t\t\twindow.addEventListener('wheel', this._wheelHandler, opts);\n\t\t}\n\n\t\tif (this._useTouch && platform.touch) {\n\t\t\tthis._target.addEventListener('touchstart', this._touchstartHandler, opts);\n\n\t\t\tthis._target.addEventListener('touchend', this._touchendHandler, false);\n\n\t\t\tthis._target.addEventListener('touchmove', this._touchmoveHandler, false);\n\n\t\t\tthis._target.addEventListener('touchcancel', this._touchcancelHandler, false);\n\t\t}\n\n\t\tthis.attachSelectEvents();\n\t}\n\n\tattachSelectEvents() {\n\t\tif (!this._selectEventsAttached && this._useXr && this.app && this.app.xr && this.app.xr.supported) {\n\t\t\tif (!this._clickedEntities) this._clickedEntities = {};\n\t\t\tthis._selectEventsAttached = true;\n\t\t\tthis.app.xr.on('start', this._onXrStart, this);\n\t\t}\n\t}\n\n\tdetach() {\n\t\tif (!this._attached) return;\n\t\tthis._attached = false;\n\t\tvar opts = platform.passiveEvents ? {\n\t\t\tpassive: true\n\t\t} : false;\n\n\t\tif (this._useMouse) {\n\t\t\twindow.removeEventListener('mouseup', this._upHandler, opts);\n\t\t\twindow.removeEventListener('mousedown', this._downHandler, opts);\n\t\t\twindow.removeEventListener('mousemove', this._moveHandler, opts);\n\t\t\twindow.removeEventListener('wheel', this._wheelHandler, opts);\n\t\t}\n\n\t\tif (this._useTouch) {\n\t\t\tthis._target.removeEventListener('touchstart', this._touchstartHandler, opts);\n\n\t\t\tthis._target.removeEventListener('touchend', this._touchendHandler, false);\n\n\t\t\tthis._target.removeEventListener('touchmove', this._touchmoveHandler, false);\n\n\t\t\tthis._target.removeEventListener('touchcancel', this._touchcancelHandler, false);\n\t\t}\n\n\t\tif (this._selectEventsAttached) {\n\t\t\tthis._selectEventsAttached = false;\n\t\t\tthis.app.xr.off('start', this._onXrStart, this);\n\t\t\tthis.app.xr.off('end', this._onXrEnd, this);\n\t\t\tthis.app.xr.off('update', this._onXrUpdate, this);\n\t\t\tthis.app.xr.input.off('selectstart', this._onSelectStart, this);\n\t\t\tthis.app.xr.input.off('selectend', this._onSelectEnd, this);\n\t\t\tthis.app.xr.input.off('remove', this._onXrInputRemove, this);\n\t\t}\n\n\t\tthis._target = null;\n\t}\n\n\taddElement(element) {\n\t\tif (this._elements.indexOf(element) === -1) this._elements.push(element);\n\t}\n\n\tremoveElement(element) {\n\t\tvar idx = this._elements.indexOf(element);\n\n\t\tif (idx !== -1) this._elements.splice(idx, 1);\n\t}\n\n\t_handleUp(event) {\n\t\tif (!this._enabled) return;\n\t\tif (Mouse.isPointerLocked()) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mouseup', event);\n\t}\n\n\t_handleDown(event) {\n\t\tif (!this._enabled) return;\n\t\tif (Mouse.isPointerLocked()) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousedown', event);\n\t}\n\n\t_handleMove(event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousemove', event);\n\n\t\tthis._lastX = targetX;\n\t\tthis._lastY = targetY;\n\t}\n\n\t_handleWheel(event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._calcMouseCoords(event);\n\n\t\tif (targetX === null) return;\n\n\t\tthis._onElementMouseEvent('mousewheel', event);\n\t}\n\n\t_determineTouchedElements(event) {\n\t\tvar touchedElements = {};\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar i, j, len;\n\n\t\tfor (i = cameras.length - 1; i >= 0; i--) {\n\t\t\tvar camera = cameras[i];\n\t\t\tvar done = 0;\n\n\t\t\tfor (j = 0, len = event.changedTouches.length; j < len; j++) {\n\t\t\t\tif (touchedElements[event.changedTouches[j].identifier]) {\n\t\t\t\t\tdone++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar coords = this._calcTouchCoords(event.changedTouches[j]);\n\n\t\t\t\tvar element = this._getTargetElement(camera, coords.x, coords.y);\n\n\t\t\t\tif (element) {\n\t\t\t\t\tdone++;\n\t\t\t\t\ttouchedElements[event.changedTouches[j].identifier] = {\n\t\t\t\t\t\telement: element,\n\t\t\t\t\t\tcamera: camera,\n\t\t\t\t\t\tx: coords.x,\n\t\t\t\t\t\ty: coords.y\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (done === len) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn touchedElements;\n\t}\n\n\t_handleTouchStart(event) {\n\t\tif (!this._enabled) return;\n\n\t\tvar newTouchedElements = this._determineTouchedElements(event);\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar newTouchInfo = newTouchedElements[touch.identifier];\n\t\t\tvar oldTouchInfo = this._touchedElements[touch.identifier];\n\n\t\t\tif (newTouchInfo && (!oldTouchInfo || newTouchInfo.element !== oldTouchInfo.element)) {\n\t\t\t\tthis._fireEvent(event.type, new ElementTouchEvent(event, newTouchInfo.element, newTouchInfo.camera, newTouchInfo.x, newTouchInfo.y, touch));\n\n\t\t\t\tthis._touchesForWhichTouchLeaveHasFired[touch.identifier] = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (var touchId in newTouchedElements) {\n\t\t\tthis._touchedElements[touchId] = newTouchedElements[touchId];\n\t\t}\n\t}\n\n\t_handleTouchEnd(event) {\n\t\tif (!this._enabled) return;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\n\t\tfor (var key in this._clickedEntities) {\n\t\t\tdelete this._clickedEntities[key];\n\t\t}\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar touchInfo = this._touchedElements[touch.identifier];\n\t\t\tif (!touchInfo) continue;\n\t\t\tvar element = touchInfo.element;\n\t\t\tvar camera = touchInfo.camera;\n\t\t\tvar x = touchInfo.x;\n\t\t\tvar y = touchInfo.y;\n\t\t\tdelete this._touchedElements[touch.identifier];\n\t\t\tdelete this._touchesForWhichTouchLeaveHasFired[touch.identifier];\n\n\t\t\tthis._fireEvent(event.type, new ElementTouchEvent(event, element, camera, x, y, touch));\n\n\t\t\tif (event.touches.length === 0) {\n\t\t\t\tvar coords = this._calcTouchCoords(touch);\n\n\t\t\t\tfor (var c = cameras.length - 1; c >= 0; c--) {\n\t\t\t\t\tvar hovered = this._getTargetElement(cameras[c], coords.x, coords.y);\n\n\t\t\t\t\tif (hovered === element) {\n\t\t\t\t\t\tif (!this._clickedEntities[element.entity.getGuid()]) {\n\t\t\t\t\t\t\tthis._fireEvent('click', new ElementTouchEvent(event, element, camera, x, y, touch));\n\n\t\t\t\t\t\t\tthis._clickedEntities[element.entity.getGuid()] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleTouchMove(event) {\n\t\tevent.preventDefault();\n\t\tif (!this._enabled) return;\n\n\t\tvar newTouchedElements = this._determineTouchedElements(event);\n\n\t\tfor (var i = 0, len = event.changedTouches.length; i < len; i++) {\n\t\t\tvar touch = event.changedTouches[i];\n\t\t\tvar newTouchInfo = newTouchedElements[touch.identifier];\n\t\t\tvar oldTouchInfo = this._touchedElements[touch.identifier];\n\n\t\t\tif (oldTouchInfo) {\n\t\t\t\tvar coords = this._calcTouchCoords(touch);\n\n\t\t\t\tif ((!newTouchInfo || newTouchInfo.element !== oldTouchInfo.element) && !this._touchesForWhichTouchLeaveHasFired[touch.identifier]) {\n\t\t\t\t\tthis._fireEvent('touchleave', new ElementTouchEvent(event, oldTouchInfo.element, oldTouchInfo.camera, coords.x, coords.y, touch));\n\n\t\t\t\t\tthis._touchesForWhichTouchLeaveHasFired[touch.identifier] = true;\n\t\t\t\t}\n\n\t\t\t\tthis._fireEvent('touchmove', new ElementTouchEvent(event, oldTouchInfo.element, oldTouchInfo.camera, coords.x, coords.y, touch));\n\t\t\t}\n\t\t}\n\t}\n\n\t_onElementMouseEvent(eventType, event) {\n\t\tvar element;\n\t\tvar hovered = this._hoveredElement;\n\t\tthis._hoveredElement = null;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar camera;\n\n\t\tfor (var i = cameras.length - 1; i >= 0; i--) {\n\t\t\tcamera = cameras[i];\n\t\t\telement = this._getTargetElement(camera, targetX, targetY);\n\t\t\tif (element) break;\n\t\t}\n\n\t\tif (element) {\n\t\t\tthis._fireEvent(eventType, new ElementMouseEvent(event, element, camera, targetX, targetY, this._lastX, this._lastY));\n\n\t\t\tthis._hoveredElement = element;\n\n\t\t\tif (eventType === 'mousedown') {\n\t\t\t\tthis._pressedElement = element;\n\t\t\t}\n\t\t}\n\n\t\tif (hovered !== this._hoveredElement) {\n\t\t\tif (hovered) {\n\t\t\t\tthis._fireEvent('mouseleave', new ElementMouseEvent(event, hovered, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t}\n\n\t\t\tif (this._hoveredElement) {\n\t\t\t\tthis._fireEvent('mouseenter', new ElementMouseEvent(event, this._hoveredElement, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t}\n\t\t}\n\n\t\tif (eventType === 'mouseup' && this._pressedElement) {\n\t\t\tif (this._pressedElement === this._hoveredElement) {\n\t\t\t\tthis._pressedElement = null;\n\n\t\t\t\tif (!this._clickedEntities || !this._clickedEntities[this._hoveredElement.entity.getGuid()]) {\n\t\t\t\t\tthis._fireEvent('click', new ElementMouseEvent(event, this._hoveredElement, camera, targetX, targetY, this._lastX, this._lastY));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._pressedElement = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t_onXrStart() {\n\t\tthis.app.xr.on('end', this._onXrEnd, this);\n\t\tthis.app.xr.on('update', this._onXrUpdate, this);\n\t\tthis.app.xr.input.on('selectstart', this._onSelectStart, this);\n\t\tthis.app.xr.input.on('selectend', this._onSelectEnd, this);\n\t\tthis.app.xr.input.on('remove', this._onXrInputRemove, this);\n\t}\n\n\t_onXrEnd() {\n\t\tthis.app.xr.off('update', this._onXrUpdate, this);\n\t\tthis.app.xr.input.off('selectstart', this._onSelectStart, this);\n\t\tthis.app.xr.input.off('selectend', this._onSelectEnd, this);\n\t\tthis.app.xr.input.off('remove', this._onXrInputRemove, this);\n\t}\n\n\t_onXrUpdate() {\n\t\tif (!this._enabled) return;\n\t\tvar inputSources = this.app.xr.input.inputSources;\n\n\t\tfor (var i = 0; i < inputSources.length; i++) {\n\t\t\tthis._onElementSelectEvent('selectmove', inputSources[i], null);\n\t\t}\n\t}\n\n\t_onXrInputRemove(inputSource) {\n\t\tvar hovered = this._selectedElements[inputSource.id];\n\n\t\tif (hovered) {\n\t\t\tinputSource._elementEntity = null;\n\n\t\t\tthis._fireEvent('selectleave', new ElementSelectEvent(null, hovered, null, inputSource));\n\t\t}\n\n\t\tdelete this._selectedElements[inputSource.id];\n\t\tdelete this._selectedPressedElements[inputSource.id];\n\t}\n\n\t_onSelectStart(inputSource, event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._onElementSelectEvent('selectstart', inputSource, event);\n\t}\n\n\t_onSelectEnd(inputSource, event) {\n\t\tif (!this._enabled) return;\n\n\t\tthis._onElementSelectEvent('selectend', inputSource, event);\n\t}\n\n\t_onElementSelectEvent(eventType, inputSource, event) {\n\t\tvar element;\n\t\tvar hoveredBefore = this._selectedElements[inputSource.id];\n\t\tvar hoveredNow;\n\t\tvar cameras = this.app.systems.camera.cameras;\n\t\tvar camera;\n\n\t\tif (inputSource.elementInput) {\n\t\t\trayC.set(inputSource.getOrigin(), inputSource.getDirection());\n\n\t\t\tfor (var i = cameras.length - 1; i >= 0; i--) {\n\t\t\t\tcamera = cameras[i];\n\t\t\t\telement = this._getTargetElementByRay(rayC, camera);\n\t\t\t\tif (element) break;\n\t\t\t}\n\t\t}\n\n\t\tinputSource._elementEntity = element || null;\n\n\t\tif (element) {\n\t\t\tthis._selectedElements[inputSource.id] = element;\n\t\t\thoveredNow = element;\n\t\t} else {\n\t\t\tdelete this._selectedElements[inputSource.id];\n\t\t}\n\n\t\tif (hoveredBefore !== hoveredNow) {\n\t\t\tif (hoveredBefore) this._fireEvent('selectleave', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\t\t\tif (hoveredNow) this._fireEvent('selectenter', new ElementSelectEvent(event, hoveredNow, camera, inputSource));\n\t\t}\n\n\t\tif (eventType === 'selectstart') {\n\t\t\tthis._selectedPressedElements[inputSource.id] = hoveredNow;\n\t\t\tif (hoveredNow) this._fireEvent('selectstart', new ElementSelectEvent(event, hoveredNow, camera, inputSource));\n\t\t}\n\n\t\tvar pressed = this._selectedPressedElements[inputSource.id];\n\n\t\tif (!inputSource.elementInput && pressed) {\n\t\t\tdelete this._selectedPressedElements[inputSource.id];\n\t\t\tif (hoveredBefore) this._fireEvent('selectend', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\t\t}\n\n\t\tif (eventType === 'selectend' && inputSource.elementInput) {\n\t\t\tdelete this._selectedPressedElements[inputSource.id];\n\t\t\tif (hoveredBefore) this._fireEvent('selectend', new ElementSelectEvent(event, hoveredBefore, camera, inputSource));\n\n\t\t\tif (pressed && pressed === hoveredBefore) {\n\t\t\t\tthis._fireEvent('click', new ElementSelectEvent(event, pressed, camera, inputSource));\n\t\t\t}\n\t\t}\n\t}\n\n\t_fireEvent(name, evt) {\n\t\tvar element = evt.element;\n\n\t\twhile (true) {\n\t\t\telement.fire(name, evt);\n\t\t\tif (evt._stopPropagation) break;\n\t\t\tif (!element.entity.parent) break;\n\t\t\telement = element.entity.parent.element;\n\t\t\tif (!element) break;\n\t\t}\n\t}\n\n\t_calcMouseCoords(event) {\n\t\tvar rect = this._target.getBoundingClientRect();\n\n\t\tvar left = Math.floor(rect.left);\n\t\tvar top = Math.floor(rect.top);\n\n\t\tif (event.clientX < left || event.clientX >= left + this._target.clientWidth || event.clientY < top || event.clientY >= top + this._target.clientHeight) {\n\t\t\ttargetX = null;\n\t\t\ttargetY = null;\n\t\t} else {\n\t\t\ttargetX = event.clientX - left;\n\t\t\ttargetY = event.clientY - top;\n\t\t}\n\t}\n\n\t_calcTouchCoords(touch) {\n\t\tvar totalOffsetX = 0;\n\t\tvar totalOffsetY = 0;\n\t\tvar target = touch.target;\n\n\t\twhile (!(target instanceof HTMLElement)) {\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\tvar currentElement = target;\n\n\t\tdo {\n\t\t\ttotalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n\t\t\ttotalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n\t\t\tcurrentElement = currentElement.offsetParent;\n\t\t} while (currentElement);\n\n\t\treturn {\n\t\t\tx: touch.pageX - totalOffsetX,\n\t\t\ty: touch.pageY - totalOffsetY\n\t\t};\n\t}\n\n\t_sortElements(a, b) {\n\t\tvar layerOrder = this.app.scene.layers.sortTransparentLayers(a.layers, b.layers);\n\t\tif (layerOrder !== 0) return layerOrder;\n\t\tif (a.screen && !b.screen) return -1;\n\t\tif (!a.screen && b.screen) return 1;\n\t\tif (!a.screen && !b.screen) return 0;\n\t\tif (a.screen.screen.screenSpace && !b.screen.screen.screenSpace) return -1;\n\t\tif (b.screen.screen.screenSpace && !a.screen.screen.screenSpace) return 1;\n\t\treturn b.drawOrder - a.drawOrder;\n\t}\n\n\t_getTargetElement(camera, x, y) {\n\t\tvar result = null;\n\n\t\tthis._elements.sort(this._sortHandler);\n\n\t\tvar rayScreen, ray3d;\n\n\t\tfor (var i = 0, len = this._elements.length; i < len; i++) {\n\t\t\tvar element = this._elements[i];\n\t\t\tvar screen = false;\n\t\t\tvar ray;\n\n\t\t\tif (element.screen && element.screen.screen.screenSpace) {\n\t\t\t\tif (rayScreen === undefined) {\n\t\t\t\t\trayScreen = rayA;\n\n\t\t\t\t\tif (this._calculateRayScreen(x, y, camera, rayScreen) === false) {\n\t\t\t\t\t\trayScreen = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tray = rayScreen;\n\t\t\t\tscreen = true;\n\t\t\t} else {\n\t\t\t\tif (ray3d === undefined) {\n\t\t\t\t\tray3d = rayB;\n\n\t\t\t\t\tif (this._calculateRay3d(x, y, camera, ray3d) === false) {\n\t\t\t\t\t\tray3d = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tray = ray3d;\n\t\t\t}\n\n\t\t\tif (ray && this._checkElement(ray, element, screen)) {\n\t\t\t\tresult = element;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_getTargetElementByRay(ray, camera) {\n\t\tvar result = null;\n\t\trayA.origin.copy(ray.origin);\n\t\trayA.direction.copy(ray.direction);\n\t\trayA.end.copy(rayA.direction).mulScalar(camera.farClip * 2).add(rayA.origin);\n\n\t\tthis._elements.sort(this._sortHandler);\n\n\t\tfor (var i = 0, len = this._elements.length; i < len; i++) {\n\t\t\tvar element = this._elements[i];\n\n\t\t\tif (!element.screen || !element.screen.screen.screenSpace) {\n\t\t\t\tif (this._checkElement(rayA, element, false)) {\n\t\t\t\t\tresult = element;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_buildHitCorners(element, screenOrWorldCorners, scaleX, scaleY) {\n\t\tvar hitCorners = screenOrWorldCorners;\n\t\tvar button = element.entity && element.entity.button;\n\n\t\tif (button) {\n\t\t\tvar hitPadding = element.entity.button.hitPadding || ZERO_VEC4;\n\n\t\t\t_paddingTop.copy(element.entity.up);\n\n\t\t\t_paddingBottom.copy(_paddingTop).mulScalar(-1);\n\n\t\t\t_paddingRight.copy(element.entity.right);\n\n\t\t\t_paddingLeft.copy(_paddingRight).mulScalar(-1);\n\n\t\t\t_paddingTop.mulScalar(hitPadding.w * scaleY);\n\n\t\t\t_paddingBottom.mulScalar(hitPadding.y * scaleY);\n\n\t\t\t_paddingRight.mulScalar(hitPadding.z * scaleX);\n\n\t\t\t_paddingLeft.mulScalar(hitPadding.x * scaleX);\n\n\t\t\t_cornerBottomLeft.copy(hitCorners[0]).add(_paddingBottom).add(_paddingLeft);\n\n\t\t\t_cornerBottomRight.copy(hitCorners[1]).add(_paddingBottom).add(_paddingRight);\n\n\t\t\t_cornerTopRight.copy(hitCorners[2]).add(_paddingTop).add(_paddingRight);\n\n\t\t\t_cornerTopLeft.copy(hitCorners[3]).add(_paddingTop).add(_paddingLeft);\n\n\t\t\thitCorners = [_cornerBottomLeft, _cornerBottomRight, _cornerTopRight, _cornerTopLeft];\n\t\t}\n\n\t\treturn hitCorners;\n\t}\n\n\t_calculateScaleToScreen(element) {\n\t\tvar current = element.entity;\n\t\tvar screenScale = element.screen.screen.scale;\n\n\t\t_accumulatedScale.set(screenScale, screenScale);\n\n\t\twhile (current && !current.screen) {\n\t\t\t_accumulatedScale.mul(current.getLocalScale());\n\n\t\t\tcurrent = current.parent;\n\t\t}\n\n\t\treturn _accumulatedScale;\n\t}\n\n\t_calculateRayScreen(x, y, camera, ray) {\n\t\tvar sw = this.app.graphicsDevice.width;\n\t\tvar sh = this.app.graphicsDevice.height;\n\t\tvar cameraWidth = camera.rect.z * sw;\n\t\tvar cameraHeight = camera.rect.w * sh;\n\t\tvar cameraLeft = camera.rect.x * sw;\n\t\tvar cameraRight = cameraLeft + cameraWidth;\n\t\tvar cameraBottom = (1 - camera.rect.y) * sh;\n\t\tvar cameraTop = cameraBottom - cameraHeight;\n\n\t\tvar _x = x * sw / this._target.clientWidth;\n\n\t\tvar _y = y * sh / this._target.clientHeight;\n\n\t\tif (_x >= cameraLeft && _x <= cameraRight && _y <= cameraBottom && _y >= cameraTop) {\n\t\t\t_x = sw * (_x - cameraLeft) / cameraWidth;\n\t\t\t_y = sh * (_y - cameraTop) / cameraHeight;\n\t\t\t_y = sh - _y;\n\t\t\tray.origin.set(_x, _y, 1);\n\t\t\tray.direction.set(0, 0, -1);\n\t\t\tray.end.copy(ray.direction).mulScalar(2).add(ray.origin);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_calculateRay3d(x, y, camera, ray) {\n\t\tvar sw = this._target.clientWidth;\n\t\tvar sh = this._target.clientHeight;\n\t\tvar cameraWidth = camera.rect.z * sw;\n\t\tvar cameraHeight = camera.rect.w * sh;\n\t\tvar cameraLeft = camera.rect.x * sw;\n\t\tvar cameraRight = cameraLeft + cameraWidth;\n\t\tvar cameraBottom = (1 - camera.rect.y) * sh;\n\t\tvar cameraTop = cameraBottom - cameraHeight;\n\t\tvar _x = x;\n\t\tvar _y = y;\n\n\t\tif (x >= cameraLeft && x <= cameraRight && y <= cameraBottom && _y >= cameraTop) {\n\t\t\t_x = sw * (_x - cameraLeft) / cameraWidth;\n\t\t\t_y = sh * (_y - cameraTop) / cameraHeight;\n\t\t\tcamera.screenToWorld(_x, _y, camera.nearClip, vecA);\n\t\t\tcamera.screenToWorld(_x, _y, camera.farClip, vecB);\n\t\t\tray.origin.copy(vecA);\n\t\t\tray.direction.set(0, 0, -1);\n\t\t\tray.end.copy(vecB);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_checkElement(ray, element, screen) {\n\t\tif (element.maskedBy) {\n\t\t\tvar result = this._checkElement(ray, element.maskedBy.element, screen);\n\n\t\t\tif (!result) return false;\n\t\t}\n\n\t\tvar scale;\n\n\t\tif (screen) {\n\t\t\tscale = this._calculateScaleToScreen(element);\n\t\t} else {\n\t\t\tscale = element.entity.getWorldTransform().getScale();\n\t\t}\n\n\t\tvar corners = this._buildHitCorners(element, screen ? element.screenCorners : element.worldCorners, scale.x, scale.y);\n\n\t\tif (intersectLineQuad(ray.origin, ray.end, corners)) return true;\n\t\treturn false;\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value) {\n\t\tthis._enabled = value;\n\t}\n\n\tget app() {\n\t\treturn this._app || getApplication();\n\t}\n\n\tset app(value) {\n\t\tthis._app = value;\n\t}\n\n}\n\nconst MAPS = {\n\tDEFAULT: {\n\t\tbuttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_3', 'PAD_FACE_4', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],\n\t\taxes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']\n\t},\n\tPS3: {\n\t\tbuttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_4', 'PAD_FACE_3', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],\n\t\taxes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']\n\t}\n};\nconst PRODUCT_CODES = {\n\t'Product: 0268': 'PS3'\n};\n\nclass GamePads {\n\tconstructor() {\n\t\tthis.gamepadsSupported = !!navigator.getGamepads || !!navigator.webkitGetGamepads;\n\t\tthis.current = [];\n\t\tthis.previous = [];\n\t\tthis.deadZone = 0.25;\n\t}\n\n\tupdate() {\n\t\tvar i, j, l;\n\t\tvar buttons, buttonsLen;\n\n\t\tfor (i = 0, l = this.current.length; i < l; i++) {\n\t\t\tbuttons = this.current[i].pad.buttons;\n\t\t\tbuttonsLen = buttons.length;\n\n\t\t\tfor (j = 0; j < buttonsLen; j++) {\n\t\t\t\tif (this.previous[i] === undefined) {\n\t\t\t\t\tthis.previous[i] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.previous[i][j] = buttons[j].pressed;\n\t\t\t}\n\t\t}\n\n\t\tthis.poll(this.current);\n\t}\n\n\tpoll(pads = []) {\n\t\tif (pads.length > 0) {\n\t\t\tpads.length = 0;\n\t\t}\n\n\t\tif (this.gamepadsSupported) {\n\t\t\tvar padDevices = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads();\n\t\t\tvar i,\n\t\t\t\t\tlen = padDevices.length;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (padDevices[i]) {\n\t\t\t\t\tpads.push({\n\t\t\t\t\t\tmap: this.getMap(padDevices[i]),\n\t\t\t\t\t\tpad: padDevices[i]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn pads;\n\t}\n\n\tgetMap(pad) {\n\t\tfor (var code in PRODUCT_CODES) {\n\t\t\tif (pad.id.indexOf(code) >= 0) {\n\t\t\t\treturn MAPS[PRODUCT_CODES[code]];\n\t\t\t}\n\t\t}\n\n\t\treturn MAPS.DEFAULT;\n\t}\n\n\tisPressed(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\treturn this.current[index].pad.buttons[pc[key]].pressed;\n\t}\n\n\twasPressed(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\tvar i = pc[key];\n\t\treturn this.current[index].pad.buttons[i].pressed && !(this.previous[index] && this.previous[index][i]);\n\t}\n\n\twasReleased(index, button) {\n\t\tif (!this.current[index]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar key = this.current[index].map.buttons[button];\n\t\tvar i = pc[key];\n\t\treturn !this.current[index].pad.buttons[i].pressed && this.previous[index] && this.previous[index][i];\n\t}\n\n\tgetAxis(index, axes) {\n\t\tif (!this.current[index]) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar key = this.current[index].map.axes[axes];\n\t\tvar value = this.current[index].pad.axes[pc[key]];\n\n\t\tif (Math.abs(value) < this.deadZone) {\n\t\t\tvalue = 0;\n\t\t}\n\n\t\treturn value;\n\t}\n\n}\n\nfunction getTouchTargetCoords(touch) {\n\tvar totalOffsetX = 0;\n\tvar totalOffsetY = 0;\n\tvar target = touch.target;\n\n\twhile (!(target instanceof HTMLElement)) {\n\t\ttarget = target.parentNode;\n\t}\n\n\tvar currentElement = target;\n\n\tdo {\n\t\ttotalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n\t\ttotalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n\t\tcurrentElement = currentElement.offsetParent;\n\t} while (currentElement);\n\n\treturn {\n\t\tx: touch.pageX - totalOffsetX,\n\t\ty: touch.pageY - totalOffsetY\n\t};\n}\n\nclass Touch {\n\tconstructor(touch) {\n\t\tvar coords = getTouchTargetCoords(touch);\n\t\tthis.id = touch.identifier;\n\t\tthis.x = coords.x;\n\t\tthis.y = coords.y;\n\t\tthis.target = touch.target;\n\t\tthis.touch = touch;\n\t}\n\n}\n\nclass TouchEvent {\n\tconstructor(device, event) {\n\t\tthis.element = event.target;\n\t\tthis.event = event;\n\t\tthis.touches = [];\n\t\tthis.changedTouches = [];\n\n\t\tif (event) {\n\t\t\tvar i,\n\t\t\t\t\tl = event.touches.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tthis.touches.push(new Touch(event.touches[i]));\n\t\t\t}\n\n\t\t\tl = event.changedTouches.length;\n\n\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\tthis.changedTouches.push(new Touch(event.changedTouches[i]));\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTouchById(id, list) {\n\t\tvar i,\n\t\t\t\tl = list.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tif (list[i].id === id) {\n\t\t\t\treturn list[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n\nclass TouchDevice extends EventHandler {\n\tconstructor(element) {\n\t\tsuper();\n\t\tthis._element = null;\n\t\tthis._startHandler = this._handleTouchStart.bind(this);\n\t\tthis._endHandler = this._handleTouchEnd.bind(this);\n\t\tthis._moveHandler = this._handleTouchMove.bind(this);\n\t\tthis._cancelHandler = this._handleTouchCancel.bind(this);\n\t\tthis.attach(element);\n\t}\n\n\tattach(element) {\n\t\tif (this._element) {\n\t\t\tthis.detach();\n\t\t}\n\n\t\tthis._element = element;\n\n\t\tthis._element.addEventListener('touchstart', this._startHandler, false);\n\n\t\tthis._element.addEventListener('touchend', this._endHandler, false);\n\n\t\tthis._element.addEventListener('touchmove', this._moveHandler, false);\n\n\t\tthis._element.addEventListener('touchcancel', this._cancelHandler, false);\n\t}\n\n\tdetach() {\n\t\tif (this._element) {\n\t\t\tthis._element.removeEventListener('touchstart', this._startHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchend', this._endHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchmove', this._moveHandler, false);\n\n\t\t\tthis._element.removeEventListener('touchcancel', this._cancelHandler, false);\n\t\t}\n\n\t\tthis._element = null;\n\t}\n\n\t_handleTouchStart(e) {\n\t\tthis.fire('touchstart', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchEnd(e) {\n\t\tthis.fire('touchend', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchMove(e) {\n\t\te.preventDefault();\n\t\tthis.fire('touchmove', new TouchEvent(this, e));\n\t}\n\n\t_handleTouchCancel(e) {\n\t\tthis.fire('touchcancel', new TouchEvent(this, e));\n\t}\n\n}\n\nvar log = {\n\twrite: function (text) {\n\t\tconsole.log(text);\n\t},\n\topen: function () {\n\t\tlog.write(\"Powered by PlayCanvas \" + version + \" \" + revision);\n\t},\n\tinfo: function (text) {\n\t\tconsole.info(\"INFO:\t\t\" + text);\n\t},\n\tdebug: function (text) {\n\t\tconsole.debug(\"DEBUG:\t \" + text);\n\t},\n\terror: function (text) {\n\t\tconsole.error(\"ERROR:\t \" + text);\n\t},\n\twarning: function (text) {\n\t\tconsole.warn(\"WARNING: \" + text);\n\t},\n\talert: function (text) {\n\t\tlog.write(\"ALERT:\t \" + text);\n\t\talert(text);\n\t},\n\tassert: function (condition, text) {\n\t\tif (condition === false) {\n\t\t\tlog.write(\"ASSERT:\t\" + text);\n\t\t}\n\t}\n};\n\nstring.endsWith = function (s, subs) {\n\treturn s.endsWith(subs);\n};\n\nstring.startsWith = function (s, subs) {\n\treturn s.startsWith(subs);\n};\n\nvar time = {\n\tnow: now,\n\tTimer: Timer\n};\nObject.defineProperty(Color.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(4);\n\t\t}\n\n\t\tthis._data[0] = this.r;\n\t\tthis._data[1] = this.g;\n\t\tthis._data[2] = this.b;\n\t\tthis._data[3] = this.a;\n\t\treturn this._data;\n\t}\n});\nObject.defineProperty(Color.prototype, \"data3\", {\n\tget: function () {\n\t\tif (!this._data3) {\n\t\t\tthis._data3 = new Float32Array(3);\n\t\t}\n\n\t\tthis._data3[0] = this.r;\n\t\tthis._data3[1] = this.g;\n\t\tthis._data3[2] = this.b;\n\t\treturn this._data3;\n\t}\n});\nfunction inherits(Self, Super) {\n\tvar Temp = function Temp() {};\n\n\tvar Func = function Func(arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n\t\tSuper.call(this, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\t\tSelf.call(this, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8);\n\t};\n\n\tFunc._super = Super.prototype;\n\tTemp.prototype = Super.prototype;\n\tFunc.prototype = new Temp();\n\treturn Func;\n}\nfunction makeArray(arr) {\n\treturn Array.prototype.slice.call(arr);\n}\nmath.INV_LOG2 = Math.LOG2E;\nmath.intToBytes = math.intToBytes32;\nmath.bytesToInt = math.bytesToInt32;\nObject.defineProperty(Vec2.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(2);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\treturn this._data;\n\t}\n});\nVec2.prototype.scale = Vec2.prototype.mulScalar;\nObject.defineProperty(Vec3.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(3);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\tthis._data[2] = this.z;\n\t\treturn this._data;\n\t}\n});\nVec3.prototype.scale = Vec3.prototype.mulScalar;\nObject.defineProperty(Vec4.prototype, \"data\", {\n\tget: function () {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Float32Array(4);\n\t\t}\n\n\t\tthis._data[0] = this.x;\n\t\tthis._data[1] = this.y;\n\t\tthis._data[2] = this.z;\n\t\tthis._data[3] = this.w;\n\t\treturn this._data;\n\t}\n});\nVec4.prototype.scale = Vec4.prototype.mulScalar;\nvar shape = {\n\tAabb: BoundingBox,\n\tSphere: BoundingSphere,\n\tPlane: Plane\n};\nBoundingSphere.prototype.intersectRay = BoundingSphere.prototype.intersectsRay;\n\nFrustum.prototype.update = function (projectionMatrix, viewMatrix) {\n\tvar viewProj = new Mat4();\n\tviewProj.mul2(projectionMatrix, viewMatrix);\n\tthis.setFromMat4(viewProj);\n};\n\nvar ELEMENTTYPE_INT8 = TYPE_INT8;\nvar ELEMENTTYPE_UINT8 = TYPE_UINT8;\nvar ELEMENTTYPE_INT16 = TYPE_INT16;\nvar ELEMENTTYPE_UINT16 = TYPE_UINT16;\nvar ELEMENTTYPE_INT32 = TYPE_INT32;\nvar ELEMENTTYPE_UINT32 = TYPE_UINT32;\nvar ELEMENTTYPE_FLOAT32 = TYPE_FLOAT32;\nfunction UnsupportedBrowserError(message) {\n\tthis.name = \"UnsupportedBrowserError\";\n\tthis.message = message || \"\";\n}\nUnsupportedBrowserError.prototype = Error.prototype;\nfunction ContextCreationError(message) {\n\tthis.name = \"ContextCreationError\";\n\tthis.message = message || \"\";\n}\nContextCreationError.prototype = Error.prototype;\nvar gfx = {\n\tADDRESS_CLAMP_TO_EDGE: ADDRESS_CLAMP_TO_EDGE,\n\tADDRESS_MIRRORED_REPEAT: ADDRESS_MIRRORED_REPEAT,\n\tADDRESS_REPEAT: ADDRESS_REPEAT,\n\tBLENDMODE_ZERO: BLENDMODE_ZERO,\n\tBLENDMODE_ONE: BLENDMODE_ONE,\n\tBLENDMODE_SRC_COLOR: BLENDMODE_SRC_COLOR,\n\tBLENDMODE_ONE_MINUS_SRC_COLOR: BLENDMODE_ONE_MINUS_SRC_COLOR,\n\tBLENDMODE_DST_COLOR: BLENDMODE_DST_COLOR,\n\tBLENDMODE_ONE_MINUS_DST_COLOR: BLENDMODE_ONE_MINUS_DST_COLOR,\n\tBLENDMODE_SRC_ALPHA: BLENDMODE_SRC_ALPHA,\n\tBLENDMODE_SRC_ALPHA_SATURATE: BLENDMODE_SRC_ALPHA_SATURATE,\n\tBLENDMODE_ONE_MINUS_SRC_ALPHA: BLENDMODE_ONE_MINUS_SRC_ALPHA,\n\tBLENDMODE_DST_ALPHA: BLENDMODE_DST_ALPHA,\n\tBLENDMODE_ONE_MINUS_DST_ALPHA: BLENDMODE_ONE_MINUS_DST_ALPHA,\n\tBUFFER_STATIC: BUFFER_STATIC,\n\tBUFFER_DYNAMIC: BUFFER_DYNAMIC,\n\tBUFFER_STREAM: BUFFER_STREAM,\n\tCULLFACE_NONE: CULLFACE_NONE,\n\tCULLFACE_BACK: CULLFACE_BACK,\n\tCULLFACE_FRONT: CULLFACE_FRONT,\n\tCULLFACE_FRONTANDBACK: CULLFACE_FRONTANDBACK,\n\tELEMENTTYPE_INT8: TYPE_INT8,\n\tELEMENTTYPE_UINT8: TYPE_UINT8,\n\tELEMENTTYPE_INT16: TYPE_INT16,\n\tELEMENTTYPE_UINT16: TYPE_UINT16,\n\tELEMENTTYPE_INT32: TYPE_INT32,\n\tELEMENTTYPE_UINT32: TYPE_UINT32,\n\tELEMENTTYPE_FLOAT32: TYPE_FLOAT32,\n\tFILTER_NEAREST: FILTER_NEAREST,\n\tFILTER_LINEAR: FILTER_LINEAR,\n\tFILTER_NEAREST_MIPMAP_NEAREST: FILTER_NEAREST_MIPMAP_NEAREST,\n\tFILTER_NEAREST_MIPMAP_LINEAR: FILTER_NEAREST_MIPMAP_LINEAR,\n\tFILTER_LINEAR_MIPMAP_NEAREST: FILTER_LINEAR_MIPMAP_NEAREST,\n\tFILTER_LINEAR_MIPMAP_LINEAR: FILTER_LINEAR_MIPMAP_LINEAR,\n\tINDEXFORMAT_UINT8: INDEXFORMAT_UINT8,\n\tINDEXFORMAT_UINT16: INDEXFORMAT_UINT16,\n\tINDEXFORMAT_UINT32: INDEXFORMAT_UINT32,\n\tPIXELFORMAT_R5_G6_B5: PIXELFORMAT_R5_G6_B5,\n\tPIXELFORMAT_R8_G8_B8: PIXELFORMAT_R8_G8_B8,\n\tPIXELFORMAT_R8_G8_B8_A8: PIXELFORMAT_R8_G8_B8_A8,\n\tPRIMITIVE_POINTS: PRIMITIVE_POINTS,\n\tPRIMITIVE_LINES: PRIMITIVE_LINES,\n\tPRIMITIVE_LINELOOP: PRIMITIVE_LINELOOP,\n\tPRIMITIVE_LINESTRIP: PRIMITIVE_LINESTRIP,\n\tPRIMITIVE_TRIANGLES: PRIMITIVE_TRIANGLES,\n\tPRIMITIVE_TRISTRIP: PRIMITIVE_TRISTRIP,\n\tPRIMITIVE_TRIFAN: PRIMITIVE_TRIFAN,\n\tSEMANTIC_POSITION: SEMANTIC_POSITION,\n\tSEMANTIC_NORMAL: SEMANTIC_NORMAL,\n\tSEMANTIC_COLOR: SEMANTIC_COLOR,\n\tSEMANTIC_TEXCOORD: SEMANTIC_TEXCOORD,\n\tSEMANTIC_TEXCOORD0: SEMANTIC_TEXCOORD0,\n\tSEMANTIC_TEXCOORD1: SEMANTIC_TEXCOORD1,\n\tSEMANTIC_ATTR0: SEMANTIC_ATTR0,\n\tSEMANTIC_ATTR1: SEMANTIC_ATTR1,\n\tSEMANTIC_ATTR2: SEMANTIC_ATTR2,\n\tSEMANTIC_ATTR3: SEMANTIC_ATTR3,\n\tTEXTURELOCK_READ: TEXTURELOCK_READ,\n\tTEXTURELOCK_WRITE: TEXTURELOCK_WRITE,\n\tdrawQuadWithShader: drawQuadWithShader,\n\tprogramlib: programlib,\n\tshaderChunks: shaderChunks,\n\tContextCreationError: ContextCreationError,\n\tDevice: GraphicsDevice,\n\tIndexBuffer: IndexBuffer,\n\tProgramLibrary: ProgramLibrary,\n\tRenderTarget: RenderTarget,\n\tScopeId: ScopeId,\n\tShader: Shader,\n\tShaderInput: ShaderInput,\n\tTexture: Texture,\n\tUnsupportedBrowserError: UnsupportedBrowserError,\n\tVertexBuffer: VertexBuffer,\n\tVertexFormat: VertexFormat,\n\tVertexIterator: VertexIterator\n};\nvar posteffect = {\n\tcreateFullscreenQuad: createFullscreenQuad,\n\tdrawFullscreenQuad: drawFullscreenQuad,\n\tPostEffect: PostEffect$1,\n\tPostEffectQueue: PostEffectQueue\n};\nObject.defineProperty(shaderChunks, \"transformSkinnedVS\", {\n\tget: function () {\n\t\treturn \"#define SKIN\\n\" + shaderChunks.transformVS;\n\t}\n});\nObject.defineProperties(Texture.prototype, {\n\trgbm: {\n\t\tget: function () {\n\t\t\treturn this.type === TEXTURETYPE_RGBM;\n\t\t},\n\t\tset: function (rgbm) {\n\t\t\tthis.type = rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;\n\t\t}\n\t},\n\tswizzleGGGR: {\n\t\tget: function () {\n\t\t\treturn this.type === TEXTURETYPE_SWIZZLEGGGR;\n\t\t},\n\t\tset: function (swizzleGGGR) {\n\t\t\tthis.type = swizzleGGGR ? TEXTURETYPE_SWIZZLEGGGR : TEXTURETYPE_DEFAULT;\n\t\t}\n\t}\n});\nvar PhongMaterial = StandardMaterial;\nvar scene = {\n\tpartitionSkin: partitionSkin,\n\tprocedural: {\n\t\tcalculateTangents: calculateTangents,\n\t\tcreateMesh: createMesh$1,\n\t\tcreateTorus: createTorus,\n\t\tcreateCylinder: createCylinder,\n\t\tcreateCapsule: createCapsule,\n\t\tcreateCone: createCone,\n\t\tcreateSphere: createSphere,\n\t\tcreatePlane: createPlane,\n\t\tcreateBox: createBox\n\t},\n\tBasicMaterial: BasicMaterial,\n\tCommand: Command,\n\tDepthMaterial: DepthMaterial,\n\tForwardRenderer: ForwardRenderer,\n\tGraphNode: GraphNode,\n\tMaterial: Material,\n\tMesh: Mesh,\n\tMeshInstance: MeshInstance,\n\tModel: Model,\n\tParticleEmitter: ParticleEmitter,\n\tPhongMaterial: StandardMaterial,\n\tPicker: Picker,\n\tProjection: {\n\t\tORTHOGRAPHIC: PROJECTION_ORTHOGRAPHIC,\n\t\tPERSPECTIVE: PROJECTION_PERSPECTIVE\n\t},\n\tScene: Scene,\n\tSkin: Skin,\n\tSkinInstance: SkinInstance\n};\nObject.defineProperty(Batch.prototype, 'model', {\n\tget: function () {\n\t\treturn null;\n\t}\n});\n\nMorph.prototype.getTarget = function (index) {\n\treturn this.targets[index];\n};\n\nGraphNode.prototype._dirtify = function (local) {\n\tif (local) this._dirtifyLocal();else this._dirtifyWorld();\n};\n\nGraphNode.prototype.addLabel = function (label) {\n\tthis._labels[label] = true;\n};\n\nGraphNode.prototype.getLabels = function () {\n\treturn Object.keys(this._labels);\n};\n\nGraphNode.prototype.hasLabel = function (label) {\n\treturn !!this._labels[label];\n};\n\nGraphNode.prototype.removeLabel = function (label) {\n\tdelete this._labels[label];\n};\n\nGraphNode.prototype.findByLabel = function (label, results) {\n\tvar i,\n\t\t\tlength = this._children.length;\n\tresults = results || [];\n\n\tif (this.hasLabel(label)) {\n\t\tresults.push(this);\n\t}\n\n\tfor (i = 0; i < length; ++i) {\n\t\tresults = this._children[i].findByLabel(label, results);\n\t}\n\n\treturn results;\n};\n\nGraphNode.prototype.getChildren = function () {\n\treturn this.children;\n};\n\nGraphNode.prototype.getName = function () {\n\treturn this.name;\n};\n\nGraphNode.prototype.getPath = function () {\n\treturn this.path;\n};\n\nGraphNode.prototype.getRoot = function () {\n\treturn this.root;\n};\n\nGraphNode.prototype.getParent = function () {\n\treturn this.parent;\n};\n\nGraphNode.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nMaterial.prototype.getName = function () {\n\treturn this.name;\n};\n\nMaterial.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nMaterial.prototype.getShader = function () {\n\treturn this.shader;\n};\n\nMaterial.prototype.setShader = function (shader) {\n\tthis.shader = shader;\n};\n\nvar anim = {\n\tAnimation: Animation,\n\tKey: Key,\n\tNode: Node,\n\tSkeleton: Skeleton\n};\n\nAnimation.prototype.getDuration = function () {\n\treturn this.duration;\n};\n\nAnimation.prototype.getName = function () {\n\treturn this.name;\n};\n\nAnimation.prototype.getNodes = function () {\n\treturn this.nodes;\n};\n\nAnimation.prototype.setDuration = function (duration) {\n\tthis.duration = duration;\n};\n\nAnimation.prototype.setName = function (name) {\n\tthis.name = name;\n};\n\nSkeleton.prototype.getAnimation = function () {\n\treturn this.animation;\n};\n\nSkeleton.prototype.getCurrentTime = function () {\n\treturn this.currentTime;\n};\n\nSkeleton.prototype.getLooping = function () {\n\treturn this.looping;\n};\n\nSkeleton.prototype.getNumNodes = function () {\n\treturn this.numNodes;\n};\n\nSkeleton.prototype.setAnimation = function (animation) {\n\tthis.animation = animation;\n};\n\nSkeleton.prototype.setCurrentTime = function (time) {\n\tthis.currentTime = time;\n};\n\nSkeleton.prototype.setLooping = function (looping) {\n\tthis.looping = looping;\n};\n\nvar audio = {\n\tAudioManager: SoundManager,\n\tChannel: Channel,\n\tChannel3d: Channel3d,\n\tListener: Listener,\n\tSound: Sound\n};\n\nSoundManager.prototype.getListener = function () {\n\treturn this.listener;\n};\n\nSoundManager.prototype.getVolume = function () {\n\treturn this.volume;\n};\n\nSoundManager.prototype.setVolume = function (volume) {\n\tthis.volume = volume;\n};\n\nvar asset = {\n\tASSET_ANIMATION: 'animation',\n\tASSET_AUDIO: 'audio',\n\tASSET_IMAGE: 'image',\n\tASSET_JSON: 'json',\n\tASSET_MODEL: 'model',\n\tASSET_MATERIAL: 'material',\n\tASSET_TEXT: 'text',\n\tASSET_TEXTURE: 'texture',\n\tASSET_CUBEMAP: 'cubemap',\n\tASSET_SCRIPT: 'script'\n};\n\nAssetRegistry.prototype.getAssetById = function (id) {\n\treturn this.get(id);\n};\n\nObject.defineProperty(XrInputSource.prototype, 'ray', {\n\tget: function () {\n\t\treturn this._rayLocal;\n\t}\n});\nObject.defineProperty(XrInputSource.prototype, 'position', {\n\tget: function () {\n\t\treturn this._localPosition;\n\t}\n});\nObject.defineProperty(XrInputSource.prototype, 'rotation', {\n\tget: function () {\n\t\treturn this._localRotation;\n\t}\n});\nvar input = {\n\tgetTouchTargetCoords: getTouchTargetCoords,\n\tController: Controller,\n\tGamePads: GamePads,\n\tKeyboard: Keyboard,\n\tKeyboardEvent: KeyboardEvent,\n\tMouse: Mouse,\n\tMouseEvent: MouseEvent,\n\tTouch: Touch,\n\tTouchDevice: TouchDevice,\n\tTouchEvent: TouchEvent\n};\nObject.defineProperty(ElementInput.prototype, 'wheel', {\n\tget: function () {\n\t\treturn this.wheelDelta * -2;\n\t}\n});\nObject.defineProperty(MouseEvent.prototype, 'wheel', {\n\tget: function () {\n\t\treturn this.wheelDelta * -2;\n\t}\n});\nvar RIGIDBODY_TYPE_STATIC = BODYTYPE_STATIC;\nvar RIGIDBODY_TYPE_DYNAMIC = BODYTYPE_DYNAMIC;\nvar RIGIDBODY_TYPE_KINEMATIC = BODYTYPE_KINEMATIC;\nvar RIGIDBODY_CF_STATIC_OBJECT = BODYFLAG_STATIC_OBJECT;\nvar RIGIDBODY_CF_KINEMATIC_OBJECT = BODYFLAG_KINEMATIC_OBJECT;\nvar RIGIDBODY_CF_NORESPONSE_OBJECT = BODYFLAG_NORESPONSE_OBJECT;\nvar RIGIDBODY_ACTIVE_TAG = BODYSTATE_ACTIVE_TAG;\nvar RIGIDBODY_ISLAND_SLEEPING = BODYSTATE_ISLAND_SLEEPING;\nvar RIGIDBODY_WANTS_DEACTIVATION = BODYSTATE_WANTS_DEACTIVATION;\nvar RIGIDBODY_DISABLE_DEACTIVATION = BODYSTATE_DISABLE_DEACTIVATION;\nvar RIGIDBODY_DISABLE_SIMULATION = BODYSTATE_DISABLE_SIMULATION;\nvar fw = {\n\tApplication: Application,\n\tComponent: Component,\n\tComponentSystem: ComponentSystem,\n\tEntity: Entity,\n\tFillMode: {\n\t\tNONE: FILLMODE_NONE,\n\t\tFILL_WINDOW: FILLMODE_FILL_WINDOW,\n\t\tKEEP_ASPECT: FILLMODE_KEEP_ASPECT\n\t},\n\tResolutionMode: {\n\t\tAUTO: RESOLUTION_AUTO,\n\t\tFIXED: RESOLUTION_FIXED\n\t}\n};\n\nApplication.prototype.isFullscreen = function () {\n\treturn !!document.fullscreenElement;\n};\n\nApplication.prototype.enableFullscreen = function (element, success, error) {\n\telement = element || this.graphicsDevice.canvas;\n\n\tvar s = function s() {\n\t\tsuccess();\n\t\tdocument.removeEventListener('fullscreenchange', s);\n\t};\n\n\tvar e = function e() {\n\t\terror();\n\t\tdocument.removeEventListener('fullscreenerror', e);\n\t};\n\n\tif (success) {\n\t\tdocument.addEventListener('fullscreenchange', s, false);\n\t}\n\n\tif (error) {\n\t\tdocument.addEventListener('fullscreenerror', e, false);\n\t}\n\n\tif (element.requestFullscreen) {\n\t\telement.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t} else {\n\t\terror();\n\t}\n};\n\nApplication.prototype.disableFullscreen = function (success) {\n\tvar s = function s() {\n\t\tsuccess();\n\t\tdocument.removeEventListener('fullscreenchange', s);\n\t};\n\n\tif (success) {\n\t\tdocument.addEventListener('fullscreenchange', s, false);\n\t}\n\n\tdocument.exitFullscreen();\n};\n\nApplication.prototype.getSceneUrl = function (name) {\n\tvar entry = this.scenes.find(name);\n\n\tif (entry) {\n\t\treturn entry.url;\n\t}\n\n\treturn null;\n};\n\nApplication.prototype.loadScene = function (url, callback) {\n\tthis.scenes.loadScene(url, callback);\n};\n\nApplication.prototype.loadSceneHierarchy = function (url, callback) {\n\tthis.scenes.loadSceneHierarchy(url, callback);\n};\n\nApplication.prototype.loadSceneSettings = function (url, callback) {\n\tthis.scenes.loadSceneSettings(url, callback);\n};\n\nObject.defineProperty(CameraComponent.prototype, \"node\", {\n\tget: function () {\n\t\treturn this.entity;\n\t}\n});\nObject.defineProperty(LightComponent.prototype, \"enable\", {\n\tget: function () {\n\t\treturn this.enabled;\n\t},\n\tset: function (value) {\n\t\tthis.enabled = value;\n\t}\n});\n\nModelComponent.prototype.setVisible = function (visible) {\n\tthis.enabled = visible;\n};\n\nObject.defineProperty(ModelComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\treturn null;\n\t},\n\tset: function (type) {}\n});\nObject.defineProperty(RenderComponent.prototype, \"aabb\", {\n\tget: function () {\n\t\treturn null;\n\t},\n\tset: function (type) {}\n});\nObject.defineProperty(RigidBodyComponent.prototype, \"bodyType\", {\n\tget: function () {\n\t\treturn this.type;\n\t},\n\tset: function (type) {\n\t\tthis.type = type;\n\t}\n});\n\nRigidBodyComponent.prototype.syncBodyToEntity = function () {\n\tthis._updateDynamic();\n};\n\nRigidBodyComponentSystem.prototype.setGravity = function () {\n\tif (arguments.length === 1) {\n\t\tthis.gravity.copy(arguments[0]);\n\t} else {\n\t\tthis.gravity.set(arguments[0], arguments[1], arguments[2]);\n\t}\n};\n\nfunction basisSetDownloadConfig(glueUrl, wasmUrl, fallbackUrl) {\n\tbasisInitialize({\n\t\tglueUrl: glueUrl,\n\t\twasmUrl: wasmUrl,\n\t\tfallbackUrl: fallbackUrl,\n\t\tlazyInit: true\n\t});\n}\n\nexport { ABSOLUTE_URL, ACTION_GAMEPAD, ACTION_KEYBOARD, ACTION_MOUSE, ADDRESS_CLAMP_TO_EDGE, ADDRESS_MIRRORED_REPEAT, ADDRESS_REPEAT, ANIM_BLEND_1D, ANIM_BLEND_2D_CARTESIAN, ANIM_BLEND_2D_DIRECTIONAL, ANIM_BLEND_DIRECT, ANIM_CONTROL_STATES, ANIM_EQUAL_TO, ANIM_GREATER_THAN, ANIM_GREATER_THAN_EQUAL_TO, ANIM_INTERRUPTION_NEXT, ANIM_INTERRUPTION_NEXT_PREV, ANIM_INTERRUPTION_NONE, ANIM_INTERRUPTION_PREV, ANIM_INTERRUPTION_PREV_NEXT, ANIM_LESS_THAN, ANIM_LESS_THAN_EQUAL_TO, ANIM_NOT_EQUAL_TO, ANIM_PARAMETER_BOOLEAN, ANIM_PARAMETER_FLOAT, ANIM_PARAMETER_INTEGER, ANIM_PARAMETER_TRIGGER, ANIM_STATE_ANY, ANIM_STATE_END, ANIM_STATE_START, ASPECT_AUTO, ASPECT_MANUAL, ASSET_ANIMATION, ASSET_AUDIO, ASSET_CONTAINER, ASSET_CSS, ASSET_CUBEMAP, ASSET_HTML, ASSET_IMAGE, ASSET_JSON, ASSET_MATERIAL, ASSET_MODEL, ASSET_SCRIPT, ASSET_SHADER, ASSET_TEXT, ASSET_TEXTURE, AXIS_KEY, AXIS_MOUSE_X, AXIS_MOUSE_Y, AXIS_PAD_L_X, AXIS_PAD_L_Y, AXIS_PAD_R_X, AXIS_PAD_R_Y, AnimBinder, AnimClip, AnimClipHandler, AnimComponent, AnimComponentLayer, AnimComponentSystem, AnimController, AnimCurve, AnimData, AnimEvaluator, AnimEvents, AnimSnapshot, AnimStateGraph, AnimStateGraphHandler, AnimTarget, AnimTrack, Animation, AnimationComponent, AnimationComponentSystem, AnimationHandler, Application, Asset, AssetListLoader, AssetReference, AssetRegistry, AudioHandler, AudioListenerComponent, AudioListenerComponentSystem, AudioSourceComponent, AudioSourceComponentSystem, BAKE_COLOR, BAKE_COLORDIR, BLENDEQUATION_ADD, BLENDEQUATION_MAX, BLENDEQUATION_MIN, BLENDEQUATION_REVERSE_SUBTRACT, BLENDEQUATION_SUBTRACT, BLENDMODE_DST_ALPHA, BLENDMODE_DST_COLOR, BLENDMODE_ONE, BLENDMODE_ONE_MINUS_DST_ALPHA, BLENDMODE_ONE_MINUS_DST_COLOR, BLENDMODE_ONE_MINUS_SRC_ALPHA, BLENDMODE_ONE_MINUS_SRC_COLOR, BLENDMODE_SRC_ALPHA, BLENDMODE_SRC_ALPHA_SATURATE, BLENDMODE_SRC_COLOR, BLENDMODE_ZERO, BLEND_ADDITIVE, BLEND_ADDITIVEALPHA, BLEND_MAX, BLEND_MIN, BLEND_MULTIPLICATIVE, BLEND_MULTIPLICATIVE2X, BLEND_NONE, BLEND_NORMAL, BLEND_PREMULTIPLIED, BLEND_SCREEN, BLEND_SUBTRACTIVE, BLUR_BOX, BLUR_GAUSSIAN, BODYFLAG_KINEMATIC_OBJECT, BODYFLAG_NORESPONSE_OBJECT, BODYFLAG_STATIC_OBJECT, BODYGROUP_DEFAULT, BODYGROUP_DYNAMIC, BODYGROUP_ENGINE_1, BODYGROUP_ENGINE_2, BODYGROUP_ENGINE_3, BODYGROUP_KINEMATIC, BODYGROUP_NONE, BODYGROUP_STATIC, BODYGROUP_TRIGGER, BODYGROUP_USER_1, BODYGROUP_USER_2, BODYGROUP_USER_3, BODYGROUP_USER_4, BODYGROUP_USER_5, BODYGROUP_USER_6, BODYGROUP_USER_7, BODYGROUP_USER_8, BODYMASK_ALL, BODYMASK_NONE, BODYMASK_NOT_STATIC, BODYMASK_NOT_STATIC_KINEMATIC, BODYMASK_STATIC, BODYSTATE_ACTIVE_TAG, BODYSTATE_DISABLE_DEACTIVATION, BODYSTATE_DISABLE_SIMULATION, BODYSTATE_ISLAND_SLEEPING, BODYSTATE_WANTS_DEACTIVATION, BODYTYPE_DYNAMIC, BODYTYPE_KINEMATIC, BODYTYPE_STATIC, BUFFER_DYNAMIC, BUFFER_GPUDYNAMIC, BUFFER_STATIC, BUFFER_STREAM, BUTTON_TRANSITION_MODE_SPRITE_CHANGE, BUTTON_TRANSITION_MODE_TINT, BasicMaterial, Batch, BatchGroup, BatchManager, BinaryHandler, BoundingBox, BoundingSphere, Bundle, BundleHandler, BundleRegistry, ButtonComponent, ButtonComponentSystem, CLEARFLAG_COLOR, CLEARFLAG_DEPTH, CLEARFLAG_STENCIL, COMPUPDATED_BLEND, COMPUPDATED_CAMERAS, COMPUPDATED_INSTANCES, COMPUPDATED_LIGHTS, CUBEFACE_NEGX, CUBEFACE_NEGY, CUBEFACE_NEGZ, CUBEFACE_POSX, CUBEFACE_POSY, CUBEFACE_POSZ, CUBEPROJ_BOX, CUBEPROJ_NONE, CULLFACE_BACK, CULLFACE_FRONT, CULLFACE_FRONTANDBACK, CULLFACE_NONE, CURVE_CARDINAL, CURVE_CATMULL, CURVE_LINEAR, CURVE_SMOOTHSTEP, CURVE_SPLINE, CURVE_STEP, Camera, CameraComponent, CameraComponentSystem, CanvasFont, CollisionComponent, CollisionComponentSystem, Color, Command, Component, ComponentSystem, ComponentSystemRegistry, ContactPoint, ContactResult, ContainerHandler, ContainerResource, ContextCreationError, Controller, CssHandler, CubemapHandler, Curve, CurveSet, DETAILMODE_ADD, DETAILMODE_MAX, DETAILMODE_MIN, DETAILMODE_MUL, DETAILMODE_OVERLAY, DETAILMODE_SCREEN, DISTANCE_EXPONENTIAL, DISTANCE_INVERSE, DISTANCE_LINEAR, DefaultAnimBinder, DepthMaterial, ELEMENTTYPE_FLOAT32, ELEMENTTYPE_GROUP, ELEMENTTYPE_IMAGE, ELEMENTTYPE_INT16, ELEMENTTYPE_INT32, ELEMENTTYPE_INT8, ELEMENTTYPE_TEXT, ELEMENTTYPE_UINT16, ELEMENTTYPE_UINT32, ELEMENTTYPE_UINT8, EMITTERSHAPE_BOX, EMITTERSHAPE_SPHERE, EVENT_KEYDOWN, EVENT_KEYUP, EVENT_MOUSEDOWN, EVENT_MOUSEMOVE, EVENT_MOUSEUP, EVENT_MOUSEWHEEL, EVENT_SELECT, EVENT_SELECTEND, EVENT_SELECTSTART, EVENT_TOUCHCANCEL, EVENT_TOUCHEND, EVENT_TOUCHMOVE, EVENT_TOUCHSTART, ElementComponent, ElementComponentSystem, ElementDragHelper, ElementInput, ElementInputEvent, ElementMouseEvent, ElementSelectEvent, ElementTouchEvent, Entity, EntityReference, EventHandler, FILLMODE_FILL_WINDOW, FILLMODE_KEEP_ASPECT, FILLMODE_NONE, FILTER_LINEAR, FILTER_LINEAR_MIPMAP_LINEAR, FILTER_LINEAR_MIPMAP_NEAREST, FILTER_NEAREST, FILTER_NEAREST_MIPMAP_LINEAR, FILTER_NEAREST_MIPMAP_NEAREST, FITTING_BOTH, FITTING_NONE, FITTING_SHRINK, FITTING_STRETCH, FOG_EXP, FOG_EXP2, FOG_LINEAR, FOG_NONE, FONT_BITMAP, FONT_MSDF, FRESNEL_NONE, FRESNEL_SCHLICK, FUNC_ALWAYS, FUNC_EQUAL, FUNC_GREATER, FUNC_GREATEREQUAL, FUNC_LESS, FUNC_LESSEQUAL, FUNC_NEVER, FUNC_NOTEQUAL, FolderHandler, Font, FontHandler, ForwardRenderer, Frustum, GAMMA_NONE, GAMMA_SRGB, GAMMA_SRGBFAST, GAMMA_SRGBHDR, GamePads, GraphNode, GraphicsDevice, HierarchyHandler, HtmlHandler, Http, I18n, INDEXFORMAT_UINT16, INDEXFORMAT_UINT32, INDEXFORMAT_UINT8, INTERPOLATION_CUBIC, INTERPOLATION_LINEAR, INTERPOLATION_STEP, ImageElement, IndexBuffer, IndexedList, JointComponent, JointComponentSystem, JsonHandler, JsonStandardMaterialParser, KEY_0, KEY_1, KEY_2, KEY_3, KEY_4, KEY_5, KEY_6, KEY_7, KEY_8, KEY_9, KEY_A, KEY_ADD, KEY_ALT, KEY_B, KEY_BACKSPACE, KEY_BACK_SLASH, KEY_C, KEY_CAPS_LOCK, KEY_CLOSE_BRACKET, KEY_COMMA, KEY_CONTEXT_MENU, KEY_CONTROL, KEY_D, KEY_DECIMAL, KEY_DELETE, KEY_DIVIDE, KEY_DOWN, KEY_E, KEY_END, KEY_ENTER, KEY_EQUAL, KEY_ESCAPE, KEY_F, KEY_F1, KEY_F10, KEY_F11, KEY_F12, KEY_F2, KEY_F3, KEY_F4, KEY_F5, KEY_F6, KEY_F7, KEY_F8, KEY_F9, KEY_G, KEY_H, KEY_HOME, KEY_I, KEY_INSERT, KEY_J, KEY_K, KEY_L, KEY_LEFT, KEY_M, KEY_META, KEY_MULTIPLY, KEY_N, KEY_NUMPAD_0, KEY_NUMPAD_1, KEY_NUMPAD_2, KEY_NUMPAD_3, KEY_NUMPAD_4, KEY_NUMPAD_5, KEY_NUMPAD_6, KEY_NUMPAD_7, KEY_NUMPAD_8, KEY_NUMPAD_9, KEY_O, KEY_OPEN_BRACKET, KEY_P, KEY_PAGE_DOWN, KEY_PAGE_UP, KEY_PAUSE, KEY_PERIOD, KEY_PRINT_SCREEN, KEY_Q, KEY_R, KEY_RETURN, KEY_RIGHT, KEY_S, KEY_SEMICOLON, KEY_SEPARATOR, KEY_SHIFT, KEY_SLASH, KEY_SPACE, KEY_SUBTRACT, KEY_T, KEY_TAB, KEY_U, KEY_UP, KEY_V, KEY_W, KEY_WINDOWS, KEY_X, KEY_Y, KEY_Z, Key, Keyboard, KeyboardEvent, LAYERID_DEPTH, LAYERID_IMMEDIATE, LAYERID_SKYBOX, LAYERID_UI, LAYERID_WORLD, LAYER_FX, LAYER_GIZMO, LAYER_HUD, LAYER_WORLD, LIGHTFALLOFF_INVERSESQUARED, LIGHTFALLOFF_LINEAR, LIGHTSHAPE_DISK, LIGHTSHAPE_PUNCTUAL, LIGHTSHAPE_RECT, LIGHTSHAPE_SPHERE, LIGHTTYPE_DIRECTIONAL, LIGHTTYPE_OMNI, LIGHTTYPE_POINT, LIGHTTYPE_SPOT, LINEBATCH_GIZMO, LINEBATCH_OVERLAY, LINEBATCH_WORLD, Layer, LayerComposition, LayoutCalculator, LayoutChildComponent, LayoutChildComponentSystem, LayoutGroupComponent, LayoutGroupComponentSystem, Light, LightComponent, LightComponentSystem, Lightmapper, LocalizedAsset, MASK_BAKED, MASK_DYNAMIC, MASK_LIGHTMAP, MOTION_FREE, MOTION_LIMITED, MOTION_LOCKED, MOUSEBUTTON_LEFT, MOUSEBUTTON_MIDDLE, MOUSEBUTTON_NONE, MOUSEBUTTON_RIGHT, Mat3, Mat4, Material, MaterialHandler, Mesh, MeshInstance, Model, ModelComponent, ModelComponentSystem, ModelHandler, Morph, MorphInstance, MorphTarget, Mouse, MouseEvent, Node, ORIENTATION_HORIZONTAL, ORIENTATION_VERTICAL, OrientedBox, PAD_1, PAD_2, PAD_3, PAD_4, PAD_DOWN, PAD_FACE_1, PAD_FACE_2, PAD_FACE_3, PAD_FACE_4, PAD_LEFT, PAD_L_SHOULDER_1, PAD_L_SHOULDER_2, PAD_L_STICK_BUTTON, PAD_L_STICK_X, PAD_L_STICK_Y, PAD_RIGHT, PAD_R_SHOULDER_1, PAD_R_SHOULDER_2, PAD_R_STICK_BUTTON, PAD_R_STICK_X, PAD_R_STICK_Y, PAD_SELECT, PAD_START, PAD_UP, PAD_VENDOR, PARTICLEMODE_CPU, PARTICLEMODE_GPU, PARTICLEORIENTATION_EMITTER, PARTICLEORIENTATION_SCREEN, PARTICLEORIENTATION_WORLD, PARTICLESORT_DISTANCE, PARTICLESORT_NEWER_FIRST, PARTICLESORT_NONE, PARTICLESORT_OLDER_FIRST, PIXELFORMAT_111110F, PIXELFORMAT_A8, PIXELFORMAT_ASTC_4x4, PIXELFORMAT_ATC_RGB, PIXELFORMAT_ATC_RGBA, PIXELFORMAT_DEPTH, PIXELFORMAT_DEPTHSTENCIL, PIXELFORMAT_DXT1, PIXELFORMAT_DXT3, PIXELFORMAT_DXT5, PIXELFORMAT_ETC1, PIXELFORMAT_ETC2_RGB, PIXELFORMAT_ETC2_RGBA, PIXELFORMAT_L8, PIXELFORMAT_L8_A8, PIXELFORMAT_PVRTC_2BPP_RGBA_1, PIXELFORMAT_PVRTC_2BPP_RGB_1, PIXELFORMAT_PVRTC_4BPP_RGBA_1, PIXELFORMAT_PVRTC_4BPP_RGB_1, PIXELFORMAT_R32F, PIXELFORMAT_R4_G4_B4_A4, PIXELFORMAT_R5_G5_B5_A1, PIXELFORMAT_R5_G6_B5, PIXELFORMAT_R8_G8_B8, PIXELFORMAT_R8_G8_B8_A8, PIXELFORMAT_RGB16F, PIXELFORMAT_RGB32F, PIXELFORMAT_RGBA16F, PIXELFORMAT_RGBA32F, PIXELFORMAT_SRGB, PIXELFORMAT_SRGBA, PRIMITIVE_LINELOOP, PRIMITIVE_LINES, PRIMITIVE_LINESTRIP, PRIMITIVE_POINTS, PRIMITIVE_TRIANGLES, PRIMITIVE_TRIFAN, PRIMITIVE_TRISTRIP, PROJECTION_ORTHOGRAPHIC, PROJECTION_PERSPECTIVE, ParticleEmitter, ParticleSystemComponent, ParticleSystemComponentSystem, PhongMaterial, Picker, Plane, PostEffect$1 as PostEffect, PostEffectQueue, ProgramLibrary, Quat, RENDERSTYLE_POINTS, RENDERSTYLE_SOLID, RENDERSTYLE_WIREFRAME, RESOLUTION_AUTO, RESOLUTION_FIXED, RIGIDBODY_ACTIVE_TAG, RIGIDBODY_CF_KINEMATIC_OBJECT, RIGIDBODY_CF_NORESPONSE_OBJECT, RIGIDBODY_CF_STATIC_OBJECT, RIGIDBODY_DISABLE_DEACTIVATION, RIGIDBODY_DISABLE_SIMULATION, RIGIDBODY_ISLAND_SLEEPING, RIGIDBODY_TYPE_DYNAMIC, RIGIDBODY_TYPE_KINEMATIC, RIGIDBODY_TYPE_STATIC, RIGIDBODY_WANTS_DEACTIVATION, Ray, RaycastResult, RenderComponent, RenderComponentSystem, RenderHandler, RenderTarget, ResourceHandler, ResourceLoader, RigidBodyComponent, RigidBodyComponentSystem, SCALEMODE_BLEND, SCALEMODE_NONE, SCROLLBAR_VISIBILITY_SHOW_ALWAYS, SCROLLBAR_VISIBILITY_SHOW_WHEN_REQUIRED, SCROLL_MODE_BOUNCE, SCROLL_MODE_CLAMP, SCROLL_MODE_INFINITE, SEMANTIC_ATTR, SEMANTIC_ATTR0, SEMANTIC_ATTR1, SEMANTIC_ATTR10, SEMANTIC_ATTR11, SEMANTIC_ATTR12, SEMANTIC_ATTR13, SEMANTIC_ATTR14, SEMANTIC_ATTR15, SEMANTIC_ATTR2, SEMANTIC_ATTR3, SEMANTIC_ATTR4, SEMANTIC_ATTR5, SEMANTIC_ATTR6, SEMANTIC_ATTR7, SEMANTIC_ATTR8, SEMANTIC_ATTR9, SEMANTIC_BLENDINDICES, SEMANTIC_BLENDWEIGHT, SEMANTIC_COLOR, SEMANTIC_NORMAL, SEMANTIC_POSITION, SEMANTIC_TANGENT, SEMANTIC_TEXCOORD, SEMANTIC_TEXCOORD0, SEMANTIC_TEXCOORD1, SEMANTIC_TEXCOORD2, SEMANTIC_TEXCOORD3, SEMANTIC_TEXCOORD4, SEMANTIC_TEXCOORD5, SEMANTIC_TEXCOORD6, SEMANTIC_TEXCOORD7, SHADERDEF_DIRLM, SHADERDEF_INSTANCING, SHADERDEF_LM, SHADERDEF_MORPH_NORMAL, SHADERDEF_MORPH_POSITION, SHADERDEF_MORPH_TEXTURE_BASED, SHADERDEF_NOSHADOW, SHADERDEF_SCREENSPACE, SHADERDEF_SKIN, SHADERDEF_TANGENTS, SHADERDEF_UV0, SHADERDEF_UV1, SHADERDEF_VCOLOR, SHADERTAG_MATERIAL, SHADER_DEPTH, SHADER_FORWARD, SHADER_FORWARDHDR, SHADER_PICK, SHADER_SHADOW, SHADOWUPDATE_NONE, SHADOWUPDATE_REALTIME, SHADOWUPDATE_THISFRAME, SHADOW_COUNT, SHADOW_DEPTH, SHADOW_PCF3, SHADOW_PCF5, SHADOW_VSM16, SHADOW_VSM32, SHADOW_VSM8, SORTKEY_DEPTH, SORTKEY_FORWARD, SORTMODE_BACK2FRONT, SORTMODE_CUSTOM, SORTMODE_FRONT2BACK, SORTMODE_MANUAL, SORTMODE_MATERIALMESH, SORTMODE_NONE, SPECOCC_AO, SPECOCC_GLOSSDEPENDENT, SPECOCC_NONE, SPECULAR_BLINN, SPECULAR_PHONG, SPRITETYPE_ANIMATED, SPRITETYPE_SIMPLE, SPRITE_RENDERMODE_SIMPLE, SPRITE_RENDERMODE_SLICED, SPRITE_RENDERMODE_TILED, STENCILOP_DECREMENT, STENCILOP_DECREMENTWRAP, STENCILOP_INCREMENT, STENCILOP_INCREMENTWRAP, STENCILOP_INVERT, STENCILOP_KEEP, STENCILOP_REPLACE, STENCILOP_ZERO, Scene, SceneHandler, SceneRegistry, SceneRegistryItem, SceneSettingsHandler, ScopeId, ScopeSpace, ScreenComponent, ScreenComponentSystem, ScriptAttributes, ScriptComponent, ScriptComponentSystem, ScriptHandler, ScriptLegacyComponent, ScriptLegacyComponentSystem, ScriptRegistry, ScriptType, ScrollViewComponent, ScrollViewComponentSystem, ScrollbarComponent, ScrollbarComponentSystem, Shader, ShaderHandler, SingleContactResult, Skeleton, Skin, SkinBatchInstance, SkinInstance, SortedLoopArray, Sound, SoundComponent, SoundComponentSystem, SoundInstance, SoundInstance3d, SoundManager, SoundSlot, Sprite, SpriteAnimationClip, SpriteComponent, SpriteComponentSystem, SpriteHandler, StandardMaterial, StencilParameters, TEXHINT_ASSET, TEXHINT_LIGHTMAP, TEXHINT_NONE, TEXHINT_SHADOWMAP, TEXTURELOCK_READ, TEXTURELOCK_WRITE, TEXTUREPROJECTION_CUBE, TEXTUREPROJECTION_EQUIRECT, TEXTUREPROJECTION_NONE, TEXTUREPROJECTION_OCTAHEDRAL, TEXTURETYPE_DEFAULT, TEXTURETYPE_RGBE, TEXTURETYPE_RGBM, TEXTURETYPE_SWIZZLEGGGR, TONEMAP_ACES, TONEMAP_ACES2, TONEMAP_FILMIC, TONEMAP_HEJL, TONEMAP_LINEAR, TYPE_FLOAT32, TYPE_INT16, TYPE_INT32, TYPE_INT8, TYPE_UINT16, TYPE_UINT32, TYPE_UINT8, Tags, Template, TemplateHandler, TextElement, TextHandler, Texture, TextureAtlas, TextureAtlasHandler, TextureHandler, TextureParser, Timer, Touch, TouchDevice, TouchEvent, TransformFeedback, UNIFORMTYPE_BOOL, UNIFORMTYPE_BVEC2, UNIFORMTYPE_BVEC3, UNIFORMTYPE_BVEC4, UNIFORMTYPE_FLOAT, UNIFORMTYPE_FLOATARRAY, UNIFORMTYPE_INT, UNIFORMTYPE_IVEC2, UNIFORMTYPE_IVEC3, UNIFORMTYPE_IVEC4, UNIFORMTYPE_MAT2, UNIFORMTYPE_MAT3, UNIFORMTYPE_MAT4, UNIFORMTYPE_TEXTURE2D, UNIFORMTYPE_TEXTURE2D_SHADOW, UNIFORMTYPE_TEXTURE3D, UNIFORMTYPE_TEXTURECUBE, UNIFORMTYPE_TEXTURECUBE_SHADOW, UNIFORMTYPE_VEC2, UNIFORMTYPE_VEC2ARRAY, UNIFORMTYPE_VEC3, UNIFORMTYPE_VEC3ARRAY, UNIFORMTYPE_VEC4, UNIFORMTYPE_VEC4ARRAY, URI, UnsupportedBrowserError, VIEW_CENTER, VIEW_LEFT, VIEW_RIGHT, Vec2, Vec3, Vec4, VertexBuffer, VertexFormat, VertexIterator, VrDisplay, VrManager, WorldClusters, XRDEPTHSENSINGFORMAT_F32, XRDEPTHSENSINGFORMAT_L8A8, XRDEPTHSENSINGUSAGE_CPU, XRDEPTHSENSINGUSAGE_GPU, XRHAND_LEFT, XRHAND_NONE, XRHAND_RIGHT, XRSPACE_BOUNDEDFLOOR, XRSPACE_LOCAL, XRSPACE_LOCALFLOOR, XRSPACE_UNBOUNDED, XRSPACE_VIEWER, XRTARGETRAY_GAZE, XRTARGETRAY_POINTER, XRTARGETRAY_SCREEN, XRTRACKABLE_MESH, XRTRACKABLE_PLANE, XRTRACKABLE_POINT, XRTYPE_AR, XRTYPE_INLINE, XRTYPE_VR, XrDepthSensing, XrDomOverlay, XrHitTest, XrHitTestSource, XrImageTracking, XrInput, XrInputSource, XrLightEstimation, XrManager, XrPlane, XrPlaneDetection, XrTrackedImage, ZoneComponent, ZoneComponentSystem, anim, app, apps, asset, audio, basisInitialize, basisSetDownloadConfig, basisTranscode, calculateNormals, calculateTangents, common, config, createBox, createCapsule, createCone, createCylinder, createMesh$1 as createMesh, createPlane, createScript, createSphere, createStyle, createTorus, createURI, data, debug, drawFullscreenQuad, drawQuadWithShader, drawTexture, events, extend, fw, getTouchTargetCoords, gfx, guid, http, inherits, input, isDefined, log, makeArray, math, now, path, platform, posteffect, prefilterCubemap, programlib, registerScript, reprojectTexture, revision, scene, script, semanticToLocation, shFromCubemap, shaderChunks, shape, string, time, type$1 as type, typedArrayIndexFormats, typedArrayIndexFormatsByteSize, typedArrayToType, typedArrayTypes, typedArrayTypesByteSize, version };\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n"],"sourceRoot":""}